/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{p as o}from"./floatRGBA.js";import{e as t}from"./mathUtils.js";const a=o=>"vertical"===o||"horizontal"===o||"cross"===o||"esriSFSCross"===o||"esriSFSVertical"===o||"esriSFSHorizontal"===o;function r(o,r,e){const i=t(Math.ceil(e)),s=a(r)?8*i:16*i,n=2*i;o.width=s,o.height=s;const l=o.getContext("2d");l.strokeStyle="#FFFFFF",l.lineWidth=i,l.beginPath(),"vertical"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSVertical"!==r||(l.moveTo(s/2,-n),l.lineTo(s/2,s+n)),"horizontal"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSHorizontal"!==r||(l.moveTo(-n,s/2),l.lineTo(s+n,s/2)),"forward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSDiagonalCross"!==r&&"esriSFSForwardDiagonal"!==r||(l.moveTo(-n,-n),l.lineTo(s+n,s+n),l.moveTo(s-n,-n),l.lineTo(s+n,n),l.moveTo(-n,s-n),l.lineTo(n,s+n)),"backward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSBackwardDiagonal"!==r&&"esriSFSDiagonalCross"!==r||(l.moveTo(s+n,-n),l.lineTo(-n,s+n),l.moveTo(n,-n),l.lineTo(-n,n),l.moveTo(s+n,s-n),l.lineTo(s-n,s+n)),l.stroke();const h=l.getImageData(0,0,o.width,o.height),c=new Uint8Array(h.data);let m;for(let o=0;o<c.length;o+=4)m=c[o+3]/255,c[o]=c[o]*m,c[o+1]=c[o+1]*m,c[o+2]=c[o+2]*m;return[c,o.width,o.height]}function e(t,a){const r="Butt"===a,e="Square"===a,i=!r&&!e;t.length%2==1&&(t=[...t,...t]);const s=15.5;let n=0;for(const o of t)n+=o;const l=Math.round(n*s),h=new Float32Array(31*l),c=7.75;let m=0,S=0,F=.5,g=!0;for(const o of t){for(m=S,S+=o*s;F<=S;){let o=.5;for(;o<31;){const t=(o-.5)*l+F-.5,a=i?(o-s)*(o-s):Math.abs(o-s);h[t]=g?r?Math.max(Math.max(m+c-F,a),Math.max(F-S+c,a)):a:i?Math.min((F-m)*(F-m)+a,(F-S)*(F-S)+a):e?Math.min(Math.max(F-m,a),Math.max(S-F,a)):Math.min(Math.max(F-m+c,a),Math.max(S+c-F,a)),o++}F++}g=!g}const T=h.length,d=new Uint8Array(4*T);for(let t=0;t<T;++t){const a=(i?Math.sqrt(h[t]):h[t])/s;o(a,d,4*t)}return[d,l,31]}export{e as a,r};
