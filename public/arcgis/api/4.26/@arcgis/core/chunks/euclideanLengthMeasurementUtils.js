/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{i as t,a as n}from"./maybe.js";import{c as r}from"./quantityUtils.js";import{f as e,X as i,Y as a}from"./unitUtils.js";import{D as o,s,d as c}from"./vec3.js";import{projectVectorToVector as u}from"../geometry/projection.js";import{c as l}from"./measurementUtils2.js";var f;function p(t){return m(t,f.Direct)}function h(t){return m(t,f.Horizontal)}function m(t,e){const{hasZ:i,spatialReference:o}=t,s=l(o);let c=0;const u=a(s);if(n(u))return null;const p=e===f.Direct?Z:d;for(const r of t.paths){if(r.length<2)continue;const t=r.length-1;for(let e=0;e<t;++e){const t=r[e];D[0]=t[0],D[1]=t[1],D[2]=i?t[2]:0;const a=r[e+1];g[0]=a[0],g[1]=a[1],g[2]=i?a[2]:0;const s=p(D,g,o);if(n(s))return null;c+=s.value}}return r(c,u)}function z(t,n){const{spatialReference:r}=t;return e(r,n.spatialReference)?(D[0]=t.x,D[1]=t.y,D[2]=t.hasZ?t.z:0,g[0]=n.x,g[1]=n.y,g[2]=n.hasZ?n.z:0,Z(D,g,r)):null}function y(t,n){const{spatialReference:r}=t;return e(r,n.spatialReference)?(D[0]=t.x,D[1]=t.y,D[2]=t.hasZ?t.z:0,g[0]=n.x,g[1]=n.y,g[2]=n.hasZ?n.z:0,d(D,g,r)):null}function x(t,n){const{spatialReference:r}=t;return e(r,n.spatialReference)?(D[0]=t.x,D[1]=t.y,D[2]=t.hasZ?t.z:0,g[0]=n.x,g[1]=n.y,g[2]=n.hasZ?n.z:0,j(D,g,r)):null}function R(n){return D[0]=n.x,D[1]=n.y,D[2]=n.hasZ?n.z:0,function(n,e){const a=i(e);return t(a)?r(n[2],a):null}(D,n.spatialReference)}function Z(n,e,i){const a=v(n,e,i,f.Direct);return t(a)?r(a.direct,a.unit):null}function d(n,e,i){const a=v(n,e,i,f.Horizontal);return t(a)?r(a.horizontal,a.unit):null}function j(n,e,i){const a=v(n,e,i,f.Vertical);return t(a)?r(a.verticalSigned,a.unit):null}function v(t,r,e,i){const c=l(e),p=a(c);if(n(p))return null;const h=r[2]-t[2];if(i===f.Vertical)return{verticalSigned:h,unit:p};if(!u(t,e,H,c)||!u(r,e,V,c))return null;if(i===f.Direct)return{direct:o(V,H),unit:p};if(s(b,t[0],t[1],r[2]),!u(b,e,b,c))return null;const m=o(b,V);return i===f.Horizontal?{horizontal:m,unit:p}:{direct:o(V,H),horizontal:m,vertical:Math.abs(h),unit:p}}!function(t){t[t.Direct=0]="Direct",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(f||(f={}));const D=c(),g=c(),H=c(),V=c(),b=c();export{z as a,h as b,p as c,y as d,Z as e,d as f,R as g,j as h,x as v};
