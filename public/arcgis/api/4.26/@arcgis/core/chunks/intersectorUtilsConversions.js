/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{i as r,a as t,g as e}from"./maybe.js";import{w as a}from"./mat4.js";import{d as n}from"./vec3.js";import{m as i}from"./aaBoundingBox.js";import{g as s}from"./sphere.js";import{i as o,I as c,G as u,L as l,b as p,c as g}from"./Intersector2.js";import{i as d,a as h}from"./Intersector.js";import{i as f}from"./Intersector3.js";class m extends u{constructor(r,t,e,a){super(t,e),this.point=r,this.createGraphic=a}}function y(r){return o(r)&&r.intersector===c.PCL&&!!r.target}class I extends l{constructor(r,t,e,a,n){super(r),this.layerUid=r,this.sublayerUid=t,this.nodeIndex=e,this.componentIndex=a,this.triangleNr=n}}class V extends u{constructor(r,t,e){super(t,null),this.point=r,this.createVoxelGraphic=e}}function b(r){return o(r)&&r.intersector===c.I3S&&!!r.target}function j(r){return o(r)&&r.intersector===c.VOXEL&&!!r.target}function U(r,t){return p(r)||g(r)?B(r.target?.object.metadata,t):d(r)?t.map?.ground:y(r)||b(r)||h(r)||j(r)?B(r.target,t):null}function x(t,e){const a=L(t,e);return r(a)&&"graphic"===a.type?a.graphic:null}function L(e,a){if(t(e))return null;if(p(e)||g(e))return w(e.target?.object.metadata,a);if(y(e)){const r=e.target.createGraphic();return{type:"graphic",graphic:r,layer:r.layer}}if(j(e)){const r=e.target.createVoxelGraphic();return{type:"graphic",graphic:r,layer:r.layer}}return h(e)||f(e)?w(e.target,a):b(e)?function(e,a){const n=B(e,a);if(t(n))return null;const i=a.allLayerViews.find((r=>r.layer===n));return i&&!i.suspended&&"getGraphicFromIntersectorTarget"in i?(s=i.getGraphicFromIntersectorTarget(e),r(s)?{type:"graphic",graphic:s,layer:s.layer}:null):null;var s}(e.target,a):null}function w(r,e){if(t(r)||t(r.graphicUid))return null;const a=B(r,e);if(t(a))return null;if(a===e.graphics)return t(e.graphicsView)||"number"!=typeof r.graphicUid?null:e.graphicsView.getHit(r.graphicUid);const n=e.allLayerViews.find((r=>r.layer===a));return!n||n.suspended||t(r.graphicUid)?null:"getHit"in n?n.getHit(r.graphicUid):null}function B(e,a){return!e||t(e.layerUid)?null:r(a.graphicsView)&&e.layerUid===a.graphicsView.processor.layer.id?a.graphics:a.map.findLayerByUid(e.layerUid)}function G(r,n){if(p(r)||g(r))return s(r.target.object.boundingVolumeWorldSpace.bounds);if(f(r)){a(F,r.transformation);const t=Math.max(F[0],F[1],F[2]);return r.target.baseBoundingSphere.radius*t}return b(r)?e(function(r,e){const a=B(r,e);if(t(a))return null;const n=e.allLayerViews.find((r=>r.layer===a));return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(r):null}(r.target,n),(r=>.5*i(r))):null}function A(r){return!p(r)&&!g(r)&&(f(r)?r.target.numLodLevels>1:!!b(r))}const F=n();export{I,m as P,V,L as a,U as b,G as g,A as h,b as i,x as t};
