/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{i as t,a as e}from"./maybe.js";import{g as n}from"./unitUtils.js";import{r,o as i,p as o}from"./mat4.js";import{c as s}from"./mat4f64.js";import{C as a,O as u}from"./vec3.js";import{s as m}from"./vec4.js";import{d as l,O as c}from"./vec4f64.js";import{projectPoint as f}from"../geometry/projection.js";import{w as p,q as h,r as g}from"./aaBoundingBox.js";import{c as y}from"./aaBoundingRect.js";import{d,a as x,r as j}from"../geometry/Polygon.js";import{m as b}from"./dehydratedFeatures.js";import{i as v,c as w}from"./hydratedFeatures.js";import{V as z}from"./VertexAttribute.js";function A(t,e){if("point"===t.type)return P(t,e,!1);if(v(t))switch(t.type){case"extent":return P(t.center,e,!1);case"polygon":return P(t.centroid,e,!1);case"polyline":return P(M(t),e,!0);case"mesh":return P(t.origin,e,!1)}else switch(t.type){case"extent":return P(function(t){return b(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}(t),e,!0);case"polygon":return P(function(t){const e=t.rings[0];if(!e||0===e.length)return null;const n=j(t.rings,!!t.hasZ);return b(n[0],n[1],n[2],t.spatialReference)}(t),e,!0);case"polyline":return P(M(t),e,!0)}}function M(t){const e=t.paths[0];if(!e||0===e.length)return null;const n=d(e,x(e)/2);return b(n[0],n[1],n[2],t.spatialReference)}function P(t,e,n){const r=n?t:w(t);return e&&t?f(t,r,e)?r:null:r}function R(t,e,n,r=0){if(t){e||(e=y());const i=t;let o=.5*i.width*(n-1),s=.5*i.height*(n-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),m(e,i.xmin-o-r,i.ymin-s-r,i.xmax+o+r,i.ymax+s+r),e}return null}function F(t,e){for(let n=0;n<t.geometries.length;++n){const r=t.geometries[n].getMutableAttribute(z.AUXPOS1);r&&r.data[3]!==e&&(r.data[3]=e,t.geometryVertexAttrsUpdated(t.geometries[n]))}}function B(e,n){const r=l(c);return t(e)&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),t(n)?r[3]=n:t(e)&&e.length>3&&(r[3]=e[3]),r}function D(e,n,r,i,o,s=[0,0,0,0]){for(let n=0;n<3;++n)t(e)&&null!=e[n]?s[n]=e[n]:t(r)&&null!=r[n]?s[n]=r[n]:s[n]=o[n];return t(n)?s[3]=n:t(i)?s[3]=i:s[3]=o[3],s}function I(t=u,n,r,i=1){const o=new Array(3);if(e(n)||e(r))o[0]=1,o[1]=1,o[2]=1;else{let e,i=0;for(let s=2;s>=0;s--){const a=t[s];let u;const m=null!=a,l=0===s&&!e&&!m,c=r[s];"symbol-value"===a||l?u=0!==c?n[s]/c:1:m&&"proportional"!==a&&isFinite(a)&&(u=0!==c?a/c:1),null!=u&&(o[s]=u,e=u,i=Math.max(i,Math.abs(u)))}for(let t=2;t>=0;t--)null==o[t]?o[t]=e:0===o[t]&&(o[t]=.001*i)}for(let t=2;t>=0;t--)o[t]/=i;return a(o)}function O(t){return U(null!=t.isPrimitive?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function U(t){if(Array.isArray(t)){for(const e of t)if(!U(e))return!1;return!0}return null==t||t>=0}function V(t,e,n,a=s()){const u=t||0,m=e||0,l=n||0;return 0!==u&&r(a,a,-u/180*Math.PI),0!==m&&i(a,a,m/180*Math.PI),0!==l&&o(a,a,l/180*Math.PI),a}function S(t,e,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=n(e),o=p(t)*i,s=h(t)*i,a=g(t)*(e.isGeographic?1:i);return 0===o&&0===s&&0===a?r.minDemResolutionForPoints:.01*Math.max(o,s,a)}export{I as a,V as b,A as c,S as d,R as e,U as i,B as m,D as o,F as u,O as v};
