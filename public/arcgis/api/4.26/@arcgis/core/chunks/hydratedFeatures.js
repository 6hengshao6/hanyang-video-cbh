/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import"../geometry.js";import e from"../Graphic.js";import{g as t,j as a}from"./typedArrayUtil.js";import{clone as r}from"../core/lang.js";import{a as n}from"./maybe.js";import{fromJSON as s}from"../geometry/support/jsonUtils.js";import{m as i}from"./dehydratedFeatures.js";import o from"../geometry/SpatialReference.js";function m(e){return"declaredClass"in e}function l(e){return"declaredClass"in e}function c(t,a){return t?function(e){return"declaredClass"in e}(t)?t:new e({layer:a,sourceLayer:a,visible:t.visible,symbol:r(t.symbol),attributes:r(t.attributes),geometry:u(t.geometry)}):null}function u(e){return n(e)?null:m(e)?e:s(function(e){const{wkid:t,wkt:a,latestWkid:r}=e.spatialReference,n={wkid:t,wkt:a,latestWkid:r};switch(e.type){case"point":{const{x:t,y:a,z:r,m:s}=e;return{x:t,y:a,z:r,m:s,spatialReference:n}}case"polygon":{const{rings:t,hasZ:a,hasM:r}=e;return{rings:f(t),hasZ:a,hasM:r,spatialReference:n}}case"polyline":{const{paths:t,hasZ:a,hasM:r}=e;return{paths:f(t),hasZ:a,hasM:r,spatialReference:n}}case"extent":{const{xmin:t,xmax:a,ymin:r,ymax:s,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u}=e;return{xmin:t,xmax:a,ymin:r,ymax:s,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u,spatialReference:n}}case"multipoint":{const{points:t,hasZ:a,hasM:r}=e;return{points:h(t)?p(t):t,hasZ:a,hasM:r,spatialReference:n}}default:return}}(e))}function f(e){return function(e){for(const t of e)if(0!==t.length)return h(t);return!1}(e)?e.map((e=>p(e))):e}function p(e){return e.map((e=>Array.from(e)))}function h(e){return e.length>0&&(t(e[0])||a(e[0]))}function y(e,t){if(!e)return null;let a;if(l(e)){if(null==t)return e.clone();if(l(t))return t.copy(e)}return null!=t?(a=t,a.x=e.x,a.y=e.y,a.spatialReference=e.spatialReference,e.hasZ?(a.z=e.z,a.hasZ=e.hasZ):(a.z=void 0,a.hasZ=!1),e.hasM?(a.m=e.m,a.hasM=!0):(a.m=void 0,a.hasM=!1)):(a=i(e.x,e.y,e.z,e.spatialReference),e.hasM&&(a.m=e.m,a.hasM=!0)),a}function d(e){const{wkid:t,wkt:a,latestWkid:r}=e,n={wkid:t,wkt:a,latestWkid:r};return o.fromJSON(n)}export{u as a,c as b,y as c,d as h,m as i};
