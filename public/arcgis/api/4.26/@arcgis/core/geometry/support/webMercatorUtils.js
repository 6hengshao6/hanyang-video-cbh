/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
import{clone as t}from"../../core/lang.js";import{a as n}from"../../chunks/maybe.js";import s from"../SpatialReference.js";import{e as r}from"../../chunks/Ellipsoid.js";import{f as i,b as e,i as o}from"../../chunks/unitUtils.js";import"../../chunks/typedArrayUtil.js";import"../../chunks/tslib.es6.js";import"../../core/JSONSupport.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/metadata.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/tracking.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/string.js";import"../../chunks/ensureType.js";import"../../core/Error.js";import"../../chunks/get.js";import"../../chunks/ArrayPool.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/watch.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../core/promiseUtils.js";import"../../chunks/writer.js";import"../../chunks/jsonMap.js";const c=57.29577951308232,p=.017453292519943;function a(t){return t*c}function u(t){return t*p}function h(t){return t/r.radius}function m(t){return Math.PI/2-2*Math.atan(Math.exp(-t/r.radius))}function l(t){return null!=t.wkid||null!=t.wkt}const f=[0,0];function j(t,n,s,r,i){const e=t,o=i;if(o.spatialReference=s,"x"in e&&"x"in o)[o.x,o.y]=n(e.x,e.y,f,r);else if("xmin"in e&&"xmin"in o)[o.xmin,o.ymin]=n(e.xmin,e.ymin,f,r),[o.xmax,o.ymax]=n(e.xmax,e.ymax,f,r);else if("paths"in e&&"paths"in o||"rings"in e&&"rings"in o){const t="paths"in e?e.paths:e.rings,s=[];let i;for(let e=0;e<t.length;e++){const o=t[e];i=[],s.push(i);for(let t=0;t<o.length;t++)i.push(n(o[t][0],o[t][1],[0,0],r)),o[t].length>2&&i[t].push(o[t][2]),o[t].length>3&&i[t].push(o[t][3])}"paths"in o?o.paths=s:o.rings=s}else if("points"in e&&"points"in o){const t=e.points,s=[];for(let i=0;i<t.length;i++)s[i]=n(t[i][0],t[i][1],[0,0],r),t[i].length>2&&s[i].push(t[i][2]),t[i].length>3&&s[i].push(t[i][3]);o.points=s}return i}function k(t,n){const s=t&&(l(t)?t:t.spatialReference),r=n&&(l(n)?n:n.spatialReference);return!(t&&"type"in t&&"mesh"===t.type||n&&"type"in n&&"mesh"===n.type||!s||!r)&&(!!i(r,s)||e(r)&&o(s)||e(s)&&o(r))}function g(r,c){if(n(r))return null;const p=r.spatialReference,a=c&&(l(c)?c:c.spatialReference);return k(p,a)?i(p,a)?t(r):e(a)?j(r,x,s.WebMercator,!1,t(r)):o(a)?j(r,y,s.WGS84,!1,t(r)):null:null}function x(t,n,s=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const i=u(n);return s[0]=u(t)*r.radius,s[1]=r.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),s}function y(t,n,s=[0,0],i=!1){const e=a(t/r.radius);return s[0]=i?e:e-360*Math.floor((e+180)/360),s[1]=a(Math.PI/2-2*Math.atan(Math.exp(-n/r.radius))),s}function d(n,r=!1,i=t(n)){return j(n,x,s.WebMercator,r,i)}function M(n,r=!1,i=t(n)){return j(n,y,s.WGS84,r,i)}export{k as canProject,d as geographicToWebMercator,x as lngLatToXY,g as project,M as webMercatorToGeographic,h as x2lon,y as xyToLngLat,m as y2lat};
