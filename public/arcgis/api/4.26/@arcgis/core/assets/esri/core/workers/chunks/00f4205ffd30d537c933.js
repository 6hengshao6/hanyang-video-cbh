"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2090,5777,279],{93314:(e,t,n)=>{n.d(t,{Z:()=>f});var s,i=n(29768),r=n(12047),o=n(71252),a=n(35197),l=n(34250),h=(n(91306),n(48578),n(97714)),c=n(17533),u=n(2906);n(21972),n(60474),n(66396),n(76506),n(86656),n(92143),n(31450),n(71552),n(40642),n(91055),n(6540),n(19657),n(6906),n(50406),n(60991);let d=s=class extends r.wq{static get allTime(){return m}static get empty(){return p}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(s.allTime)}get isEmpty(){return this.equals(s.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new s({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=(0,o.i)(this.start)?this.start.getTime():this.start,n=(0,o.i)(this.end)?this.end.getTime():this.end,s=(0,o.i)(e.start)?e.start.getTime():e.start,i=(0,o.i)(e.end)?e.end.getTime():e.end;return t===s&&n===i}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=(0,o.g)(this.start,(t=>(0,a.t)(t,e))),n=(0,o.g)(this.end,(t=>{const n=(0,a.t)(t,e);return t.getTime()===n.getTime()?n:(0,a.o)(n,1,e)}));return new s({start:t,end:n})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return s.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=(0,o.m)(this.start,-1/0,(e=>e.getTime())),n=(0,o.m)(this.end,1/0,(e=>e.getTime())),i=(0,o.m)(e.start,-1/0,(e=>e.getTime())),r=(0,o.m)(e.end,1/0,(e=>e.getTime()));let a,l;if(i>=t&&i<=n?a=i:t>=i&&t<=r&&(a=t),n>=i&&n<=r?l=n:r>=t&&r<=n&&(l=r),null!=a&&null!=l&&!isNaN(a)&&!isNaN(l)){const e=new s;return e.start=a===-1/0?null:new Date(a),e.end=l===1/0?null:new Date(l),e}return s.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const n=new s,{start:i,end:r}=this;return(0,o.i)(i)&&(n.start=(0,a.o)(i,e,t)),(0,o.i)(r)&&(n.end=(0,a.o)(r,e,t)),n}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return m.clone();const t=(0,o.i)(this.start)&&(0,o.i)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=(0,o.i)(this.end)&&(0,o.i)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new s({start:t,end:n})}};(0,i._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"end",void 0),(0,i._)([(0,h.r)("end")],d.prototype,"readEnd",null),(0,i._)([(0,u.w)("end")],d.prototype,"writeEnd",null),(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"isAllTime",null),(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"isEmpty",null),(0,i._)([(0,l.Cb)({type:Date,json:{write:{allowNull:!0}}})],d.prototype,"start",void 0),(0,i._)([(0,h.r)("start")],d.prototype,"readStart",null),(0,i._)([(0,u.w)("start")],d.prototype,"writeStart",null),d=s=(0,i._)([(0,c.j)("esri.TimeExtent")],d);const m=new d,p=new d({start:void 0,end:void 0}),f=d},74395:(e,t,n)=>{n.d(t,{B:()=>a});var s=n(48578),i=n(88994),r=n(92482);const o={minX:0,minY:0,maxX:0,maxY:0};class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.P(9,(0,s.h)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,s)=>{e[t++]=s})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,r.e)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),function(e,t,n){!function(e){o.minX=e[0],o.minY=e[1],o.maxX=e[2],o.maxY=e[3]}(t),e.search(o,n)}(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},88994:(e,t,n)=>{n.d(t,{P:()=>a});var s=n(48578),i=n(71252),r=n(6906),o=n(98576);class a{constructor(e=9,t){this._compareMinX=u,this._compareMinY=d,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),x.prune(),v.prune(),b.prune(),w.prune()}all(e){this._all(this._data,e)}search(e,t){let n=this._data;const s=this._toBBox;if(g(e,n))for(x.clear();n;){for(let i=0,r=n.children.length;i<r;i++){const r=n.children[i],o=n.leaf?s(r):r;g(e,o)&&(n.leaf?t(r):_(e,o)?this._all(r,t):x.push(r))}n=x.pop()}}collides(e){let t=this._data;const n=this._toBBox;if(!g(e,t))return!1;for(x.clear();t;){for(let s=0,i=t.children.length;s<i;s++){const i=t.children[s],r=t.leaf?n(i):i;if(g(e,r)){if(t.leaf||_(e,r))return!0;x.push(i)}}t=x.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new C([]),this}remove(e){if(!e)return this;let t,n=this._data,r=null,o=0,a=!1;const l=this._toBBox(e);for(b.clear(),w.clear();n||b.length>0;){if(n||(n=(0,i.b)(b.pop()),r=b.data[b.length-1],o=w.pop()??0,a=!0),n.leaf&&(t=(0,s.l)(n.children,e,n.children.length,n.indexHint),-1!==t))return n.children.splice(t,1),b.push(n),this._condense(b),this;a||n.leaf||!_(n,l)?r?(o++,n=r.children[o],a=!1):n=null:(b.push(n),w.push(o),o=0,r=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_all(e,t){let n=e;for(v.clear();n;){if(!0===n.leaf)for(const e of n.children)t(e);else v.pushArray(n.children);n=v.pop()??null}}_build(e,t,n,s){const i=n-t+1;let r=this._maxEntries;if(i<=r){const s=new C(e.slice(t,n+1));return l(s,this._toBBox),s}s||(s=Math.ceil(Math.log(i)/Math.log(r)),r=Math.ceil(i/r**(s-1)));const o=new R([]);o.height=s;const a=Math.ceil(i/r),h=a*Math.ceil(Math.sqrt(r));y(e,t,n,h,this._compareMinX);for(let i=t;i<=n;i+=h){const t=Math.min(i+h-1,n);y(e,i,t,a,this._compareMinY);for(let n=i;n<=t;n+=a){const i=Math.min(n+a-1,t);o.children.push(this._build(e,n,i,s-1))}}return l(o,this._toBBox),o}_chooseSubtree(e,t,n,s){for(;s.push(t),!0!==t.leaf&&s.length-1!==n;){let n,s=1/0,o=1/0;for(let a=0,l=t.children.length;a<l;a++){const l=t.children[a],h=m(l),c=(i=e,r=l,(Math.max(r.maxX,i.maxX)-Math.min(r.minX,i.minX))*(Math.max(r.maxY,i.maxY)-Math.min(r.minY,i.minY))-h);c<o?(o=c,s=h<s?h:s,n=l):c===o&&h<s&&(s=h,n=l)}t=n||t.children[0]}var i,r;return t}_insert(e,t,n){const s=this._toBBox,i=n?e:s(e);b.clear();const r=this._chooseSubtree(i,this._data,t,b);for(r.children.push(e),c(r,i);t>=0&&b.data[t].children.length>this._maxEntries;)this._split(b,t),t--;this._adjustParentBBoxes(i,b,t)}_split(e,t){const n=e.data[t],s=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,s);const r=this._chooseSplitIndex(n,i,s);if(!r)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const o=n.children.splice(r,n.children.length-r),a=n.leaf?new C(o):new R(o);a.height=n.height,l(n,this._toBBox),l(a,this._toBBox),t?e.data[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this._data=new R([e,t]),this._data.height=e.height+1,l(this._data,this._toBBox)}_chooseSplitIndex(e,t,n){let s,i,r;s=i=1/0;for(let o=t;o<=n-t;o++){const t=h(e,0,o,this._toBBox),a=h(e,o,n,this._toBBox),l=f(t,a),c=m(t)+m(a);l<s?(s=l,r=o,i=c<i?c:i):l===s&&c<i&&(i=c,r=o)}return r}_chooseSplitAxis(e,t,n){const s=e.leaf?this._compareMinX:u,i=e.leaf?this._compareMinY:d;this._allDistMargin(e,t,n,s)<this._allDistMargin(e,t,n,i)&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const i=this._toBBox,r=h(e,0,t,i),o=h(e,n-t,n,i);let a=p(r)+p(o);for(let s=t;s<n-t;s++){const t=e.children[s];c(r,e.leaf?i(t):t),a+=p(r)}for(let s=n-t-1;s>=t;s--){const t=e.children[s];c(o,e.leaf?i(t):t),a+=p(o)}return a}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)c(t.data[s],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const n=e.data[t];if(0===n.children.length)if(t>0){const i=e.data[t-1],r=i.children;r.splice((0,s.l)(r,n,r.length,i.indexHint),1)}else this.clear();else l(n,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){h(e,0,e.children.length,t,e)}function h(e,t,n,s,i){i||(i=new C([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let r,o=t;o<n;o++)r=e.children[o],c(i,e.leaf?s(r):r);return i}function c(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function u(e,t){return e.minX-t.minX}function d(e,t){return e.minY-t.minY}function m(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){const n=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,r-s)}function _(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function y(e,t,n,s,r){const a=[t,n];for(;a.length;){const t=(0,i.b)(a.pop()),n=(0,i.b)(a.pop());if(t-n<=s)continue;const l=n+Math.ceil((t-n)/s/2)*s;(0,o.q)(e,l,n,t,r),a.push(n,l,l,t)}}const x=new r.P,v=new r.P,b=new r.P,w=new r.P({deallocator:void 0});class P{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class M extends P{constructor(){super(...arguments),this.height=1,this.indexHint=new s.P}}class C extends M{constructor(e){super(),this.children=e,this.leaf=!0}}class R extends M{constructor(e){super(),this.children=e,this.leaf=!1}}},23771:(e,t,n)=>{n.d(t,{W:()=>u});var s=n(29768),i=n(21972),r=n(82933),o=n(71252),a=n(58085),l=n(6906),h=n(34250),c=n(17533);let u=class extends i.Z{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new r.Z,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,t,n={}){return this._installWatch(e,t,n,a.YP)}addWhen(e,t,n={}){return this._installWatch(e,t,n,a.gx)}addOnCollectionChange(e,t,{initial:n=!1,final:s=!1}={}){const i=++this._handleId;return this._handles.add([(0,a.on)(e,"after-changes",this._createSyncUpdatingCallback(),a.Z_),(0,a.on)(e,"change",t,{onListenerAdd:n?e=>t({added:e.toArray(),removed:[]}):void 0,onListenerRemove:s?e=>t({added:[],removed:e.toArray()}):void 0})],i),{remove:()=>this._handles.remove(i)}}addPromise(e){if((0,o.a)(e))return e;const t=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(0!==this._pendingPromises.size||this._handles.has(d)||this._set("updating",!1))}},t),this._pendingPromises.add(e),this._set("updating",!0);const n=()=>this._handles.remove(t);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,n={},s){const i=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,i);const r=s(e,t,n);return this._handles.add(r,i),{remove:()=>this._handles.remove(i)}}_installSyncUpdatingWatch(e,t){const n=this._createSyncUpdatingCallback(),s=(0,a.YP)(e,n,{sync:!0,equals:()=>!1});return this._handles.add(s,t),s}_createSyncUpdatingCallback(){return()=>{this._handles.remove(d),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add((0,l.Os)((()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(d))})),d)}}};(0,s._)([(0,h.Cb)({readOnly:!0})],u.prototype,"updating",void 0),u=(0,s._)([(0,c.j)("esri.core.support.WatchUpdatingTracking")],u);const d=-42},5777:(e,t,n)=>{n.d(t,{c:()=>s});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}},10401:(e,t,n)=>{n.d(t,{c:()=>r,r:()=>i});var s=n(15324);function i(e,t,n=s.Z){return t||(t=new n),t===e||(t.removeAll(),(i=e)&&(Array.isArray(i)||"items"in i&&Array.isArray(i.items))?t.addMany(e):e&&t.add(e)),t;var i}function r(e){return e}},26923:(e,t,n)=>{n.d(t,{b:()=>a,c:()=>l,f:()=>i,i:()=>u,m:()=>h,n:()=>c,s:()=>r,t:()=>o});var s=n(29794);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function r(e,t,n,s,i,r,o,a,l,h){return e[0]=t,e[1]=n,e[2]=s,e[3]=i,e[4]=r,e[5]=o,e[6]=a,e[7]=l,e[8]=h,e}function o(e,t){if(e===t){const n=t[1],s=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=s,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function a(e,t){const n=t[0],s=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6],h=t[7],c=t[8],u=c*o-a*h,d=-c*r+a*l,m=h*r-o*l;let p=n*u+s*d+i*m;return p?(p=1/p,e[0]=u*p,e[1]=(-c*s+i*h)*p,e[2]=(a*s-i*o)*p,e[3]=d*p,e[4]=(c*n-i*l)*p,e[5]=(-a*n+i*r)*p,e[6]=m*p,e[7]=(-h*n+s*l)*p,e[8]=(o*n-s*r)*p,e):null}function l(e,t){const n=t[0],s=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6],h=t[7],c=t[8];return e[0]=o*c-a*h,e[1]=i*h-s*c,e[2]=s*a-i*o,e[3]=a*l-r*c,e[4]=n*c-i*l,e[5]=i*r-n*a,e[6]=r*h-o*l,e[7]=s*l-n*h,e[8]=n*o-s*r,e}function h(e,t,n){const s=t[0],i=t[1],r=t[2],o=t[3],a=t[4],l=t[5],h=t[6],c=t[7],u=t[8],d=n[0],m=n[1],p=n[2],f=n[3],_=n[4],g=n[5],y=n[6],x=n[7],v=n[8];return e[0]=d*s+m*o+p*h,e[1]=d*i+m*a+p*c,e[2]=d*r+m*l+p*u,e[3]=f*s+_*o+g*h,e[4]=f*i+_*a+g*c,e[5]=f*r+_*l+g*u,e[6]=y*s+x*o+v*h,e[7]=y*i+x*a+v*c,e[8]=y*r+x*l+v*u,e}function c(e,t){const n=t[0],s=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6],h=t[7],c=t[8],u=t[9],d=t[10],m=t[11],p=t[12],f=t[13],_=t[14],g=t[15],y=n*a-s*o,x=n*l-i*o,v=n*h-r*o,b=s*l-i*a,w=s*h-r*a,P=i*h-r*l,M=c*f-u*p,C=c*_-d*p,R=c*g-m*p,E=u*_-d*f,I=u*g-m*f,B=d*g-m*_;let O=y*B-x*I+v*E+b*R-w*C+P*M;return O?(O=1/O,e[0]=(a*B-l*I+h*E)*O,e[1]=(l*R-o*B-h*C)*O,e[2]=(o*I-a*R+h*M)*O,e[3]=(i*I-s*B-r*E)*O,e[4]=(n*B-i*R+r*C)*O,e[5]=(s*R-n*I-r*M)*O,e[6]=(f*P-_*w+g*b)*O,e[7]=(_*v-p*P-g*x)*O,e[8]=(p*w-f*v+g*y)*O,e):null}function u(e){const t=(0,s.g)(),n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8];return Math.abs(1-(n*n+o*o+h*h))<=t&&Math.abs(1-(i*i+a*a+c*c))<=t&&Math.abs(1-(r*r+l*l+u*u))<=t}},16912:(e,t,n)=>{function s(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,n,s,i,r,o,a,l){return[e,t,n,s,i,r,o,a,l]}function r(e,t){return new Float64Array(e,t,9)}n.d(t,{a:()=>r,c:()=>s,f:()=>i})},94751:(e,t,n)=>{n.d(t,{c:()=>o,g:()=>h,o:()=>a,u:()=>l});var s=n(92896),i=n(60947),r=n(32422);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator}),minus180Line:new s.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s.Z({paths:[[[180,-180],[180,180]]],spatialReference:i.Z.WGS84}),minus180Line:new s.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:i.Z.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const n=h(e);for(const e of n)for(const n of e)n[0]+=t;return e}function h(e){return(0,r.oU)(e)?e.rings:e.paths}},98576:(e,t,n)=>{n.d(t,{q:()=>a});var s,i,r={},o={get exports(){return r},set exports(e){r=e}};s=o,void 0!==(i=function(){function e(n,s,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,l=s-i+1,h=Math.log(a),c=.5*Math.exp(2*h/3),u=.5*Math.sqrt(h*c*(a-c)/a)*(l-a/2<0?-1:1);e(n,s,Math.max(i,Math.floor(s-l*c/a+u)),Math.min(r,Math.floor(s+(a-l)*c/a+u)),o)}var d=n[s],m=i,p=r;for(t(n,i,s),o(n[r],d)>0&&t(n,i,r);m<p;){for(t(n,m,p),m++,p--;o(n[m],d)<0;)m++;for(;o(n[p],d)>0;)p--}0===o(n[i],d)?t(n,i,p):t(n,++p,r),p<=s&&(i=p+1),s<=p&&(r=p-1)}}function t(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function n(e,t){return e<t?-1:e>t?1:0}return function(t,s,i,r,o){e(t,s,i||0,r||t.length-1,o||n)}}())&&(s.exports=i);const a=r},90886:(e,t,n)=>{n.d(t,{g:()=>i});var s=n(32101);function i(e){return r[function(e){return e instanceof Blob?e.type:function(e){const t=(0,s.Ml)(e);return l[t]||o}(e.url)}(e)]||a}const r={},o="text/plain",a=r[o],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const e in l)r[l[e]]=e},3530:(e,t,n)=>{function s(e){return(t,n)=>{t[n]=e}}n.d(t,{s:()=>s})},35197:(e,t,n)=>{n.d(t,{c:()=>a,o:()=>r,t:()=>o}),n(48578);const s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function r(e,t,n){const s=new Date(e.getTime());if(t&&n){const e=i[n],{getter:r,setter:o,multiplier:a}=e;if("months"===n){const e=function(e,t){const n=new Date(e,t+1,1);return n.setDate(0),n.getDate()}(s.getFullYear(),s.getMonth()+t);s.getDate()>e&&s.setDate(e)}s[o](s[r]()+t*a)}return s}function o(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function a(e,t,n){return 0===e?0:e*s[t]/s[n]}},10279:(e,t,n)=>{n.d(t,{g:()=>i});const s="randomUUID"in crypto;function i(){if(s)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}},47880:(e,t,n)=>{function s(e,t,n){return e[0]=t,e[1]=n,e}function i(e,t){const n=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(n*n+s*s)}function r(e,t,n,s){const i=t[0],r=t[1];return e[0]=i+s*(n[0]-i),e[1]=r+s*(n[1]-r),e}function o(e,t,n){const s=t[0],i=t[1];return e[0]=n[0]*s+n[2]*i+n[4],e[1]=n[1]*s+n[3]*i+n[5],e}function a(e,t,n,s){const i=t[0]-n[0],r=t[1]-n[1],o=Math.sin(s),a=Math.cos(s);return e[0]=i*a-r*o+n[0],e[1]=i*o+r*a+n[1],e}n.d(t,{d:()=>i,l:()=>r,r:()=>a,s:()=>s,t:()=>o}),n(29794)},32191:(e,t,n)=>{function s(){return[0,0]}function i(e,t){return[e,t]}function r(e,t){return new Float64Array(e,t,2)}n.d(t,{a:()=>s,c:()=>r,f:()=>i}),i(1,1),i(1,0)},15324:(e,t,n)=>{n.d(t,{Z:()=>O});var s,i,r,o=n(29768),a=n(91055),l=n(75067),h=n(76506),c=n(71252),u=n(6906),d=n(91306),m=n(6540),p=n(34250),f=n(3530),_=n(17533),g=n(89914);n(21972),n(60474),n(66396),n(86656),n(48578),n(92143),n(31450),n(71552),n(40642),n(19657),n(50406),n(60991),(r=s||(s={}))[r.ADD=1]="ADD",r[r.REMOVE=2]="REMOVE",r[r.MOVE=4]="MOVE";const y=new a.O(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),x=()=>{};function v(e){return e?e instanceof B?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function b(e){if(e&&e.length)return e[0]}function w(e,t,n,s){const i=Math.min(e.length-n,t.length-s);let r=0;for(;r<i&&e[n+r]===t[s+r];)r++;return r}function P(e,t,n,s){t&&t.forEach(((t,i,r)=>{e.push(t),P(e,n.call(s,t,i,r),n,s)}))}const M=new Set,C=new Set,R=new Set,E=new Map;let I=0,B=i=class extends l.Z.EventedAccessor{static isCollection(e){return null!=e&&e instanceof i}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new g.S,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:I++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof i?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return(0,m.t)(this._observable),this._items}set items(e){this._emitBeforeChanges(s.ADD)||(this._splice(0,this.length,v(e)),this._emitAfterChanges(s.ADD))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,n={removed:!1,callback:t};return e.push(n),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=x,n.removed=!0,e.splice(e.indexOf(n),1)}}}return this._emitter.on(e,t)}once(e,t){const n=this.on(e,t);return{remove(){n.remove()}}}add(e,t){if((0,m.t)(this._observable),this._emitBeforeChanges(s.ADD))return this;const n=this.getNextIndex(t??null);return this._splice(n,0,[e]),this._emitAfterChanges(s.ADD),this}addMany(e,t=this._items.length){if((0,m.t)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(s.ADD))return this;const n=this.getNextIndex(t);return this._splice(n,0,v(e)),this._emitAfterChanges(s.ADD),this}at(e){if((0,m.t)(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if((0,m.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(s.REMOVE),e}_removeAllRaw(){return 0===this.length?[]:this._splice(0,this.length)||[]}clone(){return(0,m.t)(this._observable),this._createNewInstance({items:this._items.map(h.d9)})}concat(...e){(0,m.t)(this._observable);const t=e.map(v);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if((0,m.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;const n=(0,c.b)(this._splice(0,this.length)),i=n.length;for(let s=0;s<i;s++)e.call(t,n[s],s,n);this._emitAfterChanges(s.REMOVE)}every(e,t){return(0,m.t)(this._observable),this._items.every(e,t)}filter(e,t){let n;return(0,m.t)(this._observable),n=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:n})}find(e,t){return(0,m.t)(this._observable),this._items.find(e,t)}findIndex(e,t){return(0,m.t)(this._observable),this._items.findIndex(e,t)}flatten(e,t){(0,m.t)(this._observable);const n=[];return P(n,this,e,t),new i(n)}forEach(e,t){return(0,m.t)(this._observable),this._items.forEach(e,t)}getItemAt(e){return(0,m.t)(this._observable),this._items[e]}getNextIndex(e){(0,m.t)(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return(0,m.t)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return(0,m.t)(this._observable),this._items.indexOf(e,t)}join(e=","){return(0,m.t)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return(0,m.t)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){(0,m.t)(this._observable);const n=this._items.map(e,t);return new i({items:n})}reorder(e,t=this.length-1){(0,m.t)(this._observable);const n=this.indexOf(e);if(-1!==n){if(t<0?t=0:t>=this.length&&(t=this.length-1),n!==t){if(this._emitBeforeChanges(s.MOVE))return e;this._splice(n,1),this._splice(t,0,[e]),this._emitAfterChanges(s.MOVE)}return e}}pop(){if((0,m.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;const e=b(this._splice(this.length-1,1));return this._emitAfterChanges(s.REMOVE),e}push(...e){return(0,m.t)(this._observable),this._emitBeforeChanges(s.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(s.ADD)),this.length}reduce(e,t){(0,m.t)(this._observable);const n=this._items;return 2===arguments.length?n.reduce(e,t):n.reduce(e)}reduceRight(e,t){(0,m.t)(this._observable);const n=this._items;return 2===arguments.length?n.reduceRight(e,t):n.reduceRight(e)}remove(e){return(0,m.t)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if((0,m.t)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(s.REMOVE))return;const t=b(this._splice(e,1));return this._emitAfterChanges(s.REMOVE),t}removeMany(e){if((0,m.t)(this._observable),!e||!e.length||this._emitBeforeChanges(s.REMOVE))return[];const t=e instanceof i?e.toArray():e,n=this._items,r=[],o=t.length;for(let e=0;e<o;e++){const s=t[e],i=n.indexOf(s);if(i>-1){const s=1+w(t,n,e+1,i+1),o=this._splice(i,s);o&&o.length>0&&r.push.apply(r,o),e+=s-1}}return this._emitAfterChanges(s.REMOVE),r}reverse(){if((0,m.t)(this._observable),this._emitBeforeChanges(s.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(s.MOVE),this}shift(){if((0,m.t)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;const e=b(this._splice(0,1));return this._emitAfterChanges(s.REMOVE),e}slice(e=0,t=this.length){return(0,m.t)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return(0,m.t)(this._observable),this._items.some(e,t)}sort(e){if((0,m.t)(this._observable),!this.length||this._emitBeforeChanges(s.MOVE))return this;const t=(0,c.b)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(s.MOVE),this}splice(e,t,...n){(0,m.t)(this._observable);const i=(t?s.REMOVE:0)|(n.length?s.ADD:0);if(this._emitBeforeChanges(i))return[];const r=this._splice(e,t,n)||[];return this._emitAfterChanges(i),r}toArray(){return(0,m.t)(this._observable),this._items.slice()}toJSON(){return(0,m.t)(this._observable),this.toArray()}toLocaleString(){return(0,m.t)(this._observable),this._items.toLocaleString()}toString(){return(0,m.t)(this._observable),this._items.toString()}unshift(...e){return(0,m.t)(this._observable),!e.length||this._emitBeforeChanges(s.ADD)||(this._splice(0,0,e),this._emitAfterChanges(s.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,n){const s=this._items,i=this.itemType;let r,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,u.Os)((()=>this._dispatchChange()))),t){if(o=s.splice(e,t),this.hasEventListener("before-remove")){const t=y.acquire();t.target=this,t.cancellable=!0;for(let n=0,i=o.length;n<i;n++)r=o[n],t.reset(r),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(n,1),s.splice(e,0,r),e+=1,n-=1,i-=1);y.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=y.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let n=0;n<t;n++)e.reset(o[n]),this.emit("after-remove",e);y.release(e)}}if(n&&n.length){if(i){const e=[];for(const t of n){const n=i.ensureType(t);null==n&&null!=t||e.push(n)}n=e}const t=this.hasEventListener("before-add"),r=this.hasEventListener("after-add"),o=e===this.length;if(t||r){const i=y.acquire();i.target=this,i.cancellable=!0;const a=y.acquire();a.target=this,a.cancellable=!1;for(const l of n)t?(i.reset(l),this.emit("before-add",i),i.defaultPrevented||(o?s.push(l):s.splice(e++,0,l),this._set("length",s.length),r&&(a.reset(l),this.emit("after-add",a)))):(o?s.push(l):s.splice(e++,0,l),this._set("length",s.length),a.reset(l),this.emit("after-add",a));y.release(a),y.release(i)}else{if(o)for(const e of n)s.push(e);else s.splice(e,0,...n);this._set("length",s.length)}}return(n&&n.length||o&&o.length)&&this._notifyChangeEvent(n,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const n=y.acquire();n.target=this,n.cancellable=!0,n.type=e,this.emit("before-changes",n),t=n.defaultPrevented,y.release(n)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=y.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),y.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;M.clear(),C.clear(),R.clear();for(const{added:t,removed:n}of e){if(t)if(0===R.size&&0===C.size)for(const e of t)M.add(e);else for(const e of t)C.has(e)?(R.add(e),C.delete(e)):R.has(e)||M.add(e);if(n)if(0===R.size&&0===M.size)for(const e of n)C.add(e);else for(const e of n)M.has(e)?M.delete(e):(R.delete(e),C.add(e))}const n=a.A.acquire();M.forEach((e=>{n.push(e)}));const s=a.A.acquire();C.forEach((e=>{s.push(e)}));const i=this._items,r=t.items,o=a.A.acquire();if(R.forEach((e=>{r.indexOf(e)!==i.indexOf(e)&&o.push(e)})),t.listeners&&(n.length||s.length||o.length)){const e={target:this,added:n,removed:s,moved:o},i=t.listeners.length;for(let n=0;n<i;n++){const s=t.listeners[n];s.removed||s.callback.call(this,e)}}a.A.release(n),a.A.release(s),a.A.release(o)}M.clear(),C.clear(),R.clear()}};B.ofType=e=>{if(!e)return i;if(E.has(e))return E.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const n in e.typeMap){const s=e.typeMap[n].prototype.declaredClass;t?t+=` | ${s}`:t=s}let n=class extends i{};return(0,o._)([(0,f.s)({Type:e,ensureType:"function"==typeof e?(0,d.e)(e):(0,d.a)(e)})],n.prototype,"itemType",void 0),n=(0,o._)([(0,_.j)(`esri.core.Collection<${t}>`)],n),E.set(e,n),n},(0,o._)([(0,p.Cb)()],B.prototype,"length",void 0),(0,o._)([(0,p.Cb)()],B.prototype,"items",null),B=i=(0,o._)([(0,_.j)("esri.core.Collection")],B);const O=B},95873:(e,t,n)=>{n.d(t,{p:()=>h,r:()=>c});var s=n(29768),i=n(21972),r=n(82933),o=n(34250),a=n(17533),l=n(23771);n(60474),n(66396),n(76506),n(48578),n(86656),n(92143),n(31450),n(71552),n(40642),n(91055),n(6540),n(19657),n(6906),n(50406),n(60991),n(91306),n(58085);const h=e=>{let t=class extends e{constructor(){super(...arguments),this._handles=new r.Z,this._updatingHandles=new l.W}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return(0,s._)([(0,o.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,s._)([(0,o.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,s._)([(0,a.j)("esri.core.HandleOwner")],t),t};let c=class extends(h(i.Z)){};c=(0,s._)([(0,a.j)("esri.core.HandleOwner")],c)},58085:(e,t,n)=>{n.d(t,{N1:()=>u,YP:()=>a,Z_:()=>p,gx:()=>l,nn:()=>f,on:()=>c,tX:()=>_});var s=n(50406),i=n(22723),r=n(71252),o=n(19657);function a(e,t,n={}){return h(e,t,n,d)}function l(e,t,n={}){return h(e,t,n,m)}function h(e,t,n={},s){let i=null;const a=n.once?(e,n)=>{s(e)&&((0,r.r)(i),t(e,n))}:(e,n)=>{s(e)&&t(e,n)};if(i=(0,o.b)(e,a,n.sync,n.equals),n.initial){const t=e();a(t,t)}return i}function c(e,t,n,o={}){let l=null,h=null,c=null;function u(){l&&h&&(h.remove(),o.onListenerRemove?.(l),l=null,h=null)}function d(e){o.once&&o.once&&(0,r.r)(c),n(e)}const m=a(e,((e,n)=>{u(),(0,s.i)(e)&&(l=e,h=(0,s.o)(e,t,d),o.onListenerAdd?.(e))}),{sync:o.sync,initial:!0});return c=(0,i.m)((()=>{m.remove(),u()})),c}function u(e,t){return function(e,t,n){if((0,s.Hc)(n))return Promise.reject((0,s.zE)());const o=e();if(t?.(o))return Promise.resolve(o);let a=null;function l(){a=(0,r.r)(a)}return new Promise(((r,o)=>{a=(0,i.h)([(0,s.fu)(n,(()=>{l(),o((0,s.zE)())})),h(e,(e=>{l(),r(e)}),{sync:!1,once:!0},t??d)])}))}(e,m,t)}function d(e){return!0}function m(e){return!!e}n(48578),n(60991),n(76506),n(92143),n(31450),n(71552),n(40642),n(91055),n(6906),n(60474),n(66396),n(6540);const p={sync:!0},f={initial:!0},_={sync:!0,initial:!0}},22090:(e,t,n)=>{n.r(t),n.d(t,{default:()=>nt});var s=n(29768),i=n(15324),r=n(60991),o=n(92143),a=n(71252),l=n(54179),h=n(34250),c=n(86787),u=(n(48578),n(97714)),d=n(17533),m=n(2906),p=n(41617),f=n(80462),_=n(89440),g=n(6416),y=n(82058),x=n(32101),v=n(10279),b=(n(91306),n(3296)),w=n(12047),P=n(81184),M=n(21972),C=n(26923),R=n(16912),E=n(47880),I=n(72836);const B=(0,I.d)(),O=(0,R.c)(),A=(0,R.c)(),T=(0,R.c)();function S(e,t,n){return(0,I.s)(B,t[0],t[1],1),(0,I.t)(B,B,(0,C.t)(O,n)),0===B[2]?(0,E.s)(e,B[0],B[1]):(0,E.s)(e,B[0]/B[2],B[1]/B[2])}function L(e,t,n,s,i,r,o,a,l){(0,C.s)(e,t,s,r,n,i,o,1,1,1),(0,I.s)(B,a,l,1),(0,C.c)(O,e);const[h,c,u]=(0,I.t)(B,B,(0,C.t)(O,O));return(0,C.s)(O,h,0,0,0,c,0,0,0,u),(0,C.m)(e,O,e)}var D=n(99403),Y=n(32191),j=n(91597),Z=n(44567),X=n(1623),V=n(60947),H=n(66122);let z=class extends H.j{projectOrWarn(e,t){if((0,a.a)(e))return e;const{geometry:n,pending:s}=(0,X.dz)(e,t);return s?null:s||n?n:(o.L.getLogger(this.declaredClass).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:e,sourceSpatialReference:e.spatialReference,targetSpatialReference:t}),null)}};z=(0,s._)([(0,d.j)("esri.layers.support.GeoreferenceBase")],z);const F=z;n(60474),n(66396),n(76506),n(86656),n(91055),n(6540),n(19657),n(6906);var N=n(50406),W=(n(71552),n(31450),n(40642),n(29794)),q=(n(73796),n(53785)),k=(n(57251),n(89623),n(35132),n(21801)),U=n(98380),G=n(92482),J=n(82426);n(7200),n(89914),n(65775),n(84069),n(12381),n(73173),n(88762),n(92896),n(92624),n(92847);const K=(0,R.c)(),$=(0,Y.a)();let Q=class extends M.Z{constructor(){super(...arguments),this.sourcePoint=null,this.mapPoint=null}};(0,s._)([(0,h.Cb)()],Q.prototype,"sourcePoint",void 0),(0,s._)([(0,h.Cb)({type:j.Z})],Q.prototype,"mapPoint",void 0),Q=(0,s._)([(0,d.j)("esri.layers.support.ControlPoint")],Q);let ee=class extends((0,w.eC)(F)){constructor(e){super(e),this.controlPoints=null,this.height=0,this.type="control-points",this.width=0}readControlPoints(e,t){const n=V.Z.fromJSON(t.spatialReference),s=(0,R.f)(...t.coefficients,1);return e.map((e=>((0,E.s)($,e.x,e.y),S($,$,s),{sourcePoint:e,mapPoint:new j.Z({x:$[0],y:$[1],spatialReference:n})})))}writeControlPoints(e,t,n,s){if((0,a.a)(this.transform)){const e=new r.Z("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:s?.layer,georeference:this});s?.messages?s.messages.push(e):o.L.getLogger(this.declaredClass).error(e.name,e.message)}else(0,a.i)(e)&&te(e[0])&&(t.controlPoints=e.map((e=>{const t=(0,a.u)(e.sourcePoint);return{x:t.x,y:t.y}})),t.spatialReference=e[0].mapPoint.spatialReference.toJSON(),t.coefficients=this.transform.slice(0,8))}get coords(){if((0,a.a)(this.controlPoints))return null;const e=this._updateTransform(K);if((0,a.a)(e)||!te(this.controlPoints[0]))return null;const t=this.controlPoints[0].mapPoint.spatialReference;return function(e,t,n,s){const i=(0,Y.f)(0,n),r=(0,Y.f)(0,0),o=(0,Y.f)(t,0),a=(0,Y.f)(t,n);return S(i,i,e),S(r,r,e),S(o,o,e),S(a,a,e),new Z.Z({rings:[[i,r,o,a,i]],spatialReference:s})}(e,this.width,this.height,t)}set coords(e){if((0,a.a)(this.controlPoints)||!te(this.controlPoints[0]))return;const t=this.controlPoints[0].mapPoint.spatialReference;if(e=this.projectOrWarn(e,t),(0,a.a)(e))return;const{width:n,height:s}=this,{rings:[[i,r,o,l]]}=e,h={sourcePoint:(0,D.c)(0,s),mapPoint:new j.Z({x:i[0],y:i[1],spatialReference:t})},c={sourcePoint:(0,D.c)(0,0),mapPoint:new j.Z({x:r[0],y:r[1],spatialReference:t})},u={sourcePoint:(0,D.c)(n,0),mapPoint:new j.Z({x:o[0],y:o[1],spatialReference:t})},d={sourcePoint:(0,D.c)(n,s),mapPoint:new j.Z({x:l[0],y:l[1],spatialReference:t})};te(h)&&te(c)&&te(u)&&te(d)&&(de(K,h,c,u,d),this.controlPoints=(0,a.u)(this.controlPoints).map((({sourcePoint:e})=>((0,E.s)($,e.x,e.y),S($,$,K),{sourcePoint:e,mapPoint:new j.Z({x:$[0],y:$[1],spatialReference:t})}))))}get inverseTransform(){return(0,a.a)(this.transform)?null:(0,C.b)((0,R.c)(),this.transform)}get transform(){return this._updateTransform()}toMap(e){if((0,a.a)(e)||(0,a.a)(this.transform)||(0,a.a)(this.controlPoints)||!te(this.controlPoints[0]))return null;(0,E.s)($,e.x,e.y);const t=this.controlPoints[0].mapPoint.spatialReference;return S($,$,this.transform),new j.Z({x:$[0],y:$[1],spatialReference:t})}toSource(e){if((0,a.a)(e)||(0,a.a)(this.inverseTransform)||(0,a.a)(this.controlPoints)||!te(this.controlPoints[0]))return null;const t=this.controlPoints[0].mapPoint.spatialReference;return e=e.normalize(),e=(0,X.dz)(e,t).geometry,(0,a.a)(e)?null:((0,E.s)($,e.x,e.y),S($,$,this.inverseTransform),(0,D.c)($[0],$[1]))}_updateTransform(e){const{controlPoints:t,width:n,height:s}=this;if((0,a.a)(t)||!(n>0)||!(s>0))return null;const[i,r,o,l]=t;if(!te(i))return null;const h=i.mapPoint.spatialReference,c=this._projectControlPoint(r,h),u=this._projectControlPoint(o,h),d=this._projectControlPoint(l,h);if(!c.valid||!u.valid||!d.valid)return null;if(!te(c.controlPoint))return null;(0,a.a)(e)&&(e=(0,R.c)());let m=null;return m=te(u.controlPoint)&&te(d.controlPoint)?de(e,i,c.controlPoint,u.controlPoint,d.controlPoint):te(u.controlPoint)?function(e,t,n,s){return ue(ne,oe,t),ue(se,ae,n),ue(ie,le,s),(0,E.l)(re,ne,se,.5),(0,E.r)(re,ie,re,Math.PI),(0,E.l)(he,oe,ae,.5),(0,E.r)(he,le,he,Math.PI),_e(e,ne,se,ie,re,oe,ae,le,he)}(e,i,c.controlPoint,u.controlPoint):function(e,t,n){return ue(ne,oe,t),ue(se,ae,n),(0,E.r)(ie,se,ne,ce),(0,E.r)(re,ne,se,ce),(0,E.r)(le,ae,oe,-ce),(0,E.r)(he,oe,ae,-ce),_e(e,ne,se,ie,re,oe,ae,le,he)}(e,i,c.controlPoint),m.every((e=>0===e))?null:m}_projectControlPoint(e,t){if(!te(e))return{valid:!0,controlPoint:e};const{sourcePoint:n,mapPoint:s}=e,{geometry:i,pending:r}=(0,X.dz)(s,t);return r?{valid:!1,controlPoint:null}:r||i?{valid:!0,controlPoint:{sourcePoint:n,mapPoint:i}}:(o.L.getLogger(this.declaredClass).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:e,sourceSpatialReference:s.spatialReference,targetSpatialReference:t}),{valid:!1,controlPoint:null})}};function te(e){return(0,a.i)(e)&&(0,a.i)(e.sourcePoint)&&(0,a.i)(e.mapPoint)}(0,s._)([(0,h.Cb)({type:[Q],json:{write:{allowNull:!1,isRequired:!0}}})],ee.prototype,"controlPoints",void 0),(0,s._)([(0,u.r)("controlPoints")],ee.prototype,"readControlPoints",null),(0,s._)([(0,m.w)("controlPoints")],ee.prototype,"writeControlPoints",null),(0,s._)([(0,h.Cb)()],ee.prototype,"coords",null),(0,s._)([(0,h.Cb)({json:{write:!0}})],ee.prototype,"height",void 0),(0,s._)([(0,h.Cb)({readOnly:!0})],ee.prototype,"inverseTransform",null),(0,s._)([(0,h.Cb)({readOnly:!0})],ee.prototype,"transform",null),(0,s._)([(0,h.Cb)({json:{write:!0}})],ee.prototype,"width",void 0),ee=(0,s._)([(0,d.j)("esri.layers.support.ControlPointsGeoreference")],ee);const ne=(0,Y.a)(),se=(0,Y.a)(),ie=(0,Y.a)(),re=(0,Y.a)(),oe=(0,Y.a)(),ae=(0,Y.a)(),le=(0,Y.a)(),he=(0,Y.a)(),ce=Math.PI/2;function ue(e,t,n){(0,E.s)(e,n.sourcePoint.x,n.sourcePoint.y),(0,E.s)(t,n.mapPoint.x,n.mapPoint.y)}function de(e,t,n,s,i){return ue(ne,oe,t),ue(se,ae,n),ue(ie,le,s),ue(re,he,i),_e(e,ne,se,ie,re,oe,ae,le,he)}const me=new Array(8).fill(0),pe=new Array(8).fill(0);function fe(e,t,n,s,i){return e[0]=t[0],e[1]=t[1],e[2]=n[0],e[3]=n[1],e[4]=s[0],e[5]=s[1],e[6]=i[0],e[7]=i[1],e}function _e(e,t,n,s,i,r,o,a,l){return function(e,t,n){return L(A,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),L(T,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),(0,C.m)(e,(0,C.c)(A,A),T),0!==e[8]&&(e[0]/=e[8],e[1]/=e[8],e[2]/=e[8],e[3]/=e[8],e[4]/=e[8],e[5]/=e[8],e[6]/=e[8],e[7]/=e[8],e[8]/=e[8]),e}(e,fe(me,t,n,s,i),fe(pe,r,o,a,l))}const ge=ee;let ye=class extends F{constructor(e){super(e),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:e,topRight:t,bottomLeft:n,bottomRight:s}=this;if((0,a.a)(e)||(0,a.a)(t)||(0,a.a)(n)||(0,a.a)(s))return null;const i=e.spatialReference;return t=this.projectOrWarn(t,i),n=this.projectOrWarn(n,i),s=this.projectOrWarn(s,i),(0,a.a)(t)||(0,a.a)(n)||(0,a.a)(s)?null:new Z.Z({rings:[[[n.x,n.y],[e.x,e.y],[t.x,t.y],[s.x,s.y],[n.x,n.y]]],spatialReference:i})}set coords(e){const{topLeft:t}=this;if((0,a.a)(t))return;const n=t.spatialReference;if(e=this.projectOrWarn(e,n),(0,a.a)(e))return;const{rings:[[s,i,r,o]]}=e;this.bottomLeft=new j.Z({x:s[0],y:s[1],spatialReference:n}),this.topLeft=new j.Z({x:i[0],y:i[1],spatialReference:n}),this.topRight=new j.Z({x:r[0],y:r[1],spatialReference:n}),this.bottomRight=new j.Z({x:o[0],y:o[1],spatialReference:n})}};(0,s._)([(0,h.Cb)()],ye.prototype,"coords",null),(0,s._)([(0,h.Cb)({type:j.Z})],ye.prototype,"bottomLeft",void 0),(0,s._)([(0,h.Cb)({type:j.Z})],ye.prototype,"bottomRight",void 0),(0,s._)([(0,h.Cb)({type:j.Z})],ye.prototype,"topLeft",void 0),(0,s._)([(0,h.Cb)({type:j.Z})],ye.prototype,"topRight",void 0),ye=(0,s._)([(0,d.j)("esri.layers.support.CornersGeoreference")],ye);const xe=ye;let ve=class extends F{constructor(e){super(e),this.extent=null,this.rotation=0,this.type="extent-and-rotation"}get coords(){if((0,a.a)(this.extent))return null;const{xmin:e,ymin:t,xmax:n,ymax:s,spatialReference:i}=this.extent;let r;if(this.rotation){const{x:i,y:o}=this.extent.center,a=be(i,o,this.rotation);r=[a(e,t),a(e,s),a(n,s),a(n,t)],r.push(r[0])}else r=[[e,t],[e,s],[n,s],[n,t],[e,t]];return new Z.Z({rings:[r],spatialReference:i})}set coords(e){if((0,a.a)(e)||(0,a.a)(this.extent))return;const t=this.extent.spatialReference;if(e=this.projectOrWarn(e,t),(0,a.a)(e)||(0,a.a)(e.extent))return;const{rings:[[n,s,i]],extent:{center:{x:r,y:o}}}=e,l=(0,J.r)(Math.PI/2-Math.atan2(s[1]-n[1],s[0]-n[0])),h=be(r,o,-l),[c,u]=h(n[0],n[1]),[d,m]=h(i[0],i[1]);this.extent=new k.Z({xmin:c,ymin:u,xmax:d,ymax:m,spatialReference:t}),this.rotation=l}};function be(e,t,n){const s=(0,W.t)(n),i=Math.cos(s),r=Math.sin(s);return(n,s)=>[i*(n-e)+r*(s-t)+e,i*(s-t)-r*(n-e)+t]}(0,s._)([(0,h.Cb)()],ve.prototype,"coords",null),(0,s._)([(0,h.Cb)({type:k.Z})],ve.prototype,"extent",void 0),(0,s._)([(0,h.Cb)({type:Number})],ve.prototype,"rotation",void 0),ve=(0,s._)([(0,d.j)("esri.layers.support.ExtentAndRotationGeoreference")],ve);const we=ve;var Pe=n(33101);const Me={key:"type",base:F,typeMap:{"control-points":ge,corners:xe,"extent-and-rotation":we}};let Ce=class extends((0,b.iv)((0,w.eC)(P.Z))){constructor(e){super(e),this.georeference=null,this.opacity=1}readGeoreference(e){return ge.fromJSON(e)}};(0,s._)([(0,h.Cb)({types:Me,json:{write:!0}})],Ce.prototype,"georeference",void 0),(0,s._)([(0,u.r)("georeference")],Ce.prototype,"readGeoreference",null),(0,s._)([(0,h.Cb)()],Ce.prototype,"opacity",void 0),Ce=(0,s._)([(0,d.j)("esri.layers.support.MediaElementBase")],Ce);const Re=Ce;var Ee=n(90886),Ie=n(38742);let Be=class extends Re{constructor(e){super(e),this.content=null,this.image=null,this.type="image",this.image=null}load(){const e=this.image;if("string"==typeof e){const t=(0,y.default)(e,{responseType:"image"}).then((({data:e})=>{this._set("content",e)}));this.addResolvingPromise(t)}else if(e instanceof HTMLImageElement){const t=e.decode().then((()=>{this._set("content",e)}));this.addResolvingPromise(t)}else e?this._set("content",e):this.addResolvingPromise(Promise.reject(new r.Z("image-element:invalid-image-type","Invalid image type",{image:e})));return Promise.resolve(this)}readImage(e,t,n){return(0,Ie.f)(t.url,n)}writeImage(e,t,n,s){if((0,a.a)(e))return;const i=s?.portalItem,r=s?.resources;if(!i||!r)return void("string"==typeof e&&(t[n]=(0,Ie.t)(e,s)));const o="string"!=typeof e||(0,x.HK)(e)||(0,x.jc)(e)?null:e;if(o){if(null==(0,Ie.i)(o))return void(t[n]=o);const e=(0,Ie.t)(o,{...s,verifyItemRelativeUrls:s&&s.verifyItemRelativeUrls?{writtenUrls:s.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},Ie.M.NO);if(i&&e&&!(0,x.YP)(e))return r.toKeep.push({resource:i.resourceFromPath(e),compress:!1}),void(t[n]=e)}t[n]="<pending>",r.pendingOperations.push(Ae(e).then((e=>{const s=function(e,t){const n=(0,v.g)(),s=`${(0,x.v_)("media",n)}.${(0,Ee.g)(e)}`;return t.resourceFromPath(s)}(e,i);t[n]=s.itemRelativeUrl,r.toAdd.push({resource:s,content:e,compress:!1,finish:e=>{this.image=e.url}})})))}};(0,s._)([(0,h.Cb)({readOnly:!0})],Be.prototype,"content",void 0),(0,s._)([(0,h.Cb)({json:{name:"url",type:String}})],Be.prototype,"image",void 0),(0,s._)([(0,u.r)("image",["url"])],Be.prototype,"readImage",null),(0,s._)([(0,m.w)("image")],Be.prototype,"writeImage",null),(0,s._)([(0,h.Cb)({readOnly:!0,json:{name:"mediaType"}})],Be.prototype,"type",void 0),Be=(0,s._)([(0,d.j)("esri.layers.support.ImageElement")],Be);const Oe=Be;async function Ae(e){if("string"==typeof e){if((0,x.jc)(e)){const{data:t}=await(0,y.default)(e,{responseType:"blob"});return t}return(0,x.HK)(e)?(0,x.fw)(e):Ae((await(0,y.default)(e,{responseType:"image"})).data)}return new Promise((t=>function(e){if(e instanceof HTMLCanvasElement)return e;const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,n=e instanceof HTMLImageElement?e.naturalHeight:e.height,s=document.createElement("canvas"),i=s.getContext("2d");return s.width=t,s.height=n,e instanceof HTMLImageElement?i.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&i.putImageData(e,0,0),s}(e).toBlob(t)))}n(74569);var Te=n(10401),Se=n(75067),Le=n(95873),De=n(58085),Ye=n(74395),je=n(32422),Ze=n(94751);function Xe(e,t,n){if(Array.isArray(e)){const s=e[0];if(s>t){const n=(0,Ze.o)(s,t);e[0]=s+n*(-2*t)}else if(s<n){const t=(0,Ze.o)(s,n);e[0]=s+t*(-2*n)}}else{const s=e.x;if(s>t){const n=(0,Ze.o)(s,t);e.x+=n*(-2*t)}else if(s<n){const t=(0,Ze.o)(s,n);e.x+=t*(-2*n)}}return e}function Ve(e,t){const[n,s]=t.valid,i=2*s;let r,o=0;return e>s?(r=Math.ceil(Math.abs(e-s)/i),e-=r*i,o=r):e<n&&(r=Math.ceil(Math.abs(e-n)/i),e+=r*i,o=-r),{x:e,frameId:o}}function He(e,t){const{xmin:n,ymin:s,xmax:i,ymax:r}=t;return ze(e,n,s)&&ze(e,n,r)&&ze(e,i,r)&&ze(e,i,s)}function ze(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}function Fe(e,t,n=!0){const s=!(0,je.l9)(e);if(s&&(0,Z.c)(e),n)return(new qe).cut(e,t);const i=s?e.rings:e.paths,r=s?4:2,o=i.length,a=-2*t;for(let e=0;e<o;e++){const t=i[e];if(t&&t.length>=r){const e=[];for(const n of t)e.push([n[0]+a,n[1]]);i.push(e)}}return s?e.rings=i:e.paths=i,e}class Ne{constructor(e,t){this.extent=e,this.frameIds=t}}const We=(0,G.c)();class qe{constructor(){this._linesIn=[],this._linesOut=[]}cut(e,t){let n;if(this._xCut=t,e.rings)this._closed=!0,n=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,n=e.paths,this._minPts=2}for(const e of n){if(!e||e.length<this._minPts)continue;let t=!0;for(const n of e)t?(this.moveTo(n),t=!1):this.lineTo(n);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),n=[];for(const e of this._linesIn)e&&e.length>=this._minPts&&n.push(e);const s=-2*this._xCut;for(const e of this._linesOut)if(e&&e.length>=this._minPts){for(const t of e)t[0]+=s;n.push(e)}return this._closed?e.rings=n:e.paths=n,e}moveTo(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}lineTo(e){const t=this._side(e[0]);if(t*this._prevSide==-1){const n=this._intersect(this._prevPt,e);this._lineTo(this._xCut,n,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}close(){const e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(e,t,n){this._closed?(this._lineIn.push([n<=0?e:this._xCut,t]),this._lineOut.push([n>=0?e:this._xCut,t])):(n<=0&&this._lineIn.push([e,t]),n>=0&&this._lineOut.push([e,t]))}_lineTo(e,t,n){this._closed?(this._addPolyVertex(this._lineIn,n<=0?e:this._xCut,t),this._addPolyVertex(this._lineOut,n>=0?e:this._xCut,t)):n<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):n>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}_addPolyVertex(e,t,n){const s=e.length;s>1&&e[s-1][0]===t&&e[s-2][0]===t?e[s-1][1]=n:e.push([t,n])}_checkClosingPt(e){const t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}_side(e){return e<this._xCut?-1:e>this._xCut?1:0}_intersect(e,t){const n=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+n*(t[1]-e[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}let ke=class extends M.Z{constructor(e){super(e)}get bounds(){const e=this.coords;return(0,a.a)(e)||(0,a.a)(e.extent)?null:(0,G.h)(e.extent)}get coords(){const e=(0,a.u)(this.element.georeference)?.coords;return(0,X.dz)(e,this.spatialReference).geometry}get normalizedCoords(){return Z.Z.fromJSON(function(e,t){if((0,a.a)(e))return null;const n=e.spatialReference,s=(0,q.h)(n),i="toJSON"in e?e.toJSON():e;if(!s)return i;const r=(0,q.b)(n)?102100:4326,o=Ze.c[r].maxX,l=Ze.c[r].minX;if((0,je.wp)(i))return Xe(i,o,l);if((0,je.aW)(i))return i.points=i.points.map((e=>Xe(e,o,l))),i;if((0,je.YX)(i))return function(e,t){if(!t)return e;const n=function(e,t){const n=[],{ymin:s,ymax:i,xmin:r,xmax:o}=e,a=e.xmax-e.xmin,[l,h]=t.valid,{x:c,frameId:u}=Ve(e.xmin,t),{x:d,frameId:m}=Ve(e.xmax,t),p=c===d&&a>0;if(a>2*h){const e={xmin:r<o?c:d,ymin:s,xmax:h,ymax:i},t={xmin:l,ymin:s,xmax:r<o?d:c,ymax:i},a={xmin:0,ymin:s,xmax:h,ymax:i},p={xmin:l,ymin:s,xmax:0,ymax:i},f=[],_=[];He(e,a)&&f.push(u),He(e,p)&&_.push(u),He(t,a)&&f.push(m),He(t,p)&&_.push(m);for(let e=u+1;e<m;e++)f.push(e),_.push(e);n.push(new Ne(e,[u]),new Ne(t,[m]),new Ne(a,f),new Ne(p,_))}else c>d||p?n.push(new Ne({xmin:c,ymin:s,xmax:h,ymax:i},[u]),new Ne({xmin:l,ymin:s,xmax:d,ymax:i},[m])):n.push(new Ne({xmin:c,ymin:s,xmax:d,ymax:i},[u]));return n}(e,t).map((e=>e.extent));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}}(i,s);if((0,je.oU)(i)||(0,je.l9)(i)){const e=(0,U.c)(We,i),n={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},s=(0,Ze.o)(n.xmin,l)*(2*o),r=0===s?i:(0,Ze.u)(i,s);return n.xmin+=s,n.xmax+=s,n.xmax>o?Fe(r,o,t):n.xmin<l?Fe(r,l,t):r}return i}(this.coords,!0))}get normalizedBounds(){const e=(0,a.i)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,a.i)(e)?(0,G.h)(e):null}};(0,s._)([(0,h.Cb)()],ke.prototype,"spatialReference",void 0),(0,s._)([(0,h.Cb)()],ke.prototype,"element",void 0),(0,s._)([(0,h.Cb)()],ke.prototype,"bounds",null),(0,s._)([(0,h.Cb)()],ke.prototype,"coords",null),(0,s._)([(0,h.Cb)()],ke.prototype,"normalizedCoords",null),(0,s._)([(0,h.Cb)()],ke.prototype,"normalizedBounds",null),ke=(0,s._)([(0,d.j)("esri.layers.support.MediaElementView")],ke);let Ue=class extends Re{constructor(e){super(e),this.content=null,this.type="video"}load(){const e=this.video;if("string"==typeof e){const t=document.createElement("video");t.src=e,t.crossOrigin="anonymous",t.autoplay=!0,t.muted=!0,t.loop=!0,this.addResolvingPromise(this._loadVideo(t).then((()=>{this._set("content",t)})))}else e instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(e).then((()=>{this._set("content",e)}))):this.addResolvingPromise(Promise.reject(new r.Z("video-element:invalid-video-type","Invalid video type",{video:e})));return Promise.resolve(this)}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):o.L.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded.")}_loadVideo(e){return new Promise(((t,n)=>{e.oncanplay=()=>{e.oncanplay=null,e.play().then(t,n)},"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",e.src=e.src)}))}};(0,s._)([(0,h.Cb)({readOnly:!0})],Ue.prototype,"content",void 0),(0,s._)([(0,h.Cb)()],Ue.prototype,"video",null),Ue=(0,s._)([(0,d.j)("esri.layers.support.VideoElement")],Ue);const Ge=Ue;n(22781),n(23771),n(88994),n(98576);const Je={key:"type",defaultKeyValue:"image",base:Re,typeMap:{image:Oe,video:Ge}},Ke=i.Z.ofType(Je);let $e=class extends(P.Z.LoadableMixin((0,Pe.v)((0,Le.p)(Se.Z.EventedAccessor)))){constructor(e){super(e),this._index=new Ye.B,this._elementViewsMap=new Map,this._elementsIndexes=new Map,this._elementsChangedHandler=e=>{for(const t of e.removed){const e=this._elementViewsMap.get(t);this._elementViewsMap.delete(t),this._index.delete(e),this.handles.remove(e),e.destroy(),this.notifyChange("fullExtent")}const{spatialReference:t}=this;for(const n of e.added){if(this._elementViewsMap.get(n))continue;const e=new ke({spatialReference:t,element:n});this._elementViewsMap.set(n,e);const s=(0,De.YP)((()=>e.coords),(()=>this._updateIndexForElement(e,!1)));this._updateIndexForElement(e,!0),this.handles.add(s,e)}this._elementsIndexes.clear(),this.elements.forEach(((e,t)=>this._elementsIndexes.set(e,t))),this.emit("refresh")},this.elements=new Ke}async load(e){if((0,N.k_)(e),!this.spatialReference){const e=this.elements.find((e=>(0,a.i)(e.georeference)&&(0,a.i)(e.georeference.coords)));this._set("spatialReference",e?(0,a.u)((0,a.u)(e.georeference).coords).spatialReference:V.Z.WGS84)}return this._elementsChangedHandler({added:this.elements.items,removed:[]}),this.handles.add(this.elements.on("change",this._elementsChangedHandler)),this}destroy(){this._index.clear(),this._elementViewsMap.clear(),this._elementsIndexes.clear()}set elements(e){this._set("elements",(0,Te.r)(e,this._get("elements"),Ke))}get fullExtent(){if("not-loaded"===this.loadStatus)return null;const e=this._index.fullBounds;return(0,a.a)(e)?null:new k.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:this.spatialReference})}set spatialReference(e){"not-loaded"===this.loadStatus?this._set("spatialReference",e):o.L.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded.")}async queryElements(e,t){await this.load(),await(0,X.iQ)(e.spatialReference,this.spatialReference,null,t);const n=(0,q.f)(e.spatialReference,this.spatialReference)?e:(0,X.iV)(e,this.spatialReference);if(!n)return[];const s=n.normalize(),i=[];for(const e of s)this._index.forEachInBounds((0,G.h)(e),(({normalizedCoords:t,element:n})=>{(0,a.i)(t)&&(0,k.c)(e,t)&&i.push(n)}));return i.sort(((e,t)=>this._elementsIndexes.get(e)-this._elementsIndexes.get(t))),i}_updateIndexForElement(e,t){const n=e.normalizedBounds,s=this._index.has(e),i=(0,a.i)(n);this._index.delete(e),i&&this._index.set(e,n),this.notifyChange("fullExtent"),t||(s!==i?this.emit("refresh"):this.emit("change",{element:e.element}))}};(0,s._)([(0,h.Cb)()],$e.prototype,"elements",null),(0,s._)([(0,h.Cb)({readOnly:!0})],$e.prototype,"fullExtent",null),(0,s._)([(0,h.Cb)()],$e.prototype,"spatialReference",null),$e=(0,s._)([(0,d.j)("esri.layers.support.LocalMediaElementSource")],$e);const Qe=$e;function et(e){return"object"==typeof e&&null!=e&&"type"in e}n(92200),n(65949),n(54174),n(22465),n(5777),n(43022),n(93314),n(35197),n(1557),n(47842),n(14249),n(60217),n(17298),n(85557),n(34394);let tt=class extends((0,f.h)((0,g.M)((0,_.O)((0,l.M)(p.Z))))){constructor(e){super(e),this.effectiveSource=null,this.copyright=null,this.operationalLayerType="MediaLayer",this.spatialReference=null,this.type="media",this.source=new Qe}load(e){const t=this.source;if(!t)return this.addResolvingPromise(Promise.reject(new r.Z("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer."))),Promise.resolve(this);const n=et(t)?new Qe({elements:new i.Z([t])}):t;this._set("effectiveSource",n),this.spatialReference&&(n.spatialReference=this.spatialReference);const s=n.load(e).then((()=>{this.spatialReference=n.spatialReference}));return this.addResolvingPromise(s),Promise.resolve(this)}destroy(){(0,a.u)(this.effectiveSource)?.destroy(),(0,a.u)(this.source)?.destroy()}get fullExtent(){return this.loaded?this.effectiveSource.fullExtent:null}set source(e){"not-loaded"===this.loadStatus?this._set("source",e):o.L.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded.")}castSource(e){return e?Array.isArray(e)?new Qe({elements:new i.Z(e)}):e instanceof i.Z?new Qe({elements:e}):e:null}readSource(e,t,n){const s="image"===t.mediaType?new Oe:"video"===t.mediaType?new Ge:null;return s?.read(t,n),s}writeSource(e,t,n,s){e&&et(e)&&"image"===e.type?e.write(t,s):s?.messages&&s?.messages?.push(new r.Z("media-layer:unsupported-source","source must be an 'ImageElement'"))}};(0,s._)([(0,h.Cb)({readOnly:!0})],tt.prototype,"effectiveSource",void 0),(0,s._)([(0,h.Cb)({type:String})],tt.prototype,"copyright",void 0),(0,s._)([(0,h.Cb)({readOnly:!0})],tt.prototype,"fullExtent",null),(0,s._)([(0,h.Cb)({type:["MediaLayer"]})],tt.prototype,"operationalLayerType",void 0),(0,s._)([(0,h.Cb)({type:["show","hide"]})],tt.prototype,"listMode",void 0),(0,s._)([(0,h.Cb)({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1}}})],tt.prototype,"source",null),(0,s._)([(0,c.p)("source")],tt.prototype,"castSource",null),(0,s._)([(0,u.r)("source",["url"])],tt.prototype,"readSource",null),(0,s._)([(0,m.w)("source")],tt.prototype,"writeSource",null),(0,s._)([(0,h.Cb)()],tt.prototype,"spatialReference",void 0),(0,s._)([(0,h.Cb)({readOnly:!0})],tt.prototype,"type",void 0),tt=(0,s._)([(0,d.j)("esri.layers.MediaLayer")],tt);const nt=tt}}]);