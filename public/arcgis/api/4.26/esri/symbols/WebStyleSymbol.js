// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../portal/Portal ../chunks/persistableUrlUtils ./Symbol ./support/Thumbnail".split(" "),function(t,h,d,u,l,v,g,c,D,E,w,x,q,r,y,z){function A(){return new Promise((e,f)=>t(["./support/webStyleSymbolUtils"],
e,f))}var n;c=n=function(e){function f(a){a=B.call(this,a);a.styleName=null;a.portal=null;a.styleUrl=null;a.thumbnail=null;a.name=null;a.type="web-style";return a}h._inherits(f,e);var B=h._createSuper(f);e=f.prototype;e.read=function(a,b){this.portal=b?.portal;h._get(h._getPrototypeOf(f.prototype),"read",this).call(this,a,b)};e.clone=function(){return new n({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};e.fetchSymbol=function(a){return this._fetchSymbol("webRef",
a)};e.fetchCIMSymbol=function(a){return this._fetchSymbol("cimRef",a)};e._fetchSymbol=async function(a,b){const k=l.isSome(b)?b.cache:null,p=k?this._fetchCacheKey:null;if(l.isSome(k)){var m=p&&k.get(p);if(m)return m.clone()}m=await A();v.throwIfAborted(b);b=m.resolveWebStyleSymbol(this,{portal:this.portal},a,b);b.catch(C=>{u.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",C)});b=await b;if(!("webRef"===a&&"point-3d"===b.type||"cimRef"===a&&"cim"===b.type))return null;
l.isSome(k)&&k.set(p,b.clone());return b};h._createClass(f,[{key:"_fetchCacheKey",get:function(){const a=l.isSome(this.portal)?this.portal:q.getDefault();return`${this.styleName}:${this.styleUrl}:${this.name}:${a.user?a.user.username:null}:${a.url}`}}]);return f}(y);d.__decorate([g.property({json:{write:!1}})],c.prototype,"color",void 0);d.__decorate([g.property({type:String,json:{write:!0}})],c.prototype,"styleName",void 0);d.__decorate([g.property({type:q,json:{write:!1}})],c.prototype,"portal",
void 0);d.__decorate([g.property({type:String,json:{read:r.read,write:r.write}})],c.prototype,"styleUrl",void 0);d.__decorate([g.property({type:z.Thumbnail,json:{read:!1}})],c.prototype,"thumbnail",void 0);d.__decorate([g.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);d.__decorate([w.enumeration({styleSymbolReference:"web-style"},{readOnly:!0})],c.prototype,"type",void 0);d.__decorate([g.property()],c.prototype,"_fetchCacheKey",null);return c=n=d.__decorate([x.subclass("esri.symbols.WebStyleSymbol")],
c)});