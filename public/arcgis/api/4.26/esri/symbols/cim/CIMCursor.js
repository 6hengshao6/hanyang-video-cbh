// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(e,k,v,d,w){function f(a){a&&(d.isPoint(a)?a.y=-a.y:d.isPolygon(a)?l(a.rings):d.isPolyline(a)?l(a.paths):d.isMultipoint(a)&&m(a.points))}function m(a){if(a){const b=a.length;for(let c=0;c<b;c++)a[c][1]=-a[c][1]}}function l(a){if(a)for(const b of a)m(b)}function n(a){if(a){var b=a.length;for(--b;0<b;--b)a[b][0]-=a[b-1][0],a[b][1]-=a[b-1][1]}}function p(a){if(a)for(const b of a)n(b)}
function q(a){if(a){const b=a.length;for(let c=1;c<b;++c)a[c][0]+=a[c-1][0],a[c][1]+=a[c-1][1]}}function r(a){if(a)for(const b of a)q(b)}function t(a){a&&(d.isPolygon(a)?r(a.rings):d.isPolyline(a)?r(a.paths):d.isMultipoint(a)&&q(a.points),f(a))}function u(a){a&&a.reverse()}let x=function(){function a(b,c=!0,g=!0,h=0){this.isClosed=!1;this.geometryCursor=null;this.geometryCursor=!c&&"esriGeometryPolygon"===b.geometryType||!g&&"esriGeometryPolyline"===b.geometryType?null:b;this.geomUnitsPerPoint=h;
this.iteratePath=!1;this.internalPlacement=new w.Placement}a.prototype.next=function(){if(!this.geometryCursor)return null;for(;this.iteratePath||this.geometryCursor.nextPath();){this.geometryCursor.seekPathFront();const b=this.processPath(this.geometryCursor);if(b)return b}return this.geometryCursor=null};return k._createClass(a)}(),y=function(){function a(b,c,g,h=0){this.isClosed=!1;this.multiPath=null;this.inputGeometries=b;this.acceptPolygon=c;this.acceptPolyline=g;this.geomUnitsPerPoint=h;this.pathIndex=
this.pathCount=-1;this.iteratePath=!1}a.prototype.next=function(){for(;;){if(!this.multiPath){for(var b=this.inputGeometries.next();b;)if(d.isPolygon(b)?this.acceptPolygon&&(this.multiPath=b.rings,this.isClosed=!0):d.isPolyline(b)?this.acceptPolyline&&(this.multiPath=b.paths,this.isClosed=!1):d.isExtent(b)&&this.acceptPolygon&&(this.multiPath=[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]],this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length;this.pathIndex=
-1;break}else b=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,b=this.processPath(this.multiPath[this.pathIndex]))return b;this.pathIndex=this.pathCount=-1;this.multiPath=null}};return k._createClass(a)}();e.PathGeometryCursor=y;e.PathTransformationCursor=x;e.cloneAndDecodeGeometry=function(a){a=v.clone(a);t(a);return a};e.deltaDecodeGeometry=t;e.deltaEncodeGeometry=function(a){a&&(f(a),d.isPolygon(a)?
p(a.rings):d.isPolyline(a)?p(a.paths):d.isMultipoint(a)&&n(a.points))};e.flipYs=f;e.getCoord2D=function(a,b,c){return[a[0]+(b[0]-a[0])*c,a[1]+(b[1]-a[1])*c]};e.getId=function(a){return a[4]};e.reverseMultipath=function(a){if(a)for(const b of a)u(b)};e.reversePath=u;e.setId=function(a,b){a[4]=b};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});