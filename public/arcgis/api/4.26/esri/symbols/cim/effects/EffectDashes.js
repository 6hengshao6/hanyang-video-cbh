// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../CIMCursor ../CurveHelper ../enums ../GeometryWalker".split(" "),function(k,g,n,p,d,l){let m=function(){function e(){}e.local=function(){null===e.instance&&(e.instance=new e);return e.instance};e.prototype.execute=function(f,h,a,b,c){return new q(f,h,a)};return g._createClass(e)}();m.instance=null;let q=function(e){function f(a,b,c){a=h.call(this,a,!0,!0);a._firstCurve=null;a._walker=new l.GeometryWalker;a._walker.updateTolerance(c);a._endings=
b.lineDashEnding;a._customDashPos=-(b.offsetAlongLine??0)*c;a._offsetAtEnd=(b.customEndingOffset??0)*c;a._pattern=new l.DashPattern;a._pattern.init(b.dashTemplate,!0);a._pattern.scale(c);return a}g._inherits(f,e);var h=g._createSuper(f);f.prototype.processPath=function(a){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[a]};if(!this.iteratePath){var b=!0;switch(this._endings){default:this._pattern.extPtGap=0;break;case d.LineDashEnding.FullPattern:this.isClosed||(this._pattern.extPtGap=
.5*this._pattern.firstValue());break;case d.LineDashEnding.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case d.LineDashEnding.NoConstraint:this.isClosed||(b=!1);break;case d.LineDashEnding.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var c=this._walker.calculatePathLength(a);if(this._pattern.isEmpty()||c<.1*this._pattern.length()||!this._walker.init(a,this._pattern,b))return{paths:[a]}}if(this.iteratePath)a=this._pattern.nextValue();else{switch(this._endings){default:b=
.5*this._pattern.firstValue();break;case d.LineDashEnding.HalfGap:b=.5*-this._pattern.lastValue();break;case d.LineDashEnding.FullGap:b=-this._pattern.lastValue();break;case d.LineDashEnding.FullPattern:b=0;break;case d.LineDashEnding.NoConstraint:case d.LineDashEnding.Custom:b=-this._customDashPos}a=b/this._pattern.length();a-=Math.floor(a);b=a*this._pattern.length();this._pattern.reset();a=this._pattern.nextValue();for(c=!1;b>=a;)b-=a,a=this._pattern.nextValue(),c=!c;a-=b;c?(this._walker.nextPosition(a),
a=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(a),a=this._pattern.nextValue(),this._walker.nextPosition(a),a=this._pattern.nextValue())}(b=this._walker.nextCurve(a))?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),p.PathHelper.mergePath(b,this._firstCurve),this._firstCurve=null)):(a=this._pattern.nextValue(),!this._walker.nextPosition(a)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(b=this._firstCurve,
this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,b=this._firstCurve,this._firstCurve=null);return{paths:[b]}};return g._createClass(f)}(n.PathGeometryCursor);k.EffectDashes=m;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});