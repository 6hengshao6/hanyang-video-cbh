// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(t,u,v,p,w){let x=function(){function b(){}b.local=function(){null===b.instance&&(b.instance=new b);return b.instance};b.prototype.execute=function(f,a,c,d,m){return new A(f,a,c)};return u._createClass(b)}();x.instance=null;let A=function(){function b(a,c,d){this._inputGeometries=a;this._angleTolerance=void 0!==c.angleTolerance?c.angleTolerance:120;this._maxCosAngle=
Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var f=b.prototype;f.next=function(){for(var a=this._inputGeometries.next();a;){if(p.isPolygon(a))return this._isClosed=!0,a=v.clone(a),this._processMultipath(a.rings),a;if(p.isPolyline(a))return this._isClosed=!1,a=v.clone(a),this._processMultipath(a.paths),a;if(p.isExtent(a)){if(this._maxCosAngle)return a;this._isClosed=!0;a=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];this._processPath(a);return{rings:[a]}}a=
this._inputGeometries.next()}return null};f._processMultipath=function(a){if(a)for(const c of a)this._processPath(c)};f._processPath=function(a){if(a){let c=a.length,d=a[0],m,q,g,y,z,r;this._isClosed&&++c;for(let e=1;e<c;++e){let n;n=this._isClosed&&e===c-1?a[0]:a[e];const h=n[0]-d[0],k=n[1]-d[1],l=Math.sqrt(h*h+k*k);1<e&&0<l&&0<g&&(m*h+q*k)/l/g<=this._maxCosAngle&&w.setId(d,1);1===e&&(y=h,z=k,r=l);0<l&&(d=n,m=h,q=k,g=l)}this._isClosed&&0<g&&0<r&&(m*y+q*z)/r/g<=this._maxCosAngle&&w.setId(a[0],1)}};
return u._createClass(b)}();t.EffectAddControlPoints=x;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});