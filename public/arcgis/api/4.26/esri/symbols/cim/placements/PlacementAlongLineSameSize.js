// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/geometryCursorCollectUtils ../CIMCursor ../enums ../GeometryWalker".split(" "),function(l,g,n,p,e,h){let m=function(){function d(){}d.local=function(){null===d.instance&&(d.instance=new d);return d.instance};d.prototype.execute=function(f,k,a,b,c){return new q(f,k,a)};return g._createClass(d)}();m.instance=null;let q=function(d){function f(a,b,c){a=k.call(this,a);a._geometryWalker=new h.GeometryWalker;a._geometryWalker.updateTolerance(c);
a._angleToLine=b.angleToLine??!0;a._offset=(b.offset?b.offset:0)*c;a._originalEndings=b.endings;a._offsetAtEnd=(b.customEndingOffset?b.customEndingOffset:0)*c;a._position=-(b.offsetAlongLine?b.offsetAlongLine:0)*c;a._pattern=new h.DashPattern;a._pattern.init(b.placementTemplate,!1);a._pattern.scale(c);a._endings=a._originalEndings;return a}g._inherits(f,d);var k=g._createSuper(f);d=f.prototype;d.processPath=function(a){if(this._pattern.isEmpty())return null;if(this.iteratePath)var b=this._pattern.nextValue();
else{this._endings=this._originalEndings===e.PlacementEndings.WithFullGap&&this.isClosed?e.PlacementEndings.WithMarkers:this._originalEndings;this._pattern.extPtGap=0;var c=!0;switch(this._endings){case e.PlacementEndings.NoConstraint:b=-this._position;b=this._adjustPosition(b);c=!1;break;default:b=-this._pattern.lastValue()/2;break;case e.PlacementEndings.WithFullGap:b=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case e.PlacementEndings.WithMarkers:b=0;break;
case e.PlacementEndings.Custom:b=-this._position,b=this._adjustPosition(b),this._pattern.extPtGap=.5*this._offsetAtEnd}a=n.collectRing(a);if(!this._geometryWalker.init(a,this._pattern,c))return null;this._pattern.reset();for(c=0;b>c;)b-=c,c=this._pattern.nextValue();b=c-b;this.iteratePath=!0}c=new h.Pos;if(!this._geometryWalker.nextPointAndAngle(b,c)||this._endings===e.PlacementEndings.WithFullGap&&this._geometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===e.PlacementEndings.WithMarkers&&
this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed))return null;this.internalPlacement.setTranslate(c.pt[0]-this._offset*c.sa,c.pt[1]+this._offset*c.ca);this._angleToLine&&this.internalPlacement.setRotateCS(c.ca,c.sa);return this.internalPlacement};d._adjustPosition=function(a){a/=this._pattern.length();a-=Math.floor(a);return a*this._pattern.length()};return g._createClass(f)}(p.PathTransformationCursor);l.PlacementAlongLineSameSize=m;Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})});