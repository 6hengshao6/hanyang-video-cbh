// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../enums"],function(p,h,q,v,k){let r=function(){function c(){}c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.execute=function(g,l,a,b,e){return new w(g,l,a)};return h._createClass(c)}();r.instance=null;let w=function(c){function g(a,b,e){a=l.call(this,a,!1,!0);a._curveHelper=new v.CurveHelper;a._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;a._offset=void 0!==
b.offset?b.offset*e:0;a._type=b.extremityPlacement;a._position=void 0!==b.offsetAlongLine?b.offsetAlongLine*e:0;a._beginProcessed=!1;return a}h._inherits(g,c);var l=h._createSuper(g);c=g.prototype;c.processPath=function(a){let b;switch(this._type){default:this._beginProcessed?(b=this._atExtremities(a,this._position,!1),this.iteratePath=this._beginProcessed=!1):(b=this._atExtremities(a,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case k.ExtremityPlacement.JustBegin:b=this._atExtremities(a,
this._position,!0);break;case k.ExtremityPlacement.JustEnd:b=this._atExtremities(a,this._position,!1);case k.ExtremityPlacement.None:}return b};c._atExtremities=function(a,b,e){e||a.seekPathEnd();if(e?a.nextPoint():a.prevPoint()){let m=0;var d=[0,0];const f=[a.x,a.y];for(;e?a.nextPoint():a.prevPoint();){d[0]=f[0];d[1]=f[1];f[0]=a.x;f[1]=a.y;const n=this._curveHelper.calculateLength(d,f);if(m+n>b){a=(b-m)/n;const [t,u]=this._curveHelper.getAngleCS(d,f,a);d=q.getCoord2D(d,f,a);this.internalPlacement.setTranslate(d[0]-
this._offset*u,d[1]+this._offset*t);this._angleToLine&&this.internalPlacement.setRotateCS(-t,-u);return this.internalPlacement}m+=n}}return null};return h._createClass(g)}(q.PathTransformationCursor);p.PlacementAtExtremities=r;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});