// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../enums"],function(u,l,n,w,m){let v=function(){function d(){}d.local=function(){null===d.instance&&(d.instance=new d);return d.instance};d.prototype.execute=function(g,p,a,b,c){return new x(g,p,a)};return l._createClass(d)}();v.instance=null;let x=function(d){function g(a,b,c){a=p.call(this,a);a._curveHelper=new w.CurveHelper;a._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;a._offset=void 0!==b.offset?
b.offset*c:0;a._relativeTo=b.relativeTo;a._position=void 0!==b.startPointOffset?b.startPointOffset*c:0;a._epsilon=.001*c;return a}l._inherits(g,d);var p=l._createSuper(g);d=g.prototype;d.processPath=function(a){var b=this._position;if(this._relativeTo===m.PlacementOnLineRelativeTo.SegmentMidpoint){this.iteratePath||(this.iteratePath=!0);if(a.nextPoint()){b=[a.x,a.y];const c=[0,0];for(;a.nextPoint();){c[0]=a.x;c[1]=a.y;const e=this._curveHelper.calculateLength(b,c);if(e<this._epsilon){b[0]=c[0];b[1]=
c[1];continue}a=.5+this._position/e;const [h,k]=this._curveHelper.getAngleCS(b,c,a);a=n.getCoord2D(b,c,a);this.internalPlacement.setTranslate(a[0]-this._offset*k,a[1]+this._offset*h);this._angleToLine&&this.internalPlacement.setRotateCS(h,k);return this.internalPlacement}}this.iteratePath=!1;return null}return this.onLine(a,b,this._relativeTo===m.PlacementOnLineRelativeTo.LineEnd)};d.onLine=function(a,b,c){let e,h=!1;switch(this._relativeTo){default:a.seekPathFront();e=a.pathLength()/2+b;break;case m.PlacementOnLineRelativeTo.LineBeginning:e=
b;break;case m.PlacementOnLineRelativeTo.LineEnd:e=b,h=!0}c?a.seekPathEnd():a.seekPathFront();let k=0;if(c?a.prevPoint():a.nextPoint()){b=[a.x,a.y];const f=[0,0];for(;c?a.prevPoint():a.nextPoint();){f[0]=a.x;f[1]=a.y;const q=this._curveHelper.calculateLength(b,f);if(k+q>e){a=(e-k)/q;const [r,t]=this._curveHelper.getAngleCS(b,f,a);a=n.getCoord2D(b,f,a);c=h?-this._offset:this._offset;this.internalPlacement.setTranslate(a[0]-c*t,a[1]+c*r);this._angleToLine&&(h?this.internalPlacement.setRotateCS(-r,-t):
this.internalPlacement.setRotateCS(r,t));return this.internalPlacement}b[0]=f[0];b[1]=f[1];k+=q}}return null};return l._createClass(g)}(n.PathTransformationCursor);u.PlacementOnLine=v;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});