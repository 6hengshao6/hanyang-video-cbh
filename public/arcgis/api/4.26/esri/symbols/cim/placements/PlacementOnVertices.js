// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(t,n,z,A){function p(c,d){const h=Math.PI;for(;Math.abs(d-c)>h+2E-15;)d=d-c>h?d-2*h:d+2*h;return(c+d)/2}let u=function(){function c(){}c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.execute=function(d,h,a,b,e){return new B(d,h,a)};return n._createClass(c)}();u.instance=null;let B=function(c){function d(a,b,e){a=h.call(this,a);a._curveHelper=new A.CurveHelper;
a._angleToLine=void 0!==b.angleToLine?b.angleToLine:!0;a._offset=void 0!==b.offset?b.offset*e:0;a._endPoints=void 0!==b.placeOnEndPoints?b.placeOnEndPoints:!0;a._controlPoints=void 0!==b.placeOnControlPoints?b.placeOnControlPoints:!0;a._regularVertices=void 0!==b.placeOnRegularVertices?b.placeOnRegularVertices:!0;a._tags=[];a._tagIterator=0;return a}n._inherits(d,c);var h=n._createSuper(d);c=d.prototype;c.processPath=function(a){this.iteratePath||(this._preparePath(a),this.iteratePath=!0);if(this._tagIterator>=
this._tags.length)return this._tagIterator=this._tags.length=0,this.iteratePath=!1,null;a=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(a[2]);let b=a[0],e=a[1];if(0!==this._offset){const k=Math.cos(a[2]);b-=this._offset*Math.sin(a[2]);e+=this._offset*k}this.internalPlacement.setTranslate(b,e);this._tagIterator++;return this.internalPlacement};c._preparePath=function(a){this._tagIterator=this._tags.length=0;a.seekPathFront();if(a.nextPoint()){var b=a.x;var e=a.y;
a.seekPathEnd();if(a.prevPoint()){var k=a.y;b=b===a.x&&e===k}else b=!1}else b=!1;let m=k=e=0,l=0;a.seekPathFront();if(a.nextPoint()){var f=a.x;let v=a.y,q=a.id,w=!0;for(var g=a.nextPoint();g;){const x=a.x,y=a.y,r=a.id;g=[f,v];f=[x,y];if(this._angleToLine||0!==this._offset)m=this._curveHelper.getAngle(g,f,0);w?(w=!1,b?(e=m,k=q):(this._endPoints||this._controlPoints&&1===q)&&this._tags.push([g[0],g[1],m])):1===q?this._controlPoints&&this._tags.push([g[0],g[1],p(l,m)]):this._regularVertices&&this._tags.push([g[0],
g[1],p(l,m)]);if(this._angleToLine||0!==this._offset)l=this._curveHelper.getAngle(g,f,1);(g=a.nextPoint())||(b?1===r||1===k?this._controlPoints&&this._tags.push([f[0],f[1],p(l,e)]):this._regularVertices&&this._tags.push([f[0],f[1],p(l,e)]):(this._endPoints||this._controlPoints&&1===r)&&this._tags.push([f[0],f[1],l]));f=x;v=y;q=r}}this._tagIterator=0};return n._createClass(d)}(z.PathTransformationCursor);t.PlacementOnVertices=u;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});