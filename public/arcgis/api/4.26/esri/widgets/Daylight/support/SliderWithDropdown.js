// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/events ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Slider ./SliderWithDropdownViewModel ../../support/Popover ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(h,f,n,m,p,g,e,w,x,q,r,t,u,y,k){e=function(b){function l(a,
d){var c=v.call(this,a,d);c.viewModel=new t.SliderWithDropdownViewModel;c.buttonTooltip="";c.showDropDown=!0;c._dropdownAnchor=null;c._dropdownElement=null;c._popover=new u({owner:h._assertThisInitialized(c),placement:"bottom-start",anchorElement:()=>m.unwrap(c._dropdownAnchor),renderContentFunction:()=>c._renderPopover()});return c}h._inherits(l,b);var v=h._createSuper(l);b=l.prototype;b.initialize=function(){this.addHandles(p.watch(()=>this.viewModel.isDropdownOpen,a=>{this._popover.open=a},p.initial))};
b.destroy=function(){this._popover.destroy()};b.renderThumbLabel=function(a){return k.tsx("div",{class:this.classes("esri-slider-with-dropdown__box","esri-slider__label",{["esri-slider-with-dropdown__box--drop-down-on"]:this.showDropDown,["esri-slider-with-dropdown__box--drop-down-off"]:!this.showDropDown})},h._get(h._getPrototypeOf(l.prototype),"renderThumbLabel",this).call(this,a),this.showDropDown&&k.tsx("div",{bind:this,afterCreate:this._onDropdownAnchorAfterCreate,class:"esri-slider-with-dropdown__dropdown-root"},
k.tsx("button",{class:this.classes("esri-interactive"," esri-widget__anchor esri-slider-with-dropdown__anchor",this.isDropdownOpen?"esri-slider-with-dropdown__anchor--open":"esri-slider-with-dropdown__anchor--closed"),bind:this,disabled:this.disabled,onclick:this._onAnchorClick,onpointerdown:this._killEvent,"aria-label":this.buttonTooltip,title:this.buttonTooltip,"aria-expanded":this.isDropdownOpen.toString(),"aria-haspopup":"listbox",type:"button"},this.currentItem?this.currentItem.name+" ":"")))};
b._onDropdownAnchorAfterCreate=function(a){this._dropdownAnchor=a};b._renderPopover=function(){return k.tsx("ol",{role:"listbox",afterCreate:this._onDropdownAfterCreate,"aria-label":this.buttonTooltip,bind:this,class:this.classes("esri-slider-with-dropdown__list"),tabindex:"-1",onkeydown:this._onDropdownKeyDown,onfocusout:this._onDropdownFocusOut,onpointerdown:this._killEvent},this.items.map((a,d)=>k.tsx("li",{class:d===this.currentIndex?this.classes("esri-interactive","esri-slider-with-dropdown__list-item",
"esri-slider-with-dropdown__list-item--selected"):this.classes("esri-interactive","esri-slider-with-dropdown__list-item"),bind:this,onclick:this._onDropdownItemClick,"data-result":d,"aria-label":a.label.join(" "),role:"option","aria-selected":(d===this.currentIndex).toString(),onkeydown:this._onLiKeyDown,tabindex:"0"},a.label.map(c=>k.tsx("span",{bind:this},c)))))};b._onDropdownAfterCreate=function(a){this._dropdownElement=a;a=a.querySelector(".esri-slider-with-dropdown__list-item--selected")??a.firstChild;
m.isSome(a)&&a instanceof HTMLElement&&(a.scrollIntoView(),a.focus())};b._onAnchorClick=function(){if(this.disabled)return!1;this.viewModel.toggle();return!0};b._onDropdownItemClick=function(a){this.viewModel.selectItem(a.currentTarget["data-result"])};b._onDropdownFocusOut=function(a){a=a.relatedTarget;null===a&&(a=document.activeElement);m.isSome(this._dropdownElement)&&!this._dropdownElement.contains(a)&&m.isSome(this._dropdownAnchor)&&!this._dropdownAnchor.contains(a)&&(this.viewModel.isDropdownOpen=
!1)};b._killEvent=function(a){a.stopPropagation();return!0};b._onDropdownKeyDown=function(a){a.stopPropagation();"Escape"===n.eventKey(a)&&(this.viewModel.isDropdownOpen=!1)};b._onLiKeyDown=function(a){const d=a.target;switch(n.eventKey(a)){case "ArrowUp":d.previousElementSibling&&d.previousElementSibling.focus();break;case "ArrowDown":d.nextElementSibling&&d.nextElementSibling.focus();break;case "Enter":d.click()}};h._createClass(l,[{key:"items",get:function(){return this.viewModel.items},set:function(a){this.viewModel.items=
a}},{key:"currentIndex",get:function(){return this.viewModel.currentIndex},set:function(a){this.viewModel.currentIndex=a}},{key:"currentItem",get:function(){return this.viewModel.currentItem}},{key:"isDropdownOpen",get:function(){return this.viewModel.isDropdownOpen}}]);return l}(r);f.__decorate([g.property()],e.prototype,"viewModel",void 0);f.__decorate([g.property()],e.prototype,"buttonTooltip",void 0);f.__decorate([g.property()],e.prototype,"showDropDown",void 0);f.__decorate([g.property()],e.prototype,
"items",null);f.__decorate([g.property()],e.prototype,"currentIndex",null);f.__decorate([g.property()],e.prototype,"currentItem",null);f.__decorate([g.property()],e.prototype,"isDropdownOpen",null);return e=f.__decorate([q.subclass("esri.widgets.Daylight.SliderWithDropdown")],e)});