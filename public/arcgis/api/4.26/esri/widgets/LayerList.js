// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(R,D,p,M,X,fa,V,z,k,O,x,U){const A=p.ofType(x);p=function(S){function ka(t){t=
Q.call(this,t);t.checkPublishStatusEnabled=!1;t.listItemCreatedFunction=null;t.operationalItems=new A;t.view=null;return t}R._inherits(ka,S);var Q=R._createSuper(ka);S=ka.prototype;S.initialize=function(){this.addHandles([X.watch(()=>[this.view,this.view?.ready],()=>this._viewHandles(),X.initial),X.watch(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],"view")};S.destroy=function(){this.removeAllHandles();this.view=null;this.operationalItems.removeAll()};
S.triggerAction=function(t,J){t&&!t.disabled&&this.emit("trigger-action",{action:t,item:J})};S.moveListItem=function(t,J,n,E){const w=t?.layer;if(w){var W=this.view?.map?.layers,da=J?U.getItemLayers(J):W;W=n?U.getItemLayers(n):W;if(da&&W){var {operationalItems:oa}=this;J=J?.children||oa;oa=n?.children||oa;E=W.length-E;t.parent=n||null;J.includes(t)&&J.remove(t);da.includes(w)&&da.remove(w);oa.includes(t)||oa.add(t,E);W.includes(w)||W.add(w,E)}}};S._createLayerViewHandles=function(t){this.removeHandles("layer-views");
this._compileList();t&&this.addHandles(t.on("change",()=>this._compileList()),"layer-views")};S._createMapLayerHandles=function(t){this.removeHandles("map-layers");this._compileList();t&&this.addHandles(t.on("change",()=>this._compileList()),"map-layers")};S._createListItem=function(t){const {view:J,listItemCreatedFunction:n,checkPublishStatusEnabled:E}=this;return new x({checkPublishStatusEnabled:E,layer:t,listItemCreatedFunction:n,view:J})};S._removeAllItems=function(){this.operationalItems.removeAll()};
S._getViewableLayers=function(t){if(t)return t.filter(J=>"hide"!==U.findLayerListMode(J))};S._watchLayersListMode=function(t){this.removeHandles("layer-list-mode");t&&t.forEach(J=>{"listMode"in J&&this.addHandles(X.watch(()=>J.listMode,()=>this._compileList()),"layer-list-mode")})};S._compileList=function(){var t=this.get("view.map.layers");this._watchLayersListMode(t);(t=this._getViewableLayers(t))&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()};
S._createNewItems=function(t){const {operationalItems:J}=this;t.forEach(n=>{J.find(E=>E.layer===n)||J.add(this._createListItem(n))})};S._removeItems=function(t){const {operationalItems:J}=this,n=[];J.forEach(E=>{E&&t&&t.includes(E.layer)||n.push(E)});J.removeMany(n)};S._sortItems=function(t){const {operationalItems:J}=this;J.sort((n,E)=>{n=t.indexOf(n.layer);E=t.indexOf(E.layer);return n>E?-1:n<E?1:0})};S._recompileList=function(){this._removeAllItems();this._compileList()};S._viewHandles=function(){const {view:t}=
this;this.removeHandles(["map-layers","layer-views","view-layers"]);this._compileList();t&&t.ready&&this.addHandles([X.watch(()=>this.view?.map?.allLayers,J=>this._createMapLayerHandles(J),X.initial),X.watch(()=>this.view?.allLayerViews,J=>this._createLayerViewHandles(J),X.initial)],"view-layers")};R._createClass(ka,[{key:"state",get:function(){const t=this.get("view");return this.get("view.ready")?"ready":t?"loading":"disabled"}}]);return ka}(M.EventedAccessor);D.__decorate([fa.property()],p.prototype,
"checkPublishStatusEnabled",void 0);D.__decorate([fa.property()],p.prototype,"listItemCreatedFunction",void 0);D.__decorate([fa.property({type:A})],p.prototype,"operationalItems",void 0);D.__decorate([fa.property({readOnly:!0})],p.prototype,"state",null);D.__decorate([fa.property()],p.prototype,"view",void 0);return p=D.__decorate([O.subclass("esri.widgets.LayerList.LayerListViewModel")],p)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(R,D,p,M,X,fa,V,z,k,O,x,U,A,S,ka,Q,t,J,n){var E;x=M.ofType({key:"type",defaultKeyValue:"button",base:S,typeMap:{button:ka,toggle:t,slider:Q}});const w=M.ofType(x);p=E=function(W){function da(r){r=oa.call(this,r);r.actionsSections=new w;r.actionsOpen=!1;r.checkPublishStatusEnabled=!1;r.children=new (M.ofType(E));r.childrenSortable=!0;r.hidden=!1;r.layer=null;r.layerView=null;r.listItemCreatedFunction=null;r.open=!1;r.panel=null;r.parent=null;r.sortable=!0;r.view=null;return r}R._inherits(da,
W);var oa=R._createSuper(da);W=da.prototype;W.initialize=function(){this.handles.add([z.watch(()=>this.layer,r=>this._watchLayerProperties(r),z.initial),z.watch(()=>this.checkPublishStatusEnabled,r=>this._updateChildrenPublishing(r),z.initial),z.watch(()=>this.view,r=>this._updateChildrenView(r),z.initial),z.watch(()=>this.panel,r=>this._setListItemOnPanel(r),z.initial),z.watch(()=>[this.layer,this.view],()=>this._getLayerView(),z.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:this})};W.destroy=function(){this.view=null};W.castPanel=function(r){this.get("panel.open")&&!r.hasOwnProperty("open")&&(r.open=!0);return r?new J(r):null};W.clone=function(){return new E({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};
W._setListItemOnPanel=function(r){r&&(r.listItem=this)};W._updateChildrenPublishing=function(r){const P=this.children;P&&P.forEach(la=>la.checkPublishStatusEnabled=r)};W._updateChildrenView=function(r){const P=this.children;P&&P.forEach(la=>la.view=r)};W._addChildren=function(r){this.handles.remove("child-list-mode");this.children.removeAll();if(r){r.forEach(la=>{this.handles.add(z.watch(()=>la.listMode,()=>this._addChildren(r)),"child-list-mode")});var P=r.filter(la=>"hide"!==n.findLayerListMode(la));
this.children.addMany(this._makeChildren(P))}};W._watchSublayerChanges=function(r){r&&this.handles.add(r.on("change",()=>{this._addChildren(r)}),"layer")};W._initializeChildLayers=function(r){this._addChildren(r);this._watchSublayerChanges(r)};W._makeChildren=function(r){return r.map(P=>n.canDisplayLayer(P)?new E({layer:P,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(V.isSome).reverse()};W._watchLayerProperties=
function(r){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),r))if(this.handles.add(z.watch(()=>r.listMode,()=>this._watchLayerProperties(r)),"layer"),"hide-children"===n.findLayerListMode(r))this.children.removeAll();else{var P=n.getNormalizedChildLayerProperty(r);P&&this.handles.add(z.watch(()=>r[P],()=>{r.hasOwnProperty(P)&&this._initializeChildLayers(r[P])},z.initial),"layer")}};W._getLayerView=async function(){const {layer:r,view:P}=this;if(r&&P)try{const la=
await P.whenLayerView(r);la.layer===this.layer&&this._set("layerView",la)}catch{}};R._createClass(da,[{key:"connectionStatus",get:function(){const {layerView:r,publishing:P}=this;if(!P&&r&&"connectionStatus"in r)return r.connectionStatus}},{key:"error",get:function(){return this.layer?.loadError}},{key:"incompatible",get:function(){const {layerView:r}=this;return r&&"spatialReferenceSupported"in r?!r.spatialReferenceSupported:!1}},{key:"title",get:function(){const r=this.get("layer.layer");return(!r||
r&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(r){this._override("title",r)}},{key:"publishing",get:function(){const {layer:r,checkPublishStatusEnabled:P}=this;return P&&r&&"publishingInfo"in r&&"publishing"===r.publishingInfo?.status}},{key:"updating",get:function(){const {layerView:r,connectionStatus:P,layer:la,publishing:B}=this;return B||P?!1:r?r.updating:"loading"===la?.loadStatus||!1}},{key:"visible",get:function(){return this.layer?.visible},
set:function(r){const P=this.layer;P&&(P.visible=r)}},{key:"visibleAtCurrentScale",get:function(){return!n.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return n.findLayerVisibilityMode(this.layer)}}]);return da}(fa.IdentifiableMixin(X.HandleOwnerMixin(p)));D.__decorate([k.property({type:w})],p.prototype,"actionsSections",void 0);D.__decorate([k.property()],p.prototype,"actionsOpen",void 0);D.__decorate([k.property()],p.prototype,"checkPublishStatusEnabled",
void 0);D.__decorate([k.property({type:M})],p.prototype,"children",void 0);D.__decorate([k.property()],p.prototype,"childrenSortable",void 0);D.__decorate([k.property({readOnly:!0})],p.prototype,"connectionStatus",null);D.__decorate([k.property({readOnly:!0})],p.prototype,"error",null);D.__decorate([k.property()],p.prototype,"hidden",void 0);D.__decorate([k.property({readOnly:!0})],p.prototype,"incompatible",null);D.__decorate([k.property()],p.prototype,"layer",void 0);D.__decorate([k.property({readOnly:!0})],
p.prototype,"layerView",void 0);D.__decorate([k.property()],p.prototype,"listItemCreatedFunction",void 0);D.__decorate([k.property()],p.prototype,"open",void 0);D.__decorate([k.property({type:J})],p.prototype,"panel",void 0);D.__decorate([O.cast("panel")],p.prototype,"castPanel",null);D.__decorate([k.property()],p.prototype,"parent",void 0);D.__decorate([k.property()],p.prototype,"sortable",void 0);D.__decorate([k.property()],p.prototype,"title",null);D.__decorate([k.property({readOnly:!0})],p.prototype,
"publishing",null);D.__decorate([k.property({readOnly:!0})],p.prototype,"updating",null);D.__decorate([k.property()],p.prototype,"view",void 0);D.__decorate([k.property()],p.prototype,"visible",null);D.__decorate([k.property({readOnly:!0})],p.prototype,"visibleAtCurrentScale",null);D.__decorate([k.property({readOnly:!0})],p.prototype,"visibilityMode",null);return p=E=D.__decorate([A.subclass("esri.widgets.LayerList.ListItem")],p)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(R,D,p,M,X,fa,V,z){var k;M=k=function(O){function x(A){A=U.call(this,A);A.displayValueEnabled=!1;A.max=1;A.min=0;A.step=.1;A.type="slider";A.value=null;return A}R._inherits(x,O);var U=R._createSuper(x);x.prototype.clone=function(){return new k({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return R._createClass(x)}(z);
D.__decorate([p.property()],M.prototype,"displayValueEnabled",void 0);D.__decorate([p.property()],M.prototype,"max",void 0);D.__decorate([p.property()],M.prototype,"min",void 0);D.__decorate([p.property()],M.prototype,"step",void 0);D.__decorate([p.property()],M.prototype,"value",void 0);return M=k=D.__decorate([V.subclass("esri.support.Action.ActionSlider")],M)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(R,D,p,M,X,fa,V,z,k,O,x,U,A,S,ka){M=function(Q){function t(n,E){n=J.call(this,n,E);n._legend=null;n.content=null;n.image=null;n.listItem=null;n.open=!1;n.visible=!0;return n}D._inherits(t,Q);var J=D._createSuper(t);Q=t.prototype;Q.initialize=function(){this.addHandles(fa.watch(()=>this.content,n=>this._createLegend(n),fa.initial))};Q.destroy=function(){this._legend=X.destroyMaybe(this._legend)};Q.render=function(){return ka.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
Q._renderContent=function(n){const {_legend:E,disabled:w}=this;return!n||w?null:"legend"===n&&E?ka.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:E},E.render()):"string"===typeof n?ka.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:n,innerHTML:n}):S.isWidget(n)?ka.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:n},n.render()):
n instanceof HTMLElement?ka.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:n,bind:n,afterCreate:this._attachToNode}):null};Q._renderContents=function(){const {content:n}=this;return Array.isArray(n)?n.map(E=>this._renderContent(E)):this._renderContent(n)};Q._getLegendOptions=function(){const {listItem:n}=this;if(!n)return{};const {layer:E,view:w}=n;return E&&w?{view:w,layerInfos:[A.getLegendLayerInfo(E)]}:{}};Q._createLegend=async function(n){if(this._hasLegend(n)&&
!this._legend){({default:n}=await new Promise((W,da)=>R(["../Legend"],oa=>W(Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"}))),da)));var {listItem:E}=this,w=new n(this._getLegendOptions());this._legend=w;this.notifyChange("className");this.notifyChange("title");n=fa.watch(()=>[E?.view,E?.layer,E?.layer?.source,E?.layer?.parent],()=>this._updateLegend(w),fa.initial);this.addHandles(n,"legends");this.scheduleRender()}};Q._hasLegend=function(n){return"legend"===
n?!0:null!=n&&(Array.isArray(n)?n.includes("legend"):!1)};Q._attachToNode=function(n){n.appendChild(this)};Q._updateLegend=function(n){n.set(this._getLegendOptions());this.scheduleRender()};Q._getWidget=function(n){return"legend"===n?this._legend:S.isWidget(n)?n:null};Q._getFirstWidget=function(){const {content:n}=this;if(Array.isArray(n)){let E=null;n.some(w=>{(w=this._getWidget(w))&&(E=w);return!!w});return E}return this._getWidget(n)};D._createClass(t,[{key:"className",get:function(){const {image:n}=
this,E=this._getFirstWidget();return this._get("className")||(!n&&E?E.iconClass:"")},set:function(n){this._override("className",n)}},{key:"disabled",get:function(){const {listItem:n,_legend:E,content:w}=this;return n?Array.isArray(w)&&1<w.length?!1:E?!E.activeLayerInfos?.length||!n.visibleAtCurrentScale:!1:!0},set:function(n){this._overrideIfSome("disabled",n)}},{key:"title",get:function(){const n=this._getFirstWidget();return this._get("title")||(n?.label??"")},set:function(n){this._override("title",
n)}}]);return t}(M.IdentifiableMixin(U));p.__decorate([V.property()],M.prototype,"_legend",void 0);p.__decorate([V.property()],M.prototype,"className",null);p.__decorate([V.property()],M.prototype,"content",void 0);p.__decorate([V.property()],M.prototype,"disabled",null);p.__decorate([V.property()],M.prototype,"image",void 0);p.__decorate([V.property()],M.prototype,"listItem",void 0);p.__decorate([V.property()],M.prototype,"title",null);p.__decorate([V.property()],M.prototype,"open",void 0);p.__decorate([V.property()],
M.prototype,"visible",void 0);return M=p.__decorate([x.subclass("esri.widgets.LayerList.ListItemPanel")],M)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(R){function D(k){if(k)return null!=k.listMode?k.listMode:void 0}function p(k){if(k)return null!=k.minScale?k.minScale:void 0}function M(k){if(k)return null!=k.maxScale?k.maxScale:void 0}function X(k){if(k&&!("type"in k&&"wmts"===k.type)&&k.listMode!==z.hideChildren)return"sublayers"in k?"sublayers":"layers"in
k?"layers":void 0}function fa(k,O){k&&k.sort((x,U)=>{x=O.indexOf(x.uid);U=O.indexOf(U.uid);return x>U?-1:x<U?1:0})}function V(k){return!!k?.layer}const z={hide:"hide",hideChildren:"hide-children"};R.canDisplayLayer=function(k){return D(k)!==z.hide};R.canSortSublayers=function(k){k=k&&(k.get("layer.layer")||k.layer);if(!k)return!1;k=k.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof k?k:!0};R.findLayerListMode=D;R.findLayerMaxScale=M;R.findLayerMinScale=p;R.findLayerVisibilityMode=
function(k){if(!k)return"inherited";var O=k.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof O)return O?"independent":"inherited";O=k.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof O?O?"independent":"inherited":null!=k.visibilityMode?k.visibilityMode:"independent"};R.findSelectedItem=function(k,O){const x=k.layer?.uid;return null!=x?O.find(U=>U.layer?.uid===x):null};R.getItemLayers=function(k){return(k=k?.layer)&&"layers"in k?
k.layers:null};R.getLegendLayerInfo=function(k){var O=V(k)?k:null;const x=k?.parent;return(O="map-image"===x?.type?O?.source:null)&&x?{layer:x,title:"",sublayerIds:[O.mapLayerId]}:{layer:k,title:""}};R.getNormalizedChildLayerProperty=X;R.isLayerOutsideScaleRange=function(k,O){if(!k||isNaN(O))return!1;var x=p(k);k=M(k);x=null!=x&&!isNaN(x)&&0<x&&O>x;O=null!=k&&!isNaN(k)&&0<k&&O<k;return x||O};R.isSublayer=V;R.sortChildLayersToIds=function(k,O){if(k=k?.layer){var x=X(k);x&&(k=k.get(x),fa(k,O))}};R.sortLayersToIds=
fa;Object.defineProperty(R,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(R){function D(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));c.push.apply(c,e)}return c}function p(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?D(Object(c),!0).forEach(function(e){var g=c[e];e in
a?Object.defineProperty(a,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):D(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}function M(a){"@babel/helpers - typeof";M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&
b!==Symbol.prototype?"symbol":typeof b};return M(a)}function X(){X=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return X.apply(this,arguments)}function fa(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),g;for(g=0;g<e.length;g++){var l=e[g];0<=b.indexOf(l)||(c[l]=a[l])}}if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(a),l=0;l<g.length;l++)e=
g[l],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function V(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function z(a,b,c){a.addEventListener(b,c,!Ba&&ub)}function k(a,b,c){a.removeEventListener(b,c,!Ba&&ub)}function O(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}
function x(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&O(a,b):O(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function U(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(vb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(vb," ")}}function A(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?
c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function S(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=A(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function ka(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<
e;b++)c(a[b],b);return a}return[]}function Q(){var a=document.scrollingElement;return a?a:document.documentElement}function t(a,b,c,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==Q()){var l=a.getBoundingClientRect();var m=l.top;var v=l.left;var y=l.bottom;var F=l.right;var H=l.height;var N=l.width}else v=m=0,y=window.innerHeight,F=window.innerWidth,H=window.innerHeight,N=window.innerWidth;if((b||c)&&a!==window&&(g=g||a.parentNode,!Ba)){do if(g&&g.getBoundingClientRect&&
("none"!==A(g,"transform")||c&&"static"!==A(g,"position"))){y=g.getBoundingClientRect();m-=y.top+parseInt(A(g,"border-top-width"));v-=y.left+parseInt(A(g,"border-left-width"));y=m+l.height;F=v+l.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=S(g||a))&&a.a,g=a&&a.d,a&&(m/=g,v/=e,N/=e,H/=g,y=m+H,F=v+N));return{top:m,left:v,bottom:y,right:F,width:N,height:H}}}function J(a,b,c){var e=da(a,!0);for(a=t(a)[b];e;){b=t(e)[c];var g=void 0;g="top"===c||"left"===c?a>=b:a<=b;if(!g)return e;if(e===Q())break;
e=da(e,!1)}return!1}function n(a,b,c,e){for(var g=0,l=0,m=a.children;l<m.length;){if("none"!==m[l].style.display&&m[l]!==G.ghost&&(e||m[l]!==G.dragged)&&x(m[l],c.draggable,a,!1)){if(g===b)return m[l];g++}l++}return null}function E(a,b){for(a=a.lastElementChild;a&&(a===G.ghost||"none"===A(a,"display")||b&&!O(a,b));)a=a.previousElementSibling;return a||null}function w(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===G.clone||b&&!O(a,
b)||c++;return c}function W(a){var b=0,c=0,e=Q();if(a){do{var g=S(a),l=g.d;b+=a.scrollLeft*g.a;c+=a.scrollTop*l}while(a!==e&&(a=a.parentNode))}return[b,c]}function da(a,b){if(!a||!a.getBoundingClientRect)return Q();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=A(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;
if(c||b)return a;c=!0}}while(a=a.parentNode);return Q()}function oa(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function r(a,b){return function(){if(!Qa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Qa=setTimeout(function(){Qa=void 0},b)}}}function P(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function la(a){var b=window.Polymer,c=window.jQuery||window.Zepto;
return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function B(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==A(c,"display")&&c!==G.ghost){a.push({target:c,rect:t(c)});var e=p({},a[a.length-1].rect);if(c.thisAnimationDuration){var g=S(c,!0);g&&(e.top-=g.f,e.left-=g.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){var e=a,g=e.splice;
a:{var l=a;c={target:c};for(var m in l)if(l.hasOwnProperty(m))for(var v in c)if(c.hasOwnProperty(v)&&c[v]===l[m][v]){l=Number(m);break a}l=-1}g.call(e,l,1)},animateAll:function(c){var e=this;if(this.options.animation){var g=!1,l=0;a.forEach(function(m){var v=0,y=m.target,F=y.fromRect,H=t(y),N=y.prevFromRect,ma=y.prevToRect;m=m.rect;var ha=S(y,!0);ha&&(H.top-=ha.f,H.left-=ha.e);y.toRect=H;y.thisAnimationDuration&&oa(N,H)&&!oa(F,H)&&(m.top-H.top)/(m.left-H.left)===(F.top-H.top)/(F.left-H.left)&&(v=
Math.sqrt(Math.pow(N.top-m.top,2)+Math.pow(N.left-m.left,2))/Math.sqrt(Math.pow(N.top-ma.top,2)+Math.pow(N.left-ma.left,2))*e.options.animation);oa(H,F)||(y.prevFromRect=F,y.prevToRect=H,v||(v=e.options.animation),e.animate(y,m,H,v));v&&(g=!0,l=Math.max(l,v),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0;y.prevFromRect=null;y.fromRect=null;y.prevToRect=null;y.thisAnimationDuration=null},v),y.thisAnimationDuration=v)});clearTimeout(b);g?b=setTimeout(function(){"function"===
typeof c&&c()},l):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,g,l){if(l){A(c,"transition","");A(c,"transform","");var m=S(this.el),v=(e.left-g.left)/(m&&m.a||1);e=(e.top-g.top)/(m&&m.d||1);c.animatingX=!!v;c.animatingY=!!e;A(c,"transform","translate3d("+v+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;A(c,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:""));A(c,"transform","translate3d(0,0,0)");"number"===
typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){A(c,"transition","");A(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},l)}}}}function ba(a){var b=p({putSortable:na,cloneEl:ca,targetEl:u,rootEl:aa,oldIndex:La,oldDraggableIndex:Ra,newIndex:ta,newDraggableIndex:Ea},a);a=b.sortable;var c=b.rootEl,e=b.name,g=b.targetEl,l=b.cloneEl,m=b.toEl,v=b.fromEl,y=b.oldIndex,F=b.newIndex,H=b.oldDraggableIndex,N=b.newDraggableIndex,ma=b.originalEvent,ha=b.putSortable,pa=
b.extraEventProperties;if(a=a||c&&c[ua]){var Z=a.options,va="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||Ba||Sa?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=m||c;b.from=v||c;b.item=g||c;b.clone=l;b.oldIndex=y;b.newIndex=F;b.oldDraggableIndex=H;b.newDraggableIndex=N;b.originalEvent=ma;b.pullMode=ha?ha.lastPutMode:void 0;e=p(p({},pa),Ta.getEventProperties(e,a));for(var wa in e)b[wa]=e[wa];c&&c.dispatchEvent(b);Z[va]&&
Z[va].call(a,b)}}function G(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=X({},b);a[ua]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",
ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,m){l.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==G.supportPointer&&"PointerEvent"in window&&!Ua,emptyInsertThreshold:5};
Ta.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);xb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Ib)this.options.touchStartThreshold=1;b.supportPointer?z(a,"pointerdown",this._onTapStart):(z(a,"mousedown",this._onTapStart),z(a,"touchstart",this._onTapStart));this.nativeDraggable&&(z(a,"dragover",this),z(a,"dragenter",this));$a.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||
[]);X(this,B())}function d(a,b,c,e,g,l,m,v){var y=a[ua],F=y.options.onMove,H;if(!window.CustomEvent||Ba||Sa){var N=document.createEvent("Event");N.initEvent("move",!0,!0)}else N=new CustomEvent("move",{bubbles:!0,cancelable:!0});N.to=b;N.from=a;N.dragged=c;N.draggedRect=e;N.related=g||b;N.relatedRect=l||t(b);N.willInsertAfter=v;N.originalEvent=m;a.dispatchEvent(N);F&&(H=F.call(y,N,m));return H}function f(a){a.draggable=!1}function h(){kb=!1}function q(a,b,c){c=t(n(c.el,0,c.options,!0));return b?a.clientX<
c.left-10||a.clientY<c.top&&a.clientX<c.right:a.clientY<c.top-10||a.clientY<c.bottom&&a.clientX<c.left}function C(a,b,c){c=t(E(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function I(a,b,c,e,g,l,m,v){a=e?a.clientY:a.clientX;var y=e?c.height:c.width,F=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!m)if(v&&ab<y*g)if(!Va&&(1===Wa?a>F+y*l/2:a<c-y*l/2)&&(Va=
!0),Va)e=!0;else{if(1===Wa?a<F+ab:a>c-ab)return-Wa}else if(a>F+y*(1-g)/2&&a<c-y*(1-g)/2)return b=w(u)<w(b)?1:-1,b;if(e||m)if(a<F+y*l/2||a>c-y*l/2)return a>F+y/2?1:-1;return 0}function L(a){bb.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&bb.push(c)}}function T(a){return setTimeout(a,0)}function ja(){ia.forEach(function(a){clearInterval(a.pid)});ia=[]}function Ca(){}function Fa(){}var Ba=V(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Sa=V(/Edge/i),
yb=V(/firefox/i),Ua=V(/safari/i)&&!V(/chrome/i)&&!V(/android/i),Xa=V(/iP(ad|od|hone)/i),zb=V(/chrome/i)&&V(/android/i),ub={capture:!1,passive:!1},vb=/\s+/g,Qa,ua="Sortable"+(new Date).getTime(),Ma=[],lb={initializeByDefault:!0},Ta={mount:function(a){for(var b in lb)!lb.hasOwnProperty(b)||b in a||(a[b]=lb[b]);Ma.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});Ma.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=
!1;c.cancel=function(){e.eventCanceled=!0};var g=a+"Global";Ma.forEach(function(l){if(b[l.pluginName]){if(b[l.pluginName][g])b[l.pluginName][g](p({sortable:b},c));if(b.options[l.pluginName]&&b[l.pluginName][a])b[l.pluginName][a](p({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Ma.forEach(function(l){var m=l.pluginName;if(a.options[m]||l.initializeByDefault)l=new l(a,b,a.options),l.sortable=a,l.options=a.options,a[m]=l,X(c,l.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&
(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var c={};Ma.forEach(function(e){"function"===typeof e.eventProperties&&X(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Ma.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],c))});return e}},Jb=["evt"],sa=function(a,b){var c=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:{},e=c.evt;c=fa(c,Jb);Ta.pluginEvent.bind(G)(a,b,p({dragEl:u,parentEl:ea,ghostEl:K,rootEl:aa,nextEl:Ia,lastDownEl:cb,cloneEl:ca,cloneHidden:Ga,dragStarted:Ya,putSortable:na,activeSortable:G.active,originalEvent:e,oldIndex:La,oldDraggableIndex:Ra,newIndex:ta,newDraggableIndex:Ea,hideGhostForTarget:Ab,unhideGhostForTarget:Bb,cloneNowHidden:function(){Ga=!0},cloneNowShown:function(){Ga=!1},dispatchSortableEvent:function(g){ba({sortable:b,name:g,originalEvent:e})}},c))},u,ea,
K,aa,Ia,cb,ca,Ga,La,ta,Ra,Ea,db,na,Na=!1,eb=!1,$a=[],Ja,xa,mb,nb,Cb,Db,Ya,Oa,Wa,Va=!1,fb=!1,ab,qa,ob=[],kb=!1,bb=[],gb="undefined"!==typeof document,Eb=Sa||Ba?"cssFloat":"float",Ib=gb&&!zb&&!Xa&&"draggable"in document.createElement("div"),Fb=function(){if(gb){if(Ba)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),wb=function(a,b){var c=A(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-
parseInt(c.borderRightWidth),g=n(a,0,b);a=n(a,1,b);var l=g&&A(g);b=a&&A(a);var m=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+t(g).width,v=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+t(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&l["float"]&&"none"!==l["float"]?(c="left"===l["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==
c?"horizontal":"vertical"):g&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||m>=e&&"none"===c[Eb]||a&&"none"===c[Eb]&&m+v>e)?"vertical":"horizontal"},Kb=function(a,b,c){var e=c?a.left:a.top,g=c?a.right:a.bottom;a=c?a.width:a.height;var l=c?b.left:b.top,m=c?b.right:b.bottom;b=c?b.width:b.height;return e===l||g===m||e+a/2===l+b/2},Lb=function(a,b){var c;$a.some(function(e){var g=e[ua].options.emptyInsertThreshold;if(g&&!E(e)){var l=t(e),m=b>=l.top-g&&b<=l.bottom+
g;if(a>=l.left-g&&a<=l.right+g&&m)return c=e}});return c},xb=function(a){function b(g,l){return function(m,v,y,F){var H=m.options.group.name&&v.options.group.name&&m.options.group.name===v.options.group.name;if(null==g&&(l||H))return!0;if(null==g||!1===g)return!1;if(l&&"clone"===g)return g;if("function"===typeof g)return b(g(m,v,y,F),l)(m,v,y,F);m=(l?m:v).options.group.name;return!0===g||"string"===typeof g&&g===m||g.join&&-1<g.indexOf(m)}}var c={},e=a.group;e&&"object"==M(e)||(e={name:e});c.name=
e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Ab=function(){!Fb&&K&&A(K,"display","none")},Bb=function(){!Fb&&K&&A(K,"display","")};gb&&!zb&&document.addEventListener("click",function(a){if(eb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),eb=!1},!0);var Ka=function(a){if(u){a=a.touches?a.touches[0]:a;var b=Lb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&
(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[ua]._onDragOver(c)}}},Mb=function(a){u&&u.parentNode[ua]._isOutsideThisEl(a.target)};G.prototype={constructor:G,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Oa=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,u):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,g=e.preventOnFilter,
l=a.type,m=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,v=(m||a).target,y=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||v,F=e.filter;L(c);if(!(u||/mousedown|pointerdown/.test(l)&&0!==a.button||e.disabled||y.isContentEditable||!this.nativeDraggable&&Ua&&v&&"SELECT"===v.tagName.toUpperCase()||(v=x(v,e.draggable,c,!1),v&&v.animated||cb===v))){La=w(v);Ra=w(v,e.draggable);if("function"===typeof F){if(F.call(this,a,v,this)){ba({sortable:b,rootEl:y,
name:"filter",targetEl:v,toEl:c,fromEl:c});sa("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(F&&(F=F.split(",").some(function(H){if(H=x(y,H.trim(),c,!1))return ba({sortable:b,rootEl:H,name:"filter",targetEl:v,fromEl:c,toEl:c}),sa("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}e.handle&&!x(y,e.handle,c,!1)||this._prepareDragStart(a,m,v)}}},_prepareDragStart:function(a,b,c){var e=this,g=e.el,l=e.options,m=g.ownerDocument;if(c&&!u&&c.parentNode===g){var v=
t(c);aa=g;u=c;ea=u.parentNode;Ia=u.nextSibling;cb=c;db=l.group;G.dragged=u;Ja={target:u,clientX:(b||a).clientX,clientY:(b||a).clientY};Cb=Ja.clientX-v.left;Db=Ja.clientY-v.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;u.style["will-change"]="all";c=function(){sa("delayEnded",e,{evt:a});G.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!yb&&e.nativeDraggable&&(u.draggable=!0),e._triggerDragStart(a,b),ba({sortable:e,name:"choose",originalEvent:a}),U(u,l.chosenClass,!0))};l.ignore.split(",").forEach(function(y){ka(u,
y.trim(),f)});z(m,"dragover",Ka);z(m,"mousemove",Ka);z(m,"touchmove",Ka);z(m,"mouseup",e._onDrop);z(m,"touchend",e._onDrop);z(m,"touchcancel",e._onDrop);yb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,u.draggable=!0);sa("delayStart",this,{evt:a});!l.delay||l.delayOnTouchOnly&&!b||this.nativeDraggable&&(Sa||Ba)?c():G.eventCanceled?this._onDrop():(z(m,"mouseup",e._disableDelayedDrag),z(m,"touchend",e._disableDelayedDrag),z(m,"touchcancel",e._disableDelayedDrag),z(m,"mousemove",e._delayedDragTouchMoveHandler),
z(m,"touchmove",e._delayedDragTouchMoveHandler),l.supportPointer&&z(m,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,l.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&f(u);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;k(a,"mouseup",this._disableDelayedDrag);k(a,"touchend",this._disableDelayedDrag);k(a,"touchcancel",this._disableDelayedDrag);k(a,"mousemove",this._delayedDragTouchMoveHandler);k(a,"touchmove",this._delayedDragTouchMoveHandler);k(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?z(document,
"pointermove",this._onTouchMove):b?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(u,"dragend",this),z(aa,"dragstart",this._onDragStart));try{document.selection?T(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Na=!1;if(aa&&u){sa("dragStarted",this,{evt:b});this.nativeDraggable&&z(document,"dragover",Mb);var c=this.options;!a&&U(u,c.dragClass,!1);U(u,c.ghostClass,!0);G.active=this;a&&this._appendGhost();
ba({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(xa){this._lastX=xa.clientX;this._lastY=xa.clientY;Ab();for(var a=document.elementFromPoint(xa.clientX,xa.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(xa.clientX,xa.clientY);if(a===b)break;b=a}u.parentNode[ua]._isOutsideThisEl(a);if(b){do{if(b[ua]){var c=void 0;if((c=b[ua]._onDragOver({clientX:xa.clientX,clientY:xa.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=
b}while(b=b.parentNode)}Bb()}},_onTouchMove:function(a){if(Ja){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=K&&S(K,!0),l=K&&g&&g.a,m=K&&g&&g.d,v=Xa&&qa&&W(qa);l=(b.clientX-Ja.clientX+e.x)/(l||1)+(v?v[0]-ob[0]:0)/(l||1);e=(b.clientY-Ja.clientY+e.y)/(m||1)+(v?v[1]-ob[1]:0)/(m||1);if(!G.active&&!Na){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}K&&(g?(g.e+=l-(mb||0),g.f+=e-(nb||0)):g={a:1,
b:0,c:0,d:1,e:l,f:e},c="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),A(K,"webkitTransform",c),A(K,"mozTransform",c),A(K,"msTransform",c),A(K,"transform",c),mb=l,nb=e,xa=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!K){var a=this.options.fallbackOnBody?document.body:aa,b=t(u,!0,Xa,!0,a),c=this.options;if(Xa){for(qa=a;"static"===A(qa,"position")&&"none"===A(qa,"transform")&&qa!==document;)qa=qa.parentNode;qa!==document.body&&
qa!==document.documentElement?(qa===document&&(qa=Q()),b.top+=qa.scrollTop,b.left+=qa.scrollLeft):qa=Q();ob=W(qa)}K=u.cloneNode(!0);U(K,c.ghostClass,!1);U(K,c.fallbackClass,!0);U(K,c.dragClass,!0);A(K,"transition","");A(K,"transform","");A(K,"box-sizing","border-box");A(K,"margin",0);A(K,"top",b.top);A(K,"left",b.left);A(K,"width",b.width);A(K,"height",b.height);A(K,"opacity","0.8");A(K,"position",Xa?"absolute":"fixed");A(K,"zIndex","100000");A(K,"pointerEvents","none");G.ghost=K;a.appendChild(K);
A(K,"transform-origin",Cb/parseInt(K.style.width)*100+"% "+Db/parseInt(K.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,g=c.options;sa("dragStart",this,{evt:a});G.eventCanceled?this._onDrop():(sa("setupClone",this),G.eventCanceled||(ca=la(u),ca.removeAttribute("id"),ca.draggable=!1,ca.style["will-change"]="",this._hideClone(),U(ca,this.options.chosenClass,!1),G.clone=ca),c.cloneId=T(function(){sa("clone",c);G.eventCanceled||(c.options.removeCloneOnHide||aa.insertBefore(ca,
u),c._hideClone(),ba({sortable:c,name:"clone"}))}),!b&&U(u,g.dragClass,!0),b?(eb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(k(document,"mouseup",c._onDrop),k(document,"touchend",c._onDrop),k(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(c,e,u)),z(document,"drop",c),A(u,"transform","translateZ(0)")),Na=!0,c._dragStartId=T(c._dragStarted.bind(c,b,a)),z(document,"selectstart",c),Ya=!0,Ua&&A(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ha,
hb){sa(Ha,Z,p({evt:a,isOwner:ma,axis:wa?"vertical":"horizontal",revert:y,dragRect:ya,targetRect:v,canSort:ha,fromSortable:pa,target:m,completed:e,onMove:function(Gb,Nb){return d(aa,l,u,ya,Gb,t(Gb),a,Nb)},changed:g},hb))}function c(){b("dragOverAnimationCapture");Z.captureAnimationState();Z!==pa&&pa.captureAnimationState()}function e(Ha){b("dragOverCompleted",{insertion:Ha});Ha&&(ma?N._hideClone():N._showClone(Z),Z!==pa&&(U(u,na?na.options.ghostClass:N.options.ghostClass,!1),U(u,F.ghostClass,!0)),
na!==Z&&Z!==G.active?na=Z:Z===G.active&&na&&(na=null),pa===Z&&(Z._ignoreWhileAnimating=m),Z.animateAll(function(){b("dragOverAnimationComplete");Z._ignoreWhileAnimating=null}),Z!==pa&&(pa.animateAll(),pa._ignoreWhileAnimating=null));if(m===u&&!u.animated||m===l&&!m.animated)Oa=null;F.dragoverBubble||a.rootEl||m===document||(u.parentNode[ua]._isOutsideThisEl(a.target),!Ha&&Ka(a));!F.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return va=!0}function g(){ta=w(u);Ea=w(u,F.draggable);ba({sortable:Z,
name:"change",toEl:l,newIndex:ta,newDraggableIndex:Ea,originalEvent:a})}var l=this.el,m=a.target,v,y,F=this.options,H=F.group,N=G.active,ma=db===H,ha=F.sort,pa=na||N,Z=this,va=!1;if(!kb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();m=x(m,F.draggable,l,!0);b("dragOver");if(G.eventCanceled)return va;if(u.contains(a.target)||m.animated&&m.animatingX&&m.animatingY||Z._ignoreWhileAnimating===m)return e(!1);eb=!1;if(N&&!F.disabled&&(ma?ha||(y=ea!==aa):na===this||(this.lastPutMode=db.checkPull(this,
N,u,a))&&H.checkPut(this,N,u,a))){var wa="vertical"===this._getDirection(a,m);var ya=t(u);b("dragOverValid");if(G.eventCanceled)return va;if(y)return ea=aa,c(),this._hideClone(),b("revert"),G.eventCanceled||(Ia?aa.insertBefore(u,Ia):aa.appendChild(u)),e(!0);H=E(l,F.draggable);if(!H||C(a,wa,this)&&!H.animated){if(H===u)return e(!1);H&&l===a.target&&(m=H);m&&(v=t(m));if(!1!==d(aa,l,u,ya,m,v,a,!!m))return c(),H&&H.nextSibling?l.insertBefore(u,H.nextSibling):l.appendChild(u),ea=l,g(),e(!0)}else if(H&&
q(a,wa,this)){var za=n(l,0,F,!0);if(za===u)return e(!1);m=za;v=t(m);if(!1!==d(aa,l,u,ya,m,v,a,!1))return c(),l.insertBefore(u,za),ea=l,g(),e(!0)}else if(m.parentNode===l){v=t(m);var Y=0;Y=u.parentNode!==l;var ra=!Kb(u.animated&&u.toRect||ya,m.animated&&m.toRect||v,wa);H=wa?"top":"left";var Da=J(m,"top","top")||J(u,"top","top"),ib=Da?Da.scrollTop:void 0;Oa!==m&&(za=v[H],Va=!1,fb=!ra&&F.invertSwap||Y);Y=I(a,m,v,wa,ra?1:F.swapThreshold,null==F.invertedSwapThreshold?F.swapThreshold:F.invertedSwapThreshold,
fb,Oa===m);if(0!==Y){ra=w(u);do{ra-=Y;var Aa=ea.children[ra]}while(Aa&&("none"===A(Aa,"display")||Aa===K))}if(0===Y||Aa===m)return e(!1);Oa=m;Wa=Y;Aa=m.nextElementSibling;ra=!1;ra=1===Y;Y=d(aa,l,u,ya,m,v,a,ra);if(!1!==Y){if(1===Y||-1===Y)ra=1===Y;kb=!0;setTimeout(h,30);c();ra&&!Aa?l.appendChild(u):m.parentNode.insertBefore(u,ra?Aa:m);Da&&P(Da,0,ib-Da.scrollTop);ea=u.parentNode;void 0===za||fb||(ab=Math.abs(za-t(m)[H]));g();return e(!0)}}if(l.contains(u))return e(!1)}return!1}},_ignoreWhileAnimating:null,
_offMoveEvents:function(){k(document,"mousemove",this._onTouchMove);k(document,"touchmove",this._onTouchMove);k(document,"pointermove",this._onTouchMove);k(document,"dragover",Ka);k(document,"mousemove",Ka);k(document,"touchmove",Ka)},_offUpEvents:function(){var a=this.el.ownerDocument;k(a,"mouseup",this._onDrop);k(a,"touchend",this._onDrop);k(a,"pointerup",this._onDrop);k(a,"touchcancel",this._onDrop);k(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ta=w(u);Ea=w(u,
c.draggable);sa("drop",this,{evt:a});ea=u&&u.parentNode;ta=w(u);Ea=w(u,c.draggable);if(!G.eventCanceled&&(Va=fb=Na=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(k(document,"drop",this),k(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ua&&A(document.body,"user-select",""),A(u,"transform",""),a&&(Ya&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),
K&&K.parentNode&&K.parentNode.removeChild(K),(aa===ea||na&&"clone"!==na.lastPutMode)&&ca&&ca.parentNode&&ca.parentNode.removeChild(ca),u&&(this.nativeDraggable&&k(u,"dragend",this),f(u),u.style["will-change"]="",Ya&&!Na&&U(u,na?na.options.ghostClass:this.options.ghostClass,!1),U(u,this.options.chosenClass,!1),ba({sortable:this,name:"unchoose",toEl:ea,newIndex:null,newDraggableIndex:null,originalEvent:a}),aa!==ea?(0<=ta&&(ba({rootEl:ea,name:"add",toEl:ea,fromEl:aa,originalEvent:a}),ba({sortable:this,
name:"remove",toEl:ea,originalEvent:a}),ba({rootEl:ea,name:"sort",toEl:ea,fromEl:aa,originalEvent:a}),ba({sortable:this,name:"sort",toEl:ea,originalEvent:a})),na&&na.save()):ta!==La&&0<=ta&&(ba({sortable:this,name:"update",toEl:ea,originalEvent:a}),ba({sortable:this,name:"sort",toEl:ea,originalEvent:a})),G.active)))){if(null==ta||-1===ta)ta=La,Ea=Ra;ba({sortable:this,name:"end",toEl:ea,originalEvent:a});this.save()}this._nulling()},_nulling:function(){sa("nulling",this);aa=u=ea=K=Ia=ca=cb=Ga=Ja=xa=
Ya=ta=Ea=La=Ra=Oa=Wa=na=db=G.dragged=G.ghost=G.clone=G.active=null;bb.forEach(function(a){a.checked=!0});bb.length=mb=nb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":u&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,g=c.length,l=this.options;e<g;e++)if(b=c[e],
x(b,l.draggable,this.el,!1)){var m=a,v=m.push,y;if(!(y=b.getAttribute(l.dataIdAttr))){b=b.tagName+b.className+b.src+b.href+b.textContent;y=b.length;for(var F=0;y--;)F+=b.charCodeAt(y);y=F.toString(36)}v.call(m,y)}return a},sort:function(a,b){var c={},e=this.el;this.toArray().forEach(function(g,l){l=e.children[l];x(l,this.options.draggable,e,!1)&&(c[g]=l)},this);b&&this.captureAnimationState();a.forEach(function(g){c[g]&&(e.removeChild(c[g]),e.appendChild(c[g]))});b&&this.animateAll()},save:function(){var a=
this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return x(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ta.modifyOption(this,a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&xb(c)},destroy:function(){sa("destroy",this);var a=this.el;a[ua]=null;k(a,"mousedown",this._onTapStart);k(a,"touchstart",this._onTapStart);k(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(k(a,"dragover",this),k(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();$a.splice($a.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Ga||(sa("hideClone",this),G.eventCanceled||(A(ca,"display","none"),this.options.removeCloneOnHide&&ca.parentNode&&ca.parentNode.removeChild(ca),Ga=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Ga&&(sa("showClone",this),G.eventCanceled||(u.parentNode!=aa||this.options.group.revertClone?Ia?aa.insertBefore(ca,Ia):
aa.appendChild(ca):aa.insertBefore(ca,u),this.options.group.revertClone&&this.animate(u,ca),A(ca,"display",""),Ga=!1))}};gb&&z(document,"touchmove",function(a){(G.active||Na)&&a.cancelable&&a.preventDefault()});G.utils={on:z,off:k,css:A,find:ka,is:function(a,b){return!!x(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:r,closest:x,toggleClass:U,clone:la,index:w,nextTick:T,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:wb,
getChild:n};G.get=function(a){return a[ua]};G.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(G.utils=p(p({},G.utils),e.utils));Ta.mount(e)})};G.create=function(a,b){return new G(a,b)};G.version="1.15.0";var ia=[],Za,pb,qb=!1,rb,sb,jb,Pa,tb=r(function(a,b,c,
e){if(b.scroll){var g=(a.touches?a.touches[0]:a).clientX,l=(a.touches?a.touches[0]:a).clientY,m=b.scrollSensitivity,v=b.scrollSpeed,y=Q(),F=!1;if(pb!==c){pb=c;ja();Za=b.scroll;var H=b.scrollFn;!0===Za&&(Za=da(c,!0))}c=0;var N=Za;do{var ma=N,ha=t(ma),pa=ha.top,Z=ha.bottom,va=ha.left,wa=ha.right,ya=ha.width;ha=ha.height;var za=void 0,Y=void 0,ra=ma.scrollWidth,Da=ma.scrollHeight;Y=A(ma);var ib=ma.scrollLeft,Aa=ma.scrollTop;ma===y?(za=ya<ra&&("auto"===Y.overflowX||"scroll"===Y.overflowX||"visible"===
Y.overflowX),Y=ha<Da&&("auto"===Y.overflowY||"scroll"===Y.overflowY||"visible"===Y.overflowY)):(za=ya<ra&&("auto"===Y.overflowX||"scroll"===Y.overflowX),Y=ha<Da&&("auto"===Y.overflowY||"scroll"===Y.overflowY));va=za&&(Math.abs(wa-g)<=m&&ib+ya<ra)-(Math.abs(va-g)<=m&&!!ib);pa=Y&&(Math.abs(Z-l)<=m&&Aa+ha<Da)-(Math.abs(pa-l)<=m&&!!Aa);if(!ia[c])for(Z=0;Z<=c;Z++)ia[Z]||(ia[Z]={});if(ia[c].vx!=va||ia[c].vy!=pa||ia[c].el!==ma)if(ia[c].el=ma,ia[c].vx=va,ia[c].vy=pa,clearInterval(ia[c].pid),0!=va||0!=pa)F=
!0,ia[c].pid=setInterval(function(){e&&0===this.layer&&G.active._onTouchMove(jb);var Ha=ia[this.layer].vy?ia[this.layer].vy*v:0,hb=ia[this.layer].vx?ia[this.layer].vx*v:0;"function"===typeof H&&"continue"!==H.call(G.dragged.parentNode[ua],hb,Ha,a,jb,ia[this.layer].el)||P(ia[this.layer].el,hb,Ha)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&N!==y&&(N=da(N,!1)));qb=F}},30),Hb=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,g=a.activeSortable,l=a.dispatchSortableEvent,m=a.hideGhostForTarget;
a=a.unhideGhostForTarget;b&&(g=c||g,m(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(l("spill"),this.onSpill({dragEl:e,putSortable:c})))};Ca.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=n(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,
c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Hb};X(Ca,{pluginName:"revertOnSpill"});Fa.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Hb};X(Fa,{pluginName:"removeOnSpill"});G.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&
"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):b.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},
drop:function(){this.sortable.nativeDraggable?k(document,"dragover",this._handleAutoScroll):(k(document,"pointermove",this._handleFallbackAutoScroll),k(document,"touchmove",this._handleFallbackAutoScroll),k(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Pa);ja();clearTimeout(Qa);Qa=void 0},nulling:function(){jb=pb=Za=qb=Pa=rb=sb=null;ia.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,g=(b.touches?b.touches[0]:
b).clientX,l=(b.touches?b.touches[0]:b).clientY,m=document.elementFromPoint(g,l);jb=b;if(c||this.options.forceAutoScrollFallback||Sa||Ba||Ua){tb(b,this.options,m,c);var v=da(m,!0);!qb||Pa&&g===rb&&l===sb||(Pa&&clearInterval(Pa),Pa=setInterval(function(){var y=da(document.elementFromPoint(g,l),!0);y!==v&&(v=y,ja());tb(b,e.options,y,c)},10),rb=g,sb=l)}else this.options.bubbleScroll&&da(m,!0)!==Q()?tb(b,this.options,da(m,!1),!1):ja()}};return X(a,{pluginName:"scroll",initializeByDefault:!0})});G.mount(Fa,
Ca);R.Sortable=G})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/has ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/componentsUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(R,
D,p,M,X,fa,V,z,k,O,x,U,A,S,ka,Q,t,J,n,E,w,W,da){function oa(B){const {actionsOpen:ba,children:G}=B;ba&&(B.actionsOpen=!1);G.forEach(d=>oa(d))}const r=M.ofType(ka),P={exclusive:"exclusive",inherited:"inherited",independent:"independent"},la={statusIndicators:!0,errors:!1};x=function(B){function ba(d,f){var h=G.call(this,d,f);h._sortableNodes=new Map;h._sortableMap=new Map;h._focusSortUid=null;h._newUI=fa("esri-layerlist-new-ui");h._tooltipReferenceMap=new Map;h.visibleItems=new M;h.iconClass="esri-icon-layers";
h.listItemCanGiveFunction=null;h.listItemCanReceiveFunction=null;h.messages=null;h.messagesCommon=null;h.multipleSelectionEnabled=!1;h.selectionEnabled=!1;h.selectedItems=new r;h.viewModel=new S;h.visibleElements={...la};h._onSortableSort=({to:q,from:C,item:I,newIndex:L})=>{C&&q&&(C===q?h._sortLayers(h._sortableMap.get(C.dataset.group)):h._moveLayerFromChildList({to:q,from:C,item:I,newIndex:L}))};h._sortableCanSort=(q,C)=>!(!q.el.dataset.group||!C.el.dataset.group);h._sortableCanPull=(q,C,I)=>{const {listItemCanGiveFunction:L}=
D._assertThisInitialized(h);I={selected:I["data-item"],from:C.el["data-item"],to:q.el["data-item"]};return h._sortableCanSort(q,C)&&"function"===typeof L?L.call(null,I):!0};h._sortableCanPut=(q,C,I)=>{const {listItemCanReceiveFunction:L}=D._assertThisInitialized(h);I={selected:I["data-item"],from:C.el["data-item"],to:q.el["data-item"]};return h._sortableCanSort(q,C)&&"function"===typeof L?L.call(null,I):!0};h._onSortableEnd=({oldIndex:q,from:C,to:I,item:L})=>{C!==I&&C.insertBefore(L,C.children[q])};
return h}D._inherits(ba,B);var G=D._createSuper(ba);B=ba.prototype;B.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.addHandles([z.on(()=>this.operationalItems,"change",()=>this._itemsChanged(d)),z.watch(()=>this.visibleElements,()=>this._itemsChanged(d)),z.watch(()=>this.selectionEnabled,()=>this._toggleAllSorting(),z.initial)])};B.loadDependencies=function(){return t.loadCalciteComponents({icon:()=>new Promise((d,f)=>R(["../chunks/calcite-icon"],d,f)),tooltip:()=>
new Promise((d,f)=>R(["../chunks/calcite-tooltip"],d,f))})};B.destroy=function(){this.removeAllHandles();this._destroySortables();this._tooltipReferenceMap.clear()};B.castVisibleElements=function(d){return{...la,...d}};B.triggerAction=function(d,f){return this.viewModel.triggerAction(d,f)};B.render=function(){const {visibleItems:d,_newUI:f}=this;var h=this.viewModel?.state;h={["esri-layer-list--new-ui"]:f,["esri-hidden"]:"loading"===h,["esri-disabled"]:"disabled"===h};const q=this.renderItemTooltips(),
C=this.renderItems();return w.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",h)},0!==d.length?[q,C]:this.renderNoItems())};B.renderItemTooltip=function(d){const {_tooltipReferenceMap:f,messages:h}=this;return d?w.tsx("calcite-tooltip",{label:h?.layerIncompatible??"",referenceElement:f.get(d.uid)},h?.layerIncompatibleTooltip):null};B.renderItemTooltipNodes=function(d){const {incompatible:f,children:h}=d;return[f?this.renderItemTooltip(d):null,...(!f&&h?h.toArray().map(q=>
this.renderItemTooltipNodes(q)):[])]};B.renderItemTooltips=function(){return this.visibleItems.toArray().map(d=>this.renderItemTooltipNodes(d))??[]};B.renderNoItems=function(){return w.tsx("div",{class:"esri-layer-list__no-items"},this.messages?.noItemsToDisplay)};B.renderItems=function(){const {visibleItems:d,selectionEnabled:f,messages:h}=this;return w.tsx("ul",{"aria-label":h?.widgetLabel,role:f?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},d.map(q=>this.renderItem(q,null)).toArray())};B.renderActionsMenuIcon=function(d,f){const {messagesCommon:h}=this;return w.tsx("div",{key:"actions-menu-toggle","data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),
tabindex:"0",role:"button","aria-controls":f,"aria-label":h?.options,title:h?.options},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};B.renderActionsMenu=function(d,f,h,q){var {panel:C}=d;C=C&&C.visible?this.renderPanelButton(C):null;const I=(f=1===h&&this._getSingleActionButton(f))?this.renderAction({item:d,action:f,singleAction:!0}):null;return(d=!f&&h?this.renderActionsMenuIcon(d,q):null)||C||f?w.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},
C,I,d):null};B.renderChildList=function(d,f){const {selectionEnabled:h}=this,{visibilityMode:q,children:C}=d,I=this._hasChildren(d),L=!I&&h&&"group"===d.layer?.type,{exclusive:T,inherited:ja}=P,Ca={["esri-layer-list__list--exclusive"]:q===T,["esri-layer-list__list--inherited"]:q===ja,["esri-layer-list__list--independent"]:q!==ja&&q!==T};return I||L?w.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
class:this.classes("esri-layer-list__list",Ca),"aria-expanded":d.open?"true":"false",role:h?"listbox":q===T?"radiogroup":"group",hidden:d.open||L?null:!0},C?.map(Fa=>this.renderItem(Fa,d)).toArray()):null};B.renderChildrenToggle=function(d,f){var {messagesCommon:h}=this;const q=this._hasChildren(d),C={["esri-layer-list__child-toggle--open"]:d.open};h=d.open?h?.collapse:h?.expand;return q?w.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",
class:this.classes("esri-layer-list__child-toggle",C),tabindex:"0",role:"button","aria-controls":f,"aria-label":h,title:h},w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),w.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):
null};B.renderItemMessage=function(d){return d.error?w.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-message",role:"alert"},w.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),this.messages?.layerError):d.incompatible?w.tsx("div",{key:"esri-layer-list__incompatible",class:"esri-layer-list__item-message",role:"alert"},w.tsx("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:"esri-icon-notice-triangle",afterCreate:f=>this._setTooltipReference(f,d)}),this.messages?.layerIncompatible):
null};B.renderItemContent=function(d,f,h){var {id:q}=this,C=`${q}_${d.uid}`;q=`${C}_actions`;C=`${C}__list`;const {panel:I}=d,L=this._filterActions(d.actionsSections),T=this._countActions(L);return[w.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,C),this.renderLabel(d,f,h),this.renderActionsMenu(d,L,T,q)),this.renderItemMessage(d),T?this.renderActionsSections(d,L,q):null,I&&I.open&&!I.disabled?I.render():null,this.renderChildList(d,C)]};B.renderItem=
function(d,f){const {_newUI:h,id:q,selectionEnabled:C,selectedItems:I}=this,L=`${`${q}_${d.uid}`}__title`;var T=this._hasMessage(d);T={["esri-layer-list__item--has-children"]:this._hasChildren(d),["esri-layer-list__item--has-message"]:!!T,["esri-layer-list__item--invisible"]:h&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:C};if(C){const ja={["data-layer-uid"]:d.layer?.uid,["data-sort-filter"]:(!d.sortable).toString()};return w.tsx("li",
{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",T),"aria-labelledby":L,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":d,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":Q.findSelectedItem(d,I)?"true":"false",role:"option",...ja},this.renderItemContent(d,f,L))}return w.tsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,
class:this.classes("esri-layer-list__item",T),"aria-labelledby":L},this.renderItemContent(d,f,L))};B.renderConnectionIcon=function(d){({connectionStatus:d}=d);return V.isSome(d)?w.tsx("calcite-icon",{icon:"connected"===d?"check-circle":"offline",scale:"s"}):null};B.renderItemStatus=function(d,f){var {visibleElements:h}=this;if(!h.statusIndicators)return null;const {connectionStatus:q,publishing:C,updating:I}=d;h=!!q;return w.tsx("span",{class:this.classes({["esri-layer-list__status-indicator"]:!0,
["esri-layer-list__publishing"]:C,["esri-layer-list__updating"]:I&&!f,["esri-layer-list__connection-status"]:h,["esri-layer-list__connection-status--connected"]:h&&"connected"===q}),key:"layer-item-status"},this.renderConnectionIcon(d))};B.renderItemTitle=function(d,f){const {messages:h}=this;if(!d)return null;const q=d.title||h?.untitledLayer;d=d.visibleAtCurrentScale?q:`${q} (${h?.layerInvisibleAtScale??""})`;return w.tsx("span",{key:"layer-title-container",id:f,title:d,"aria-label":d,class:"esri-layer-list__item-title"},
q)};B.renderItemToggleIcon=function(d,f){const {_newUI:h}=this,{exclusive:q}=P;f=f?.visibilityMode;return w.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:h,["esri-layer-list__item-toggle-icon"]:h&&f!==q,["esri-layer-list__item-radio-icon"]:h&&f===q,["esri-icon-radio-checked"]:f===q&&d.visible,["esri-icon-radio-unchecked"]:f===q&&!d.visible,["esri-icon-visible"]:f!==q&&d.visible,["esri-icon-non-visible"]:f!==q&&!d.visible}),"aria-hidden":"true"})};B.renderItemToggle=
function(d,f,h){const {selectionEnabled:q,messages:C}=this,{exclusive:I}=P,L=f?.visibilityMode;return q?w.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":L,tabIndex:0,title:d.visible?C?.hideLayer:C?.showLayer,"aria-checked":d.visible?"true":"false",role:L===I?"radio":"switch","aria-labelledby":h},this.renderItemToggleIcon(d,f)):w.tsx("span",{key:"item-toggle",
class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,f))};B.renderLabel=function(d,f,h){const {selectionEnabled:q,_newUI:C,messages:I}=this,{inherited:L,exclusive:T}=P,ja=f?.visibilityMode;var Ca=ja===T?"radio":"switch";const Fa=C?[this.renderItemTitle(d,h),this.renderItemStatus(d,f),this.renderItemToggle(d,f,h)]:[this.renderItemToggle(d,f,h),this.renderItemTitle(d,h),this.renderItemStatus(d,f)];Ca=q?w.tsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},
Fa):w.tsx("div",{key:`item-label-with-selection-${d.uid}`,class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":ja,tabIndex:0,"aria-checked":d.visible?"true":"false",title:d.visible?I?.hideLayer:I?.showLayer,role:Ca,"aria-labelledby":h},Fa);return ja===L||d.error?w.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemTitle(d,h),this.renderItemStatus(d,f)):Ca};
B.renderPanelButton=function(d){const {className:f,open:h,title:q,image:C}=d,I=C||f?f:"esri-icon-default-action",L=this._getIconImageStyles(d),T={["esri-layer-list__item-actions-menu-item--active"]:h},ja={["esri-layer-list__item-action-image"]:!!L["background-image"],["esri-disabled-element"]:d.disabled};I&&(ja[I]=!!I);return w.tsx("div",{"aria-disabled":d.disabled.toString(),key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",
T),role:"button",tabindex:d.disabled?null:0,title:q,"aria-label":q},w.tsx("span",{class:this.classes(ja),styles:L}))};B.renderActionsSections=function(d,f,h){f=f.toArray().map((q,C)=>w.tsx("ul",{key:`${d}-action-section-${C}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,q)));return w.tsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:h,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},f)};B.renderActionSection=
function(d,f){return(f&&f.toArray()).map(h=>this.renderAction({item:d,action:h}))};B.renderActionIcon=function(d){const {active:f,className:h}=d,q=this._getIconImageStyles(d);d="button"!==d.type||d.image||h?h:"esri-icon-default-action";const C={["esri-layer-list__item-action-image"]:!f&&!!q["background-image"],["esri-icon-loading-indicator"]:f,["esri-rotating"]:f};d&&!f&&(C[d]=!0);return w.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",C),
styles:q})};B.renderActionTitle=function(d,f){return f?null:w.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};B.renderAction=function(d){const {item:f,action:h,singleAction:q}=d,{active:C,disabled:I,title:L}=h;d={["esri-layer-list__item-actions-menu-item"]:q&&"button"===h.type,["esri-layer-list__item-action"]:C||!q&&"toggle"!==h.type,["esri-layer-list__action-toggle"]:!C&&"toggle"===h.type,["esri-layer-list__action-toggle--on"]:!C&&"toggle"===h.type&&h.value,["esri-disabled-element"]:I};
const T=[this.renderActionIcon(h),this.renderActionTitle(L,q)];return q?w.tsx("div",{bind:this,"data-item":f,"data-action":h,role:"button",key:`single-action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",title:L??void 0,"aria-label":L??void 0},T):w.tsx("li",{bind:this,"data-item":f,"data-action":h,key:`action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:L??void 0,"aria-label":L??void 0},
T)};B._setTooltipReference=function(d,f){this._tooltipReferenceMap.set(f.uid,d);this.scheduleRender()};B._hasMessage=function(d){return!!d.error||d.incompatible};B._hasChildren=function(d){return!!d.children.length&&!this._hasMessage(d)};B._sortNodeRemoved=function(d){const {_sortableMap:f}=this;d=d.dataset.group;const h=f.get(d);h&&h.destroy();f.delete(d)};B._destroySortables=function(){const {_sortableMap:d,_sortableNodes:f}=this;d.forEach(h=>h&&h.destroy());d.clear();f.clear()};B._moveLayerFromChildList=
function({to:d,from:f,item:h,newIndex:q}){this.viewModel.moveListItem(h["data-item"],f["data-item"],d["data-item"],q)};B._sortLayers=function(d){if(d){var f=d.el["data-item"];d=d.toArray();f?Q.sortChildLayersToIds(f,d):Q.sortLayersToIds(this.view?.map?.layers,d)}};B._toggleSorting=function(d,f){const {_sortableMap:h,selectionEnabled:q}=this,C=h.get(f);var I=d["data-item"];I=("root"===f||I.childrenSortable&&Q.canSortSublayers(I))&&q;C?C.option("disabled",!I):I&&(d=da.Sortable.create(d,{dataIdAttr:"data-layer-uid",
group:{name:f,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!I,chosenClass:"esri-layer-list--chosen"}),h.set(f,d))};B._toggleAllSorting=function(){this._sortableNodes.forEach((d,f)=>this._toggleSorting(d,f))};B._sortNodeCreated=function(d){const f=d.dataset.group;f&&(this._sortableNodes.set(f,d),this._toggleSorting(d,f))};B._setVisibleItems=function(d){this.visibleItems=
d.filter(f=>!f.hidden&&(this.visibleElements.errors||!f.error))};B._getSingleActionButton=function(d){return d.reduce(f=>f).filter(f=>f&&"button"===f.type).getItemAt(0)};B._focusListItem=function(d){const {_focusSortUid:f}=this;d&&f&&d["data-item"].layer?.uid===f&&(d.focus(),this._focusSortUid=null)};B._watchActionSectionChanges=function(d,f){const h="action-section"+f;this.addHandles(d.on("change",this.scheduleRender.bind(this)),h);d.forEach(q=>this._renderOnActionChanges(q,f))};B._renderOnActionChanges=
function(d,f){f="actions"+f;"toggle"===d.type?this.addHandles(z.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible,d?.value],()=>this.scheduleRender(),z.initial),f):"slider"===d.type?this.addHandles(z.watch(()=>[d?.className,d?.id,d?.title,d?.visible,d?.value,d?.displayValueEnabled,d?.max,d?.min,d?.step],()=>this.scheduleRender(),z.initial),f):this.addHandles(z.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible],()=>this.scheduleRender(),z.initial),f)};B._renderOnItemChanges=function(d){const f=
d.uid,h="items"+f;this.addHandles([z.watch(()=>[d?.actionsOpen,d?.visible,d?.open,d?.updating,d?.connectionStatus,d?.publishing,d?.title,d?.visibleAtCurrentScale,d?.error,d?.visibilityMode,d?.panel,d?.panel?.title,d?.panel?.content,d?.panel?.className,d?.sortable,d?.childrenSortable],()=>this.scheduleRender(),z.syncAndInitial),z.watch(()=>[d?.hidden,d?.error],()=>this._setVisibleItems(this.operationalItems)),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],
h);d.children.forEach(q=>this._renderOnItemChanges(q));d.actionsSections.forEach(q=>this._watchActionSectionChanges(q,f))};B._itemsChanged=function(d){this.removeAllHandles();d.forEach(f=>this._renderOnItemChanges(f));this._tooltipReferenceMap.clear();this._setVisibleItems(d);this.scheduleRender()};B._filterActions=function(d){return d.map(f=>f.filter(h=>h.visible))};B._countActions=function(d){return d.reduce((f,h)=>f+h.length,0)};B._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===
d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:void 0}};B._selectionKeydown=function(d){var f=X.eventKey(d);if(["ArrowDown","ArrowUp"].includes(f)){d.stopPropagation();var h=d.currentTarget,q=h["data-item"],{_sortableMap:C,selectedItems:I}=this;if(h=C.get(h.dataset.group)){var L=Q.findSelectedItem(q,I),T=h.toArray();d=T.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===
f){const ja=d+1;if(ja>=T.length)return;L?(T.splice(ja,0,T.splice(d,1)[0]),h.sort(T),this._sortLayers(h),this._focusSortUid=q.layer?.uid):(this._focusSortUid=q.layer?.uid,this.scheduleRender())}"ArrowUp"===f&&(f=d-1,-1>=f||(L?(T.splice(f,0,T.splice(d,1)[0]),h.sort(T),this._sortLayers(h),this._focusSortUid=q.layer?.uid):(this._focusSortUid=q.layer?.uid,this.scheduleRender())))}}}else this._toggleSelection(d)};B._toggleActionsOpen=function(d){const f=d.currentTarget["data-item"];var {actionsOpen:h}=
f;(h=!h)&&this.operationalItems.forEach(q=>oa(q));f.actionsOpen=h;d.stopPropagation()};B._triggerPanel=function(d){const f=d.currentTarget["data-panel"];d.stopPropagation();f&&!f.disabled&&(f.open=!f.open)};B._triggerAction=function(d){var f=d.currentTarget;const h=f["data-action"];f=f["data-item"];"toggle"===h.type&&(h.value=!h.value);this.triggerAction(h,f);d.stopPropagation()};B._toggleVisibility=function(d){var f=d.currentTarget;const h=f.getAttribute("data-parent-visibility");f=f["data-item"];
h===P.exclusive&&f.visible||(f.visible=!f.visible);d.stopPropagation()};B._toggleChildrenClick=function(d){const f=d.currentTarget["data-item"];f.open=!f.open;d.stopPropagation()};B._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:h}=this;d=d.currentTarget["data-item"];const q=Q.findSelectedItem(d,h),{length:C}=h,I=q&&1===C;f?q?h.remove?.(q):h.add(d):C&&!I?(h.removeAll(),h.add(d)):q?h.remove?.(q):h.add(d)};D._createClass(ba,[{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(d){this._overrideIfSome("label",d)}},{key:"listItemCreatedFunction",get:function(){return this.viewModel.listItemCreatedFunction},set:function(d){this.viewModel.listItemCreatedFunction=d}},{key:"operationalItems",get:function(){return this.viewModel.operationalItems},set:function(d){this.viewModel.operationalItems=d}},{key:"view",get:function(){return this.viewModel.view},set:function(d){this.viewModel.view=d}}]);return ba}(A);p.__decorate([k.property()],x.prototype,"visibleItems",
void 0);p.__decorate([k.property()],x.prototype,"iconClass",void 0);p.__decorate([k.property()],x.prototype,"label",null);p.__decorate([k.property()],x.prototype,"listItemCanGiveFunction",void 0);p.__decorate([k.property()],x.prototype,"listItemCanReceiveFunction",void 0);p.__decorate([k.property()],x.prototype,"listItemCreatedFunction",null);p.__decorate([k.property(),n.messageBundle("esri/widgets/LayerList/t9n/LayerList")],x.prototype,"messages",void 0);p.__decorate([k.property(),n.messageBundle("esri/t9n/common")],
x.prototype,"messagesCommon",void 0);p.__decorate([k.property()],x.prototype,"multipleSelectionEnabled",void 0);p.__decorate([k.property()],x.prototype,"operationalItems",null);p.__decorate([k.property()],x.prototype,"selectionEnabled",void 0);p.__decorate([k.property()],x.prototype,"selectedItems",void 0);p.__decorate([k.property()],x.prototype,"view",null);p.__decorate([E.vmEvent("trigger-action"),k.property({type:S})],x.prototype,"viewModel",void 0);p.__decorate([k.property()],x.prototype,"visibleElements",
void 0);p.__decorate([O.cast("visibleElements")],x.prototype,"castVisibleElements",null);p.__decorate([J.accessibleHandler()],x.prototype,"_toggleActionsOpen",null);p.__decorate([J.accessibleHandler()],x.prototype,"_triggerPanel",null);p.__decorate([J.accessibleHandler()],x.prototype,"_triggerAction",null);p.__decorate([J.accessibleHandler()],x.prototype,"_toggleVisibility",null);p.__decorate([J.accessibleHandler()],x.prototype,"_toggleChildrenClick",null);p.__decorate([J.accessibleHandler()],x.prototype,
"_toggleSelection",null);return x=p.__decorate([U.subclass("esri.widgets.LayerList")],x)});