// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/domUtils ../core/Evented ../core/events ../core/Handles ../core/has ../core/lang ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/reactiveUtils ../core/uuid ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleTrackingTarget ../libs/maquette-advanced-projector/projector ./support/componentsUtils ./support/jsxWidgetSupport ./support/symbols ./support/tests ./support/vnodeCache ./support/widgetUtils ../intl/locale ../intl/messages".split(" "),
function(q,k,C,I,d,D,J,ba,K,L,E,M,w,x,N,m,O,P,Q,R,S,T,F,G,U,u,V,W,X){function H(c,h){for(const g in h)null!=c[g]&&("object"===typeof c[g]&&"object"===typeof h[g]?H(c[g],h?.[g]):c[g]=h[g]);return c}let Y=0;const Z=S.createAdvancedProjector({postProcessProjectionOptions(c){const h=c.eventHandlerInterceptor,g=/capture$/i;c.eventHandlerInterceptor=(p,b,e,a)=>{const n=h?.(p,b,e,a),r=g.test(p);p=p.replace(g,"");if(!(p.toLowerCase()in e)||r){const v=p[2].toLowerCase()+p.slice(3),l=t=>n?.call(e,t);e.addEventListener(v,
l,r);const f=a.afterRemoved;a.afterRemoved=t=>{f?.(t);e.removeEventListener(v,l,r)}}return n}},handleInterceptedEvent(c,h,g,p){const {eventPhase:b,type:e}=p,a=b===Event.CAPTURING_PHASE;let n=`on${e}${a?"capture":""}`;h=h.properties;if(!(h&&n in h||(n=`on${e[0].toUpperCase()}${e.slice(1)}${a?"Capture":""}`,h&&n in h)))return;u.clearVNodeCache();c.scheduleRender();h[n].call(h.bind||g,p)}});let A=!1;d=function(c,h){function g(b,e){var a=p.call(this,b,e);a._attached=!1;a._internalHandles=new J;a._projector=
Z;a._readyForTrueRender=!1;a.iconClass="esri-icon-checkbox-unchecked";a.key=q._assertThisInitialized(a);a._loadLocale=w.debounce(async()=>{if(a._messageBundleProps&&a._messageBundleProps.length){const l=await w.eachAlways(a._messageBundleProps.map(async({bundlePath:f,propertyName:t})=>{f=await X.fetchMessageBundle(f);a.uiStrings&&Object.keys(a.uiStrings)&&(f=H(K.clone(f),a.uiStrings));a[t]=f}));for(const f of l)f.error&&L.getLogger(a.declaredClass).error("widget-intl:locale-error",a.declaredClass,
f.error)}await a.loadLocale()});T.commitAssetPath();const n="esri-widget-uid-"+N.generateUUID(),r=a.render.bind(q._assertThisInitialized(a));a._trackingTarget=new R.SimpleTrackingTarget(()=>a.scheduleRender());const v=()=>{if(!a._readyForTrueRender||a.destroyed)return null;if(!a.visible)return{vnodeSelector:"div",properties:{key:n,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const l=r();let {properties:f}=l;f||(l.properties=f={});let {key:t,styles:y}=f;t||(f.key=n);
y||(f.styles=y={});y.display||(y.display="");let aa=0;l.children?.forEach(B=>{if(!F.isWidgetConstructor(B.vnodeSelector)){var {properties:z}=B;z||(B.properties=z={});z.key||(z.key=`${a.id}--${aa++}`)}});return F.processWidgets(q._assertThisInitialized(a),l)};a.render=()=>{if(A)return v();let l=u.getVNodeCache(q._assertThisInitialized(a))??null;if(l)return l;a._trackingTarget.clear();A=!0;try{l=Q.runTracked(a._trackingTarget,v)}catch(f){throw console.error(f),f;}finally{A=!1}l&&u.setVNodeCache(q._assertThisInitialized(a),
l);return l};a.addResolvingPromise(a._resourcesFetch=a.beforeFirstRender().then(()=>{a._readyForTrueRender=!0;a._postInitialize()}));U.registerLoading(a._resourcesFetch);return a}q._inherits(g,c);var p=q._createSuper(g);c=g.prototype;c.normalizeCtorArgs=function(b,e){b={...b};e&&(b.container=e);return b};c.postInitialize=function(){};c.beforeFirstRender=function(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(w.throwIfNotAbortError)};c.loadDependencies=async function(){};
c.loadLocale=async function(){};c.destroy=function(){this.destroyed||(E.destroyMaybe(this._trackingTarget),E.destroyMaybe(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,u.deleteVNodeCache(this))};c.castContainer=function(b){return I.byId(b)};c.render=function(){throw Error("not implemented");};c.scheduleRender=function(){this.destroyed||(u.deleteVNodeCache(this),this._projector.scheduleRender())};
c.classes=function(...b){return V.classes.apply(this,b)};c.renderNow=function(){u.deleteVNodeCache(this);this._projector.renderNow()};c._postInitialize=function(){if(!this.destroyed){this.scheduleRender();this._delegatedEventNames?.length&&this._internalHandles.add(x.watch(()=>this.viewModel,(e,a)=>{a&&this._internalHandles.remove("delegated-events");e&&D.isEventTarget(e)&&this._internalHandles.add(this._delegatedEventNames.map(n=>D.on(e,n,r=>{this.emit(n,r)})),"delegated-events")},x.initial));this.postInitialize();
var b=async()=>{await this._loadLocale().catch(w.throwIfNotAbortError);this.scheduleRender()};this._internalHandles.add([W.onLocaleChange(b),x.watch(()=>this.uiStrings,b),x.when(()=>this.container,e=>{this.destroyed||this._attach(e)},{initial:!0,once:!0})])}};c._attach=function(b){b&&(this._projector.merge(b,this.render),this._attached=!0)};c._detach=function(b){this._attached&&(this._projector.detach(this.render),this._attached=!1);b?.parentNode?.removeChild(b)};q._createClass(g,[{key:"container",
set:function(b){this._get("container")||this._set("container",b)}},{key:"domNode",get:function(){return this.container},set:function(b){this.container=b}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Y++},set:function(b){b&&this._set("id",b)}},{key:"label",get:function(){return this.declaredClass.split(".").pop()},set:function(b){this._overrideIfSome("label",b)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"visible",
get:function(){return this._get("visible")},set:function(b){this._set("visible",b)}},{key:h,get:function(){return{projector:this._projector}}}]);return g}(M.EsriPromiseMixin(d.EventedAccessor),(C=G.WIDGET_SYMBOL,G.WIDGET_TEST_DATA_SYMBOL));d[C]=!0;k.__decorate([m.property()],d.prototype,"_readyForTrueRender",void 0);k.__decorate([m.property({value:null})],d.prototype,"container",null);k.__decorate([O.cast("container")],d.prototype,"castContainer",null);k.__decorate([m.property()],d.prototype,"iconClass",
void 0);k.__decorate([m.property()],d.prototype,"id",null);k.__decorate([m.property()],d.prototype,"label",null);k.__decorate([m.property()],d.prototype,"renderable",null);k.__decorate([m.property()],d.prototype,"uiStrings",void 0);k.__decorate([m.property()],d.prototype,"viewModel",void 0);k.__decorate([m.property({value:!0})],d.prototype,"visible",null);k.__decorate([m.property()],d.prototype,"key",void 0);k.__decorate([m.property()],d.prototype,"children",void 0);k.__decorate([m.property()],d.prototype,
"afterCreate",void 0);k.__decorate([m.property()],d.prototype,"afterUpdate",void 0);k.__decorate([m.property()],d.prototype,"afterRemoved",void 0);return d=k.__decorate([P.subclass("esri.widgets.Widget")],d)});