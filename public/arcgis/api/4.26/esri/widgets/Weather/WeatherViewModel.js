// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/CloudyWeather ../../views/3d/environment/FoggyWeather ../../views/3d/environment/RainyWeather ../../views/3d/environment/SnowyWeather ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ./enums".split(" "),
function(l,f,c,n,p,b,m,h,q,r,t,u,v,w,x,e){const y=p.getLogger("esri.widgets.Weather.WeatherViewModel");c=function(g){function k(a){a=z.call(this,a);a.view=null;a._handles=new n;a._settingWeather=!1;a._weatherByType={sunny:new w,cloudy:new r,rainy:new u,snowy:new v,foggy:new t};return a}l._inherits(k,g);var z=l._createSuper(k);g=k.prototype;g.initialize=function(){this._handles.add([m.watch(()=>this.current,a=>{this._settingWeather||b.isNone(a)||(this._weatherByType={...this._weatherByType,[a.type]:a})},
m.syncAndInitial)])};g.destroy=function(){this._handles=b.destroyMaybe(this._handles)};g.setWeatherByType=function(a){if(x.validateWeatherType(a,y)){var d=this._environment;b.isSome(d)&&(this._settingWeather=!0,d.weather=this._weatherByType[a],this._settingWeather=!1)}};g.setSnowCoverEnabled=function(a){const d=this.current;"snowCover"in d&&(d.snowCover=a?"enabled":"disabled")};l._createClass(k,[{key:"state",get:function(){const a=this.view;if(b.isNone(a)||!a.ready)return e.WeatherState.Disabled;
if(b.isSome(this.error))switch(this.error){case e.WeatherError.NotVisible:break;default:return e.WeatherState.Error}return e.WeatherState.Ready}},{key:"error",get:function(){const a=this.view;return b.isNone(a)||!a.ready?null:"3d"!==a.type?e.WeatherError.UnsupportedView:"local"===a.viewingMode?e.WeatherError.LocalScene:a.environment.atmosphereEnabled?a.environmentManager.weatherVisible?null:e.WeatherError.NotVisible:e.WeatherError.NoAtmosphere}},{key:"current",get:function(){const a=b.applySome(this._environment,
d=>d.weather);return b.unwrapOr(a,this._weatherByType.sunny)},set:function(a){b.applySome(this._environment,d=>d.weather=a)}},{key:"test",get:function(){return{...this._weatherByType}}},{key:"_environment",get:function(){const a=this.view;return b.isSome(a)&&"3d"===a.type?a.environment:null}}]);return k}(c);f.__decorate([h.property()],c.prototype,"view",void 0);f.__decorate([h.property()],c.prototype,"state",null);f.__decorate([h.property()],c.prototype,"error",null);f.__decorate([h.property()],c.prototype,
"current",null);f.__decorate([h.property()],c.prototype,"_environment",null);return c=f.__decorate([q.subclass("esri.widgets.Weather.WeatherViewModel")],c)});