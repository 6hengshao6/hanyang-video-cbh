// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../symbols ../../../core/Collection ../../../core/Evented ../../../core/Handles ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/GraphicsLayer ../../Sketch/SketchViewModel ./selectorUtils ../../../symbols/SimpleFillSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleMarkerSymbol".split(" "),
function(n,f,c,u,v,w,x,g,G,H,I,y,z,A,B,C,D,E){c=function(e){function l({candidates:b,options:d,view:k}){var a=F.call(this);a._activeOptions=null;a._dashedFillSymbol=new C({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}});a._dashedLineSymbol=new D({style:"dash",color:[12,207,255],width:2});a._defaultOptions={createTool:"rectangle",createOptions:void 0,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}};a._completed=!1;a._handles=new w;a._sketchViewModel=new A;a._sketchGraphicsLayer=
new z({listMode:"hide",internal:!0});a._transparentPointSymbol=new E({color:[0,0,0,0],outline:{style:"none",width:0}});a.candidates=null;a.geometry=null;a.options=null;a.selection=new u;a.view=null;a.candidates=b;a.options=d;a.view=k;const {_dashedFillSymbol:p,_dashedLineSymbol:q,_sketchViewModel:m,_sketchGraphicsLayer:r,_transparentPointSymbol:h}=n._assertThisInitialized(a);m.set({layer:r,view:a.view,activePointSymbol:h,activeLineSymbol:q,activeVertexSymbol:h,activeFillSymbol:p,pointSymbol:h,polygonSymbol:p,
polylineSymbol:q,vertexSymbol:h});a._handles.add([m.on("create",t=>a._onSketchEvent(t)),m.on(["undo","redo"],t=>a._onSketchEvent(t))]);return a}n._inherits(l,e);var F=n._createSuper(l);e=l.prototype;e.initialize=function(){this._load()};e.destroy=function(){this._handles=x.destroyMaybe(this._handles)};e.cancel=function(){return this._sketchViewModel.cancel()};e._load=async function(){await this.view?.whenReady();const {options:b}=this,{createTool:d,createOptions:k}=this._activeOptions={...this._defaultOptions,
...b};this._sketchViewModel.create(d,k)};e._onSketchEvent=function(b){this._processSelectionGeometry(("create"===b.type?b.graphic:b.graphics[0])?.geometry||null,"create"===b.type&&"complete"===b.state,"create"===b.type&&"cancel"===b.state)};e._processSelectionGeometry=function(b,d,k){this._set("geometry",b);if(d||k)this._completed=!0;if(k)this._onComplete([],!0);else{var {_activeOptions:a,candidates:p,selection:q,view:m}=this;B.updateSelection({selector:b,candidates:p,currentSelection:q,options:a.selectionOptions,
view:m}).then(({added:r,removed:h})=>{d?this._onComplete(this.selection.toArray(),!1):(r.length||h.length)&&this.emit("selection-change",{added:r,removed:h,type:"selection-change"})})}};e._onComplete=function(b,d){this._handles.removeAll();this.notifyChange("state");this.emit("complete",{aborted:d,selection:b,type:"complete"})};n._createClass(l,[{key:"state",get:function(){const {_completed:b,_sketchViewModel:{state:d}}=this;return b?"complete":"active"===d?"active":"disabled"}}]);return l}(v.EventedAccessor);
f.__decorate([g.property()],c.prototype,"_completed",void 0);f.__decorate([g.property()],c.prototype,"candidates",void 0);f.__decorate([g.property({readOnly:!0})],c.prototype,"geometry",void 0);f.__decorate([g.property()],c.prototype,"options",void 0);f.__decorate([g.property({readOnly:!0})],c.prototype,"selection",void 0);f.__decorate([g.property({readOnly:!0})],c.prototype,"state",null);f.__decorate([g.property({value:null})],c.prototype,"view",void 0);return c=f.__decorate([y.subclass("esri.widgets.support.Selector2D.SelectionOperation2D")],
c)});