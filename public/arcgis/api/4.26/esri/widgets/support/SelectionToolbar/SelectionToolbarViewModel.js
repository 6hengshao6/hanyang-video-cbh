// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/handleUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../Selector2D".split(" "),function(g,c,b,m,k,e,r,t,u,n,p){b=function(d){function f(a){a=q.call(this,a);a._operationHandlesGroup=null;a.activeOperation=null;a.layers=null;a.selector=
new p;return a}g._inherits(f,d);var q=g._createSuper(f);d=f.prototype;d.destroy=function(){this._operationHandlesGroup=k.removeMaybe(this._operationHandlesGroup);this.selector.destroy()};d.cancel=function(){"active"===this.state&&(this.activeOperation?.cancel(),this.activeOperation=null);this.selector.candidates=null};d.activate=function(a){const {state:l}=this;if("disabled"!==l)return"active"===l&&this.cancel(),this.selector.candidates=this._candidates,a=this.selector.draw(a),this._operationHandlesGroup=
m.handlesGroup([a.once("complete",h=>this._onOperationComplete(h)),a.on("selection-change",h=>this._onOperationSelectionChange(h))]),this.activeOperation=a};d._onOperationSelectionChange=function(a){this.emit("selection-change",a)};d._onOperationComplete=function(a){this._operationHandlesGroup=k.removeMaybe(this._operationHandlesGroup);this.activeOperation=null;this.emit("complete",a)};g._createClass(f,[{key:"_candidates",get:function(){return this.layers?.flatMap(a=>a.graphics.toArray())??[]}},{key:"state",
get:function(){return this.activeOperation?"active":this.view?.ready&&this.layers?.length?"ready":"disabled"}},{key:"view",set:function(a){this.selector.view=a;this._set("view",a)}}]);return f}(b.EventedAccessor);c.__decorate([e.property()],b.prototype,"_candidates",null);c.__decorate([e.property()],b.prototype,"activeOperation",void 0);c.__decorate([e.property()],b.prototype,"layers",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"selector",void 0);c.__decorate([e.property({readOnly:!0})],
b.prototype,"state",null);c.__decorate([e.property()],b.prototype,"view",null);return b=c.__decorate([n.subclass("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],b)});