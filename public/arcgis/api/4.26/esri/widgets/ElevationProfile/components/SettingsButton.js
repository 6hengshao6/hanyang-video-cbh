// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/events ../../../core/maybe ../../../core/unitUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Widget ../css ../../support/Popover ../../support/widgetUtils ../../support/decorators/messageBundle ../../support/jsxFactory".split(" "),function(f,p,k,r,e,t,m,A,
B,C,u,v,h,w,x,q,g){function y(c){c.preventDefault()}f.SettingsButton=function(c){function n(a,b){a=z.call(this,a,b);a._popover=null;a._buttonElement=null;a._focusOutElement=null;a._requestFocusOnCreate=!1;return a}p._inherits(n,c);var z=p._createSuper(n);c=n.prototype;c.destroy=function(){this._destroyPopover()};c.render=function(){const {unitSelector:a,uniformChartScalingToggle:b}=this.visibleElements;if(!a&&!b)return g.tsx("div",{key:`${this.id}-empty`});const d=e.isSome(this._popover)&&this._popover.open?
this._messages.hideSettings:this._messages.showSettings;return g.tsx("button",{class:h.SETTINGS_CSS.base,title:d,bind:this,afterCreate:this._initializePopover,onclick:this._togglePopover,"aria-label":d,type:"button"})};c._initializePopover=function(a){this._destroyPopover();this._buttonElement=a;this._popover=new w({owner:this,placement:"bottom-end",offset:[0,0],anchorElement:a,renderContentFunction:()=>this._renderPopoverContent()})};c._destroyPopover=function(){this._focusOutElement=e.removeMaybe(this._focusOutElement);
this._popover=e.destroyMaybe(this._popover)};c._renderPopoverContent=function(){const {unitSelector:a,uniformChartScalingToggle:b}=this.visibleElements;return g.tsx("div",{class:h.SETTINGS_CSS.popoverContent,dir:x.getDir(e.unwrap(this._buttonElement)),bind:this,afterCreate:this._onPopoverContentAfterCreate},a&&this._renderUnitSelector(),b&&this._renderUniformChartScalingToggle())};c._renderUnitSelector=function(){const {unit:a,unitOptions:b}=this.viewModel,d=this._messagesUnits;return g.tsx("label",
{key:"unit-selector-label",class:h.SETTINGS_CSS.selectLabel},this._messages.unitSelectLabel,g.tsx("select",{class:h.SETTINGS_CSS.select,value:a,bind:this,onchange:this._onUnitChange,afterCreate:this._onUnitSelectAfterCreate},b.map(l=>g.tsx("option",{key:l,value:l},t.isMeasurementSystem(l)?d.systems[l]:d.units[l].pluralCapitalized))))};c._onUnitChange=function(a){this.viewModel.unit=a.target.value};c._onUnitSelectAfterCreate=function(a){this._requestFocusOnCreate&&(this._requestFocusOnCreate=!1,a.focus())};
c._renderUniformChartScalingToggle=function(){const a=this._messages,b=this.viewModel.uniformChartScaling,d=b?a.uniformChartScalingDisable:a.uniformChartScalingEnable;return g.tsx("label",{key:"uniform-chart-scaling-label",class:h.SETTINGS_CSS.checkboxLabel,onmousedown:y},g.tsx("input",{class:this.classes(h.SETTINGS_CSS.checkbox,h.SETTINGS_CSS.uniformChartScalingCheckbox),type:"checkbox",checked:b,title:d,"aria-label":d,bind:this,onchange:this._onUniformChartScalingChange}),a.uniformChartScalingLabel)};
c._onUniformChartScalingChange=function(a){this.viewModel.uniformChartScaling=a.target.checked};c._togglePopover=function(a){e.isSome(this._popover)&&this._popover.open?this._closePopover():this._openPopover()};c._openPopover=function(){e.applySome(this._popover,a=>a.open=!0);this._requestFocusOnCreate=!0};c._closePopover=function({focusOnButton:a=!0}={}){e.applySome(this._popover,b=>b.open=!1);a&&e.applySome(this._buttonElement,b=>b.focus())};c._onPopoverContentAfterCreate=function(a){e.removeMaybe(this._focusOutElement);
this._focusOutElement=r.on(a,"focusout",({relatedTarget:b})=>{const d=a.contains(b);b=b===this._buttonElement;d||b||this._closePopover({focusOnButton:!1})})};return p._createClass(n)}(v);k.__decorate([m.property()],f.SettingsButton.prototype,"viewModel",void 0);k.__decorate([m.property()],f.SettingsButton.prototype,"visibleElements",void 0);k.__decorate([m.property(),q.messageBundle("esri/widgets/ElevationProfile/t9n/ElevationProfile")],f.SettingsButton.prototype,"_messages",void 0);k.__decorate([m.property(),
q.messageBundle("esri/core/t9n/Units")],f.SettingsButton.prototype,"_messagesUnits",void 0);f.SettingsButton=k.__decorate([u.subclass("esri.widgets.ElevationProfile.SettingsButton")],f.SettingsButton);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});