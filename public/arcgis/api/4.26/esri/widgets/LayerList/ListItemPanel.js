// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),function(p,m,f,e,q,l,g,z,A,B,r,t,u,n,h){e=function(d){function k(a,b){a=v.call(this,a,b);a._legend=null;
a.content=null;a.image=null;a.listItem=null;a.open=!1;a.visible=!0;return a}m._inherits(k,d);var v=m._createSuper(k);d=k.prototype;d.initialize=function(){this.addHandles(l.watch(()=>this.content,a=>this._createLegend(a),l.initial))};d.destroy=function(){this._legend=q.destroyMaybe(this._legend)};d.render=function(){return h.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};d._renderContent=function(a){const {_legend:b,disabled:c}=this;return!a||c?null:"legend"===a&&b?h.tsx("div",
{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:b},b.render()):"string"===typeof a?h.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:a,innerHTML:a}):n.isWidget(a)?h.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:a},a.render()):a instanceof HTMLElement?h.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),
key:a,bind:a,afterCreate:this._attachToNode}):null};d._renderContents=function(){const {content:a}=this;return Array.isArray(a)?a.map(b=>this._renderContent(b)):this._renderContent(a)};d._getLegendOptions=function(){const {listItem:a}=this;if(!a)return{};const {layer:b,view:c}=a;return b&&c?{view:c,layerInfos:[u.getLegendLayerInfo(b)]}:{}};d._createLegend=async function(a){if(this._hasLegend(a)&&!this._legend){({default:a}=await new Promise((w,x)=>p(["../Legend"],y=>w(Object.freeze(Object.defineProperty({__proto__:null,
default:y},Symbol.toStringTag,{value:"Module"}))),x)));var {listItem:b}=this,c=new a(this._getLegendOptions());this._legend=c;this.notifyChange("className");this.notifyChange("title");a=l.watch(()=>[b?.view,b?.layer,b?.layer?.source,b?.layer?.parent],()=>this._updateLegend(c),l.initial);this.addHandles(a,"legends");this.scheduleRender()}};d._hasLegend=function(a){return"legend"===a?!0:null!=a&&(Array.isArray(a)?a.includes("legend"):!1)};d._attachToNode=function(a){a.appendChild(this)};d._updateLegend=
function(a){a.set(this._getLegendOptions());this.scheduleRender()};d._getWidget=function(a){return"legend"===a?this._legend:n.isWidget(a)?a:null};d._getFirstWidget=function(){const {content:a}=this;if(Array.isArray(a)){let b=null;a.some(c=>{(c=this._getWidget(c))&&(b=c);return!!c});return b}return this._getWidget(a)};m._createClass(k,[{key:"className",get:function(){const {image:a}=this,b=this._getFirstWidget();return this._get("className")||(!a&&b?b.iconClass:"")},set:function(a){this._override("className",
a)}},{key:"disabled",get:function(){const {listItem:a,_legend:b,content:c}=this;return a?Array.isArray(c)&&1<c.length?!1:b?!b.activeLayerInfos?.length||!a.visibleAtCurrentScale:!1:!0},set:function(a){this._overrideIfSome("disabled",a)}},{key:"title",get:function(){const a=this._getFirstWidget();return this._get("title")||(a?.label??"")},set:function(a){this._override("title",a)}}]);return k}(e.IdentifiableMixin(t));f.__decorate([g.property()],e.prototype,"_legend",void 0);f.__decorate([g.property()],
e.prototype,"className",null);f.__decorate([g.property()],e.prototype,"content",void 0);f.__decorate([g.property()],e.prototype,"disabled",null);f.__decorate([g.property()],e.prototype,"image",void 0);f.__decorate([g.property()],e.prototype,"listItem",void 0);f.__decorate([g.property()],e.prototype,"title",null);f.__decorate([g.property()],e.prototype,"open",void 0);f.__decorate([g.property()],e.prototype,"visible",void 0);return e=f.__decorate([r.subclass("esri.widgets.LayerList.ListItemPanel")],
e)});