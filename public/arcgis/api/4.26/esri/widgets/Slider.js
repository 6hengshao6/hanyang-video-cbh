// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Slider/SliderViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),function(x,n,l,C,G,u,p,M,T,U,N,O,P,Q,R,v,J){const y={showInput:"Enter",hideInput1:"Enter",
hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},K={labels:!1,rangeLabels:!1};l=function(e){function D(a,b){a=S.call(this,a,b);a._activeLabelInputIndex=null;a._anchorElements=[];a._dragged=!1;a._dragStartInfo=null;a._focusedAnchorIndex=null;a._isMinInputActive=!1;a._isMaxInputActive=!1;a._lastMovedHandleIndex=null;a._positionPrecision=5;a._segmentDragStartInfo=
null;a._trackHeight=null;a._trackWidth=null;a._zIndices=[];a._zIndexOffset=3;a.disabled=!1;a.draggableSegmentsEnabled=!0;a.effectiveSegmentElements=new C;a.extraNodes=[];a.inputCreatedFunction=null;a.labelElements=new C;a.labelInputsEnabled=!1;a.maxLabelElement=null;a.messages=null;a.minLabelElement=null;a.rangeLabelInputsEnabled=!1;a.segmentElements=new C;a.snapOnClickEnabled=!0;a.steps=null;a.syncedSegmentsEnabled=!1;a.thumbCreatedFunction=null;a.thumbElements=new C;a.tickElements=new C;a.trackElement=
null;a.viewModel=new P;a.visibleElements={...K};a._onAnchorPointerDown=a._onAnchorPointerDown.bind(x._assertThisInitialized(a));a._onAnchorPointerMove=a._onAnchorPointerMove.bind(x._assertThisInitialized(a));a._onAnchorPointerUp=a._onAnchorPointerUp.bind(x._assertThisInitialized(a));a._onLabelPointerDown=a._onLabelPointerDown.bind(x._assertThisInitialized(a));a._onLabelPointerUp=a._onLabelPointerUp.bind(x._assertThisInitialized(a));a._onSegmentPointerDown=a._onSegmentPointerDown.bind(x._assertThisInitialized(a));
a._onSegmentPointerMove=a._onSegmentPointerMove.bind(x._assertThisInitialized(a));a._onSegmentPointerUp=a._onSegmentPointerUp.bind(x._assertThisInitialized(a));a._onTrackPointerDown=a._onTrackPointerDown.bind(x._assertThisInitialized(a));a._onTrackPointerMove=a._onTrackPointerMove.bind(x._assertThisInitialized(a));a._onTrackPointerUp=a._onTrackPointerUp.bind(x._assertThisInitialized(a));return a}x._inherits(D,e);var S=x._createSuper(D);e=D.prototype;e.destroy=function(){document.removeEventListener("pointerup",
this._onLabelPointerUp);document.removeEventListener("pointermove",this._onLabelPointerMove);document.removeEventListener("pointerup",this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove);this.labelElements.removeAll();this.labelElements.destroy();this.segmentElements.removeAll();this.segmentElements.destroy();this.effectiveSegmentElements.removeAll();this.effectiveSegmentElements.destroy();this.thumbElements.removeAll();this.thumbElements.destroy();this.tickElements.removeAll();
this.tickElements.destroy()};e.castVisibleElements=function(a){return{...K,...a}};e.render=function(){const {label:a}=this,b=this.classes("esri-slider","esri-widget",this._isHorizontalLayout()?"esri-slider--horizontal":"esri-slider--vertical",this._isReversedLayout()?"esri-slider--reversed":null,this._isDisabled()?"esri-disabled":null);this._storeTrackDimensions();return v.tsx("div",{"aria-label":a,class:b,"touch-action":"none",bind:this,afterCreate:this._afterContainerCreate},this.renderContent())};
e.toNextStep=function(a){this._toStep(a,1)};e.toPreviousStep=function(a){this._toStep(a,-1)};e.renderContent=function(){const {max:a,min:b}=this;if(!(u.isNone(b)||u.isNone(a)||b>=a))return[this.renderMin(),this.renderSliderContainer(),this.renderMax()]};e.renderSliderContainer=function(){return v.tsx("div",{key:"slider-container",bind:this,class:"esri-slider__content"},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())};e.renderTrackElement=function(){return v.tsx("div",
{afterCreate:this._afterTrackCreate,afterRemoved:this._afterTrackRemoved,bind:this,class:"esri-slider__track","touch-action":"none"},this.renderEffectiveSegmentElements(),this.renderSegmentElements(),this.renderAnchorElements())};e.renderEffectiveSegmentElements=function(){if(this.trackElement&&this.values&&this.values.length){var a=u.isSome(this.effectiveMax),b=u.isSome(this.effectiveMin);if(a||b){var {max:c,min:d,viewModel:f}=this,g=f.getBounds(),h=[];b&&h.push(this.renderEffectiveSegmentElement(d,
g.min,!0));a&&h.push(this.renderEffectiveSegmentElement(g.max,c,!1));return h}}};e.renderSegmentElements=function(){if(this.trackElement&&this.values&&this.values.length){var a=this.values.length,b=[];for(let c=0;c<=a;c++)b.push(this.renderSegmentElement(c));return b}};e.renderSegmentElement=function(a){const {_trackHeight:b,_trackWidth:c,draggableSegmentsEnabled:d,id:f,state:g}=this;var h=this.values,k=this._isHorizontalLayout(),m=k?c:b,q=this.viewModel.getBounds(),r=this._positionFromValue(q.max),
w=this._positionFromValue(q.min);q=a===h?.length?null:a;const B=0===a?null:a-1;var t=u.isSome(q);const z=u.isSome(B),A=[...h].sort((H,I)=>H-I);this._isReversedLayout()?(h=z?this._positionFromValue(A[B]):w,w=t?this._positionFromValue(A[q]):r):(h=t?this._positionFromValue(A[q]):r,w=z?this._positionFromValue(A[B]):w);r=this._applyPrecisionToPosition(100*w/m);m=(h-w)/m;k=k?`transform: translate(${r}%, 0px) scale(${m}, 1);`:`transform: translate(0px, ${r}%) scale(1, ${m});`;t=this.classes("esri-slider__segment",
"esri-slider__segment-"+a,d&&t&&z&&"disabled"!==g?"esri-slider__segment--interactive":null);return v.tsx("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,bind:this,class:t,"data-max-thumb-index":q,"data-min-thumb-index":B,"data-segment-index":a,key:`${f}-segment-${a}`,style:k,"touch-action":"none"})};e.renderEffectiveSegmentElement=function(a,b,c){const {_trackHeight:d,_trackWidth:f,layout:g}=this;a=this._positionFromValue(a);b=this._positionFromValue(b);const h=
this._isHorizontalLayout(),k=h?f:d,m=this._applyPrecisionToPosition(100*a/k);let q=null;"horizontal"===g?(a=a===k?0:m,q=`clip-path: inset(0% ${b===k?0:this._applyPrecisionToPosition((c?k-b:b)/k*100)}% 0% ${a}%);`):(a=(b-a)/k,q=h?`transform: translate(${m}%, 0px) scale(${a}, 1);`:`transform: translate(0px, ${m}%) scale(1, ${a});`);c=this.classes("esri-slider__segment","esri-slider__effective-segment",c?"esri-slider__effective-min-segment":"esri-slider__effective-max-segment");return v.tsx("div",{afterCreate:this._afterEffectiveSegmentCreate,
afterRemoved:this._afterEffectiveSegmentRemoved,bind:this,class:c,style:q,"touch-action":"none"})};e.renderAnchorElements=function(){const {trackElement:a,values:b}=this;if(b&&b.length)return this._zIndices=b.map((c,d)=>{c=this._positionFromValue(c);c=this._positionToPercent(c);c=this._isHorizontalLayout()?50<c:50>c;return this._zIndexOffset+(b.length+(c?-1:1)*d)}),a&&b&&b.length?b.map((c,d)=>this.renderAnchorElement(c,d)):null};e.renderAnchorElement=function(a,b){var c=this._positionFromValue(a);
c=this._valueFromPosition(c);if(!u.isNone(c)&&!isNaN(c)){var {_dragStartInfo:d,_lastMovedHandleIndex:f,id:g,layout:h,visibleElements:{labels:k}}=this;c=this.values;var m=d&&d.index===b,q=f===b,r=this.classes("esri-slider__anchor","esri-slider__anchor-"+b,m?"esri-slider__anchor--moving":null,q?"esri-slider__anchor--moved":null),w=this.labels.values[b];m=this._getStyleForAnchor(a,b,m||q);var {min:B,max:t}=this.viewModel.getBoundsForValueAtIndex(b),{disabled:z,messages:A}=this;w=2===c.length?0===b?J.substitute(A.rangeMinimum,
{value:a}):J.substitute(A.rangeMaximum,{value:a}):w;return v.tsx("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,afterRemoved:this._afterAnchorRemoved,"aria-controls":1===c.length?null:0===b?`${g}-handle-${b+1}`:b===c.length-1?`${g}-handle-${b-1}`:`${g}-handle-${b-1} ${g}-handle-${b+1}`,"aria-label":A.sliderValue,"aria-labelledby":k?`${g}-label-${b}`:null,"aria-orientation":h,"aria-valuemax":t?.toString(),"aria-valuemin":B?.toString(),"aria-valuenow":a.toString(),"aria-valuetext":w,
bind:this,class:r,"data-thumb-index":b,"data-value":a,id:`${g}-handle-${b}`,key:`${g}-handle-${b}`,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:m,tabIndex:z?-1:0},v.tsx("span",{afterCreate:this._afterThumbCreate,afterRemoved:this._afterThumbRemoved,bind:this,class:"esri-slider__thumb","data-thumb-index":b,"touch-action":"none"}),this.renderThumbLabel(b))}};e.renderThumbLabel=function(a){const {id:b,labels:c,labelInputsEnabled:d,state:f}=this,g=this.visibleElements.labels,
h=c.values[a],k=this.classes("esri-slider__label",g?null:"esri-hidden",d&&"disabled"!==f?"esri-slider__label--interactive":null);return v.tsx("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":(!g).toString(),bind:this,class:k,"data-thumb-index":a,key:`${b}-label-${a}`,id:`${b}-label-${a}`,role:d?"button":null,"touch-action":"none"},this._activeLabelInputIndex===a?this.renderValueInput(a):h)};e.renderValueInput=function(a){const {disabled:b,values:c}=this;
if(null!=c)return v.tsx("input",{key:`value-input-${a}`,afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:"esri-slider__label-input","data-input-type":"thumb","data-input-index":a,required:!0,tabIndex:b?-1:0,type:"text",value:this._formatInputValue(c[a],"value",a),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})};e.renderMax=function(){const {_isMaxInputActive:a,labels:b,rangeLabelInputsEnabled:c,state:d}=this,f=this.visibleElements.rangeLabels,
g=this.classes("esri-slider__max",{["esri-hidden"]:!f,["esri-slider__max--interactive"]:c&&"disabled"!==d,["esri-slider__range--active"]:a});return v.tsx("div",{"aria-hidden":(!f).toString(),afterCreate:this._afterMaxLabelCreate,bind:this,class:g,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,role:c?"button":null,tabIndex:!this.disabled&&c?0:-1},a?this.renderMaxInput():b.max)};e.renderMin=function(){const {_isMinInputActive:a,labels:b,rangeLabelInputsEnabled:c,state:d}=this,f=this.visibleElements.rangeLabels,
g=this.classes("esri-slider__min",{["esri-hidden"]:!f,["esri-slider__min--interactive"]:c&&"disabled"!==d,["esri-slider__range--active"]:a});return v.tsx("div",{"aria-hidden":(!f).toString(),afterCreate:this._afterMinLabelCreate,bind:this,class:g,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,role:c?"button":null,tabIndex:!this.disabled&&c?0:-1},a?this.renderMinInput():b.min)};e.renderMaxInput=function(){return v.tsx("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,
bind:this,class:"esri-slider__range-input","data-input-type":"max",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.max,"max"),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})};e.renderMinInput=function(){return v.tsx("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.minimumValue,bind:this,class:"esri-slider__range-input","data-input-type":"min",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.min,
"min"),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})};e.renderExtraContentElements=function(){return v.tsx("div",{bind:this,class:"esri-slider__extra-content"},this.extraNodes)};e.renderTicksContainer=function(){if(this.tickConfigs&&this.trackElement&&(0!==this._trackHeight||0!==this._trackWidth))return this.tickConfigs.map((a,b)=>v.tsx("div",{key:"ticks-container",class:this.classes("esri-slider__ticks")},this.renderTicks(a,b)))};e.renderTicks=function(a,b){const {mode:c,values:d}=
a;this.tickElements.getItemAt(b)||this.tickElements.add(new C,b);if("position"===c){var f=Array.isArray(d)?d:[d];return this._calculateTickPositions(f).map((g,h)=>this.renderTickGroup(a,h,b,g))}if("percent"===c&&Array.isArray(d)){const g=this.min??0,h=(this.max??0)-g;f=d.map(k=>this._applyPrecisionToPosition(k/100*h+g));return this._calculateTickPositions(f).map((k,m)=>this.renderTickGroup(a,m,b,k))}f=Array.isArray(d)&&d.length?d[0]:isNaN(d)?null:d;f=this._getTickCounts(f,a);return this._calculateEquidistantTickPositions(f).map((g,
h)=>this.renderTickGroup(a,h,b,g))};e.renderTickGroup=function(a,b,c,d){const f="position"===a.mode?Array.isArray(a.values)?a.values[b]:a.values:this._valueFromPosition(d);if(!u.isNone(f)&&!isNaN(f))return v.tsx("div",{afterCreate:this._afterTickGroupCreate,afterRemoved:this._afterTickGroupRemoved,bind:this,"data-config":a,"data-position":d,"data-tick-config-index":c,"data-tick-group-index":b,"data-value":f,onclick:this._onTickGroupClick,key:`tick-group-${b}`},this.renderTickLine(a,b,c,f),a.labelsVisible?
this.renderTickLabel(a,b,c,f):null)};e.renderTickLine=function(a,b,c,d){return v.tsx("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":d.toString(),bind:this,class:"esri-slider__tick","data-config":a,"data-tick-config-index":c,"data-tick-group-index":b,"data-value":d,key:`tick-label-${b}`,style:this._getPositionStyleForElement(d)})};e.renderTickLabel=function(a,b,c,d){const f=a.labelFormatFunction?a.labelFormatFunction(d,"tick",b):this.viewModel.getLabelForValue(d,"tick",b);return v.tsx("div",
{afterCreate:this._afterTickLabelCreate,"aria-label":f,"aria-valuenow":d.toString(),"aria-valuetext":f,bind:this,class:"esri-slider__tick-label","data-config":a,"data-tick-config-index":c,"data-tick-group-index":b,"data-value":d,key:`tick-label-${b}`,style:`transform: translate(-50%); ${this._getPositionStyleForElement(d)}`},f)};e._afterContainerCreate=function(a){this.addHandles(Q.onResize(a,()=>this.scheduleRender()))};e._afterTrackCreate=function(a){this._set("trackElement",a);a.addEventListener("pointerdown",
this._onTrackPointerDown);this.scheduleRender()};e._afterTrackRemoved=function(a){a.removeEventListener("pointerdown",this._onTrackPointerDown);document.removeEventListener("pointermove",this._onTrackPointerMove);document.removeEventListener("pointerup",this._onTrackPointerUp)};e._afterSegmentCreate=function(a){this.segmentElements.add(a);a.addEventListener("pointerdown",this._onSegmentPointerDown)};e._afterSegmentRemoved=function(a){this.segmentElements.remove(a);a.removeEventListener("pointerdown",
this._onSegmentPointerDown)};e._afterEffectiveSegmentCreate=function(a){this.effectiveSegmentElements.add(a)};e._afterEffectiveSegmentRemoved=function(a){this.effectiveSegmentElements.remove(a)};e._afterAnchorCreate=function(a){this._anchorElements.push(a);a.addEventListener("pointerdown",this._onAnchorPointerDown);if(this.thumbCreatedFunction){const b=a["data-thumb-index"];a=a["data-value"];const c=this.thumbElements.getItemAt(b)||null,d=this.labelElements.getItemAt(b)||null;this.thumbCreatedFunction(b,
a,c,d)}};e._afterAnchorUpdate=function(a){u.isSome(this._focusedAnchorIndex)&&a["data-thumb-index"]===this._focusedAnchorIndex&&(a.focus(),this._focusedAnchorIndex=null)};e._afterAnchorRemoved=function(a){const b=this._anchorElements.indexOf(a,0);-1<b&&this._anchorElements.splice(b,1);a.removeEventListener("pointerdown",this._onAnchorPointerDown)};e._afterThumbCreate=function(a){this.thumbElements.add(a)};e._afterThumbRemoved=function(a){this.thumbElements.remove(a)};e._afterLabelCreate=function(a){this.labelElements.add(a);
a.addEventListener("pointerdown",this._onLabelPointerDown);a.addEventListener("pointerup",this._onLabelPointerUp)};e._afterLabelRemoved=function(a){this.labelElements.remove(a);a.removeEventListener("pointerdown",this._onLabelPointerDown);a.removeEventListener("pointerup",this._onLabelPointerUp)};e._afterInputCreate=function(a){a.focus();a.select();if(this.inputCreatedFunction){const b=a.getAttribute("data-input-type");this.inputCreatedFunction(a,b,"thumb"===b?a["data-input-index"]:null)}};e._afterTickLineCreate=
function(a){const b=a["data-tick-group-index"],c=this.tickElements.getItemAt(a["data-tick-config-index"]);c.getItemAt(b)?c.getItemAt(b).tickElement=a:c.add({groupElement:null,tickElement:a,labelElement:null},b)};e._afterTickLabelCreate=function(a){const b=a["data-tick-group-index"],c=this.tickElements.getItemAt(a["data-tick-config-index"]);c.getItemAt(b)?c.getItemAt(b).labelElement=a:c.add({groupElement:null,labelElement:a,tickElement:null},b)};e._afterTickGroupRemoved=function(a){const b=this.tickElements.items[a["data-tick-config-index"]],
c=b?.find(d=>d.groupElement===a);c&&b.remove(c)};e._afterTickGroupCreate=function(a){const b=a["data-config"];if(b&&b.tickCreatedFunction){var c=a["data-tick-config-index"];const d=a["data-tick-group-index"],f=a["data-value"];if(c=this.tickElements?.getItemAt(c)?.getItemAt(d))c.groupElement=a,b.tickCreatedFunction(f,c.tickElement||null,c.labelElement||null)}};e._afterMaxLabelCreate=function(a){this._set("maxLabelElement",a)};e._afterMinLabelCreate=function(a){this._set("minLabelElement",a)};e._onAnchorKeyDown=
function(a){if(!this._isDisabled()&&"editing"!==this.state){var {target:b}=a,c=G.eventKey(a);b=b["data-thumb-index"];var d=this._anchorElements[b],f=this.values[b],g=[y.moveAnchorUp,y.moveAnchorDown,y.moveAnchorLeft,y.moveAnchorRight];if(c===y.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=b,this.notifyChange("state");else if(g.includes(c))a.preventDefault(),{steps:a}=this,c=c===y.moveAnchorUp||c===y.moveAnchorRight?1:-1,u.isSome(a)?this._toStep(b,this._isReversedLayout()?-1*c:c):
({precision:a}=this,d=this._getPositionOfElement(d),g=this._valueFromPosition(d),c=this._isHorizontalLayout()?c:-1*c,d=0===a?this._positionFromValue(g+c):1===a?this._positionFromValue(g+.1*c):d+c,this._toPosition(b,d)),d=this.values[b],f!==d&&this._emitThumbChangeEvent({index:b,oldValue:f,value:d});else if(c===y.moveAnchorToMax||c===y.moveAnchorToMin){a.preventDefault();const {min:h,max:k}=this._getAnchorBoundsInPixels(b);d=this._isPositionInverted()?c===y.moveAnchorToMax?h:k:c===y.moveAnchorToMin?
h:k;this._toPosition(b,d);d=this.values[b];f!==d&&this._emitThumbChangeEvent({index:b,oldValue:f,value:d})}}};e._onAnchorPointerDown=function(a){if(!this._isDisabled()){var {target:b,clientX:c,clientY:d}=a,f=b["data-thumb-index"];void 0!==f&&(a.preventDefault(),this._anchorElements[f]&&this._anchorElements[f].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:c,clientY:d,index:f,position:this._getPositionOfElement(this._anchorElements[f])},this.notifyChange("state"),document.addEventListener("pointerup",
this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}};e._onAnchorPointerMove=function(a){if("editing"!==this.state&&this._dragStartInfo){a.preventDefault();var {values:b,_anchorElements:c,_dragged:d,_dragStartInfo:f,_dragStartInfo:{index:g,position:h}}=this,{clientX:k,clientY:m}=a;a=d?"drag":"start";var q=this._getPositionOfElement(c[g]),r=this._applyPrecisionToPosition(this._isHorizontalLayout()?h+k-f.clientX:h+m-f.clientY);q!==r&&(q=b[g],this._dragged=!0,
this._toPosition(g,r),r=this.values[g],d?q!==r&&this._emitThumbDragEvent({index:g,state:a,value:r}):this._emitThumbDragEvent({index:g,state:a,value:q}))}};e._onAnchorPointerUp=function(a){document.removeEventListener("pointerup",this._onAnchorPointerUp);document.removeEventListener("pointermove",this._onAnchorPointerMove);if(this._dragStartInfo){a.preventDefault();({index:a}=this._dragStartInfo);var b=this._dragged,c=this.values[a];this._dragged=!1;this._dragStartInfo=null;this._lastMovedHandleIndex=
a;this.notifyChange("state");b?this._emitThumbDragEvent({index:a,state:"stop",value:c}):(this.scheduleRender(),"editing"!==this.state&&this._emitThumbClickEvent({index:a,value:c}))}};e._onTrackPointerDown=function(a){const {_dragStartInfo:b,snapOnClickEnabled:c,state:d,values:f}=this;if(!this._isDisabled()&&"editing"!==d&&!b&&(document.addEventListener("pointermove",this._onTrackPointerMove),document.addEventListener("pointerup",this._onTrackPointerUp),c&&f?.length)){var {steps:g}=this,{clientX:h,
clientY:k}=a,m=this._getCursorPositionFromEvent(a);a=this._valueFromPosition(m);var q=this._getIndexOfNearestValue(a),r=f[q];a=f.some((B,t)=>B===r&&t!==q)&&a>r?f.lastIndexOf(r):q;if(!u.isNone(a)){var w=f[a];g=u.isSome(g)?this._calculateNearestStepPosition(m):m;this._toPosition(a,g);this._dragged=!0;this._dragStartInfo={clientX:h,clientY:k,index:a,position:g};this._focusedAnchorIndex=a;this.notifyChange("state");this._emitThumbDragEvent({index:a,state:"start",value:w});g=this.values[a];w!==g&&this._emitThumbDragEvent({index:a,
state:"drag",value:g});document.addEventListener("pointerup",this._onAnchorPointerUp);document.addEventListener("pointermove",this._onAnchorPointerMove)}}};e._onTrackPointerMove=function(a){a.preventDefault();this._dragged=!0};e._onTrackPointerUp=function(a){a.preventDefault();document.removeEventListener("pointermove",this._onTrackPointerMove);document.removeEventListener("pointerup",this._onTrackPointerUp);this.snapOnClickEnabled||(this._dragged=!1);this._dragged||(a=this._getCursorPositionFromEvent(a),
a=this._valueFromPosition(a),this._emitTrackClickEvent({value:a}))};e._onSegmentPointerDown=function(a){a.preventDefault();var b=a.target;const c=b["data-segment-index"],d=b["data-min-thumb-index"];b=b["data-max-thumb-index"];if(!(this._isDisabled()||u.isNone(d)||u.isNone(b))){a.stopPropagation();this._storeTrackDimensions();document.addEventListener("pointerup",this._onSegmentPointerUp);var f=this._getAnchorDetails(d),g=this._getAnchorDetails(b);this.syncedSegmentsEnabled?(this.segmentElements.forEach(h=>
h.classList.add("esri-slider__segment--active")),this._anchorElements.forEach(h=>h.classList.add("esri-slider__anchor--active"))):(this.segmentElements.getItemAt(c).classList.add("esri-slider__segment--active"),this._anchorElements[f.index]?.classList.add("esri-slider__anchor--active"),this._anchorElements[g.index]?.classList.add("esri-slider__anchor--active"));this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(a),index:c,details:this._normalizeSegmentDetails({min:f,max:g})};
this.draggableSegmentsEnabled&&(document.addEventListener("pointermove",this._onSegmentPointerMove),this.notifyChange("state"),this._emitSegmentDragEvent({index:c,state:"start",thumbIndices:[d,b]}))}};e._onSegmentPointerMove=function(a){if(this._segmentDragStartInfo){a.preventDefault();var {_trackHeight:b,_trackWidth:c,_segmentDragStartInfo:{index:d,cursorPosition:f,details:{min:g,max:h}}}=this,{index:k,position:m,value:q}=g,{index:r,position:w,value:B}=h;this._dragged=!0;a=this._getCursorPositionFromEvent(a);
if(a!==f){var t=this._positionToPercent(f);t=this._positionToPercent(a)-t;a=this._positionToPercent(m)+t;t=this._positionToPercent(w)+t;var {min:z}=this._getAnchorBoundsAsPercents(k),{max:A}=this._getAnchorBoundsAsPercents(r),H=!1,I=!1;a<z?H=!0:t>A&&(I=!0);if(H){const {min:E,max:F}=this.viewModel.getBoundsForValueAtIndex(k);a=this._isPositionInverted()?F:E;t=B+(a-q);z=t-this.values[r];this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(z):this._updateAnchorValues([k,r],[a,t])}else if(I){const {min:E,
max:F}=this.viewModel.getBoundsForValueAtIndex(r);a=this._isPositionInverted()?E:F;t=q+(a-B);z=t-this.values[k];this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(z):this._updateAnchorValues([k,r],[t,a])}else{z=this._isHorizontalLayout()?c:b;t=t/100*z;A=this.values;var L=[A[k],A[r]];a=this._getValueForAnchorAtPosition(k,a/100*z);t=this._getValueForAnchorAtPosition(r,t);this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(a-L[0]):this._updateAnchorValues([k,r],[a,t]);[this.values[k],
this.values[r]].every((E,F)=>E===L[F])||this._emitSegmentDragEvent({index:d,state:"drag",thumbIndices:[k,r]})}}}};e._onSegmentPointerUp=function(a){a.preventDefault();document.removeEventListener("pointerup",this._onSegmentPointerUp);document.removeEventListener("pointermove",this._onSegmentPointerMove);if(this._segmentDragStartInfo){var {_dragged:b}=this,c=this.min,d=this.max,f=this.values,{index:g,details:{min:{index:h},max:{index:k}}}=this._segmentDragStartInfo;this.segmentElements.forEach(m=>
m.classList.remove("esri-slider__segment--active"));this._anchorElements.forEach(m=>m.classList.remove("esri-slider__anchor--active"));if(this.draggableSegmentsEnabled){const m=f[h];this._lastMovedHandleIndex=m===f[k]?m>(d-c)/2?h:k:null;this._dragged=!1;this._segmentDragStartInfo=null;this.notifyChange("state");this._emitSegmentDragEvent({index:g,state:"stop",thumbIndices:[h,k]})}b||(a=this._getCursorPositionFromEvent(a),a=this._valueFromPosition(a),this._emitSegmentClickEvent({index:g,value:a,thumbIndices:[h,
k]}))}};e._onTickGroupClick=function(a){a=a.target;a["data-config"]&&this._emitTickClickEvent({configIndex:a["data-tick-config-index"],groupIndex:a["data-tick-group-index"],value:a["data-value"]})};e._storeTrackDimensions=function(){if(this.trackElement){const a=this._getDimensions(this.trackElement);this._trackHeight=a.height;this._trackWidth=a.width}};e._onLabelPointerDown=function(){this._isDisabled()||(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",
this._onAnchorPointerMove))};e._onLabelPointerMove=function(){this._isDisabled()||(this._dragged=!0)};e._onLabelPointerUp=function(a){this._isDisabled()||(a=a.target["data-thumb-index"],this.labelInputsEnabled&&!this._dragged&&u.isSome(a)&&(this._activeLabelInputIndex=a),this._dragged=!1,this.notifyChange("state"),document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove))};e._onLabelInputBlur=function(a){const {_activeLabelInputIndex:b,
values:c,viewModel:d}=this;a=a.target.value;this._activeLabelInputIndex=null;this.notifyChange("state");if(a&&null!=b&&null!=c){var f=this._parseInputValue(a,"value",b);a=c[b];var {min:g,max:h}=this.viewModel.getBoundsForValueAtIndex(b);f<g||f>h||(d.setValue(b,f),f=this.values[b],a!==f&&this._emitThumbChangeEvent({index:b,oldValue:a,value:f}))}};e._onInputKeyDown=function(a){if(!this._isDisabled()){var {target:b}=a,c=G.eventKey(a),{hideInput1:d,hideInput2:f,hideInput3:g}=y,{_activeLabelInputIndex:h,
_anchorElements:k}=this;if(c===d||c===f||c===g)a.stopPropagation(),b.blur(),u.isSome(h)?k[h].focus():b.parentElement?.focus()}};e._onMaxLabelClick=function(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"max-click",value:this.max}),this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state")))};e._onMaxLabelKeyDown=function(a){this._isDisabled()||G.eventKey(a)!==y.showInput||(this._isMaxInputActive=!0,this.notifyChange("state"))};e._onMaxInputBlur=function(a){var b=
a.target.value;this._isMaxInputActive=!1;this.notifyChange("state");b&&(a=this.max,b=this._parseInputValue(b,"max"),b<=this.min||(this.viewModel.set("max",b),this.max!==a&&this._emitMaxChangeEvent({oldValue:a,value:this.max})))};e._onMinLabelClick=function(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"min-click",value:this.min}),this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state")))};e._onMinLabelKeyDown=function(a){this._isDisabled()||G.eventKey(a)!==
y.showInput||(this._isMinInputActive=!0,this.notifyChange("state"))};e._onMinInputBlur=function(a){var b=a.target.value;this._isMinInputActive=!1;this.notifyChange("state");b&&(a=this.min,b=this._parseInputValue(b,"min"),b>=this.max||(this.viewModel.set("min",b),this.min!==a&&this._emitMinChangeEvent({oldValue:a,value:this.min})))};e._isDisabled=function(){return this.disabled||"disabled"===this.state};e._positionFromValue=function(a){const {_trackHeight:b,_trackWidth:c}=this,d=this.min??0,f=this.max??
0,g=f-d;if(0===g||null==a)return 0;const h=this._isHorizontalLayout();a=h?parseFloat((c*(a-d)/g).toFixed(2)):parseFloat((b*(f-a)/g).toFixed(2));this._isReversedLayout()&&(a=h?c-a:b-a);return a};e._valueFromPosition=function(a){const {_trackHeight:b,_trackWidth:c,precision:d}=this,f=this.min??0,g=this.max??0,h=g-f;a=this._isHorizontalLayout()?a*h/c+f:h*(1E3-a/b*1E3)/1E3+f;this._isReversedLayout()&&(a=g+f-a);return parseFloat(a.toFixed(d))};e._positionToPercent=function(a){const {_trackHeight:b,_trackWidth:c}=
this,d=this._isHorizontalLayout()?c:b;return this._applyPrecisionToPosition(100*a/d)};e._applyPrecisionToPosition=function(a){return parseFloat(a.toFixed(this._positionPrecision))};e._isPositionInverted=function(){const {layout:a}=this;return"horizontal-reversed"===a||"vertical"===a};e._isHorizontalLayout=function(){return this.layout.includes("horizontal")};e._isReversedLayout=function(){return this.layout.includes("reversed")};e._normalizeSegmentDetails=function(a){if(this._isPositionInverted()){const {min:b,
max:c}=a;return{min:c,max:b}}return a};e._parseInputValue=function(a,b,c){return this.inputParseFunction?this.inputParseFunction(a,b,c):this.viewModel.defaultInputParseFunction(a)};e._formatInputValue=function(a,b,c){return this.inputFormatFunction?this.inputFormatFunction(a,b,c):this.viewModel.defaultInputFormatFunction(a)};e._getAnchorDetails=function(a){var b=this.values;a=[...b].sort((d,f)=>d-f)[a];b=b.indexOf(a);const c=this._getPositionOfElement(this._anchorElements[b]);return{index:b,position:c,
value:a}};e._updateAnchorStyle=function(a,b){if(a=this._anchorElements[a])this._isHorizontalLayout()?a.style.left=`${b}`:a.style.top=`${b}`};e._getStyleForAnchor=function(a,b,c){a=this._getPositionStyleForElement(a);if(1===this.values?.length)return`${a}`;b=this._zIndices[b];return`${a}; z-index: ${c?this._zIndexOffset+b:b}`};e._getPositionStyleForElement=function(a){a=this._positionFromValue(a);a=this._positionToPercent(a);return`${this._isHorizontalLayout()?"left":"top"}: ${a+"%"}`};e._getPositionOfElement=
function(a){const b=this._getDimensions(a.offsetParent);a=this._getDimensions(a);return this._isHorizontalLayout()?this._applyPrecisionToPosition(a.left-b.left):this._applyPrecisionToPosition(a.top-b.top)};e._updateAnchorValues=function(a,b){a.forEach((c,d)=>this._toValue(c,b[d]))};e._updateAnchorValuesByDifference=function(a){const {min:b,max:c,values:d}=this;d?.forEach((f,g)=>this._toValue(g,Math.max(Math.min(f+a,c),b)))};e._toValue=function(a,b){if(u.isSome(this.steps)){const c=this._getStepValues();
b=this._getIndexOfNearestStepValue(b);b=c[b]}this._updateAnchorStyle(a,this._getPositionStyleForElement(b));this.viewModel.setValue(a,b)};e._toPosition=function(a,b){b=u.isSome(this.steps)?this._getStepValueForAnchorAtPosition(a,b):this._getValueForAnchorAtPosition(a,b);this._updateAnchorStyle(a,this._getPositionStyleForElement(b));this.viewModel.setValue(a,b)};e._getValueForAnchorAtPosition=function(a,b){const {min:c,max:d}=this._getAnchorBoundsInPixels(a),{min:f,max:g}=this.viewModel.getBoundsForValueAtIndex(a);
a=null;let h;this._isPositionInverted()?(a=f,h=g):(a=g,h=f);a=b>d?a:b<c?h:this._valueFromPosition(b);a>g?a=g:a<f&&(a=f);return a};e._getStepValueForAnchorAtPosition=function(a,b){const c=this._getStepValues();b=this._calculateNearestStepPosition(b);a=this._getValueForAnchorAtPosition(a,b);a=this._getIndexOfNearestStepValue(a);return c[a]};e._getAnchorBoundsAsPercents=function(a){const {min:b,max:c}=this._getAnchorBoundsInPixels(a);return{min:this._positionToPercent(b),max:this._positionToPercent(c)}};
e._getAnchorBoundsInPixels=function(a){const {_anchorElements:b,_trackHeight:c,_trackWidth:d,effectiveMax:f,effectiveMin:g,thumbsConstrained:h}=this,k=b[a-1];a=b[a+1];var m=this._isHorizontalLayout()?d:c;let q;this._isPositionInverted()?(m=u.isSome(g)?this._positionFromValue(g):m,q=u.isSome(f)?this._positionFromValue(f):0):(m=u.isSome(f)?this._positionFromValue(f):m,q=u.isSome(g)?this._positionFromValue(g):0);return h?this._isPositionInverted()?{max:k?this._getPositionOfElement(k):m,min:a?this._getPositionOfElement(a):
q}:{max:a?this._getPositionOfElement(a):m,min:k?this._getPositionOfElement(k):q}:{max:m,min:q}};e._getIndexOfNearestValue=function(a){const b=this.values;return b.indexOf(b.reduce((c,d)=>Math.abs(d-a)<Math.abs(c-a)?d:c))};e._getCursorPositionFromEvent=function(a){const b=this._getDimensions(this.trackElement);return this._isHorizontalLayout()?a.clientX-b.left:a.clientY-b.top};e._getStepValues=function(){const {steps:a}=this;if(Array.isArray(a))return a;const {max:b,min:c}=this;if(null==c||null==b||
null==a)return[];const d=Math.ceil((b-c)/a),f=[];for(let g=0;g<=d;g++){const h=c+a*g;f.push(h>b?b:h)}return f};e._toStep=function(a,b){const c=this.values[a];var d=this._getStepValues(),f=d.indexOf(c);let g=null;-1<f?(b=d[f+b],isNaN(b)&&(b=d[f]),d=this._positionFromValue(b),g=this._getStepValueForAnchorAtPosition(a,d)):(f=this._getIndexOfNearestStepValue(c),g=d[f+b]);this.viewModel.setValue(a,g)};e._getIndexOfNearestStepValue=function(a){var {steps:b}=this;if(u.isNone(b))return null;b=this._getStepValues();
const c=b.reduce((d,f)=>Math.abs(f-a)<Math.abs(d-a)?f:d);return b.indexOf(c)};e._calculateNearestStepPosition=function(a){a=this._valueFromPosition(a);a=this._getIndexOfNearestStepValue(a);const b=this._getStepValues();return this._positionFromValue(b[a])};e._getTickCounts=function(a,b){({mode:b}=b);return"count"===b||"position"===b?a||0:"percent"===b?100/a||0:0};e._calculateTickPositions=function(a){return a.map(b=>this._positionFromValue(b))};e._calculateEquidistantTickPositions=function(a){const {_trackWidth:b,
_trackHeight:c}=this,d=this._isHorizontalLayout()?b:c,f=d/(a-1),g=[];if(1===a)return[d/2];for(let h=0;h<a;h++){const k=h*f;k<=d&&g.push(k)}return g};e._getDimensions=function(a){try{return u.assertIsSome(a),a.getBoundingClientRect()}catch(b){if("object"===typeof b&&null!==b)return new DOMRect(0,0,0,0);throw b;}};e._emitTrackClickEvent=function(a){this.emit("track-click",{...a,type:"track-click"})};e._emitTickClickEvent=function(a){this.emit("tick-click",{...a,type:"tick-click"})};e._emitMaxChangeEvent=
function(a){this.emit("max-change",{...a,type:"max-change"})};e._emitMinChangeEvent=function(a){this.emit("min-change",{...a,type:"min-change"})};e._emitThumbChangeEvent=function(a){this.emit("thumb-change",{...a,type:"thumb-change"})};e._emitThumbClickEvent=function(a){this.emit("thumb-click",{...a,type:"thumb-click"})};e._emitThumbDragEvent=function(a){this.emit("thumb-drag",{...a,type:"thumb-drag"})};e._emitSegmentClickEvent=function(a){this.emit("segment-click",{...a,type:"segment-click"})};e._emitSegmentDragEvent=
function(a){this.emit("segment-drag",{...a,type:"segment-drag"})};e._emitRangeLabelClickEvent=function(a){this.emit(a.type,{...a})};x._createClass(D,[{key:"effectiveMax",get:function(){return this.viewModel.effectiveMax},set:function(a){this.viewModel.effectiveMax=a}},{key:"effectiveMin",get:function(){return this.viewModel.effectiveMin},set:function(a){this.viewModel.effectiveMin=a}},{key:"inputFormatFunction",get:function(){return this.viewModel.inputFormatFunction},set:function(a){this.viewModel.inputFormatFunction=
a}},{key:"inputParseFunction",get:function(){return this.viewModel.inputParseFunction},set:function(a){this.viewModel.inputParseFunction=a}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(a){this._overrideIfSome("label",a)}},{key:"labelFormatFunction",get:function(){return this.viewModel.labelFormatFunction},set:function(a){this.viewModel.labelFormatFunction=a}},{key:"labels",get:function(){return this.viewModel.labels}},{key:"layout",set:function(a){["vertical","vertical-reversed",
"horizontal","horizontal-reversed"].includes(a)||(a="horizontal");this._set("layout",a)}},{key:"max",get:function(){return this.viewModel.max},set:function(a){this.viewModel.max=a}},{key:"min",get:function(){return this.viewModel.min},set:function(a){this.viewModel.min=a}},{key:"precision",get:function(){return this.viewModel.precision},set:function(a){this.viewModel.precision=a}},{key:"state",get:function(){const {_activeLabelInputIndex:a,_isMaxInputActive:b,_isMinInputActive:c,_dragStartInfo:d,
_segmentDragStartInfo:f,disabled:g,viewModel:h}=this,k=u.isSome(d)||u.isSome(f);return g?"disabled":null!==a||b||c?"editing":k?"dragging":h.state}},{key:"thumbsConstrained",get:function(){return this.viewModel.thumbsConstrained},set:function(a){this.viewModel.thumbsConstrained=a}},{key:"tickConfigs",set:function(a){this._set("tickConfigs",a);this.scheduleRender()}},{key:"values",get:function(){return this.viewModel.values},set:function(a){this.viewModel.values=a}}]);return D}(O);n.__decorate([p.property()],
l.prototype,"disabled",void 0);n.__decorate([p.property()],l.prototype,"draggableSegmentsEnabled",void 0);n.__decorate([p.property()],l.prototype,"effectiveMax",null);n.__decorate([p.property()],l.prototype,"effectiveMin",null);n.__decorate([p.property({readOnly:!0})],l.prototype,"effectiveSegmentElements",void 0);n.__decorate([p.property()],l.prototype,"extraNodes",void 0);n.__decorate([p.property()],l.prototype,"inputCreatedFunction",void 0);n.__decorate([p.property()],l.prototype,"inputFormatFunction",
null);n.__decorate([p.property()],l.prototype,"inputParseFunction",null);n.__decorate([p.property()],l.prototype,"label",null);n.__decorate([p.property({readOnly:!0})],l.prototype,"labelElements",void 0);n.__decorate([p.property()],l.prototype,"labelInputsEnabled",void 0);n.__decorate([p.property()],l.prototype,"labelFormatFunction",null);n.__decorate([p.property({readOnly:!0})],l.prototype,"labels",null);n.__decorate([p.property({value:"horizontal"})],l.prototype,"layout",null);n.__decorate([p.property()],
l.prototype,"max",null);n.__decorate([p.property({readOnly:!0})],l.prototype,"maxLabelElement",void 0);n.__decorate([p.property(),R.messageBundle("esri/widgets/Slider/t9n/Slider")],l.prototype,"messages",void 0);n.__decorate([p.property()],l.prototype,"min",null);n.__decorate([p.property({readOnly:!0})],l.prototype,"minLabelElement",void 0);n.__decorate([p.property()],l.prototype,"precision",null);n.__decorate([p.property()],l.prototype,"rangeLabelInputsEnabled",void 0);n.__decorate([p.property({readOnly:!0})],
l.prototype,"segmentElements",void 0);n.__decorate([p.property()],l.prototype,"snapOnClickEnabled",void 0);n.__decorate([p.property({readOnly:!0})],l.prototype,"state",null);n.__decorate([p.property()],l.prototype,"steps",void 0);n.__decorate([p.property()],l.prototype,"syncedSegmentsEnabled",void 0);n.__decorate([p.property()],l.prototype,"thumbsConstrained",null);n.__decorate([p.property()],l.prototype,"thumbCreatedFunction",void 0);n.__decorate([p.property({readOnly:!0})],l.prototype,"thumbElements",
void 0);n.__decorate([p.property()],l.prototype,"tickConfigs",null);n.__decorate([p.property({readOnly:!0})],l.prototype,"tickElements",void 0);n.__decorate([p.property({readOnly:!0})],l.prototype,"trackElement",void 0);n.__decorate([p.property()],l.prototype,"values",null);n.__decorate([p.property()],l.prototype,"viewModel",void 0);n.__decorate([p.property()],l.prototype,"visibleElements",void 0);n.__decorate([M.cast("visibleElements")],l.prototype,"castVisibleElements",null);return l=n.__decorate([N.subclass("esri.widgets.Slider")],
l)});