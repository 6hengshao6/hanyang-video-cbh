// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/css":function(){define(["exports"],function(h){h.CSS={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",
input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",
warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",
menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./searchResultRendererCSS ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v,t,k,d){n=function(A){function D(y,K){y=P.call(this,y,K);y.messages=null;y.showMoreResultsOpen=!1;y.viewModel=null;return y}h._inherits(D,A);var P=h._createSuper(D);A=D.prototype;A.destroy=function(){this.viewModel=null};A.render=function(){return k.tsx("div",{class:z.CSS.base},k.tsx("div",{key:"esri-search-renderer__container",class:this.classes(z.CSS.moreResults,{[z.CSS.showMoreResults]:this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))};
A.renderMoreResults=function(){return k.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};A.renderSearchResultName=function(){const y=this.viewModel?.selectedResult;return k.tsx("div",{key:"esri-search-renderer__result-name",class:z.CSS.moreResultsItem},y&&y.name||"")};A.renderMoreResultsLists=function(){var {viewModel:y}=this;if(!y)return[];if(2>(y.resultCount??0))return null;y=y.results?.map(K=>this.renderMoreResultsList(K));return k.tsx("div",
{key:"esri-search-renderer__more-results-container",class:z.CSS.moreResultsList},y)};A.renderMoreResultsButton=function(){const {messages:y,viewModel:K}=this;return!K||2>(K.resultCount??0)?null:k.tsx("div",{key:"esri-search-renderer__more-results-button",class:z.CSS.moreResultsItem},k.tsx("a",{class:z.CSS.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?y.hideMoreResults:y.showMoreResults))};A.renderMoreResultsHeader=function(y,
K){return k.tsx("div",{key:`esri-search-result-renderer__header-${K}`,class:z.CSS.moreResultsListHeader},y)};A.renderMoreResultsList=function(y){var {results:K}=y,w=K?.length??0;const X=0<w;var Y=this.viewModel?.selectedResult;w=1===w&&K[0]===Y;Y=this._getSourceName(y.source,y.sourceIndex);Y=1<(this.viewModel?.results?.length??0)&&!w?this.renderMoreResultsHeader(Y,y.sourceIndex):null;K=X&&K.map((G,Z)=>this.renderMoreResultsListItem(G,Z));K=X&&!w?k.tsx("ul",{key:`esri-search-result-renderer__list-${y.sourceIndex}`},
K):null;return X?k.tsx("div",{key:`esri-search-result-renderer__results-${y.sourceIndex}`},Y,K):null};A.renderMoreResultsListItem=function(y,K){const w=this.get("viewModel.selectedResult");return y!==w?k.tsx("li",{key:`esri-search-result-renderer__list-item-${K}`},k.tsx("a",{class:z.CSS.anchor,href:"#",tabindex:"0",bind:this,"data-result":y,onclick:this._selectResultClick,onkeydown:this._selectResultClick},y.name)):null};A._showMoreResultsClick=function(y){y.preventDefault();this.showMoreResultsOpen=
!this.showMoreResultsOpen;(y=this.get("viewModel.view.popup"))&&y.reposition()};A._selectResultClick=function(y){y.preventDefault();y=y.currentTarget["data-result"];this.viewModel?.select(y)};A._getSourceName=function(y,K){return K===m.ALL_INDEX?this.messages.all:y.name};return h._createClass(D)}(q);c.__decorate([a.property(),t.messageBundle("esri/widgets/Search/t9n/Search")],n.prototype,"messages",void 0);c.__decorate([a.property()],n.prototype,"showMoreResultsOpen",void 0);c.__decorate([a.property()],
n.prototype,"viewModel",void 0);c.__decorate([v.accessibleHandler()],n.prototype,"_showMoreResultsClick",null);c.__decorate([v.accessibleHandler()],n.prototype,"_selectResultClick",null);return n=c.__decorate([p.subclass("esri.widgets.Search.SearchResultRenderer")],n)})},"esri/widgets/Search/searchResultRendererCSS":function(){define(["exports"],function(h){h.CSS={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",
moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../symbols ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo ../../symbols/TextSymbol ../../symbols/PictureMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v,t,k,d,A,D,P,y,K,w,X,Y,G,Z,ba,e,l,u,I,R,x,C,H,O,Q,W,E){function N(L,da){return L.hasOwnProperty(da)&&null!=L[da]&&""!==L[da]}const S=t.getLogger("esri.widgets.Search.SearchViewModel"),T=z.ofType({key:L=>L.layer?"layer":"locator",base:I,typeMap:{layer:l,locator:u}}),U=Y.WGS84,aa=/<(?:.|\s)*?>/g;p=function(L){function da(b){b=ea.call(this,b);b._gotoController=null;b._searching=null;b._updatingPromise=null;b._createdFeatureLayers=[];b.autoNavigate=!0;b.autoSelect=!0;b.defaultPopupTemplate=
null;b.defaultSources=new T;b.defaultSymbols={point:new Q({url:a.getAssetUrl("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new W({color:[130,130,130,1],width:2}),polygon:new E({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})};b.includeDefaultSources=!0;b.maxInputLength=128;b.maxResults=6;b.maxSuggestions=6;b.messages=null;b.minSuggestCharacters=3;b.popupEnabled=!0;b.popupTemplate=null;b.portal=ba.getDefault();b.resultCount=null;b.resultGraphicEnabled=
!0;b.resultGraphic=null;b.results=null;b.selectedSuggestion=null;b.searchAllEnabled=!0;b.selectedResult=null;b.sources=new T;b.suggestionDelay=350;b.suggestionCount=null;b.suggestions=null;b.suggestionsEnabled=!0;b.view=null;return b}h._inherits(da,L);var ea=h._createSuper(da);L=da.prototype;L.initialize=function(){const b=async()=>{const f=await Z.fetchMessageBundle("esri/widgets/Search/t9n/Search");this.messages=f;this.defaultPopupTemplate=new F({title:f.searchResult,content:"{Match_addr}"})};b();
this.addHandles([A.watch(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),A.initial),G.onLocaleChange(b)])};L.destroy=function(){this.removeAllHandles();this._destroyFeatureLayers();this._abortGoTo();this.clearGraphics()};L.clear=function(){this.searchTerm=""};L.clearGraphics=function(){this._removeHighlight();this._closePopup();const {view:b,resultGraphic:f}=this;b&&f&&b.graphics.remove(f);this._set("resultGraphic",null)};L.search=function(b,f){this.emit("search-start");
this.clearGraphics();const r=this._createSuggestionForSearch(b);return this._searching=b=(async()=>{try{await this.when();const B=await this._getResultsFromSources(r,f);if(k.unwrap(f?.signal)?.aborted)return null;const J={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(J,B,r);const M=this._getFirstResult(J.results),V=(r.location&&M?M.name:r.text)?.replace(aa,"");this._set("searchTerm",V);(r.key&&"number"===typeof r.sourceIndex||
r.location)&&this._set("selectedSuggestion",r);this._set("results",J.results);this._set("resultCount",J.results.reduce((ca,fa)=>ca+(fa.results?.length??0),0));this.emit("search-complete",J);await this._selectFirstResult(M);return J}finally{this._clearSearching()}})()};L.searchNearby=async function(b){if(!this.locationEnabled){var f=new m("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});S.error(f);throw f;}return this._searching=f=(async()=>
{try{const r=await C.getCurrentPosition(),B=await C.positionToPoint({position:r,view:this.view},b);return await this.search(B,b)}finally{this._clearSearching()}})()};L.select=async function(b){this.clearGraphics();if(!b)throw b=new m("select:missing-parameter","Cannot select without a searchResult.",{searchResult:b}),S.error(b),b;const {view:f}=this,r=N(b,"sourceIndex")?b.sourceIndex:this._getSourceIndexOfResult(b),B=null!=r?this.allSources.at(r):null;if(!B)throw b=new m("select:missing-source","Cannot select without a source.",
{source:B}),S.error(b),b;var J=B instanceof l?this._getLayerSourcePopupTemplate(B):B.popupTemplate,M=B.resultSymbol||this._getDefaultSymbol(b);const V=N(B,"resultGraphicEnabled")?B.resultGraphicEnabled:this.resultGraphicEnabled;var ca=N(B,"autoNavigate")?B.autoNavigate:this.autoNavigate,fa=N(B,"popupEnabled")?B.popupEnabled:this.popupEnabled;const ka=fa?J||this.popupTemplate||this.defaultPopupTemplate:null,{feature:ha}=b;if(!ha)throw b=new m("select:missing-feature","Cannot select without a feature.",
{feature:ha}),S.error(b),b;const {attributes:ma,geometry:la,layer:na,sourceLayer:oa}=ha,ia=R.getPointFromGeometry(la);J={layerViewQuery:this._getLayerView(ha),elevationQuery:f&&k.isSome(ia)?R.getPointWithElevation(ia,f).catch(()=>ia):Promise.resolve(ia)};var ja=await d.eachAlways(J);J=ja.layerViewQuery.value;ja=ja.elevationQuery.value;M instanceof O&&(M.text=b.name);ca=f&&ca?b.target||b.extent:null;await (k.isSome(ca)?this._goToSearchResult(ca):Promise.resolve());M=J?ha:new g({geometry:la,symbol:M,
attributes:ma,layer:na,sourceLayer:oa,popupTemplate:ka});(ca=(fa=fa&&this.view?.popup)&&M.getEffectivePopupTemplate(fa.defaultPopupTemplateEnabled))&&fa.open({features:[M],location:ja});J&&e.highlightsSupported(J)&&!ca&&this._highlightFeature({graphic:M,layerView:J});!J&&V&&f&&f.graphics.push(M);this._setResultFloor(b);this._set("selectedResult",b);this._set("resultGraphic",M);this.emit("select-result",{result:b,source:B,sourceIndex:r});return b};L.suggest=async function(b,f,r){b=b||this.searchTerm;
this.emit("suggest-start",{searchTerm:b});await this._suggestTimer(f,r);f=await this._suggestImmediate(b,r);this._set("suggestions",f?.results);this._set("suggestionCount",f?.results.reduce((B,J)=>B+(J.results?.length??0),0)??null);this.emit("suggest-complete",f);return f};L.when=async function(){await A.whenOnce(()=>!this.updating)};L._update=async function(){const {portal:b,view:f}=this;if(this.includeDefaultSources){const r=this._updatingPromise=d.eachAlways([b?.load(),f?.when()]);if(this.destroyed)return;
await r;if(r!==this._updatingPromise)return}await A.whenOnce(()=>this.messages);this.destroyed||this._updateDefaultSources();this._updatingPromise=null};L._clearSearching=function(){this._searching=null};L._convertHelperServices=function(){const b=this.portal?.helperServices?.geocode;return b?b.map(f=>{if(!1!==f.placefinding){var r=n.apiKey&&x.isArcGISWorldGeocoder(f.url)?{url:x.meteredArcGISLocatorUrl}:null;f=u.fromJSON({...f,...r});r=f.url;(x.isArcGISWorldGeocoder(r)||x.isProxiedArcGISWorldGeocoder(r)||
x.isMeteredArcGISWorldGeocoder(r))&&f.set({singleLineFieldName:"SingleLine",outFields:f.outFields??["Addr_type","Match_addr","StAddr","City"],placeholder:f.placeholder??this.messages?.placeholder??"",defaultZoomScale:"number"===typeof f.defaultZoomScale?f.defaultZoomScale:2500});if(f.singleLineFieldName)return f}}).filter(k.isSome):[]};L._destroyFeatureLayers=function(){this._createdFeatureLayers.forEach(b=>b?.destroy());this._createdFeatureLayers=[]};L._getLayerSources=function(b,f){const r=this.view?.map;
return b.map(B=>{const J=r.findLayerById(B.id);if(J){B=this._getLayerJSON(B);var M=l.fromJSON(B);M.placeholder=f;this._getLayer(J,B).then(V=>{M.layer=V});return M}}).filter(k.isSome).toArray()};L._getTableSources=function(b,f){const r=this.view?.map;return b.map(B=>{if(B.id){var J=r.findTableById(B.id);if(J){B=this._getLayerJSON(B);var M=l.fromJSON(B);M.placeholder=f;this._getLayer(J,B).then(V=>{M.layer=V});return M}}}).filter(k.isSome).toArray()};L._convertApplicationProperties=function(){var b=
this.view?.map?.applicationProperties?.viewing?.search;if(!b)return[];const {enabled:f,hintText:r,layers:B,tables:J}=b;if(!f)return[];b=this._getLayerSources(B,r);const M=this._getTableSources(J,r);return[...b,...M]};L._getSubLayer=async function(b,f){await b.load();if(!b.allSublayers)throw Error();b=b.allSublayers.find(r=>r.id===f.subLayer);if(!b)throw Error();b=await b.createFeatureLayer?.();if(!b)throw Error();this._createdFeatureLayers.push(b);return b};L._getBuildingSubLayer=async function(b,
f){await b.load();b=b.allSublayers.find(r=>r.id===f.subLayer);if("building-component"!==b?.type)throw Error();await b.load();if(null==b.associatedLayer)throw Error();await b.associatedLayer.load();return b};L._getLayer=async function(b,f){if("feature"===b.type||"scene"===b.type||"csv"===b.type||"geojson"===b.type||"ogc-feature"===b.type)return b;if("map-image"===b.type)try{return await this._getSubLayer(b,f)}catch(r){return b=new m("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",
{layer:b}),S.error(b),null}return"building-scene"===b.type?this._getBuildingSubLayer(b,f):null};L._getLayerJSON=function(b){return"function"===typeof b.toJSON?b.toJSON():b};L._updateDefaultSources=function(){const {defaultSources:b,includeDefaultSources:f}=this;this._destroyFeatureLayers();b.removeAll();f&&b.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])};L._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};L._clear=
function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};L._closePopup=function(){const b=this.view?.popup,{resultGraphic:f}=this;if(b&&f){var {selectedFeature:r}=b;r&&r===f&&b.close()}};L._suggestTimer=function(b,f){return d.after(null!=b?b:this.suggestionDelay,null,f&&f.signal)};L._createLocationForSearch=function(b){return b instanceof
g?R.getPointFromGeometry(b.geometry):b instanceof X?b:Array.isArray(b)&&2===b.length?new X({longitude:b[0],latitude:b[1]}):null};L._createSuggestionForSearch=function(b){if(b&&N(b,"key")&&N(b,"text")&&N(b,"sourceIndex"))return b;const f=this._createLocationForSearch(b),r="string"===typeof b?b:this.searchTerm,{selectedSuggestion:B,selectedResult:J}=this,M=(b=!b&&B&&J)&&B.location;return b&&B.key===J.key&&B.sourceIndex===J.sourceIndex||M?B:{location:k.unwrap(f),text:f?"":r,sourceIndex:null,key:null}};
L._getFirstResult=function(b){let f=null;b&&b.some(r=>{({results:r}=r);r=r?.[0];const B=!!r;B&&(f=r);return B});return f};L._selectFirstResult=async function(b){return this.autoSelect&&b?this.select(b):null};L._suggestImmediate=async function(b,f){await this.when();const r=await this._getSuggestionsFromSources(b,f);if(k.unwrap(f?.signal)?.aborted)return null;b={activeSourceIndex:this.activeSourceIndex,searchTerm:b??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(b,r);return b};
L._formatSourceResponse=function(b,f,r){const B=f?.value||[];f=f?.error;const J=this.allSources.at(r);f?(b.errors.push({sourceIndex:r,source:J,error:f}),S.error(f),b.numErrors++):(b.results.push({sourceIndex:r,source:J,results:B}),b.numResults+=B.length)};L._formatResponse=function(b,f,r){if(f)if(-1===b.activeSourceIndex){const B=r&&N(r,"sourceIndex")&&-1!==r.sourceIndex?r.sourceIndex:void 0;f.forEach((J,M)=>{this._formatSourceResponse(b,J,void 0!==B?B:M)})}else this._formatSourceResponse(b,f[0],
b.activeSourceIndex)};L._getResultsFromSources=async function(b,f){var {allSources:r}=this;const B=!b.location&&N(b,"sourceIndex")?b.sourceIndex:this.activeSourceIndex,J=[];if(!r.length)throw r=new m("search:no-sources-defined","At least one source is required.",{allSources:r}),S.error(r),r;-1===B?r.forEach((M,V)=>{J.push(this._getResultsFromSource(b,V,f))}):J.push(this._getResultsFromSource(b,B,f));return d.eachAlways(J)};L._getSuggestionsFromSources=async function(b,f){const {allSources:r,activeSourceIndex:B}=
this,J=[];if(!r.length){const M=new m("suggest:no-sources-defined","At least one source is required.",{allSources:r});S.error(M);throw M;}-1===B?r.forEach((M,V)=>{J.push(this._getSuggestionsFromSource(b,V,f))}):J.push(this._getSuggestionsFromSource(b,B,f));return d.eachAlways(J)};L._getResultsFromSource=async function(b,f,r){const B=null!=f?this.allSources.at(f):null;if(!B)return null;const {location:J=null}=b,M=this.view?.spatialReference||U,V=N(B,"maxResults")?B.maxResults:this.maxResults,ca=B instanceof
l&&N(B,"exactMatch")?B.exactMatch:!1,{view:fa}=this;return B.getResults?.({view:fa,sourceIndex:f,location:J,suggestResult:b,spatialReference:M,exactMatch:ca,maxResults:V},r)};L._getSuggestionsFromSource=async function(b,f,r){const B=this.allSources.at(f);if(!B)return null;b??(b="");var J=N(B,"suggestionsEnabled")?B.suggestionsEnabled:this.suggestionsEnabled,M=b?.length,V=N(B,"minSuggestCharacters")?B.minSuggestCharacters:this.minSuggestCharacters;if(J&&b.trim()&&M>=V){J=this.view?.spatialReference||
U;M=N(B,"maxSuggestions")?B.maxSuggestions:this.maxSuggestions;({view:V}=this);const ca=B instanceof l&&N(B,"exactMatch")?B.exactMatch:!1;return B.getSuggestions?.({view:V,sourceIndex:f,suggestTerm:b,spatialReference:J,maxSuggestions:M,exactMatch:ca},r)}return null};L._getLayerSourcePopupTemplate=function(b){const {layer:f}=b;if(f)return N(b,"popupTemplate")?b.popupTemplate:f.popupTemplate};L._getSourceIndexOfResult=function(b){const f=this.results;if(!f)return null;let r=null;f.some(B=>B.results.some(J=>
J===b?(r=B.sourceIndex,!0):!1));return r};L._goToSearchResult=async function(b){const f=!!b;this._abortGoTo();const r=new AbortController;this._gotoController=r;await this.callGoTo({target:{target:b},options:{animate:f,signal:r.signal}});this._gotoController=null};L._getDefaultSymbol=function(b){const {defaultSymbols:f}=this;b=b.feature?.geometry;if(k.isNone(b))return null;switch(b.type){case "point":case "multipoint":return f.point;case "polyline":return f.polyline;case "extent":case "polygon":return f.polygon;
default:return null}};L._removeHighlight=function(){this.removeHandles("highlight")};L._getLayerView=async function(b){const {view:f}=this;if(!b||!f||"building-component"===b.layer?.type||"subtype-sublayer"===b.layer?.type)return null;({layer:b}=b);if(!b)return null;await f.when();return f.whenLayerView(b)};L._highlightFeature=function(b){const {graphic:f,layerView:r}=b,{attributes:B,layer:J}=f;({objectIdField:b}=J);b=r.highlight((b&&B?.[b])??null??f);this.addHandles(b,"highlight")};L._setResultFloor=
function(b){const {view:f}=this;var r=b.feature?.attributes;(b=b.feature?.sourceLayer)&&"floorInfo"in b&&b?.floorInfo?.floorField&&r&&(r=r[b.floorInfo.floorField],f?.emit("select-result-floor",r))};h._createClass(da,[{key:"activeSource",get:function(){return this.allSources.at(this.activeSourceIndex)??null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(b){this._overrideIfSome("activeSourceIndex",b)}},{key:"allPlaceholder",get:function(){return this.messages?.allPlaceholder},
set:function(b){this._overrideIfSome("allPlaceholder",b)}},{key:"allSources",get:function(){const {sources:b,defaultSources:f,includeDefaultSources:r}=this,B="function"===typeof r?r.call(null,{sources:b,defaultSources:f}):r?f.concat(b):b,J=this._get("allSources")||new T;J.removeAll();J.addMany(B.filter(Boolean));return J}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||C.supported()},set:function(b){if(void 0===b)this._clearOverride("locationEnabled");else{var f=C.supported();
if(b&&!f){const r=new m("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});S.error(r)}this._override("locationEnabled",!!b&&f)}}},{key:"placeholder",get:function(){const {allSources:b,activeSourceIndex:f,allPlaceholder:r}=this;if(-1===f)return r??"";const B=b.at(f);return B?B.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(b){this._set("searchTerm",b||"");this.clearGraphics();this.selectedSuggestion&&
this.selectedSuggestion.text!==b&&this._set("selectedSuggestion",null);""===b&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return da}(H.GoToMixin(v.EventedMixin(q)));p.ALL_INDEX=-1;c.__decorate([D.property()],p.prototype,"_searching",void 0);c.__decorate([D.property()],p.prototype,"_updatingPromise",void 0);c.__decorate([D.property({readOnly:!0,
value:null})],p.prototype,"activeSource",null);c.__decorate([D.property()],p.prototype,"activeSourceIndex",null);c.__decorate([D.property()],p.prototype,"allPlaceholder",null);c.__decorate([D.property({readOnly:!0})],p.prototype,"allSources",null);c.__decorate([D.property()],p.prototype,"autoNavigate",void 0);c.__decorate([D.property()],p.prototype,"autoSelect",void 0);c.__decorate([D.property()],p.prototype,"defaultPopupTemplate",void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"defaultSources",
void 0);c.__decorate([D.property()],p.prototype,"defaultSymbols",void 0);c.__decorate([D.property()],p.prototype,"includeDefaultSources",void 0);c.__decorate([D.property()],p.prototype,"locationEnabled",null);c.__decorate([D.property()],p.prototype,"maxInputLength",void 0);c.__decorate([D.property()],p.prototype,"maxResults",void 0);c.__decorate([D.property()],p.prototype,"maxSuggestions",void 0);c.__decorate([D.property()],p.prototype,"messages",void 0);c.__decorate([D.property()],p.prototype,"minSuggestCharacters",
void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"placeholder",null);c.__decorate([D.property()],p.prototype,"popupEnabled",void 0);c.__decorate([D.property({type:F})],p.prototype,"popupTemplate",void 0);c.__decorate([D.property({type:ba})],p.prototype,"portal",void 0);c.__decorate([D.property()],p.prototype,"resultCount",void 0);c.__decorate([D.property()],p.prototype,"resultGraphicEnabled",void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"resultGraphic",void 0);c.__decorate([D.property({readOnly:!0})],
p.prototype,"results",void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"selectedSuggestion",void 0);c.__decorate([D.property()],p.prototype,"searchAllEnabled",void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"selectedResult",void 0);c.__decorate([D.property()],p.prototype,"searchTerm",null);c.__decorate([D.property({type:T})],p.prototype,"sources",void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"state",null);c.__decorate([D.property()],p.prototype,"suggestionDelay",
void 0);c.__decorate([D.property()],p.prototype,"suggestionCount",void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"suggestions",void 0);c.__decorate([D.property()],p.prototype,"suggestionsEnabled",void 0);c.__decorate([D.property({readOnly:!0})],p.prototype,"updating",null);c.__decorate([D.property()],p.prototype,"view",void 0);c.__decorate([D.property()],p.prototype,"clear",null);return p=c.__decorate([w.subclass("esri.widgets.Search.SearchViewModel")],p)})},"esri/views/support/layerViewUtils":function(){define(["exports",
"../../core/maybe"],function(h,c){h.extractSafeScaleBounds=function(a){a=a.effectiveScaleRange;return{minScale:a?.minScale??0,maxScale:a?.maxScale??0}};h.highlightsSupported=function(a){return a&&"function"===typeof a.highlight};h.isScaleRangeActive=function(a,n){return c.isSome(a)&&0<a||c.isSome(n)&&0<n};h.occludeesSupported=function(a){return a&&"function"===typeof a.maskOccludee};h.scaleBoundsPredicate=function(a,n,g){return c.isNone(a)||a>g&&(0===n||a<n)};Object.defineProperty(h,Symbol.toStringTag,
{value:"Module"})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),function(h,c,a,n,g,F,p,q){var z;g=z=function(m){function v(k){var d=t.call(this,k);d.displayField=null;d.exactMatch=null;d.orderByFields=null;d.searchFields=
null;d.searchTemplate=null;d.suggestionTemplate=null;d.getResults=(A,D)=>q.getResults({source:h._assertThisInitialized(d),...A},D);d.getSuggestions=(A,D)=>q.getSuggestions({source:h._assertThisInitialized(d),...A},D);return d}h._inherits(v,m);var t=h._createSuper(v);m=v.prototype;m.clone=function(){return new z({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?a.clone(this.outFields):
null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?a.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};
m._getFirstStringField=function(){return this.layer.fieldsIndex?.fields.find(k=>"string"===k.type)?.name??""};m._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};m._getSearchFieldsString=function(){const {layer:k,searchFields:d}=this;return k.loaded?`: ${(d||[this._getDisplayField()]).map(A=>{const D=k.getField(A);return D&&D.alias||A}).join(", ")}`:""};m._getLayerTitle=function(){var {layer:k}=this;if(k&&({title:k}=k,k))return`${k}${this._getSearchFieldsString()}`};
h._createClass(v,[{key:"layer",set:function(k){this._set("layer",k);k&&k.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()??""},set:function(k){this._overrideIfSome("name",k)}}]);return v}(p);c.__decorate([n.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],g.prototype,"displayField",void 0);c.__decorate([n.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],g.prototype,"exactMatch",void 0);c.__decorate([n.property({value:null})],
g.prototype,"layer",null);c.__decorate([n.property()],g.prototype,"name",null);c.__decorate([n.property({type:[String],json:{write:!0}})],g.prototype,"orderByFields",void 0);c.__decorate([n.property()],g.prototype,"searchFields",void 0);c.__decorate([n.property()],g.prototype,"searchTemplate",void 0);c.__decorate([n.property()],g.prototype,"suggestionTemplate",void 0);return g=z=c.__decorate([F.subclass("esri.widgets.Search.LayerSearchSource")],g)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,a,n,g,F,p,q,z){a=function(m){function v(k){k=t.call(this,k);k.autoNavigate=null;k.filter=null;k.getResults=null;k.getSuggestions=null;k.maxResults=null;k.maxSuggestions=null;k.minSuggestCharacters=null;k.outFields=null;k.placeholder="";k.popupEnabled=null;k.popupTemplate=null;k.prefix="";k.resultGraphicEnabled=null;k.resultSymbol=null;k.suggestionsEnabled=null;k.suffix="";k.withinViewEnabled=!1;k.zoomScale=null;return k}h._inherits(v,m);var t=h._createSuper(v);return h._createClass(v)}(a.IdentifiableMixin(n.JSONSupport));
c.__decorate([g.property()],a.prototype,"autoNavigate",void 0);c.__decorate([g.property()],a.prototype,"filter",void 0);c.__decorate([g.property()],a.prototype,"getResults",void 0);c.__decorate([g.property()],a.prototype,"getSuggestions",void 0);c.__decorate([g.property()],a.prototype,"maxResults",void 0);c.__decorate([g.property()],a.prototype,"maxSuggestions",void 0);c.__decorate([g.property()],a.prototype,"minSuggestCharacters",void 0);c.__decorate([g.property()],a.prototype,"outFields",void 0);
c.__decorate([g.property()],a.prototype,"placeholder",void 0);c.__decorate([g.property()],a.prototype,"popupEnabled",void 0);c.__decorate([g.property()],a.prototype,"popupTemplate",void 0);c.__decorate([g.property()],a.prototype,"prefix",void 0);c.__decorate([g.property()],a.prototype,"resultGraphicEnabled",void 0);c.__decorate([g.property()],a.prototype,"resultSymbol",void 0);c.__decorate([g.property()],a.prototype,"suggestionsEnabled",void 0);c.__decorate([g.property()],a.prototype,"suffix",void 0);
c.__decorate([g.property()],a.prototype,"withinViewEnabled",void 0);c.__decorate([g.property()],a.prototype,"zoomScale",void 0);return a=c.__decorate([z.subclass("esri.widgets.Search.SearchSource")],a)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ../../../rest/support/FullTextSearch ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v,t){function k(x,C){const {filter:H,withinViewEnabled:O}=x;x=C?.extent;return H?.geometry??(O&&x?x:void 0)}async function d(x){x&&await x.load()}function A(x,C){return(x=x?.indexes)&&C?.length?x.filter(H=>"FullText"===H.indexType).some(H=>{const O=H.fields?.split(",").map(Q=>Q.trim().toLowerCase())||[];return C.every(Q=>O.includes(Q.toLowerCase()))}):!1}function D({text:x,searchFields:C}){return x.trim().split(" ").filter(H=>!!H.trim()).map(H=>new z({onFields:C,searchTerm:H,
searchType:"prefix"}))}function P(x){return x?.fieldsIndex?.fields?.find(C=>"string"===C.type)?.name??""}function y(x,C){return x&&C?.length?C.every(H=>!!x.getField(H)):!1}function K(x,C,H){let O=null;({codedValues:x}=x);x&&x.some(Q=>{var W=Q.name;W=H?W:W.toLowerCase();return(H?C:C.toLowerCase())===W?(O=Q.code.toString(),!0):!1});return O}function w(x,C){return(C=C?.where)?`(${x}) AND (${C})`:x}function X({currentTerm:x,field:C,filter:H,exactMatch:O,url:Q,type:W}){var E=C?.type;C=C?.name;if("string"===
E||"date"===E||"global-id"===E){if(E=Q=u.test(Q??""))a:{for(E=0;E<x.length;E++)if(255<x.charCodeAt(E)){E=!0;break a}E=!1}E=E?"N":"";if(O&&"search"===W)return w(`${C} = ${E}'${x}'`,H);if(Q)return w(`${C} LIKE ${E}${`'${x}%'`}`,H);O=`LOWER(${C})`;x=x.toLowerCase();return w(`${O} LIKE ${E}${`'${x}%'`}`,H)}return"oid"===E||"small-integer"===E||"integer"===E||"single"===E||"double"===E?(x=Number(x),isNaN(x)?null:w(`${C} = ${x}`,H)):w(`${C} = ${x}`,H)}function Y({searchTerm:x,layer:C,searchFields:H,filter:O,
exactMatch:Q,query:W,type:E}){const {definitionExpression:N,url:S}=C;let T="";!W.fullText&&x&&H&&H.forEach(U=>{var aa=C.getField(U);U=((U="function"===typeof C.getFieldDomain&&C.getFieldDomain(U))&&"coded-value"===U.type?K(U,x,Q):null)||x||null;null!==U&&(aa=X({currentTerm:U,field:aa,filter:O,exactMatch:Q,url:S,type:E}))&&(T+=T?` OR (${aa})`:`(${aa})`)});return N&&T?`(${N}) AND (${T})`:N||T}function G(x,C){let H=null;({codedValues:x}=x);x&&x.length&&x.some(O=>O.code===C?(H=O.name,!0):!1);return H}
function Z(x,C){return x[Object.keys(x).find(H=>H.toLowerCase()===C.toLowerCase())]}function ba(x,C,H){const O=x.sourceLayer,{attributes:Q}=x;x="function"===typeof O.getFieldDomain&&O.getFieldDomain(H);return C?v.substitute(C,Q):H&&Q?(C=O.getField(H),H=Z(Q,H),null==H?"":x&&"coded-value"===x.type?G(x,H)??"":"date"===C?.type?t.formatDate(new Date(H)):"number"===typeof H?H.toString():"string"!==typeof H?"":H.trim()):""}function e(x,C,H,O){return x.features.map(Q=>{var W=Q.sourceLayer,{attributes:E}=
Q;({objectIdField:W}=W);E=W?E[W]:null;return{text:ba(Q,C.suggestionTemplate,O),key:E,sourceIndex:H}})}function l(x,C,H,O,Q,W,E){return x.features.map(N=>{const S=N.clone();var T=N.sourceLayer?.objectIdField;T=T?N.attributes[T]:null;const U=ba(N,H.searchTemplate,Q);var aa=m.createExtentFromGeometry(S.geometry,C,W);aa="number"===typeof E?m.scaleExtent(n.clone(aa),C,E):aa;N=N.clone();F.isSome(aa)&&(N.geometry=q.fromExtent(aa));return{extent:aa,target:N,feature:S,key:T,name:U,sourceIndex:O}})}const u=
/https?:\/\/services.*\.arcgis\.com/i,I=/(?:\{([^}]+)\})/g,R=g.getLogger("esri.widgets.Search.support.layerSearchUtils");h.createFullTextSearchInfos=D;h.getResults=function(x,C){const {exactMatch:H=!1,location:O,maxResults:Q,spatialReference:W,source:E,sourceIndex:N,suggestResult:S,view:T}=x,{layer:U,filter:aa,zoomScale:L}=E,da=T?.scale,ea=k(E,T),b=C&&C.signal;return d(U).then(()=>{const f=U.popupTemplate;return f?f.getRequiredFields(U.fieldsIndex):null}).then(f=>{const {objectIdField:r,returnZ:B}=
U,J=E.displayField||E.layer.displayField||P(E.layer);if(!U.getField(J))throw R.error("invalid-field: displayField is invalid."),new a("getResults():invalid-field","displayField is invalid.");f=f&&f.length?f:[J];var M=E.outFields||f;f=M&&M.includes("*");M.includes(r)||f||M.push(r);U.floorInfo?.floorField&&M.push(U.floorInfo.floorField);if(!f&&!y(U,M))throw R.error("invalid-field: outField is invalid."),new a("getResults():invalid-field","outField is invalid.");f=U.createQuery();var {orderByFields:V}=
E;V&&(f.orderByFields=V);W&&(f.outSpatialReference=W,V=1/p.getMetersPerUnitForSR(W))&&(f.maxAllowableOffset=V);V="mesh"===U.geometryType||"multipatch"===U.geometryType;f.returnZ=U.capabilities?.data?.supportsZ&&!V&&!1!==B;f.returnGeometry=!0;f.multipatchOption=V?"xyFootprint":null;M&&(f.outFields=M);if(O)f.geometry=O;else if(S.key)f.objectIds=[S.key];else{M=E.searchFields||[J];if(!y(U,M))throw R.error("invalid-field: search field is invalid."),new a("getResults():invalid-field","search field is invalid.");
(U?.capabilities?.query?.supportsPagination??!1)&&(f.num=Q);ea&&(f.geometry=ea);if(!S.text?.trim())return[];V=S.text;const {prefix:ca="",suffix:fa=""}=E,ka=`${ca}${V}${fa}`.replace(/'/g,"''");(U?.capabilities?.query?.supportsFullTextSearch??!1)&&A(U,M)&&!H&&V&&(f.fullText=D({text:V,searchFields:M}));M=Y({searchTerm:ka,layer:U,searchFields:M,filter:aa,exactMatch:H,query:f,type:"search"});f.where=M;if(!f.fullText&&!f.where)return[]}return U.queryFeatures(f,{signal:b}).then(ca=>l(ca,T,E,N,J,da,L))})};
h.getSuggestions=function(x,C){const {source:H,spatialReference:O,view:Q,suggestTerm:W,maxSuggestions:E,sourceIndex:N,exactMatch:S}=x,{layer:T,filter:U}=H,aa=C&&C.signal,L=k(H,Q);return d(T).then(()=>{if(!(T?.capabilities?.query?.supportsPagination??!1))return[];const da=H.displayField||H.layer.displayField||P(H.layer);var ea=H.searchFields||[da];const b=[];H.suggestionTemplate?H.suggestionTemplate.replace(I,(V,ca)=>{b.push(ca);return V}):b.push(da);var f=b&&b.includes("*");b.includes(T.objectIdField)||
f||b.push(T.objectIdField);var r=!!T.getField(da);f=f||y(T,b);const B=y(T,ea);if(!r)throw R.error("invalid-field: displayField is invalid."),new a("getSuggestions():invalid-field","displayField is invalid.");if(!f)throw R.error("invalid-field: outField is invalid."),new a("getSuggestions():invalid-field","outField is invalid.");if(!B)throw R.error("invalid-field: search field is invalid."),new a("getSuggestions():invalid-field","search field is invalid.");r=T.createQuery();({orderByFields:f}=H);f&&
(r.orderByFields=f);r.outSpatialReference=O;r.returnGeometry=!1;r.num=E;r.outFields=b;L&&(r.geometry=L);if(!W.trim())return[];const {prefix:J="",suffix:M=""}=H;f=`${J}${W}${M}`.replace(/'/g,"''");(T?.capabilities?.query?.supportsFullTextSearch??!1)&&A(T,ea)&&!S&&W&&(r.fullText=D({text:W,searchFields:ea}));ea=Y({searchTerm:f,layer:T,searchFields:ea,filter:U,exactMatch:S,query:r,type:"suggest"});r.where=ea;return r.fullText||r.where?T.queryFeatures(r,{signal:aa}).then(V=>e(V,H,N,da)):[]})};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),function(h,c,a,n,g,F,p){function q(m,v,t){const k=m.hasZ?m.z:void 0;return v?.map?(null!=t?F.getExtentForScale(v,t):v.extent).clone().centerAt(m).set({zmax:k,zmin:k}):new p({xmin:m.x-.25,ymin:m.y-.25,xmax:m.x+.25,ymax:m.y+.25,spatialReference:m.spatialReference,
zmin:k,zmax:k})}const z=n.getLogger("esri.widgets.Search.support.geometryUtils");h.createExtentFromGeometry=function(m,v,t){if(g.isNone(m))return null;if("extent"===m.type)return m;if("multipoint"===m.type||"polygon"===m.type||"polyline"===m.type)return m.extent;if("point"===m.type)return q(m,v,t)};h.getPointFromGeometry=function(m){if(g.isNone(m))return null;switch(m.type){case "point":return m;case "extent":return m.center;case "polygon":return m.centroid;case "multipoint":return m.getPoint(0);
case "polyline":return m.getPoint(0,0)}return null};h.getPointWithElevation=function(m,v){if(!v)return z.error("missing-parameter: view is missing."),Promise.reject(new a("searchgeometryutils:missing-parameter","view is missing."));if(!m)return z.error("missing-parameter: point is missing."),Promise.reject(new a("searchgeometryutils:missing-parameter","point is missing."));if(m.hasZ||"2d"===v.type)return Promise.resolve(m);const t=v?.map?.ground;return t&&t.layers.length?t.queryElevation(m,{cache:v.basemapTerrain?.elevationQueryCache}).then(k=>
k.geometry):Promise.resolve(m)};h.scaleExtent=function(m,v,t){return g.isNone(m)||g.isNone(v)?null:q(m.center,v,t)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/locatorUtils".split(" "),
function(h,c,a,n,g,F,p,q){var z;g=z=function(m){function v(k){var d=t.call(this,k);d.apiKey=null;d.categories=null;d.countryCode=null;d.defaultZoomScale=null;d.localSearchDisabled=!1;d.locationType=null;d.name="";d.placeholder="";d.searchTemplate="";d.singleLineFieldName=null;d.suggestionsEnabled=null;d.url=null;d.zoomScale=null;d.getResults=(A,D)=>q.getResults({source:h._assertThisInitialized(d),...A},D);d.getSuggestions=(A,D)=>q.getSuggestions({source:h._assertThisInitialized(d),...A},D);return d}
h._inherits(v,m);var t=h._createSuper(v);v.prototype.clone=function(){return new z({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?a.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,
suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?a.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return h._createClass(v)}(p);c.__decorate([n.property()],g.prototype,"apiKey",void 0);c.__decorate([n.property()],g.prototype,"categories",void 0);c.__decorate([n.property()],
g.prototype,"countryCode",void 0);c.__decorate([n.property({json:{write:!0}})],g.prototype,"defaultZoomScale",void 0);c.__decorate([n.property()],g.prototype,"localSearchDisabled",void 0);c.__decorate([n.property()],g.prototype,"locationType",void 0);c.__decorate([n.property({json:{write:!0}})],g.prototype,"name",void 0);c.__decorate([n.property({json:{write:!0}})],g.prototype,"placeholder",void 0);c.__decorate([n.property()],g.prototype,"searchTemplate",void 0);c.__decorate([n.property({json:{write:!0}})],
g.prototype,"singleLineFieldName",void 0);c.__decorate([n.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],g.prototype,"suggestionsEnabled",void 0);c.__decorate([n.property({json:{write:!0}})],g.prototype,"url",void 0);c.__decorate([n.property({json:{write:!0}})],g.prototype,"zoomScale",void 0);return g=z=c.__decorate([F.subclass("esri.widgets.Search.LocatorSearchSource")],g)})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/locator/addressToLocations ../../../rest/locator/locationToAddress ../../../rest/locator/suggestLocations ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v){function t(y,K){if(K.localSearchDisabled)return null;K=y?.scale;return"number"===typeof K&&3E5>=K?y?.extent?.center:null}async function k(y,K){const {source:w,spatialReference:X,location:Y,sourceIndex:G,view:Z}=y,{apiKey:ba,url:e,zoomScale:l,defaultZoomScale:u}=w;if(null==e)return[];y=Z?.scale;K=K?.signal;const I=new z;I.location=Y;ba&&(I.apiKey=ba);X&&(I.outSpatialReference=X);try{const R=await F.locationToAddress(e,I,{signal:K});return P([R],{sourceIndex:G,scale:y,
view:Z,zoomScale:l,defaultZoomScale:u})}catch(R){return[]}}function d(y,K){const {filter:w,withinViewEnabled:X}=y;y=K&&K.extent;return(K=v.createExtentFromGeometry(w&&w.geometry,K,K&&K.scale))||(X&&y?y:void 0)}async function A(y,K){const {source:w,suggestResult:X,spatialReference:Y,view:G,maxResults:Z,sourceIndex:ba}=y,e=w&&w.zoomScale,l=w&&w.defaultZoomScale;if(!X.text?.trim())return null;y=`${!X.key&&w.prefix?w.prefix:""}${X.text}${!X.key&&w.suffix?w.suffix:""}`;const u=new q,{apiKey:I,url:R}=w,
x=G&&G.scale;var C=d(w,G);K=K&&K.signal;I&&(u.apiKey=I);if(!R)return null;w.categories&&(u.categories=w.categories);w.locationType&&(u.locationType=w.locationType);Y&&(u.outSpatialReference=Y);const H=t(G,w);H&&(u.location=H);u.maxLocations=Z;C&&(u.searchExtent=a.unwrap(C));w.countryCode&&(u.countryCode=w.countryCode);({key:C}=X);const O=`${C}`;C&&(u.magicKey=O);u.address={};u.address[w.singleLineFieldName||"Single Line Input"]=y;w.outFields&&(u.outFields=w.outFields);return g.addressToLocations(R,
u,{signal:K}).then(Q=>P(Q,{key:O,scale:x,sourceIndex:ba,view:G,zoomScale:e,defaultZoomScale:l}))}function D(y,K){return y.map(w=>({text:w.text,key:w.magicKey,sourceIndex:K}))}function P(y,K){return y.filter(Boolean).map(w=>{const {key:X,scale:Y,sourceIndex:G,view:Z,zoomScale:ba,defaultZoomScale:e}=K,{attributes:l,extent:u,location:I,address:R}=w;w=new c({geometry:I,attributes:l});var x=u||I,C=v.createExtentFromGeometry(x,Z,Y);x="number"===typeof ba?v.scaleExtent(C,Z,ba):"number"===typeof e&&"point"===
x?.type?v.scaleExtent(C,Z,e):C;C=I?`${I.x},${I.y}`:"";C=R||C;const H=w.clone();a.isSome(x)&&(H.geometry=n.fromExtent(x));return{extent:x,feature:w,target:H,key:X,name:C,sourceIndex:G}})}h.getLocation=t;h.getResults=function(y,K){return y.location?k(y,K):A(y,K)};h.getSuggestions=async function(y,K){const {source:w,spatialReference:X,view:Y,suggestTerm:G,maxSuggestions:Z,sourceIndex:ba}=y;y=new m;const {apiKey:e,url:l}=w,u=d(w,Y);K=K&&K.signal;if(!l)return null;e&&(y.apiKey=e);w.categories&&(y.categories=
w.categories);X&&(y.outSpatialReference=X);const I=t(Y,w);I&&(y.location=I);if(!G.trim())return null;const {prefix:R="",suffix:x=""}=w;y.text=`${R}${G}${x}`;u&&(y.searchExtent=a.unwrap(u));y.maxSuggestions=Z;w.countryCode&&(y.countryCode=w.countryCode);return p.suggestLocations(l,y,{signal:K}).then(C=>D(C,ba))};h.isArcGISWorldGeocoder=function(y){return y?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(y):!1};h.isMeteredArcGISWorldGeocoder=function(y){return y?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(y):
!1};h.isProxiedArcGISWorldGeocoder=function(y){return y?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(y):!1};h.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/locator/addressToLocations":function(){define("exports ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),function(h,c,a,n,g,F){function p({data:q}){if(!q)return[];
const {candidates:z,spatialReference:m}=q;return z?z.map(v=>{if(v){var {extent:t,location:k}=v,d=t?n.isValidExtent(t):!0;if(n.isValidLocation(k)&&d)return t&&(t.spatialReference=m),k&&(k.spatialReference=m),g.fromJSON(v)}}):[]}h.addressToLocations=async function(q,z,m){z=F.from(z);q=a.parseUrl(q);const {address:v,...t}=z.toJSON();z=a.encode({...q.query,...v,...t,f:"json"});m=a.asValidOptions(z,m);return c(`${q.path}/findAddressCandidates`,m).then(p)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/locator/utils":function(){define(["exports"],function(h){h.isValidExtent=function(c){return c&&"number"===typeof c.xmin&&"number"===typeof c.ymin&&"number"===typeof c.xmax&&"number"===typeof c.ymax};h.isValidLocation=function(c){return!!c&&"number"===typeof c.x&&"number"===typeof c.y};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),
function(h,c,a,n,g,F,p,q,z,m){a=function(v){function t(d){d=k.call(this,d);d.address=null;d.attributes=null;d.extent=null;d.location=null;d.score=null;return d}h._inherits(t,v);var k=h._createSuper(t);return h._createClass(t)}(a.JSONSupport);c.__decorate([n.property({type:String,json:{write:!0}})],a.prototype,"address",void 0);c.__decorate([n.property({type:Object,json:{write:!0}})],a.prototype,"attributes",void 0);c.__decorate([n.property({type:z,json:{write:!0}})],a.prototype,"extent",void 0);c.__decorate([n.property({type:m,
json:{write:!0}})],a.prototype,"location",void 0);c.__decorate([n.property({type:Number,json:{write:!0}})],a.prototype,"score",void 0);return a=c.__decorate([q.subclass("esri.rest.support.AddressCandidate")],a)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v,t,k){a=function(d){function A(P){P=D.call(this,P);P.address=null;P.apiKey=null;P.categories=null;P.countryCode=null;P.forStorage=null;P.location=null;P.locationType=null;P.magicKey=null;P.maxLocations=null;P.outFields=null;P.outSpatialReference=null;P.searchExtent=null;return P}h._inherits(A,d);var D=h._createSuper(A);return h._createClass(A)}(n.JSONSupport);c.__decorate([g.property({type:Object,json:{write:!0}})],a.prototype,"address",void 0);c.__decorate([g.property(m.apiKey)],
a.prototype,"apiKey",void 0);c.__decorate([g.property({type:[String],json:{read:{source:"category",reader:d=>d?d.split(","):null},write:{target:"category",writer:(d,A)=>{A.category=d?d.join(","):null}}}})],a.prototype,"categories",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"countryCode",void 0);c.__decorate([g.property({type:Boolean,json:{write:!0}})],a.prototype,"forStorage",void 0);c.__decorate([g.property({type:v,json:{write:{writer:(d,A)=>{A.location=d?d.clone().normalize():
null}}}})],a.prototype,"location",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"locationType",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"magicKey",void 0);c.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"maxLocations",void 0);c.__decorate([g.property({type:[String],json:{write:{writer:(d,A)=>{A.outFields=d?d.join(","):null}}}})],a.prototype,"outFields",void 0);c.__decorate([g.property({type:t,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);c.__decorate([g.property({type:k,json:{write:{writer:(d,A)=>{d=d?d.shiftCentralMeridian():null;A.searchExtent=d}}}})],a.prototype,"searchExtent",void 0);a=c.__decorate([z.subclass("esri.rest.support.AddressToLocationsParameters")],a);a.from=F.ensureType(a);return a})},"esri/rest/support/commonProperties":function(){define(["exports"],function(h){h.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/locator/locationToAddress":function(){define(["exports","../../request","../utils","../support/AddressCandidate","../support/LocationToAddressParameters"],function(h,c,a,n,g){function F({data:p}){if(p){var {address:q,location:z}=p;return n.fromJSON({address:q&&q.Match_addr||"",attributes:q||{},location:z,score:100})}}h.locationToAddress=async function(p,q,z){q=g.from(q);p=a.parseUrl(p);q={...q.toJSON(),f:"json"};q=a.encode({...p.query,...q});z=a.asValidOptions(q,
z);return c(`${p.path}/reverseGeocode`,z).then(F)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v,t){a=function(k){function d(D){D=A.call(this,D);D.apiKey=null;D.location=null;D.locationType=null;D.outSpatialReference=null;return D}h._inherits(d,k);var A=h._createSuper(d);return h._createClass(d)}(n.JSONSupport);c.__decorate([g.property(m.apiKey)],a.prototype,"apiKey",void 0);c.__decorate([g.property({type:v,json:{write:{writer:(k,d)=>{k=k?k.clone().normalize():null;d.location="undefined"!==typeof k?k:null}}}})],a.prototype,"location",void 0);c.__decorate([g.property({type:String,
json:{write:!0}})],a.prototype,"locationType",void 0);c.__decorate([g.property({type:t,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);a=c.__decorate([z.subclass("esri.rest.support.LocationToAddressParameters")],a);a.from=F.ensureType(a);return a})},"esri/rest/locator/suggestLocations":function(){define(["exports","../../request","../utils","../support/SuggestionCandidate","../support/SuggestLocationsParameters"],function(h,c,a,n,g){function F(p){({data:p}=
p);if(!p)return[];({suggestions:p}=p);return p?p.map(q=>new n(q)):[]}h.suggestLocations=async function(p,q,z){p=a.parseUrl(p);q=g.from(q);q={...q.toJSON(),f:"json"};q=a.encode({...p.query,...q});z=a.asValidOptions(q,z);return c(`${p.path}/suggest`,z).then(F)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,c,a,n,g,F,p,q){a=function(z){function m(t){t=v.call(this,t);t.isCollection=null;t.magicKey=null;t.text=null;return t}h._inherits(m,z);var v=h._createSuper(m);return h._createClass(m)}(a.JSONSupport);c.__decorate([n.property({type:Boolean,json:{write:!0}})],a.prototype,"isCollection",void 0);c.__decorate([n.property({type:String,json:{write:!0}})],a.prototype,"magicKey",void 0);c.__decorate([n.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);return a=c.__decorate([q.subclass("esri.rest.support.SuggestionCandidate")],
a)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(h,c,a,n,g,F,p,q,z,m,v,t,k){a=function(d){function A(P){P=
D.call(this,P);P.apiKey=null;P.categories=null;P.countryCode=null;P.location=null;P.maxSuggestions=null;P.outSpatialReference=null;P.searchExtent=null;P.text=null;return P}h._inherits(A,d);var D=h._createSuper(A);return h._createClass(A)}(n.JSONSupport);c.__decorate([g.property(m.apiKey)],a.prototype,"apiKey",void 0);c.__decorate([g.property({type:[String],json:{read:{source:"category",reader:d=>d?d.split(","):null},write:{target:"category",writer:(d,A)=>{A.category=d?d.join(","):null}}}})],a.prototype,
"categories",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"countryCode",void 0);c.__decorate([g.property({type:v,json:{write:{writer:(d,A)=>{A.location=d?d.clone().normalize():null}}}})],a.prototype,"location",void 0);c.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"maxSuggestions",void 0);c.__decorate([g.property({type:t,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);c.__decorate([g.property({type:k,
json:{write:{writer:(d,A)=>{d=d?d.shiftCentralMeridian():null;A.searchExtent=JSON.stringify(d)}}}})],a.prototype,"searchExtent",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);a=c.__decorate([z.subclass("esri.rest.support.SuggestLocationsParameters")],a);a.from=F.ensureType(a);return a})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../request ../../kernel ../../core/arrayUtils ../../core/urlUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/operations/generalize ../../rest/support/GeneralizeParameters ../../rest/operations/lengths ../../rest/support/LengthsParameters ../../rest/operations/offset ../../rest/support/OffsetParameters ../../rest/geometryService/project ../../rest/operations/relation ../../rest/support/RelationParameters ../../rest/operations/trimExtend ../../rest/support/TrimExtendParameters ../../rest/support/ProjectParameters".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v,t,k,d,A,D,P,y,K,w,X,Y,G,Z,ba,e,l,u,I,R,x){function C({longitude:E,latitude:N,altitude:S}){return new F({longitude:E,latitude:N,z:S||void 0,spatialReference:{wkid:4326}})}function H(E,N,S){if(!N)return Promise.resolve(E);const T=N.spatialReference;return T.isWGS84?Promise.resolve(E):T.isWebMercator?Promise.resolve(p.geographicToWebMercator(E)):O(S).then(U=>{if(!U)throw new a("geometry-service:missing-url","Geometry service URL is missing");const aa=new x({geometries:[E],
outSpatialReference:T});return e.project(U,aa,S).then(L=>L[0])})}function O(E){if(c.geometryServiceUrl)return Promise.resolve(c.geometryServiceUrl);const N=q.getDefault();return N.load(E).catch(()=>{}).then(()=>N.get("helperServices.geometry.url"))}const Q=g.getLogger("esri.widgets.support.geolocationUtils"),W={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};h.getCurrentPosition=function(E){E||(E=W);return new Promise((N,S)=>{setTimeout(()=>S(new a("geolocation:timeout","getting the current geolocation position timed out")),
15E3);navigator.geolocation.getCurrentPosition(N,S,E??void 0)})};h.positionToPoint=function(E,N){const {position:S,view:T}=E;E=S&&S.coords||{};E={accuracy:E.accuracy,altitude:E.altitude,altitudeAccuracy:E.altitudeAccuracy,heading:E.heading,latitude:E.latitude,longitude:E.longitude,speed:E.speed};E=(S?{coords:E,timestamp:S.timestamp}:S)?.coords;if(!E)throw new a("geometry-service:no-coords","Geolocation has no coordinates");E=C(E);return H(E,T,N)};h.supported=function(){var E=n("esri-geolocation");
E||Q.warn("geolocation-unsupported","Geolocation unsupported.");E&&((E=window.isSecureContext)||Q.warn("insecure-context","Geolocation requires a secure origin."));return E};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(h,c){c=new c.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});h.conversionTypeKebabDict=c;h.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,
UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,
UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,
UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",
UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/generalize":function(){define(["exports",
"../../core/jsonMap","../../geometry/support/jsonUtils"],function(h,c,a){const n=new c.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});h.generalizeToRESTParameters=function(g){const {geometries:F,deviationUnit:p,maxDeviation:q}=g.toJSON();g={maxDeviation:q};F&&F.length&&(g.geometries=JSON.stringify({geometryType:a.getJsonType(F[0]),geometries:F}),
g.sr=JSON.stringify(F[0].spatialReference));n.write(p,g,"deviationUnit");return g};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(h,c,a,n,g,F,p,q,z,m){a=function(v){function t(d){d=k.call(this,d);d.deviationUnit=null;d.geometries=null;d.maxDeviation=null;return d}h._inherits(t,v);var k=h._createSuper(t);return h._createClass(t)}(a.JSONSupport);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"deviationUnit",void 0);c.__decorate([g.property({json:{read:{reader:v=>v?v.map(t=>m.fromJSON(t)).filter(n.isSome):null},write:{writer:(v,t)=>{t.geometries=v?.map(k=>k.toJSON())??null}}}})],a.prototype,"geometries",
void 0);c.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"maxDeviation",void 0);a=c.__decorate([z.subclass("esri.rest.support.GeneralizeParameters")],a);a.from=F.ensureType(a);return a})},"esri/rest/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(h,c){const a=new c.JSONMap({preserveShape:"preserve-shape"});h.lengthsToRESTParameters=function(n){const {polylines:g,lengthUnit:F,geodesic:p,calculationType:q}=n.toJSON(),z={};z.polylines=JSON.stringify(g);
n=n.polylines[0].spatialReference;z.sr=n.wkid??JSON.stringify(n.toJSON());F&&(z.lengthUnit=F);p&&(z.geodesic=p);q&&(z.calculationType=a.toJSON(q));return z};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(h,c,a,n,g,F,p,q,z,m,v){a=function(t){function k(A){A=d.call(this,A);A.calculationType=null;A.geodesic=null;A.lengthUnit=null;A.polylines=null;return A}h._inherits(k,t);var d=h._createSuper(k);return h._createClass(k)}(n.JSONSupport);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"calculationType",void 0);c.__decorate([g.property({type:Boolean,json:{write:!0}})],a.prototype,"geodesic",void 0);c.__decorate([g.property({json:{write:!0}})],a.prototype,"lengthUnit",void 0);
c.__decorate([g.property({type:[v],json:{read:{reader:t=>t?t.map(k=>m.fromJSON(k)):null},write:{writer:(t,k)=>{k.polylines=t.map(d=>d.toJSON())}}}})],a.prototype,"polylines",void 0);a=c.__decorate([z.subclass("esri.rest.support.LengthsParameters")],a);a.from=F.ensureType(a);return a})},"esri/rest/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(h,c,a){const n=new c.JSONMap({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",
esriGeometryOffsetRounded:"rounded"}),g=new c.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});h.offsetToRESTParameters=function(F){const {geometries:p,bevelRatio:q,offsetDistance:z,offsetHow:m,offsetUnit:v}=F.toJSON();F={bevelRatio:q,offsetDistance:z};p&&p.length&&(F.geometries=JSON.stringify({geometryType:a.getJsonType(p[0]),geometries:p}),F.sr=JSON.stringify(p[0].spatialReference));m&&(F.offsetHow=n.toJSON(m));v&&(F.offsetUnit=g.toJSON(v));
return F};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(h,c,a,n,g,F,p,q,z,m){a=function(v){function t(d){d=
k.call(this,d);d.bevelRatio=null;d.geometries=null;d.offsetDistance=null;d.offsetHow=null;d.offsetUnit=null;return d}h._inherits(t,v);var k=h._createSuper(t);return h._createClass(t)}(a.JSONSupport);c.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"bevelRatio",void 0);c.__decorate([g.property({json:{read:{reader:v=>v?v.map(t=>m.fromJSON(t)).filter(n.isSome):null},write:{writer:(v,t)=>{t.geometries=v?.map(k=>k.toJSON())??null}}}})],a.prototype,"geometries",void 0);c.__decorate([g.property({type:Number,
json:{write:!0}})],a.prototype,"offsetDistance",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"offsetHow",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"offsetUnit",void 0);a=c.__decorate([z.subclass("esri.rest.support.OffsetParameters")],a);a.from=F.ensureType(a);return a})},"esri/rest/geometryService/project":function(){define("exports ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(h,c,a,n,g,F,p){const q=a.ensureType(p);h.project=async function(z,m,v){m=q(m);z=g.parseUrl(z);const t={...z.query,f:"json",...m.toJSON()},k=m.outSpatialReference,d=n.getJsonType(m.geometries[0]);m=g.asValidOptions(t,v);return c(z.path+"/project",m).then(({data:{geometries:A}})=>F.decodeGeometries(A,d,k))};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(h,c,a,n,g,F,p,q,z){a=function(m){function v(k){k=t.call(this,k);k.geometries=[];k.outSpatialReference=null;k.transformation=null;k.transformForward=null;return k}h._inherits(v,m);var t=h._createSuper(v);v.prototype.toJSON=function(){const k=this.geometries.map(D=>D.toJSON()),d=this.geometries[0],A={};A.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());A.inSR=d.spatialReference.wkid||JSON.stringify(d.spatialReference.toJSON());A.geometries=JSON.stringify({geometryType:z.getJsonType(d),
geometries:k});this.transformation&&(A.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(A.transformForward=this.transformForward);return A};return h._createClass(v)}(a.JSONSupport);c.__decorate([n.property()],a.prototype,"geometries",void 0);c.__decorate([n.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);c.__decorate([n.property()],a.prototype,"transformation",void 0);c.__decorate([n.property()],a.prototype,
"transformForward",void 0);return a=c.__decorate([q.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/rest/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(h,c,a){const n=new c.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",
esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});h.relationToRESTParameters=function(g){const {geometries1:F,geometries2:p,relation:q,relationParameter:z}=g.toJSON();g={};if(F&&F.length){g.geometries1=JSON.stringify({geometryType:a.getJsonType(F[0]),geometries:F});const m=F[0].spatialReference;g.sr=m.wkid??JSON.stringify(m)}p&&
0<p.length&&(g.geometries2=JSON.stringify({geometryType:a.getJsonType(p[0]),geometries:p}));q&&(g.relation=n.toJSON(q));z&&(g.relationParam=z);return g};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(h,c,a,n,g,F,p,q,z,m){a=function(v){function t(d){d=k.call(this,d);d.geometries1=null;d.geometries2=null;d.relation=null;d.relationParameter=null;return d}h._inherits(t,v);var k=h._createSuper(t);return h._createClass(t)}(a.JSONSupport);c.__decorate([g.property({json:{read:{reader:v=>v?v.map(t=>m.fromJSON(t)).filter(n.isSome):null},write:{writer:(v,t)=>{t.geometries1=v?.map(k=>k.toJSON())??null}}}})],a.prototype,"geometries1",void 0);c.__decorate([g.property({json:{read:{reader:v=>v?v.map(t=>
m.fromJSON(t)).filter(n.isSome):null},write:{writer:(v,t)=>{t.geometries2=v?.map(k=>k.toJSON())??null}}}})],a.prototype,"geometries2",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"relation",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"relationParameter",void 0);a=c.__decorate([z.subclass("esri.rest.support.RelationParameters")],a);a.from=F.ensureType(a);return a})},"esri/rest/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],
function(h,c){const a=new c.JSONMap({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});h.trimExtendToRESTParameters=function(n){const {extendHow:g,polylines:F,trimExtendTo:p}=n.toJSON();n={};n.extendHow=a.toJSON(g);F&&F.length&&(n.polylines=JSON.stringify(F),n.sr=JSON.stringify(F[0].spatialReference));p&&(n.trimExtendTo=JSON.stringify(p));return n};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),function(h,c,a,n,g,F,p,q,z,m,v){a=function(t){function k(A){A=d.call(this,A);A.extendHow="default-curve-extension";
A.polylines=null;A.trimExtendTo=null;return A}h._inherits(k,t);var d=h._createSuper(k);return h._createClass(k)}(n.JSONSupport);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"extendHow",void 0);c.__decorate([g.property({type:[v],json:{read:{reader:t=>t?t.map(k=>m.fromJSON(k)):null},write:{writer:(t,k)=>{k.polylines=t.map(d=>d.toJSON())}}}})],a.prototype,"polylines",void 0);c.__decorate([g.property({json:{read:{reader:t=>t?m.fromJSON(t):null},write:{writer:(t,k)=>{k.trimExtendTo=
t.toJSON()}}}})],a.prototype,"trimExtendTo",void 0);a=c.__decorate([z.subclass("esri.rest.support.TrimExtendParameters")],a);a.from=F.ensureType(a);return a})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(h,c,a,n,g,F,p,q,z){h.GoToMixin=
m=>{m=function(v){function t(...d){d=k.call(this,...d);d.goToOverride=null;d.view=null;return d}c._inherits(t,v);var k=c._createSuper(t);t.prototype.callGoTo=function(d){const {view:A}=this;n.assertIsSome(A);return this.goToOverride?this.goToOverride(A,d):A.goTo(d.target,d.options)};return c._createClass(t)}(m);a.__decorate([g.property()],m.prototype,"goToOverride",void 0);a.__decorate([g.property()],m.prototype,"view",void 0);return m=a.__decorate([z.subclass("esri.widgets.support.GoTo")],m)};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/maybe ../core/reactiveUtils ../core/string ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Search/css ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(h,
c,a,n,g,F,p,q,z,m,v,t,k,d,A,D,P,y,K,w,X){const Y=/<[a-z/][\s\S]*>/i;a=function(G){function Z(e,l){var u=ba.call(this,e,l);u._activeMenuItemIndex=-1;u._inputNode=null;u._menuItemCount=0;u._sourceMenuButtonNode=null;u._sourceListNode=null;u._suggestionListNode=null;u._searchResultRenderer=new A;u._suggestController=null;u._searchController=null;u._locateFailed=!1;u._container=null;u.activeMenu="none";u.disabled=!1;u.iconClass=d.CSS.widgetIcon;u.messages=null;u.messagesCommon=null;u.viewModel=new D;
u._clearActiveMenu=()=>{u.activeMenu="none"};u._removeActiveMenu=I=>{(I=I.relatedTarget)&&u._container?.contains(I)||u._clearActiveMenu()};u.addHandles([F.watch(()=>u.searchTerm,I=>{(I&&"warning"===u.activeMenu||!I&&!u.get("viewModel.selectedSuggestion.location"))&&u._clearActiveMenu()}),F.on(()=>u.viewModel?.allSources,"change",()=>u._watchSourceChanges()),F.watch(()=>u.activeMenu,()=>u._resetActiveMenuItemIndex(),F.initial),F.watch(()=>u.viewModel?.defaultPopupTemplate,I=>{I&&(I.content=u._renderSearchResultsContent.bind(h._assertThisInitialized(u)))},
F.initial)]);return u}h._inherits(Z,G);var ba=h._createSuper(Z);G=Z.prototype;G.destroy=function(){this.removeAllHandles();this._cancelSuggest();this._cancelSearch();this._searchResultRenderer=g.destroyMaybe(this._searchResultRenderer)};G.clear=function(){this.viewModel.clear()};G.focus=function(){this._inputNode?.focus();this.emit("search-focus")};G.blur=function(){this._inputNode?.blur();this.emit("search-blur")};G.search=async function(e){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();
const l=new AbortController,{signal:u}=l;this._searchController=l;let I=null;try{I=await this.viewModel.search(e,{signal:u});if(this._searchController!==l)return;this._clearActiveMenu();this._searchController=null}catch(R){if(this._searchController!==l)return;this._clearActiveMenu();this._searchController=null}if(this._searchController===l)return this.activeMenu=I?.numResults?"none":"warning",this._searchController=null,I};G.suggest=async function(e){this._cancelSuggest();const l=new AbortController,
{signal:u}=l;this._suggestController=l;try{const I=await this.viewModel.suggest(e,null,{signal:u});if(this._suggestController===l)return this._suggestController=null,I?.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),I}catch(I){return this._suggestController!==l?null:this._suggestController=null}};G.render=function(){const {state:e}=this.viewModel;return w.tsx("div",{class:this.classes(d.CSS.base,{[d.CSS.disabled]:"disabled"===e,[d.CSS.esriWidgetDisabled]:this.disabled})},"loading"===
e?this.renderLoader():this.renderContainer())};G.renderSubmitButton=function(){const {messages:e,disabled:l}=this;return w.tsx("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:l,class:this.classes(d.CSS.submitButton,d.CSS.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},w.tsx("span",{"aria-hidden":"true",class:d.CSS.searchIcon}))};G.renderWarningMenu=function(){return w.tsx("div",{key:"esri-search__error-menu",class:this.classes(d.CSS.menu,
d.CSS.warningMenu)},w.tsx("div",{class:d.CSS.warningMenuBody},this.renderWarning()))};G.renderSourceMenuButton=function(){const {messages:e,activeMenu:l,sourceMenuId:u,sourceMenuButtonId:I,disabled:R}=this,{activeSourceIndex:x,allSources:C}=this.viewModel;return 1<C.length?w.tsx("button",{id:I,key:"esri-search__source-menu-button",bind:this,disabled:R,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===l).toString(),"aria-controls":u,class:this.classes(d.CSS.sourcesButton,
d.CSS.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:P.storeNode,"data-node-ref":"_sourceMenuButtonNode",type:"button"},w.tsx("span",{"aria-hidden":"true",class:d.CSS.dropdownIcon}),w.tsx("span",{"aria-hidden":"true",class:d.CSS.dropupIcon}),w.tsx("span",{class:d.CSS.sourceName},this._getSourceName(x))):null};G.renderSourcesList=function(){const {allSources:e,searchAllEnabled:l}=this.viewModel,{_activeMenuItemIndex:u,activeMenu:I,sourceMenuId:R,
sourceMenuButtonId:x}=this,C="source"===I&&-1<u?this._buildId("source-item",u):null;return 1<e.length?w.tsx("ul",{"aria-activedescendant":C,"aria-labelledby":x,id:R,role:"menu",bind:this,afterCreate:P.storeNode,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:d.CSS.menuList,tabIndex:-1},l?this.renderSource(D.ALL_INDEX):null,e.map((H,O)=>this.renderSource(O)).toArray()):null};G.renderSourcesMenu=function(){const {allSources:e}=this.viewModel;
return 1<e.length?w.tsx("div",{key:"esri-search__source-menu",class:this.classes(d.CSS.menu,d.CSS.sourcesMenu)},this.renderSourcesList()):null};G.renderLoader=function(){const {messages:e,messagesCommon:l,disabled:u}=this;return w.tsx("div",{class:d.CSS.loader,key:"base-loader",tabIndex:u?-1:void 0},w.tsx("span",{"aria-hidden":"true",class:d.CSS.loaderAnimation}),w.tsx("span",{class:d.CSS.fallbackText},e.searchButtonTitle),w.tsx("span",{class:d.CSS.loaderText},l.loading))};G.renderContainer=function(){const {allSources:e,
state:l}=this.viewModel,{activeMenu:u}=this;return w.tsx("div",{tabIndex:-1,afterCreate:I=>{this._container=I;I.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:I=>{I.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({[d.CSS.hasMultipleSources]:1<e.length,[d.CSS.isLoading]:"loading"===l,[d.CSS.isSearching]:"searching"===l,[d.CSS.showWarning]:"warning"===u,[d.CSS.showSources]:"source"===u,[d.CSS.showSuggestions]:"suggestion"===u},d.CSS.container),key:"base-container"},
this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};G.renderClearButton=function(){return this.searchTerm?w.tsx("button",{bind:this,disabled:this.disabled,class:this.classes(d.CSS.clearButton,d.CSS.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},w.tsx("span",{"aria-hidden":"true",class:d.CSS.clearIcon})):
null};G.renderLocationGroup=function(){const {messages:e,locationEnabled:l,displayedSearchTerm:u}=this,I="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return l&&!u?w.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(d.CSS.menuList,d.CSS.suggestionList,d.CSS.suggestionListCurrentLocation)},w.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===
this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(d.CSS.menuItem,I?d.CSS.menuItemFocus:null)},w.tsx("span",{"aria-hidden":"true",class:d.CSS.locate})," ",e.useCurrentLocation)):null};G.renderInput=function(){const {activeMenu:e,locationEnabled:l,displayedSearchTerm:u,messages:I,suggestionsMenuId:R,inputId:x,_activeMenuItemIndex:C,disabled:H}=this,{maxInputLength:O,placeholder:Q,searchTerm:W,suggestionCount:E}=this.viewModel,N=!!(l&&!u||E),S="suggestion"===
e&&-1<C?this._buildId("suggestion-item",C):null;return w.tsx("input",{"aria-activedescendant":S,"aria-autocomplete":"list","aria-expanded":(N&&"suggestion"===e).toString(),"aria-controls":N?R:null,"aria-haspopup":"listbox","aria-label":I.searchButtonTitle,bind:this,disabled:H,placeholder:Q,maxlength:O,autocomplete:"off",type:"text",class:this.classes(d.CSS.esriInput,d.CSS.input),value:W,id:x,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,
onpaste:this._handleInputPaste,afterCreate:P.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:W?"":Q})};G.renderForm=function(){return w.tsx("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:d.CSS.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())};G.renderSuggestList=function(e){const {sourceIndex:l}=e;({results:e}=e);return e?.length?w.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${l}`,class:this.classes(d.CSS.menuList,
d.CSS.suggestionList)},e?.map(u=>this.renderSuggestion(u,this._menuItemCount++))):null};G.renderSuggestionsGroup=function(){const {suggestions:e}=this.viewModel;return e?e.map(l=>[this.renderSuggestionHeader(l),this.renderSuggestList(l)]):[]};G.renderSuggestionsMenu=function(){const {displayedSearchTerm:e,locationEnabled:l,suggestionsMenuId:u,inputId:I}=this,{suggestionCount:R}=this.viewModel;this._menuItemCount=0;return l&&!e||R?w.tsx("div",{id:u,key:"esri-search__suggestions-menu",class:this.classes(d.CSS.menu,
d.CSS.suggestionsMenu),role:"listbox","aria-labelledby":I,bind:this,afterCreate:P.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};G.renderInputContainer=function(){return w.tsx("div",{key:"esri-search__input-container",class:d.CSS.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};G.renderSuggestionHeader=function(e){const {allSources:l,activeSourceIndex:u}=this.viewModel,{sourceIndex:I}=e,R=1<
l.length&&u===D.ALL_INDEX;return e.results?.length&&R?w.tsx("div",{key:`esri-search__suggestion-header-${I}`,class:d.CSS.menuHeader},this._getSourceName(I)):null};G.renderSuggestion=function(e,l){const {_activeMenuItemIndex:u,messages:I}=this;var {searchTerm:R}=this.viewModel;if(R){var {text:x}=e;x=x||I.untitledResult;const C=[];if(Y.test(x))C.push(w.tsx("div",{innerHTML:x}));else{x=this._splitResult(x,R);const H=R.toLowerCase();x.forEach((O,Q)=>{O&&O.length&&(O.toLowerCase()===H?C.push(w.tsx("strong",
{key:Q},O)):C.push(O))})}R="suggestion"===this.activeMenu&&u===l;return w.tsx("li",{bind:this,id:this._buildId("suggestion-item",l),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===l).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${l}`,"data-suggestion":e,role:"option",class:this.classes(d.CSS.menuItem,R?d.CSS.menuItemFocus:null)},C)}};G.renderSource=function(e){const {activeSourceIndex:l,searchAllEnabled:u}=this.viewModel,I={[d.CSS.menuItemActive]:e===
l,[d.CSS.menuItemFocus]:"source"===this.activeMenu&&e===(u?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return w.tsx("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",u?e+1:e),"aria-checked":(e===l).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(d.CSS.source,d.CSS.menuItem,I)},this._getSourceName(e))};G.renderNoResultsWarning=function(e){const {messages:l}=this;e=e?X.substitute(l.noResultsFoundForValue,
{value:`"${e}"`}):l.noResultsFound;return w.tsx("div",{key:"esri-search__no_results"},w.tsx("div",{class:d.CSS.warningMenuHeader},l.noResults),w.tsx("div",{class:d.CSS.warningMenuText},e))};G.renderEmptySearchWarning=function(){const {messages:e}=this;return w.tsx("div",{key:"esri-search__empty-search"},w.tsx("span",{"aria-hidden":"true",class:d.CSS.noticeIcon}),w.tsx("span",{class:d.CSS.noValueText},e.emptyValue))};G.renderLocateWarning=function(){const {messages:e}=this;return w.tsx("div",{key:"esri-search__locate-error"},
w.tsx("span",{"aria-hidden":"true",class:d.CSS.noticeIcon}),w.tsx("span",{class:d.CSS.noValueText},e.locateError))};G.renderWarning=function(){const {displayedSearchTerm:e,_locateFailed:l}=this,{viewModel:u}=this;return l?this.renderLocateWarning():u.selectedSuggestion?.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()};G._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};G._buildId=function(e,l){return`${this.id}-${e}${void 0===l?"":`-${l}`}`};G._watchSourceChanges=
function(){const {viewModel:{allSources:e}}=this;this.removeHandles("sources");e.forEach(l=>this.addHandles(F.watch(()=>l.name,()=>this.scheduleRender()),"sources"))};G._handleSourcesMenuToggleFocus=function(){"source"!==this.activeMenu&&this._clearActiveMenu()};G._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();"source"===this.activeMenu&&this._sourceListNode?.focus()};G._handleClearButtonClick=function(){this.viewModel.clear();
this._focus()};G._handleSearchButtonClick=function(){this.search()};G._handleSuggestionClick=function(e){if(e=e.currentTarget["data-suggestion"])this._focus(),this.search(e)};G._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};G._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const e=new AbortController,{signal:l}=e;this._searchController=e;(async()=>{try{this.activeMenu=(await this.viewModel.searchNearby({signal:l}))?.numResults?"none":
"warning"}catch(u){this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()};G._handleSourceClick=function(e){this._setSourceFromMenuItem(e.currentTarget)};G._setSourceFromMenuItem=function(e){e&&(this.viewModel.activeSourceIndex=e["data-source-index"],this._clearActiveMenu(),this._sourceMenuButtonNode?.focus())};G._cancelSuggest=function(){this._suggestController=g.abortMaybe(this._suggestController)};G._cancelSearch=function(){this._searchController=g.abortMaybe(this._searchController);
this._locateFailed=!1};G._handleInputKeyup=function(e){var l=n.eventKey(e);if(!e.ctrlKey&&!e.metaKey&&"Copy"!==l&&"ArrowLeft"!==l&&"ArrowRight"!==l&&"Shift"!==l)if("Tab"===l||"Escape"===l||e.shiftKey&&"Tab"===l)this._cancelSuggest(),"Escape"===l&&this._clearActiveMenu();else{var u="Home"===l||"End"===l||"ArrowUp"===l||"ArrowDown"===l;if("Enter"===l&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var I=this._suggestionListNode?.getElementsByTagName("li");if(I?.length){"suggestion"!==this.activeMenu&&
this._openSuggestionMenu();if(u){e.preventDefault();this._cancelSuggest();this._handleItemNavigation(l,I,this._suggestionListNode);return}e=I[this._activeMenuItemIndex];if("Enter"===l&&e){(l=e["data-suggestion"])?(this._focus(),this.search(l)):e["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};G._handleItemNavigation=function(e,l,u){const I=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0);"End"===e&&(this._activeMenuItemIndex=
l.length-1);"ArrowUp"===e&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?l.length-1:this._activeMenuItemIndex-1);"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===l.length-1?0:this._activeMenuItemIndex+1);I!==this._activeMenuItemIndex&&u&&P.keepMenuItemWithinView(l[this._activeMenuItemIndex],u)};G._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};G._openSuggestionMenu=function(){this.activeMenu="suggestion"};G._handleInputPaste=
function(e){e=e.target;this.viewModel.searchTerm!==e.value&&(this.viewModel.searchTerm=e.value);this.viewModel.searchTerm&&this.suggest()};G._handleSourceMenuKeydown=function(e){const l=n.eventKey(e);P.isActivationKey(l)?(e.preventDefault(),e=this._sourceListNode?.getElementsByTagName("li")?.[this._activeMenuItemIndex],this._setSourceFromMenuItem(e)):"ArrowUp"!==l&&"ArrowDown"!==l&&"End"!==l&&"Home"!==l||e.preventDefault()};G._handleSourceMenuKeyup=function(e){const l=n.eventKey(e),u="ArrowUp"===
l||"ArrowDown"===l||"End"===l||"Home"===l;u&&e.preventDefault();"Escape"===l?(this._clearActiveMenu(),this._sourceMenuButtonNode?.focus()):(e=this._sourceListNode?.getElementsByTagName("li"))&&0!==e.length&&u&&("source"!==this.activeMenu&&(this.activeMenu="source"),this._handleItemNavigation(l,e,this._sourceListNode?.parentElement))};G._focus=function(e){this.focus();e&&(this.activeMenu=e)};G._formSubmit=function(e){e.preventDefault();-1===this._activeMenuItemIndex&&this.search()};G._getSourceName=
function(e){const {messages:l}=this;var {allSources:u}=this.viewModel;u=u.getItemAt(e);return e===D.ALL_INDEX?l.all:u?u.name||l.untitledSource:l.untitledSource};G._splitResult=function(e,l){l=p.escapeRegExpString(l);return e.replace(new RegExp(`(^|)(${l})(|$)`,"ig"),"$1|$2|$3").split("|")};G._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};h._createClass(Z,[{key:"displayedSearchTerm",
get:function(){return`${this.viewModel.searchTerm}`.trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}},{key:"activeSource",get:function(){return this.viewModel?.activeSource}},{key:"activeSourceIndex",get:function(){return this.viewModel.activeSourceIndex},
set:function(e){this.viewModel.activeSourceIndex=e}},{key:"allPlaceholder",get:function(){return this.viewModel.allPlaceholder},set:function(e){this.viewModel.allPlaceholder=e}},{key:"allSources",get:function(){return this.viewModel.allSources}},{key:"autoNavigate",get:function(){return this.viewModel.autoNavigate},set:function(e){this.viewModel.autoNavigate=e}},{key:"autoSelect",get:function(){return this.viewModel.autoSelect},set:function(e){this.viewModel.autoSelect=e}},{key:"defaultSources",get:function(){return this.viewModel.defaultSources}},
{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(e){this.viewModel.goToOverride=e}},{key:"includeDefaultSources",get:function(){return this.viewModel.includeDefaultSources},set:function(e){this.viewModel.includeDefaultSources=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"locationEnabled",get:function(){return this.viewModel.locationEnabled},set:function(e){this.viewModel.locationEnabled=
e}},{key:"maxResults",get:function(){return this.viewModel.maxResults},set:function(e){this.viewModel.maxResults=e}},{key:"maxSuggestions",get:function(){return this.viewModel.maxSuggestions},set:function(e){this.viewModel.maxSuggestions=e}},{key:"minSuggestCharacters",get:function(){return this.viewModel.minSuggestCharacters},set:function(e){this.viewModel.minSuggestCharacters=e}},{key:"popupEnabled",get:function(){return this.viewModel.popupEnabled},set:function(e){this.viewModel.popupEnabled=e}},
{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(e){this.viewModel.popupTemplate=e}},{key:"portal",get:function(){return this.viewModel?.portal},set:function(e){this.viewModel&&(this.viewModel.portal=e)}},{key:"resultGraphic",get:function(){return this.viewModel.resultGraphic},set:function(e){this.viewModel.resultGraphic=e}},{key:"resultGraphicEnabled",get:function(){return this.viewModel.resultGraphicEnabled},set:function(e){this.viewModel.resultGraphicEnabled=
e}},{key:"results",get:function(){return this.viewModel.results}},{key:"searchAllEnabled",get:function(){return this.viewModel.searchAllEnabled},set:function(e){this.viewModel.searchAllEnabled=e}},{key:"searchTerm",get:function(){return this.viewModel.searchTerm},set:function(e){this.viewModel.searchTerm=e}},{key:"selectedResult",get:function(){return this.viewModel.selectedResult}},{key:"sources",get:function(){return this.viewModel.sources},set:function(e){this.viewModel.sources=e}},{key:"suggestions",
get:function(){return this.viewModel.suggestions}},{key:"suggestionsEnabled",get:function(){return this.viewModel.suggestionsEnabled},set:function(e){this.viewModel.suggestionsEnabled=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}}]);return Z}(k);c.__decorate([q.property()],a.prototype,"_activeMenuItemIndex",void 0);c.__decorate([q.property()],a.prototype,"displayedSearchTerm",null);c.__decorate([q.property({readOnly:!0})],a.prototype,"inputId",null);
c.__decorate([q.property({readOnly:!0})],a.prototype,"suggestionsMenuId",null);c.__decorate([q.property({readOnly:!0})],a.prototype,"sourceMenuId",null);c.__decorate([q.property({readOnly:!0})],a.prototype,"sourceMenuButtonId",null);c.__decorate([q.property()],a.prototype,"activeMenu",void 0);c.__decorate([q.property({readOnly:!0})],a.prototype,"activeSource",null);c.__decorate([q.property()],a.prototype,"activeSourceIndex",null);c.__decorate([q.property()],a.prototype,"allPlaceholder",null);c.__decorate([q.property({readOnly:!0})],
a.prototype,"allSources",null);c.__decorate([q.property()],a.prototype,"autoNavigate",null);c.__decorate([q.property()],a.prototype,"autoSelect",null);c.__decorate([q.property({readOnly:!0})],a.prototype,"defaultSources",null);c.__decorate([q.property()],a.prototype,"disabled",void 0);c.__decorate([q.property()],a.prototype,"goToOverride",null);c.__decorate([q.property()],a.prototype,"iconClass",void 0);c.__decorate([q.property()],a.prototype,"includeDefaultSources",null);c.__decorate([q.property()],
a.prototype,"label",null);c.__decorate([q.property()],a.prototype,"locationEnabled",null);c.__decorate([q.property()],a.prototype,"maxResults",null);c.__decorate([q.property()],a.prototype,"maxSuggestions",null);c.__decorate([q.property(),y.messageBundle("esri/widgets/Search/t9n/Search")],a.prototype,"messages",void 0);c.__decorate([q.property(),y.messageBundle("esri/t9n/common")],a.prototype,"messagesCommon",void 0);c.__decorate([q.property()],a.prototype,"minSuggestCharacters",null);c.__decorate([q.property()],
a.prototype,"popupEnabled",null);c.__decorate([q.property()],a.prototype,"popupTemplate",null);c.__decorate([q.property()],a.prototype,"portal",null);c.__decorate([q.property()],a.prototype,"resultGraphic",null);c.__decorate([q.property()],a.prototype,"resultGraphicEnabled",null);c.__decorate([q.property({readOnly:!0})],a.prototype,"results",null);c.__decorate([q.property()],a.prototype,"searchAllEnabled",null);c.__decorate([q.property()],a.prototype,"searchTerm",null);c.__decorate([q.property({readOnly:!0})],
a.prototype,"selectedResult",null);c.__decorate([q.property()],a.prototype,"sources",null);c.__decorate([q.property({readOnly:!0})],a.prototype,"suggestions",null);c.__decorate([q.property()],a.prototype,"suggestionsEnabled",null);c.__decorate([q.property()],a.prototype,"view",null);c.__decorate([K.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),q.property({type:D})],a.prototype,"viewModel",void 0);return a=c.__decorate([t.subclass("esri.widgets.Search")],
a)});