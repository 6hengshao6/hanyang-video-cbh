// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Widget ../support/LayerTreeNode ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(m,h,n,k,f,x,y,r,t,u,q,g){var p;const v={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",
showSublayer:"showSublayer"},d={base:"esri-building-disciplines-tree-node",root:"esri-building-disciplines-tree-node--root",leaf:"esri-building-disciplines-tree-node--leaf",label:"esri-building-disciplines-tree-node__label",checkbox:"esri-building-disciplines-tree-node__checkbox",checkboxChecked:"esri-building-disciplines-tree-node__checkbox--checked esri-icon-check-mark",checkboxIndeterminate:"esri-building-disciplines-tree-node__checkbox--indeterminate esri-icon-minus",collapseToggle:"esri-building-disciplines-tree-node__collapse-toggle esri-icon-right",
collapseToggleCollapsed:"esri-building-disciplines-tree-node__collapse-toggle--collapsed",children:"esri-building-disciplines-tree-node__children",level:c=>`${"esri-building-disciplines-tree-node"}--level-${c}`};f=p=function(c){function l(a){var b=w.call(this,a);b.messages=v;b.toggleSiblingsVisibility=!1;b._childWidgets=[];b._updateChildWidgets=()=>{b._destroyChildWidgets();b._childWidgets=b.node.children.toArray().reverse().map(e=>new p({node:e,messages:b.messages,toggleSiblingsVisibility:b.toggleSiblingsVisibility}))};
return b}m._inherits(l,c);var w=m._createSuper(l);c=l.prototype;c.initialize=function(){this.addHandles([n.on(()=>this.node.children,"after-changes",this._updateChildWidgets,{onListenerAdd:this._updateChildWidgets,onListenerRemove:this._updateChildWidgets}),n.watch(()=>[this.messages,this.toggleSiblingsVisibility],this._updateChildWidgets,n.initial)])};c.destroy=function(){this._destroyChildWidgets()};c.render=function(){const a=this.node,b=a.isRoot,e=a.isLeaf;return a.isDiscipline&&e?g.tsx("div",
{key:`${a.id}-empty`}):g.tsx("div",{key:a.id,class:this.classes(d.base,d.level(a.level),{[d.root]:b,[d.leaf]:e}),bind:this,onkeydown:this._onKeydown,tabIndex:e?void 0:0,role:"treeitem","aria-expanded":a.collapsed?"false":"true"},g.tsx("label",{bind:this,class:d.label,onclick:this._onCheckboxToggle},this._renderCollapseToggle(),this._renderCheckbox(),g.tsx("span",null,a.title)),this._renderChildren(a))};c._renderCheckbox=function(){const a=this.node.visible,b=!0===a,e=b?this.messages?.hideSublayer:
this.messages?.showSublayer;return g.tsx("button",{bind:this,class:this.classes(d.checkbox,{[d.checkboxChecked]:b,[d.checkboxIndeterminate]:null===a}),onclick:this._onCheckboxToggle,role:"checkbox","aria-checked":b?"true":"false","aria-label":e,title:e,type:"button"})};c._renderCollapseToggle=function(){if(!this.node.hasChildren)return null;const a=this.node.collapsed,b=a?this.messages?.expand:this.messages?.collapse;return g.tsx("div",{bind:this,class:this.classes(d.collapseToggle,{[d.collapseToggleCollapsed]:a}),
onclick:this._onCollapseToggle,"aria-label":b,title:b})};c._renderChildren=function(a){return!a.hasChildren||a.collapsed?null:g.tsx("div",{class:d.children},this._childWidgets.map(b=>b.render()))};c._onKeydown=function(a){switch(a.key){case "Space":case "Enter":if(!a.target.classList.contains(d.base))break;a.stopPropagation();this.node.toggleVisibility();break;case "ArrowLeft":a.stopPropagation();this.node.toggleCollapsed(!q.isRTL(this.container));break;case "ArrowRight":a.stopPropagation(),this.node.toggleCollapsed(q.isRTL(this.container))}};
c._onCheckboxToggle=function(a){a.preventDefault();a.stopPropagation();(a.metaKey||a.ctrlKey)&&this.toggleSiblingsVisibility?this.node.toggleAllSiblingsVisibility():this.node.toggleVisibility()};c._onCollapseToggle=function(a){a.preventDefault();a.stopPropagation();this.node.toggleCollapsed()};c._destroyChildWidgets=function(){this._childWidgets.forEach(a=>a.destroy());this._childWidgets=[]};return m._createClass(l)}(t);h.__decorate([k.property({type:u.LayerTreeNode})],f.prototype,"node",void 0);
h.__decorate([k.property()],f.prototype,"messages",void 0);h.__decorate([k.property({nonNullable:!0})],f.prototype,"toggleSiblingsVisibility",void 0);h.__decorate([k.property()],f.prototype,"_childWidgets",void 0);return f=p=h.__decorate([r.subclass("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesNode")],f)});