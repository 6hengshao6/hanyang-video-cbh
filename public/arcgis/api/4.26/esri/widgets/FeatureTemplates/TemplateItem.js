// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),function(k,l,f,u,e,v,q,r,g,A,B,C,w,x){async function y(b,c){var {renderer:d}=b;return d&&(c=new u({attributes:c.prototype.attributes}),
d=await d.getSymbolAsync(c))?d:z(b)}async function z(b){({geometryType:b}=b);return(b="point"===b||"multipoint"===b?await new Promise((c,d)=>k(["../../symbols/SimpleMarkerSymbol"],a=>c(m(a)),d)):"polyline"===b?await new Promise((c,d)=>k(["../../symbols/SimpleLineSymbol"],a=>c(m(a)),d)):"polygon"===b||"mesh"===b||"multipatch"===b?await new Promise((c,d)=>k(["../../symbols/SimpleFillSymbol"],a=>c(m(a)),d)):null)?new b.default:null}const m=b=>Object.freeze(Object.defineProperty({__proto__:null,default:b},
Symbol.toStringTag,{value:"Module"}));var n;e=n=function(b){function c(a){a=d.call(this,a);a._activeFetchInfo={id:null,request:null};a.layer=null;a.template=null;a.thumbnail=null;return a}l._inherits(c,b);var d=l._createSuper(c);b=c.prototype;b.initialize=function(){this.handles.add(r.watch(()=>{const {layer:a}=this;return[a&&"renderer"in a?a.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)},r.initial))};b.clone=function(){const a=
q.isSome(this.thumbnail)?this.thumbnail.cloneNode(!0):null,h=new n({layer:this.layer,template:this.template});h._set("thumbnail",a);return h};c.fetchThumbnail=async function(a,h){const t=await y(a,h);if(q.isNone(t))return null;const p={maxSize:36};"dictionary"===a.renderer?.type&&(p.fieldMap=a.renderer.fieldMap??void 0,p.feature={attributes:h.prototype.attributes??{}});return await x.renderPreviewHTML(t,p)};l._createClass(c,[{key:"description",get:function(){return this.template?.description},set:function(a){this.template&&
(this.template.description=a)}},{key:"label",get:function(){return this.template?.name},set:function(a){this.template&&(this.template.name=a)}},{key:"id",get:function(){return`${this.label??""}\u2013${this.layer?.id}`}}]);return c}(v.HandleOwnerMixin(e));f.__decorate([g.property()],e.prototype,"description",null);f.__decorate([g.property()],e.prototype,"label",null);f.__decorate([g.property()],e.prototype,"layer",void 0);f.__decorate([g.property()],e.prototype,"template",void 0);f.__decorate([g.property({readOnly:!0})],
e.prototype,"thumbnail",void 0);f.__decorate([g.property()],e.prototype,"id",null);return e=n=f.__decorate([w.subclass("esri.widgets.FeatureTemplates.TemplateItem")],e)});