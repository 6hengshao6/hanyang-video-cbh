// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./DirectionsFeature ./FeatureSet ../../geometry/SpatialReference ../../geometry/Extent ../../geometry/Polyline".split(" "),function(p,d,b,l,e,z,A,B,r,t,u,v,w,x,q){function y(m,f){if(0===
m.length)return new q({spatialReference:f});const k=[];for(const c of m)for(const g of c.paths)k.push(...g);const a=[];k.forEach((c,g)=>{0!==g&&c[0]===k[g-1][0]&&c[1]===k[g-1][1]||a.push(c)});const {hasM:h,hasZ:n}=m[0];return new q({hasM:h,hasZ:n,paths:[a],spatialReference:f})}b=function(m){function f(a){a=k.call(this,a);a.extent=null;a.features=[];a.geometryType="polyline";a.routeId=null;a.routeName=null;a.totalDriveTime=null;a.totalLength=null;a.totalTime=null;return a}p._inherits(f,m);var k=p._createSuper(f);
f.prototype.readFeatures=function(a,h){if(!a)return[];const n=(h=h.summary.envelope.spatialReference??h.spatialReference)&&w.fromJSON(h);return a.map(c=>{c=u.fromJSON(c);l.isSome(c.geometry)&&(c.geometry.spatialReference=n);if(l.isSome(c.events))for(const g of c.events)l.isSome(g.geometry)&&(g.geometry.spatialReference=n);return c})};p._createClass(f,[{key:"mergedGeometry",get:function(){if(!this.features)return null;const a=this.features.map(({geometry:h})=>l.unwrap(h));return y(a,this.extent.spatialReference)}},
{key:"strings",get:function(){return this.features.map(({strings:a})=>a).flat().filter(l.isSome)}}]);return f}(v);d.__decorate([e.property({type:x,json:{read:{source:"summary.envelope"}}})],b.prototype,"extent",void 0);d.__decorate([e.property({nonNullable:!0})],b.prototype,"features",void 0);d.__decorate([r.reader("features")],b.prototype,"readFeatures",null);d.__decorate([e.property()],b.prototype,"geometryType",void 0);d.__decorate([e.property({readOnly:!0})],b.prototype,"mergedGeometry",null);
d.__decorate([e.property()],b.prototype,"routeId",void 0);d.__decorate([e.property()],b.prototype,"routeName",void 0);d.__decorate([e.property({value:null,readOnly:!0})],b.prototype,"strings",null);d.__decorate([e.property({json:{read:{source:"summary.totalDriveTime"}}})],b.prototype,"totalDriveTime",void 0);d.__decorate([e.property({json:{read:{source:"summary.totalLength"}}})],b.prototype,"totalLength",void 0);d.__decorate([e.property({json:{read:{source:"summary.totalTime"}}})],b.prototype,"totalTime",
void 0);return b=d.__decorate([t.subclass("esri.rest.support.DirectionsFeatureSet")],b)});