// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../chunks/_rollupPluginBabelHelpers","./support/jsonUtils"],function(m,n,l){let p=function(){function g(){this._end=-1;this._yFactor=1;this._ids=new Map}var b=g.prototype;b.initialize=function(a,c,e,f,d){this.hasZ=e;this.hasM=f;this.geometryType=c;this._geometry=a;this._pathIndex=-1;this._pathOffset=0;this._stride=2+Number(e)+Number(f);this._pointOffset=-this._stride;this._end=-1;this._yFactor=d;this._ids.clear();return this};b.reset=function(){this.initialize(this._geometry,this.geometryType,
this.hasZ,this.hasM,this._yFactor)};b.seekPathFront=function(){this._pointOffset=this._pathOffset-this._stride};b.seekPathEnd=function(){this._pointOffset=this._end};b.seekPathAt=function(a){a=this._pathOffset+a*this._stride;return 0<=a&&a<this._end?(this._pointOffset=a,!0):!1};b.nextPoint=function(){return(this._pointOffset+=this._stride)<this._end};b.prevPoint=function(){return(this._pointOffset-=this._stride)>=this._pathOffset};b.nextPath=function(){0<=this._pathIndex&&(this._pathOffset+=this._stride*
this._geometry.lengths[this._pathIndex]);this._pointOffset=this._pathOffset-this._stride;this._end=this._pointOffset+this._stride+this._stride*this._geometry.lengths[this._pathIndex+1];return++this._pathIndex<this._geometry.lengths.length};b.pathLength=function(){const a=this._end,c=this._stride,e=this._geometry.coords;let f=0;for(let d=this._pathOffset+c;d<a;d+=c){const k=e[d]-e[d-c],h=e[d+1]-e[d-c+1];f+=Math.sqrt(k*k+h*h)}return f};n._createClass(g,[{key:"numPoints",get:function(){const {lengths:a}=
this._geometry;return 0>this._pathIndex||this._pathIndex>a.length-1?0:a[this._pathIndex]}},{key:"numPaths",get:function(){return this._geometry.lengths.length}},{key:"pathIndex",get:function(){return this._pathIndex}},{key:"x",get:function(){return this._geometry.coords[this._pointOffset]}},{key:"y",get:function(){return this._yFactor*this._geometry.coords[this._pointOffset+1]}},{key:"z",get:function(){return this._geometry.coords[this._pointOffset+2]}},{key:"m",get:function(){return this._geometry.coords[this._pointOffset+
(this.hasZ?3:2)]}},{key:"id",get:function(){return this._ids.get(this._pointOffset)||0},set:function(a){this._ids.set(this._pointOffset,a)}}]);return g}(),q=function(){function g(){this._pathLen=0;this._yFactor=1}var b=g.prototype;b.initialize=function(a,c,e,f){if(l.isPolygon(a))a=[a.rings,"esriGeometryPolygon"];else if(l.isPolyline(a))a=[a.paths,"esriGeometryPolyline"];else if(l.isMultipoint(a))a=[[a.points],"esriGeometryMultipoint"];else if(l.isExtent(a))a=[[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,
a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],"esriGeometryEnvelope"];else if(l.isPoint(a)){const h=[a.x,a.y];a.z&&h.push(a.z);a.m&&h.push(a.m);a=[[[h]],"esriGeometryPoint"]}else a=[[],null];const [d,k]=a;this._paths=d;this.geometryType=k;this.hasZ=c;this.hasM=e;this._pathIndex=this._pointIndex=-1;this._yFactor=f;return this};b.reset=function(){this._pathIndex=this._pointIndex=-1};b.seekPathFront=function(){this._pointIndex=-1};b.seekPathEnd=function(){this._pointIndex=this._currentPath.length};b.seekPathAt=
function(a){return 0<=a&&a<this._currentPath.length?(this._pointIndex=a,this._currentPoint=this._currentPath[this._pointIndex],!0):!1};b.nextPoint=function(){this._currentPoint=this._currentPath[++this._pointIndex];return this._pointIndex<this._pathLen};b.prevPoint=function(){this._currentPoint=this._currentPath[--this._pointIndex];return 0<=this._pointIndex};b.nextPath=function(){this._pointIndex=-1;this._pathLen=this.pathIndex<this._paths.length-1?this._paths[this._pathIndex+1].length:0;this._currentPath=
this._paths[++this._pathIndex];return this._pathIndex<this._paths.length};b.pathLength=function(){const a=this._currentPath.length,c=this._currentPath;let e=0;for(let d=1;d<a;d++){var f=c[d-1];const k=c[d],h=k[0]-f[0];f=k[1]-f[1];e+=Math.sqrt(h*h+f*f)}return e};n._createClass(g,[{key:"numPoints",get:function(){return 0>this._pathIndex||this._pathIndex>this._paths.length-1?-1:this._paths[this._pathIndex].length}},{key:"numPaths",get:function(){return this._paths.length}},{key:"pathIndex",get:function(){return this._pathIndex}},
{key:"pointIndex",get:function(){return this._pointIndex}},{key:"x",get:function(){return this._currentPoint[0]}},{key:"y",get:function(){return this._yFactor*this._currentPoint[1]}},{key:"z",get:function(){return this._currentPoint[2]}},{key:"m",get:function(){return this._currentPoint[this.hasZ?3:2]}},{key:"id",get:function(){return this._currentPoint[4]},set:function(a){this._currentPoint[4]=a}}]);return g}();const r=new p,t=new q;m.getJSONCursor=function(g,b=!1,a=!1,c=!1){return t.initialize(g,
a,c,b?-1:1)};m.getOptimizedCursor=function(g,b,a=!1,c=!1,e=!1){return r.initialize(g,b,c,e,a?-1:1)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});