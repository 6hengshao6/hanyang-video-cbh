// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/workers/workers ../../../chunks/vec3f64 ../ray ../triangle ./ElevationSamplerWorker ../../../layers/support/ElevationSampler".split(" "),function(p,l,q,u,v,r,w,x,y){function z(){++m;f&&(clearTimeout(f),f=0);return h?h:h=u.open("ElevationSamplerWorker").catch(()=>null)}function A(c){--m;q.isSome(c)&&0===m&&(f=setTimeout(()=>{c.close();h=null;f=0},1E4))}let B=function(c){function e(a,g,d){var b=k.call(this);
b._rindex=g;b.demResolution={min:0,max:0};b.spatialReference=a.spatialReference.clone();b.extent=a.extent.clone();b.noDataValue=q.isSome(d)&&d.noDataValue||0;return b}l._inherits(e,c);var k=l._createSuper(e);e.prototype.elevationAt=function(a,g){let d=Number.NEGATIVE_INFINITY;r.fromValues([a,g,0],[0,0,-1],t);this._rindex.search({minX:a,maxX:a,minY:g,maxY:g},b=>{w.intersectRay(b,t,n)&&n[2]>d&&(d=n[2])});return d===Number.NEGATIVE_INFINITY?this.noDataValue:d};return l._createClass(e)}(y.ElevationSamplerBase);
const C=new x;let m=0,h=null,f=0;const t=r.fromValues([0,0,0],[0,0,-1]),n=v.create();p.create=async function(c,e){const k=await z(),a=await C.createIndex(c,k);A(k);return new B(c,a,e)};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});