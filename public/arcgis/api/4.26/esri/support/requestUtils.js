// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../config ../core/has ../core/maybe ../core/promiseUtils ../core/urlUtils".split(" "),function(e,f,q,r,u,d){function t(){try{return new DOMException("Aborted","AbortError")}catch{const a=Error();a.name="AbortError";return a}}e.isNoCorsRequestRequired=function(a){const b=f.request.crossOriginNoCorsDomains;return b&&(a=d.getOrigin(a))?(a=a.toLowerCase(),!d.hasSameOrigin(a,d.getAppUrl())&&b[a]<Date.now()-36E5):!1};e.loadImageAsync=function(a,b,c=!1,g){return new Promise((v,l)=>{if(u.isAborted(g))l(t());
else{var h=()=>{m();l(Error(`Unable to load ${b}`))},k=()=>{const n=a;m();v(n)},p=()=>{if(a){var n=a;m();n.src="";l(t())}},m=()=>{q("esri-image-decode")||(a.removeEventListener("error",h),a.removeEventListener("load",k));a=k=h=null;r.isSome(g)&&g.removeEventListener("abort",p);p=null;c&&URL.revokeObjectURL(b)};r.isSome(g)&&g.addEventListener("abort",p);q("esri-image-decode")?a.decode().then(k,h):(a.addEventListener("error",h),a.addEventListener("load",k))}})};e.registerNoCorsDomains=function(a){f.request.crossOriginNoCorsDomains||
(f.request.crossOriginNoCorsDomains={});const b=f.request.crossOriginNoCorsDomains;for(let c of a)c=c.toLowerCase(),/^https?:\/\//.test(c)?b[d.getOrigin(c)??""]=0:(b[d.getOrigin("http://"+c)??""]=0,b[d.getOrigin("https://"+c)??""]=0)};e.sendNoCorsRequest=async function(a){var b=f.request.crossOriginNoCorsDomains;const c=d.getOrigin(a);b&&c&&(b[c.toLowerCase()]=Date.now());b=d.urlToObject(a);a=b.path;"json"===b.query?.f&&(a+="?f\x3djson");try{await fetch(a,{mode:"no-cors",credentials:"include"})}catch{}};
Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});