// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/arcade":function(){define("require exports ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../core/has ../core/maybe".split(" "),function(v,F,C,p,m,b,A,z,q,x){function w(f,r){if(!0===r.useAsync||!0===f.isAsync)return l(f,r);if(q("esri-csp-restrictions"))return function(I){return m.executeScript(f,I)};try{return C.compileScript(f,r)}catch(I){if("esri.arcade.arcadeuncompilableerror"===
I.declaredRootClass)return function(N){return m.executeScript(f,N)};throw I;}}function l(f,r){if(null===K)throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.AsyncNotEnabled,null);if(q("esri-csp-restrictions"))return function(I){return K.executeScript(f,I)};try{return C.compileScript(f,r,!0)}catch(I){if("esri.arcade.arcadeuncompilableerror"===I.declaredRootClass)return function(N){return K.executeScript(f,N)};throw I;}}function k(f){m.extend(f);C.extend(f,"sync");null===K?P.push(f):(C.extend(f,
"async"),K.extend(f))}function c(f,r=[]){return A.parseScript(f,r)}function a(f,r,I=[]){f=A.parseScript(f,I);return e(f,r)}function e(f,r){if(!0===r.useAsync||!0===f.isAsync){if(null===K)throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.AsyncNotEnabled,null);return K.executeScript(f,r)}return m.executeScript(f,r)}function n(f,r){return z.referencesMember(f,r)}function h(f,r){return z.referencesFunction(f,r)}function D(f,r=!1){void 0===r&&(r=!1);return z.findFieldLiterals(f)}function B(f){return z.findExpectedFieldLiterals(f)}
function d(f,r=[]){void 0===f.usesGeometry&&z.findScriptDependencies(f,r);return!0===f.usesGeometry}function t(){return H?H:H=u()}async function u(){const [f,r]=await Promise.all([new Promise((I,N)=>v(["../geometry/geometryEngine"],I,N)),new Promise((I,N)=>v(["../arcade/functions/geomsync"],I,N))]);G=!0;r.setGeometryEngine(f);return!0}function E(){return null!==Q?Q:Q=g()}async function g(){await C.enableAsyncSupport();K=await new Promise((f,r)=>v(["../arcade/arcadeAsyncRuntime"],f,r));for(const f of P)K.extend(f),
C.extend(f,"async");P=null;return!0}function J(){return L}function ia(){return K?!0:!1}function X(){return G}function ea(){return O?O:O=na()}async function na(){await E();const [f,r,I,N,S]=await Promise.all([new Promise((W,aa)=>v(["../arcade/featureSetUtils"],W,aa)),new Promise((W,aa)=>v(["../arcade/functions/featuresetbase"],W,aa)),new Promise((W,aa)=>v(["../arcade/functions/featuresetgeom"],W,aa)),new Promise((W,aa)=>v(["../arcade/functions/featuresetstats"],W,aa)),new Promise((W,aa)=>v(["../arcade/functions/featuresetstring"],
W,aa))]);T=f;K.extend([r,I,N,S]);C.extend([r,I,N,S],"async");return L=!0}function xa(f,r=[]){void 0===f.usesFeatureSet&&z.findScriptDependencies(f,r);return!0===f.usesFeatureSet}function ra(f,r=[]){void 0===f.isAsync&&z.findScriptDependencies(f,r);return!0===f.isAsync}async function va(f,r,I=[],N=!1,S=null){return sa(new Set,f,r,I,N,S)}async function sa(f,r,I,N=[],S=!1,W=null){r="string"===typeof r?c(r):r;const aa=[];if(r&&(!1===G&&(d(r)||S)&&aa.push(t()),!1===ia()&&(!0===r.isAsync||I)&&aa.push(E()),
!1===L)){var fa;if(!(fa=xa(r)))a:{if(N)for(const ja of N)if(n(r,ja)){fa=!0;break a}fa=!1}fa&&aa.push(ea())}aa.length&&await Promise.all(aa);await U(f,r,W,I,S);return!0}function ka(f,r=[]){void 0===f.usesModules&&z.findScriptDependencies(f,r);return!0===f.usesModules}async function U(f,r,I=null,N=!1,S=!1){var W=z.findModuleImports(r);null===I&&0<W.length&&(I=p.ArcadeModuleResolver.getDefault());r.loadedModules={};for(const aa of W){x.assertIsSome(I);W=I.normalizeModuleUri(aa.source);if(f.has(W.uri))throw new b.ArcadeExecutionError(null,
b.ExecutionErrorCodes.CircularModules,null);f.add(W.uri);const fa=await I.fetchModule(W);await sa(f,fa,N,[],S,I);f.delete(W.uri);fa.isAsync&&(r.isAsync=!0);fa.usesFeatureSet&&(r.usesFeatureSet=!0);fa.usesGeometry&&(r.usesGeometry=!0);r.loadedModules[aa.libname]={uri:W.uri,script:fa}}}function ca(f){if(d(f))return!0;f=z.findFunctionCalls(f);let r=!1;for(let I=0;I<f.length;I++)if(ta.includes(f[I])){r=!0;break}return r}function oa(){return T}const ta="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" ");
let L=!1,G=!1,K=null,P=[],H=null,Q=null,O=null,T=null;const Z=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:sa,compileScript:w,enableAsyncSupport:E,enableAsyncSupportImpl:g,enableFeatureSetSupport:ea,enableFeatureSetSupportImpl:na,enableGeometrySupport:t,enableGeometrySupportImpl:u,executeScript:e,extend:k,extractExpectedFieldLiterals:B,extractFieldLiterals:D,featureSetUtils:oa,isAsyncEnabled:ia,isFeatureSetSupportEnabled:J,isGeometryEnabled:X,loadDependentModules:U,
loadScriptDependencies:va,parseAndExecuteScript:a,parseScript:c,referencesFunction:h,referencesMember:n,scriptIsAsync:ra,scriptTouchesGeometry:ca,scriptUsesFeatureSet:xa,scriptUsesGeometryEngine:d,scriptUsesModules:ka},Symbol.toStringTag,{value:"Module"}));F._loadScriptDependenciesImpl=sa;F.arcade=Z;F.compileScript=w;F.enableAsyncSupport=E;F.enableAsyncSupportImpl=g;F.enableFeatureSetSupport=ea;F.enableFeatureSetSupportImpl=na;F.enableGeometrySupport=t;F.enableGeometrySupportImpl=u;F.executeScript=
e;F.extend=k;F.extractExpectedFieldLiterals=B;F.extractFieldLiterals=D;F.featureSetUtils=oa;F.isAsyncEnabled=ia;F.isFeatureSetSupportEnabled=J;F.isGeometryEnabled=X;F.loadDependentModules=U;F.loadScriptDependencies=va;F.parseAndExecuteScript=a;F.parseScript=c;F.referencesFunction=h;F.referencesMember=n;F.scriptIsAsync=ra;F.scriptTouchesGeometry=ca;F.scriptUsesFeatureSet=xa;F.scriptUsesGeometryEngine=d;F.scriptUsesModules=ka})},"esri/arcade/arcadeCompiler":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ./Dictionary ./Feature ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference ./ArcadeModuleLoader ./ArcadeModule ./FunctionWrapper ./executionError".split(" "),
function(v,F,C,p,m,b,A,z,q,x,w,l,k,c,a,e,n,h,D,B,d){function t(f,r,I){try{return I(f,null,r.arguments)}catch(N){throw N;}}function u(f,r){try{switch(r.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return na(f,r);case "VariableDeclaration":var I=[];for(var N=0;N<r.declarations.length;N++)I.push(u(f,r.declarations[N]));return I.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return X(f,r);case "FunctionDeclaration":{const ha=
r.id.name.toLowerCase();ea(ha);var S="",W=!1;void 0!==f.globalScope[ha]?S=ha:void 0!==f.globalScope._SymbolsMap[ha]?S=f.globalScope._SymbolsMap[ha]:f.undeclaredGlobalsInFunctions.has(ha)?(S=f.undeclaredGlobalsInFunctions.get(ha).manglename,f.globalScope._SymbolsMap[ha]=S,f.mangleMap[ha]=S,f.undeclaredGlobalsInFunctions.delete(ha),W=!0):(S=va(f),f.globalScope._SymbolsMap[ha]=S,f.mangleMap[ha]=S);N={isAsync:f.isAsync,console:f.console,exports:f.exports,undeclaredGlobalsInFunctions:f.undeclaredGlobalsInFunctions,
customfunctions:f.customfunctions,moduleFactory:f.moduleFactory,moduleFactoryMap:f.moduleFactoryMap,libraryResolver:f.libraryResolver,lrucache:f.lrucache,interceptor:f.interceptor,services:f.services,symbols:f.symbols,mangleMap:f.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:f.depthCounter,globalScope:f.globalScope};var aa="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(var fa=0;fa<r.params.length;fa++){const Ea=r.params[fa].name.toLowerCase();ea(Ea);const Ba=va(f);N.localScope._SymbolsMap[Ea]=Ba;N.mangleMap[Ea]=Ba;aa+="lscope['"+Ba+"']\x3darguments["+fa.toString()+"];\n"}!0===f.isAsync?(aa=aa+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(X(N,r.body)+"\n return lastStatement; "),aa=aa+"});  }, runtimeCtx),"+(r.params.length+")")):aa+=X(N,r.body)+"\n return lastStatement; }, runtimeCtx),"+r.params.length+")";aa+="\n lastStatement \x3d lc.voidOperation; \n";
I=W?"gscope[lang.setAssig('"+S+"', runtimeCtx)]\x3d"+aa:"gscope['"+S+"']\x3d"+aa}return I;case "ImportDeclaration":{const ha=r.specifiers[0].local.name.toLowerCase();ea(ha);const Ea=f.libraryResolver?.loadLibrary(ha),Ba=va(f);void 0===f.moduleFactory[Ea.uri]&&(f.moduleFactory[Ea.uri]=L(Ea.syntax,{interceptor:f.interceptor,services:f.services,moduleFactory:f.moduleFactory,lrucache:f.lrucache,timeReference:f.timeReference??null,libraryResolver:f.libraryResolver,customfunctions:f.customfunctions,vars:{}},
f.isAsync));f.moduleFactoryMap[Ba]=Ea.uri;r="";r=f.isAsync?"(yield lang.loadModule('"+Ba+"', runtimeCtx) ); ":"lang.loadModule('"+Ba+"', runtimeCtx); ";void 0!==f.globalScope[ha]?S="gscope['"+ha+"']\x3d"+r:void 0!==f.globalScope._SymbolsMap[ha]?S="gscope['"+f.globalScope._SymbolsMap[ha]+"']\x3d"+r:(I="",f.undeclaredGlobalsInFunctions.has(ha)?(I=f.undeclaredGlobalsInFunctions.get(ha).manglename,f.undeclaredGlobalsInFunctions.delete(ha)):I=va(f),f.globalScope._SymbolsMap[ha]=I,f.mangleMap[ha]=I,S="gscope[lang.setAssig('"+
I+"', runtimeCtx)]\x3d"+r)}return S;case "ExportNamedDeclaration":const Fa=u(f,r.declaration);if("FunctionDeclaration"===r.declaration.type)f.exports[r.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===r.declaration.type)for(const ha of r.declaration.declarations)f.exports[ha.id.name.toLowerCase()]="variable";return Fa;case "ReturnStatement":var ja=null===r.argument?"return lc.voidOperation":"return "+u(f,r.argument);return ja;case "IfStatement":return ia(f,r);case "ExpressionStatement":var da=
"AssignmentExpression"===r.expression.type?"lastStatement \x3d lc.voidOperation; "+u(f,r.expression)+"; \n ":"lastStatement \x3d "+u(f,r.expression)+"; ";return da;case "AssignmentExpression":return g(f,r);case "UpdateExpression":return E(f,r);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{I=[];N=0;for(const ha of r.quasis)I.push(ha.value?JSON.stringify(ha.value.cooked):JSON.stringify("")),!1===ha.tail&&(I.push(r.expressions[N]?"lang.castString(lang.aCheck("+
u(f,r.expressions[N])+", 'TemplateLiteral'))":""),N++);W="(["+I.join(",")+"]).join('')"}catch(ha){throw ha;}return W;case "TemplateElement":return JSON.stringify(r.value?r.value.cooked:"");case "ForStatement":I="lastStatement \x3d lc.voidOperation; \n";null!==r.init&&(I+=u(f,r.init)+"; ");const Ca=sa(f),Ga=sa(f);I+="var "+Ca+" \x3d true; \n do { ";null!==r.update&&(I+=" if ("+Ca+"\x3d\x3d\x3dfalse) {\n "+u(f,r.update)+"  \n}\n "+Ca+"\x3dfalse; \n");null!==r.test&&(I+="var "+Ga+" \x3d "+u(f,r.test)+
"; ",I+="if ("+Ga+"\x3d\x3d\x3dfalse) { break; } else if ("+Ga+"!\x3d\x3dtrue) { lang.error('"+d.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");I+=u(f,r.body);null!==r.update&&(I+="\n "+u(f,r.update));return I+("\n"+Ca+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":fa=sa(f);const ya=sa(f),V=sa(f);let la="var "+fa+" \x3d "+u(f,r.right)+";\n";"VariableDeclaration"===r.left.type&&(la+=u(f,r.left));let ua="VariableDeclaration"===r.left.type?r.left.declarations[0].id.name:
r.left.name;ua=ua.toLowerCase();ea(ua);I="";null!==f.localScope&&(void 0!==f.localScope[ua]?I="lscope['"+ua+"']":void 0!==f.localScope._SymbolsMap[ua]&&(I="lscope['"+f.localScope._SymbolsMap[ua]+"']"));N="";if(""===I)if(void 0!==f.globalScope[ua])I="gscope['"+ua+"']";else if(void 0!==f.globalScope._SymbolsMap[ua])I="gscope['"+f.globalScope._SymbolsMap[ua]+"']";else if(null!==f.localScope)if(f.undeclaredGlobalsInFunctions.has(ua))I="gscope['"+f.undeclaredGlobalsInFunctions.get(ua).manglename+"']",
N=f.undeclaredGlobalsInFunctions.get(ua).manglename;else{const ha={manglename:va(f),node:r.left};f.undeclaredGlobalsInFunctions.set(ua,ha);I="gscope['"+ha.manglename+"']";N=ha.manglename}N&&(la+="lang.chkAssig('"+N+"',runtimeCtx); \n");la=la+("if ("+fa+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(fa+") || lc.isString("+fa+")) {var ")+(ya+"\x3d"+fa+".length; \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+ya+"; "+V+"++) {\n");la+=I+"\x3d"+V+";\n";la+=u(f,r.body);la+="\n}\n";
la+=" lastStatement \x3d lc.voidOperation; \n";la+=" \n}\n";la+="else if (lc.isImmutableArray("+fa+")) {";la=la+("var "+ya+"\x3d"+fa+".length(); \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+ya+"; "+V+"++) {\n");la+=I+"\x3d"+V+";\n";la+=u(f,r.body);la+="\n}\n";la+=" lastStatement \x3d lc.voidOperation; \n";la+=" \n}\n";la+="else if (( "+fa+" instanceof lang.Dictionary) || ( "+fa+" instanceof lang.Feature)) {";la=la+("var "+ya+"\x3d"+fa+".keys(); \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+ya+".length; "+V+"++) {\n");
la+=I+"\x3d"+ya+"["+V+"];\n";la+=u(f,r.body);la+="\n}\n";la+=" lastStatement \x3d lc.voidOperation; \n";la+=" \n}\n";f.isAsync&&(la+="else if (lc.isFeatureSet("+fa+")) {",la=la+("var "+ya+"\x3d"+fa+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(V+"\x3dlang. graphicToFeature( yield "+ya+".next(),"+fa+", runtimeCtx); "+V+"!\x3dnull; "+V+"\x3dlang. graphicToFeature( yield "+ya+".next(),"+fa+", runtimeCtx)) {\n")+(I+"\x3d"+V+";\n"),la+=u(f,r.body),la+="\n}\n",la+=" lastStatement \x3d lc.voidOperation; \n",
la+=" \n}\n");return la+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":I="lastStatement \x3d lc.voidOperation; \n";const Ja=sa(f);return I+=`\n  var ${Ja} = true;\n    do {\n      ${Ja} = ${u(f,r.test)};\n      if (${Ja}==false) {\n        break;\n      }\n      if (${Ja}!==true) {\n        lang.error('${d.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${u(f,r.body)}\n    }\n    while (${Ja} !== false);\n    lastStatement = lc.voidOperation;\n  `;case "Identifier":return xa(f,
r);case "MemberExpression":try{let ha;!0===r.computed?ha=u(f,r.property):(ha="'"+r.property.name+"'",ea(r.property.name));var pa="lang.member("+u(f,r.object)+","+ha+")"}catch(ha){throw ha;}return pa;case "Literal":return null===r.value||void 0===r.value?"null":JSON.stringify(r.value);case "CallExpression":return ra(f,r);case "UnaryExpression":try{var wa="lang.unary("+u(f,r.argument)+",'"+r.operator+"')"}catch(ha){throw ha;}return wa;case "BinaryExpression":try{var Ha="lang.binary("+u(f,r.left)+","+
u(f,r.right)+",'"+r.operator+"')"}catch(ha){throw ha;}return Ha;case "LogicalExpression":try{if("AssignmentExpression"===r.left.type||"UpdateExpression"===r.left.type)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,r);if("AssignmentExpression"===r.right.type||"UpdateExpression"===r.right.type)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,r);if("\x26\x26"===r.operator||"||"===r.operator)var Ia="(lang.logicalCheck("+u(f,
r.left)+") "+r.operator+" lang.logicalCheck("+u(f,r.right)+"))";else throw new d.ArcadeCompilationError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(ha){throw ha;}return Ia;case "ArrayExpression":try{I=[];for(N=0;N<r.elements.length;N++)"Literal"===r.elements[N].type?I.push(u(f,r.elements[N])):I.push("lang.aCheck("+u(f,r.elements[N])+",'ArrayExpression')");aa="["+I.join(",")+"]"}catch(ha){throw ha;}return aa;case "ObjectExpression":I="lang.dictionary([";for(N=0;N<r.properties.length;N++){const ha=
r.properties[N];ea(ha.key.name);const Ea="Identifier"===ha.key.type?"'"+ha.key.name+"'":u(f,ha.key),Ba=u(f,ha.value);0<N&&(I+=",");I+="lang.strCheck("+Ea+",'ObjectExpression'),lang.aCheck("+Ba+", 'ObjectExpression')"}return I+"])";case "Property":throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.NeverReach,r);case "Array":throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.NeverReach,r);default:throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.Unrecognised,r);}}catch(Fa){throw Fa;
}}function E(f,r){let I=null;var N="";if("MemberExpression"===r.argument.type)return I=u(f,r.argument.object),!0===r.argument.computed?N=u(f,r.argument.property):(N="'"+r.argument.property.name+"'",ea(r.argument.property.name)),"lang.memberupdate("+I+","+N+",'"+r.operator+"',"+r.prefix+")";I=r.argument.name.toLowerCase();ea(I);if(null!==f.localScope){if(void 0!==f.localScope[I])return"lang.update(lscope, '"+I+"','"+r.operator+"',"+r.prefix+")";if(void 0!==f.localScope._SymbolsMap[I])return"lang.update(lscope, '"+
f.localScope._SymbolsMap[I]+"','"+r.operator+"',"+r.prefix+")"}if(void 0!==f.globalScope[I])return"lang.update(gscope, '"+I+"','"+r.operator+"',"+r.prefix+")";if(void 0!==f.globalScope._SymbolsMap[I])return"lang.update(gscope, '"+f.globalScope._SymbolsMap[I]+"','"+r.operator+"',"+r.prefix+")";if(null!==f.localScope){if(f.undeclaredGlobalsInFunctions.has(I))return"lang.update(gscope,lang.chkAssig( '"+f.undeclaredGlobalsInFunctions.get(I).manglename+"',runtimeCtx),'"+r.operator+"',"+r.prefix+")";N=
{manglename:va(f),node:r.argument};f.undeclaredGlobalsInFunctions.set(I,N);return"lang.update(gscope, lang.chkAssig('"+N.manglename+"',runtimeCtx),'"+r.operator+"',"+r.prefix+")"}throw new d.ArcadeExecutionError(f,d.ExecutionErrorCodes.InvalidIdentifier,r);}function g(f,r){const I=u(f,r.right);let N=null;var S="";if("MemberExpression"===r.left.type)return N=u(f,r.left.object),!0===r.left.computed?S=u(f,r.left.property):(S="'"+r.left.property.name+"'",ea(r.left.property.name)),"lang.assignmember("+
N+","+S+",'"+r.operator+"',"+I+")";N=r.left.name.toLowerCase();ea(N);if(null!==f.localScope){if(void 0!==f.localScope[N])return"lscope['"+N+"']\x3dlang.assign("+I+",'"+r.operator+"', lscope['"+N+"'])";if(void 0!==f.localScope._SymbolsMap[N])return"lscope['"+f.localScope._SymbolsMap[N]+"']\x3dlang.assign("+I+",'"+r.operator+"', lscope['"+f.localScope._SymbolsMap[N]+"'])"}if(void 0!==f.globalScope[N])return"gscope['"+N+"']\x3dlang.assign("+I+",'"+r.operator+"', gscope['"+N+"'])";if(void 0!==f.globalScope._SymbolsMap[N])return"gscope['"+
f.globalScope._SymbolsMap[N]+"']\x3dlang.assign("+I+",'"+r.operator+"', gscope['"+f.globalScope._SymbolsMap[N]+"'])";if(null!==f.localScope){if(f.undeclaredGlobalsInFunctions.has(N))return"gscope[lang.chkAssig('"+f.undeclaredGlobalsInFunctions.get(N).manglename+"',runtimeCtx)]\x3dlang.assign("+I+",'"+r.operator+"', gscope['"+f.undeclaredGlobalsInFunctions.get(N).manglename+"'])";S={manglename:va(f),node:r.argument};f.undeclaredGlobalsInFunctions.set(N,S);return"gscope[lang.chkAssig('"+S.manglename+
"',runtimeCtx)]\x3dlang.assign("+I+",'"+r.operator+"', gscope['"+S.manglename+"'])"}throw new d.ArcadeExecutionError(f,d.ExecutionErrorCodes.InvalidIdentifier,r);}function J(f,r){return"BlockStatement"===r.type?u(f,r):"ReturnStatement"===r.type||"BreakStatement"===r.type||"ContinueStatement"===r.type?u(f,r)+"; ":"UpdateExpression"===r.type?"lastStatement \x3d "+u(f,r)+"; ":"ExpressionStatement"===r.type?u(f,r):"ObjectExpression"===r.type?"lastStatement \x3d "+u(f,r)+"; ":u(f,r)+"; "}function ia(f,
r){if("AssignmentExpression"===r.test.type||"UpdateExpression"===r.test.type)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.BooleanConditionRequired,r);return`if (lang.mustBoolean(${u(f,r.test)}, runtimeCtx) === true) {\n    ${J(f,r.consequent)}\n  } `+(null!==r.alternate?"IfStatement"===r.alternate.type?" else "+ia(f,r.alternate):` else {\n      ${J(f,r.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function X(f,r){let I="";for(let N=0;N<r.body.length;N++)"EmptyStatement"!==
r.body[N].type&&(I="ReturnStatement"===r.body[N].type?I+(u(f,r.body[N])+"; \n"):"BreakStatement"===r.body[N].type?I+(u(f,r.body[N])+"; \n"):"ContinueStatement"===r.body[N].type?I+(u(f,r.body[N])+"; \n"):"UpdateExpression"===r.body[N].type?I+("lastStatement \x3d "+u(f,r.body[N])+"; \n"):"ObjectExpression"===r.body[N].type?I+("lastStatement \x3d "+u(f,r.body[N])+"; \n"):I+(u(f,r.body[N])+" \n"));return I}function ea(f){if("iif"===f)throw new d.ArcadeUncompilableError;if("decode"===f)throw new d.ArcadeUncompilableError;
if("when"===f)throw new d.ArcadeUncompilableError;}function na(f,r){let I=null===r.init?null:u(f,r.init);I===b.voidOperation&&(I=null);r=r.id.name.toLowerCase();ea(r);if(null!==f.localScope){if(void 0!==f.localScope[r])return"lscope['"+r+"']\x3d"+I+"; ";if(void 0!==f.localScope._SymbolsMap[r])return"lscope['"+f.localScope._SymbolsMap[r]+"']\x3d"+I+"; ";var N=va(f);f.localScope._SymbolsMap[r]=N;f.mangleMap[r]=N;return"lscope['"+N+"']\x3d"+I+"; "}if(void 0!==f.globalScope[r])return"gscope['"+r+"']\x3d"+
I+"; ";if(void 0!==f.globalScope._SymbolsMap[r])return"gscope['"+f.globalScope._SymbolsMap[r]+"']\x3d"+I+"; ";if(f.undeclaredGlobalsInFunctions.has(r))return N=f.undeclaredGlobalsInFunctions.get(r).manglename,f.globalScope._SymbolsMap[r]=N,f.mangleMap[r]=N,f.undeclaredGlobalsInFunctions.delete(r),"gscope[lang.setAssig('"+N+"', runtimeCtx)]\x3d"+I+"; ";N=va(f);f.globalScope._SymbolsMap[r]=N;f.mangleMap[r]=N;return"gscope['"+N+"']\x3d"+I+"; "}function xa(f,r){try{const I=r.name.toLowerCase();ea(I);
if(null!==f.localScope){if(void 0!==f.localScope[I])return"lscope['"+I+"']";if(void 0!==f.localScope._SymbolsMap[I])return"lscope['"+f.localScope._SymbolsMap[I]+"']"}if(void 0!==f.globalScope[I])return"gscope['"+I+"']";if(void 0!==f.globalScope._SymbolsMap[I])return"gscope['"+f.globalScope._SymbolsMap[I]+"']";if(null!==f.localScope){if(f.undeclaredGlobalsInFunctions.has(I))return"gscope[lang.chkAssig('"+f.undeclaredGlobalsInFunctions.get(I).manglename+"',runtimeCtx)]";const N={manglename:va(f),node:r.argument};
f.undeclaredGlobalsInFunctions.set(I,N);return"gscope[lang.chkAssig('"+N.manglename+"',runtimeCtx)]"}throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.InvalidIdentifier,r);}catch(I){throw I;}}function ra(f,r){try{if("MemberExpression"===r.callee.type){if(!0===r.callee.computed)var I=u(f,r.callee.property);else I="'"+r.callee.property.name+"'",ea(r.callee.property.name);var N="[";for(var S=0;S<r.arguments.length;S++)0<S&&(N+=", "),N+=u(f,r.arguments[S]);N+="]";return f.isAsync?"(yield lang.callModuleFunction("+
u(f,r.callee.object)+","+N+","+I+",runtimeCtx))":"lang.callModuleFunction("+u(f,r.callee.object)+","+N+","+I+",runtimeCtx)"}if("Identifier"!==r.callee.type)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.FuncionNotFound,r);const ja=r.callee.name.toLowerCase();if("iif"===ja){try{if(3!==r.arguments.length)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.WrongNumberOfParameters,r);const da=sa(f);var W=`${f.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${da} = ${u(f,r.arguments[0])};\n       \n        if (${da} === true) {\n          return  ${u(f,r.arguments[1])};\n        }\n        else if (${da} === false) {\n          return ${u(f,r.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${f.isAsync?"})}()))":"}()"}`}catch(da){throw da;}return W}if("when"===ja){try{if(3>r.arguments.length)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.WrongNumberOfParameters,
r);if(0===r.arguments.length%2)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.WrongNumberOfParameters,r);const da=sa(f);S="var ";for(var aa=0;aa<r.arguments.length-1;aa+=2)S+=`${da} = lang.mustBoolean(${u(f,r.arguments[aa])}, runtimeCtx);\n      if (${da} === true ) {\n        return ${u(f,r.arguments[aa+1])} \n      }\n`;N=`${f.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${S}\n        return ${u(f,r.arguments[r.arguments.length-
1])}\n        ${f.isAsync?"})}()))":"}()"}`}catch(da){throw da;}return N}if("decode"===ja){try{if(2>r.arguments.length)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.WrongNumberOfParameters,r);if(2===r.arguments.length)S=`(${u(f,r.arguments[1])})`;else{if(0===(r.arguments.length-1)%2)throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.WrongNumberOfParameters,r);aa=sa(f);var fa=sa(f);N="var ";for(I=1;I<r.arguments.length-1;I+=2)N+=`${fa} = ${u(f,r.arguments[I])};\n      if (lang.binary(${fa}, ${aa}, "==") === true ) {\n        return ${u(f,
r.arguments[I+1])} \n      }\n`;S=`${f.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${aa} = ${u(f,r.arguments[0])};\n        ${N}\n        return ${u(f,r.arguments[r.arguments.length-1])}\n        ${f.isAsync?"})}()))":"}()"}`}}catch(da){throw da;}return S}N="";null!==f.localScope&&(void 0!==f.localScope[ja]?N="lscope['"+ja+"']":void 0!==f.localScope._SymbolsMap[ja]&&(N="lscope['"+f.localScope._SymbolsMap[ja]+"']"));if(""===
N)if(void 0!==f.globalScope[ja])N="gscope['"+ja+"']";else if(void 0!==f.globalScope._SymbolsMap[ja])N="gscope['"+f.globalScope._SymbolsMap[ja]+"']";else if(null!==f.localScope)if(f.undeclaredGlobalsInFunctions.has(ja))N="gscope[lang.chkAssig('"+f.undeclaredGlobalsInFunctions.get(ja).manglename+"',runtimeCtx)]";else{const da={manglename:va(f),node:r.argument};f.undeclaredGlobalsInFunctions.set(ja,da);N="gscope[lang.chkAssig('"+da.manglename+"',runtimeCtx)]"}if(""!==N){S="[";for(aa=0;aa<r.arguments.length;aa++)0<
aa&&(S+=", "),S+=u(f,r.arguments[aa]);S+="]";return f.isAsync?"(yield lang.callfunc("+N+","+S+",runtimeCtx) )":"lang.callfunc("+N+","+S+",runtimeCtx)"}throw new d.ArcadeCompilationError(f,d.ExecutionErrorCodes.FuncionNotFound,r);}catch(ja){throw ja;}}function va(f){f.symbols.symbolCounter++;return"_T"+f.symbols.symbolCounter.toString()}function sa(f){f.symbols.symbolCounter++;return"_Tvar"+f.symbols.symbolCounter.toString()}function ka(f,r,I){const N={};f||(f={});I||(I={});N._SymbolsMap={};N.textformatting=
1;N.infinity=1;N.pi=1;for(const S in r)N[S]=1;for(const S in I)N[S]=1;for(const S in f)N[S]=1;return N}function U(f,r,I,N){I=I?new Q:new H;f||(f={});r||(r={});const S=new p({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});S.immutable=!1;I._SymbolsMap={textformatting:1,infinity:1,pi:1};I.textformatting=S;I.infinity=Number.POSITIVE_INFINITY;I.pi=Math.PI;for(const W in r)I[W]=r[W],I._SymbolsMap[W]=1;for(const W in f)I._SymbolsMap[W]=1,I[W]=f[W]&&"esri.Graphic"===
f[W].declaredClass?m.createFromGraphic(f[W],N??null):f[W];return I}function ca(f,r){const I={mode:r,compiled:!0,functions:{},signatures:[],standardFunction:t,standardFunctionAsync:t,evaluateIdentifier:oa};for(let N=0;N<f.length;N++)f[N].registerFunctions(I);if("sync"===r){for(const N in I.functions)K[N]=new B.NativeFunction(I.functions[N]),H.prototype[N]=K[N];for(f=0;f<I.signatures.length;f++)A.addFunctionDeclaration(I.signatures[f],"sync")}else{for(const N in I.functions)P[N]=new B.NativeFunction(I.functions[N]),
Q.prototype[N]=P[N];for(f=0;f<I.signatures.length;f++)A.addFunctionDeclaration(I.signatures[f],"async")}}function oa(f,r){r=r.name;if("_SymbolsMap"===r)throw new d.ArcadeExecutionError(f,d.ExecutionErrorCodes.InvalidIdentifier,null);if(0<f.localStack.length){if("_t"!==r.substr(0,2).toLowerCase()&&void 0!==f.localStack[f.localStack.length-1][r])return f.localStack[f.localStack.length-1][r];const I=f.mangleMap[r];if(void 0!==I&&void 0!==f.localStack[f.localStack.length-1][I])return f.localStack[f.localStack.length-
1][I]}if("_t"!==r.substr(0,2).toLowerCase()&&void 0!==f.globalScope[r]||1===f.globalScope._SymbolsMap[r])return f.globalScope[r];r=f.mangleMap[r];if(void 0!==r)return f.globalScope[r]}function ta(f){console.log(f)}function L(f,r,I=!1){r={isAsync:I,moduleFactory:r.moduleFactory,moduleFactoryMap:{},libraryResolver:new h.ArcadeModuleLoader(null,f.loadedModules),globalScope:ka(r.vars,I?P:K,r.customfunctions),customfunctions:r.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,
depthCounter:{depth:1},exports:{},console:ta,lrucache:r.lrucache,timeReference:r.timeReference??null,interceptor:r.interceptor,services:r.services,symbols:{symbolCounter:0}};f=u(r,f);""===f&&(f="lc.voidOperation; ");const N=r.moduleFactory,S=r.moduleFactoryMap,W=r.exports,aa={};for(var fa in W)aa[fa]=void 0!==r.mangleMap[fa]?r.mangleMap[fa]:fa;fa={lc:b.lc,lang:T,mangles:r.mangleMap,prepareModule(ja){return new Z(ja)},prepare(ja,da){let pa=ja.spatialReference;if(null===pa||void 0===pa)pa=new n({wkid:102100});
const wa=U(ja.vars,ja.customfunctions,da,ja.timeReference);return{localStack:[],isAsync:da,exports:W,exportmangle:aa,gdefs:{},moduleFactory:N,moduleFactoryMap:S,moduleSingletons:ja.moduleSingletons,mangleMap:this.mangles,spatialReference:pa,globalScope:wa,abortSignal:void 0===ja.abortSignal||null===ja.abortSignal?{aborted:!1}:ja.abortSignal,localScope:null,services:ja.services,console:ja.console??ta,lrucache:ja.lrucache,timeReference:ja.timeReference??null,interceptor:ja.interceptor,symbols:{symbolCounter:0},
depthCounter:ja.depthCounter}}};return(new Function("context","spatialReference",I?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+f+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":
"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+f+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(fa)}let G=function(f){function r(N,S){var W=I.call(this);W.paramCount=S;W.fn=N;return W}C._inherits(r,f);var I=C._createSuper(r);f=r.prototype;f.createFunction=function(N){return(...S)=>{if(S.length!==
this.paramCount)throw new d.ArcadeExecutionError(N,d.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...S)}};f.call=function(N,S){return this.fn(...S.arguments)};f.marshalledCall=function(N,S,W,aa){return aa(N,S,(fa,ja,da)=>{da=da.map(pa=>!b.isFunctionParameter(pa)||pa instanceof B.ScopeMarshalledFunction?pa:B.wrapModuleScopedResponse(pa,N,aa));fa=this.call(W,{arguments:da});return a.isPromiseLike(fa)?fa.then(pa=>B.wrapModuleScopedResponse(pa,W,aa)):fa})};return C._createClass(r)}(B.ArcadeFunction);
const K={};q.registerFunctions(K,t);c.registerFunctions(K,t);l.registerFunctions(K,t);x.registerFunctions(K,t);k.registerFunctions(K,t);K.iif=function(f,r){try{return t(f,r,(I,N,S)=>{throw new d.ArcadeExecutionError(f,d.ExecutionErrorCodes.Unrecognised,r);})}catch(I){throw I;}};K.decode=function(f,r){try{return t(f,r,(I,N,S)=>{throw new d.ArcadeExecutionError(f,d.ExecutionErrorCodes.Unrecognised,r);})}catch(I){throw I;}};K.when=function(f,r){try{return t(f,r,(I,N,S)=>{throw new d.ArcadeExecutionError(f,
d.ExecutionErrorCodes.Unrecognised,r);})}catch(I){throw I;}};const P={};for(const f in K)P[f]=new B.NativeFunction(K[f]);w.registerFunctions(K,t);for(const f in K)K[f]=new B.NativeFunction(K[f]);const H=function(){};H.prototype=K;const Q=function(){};Q.prototype=P;q={fixSpatialReference:b.fixSpatialReference,parseArguments:function(f,r){const I=[];for(let N=0;N<r.arguments.length;N++)I.push(u(f,r.arguments[N]));return I},standardFunction:t};ca([z.ArrayFunctions],"sync");ca([z.ArrayFunctions],"async");
let O=0;const T={error(f){throw new d.ArcadeExecutionError(null,f,null);},__awaiter(f,r,I,N){return new Promise((S,W)=>{function aa(da){try{ja(N.next(da))}catch(pa){W(pa)}}function fa(da){try{ja(N["throw"](da))}catch(pa){W(pa)}}function ja(da){da.done?S(da.value):da.value&&da.value.then?da.value.then(aa,fa):(O++,0===O%100?setTimeout(()=>{O=0;aa(da.value)},0):aa(da.value))}ja((N=N.apply(f,r||[])).next())})},functionDepthchecker(f,r){return function(){r.depthCounter.depth++;r.localStack.push([]);if(64<
r.depthCounter.depth)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.MaximumCallDepth,null);const I=f.apply(this,arguments);if(a.isPromiseLike(I))return I.then(N=>{r.depthCounter.depth--;--r.localStack.length;return N});r.depthCounter.depth--;--r.localStack.length;return I}},chkAssig(f,r){if(void 0===r.gdefs[f])throw new d.ArcadeExecutionError(r,d.ExecutionErrorCodes.InvalidIdentifier,null);return f},mustBoolean(f,r){if(!0===f||!1===f)return f;throw new d.ArcadeExecutionError(r,d.ExecutionErrorCodes.BooleanConditionRequired,
null);},setAssig(f,r){r.gdefs[f]=1;return f},castString(f){return b.toString(f)},aCheck(f,r){if(b.isFunctionParameter(f)){if("ArrayExpression"===r)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===r)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return f===b.voidOperation?null:f},Dictionary:p,Feature:m,UserDefinedCompiledFunction:G,
dictionary(f){const r={},I=new Map;for(let N=0;N<f.length;N+=2){if(b.isFunctionParameter(f[N+1]))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===b.isString(f[N]))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyMustBeString,null);let S=f[N].toString();const W=S.toLowerCase();I.has(W)?S=I.get(W):I.set(W,S);r[S]=f[N+1]===b.voidOperation?null:f[N+1]}f=new p(r);f.immutable=!1;return f},strCheck(f){if(!1===b.isString(f))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.KeyMustBeString,null);return f},unary(f,r){if(b.isBoolean(f)){if("!"===r)return!f;if("-"===r)return-1*b.toNumber(f);if("+"===r)return 1*b.toNumber(f);if("~"===r)return~b.toNumber(f);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===r)return-1*b.toNumber(f);if("+"===r)return 1*b.toNumber(f);if("~"===r)return~b.toNumber(f);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(f){if(!1===
b.isBoolean(f))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,null);return f},logical(f,r,I){if(b.isBoolean(f)&&b.isBoolean(r))switch(I){case "||":return f||r;case "\x26\x26":return f&&r}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary(f,r,I){switch(I){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return b.binaryOperator(b.toNumber(f),b.toNumber(r),I);case "\x3d\x3d":return b.equalityTest(f,
r);case "\x3d":return b.equalityTest(f,r);case "!\x3d":return!b.equalityTest(f,r);case "\x3c":return b.greaterThanLessThan(f,r,I);case "\x3e":return b.greaterThanLessThan(f,r,I);case "\x3c\x3d":return b.greaterThanLessThan(f,r,I);case "\x3e\x3d":return b.greaterThanLessThan(f,r,I);case "+":return b.isString(f)||b.isString(r)?b.toString(f)+b.toString(r):b.toNumber(f)+b.toNumber(r);case "-":return b.toNumber(f)-b.toNumber(r);case "*":return b.toNumber(f)*b.toNumber(r);case "/":return b.toNumber(f)/
b.toNumber(r);case "%":return b.toNumber(f)%b.toNumber(r);default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedOperator,null);}},assign(f,r,I){switch(r){case "\x3d":return f===b.voidOperation?null:f;case "/\x3d":return b.toNumber(I)/b.toNumber(f);case "*\x3d":return b.toNumber(I)*b.toNumber(f);case "-\x3d":return b.toNumber(I)-b.toNumber(f);case "+\x3d":return b.isString(I)||b.isString(f)?b.toString(I)+b.toString(f):b.toNumber(I)+b.toNumber(f);case "%\x3d":return b.toNumber(I)%
b.toNumber(f);default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedOperator,null);}},update(f,r,I,N){const S=b.toNumber(f[r]);f[r]="++"===I?S+1:S-1;return!1===N?S:"++"===I?S+1:S-1},graphicToFeature(f,r,I){return null===f?null:m.createFromGraphicLikeObject(f.geometry,f.attributes,r,I.timeReference)},memberupdate(f,r,I,N){let S;if(b.isArray(f))if(b.isNumber(r)){0>r&&(r=f.length+r);if(0>r||r>=f.length)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);
S=b.toNumber(f[r]);f[r]="++"===I?S+1:S-1}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(f instanceof p){if(!1===b.isString(r))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===f.hasField(r))S=b.toNumber(f.field(r)),f.setField(r,"++"===I?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null,{key:r});}else if(b.isFeature(f)){if(!1===b.isString(r))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===f.hasField(r))S=b.toNumber(f.field(r)),f.setField(r,"++"===I?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);}else{if(b.isImmutableArray(f))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.Immutable,null);if(f instanceof Z){if(!1===b.isString(r))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===f.hasGlobal(r))S=b.toNumber(f.global(r)),
f.setGlobal(r,"++"===I?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===N?S:"++"===I?S+1:S-1},assignmember(f,r,I,N){if(b.isArray(f))if(b.isNumber(r)){0>r&&(r=f.length+r);if(0>r||r>f.length)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);if(r===f.length&&"\x3d"!==I)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,
null);f[r]=this.assign(N,I,f[r])}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(f instanceof p){if(!1===b.isString(r))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===f.hasField(r))f.setField(r,this.assign(N,I,f.field(r)));else{if("\x3d"!==I)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);f.setField(r,this.assign(N,I,null))}}else if(b.isFeature(f)){if(!1===b.isString(r))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===f.hasField(r))f.setField(r,this.assign(N,I,f.field(r)));else{if("\x3d"!==I)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);f.setField(r,this.assign(N,I,null))}}else{if(b.isImmutableArray(f))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.Immutable,null);if(f instanceof Z){if(!1===b.isString(r))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(f.hasGlobal(r))f.setGlobal(r,
this.assign(N,I,f.global(r)));else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);}},member(f,r){if(null===f)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.MemberOfNull,null);if(f instanceof p||b.isFeature(f)){if(b.isString(r))return f.field(r);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(f instanceof e){if(b.isString(r))return x.geometryMember(f,
r,null,null);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(b.isArray(f)){if(b.isNumber(r)&&isFinite(r)&&Math.floor(r)===r){0>r&&(r=f.length+r);if(r>=f.length||0>r)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);return f[r]}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(b.isString(f)){if(b.isNumber(r)&&isFinite(r)&&Math.floor(r)===r){0>r&&(r=f.length+r);if(r>=f.length||0>r)throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.OutOfBounds,null);return f[r]}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(b.isImmutableArray(f)){if(b.isNumber(r)&&isFinite(r)&&Math.floor(r)===r){0>r&&(r=f.length()+r);if(r>=f.length()||0>r)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);return f.get(r)}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(f instanceof Z&&b.isString(r))return f.global(r);throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(f,r,I){return f.call(I,{arguments:r,preparsed:!0})},loadModule(f,r){f=r.moduleFactoryMap[f];if(r.moduleSingletons[f])return r.moduleSingletons[f];const I=r.moduleFactory[f]({vars:{},moduleSingletons:r.moduleSingletons,depthCounter:r.depthCounter,console:r.console,abortSignal:r.abortSignal,isAsync:r.isAsync,services:r.services,lrucache:r.lrucache,timeReference:r.timeReference??null,interceptor:r.interceptor},r.spatialReference);return r.moduleSingletons[f]=
I},callModuleFunction(f,r,I,N){if(!(f instanceof Z))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FuncionNotFound,null);f=f.global(I);if(!1===b.isFunctionParameter(f))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CallNonFunction,null);return f.call(N,{preparsed:!0,arguments:r})}};let Z=function(f){function r(N){var S=I.call(this,null);S.moduleContext=N;return S}C._inherits(r,f);var I=C._createSuper(r);f=r.prototype;f.hasGlobal=function(N){void 0===this.moduleContext.exports[N]&&
(N=N.toLowerCase());return void 0!==this.moduleContext.exports[N]?!0:!1};f.setGlobal=function(N,S){const W=this.moduleContext.globalScope;N=N.toLowerCase();if(b.isFunctionParameter(S))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AssignModuleFunction,null);W[this.moduleContext.exportmangle[N]]=S};f.global=function(N){const S=this.moduleContext.globalScope;N=N.toLowerCase();const W=S[this.moduleContext.exportmangle[N]];if(void 0===W)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,
null);if(b.isFunctionParameter(W)&&!(W instanceof B.ScopeMarshalledFunction)){const aa=new B.ScopeMarshalledFunction;aa.fn=W;aa.parameterEvaluator=t;aa.context=this.moduleContext;return S[this.moduleContext.exportmangle[N]]=aa}return W};return C._createClass(r)}(D.ArcadeModule);F.UserDefinedCompiledFunction=G;F.compileScript=function(f,r,I=!1){null===r&&(r={vars:{},customfunctions:{}});var N=null;f.usesModules&&(N=new h.ArcadeModuleLoader(null,f.loadedModules));N={isAsync:I,globalScope:ka(r.vars,
I?P:K,r.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:r.customfunctions,libraryResolver:N,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:ta,lrucache:r.lrucache,timeReference:r.timeReference??null,interceptor:r.interceptor,services:r.services,symbols:{symbolCounter:0}};f=u(N,f);""===f&&(f="lc.voidOperation; ");0<N.undeclaredGlobalsInFunctions.size&&N.undeclaredGlobalsInFunctions.forEach(da=>{throw new d.ArcadeCompilationError(r,
d.ExecutionErrorCodes.InvalidIdentifier,da.node);});const S=N.moduleFactory,W=N.moduleFactoryMap,aa=N.exports,fa={};for(var ja in aa)fa[ja]=void 0!==N.mangleMap[ja]?N.mangleMap[ja]:ja;ja={lc:b.lc,lang:T,mangles:N.mangleMap,postProcess(da){da instanceof b.ReturnResult&&(da=da.value);da instanceof b.ImplicitResult&&(da=da.value);da===b.voidOperation&&(da=null);if(da===b.breakResult)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.IllegalResult,null);if(da===b.continueResult)throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.IllegalResult,null);if(b.isFunctionParameter(da))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.IllegalResult,null);return da},prepare(da,pa){let wa=da.spatialReference;if(null===wa||void 0===wa)wa=n.WebMercator;const Ha=U(da.vars,da.customfunctions,pa,da.timeReference);return{localStack:[],isAsync:pa,moduleFactory:S,moduleFactoryMap:W,mangleMap:this.mangles,moduleSingletons:{},exports:aa,gdefs:{},exportmangle:fa,spatialReference:wa,globalScope:Ha,abortSignal:void 0===
da.abortSignal||null===da.abortSignal?{aborted:!1}:da.abortSignal,localScope:null,services:da.services,console:da.console??ta,lrucache:da.lrucache,timeReference:da.timeReference??null,interceptor:da.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",I?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
f+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+f+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(ja)};F.enableAsyncSupport=async function(){const f=await new Promise((r,I)=>v(["./functions/geomasync"],r,I));ca([f],"async");return!0};
F.executeScript=function(f,r){return f(r)};F.extend=ca;F.functionHelper=q;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Dictionary":function(){define("../chunks/_rollupPluginBabelHelpers ./ArcadeDate ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(v,F,C,p,m,b){function A(q,x,w=!1){if(null===q||void 0===q)return null;if(m.isNumber(q))return m.toNumber(q);if(m.isBoolean(q))return m.toBoolean(q);if(m.isString(q))return m.toString(q);
if(m.isDate(q))return m.toDate(q,x);if(m.isArray(q)){var l=[];for(var k of q)l.push(A(k,x,w));return l}k=new z;k.immutable=!1;for(l of Object.keys(q)){const c=q[l];void 0!==c&&k.setField(l,A(c,x,w))}k.immutable=w;return k}let z=function(){function q(w){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=w instanceof q?w.attributes:void 0===w?{}:null===w?{}:w}var x=q.prototype;x.field=function(w){const l=w.toLowerCase(),k=this.attributes[w];
if(void 0!==k)return k;for(const c in this.attributes)if(c.toLowerCase()===l)return this.attributes[c];throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.FieldNotFound,null,{key:w});};x.setField=function(w,l){if(this.immutable)throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.Immutable,null);if(m.isFunctionParameter(l))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.NoFunctionInDictionary,null);const k=w.toLowerCase();l instanceof Date&&(l=F.ArcadeDate.dateJSToArcadeDate(l));
if(void 0===this.attributes[w])for(const c in this.attributes)if(c.toLowerCase()===k){this.attributes[c]=l;return}this.attributes[w]=l};x.hasField=function(w){const l=w.toLowerCase();if(void 0!==this.attributes[w])return!0;for(const k in this.attributes)if(k.toLowerCase()===l)return!0;return!1};x.keys=function(){let w=[];for(const l in this.attributes)w.push(l);return w=w.sort()};x.castToText=function(w=!1){let l="";for(const k in this.attributes){""!==l&&(l+=",");const c=this.attributes[k];null==
c?l+=JSON.stringify(k)+":null":m.isBoolean(c)||m.isNumber(c)||m.isString(c)?l+=JSON.stringify(k)+":"+JSON.stringify(c):c instanceof b?l+=JSON.stringify(k)+":"+m.toStringExplicit(c):c instanceof p?l+=JSON.stringify(k)+":"+m.toStringExplicit(c,null,w):c instanceof Array?l+=JSON.stringify(k)+":"+m.toStringExplicit(c,null,w):c instanceof F.ArcadeDate?l=w?l+(JSON.stringify(k)+":"+JSON.stringify(c.getTime())):l+(JSON.stringify(k)+":"+c.stringify()):null!==c&&"object"===typeof c&&void 0!==c.castToText&&
(l+=JSON.stringify(k)+":"+c.castToText(w))}return"{"+l+"}"};q.convertObjectToArcadeDictionary=function(w,l,k=!0){const c=new q;c.immutable=!1;for(const a in w){const e=w[a];void 0!==e&&c.setField(a.toString(),A(e,l))}c.immutable=k;return c};q.convertJsonToArcade=function(w,l,k=!1){return A(w,l,k)};x.castAsJson=function(w=null){const l={};for(let k in this.attributes){const c=this.attributes[k];void 0!==c&&(w?.keyTranslate&&(k=w.keyTranslate(k)),l[k]=m.castAsJson(c,w))}return l};x.castDictionaryValueAsJsonAsync=
async function(w,l,k,c=null,a){k=await m.castAsJsonAsync(k,c,a);return w[l]=k};x.castAsJsonAsync=async function(w=null,l=null){const k={},c=[];for(let a in this.attributes){const e=this.attributes[a];l?.keyTranslate&&(a=l.keyTranslate(a));void 0!==e&&(m.isSimpleType(e)||e instanceof b||e instanceof F.ArcadeDate?k[a]=m.castAsJson(e,l):c.push(this.castDictionaryValueAsJsonAsync(k,a,e,w,l)))}0<c.length&&await Promise.all(c);return k};return v._createClass(q)}();return z})},"esri/arcade/ArcadeDate":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","./executionError","../chunks/datetime"],function(v,F,C,p){function m(x){if(x instanceof p.Zone)return x;if("system"===x.toLowerCase())return"system";if("utc"===x.toLowerCase())return"utc";if("unknown"===x.toLowerCase())return b.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(x)){const w=p.FixedOffsetZone.parseSpecifier("UTC"+(x.startsWith("+")||x.startsWith("-")?"":"+")+x);if(w)return w}x=p.IANAZone.create(x);if(!x.isValid)throw new z(v.ArcadeDateErrorCodes.TimeZoneNotRecognised);
return x}let b=F._createClass(function(){});b.instance=new p.IANAZone("Etc/UTC");v.ArcadeDateErrorCodes=void 0;(v.ArcadeDateErrorCodes||(v.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const A={[v.ArcadeDateErrorCodes.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};let z=function(x){function w(k,c){k=l.call(this,C.doSubstitutions(A[k],c));k.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(F._assertThisInitialized(k),
w);return k}F._inherits(w,x);var l=F._createSuper(w);return F._createClass(w)}(F._wrapNativeSuper(Error)),q=function(){function x(l){this._date=l;this.declaredRootClass="esri.arcade.arcadedate"}x.fromParts=function(l=0,k=1,c=1,a=0,e=0,n=0,h=0,D){if(isNaN(l)||isNaN(k)||isNaN(c)||isNaN(a)||isNaN(e)||isNaN(n)||isNaN(h))return null;let B=0;var d=p.DateTime.local(l,k).daysInMonth;1>c&&(B=c-1,c=1);c>d&&(B=c-d,c=d);d=0;12<k?(d=k-12,k=12):1>k&&(d=k-1,k=1);let t=0;59<e?(t=e-59,e=59):0>e&&(t=e,e=0);let u=0;
59<n?(u=n-59,n=59):0>n&&(u=n,n=0);let E=0;999<h?(E=h-999,h=999):0>h&&(E=h,h=0);l=p.DateTime.fromObject({day:c,year:l,month:k,hour:a,minute:e,second:n,millisecond:h},{zone:m(D)});0!==d&&(l=l.plus({months:d}));0!==B&&(l=l.plus({days:B}));0!==t&&(l=l.plus({minutes:t}));0!==u&&(l=l.plus({seconds:u}));0!==E&&(l=l.plus({milliseconds:E}));return new x(l)};x.arcadeDateAndZoneToArcadeDate=function(l,k){const c=m(k);return l.isUnknownTimeZone||c===b.instance?x.fromParts(l.year,l.monthJS+1,l.day,l.hour,l.minute,
l.second,l.millisecond,c):new x(l._date.setZone(k))};x.dateJSToArcadeDate=function(l){return new x(p.DateTime.fromJSDate(l,{zone:"system"}))};x.dateJSAndZoneToArcadeDate=function(l,k="system"){return new x(p.DateTime.fromJSDate(l,{zone:k}))};x.unknownEpochToArcadeDate=function(l){return new x(p.DateTime.fromMillis(l,{zone:b.instance}))};x.unknownDateJSToArcadeDate=function(l){return new x(p.DateTime.fromMillis(l.getTime(),{zone:b.instance}))};x.epochToArcadeDate=function(l,k="system"){return new x(p.DateTime.fromMillis(l,
{zone:k}))};x.dateTimeToArcadeDate=function(l){return new x(l)};var w=x.prototype;w.changeTimeZone=function(l){l=m(l);return x.dateTimeToArcadeDate(this._date.setZone(l))};x.dateTimeAndZoneToArcadeDate=function(l,k){k=m(k);return l.zone===b.instance||k===b.instance?x.fromParts(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond,k):new x(l.setZone(k))};x.nowToArcadeDate=function(l){return new x(p.DateTime.fromJSDate(new Date,{zone:l}))};x.nowUTCToArcadeDate=function(){return new x(p.DateTime.utc())};
w.equals=function(l){return this.isSystem&&l.isSystem?this.toNumber()===l.toNumber():this.isUnknownTimeZone!==l.isUnknownTimeZone?!1:this._date.equals(l._date)};w.stringify=function(){return JSON.stringify(this.toJSDate())};w.plus=function(l){return new x(this._date.plus(l))};w.diff=function(l,k="milliseconds"){return this._date.diff(l._date,k)[k]};w.toISOString=function(l){return l?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};
w.toFormat=function(l,k){return this._date.toFormat(l,k)};w.toJSDate=function(){return this._date.toJSDate()};w.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};w.toDateTime=function(){return this._date};w.toNumber=function(){return this._date.toMillis()};w.getTime=function(){return this._date.toMillis()};w.toUTC=function(){return new x(this._date.toUTC())};w.toLocal=function(){return new x(this._date.toLocal())};w.toString=function(){return this.toISOString(!0)};
F._createClass(x,[{key:"isSystem",get:function(){return"system"===this.timeZone||this.timeZone===x.systemTimeZoneCanonicalName}},{key:"isUnknownTimeZone",get:function(){return this._date.zone===b.instance}},{key:"isValid",get:function(){return this._date.isValid}},{key:"hour",get:function(){return this._date.hour}},{key:"second",get:function(){return this._date.second}},{key:"day",get:function(){return this._date.day}},{key:"dayOfWeekISO",get:function(){return this._date.weekday}},{key:"dayOfWeekJS",
get:function(){let l=this._date.weekday;6<l&&(l=0);return l}},{key:"millisecond",get:function(){return this._date.millisecond}},{key:"monthISO",get:function(){return this._date.month}},{key:"weekISO",get:function(){return this._date.weekNumber}},{key:"yearISO",get:function(){return this._date.weekYear}},{key:"monthJS",get:function(){return this._date.month-1}},{key:"year",get:function(){return this._date.year}},{key:"minute",get:function(){return this._date.minute}},{key:"zone",get:function(){return this._date.zone}},
{key:"timeZoneOffset",get:function(){return this.isUnknownTimeZone?0:this._date.offset}},{key:"timeZone",get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const l=this.zone;return"fixed"===l.type?0===l.fixed?"utc":l.formatOffset(0,"short"):l.name}}],[{key:"systemTimeZoneCanonicalName",get:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}}]);return x}();v.ArcadeDate=q;v.ArcadeDateError=z;v.ArcadeDateErrorMessages=
A;v.UnknownTimeZone=b;v.createDateTimeZone=m;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(v,F){function C(k){return k&&k.loc?`Line : ${k.loc.start?.line}, ${k.loc.start?.column}: `:""}function p(k,c){try{if(!c)return k;for(const a in c){let e=c[a];e||(e="");k=k.replace("{"+a+"}",c[a])}}catch(a){}return k}v.ExecutionErrorCodes=void 0;(function(k){k.AsyncNotEnabled="AsyncNotEnabled";
k.ModulesNotSupported="ModulesNotSupported";k.CircularModules="CircularModules";k.NeverReach="NeverReach";k.UnsupportedHashType="UnsupportedHashType";k.InvalidParameter="InvalidParameter";k.UnexpectedToken="UnexpectedToken";k.Unrecognised="Unrecognised";k.UnrecognisedType="UnrecognisedType";k.MaximumCallDepth="MaximumCallDepth";k.BooleanConditionRequired="BooleanConditionRequired";k.TypeNotAllowedInFeature="TypeNotAllowedInFeature";k.KeyMustBeString="KeyMustBeString";k.WrongNumberOfParameters="WrongNumberOfParameters";
k.CallNonFunction="CallNonFunction";k.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";k.NoFunctionInDictionary="NoFunctionInDictionary";k.NoFunctionInArray="NoFunctionInArray";k.AssignModuleFunction="AssignModuleFunction";k.LogicExpressionOrAnd="LogicExpressionOrAnd";k.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";k.FuncionNotFound="FunctionNotFound";k.InvalidMemberAccessKey="InvalidMemberAccessKey";k.UnsupportedUnaryOperator="UnsupportUnaryOperator";k.InvalidIdentifier="InvalidIdentifier";
k.MemberOfNull="MemberOfNull";k.UnsupportedOperator="UnsupportedOperator";k.Cancelled="Cancelled";k.ModuleAccessorMustBeString="ModuleAccessorMustBeString";k.ModuleExportNotFound="ModuleExportNotFound";k.Immutable="Immutable";k.OutOfBounds="OutOfBounds";k.IllegalResult="IllegalResult";k.FieldNotFound="FieldNotFound";k.PortalRequired="PortalRequired";k.LogicError="LogicError";k.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";k.KeyAccessorMustBeString="KeyAccessorMustBeString";k.WrongSpatialReference=
"WrongSpatialReference"})(v.ExecutionErrorCodes||(v.ExecutionErrorCodes={}));const m={[v.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[v.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[v.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[v.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[v.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[v.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",
[v.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[v.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[v.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[v.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[v.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[v.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[v.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",
[v.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[v.ExecutionErrorCodes.PortalRequired]:"Portal is required",[v.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[v.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[v.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[v.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[v.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[v.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[v.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[v.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[v.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[v.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[v.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[v.ExecutionErrorCodes.Immutable]:"Object is immutable",
[v.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[v.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[v.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[v.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[v.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[v.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[v.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[v.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",
[v.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[v.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[v.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[v.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[v.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[v.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};
let b=function(k){function c(...e){return a.call(this,...e)}F._inherits(c,k);var a=F._createSuper(c);return F._createClass(c)}(F._wrapNativeSuper(Error)),A=function(k){function c(e,n){e=a.call(this,C(n)+e.message,{cause:e});e.loc=null;Error.captureStackTrace&&Error.captureStackTrace(F._assertThisInitialized(e),c);n&&n.loc&&(e.loc=n.loc);return e}F._inherits(c,k);var a=F._createSuper(c);return F._createClass(c)}(b),z=function(k){function c(e,n,h,D){e=a.call(this,"Execution error - "+C(h)+p(m[n],D));
e.loc=null;e.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(F._assertThisInitialized(e),c);h&&h.loc&&(e.loc=h.loc);return e}F._inherits(c,k);var a=F._createSuper(c);return F._createClass(c)}(F._wrapNativeSuper(Error)),q=function(k){function c(e,n,h,D){e=a.call(this,"Compilation error - "+C(h)+p(m[n],D));e.loc=null;e.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(F._assertThisInitialized(e),
c);h&&h.loc&&(e.loc=h.loc);return e}F._inherits(c,k);var a=F._createSuper(c);return F._createClass(c)}(F._wrapNativeSuper(Error)),x=function(k){function c(){var e=a.call(this,"Uncompilable code structures");e.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(F._assertThisInitialized(e),c);return e}F._inherits(c,k);var a=F._createSuper(c);return F._createClass(c)}(F._wrapNativeSuper(Error));v.ModuleErrorCodes=void 0;(function(k){k.UnrecognisedUri=
"UnrecognisedUri";k.UnsupportedUriProtocol="UnsupportedUriProtocol"})(v.ModuleErrorCodes||(v.ModuleErrorCodes={}));const w={[v.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[v.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let l=function(k){function c(e,n){e=a.call(this,p(w[e],n));e.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(F._assertThisInitialized(e),c);return e}F._inherits(c,k);var a=F._createSuper(c);
return F._createClass(c)}(F._wrapNativeSuper(Error));v.ArcadeCompilationError=q;v.ArcadeExecutionError=z;v.ArcadeUncompilableError=x;v.ErrorWithCause=b;v.ExecutionErrorMessages=m;v.LocatableArcadeExecutionError=A;v.ModuleError=l;v.ModuleErrorMessages=w;v.doSubstitutions=p;v.ensureArcadeExecutionError=function(k,c,a){return"esri.arcade.arcadeexecutionerror"===a.declaredRootClass||"esri.arcade.arcadecompilationerror"===a.declaredRootClass?null===a.loc&&c&&c.loc?new A(a,{cause:a}):a:c&&c.loc?new A(a,
{cause:a}):a};v.parsingValidationMessage=function(k,c,a){return"Parsing error - "+C(k)+p(m[c],a)};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(["../chunks/_rollupPluginBabelHelpers"],function(v){return function(){function F(p=[]){this._elements=p}var C=F.prototype;C.length=function(){return this._elements.length};C.get=function(p){return this._elements[p]};C.toArray=function(){const p=[];for(let m=0;m<this.length();m++)p.push(this.get(m));
return p};return v._createClass(F)}()})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../arcade/ArcadeDate ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared ../arcade/ArcadeModule ../arcade/executionError".split(" "),
function(v,F,C,p,m,b,A,z,q,x,w,l,k,c,a,e,n,h,D,B,d){function t(y,M,R){return""===M||null===M||void 0===M||M===R||M===R?y:y=y.split(M).join(R)}function u(y){return y instanceof C.ArcadeFunction}function E(y){return y instanceof B.ArcadeModule}function g(y){return X(y)||na(y)||ca(y)||ea(y)||null===y||y===za||"number"===typeof y?!0:!1}function J(y,M){return void 0===y?M:y}function ia(y){return null==y?"":ra(y)||U(y)?"Array":ca(y)?"Date":X(y)?"String":ea(y)?"Boolean":na(y)?"Number":"esri.arcade.Attachment"===
y?.declaredClass?"Attachment":"esri.arcade.Portal"===y?.declaredClass?"Portal":"esri.arcade.Dictionary"===y?.declaredClass?"Dictionary":y instanceof B.ArcadeModule?"Module":va(y)?"Feature":y instanceof w?"Point":y instanceof l?"Polygon":y instanceof k?"Polyline":y instanceof x?"Multipoint":y instanceof z?"Extent":u(y)?"Function":sa(y)?"FeatureSet":ka(y)?"FeatureSetCollection":y===za?"":"number"===typeof y&&isNaN(y)?"Number":"Unrecognised Type"}function X(y){return"string"===typeof y||y instanceof
String}function ea(y){return"boolean"===typeof y}function na(y){return"number"===typeof y}function xa(y){return"number"===typeof y&&isFinite(y)&&Math.floor(y)===y}function ra(y){return y instanceof Array}function va(y){return"esri.arcade.Feature"===y?.arcadeDeclaredClass?!0:!1}function sa(y){return"esri.arcade.featureset.support.FeatureSet"===y?.declaredRootClass}function ka(y){return"esri.arcade.featureSetCollection"===y?.declaredRootClass}function U(y){return y instanceof p}function ca(y){return y instanceof
A.ArcadeDate}function oa(y){return null!=y&&"object"===typeof y}function ta(y){return y instanceof Date}function L(y,M,R,Y,ba){if(y.length<M||y.length>R)throw new d.ArcadeExecutionError(Y,d.ExecutionErrorCodes.WrongNumberOfParameters,ba);}function G(y){return 0>y?-Math.round(-y):Math.round(y)}function K(){let y=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,M=>{const R=(y+16*Math.random())%16|0;y=Math.floor(y/16);return("x"===M?R:R&3|8).toString(16)})}function P(y,M){if(!isNaN(y)){if(void 0===
M||null===M||""===M)return y.toString();M=t(M,"\u2030","");M=t(M,"\u00a4","");return e.format(y,{pattern:M})}return y.toString()}function H(y,M){return void 0===M||null===M||""===M?y.toISOString(!0):y.toFormat(Q(M),{locale:h.getLocale(),numberingSystem:"latn"})}function Q(y){y=y.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let M="";const R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;
for(const Y of y.match(R)||[])switch(Y){case "D":M+="d";break;case "DD":M+="dd";break;case "DDD":M+="o";break;case "d":M+="c";break;case "ddd":M+="ccc";break;case "dddd":M+="cccc";break;case "M":M+="L";break;case "MM":M+="LL";break;case "MMM":M+="LLL";break;case "MMMM":M+="LLLL";break;case "YY":M+="yy";break;case "Y":case "YYYY":M+="yyyy";break;case "Q":M+="q";break;case "Z":M+="ZZ";break;case "ZZ":M+="ZZZ";break;case "S":M+="'S'";break;case "SS":M+="'SS'";break;case "SSS":M+="u";break;case "A":case "a":M+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":M+=Y;break;default:M=2<=Y.length&&"["===Y.slice(0,1)&&"]"===Y.slice(-1)?M+`'${Y.slice(1,-1)}'`:M+`'${Y}'`}return M}function O(y,M,R){switch(R){case "\x3e":return y>M;case "\x3c":return y<M;case "\x3e\x3d":return y>=M;case "\x3c\x3d":return y<=M}return!1}function T(y,M,R){if(null===y){if(null===M||M===za)return O(null,null,R);if(na(M))return O(0,M,R);if(X(M)||ea(M))return O(0,S(M),R);if(ca(M))return O(0,
M.toNumber(),R)}if(y===za){if(null===M||M===za)return O(null,null,R);if(na(M))return O(0,M,R);if(X(M)||ea(M))return O(0,S(M),R);if(ca(M))return O(0,M.toNumber(),R)}else if(na(y)){if(na(M))return O(y,M,R);if(ea(M))return O(y,S(M),R);if(null===M||M===za)return O(y,0,R);if(X(M))return O(y,S(M),R);if(ca(M))return O(y,M.toNumber(),R)}else if(X(y)){if(X(M))return O(f(y),f(M),R);if(ca(M))return O(S(y),M.toNumber(),R);if(na(M))return O(S(y),M,R);if(null===M||M===za)return O(S(y),0,R);if(ea(M))return O(S(y),
S(M),R)}else if(ca(y)){if(ca(M))return O(y.toNumber(),M.toNumber(),R);if(null===M||M===za)return O(y.toNumber(),0,R);if(na(M))return O(y.toNumber(),M,R);if(ea(M)||X(M))return O(y.toNumber(),S(M),R)}else if(ea(y)){if(ea(M))return O(y,M,R);if(na(M))return O(S(y),S(M),R);if(ca(M))return O(S(y),M.toNumber(),R);if(null===M||M===za)return O(S(y),0,R);if(X(M))return O(S(y),S(M),R)}return!Z(y,M)||"\x3c\x3d"!==R&&"\x3e\x3d"!==R?!1:!0}function Z(y,M){if(y===M||null===y&&M===za||null===M&&y===za)return!0;if(ca(y)&&
ca(M))return y.equals(M);if(y instanceof m||y instanceof b)return y.equalityTest(M);if(y instanceof w&&M instanceof w){const R=y.cache._arcadeCacheId,Y=M.cache._arcadeCacheId;if(void 0!==R&&null!==R)return R===Y}return oa(y)&&oa(M)&&(y._arcadeCacheId===M._arcadeCacheId&&void 0!==y._arcadeCacheId&&null!==y._arcadeCacheId||y._underlyingGraphic===M._underlyingGraphic&&void 0!==y._underlyingGraphic&&null!==y._underlyingGraphic)?!0:!1}function f(y,M){if(X(y))return y;if(null===y)return"";if(na(y))return P(y,
M);if(ea(y))return y.toString();if(ca(y))return H(y,M);if(y instanceof q)return JSON.stringify(y.toJSON());if(ra(y)){M=[];for(var R=0;R<y.length;R++)M[R]=N(y[R]);return"["+M.join(",")+"]"}if(y instanceof p){M=[];for(R=0;R<y.length();R++)M[R]=N(y.get(R));return"["+M.join(",")+"]"}return null!==y&&"object"===typeof y&&void 0!==y.castToText?y.castToText():u(y)?"object, Function":y===za?"":E(y)?"object, Module":""}function r(y){const M=[];if(!ra(y))return null;if(y instanceof p){for(var R=0;R<y.length();R++)M[R]=
S(y.get(R));return M}for(R=0;R<y.length;R++)M[R]=S(y[R]);return M}function I(y,M,R=!1){if(X(y))return y;if(null===y)return"";if(na(y))return P(y,M);if(ea(y))return y.toString();if(ca(y))return H(y,M);if(y instanceof q)return y instanceof z?'{"xmin":'+y.xmin.toString()+',"ymin":'+y.ymin.toString()+","+(y.hasZ?'"zmin":'+y.zmin.toString()+",":"")+(y.hasM?'"mmin":'+y.mmin.toString()+",":"")+'"xmax":'+y.xmax.toString()+',"ymax":'+y.ymax.toString()+","+(y.hasZ?'"zmax":'+y.zmax.toString()+",":"")+(y.hasM?
'"mmax":'+y.mmax.toString()+",":"")+'"spatialReference":'+Ia(y.spatialReference)+"}":Ia(y.toJSON(),(ba,ma)=>ba.key===ma.key?0:"spatialReference"===ba.key?1:"spatialReference"===ma.key||ba.key<ma.key?-1:ba.key>ma.key?1:0);if(ra(y)){M=[];for(var Y=0;Y<y.length;Y++)M[Y]=N(y[Y],R);return"["+M.join(",")+"]"}if(y instanceof p){M=[];for(Y=0;Y<y.length();Y++)M[Y]=N(y.get(Y),R);return"["+M.join(",")+"]"}return null!==y&&"object"===typeof y&&void 0!==y.castToText?y.castToText(R):u(y)?"object, Function":y===
za?"":E(y)?"object, Module":""}function N(y,M=!1){return null===y?"null":ea(y)||na(y)||X(y)?JSON.stringify(y):y instanceof q||y instanceof p||y instanceof Array?I(y,null,M):ca(y)?M?JSON.stringify(y.getTime()):JSON.stringify(H(y,"")):null!==y&&"object"===typeof y&&void 0!==y.castToText?y.castToText(M):"null"}function S(y,M){return na(y)?y:null===y||""===y?0:ca(y)?NaN:ea(y)?y?1:0:ra(y)||""===y||void 0===y?NaN:void 0!==M&&X(y)?(M=t(M,"\u2030",""),M=t(M,"\u00a4",""),e.parse(y,{pattern:M})):y===za?0:Number(y)}
function W(y,M){if(ca(y))return y;if(X(y)){a:{const Y=/ (\d\d)/;var R=A.createDateTimeZone(M);R=c.DateTime.fromISO(y,{zone:R});if(R.isValid)M=R;else{if(Y.test(y)&&(y=y.replace(Y,"T$1"),R=c.DateTime.fromISO(y,{zone:M}),R.isValid)){M=R;break a}M=null}}if(M)return A.ArcadeDate.dateTimeToArcadeDate(M)}return null}function aa(y){return ea(y)?y:X(y)?(y=y.toLowerCase(),"true"===y?!0:!1):na(y)?0===y||isNaN(y)?!1:!0:!1}function fa(y,M){if(a.isNone(y))return null;if(null===y.spatialReference||void 0===y.spatialReference)y.spatialReference=
M;return y}function ja(y){if(null===y)return null;if(y instanceof w)return"NaN"===y.x||null===y.x||isNaN(y.x)?null:y;if(y instanceof l){if(0===y.rings.length)return null;for(const M of y.rings)if(0<M.length)return y;return null}if(y instanceof k){if(0===y.paths.length)return null;for(const M of y.paths)if(0<M.length)return y;return null}return y instanceof x?0===y.points.length?null:y:y instanceof z?"NaN"===y.xmin||null===y.xmin||isNaN(y.xmin)?null:y:null}function da(y,M){if(!y||!y.domain)return M;
let R=null;if("string"===y.field.type||"esriFieldTypeString"===y.field.type)M=f(M);else{if(null===M||void 0===M)return null;if(""===M)return M;M=S(M)}for(let Y=0;Y<y.domain.codedValues.length;Y++){const ba=y.domain.codedValues[Y];ba.code===M&&(R=ba)}return null===R?M:R.name}function pa(y,M){if(!y||!y.domain)return M;let R=null;M=f(M);for(let Y=0;Y<y.domain.codedValues.length;Y++){const ba=y.domain.codedValues[Y];ba.name===M&&(R=ba)}return null===R?M:R.code}function wa(y,M,R=null,Y=null){if(!M||!M.fields)return null;
let ba=null;for(let Da=0;Da<M.fields.length;Da++){const Aa=M.fields[Da];Aa.name.toLowerCase()===y.toString().toLowerCase()&&(ba=Aa)}if(null===ba)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null,{key:y});let ma,qa;null===Y&&R&&M.typeIdField&&(Y=R.hasField(M.typeIdField)?R.field(M.typeIdField):null);null!==Y&&void 0!==Y&&M.types.some(Da=>Da.id===Y?((ma=Da.domains&&Da.domains[ba.name])&&"inherited"===ma.type&&(ma=Ha(ba.name,M),qa=!0),!0):!1);qa||ma||(ma=Ha(y,M));return{field:ba,
domain:ma}}function Ha(y,M){let R;M.fields.some(Y=>{Y.name.toLowerCase()===y.toLowerCase()&&(R=Y.domain);return!!R});return R}function Ia(y,M){M||(M={});"function"===typeof M&&(M={cmp:M});const R="boolean"===typeof M.cycles?M.cycles:!1,Y=M.cmp&&function(ma){return function(qa){return function(Da,Aa){return ma({key:Da,value:qa[Da]},{key:Aa,value:qa[Aa]})}}}(M.cmp),ba=[];return function Da(qa){qa&&qa.toJSON&&"function"===typeof qa.toJSON&&(qa=qa.toJSON());if(void 0!==qa){if("number"===typeof qa)return isFinite(qa)?
""+qa:"null";if("object"!==typeof qa)return JSON.stringify(qa);var Aa;if(Array.isArray(qa)){var Ka="[";for(Aa=0;Aa<qa.length;Aa++)Aa&&(Ka+=","),Ka+=Da(qa[Aa])||"null";return Ka+"]"}if(null===qa)return"null";if(ba.includes(qa)){if(R)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Ya=ba.push(qa)-1,Na=Object.keys(qa).sort(Y&&Y(qa));Ka="";for(Aa=0;Aa<Na.length;Aa++){const Oa=Na[Aa],Pa=Da(qa[Oa]);Pa&&(Ka&&(Ka+=","),Ka+=JSON.stringify(Oa)+":"+Pa)}ba.splice(Ya,
1);return"{"+Ka+"}"}}(y)}function Fa(y){if(null===y)return null;const M=[];for(const R of y)R&&R.arcadeDeclaredClass&&"esri.arcade.Feature"===R.arcadeDeclaredClass?M.push(R.geometry()):M.push(R);return M}function Ca(y,M){if(M instanceof w)y.push(M.hasZ?M.hasM?[M.x,M.y,M.z,M.m]:[M.x,M.y,M.z]:[M.x,M.y]);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);}function Ga(y,M){if(ra(y)||U(y)){let R=!1,Y=!1,ba=[];if(ra(y)){for(const ma of y)Ca(ba,ma);0<ba.length&&(M=y[0].spatialReference,
R=y[0].hasZ,Y=y[0].hasM)}else if(y instanceof b)ba=y._elements,0<ba.length&&(R=y._hasZ,Y=y._hasM,M=y.get(0).spatialReference);else if(U(y)){for(const ma of y.toArray())Ca(ba,ma);0<ba.length&&(M=y.get(0).spatialReference,R=!0===y.get(0).hasZ,Y=!0===y.get(0).hasM)}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);if(0===ba.length)return null;n.isClockwise(ba,Y,R)||(ba=ba.slice(0).reverse());return new l({rings:[ba],spatialReference:M,hasZ:R,hasM:Y})}return y}function ya(y,
M){if(ra(y)||U(y)){let R=!1,Y=!1,ba=[];if(ra(y)){for(const ma of y)Ca(ba,ma);0<ba.length&&(M=y[0].spatialReference,R=!0===y[0].hasZ,Y=!0===y[0].hasM)}else if(y instanceof b)ba=y._elements,0<ba.length&&(R=y._hasZ,Y=y._hasM,M=y.get(0).spatialReference);else if(U(y)){for(const ma of y.toArray())Ca(ba,ma);0<ba.length&&(M=y.get(0).spatialReference,R=!0===y.get(0).hasZ,Y=!0===y.get(0).hasM)}return 0===ba.length?null:new k({paths:[ba],spatialReference:M,hasZ:R,hasM:Y})}return y}function V(y,M){if(ra(y)||
U(y)){let R=!1,Y=!1,ba=[];if(ra(y)){for(const ma of y)Ca(ba,ma);0<ba.length&&(M=y[0].spatialReference,R=!0===y[0].hasZ,Y=!0===y[0].hasM)}else if(y instanceof b)ba=y._elements,0<ba.length&&(R=y._hasZ,Y=y._hasM,M=y.get(0).spatialReference);else if(U(y)){for(const ma of y.toArray())Ca(ba,ma);0<ba.length&&(M=y.get(0).spatialReference,R=!0===y.get(0).hasZ,Y=!0===y.get(0).hasM)}return 0===ba.length?null:new x({points:ba,spatialReference:M,hasZ:R,hasM:Y})}return y}function la(y,M=!1){const R=[];if(null===
y)return R;if(!0===ra(y)){for(var Y=0;Y<y.length;Y++){var ba=f(y[Y]);""===ba&&!0!==M||R.push(ba)}return R}if(y instanceof p){for(Y=0;Y<y.length();Y++)ba=f(y.get(Y)),""===ba&&!0!==M||R.push(ba);return R}return g(y)?(y=f(y),""===y&&!0!==M||R.push(y),R):[]}function ua(y){Ma++;return 0===Ma%100?(Ma=0,new Promise(M=>{setTimeout(()=>{M(y)},0)})):y}function Ja(y,M,R){switch(R){case "\x26":return y&M;case "|":return y|M;case "^":return y^M;case "\x3c\x3c":return y<<M;case "\x3e\x3e":return y>>M;case "\x3e\x3e\x3e":return y>>>
M}}function ha(y,M=null){if(null!=y){if(ea(y)||na(y)||X(y))return y;if(y instanceof q)return!0===M?.keepGeometryType?y:y.toJSON();if(y instanceof p)return y.toArray().map(R=>ha(R,M));if(y instanceof Array)return y.map(R=>ha(R,M));if(ta(y))return y;if(ca(y))return y.toJSDate();if(null!==y&&"object"===typeof y&&void 0!==y.castAsJson)return y.castAsJson(M)}return null}async function Ea(y,M,R,Y,ba){y=await Ba(y,M,R);ba[Y]=y}async function Ba(y,M=null,R=null){y instanceof p&&(y=y.toArray());if(null!=y){if(g(y)||
y instanceof q||ta(y)||ca(y))return ha(y,R);if(y instanceof Array){const Y=[],ba=[];for(const ma of y)null===ma||g(ma)||ma instanceof q||ta(ma)||ca(ma)?ba.push(ha(ma,R)):(ba.push(null),Y.push(Ea(ma,M,R,ba.length-1,ba)));0<Y.length&&await Promise.all(Y);return ba}if(null!==y&&"object"===typeof y&&void 0!==y.castAsJsonAsync)return y.castAsJsonAsync(M,R)}return null}function Qa(y,M,R){const Y=y.fullSchema();return null!==Y&&Y.fields?wa(M,Y,y,R):null}function Ra(y){y=y.fullSchema();return null!==y&&y.fields?
y.typeIdField?{subtypeField:y.typeIdField,subtypes:y.types?y.types.map(M=>({name:M.name,code:M.id})):[]}:null:null}function Sa(y,M,R,Y){const ba=y.fullSchema();if(null===ba||!ba.fields)return null;Y=wa(M,ba,y,Y);if(void 0===R)try{R=y.field(M)}catch(ma){return null}return da(Y,R)}function Ta(y,M,R,Y){const ba=y.fullSchema();if(null===ba||!ba.fields)return null;if(void 0===R){try{R=y.field(M)}catch(ma){return null}return R}y=wa(M,ba,y,Y);return pa(y,R)}function Ua(y){return y?.timeReference?.timeZone??
"system"}function Va(y){y=y.fullSchema();if(null===y||!y.fields)return null;const M=[];for(const R of y.fields)M.push(D.esriFieldToJson(R));return{objectIdField:y.objectIdField,globalIdField:y.globalIdField,geometryType:void 0===D.layerGeometryEsriRestConstants[y.geometryType]?"":D.layerGeometryEsriRestConstants[y.geometryType],fields:M,datesInUnknownTimezone:!0===y.datesInUnknownTimezone,preferredTimeReference:y.preferredTimeReference||null,editFieldsInfo:y.editFieldsInfo||null,timeInfo:y.timeInfo||
null,dateFieldsTimeReference:y.dateFieldsTimeReference||null}}let La=F._createClass(function(y){this.value=y});F=F._createClass(function(y){this.value=y});const za={type:"VOID"},Wa={type:"BREAK"},Xa={type:"CONTINUE"};let Ma=0;const Za=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:F,ImplicitResultE:F,ReturnResult:La,ReturnResultE:La,absRound:G,autoCastArrayOfPointsToMultiPoint:V,autoCastArrayOfPointsToPolygon:Ga,autoCastArrayOfPointsToPolyline:ya,autoCastFeatureToGeometry:Fa,binaryOperator:Ja,
breakResult:Wa,castAsJson:ha,castAsJsonAsync:Ba,continueResult:Xa,defaultTimeZone:Ua,defaultUndefined:J,equalityTest:Z,featureDomainCodeLookup:Ta,featureDomainValueLookup:Sa,featureFullDomain:Qa,featureSchema:Va,featureSubtypes:Ra,fixNullGeometry:ja,fixSpatialReference:fa,formatDate:H,formatNumber:P,generateUUID:K,getDomain:wa,getDomainCode:pa,getDomainValue:da,getType:ia,greaterThanLessThan:T,isArray:ra,isBoolean:ea,isDate:ca,isFeature:va,isFeatureSet:sa,isFeatureSetCollection:ka,isFunctionParameter:u,
isImmutableArray:U,isInteger:xa,isJsDate:ta,isModule:E,isNumber:na,isObject:oa,isSimpleType:g,isString:X,multiReplace:t,pcCheck:L,stableStringify:Ia,standardiseDateFormat:Q,tick:ua,toBoolean:aa,toDate:W,toNumber:S,toNumberArray:r,toString:f,toStringArray:la,toStringExplicit:I,voidOperation:za},Symbol.toStringTag,{value:"Module"}));v.ImplicitResult=F;v.ImplicitResultE=F;v.ReturnResult=La;v.ReturnResultE=La;v.absRound=G;v.autoCastArrayOfPointsToMultiPoint=V;v.autoCastArrayOfPointsToPolygon=Ga;v.autoCastArrayOfPointsToPolyline=
ya;v.autoCastFeatureToGeometry=Fa;v.binaryOperator=Ja;v.breakResult=Wa;v.castAsJson=ha;v.castAsJsonAsync=Ba;v.continueResult=Xa;v.defaultTimeZone=Ua;v.defaultUndefined=J;v.equalityTest=Z;v.featureDomainCodeLookup=Ta;v.featureDomainValueLookup=Sa;v.featureFullDomain=Qa;v.featureSchema=Va;v.featureSubtypes=Ra;v.fixNullGeometry=ja;v.fixSpatialReference=fa;v.formatDate=H;v.formatNumber=P;v.generateUUID=K;v.getDomain=wa;v.getDomainCode=pa;v.getDomainValue=da;v.getType=ia;v.greaterThanLessThan=T;v.isArray=
ra;v.isBoolean=ea;v.isDate=ca;v.isFeature=va;v.isFeatureSet=sa;v.isFeatureSetCollection=ka;v.isFunctionParameter=u;v.isImmutableArray=U;v.isInteger=xa;v.isJsDate=ta;v.isModule=E;v.isNumber=na;v.isObject=oa;v.isSimpleType=g;v.isString=X;v.lc=Za;v.multiReplace=t;v.pcCheck=L;v.stableStringify=Ia;v.standardiseDateFormat=Q;v.tick=ua;v.toBoolean=aa;v.toDate=W;v.toNumber=S;v.toNumberArray=r;v.toString=f;v.toStringArray=la;v.toStringExplicit=I;v.voidOperation=za})},"esri/arcade/FunctionWrapper":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","../core/promiseUtils"],function(v,F,C){function p(z,q,x){if(z instanceof m&&!(z instanceof A)){const w=new A;w.fn=z;w.parameterEvaluator=x;w.context=q;return w}return z}let m=F._createClass(function(){}),b=function(z){function q(w){var l=x.call(this);l.fn=w;return l}F._inherits(q,z);var x=F._createSuper(q);z=q.prototype;z.createFunction=function(w){return(...l)=>this.fn(w,{preparsed:!0,arguments:l})};z.call=function(w,l){return this.fn(w,l)};z.marshalledCall=
function(w,l,k,c){return c(w,l,(a,e,n)=>{n=n.map(h=>h instanceof m&&!(h instanceof A)?p(h,w,c):h);a=this.call(k,{args:n});return C.isPromiseLike(a)?a.then(h=>p(h,k,c)):a})};return F._createClass(q)}(m),A=function(z){function q(){var w=x.apply(this,arguments);w.fn=null;w.context=null;return w}F._inherits(q,z);var x=F._createSuper(q);z=q.prototype;z.createFunction=function(w){return this.fn.createFunction(this.context)};z.call=function(w,l){return this.fn.marshalledCall(w,l,this.context,this.parameterEvaluator)};
z.marshalledCall=function(w,l,k){return this.fn.marshalledCall(w,l,this.context,this.parameterEvaluator)};return F._createClass(q)}(m);v.ArcadeFunction=m;v.NativeFunction=b;v.ScopeMarshalledFunction=A;v.wrapModuleScopedResponse=p;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(v,F,C){return function(p){function m(A,z,q,x,w){A=b.call(this,A);
A._lazyPath=[];A._hasZ=!1;A._hasM=!1;A._hasZ=q;A._hasM=x;A._spRef=z;A._cacheId=w;return A}v._inherits(m,p);var b=v._createSuper(m);p=m.prototype;p.get=function(A){if(void 0===this._lazyPath[A]){const z=this._elements[A];if(void 0===z)return;this._lazyPath[A]=new C(z,this._spRef,this._hasZ,this._hasM,this._cacheId,A)}return this._lazyPath[A]};p.equalityTest=function(A){return A===this?!0:null===A||!1===A instanceof m?!1:A.getUniqueHash()===this.getUniqueHash()};p.getUniqueHash=function(){return this._cacheId.toString()};
return v._createClass(m)}(F)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(v,F,C){return function(p){function m(A,z,q,x,w,l){A=b.call(this,A);A._lazyPt=[];A._hasZ=!1;A._hasM=!1;A._spRef=z;A._hasZ=q;A._hasM=x;A._cacheId=w;A._partId=l;return A}v._inherits(m,p);var b=v._createSuper(m);p=m.prototype;p.get=function(A){if(void 0===this._lazyPt[A]){const z=this._elements[A];if(void 0===z)return;const q=this._hasZ,
x=this._hasM;let w=null;w=q&&!x?new C(z[0],z[1],z[2],void 0,this._spRef):x&&!q?new C(z[0],z[1],void 0,z[2],this._spRef):q&&x?new C(z[0],z[1],z[2],z[3],this._spRef):new C(z[0],z[1],this._spRef);w.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+A.toString();this._lazyPt[A]=w}return this._lazyPt[A]};p.equalityTest=function(A){return A===this?!0:null===A||!1===A instanceof m?!1:A.getUniqueHash()===this.getUniqueHash()};p.getUniqueHash=function(){return this._cacheId.toString()+
"-"+this._partId.toString()};return v._createClass(m)}(F)})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(v,F,C){function p(w=C.getLocale()){w=w.toLowerCase();let l=w in z;if(!l){const e=w.split("-");1<e.length&&e[0]in z&&(w=e[0],l=!0);l||(w="en")}const [k,c,a="#,##0.###"]=z[w];return{decimal:k,group:c,pattern:a}}function m(w){w=w||{};var l=p(w.locale);const k=w.pattern||l.pattern,c=l.group,a=l.decimal;let e=1;if(k.includes("%"))e/=100;else if(k.includes("\u2030"))e/=
1E3;else if(k.includes("\u00a4"))throw Error("currency notation not supported");l=k.split(";");1===l.length&&l.push("-"+l[0]);return{regexp:x(l,n=>{n="(?:"+F.escapeRegExpString(n,".")+")";return n.replace(q,h=>{const D={signed:!1,separator:w.strict?c:[c,""],fractional:w.fractional,decimal:a,exponent:!1};h=h.split(".");let B=w.places;1===h.length&&1!==e&&(h[1]="###");1===h.length||0===B?D.fractional=!1:(void 0===B&&(B=w.pattern?h[1].lastIndexOf("0")+1:Infinity),B&&null==w.fractional&&(D.fractional=
!0),!w.places&&B<h[1].length&&(B+=","+h[1].length),D.places=B);h=h[0].split(",");1<h.length&&(D.groupSize=h.pop().length,1<h.length&&(D.groupSize2=h.pop().length));return"("+b(D)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:c,decimal:a,factor:e}}function b(w){w=w||{};"places"in w||(w.places=Infinity);"string"!==typeof w.decimal&&(w.decimal=".");"fractional"in w&&!/^0/.test(String(w.places))||(w.fractional=[!0,!1]);"exponent"in w||(w.exponent=[!0,!1]);"eSigned"in w||(w.eSigned=[!0,!1]);var l=
A(w);const k=x(w.fractional,a=>{let e="";a&&0!==w.places&&(e="\\"+w.decimal,e=Infinity===w.places?"(?:"+e+"\\d+)?":e+("\\d{"+w.places+"}"));return e},!0),c=x(w.exponent,a=>a?"([eE]"+A({signed:w.eSigned})+")":"");l+=k;k&&(l="(?:(?:"+l+")|(?:"+k+"))");return l+c}function A(w){w=w||{};"signed"in w||(w.signed=[!0,!1]);"separator"in w?"groupSize"in w||(w.groupSize=3):w.separator="";const l=x(w.signed,c=>c?"[-+]":"",!0),k=x(w.separator,c=>{if(!c)return"(?:\\d+)";c=F.escapeRegExpString(c);" "===c?c="\\s":
"\u00a0"===c&&(c="\\s\\xa0");const a=w.groupSize,e=w.groupSize2;return e?(c="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+c+"]\\d{"+e+"})*["+c+"]\\d{"+a+"})",0<a-e?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(a-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+c+"]\\d{"+a+"})*)"},!0);return l+k}const z={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],
fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},q=/[#0,]*[#0](?:\.0*#*)?/,
x=(w,l,k)=>{if(!(w instanceof Array))return l(w);const c=[];for(let a=0;a<w.length;a++)c.push(l(w[a]));w=c.join("|");return"("+(k?"?:":"")+w+")"};v._parseInfo=m;v.format=function(w,l){l={...l};var k=p(l.locale);l.customs=k;k=l.pattern||k.pattern;if(isNaN(w)||Infinity===Math.abs(w))return null;var c=w;var a=l||{};var e=a.customs.group,n=a.customs.decimal;k=k.split(";");w=k[0];l=k[0>c?1:0]||"-"+w;if(l.includes("%"))c*=100;else if(l.includes("\u2030"))c*=1E3;else{if(l.includes("\u00a4"))throw Error("currency notation not supported");
if(l.includes("E"))throw Error("exponential notation not supported");}k=q;var h=w.match(k);if(!h)throw Error("unable to find a number expression in pattern: "+l);!1===a.fractional&&(a.places=0);w=l.replace;h=h[0];a=a={decimal:n,group:e,places:a.places,round:a.round};!0===a.places&&(a.places=0);Infinity===a.places&&(a.places=6);n=h.split(".");var D="string"===typeof a.places&&a.places.indexOf(",");h=a.places;D?h=a.places.substring(D+1):0<=h||(h=(n[1]||[]).length);0>a.round||(c=Number(c.toFixed(Number(h))));
e=String(Math.abs(c)).split(".");c=e[1]||"";n[1]||a.places?(D&&(a.places=a.places.substring(0,D)),D=void 0!==a.places?a.places:n[1]&&n[1].lastIndexOf("0")+1,D>c.length&&(e[1]=c.padEnd(Number(D),"0")),h<c.length&&(e[1]=c.substr(0,Number(h)))):e[1]&&e.pop();c=n[0].replace(",","");h=c.indexOf("0");-1!==h&&(h=c.length-h,h>e[0].length&&(e[0]=e[0].padStart(h,"0")),c.includes("#")||(e[0]=e[0].substr(e[0].length-h)));c=n[0].lastIndexOf(",");let B;if(-1!==c){var d=n[0].length-c-1;n=n[0].substr(0,c);c=n.lastIndexOf(",");
-1!==c&&(B=n.length-c-1)}n=[];for(c=e[0];c;)h=c.length-d,n.push(0<h?c.substr(h):c),c=0<h?c.slice(0,h):"",B&&(d=B,B=void 0);e[0]=n.reverse().join(a.group||",");d=e.join(a.decimal||".");return w.call(l,k,d)};v.getCustoms=p;v.parse=function(w,l){l=m(l);w=(new RegExp("^"+l.regexp+"$")).exec(w);if(!w)return NaN;let k=w[1];if(!w[1]){if(!w[2])return NaN;k=w[2];l.factor*=-1}k=k.replace(new RegExp("["+l.group+"\\s\\xa0]","g"),"").replace(l.decimal,".");return Number(k)*l.factor};v.regexp=function(w){return m(w).regexp};
Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../ArcadeDate","../../../geometry/Extent","../../../layers/support/Field"],function(v,F,C,p){function m(A){return A instanceof Date}function b(A){return A instanceof F.ArcadeDate}v.FeatureServiceDatabaseType=void 0;(function(A){A[A.Standardised=0]="Standardised";A[A.StandardisedNoInterval=1]="StandardisedNoInterval";A[A.SqlServer=2]="SqlServer";A[A.Oracle=3]="Oracle";
A[A.Postgres=4]="Postgres";A[A.PGDB=5]="PGDB";A[A.FILEGDB=6]="FILEGDB";A[A.NotEvaluated=7]="NotEvaluated"})(v.FeatureServiceDatabaseType||(v.FeatureServiceDatabaseType={}));v.IdState=void 0;(function(A){A[A.InFeatureSet=0]="InFeatureSet";A[A.NotInFeatureSet=1]="NotInFeatureSet";A[A.Unknown=2]="Unknown"})(v.IdState||(v.IdState={}));v.callback=function(A,z){return function(){try{A.apply(null,arguments)}catch(q){z.reject(q)}}};v.cloneAttributes=function(A){const z={};for(const q in A)z[q]=A[q];return z};
v.cloneField=function(A){return p.fromJSON(A.toJSON())};v.convertLinearUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A||"number"===typeof A)return A;switch(A.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};v.convertSquareUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A)return A;switch(A.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;
case "kilometers":case "kilometer":case "km":return 109414}return null};v.defaultMaxRecords=1E3;v.equalityTest=function(A,z){return A===z?!0:(m(A)||b(A))&&(m(z)||b(z))?A.getTime()===z.getTime():!1};v.errback=function(A){return function(z){A.reject(z)}};v.esriFieldToJson=function(A){return A.toJSON?A.toJSON():A};v.extractServiceUrl=function(A){if(void 0===A)return"";A=A.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");A=A.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return A=A.split("?")[0]};v.isArcadeDate=
b;v.isArray=function(A){return A instanceof Array};v.isBoolean=function(A){return"boolean"===typeof A};v.isDate=m;v.isNumber=function(A){return"number"===typeof A};v.isString=function(A){return"string"===typeof A||A instanceof String};v.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",
esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};v.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};v.layerGeometryEsriRestConstants=
{point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};v.sameGeomType=function(A,z){return A===z||"point"===A&&"esriGeometryPoint"===z||"polyline"===A&&
"esriGeometryPolyline"===z||"polygon"===A&&"esriGeometryPolygon"===z||"extent"===A&&"esriGeometryEnvelope"===z||"multipoint"===A&&"esriGeometryMultipoint"===z||"point"===z&&"esriGeometryPoint"===A||"polyline"===z&&"esriGeometryPolyline"===A||"polygon"===z&&"esriGeometryPolygon"===A||"extent"===z&&"esriGeometryEnvelope"===A||"multipoint"===z&&"esriGeometryMultipoint"===A?!0:!1};v.shapeExtent=function(A){if(null==A)return null;switch(A.type){case "polygon":case "multipoint":case "polyline":return A.extent;
case "point":return new C({xmin:A.x,ymin:A.y,xmax:A.x,ymax:A.y,spatialReference:A.spatialReference});case "extent":return A}return null};v.stableStringify=function(A,z){z||(z={});"function"===typeof z&&(z={cmp:z});const q="boolean"===typeof z.cycles?z.cycles:!1,x=z.cmp&&function(l){return function(k){return function(c,a){return l({key:c,value:k[c]},{key:a,value:k[a]})}}}(z.cmp),w=[];return function c(k){k&&k.toJSON&&"function"===typeof k.toJSON&&(k=k.toJSON());if(void 0!==k){if("number"===typeof k)return isFinite(k)?
""+k:"null";if("object"!==typeof k)return JSON.stringify(k);var a;if(Array.isArray(k)){var e="[";for(a=0;a<k.length;a++)a&&(e+=","),e+=c(k[a])||"null";return e+"]"}if(null===k)return"null";if(w.includes(k)){if(q)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var n=w.push(k)-1,h=Object.keys(k).sort(x&&x(k));e="";for(a=0;a<h.length;a++){const D=h[a],B=c(k[D]);B&&(e&&(e+=","),e+=JSON.stringify(D)+":"+B)}w.splice(n,1);return"{"+e+"}"}}(A)};v.toEsriGeometryType=
function(A){switch(A){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModule":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(v,F){F=F._createClass(function(C){this.source=C});v.ArcadeModule=F;Object.defineProperty(v,Symbol.toStringTag,
{value:"Module"})})},"esri/arcade/Feature":function(){define("../chunks/_rollupPluginBabelHelpers ./Dictionary ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe ./ArcadeDate ./executionError ./arcadeTimeUtils".split(" "),function(v,F,C,p,m,b,A,z,q,x,w,l){return function(){function k(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=
null;this._datesfixed=!0;this.contextTimeReference=this.dateTimeReferenceFieldIndex=null;this.immutable=!0;this._datefields=null;this.immutable=!0}k.createFromGraphic=function(a,e){const n=new k;n.contextTimeReference=e??null;n._geometry=q.isSome(a.geometry)?a.geometry:null;n.attributes=void 0===a.attributes?{}:null===a.attributes?{}:a.attributes;a._sourceLayer?(n._layer=a._sourceLayer,n._datesfixed=!1):a._layer?(n._layer=a._layer,n._datesfixed=!1):a.layer&&"fields"in a.layer?(n._layer=a.layer,n._datesfixed=
!1):a.sourceLayer&&"fields"in a.sourceLayer&&(n._layer=a.sourceLayer,n._datesfixed=!1);n._layer&&!1===n._datesfixed&&(n.dateTimeReferenceFieldIndex=void 0!==n._layer.dateTimeReferenceFieldIndex?n._layer.dateTimeReferenceFieldIndex:l.DateTimeReferenceFieldIndex.createFromLayer(n._layer));return n};k.createFromArcadeFeature=function(a){const e=new k;e._datesfixed=a._datesfixed;e.attributes=a.attributes;e._geometry=a._geometry;e._optimizedGeomDefinition=a._optimizedGeomDefinition;a._layer&&(e._layer=
a._layer);e.dateTimeReferenceFieldIndex=a.dateTimeReferenceFieldIndex;e.contextTimeReference=a.contextTimeReference;return e};k.createFromOptimisedFeature=function(a,e,n){const h=new k;h._geometry=a.geometry?{geometry:a.geometry}:null;h._optimizedGeomDefinition=n;h.attributes=a.attributes||{};h._layer=e;h._datesfixed=!1;return h};k.createFromArcadeDictionary=function(a){const e=new k;e.attributes=a.field("attributes");null!==e.attributes?e.attributes instanceof F?(e.attributes=e.attributes.attributes,
null===e.attributes&&(e.attributes={})):e.attributes={}:e.attributes={};e._geometry=a.field("geometry");null!==e._geometry&&(e._geometry instanceof F?e._geometry=k.parseGeometryFromDictionary(e._geometry):e._geometry instanceof m||(e._geometry=null));return e};k.createFromGraphicLikeObject=function(a,e,n=null,h){const D=new k;D.contextTimeReference=h??null;null===e&&(e={});D.attributes=e;D._geometry=q.isSome(a)?a:null;D._layer=n;D._layer&&(D._datesfixed=!1,D.dateTimeReferenceFieldIndex=void 0!==D._layer.dateTimeReferenceFieldIndex?
D._layer.dateTimeReferenceFieldIndex:l.DateTimeReferenceFieldIndex.createFromLayer(D._layer));return D};var c=k.prototype;c.repurposeFromGraphicLikeObject=function(a,e,n=null){null===e&&(e={});this.attributes=e;this._geometry=a??null;this._datesfixed=(this._layer=n)?!1:!0};c.fieldSourceTimeZone=function(a){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(a)??""};c.castToText=function(a=!1){let e="";!1===this._datesfixed&&this._fixDates();for(const n in this.attributes){""!==e&&(e+=",");const h=
this.attributes[n];null==h?e+=JSON.stringify(n)+":null":p.isBoolean(h)||p.isNumber(h)||p.isString(h)?e+=JSON.stringify(n)+":"+JSON.stringify(h):h instanceof m?e+=JSON.stringify(n)+":"+p.toStringExplicit(h):h instanceof C?e+=JSON.stringify(n)+":"+p.toStringExplicit(h,null,a):h instanceof Array?e+=JSON.stringify(n)+":"+p.toStringExplicit(h,null,a):h instanceof x.ArcadeDate?e=a?e+(JSON.stringify(n)+":"+JSON.stringify(h.getTime())):e+(JSON.stringify(n)+":"+h.stringify()):null!==h&&"object"===typeof h&&
void 0!==h.castToText&&(e+=JSON.stringify(n)+":"+h.castToText(a))}return'{"geometry":'+(null===this.geometry()?"null":p.toStringExplicit(this.geometry()))+',"attributes":{'+e+"}}"};c._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{var a=[],e=this._layer.fields;for(let n=0;n<e.length;n++){const h=e[n],D=h.type;"date"!==D&&"esriFieldTypeDate"!==D||a.push(h.name)}this._datefields=a;0<a.length&&this._fixDateFields(a)}this._datesfixed=
!0};c.isUnknownDateTimeField=function(a){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(a)};c._fixDateFields=function(a){this.attributes={...this.attributes};const e=this.contextTimeReference?.timeZone??"system";for(let h=0;h<a.length;h++){let D=this.attributes[a[h]];if(null!==D)if(void 0===D)for(const B in this.attributes){if(B.toLowerCase()===a[h].toLowerCase()){D=this.attributes[B];if(null!==D){var n=this.isUnknownDateTimeField(B);p.isDate(D)?this.attributes[B]=D:this.attributes[B]=
D instanceof Date?n?x.ArcadeDate.unknownDateJSToArcadeDate(D):x.ArcadeDate.dateJSAndZoneToArcadeDate(D,e):n?x.ArcadeDate.unknownEpochToArcadeDate(D):x.ArcadeDate.epochToArcadeDate(D,e)}break}}else n=this.isUnknownDateTimeField(a[h]),p.isDate(D)?this.attributes[a[h]]=D:this.attributes[a[h]]=D instanceof Date?n?x.ArcadeDate.unknownDateJSToArcadeDate(D):x.ArcadeDate.dateJSAndZoneToArcadeDate(D,e):n?x.ArcadeDate.unknownEpochToArcadeDate(D):x.ArcadeDate.epochToArcadeDate(D,e)}};c.geometry=function(){if(null===
this._geometry||this._geometry instanceof m)return this._geometry;this._optimizedGeomDefinition?(this._geometry=q.unwrap(A.fromJSON(z.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=q.unwrap(A.fromJSON(this._geometry));return this._geometry};c.field=function(a){!1===this._datesfixed&&this._fixDates();var e=
this.attributes[a];if(void 0!==e)return e;e=a.toLowerCase();for(const n in this.attributes)if(n.toLowerCase()===e)return this.attributes[n];if(this._hasFieldDefinition(e))return null;throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.FieldNotFound,null,{key:a});};c._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(let e=0;e<this._layer.fields.length;e++)if(this._layer.fields[e].name.toLowerCase()===a)return!0;return!1};c.setField=function(a,e){if(this.immutable)throw new w.ArcadeExecutionError(null,
w.ExecutionErrorCodes.Immutable,null);e instanceof Date&&(e=this.isUnknownDateTimeField(a)?x.ArcadeDate.unknownDateJSToArcadeDate(e):x.ArcadeDate.dateJSToArcadeDate(e));if(!1===p.isSimpleType(e))throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.TypeNotAllowedInFeature,null);const n=a.toLowerCase();if(void 0===this.attributes[a])for(const h in this.attributes)if(h.toLowerCase()===n){this.attributes[h]=e;return}this.attributes[a]=e};c.hasField=function(a){const e=a.toLowerCase();if(void 0!==
this.attributes[a])return!0;for(const n in this.attributes)if(n.toLowerCase()===e)return!0;return this._hasFieldDefinition(e)?!0:!1};c.keys=function(){let a=[];const e={};for(var n in this.attributes)a.push(n),e[n.toLowerCase()]=1;if(null!==this._layer)for(n=0;n<this._layer.fields.length;n++){const h=this._layer.fields[n];1!==e[h.name.toLowerCase()]&&a.push(h.name)}return a=a.sort()};k.parseGeometryFromDictionary=function(a){a=k._convertDictionaryToJson(a,!0);void 0!==a.hasm&&(a.hasM=a.hasm,delete a.hasm);
void 0!==a.hasz&&(a.hasZ=a.hasz,delete a.hasz);void 0!==a.spatialreference&&(a.spatialReference=a.spatialreference,delete a.spatialreference);void 0!==a.rings&&(a.rings=this._fixPathArrays(a.rings,!0===a.hasZ,!0===a.hasZ));void 0!==a.paths&&(a.paths=this._fixPathArrays(a.paths,!0===a.hasZ,!0===a.hasM));void 0!==a.points&&(a.points=this._fixPointArrays(a.points,!0===a.hasZ,!0===a.hasM));return A.fromJSON(a)};k._fixPathArrays=function(a,e,n){const h=[];if(a instanceof Array)for(var D=0;D<a.length;D++)h.push(this._fixPointArrays(a[D],
e,n));else if(a instanceof C)for(D=0;D<a.length();D++)h.push(this._fixPointArrays(a.get(D),e,n));return h};k._fixPointArrays=function(a,e,n){const h=[];if(a instanceof Array)for(var D=0;D<a.length;D++){var B=a[D];B instanceof b?e&&n?h.push([B.x,B.y,B.z,B.m]):e?h.push([B.x,B.y,B.z]):n?h.push([B.x,B.y,B.m]):h.push([B.x,B.y]):B instanceof C?h.push(B.toArray()):h.push(B)}else if(a instanceof C)for(D=0;D<a.length();D++)B=a.get(D),B instanceof b?e&&n?h.push([B.x,B.y,B.z,B.m]):e?h.push([B.x,B.y,B.z]):n?
h.push([B.x,B.y,B.m]):h.push([B.x,B.y]):B instanceof C?h.push(B.toArray()):h.push(B);return h};k._convertDictionaryToJson=function(a,e=!1){const n={};for(const h in a.attributes){let D=a.attributes[h];D instanceof F&&(D=k._convertDictionaryToJson(D));e?n[h.toLowerCase()]=D:n[h]=D}return n};k.parseAttributesFromDictionary=function(a){const e={};for(const n in a.attributes){const h=a.attributes[n];if(p.isSimpleType(h))e[n]=h;else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidParameter,
null);}return e};k.fromJson=function(a,e){let n=null;null!==a.geometry&&void 0!==a.geometry&&(n=A.fromJSON(a.geometry));const h={};if(null!==a.attributes&&void 0!==a.attributes)for(const D in a.attributes){const B=a.attributes[D];if(null===B)h[D]=B;else if(p.isString(B)||p.isNumber(B)||p.isBoolean(B)||p.isDate(B))h[D]=B;else throw new w.ArcadeExecutionError(null,w.ExecutionErrorCodes.InvalidParameter,null);}return k.createFromGraphicLikeObject(n,h,null,e??null)};c.fullSchema=function(){return this._layer};
c.gdbVersion=function(){if(null===this._layer)return"";const a=this._layer.gdbVersion;return void 0===a?"":""===a&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":a};c.castAsJson=function(a){const e={attributes:{},geometry:!0===a?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const n in this.attributes){const h=this.attributes[n];void 0!==h&&(e.attributes[n]=p.castAsJson(h,a))}return e};c.castAsJsonAsync=async function(a,e){return this.castAsJson(e)};
v._createClass(k,[{key:"layerPreferredTimeZone",get:function(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??""}}]);return k}()})},"esri/arcade/arcadeTimeUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ArcadeDate ../layers/support/FieldsIndex ../time/TimeReference ../chunks/datetime ../time/timeReferenceUtils".split(" "),function(v,F,C,p,m,b,A){function z(x){return x?.timeZoneIANA?x?.timeZoneIANA:x?.timeZone?A.convertLegacyTimeZone(x,""):""}let q=function(){function x(){this.dateTimeReferenceMetaData=
null;this._fieldTimeZoneIndex={};this._ianaLayerDateFields=this._ianaEditFields=this._ianaTimeInfo=this._ianaPreferred=this._fieldIndex=null}x.create=function(l,k){const c=new x;c.dateTimeReferenceMetaData=k;c._fieldIndex=l instanceof p?l:new p(l);return c};x.createFromLayer=function(l){if(!l)return null;if(!l.fieldsIndex)return!l.declaredClass&&l.fields?x.create(l.fields,l):null;const k=new x;k._fieldIndex=l.fieldsIndex;k.dateTimeReferenceMetaData={timeInfo:l?.timeInfo?.toJSON()??null,editFieldsInfo:l?.editFieldsInfo?.toJSON()??
null,dateFieldsTimeReference:l?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:l?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===l?.datesInUnknownTimezone};return k};var w=x.prototype;w.fieldTimeZone=function(l){l=this._fieldIndex?.get(l);if(!l||"date"!==l.type&&"esriFieldTypeDate"!==l.type)return null;var k=this._fieldTimeZoneIndex[l.name];if(void 0!==k)return k;k=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,
isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},
{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(var c of k)if(c.field===l.name)return c=this.convertToIANA(c.timeReference,c.isunknown),this._fieldTimeZoneIndex[l.name]=c;c=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[l.name]=
c};w.convertToIANA=function(l,k){return k?"unknown":z(l)};F._createClass(x,[{key:"layerPreferredTimeZone",get:function(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";return this._ianaPreferred=this.convertToIANA(this.dateTimeReferenceMetaData?.preferredTimeReference,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerTimeInfoTimeZone",get:function(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";return this._ianaTimeInfo=
this.convertToIANA(this.dateTimeReferenceMetaData?.timeInfo?.timeReference,!1)}},{key:"layerEditFieldsTimeZone",get:function(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";return this._ianaEditFields=this.convertToIANA(this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerDateFieldsTimeZone",get:function(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;
this._ianaLayerDateFields="";return this._ianaLayerDateFields=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}}]);return x}();v.DateTimeReferenceFieldIndex=q;v.convertTimeReference=function(x){if(!x)return null;x instanceof m&&(x=z(x.toJSON()));if(x instanceof b.Zone)return x;if("unknown"===x.toLowerCase())return C.UnknownTimeZone.instance;if("system"===x.toLowerCase())return b.SystemZone.instance;if("utc"===x.toLowerCase())return b.FixedOffsetZone.utcInstance;
if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(x)){const w=b.FixedOffsetZone.parseSpecifier("UTC"+(x.startsWith("+")||x.startsWith("-")?"":"+")+x);if(w)return w}x=b.IANAZone.create(x);if(!x.isValid)throw new C.ArcadeDateError(C.ArcadeDateErrorCodes.TimeZoneNotRecognised);return x};v.convertToIANA=z;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/treeAnalysis":function(){define(["exports"],function(v){function F(c){return"string"===typeof c||c instanceof String}function C(c,
a){if(c)for(const e of c)p(e,a)}function p(c,a){if(c&&!1!==a(c))switch(c.type){case "ImportDeclaration":C(c.specifiers,a);p(c.source,a);break;case "ExportNamedDeclaration":p(c.declaration,a);break;case "ArrayExpression":C(c.elements,a);break;case "AssignmentExpression":case "BinaryExpression":p(c.left,a);p(c.right,a);break;case "BlockStatement":C(c.body,a);break;case "Program":C(c.body,a);break;case "CallExpression":p(c.callee,a);C(c.arguments,a);break;case "ExpressionStatement":p(c.expression,a);
break;case "ForInStatement":p(c.left,a);p(c.right,a);p(c.body,a);break;case "ForStatement":p(c.init,a);p(c.test,a);p(c.update,a);p(c.body,a);break;case "WhileStatement":p(c.test,a);p(c.body,a);break;case "FunctionDeclaration":p(c.id,a);C(c.params,a);p(c.body,a);break;case "IfStatement":p(c.test,a);p(c.consequent,a);p(c.alternate,a);break;case "LogicalExpression":p(c.left,a);p(c.right,a);break;case "MemberExpression":p(c.object,a);p(c.property,a);break;case "ObjectExpression":C(c.properties,a);break;
case "Property":p(c.key,a);p(c.value,a);break;case "ReturnStatement":p(c.argument,a);break;case "UnaryExpression":p(c.argument,a);break;case "UpdateExpression":p(c.argument,a);break;case "VariableDeclaration":C(c.declarations,a);break;case "VariableDeclarator":p(c.id,a);p(c.init,a);break;case "TemplateLiteral":C(c.expressions,a),C(c.quasis,a)}}function m(c,a){let e=!1;const n=a.toLowerCase();p(c,h=>{if(e)return!1;"Identifier"===h.type&&h.name&&h.name.toLowerCase()===n&&(e=!0);return!0});return e}
function b(c){const a=[];p(c,e=>{"ImportDeclaration"===e.type&&e.source&&e.source.value&&a.push({libname:e.specifiers[0].local.name.toLowerCase(),source:e.source.value});return!0});return a}function A(c){const a=[];p(c,e=>{"CallExpression"===e.type&&"Identifier"===e.callee.type&&a.push(e.callee.name.toLowerCase());return!0});return a}const z={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,
max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},
push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},
weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},
polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,
max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,
max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},
buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},q={functionDefinitions:new Map,
constantDefinitions:new Map},x={functionDefinitions:new Map,constantDefinitions:new Map};for(var w of["pi","infinity"])x.constantDefinitions.set(w,{type:"constant"}),q.constantDefinitions.set(w,{type:"constant"});x.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});
q.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const c in z)w=z[c],x.functionDefinitions.set(c,{overloads:[{type:"function",parametersInfo:{min:w.min,max:w.max}}]}),q.functionDefinitions.set(c,{overloads:[{type:"function",parametersInfo:{min:w.min,
max:w.max}}]});const l="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem".split(" "),k="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" ");
v.addFunctionDeclaration=function(c,a){a="sync"===a?q:x;a.functionDefinitions.has(c.name.toLowerCase())?a.functionDefinitions.get(c.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:c.min,max:c.max}}):a.functionDefinitions.set(c.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:c.min,max:c.max}}]})};v.extractFunctionDeclaration=function(c,a){const e=[];if(void 0!==a.params&&null!==a.params)for(let n=0;n<a.params.length;n++)e.push("any");return{name:c,return:"any",
params:e}};v.findExpectedFieldLiterals=function(c){const a=[];p(c,e=>{if("CallExpression"===e.type){if("Identifier"===e.callee.type&&"expects"===e.callee.name.toLowerCase()){var n="";for(let h=0;h<(e.arguments||[]).length;h++)0===h?"Identifier"===e.arguments[h].type&&(n=e.arguments[h].name.toLowerCase()):n&&"Literal"===e.arguments[h].type&&F(e.arguments[h].value)&&a.push(n+"."+e.arguments[h].value.toLowerCase());return!1}if("Identifier"===e.callee.type&&["domainname","domaincode","domain","haskey"].includes(e.callee.name.toLowerCase())&&
2<=e.arguments.length)return n="","Identifier"===e.arguments[0].type&&(n=e.arguments[0].name.toLowerCase()),n&&"Literal"===e.arguments[1].type&&F(e.arguments[1].value)&&a.push(n+"."+e.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==e.type||"Identifier"!==e.object.type)return!0;!1===e.computed&&e.object&&e.object.name&&e.property&&"Identifier"===e.property.type&&e.property.name?a.push(e.object.name.toLowerCase()+"."+e.property.name.toLowerCase()):e.object&&e.object.name&&e.property&&"Literal"===
e.property.type&&"string"===typeof e.property.value&&a.push(e.object.name.toLowerCase()+"."+e.property.value?.toString().toLowerCase());return!1});return a};v.findFieldLiterals=function(c){const a=[];p(c,e=>{if("MemberExpression"!==e.type||"Identifier"!==e.object.type)return!0;!1===e.computed&&e.object&&e.object.name&&e.property&&"Identifier"===e.property.type&&e.property.name?a.push(e.object.name.toLowerCase()+"."+e.property.name.toLowerCase()):e.object&&e.object.name&&e.property&&"Literal"===e.property.type&&
"string"===typeof e.property.value&&a.push(e.object.name.toLowerCase()+"."+e.property.value?.toString().toLowerCase());return!1});return a};v.findFunctionCalls=A;v.findModuleImports=b;v.findScriptDependencies=function(c,a=[]){let e=null;if(void 0===c.usesFeatureSet){null===e&&(e=A(c));c.usesFeatureSet=!1;for(let n=0;n<e.length;n++)l.includes(e[n])&&(c.usesFeatureSet=!0,c.isAsync=!0);if(!1===c.usesFeatureSet&&a&&0<a.length)for(const n of a)if(m(c,n)){c.usesFeatureSet=!0;c.isAsync=!0;break}}void 0===
c.usesModules&&(c.usesModules=!1,0<b(c).length&&(c.usesModules=!0));if(void 0===c.usesGeometry)for(c.usesGeometry=!1,null===e&&(e=A(c)),a=0;a<e.length;a++)k.includes(e[a])&&(c.usesGeometry=!0)};v.fullArcadeApiAsync=x;v.fullArcadeApiSync=q;v.referencesFunction=function(c,a){let e=!1;const n=a.toLowerCase();p(c,h=>e?!1:"CallExpression"===h.type&&"Identifier"===h.callee.type&&h.callee.name&&h.callee.name.toLowerCase()===n?(e=!0,!1):!0);return e};v.referencesMember=m;v.scriptUsesFeatureSet=function(c){c=
A(c);for(let a=0;a<c.length;a++)if(l.includes(c[a]))return!0;return!1};v.walk=p;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/array":function(){define(["exports","../arcade/executionError","../arcade/ImmutableArray","./languageUtils","../core/promiseUtils"],function(v,F,C,p,m){function b(z){function q(c,a,e){if(c instanceof C)return c.toArray();if(p.isArray(c))return c;throw new F.ArcadeExecutionError(a,F.ExecutionErrorCodes.InvalidParameter,e);}function x(c,a){var e=
c.length,n=Math.floor(e/2);if(0===e)return[];if(1===e)return[c[0]];var h=x(c.slice(0,n),a);c=x(c.slice(n,e),a);for(e=[];0<h.length||0<c.length;)0<h.length&&0<c.length?(n=a(h[0],c[0]),isNaN(n)&&(n=0),0>=n?(e.push(h[0]),h=h.slice(1)):(e.push(c[0]),c=c.slice(1))):0<h.length?(e.push(h[0]),h=h.slice(1)):0<c.length&&(e.push(c[0]),c=c.slice(1));return e}async function w(c,a){const e=c.length,n=Math.floor(e/2);if(0===e)return[];if(1===e)return[c[0]];c=[await w(c.slice(0,n),a),await w(c.slice(n,e),a)];return l(c[0],
c[1],a,[])}async function l(c,a,e,n){if(0<c.length||0<a.length){if(0<c.length&&0<a.length){let h=await e(c[0],a[0]);isNaN(h)&&(h=1);0>=h?(n.push(c[0]),c=c.slice(1)):(n.push(a[0]),a=a.slice(1));return l(c,a,e,n)}if(0<c.length)return n.push(c[0]),c=c.slice(1),l(c,a,e,n);if(0<a.length)return n.push(a[0]),a=a.slice(1),l(c,a,e,n)}else return n}function k(c,a,e,n){p.pcCheck(e,1,2,c,a);let h=e[0];p.isImmutableArray(h)&&(h=h.toArray());if(!1===p.isArray(h))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,
a);if(1<e.length){if(!1===p.isFunctionParameter(e[1]))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);var D=h;const B=e[1].createFunction(c);return n?w(D,B):D=x(D,(d,t)=>B(d,t))}c=h;if(0===c.length)return[];e={};for(n=0;n<c.length;n++)a=p.getType(c[n]),""!==a&&(e[a]=!0);if(!0===e.Array||!0===e.Dictionary||!0===e.Feature||!0===e.Point||!0===e.Polygon||!0===e.Polyline||!0===e.Multipoint||!0===e.Extent||!0===e.Function)return c.slice(0);n=0;a="";for(D in e)n++,a=D;return c=
1<n||"String"===a?x(c,(B,d)=>{if(null===B||void 0===B||B===p.voidOperation)return null===d||void 0===d||d===p.voidOperation?0:1;if(null===d||void 0===d||d===p.voidOperation)return-1;B=p.toString(B);d=p.toString(d);return B<d?-1:B===d?0:1}):"Number"===a?x(c,(B,d)=>B-d):"Boolean"===a?x(c,(B,d)=>B===d?0:d?-1:1):"Date"===a?x(c,(B,d)=>d-B):c.slice(0)}z.functions.array=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,1,2,c,a);e=p.toNumber(h[0]);if(isNaN(e)||!1===p.isInteger(e))throw new F.ArcadeExecutionError(c,
F.ExecutionErrorCodes.InvalidParameter,a);h=p.defaultUndefined(h[1],null);e=Array(e);e.fill(h);return e})};z.functions.front=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,1,1,c,a);if(p.isImmutableArray(h[0])){if(0>=h[0].length())throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);return h[0].get(0)}if(p.isArray(h[0])){if(0>=h[0].length)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);return h[0][0]}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,
a);})};z.functions.back=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,1,1,c,a);if(p.isImmutableArray(h[0])){if(0>=h[0].length())throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);return h[0].get(h[0].length()-1)}if(p.isArray(h[0])){if(0>=h[0].length)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);return h[0][h[0].length-1]}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.push=function(c,a){return z.standardFunction(c,
a,(e,n,h)=>{p.pcCheck(h,1,2,c,a);if(p.isArray(h[0]))return h[0][h[0].length]=h[1],h[0].length;throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.pop=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,1,1,c,a);if(p.isArray(h[0])){if(0>=h[0].length)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);e=h[0][h[0].length-1];--h[0].length;return e}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};
z.functions.erase=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);if(p.isArray(h[0])){e=p.toNumber(h[1]);if(isNaN(e)||!1===p.isInteger(e))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);h=h[0];if(0>=h.length)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);0>e&&(e=h.length+e);if(0>e)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);if(e>=h.length)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,
a);h.splice(e,1);return p.voidOperation}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.insert=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,3,3,c,a);if(p.isArray(h[0])){e=p.toNumber(h[1]);if(isNaN(e)||!1===p.isInteger(e))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);n=h[2];h=h[0];if(e>h.length)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.OutOfBounds,a);if(0>e&&e<-1*h.length)throw new F.ArcadeExecutionError(c,
F.ExecutionErrorCodes.OutOfBounds,a);if(e===h.length)return h[e]=n,p.voidOperation;h.splice(e,0,n);return p.voidOperation}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.resize=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,3,c,a);if(p.isArray(h[0])){n=p.toNumber(h[1]);if(isNaN(n)||!1===p.isInteger(n))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);if(0>n)throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,
a);e=p.defaultUndefined(h[2],null);h=h[0];if(h.length>=n)return h.length=n,p.voidOperation;const D=h.length;h.length=n;for(n=D;n<h.length;n++)h[n]=e;return p.voidOperation}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.includes=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);if(p.isArray(h[0])){const D=h[1];return-1<h[0].findIndex(B=>p.equalityTest(B,D))?!0:!1}if(p.isImmutableArray(h[0])){const D=h[1];return-1<h[0].toArray().findIndex(B=>
p.equalityTest(B,D))?!0:!1}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.slice=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,1,3,c,a);if(p.isArray(h[0])){e=p.toNumber(p.defaultUndefined(h[1],0));n=p.toNumber(p.defaultUndefined(h[2],h[0].length));if(isNaN(e)||!1===p.isInteger(e))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);if(isNaN(n)||!1===p.isInteger(n))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,
a);return h[0].slice(e,n)}if(p.isImmutableArray(h[0])){e=h[0];n=p.toNumber(p.defaultUndefined(h[1],0));h=p.toNumber(p.defaultUndefined(h[2],e.length()));if(isNaN(n)||!1===p.isInteger(n))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);if(isNaN(h)||!1===p.isInteger(h))throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);return e.toArray().slice(n,h)}throw new F.ArcadeExecutionError(c,F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.splice=
function(c,a){return z.standardFunction(c,a,(e,n,h)=>{e=[];for(n=0;n<h.length;n++)p.isArray(h[n])?e.push(...h[n]):p.isImmutableArray(h[n])?e.push(...h[n].toArray()):e.push(h[n]);return e})};z.functions.top=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);if(p.isArray(h[0]))return p.toNumber(h[1])>=h[0].length?h[0].slice(0):h[0].slice(0,p.toNumber(h[1]));if(p.isImmutableArray(h[0]))return p.toNumber(h[1])>=h[0].length()?h[0].slice(0):h[0].slice(0,p.toNumber(h[1]));throw new F.ArcadeExecutionError(c,
F.ExecutionErrorCodes.InvalidParameter,a);})};z.functions.first=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,1,1,c,a);return p.isArray(h[0])?0===h[0].length?null:h[0][0]:p.isImmutableArray(h[0])?0===h[0].length()?null:h[0].get(0):null})};"sync"===z.mode&&(z.functions.sort=function(c,a){return z.standardFunction(c,a,(e,n,h)=>k(c,a,h,!1))},z.functions.any=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);h=q(h[0],c,a);for(const D of h)if(h=
e(D),p.isBoolean(h)&&!0===h)return!0;return!1})},z.functions.all=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);h=q(h[0],c,a);for(const D of h)if(!0!==e(D))return!1;return!0})},z.functions.none=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);h=q(h[0],c,a);for(const D of h)if(!0===e(D))return!1;return!0})},z.functions.reduce=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,3,
c,a);const D=h[1].createFunction(c);e=q(h[0],c,a);return 2===h.length?0===e.length?null:e.reduce((B,d)=>{B=D(B,d);return B=void 0!==B&&B!==p.voidOperation?B:null}):e.reduce((B,d)=>{B=D(B,d);return B=void 0!==B&&B!==p.voidOperation?B:null},h[2])})},z.functions.map=function(c,a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);n=q(h[0],c,a);h=[];for(const D of n)n=e(D),void 0!==n&&n!==p.voidOperation?h.push(n):h.push(null);return h})},z.functions.filter=function(c,
a){return z.standardFunction(c,a,(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);h=q(h[0],c,a);n=[];for(const D of h)!0===e(D)&&n.push(D);return n})});"async"===z.mode&&(z.functions.sort=function(c,a){return z.standardFunctionAsync(c,a,(e,n,h)=>k(c,a,h,!0))},z.functions.any=function(c,a){return z.standardFunctionAsync(c,a,async(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);h=q(h[0],c,a);for(const D of h)if(h=await e(D),n=null,n=m.isPromiseLike(n)?await h:h,p.isBoolean(n)&&!0===n)return!0;
return!1})},z.functions.all=function(c,a){return z.standardFunctionAsync(c,a,async(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);h=q(h[0],c,a);for(const D of h)if(h=await e(D),n=null,n=m.isPromiseLike(n)?await h:h,!0!==n)return!1;return!0})},z.functions.none=function(c,a){return z.standardFunctionAsync(c,a,async(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);h=q(h[0],c,a);for(const D of h)if(h=await e(D),n=null,n=m.isPromiseLike(n)?await h:h,!0===n)return!1;return!0})},z.functions.filter=
function(c,a){return z.standardFunctionAsync(c,a,async(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);n=q(h[0],c,a);h=[];for(const D of n){n=await e(D);let B=null;B=m.isPromiseLike(B)?await n:n;!0===B&&h.push(D)}return h})},z.functions.reduce=function(c,a){return z.standardFunctionAsync(c,a,(e,n,h)=>{p.pcCheck(h,2,3,c,a);const D=h[1].createFunction(c);e=q(h[0],c,a);n=null;if(2<h.length)h=p.defaultUndefined(h[2],null),n=e.reduce(async(B,d)=>{B=await B;if(void 0===B||B===p.voidOperation)B=null;
return D(B,d)},Promise.resolve(h));else{if(0===e.length)return null;n=e.reduce(async(B,d,t)=>{if(1>=t)return D(B,d);B=await B;if(void 0===B||B===p.voidOperation)B=null;return D(B,d)})}return n.then(B=>void 0!==B&&B!==p.voidOperation?B:null)})},z.functions.map=function(c,a){return z.standardFunctionAsync(c,a,async(e,n,h)=>{p.pcCheck(h,2,2,c,a);e=h[1].createFunction(c);n=q(h[0],c,a);h=[];for(const D of n){n=await e(D);let B=null;B=m.isPromiseLike(B)?await n:n;void 0!==B&&B!==p.voidOperation?h.push(B):
h.push(null)}return h})})}const A=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:b},Symbol.toStringTag,{value:"Module"}));v.ArrayFunctions=A;v.registerFunctions=b})},"esri/arcade/functions/date":function(){define("exports ../ArcadeDate ../../chunks/languageUtils ../executionError ../../intl/locale ../../chunks/datetime".split(" "),function(v,F,C,p,m,b){function A(w){return null===w?w:!1===w.isValid?null:w}function z(w,l){return""===w||"default"===w.toLowerCase().trim()?C.defaultTimeZone(l):
w}const q=[0,31,59,90,120,151,181,212,243,273,304,334],x=[0,31,60,91,121,152,182,213,244,274,305,335];v.registerFunctions=function(w,l){w.today=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,0,0,k,c);a=new Date;a.setHours(0,0,0,0);return F.ArcadeDate.dateJSAndZoneToArcadeDate(a,C.defaultTimeZone(k))})};w.changetimezone=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,2,2,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));if(null===a)return null;n=F.ArcadeDate.arcadeDateAndZoneToArcadeDate(a,z(C.toString(n[1]),
k));return!1===n.isValid?null:n})};w.timezone=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,2,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));if(null===a)return null;a=a.timeZone;return"system"===a?F.ArcadeDate.systemTimeZoneCanonicalName:a})};w.timezoneoffset=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?null:a.timeZoneOffset})};w.now=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,0,0,k,c);a=F.ArcadeDate.nowToArcadeDate(C.defaultTimeZone(k));
return!1===a.isValid?null:a})};w.timestamp=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,0,0,k,c);a=F.ArcadeDate.nowUTCToArcadeDate();return!1===a.isValid?null:a})};w.toutc=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?null:a.toUTC()})};w.tolocal=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?null:a.toLocal()})};w.day=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,
1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.day})};w.month=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.monthJS})};w.year=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.year})};w.hour=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.hour})};w.second=function(k,c){return l(k,
c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.second})};w.millisecond=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.millisecond})};w.minute=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.minute})};w.week=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,2,k,c);e=C.toDate(n[0],C.defaultTimeZone(k));if(null===e)return NaN;
n=C.toNumber(C.defaultUndefined(n[1],0));if(0>n||6<n)throw new p.ArcadeExecutionError(k,p.ExecutionErrorCodes.InvalidParameter,c);a=e.dayOfWeekJS;var h=e.year;e=e.day+(0!==h%4||0===h%100&&0!==h%400?q:x)[e.monthJS]-1;h=Math.floor(e/7);return a-n+(0>a-n?7:0)<e-7*h?h+1:h})};w.weekday=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.dayOfWeekJS})};w.isoweekday=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],
C.defaultTimeZone(k));return null===a?NaN:a.dayOfWeekISO})};w.isomonth=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.monthISO})};w.isoweek=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.weekISO})};w.isoyear=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,1,1,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));return null===a?NaN:a.yearISO})};w.date=function(k,c){return l(k,
c,(a,e,n)=>{C.pcCheck(n,0,8,k,c);if(3===n.length)return A(F.ArcadeDate.fromParts(C.toNumber(n[0]),C.toNumber(n[1])+1,C.toNumber(n[2]),0,0,0,0,C.defaultTimeZone(k)));if(4===n.length)return A(F.ArcadeDate.fromParts(C.toNumber(n[0]),C.toNumber(n[1])+1,C.toNumber(n[2]),C.toNumber(n[3]),0,0,0,C.defaultTimeZone(k)));if(5===n.length)return A(F.ArcadeDate.fromParts(C.toNumber(n[0]),C.toNumber(n[1])+1,C.toNumber(n[2]),C.toNumber(n[3]),C.toNumber(n[4]),0,0,C.defaultTimeZone(k)));if(6===n.length)return A(F.ArcadeDate.fromParts(C.toNumber(n[0]),
C.toNumber(n[1])+1,C.toNumber(n[2]),C.toNumber(n[3]),C.toNumber(n[4]),C.toNumber(n[5]),0,C.defaultTimeZone(k)));if(7===n.length)return A(F.ArcadeDate.fromParts(C.toNumber(n[0]),C.toNumber(n[1])+1,C.toNumber(n[2]),C.toNumber(n[3]),C.toNumber(n[4]),C.toNumber(n[5]),C.toNumber(n[6]),C.defaultTimeZone(k)));if(8===n.length)return A(F.ArcadeDate.fromParts(C.toNumber(n[0]),C.toNumber(n[1])+1,C.toNumber(n[2]),C.toNumber(n[3]),C.toNumber(n[4]),C.toNumber(n[5]),C.toNumber(n[6]),z(C.toString(n[7]),k)));if(2===
n.length){a=C.toString(n[1]);if(""===a)return null;a=C.standardiseDateFormat(a);n="X"===a?b.DateTime.fromSeconds(C.toNumber(n[0])):"x"===a?b.DateTime.fromMillis(C.toNumber(n[0])):b.DateTime.fromFormat(C.toString(n[0]),a,{locale:m.getLocale(),numberingSystem:"latn"});return n.isValid?F.ArcadeDate.dateTimeToArcadeDate(n):null}if(1===n.length){if(C.isString(n[0])){if(""===n[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(n[0]))return C.toDate(n[0]+
"-01-01",C.defaultTimeZone(k))}a=C.toNumber(n[0]);return!1===isNaN(a)?(n=b.DateTime.fromMillis(a),n.isValid?F.ArcadeDate.dateTimeAndZoneToArcadeDate(n,C.defaultTimeZone(k)):null):C.toDate(n[0],C.defaultTimeZone(k))}return 0===n.length?F.ArcadeDate.nowToArcadeDate(C.defaultTimeZone(k)):null})};w.datediff=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,2,4,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));e=C.toDate(n[1],C.defaultTimeZone(k));if(null===a||null===e)return NaN;let h=C.defaultUndefined(n[3],
"");""!==h&&null!==h?(h=C.toString(h),a=F.ArcadeDate.arcadeDateAndZoneToArcadeDate(a,h),e=F.ArcadeDate.arcadeDateAndZoneToArcadeDate(e,h)):a.timeZone!==e.timeZone&&(a.isUnknownTimeZone?a=F.ArcadeDate.arcadeDateAndZoneToArcadeDate(a,e.timeZone):e=F.ArcadeDate.arcadeDateAndZoneToArcadeDate(e,a.timeZone));switch(C.toString(n[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(e,"days");case "months":case "month":return a.diff(e,"months");case "minutes":case "minute":case "m":return"M"===
n[2]?a.diff(e,"months"):a.diff(e,"minutes");case "seconds":case "second":case "s":return a.diff(e,"seconds");case "milliseconds":case "millisecond":case "ms":return a.diff(e);case "hours":case "hour":case "h":return a.diff(e,"hours");case "years":case "year":case "y":return a.diff(e,"years");default:return a.diff(e)}})};w.dateadd=function(k,c){return l(k,c,(a,e,n)=>{C.pcCheck(n,2,3,k,c);a=C.toDate(n[0],C.defaultTimeZone(k));if(null===a)return null;e=C.toNumber(n[1]);if(isNaN(e))return a;let h="milliseconds";
switch(C.toString(n[2]).toLowerCase()){case "days":case "day":case "d":h="days";e=C.absRound(e);break;case "months":case "month":h="months";e=C.absRound(e);break;case "minutes":case "minute":case "m":h="M"===n[2]?"months":"minutes";break;case "seconds":case "second":case "s":h="seconds";break;case "milliseconds":case "millisecond":case "ms":h="milliseconds";break;case "hours":case "hour":case "h":h="hours";break;case "years":case "year":case "y":h="years"}return a.plus({[h]:e})})}};Object.defineProperty(v,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geometry":function(){define("exports ../Dictionary ../Feature ../ImmutablePointArray ../../chunks/languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../executionError ../ImmutablePathArray ../../geometry/support/coordsUtils".split(" "),function(v,F,C,p,m,b,A,z,q,x,w,l,k,c,a,e){function n(B){return B&&
"esri.arcade.Feature"===B.arcadeDeclaredClass}function h(B,d,t,u,E=1){d=d.toLowerCase();switch(d){case "hasz":return B=B.hasZ,void 0===B?!1:B;case "hasm":return B=B.hasM,void 0===B?!1:B;case "spatialreference":return d=B.spatialReference._arcadeCacheId,void 0===d&&(t=!0,Object.freeze&&Object.isFrozen(B.spatialReference)&&(t=!1),t&&(D++,d=B.spatialReference._arcadeCacheId=D)),B=new F({wkt:B.spatialReference.wkt,wkid:B.spatialReference.wkid}),void 0!==d&&(B._arcadeCacheId="SPREF"+d.toString()),B}switch(B.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return B=
B[d],void 0!==B?B:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=B.cache._arcadeCacheId,void 0===d&&(D++,d=D,B.cache._arcadeCacheId=d),new a(B.rings,B.spatialReference,!0===B.hasZ,!0===B.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==B[d]?B[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=B.cache._arcadeCacheId,void 0===d&&(D++,d=D,B.cache._arcadeCacheId=
d),new a(B.paths,B.spatialReference,!0===B.hasZ,!0===B.hasM,d);case "type":return"Polyline"}break;case "multipoint":switch(d){case "points":return d=B.cache._arcadeCacheId,void 0===d&&(D++,d=D,B.cache._arcadeCacheId=d),new p(B.points,B.spatialReference,!0===B.hasZ,!0===B.hasM,d,1);case "type":return"Multipoint"}}if(1===E)throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidIdentifier,u);return 2===E?{keystate:"notfound"}:null}let D=0;v.geometryMember=h;v.registerFunctions=function(B,d){B.ringisclockwise=
function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,1,1,t,u);E=[];let ia=g=!1;if(null===J[0])return!1;if(m.isArray(J[0])){for(const X of J[0])if(X instanceof q)E.push(X.hasZ?X.hasM?[X.x,X.y,X.z,X.m]:[X.x,X.y,X.z]:[X.x,X.y]);else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);0<E.length&&(g=J[0][0].hasZ,ia=J[0][0].hasM)}else if(J[0]instanceof p)E=J[0]._elements,0<E.length&&(g=J[0]._hasZ,ia=J[0]._hasM);else if(m.isImmutableArray(J[0])){for(const X of J[0].toArray())if(X instanceof
q)E.push(X.hasZ?X.hasM?[X.x,X.y,X.z,X.m]:[X.x,X.y,X.z]:[X.x,X.y]);else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);0<E.length&&(g=J[0].get(0).hasZ,ia=J[0].get(0).hasM)}else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);return 3>E.length?!1:e.isClockwise(E,ia,g)})};B.polygon=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,1,1,t,u);E=null;if(J[0]instanceof F){if(E=m.fixSpatialReference(C.parseGeometryFromDictionary(J[0]),t.spatialReference),
!1===E instanceof x)throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);}else E=J[0]instanceof x?k.fromJSON(J[0].toJSON()):m.fixSpatialReference(new x(JSON.parse(J[0])),t.spatialReference);if(null!==E&&!1===E.spatialReference.equals(t.spatialReference))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongSpatialReference,u);return m.fixNullGeometry(E)})};B.polyline=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,1,1,t,u);E=null;if(J[0]instanceof F){if(E=m.fixSpatialReference(C.parseGeometryFromDictionary(J[0]),
t.spatialReference),!1===E instanceof w)throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);}else E=J[0]instanceof w?k.fromJSON(J[0].toJSON()):m.fixSpatialReference(new w(JSON.parse(J[0])),t.spatialReference);if(null!==E&&!1===E.spatialReference.equals(t.spatialReference))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongSpatialReference,u);return m.fixNullGeometry(E)})};B.point=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,1,1,t,u);E=null;if(J[0]instanceof
F){if(E=m.fixSpatialReference(C.parseGeometryFromDictionary(J[0]),t.spatialReference),!1===E instanceof q)throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);}else E=J[0]instanceof q?k.fromJSON(J[0].toJSON()):m.fixSpatialReference(new q(JSON.parse(J[0])),t.spatialReference);if(null!==E&&!1===E.spatialReference.equals(t.spatialReference))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongSpatialReference,u);return m.fixNullGeometry(E)})};B.multipoint=function(t,
u){return d(t,u,(E,g,J)=>{m.pcCheck(J,1,1,t,u);E=null;if(J[0]instanceof F){if(E=m.fixSpatialReference(C.parseGeometryFromDictionary(J[0]),t.spatialReference),!1===E instanceof z)throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);}else E=J[0]instanceof z?k.fromJSON(J[0].toJSON()):m.fixSpatialReference(new z(JSON.parse(J[0])),t.spatialReference);if(null!==E&&!1===E.spatialReference.equals(t.spatialReference))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongSpatialReference,
u);return m.fixNullGeometry(E)})};B.extent=function(t,u){return d(t,u,(E,g,J)=>{J=m.autoCastFeatureToGeometry(J);m.pcCheck(J,1,1,t,u);E=null;J[0]instanceof F?E=m.fixSpatialReference(C.parseGeometryFromDictionary(J[0]),t.spatialReference):J[0]instanceof q?(E={xmin:J[0].x,ymin:J[0].y,xmax:J[0].x,ymax:J[0].y,spatialReference:J[0].spatialReference.toJSON()},J=J[0],J.hasZ?(E.zmin=J.z,E.zmax=J.z):J.hasM&&(E.mmin=J.m,E.mmax=J.m),E=k.fromJSON(E)):E=J[0]instanceof x?k.fromJSON(J[0].extent?.toJSON()):J[0]instanceof
w?k.fromJSON(J[0].extent?.toJSON()):J[0]instanceof z?k.fromJSON(J[0].extent?.toJSON()):J[0]instanceof b?k.fromJSON(J[0].toJSON()):m.fixSpatialReference(new b(JSON.parse(J[0])),t.spatialReference);if(null!==E&&!1===E.spatialReference.equals(t.spatialReference))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongSpatialReference,u);return m.fixNullGeometry(E)})};B.geometry=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,1,1,t,u);E=null;if(null===J[0])return null;E=n(J[0])?m.fixSpatialReference(J[0].geometry(),
t.spatialReference):J[0]instanceof F?m.fixSpatialReference(C.parseGeometryFromDictionary(J[0]),t.spatialReference):m.fixSpatialReference(k.fromJSON(JSON.parse(J[0])),t.spatialReference);if(null!==E&&!1===E.spatialReference.equals(t.spatialReference))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongSpatialReference,u);return m.fixNullGeometry(E)})};B.setgeometry=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,2,2,t,u);if(n(J[0])){if(!0===J[0].immutable)throw new c.ArcadeExecutionError(t,
c.ExecutionErrorCodes.Immutable,u);if(J[1]instanceof A||null===J[1])J[0]._geometry=J[1];else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);}else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);return m.voidOperation})};B.feature=function(t,u){return d(t,u,(E,g,J)=>{if(0===J.length)throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongNumberOfParameters,u);E=null;if(1===J.length)if(m.isString(J[0]))E=C.fromJson(JSON.parse(J[0]),t.timeReference);
else if(n(J[0]))E=C.createFromArcadeFeature(J[0]);else if(J[0]instanceof A)E=C.createFromGraphicLikeObject(J[0],null,null,t.timeReference);else if(J[0]instanceof F)E=J[0].hasField("geometry")?J[0].field("geometry"):null,J=J[0].hasField("attributes")?J[0].field("attributes"):null,null!==E&&E instanceof F&&(E=C.parseGeometryFromDictionary(E)),null!==J&&(J=C.parseAttributesFromDictionary(J)),E=C.createFromGraphicLikeObject(E,J,null,t.timeReference);else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,
u);else if(2===J.length){g=E=null;if(null!==J[0])if(J[0]instanceof A)E=J[0];else if(E instanceof F)E=C.parseGeometryFromDictionary(J[0]);else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);if(null!==J[1])if(J[1]instanceof F)g=C.parseAttributesFromDictionary(J[1]);else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);E=C.createFromGraphicLikeObject(E,g,null,t.timeReference)}else{E=null;g={};if(null!==J[0])if(J[0]instanceof A)E=J[0];else if(E instanceof
F)E=C.parseGeometryFromDictionary(J[0]);else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);for(let ia=1;ia<J.length;ia+=2){const X=m.toString(J[ia]),ea=J[ia+1];if(null===ea||void 0===ea||m.isString(ea)||isNaN(ea)||m.isDate(ea)||m.isNumber(ea)||m.isBoolean(ea)){if(m.isFunctionParameter(ea)||!1===m.isSimpleType(ea))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);g[X]=ea===m.voidOperation?null:ea}else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,
u);}E=C.createFromGraphicLikeObject(E,g,null,t.timeReference)}E._geometry=m.fixSpatialReference(E.geometry(),t.spatialReference);E.immutable=!1;return E})};B.dictionary=function(t,u){return d(t,u,(E,g,J)=>{if(0===J.length)return J=new F,J.immutable=!1,J;if(1===J.length&&m.isString(J[0]))try{var ia=JSON.parse(J[0]),X=F.convertObjectToArcadeDictionary(ia,m.defaultTimeZone(t),!1);X.immutable=!1;return X}catch(ea){throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);}if(0!==J.length%
2)throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.WrongNumberOfParameters,u);E={};for(g=0;g<J.length;g+=2)if(ia=m.toString(J[g]),X=J[g+1],null===X||void 0===X||m.isString(X)||isNaN(X)||m.isDate(X)||m.isNumber(X)||m.isBoolean(X)||m.isArray(X)||m.isImmutableArray(X)){if(m.isFunctionParameter(X))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);E[ia]=X===m.voidOperation?null:X}else throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);J=new F(E);
J.immutable=!1;return J})};B.haskey=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,2,2,t,u);E=m.toString(J[1]);if(n(J[0])||J[0]instanceof F)return J[0].hasField(E);if(J[0]instanceof A)return(J=h(J[0],E,null,null,2))&&"notfound"===J.keystate?!1:!0;throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);})};B.hasvalue=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,2,2,t,u);if(null===J[0]||null===J[1])return!1;E=m.toString(J[1]);return m.isFeature(J[0])||J[0]instanceof F?J[0].hasField(E)&&
null!==J[0].field(E)?!0:!1:J[0]instanceof A?null===h(J[0],E,null,null,0)?!1:!0:!1})};B.indexof=function(t,u){return d(t,u,(E,g,J)=>{m.pcCheck(J,2,2,t,u);E=J[1];if(m.isArray(J[0])){for(g=0;g<J[0].length;g++)if(m.equalityTest(E,J[0][g]))return g;return-1}if(m.isImmutableArray(J[0])){g=J[0].length();for(let ia=0;ia<g;ia++)if(m.equalityTest(E,J[0].get(ia)))return ia;return-1}throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);})};B.angle=function(t,u){return d(t,u,(E,g,J)=>{J=
m.autoCastFeatureToGeometry(J);m.pcCheck(J,2,3,t,u);if(!(J[0]instanceof q))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);if(!(J[1]instanceof q))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);if(2<J.length&&!(J[2]instanceof q))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);return 2===J.length?l.angle2D(J[0],J[1]):l.angleBetween2D(J[0],J[1],J[2])})};B.bearing=function(t,u){return d(t,u,(E,g,J)=>{J=m.autoCastFeatureToGeometry(J);
m.pcCheck(J,2,3,t,u);if(!(J[0]instanceof q))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);if(!(J[1]instanceof q))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);if(2<J.length&&!(J[2]instanceof q))throw new c.ArcadeExecutionError(t,c.ExecutionErrorCodes.InvalidParameter,u);return 2===J.length?l.bearing2D(J[0],J[1]):l.bearingBetween2D(J[0],J[1],J[2])})};B.isselfintersecting=function(t,u){return d(t,u,(E,g,J)=>{J=m.autoCastFeatureToGeometry(J);
m.pcCheck(J,1,1,t,u);E=J[0];if(E instanceof x)return E.isSelfIntersecting;if(E instanceof w)return E=E.paths,l.pathsSelfIntersecting(E);if(E instanceof z)for(g=E.points,J=0;J<g.length;J++)for(let ia=0;ia<g.length;ia++)if(ia!==J){let X=!0;for(let ea=0;ea<g[J].length;ea++)if(g[J][ea]!==g[ia][ea]){X=!1;break}if(!0===X)return!0}return m.isArray(E)||m.isImmutableArray(E)?(E=m.autoCastArrayOfPointsToPolyline(E,t.spatialReference),null!==E&&(E=E.paths),l.pathsSelfIntersecting(E)):!1})}};Object.defineProperty(v,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../geometry/Point","../../geometry/support/intersectsBase"],function(v,F,C){function p(l,k,c){const a={x:0,y:0};k&&(a.z=0);c&&(a.m=0);let e=0;var n=l[0];for(let t=0;t<l.length;t++){const u=l[t];a:if(u.length!==n.length)var h=!1;else{for(h=0;h<u.length;h++)if(u[h]!==n[h]){h=!1;break a}h=!0}if(!1===h){h=m(n,u,k);var D=u,B=k,d=c;const E={x:(n[0]+D[0])/2,y:(n[1]+D[1])/2};B&&(E.z=(n[2]+D[2])/2);B&&
d?E.m=(n[3]+D[3])/2:d&&(E.m=(n[2]+D[2])/2);n=E;n.x*=h;n.y*=h;a.x+=n.x;a.y+=n.y;k&&(n.z*=h,a.z+=n.z);c&&(n.m*=h,a.m+=n.m);e+=h;n=u}}0<e?(a.x/=e,a.y/=e,k&&(a.z/=e),c&&(a.m/=e)):(a.x=l[0][0],a.y=l[0][1],k&&(a.z=l[0][2]),c&&k?a.m=l[0][3]:c&&(a.m=l[0][2]));return a}function m(l,k,c){const a=k[0]-l[0];l=k[1]-l[1];return c?(k=k[2]-k[2],Math.sqrt(a*a+l*l+k*k)):Math.sqrt(a*a+l*l)}function b(l,k,c=0){for(;l<c;)l+=k;for(c+=k;l>=c;)l-=k;return l}function A(l,k){return Math.atan2(k.y-l.y,k.x-l.x)}function z(l,
k,c){var a=l.x-k.x;l=l.y-k.y;var e=c.x-k.x;k=c.y-k.y;return Math.atan2(a*k-e*l,a*e+l*k)}const q=[];for(const l of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const k=l[0];for(let c=1;c<l.length;c++)q[l[c]]=k}const x=[];x[9002]=.3048;x[9003]=.3048006096012192;x[9095]=.3048007491;const w=[0,0];v.angle2D=function(l,k){return b(A(l,k),2*Math.PI)*(180/Math.PI)};v.angleBetween2D=function(l,k,c){return b(z(l,k,c),2*Math.PI)*(180/Math.PI)};v.angleBetweenRad=
z;v.angleRad=A;v.bearing2D=function(l,k){return b(Math.PI/2-A(l,k),2*Math.PI)*(180/Math.PI)};v.bearingBetween2D=function(l,k,c){return b(-1*z(l,k,c),2*Math.PI)*(180/Math.PI)};v.centroidMultiPoint=function(l){if(0===l.points.length)return null;var k=0;let c=0,a=0,e=0;for(let n=0;n<l.points.length;n++){const h=l.getPoint(n);!0===h.hasZ&&(a+=h.z);!0===h.hasM&&(e+=h.m);k+=h.x;c+=h.y;e+=h.m}k={x:k/l.points.length,y:c/l.points.length,spatialReference:null};k.spatialReference=l.spatialReference.toJSON();
!0===l.hasZ&&(k.z=a/l.points.length);!0===l.hasM&&(k.m=e/l.points.length);return new F(k)};v.centroidPolyline=function(l){const k={x:0,y:0,spatialReference:l.spatialReference.toJSON()},c={x:0,y:0,spatialReference:l.spatialReference.toJSON()};let a=0,e=0;for(let D=0;D<l.paths.length;D++)if(0!==l.paths[D].length){a:{var n=l.paths[D];var h=!0===l.hasZ;if(1>=n.length){n=0;break a}let B=0;for(let d=1;d<n.length;d++)B+=m(n[d-1],n[d],h);n=B}0===n?(n=p(l.paths[D],!0===l.hasZ,!0===l.hasM),k.x+=n.x,k.y+=n.y,
!0===l.hasZ&&(k.z+=n.z),!0===l.hasM&&(k.m+=n.m),++a):(h=p(l.paths[D],!0===l.hasZ,!0===l.hasM),c.x+=h.x*n,c.y+=h.y*n,!0===l.hasZ&&(c.z+=h.z*n),!0===l.hasM&&(c.m+=h.m*n),e+=n)}return 0<e?(c.x/=e,c.y/=e,!0===l.hasZ&&(c.z/=e),!0===l.hasM&&(c.m/=e),new F(c)):0<a?(k.x/=a,k.y/=a,!0===l.hasZ&&(c.z/=a),!0===l.hasM&&(k.m/=a),new F(k)):null};v.getMetersPerVerticalUnitForSR=function(l){return l.vcsWkid&&void 0!==q[l.vcsWkid]?x[q[l.vcsWkid]]:l.latestVcsWkid&&void 0!==q[l.latestVcsWkid]?x[q[l.latestVcsWkid]]:1};
v.pathsSelfIntersecting=function(l){for(let B=0;B<l.length;B++){const d=l[B];for(var k=0;k<d.length-1;k++){var c=d[k],a=d[k+1];for(var e=B+1;e<l.length;e++)for(var n=0;n<l[e].length-1;n++){var h=l[e][n],D=l[e][n+1];if(C.segmentIntersects(c,a,h,D,w)&&!(w[0]===c[0]&&w[1]===c[1]||w[0]===h[0]&&w[1]===h[1]||w[0]===a[0]&&w[1]===a[1]||w[0]===D[0]&&w[1]===D[1]))return!0}}k=d.length;if(!(3>k))for(c=0;c<=k-2;c++)for(a=d[c],e=d[c+1],n=c+2;n<=k-2;n++)if(h=d[n],D=d[n+1],C.segmentIntersects(a,e,h,D,w)&&!(w[0]===
a[0]&&w[1]===a[1]||w[0]===h[0]&&w[1]===h[1]||w[0]===e[0]&&w[1]===e[1]||w[0]===D[0]&&w[1]===D[1]))return!0}return!1};v.segmentLength3d=function(l,k,c){return Math.sqrt((l[0]-k[0])**2+(l[1]-k[1])**2+(void 0!==l[2]&&void 0!==k[2]?(l[2]*c-k[2]*c)**2:0))};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geomsync":function(){define("exports ../../kernel ../kernel ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils ../executionError ../../core/unitUtils".split(" "),
function(v,F,C,p,m,b,A,z,q,x,w,l,k,c){function a(h){return 0===F.version.indexOf("4.")?x.fromExtent(h):new x({spatialReference:h.spatialReference,rings:[[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]]]})}function e(h,D){if("polygon"!==h.type&&"polyline"!==h.type&&"extent"!==h.type)return 0;var B=1;if(h.spatialReference.vcsWkid||h.spatialReference.latestVcsWkid){B=m.getMetersPerVerticalUnitForSR(h.spatialReference);var d=c.getMetersPerUnitForSR(h.spatialReference);
B/=d}d=0;if("polyline"===h.type)for(var t of h.paths)for(var u=1;u<t.length;u++)d+=m.segmentLength3d(t[u],t[u-1],B);else if("polygon"===h.type)for(u of h.rings){for(t=1;t<u.length;t++)d+=m.segmentLength3d(u[t],u[t-1],B);if(u[0][0]!==u[u.length-1][0]||u[0][1]!==u[u.length-1][1]||void 0!==u[0][2]&&u[0][2]!==u[u.length-1][2])d+=m.segmentLength3d(u[0],u[u.length-1],B)}else"extent"===h.type&&(d+=2*m.segmentLength3d([h.xmin,h.ymin,0],[h.xmax,h.ymin,0],B),d+=2*m.segmentLength3d([h.xmin,h.ymin,0],[h.xmin,
h.ymax,0],B),d=2*d+4*Math.abs(p.defaultUndefined(h.zmax,0)*B-p.defaultUndefined(h.zmin,0)*B));h=new w({hasZ:!1,hasM:!1,spatialReference:h.spatialReference,paths:[[0,0],[0,d]]});return n.planarLength(h,D)}let n=null;v.registerFunctions=function(h,D){function B(d,t,u){p.pcCheck(u,2,2,d,t);if(!(u[0]instanceof A&&u[1]instanceof A||u[0]instanceof A&&null===u[1]||u[1]instanceof A&&null===u[0]||null===u[0]&&null===u[1]))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);}h.disjoint=
function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===g[0]||null===g[1]?!0:n.disjoint(g[0],g[1])})};h.intersects=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===g[0]||null===g[1]?!1:n.intersects(g[0],g[1])})};h.touches=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===g[0]||null===g[1]?!1:n.touches(g[0],g[1])})};h.crosses=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);
B(d,t,g);return null===g[0]||null===g[1]?!1:n.crosses(g[0],g[1])})};h.within=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===g[0]||null===g[1]?!1:n.within(g[0],g[1])})};h.contains=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===g[0]||null===g[1]?!1:n.contains(g[0],g[1])})};h.overlaps=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===g[0]||null===g[1]?!1:n.overlaps(g[0],
g[1])})};h.equals=function(d,t){return D(d,t,(u,E,g)=>{p.pcCheck(g,2,2,d,t);return g[0]===g[1]?!0:g[0]instanceof A&&g[1]instanceof A?n.equals(g[0],g[1]):p.isDate(g[0])&&p.isDate(g[1])?g[0].equals(g[1]):!1})};h.relate=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,3,3,d,t);if(g[0]instanceof A&&g[1]instanceof A)return n.relate(g[0],g[1],p.toString(g[2]));if(g[0]instanceof A&&null===g[1]||g[1]instanceof A&&null===g[0]||null===g[0]&&null===g[1])return!1;throw new k.ArcadeExecutionError(d,
k.ExecutionErrorCodes.InvalidParameter,t);})};h.intersection=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===g[0]||null===g[1]?null:n.intersect(g[0],g[1])})};h.union=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);u=[];if(0===g.length)throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.WrongNumberOfParameters,t);if(1===g.length)if(p.isArray(g[0]))for(g=p.autoCastFeatureToGeometry(g[0]),E=0;E<g.length;E++){if(null!==g[E]){if(!(g[E]instanceof
A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u.push(g[E])}}else if(p.isImmutableArray(g[0]))for(g=p.autoCastFeatureToGeometry(g[0].toArray()),E=0;E<g.length;E++){if(null!==g[E]){if(!(g[E]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u.push(g[E])}}else{if(g[0]instanceof A)return p.fixSpatialReference(C.cloneGeometry(g[0]),d.spatialReference);if(null===g[0])return null;throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,
t);}else for(E=0;E<g.length;E++)if(null!==g[E]){if(!(g[E]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u.push(g[E])}return 0===u.length?null:n.union(u)})};h.difference=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null!==g[0]&&null===g[1]?C.cloneGeometry(g[0]):null===g[0]?null:n.difference(g[0],g[1])})};h.symmetricdifference=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);B(d,t,g);return null===
g[0]&&null===g[1]?null:null===g[0]?C.cloneGeometry(g[1]):null===g[1]?C.cloneGeometry(g[0]):n.symmetricDifference(g[0],g[1])})};h.clip=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,2,d,t);if(!(g[1]instanceof b)&&null!==g[1])throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return null===g[1]?null:n.clip(g[0],
g[1])})};h.cut=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,2,d,t);if(!(g[1]instanceof w)&&null!==g[1])throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);if(null===g[0])return[];if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return null===g[1]?[C.cloneGeometry(g[0])]:n.cut(g[0],g[1])})};h.area=function(d,t){return D(d,t,(u,E,g)=>{p.pcCheck(g,1,2,d,t);g=p.autoCastFeatureToGeometry(g);
if(null===g[0])return 0;if(p.isArray(g[0])||p.isImmutableArray(g[0]))return u=p.autoCastArrayOfPointsToPolygon(g[0],d.spatialReference),null===u?0:n.planarArea(u,C.convertSquareUnitsToCode(p.defaultUndefined(g[1],-1)));if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.planarArea(g[0],C.convertSquareUnitsToCode(p.defaultUndefined(g[1],-1)))})};h.areageodetic=function(d,t){return D(d,t,(u,E,g)=>{p.pcCheck(g,1,2,d,t);g=p.autoCastFeatureToGeometry(g);
if(null===g[0])return 0;if(p.isArray(g[0])||p.isImmutableArray(g[0]))return u=p.autoCastArrayOfPointsToPolygon(g[0],d.spatialReference),null===u?0:n.geodesicArea(u,C.convertSquareUnitsToCode(p.defaultUndefined(g[1],-1)));if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.geodesicArea(g[0],C.convertSquareUnitsToCode(p.defaultUndefined(g[1],-1)))})};h.length=function(d,t){return D(d,t,(u,E,g)=>{p.pcCheck(g,1,2,d,t);g=p.autoCastFeatureToGeometry(g);
if(null===g[0])return 0;if(p.isArray(g[0])||p.isImmutableArray(g[0]))return u=p.autoCastArrayOfPointsToPolyline(g[0],d.spatialReference),null===u?0:n.planarLength(u,C.convertLinearUnitsToCode(p.defaultUndefined(g[1],-1)));if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.planarLength(g[0],C.convertLinearUnitsToCode(p.defaultUndefined(g[1],-1)))})};h.length3d=function(d,t){return D(d,t,(u,E,g)=>{p.pcCheck(g,1,2,d,t);g=p.autoCastFeatureToGeometry(g);
if(null===g[0])return 0;if(p.isArray(g[0])||p.isImmutableArray(g[0]))return u=p.autoCastArrayOfPointsToPolyline(g[0],d.spatialReference),null===u?0:!0===u.hasZ?e(u,C.convertLinearUnitsToCode(p.defaultUndefined(g[1],-1))):n.planarLength(u,C.convertLinearUnitsToCode(p.defaultUndefined(g[1],-1)));if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return!0===g[0].hasZ?e(g[0],C.convertLinearUnitsToCode(p.defaultUndefined(g[1],-1))):n.planarLength(g[0],C.convertLinearUnitsToCode(p.defaultUndefined(g[1],
-1)))})};h.lengthgeodetic=function(d,t){return D(d,t,(u,E,g)=>{p.pcCheck(g,1,2,d,t);g=p.autoCastFeatureToGeometry(g);if(null===g[0])return 0;if(p.isArray(g[0])||p.isImmutableArray(g[0]))return u=p.autoCastArrayOfPointsToPolyline(g[0],d.spatialReference),null===u?0:n.geodesicLength(u,C.convertLinearUnitsToCode(p.defaultUndefined(g[1],-1)));if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.geodesicLength(g[0],C.convertLinearUnitsToCode(p.defaultUndefined(g[1],
-1)))})};h.distance=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,3,d,t);u=g[0];if(p.isArray(g[0])||p.isImmutableArray(g[0]))u=p.autoCastArrayOfPointsToMultiPoint(g[0],d.spatialReference);E=g[1];if(p.isArray(g[1])||p.isImmutableArray(g[1]))E=p.autoCastArrayOfPointsToMultiPoint(g[1],d.spatialReference);if(!(u instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);if(!(E instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,
t);return n.distance(u,E,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1)))})};h.distancegeodetic=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,3,d,t);u=g[0];E=g[1];if(!(u instanceof q))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);if(!(E instanceof q))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);const J=new w({paths:[],spatialReference:u.spatialReference});J.addPath([u,E]);return n.geodesicLength(J,
C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1)))})};h.densify=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,3,d,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u=p.toNumber(g[1]);if(isNaN(u))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);if(0>=u)throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return g[0]instanceof
x||g[0]instanceof w?n.densify(g[0],u,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1))):g[0]instanceof b?n.densify(a(g[0]),u,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1))):g[0]})};h.densifygeodetic=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,3,d,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u=p.toNumber(g[1]);if(isNaN(u))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,
t);if(0>=u)throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return g[0]instanceof x||g[0]instanceof w?n.geodesicDensify(g[0],u,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1))):g[0]instanceof b?n.geodesicDensify(a(g[0]),u,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1))):g[0]})};h.generalize=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,4,d,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,
k.ExecutionErrorCodes.InvalidParameter,t);u=p.toNumber(g[1]);if(isNaN(u))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.generalize(g[0],u,p.toBoolean(p.defaultUndefined(g[2],!0)),C.convertLinearUnitsToCode(p.defaultUndefined(g[3],-1)))})};h.buffer=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,3,d,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,
t);u=p.toNumber(g[1]);if(isNaN(u))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return 0===u?C.cloneGeometry(g[0]):n.buffer(g[0],u,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1)))})};h.buffergeodetic=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,3,d,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u=p.toNumber(g[1]);if(isNaN(u))throw new k.ArcadeExecutionError(d,
k.ExecutionErrorCodes.InvalidParameter,t);return 0===u?C.cloneGeometry(g[0]):n.geodesicBuffer(g[0],u,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1)))})};h.offset=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,2,6,d,t);if(null===g[0])return null;if(!(g[0]instanceof x||g[0]instanceof w))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u=p.toNumber(g[1]);if(isNaN(u))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,
t);E=p.toNumber(p.defaultUndefined(g[4],10));if(isNaN(E))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);const J=p.toNumber(p.defaultUndefined(g[5],0));if(isNaN(J))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.offset(g[0],u,C.convertLinearUnitsToCode(p.defaultUndefined(g[2],-1)),p.toString(p.defaultUndefined(g[3],"round")).toLowerCase(),E,J)})};h.rotate=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,
2,3,d,t);u=g[0];if(null===u)return null;if(!(u instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);u instanceof b&&(u=x.fromExtent(u));E=p.toNumber(g[1]);if(isNaN(E))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);g=p.defaultUndefined(g[2],null);if(null===g)return n.rotate(u,E);if(g instanceof q)return n.rotate(u,E,g);throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);})};h.centroid=function(d,t){return D(d,
t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,1,1,d,t);if(null===g[0])return null;u=g[0];if(p.isArray(g[0])||p.isImmutableArray(g[0]))u=p.autoCastArrayOfPointsToMultiPoint(g[0],d.spatialReference);if(null===u)return null;if(!(u instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return u instanceof q?p.fixSpatialReference(C.cloneGeometry(g[0]),d.spatialReference):u instanceof x?u.centroid:u instanceof w?m.centroidPolyline(u):u instanceof z?m.centroidMultiPoint(u):
u instanceof b?u.center:null})};h.multiparttosinglepart=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,1,1,d,t);E=[];if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);if(g[0]instanceof q||g[0]instanceof b)return[p.fixSpatialReference(C.cloneGeometry(g[0]),d.spatialReference)];u=n.simplify(g[0]);if(u instanceof x){g=[];E=[];for(var J=0;J<u.rings.length;J++)if(u.isClockwise(u.rings[J])){const ia=
l.fromJSON({rings:[u.rings[J]],hasZ:!0===u.hasZ,hasM:!0===u.hasM,spatialReference:u.spatialReference.toJSON()});g.push(ia)}else E.push({ring:u.rings[J],pt:u.getPoint(J,0)});for(u=0;u<E.length;u++)for(J=0;J<g.length;J++)if(g[J].contains(E[u].pt)){g[J].addRing(E[u].ring);break}return g}if(u instanceof w){g=[];for(E=0;E<u.paths.length;E++)J=l.fromJSON({paths:[u.paths[E]],hasZ:!0===u.hasZ,hasM:!0===u.hasM,spatialReference:u.spatialReference.toJSON()}),g.push(J);return g}if(g[0]instanceof z){u=p.fixSpatialReference(C.cloneGeometry(g[0]),
d.spatialReference);for(g=0;g<u.points.length;g++)E.push(u.getPoint(g));return E}return null})};h.issimple=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,1,1,d,t);if(null===g[0])return!0;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.isSimple(g[0])})};h.simplify=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,1,1,d,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,
k.ExecutionErrorCodes.InvalidParameter,t);return n.simplify(g[0])})};h.convexhull=function(d,t){return D(d,t,(u,E,g)=>{g=p.autoCastFeatureToGeometry(g);p.pcCheck(g,1,1,d,t);if(null===g[0])return null;if(!(g[0]instanceof A))throw new k.ArcadeExecutionError(d,k.ExecutionErrorCodes.InvalidParameter,t);return n.convexHull(g[0])})}};v.setGeometryEngine=function(h){n=h};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],
function(v,F){v.cloneGeometry=function(C){if(null==C)return null;const p=C.clone();void 0!==C.cache._geVersion&&(p.cache._geVersion=C.cache._geVersion);return p};v.convertLinearUnitsToCode=function(C){if(null==C)return null;if("number"===typeof C)return C;C=C.toLowerCase();C=C.replace(/\s/g,"");C=C.replace(/-/g,"");switch(C){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};v.convertSquareUnitsToCode=function(C){if(null==C)return null;if("number"===typeof C)return C;C=C.toLowerCase();C=C.replace(/\s/g,"");C=C.replace(/-/g,"");switch(C){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;
case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};
v.sameGeomType=function(C,p){return C===p||"point"===C&&"esriGeometryPoint"===p||"polyline"===C&&"esriGeometryPolyline"===p||"polygon"===C&&"esriGeometryPolygon"===p||"extent"===C&&"esriGeometryEnvelope"===p||"multipoint"===C&&"esriGeometryMultipoint"===p||"point"===p&&"esriGeometryPoint"===C||"polyline"===p&&"esriGeometryPolyline"===C||"polygon"===p&&"esriGeometryPolygon"===C||"extent"===p&&"esriGeometryEnvelope"===C||"multipoint"===p&&"esriGeometryMultipoint"===C?!0:!1};v.shapeExtent=function(C){if(null==
C)return null;switch(C.type){case "polygon":case "multipoint":case "polyline":return C.extent;case "point":return new F({xmin:C.x,ymin:C.y,xmax:C.x,ymax:C.y,spatialReference:C.spatialReference});case "extent":return C}return null};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/maths":function(){define(["exports","../../chunks/languageUtils","../../core/number"],function(v,F,C){function p(m,b,A){if("undefined"===typeof A||0===+A)return Math[m](b);b=+b;A=+A;if(isNaN(b)||
"number"!==typeof A||0!==A%1)return NaN;b=b.toString().split("e");b=Math[m](+(b[0]+"e"+(b[1]?+b[1]-A:-A)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+A:A))}v.registerFunctions=function(m,b){function A(z,q,x){z=F.toNumber(z);return isNaN(z)?z:isNaN(q)||isNaN(x)||q>x?NaN:z<q?q:z>x?x:z}m.number=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,2,z,q);x=l[0];return F.isNumber(x)?x:null===x?0:F.isDate(x)?x.toNumber():F.isBoolean(x)?Number(x):F.isArray(x)?NaN:""===x||void 0===x?Number(x):F.isString(x)?
void 0!==l[1]?(l=F.multiReplace(l[1],"\u2030",""),l=F.multiReplace(l,"\u00a4",""),C.parse(x,{pattern:l})):Number(x.trim()):Number(x)})};m.abs=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return Math.abs(F.toNumber(l[0]))})};m.acos=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return Math.acos(F.toNumber(l[0]))})};m.asin=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return Math.asin(F.toNumber(l[0]))})};m.atan=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,
1,z,q);return Math.atan(F.toNumber(l[0]))})};m.atan2=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,2,2,z,q);return Math.atan2(F.toNumber(l[0]),F.toNumber(l[1]))})};m.ceil=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,2,z,q);return 2===l.length?(x=F.toNumber(l[1]),isNaN(x)&&(x=0),p("ceil",F.toNumber(l[0]),-1*x)):Math.ceil(F.toNumber(l[0]))})};m.round=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,2,z,q);return 2===l.length?(x=F.toNumber(l[1]),isNaN(x)&&(x=0),p("round",F.toNumber(l[0]),
-1*x)):Math.round(F.toNumber(l[0]))})};m.floor=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,2,z,q);return 2===l.length?(x=F.toNumber(l[1]),isNaN(x)&&(x=0),p("floor",F.toNumber(l[0]),-1*x)):Math.floor(F.toNumber(l[0]))})};m.cos=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return Math.cos(F.toNumber(l[0]))})};m.isnan=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return"number"===typeof l[0]&&isNaN(l[0])})};m.exp=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);
return Math.exp(F.toNumber(l[0]))})};m.log=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return Math.log(F.toNumber(l[0]))})};m.pow=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,2,2,z,q);return F.toNumber(l[0])**F.toNumber(l[1])})};m.random=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,0,0,z,q);return Math.random()})};m.sin=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return Math.sin(F.toNumber(l[0]))})};m.sqrt=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,
q);return Math.sqrt(F.toNumber(l[0]))})};m.tan=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return Math.tan(F.toNumber(l[0]))})};m.defaultvalue=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,2,2,z,q);return null===l[0]||""===l[0]||void 0===l[0]?l[1]:l[0]})};m.isempty=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return null===l[0]||""===l[0]||void 0===l[0]?!0:!1})};m["boolean"]=function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,1,1,z,q);return F.toBoolean(l[0])})};m.constrain=
function(z,q){return b(z,q,(x,w,l)=>{F.pcCheck(l,3,3,z,q);x=F.toNumber(l[1]);w=F.toNumber(l[2]);if(F.isArray(l[0])){var k=[];for(var c of l[0])k.push(A(c,x,w));return k}if(F.isImmutableArray(l[0])){c=[];for(k=0;k<l[0].length();k++)c.push(A(l[0].get(k),x,w));return c}return A(l[0],x,w)})}};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/stats":function(){define(["exports","../executionError","../../chunks/languageUtils","./fieldStats"],function(v,F,C,p){function m(b,
A,z,q){if(1===q.length){if(C.isArray(q[0]))return p.calculateStat(b,q[0],-1);if(C.isImmutableArray(q[0]))return p.calculateStat(b,q[0].toArray(),-1)}return p.calculateStat(b,q,-1)}v.registerFunctions=function(b,A){b.stdev=function(z,q){return A(z,q,(x,w,l)=>m("stdev",x,w,l))};b.variance=function(z,q){return A(z,q,(x,w,l)=>m("variance",x,w,l))};b.average=function(z,q){return A(z,q,(x,w,l)=>m("mean",x,w,l))};b.mean=function(z,q){return A(z,q,(x,w,l)=>m("mean",x,w,l))};b.sum=function(z,q){return A(z,
q,(x,w,l)=>m("sum",x,w,l))};b.min=function(z,q){return A(z,q,(x,w,l)=>m("min",x,w,l))};b.max=function(z,q){return A(z,q,(x,w,l)=>m("max",x,w,l))};b.distinct=function(z,q){return A(z,q,(x,w,l)=>m("distinct",x,w,l))};b.count=function(z,q){return A(z,q,(x,w,l)=>{C.pcCheck(l,1,1,z,q);if(C.isArray(l[0])||C.isString(l[0]))return l[0].length;if(C.isImmutableArray(l[0]))return l[0].length();throw new F.ArcadeExecutionError(z,F.ExecutionErrorCodes.InvalidParameter,q);})}};Object.defineProperty(v,Symbol.toStringTag,
{value:"Module"})})},"esri/arcade/functions/fieldStats":function(){define(["exports","../../chunks/languageUtils"],function(v,F){function C(m){let b=0;for(let A=0;A<m.length;A++)b+=m[A];return b/m.length}function p(m){const b=C(m);let A=0;for(let z=0;z<m.length;z++)A+=(b-m[z])**2;return A/m.length}v.calculateStat=function(m,b,A=1E3){switch(m.toLowerCase()){case "distinct":a:{m=[];const z={},q=[];for(let x=0;x<b.length;x++){if(void 0!==b[x]&&null!==b[x]&&b[x]!==F.voidOperation){const w=b[x];if(F.isNumber(w)||
F.isString(w))void 0===z[w]&&(m.push(w),z[w]=1);else{let l=!1;for(let k=0;k<q.length;k++)!0===F.equalityTest(q[k],w)&&(l=!0);!1===l&&(q.push(w),m.push(w))}}if(m.length>=A&&-1!==A){b=m;break a}}b=m}return b;case "avg":case "mean":return C(F.toNumberArray(b));case "min":return Math.min.apply(Math,F.toNumberArray(b));case "sum":b=F.toNumberArray(b);A=0;for(m=0;m<b.length;m++)A+=b[m];return A;case "max":return Math.max.apply(Math,F.toNumberArray(b));case "stdev":case "stddev":return Math.sqrt(p(F.toNumberArray(b)));
case "var":case "variance":return p(F.toNumberArray(b));case "count":return b.length}return 0};v.decodeStatType=function(m){switch(m.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/string":function(){define("exports ../ArcadePortal ../Attachment ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/SpatialReference ../../core/urlUtils".split(" "),
function(v,F,C,p,m,b,A,z,q,x,w,l,k,c,a,e){function n(D,B){if(!D||!B)return D===B;if(D.x===B.x&&D.y===B.y){if(D.hasZ){if(D.z!==B.z)return!1}else if(B.hasZ)return!1;if(D.hasM){if(D.m!==B.m)return!1}else if(B.hasM)return!1;return!0}return!1}function h(D,B,d){if(null===D)B.updateUint8Array([0,139]);else if(b.isArray(D)){B.updateUint8Array([61]);if(d.map.has(D))D=d.map.get(D),B.updateIntArray([D^61237541]);else{d.map.set(D,d.currentLength++);for(var t of D)h(t,B,d);d.map.delete(D);d.currentLength--}B.updateUint8Array([199])}else if(b.isImmutableArray(D)){B.updateUint8Array([61]);
if(d.map.has(D))D=d.map.get(D),B.updateIntArray([D^61237541]);else{d.map.set(D,d.currentLength++);for(var u of D.toArray())h(u,B,d);d.map.delete(D);d.currentLength--}B.updateUint8Array([199])}else if(b.isDate(D))B.updateIntArray([D.toNumber()]),B.updateUint8Array([241]);else if(b.isString(D))B.updateIntArray([D.length]),B.updateWithString(D),B.updateUint8Array([41]);else if(b.isBoolean(D))B.updateUint8Array([!0===D?1:0,113]);else if(b.isNumber(D))B.updateFloatArray([D]),B.updateUint8Array([173]);
else{if(D instanceof C)throw new m.ArcadeExecutionError(d.context,m.ExecutionErrorCodes.UnsupportedHashType,d.node);if(D instanceof F)throw new m.ArcadeExecutionError(d.context,m.ExecutionErrorCodes.UnsupportedHashType,d.node);if(D instanceof p){B.updateUint8Array([223]);if(d.map.has(D))D=d.map.get(D),B.updateIntArray([D^61237541]);else{d.map.set(D,d.currentLength++);for(var E of D.keys())B.updateIntArray([E.length]),B.updateWithString(E),B.updateUint8Array([251]),t=D.field(E),h(t,B,d),B.updateUint8Array([239]);
d.map.delete(D);d.currentLength--}B.updateUint8Array([73])}else{if(b.isFeature(D))throw new m.ArcadeExecutionError(d.context,m.ExecutionErrorCodes.UnsupportedHashType,d.node);if(D instanceof l)B.updateIntArray([3833836621]),B.updateIntArray([0]),B.updateFloatArray([D.x]),B.updateIntArray([1]),B.updateFloatArray([D.y]),D.hasZ&&(B.updateIntArray([2]),B.updateFloatArray([D.z])),D.hasM&&(B.updateIntArray([3]),B.updateFloatArray([D.m])),B.updateIntArray([3765347959]),h(D.spatialReference.wkid,B,d);else if(D instanceof
k){B.updateIntArray([1266616829]);for(E=0;E<D.rings.length;E++){u=D.rings[E];t=[];var g=null;let J=null;for(let ia=0;ia<u.length;ia++){const X=D.getPoint(E,ia);if(0===ia)g=X;else if(n(J,X))continue;J=X;ia===u.length-1&&n(g,X)||t.push(X)}B.updateIntArray([1397116793,t.length]);for(u=0;u<t.length;u++)g=t[u],B.updateIntArray([3962308117,u]),h(g,B,d),B.updateIntArray([2716288009]);B.updateIntArray([2278822459])}B.updateIntArray([3878477243]);h(D.spatialReference.wkid,B,d)}else if(D instanceof c){B.updateIntArray([4106883559]);
for(E=0;E<D.paths.length;E++){t=D.paths[E];B.updateIntArray([1397116793,t.length]);for(u=0;u<t.length;u++)B.updateIntArray([3962308117,u]),h(D.getPoint(E,u),B,d),B.updateIntArray([2716288009]);B.updateIntArray([2278822459])}B.updateIntArray([2568784753]);h(D.spatialReference.wkid,B,d)}else if(D instanceof w){B.updateIntArray([588535921,D.points.length]);for(E=0;E<D.points.length;E++)t=D.getPoint(E),B.updateIntArray([E]),h(t,B,d);B.updateIntArray([1700171621]);h(D.spatialReference.wkid,B,d)}else if(D instanceof
x)B.updateIntArray([3483648373]),B.updateIntArray([0]),B.updateFloatArray([D.xmax]),B.updateIntArray([1]),B.updateFloatArray([D.xmin]),B.updateIntArray([2]),B.updateFloatArray([D.ymax]),B.updateIntArray([3]),B.updateFloatArray([D.ymin]),D.hasZ&&(B.updateIntArray([4]),B.updateFloatArray([D.zmax]),B.updateIntArray([5]),B.updateFloatArray([D.zmin])),D.hasM&&(B.updateIntArray([6]),B.updateFloatArray([D.mmax]),B.updateIntArray([7]),B.updateFloatArray([D.mmin])),B.updateIntArray([3622027469]),h(D.spatialReference.wkid,
B,d);else if(D instanceof a)B.updateIntArray([14]),void 0!==D.wkid&&null!==D.wkid&&B.updateIntArray([D.wkid]),D.wkt&&B.updateWithString(D.wkt);else{if(b.isFunctionParameter(D))throw new m.ArcadeExecutionError(d.context,m.ExecutionErrorCodes.UnsupportedHashType,d.node);if(b.isFeatureSet(D))throw new m.ArcadeExecutionError(d.context,m.ExecutionErrorCodes.UnsupportedHashType,d.node);b.isFeatureSetCollection(D);throw new m.ArcadeExecutionError(d.context,m.ExecutionErrorCodes.UnsupportedHashType,d.node);
}}}}v.registerFunctions=function(D,B){D.portal=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);return new F(b.toString(g[0]))})};D.typeof=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);u=b.getType(g[0]);if("Unrecognised Type"===u)throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.UnrecognisedType,t);return u})};D.trim=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);return b.toString(g[0]).trim()})};D.tohex=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,
t);u=b.toNumber(g[0]);return isNaN(u)?u:u.toString(16)})};D.upper=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);return b.toString(g[0]).toUpperCase()})};D.proper=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,2,d,t);u=1;2===g.length&&"firstword"===b.toString(g[1]).toLowerCase()&&(u=2);E=/\s/;g=b.toString(g[0]);let J="",ia=!0;for(let X=0;X<g.length;X++){let ea=g[X];E.test(ea)?1===u&&(ia=!0):ea.toUpperCase()!==ea.toLowerCase()&&(ia?(ea=ea.toUpperCase(),ia=!1):ea=ea.toLowerCase());J+=
ea}return J})};D.lower=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);return b.toString(g[0]).toLowerCase()})};D.guid=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,0,1,d,t);if(0<g.length)switch(b.toString(g[0]).toLowerCase()){case "digits":return b.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return b.generateUUID();case "digits-hyphen-parentheses":return"("+b.generateUUID()+")"}return"{"+b.generateUUID()+"}"})};D.standardizeguid=
function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,2,d,t);u=b.toString(g[0]);if(""===u||null===u)return"";u=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(u);if(!u)return"";u=u.groups;u=u.partA+"-"+u.partB+"-"+u.partC+"-"+u.partD+"-"+u.partE;switch(b.toString(g[1]).toLowerCase()){case "digits":return u.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return u;
case "digits-hyphen-parentheses":return"("+u+")"}return"{"+u+"}"})};D.console=function(d,t){return B(d,t,(u,E,g)=>{0!==g.length&&(1===g.length?d.console(b.toString(g[0])):d.console(b.toString(g)));return b.voidOperation})};D.mid=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,3,d,t);u=b.toNumber(g[1]);if(isNaN(u))return"";0>u&&(u=0);if(2===g.length)return b.toString(g[0]).substr(u);E=b.toNumber(g[2]);if(isNaN(E))return"";0>E&&(E=0);return b.toString(g[0]).substr(u,E)})};D.find=function(d,t){return B(d,
t,(u,E,g)=>{b.pcCheck(g,2,3,d,t);u=0;if(2<g.length){u=b.toNumber(b.defaultUndefined(g[2],0));if(isNaN(u))return-1;0>u&&(u=0)}return b.toString(g[1]).indexOf(b.toString(g[0]),u)})};D.left=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,2,d,t);u=b.toNumber(g[1]);if(isNaN(u))return"";0>u&&(u=0);return b.toString(g[0]).substr(0,u)})};D.right=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,2,d,t);u=b.toNumber(g[1]);if(isNaN(u))return"";0>u&&(u=0);return b.toString(g[0]).substr(-1*u,u)})};D.split=
function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,4,d,t);u=b.toNumber(b.defaultUndefined(g[2],-1));E=b.toBoolean(b.defaultUndefined(g[3],!1));-1===u||null===u||!0===E?g=b.toString(g[0]).split(b.toString(g[1])):(isNaN(u)&&(u=-1),-1>u&&(u=-1),g=b.toString(g[0]).split(b.toString(g[1]),u));if(!1===E)return g;E=[];for(let J=0;J<g.length&&!(-1!==u&&E.length>=u);J++)""!==g[J]&&void 0!==g[J]&&E.push(g[J]);return E})};D.text=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,2,d,t);return b.toStringExplicit(g[0],
g[1])})};D.concatenate=function(d,t){return B(d,t,(u,E,g)=>{u=[];if(1>g.length)return"";if(b.isArray(g[0])){E=b.defaultUndefined(g[2],"");for(var J=0;J<g[0].length;J++)u[J]=b.toStringExplicit(g[0][J],E);return 1<g.length?u.join(g[1]):u.join("")}if(b.isImmutableArray(g[0])){E=b.defaultUndefined(g[2],"");for(J=0;J<g[0].length();J++)u[J]=b.toStringExplicit(g[0].get(J),E);return 1<g.length?u.join(g[1]):u.join("")}for(E=0;E<g.length;E++)u[E]=b.toStringExplicit(g[E]);return u.join("")})};D.reverse=function(d,
t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);if(b.isArray(g[0]))return u=g[0].slice(0),u.reverse(),u;if(b.isImmutableArray(g[0]))return u=g[0].toArray().slice(0),u.reverse(),u;throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.replace=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,3,4,d,t);u=b.toString(g[0]);E=b.toString(g[1]);const J=b.toString(g[2]);return(4===g.length?b.toBoolean(g[3]):1)?b.multiReplace(u,E,J):u.replace(E,J)})};D.schema=function(d,t){return B(d,
t,(u,E,g)=>{if(b.isFeature(g[0]))return(u=b.featureSchema(g[0]))?p.convertObjectToArcadeDictionary(u,b.defaultTimeZone(d)):null;throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.subtypes=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);if(b.isFeature(g[0]))return(u=b.featureSubtypes(g[0]))?p.convertObjectToArcadeDictionary(u,b.defaultTimeZone(d)):null;throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.subtypecode=function(d,
t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);if(b.isFeature(g[0])){u=b.featureSubtypes(g[0]);if(!u)return null;if(u.subtypeField&&g[0].hasField(u.subtypeField)){g=g[0].field(u.subtypeField);for(const J of u.subtypes)if(J.code===g)return J.code}return null}throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.subtypename=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);if(b.isFeature(g[0])){u=b.featureSubtypes(g[0]);if(!u)return"";if(u.subtypeField&&g[0].hasField(u.subtypeField)){g=
g[0].field(u.subtypeField);for(const J of u.subtypes)if(J.code===g)return J.name}return""}throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.gdbversion=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);if(b.isFeature(g[0]))return g[0].gdbVersion();throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.domain=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,3,d,t);if(b.isFeature(g[0]))return(u=b.featureFullDomain(g[0],b.toString(g[1]),
void 0===g[2]?void 0:b.toNumber(g[2])))&&u.domain?"coded-value"===u.domain.type||"codedValue"===u.domain.type?p.convertObjectToArcadeDictionary({type:"codedValue",name:u.domain.name,dataType:A.layerFieldEsriConstants[u.field.type],codedValues:u.domain.codedValues.map(J=>({name:J.name,code:J.code}))},b.defaultTimeZone(d)):p.convertObjectToArcadeDictionary({type:"range",name:u.domain.name,dataType:A.layerFieldEsriConstants[u.field.type],min:u.domain.min,max:u.domain.max},b.defaultTimeZone(d)):null;
throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.domainname=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,4,d,t);if(b.isFeature(g[0]))return b.featureDomainValueLookup(g[0],b.toString(g[1]),g[2],void 0===g[3]?void 0:b.toNumber(g[3]));throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.domaincode=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,2,4,d,t);if(b.isFeature(g[0]))return b.featureDomainCodeLookup(g[0],b.toString(g[1]),
g[2],void 0===g[3]?void 0:b.toNumber(g[3]));throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);})};D.urlencode=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);if(null===g[0])return"";if(g[0]instanceof p){u="";for(const J of g[0].keys())E=g[0].field(J),""!==u&&(u+="\x26"),u=null===E?u+(encodeURIComponent(J)+"\x3d"):u+(encodeURIComponent(J)+"\x3d"+encodeURIComponent(E));return u}return encodeURIComponent(b.toString(g[0]))})};D.hash=function(d,t){return B(d,t,(u,E,
g)=>{b.pcCheck(g,1,1,d,t);u=new q.XXH(0);h(g[0],u,{context:d,node:t,map:new Map,currentLength:0});return u.digest()})};D.convertdirection=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,3,3,d,t);return z.convertDirection(g[0],g[1],g[2])})};D.fromjson=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,1,d,t);if(!1===b.isString(g[0]))throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.InvalidParameter,t);return p.convertJsonToArcade(JSON.parse(b.toString(g[0])),b.defaultTimeZone(d))})};D.expects=
function(d,t){return B(d,t,(u,E,g)=>{if(1>g.length)throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.WrongNumberOfParameters,t);return b.voidOperation})};D.tocharcode=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,1,2,d,t);u=b.toNumber(b.defaultUndefined(g[1],0));E=b.toString(g[0]);if(0===E.length&&1===g.length)return null;if(E.length<=u||0>u)throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.OutOfBounds,t);return E.charCodeAt(u)})};D.tocodepoint=function(d,t){return B(d,t,(u,E,g)=>
{b.pcCheck(g,1,2,d,t);u=b.toNumber(b.defaultUndefined(g[1],0));E=b.toString(g[0]);if(0===E.length&&1===g.length)return null;if(E.length<=u||0>u)throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.OutOfBounds,t);return E.codePointAt(u)})};D.fromcharcode=function(d,t){return B(d,t,(u,E,g)=>{if(1>g.length)throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.WrongNumberOfParameters,t);u=g.map(J=>Math.trunc(b.toNumber(J))).filter(J=>0<=J&&65535>=J);return 0===u.length?null:String.fromCharCode.apply(null,
u)})};D.fromcodepoint=function(d,t){return B(d,t,(u,E,g)=>{if(1>g.length)throw new m.ArcadeExecutionError(d,m.ExecutionErrorCodes.WrongNumberOfParameters,t);let J;try{J=g.map(ia=>Math.trunc(b.toNumber(ia))).filter(ia=>1114111>=ia&&ia>>>0===ia)}catch(ia){return null}return 0===J.length?null:String.fromCodePoint.apply(null,J)})};D.getuser=function(d,t){return B(d,t,(u,E,g)=>{b.pcCheck(g,0,2,d,t);u=b.defaultUndefined(g[1],"");u=!0===u||!1===u?"":b.toString(u);if(null!==u&&""!==u)return null;if(0===g.length||
g[0]instanceof F){E=null;d.services&&d.services.portal&&(E=d.services.portal);if(0<g.length&&(g=g[0].field("url"),g=g?e.hasSamePortal(g,E?.restUrl||""):!1,!g)||!E)return null;if(""===u&&(g="loaded"===E.loadStatus&&E.user&&E.user.sourceJSON?E.user.sourceJSON:null,g)){g=JSON.parse(JSON.stringify(g));for(const J of["lastLogin","created","modified"])void 0!==g[J]&&null!==g[J]&&(g[J]=new Date(g[J]));return p.convertObjectToArcadeDictionary(g,b.defaultTimeZone(d))}return null}throw new m.ArcadeExecutionError(d,
m.ExecutionErrorCodes.InvalidParameter,t);})}};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadePortal":function(){define(["../chunks/_rollupPluginBabelHelpers","./Dictionary"],function(v,F){return function(C){function p(b){var A=m.call(this);A.declaredClass="esri.arcade.Portal";A.immutable=!1;A.setField("url",b);A.immutable=!0;return A}v._inherits(p,C);var m=v._createSuper(p);return v._createClass(p)}(F)})},"esri/arcade/Attachment":function(){define(["../chunks/_rollupPluginBabelHelpers",
"./Dictionary"],function(v,F){return function(C){function p(b,A,z,q,x,w){var l=m.call(this);l.attachmentUrl=x;l.declaredClass="esri.arcade.Attachment";l.immutable=!1;l.setField("id",b);l.setField("name",A);l.setField("contenttype",z);l.setField("size",q);l.setField("exifinfo",w);l.immutable=!0;return l}v._inherits(p,C);var m=v._createSuper(p);return v._createClass(p)}(F)})},"esri/arcade/functions/convertdirection":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../Dictionary ../executionError ../../chunks/languageUtils ../../core/maybe".split(" "),
function(v,F,C,p,m,b){function A(H){if(!1===m.isString(H))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.InvalidParameter,null);return H}function z(H,Q){Q=10**Q;return Math.round(H*Q)/Q}function q(H){const Q=parseFloat(H.toString().replace(Math.trunc(H).toString(),"0"))*Math.sign(H);return 0>H?{fraction:Q,integer:Math.ceil(H)}:{fraction:Q,integer:Math.floor(H)}}function x(H,Q){switch(H){case ka.north:return"SHORT"===Q?"N":"North";case ka.east:return"SHORT"===Q?"E":"East";case ka.south:return"SHORT"===
Q?"S":"South";case ka.west:return"SHORT"===Q?"W":"West"}}function w(H,Q,O){for(;H.length<O;)H=Q+H;return H}function l(H,Q){return H-Math.floor(H/Q)*Q}function k(H){switch(H){case U.truncated_degrees:case U.decimal_degrees:return 360;case U.radians:return ra;case U.gradians:return 400;case U.seconds:return 1296E3;case U.fractional_degree_minutes:return 60;case U.fractional_minute_seconds:return 60;default:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});
}}function c(H){switch(H.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return ca.north_azimuth;case "POLAR":return ca.polar;case "QUADRANT":return ca.quadrant;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return ca.south_azimuth}throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function a(H){switch(H.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return U.decimal_degrees;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return U.degrees_minutes_seconds;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return U.radians;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return U.gradians}throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function e(H,Q,O){let T=null;switch(Q){case U.decimal_degrees:T=na(H,3600);break;case U.seconds:T=H;break;
case U.gradians:T=na(H,3240);break;case U.radians:T=na(H,va);break;default:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(O){case U.decimal_degrees:return xa(T,3600);case U.seconds:return T;case U.gradians:return xa(T,3240);case U.radians:return T/va;default:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function n(H){b.assertIsSome(H);switch(H){case U.decimal_degrees:case U.truncated_degrees:case U.degrees_minutes_seconds:return U.decimal_degrees;
case U.gradians:return U.gradians;case U.fractional_degree_minutes:return U.fractional_degree_minutes;case U.radians:return U.radians;case U.seconds:case U.fractional_minute_seconds:return U.seconds}}function h(H){switch(m.toNumber(H)){case 1:return{first:ka.north,second:ka.east};case 2:return{first:ka.south,second:ka.east};case 3:return{first:ka.south,second:ka.west};case 4:return{first:ka.north,second:ka.west}}return null}function D(H){switch(H.toUpperCase().trim()){case "N":case "NORTH":return ka.north;
case "E":case "EAST":return ka.east;case "S":case "SOUTH":return ka.south;case "W":case "WEST":return ka.west}return null}function B(H){H=parseFloat(H);if(m.isNumber(H)){if(isNaN(H))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});return H}throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function d(H,Q,O){const T=O===ca.quadrant;let Z=null;var f=null;let r=0;var I=0;I=0;if(T){if(2>
H.length)throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});I=1;(f=h(m.toString(H[H.length-1])))?(Z=f.first,f=f.second):(r=1,Z=D(m.toString(H[0])),f=D(m.toString(H[H.length-1])));if(null===Z||null===f)throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(Q){case U.decimal_degrees:case U.radians:case U.gradians:if(0===H.length)break;return T?G.createFromAngleMeridianAndDirection(K.createFromAngleAndUnits(B(H[r]),
n(Q)),Z,f):G.createFromAngleAndDirection(K.createFromAngleAndUnits(B(H[r]),n(Q)),O);case U.degrees_minutes_seconds:I=H.length-I-r;if(3===I)return H=K.createFromDegreesMinutesSeconds(B(H[r]),B(H[r+1]),B(H[r+2])),T?G.createFromAngleMeridianAndDirection(H,Z,f):G.createFromAngleAndDirection(H,O);if(1===I)return H=B(H[r]),H=ta.numberToDms(H),H=K.createFromDegreesMinutesSeconds(H.m_degrees,H.m_minutes,H.m_seconds),T?G.createFromAngleMeridianAndDirection(H,Z,f):G.createFromAngleAndDirection(H,O)}throw new p.ArcadeExecutionError(null,
p.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function t(H){const Q=[" ","-","/","'",'"',"\\","^","\u00b0",sa,"\t","\r","\n","*"];let O="";for(let T=0;T<H.length;T++){const Z=H.charAt(T);O=Q.includes(Z)?O+"RRSPLITRRSPLITRR":O+Z}return O.split("RRSPLITRRSPLITRR").filter(T=>""!==T)}function u(H,Q,O){const T={padding:0,rounding:0,newpos:Q};let Z=!1;for(;Q<H.length;){const f=H[Q];if(f===O)Z?T.rounding++:T.padding++,Q++;else if("."===f)Z=!0,Q++;else break}T.newpos=Q-1;return T}
const E=H=>(Q,O,T)=>{T=T||14;return+H(Q,O).toFixed(T)},g=(H,Q)=>H+Q,J=(H,Q)=>H-Q,ia=(H,Q)=>H*Q,X=(H,Q)=>H/Q,ea=(H,Q,O)=>E(g)(H,Q,O),na=(H,Q,O)=>E(ia)(H,Q,O),xa=(H,Q,O)=>E(X)(H,Q,O),ra=2*Math.PI,va=648E3/Math.PI,sa=String.fromCharCode(7501);var ka;(function(H){H[H.north=0]="north";H[H.east=1]="east";H[H.south=2]="south";H[H.west=3]="west"})(ka||(ka={}));var U;(function(H){H[H.decimal_degrees=1]="decimal_degrees";H[H.seconds=2]="seconds";H[H.degrees_minutes_seconds=3]="degrees_minutes_seconds";H[H.radians=
4]="radians";H[H.gradians=5]="gradians";H[H.truncated_degrees=6]="truncated_degrees";H[H.fractional_degree_minutes=7]="fractional_degree_minutes";H[H.fractional_minute_seconds=8]="fractional_minute_seconds"})(U||(U={}));var ca;(function(H){H[H.north_azimuth=1]="north_azimuth";H[H.polar=2]="polar";H[H.quadrant=3]="quadrant";H[H.south_azimuth=4]="south_azimuth"})(ca||(ca={}));var oa;(function(H){H[H.meridian=0]="meridian";H[H.direction=1]="direction"})(oa||(oa={}));let ta=function(){function H(O,T,
Z){this.m_degrees=O;this.m_minutes=T;this.m_seconds=Z}var Q=H.prototype;Q.getField=function(O){switch(O){case U.decimal_degrees:case U.truncated_degrees:return this.m_degrees;case U.fractional_degree_minutes:return this.m_minutes;case U.seconds:case U.fractional_minute_seconds:return this.m_seconds;default:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}};H.secondsToDMS=function(O){const T=q(O).fraction;O=q(O).integer;const Z=Math.floor(O/
3600);O-=3600*Z;const f=Math.floor(O/60);return new H(Z,f,O-60*f+T)};H.numberToDms=function(O){var T=q(O).fraction;O=q(O).integer;const Z=na(q(100*T).fraction,100);T=q(100*T).integer;return new H(O,T,Z)};Q.format=function(O,T){T=z(this.m_seconds,T);let Z=this.m_minutes,f=this.m_degrees;if(O===U.seconds||O===U.fractional_minute_seconds)60<=T&&(T-=60,++Z),60<=Z&&(Z=0,++f),360<=f&&(f=0);else if(O===U.fractional_degree_minutes)T=0,Z=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,f=this.m_degrees,
60<=Z&&(Z=0,++f),360<=f&&(f=0);else if(O===U.decimal_degrees||O===U.truncated_degrees)O=xa(this.m_seconds,3600),T=xa(this.m_minutes,60),f=Math.round(this.m_degrees+T+O),T=Z=0;return new H(f,Z,T)};H.dmsToSeconds=function(O,T,Z){return 3600*O+60*T+Z};return F._createClass(H)}(),L=function(){function H(Q,O,T){this.meridian=Q;this.angle=O;this.direction=T}H.prototype.fetchAzimuth=function(Q){return Q===oa.meridian?this.meridian:this.direction};return F._createClass(H)}(),G=function(){function H(O){this._angle=
O}H.createFromAngleAndDirection=function(O,T){return new H(new K(H._convertDirectionFormat(O.extractAngularUnits(U.seconds),T,ca.north_azimuth)))};var Q=H.prototype;Q.getAngle=function(O){const T=this._angle.extractAngularUnits(U.seconds);switch(O){case ca.north_azimuth:case ca.south_azimuth:case ca.polar:return new K(H._convertDirectionFormat(T,ca.north_azimuth,O));case ca.quadrant:return O=H.secondsNorthAzimuthToQuadrant(T),new K(O.angle)}};Q.getMeridian=function(O){const T=this._angle.extractAngularUnits(U.seconds);
switch(O){case ca.north_azimuth:return ka.north;case ca.south_azimuth:return ka.south;case ca.polar:return ka.east;case ca.quadrant:return H.secondsNorthAzimuthToQuadrant(T).meridian}};Q.getDirection=function(O){const T=this._angle.extractAngularUnits(U.seconds);switch(O){case ca.north_azimuth:return ka.east;case ca.south_azimuth:return ka.west;case ca.polar:return ka.north;case ca.quadrant:return H.secondsNorthAzimuthToQuadrant(T).direction}};H.secondsNorthAzimuthToQuadrant=function(O){const T=324E3>=
O||972E3<=O?ka.north:ka.south;return new L(T,T===ka.north?Math.min(1296E3-O,O):Math.abs(O-648E3),648E3<O?ka.west:ka.east)};H.createFromAngleMeridianAndDirection=function(O,T,Z){return new H(new K(H.secondsQuadrantToNorthAzimuth(O.extractAngularUnits(U.seconds),T,Z)))};H.secondsQuadrantToNorthAzimuth=function(O,T,Z){return T===ka.north?Z===ka.east?O:1296E3-O:Z===ka.east?648E3-O:648E3+O};H._convertDirectionFormat=function(O,T,Z){let f=0;switch(T){case ca.north_azimuth:f=O;break;case ca.polar:f=324E3-
O;break;case ca.quadrant:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case ca.south_azimuth:f=O+648E3}O=0;switch(Z){case ca.north_azimuth:O=f;break;case ca.polar:O=324E3-f;break;case ca.quadrant:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case ca.south_azimuth:O=f-648E3}O%=1296E3;return 0>O?1296E3+O:O};return F._createClass(H)}(),K=function(){function H(Q){this._seconds=
Q}H.createFromAngleAndUnits=function(Q,O){return new H(e(Q,O,U.seconds))};H.prototype.extractAngularUnits=function(Q){return e(this._seconds,U.seconds,n(Q))};H.createFromDegreesMinutesSeconds=function(Q,O,T){return new H(ea(ea(na(Q,3600),na(O,60)),T))};return F._createClass(H)}(),P=function(){function H(O,T,Z,f){this.view=O;this.angle=T;this.merdian=Z;this.direction=f;this._formattedDms=this._dms=null}H.createFromStringAndBearing=function(O,T,Z){return new H(O,T.getAngle(Z),T.getMeridian(Z),T.getDirection(Z))};
var Q=H.prototype;Q.fetchAngle=function(){return this.angle};Q.fetchMeridian=function(){return this.merdian};Q.fetchDirection=function(){return this.direction};Q.fetchView=function(){return this.view};Q.fetchDms=function(){null===this._dms&&this._calculateDms();return this._dms};Q.fetchFormattedDms=function(){null===this._formattedDms&&this._calculateDms();return this._formattedDms};Q._calculateDms=function(){var O=null;let T=U.truncated_degrees,Z=0;for(O=0;O<this.view.length;O++){const f=this.view[O];
switch(f){case "m":O=u(this.view,O,f);T=T===U.truncated_degrees?U.fractional_degree_minutes:T;O=O.newpos;continue;case "s":O=u(this.view,O,f),T=U.fractional_minute_seconds,Z=Z<O.rounding?O.rounding:Z,O=O.newpos}}this._dms=ta.secondsToDMS(this.angle.extractAngularUnits(U.seconds));this._formattedDms=ta.secondsToDMS(this.angle.extractAngularUnits(U.seconds)).format(T,Z)};return F._createClass(H)}();v.convertDirection=function(H,Q,O){if(!(Q instanceof C))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.InvalidParameter,
null);if(!1===Q.hasField("directionType"))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===Q.hasField("angleType"))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});var T=c(A(Q.field("directiontype")));Q=a(A(Q.field("angletype")));if(m.isNumber(H)){H=m.toNumber(H);if(T===ca.quadrant)throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});
Q===U.degrees_minutes_seconds?(H=ta.numberToDms(H),T=G.createFromAngleAndDirection(K.createFromDegreesMinutesSeconds(H.m_degrees,H.m_minutes,H.m_seconds),T)):T=G.createFromAngleAndDirection(K.createFromAngleAndUnits(H,n(Q)),T)}else if(m.isString(H))T=d(t(H),Q,T);else if(m.isArray(H))T=d(H,Q,T);else if(m.isImmutableArray(H))T=d(H.toArray(),Q,T);else throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(O instanceof C))throw new p.ArcadeExecutionError(null,
p.ExecutionErrorCodes.InvalidParameter,null);if(!1===O.hasField("directionType"))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===O.hasField("outputType"))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});H=c(A(O.field("directiontype")));Q=O.hasField("angleType")?a(A(O.field("angletype"))):null;var Z=A(O.field("outputType")).toUpperCase().trim();if(!H||!Z)throw new p.ArcadeExecutionError(null,
p.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(Q||"TEXT"===Z&&O.hasField("format")))throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(Z){case "VALUE":if(H===ca.quadrant||Q===U.degrees_minutes_seconds)return O=T.getAngle(H),H===ca.quadrant&&Q===U.degrees_minutes_seconds?(O=ta.secondsToDMS(O.extractAngularUnits(U.seconds)),T=[x(T.getMeridian(H),"SHORT"),O.m_degrees,O.m_minutes,O.m_seconds,x(T.getDirection(H),"SHORT")]):
Q===U.degrees_minutes_seconds?(T=ta.secondsToDMS(O.extractAngularUnits(U.seconds)),T=[T.m_degrees,T.m_minutes,T.m_seconds]):T=H===ca.quadrant?[x(T.getMeridian(H),"SHORT"),O.extractAngularUnits(Q),x(T.getDirection(H),"SHORT")]:[O.extractAngularUnits(Q)],T;if((O=n(Q))&&Q!==U.degrees_minutes_seconds)T=T.getAngle(H).extractAngularUnits(O);else throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return T;case "TEXT":Z="";O.hasField("format")&&(Z=m.toString(O.field("format")));
if(null===Z||""===Z){O="";switch(Q){case U.decimal_degrees:O=H===ca.quadrant?"DD.DD\u00b0":"DDD.DD\u00b0";break;case U.degrees_minutes_seconds:O=H===ca.quadrant?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case U.radians:O="R.RR";break;case U.gradians:O="GGG.GG"+sa;break;default:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}H===ca.quadrant&&(O="p "+O+" b");Z=O}O=Z;var f="",r=null,I=null;Q=P.createFromStringAndBearing(O,T,H);Z={D:U.decimal_degrees,
d:U.truncated_degrees,m:U.fractional_degree_minutes,s:U.fractional_minute_seconds,R:U.radians,G:U.gradians};for(I=0;I<O.length;I++){var N=O[I];switch(N){case "[":r=O;N={escaped:"",newpos:I};for(I++;I<r.length;){var S=r[I];I++;if("]"===S)break;N.escaped+=S}N.newpos=I-1;r=N;f+=r.escaped;I=r.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":r=u(O,I,N);I=T.getAngle(H);a:{N=Z[N];S=r.padding;var W=r.rounding,aa=Q;let fa=null;switch(N){case U.decimal_degrees:case U.radians:case U.gradians:fa=
l(z(I.extractAngularUnits(N),W),k(N));I=w(fa.toFixed(W),"0",S+W+(0<W?1:0));break a;case U.truncated_degrees:case U.fractional_degree_minutes:fa=l(aa.fetchFormattedDms().getField(N),k(N));I=w(fa.toFixed(W),"0",S+W+(0<W?1:0));break a;case U.fractional_minute_seconds:fa=l(z(aa.fetchDms().getField(N),W),k(N));I=w(fa.toFixed(W),"0",S+W+(0<W?1:0));break a;default:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}f+=I;I=r.newpos;continue;case "P":case "p":f+=
x(Q.fetchMeridian(),"p"===N?"SHORT":"LONG");continue;case "B":case "b":f+=x(Q.fetchDirection(),"b"===N?"SHORT":"LONG");continue;default:f+=N}}return f;default:throw new p.ArcadeExecutionError(null,p.ExecutionErrorCodes.InvalidParameter,null);}};v.preciseAdd=ea;v.preciseDivide=xa;v.preciseMinus=(H,Q,O)=>E(J)(H,Q,O);v.preciseMultiply=na;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/hash":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],
function(v,F){function C(m){const b=[];for(let A=0,z=m.length;A<z;A++){let q=m.charCodeAt(A);128>q?b.push(q):2048>q?b.push(192|q>>6,128|q&63):55296>q||57344<=q?b.push(224|q>>12,128|q>>6&63,128|q&63):(A++,q=65536+((q&1023)<<10|m.charCodeAt(A)&1023),b.push(240|q>>18,128|q>>12&63,128|q>>6&63,128|q&63))}return new Uint8Array(b)}let p=function(){function m(A){this._seed=A;this._totallen=0;this._bufs=[];this.init()}var b=m.prototype;b.init=function(){this._bufs=[];this._totallen=0;return this};b.updateFloatArray=
function(A){const z=[];for(const q of A)isNaN(q)?z.push("NaN"):Infinity===q?z.push("Infinity"):-Infinity===q?z.push("-Infinity"):0===q?z.push("0"):z.push(q.toString(16));this.update(C(z.join("")))};b.updateIntArray=function(A){A=Int32Array.from(A);this.update(new Uint8Array(A.buffer))};b.updateUint8Array=function(A){this.update(Uint8Array.from(A))};b.updateWithString=function(A){return this.update(C(A))};b.update=function(A){this._bufs.push(A);this._totallen+=A.length;return this};b.digest=function(){const A=
new Uint8Array(this._totallen);let z=0;for(const q of this._bufs)A.set(q,z),z+=q.length;this.init();return this._xxHash32(A,this._seed)};b._xxHash32=function(A,z=0){var q=z+374761393&4294967295;let x=0;if(16<=A.length){q=[z+2654435761+2246822519&4294967295,z+2246822519&4294967295,z+0&4294967295,z-2654435761&4294967295];z=A.length-16;var w=0;for(x=0;(x&4294967280)<=z;x+=4){var l=x;l=q[w]+(2246822519*(A[l]+(A[l+1]<<8))+(2246822519*(A[l+2]+(A[l+3]<<8))<<16))&4294967295;l=l<<13|l>>>19;q[w]=2654435761*
(l&65535)+(2654435761*(l>>>16)<<16)&4294967295;w=w+1&3}q=(q[0]<<1|q[0]>>>31)+(q[1]<<7|q[1]>>>25)+(q[2]<<12|q[2]>>>20)+(q[3]<<18|q[3]>>>14)&4294967295}q=q+A.length&4294967295;for(z=A.length-4;x<=z;x+=4)w=x,q=q+(3266489917*(A[w]+(A[w+1]<<8))+(3266489917*(A[w+2]+(A[w+3]<<8))<<16))&4294967295,q=q<<17|q>>>15,q=668265263*(q&65535)+(668265263*(q>>>16)<<16)&4294967295;for(;x<A.length;++x)q+=374761393*A[x],q=q<<11|q>>>21,q=2654435761*(q&65535)+(2654435761*(q>>>16)<<16)&4294967295;q^=q>>>15;q=(2246822519*(q&
65535)&4294967295)+(2246822519*(q>>>16)<<16);q^=q>>>13;q=(3266489917*(q&65535)&4294967295)+(3266489917*(q>>>16)<<16);q^=q>>>16;return 0>q?q+4294967296:q};return F._createClass(m)}();v.XXH=p;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleLoader":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(v,F){let C=function(){function p(m,b){this._moduleSingletons=m;this._syntaxModules=b}p.prototype.loadLibrary=function(m){return null==this._syntaxModules?
null:(m=this._syntaxModules[m.toLowerCase()])?{syntax:m.script,uri:m.uri}:null};return F._createClass(p)}();v.ArcadeModuleLoader=C;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleResolver":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../portal/Portal ./parser ./featureset/support/RecentlyUsedCache ./executionError".split(" "),function(v,F,C,p,m,b,A){let z=function(){function q(w){this.portalUri=w}var x=q.prototype;x.normalizeModuleUri=
function(w){const l=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi;var k=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi;const c=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,a=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi;var e=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(w.startsWith("portal+")){let D=w.substring(7);var n="",h=D;let B=!1;for(const d of[k,a,c])if(k=d.exec(D),null!==
k){n=k.groups;h=n.itemid;n=n.portalurl;B=!0;break}if(!1===B)if(l.test(D))h=D,n=this.portalUri;else throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol,{uri:w});h.includes("/")&&(h=h.split("/")[0]);h.includes("?")&&(h=h.split("?")[0]);w="current";e=e.exec(h);null!==e&&(w=e.groups,h=w.itemid,w=w.versionstring);D=(new p({url:n})).restUrl+"/content/items/"+h+"/resources/"+w+".arc";return{url:D,scheme:"portal",uri:"PO:"+D}}if(w.startsWith("mock")){if("mock"===w)return{url:"",scheme:"mock",
data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};h=w.replace("mock:","");if(void 0!==q.mocks[h])return{url:"",scheme:"mock",data:q.mocks[h],uri:w}}throw new A.ModuleError(A.ModuleErrorCodes.UnrecognisedUri,{uri:w});};x.fetchModule=async function(w){var l=q.cachedModules.getFromCache(w.uri);if(l)return l;l=this.fetchSource(w);q.cachedModules.addToCache(w.uri,l);let k=null;try{k=await l}catch(c){throw q.cachedModules.removeFromCache(w.uri),
c;}return k};x.fetchSource=async function(w){if("portal"===w.scheme){const l=await C(w.url,{responseType:"text",query:{}});if(l.data)return m.parseScript(l.data,[])}if("mock"===w.scheme)return m.parseScript(w.data??"",[]);throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol);};q.create=function(w){return new q(w)};q.getDefault=function(){return this._default??(q._default=q._moduleResolverFactory())};F._createClass(q,null,[{key:"moduleResolverClass",set:function(w){this._moduleResolverFactory=
w;this._default=null}}]);return q}();z.mocks={};z.cachedModules=new b(30);z._default=null;z._moduleResolverFactory=()=>{const q=p.getDefault();return new z(q.url)};v.ArcadeModuleResolver=z;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/parser":function(){define(["exports","./treeAnalysis","./lib/arcade-parser","./lib/types"],function(v,F,C,p){v.parseScript=function(m,b=[]){m=C.parse(m);if(null===m.body||void 0===m.body)throw new p.ParsingError({index:0,line:0,column:0,
data:null,description:"",code:p.ParsingErrorCodes.InvalidExpression});if(0===m.body.length)throw new p.ParsingError({index:0,line:0,column:0,data:null,description:"",code:p.ParsingErrorCodes.InvalidExpression});if(0===m.body.length)throw new p.ParsingError({index:0,line:0,column:0,data:null,description:"",code:p.ParsingErrorCodes.InvalidExpression});m.loadedModules={};F.findScriptDependencies(m,b);return m};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/arcade-parser":function(){define(["exports",
"./parser","./tokenizer","./types"],function(v,F,C,p){v.AssignmentOperators=p.AssignmentOperators;v.BinaryOperators=p.BinaryOperators;Object.defineProperty(v,"Keywords",{enumerable:!0,get:()=>p.Keywords});v.LogicalOperators=p.LogicalOperators;v.OperatorPrecedence=p.OperatorPrecedence;v.ParsingError=p.ParsingError;Object.defineProperty(v,"ParsingErrorCodes",{enumerable:!0,get:()=>p.ParsingErrorCodes});v.ParsingErrorMessages=p.ParsingErrorMessages;Object.defineProperty(v,"Syntax",{enumerable:!0,get:()=>
p.Syntax});v.TokenNames=p.TokenNames;Object.defineProperty(v,"TokenType",{enumerable:!0,get:()=>p.TokenType});v.UnaryOperators=p.UnaryOperators;v.UpdateOperators=p.UpdateOperators;v.isArrayExpression=p.isArrayExpression;v.isAssignmentExpression=p.isAssignmentExpression;v.isBinaryExpression=p.isBinaryExpression;v.isBlockComment=p.isBlockComment;v.isBlockStatement=p.isBlockStatement;v.isBreakStatement=p.isBreakStatement;v.isCallExpression=p.isCallExpression;v.isContinueStatement=p.isContinueStatement;
v.isEmptyStatement=p.isEmptyStatement;v.isExpression=p.isExpression;v.isExpressionStatement=p.isExpressionStatement;v.isForInStatement=p.isForInStatement;v.isForStatement=p.isForStatement;v.isFunctionDeclaration=p.isFunctionDeclaration;v.isIdentifier=p.isIdentifier;v.isIfStatement=p.isIfStatement;v.isLiteral=p.isLiteral;v.isLogicalExpression=p.isLogicalExpression;v.isMemberExpression=p.isMemberExpression;v.isObjectExpression=p.isObjectExpression;v.isProgram=p.isProgram;v.isProperty=p.isProperty;v.isReturnStatement=
p.isReturnStatement;v.isStatement=p.isStatement;v.isTemplateElement=p.isTemplateElement;v.isTemplateLiteral=p.isTemplateLiteral;v.isUnaryExpression=p.isUnaryExpression;v.isUpdateExpression=p.isUpdateExpression;v.isVariableDeclaration=p.isVariableDeclaration;v.isVariableDeclarator=p.isVariableDeclarator;v.parse=function(m,b,A){return(new F.Parser(m,b,A)).parseScript()};v.tokenize=function(m,b,A){m=new C.Tokenizer(m,b);b=[];let z=void 0;try{let q;for(;q=m.getNextToken();)A&&(q=A(q)),b.push(q)}catch(q){m.errorHandler.tolerate(q)}m.errorHandler.tolerant&&
(z=m.errors());return{tokens:b,errors:z}};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/parser":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ./comment-handler ./error-handler ./scanner ./types".split(" "),function(v,F,C,p,m,b){function A(k,c=0){let a=k.start-k.lineStart,e=k.lineNumber;0>a&&(a+=c,e--);return{index:k.start,line:e,column:a}}function z(k){return[{index:k.range[0],...k.loc.start},{index:k.range[1],...k.loc.end}]}function q(k){return b.OperatorPrecedence[k]??
0}var x;(function(k){k[k.None=0]="None";k[k.Function=1]="Function";k[k.IfClause=2]="IfClause";k[k.ForLoop=4]="ForLoop";k[k.WhileLoop=8]="WhileLoop"})(x||(x={}));var w;(function(k){k[k.AsObject=0]="AsObject";k[k.Automatic=1]="Automatic"})(w||(w={}));let l=function(){function k(a,e={},n){this.delegate=n;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof e.tokens&&e.tokens,comments:"boolean"===typeof e.comments&&e.comments,tolerant:"boolean"===typeof e.tolerant&&e.tolerant};this.options.comments&&
(this.commentHandler=new C.CommentHandler);this.errorHandler=new p.ErrorHandler(this.options.tolerant);this.scanner=new m.Scanner(a,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:x.None,curlyParsingType:w.AsObject};this.rawToken={type:b.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();
this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}var c=k.prototype;c.throwIfInvalidType=function(a,e,{validTypes:n,invalidTypes:h}){n?.some(D=>a.type===D)||h?.some(D=>a.type===D)&&this.throwError(b.ParsingErrorCodes.InvalidExpression,e)};c.throwError=function(a,e,n=this.endMarker){const {index:h,line:D,column:B}=e;this.errorHandler.throwError({code:a,index:h,line:D,column:B+1,len:n.index-h-1})};c.tolerateError=function(a,e){throw Error("######################################### !!!");
};c.unexpectedTokenError=function(a={}){const {rawToken:e}=a;let {code:n,data:h}=a;if(e){if(!n)switch(e.type){case b.TokenType.EOF:n=b.ParsingErrorCodes.UnexpectedEndOfScript;break;case b.TokenType.Identifier:n=b.ParsingErrorCodes.UnexpectedIdentifier;break;case b.TokenType.NumericLiteral:n=b.ParsingErrorCodes.UnexpectedNumber;break;case b.TokenType.StringLiteral:n=b.ParsingErrorCodes.UnexpectedString;break;case b.TokenType.Template:n=b.ParsingErrorCodes.UnexpectedTemplate}a=e.value.toString()}else a=
"ILLEGAL";n=n??b.ParsingErrorCodes.UnexpectedToken;h||(h={value:a});a=p.formatErrorDescription(n,h);if(e)return new b.ParsingError({code:n,index:e.start,line:e.lineNumber,column:e.start-e.lineStart+1,len:e.end-e.start-1,data:h,description:a});const {index:D,line:B}=this.endMarker;return new b.ParsingError({code:n,index:D,line:B,column:this.endMarker.column+1,data:h,description:a})};c.throwUnexpectedToken=function(a={}){a.rawToken=a.rawToken??this.rawToken;throw this.unexpectedTokenError(a);};c.collectComments=
function(a){const {commentHandler:e}=this;e&&a.length&&a.forEach(n=>{n={type:n.multiLine?b.Syntax.BlockComment:b.Syntax.LineComment,value:this.getSourceValue(n),range:n.range,loc:n.loc};e.collectComment(n)})};c.peekAhead=function(a){const e=this.scanner.saveState();a=a.call(this,()=>{this.scanner.scanComments();return this.scanner.lex()});this.scanner.restoreState(e);return a};c.getSourceValue=function(a){return this.scanner.source.slice(a.start,a.end)};c.convertToToken=function(a){return{type:b.TokenNames[a.type],
value:this.getSourceValue(a),range:[a.start,a.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}};c.readNextRawToken=function(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;const a=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&
(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=a.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&this.rawToken.type!==b.TokenType.EOF&&this.tokens.push(this.convertToToken(this.rawToken))};c.captureStartMarker=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};c.getItemLocation=
function(a){return{range:[a.index,this.endMarker.index],loc:{start:{line:a.line,column:a.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}};c.finalize=function(a){if(this.delegate||this.commentHandler)this.commentHandler?.attachComments(a),this.delegate?.(a);return a};c.expectPunctuator=function(a){const e=this.rawToken;this.matchPunctuator(a)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:e,code:b.ParsingErrorCodes.PunctuatorExpected,data:{value:a}})};c.expectKeyword=
function(a){this.rawToken.type===b.TokenType.Keyword&&this.rawToken.value.toLowerCase()===a?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};c.expectContextualKeyword=function(a){this.rawToken.type===b.TokenType.Identifier&&this.rawToken.value.toLowerCase()===a?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};c.matchKeyword=function(a){return this.rawToken.type===b.TokenType.Keyword&&this.rawToken.value.toLowerCase()===a};c.matchContextualKeyword=
function(a){return this.rawToken.type===b.TokenType.Identifier&&this.rawToken.value===a};c.matchPunctuator=function(a){return this.rawToken.type===b.TokenType.Punctuator&&this.rawToken.value===a};c.getMatchingPunctuator=function(a){"string"===typeof a&&(a=a.split(""));if(this.rawToken.type===b.TokenType.Punctuator&&a?.length)return a.find(this.matchPunctuator,this)};c.isolateCoverGrammar=function(a){const e=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;a=a.call(this);this.context.isAssignmentTarget=
e;return a};c.inheritCoverGrammar=function(a){const e=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;a=a.call(this);this.context.isAssignmentTarget=this.context.isAssignmentTarget&&e;return a};c.withBlockContext=function(a,e){const n=this.context.blockContext;this.context.blockContext|=a;a=this.context.curlyParsingType;this.context.curlyParsingType=w.Automatic;e=e.call(this);this.context.blockContext=n;this.context.curlyParsingType=a;return e};c.consumeSemicolon=function(){this.matchPunctuator(";")?
this.readNextRawToken():this.hasLineTerminator||(this.rawToken.type===b.TokenType.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))};c.parsePrimaryExpression=function(){const a=this.captureStartMarker(),e=this.rawToken;switch(e.type){case b.TokenType.Identifier:return this.readNextRawToken(),this.finalize({type:b.Syntax.Identifier,
name:e.value,...this.getItemLocation(a)});case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:e.value,raw:this.getSourceValue(e),isString:"string"===typeof e.value,...this.getItemLocation(a)});case b.TokenType.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:e.value.toLowerCase()===b.Keywords.True,raw:this.getSourceValue(e),
isString:!1,...this.getItemLocation(a)});case b.TokenType.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:null,raw:this.getSourceValue(e),isString:!1,...this.getItemLocation(a)});case b.TokenType.Template:return this.parseTemplateLiteral();case b.TokenType.Punctuator:switch(e.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);
default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case b.TokenType.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};c.parseArrayInitializer=function(){const a=this.captureStartMarker();this.expectPunctuator("[");const e=[];for(;!this.matchPunctuator("]");){const n=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(b.ParsingErrorCodes.InvalidExpression,
n)):(e.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize({type:b.Syntax.ArrayExpression,elements:e,...this.getItemLocation(a)})};c.parseObjectPropertyKey=function(){const a=this.captureStartMarker(),e=this.rawToken;switch(e.type){case b.TokenType.StringLiteral:return this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:e.value,raw:this.getSourceValue(e),isString:!0,...this.getItemLocation(a)});
case b.TokenType.Identifier:case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.Keyword:return this.readNextRawToken(),this.finalize({type:b.Syntax.Identifier,name:e.value,...this.getItemLocation(a)});default:this.throwError(b.ParsingErrorCodes.KeyMustBeString,a)}};c.parseObjectProperty=function(){const a=this.rawToken,e=this.captureStartMarker(),n=this.parseObjectPropertyKey();let h=!1,D=null;this.matchPunctuator(":")?(this.readNextRawToken(),D=this.inheritCoverGrammar(this.parseAssignmentExpression)):
a.type===b.TokenType.Identifier?(h=!0,D=this.finalize({type:b.Syntax.Identifier,name:a.value,...this.getItemLocation(e)})):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize({type:b.Syntax.Property,kind:"init",key:n,value:D,shorthand:h,...this.getItemLocation(e)})};c.parseObjectExpression=function(){const a=this.captureStartMarker();this.expectPunctuator("{");const e=[];for(;!this.matchPunctuator("}");)e.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");
this.expectPunctuator("}");return this.finalize({type:b.Syntax.ObjectExpression,properties:e,...this.getItemLocation(a)})};c.parseTemplateElement=function(a=!1){var e=this.rawToken;e.type!==b.TokenType.Template&&this.throwUnexpectedToken({rawToken:e});a&&!e.head&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidTemplateHead,rawToken:e});a=this.captureStartMarker();this.readNextRawToken();const {value:n,cooked:h,tail:D}=e;e=this.finalize({type:b.Syntax.TemplateElement,value:{raw:n,cooked:h},
tail:D,...this.getItemLocation(a)});e.loc.start.column++;e.loc.end.column-=D?1:2;return e};c.parseTemplateLiteral=function(){const a=this.captureStartMarker(),e=[],n=[];let h=this.parseTemplateElement(!0);for(n.push(h);!h.tail;)e.push(this.parseExpression()),h=this.parseTemplateElement(),n.push(h);return this.finalize({type:b.Syntax.TemplateLiteral,quasis:n,expressions:e,...this.getItemLocation(a)})};c.parseGroupExpression=function(){this.expectPunctuator("(");const a=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.expectPunctuator(")");return a};c.parseArguments=function(){this.expectPunctuator("(");const a=[];if(!this.matchPunctuator(")"))for(;;){const e=this.isolateCoverGrammar(this.parseAssignmentExpression);a.push(e);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return a};c.parseMemberName=function(){const a=this.rawToken,e=this.captureStartMarker();this.readNextRawToken();a.type!==b.TokenType.NullLiteral&&a.type!==b.TokenType.Identifier&&
a.type!==b.TokenType.Keyword&&a.type!==b.TokenType.BooleanLiteral&&this.throwUnexpectedToken({rawToken:a});return this.finalize({type:b.Syntax.Identifier,name:a.value,...this.getItemLocation(e)})};c.parseLeftHandSideExpression=function(){const a=this.captureStartMarker();let e=this.inheritCoverGrammar(this.parsePrimaryExpression);const n=this.captureStartMarker();for(var h;h=this.getMatchingPunctuator("([.");)switch(h){case "(":this.context.isAssignmentTarget=!1;e.type!==b.Syntax.Identifier&&e.type!==
b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.IdentiferExpected,a,n);h=this.parseArguments();e=this.finalize({type:b.Syntax.CallExpression,callee:e,arguments:h,...this.getItemLocation(a)});continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");h=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]");e=this.finalize({type:b.Syntax.MemberExpression,computed:!0,object:e,property:h,...this.getItemLocation(a)});continue;case ".":this.context.isAssignmentTarget=
!0,this.expectPunctuator("."),h=this.parseMemberName(),e=this.finalize({type:b.Syntax.MemberExpression,computed:!1,object:e,property:h,...this.getItemLocation(a)})}return e};c.parseUpdateExpression=function(){const a=this.captureStartMarker();let e=this.getMatchingPunctuator(b.UpdateOperators);if(e){this.readNextRawToken();var n=this.captureStartMarker(),h=this.inheritCoverGrammar(this.parseUnaryExpression);h.type!==b.Syntax.Identifier&&h.type!==b.Syntax.MemberExpression&&h.type!==b.Syntax.CallExpression&&
this.throwError(b.ParsingErrorCodes.InvalidExpression,n);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,a);this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UpdateExpression,operator:e,argument:h,prefix:!0,...this.getItemLocation(a)})}n=this.captureStartMarker();h=this.inheritCoverGrammar(this.parseLeftHandSideExpression);const D=this.captureStartMarker();if(this.hasLineTerminator)return h;e=this.getMatchingPunctuator(b.UpdateOperators);
if(!e)return h;h.type!==b.Syntax.Identifier&&h.type!==b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.InvalidExpression,n,D);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,a);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UpdateExpression,operator:e,argument:h,prefix:!1,...this.getItemLocation(a)})};c.parseUnaryExpression=function(){const a=this.getMatchingPunctuator(b.UnaryOperators);
if(a){const e=this.captureStartMarker();this.readNextRawToken();const n=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UnaryExpression,operator:a,argument:n,prefix:!0,...this.getItemLocation(e)})}return this.parseUpdateExpression()};c.parseBinaryExpression=function(){var a=this.rawToken,e=this.inheritCoverGrammar(this.parseUnaryExpression);if(this.rawToken.type!==b.TokenType.Punctuator)return e;var n=this.rawToken.value,h=
q(n);if(0===h)return e;this.readNextRawToken();this.context.isAssignmentTarget=!1;a=[a,this.rawToken];var D=this.inheritCoverGrammar(this.parseUnaryExpression);n=[e,n,D];for(var B=[h];this.rawToken.type===b.TokenType.Punctuator&&0<(h=q(this.rawToken.value));){for(;2<n.length&&h<=B[B.length-1];){D=n.pop();const t=n.pop();B.pop();e=n.pop();a.pop();var d=a[a.length-1];d=A(d,d.lineStart);n.push(this.finalize(this.createBinaryOrLogicalExpression(d,t,e,D)))}n.push(this.rawToken.value);B.push(h);a.push(this.rawToken);
this.readNextRawToken();n.push(this.inheritCoverGrammar(this.parseUnaryExpression))}h=n.length-1;e=n[h];for(B=a.pop();1<h;){D=a.pop();if(!D)break;B=A(D,B?.lineStart);e=this.finalize(this.createBinaryOrLogicalExpression(B,n[h-1],n[h-2],e));h-=2;B=D}return e};c.createBinaryOrLogicalExpression=function(a,e,n,h){const D=b.LogicalOperators.includes(e)?b.Syntax.LogicalExpression:b.Syntax.BinaryExpression;if(D===b.Syntax.BinaryExpression)return{type:D,operator:e,left:n,right:h,...this.getItemLocation(a)};
n.type!==b.Syntax.AssignmentExpression&&n.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,...z(n));h.type!==b.Syntax.AssignmentExpression&&h.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,...z(n));return{type:D,operator:e,left:n,right:h,...this.getItemLocation(a)}};c.parseAssignmentExpression=function(){const a=this.captureStartMarker(),e=this.inheritCoverGrammar(this.parseBinaryExpression);var n=this.captureStartMarker();
const h=this.getMatchingPunctuator(b.AssignmentOperators);if(!h)return e;e.type!==b.Syntax.Identifier&&e.type!==b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.InvalidExpression,a,n);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,a);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();n=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:b.Syntax.AssignmentExpression,
left:e,operator:h,right:n,...this.getItemLocation(a)})};c.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};c.parseStatements=function(a){const e=[];for(;this.rawToken.type!==b.TokenType.EOF&&!this.matchPunctuator(a);){const n=this.parseStatementListItem();b.isEmptyStatement(n)||e.push(n)}return e};c.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;return this.matchKeyword(b.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(b.Keywords.Export)?
this.parseExportDeclaration():this.matchKeyword(b.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()};c.parseBlock=function(){const a=this.captureStartMarker();this.expectPunctuator("{");const e=this.parseStatements("}");this.expectPunctuator("}");return this.finalize({type:b.Syntax.BlockStatement,body:e,...this.getItemLocation(a)})};c.parseObjectStatement=function(){const a=this.captureStartMarker(),e=this.parseObjectExpression();return this.finalize({type:b.Syntax.ExpressionStatement,
expression:e,...this.getItemLocation(a)})};c.parseBlockOrObjectStatement=function(){return this.context.curlyParsingType===w.AsObject||this.peekAhead(a=>{let e=a();if(e.type!==b.TokenType.Identifier&&e.type!==b.TokenType.StringLiteral)return!1;e=a();return e.type!==b.TokenType.Punctuator||":"!==e.value?!1:!0})?this.parseObjectStatement():this.parseBlock()};c.parseIdentifier=function(){const a=this.rawToken;if(a.type!==b.TokenType.Identifier)return null;const e=this.captureStartMarker();this.readNextRawToken();
return this.finalize({type:b.Syntax.Identifier,name:a.value,...this.getItemLocation(e)})};c.parseVariableDeclarator=function(){const a=this.captureStartMarker(),e=this.parseIdentifier();e||this.throwUnexpectedToken({code:b.ParsingErrorCodes.IdentiferExpected});let n=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();const h=this.rawToken;try{n=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(D){this.throwUnexpectedToken({rawToken:h,code:b.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize({type:b.Syntax.VariableDeclarator,
id:e,init:n,...this.getItemLocation(a)})};c.parseVariableDeclarationList=function(){const a=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),a.push(this.parseVariableDeclarator());return a};c.parseVariableDeclaration=function(){const a=this.captureStartMarker();this.expectKeyword(b.Keywords.Var);const e=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize({type:b.Syntax.VariableDeclaration,declarations:e,kind:"var",...this.getItemLocation(a)})};
c.parseEmptyStatement=function(){const a=this.captureStartMarker();this.expectPunctuator(";");return this.finalize({type:b.Syntax.EmptyStatement,...this.getItemLocation(a)})};c.parseExpressionStatement=function(){const a=this.captureStartMarker(),e=this.parseExpression();this.consumeSemicolon();return this.finalize({type:b.Syntax.ExpressionStatement,expression:e,...this.getItemLocation(a)})};c.parseIfClause=function(){return this.withBlockContext(x.IfClause,this.parseStatement)};c.parseIfStatement=
function(){const a=this.captureStartMarker();this.expectKeyword(b.Keywords.If);this.expectPunctuator("(");var e=this.captureStartMarker();const n=this.parseExpression();var h=this.captureStartMarker();this.expectPunctuator(")");n.type!==b.Syntax.AssignmentExpression&&n.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,e,h);e=this.parseIfClause();h=null;this.matchKeyword(b.Keywords.Else)&&(this.readNextRawToken(),h=this.parseIfClause());return this.finalize({type:b.Syntax.IfStatement,
test:n,consequent:e,alternate:h,...this.getItemLocation(a)})};c.parseWhileStatement=function(){const a=this.captureStartMarker();this.expectKeyword(b.Keywords.While);this.expectPunctuator("(");var e=this.captureStartMarker();const n=this.parseExpression(),h=this.captureStartMarker();this.expectPunctuator(")");n.type!==b.Syntax.AssignmentExpression&&n.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,e,h);e=this.withBlockContext(x.WhileLoop,this.parseStatement);
return this.finalize({type:b.Syntax.WhileStatement,test:n,body:e,...this.getItemLocation(a)})};c.parseForStatement=function(){let a=null,e=null,n=null,h=null,D=null;const B=this.captureStartMarker();this.expectKeyword(b.Keywords.For);this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(b.Keywords.Var)){var d=this.captureStartMarker();this.readNextRawToken();var t=this.parseVariableDeclarationList();1===t.length&&this.matchKeyword(b.Keywords.In)?
(t[0].init&&this.throwError(b.ParsingErrorCodes.ForInOfLoopInitializer,d),h=this.finalize({type:b.Syntax.VariableDeclaration,declarations:t,kind:"var",...this.getItemLocation(d)}),this.readNextRawToken(),D=this.parseExpression()):(this.matchKeyword(b.Keywords.In)&&this.throwError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,d),a=this.finalize({type:b.Syntax.VariableDeclaration,declarations:t,kind:"var",...this.getItemLocation(d)}),this.expectPunctuator(";"))}else d=this.context.isAssignmentTarget,
t=this.captureStartMarker(),a=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(b.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,t),a.type!==b.Syntax.Identifier&&this.throwError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,t),this.readNextRawToken(),h=a,D=this.parseExpression(),a=null):(this.context.isAssignmentTarget=d,this.expectPunctuator(";"));h||(this.matchPunctuator(";")||(e=this.isolateCoverGrammar(this.parseExpression)),
this.expectPunctuator(";"),this.matchPunctuator(")")||(n=this.isolateCoverGrammar(this.parseExpression)));this.expectPunctuator(")");d=this.withBlockContext(x.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return h&&D?this.finalize({type:b.Syntax.ForInStatement,left:h,right:D,body:d,...this.getItemLocation(B)}):this.finalize({type:b.Syntax.ForStatement,init:a,test:e,update:n,body:d,...this.getItemLocation(B)})};c.parseContinueStatement=function(){const a=this.captureStartMarker();this.expectKeyword(b.Keywords.Continue);
this.consumeSemicolon();return this.finalize({type:b.Syntax.ContinueStatement,...this.getItemLocation(a)})};c.parseBreakStatement=function(){const a=this.captureStartMarker();this.expectKeyword(b.Keywords.Break);this.consumeSemicolon();return this.finalize({type:b.Syntax.BreakStatement,...this.getItemLocation(a)})};c.parseReturnStatement=function(){const a=this.captureStartMarker();this.expectKeyword(b.Keywords.Return);const e=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||
this.rawToken.type===b.TokenType.EOF)&&this.rawToken.type!==b.TokenType.StringLiteral&&this.rawToken.type!==b.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize({type:b.Syntax.ReturnStatement,argument:e,...this.getItemLocation(a)})};c.parseStatement=function(){switch(this.rawToken.type){case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:case b.TokenType.Template:case b.TokenType.Identifier:return this.parseExpressionStatement();
case b.TokenType.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case b.TokenType.Keyword:switch(this.rawToken.value.toLowerCase()){case b.Keywords.Break:return this.parseBreakStatement();case b.Keywords.Continue:return this.parseContinueStatement();case b.Keywords.For:return this.parseForStatement();case b.Keywords.Function:return this.parseFunctionDeclaration();
case b.Keywords.If:return this.parseIfStatement();case b.Keywords.Return:return this.parseReturnStatement();case b.Keywords.Var:return this.parseVariableDeclaration();case b.Keywords.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};c.parseFormalParameters=function(){const a=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;this.rawToken.type!==b.TokenType.EOF;){const e=this.parseIdentifier();
e||this.throwUnexpectedToken({rawToken:this.rawToken,code:b.ParsingErrorCodes.IdentiferExpected});a.push(e);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return a};c.parseFunctionDeclaration=function(){(this.context.blockContext&x.Function)===x.Function&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&x.WhileLoop)!==x.WhileLoop&&(this.context.blockContext&x.IfClause)!==
x.IfClause||this.throwUnexpectedToken({code:b.ParsingErrorCodes.NoFunctionInsideBlock});const a=this.captureStartMarker();this.expectKeyword(b.Keywords.Function);const e=this.parseIdentifier();e||this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidFunctionIdentifier});const n=this.parseFormalParameters(),h=this.context.blockContext;this.context.blockContext|=x.Function;const D=this.parseBlock();this.context.blockContext=h;return this.finalize({type:b.Syntax.FunctionDeclaration,id:e,params:n,
body:D,...this.getItemLocation(a)})};c.parseScript=function(){var a=this.captureStartMarker();const e=this.parseStatements();a=this.finalize({type:b.Syntax.Program,body:e,...this.getItemLocation(a)});this.options.tokens&&(a.tokens=this.tokens);this.options.tolerant&&(a.errors=this.errorHandler.errors);return a};c.parseExportDeclaration=function(){this.context.blockContext!==x.None&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.ModuleExportRootOnly});let a=null;const e=this.captureStartMarker();
this.expectKeyword(b.Keywords.Export);this.matchKeyword(b.Keywords.Var)?a=this.parseVariableDeclaration():this.matchKeyword("function")?a=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidExpression});return this.finalize({type:b.Syntax.ExportNamedDeclaration,declaration:a,specifiers:[],source:null,...this.getItemLocation(e)})};c.parseModuleSpecifier=function(){const a=this.captureStartMarker(),e=this.rawToken;if(e.type===b.TokenType.StringLiteral)return this.readNextRawToken(),
this.finalize({type:b.Syntax.Literal,value:e.value,raw:this.getSourceValue(e),isString:!0,...this.getItemLocation(a)});this.throwError(b.ParsingErrorCodes.InvalidModuleUri,a)};c.parseDefaultSpecifier=function(){const a=this.captureStartMarker(),e=this.parseIdentifier();e||this.throwUnexpectedToken({code:b.ParsingErrorCodes.IdentiferExpected});return this.finalize({type:b.Syntax.ImportDefaultSpecifier,local:e,...this.getItemLocation(a)})};c.parseImportDeclaration=function(){this.context.blockContext!==
x.None&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.ModuleImportRootOnly});const a=this.captureStartMarker();this.expectKeyword(b.Keywords.Import);const e=this.parseDefaultSpecifier();this.expectContextualKeyword(b.Keywords.From);const n=this.parseModuleSpecifier();return this.finalize({type:b.Syntax.ImportDeclaration,specifiers:[e],source:n,...this.getItemLocation(a)})};return F._createClass(k)}();v.Parser=l;v.binaryOperatorPrecedence=q;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/lib/comment-handler":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./types"],function(v,F,C){function p(b,A){return A?A.loc.end.line===b.loc.start.line&&A.loc.end.column<=b.loc.start.column:!1}let m=function(){function b(){this.comments=[];this._nodeStack=[];this._newComments=[]}var A=b.prototype;A.insertInnerComments=function(z){if(C.isBlockStatement(z)&&0===z.body.length){var q=[];for(let x=this._newComments.length-1;0<=x;--x){const w=this._newComments[x];z.range[1]>=
w.range[0]&&(q.unshift(w),this._newComments.splice(x,1))}q.length&&(z.innerComments=q)}};A.attachTrailingComments=function(z){if(z){var q=this._nodeStack[this._nodeStack.length-1];if(C.isBlockStatement(z)&&q.range[0]>=z.range[0]&&q.range[1]<=z.range[1])for(var x=this._newComments.length-1;0<=x;--x){var w=this._newComments[x];w.range[0]>=z.range[0]&&w.range[1]<=z.range[1]&&(q.trailingComments=[...(q.trailingComments??[]),w],this._newComments.splice(x,1))}x=[];if(0<this._newComments.length)for(w=this._newComments.length-
1;0<=w;--w){const l=this._newComments[w];p(l,q)?(q.trailingComments=[...(q.trailingComments??[]),l],this._newComments.splice(w,1)):p(l,z)&&(x.unshift(l),this._newComments.splice(w,1))}q?.trailingComments&&p(q.trailingComments[0],z)&&(x=[...x,...q.trailingComments],delete q.trailingComments);0<x.length&&(z.trailingComments=x)}};A.attachLeadingComments=function(z){if(z){for(var q;0<this._nodeStack.length;){var x=this._nodeStack[this._nodeStack.length-1];if(z.range[0]<=x.range[0])q=x,this._nodeStack.pop();
else break}x=[];var w=[];if(q){var l=q.leadingComments?.length??0;for(--l;0<=l;--l){const k=q.leadingComments[l];z.range[0]>=k.range[1]?(x.unshift(k),q.leadingComments.splice(l,1)):C.isVariableDeclarator(z)&&!C.isBlockComment(k)&&(w.unshift(k),q.leadingComments.splice(l,1))}0===q.leadingComments?.length&&delete q.leadingComments;x.length&&(z.leadingComments=x);w.length&&(z.trailingComments=[...w,...(z.trailingComments??[])])}else{for(q=this._newComments.length-1;0<=q;--q)w=this._newComments[q],z.range[0]>=
w.range[0]&&(x.unshift(w),this._newComments.splice(q,1));x.length&&(z.leadingComments=x)}}};A.attachComments=function(z){if(C.isProgram(z)&&0<z.body.length){const q=this._nodeStack[this._nodeStack.length-1];q?(q.trailingComments=[...(q.trailingComments??[]),...this._newComments],this._newComments.length=0,this._nodeStack.pop()):(z.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(z),this.attachLeadingComments(z),this.insertInnerComments(z),this._nodeStack.push(z)};
A.collectComment=function(z){this.comments.push(z);this._newComments.push(z)};return F._createClass(b)}();v.CommentHandler=m;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/types":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(v,F){v.Keywords=void 0;(function(m){m.Break="break";m.Continue="continue";m.Else="else";m.False="false";m.For="for";m.From="from";m.Function="function";m.If="if";m.Import="import";m.Export="export";m.In="in";
m.Null="null";m.Return="return";m.True="true";m.Var="var";m.While="while"})(v.Keywords||(v.Keywords={}));v.Syntax=void 0;(function(m){m.AssignmentExpression="AssignmentExpression";m.ArrayExpression="ArrayExpression";m.BlockComment="BlockComment";m.BlockStatement="BlockStatement";m.BinaryExpression="BinaryExpression";m.BreakStatement="BreakStatement";m.CallExpression="CallExpression";m.ContinueStatement="ContinueStatement";m.EmptyStatement="EmptyStatement";m.ExpressionStatement="ExpressionStatement";
m.ExportNamedDeclaration="ExportNamedDeclaration";m.ExportSpecifier="ExportSpecifier";m.ForStatement="ForStatement";m.ForInStatement="ForInStatement";m.FunctionDeclaration="FunctionDeclaration";m.Identifier="Identifier";m.IfStatement="IfStatement";m.ImportDeclaration="ImportDeclaration";m.ImportDefaultSpecifier="ImportDefaultSpecifier";m.LineComment="LineComment";m.Literal="Literal";m.LogicalExpression="LogicalExpression";m.MemberExpression="MemberExpression";m.ObjectExpression="ObjectExpression";
m.Program="Program";m.Property="Property";m.ReturnStatement="ReturnStatement";m.TemplateElement="TemplateElement";m.TemplateLiteral="TemplateLiteral";m.UnaryExpression="UnaryExpression";m.UpdateExpression="UpdateExpression";m.VariableDeclaration="VariableDeclaration";m.VariableDeclarator="VariableDeclarator";m.WhileStatement="WhileStatement"})(v.Syntax||(v.Syntax={}));v.TokenType=void 0;(function(m){m[m.Unknown=0]="Unknown";m[m.BooleanLiteral=1]="BooleanLiteral";m[m.EOF=2]="EOF";m[m.Identifier=3]=
"Identifier";m[m.Keyword=4]="Keyword";m[m.NullLiteral=5]="NullLiteral";m[m.NumericLiteral=6]="NumericLiteral";m[m.Punctuator=7]="Punctuator";m[m.StringLiteral=8]="StringLiteral";m[m.Template=10]="Template"})(v.TokenType||(v.TokenType={}));v.ParsingErrorCodes=void 0;(function(m){m.InvalidModuleUri="InvalidModuleUri";m.ForInOfLoopInitializer="ForInOfLoopInitializer";m.IdentiferExpected="IdentiferExpected";m.InvalidEscapedReservedWord="InvalidEscapedReservedWord";m.InvalidExpression="InvalidExpression";
m.InvalidFunctionIdentifier="InvalidFunctionIdentifier";m.InvalidHexEscapeSequence="InvalidHexEscapeSequence";m.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";m.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";m.InvalidTemplateHead="InvalidTemplateHead";m.InvalidVariableAssignment="InvalidVariableAssignment";m.KeyMustBeString="KeyMustBeString";m.NoFunctionInsideBlock="NoFunctionInsideBlock";m.NoFunctionInsideFunction="NoFunctionInsideFunction";m.ModuleExportRootOnly="ModuleExportRootOnly";
m.ModuleImportRootOnly="ModuleImportRootOnly";m.PunctuatorExpected="PunctuatorExpected";m.TemplateOctalLiteral="TemplateOctalLiteral";m.UnexpectedBoolean="UnexpectedBoolean";m.UnexpectedEndOfScript="UnexpectedEndOfScript";m.UnexpectedIdentifier="UnexpectedIdentifier";m.UnexpectedKeyword="UnexpectedKeyword";m.UnexpectedNull="UnexpectedNull";m.UnexpectedNumber="UnexpectedNumber";m.UnexpectedPunctuator="UnexpectedPunctuator";m.UnexpectedString="UnexpectedString";m.UnexpectedTemplate="UnexpectedTemplate";
m.UnexpectedToken="UnexpectedToken"})(v.ParsingErrorCodes||(v.ParsingErrorCodes={}));const C={[v.ParsingErrorCodes.InvalidModuleUri]:"Module uri must be a text literal.",[v.ParsingErrorCodes.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[v.ParsingErrorCodes.IdentiferExpected]:"'${value}' is an invalid identifier.",[v.ParsingErrorCodes.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[v.ParsingErrorCodes.InvalidExpression]:"Invalid expression.",
[v.ParsingErrorCodes.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[v.ParsingErrorCodes.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[v.ParsingErrorCodes.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[v.ParsingErrorCodes.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[v.ParsingErrorCodes.InvalidTemplateHead]:"Invalid template structure.",[v.ParsingErrorCodes.InvalidVariableAssignment]:"Invalid variable assignment.",
[v.ParsingErrorCodes.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[v.ParsingErrorCodes.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[v.ParsingErrorCodes.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[v.ParsingErrorCodes.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[v.ParsingErrorCodes.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",
[v.ParsingErrorCodes.PunctuatorExpected]:"'${value}' expected.",[v.ParsingErrorCodes.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[v.ParsingErrorCodes.UnexpectedBoolean]:"Unexpected boolean literal.",[v.ParsingErrorCodes.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[v.ParsingErrorCodes.UnexpectedIdentifier]:"Unexpected identifier.",[v.ParsingErrorCodes.UnexpectedKeyword]:"Unexpected keyword.",[v.ParsingErrorCodes.UnexpectedNull]:"Unexpected null literal.",
[v.ParsingErrorCodes.UnexpectedNumber]:"Unexpected number.",[v.ParsingErrorCodes.UnexpectedPunctuator]:"Unexpected ponctuator.",[v.ParsingErrorCodes.UnexpectedString]:"Unexpected text literal.",[v.ParsingErrorCodes.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[v.ParsingErrorCodes.UnexpectedToken]:"Unexpected token '${value}'."};let p=function(m){function b({code:z,index:q,line:x,column:w,len:l=0,description:k,data:c}){var a=A.call(this,`${k??z}`);a.declaredRootClass="esri.arcade.lib.parsingerror";
a.name="ParsingError";a.code=z;a.index=q;a.line=x;a.column=w;a.len=l;a.data=c;a.description=k;a.range={start:{line:x,column:w-1},end:{line:x,column:w+l}};Error.captureStackTrace?.(F._assertThisInitialized(a),b);return a}F._inherits(b,m);var A=F._createSuper(b);return F._createClass(b)}(F._wrapNativeSuper(Error));v.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");v.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");
v.LogicalOperators=["||","\x26\x26"];v.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};v.ParsingError=p;v.ParsingErrorMessages=C;v.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");v.UnaryOperators=["-","+","!","~"];v.UpdateOperators=["++","--"];v.isArrayExpression=
function(m){return m?.type===v.Syntax.ArrayExpression};v.isAssignmentExpression=function(m){return m?.type===v.Syntax.AssignmentExpression};v.isBinaryExpression=function(m){return m?.type===v.Syntax.BinaryExpression};v.isBlockComment=function(m){return m?.type===v.Syntax.BlockComment};v.isBlockStatement=function(m){return m?.type===v.Syntax.BlockStatement};v.isBreakStatement=function(m){return m?.type===v.Syntax.BreakStatement};v.isCallExpression=function(m){return m?.type===v.Syntax.CallExpression};
v.isContinueStatement=function(m){return m?.type===v.Syntax.ContinueStatement};v.isEmptyStatement=function(m){return m?.type===v.Syntax.EmptyStatement};v.isExpression=function(m){switch(m?.type){case v.Syntax.ArrayExpression:case v.Syntax.AssignmentExpression:case v.Syntax.BinaryExpression:case v.Syntax.CallExpression:case v.Syntax.Identifier:case v.Syntax.Literal:case v.Syntax.LogicalExpression:case v.Syntax.MemberExpression:case v.Syntax.ObjectExpression:case v.Syntax.TemplateLiteral:case v.Syntax.UpdateExpression:case v.Syntax.UnaryExpression:return!0;
default:return!1}};v.isExpressionStatement=function(m){return m?.type===v.Syntax.ExpressionStatement};v.isForInStatement=function(m){return m?.type===v.Syntax.ForInStatement};v.isForStatement=function(m){return m?.type===v.Syntax.ForStatement};v.isFunctionDeclaration=function(m){return m?.type===v.Syntax.FunctionDeclaration};v.isIdentifier=function(m){return m?.type===v.Syntax.Identifier};v.isIfStatement=function(m){return m?.type===v.Syntax.IfStatement};v.isLiteral=function(m){return m?.type===v.Syntax.Literal};
v.isLogicalExpression=function(m){return m?.type===v.Syntax.LogicalExpression};v.isMemberExpression=function(m){return m?.type===v.Syntax.MemberExpression};v.isObjectExpression=function(m){return m?.type===v.Syntax.ObjectExpression};v.isProgram=function(m){return m?.type===v.Syntax.Program};v.isProperty=function(m){return m?.type===v.Syntax.Property};v.isReturnStatement=function(m){return m?.type===v.Syntax.ReturnStatement};v.isStatement=function(m){switch(m?.type){case v.Syntax.BlockStatement:case v.Syntax.BreakStatement:case v.Syntax.ContinueStatement:case v.Syntax.EmptyStatement:case v.Syntax.ExpressionStatement:case v.Syntax.ForInStatement:case v.Syntax.ForStatement:case v.Syntax.FunctionDeclaration:case v.Syntax.IfStatement:case v.Syntax.ReturnStatement:case v.Syntax.VariableDeclaration:return!0;
default:return!1}};v.isTemplateElement=function(m){return m?.type===v.Syntax.TemplateElement};v.isTemplateLiteral=function(m){return m?.type===v.Syntax.TemplateLiteral};v.isUnaryExpression=function(m){return m?.type===v.Syntax.UnaryExpression};v.isUpdateExpression=function(m){return m?.type===v.Syntax.UpdateExpression};v.isVariableDeclaration=function(m){return m?.type===v.Syntax.VariableDeclaration};v.isVariableDeclarator=function(m){return m?.type===v.Syntax.VariableDeclarator};Object.defineProperty(v,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/error-handler":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./types"],function(v,F,C){function p(b,A){b=C.ParsingErrorMessages[b];return A?b.replace(/\${(.*?)}/g,(z,q)=>A[q]?.toString()??""):b}let m=function(){function b(z=!1){this.tolerant=z;this.errors=[]}var A=b.prototype;A.recordError=function(z){this.errors.push(z)};A.tolerate=function(z){if(this.tolerant)this.recordError(z);else throw z;};A.throwError=function(z){z.description=
z.description??p(z.code,z.data);throw new C.ParsingError(z);};A.tolerateError=function(z){z.description=z.description??p(z.code,z.data);z=new C.ParsingError(z);if(this.tolerant)this.recordError(z);else throw z;};return F._createClass(b)}();v.ErrorHandler=m;v.formatErrorDescription=p;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/scanner":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./assert","./character","./types"],function(v,F,C,p,m){const b=
[[],[],[]];m.UpdateOperators.forEach(z=>b[z.length-1].push(z));m.UnaryOperators.forEach(z=>b[z.length-1].push(z));m.LogicalOperators.forEach(z=>b[z.length-1].push(z));m.AssignmentOperators.forEach(z=>b[z.length-1].push(z));m.BinaryOperators.forEach(z=>b[z.length-1].push(z));let A=function(){function z(x,w){this.source=x;this.errorHandler=w;this._length=x.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}var q=z.prototype;q.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,
lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};q.restoreState=function(x){this.index=x.index;this.lineNumber=x.lineNumber;this.lineStart=x.lineStart;this.curlyStack=x.curlyStack};q.eof=function(){return this.index>=this._length};q.throwUnexpectedToken=function(x=m.ParsingErrorCodes.UnexpectedToken){this.errorHandler.throwError({code:x,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};q.tolerateUnexpectedToken=function(x=m.ParsingErrorCodes.UnexpectedToken){this.errorHandler.tolerateError({code:x,
index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};q.skipSingleLineComment=function(x){const w=[],l=this.index-x,k={start:{line:this.lineNumber,column:this.index-this.lineStart-x},end:{line:0,column:0}};for(;!this.eof();){const c=this.source.charCodeAt(this.index);++this.index;if(p.Character.isLineTerminator(c))return k&&(k.end={line:this.lineNumber,column:this.index-this.lineStart-1},w.push({multiLine:!1,start:l+x,end:this.index-1,range:[l,this.index-1],loc:k})),13===c&&
10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,w}k&&(k.end={line:this.lineNumber,column:this.index-this.lineStart},w.push({multiLine:!1,start:l+x,end:this.index,range:[l,this.index],loc:k}));return w};q.skipMultiLineComment=function(){const x=[],w=this.index-2,l={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const k=this.source.charCodeAt(this.index);if(p.Character.isLineTerminator(k))13===
k&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===k&&47===this.source.charCodeAt(this.index+1))return this.index+=2,l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},x.push({multiLine:!0,start:w+2,end:this.index-2,range:[w,this.index],loc:l})),x;++this.index}}l&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},x.push({multiLine:!0,start:w+2,end:this.index,range:[w,this.index],loc:l}));this.tolerateUnexpectedToken();
return x};q.scanComments=function(){let x=[];for(;!this.eof();){var w=this.source.charCodeAt(this.index);if(p.Character.isWhiteSpace(w))++this.index;else if(p.Character.isLineTerminator(w))++this.index,13===w&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else if(47===w)if(w=this.source.charCodeAt(this.index+1),47===w)this.index+=2,w=this.skipSingleLineComment(2),x=[...x,...w];else if(42===w)this.index+=2,w=this.skipMultiLineComment(),x=[...x,...w];
else break;else break}return x};q.isKeyword=function(x){x=x.toLowerCase();switch(x.length){case 2:return x===m.Keywords.If||x===m.Keywords.In;case 3:return x===m.Keywords.Var||x===m.Keywords.For;case 4:return x===m.Keywords.Else;case 5:return x===m.Keywords.Break||x===m.Keywords.While;case 6:return x===m.Keywords.Return||x===m.Keywords.Import||x===m.Keywords.Export;case 8:return x===m.Keywords.Function||x===m.Keywords.Continue;default:return!1}};q.codePointAt=function(x){let w=this.source.charCodeAt(x);
55296<=w&&56319>=w&&(x=this.source.charCodeAt(x+1),56320<=x&&57343>=x&&(w=1024*(w-55296)+x-56320+65536));return w};q.scanHexEscape=function(x){x="u"===x?4:2;let w=0;for(let l=0;l<x;++l)if(!this.eof()&&p.Character.isHexDigit(this.source.charCodeAt(this.index)))w=16*w+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(w)};q.scanUnicodeCodePointEscape=function(){let x=this.source[this.index],w=0;for("}"===x&&this.throwUnexpectedToken();!this.eof();){x=
this.source[this.index++];if(!p.Character.isHexDigit(x.charCodeAt(0)))break;w=16*w+"0123456789abcdef".indexOf(x.toLowerCase())}(1114111<w||"}"!==x)&&this.throwUnexpectedToken();return p.Character.fromCodePoint(w)};q.getIdentifier=function(){const x=this.index++;for(;!this.eof();){const w=this.source.charCodeAt(this.index);if(92===w||55296<=w&&57343>w)return this.index=x,this.getComplexIdentifier();if(p.Character.isIdentifierPart(w))++this.index;else break}return this.source.slice(x,this.index)};q.getComplexIdentifier=
function(){let x=this.codePointAt(this.index),w=p.Character.fromCodePoint(x);this.index+=w.length;let l;92===x&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,l=this.scanUnicodeCodePointEscape()):(l=this.scanHexEscape("u"),null!==l&&"\\"!==l&&p.Character.isIdentifierStart(l.charCodeAt(0))||this.throwUnexpectedToken()),w=l);for(;!this.eof();){x=this.codePointAt(this.index);if(!p.Character.isIdentifierPart(x))break;l=p.Character.fromCodePoint(x);
w+=l;this.index+=l.length;92===x&&(w=w.substring(0,w.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,l=this.scanUnicodeCodePointEscape()):(l=this.scanHexEscape("u"),null!==l&&"\\"!==l&&p.Character.isIdentifierPart(l.charCodeAt(0))||this.throwUnexpectedToken()),w+=l)}return w};q.octalToDecimal=function(x){let w="0"!==x,l="01234567".indexOf(x);!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(w=!0,l=8*l+"01234567".indexOf(this.source[this.index++]),"0123".includes(x)&&!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(l=8*l+"01234567".indexOf(this.source[this.index++])));return{code:l,octal:w}};q.scanIdentifier=function(){let x;const w=this.index,l=92===this.source.charCodeAt(w)?this.getComplexIdentifier():this.getIdentifier();x=1===l.length?m.TokenType.Identifier:this.isKeyword(l)?m.TokenType.Keyword:l.toLowerCase()===m.Keywords.Null?m.TokenType.NullLiteral:
l.toLowerCase()===m.Keywords.True||l.toLowerCase()===m.Keywords.False?m.TokenType.BooleanLiteral:m.TokenType.Identifier;if(x!==m.TokenType.Identifier&&w+l.length!==this.index){const k=this.index;this.index=w;this.tolerateUnexpectedToken(m.ParsingErrorCodes.InvalidEscapedReservedWord);this.index=k}return{type:x,value:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:w,end:this.index}};q.scanPunctuator=function(){const x=this.index;let w=this.source[this.index];switch(w){case "(":case "{":"{"===
w&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(let l=b.length;0<l;l--)if(w=this.source.substring(this.index,this.index+l),b[l-1].includes(w)){this.index+=l;break}}this.index===x&&this.throwUnexpectedToken();return{type:m.TokenType.Punctuator,value:w,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};
q.scanHexLiteral=function(x){let w="";for(;!this.eof()&&p.Character.isHexDigit(this.source.charCodeAt(this.index));)w+=this.source[this.index++];0===w.length&&this.throwUnexpectedToken();p.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:m.TokenType.NumericLiteral,value:parseInt("0x"+w,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};q.scanBinaryLiteral=function(x){let w="";for(;!this.eof();){var l=this.source[this.index];
if("0"!==l&&"1"!==l)break;w+=this.source[this.index++]}0===w.length&&this.throwUnexpectedToken();this.eof()||(l=this.source.charCodeAt(this.index),(p.Character.isIdentifierStart(l)||p.Character.isDecimalDigit(l))&&this.throwUnexpectedToken());return{type:m.TokenType.NumericLiteral,value:parseInt(w,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};q.scanOctalLiteral=function(x,w){let l="",k=!1;p.Character.isOctalDigit(x.charCodeAt(0))?(k=!0,l="0"+this.source[this.index++]):
++this.index;for(;!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];k||0!==l.length||this.throwUnexpectedToken();(p.Character.isIdentifierStart(this.source.charCodeAt(this.index))||p.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:m.TokenType.NumericLiteral,value:parseInt(l,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:w,end:this.index}};q.scanNumericLiteral=function(){const x=
this.index;let w=this.source[x];C.assert(p.Character.isDecimalDigit(w.charCodeAt(0))||"."===w,"Numeric literal must start with a decimal digit or a decimal point");let l="";if("."!==w){l=this.source[this.index++];w=this.source[this.index];if("0"===l){if("x"===w||"X"===w)return++this.index,this.scanHexLiteral(x);if("b"===w||"B"===w)return++this.index,this.scanBinaryLiteral(x);if("o"===w||"O"===w)return this.scanOctalLiteral(w,x)}for(;p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=
this.source[this.index++];w=this.source[this.index]}if("."===w){for(l+=this.source[this.index++];p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];w=this.source[this.index]}if("e"===w||"E"===w){l+=this.source[this.index++];w=this.source[this.index];if("+"===w||"-"===w)l+=this.source[this.index++];if(p.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];
else this.throwUnexpectedToken()}p.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:m.TokenType.NumericLiteral,value:parseFloat(l),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}};q.scanStringLiteral=function(){const x=this.index;let w=this.source[x];C.assert("'"===w||'"'===w,"String literal must starts with a quote");++this.index;let l="";for(;!this.eof();){var k=this.source[this.index++];if(k===w){w="";break}if("\\"===
k)if((k=this.source[this.index++])&&p.Character.isLineTerminator(k.charCodeAt(0)))++this.lineNumber,"\r"===k&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(k){case "u":"{"===this.source[this.index]?(++this.index,l+=this.scanUnicodeCodePointEscape()):(k=this.scanHexEscape(k),null===k&&this.throwUnexpectedToken(),l+=k);break;case "x":k=this.scanHexEscape(k);null===k&&this.throwUnexpectedToken(m.ParsingErrorCodes.InvalidHexEscapeSequence);l+=k;break;case "n":l+="\n";
break;case "r":l+="\r";break;case "t":l+="\t";break;case "b":l+="\b";break;case "f":l+="\f";break;case "v":l+="\v";break;case "8":case "9":l+=k;this.tolerateUnexpectedToken();break;default:k&&p.Character.isOctalDigit(k.charCodeAt(0))?(k=this.octalToDecimal(k),l+=String.fromCharCode(k.code)):l+=k}else if(p.Character.isLineTerminator(k.charCodeAt(0)))break;else l+=k}""!==w&&(this.index=x,this.throwUnexpectedToken());return{type:m.TokenType.StringLiteral,value:l,lineNumber:this.lineNumber,lineStart:this.lineStart,
start:x,end:this.index}};q.scanTemplate=function(){let x="",w=!1;const l=this.index,k="`"===this.source[l];let c=!1,a=2;for(++this.index;!this.eof();){var e=this.source[this.index++];if("`"===e){a=1;w=c=!0;break}if("$"===e){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;w=!0;break}x+=e}else if("\\"===e)if(e=this.source[this.index++],p.Character.isLineTerminator(e.charCodeAt(0)))++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;
else switch(e){case "n":x+="\n";break;case "r":x+="\r";break;case "t":x+="\t";break;case "u":if("{"===this.source[this.index])++this.index,x+=this.scanUnicodeCodePointEscape();else{const n=this.index,h=this.scanHexEscape(e);null!==h?x+=h:(this.index=n,x+=e)}break;case "x":e=this.scanHexEscape(e);null===e&&this.throwUnexpectedToken(m.ParsingErrorCodes.InvalidHexEscapeSequence);x+=e;break;case "b":x+="\b";break;case "f":x+="\f";break;case "v":x+="\v";break;default:"0"===e?(p.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(m.ParsingErrorCodes.TemplateOctalLiteral),x+="\x00"):p.Character.isOctalDigit(e.charCodeAt(0))?this.throwUnexpectedToken(m.ParsingErrorCodes.TemplateOctalLiteral):x+=e}else p.Character.isLineTerminator(e.charCodeAt(0))?(++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,x+="\n"):x+=e}w||this.throwUnexpectedToken();k||this.curlyStack.pop();return{type:m.TokenType.Template,value:this.source.slice(l+1,this.index-a),cooked:x,head:k,
tail:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};q.lex=function(){if(this.eof())return{type:m.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const x=this.source.charCodeAt(this.index);return p.Character.isIdentifierStart(x)?this.scanIdentifier():40===x||41===x||59===x?this.scanPunctuator():39===x||34===x?this.scanStringLiteral():46===x?p.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():
this.scanPunctuator():p.Character.isDecimalDigit(x)?this.scanNumericLiteral():96===x||125===x&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=x&&57343>x&&p.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return F._createClass(z)}();v.Scanner=A;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/assert":function(){define(["exports"],function(v){v.assert=function(F,C){if(!F)throw Error("ASSERT: "+
C);};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/character":function(){define(["exports"],function(v){var F=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
C=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
const p={fromCodePoint(m){return 65536>m?String.fromCharCode(m):String.fromCharCode(55296+(m-65536>>10))+String.fromCharCode(56320+(m-65536&1023))},isWhiteSpace(m){return 32===m||9===m||11===m||12===m||160===m||5760<=m&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(m)},isLineTerminator(m){return 10===m||13===m||8232===m||8233===m},isIdentifierStart(m){return 36===m||95===m||65<=m&&90>=m||97<=m&&122>=m||92===m||128<=m&&F.test(p.fromCodePoint(m))},isIdentifierPart(m){return 36===
m||95===m||65<=m&&90>=m||97<=m&&122>=m||48<=m&&57>=m||92===m||128<=m&&C.test(p.fromCodePoint(m))},isDecimalDigit(m){return 48<=m&&57>=m},isHexDigit(m){return 48<=m&&57>=m||65<=m&&70>=m||97<=m&&102>=m},isOctalDigit(m){return 48<=m&&55>=m}};v.Character=p;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/tokenizer":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","./error-handler","./scanner","./types"],function(v,F,C,p,m){let b=function(){function A(q,
x){this.errorHandler=new C.ErrorHandler;this.errorHandler.tolerant=x?"boolean"===typeof x.tolerant&&x.tolerant:!1;this.scanner=new p.Scanner(q,this.errorHandler);this.trackComments=x?"boolean"===typeof x.comment&&x.comment:!1;this.buffer=[]}var z=A.prototype;z.errors=function(){return this.errorHandler.errors};z.getNextToken=function(){if(0===this.buffer.length){var q=this.scanner.scanComments();this.trackComments&&q&&q.forEach(x=>{const w=this.scanner.source.slice(x.start,x.end);this.buffer.push({type:x.multiLine?
m.Syntax.BlockComment:m.Syntax.LineComment,value:w,range:x.range,loc:x.loc})});if(!this.scanner.eof()){q={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};const x=this.scanner.lex(),w={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};q={type:m.TokenNames[x.type],value:this.scanner.source.slice(x.start,x.end),range:[x.start,x.end],loc:{start:q,end:w}};this.buffer.push(q)}}return this.buffer.shift()};return F._createClass(A)}();v.Tokenizer=
b;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(v){let F=function(){function p(b){const A=this;A._keys=[];A._values=[];A.length=0;b&&b.forEach(z=>{A.set(z[0],z[1])})}var m=p.prototype;m.entries=function(){return[].slice.call(this.keys().map((b,A)=>[b,this._values[A]]))};m.keys=function(){return[].slice.call(this._keys)};m.values=function(){return[].slice.call(this._values)};
m.has=function(b){return this._keys.includes(b)};m.get=function(b){b=this._keys.indexOf(b);return-1<b?this._values[b]:null};m.deepGet=function(b){if(!b||!b.length)return null;const A=(z,q)=>null==z?null:q.length?A(z instanceof p?z.get(q[0]):z[q[0]],q.slice(1)):z;return A(this.get(b[0]),b.slice(1))};m.set=function(b,A){const z=this._keys.indexOf(b);-1<z?this._values[z]=A:(this._keys.push(b),this._values.push(A),this.length=this._values.length);return this};m.sortedSet=function(b,A,z,q){var x=this._keys.length;
z=z||0;q=void 0!==q?q:x-1;if(0===x)return this._keys.push(b),this._values.push(A),this;if(b===this._keys[z])return this._values.splice(z,0,A),this;if(b===this._keys[q])return this._values.splice(q,0,A),this;if(b>this._keys[q])return this._keys.splice(q+1,0,b),this._values.splice(q+1,0,A),this;if(b<this._keys[z])return this._values.splice(z,0,A),this._keys.splice(z,0,b),this;if(z>=q)return this;x=z+Math.floor((q-z)/2);return b<this._keys[x]?this.sortedSet(b,A,z,x-1):b>this._keys[x]?this.sortedSet(b,
A,x+1,q):this};m.size=function(){return this.length};m.clear=function(){this._keys.length=this.length=this._values.length=0;return this};m.delete=function(b){b=this._keys.indexOf(b);return-1<b?(this._keys.splice(b,1),this._values.splice(b,1),this.length=this._keys.length,!0):!1};m.forEach=function(b){this._keys.forEach((A,z)=>{b(this._values[z],A,z)})};m.map=function(b){return this.keys().map((A,z)=>b(this._values[z],A,z))};m.filter=function(b){const A=this;A._keys.forEach((z,q)=>{!1===b(A._values[q],
z,q)&&A.delete(z)});return this};m.clone=function(){return new p(this.entries())};return v._createClass(p)}(),C=function(){function p(b=20){this._maxEntries=b;this._values=new F}var m=p.prototype;m.delete=function(b){this._values.has(b)&&this._values.delete(b)};m.get=function(b){let A=null;this._values.has(b)&&(A=this._values.get(b),this._values.delete(b),this._values.set(b,A));return A};m.put=function(b,A){if(this._values.size()>=this._maxEntries){const z=this._values.keys()[0];this._values.delete(z)}this._values.set(b,
A)};return v._createClass(p)}();return function(){function p(b=20){this._maxEntries=b;this._cache=new C(this._maxEntries)}var m=p.prototype;m.clear=function(){this._cache=new C(this._maxEntries)};m.addToCache=function(b,A){this._cache.put(b,A)};m.removeFromCache=function(b){this._cache.delete(b)};m.getFromCache=function(b){return this._cache.get(b)};return v._createClass(p)}()})},"esri/arcade/arcadeRuntime":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(v,F,C,p,m,b,A,z,q,x,w,l,k,c,a,e,n,h,D){function B(L,G){const K=[];for(let P=0;P<G.arguments.length;P++)K.push(t(L,G.arguments[P]));return K}function d(L,G,K){try{return!0===G.preparsed?K(L,null,G.arguments):K(L,G,B(L,G))}catch(P){throw P;}}function t(L,G){try{switch(G?.type){case "EmptyStatement":return q.voidOperation;case "VariableDeclarator":let wa=null===G.init?null:t(L,G.init);wa===q.voidOperation&&(wa=null);if("Identifier"!==G.id.type)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,
G);const Ha=G.id.name.toLowerCase();null!=L.localScope?L.localScope[Ha]={value:wa,valueset:!0,node:G.init}:L.globalScope[Ha]={value:wa,valueset:!0,node:G.init};return q.voidOperation;case "VariableDeclaration":for(var K=0;K<G.declarations.length;K++)t(L,G.declarations[K]);return q.voidOperation;case "ImportDeclaration":const Ia=G.specifiers[0].local.name.toLowerCase(),Fa=L.libraryResolver.loadLibrary(Ia);K=null;L.libraryResolver._moduleSingletons?.has(Fa.uri)?K=L.libraryResolver._moduleSingletons.get(Fa.uri):
(K=new ca(Fa),K.loadModule(L),L.libraryResolver._moduleSingletons?.set(Fa.uri,K));L.globalScope[Ia]={value:K,valueset:!0,node:G};return q.voidOperation;case "ExportNamedDeclaration":t(L,G.declaration);if("FunctionDeclaration"===G.declaration.type)L.exports[G.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===G.declaration.type)for(const V of G.declaration.declarations)L.exports[V.id.name.toLowerCase()]="variable";return q.voidOperation;case "BlockStatement":case "Program":a:{let V=
q.voidOperation;for(K=0;K<G.body.length;K++)if(V=t(L,G.body[K]),V instanceof q.ReturnResult||V===q.breakResult||V===q.continueResult){var P=V;break a}P=V}return P;case "FunctionDeclaration":const Ca=G.id.name.toLowerCase();L.globalScope[Ca]={valueset:!0,node:null,value:new U(G,L)};return q.voidOperation;case "ReturnStatement":if(null===G.argument)var H=new q.ReturnResult(q.voidOperation);else{var Q=t(L,G.argument);H=new q.ReturnResult(Q)}return H;case "IfStatement":{const V=t(L,G.test);if(!0===V)var O=
t(L,G.consequent);else if(!1===V)O=null!==G.alternate?t(L,G.alternate):q.voidOperation;else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.BooleanConditionRequired,G);}return O;case "ExpressionStatement":if("AssignmentExpression"===G.expression.type||"UpdateExpression"===G.expression.type)var T=t(L,G.expression);else if("CallExpression"===G.expression.type){const V=t(L,G.expression);T=V===q.voidOperation?q.voidOperation:new q.ImplicitResult(V)}else{var Z=t(L,G.expression);T=Z===q.voidOperation?
q.voidOperation:new q.ImplicitResult(Z)}return T;case "AssignmentExpression":K=null;var f="";if("MemberExpression"===G.left.type){K=t(L,G.left.object);if(!0===G.left.computed)f=t(L,G.left.property);else if("Identifier"===G.left.property.type)f=G.left.property.name;else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,G);const V=t(L,G.right);if(q.isArray(K))if(q.isNumber(f)){0>f&&(f=K.length+f);if(0>f||f>K.length)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.OutOfBounds,
G);if(f===K.length&&"\x3d"!==G.operator)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.OutOfBounds,G);K[f]=E(V,G.operator,K[f],G,L)}else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.ArrayAccessorMustBeNumber,G);else if(K instanceof m){if(!1===q.isString(f))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(f))K.setField(f,E(V,G.operator,K.field(f),G,L));else{if("\x3d"!==G.operator)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FieldNotFound,
G,{key:f});K.setField(f,E(V,G.operator,null,G,L))}}else if(q.isFeature(K)){if(!1===q.isString(f))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(f))K.setField(f,E(V,G.operator,K.field(f),G,L));else{if("\x3d"!==G.operator)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FieldNotFound,G,{key:f});K.setField(f,E(V,G.operator,null,G,L))}}else{if(q.isImmutableArray(K))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.Immutable,G);if(K instanceof
ca){if(!1===q.isString(f))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.ModuleAccessorMustBeString,G);if(!0===K.hasGlobal(f))K.setGlobal(f,E(V,G.operator,K.global(f),G,L));else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.ModuleExportNotFound,G);}else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,G);}var r=q.voidOperation}else{K=G.left.name.toLowerCase();var I=t(L,G.right);if(null!=L.localScope&&void 0!==L.localScope[K])L.localScope[K]={value:E(I,
G.operator,L.localScope[K].value,G,L),valueset:!0,node:G.right},r=q.voidOperation;else if(void 0!==L.globalScope[K])L.globalScope[K]={value:E(I,G.operator,L.globalScope[K].value,G,L),valueset:!0,node:G.right},r=q.voidOperation;else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,G);}return r;case "UpdateExpression":{let V;K=null;f="";if("MemberExpression"===G.argument.type){K=t(L,G.argument.object);!0===G.argument.computed?f=t(L,G.argument.property):"Identifier"===G.argument.property.type&&
(f=G.argument.property.name);if(q.isArray(K))if(q.isNumber(f)){0>f&&(f=K.length+f);if(0>f||f>=K.length)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.OutOfBounds,G);V=q.toNumber(K[f]);K[f]="++"===G.operator?V+1:V-1}else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.ArrayAccessorMustBeNumber,G);else if(K instanceof m){if(!1===q.isString(f))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(f))V=q.toNumber(K.field(f)),K.setField(f,
"++"===G.operator?V+1:V-1);else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FieldNotFound,G);}else if(q.isFeature(K)){if(!1===q.isString(f))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(f))V=q.toNumber(K.field(f)),K.setField(f,"++"===G.operator?V+1:V-1);else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FieldNotFound,G);}else{if(q.isImmutableArray(K))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.Immutable,
G);if(K instanceof ca){if(!1===q.isString(f))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.ModuleAccessorMustBeString,G);if(!0===K.hasGlobal(f))V=q.toNumber(K.global(f)),K.setGlobal(f,"++"===G.operator?V+1:V-1);else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.ModuleExportNotFound,G);}else throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidParameter,G);}var N=!1===G.prefix?V:"++"===G.operator?V+1:V-1}else{K="Identifier"===G.argument.type?G.argument.name.toLowerCase():
"";if(!K)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,G);if(null!=L.localScope&&void 0!==L.localScope[K])V=q.toNumber(L.localScope[K].value),L.localScope[K]={value:"++"===G.operator?V+1:V-1,valueset:!0,node:G},N=!1===G.prefix?V:"++"===G.operator?V+1:V-1;else if(void 0!==L.globalScope[K])V=q.toNumber(L.globalScope[K].value),L.globalScope[K]={value:"++"===G.operator?V+1:V-1,valueset:!0,node:G},N=!1===G.prefix?V:"++"===G.operator?V+1:V-1;else throw new b.ArcadeExecutionError(L,
b.ExecutionErrorCodes.InvalidIdentifier,G);}}return N;case "BreakStatement":return q.breakResult;case "ContinueStatement":return q.continueResult;case "TemplateElement":return G.value?G.value.cooked:"";case "TemplateLiteral":I="";N=0;for(const V of G.quasis)if(I+=V.value?V.value.cooked:"",!1===V.tail){if(G.expressions[N]){var S=q;f=S.toString;var W=t(L,G.expressions[N]),aa=L;r=G;if(q.isFunctionParameter(W))throw new b.ArcadeExecutionError(aa,b.ExecutionErrorCodes.NoFunctionInTemplateLiteral,r);K=
f.call(S,W)}else K="";I+=K;N++}return I;case "ForStatement":null!==G.init&&t(L,G.init);aa={testResult:!0,lastAction:q.voidOperation};do b:{K=L;f=G;W=aa;if(null!==f.test){W.testResult=t(K,f.test);if(!1===W.testResult)break b;if(!0!==W.testResult)throw new b.ArcadeExecutionError(K,b.ExecutionErrorCodes.BooleanConditionRequired,f);}W.lastAction=t(K,f.body);W.lastAction===q.breakResult?W.testResult=!1:W.lastAction instanceof q.ReturnResult?W.testResult=!1:null!==f.update&&t(K,f.update)}while(!0===aa.testResult);
S=aa.lastAction instanceof q.ReturnResult?aa.lastAction:q.voidOperation;return S;case "ForInStatement":return u(L,G);case "WhileStatement":K=!0;var fa=q.voidOperation;K=t(L,G.test);if(!1===K)var ja=q.voidOperation;else{if(!0!==K)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.BooleanConditionRequired,G);for(;!0===K;){fa=t(L,G.body);if(fa===q.breakResult)break;if(fa instanceof q.ReturnResult)break;K=t(L,G.test);if(!0!==K&&!1!==K)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.BooleanConditionRequired,
G);}ja=fa instanceof q.ReturnResult?fa:q.voidOperation}return ja;case "Identifier":return ea(L,G);case "MemberExpression":return g(L,G);case "Literal":return G.value;case "CallExpression":a:try{if("MemberExpression"===G.callee.type){const V=t(L,G.callee.object);if(!(V instanceof ca))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FuncionNotFound,G);const la=!1===G.callee.computed?G.callee.property.name:t(L,G.callee.property);if(!V.hasGlobal(la))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FuncionNotFound,
G);const ua=V.global(la);if(!q.isFunctionParameter(ua))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.CallNonFunction,G);var da=ua.call(L,G)}else{if("Identifier"!==G.callee.type)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FuncionNotFound,G);if(null!=L.localScope&&void 0!==L.localScope[G.callee.name.toLowerCase()]){const V=L.localScope[G.callee.name.toLowerCase()];if(q.isFunctionParameter(V.value)){da=V.value.call(L,G);break a}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.CallNonFunction,
G);}if(void 0!==L.globalScope[G.callee.name.toLowerCase()]){const V=L.globalScope[G.callee.name.toLowerCase()];if(q.isFunctionParameter(V.value)){da=V.value.call(L,G);break a}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.CallNonFunction,G);}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.FuncionNotFound,G);}}catch(V){throw V;}return da;case "UnaryExpression":return J(L,G);case "BinaryExpression":return ia(L,G);case "LogicalExpression":return X(L,G);case "ArrayExpression":try{K=
[];for(f=0;f<G.elements.length;f++){const V=t(L,G.elements[f]);if(q.isFunctionParameter(V))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.NoFunctionInArray,G);V===q.voidOperation?K.push(null):K.push(V)}var pa=K}catch(V){throw V;}return pa;case "ObjectExpression":K={};const Ga=new Map;for(f=0;f<G.properties.length;f++){const V=t(L,G.properties[f]);if(q.isFunctionParameter(V.value))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.NoFunctionInDictionary,G);if(!1===q.isString(V.key))throw new b.ArcadeExecutionError(L,
b.ExecutionErrorCodes.KeyMustBeString,G);let la=V.key.toString();const ua=la.toLowerCase();Ga.has(ua)?la=Ga.get(ua):Ga.set(ua,la);K[la]=V.value===q.voidOperation?null:V.value}const ya=new m(K);ya.immutable=!1;return ya;case "Property":return{key:"Identifier"===G.key.type?G.key.name:t(L,G.key),value:t(L,G.value)};default:throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.Unrecognised,G);}}catch(wa){throw b.ensureArcadeExecutionError(L,G,wa);}}function u(L,G){var K=t(L,G.right);"VariableDeclaration"===
G.left.type&&t(L,G.left);let P=null;var H="";if("VariableDeclaration"===G.left.type){var Q=G.left.declarations[0].id;"Identifier"===Q.type&&(H=Q.name)}else"Identifier"===G.left.type&&(H=G.left.name);if(!H)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,G);H=H.toLowerCase();null!=L.localScope&&void 0!==L.localScope[H]&&(P=L.localScope[H]);null===P&&void 0!==L.globalScope[H]&&(P=L.globalScope[H]);if(null===P)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,
G);if(q.isArray(K)||q.isString(K)){K=K.length;for(H=0;H<K;H++){P.value=H;Q=t(L,G.body);if(Q===q.breakResult)break;if(Q instanceof q.ReturnResult)return Q}return q.voidOperation}if(q.isImmutableArray(K)){for(H=0;H<K.length();H++){P.value=H;Q=t(L,G.body);if(Q===q.breakResult)break;if(Q instanceof q.ReturnResult)return Q}return q.voidOperation}if(K instanceof m||q.isFeature(K))for(K=K.keys(),H=0;H<K.length;H++){P.value=K[H];Q=t(L,G.body);if(Q===q.breakResult)break;if(Q instanceof q.ReturnResult)return Q}else return q.voidOperation}
function E(L,G,K,P,H){switch(G){case "\x3d":return L===q.voidOperation?null:L;case "/\x3d":return q.toNumber(K)/q.toNumber(L);case "*\x3d":return q.toNumber(K)*q.toNumber(L);case "-\x3d":return q.toNumber(K)-q.toNumber(L);case "+\x3d":return q.isString(K)||q.isString(L)?q.toString(K)+q.toString(L):q.toNumber(K)+q.toNumber(L);case "%\x3d":return q.toNumber(K)%q.toNumber(L);default:throw new b.ArcadeExecutionError(H,b.ExecutionErrorCodes.UnsupportedOperator,P);}}function g(L,G){try{const K=t(L,G.object);
if(null===K)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.MemberOfNull,G);if(!1===G.computed){if("Identifier"===G.property.type){if(K instanceof m||q.isFeature(K))return K.field(G.property.name);if(K instanceof h)return k.geometryMember(K,G.property.name,G,L);if(K instanceof ca){if(!K.hasGlobal(G.property.name))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,G);return K.global(G.property.name)}}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidMemberAccessKey,
G);}let P=t(L,G.property);if(K instanceof m||q.isFeature(K)){if(q.isString(P))return K.field(P);throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(K instanceof ca){if(q.isString(P))return K.global(P);throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(K instanceof h){if(q.isString(P))return k.geometryMember(K,P,G,L);throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(q.isArray(K)){if(q.isNumber(P)&&
isFinite(P)&&Math.floor(P)===P){0>P&&(P=K.length+P);if(P>=K.length||0>P)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.OutOfBounds,G);return K[P]}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(q.isString(K)){if(q.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=K.length+P);if(P>=K.length||0>P)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.OutOfBounds,G);return K[P]}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidMemberAccessKey,
G);}if(q.isImmutableArray(K)&&q.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=K.length()+P);if(P>=K.length()||0>P)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.OutOfBounds,G);return K.get(P)}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidMemberAccessKey,G);}catch(K){throw K;}}function J(L,G){try{const K=t(L,G.argument);if(q.isBoolean(K)){if("!"===G.operator)return!K;if("-"===G.operator)return-1*q.toNumber(K);if("+"===G.operator)return 1*q.toNumber(K);if("~"===G.operator)return~q.toNumber(K);
throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.UnsupportedUnaryOperator,G);}if("~"===G.operator)return~q.toNumber(K);if("-"===G.operator)return-1*q.toNumber(K);if("+"===G.operator)return 1*q.toNumber(K);throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.UnsupportedUnaryOperator,G);}catch(K){throw K;}}function ia(L,G){try{const K=[t(L,G.left),t(L,G.right)],P=K[0],H=K[1];switch(G.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return q.binaryOperator(q.toNumber(P),
q.toNumber(H),G.operator);case "\x3d\x3d":return q.equalityTest(P,H);case "!\x3d":return!q.equalityTest(P,H);case "\x3c":return q.greaterThanLessThan(P,H,G.operator);case "\x3e":return q.greaterThanLessThan(P,H,G.operator);case "\x3c\x3d":return q.greaterThanLessThan(P,H,G.operator);case "\x3e\x3d":return q.greaterThanLessThan(P,H,G.operator);case "+":return q.isString(P)||q.isString(H)?q.toString(P)+q.toString(H):q.toNumber(P)+q.toNumber(H);case "-":return q.toNumber(P)-q.toNumber(H);case "*":return q.toNumber(P)*
q.toNumber(H);case "/":return q.toNumber(P)/q.toNumber(H);case "%":return q.toNumber(P)%q.toNumber(H);default:throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.UnsupportedOperator,G);}}catch(K){throw K;}}function X(L,G){try{const K=t(L,G.left);if(q.isBoolean(K))switch(G.operator){case "||":if(!0===K)return K;const P=t(L,G.right);if(q.isBoolean(P))return P;throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.LogicExpressionOrAnd,G);case "\x26\x26":if(!1===K)return K;const H=t(L,G.right);
if(q.isBoolean(H))return H;throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.LogicExpressionOrAnd,G);default:throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.LogicExpressionOrAnd,G);}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,G);}catch(K){throw K;}}function ea(L,G){let K;try{const P=G.name.toLowerCase();if(null!=L.localScope&&void 0!==L.localScope[P]){K=L.localScope[P];if(!0===K.valueset)return K.value;K.value=t(L,K.node);K.valueset=!0;return K.value}if(void 0!==
L.globalScope[P]){K=L.globalScope[P];if(!0===K.valueset)return K.value;K.value=t(L,K.node);K.valueset=!0;return K.value}throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.InvalidIdentifier,G);}catch(P){throw P;}}function na(L,G,K,P){try{const H=t(L,G.arguments[K]);if(q.equalityTest(H,P))return t(L,G.arguments[K+1]);const Q=G.arguments.length-K;return 1===Q?t(L,G.arguments[K]):2===Q?null:3===Q?t(L,G.arguments[K+2]):na(L,G,K+2,P)}catch(H){throw H;}}function xa(L,G,K,P){try{if(!0===P)return t(L,
G.arguments[K+1]);if(3===G.arguments.length-K)return t(L,G.arguments[K+2]);const H=t(L,G.arguments[K+2]);if(!1===q.isBoolean(H))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.BooleanConditionRequired,G.arguments[K+2]);return xa(L,G,K+2,H)}catch(H){throw H;}}function ra(L,G,K,P){try{const H=L.body;if(K.length!==L.params.length)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.WrongNumberOfParameters,P);if(null!=G.localScope)for(let O=0;O<K.length;O++)G.localScope[L.params[O].name.toLowerCase()]=
{value:K[O],valueset:!0,node:null};const Q=t(G,H);if(Q instanceof q.ReturnResult)return Q.value;if(Q===q.breakResult)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.UnexpectedToken,P);if(Q===q.continueResult)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.UnexpectedToken,P);return Q instanceof q.ImplicitResult?Q.value:Q}catch(H){throw H;}}function va(L,G,K){const P=new ta;L||(L={});G||(G={});const H=new m({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});
H.immutable=!1;P.textformatting={value:H,valueset:!0,node:null};for(const Q in G)P[Q]={value:new z.NativeFunction(G[Q]),native:!0,valueset:!0,node:null};for(const Q in L)P[Q]=L[Q]&&"esri.Graphic"===L[Q].declaredClass?{value:A.createFromGraphic(L[Q],K),valueset:!0,node:null}:{value:L[Q],valueset:!0,node:null};return P}function sa(L){console.log(L)}function ka(L){const G={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:d,evaluateIdentifier:ea};for(let K=0;K<L.length;K++)L[K].registerFunctions(G);
for(const K in G.functions)oa[K]={value:new z.NativeFunction(G.functions[K]),valueset:!0,node:null},ta.prototype[K]=oa[K];for(L=0;L<G.signatures.length;L++)x.addFunctionDeclaration(G.signatures[L],"sync")}let U=function(L){function G(P,H){var Q=K.call(this);Q.definition=null;Q.context=null;Q.definition=P;Q.context=H;return Q}F._inherits(G,L);var K=F._createSuper(G);L=G.prototype;L.createFunction=function(P){return(...H)=>{const Q={spatialReference:this.context.spatialReference,console:this.context.console,
timeReference:this.context.timeReference??null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:P.depthCounter.depth+1},globalScope:this.context.globalScope};if(64<Q.depthCounter.depth)throw new b.ArcadeExecutionError(P,b.ExecutionErrorCodes.MaximumCallDepth,null);return ra(this.definition,Q,H,null)}};L.call=function(P,H){return d(P,H,(Q,O,T)=>{Q={spatialReference:P.spatialReference,
globalScope:P.globalScope,depthCounter:{depth:P.depthCounter.depth+1},libraryResolver:P.libraryResolver,exports:P.exports,timeReference:P.timeReference??null,console:P.console,lrucache:P.lrucache,interceptor:P.interceptor,localScope:{}};if(64<Q.depthCounter.depth)throw new b.ArcadeExecutionError(P,b.ExecutionErrorCodes.MaximumCallDepth,H);return ra(this.definition,Q,T,H)})};L.marshalledCall=function(P,H,Q,O){return O(P,H,(T,Z,f)=>{T={spatialReference:P.spatialReference,globalScope:Q.globalScope,depthCounter:{depth:P.depthCounter.depth+
1},libraryResolver:P.libraryResolver,exports:P.exports,console:P.console,timeReference:P.timeReference??null,lrucache:P.lrucache,interceptor:P.interceptor,localScope:{}};f=f.map(r=>!q.isFunctionParameter(r)||r instanceof z.ScopeMarshalledFunction?r:z.wrapModuleScopedResponse(r,P,O));return z.wrapModuleScopedResponse(ra(this.definition,T,f,H),Q,O)})};return F._createClass(G)}(z.ArcadeFunction),ca=function(L){function G(P){return K.call(this,P)}F._inherits(G,L);var K=F._createSuper(G);L=G.prototype;
L.global=function(P){P=this.executingContext.globalScope[P.toLowerCase()];P.valueset||(P.value=t(this.executingContext,P.node),P.valueset=!0);if(q.isFunctionParameter(P.value)&&!(P.value instanceof z.ScopeMarshalledFunction)){const H=new z.ScopeMarshalledFunction;H.fn=P.value;H.parameterEvaluator=d;H.context=this.executingContext;P.value=H}return P.value};L.setGlobal=function(P,H){if(q.isFunctionParameter(H))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[P.toLowerCase()]=
{value:H,valueset:!0,node:null}};L.hasGlobal=function(P){void 0===this.executingContext.exports[P]&&(P=P.toLowerCase());return void 0!==this.executingContext.exports[P]?!0:!1};L.loadModule=function(P){let H=P.spatialReference;if(null===H||void 0===H)H=new D({wkid:102100});this.moduleScope=va({},P.customfunctions,P.timeReference);this.executingContext={spatialReference:H,globalScope:this.moduleScope,localScope:null,libraryResolver:new p.ArcadeModuleLoader(P.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),
exports:{},console:P.console??sa,timeReference:P.timeReference??null,lrucache:P.lrucache,interceptor:P.interceptor,depthCounter:{depth:1}};t(this.executingContext,this.source.syntax)};return F._createClass(G)}(C.ArcadeModule);const oa={};l.registerFunctions(oa,d);n.registerFunctions(oa,d);a.registerFunctions(oa,d);k.registerFunctions(oa,d);e.registerFunctions(oa,d);c.registerFunctions(oa,d);oa.iif=function(L,G){try{q.pcCheck(null===G.arguments?[]:G.arguments,3,3,L,G);const K=t(L,G.arguments[0]);if(!1===
q.isBoolean(K))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.BooleanConditionRequired,G);return!0===K?t(L,G.arguments[1]):t(L,G.arguments[2])}catch(K){throw K;}};oa.decode=function(L,G){try{if(2>G.arguments.length)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.WrongNumberOfParameters,G);if(2===G.arguments.length)return t(L,G.arguments[1]);if(0===(G.arguments.length-1)%2)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.WrongNumberOfParameters,G);const K=t(L,G.arguments[0]);
return na(L,G,1,K)}catch(K){throw K;}};oa.when=function(L,G){try{if(3>G.arguments.length)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.WrongNumberOfParameters,G);if(0===G.arguments.length%2)throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.WrongNumberOfParameters,G);const K=t(L,G.arguments[0]);if(!1===q.isBoolean(K))throw new b.ArcadeExecutionError(L,b.ExecutionErrorCodes.BooleanConditionRequired,G.arguments[0]);return xa(L,G,0,K)}catch(K){throw K;}};for(const L in oa)oa[L]={value:new z.NativeFunction(oa[L]),
valueset:!0,node:null};const ta=function(){};ta.prototype=oa;ta.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ta.prototype.pi={value:Math.PI,valueset:!0,node:null};C={fixSpatialReference:q.fixSpatialReference,parseArguments:B,standardFunction:d};ka([w.ArrayFunctions]);v.executeScript=function(L,G){let K=G.spatialReference;if(null===K||void 0===K)K=new D({wkid:102100});let P=null;L.usesModules&&(P=new p.ArcadeModuleLoader(new Map,L.loadedModules));const H=va(G.vars,G.customfunctions,
G.timeReference);G={spatialReference:K,globalScope:H,localScope:null,exports:{},libraryResolver:P,console:G.console??sa,timeReference:G.timeReference??null,lrucache:G.lrucache,interceptor:G.interceptor,depthCounter:{depth:1}};L=t(G,L);L instanceof q.ReturnResult&&(L=L.value);L instanceof q.ImplicitResult&&(L=L.value);L===q.voidOperation&&(L=null);if(L===q.breakResult)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.IllegalResult,null);if(L===q.continueResult)throw new b.ArcadeExecutionError(G,
b.ExecutionErrorCodes.IllegalResult,null);if(q.isFunctionParameter(L))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.IllegalResult,null);return L};v.extend=ka;v.functionHelper=C;Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../geometry ../chunks/arcade ../arcade/Dictionary ../arcade/Feature ../chunks/languageUtils ../core/lang ../renderers/visualVariables/support/sizeVariableUtils ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/Multipoint ../geometry/Extent".split(" "),function(v,F,C,p,m,b,A,z,q,x,w,l,k){function c(d){return d.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}function a(d){if(!d)return null;try{return C.parseScript(d)}catch(t){}return null}function e(d,t){if(!d)return!1;
if("string"===typeof d)return t(d);if("simple"===d.type||"class-breaks"===d.type||"unique-value"===d.type||"dot-density"===d.type||"dictionary"===d.type||"pie-chart"===d.type){if("dot-density"===d.type){var u=d.attributes?.some(E=>t(E.valueExpression));if(u)return u}u=d.visualVariables;u=!!u&&u.some(E=>{let g=t(E.valueExpression);"size"===E.type&&(z.isSizeVariable(E.minSize)&&(g=g||t(E.minSize.valueExpression)),z.isSizeVariable(E.maxSize)&&(g=g||t(E.maxSize.valueExpression)));return g});return"valueExpression"in
d&&t(d.valueExpression)?!0:u}return"esri.layers.support.LabelClass"===d.declaredClass?(d=d.labelExpressionInfo&&d.labelExpressionInfo.expression,!(!d||!t(d))||!1):"esri.PopupTemplate"===d.declaredClass?!!d.expressionInfos&&d.expressionInfos.some(E=>t(E.expression))||Array.isArray(d.content)&&d.content.some(E=>"expression"===E.type&&t(E.expressionInfo?.expression)):!1}function n(d){d=a(d);return!!d&&C.scriptTouchesGeometry(d)}function h(d){d=a(d);return!!d&&C.scriptUsesGeometryEngine(d)}const D=/^\$(feature|aggregatedFeatures)\./i,
B={vars:{$feature:"any",$view:"any"},spatialReference:null};v.arcade=C.arcade;v.Dictionary=p;v.arcadeFeature=m;v.convertFeatureLayerToFeatureSet=function({layer:d,spatialReference:t,outFields:u,returnGeometry:E,lrucache:g,interceptor:J}){if(null===d)return null;const ia=C.featureSetUtils();return ia?ia.constructFeatureSet(d,t,u,E??!0,g,J):null};v.convertJsonToArcade=function(d,t){return p.convertJsonToArcade(d,t)};v.convertMapToFeatureSetCollection=function(d){if(null===d?.map)return null;const t=
C.featureSetUtils();return t?t.createFeatureSetCollectionFromMap(d.map,d.spatialReference,d.lrucache,d.interceptor):null};v.convertServiceUrlToWorkspace=function({url:d,spatialReference:t,lrucache:u,interceptor:E}){const g=C.featureSetUtils();return g?g.createFeatureSetCollectionFromService(d,t,u,E):null};v.createExecContext=function(d,t){return{vars:{$feature:null==d?new m:m.createFromGraphic(d,null),$view:t&&t.view},spatialReference:t&&t.sr}};v.createFeature=function(d,t,u){return m.createFromGraphicLikeObject(t,
d,u,null)};v.createFunction=function(d,t){d="string"===typeof d?a(d):d;if(!d)return null;try{return t=t||A.clone(B),C.compileScript(d,t)}catch(u){}return null};v.createSyntaxTree=a;v.dependsOnView=function(d){return C.referencesMember(d,"$view")};v.enableFeatureSetOperations=function(){return C.enableFeatureSetSupport()};v.enableGeometryOperations=function(){return C.enableGeometrySupport()};v.evalSyntaxTree=function(d,t){let u;try{u=C.executeScript(d,t)}catch(E){u=null}return u};v.executeAsyncFunction=
function(d,t){try{return d?d(t):Promise.resolve(null)}catch(u){return Promise.resolve(null)}};v.executeFunction=function(d,t){let u;try{u=d?d(t):null}catch(E){u=null}return u};v.extractFieldNames=function(d,t){if(!d)return[];d="string"===typeof d?a(d):d;if(!d)return[];let u=[];C.extractExpectedFieldLiterals(d).forEach(g=>{D.test(g)&&(g=g.replace(D,""),u.push(g))});const E=u.filter(g=>g.includes("*"));u=u.filter(g=>!E.includes(g));t&&E.forEach(g=>{const J=new RegExp(`^${g.split(/\*+/).map(c).join(".*")}$`,
"i");t.forEach(ia=>J.test(ia)?u.push(ia):null)});return[...(new Set(u.sort()))]};v.getArcadeType=function(d){return null==d?null:b.isArray(d)||b.isImmutableArray(d)?"array":b.isDate(d)?"date":b.isString(d)?"text":b.isBoolean(d)?"boolean":b.isNumber(d)?"number":d instanceof p?"dictionary":b.isFeature(d)?"feature":d instanceof q?"point":d instanceof x?"polygon":d instanceof w?"polyline":d instanceof l?"multipoint":d instanceof k?"extent":b.isFeatureSet(d)?"featureSet":b.isFeatureSetCollection(d)?"featureSetCollection":
null};v.getViewInfo=function(d){if(d&&(null!=d.spatialReference||null!=d.scale&&null!=d.viewingMode))return{view:d.viewingMode&&null!=d.scale?new p({viewingMode:d.viewingMode,scale:d.scale}):null,sr:d.spatialReference}};v.hasGeometryFunctions=function(d){return e(d,n)};v.hasGeometryOperations=function(d){return e(d,h)};v.hasVariable=function(d,t){return d?C.referencesMember(d,t):!1};v.loadScriptDependencies=function(d,t,u=[]){return C.loadScriptDependencies(d,t,u)};v.updateExecContext=function(d,
t){null!=d.vars&&(d.vars.$feature=t)};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});