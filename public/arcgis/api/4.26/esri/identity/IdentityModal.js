// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/handleUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/jsxFactory ../widgets/support/decorators/messageBundle".split(" "),function(W,F,ra,sa,G,X,aa,La,ta,A,ua,B,va){function ba(t,q){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var a=
Object.getOwnPropertySymbols(t);q&&(a=a.filter(function(b){return Object.getOwnPropertyDescriptor(t,b).enumerable}));c.push.apply(c,a)}return c}function ca(t){for(var q=1;q<arguments.length;q++){var c=null!=arguments[q]?arguments[q]:{};q%2?ba(Object(c),!0).forEach(function(a){var b=c[a];a:if("object"===typeof a&&null!==a){var f=a[Symbol.toPrimitive];if(void 0!==f){a=f.call(a,"string");if("object"!==typeof a)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}a=
"symbol"===typeof a?a:String(a);a in t?Object.defineProperty(t,a,{value:b,enumerable:!0,configurable:!0,writable:!0}):t[a]=b}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):ba(Object(c)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(c,a))})}return t}X='input:not([inert]) select:not([inert]) textarea:not([inert]) a[href]:not([inert]) button:not([inert]) [tabindex]:not(slot):not([inert]) audio[controls]:not([inert]) video[controls]:not([inert]) [contenteditable]:not([contenteditable\x3d"false"]):not([inert]) details\x3esummary:first-of-type:not([inert]) details:not([inert])'.split(" ");
var O=X.join(","),D=(aa="undefined"===typeof Element)?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,P=!aa&&Element.prototype.getRootNode?function(t){var q;return null===t||void 0===t?void 0:null===(q=t.getRootNode)||void 0===q?void 0:q.call(t)}:function(t){return null===t||void 0===t?void 0:t.ownerDocument},Q=function a(q,c){var b;void 0===c&&(c=!0);var f=null===q||void 0===q?void 0:null===(b=q.getAttribute)||void 0===b?void 0:
b.call(q,"inert");return""===f||"true"===f||c&&q&&a(q.parentNode)},da=function(q,c,a){if(Q(q))return[];var b=Array.prototype.slice.apply(q.querySelectorAll(O));c&&D.call(q,O)&&b.unshift(q);return b=b.filter(a)},ea=function f(c,a,b){for(var h=[],g=Array.from(c);g.length;){var k=g.shift();if(!Q(k,!1))if("SLOT"===k.tagName){var l=k.assignedElements();l=f(l.length?l:k.children,!0,b);b.flatten?h.push.apply(h,l):h.push({scopeParent:k,candidates:l})}else{D.call(k,O)&&b.filter(k)&&(a||!c.includes(k))&&h.push(k);
l=k.shadowRoot||"function"===typeof b.getShadowRoot&&b.getShadowRoot(k);var n=!Q(l,!1)&&(!b.shadowRootFilter||b.shadowRootFilter(k));l&&n?(l=f(!0===l?k.children:l.children,!0,b),b.flatten?h.push.apply(h,l):h.push({scopeParent:k,candidates:l})):g.unshift.apply(g,k.children)}}return h},fa=function(c,a){if(0>c.tabIndex){if(!(a=a||/^(AUDIO|VIDEO|DETAILS)$/.test(c.tagName))){var b;a=null===c||void 0===c?void 0:null===(b=c.getAttribute)||void 0===b?void 0:b.call(c,"contenteditable");a=""===a||"true"===
a}if(a&&isNaN(parseInt(c.getAttribute("tabindex"),10)))return 0}return c.tabIndex},wa=function(c,a){return c.tabIndex===a.tabIndex?c.documentOrder-a.documentOrder:c.tabIndex-a.tabIndex},xa=function(c){return"DETAILS"===c.tagName&&Array.prototype.slice.apply(c.children).some(function(a){return"SUMMARY"===a.tagName})},ya=function(c,a){for(var b=0;b<c.length;b++)if(c[b].checked&&c[b].form===a)return c[b]},za=function(c){if(!c.name)return!0;var a=c.form||P(c),b=function(h){return a.querySelectorAll('input[type\x3d"radio"][name\x3d"'+
h+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var f=b(window.CSS.escape(c.name));else try{f=b(c.name)}catch(h){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",h.message),!1}b=ya(f,c.form);return!b||b===c},ha=function(c){c=c.getBoundingClientRect();var a=c.height;return 0===c.width&&0===a},Aa=function(c,a){var b=a.displayCheck;
a=a.getShadowRoot;if("hidden"===getComputedStyle(c).visibility)return!0;var f=D.call(c,"details\x3esummary:first-of-type")?c.parentElement:c;if(D.call(f,"details:not([open]) *"))return!0;if(!b||"full"===b||"legacy-full"===b){if("function"===typeof a){for(f=c;c;){var h=c.parentElement,g=P(c);if(h&&!h.shadowRoot&&!0===a(h))return ha(c);c=c.assignedSlot?c.assignedSlot:h||g===c.ownerDocument?h:g.host}c=f}a=c;var k;f=a&&P(a);h=null===(k=f)||void 0===k?void 0:k.host;k=!1;if(f&&f!==a){var l,n,u;for(k=!!(null!==
(l=h)&&void 0!==l&&null!==(n=l.ownerDocument)&&void 0!==n&&n.contains(h)||null!==a&&void 0!==a&&null!==(u=a.ownerDocument)&&void 0!==u&&u.contains(a));!k&&h;){var x,v,w;f=P(h);h=null===(x=f)||void 0===x?void 0:x.host;k=!(null===(v=h)||void 0===v||null===(w=v.ownerDocument)||void 0===w||!w.contains(h))}}if(k)return!c.getClientRects().length;if("legacy-full"!==b)return!0}else if("non-zero-area"===b)return ha(c);return!1},R=function(c,a){var b;(b=a.disabled||Q(a))||(b="INPUT"===a.tagName&&"hidden"===
a.type);if(!(c=b||Aa(a,c)||xa(a)))a:{if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(a.tagName))for(c=a.parentElement;c;){if("FIELDSET"===c.tagName&&c.disabled){for(b=0;b<c.children.length;b++){var f=c.children.item(b);if("LEGEND"===f.tagName){c=D.call(c,"fieldset[disabled] *")?!0:!f.contains(a);break a}}c=!0;break a}c=c.parentElement}c=!1}return c?!1:!0},Y=function(c,a){return"INPUT"===a.tagName&&"radio"===a.type&&!za(a)||0>fa(a)||!R(c,a)?!1:!0},Ba=function(c){c=parseInt(c.getAttribute("tabindex"),10);
return isNaN(c)||0<=c?!0:!1},Ca=function b(a){var f=[],h=[];a.forEach(function(g,k){var l=!!g.scopeParent,n=l?g.scopeParent:g,u=fa(n,l),x=l?b(g.candidates):n;0===u?l?f.push.apply(f,x):f.push(n):h.push({documentOrder:k,tabIndex:u,item:g,isScope:l,content:x})});return h.sort(wa).reduce(function(g,k){k.isScope?g.push.apply(g,k.content):g.push(k.content);return g},[]).concat(f)},Da=function(a,b){b=b||{};a=b.getShadowRoot?ea([a],b.includeContainer,{filter:Y.bind(null,b),flatten:!1,getShadowRoot:b.getShadowRoot,
shadowRootFilter:Ba}):da(a,b.includeContainer,Y.bind(null,b));return Ca(a)},Ea=function(a,b){b=b||{};return b.getShadowRoot?ea([a],b.includeContainer,{filter:R.bind(null,b),flatten:!0,getShadowRoot:b.getShadowRoot}):da(a,b.includeContainer,R.bind(null,b))},S=function(a,b){b=b||{};if(!a)throw Error("No node provided");return!1===D.call(a,O)?!1:Y(b,a)},Fa=X.concat("iframe").join(","),ia=function(a,b){b=b||{};if(!a)throw Error("No node provided");return!1===D.call(a,Fa)?!1:R(b,a)},ja={activateTrap:function(a,
b){if(0<a.length){var f=a[a.length-1];f!==b&&f.pause()}f=a.indexOf(b);-1!==f&&a.splice(f,1);a.push(b)},deactivateTrap:function(a,b){b=a.indexOf(b);-1!==b&&a.splice(b,1);0<a.length&&a[a.length-1].unpause()}},H=function(a){return"Tab"===a.key||9===a.keyCode},Ga=function(a){return H(a)&&!a.shiftKey},Ha=function(a){return H(a)&&a.shiftKey},ka=function(a,b){var f=-1;a.every(function(h,g){return b(h)?(f=g,!1):!0});return f},I=function(a){for(var b=arguments.length,f=Array(1<b?b-1:0),h=1;h<b;h++)f[h-1]=
arguments[h];return"function"===typeof a?a.apply(void 0,f):a},T=function(a){return a.target.shadowRoot&&"function"===typeof a.composedPath?a.composedPath()[0]:a.target},Ia=[],Ka=function(a,b){var f=(null===b||void 0===b?void 0:b.document)||document,h=(null===b||void 0===b?void 0:b.trapStack)||Ia,g=ca({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Ga,isKeyBackward:Ha},b),k=[],l=[],n=[],u=null,x=null,v=!1,w=!1,J=void 0,E=function(p,d,e){return p&&void 0!==p[d]?p[d]:
g[e||d]},K=function(p){return l.findIndex(function(d){var e=d.tabbableNodes;return d.container.contains(p)||e.find(function(m){return m===p})})},L=function(p){var d=g[p];if("function"===typeof d){for(var e=arguments.length,m=Array(1<e?e-1:0),r=1;r<e;r++)m[r-1]=arguments[r];d=d.apply(void 0,m)}!0===d&&(d=void 0);if(!d){if(void 0===d||!1===d)return d;throw Error("`".concat(p,"` was specified but was not a node, or did not return a node"));}e=d;if("string"===typeof d&&(e=f.querySelector(d),!e))throw Error("`".concat(p,
"` as selector refers to no known node"));return e},U=function(){var p=L("initialFocus");if(!1===p)return!1;void 0===p&&(p=0<=K(f.activeElement)?f.activeElement:(p=n[0])&&p.firstTabbableNode||L("fallbackFocus"));if(!p)throw Error("Your focus-trap needs to have at least one focusable element");return p},M=function(){l=k.map(function(p){var d=Da(p,g.tabbableOptions),e=Ea(p,g.tabbableOptions);return{container:p,tabbableNodes:d,focusableNodes:e,firstTabbableNode:0<d.length?d[0]:null,lastTabbableNode:0<
d.length?d[d.length-1]:null,nextTabbableNode:function(m){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,z=e.findIndex(function(y){return y===m});if(!(0>z))return r?e.slice(z+1).find(function(y){return S(y,g.tabbableOptions)}):e.slice(0,z).reverse().find(function(y){return S(y,g.tabbableOptions)})}}});n=l.filter(function(p){return 0<p.tabbableNodes.length});if(0>=n.length&&!L("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");
},N=function e(d){!1!==d&&d!==f.activeElement&&(d&&d.focus?(d.focus({preventScroll:!!g.preventScroll}),x=d,d.tagName&&"input"===d.tagName.toLowerCase()&&"function"===typeof d.select&&d.select()):e(U()))},la=function(d){var e=L("setReturnFocus",d);return e?e:!1===e?!1:d},V=function(d){var e=T(d);0<=K(e)||(I(g.clickOutsideDeactivates,d)?C.deactivate({returnFocus:g.returnFocusOnDeactivate}):I(g.allowOutsideClick,d)||d.preventDefault())},ma=function(d){var e=T(d),m=0<=K(e);m||e instanceof Document?m&&
(x=e):(d.stopImmediatePropagation(),N(x||U()))},Ja=function(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,m=T(d);M();var r=null;if(0<n.length){var z=K(m),y=0<=z?l[z]:void 0;0>z?r=e?n[n.length-1].lastTabbableNode:n[0].firstTabbableNode:e?(e=ka(n,function(Z){return m===Z.firstTabbableNode}),0>e&&(y.container===m||ia(m,g.tabbableOptions)&&!S(m,g.tabbableOptions)&&!y.nextTabbableNode(m,!1))&&(e=z),0<=e?r=n[0===e?n.length-1:e-1].lastTabbableNode:H(d)||(r=y.nextTabbableNode(m,!1))):
(e=ka(n,function(Z){return m===Z.lastTabbableNode}),0>e&&(y.container===m||ia(m,g.tabbableOptions)&&!S(m,g.tabbableOptions)&&!y.nextTabbableNode(m))&&(e=z),0<=e?r=n[e===n.length-1?0:e+1].firstTabbableNode:H(d)||(r=y.nextTabbableNode(m)))}else r=L("fallbackFocus");r&&(H(d)&&d.preventDefault(),N(r))},na=function(d){"Escape"!==d.key&&"Esc"!==d.key&&27!==d.keyCode||!1===I(g.escapeDeactivates,d)?(g.isKeyForward(d)||g.isKeyBackward(d))&&Ja(d,g.isKeyBackward(d)):(d.preventDefault(),C.deactivate())},oa=function(d){var e=
T(d);0<=K(e)||I(g.clickOutsideDeactivates,d)||I(g.allowOutsideClick,d)||(d.preventDefault(),d.stopImmediatePropagation())},pa=function(){if(v)return ja.activateTrap(h,C),J=g.delayInitialFocus?setTimeout(function(){N(U())},0):N(U()),f.addEventListener("focusin",ma,!0),f.addEventListener("mousedown",V,{capture:!0,passive:!1}),f.addEventListener("touchstart",V,{capture:!0,passive:!1}),f.addEventListener("click",oa,{capture:!0,passive:!1}),f.addEventListener("keydown",na,{capture:!0,passive:!1}),C},qa=
function(){if(v)return f.removeEventListener("focusin",ma,!0),f.removeEventListener("mousedown",V,!0),f.removeEventListener("touchstart",V,!0),f.removeEventListener("click",oa,!0),f.removeEventListener("keydown",na,!0),C};var C={get active(){return v},get paused(){return w},activate:function(d){if(v)return this;var e=E(d,"onActivate"),m=E(d,"onPostActivate"),r=E(d,"checkCanFocusTrap");r||M();v=!0;w=!1;u=f.activeElement;e&&e();d=function(){r&&M();pa();m&&m()};if(r)return r(k.concat()).then(d,d),this;
d();return this},deactivate:function(d){if(!v)return this;var e=ca({onDeactivate:g.onDeactivate,onPostDeactivate:g.onPostDeactivate,checkCanReturnFocus:g.checkCanReturnFocus},d);clearTimeout(J);J=void 0;qa();w=v=!1;ja.deactivateTrap(h,C);var m=E(e,"onDeactivate"),r=E(e,"onPostDeactivate");d=E(e,"checkCanReturnFocus");var z=E(e,"returnFocus","returnFocusOnDeactivate");m&&m();e=function(){setTimeout(function(){z&&N(la(u));r&&r()},0)};if(z&&d)return d(la(u)).then(e,e),this;e();return this},pause:function(){if(w||
!v)return this;w=!0;qa();return this},unpause:function(){if(!w||!v)return this;w=!1;M();pa();return this},updateContainerElements:function(d){k=[].concat(d).filter(Boolean).map(function(e){return"string"===typeof e?f.querySelector(e):e});v&&M();return this}};C.updateContainerElements(a);return C};A=function(a){function b(h,g){var k=f.call(this,h,g);k.container=document.createElement("div");k.content=null;k.open=!1;k._focusTrap=null;k._close=()=>{k.open=!1};document.body.appendChild(k.container);k.addHandles(sa.watch(()=>
k.open,()=>k._toggleFocusTrap()));return k}W._inherits(b,a);var f=W._createSuper(b);a=b.prototype;a.destroy=function(){this._destroyFocusTrap()};a.render=function(){var h=this.id;const {open:g,content:k,title:l,messages:n}=this;var u=g&&!!k;const x={["esri-identity-modal--open"]:u,["esri-identity-modal--closed"]:!u},v=B.tsx("button",{class:"esri-identity-modal__close-button","aria-label":n.close,title:n.close,bind:this,onclick:this._close,type:"button"},B.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),
w=`${h}_title`;h=`${h}_content`;const J=l?B.tsx("h1",{id:w,class:"esri-identity-modal__title"},l):null;u=u?B.tsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":w,"aria-describedby":h,afterCreate:this._createFocusTrap},v,J,this._renderContent(h)):null;return B.tsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",x)},u)};a._destroyFocusTrap=function(){this._focusTrap?.deactivate({onDeactivate:()=>{}});this._focusTrap=null};a._toggleFocusTrap=function(){const {_focusTrap:h,
open:g}=this;h&&(g?h.activate():h.deactivate())};a._createFocusTrap=function(h){this._destroyFocusTrap();const g=requestAnimationFrame(()=>{this._focusTrap=Ka(h,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.addHandles(ra.makeHandle(()=>cancelAnimationFrame(g)))};a._renderContent=function(h){const g=this.content;return"string"===typeof g?B.tsx("div",{class:"esri-identity-modal__content",id:h,innerHTML:g}):ua.isWidget(g)?B.tsx("div",{class:"esri-identity-modal__content",
id:h},g.render()):g instanceof HTMLElement?B.tsx("div",{class:"esri-identity-modal__content",id:h,bind:g,afterCreate:this._attachToNode}):null};a._attachToNode=function(h){h.appendChild(this)};W._createClass(b,[{key:"title",get:function(){return this.messages?.auth.signIn}}]);return b}(A);F.__decorate([G.property({readOnly:!0})],A.prototype,"container",void 0);F.__decorate([G.property()],A.prototype,"content",void 0);F.__decorate([G.property()],A.prototype,"open",void 0);F.__decorate([G.property(),
va.messageBundle("esri/t9n/common")],A.prototype,"messages",void 0);F.__decorate([G.property()],A.prototype,"title",null);return A=F.__decorate([ta.subclass("esri.identity.IdentityModal")],A)});