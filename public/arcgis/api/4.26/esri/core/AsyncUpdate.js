// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Logger ./accessorSupport/tracking ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/tracking/SimpleTrackingTarget".split(" "),function(k,h,l,r,t,u,n,p,v){function w(b,d){const e=()=>{if(!g||a)return d();g.clear();a=!0;const c=u.runTracked(g,d);a=!1;return c};let g=new v.SimpleTrackingTarget(()=>{g&&!a&&b(e)}),a=!1;b(e);return{remove:()=>{g&&(g.destroy(),g=null)}}}const q=
b=>{b=function(d){function e(){var a=g.apply(this,arguments);a._numUpdating=0;a._asyncUpdateState=new Map;return a}h._inherits(e,d);var g=h._createSuper(e);d=e.prototype;d.autoUpdateAsync=function(a,c){return w(m=>this._updateAsync(a,m),c)};d._updateAsync=async function(a,c){if(!this._startAsyncUpdate(a)){try{const m=await c();this._set(a,m)}catch(m){t.getLogger(this.declaredClass).warn(`Async update of "${String(a)}" failed. Async update functions should not throw exceptions.`)}this._endAsyncUpdate(a)&&
this._updateAsync(a,c)}};d._startAsyncUpdate=function(a){const c=this._asyncUpdateState.get(a)??f.None;if(c&f.Updating)return this._asyncUpdateState.set(a,c|f.Invalidated),!0;++this._numUpdating;this._asyncUpdateState.set(a,c|f.Updating);return!1};d._endAsyncUpdate=function(a){--this._numUpdating;const c=(this._asyncUpdateState.get(a)??f.None)&~f.Updating;if(c&f.Invalidated)return this._asyncUpdateState.set(a,c&~f.Invalidated),!0;this._asyncUpdateState.set(a,c);return!1};h._createClass(e,[{key:"updating",
get:function(){return 0<this._numUpdating}}]);return e}(b);l.__decorate([n.property({readOnly:!0})],b.prototype,"updating",null);l.__decorate([n.property()],b.prototype,"_numUpdating",void 0);return b=l.__decorate([p.subclass("esri.core.AsyncUpdate")],b)};var f;(function(b){b[b.None=0]="None";b[b.Updating=1]="Updating";b[b.Invalidated=2]="Invalidated"})(f||(f={}));k.AsyncUpdate=function(b){function d(){return e.apply(this,arguments)}h._inherits(d,b);var e=h._createSuper(d);return h._createClass(d)}(q(r));
k.AsyncUpdate=l.__decorate([p.subclass("esri.core.AsyncUpdate")],k.AsyncUpdate);k.AsyncUpdateMixin=q;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});