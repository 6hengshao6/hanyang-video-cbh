// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(u){function D(A){let L=0;for(let F=0;F<A.length;F++)L+=A[F];return L/A.length}function M(A){const L=D(A),F=A.length;let H=0;for(const h of A)H+=(h-L)**2;return 1<F?H/(F-1):0}const S={min:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:Math.min.apply(Math,A[0])},max:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:Math.max.apply(Math,A[0])},avg:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:D(A[0])},
sum:{minParams:1,maxParams:1,evaluate:A=>{if(null==A[0])A=null;else{A=A[0];let L=0;for(let F=0;F<A.length;F++)L+=A[F];A=L}return A}},stddev:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:Math.sqrt(M(A[0]))},count:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:A[0].length},var:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:M(A[0])}};u.aggregateFunction=function(A,L){const F=S[A.toLowerCase()];if(null==F)throw Error("Function Not Recognised");if(L.length<F.minParams||L.length>F.maxParams)throw Error(`Invalid Parameter count for call to ${A.toUpperCase()}`);
return F.evaluate(L)};u.isAggregate=function(A,L){A=S[A.toLowerCase()];return null!=A&&L>=A.minParams&&L<=A.maxParams};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(u,D,M,S,A){function L(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function F(k,g){if(k instanceof Date)return g?
L(k):k;if("string"===typeof k||k instanceof String)if(k=A.DateTime.fromSQL(k),k.isValid)return g?L(k.toJSDate()):k.toJSDate();throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);}let H=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(g){if(null!==g.precision||null!==g.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(g,v){v.includes(".")?
(v=v.split("."),g.second=parseFloat(v[0]),g.millis=parseInt(v[1],10)):g.second=parseFloat(v)};k.createFromMilliseconds=function(g){const v=new k;v.second=g/1E3;return v};k.createFromValueAndQualifer=function(g,v,w){let B=null;const q=new k;q.op="-"===w?"-":"+";if("interval-period"===v.type){k._fixDefaults(v);w=RegExp("^[0-9]{1,}$");if("year"===v.period||"month"===v.period)throw Error("Year-Month Intervals not supported");if("second"===v.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(g))k._parseSecondsComponent(q,
g);else throw Error("Illegal Interval");else if(w.test(g))q[v.period]=parseFloat(g);else throw Error("Illegal Interval");}else{k._fixDefaults(v.start);k._fixDefaults(v.end);if("year"===v.start.period||"month"===v.start.period)throw Error("Year-Month Intervals not supported");if("year"===v.end.period||"month"===v.end.period)throw Error("Year-Month Intervals not supported");switch(v.start.period){case "day":switch(v.end.period){case "hour":B=RegExp("^[0-9]{1,} [0-9]{1,}$");if(B.test(g))q[v.start.period]=
parseFloat(g.split(" ")[0]),q[v.end.period]=parseFloat(g.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":B=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(B.test(g))q[v.start.period]=parseFloat(g.split(" ")[0]),g=g.split(" ")[1].split(":"),q.hour=parseFloat(g[0]),q.minute=parseFloat(g[1]);else throw Error("Illegal Interval");break;case "second":B=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(B.test(g))q[v.start.period]=parseFloat(g.split(" ")[0]),
g=g.split(" ")[1].split(":"),q.hour=parseFloat(g[0]),q.minute=parseFloat(g[1]),k._parseSecondsComponent(q,g[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(v.end.period){case "minute":B=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(B.test(g))q.hour=parseFloat(g.split(":")[0]),q.minute=parseFloat(g.split(":")[1]);else throw Error("Illegal Interval");break;case "second":B=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(B.test(g))g=
g.split(":"),q.hour=parseFloat(g[0]),q.minute=parseFloat(g[1]),k._parseSecondsComponent(q,g[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(v.end.period){case "second":B=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(B.test(g))g=g.split(":"),q.minute=parseFloat(g[0]),k._parseSecondsComponent(q,g[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");
}}return q};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return D._createClass(k)}();const h={extract:{minParams:2,maxParams:2,evaluate:([k,g])=>{if(null==g)return null;if(g instanceof Date)switch(k.toUpperCase()){case "SECOND":return g.getSeconds();case "MINUTE":return g.getMinutes();case "HOUR":return g.getHours();case "DAY":return g.getDate();case "MONTH":return g.getMonth()+
1;case "YEAR":return g.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [g,v]=k;return null==g||null==v?null:g.toString().substring(v-1)}if(3===k.length){const [g,v,w]=k;return null==g||null==v||null==w?null:0>=w?"":g.toString().substring(v-1,v+w-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,g])=>null==k||null==g?null:g.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var g=3===k.length,v=g?
k[1]:" ";g=g?k[2]:k[1];if(null==v||null==g)return null;v=`(${S.escapeRegExpString(v)})`;switch(k[0]){case "BOTH":return g.replace(new RegExp(`^${v}*|${v}*$`,"g"),"");case "LEADING":return g.replace(new RegExp(`^${v}*`,"g"),"");case "TRAILING":return g.replace(new RegExp(`${v}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},
acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const g=k[0];k=2===k.length?10**k[1]:1;return null==g?null:Math.round(g*
k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let g="";for(let v=0;v<k.length;v++){if(null==k[v])return null;g+=k[v].toString()}return g}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const g of k)if(null!==g)return g;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const g=k[0];k=k[1];return(g instanceof Date?g.valueOf():
g)===(k instanceof Date?k.valueOf():k)?null:g}},cast:{minParams:2,maxParams:2,evaluate:k=>{var g=k[0];k=k[1];if(null===g)return null;switch(k.type){case "integer":g=parseInt(g,10);if(isNaN(g))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return g;case "smallint":g=parseInt(g,10);if(isNaN(g))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);if(32767<g||-32767>g)throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return g;case "float":case "real":g=parseFloat(g);if(isNaN(g))throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);
return g;case "date":return F(g,!0);case "timestamp":return F(g,!1);case "varchar":g=g.toString();if(g.length>k.size)throw new M.SqlError(M.SqlErrorCodes.CannotCastValue);return g;default:throw new M.SqlError(M.SqlErrorCodes.InvalidDataType);}}}};u.SqlInterval=H;u.evaluateFunction=function(k,g){const v=h[k.toLowerCase()];if(null==v)throw Error("Function Not Recognised");if(g.length<v.minParams||g.length>v.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return v.evaluate(g)};
u.isStandardized=function(k,g){k=h[k.toLowerCase()];return null!=k&&g>=k.minParams&&g<=k.maxParams};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(u,D,M){u.SqlErrorCodes=void 0;(function(H){H.InvalidFunctionParameters="InvalidFunctionParameters";H.UnsupportedSqlFunction="UnsupportedSqlFunction";H.UnsupportedOperator="UnsupportedOperator";
H.UnsupportedSyntax="UnsupportedSyntax";H.UnsupportedIsRhs="UnsupportedIsRhs";H.UnsupportedIsLhs="UnsupportedIsLhs";H.InvalidDataType="InvalidDataType";H.CannotCastValue="CannotCastValue";H.MissingStatisticParameters="MissingStatisticParameters"})(u.SqlErrorCodes||(u.SqlErrorCodes={}));const S={[u.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[u.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[u.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",
[u.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[u.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[u.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[u.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[u.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[u.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let A=function(H){function h(g,v){g=k.call(this,M.doSubstitutions(S[g],
v));g.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(D._assertThisInitialized(g),h);return g}D._inherits(h,H);var k=D._createSuper(h);return D._createClass(h)}(D._wrapNativeSuper(Error));u.FeatureSetErrorCodes=void 0;(function(H){H.NeverReach="NeverReach";H.NotImplemented="NotImplemented";H.Cancelled="Cancelled";H.InvalidStatResponse="InvalidStatResponse";H.InvalidRequest="InvalidRequest";H.RequestFailed="RequestFailed";H.MissingFeatures=
"MissingFeatures";H.AggregationFieldNotFound="AggregationFieldNotFound";H.DataElementsNotFound="DataElementsNotFound"})(u.FeatureSetErrorCodes||(u.FeatureSetErrorCodes={}));const L={[u.FeatureSetErrorCodes.Cancelled]:"Cancelled",[u.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[u.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[u.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[u.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[u.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[u.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[u.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[u.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let F=function(H){function h(g,v){g=k.call(this,M.doSubstitutions(L[g],v));g.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(D._assertThisInitialized(g),
h);return g}D._inherits(h,H);var k=D._createSuper(h);return D._createClass(h)}(D._wrapNativeSuper(Error));u.FeatureSetError=F;u.FeatureSetErrorMessages=L;u.SqlError=A;u.SqlErrorMessages=S;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(u,D){function M(w){return w&&w.loc?`Line : ${w.loc.start?.line}, ${w.loc.start?.column}: `:""}function S(w,B){try{if(!B)return w;for(const q in B){let z=
B[q];z||(z="");w=w.replace("{"+q+"}",B[q])}}catch(q){}return w}u.ExecutionErrorCodes=void 0;(function(w){w.AsyncNotEnabled="AsyncNotEnabled";w.ModulesNotSupported="ModulesNotSupported";w.CircularModules="CircularModules";w.NeverReach="NeverReach";w.UnsupportedHashType="UnsupportedHashType";w.InvalidParameter="InvalidParameter";w.UnexpectedToken="UnexpectedToken";w.Unrecognised="Unrecognised";w.UnrecognisedType="UnrecognisedType";w.MaximumCallDepth="MaximumCallDepth";w.BooleanConditionRequired="BooleanConditionRequired";
w.TypeNotAllowedInFeature="TypeNotAllowedInFeature";w.KeyMustBeString="KeyMustBeString";w.WrongNumberOfParameters="WrongNumberOfParameters";w.CallNonFunction="CallNonFunction";w.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";w.NoFunctionInDictionary="NoFunctionInDictionary";w.NoFunctionInArray="NoFunctionInArray";w.AssignModuleFunction="AssignModuleFunction";w.LogicExpressionOrAnd="LogicExpressionOrAnd";w.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";w.FuncionNotFound="FunctionNotFound";
w.InvalidMemberAccessKey="InvalidMemberAccessKey";w.UnsupportedUnaryOperator="UnsupportUnaryOperator";w.InvalidIdentifier="InvalidIdentifier";w.MemberOfNull="MemberOfNull";w.UnsupportedOperator="UnsupportedOperator";w.Cancelled="Cancelled";w.ModuleAccessorMustBeString="ModuleAccessorMustBeString";w.ModuleExportNotFound="ModuleExportNotFound";w.Immutable="Immutable";w.OutOfBounds="OutOfBounds";w.IllegalResult="IllegalResult";w.FieldNotFound="FieldNotFound";w.PortalRequired="PortalRequired";w.LogicError=
"LogicError";w.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";w.KeyAccessorMustBeString="KeyAccessorMustBeString";w.WrongSpatialReference="WrongSpatialReference"})(u.ExecutionErrorCodes||(u.ExecutionErrorCodes={}));const A={[u.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[u.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[u.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[u.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",
[u.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[u.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[u.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[u.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[u.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[u.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[u.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",
[u.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[u.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[u.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[u.ExecutionErrorCodes.PortalRequired]:"Portal is required",[u.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[u.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[u.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[u.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",
[u.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[u.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[u.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[u.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[u.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",
[u.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[u.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[u.ExecutionErrorCodes.Immutable]:"Object is immutable",[u.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[u.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[u.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[u.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[u.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",
[u.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[u.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[u.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[u.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[u.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[u.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[u.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",
[u.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[u.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let L=function(w){function B(...z){return q.call(this,...z)}D._inherits(B,w);var q=D._createSuper(B);return D._createClass(B)}(D._wrapNativeSuper(Error)),F=function(w){function B(z,J){z=q.call(this,M(J)+z.message,{cause:z});z.loc=null;Error.captureStackTrace&&Error.captureStackTrace(D._assertThisInitialized(z),
B);J&&J.loc&&(z.loc=J.loc);return z}D._inherits(B,w);var q=D._createSuper(B);return D._createClass(B)}(L),H=function(w){function B(z,J,E,ka){z=q.call(this,"Execution error - "+M(E)+S(A[J],ka));z.loc=null;z.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(D._assertThisInitialized(z),B);E&&E.loc&&(z.loc=E.loc);return z}D._inherits(B,w);var q=D._createSuper(B);return D._createClass(B)}(D._wrapNativeSuper(Error)),h=function(w){function B(z,J,E,ka){z=
q.call(this,"Compilation error - "+M(E)+S(A[J],ka));z.loc=null;z.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(D._assertThisInitialized(z),B);E&&E.loc&&(z.loc=E.loc);return z}D._inherits(B,w);var q=D._createSuper(B);return D._createClass(B)}(D._wrapNativeSuper(Error)),k=function(w){function B(){var z=q.call(this,"Uncompilable code structures");z.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(D._assertThisInitialized(z),
B);return z}D._inherits(B,w);var q=D._createSuper(B);return D._createClass(B)}(D._wrapNativeSuper(Error));u.ModuleErrorCodes=void 0;(function(w){w.UnrecognisedUri="UnrecognisedUri";w.UnsupportedUriProtocol="UnsupportedUriProtocol"})(u.ModuleErrorCodes||(u.ModuleErrorCodes={}));const g={[u.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[u.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let v=function(w){function B(z,J){z=q.call(this,S(g[z],J));z.declaredRootClass=
"esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(D._assertThisInitialized(z),B);return z}D._inherits(B,w);var q=D._createSuper(B);return D._createClass(B)}(D._wrapNativeSuper(Error));u.ArcadeCompilationError=h;u.ArcadeExecutionError=H;u.ArcadeUncompilableError=k;u.ErrorWithCause=L;u.ExecutionErrorMessages=A;u.LocatableArcadeExecutionError=F;u.ModuleError=v;u.ModuleErrorMessages=g;u.doSubstitutions=S;u.ensureArcadeExecutionError=function(w,B,q){return"esri.arcade.arcadeexecutionerror"===
q.declaredRootClass||"esri.arcade.arcadecompilationerror"===q.declaredRootClass?null===q.loc&&B&&B.loc?new F(q,{cause:q}):q:B&&B.loc?new F(q,{cause:q}):q};u.parsingValidationMessage=function(w,B,q){return"Parsing error - "+M(w)+S(A[B],q)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(u,D,M){var S={};(function(L){(function(F,H){L.exports&&(L.exports=
H())})(M.commonjsGlobal,function(){function F(h,k,g,v){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,F.prototype);h.expected=k;h.found=g;h.location=v;h.name="SyntaxError";return h}function H(h,k,g){g=g||" ";if(h.length>k)return h;k-=h.length;g+=g.repeat(k);return h+g.slice(0,k)}(function(h,k){function g(){this.constructor=h}g.prototype=k.prototype;h.prototype=new g})(F,Error);F.prototype.format=function(h){var k="Error: "+this.message;if(this.location){var g=null,v;for(v=0;v<
h.length;v++)if(h[v].source===this.location.source){g=h[v].text.split(/\r\n|\n|\r/g);break}h=this.location.start;v=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(h):h;var w=this.location.source+":"+v.line+":"+v.column;if(g){var B=this.location.end,q=H("",v.line.toString().length," ");g=g[h.line-1];B=(h.line===B.line?B.column:g.length+1)-h.column||1;k+="\n --\x3e "+w+"\n"+q+" |\n"+v.line+" | "+g+"\n"+q+" | "+H("",h.column-1," ")+H("",B,"^")}else k+=
"\n at "+w}return k};F.buildMessage=function(h,k){function g(z){return z.charCodeAt(0).toString(16).toUpperCase()}function v(z){return z.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(J){return"\\x0"+g(J)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(J){return"\\x"+g(J)})}function w(z){return z.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(J){return"\\x0"+g(J)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(J){return"\\x"+g(J)})}function B(z){return q[z.type](z)}var q={literal:function(z){return'"'+v(z.text)+'"'},class:function(z){var J=z.parts.map(function(E){return Array.isArray(E)?w(E[0])+"-"+w(E[1]):w(E)});return"["+(z.inverted?"^":"")+J.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(z){return z.description}};
return"Expected "+function(z){z=z.map(B);var J,E;z.sort();if(0<z.length){for(E=J=1;J<z.length;J++)z[J-1]!==z[J]&&(z[E]=z[J],E++);z.length=E}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}(h)+" but "+(k?'"'+v(k)+'"':"end of input")+" found."};return{SyntaxError:F,parse:function(h,k){function g(c,d){return{type:"literal",text:c,ignoreCase:d}}function v(c,d,e){return{type:"class",parts:c,inverted:d,ignoreCase:e}}function w(c){var d=
fb[c],e;if(!d){for(e=c-1;!fb[e];)e--;d=fb[e];for(d={line:d.line,column:d.column};e<c;)10===h.charCodeAt(e)?(d.line++,d.column=1):d.column++,e++;fb[c]=d}return d}function B(c,d,e){var n=w(c),x=w(d);c={source:Pa,start:{offset:c,line:n.line,column:n.column},end:{offset:d,line:x.line,column:x.column}};e&&Pa&&"function"===typeof Pa.offset&&(c.start=Pa.offset(c.start),c.end=Pa.offset(c.end));return c}function q(c){b<la||(b>la&&(la=b,Nb=[]),Nb.push(c))}function z(){var c=b;t();var d=E();d!==a?(t(),c=d):
(b=c,c=a);return c}function J(){var c=b;var d=E();if(d!==a){c=[];var e=b;var n=t();var x=gb();if(x!==a){var I=t();var K=E();K!==a?e=n=[n,x,I,K]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=t(),x=gb(),x!==a?(I=t(),K=E(),K!==a?e=n=[n,x,I,K]:(b=e,e=a)):(b=e,e=a);e={type:"expression-list"};d=[d];for(n=0;n<c.length;n++)d.push(c[n][3]);e.value=d;c=e}else b=c,c=a;return c}function E(){var c=b;var d=ka();if(d!==a){c=[];var e=b;var n=t();var x=gc();if(x!==a){var I=t();var K=ka();K!==a?e=n=[n,x,I,K]:
(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=t(),x=gc(),x!==a?(I=t(),K=ka(),K!==a?e=n=[n,x,I,K]:(b=e,e=a)):(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function ka(){var c=b;var d=ua();if(d!==a){c=[];var e=b;var n=t();var x=hb();if(x!==a){var I=t();var K=ua();K!==a?e=n=[n,x,I,K]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=t(),x=hb(),x!==a?(I=t(),K=ua(),K!==a?e=n=[n,x,I,K]:(b=e,e=a)):(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function ua(){var c=b;var d=Ra();if(d===a){d=b;if(33===h.charCodeAt(b)){var e=
sd;b++}else e=a,0===l&&q(td);if(e!==a){var n=b;l++;if(61===h.charCodeAt(b)){var x=hc;b++}else x=a,0===l&&q(ic);l--;x===a?n=void 0:(b=n,n=a);n!==a?d=e=[e,n]:(b=d,d=a)}else b=d,d=a}d!==a?(e=t(),n=ua(),n!==a?c={type:"unary-expression",operator:"NOT",expr:n}:(b=c,c=a)):(b=c,c=a);if(c===a){d=b;c=fa();if(c!==a){t();d=[];e=b;n=t();x=Sa();if(x!==a){var I=t();var K=fa();K!==a?e=n=[n,x,I,K]:(b=e,e=a)}else b=e,e=a;if(e!==a)for(;e!==a;)d.push(e),e=b,n=t(),x=Sa(),x!==a?(I=t(),K=fa(),K!==a?e=n=[n,x,I,K]:(b=e,e=
a)):(b=e,e=a);else d=a;d!==a&&(d={type:"arithmetic",tail:d});d===a&&(d=b,e=Ta(),e!==a?(t(),n=W(),n!==a?(t(),n=J(),n!==a?(t(),x=X(),x!==a?d={op:e,right:n}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=Ta(),e!==a?(t(),n=W(),n!==a?(t(),n=X(),n!==a?d={op:e,right:{type:"expression-list",value:[]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=Ta(),e!==a?(t(),n=f(),n!==a?d={op:e,right:n}:(b=d,d=a)):(b=d,d=a))),d===a&&(d=b,x=Ra(),x!==a?(t(),e=jc(),e!==a?(t(),n=fa(),n!==a?(t(),I=hb(),I!==a?(t(),
x=fa(),x!==a?d={op:"NOT"+e,right:{type:"expression-list",value:[n,x]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,x=jc(),x!==a?(t(),e=fa(),e!==a?(t(),n=hb(),n!==a?(t(),I=fa(),I!==a?d={op:x,right:{type:"expression-list",value:[e,I]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a)),d===a&&(d=b,e=kc(),e!==a?(t(),n=Ra(),n!==a?(t(),n=fa(),n!==a?d={op:e+"NOT",right:n}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=kc(),e!==a?(t(),n=fa(),n!==a?d={op:e,right:n}:(b=d,d=a)):(b=d,d=a)),d===
a&&(d=b,e=ib(),e!==a?(t(),n=T(),n!==a?(t(),x=b,h.substr(b,6).toLowerCase()===ud?(I=h.substr(b,6),b+=6):(I=a,0===l&&q(vd)),I!==a?(I=b,l++,K=r(),l--,K===a?I=void 0:(b=I,I=a),I!==a?x="ESCAPE":(b=x,x=a)):(b=x,x=a),x!==a?(t(),x=da(),x!==a?d={op:e,right:n,escape:x.value}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=ib(),e!==a?(t(),n=T(),n!==a?d={op:e,right:n,escape:""}:(b=d,d=a)):(b=d,d=a))))));d===a&&(d=null);""==d||void 0==d||null==d?d=c:(e=null,d=e="arithmetic"==d.type?Qa(c,d.tail):lc(d.op,
c,d.right,d.escape))}else b=d,d=a;c=d}return c}function Sa(){if(h.substr(b,2)===mc){var c=mc;b+=2}else c=a,0===l&&q(wd);c===a&&(62===h.charCodeAt(b)?(c=xd,b++):(c=a,0===l&&q(yd)),c===a&&(h.substr(b,2)===nc?(c=nc,b+=2):(c=a,0===l&&q(zd)),c===a&&(h.substr(b,2)===oc?(c=oc,b+=2):(c=a,0===l&&q(Ad)),c===a&&(60===h.charCodeAt(b)?(c=Bd,b++):(c=a,0===l&&q(Cd)),c===a&&(61===h.charCodeAt(b)?(c=hc,b++):(c=a,0===l&&q(ic)),c===a&&(h.substr(b,2)===pc?(c=pc,b+=2):(c=a,0===l&&q(Dd))))))));return c}function ib(){var c=
c=b;var d=Ra();if(d!==a){var e=t();var n=qc();n!==a?c=d=[d,e,n]:(b=c,c=a)}else b=c,c=a;c!==a&&(c=c[0]+" "+c[2]);c===a&&(c=qc());return c}function Ta(){var c=c=b;var d=Ra();if(d!==a){var e=t();var n=Ob();n!==a?c=d=[d,e,n]:(b=c,c=a)}else b=c,c=a;c!==a&&(c=c[0]+" "+c[2]);c===a&&(c=Ob());return c}function fa(){var c=b;var d=Ua();if(d!==a){c=[];var e=b;var n=t();var x=jb();if(x!==a){var I=t();var K=Ua();K!==a?e=n=[n,x,I,K]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=t(),x=jb(),x!==a?(I=t(),K=Ua(),
K!==a?e=n=[n,x,I,K]:(b=e,e=a)):(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function jb(){if(43===h.charCodeAt(b)){var c=Pb;b++}else c=a,0===l&&q(Qb);c===a&&(45===h.charCodeAt(b)?(c=Rb,b++):(c=a,0===l&&q(Sb)),c===a&&(h.substr(b,2)===rc?(c=rc,b+=2):(c=a,0===l&&q(Ed))));return c}function Ua(){var c=b;var d=Va();if(d!==a){c=[];var e=b;var n=t();var x=kb();if(x!==a){var I=t();var K=Va();K!==a?e=n=[n,x,I,K]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=t(),x=kb(),x!==a?(I=t(),K=Va(),K!==a?e=n=[n,x,I,
K]:(b=e,e=a)):(b=e,e=a);c=Qa(d,c)}else b=c,c=a;return c}function kb(){if(42===h.charCodeAt(b)){var c=Fd;b++}else c=a,0===l&&q(Gd);c===a&&(47===h.charCodeAt(b)?(c=Hd,b++):(c=a,0===l&&q(Id)));return c}function Va(){var c=da();if(c===a){var d=b;var e=b;var n=lb();if(n!==a){var x=sc();if(x!==a){var I=tc();I!==a?e=parseFloat(n+x+I):(b=e,e=a)}else b=e,e=a}else b=e,e=a;e===a&&(e=b,n=lb(),n!==a?(x=sc(),x!==a?e=parseFloat(n+x):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,n=lb(),n!==a?(x=tc(),x!==a?e=parseFloat(n+x):(b=
e,e=a)):(b=e,e=a),e===a&&(e=b,n=lb(),n!==a&&(n=parseFloat(n)),e=n)));var K=e;if(K!==a){var mb=b;l++;var Jd=ha();l--;Jd===a?mb=void 0:(b=mb,mb=a);mb!==a?d={type:"number",value:K}:(b=d,d=a)}else b=d,d=a;c=d;if(c===a){var Wa=b;var za=b;if(h.substr(b,4).toLowerCase()===Kd){var nb=h.substr(b,4);b+=4}else nb=a,0===l&&q(Ld);if(nb!==a){var Xa=b;l++;var Md=r();l--;Md===a?Xa=void 0:(b=Xa,Xa=a);Xa!==a?za=nb=[nb,Xa]:(b=za,za=a)}else b=za,za=a;var va=za;va!==a&&(va={type:"boolean",value:!0});Wa=va;if(Wa===a){Wa=
b;var Aa=b;if(h.substr(b,5).toLowerCase()===Nd){var ob=h.substr(b,5);b+=5}else ob=a,0===l&&q(Od);if(ob!==a){var Ya=b;l++;var Pd=r();l--;Pd===a?Ya=void 0:(b=Ya,Ya=a);Ya!==a?Aa=ob=[ob,Ya]:(b=Aa,Aa=a)}else b=Aa,Aa=a;va=Aa;va!==a&&(va={type:"boolean",value:!1});Wa=va}c=Wa;if(c===a){var Ba=b;if(h.substr(b,4).toLowerCase()===Qd){var pb=h.substr(b,4);b+=4}else pb=a,0===l&&q(Rd);if(pb!==a){var Za=b;l++;var Sd=r();l--;Sd===a?Za=void 0:(b=Za,Za=a);Za!==a?Ba=pb=[pb,Za]:(b=Ba,Ba=a)}else b=Ba,Ba=a;var Tb=Ba;Tb!==
a&&(Tb={type:"null",value:null});c=Tb;if(c===a){var Ca=b;if(uc()!==a){t();var vc=T();vc!==a?Ca={type:"date",value:vc.value}:(b=Ca,Ca=a)}else b=Ca,Ca=a;c=Ca;if(c===a){var Da=b;if(wc()!==a){t();var xc=T();xc!==a?Da={type:"timestamp",value:xc.value}:(b=Da,Da=a)}else b=Da,Da=a;c=Da;if(c===a){var U=b;var Ub=yc();if(Ub!==a){t();if(45===h.charCodeAt(b)){var pa=Rb;b++}else pa=a,0===l&&q(Sb);pa===a&&(43===h.charCodeAt(b)?(pa=Pb,b++):(pa=a,0===l&&q(Qb)));if(pa!==a){t();var $a=T();if($a!==a){t();var zc=y();
zc!==a?U={type:"interval",value:$a,qualifier:zc,op:pa}:(b=U,U=a)}else b=U,U=a}else b=U,U=a}else b=U,U=a;U===a&&(U=b,Ub=yc(),Ub!==a?(t(),pa=T(),pa!==a?(t(),$a=y(),$a!==a?U={type:"interval",value:pa,qualifier:$a,op:""}:(b=U,U=a)):(b=U,U=a)):(b=U,U=a));c=U}}}}}}var N=c;if(N===a){var Z=b;var Ea=b;if(h.substr(b,7).toLowerCase()===Td){var Ac=h.substr(b,7);b+=7}else Ac=a,0===l&&q(Ud);if(Ac!==a){var qb=b;l++;var Vd=r();l--;Vd===a?qb=void 0:(b=qb,qb=a);qb!==a?Ea="EXTRACT":(b=Ea,Ea=a)}else b=Ea,Ea=a;if(Ea!==
a){t();var Wd=W();if(Wd!==a){t();var ia=Bc();ia===a&&(ia=Cc(),ia===a&&(ia=Dc(),ia===a&&(ia=Ec(),ia===a&&(ia=Fc(),ia===a&&(ia=wa())))));var Gc=ia;if(Gc!==a){t();var Xd=Vb();if(Xd!==a){t();var Hc=E();if(Hc!==a){t();var Yd=X();Yd!==a?Z={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Gc},Hc]}}:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;N=Z;if(N===a){var aa=b;var Fa=b;if(h.substr(b,9).toLowerCase()===Zd){var Ic=h.substr(b,9);b+=9}else Ic=
a,0===l&&q($d);if(Ic!==a){var rb=b;l++;var ae=r();l--;ae===a?rb=void 0:(b=rb,rb=a);rb!==a?Fa="SUBSTRING":(b=Fa,Fa=a)}else b=Fa,Fa=a;if(Fa!==a){t();var be=W();if(be!==a){t();var Wb=E();if(Wb!==a){t();var ce=Vb();if(ce!==a){t();var Xb=E();if(Xb!==a){t();var qa=b;var Ga=b;if(h.substr(b,3).toLowerCase()===de){var Jc=h.substr(b,3);b+=3}else Jc=a,0===l&&q(ee);if(Jc!==a){var sb=b;l++;var fe=r();l--;fe===a?sb=void 0:(b=sb,sb=a);sb!==a?Ga="FOR":(b=Ga,Ga=a)}else b=Ga,Ga=a;var ab=Ga;if(ab!==a){var ge=t();var Kc=
E();if(Kc!==a){var he=t();qa=ab=[ab,ge,Kc,he]}else b=qa,qa=a}else b=qa,qa=a;qa===a&&(qa=null);ab=X();ab!==a?aa={type:"function",name:"substring",args:{type:"expression-list",value:qa?[Wb,Xb,qa[2]]:[Wb,Xb]}}:(b=aa,aa=a)}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a;N=aa;if(N===a){var P=b;var Yb=Lc();if(Yb!==a){t();var Zb=W();if(Zb!==a){t();var ra=p();ra===a&&(ra=null);t();var bb=E();if(bb!==a){t();var $b=Vb();if($b!==a){t();var Mc=E();if(Mc!==a){t();var ie=X();ie!==a?P=
{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ra?"BOTH":ra},bb,Mc]}}:(b=P,P=a)}else b=P,P=a}else b=P,P=a}else b=P,P=a}else b=P,P=a}else b=P,P=a;P===a&&(P=b,Yb=Lc(),Yb!==a?(t(),Zb=W(),Zb!==a?(t(),ra=p(),ra===a&&(ra=null),t(),bb=E(),bb!==a?(t(),$b=X(),$b!==a?P={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==ra?"BOTH":ra},bb]}}:(b=P,P=a)):(b=P,P=a)):(b=P,P=a)):(b=P,P=a));N=P;if(N===a){var ba=b;var Ha=b;if(h.substr(b,
8).toLowerCase()===je){var Nc=h.substr(b,8);b+=8}else Nc=a,0===l&&q(ke);if(Nc!==a){var tb=b;l++;var le=r();l--;le===a?tb=void 0:(b=tb,tb=a);tb!==a?Ha="POSITION":(b=Ha,Ha=a)}else b=Ha,Ha=a;if(Ha!==a){t();var me=W();if(me!==a){t();var Oc=E();if(Oc!==a){t();var ne=Ob();if(ne!==a){t();var Pc=E();if(Pc!==a){t();var oe=X();oe!==a?ba={type:"function",name:"position",args:{type:"expression-list",value:[Oc,Pc]}}:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;N=ba;if(N===
a){var ca=b;var Ia=b;if(h.substr(b,4).toLowerCase()===pe){var Qc=h.substr(b,4);b+=4}else Qc=a,0===l&&q(qe);if(Qc!==a){var ub=b;l++;var re=r();l--;re===a?ub=void 0:(b=ub,ub=a);ub!==a?Ia="CAST":(b=Ia,Ia=a)}else b=Ia,Ia=a;if(Ia!==a){t();var se=W();if(se!==a){t();var Rc=E();if(Rc!==a){t();var Ja=b;if(h.substr(b,2).toLowerCase()===te){var Sc=h.substr(b,2);b+=2}else Sc=a,0===l&&q(ue);if(Sc!==a){var vb=b;l++;var ve=r();l--;ve===a?vb=void 0:(b=vb,vb=a);vb!==a?Ja="AS":(b=Ja,Ja=a)}else b=Ja,Ja=a;var we=Ja;
if(we!==a){t();var O=b;var Ka=b;if(h.substr(b,7).toLowerCase()===xe){var Tc=h.substr(b,7);b+=7}else Tc=a,0===l&&q(ye);if(Tc!==a){var wb=b;l++;var ze=r();l--;ze===a?wb=void 0:(b=wb,wb=a);wb!==a?Ka="INTEGER":(b=Ka,Ka=a)}else b=Ka,Ka=a;var Q=Ka;Q!==a&&(Q={type:"data-type",value:{type:"integer"}});O=Q;if(O===a){O=b;var La=b;if(h.substr(b,8).toLowerCase()===Ae){var Uc=h.substr(b,8);b+=8}else Uc=a,0===l&&q(Be);if(Uc!==a){var xb=b;l++;var Ce=r();l--;Ce===a?xb=void 0:(b=xb,xb=a);xb!==a?La="SMALLINT":(b=La,
La=a)}else b=La,La=a;Q=La;Q!==a&&(Q={type:"data-type",value:{type:"smallint"}});O=Q;if(O===a){O=b;var Ma=b;if(h.substr(b,5).toLowerCase()===De){var Vc=h.substr(b,5);b+=5}else Vc=a,0===l&&q(Ee);if(Vc!==a){var yb=b;l++;var Fe=r();l--;Fe===a?yb=void 0:(b=yb,yb=a);yb!==a?Ma="FLOAT":(b=Ma,Ma=a)}else b=Ma,Ma=a;Q=Ma;Q!==a&&(Q={type:"data-type",value:{type:"float"}});O=Q;if(O===a){O=b;var Na=b;if(h.substr(b,4).toLowerCase()===Ge){var Wc=h.substr(b,4);b+=4}else Wc=a,0===l&&q(He);if(Wc!==a){var zb=b;l++;var Ie=
r();l--;Ie===a?zb=void 0:(b=zb,zb=a);zb!==a?Na="REAL":(b=Na,Na=a)}else b=Na,Na=a;Q=Na;Q!==a&&(Q={type:"data-type",value:{type:"real"}});O=Q;if(O===a&&(O=b,Q=uc(),Q!==a&&(Q={type:"data-type",value:{type:"date"}}),O=Q,O===a&&(O=b,Q=wc(),Q!==a&&(Q={type:"data-type",value:{type:"timestamp"}}),O=Q,O===a))){O=b;var Oa=b;if(h.substr(b,7).toLowerCase()===Je){var Xc=h.substr(b,7);b+=7}else Xc=a,0===l&&q(Ke);if(Xc!==a){var Ab=b;l++;var Le=r();l--;Le===a?Ab=void 0:(b=Ab,Ab=a);Ab!==a?Oa="VARCHAR":(b=Oa,Oa=a)}else b=
Oa,Oa=a;Q=Oa;if(Q!==a){t();var Me=W();if(Me!==a){t();var Yc=xa();if(Yc!==a){t();var Ne=X();Ne!==a?O={type:"data-type",value:{type:"varchar",size:parseInt(Yc)}}:(b=O,O=a)}else b=O,O=a}else b=O,O=a}else b=O,O=a}}}}var Zc=O;if(Zc!==a){t();var Oe=X();Oe!==a?ca={type:"function",name:"cast",args:{type:"expression-list",value:[Rc,Zc]}}:(b=ca,ca=a)}else b=ca,ca=a}else b=ca,ca=a}else b=ca,ca=a}else b=ca,ca=a}else b=ca,ca=a;N=ca;if(N===a){var ta=b;var Bb;var ja=b;ja=Bb=ma();if(ja===a)if(ja=b,96===h.charCodeAt(b)?
(Bb=$c,b++):(Bb=a,0===l&&q(ad)),Bb!==a){var Cb=[];if(bd.test(h.charAt(b))){var sa=h.charAt(b);b++}else sa=a,0===l&&q(cd);if(sa!==a)for(;sa!==a;)Cb.push(sa),bd.test(h.charAt(b))?(sa=h.charAt(b),b++):(sa=a,0===l&&q(cd));else Cb=a;Cb!==a?(96===h.charCodeAt(b)?(sa=$c,b++):(sa=a,0===l&&q(ad)),sa!==a?ja=Cb.join(""):(b=ja,ja=a)):(b=ja,ja=a)}else b=ja,ja=a;var dd=ja;if(dd!==a){t();var Pe=W();if(Pe!==a){t();var Db=J();Db===a&&(Db=null);t();var Qe=X();Qe!==a?ta={type:"function",name:dd,args:Db?Db:{type:"expression-list",
value:[]}}:(b=ta,ta=a)}else b=ta,ta=a}else b=ta,ta=a;N=ta;if(N===a){var na;var V=b;var ac=Eb();if(ac!==a){t();var cb=E();if(cb!==a){t();var db=[];for(na=ya();na!==a;)db.push(na),na=ya();na=t();var Gb=Fb();Gb!==a?V={type:"case-expression",format:"simple",operand:cb,clauses:db,else:null}:(b=V,V=a)}else b=V,V=a}else b=V,V=a;if(V===a)if(V=b,ac=Eb(),ac!==a)if(t(),cb=E(),cb!==a){t();db=[];for(na=ya();na!==a;)db.push(na),na=ya();na=t();Gb=Hb();if(Gb!==a){t();var Re=Fb();Re!==a?V={type:"case-expression",
format:"simple",operand:cb,clauses:db,else:Gb.value}:(b=V,V=a)}else b=V,V=a}else b=V,V=a;else b=V,V=a;var bc=V;if(bc===a){var oa;var Y=b;var cc=Eb();if(cc!==a){t();var eb=[];for(oa=ea();oa!==a;)eb.push(oa),oa=ea();oa=t();var Ib=Fb();Ib!==a?Y={type:"case-expression",format:"searched",clauses:eb,else:null}:(b=Y,Y=a)}else b=Y,Y=a;if(Y===a)if(Y=b,cc=Eb(),cc!==a){t();eb=[];for(oa=ea();oa!==a;)eb.push(oa),oa=ea();oa=t();Ib=Hb();if(Ib!==a){t();var Se=Fb();Se!==a?Y={type:"case-expression",format:"searched",
clauses:eb,else:Ib.value}:(b=Y,Y=a)}else b=Y,Y=a}else b=Y,Y=a;bc=Y}N=bc;if(N===a){var Jb;var Kb=b;var ed=ha();if(ed!==a){var fd=[];for(Jb=m();Jb!==a;)fd.push(Jb),Jb=m();Kb=ed+fd.join("")}else b=Kb,Kb=a;var Lb=Kb;if(Lb!==a){var dc=Lb;Lb=/^CURRENT_DATE$/i.test(dc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(dc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:dc}}N=Lb;if(N===a&&(N=f(),N===a)){N=b;var Te=W();if(Te!==a){t();var ec=E();if(ec!==a){t();var Ue=
X();Ue!==a?(ec.paren=!0,N=ec):(b=N,N=a)}else b=N,N=a}else b=N,N=a}}}}}}}}}return N}function ma(){var c;var d=b;var e=ha();if(e!==a){d=[];for(c=r();c!==a;)d.push(c),c=r();d=e+d.join("")}else b=d,d=a;return d}function ha(){if(Ve.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(We);return c}function r(){if(Xe.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(Ye);return c}function m(){if(Ze.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q($e);return c}function f(){var c=b;
if(64===h.charCodeAt(b)){var d=af;b++}else d=a,0===l&&q(bf);if(d!==a){var e=ma();e!==a?c=d=[d,e]:(b=c,c=a)}else b=c,c=a;c!==a&&(c={type:"parameter",value:c[1]});return c}function p(){var c=b;if(h.substr(b,7).toLowerCase()===cf){var d=h.substr(b,7);b+=7}else d=a,0===l&&q(df);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="LEADING":(b=c,c=a)}else b=c,c=a;c===a&&(c=b,h.substr(b,8).toLowerCase()===ef?(d=h.substr(b,8),b+=8):(d=a,0===l&&q(ff)),d!==a?(d=b,l++,e=r(),l--,e===a?d=void 0:(b=
d,d=a),d!==a?c="TRAILING":(b=c,c=a)):(b=c,c=a),c===a&&(c=b,h.substr(b,4).toLowerCase()===gf?(d=h.substr(b,4),b+=4):(d=a,0===l&&q(hf)),d!==a?(d=b,l++,e=r(),l--,e===a?d=void 0:(b=d,d=a),d!==a?c="BOTH":(b=c,c=a)):(b=c,c=a)));return c}function y(){var c=b;var d=b;var e=C();if(e!==a){t();var n=W();if(n!==a)if(t(),n=R(),n!==a){t();var x=X();x!==a?d={type:"interval-period",period:e.value,precision:n,secondary:null}:(b=d,d=a)}else b=d,d=a;else b=d,d=a}else b=d,d=a;d===a&&(d=b,e=C(),e!==a&&(e={type:"interval-period",
period:e.value,precision:null,secondary:null}),d=e);if(d!==a)if(t(),e=b,h.substr(b,2).toLowerCase()===jf?(n=h.substr(b,2),b+=2):(n=a,0===l&&q(kf)),n!==a?(n=b,l++,x=r(),l--,x===a?n=void 0:(b=n,n=a),n!==a?e="TO":(b=e,e=a)):(b=e,e=a),e!==a){t();e=b;n=C();n!==a&&(n={type:"interval-period",period:n.value,precision:null,secondary:null});e=n;if(e===a){e=b;n=wa();if(n!==a)if(t(),n=W(),n!==a)if(t(),n=R(),n!==a)if(t(),x=gb(),x!==a)if(t(),x=G(),x!==a){t();var I=X();I!==a?e={type:"interval-period",period:"second",
precision:n,secondary:x}:(b=e,e=a)}else b=e,e=a;else b=e,e=a;else b=e,e=a;else b=e,e=a;else b=e,e=a;e===a&&(e=b,n=wa(),n!==a?(t(),n=W(),n!==a?(t(),n=R(),n!==a?(t(),x=X(),x!==a?e={type:"interval-period",period:"second",precision:n,secondary:null}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,n=wa(),n!==a&&(n={type:"interval-period",period:"second",precision:null,secondary:null}),e=n))}e!==a?c={type:"interval-qualifier",start:d,end:e}:(b=c,c=a)}else b=c,c=a;else b=c,c=a;c===a&&(c=b,e=C(),e!==
a?(t(),d=W(),d!==a?(t(),d=G(),d!==a?(t(),n=X(),n!==a?c={type:"interval-period",period:e.value,precision:d,secondary:null}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=C(),e!==a&&(e={type:"interval-period",period:e.value,precision:null,secondary:null}),c=e,c===a&&(c=b,e=wa(),e!==a?(t(),d=W(),d!==a?(t(),d=R(),d!==a?(t(),n=gb(),n!==a?(t(),e=G(),e!==a?(t(),n=X(),n!==a?c={type:"interval-period",period:"second",precision:d,secondary:e}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):
(b=c,c=a),c===a&&(c=b,e=wa(),e!==a?(t(),d=W(),d!==a?(t(),d=G(),d!==a?(t(),n=X(),n!==a?c={type:"interval-period",period:"second",precision:d,secondary:null}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=wa(),e!==a&&(e={type:"interval-period",period:"second",precision:null,secondary:null}),c=e)))));return c}function C(){var c=b;c=Dc();c!==a&&(c={type:"string",value:"day"});c===a&&(c=b,c=Ec(),c!==a&&(c={type:"string",value:"hour"}),c===a&&(c=b,c=Fc(),c!==a&&(c={type:"string",value:"minute"}),
c===a&&(c=b,c=Cc(),c!==a&&(c={type:"string",value:"month"}),c===a&&(c=b,c=Bc(),c!==a&&(c={type:"string",value:"year"})))));return c}function G(){var c=xa();c!==a&&(c=parseFloat(c));return c}function R(){var c=xa();c!==a&&(c=parseFloat(c));return c}function T(){var c=da();c===a&&(c=f());return c}function da(){var c=b;if(39===h.charCodeAt(b)){var d=gd;b++}else d=a,0===l&&q(hd);d===a&&(h.substr(b,2)===id?(d=id,b+=2):(d=a,0===l&&q(lf)));if(d!==a){d=[];var e=b;h.substr(b,2)===Mb?(e=Mb,b+=2):(e=a,0===l&&
q(jd));e!==a&&(e="'");e===a&&(kd.test(h.charAt(b))?(e=h.charAt(b),b++):(e=a,0===l&&q(ld)));for(;e!==a;)d.push(e),e=b,h.substr(b,2)===Mb?(e=Mb,b+=2):(e=a,0===l&&q(jd)),e!==a&&(e="'"),e===a&&(kd.test(h.charAt(b))?(e=h.charAt(b),b++):(e=a,0===l&&q(ld)));39===h.charCodeAt(b)?(e=gd,b++):(e=a,0===l&&q(hd));e!==a?c={type:"string",value:d.join("")}:(b=c,c=a)}else b=c,c=a;return c}function ea(){var c=b;if(md()!==a){t();var d=E();if(d!==a){t();var e=nd();e!==a?(t(),e=E(),e!==a?c={type:"when-clause",operand:d,
value:e}:(b=c,c=a)):(b=c,c=a)}else b=c,c=a}else b=c,c=a;return c}function ya(){var c=b;if(md()!==a){t();var d=E();if(d!==a){t();var e=nd();e!==a?(t(),e=E(),e!==a?c={type:"when-clause",operand:d,value:e}:(b=c,c=a)):(b=c,c=a)}else b=c,c=a}else b=c,c=a;return c}function Hb(){var c=b;var d=b;if(h.substr(b,4).toLowerCase()===mf){var e=h.substr(b,4);b+=4}else e=a,0===l&&q(nf);if(e!==a){e=b;l++;var n=r();l--;n===a?e=void 0:(b=e,e=a);e!==a?d="ELSE":(b=d,d=a)}else b=d,d=a;d!==a?(t(),d=E(),d!==a?c={type:"else-clause",
value:d}:(b=c,c=a)):(b=c,c=a);return c}function lb(){var c=xa();if(c===a){c=b;if(45===h.charCodeAt(b)){var d=Rb;b++}else d=a,0===l&&q(Sb);d===a&&(43===h.charCodeAt(b)?(d=Pb,b++):(d=a,0===l&&q(Qb)));if(d!==a){var e=xa();e!==a?c=d[0]+e:(b=c,c=a)}else b=c,c=a}return c}function sc(){var c=b;if(46===h.charCodeAt(b)){var d=of;b++}else d=a,0===l&&q(pf);d!==a?(c=xa(),c===a&&(c=null),c="."+(null!=c?c:"")):(b=c,c=a);return c}function tc(){var c;var d=c=b;if(qf.test(h.charAt(b))){var e=h.charAt(b);b++}else e=
a,0===l&&q(rf);e!==a?(sf.test(h.charAt(b))?(d=h.charAt(b),b++):(d=a,0===l&&q(tf)),d===a&&(d=null),d="e"+(null===d?"":d)):(b=d,d=a);d!==a?(e=xa(),e!==a?c=d+e:(b=c,c=a)):(b=c,c=a);return c}function xa(){var c=[];var d=od();if(d!==a)for(;d!==a;)c.push(d),d=od();else c=a;c!==a&&(c=c.join(""));return c}function od(){if(uf.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(vf);return c}function Ob(){var c=b;if(h.substr(b,2).toLowerCase()===wf){var d=h.substr(b,2);b+=2}else d=a,0===l&&q(xf);if(d!==
a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="IN":(b=c,c=a)}else b=c,c=a;return c}function kc(){var c=b;if(h.substr(b,2).toLowerCase()===yf){var d=h.substr(b,2);b+=2}else d=a,0===l&&q(zf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="IS":(b=c,c=a)}else b=c,c=a;return c}function qc(){var c=b;if(h.substr(b,4).toLowerCase()===Af){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Bf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="LIKE":(b=c,c=a)}else b=c,c=
a;return c}function Ra(){var c=b;if(h.substr(b,3).toLowerCase()===Cf){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(Df);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="NOT":(b=c,c=a)}else b=c,c=a;return c}function hb(){var c=b;if(h.substr(b,3).toLowerCase()===Ef){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(Ff);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="AND":(b=c,c=a)}else b=c,c=a;return c}function gc(){var c=b;if(h.substr(b,2).toLowerCase()===Gf){var d=h.substr(b,
2);b+=2}else d=a,0===l&&q(Hf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="OR":(b=c,c=a)}else b=c,c=a;return c}function jc(){var c=b;if(h.substr(b,7).toLowerCase()===If){var d=h.substr(b,7);b+=7}else d=a,0===l&&q(Jf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="BETWEEN":(b=c,c=a)}else b=c,c=a;return c}function Vb(){var c=b;if(h.substr(b,4).toLowerCase()===Kf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Lf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=
d,d=a);d!==a?c="FROM":(b=c,c=a)}else b=c,c=a;return c}function Lc(){var c=b;if(h.substr(b,4).toLowerCase()===Mf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Nf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="TRIM":(b=c,c=a)}else b=c,c=a;return c}function wc(){var c=b;if(h.substr(b,9).toLowerCase()===Of){var d=h.substr(b,9);b+=9}else d=a,0===l&&q(Pf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="TIMESTAMP":(b=c,c=a)}else b=c,c=a;return c}function uc(){var c=b;
if(h.substr(b,4).toLowerCase()===Qf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Rf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="DATE":(b=c,c=a)}else b=c,c=a;return c}function yc(){var c=b;if(h.substr(b,8).toLowerCase()===Sf){var d=h.substr(b,8);b+=8}else d=a,0===l&&q(Tf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="INTERVAL":(b=c,c=a)}else b=c,c=a;return c}function Bc(){var c=b;if(h.substr(b,4).toLowerCase()===Uf){var d=h.substr(b,4);b+=4}else d=a,0===l&&
q(Vf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="YEAR":(b=c,c=a)}else b=c,c=a;return c}function Cc(){var c=b;if(h.substr(b,5).toLowerCase()===Wf){var d=h.substr(b,5);b+=5}else d=a,0===l&&q(Xf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="MONTH":(b=c,c=a)}else b=c,c=a;return c}function Dc(){var c=b;if(h.substr(b,3).toLowerCase()===Yf){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(Zf);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="DAY":(b=
c,c=a)}else b=c,c=a;return c}function Ec(){var c=b;if(h.substr(b,4).toLowerCase()===$f){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(ag);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="HOUR":(b=c,c=a)}else b=c,c=a;return c}function Fc(){var c=b;if(h.substr(b,6).toLowerCase()===bg){var d=h.substr(b,6);b+=6}else d=a,0===l&&q(cg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="MINUTE":(b=c,c=a)}else b=c,c=a;return c}function wa(){var c=b;if(h.substr(b,6).toLowerCase()===
dg){var d=h.substr(b,6);b+=6}else d=a,0===l&&q(eg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="SECOND":(b=c,c=a)}else b=c,c=a;return c}function Eb(){var c=b;if(h.substr(b,4).toLowerCase()===fg){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(gg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="CASE":(b=c,c=a)}else b=c,c=a;return c}function Fb(){var c=b;if(h.substr(b,3).toLowerCase()===hg){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(ig);if(d!==a){d=b;l++;var e=r();
l--;e===a?d=void 0:(b=d,d=a);d!==a?c="END":(b=c,c=a)}else b=c,c=a;return c}function md(){var c=b;if(h.substr(b,4).toLowerCase()===jg){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(kg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="WHEN":(b=c,c=a)}else b=c,c=a;return c}function nd(){var c=b;if(h.substr(b,4).toLowerCase()===lg){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(mg);if(d!==a){d=b;l++;var e=r();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="THEN":(b=c,c=a)}else b=c,c=a;return c}function gb(){if(44===
h.charCodeAt(b)){var c=ng;b++}else c=a,0===l&&q(og);return c}function W(){if(40===h.charCodeAt(b)){var c=pg;b++}else c=a,0===l&&q(qg);return c}function X(){if(41===h.charCodeAt(b)){var c=rg;b++}else c=a,0===l&&q(sg);return c}function t(){var c;var d=[];for(c=pd();c!==a;)d.push(c),c=pd();return d}function pd(){if(tg.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(ug);return c}function lc(c,d,e,n){c={type:"binary-expression",operator:c,left:d,right:e};void 0!==n&&(c.escape=n);return c}function Qa(c,
d){for(var e=0;e<d.length;e++)c=lc(d[e][1],c,d[e][3]);return c}k=void 0!==k?k:{};var a={},Pa=k.grammarSource,qd={start:z},rd=z,sd="!",hc="\x3d",mc="\x3e\x3d",xd="\x3e",nc="\x3c\x3d",oc="\x3c\x3e",Bd="\x3c",pc="!\x3d",Pb="+",Rb="-",rc="||",Fd="*",Hd="/",af="@",gd="'",id="N'",Mb="''",of=".",Qd="null",Kd="true",Nd="false",wf="in",yf="is",Af="like",ud="escape",Cf="not",Ef="and",Gf="or",If="between",Kf="from",de="for",Zd="substring",Td="extract",Mf="trim",je="position",Of="timestamp",Qf="date",cf="leading",
ef="trailing",gf="both",pe="cast",te="as",xe="integer",Ae="smallint",De="float",Ge="real",Je="varchar",jf="to",Sf="interval",Uf="year",Wf="month",Yf="day",$f="hour",bg="minute",dg="second",fg="case",hg="end",jg="when",lg="then",mf="else",ng=",",pg="(",rg=")",$c="`",Ve=/^[A-Za-z_\x80-\uFFFF]/,Xe=/^[A-Za-z0-9_]/,Ze=/^[A-Za-z0-9_.\x80-\uFFFF]/,kd=/^[^']/,uf=/^[0-9]/,qf=/^[eE]/,sf=/^[+\-]/,tg=/^[ \t\n\r]/,bd=/^[^`]/,td=g("!",!1),ic=g("\x3d",!1),wd=g("\x3e\x3d",!1),yd=g("\x3e",!1),zd=g("\x3c\x3d",!1),
Ad=g("\x3c\x3e",!1),Cd=g("\x3c",!1),Dd=g("!\x3d",!1),Qb=g("+",!1),Sb=g("-",!1),Ed=g("||",!1),Gd=g("*",!1),Id=g("/",!1),We=v([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Ye=v([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),$e=v([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),bf=g("@",!1),hd=g("'",!1),lf=g("N'",!1),jd=g("''",!1),ld=v(["'"],!0,!1),pf=g(".",!1),vf=v([["0","9"]],!1,!1),rf=v(["e","E"],!1,!1),tf=v(["+","-"],!1,!1),Rd=g("NULL",!0),Ld=g("TRUE",!0),Od=g("FALSE",!0),xf=
g("IN",!0),zf=g("IS",!0),Bf=g("LIKE",!0),vd=g("ESCAPE",!0),Df=g("NOT",!0),Ff=g("AND",!0),Hf=g("OR",!0),Jf=g("BETWEEN",!0),Lf=g("FROM",!0),ee=g("FOR",!0),$d=g("SUBSTRING",!0),Ud=g("EXTRACT",!0),Nf=g("TRIM",!0),ke=g("POSITION",!0),Pf=g("TIMESTAMP",!0),Rf=g("DATE",!0),df=g("LEADING",!0),ff=g("TRAILING",!0),hf=g("BOTH",!0),qe=g("CAST",!0),ue=g("AS",!0),ye=g("INTEGER",!0),Be=g("SMALLINT",!0),Ee=g("FLOAT",!0),He=g("REAL",!0),Ke=g("VARCHAR",!0),kf=g("TO",!0),Tf=g("INTERVAL",!0),Vf=g("YEAR",!0),Xf=g("MONTH",
!0),Zf=g("DAY",!0),ag=g("HOUR",!0),cg=g("MINUTE",!0),eg=g("SECOND",!0),gg=g("CASE",!0),ig=g("END",!0),kg=g("WHEN",!0),mg=g("THEN",!0),nf=g("ELSE",!0),og=g(",",!1),qg=g("(",!1),sg=g(")",!1),ug=v([" ","\t","\n","\r"],!1,!1),ad=g("`",!1),cd=v(["`"],!0,!1),b=0,fb=[{line:1,column:1}],la=0,Nb=[],l=0;if("startRule"in k){if(!(k.startRule in qd))throw Error("Can't start parsing from rule \""+k.startRule+'".');rd=qd[k.startRule]}var fc=rd();if(fc!==a&&b===h.length)return fc;fc!==a&&b<h.length&&q({type:"end"});
throw function(c,d,e){return new F(F.buildMessage(c,d),c,d,e)}(Nb,la<h.length?h.charAt(la):null,la<h.length?B(la,la+1):B(la,la));}}})})({get exports(){return S},set exports(L){S=L}});let A=function(){function L(){}L.parse=function(F){return S.parse(F)};return D._createClass(L)}();u.WhereGrammar=A;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(u,D,M,S,A,L){function F(r,m){r+="";return r.length>=m?r:Array(m-r.length+1).join("0")+r}function H(r,m,f="0",p="0",y="0",C="0",G="",R="0",T="0"){return"+"===G||"-"===G?(r=`${F(parseInt(r,10),4)}-${F(parseInt(m,10),2)}-${F(parseInt(f,10),2)}`,m="",10>parseFloat(C)&&(m="0"),p=`${F(parseInt(p,10),2)}:${F(parseInt(y,10),2)}:${m+parseFloat(C).toString()}`,G=`${G}${F(parseInt(R,
10),2)}:${F(parseInt(T,10),2)}`,new Date(r+"T"+p+G)):new Date(parseInt(r,10),parseInt(m,10)-1,parseInt(f,10),parseInt(p,10),parseInt(y,10),parseFloat(C))}function h(r){let m=ib.exec(r);if(null!==m){const [,f,p,y,C,G,R]=m;return H(f,p,y,C,G,R)}m=Ta.exec(r);if(null!==m){const [,f,p,y,C,G,R,T,da,ea]=m;return H(f,p,y,C,G,R,T,da,ea)}m=fa.exec(r);if(null!==m){const [,f,p,y,C,G,R,T,da]=m;return H(f,p,y,C,G,"0",R,T,da)}m=jb.exec(r);if(null!==m){const [,f,p,y,C,G]=m;return H(f,p,y,C,G)}m=Sa.exec(r);if(null!==
m){const [,f,p,y]=m;return H(f,p,y)}throw Error("SQL Invalid Timestamp");}function k(r){const m=Sa.exec(r);if(null===m)try{return h(r)}catch{throw Error("SQL Invalid Date");}const [,f,p,y]=m;return new Date(parseInt(f,10),parseInt(p,10)-1,parseInt(y,10))}function g(r){return Array.isArray(r)?r:[r]}function v(r){return null!==r?!0!==r:null}function w(r,m){return null!=r&&null!=m?!0===r&&!0===m:!1===r||!1===m?!1:null}function B(r,m){return null!=r&&null!=m?!0===r||!0===m:!0===r||!0===m?!0:null}function q(r,
m){if(null==r)return null;let f=!1;for(const p of m)if(null==p)f=null;else if(r===p){f=!0;break}return f}function z(r,m,f){if(null==r)return null;let p="",y=ma.Normal;for(let C=0;C<m.length;C++){const G=m.charAt(C);switch(y){case ma.Normal:G===f?y=ma.Escaped:p="-[]/{}()*+?.\\^$|".includes(G)?p+("\\"+G):"%"===G?p+".*":"_"===G?p+".":p+G;break;case ma.Escaped:p="-[]/{}()*+?.\\^$|".includes(G)?p+("\\"+G):p+G,y=ma.Normal}}return(new RegExp("^"+p+"$","m")).test(r)}function J(r){return r instanceof Date?
r.valueOf():r}function E(r,m,f){if(null==m||null==f)return null;m=J(m);f=J(f);switch(r){case "\x3c\x3e":return m!==f;case "\x3d":return m===f;case "\x3e":return m>f;case "\x3c":return m<f;case "\x3e\x3d":return m>=f;case "\x3c\x3d":return m<=f}}function ka(r,m,f){if("||"===r)return A.evaluateFunction("concat",[m,f]);if(m instanceof A.SqlInterval)if(f instanceof Date)switch(r){case "+":return new Date(m.valueInMilliseconds()+f.getTime());case "-":return m.valueInMilliseconds()-f.getTime();case "*":return m.valueInMilliseconds()*
f.getTime();case "/":return m.valueInMilliseconds()/f.getTime()}else if(f instanceof A.SqlInterval)switch(r){case "+":return A.SqlInterval.createFromMilliseconds(m.valueInMilliseconds()+f.valueInMilliseconds());case "-":return A.SqlInterval.createFromMilliseconds(m.valueInMilliseconds()-f.valueInMilliseconds());case "*":return m.valueInMilliseconds()*f.valueInMilliseconds();case "/":return m.valueInMilliseconds()/f.valueInMilliseconds()}else m=m.valueInMilliseconds();else if(f instanceof A.SqlInterval)if(m instanceof
Date)switch(r){case "+":return new Date(f.valueInMilliseconds()+m.getTime());case "-":return new Date(m.getTime()-f.valueInMilliseconds());case "*":return m.getTime()*f.valueInMilliseconds();case "/":return m.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();else if(m instanceof Date&&"number"===typeof f)switch(f*=864E5,m=m.getTime(),r){case "+":return new Date(m+f);case "-":return new Date(m-f);case "*":return new Date(m*f);case "/":return new Date(m/f)}else if(f instanceof Date&&
"number"===typeof m)switch(m*=864E5,f=f.getTime(),r){case "+":return new Date(m+f);case "-":return new Date(m-f);case "*":return new Date(m*f);case "/":return new Date(m/f)}switch(r){case "+":return m+f;case "-":return m-f;case "*":return m*f;case "/":return m/f}}function ua(r,m,f,p){r=p.getAttribute(r,m);return null!=r&&1===f[m]?new Date(r):r}const Sa=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,ib=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,Ta=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,
fa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,jb=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Ua=new Set(["current_timestamp","current_date","current_time"]);let kb=function(){function r(){}r.makeBool=function(m){return!0===m};r.featureValue=function(m,f,p,y){return ua(m,f,p,y)};r.equalsNull=function(m){return null===m};r.applyLike=function(m,f,p){return z(m,f,p)};r.ensureArray=function(m){return g(m)};r.applyIn=function(m,f){return q(m,f)};r.currentDate=
function(){const m=new Date;m.setHours(0,0,0,0);return m};r.makeSqlInterval=function(m,f,p){return A.SqlInterval.createFromValueAndQualifer(m,f,p)};r.convertInterval=function(m){return m instanceof A.SqlInterval?m.valueInMilliseconds():m};r.currentTimestamp=function(){return new Date};r.compare=function(m,f,p){return E(m,f,p)};r.calculate=function(m,f,p){return ka(m,f,p)};r.makeComparable=function(m){return J(m)};r.evaluateFunction=function(m,f){return A.evaluateFunction(m,f)};r.lookup=function(m,
f){m=f[m];return void 0===m?null:m};r.between=function(m,f){return null==m||null==f[0]||null==f[1]?null:m>=f[0]&&m<=f[1]};r.notbetween=function(m,f){return null==m||null==f[0]||null==f[1]?null:m<f[0]||m>f[1]};r.ternaryNot=function(m){return v(m)};r.ternaryAnd=function(m,f){return w(m,f)};r.ternaryOr=function(m,f){return B(m,f)};return D._createClass(r)}(),Va=function(){function r(f,p){this.fieldsIndex=p;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=L.WhereGrammar.parse(f);
const {isStandardized:y,isAggregate:C,referencedFieldNames:G}=this._extractExpressionInfo(p);this._referencedFieldNames=G;this.isStandardized=y;this.isAggregate=C}r.create=function(f,p){return new r(f,p)};var m=r.prototype;m.testSet=function(f,p=ha){const y={};for(const C of this.fieldNames)y[C]=f.map(G=>p.getAttribute(G,C));return!!this._evaluateNode(this.parseTree,{attributes:y},ha)};m.calculateValue=function(f,p=ha){f=this._evaluateNode(this.parseTree,f,p);return f instanceof A.SqlInterval?f.valueInMilliseconds()/
864E5:f};m.calculateValueCompiled=function(f,p=ha){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(f,this.parameters,p,this._datefields);if(M("esri-csp-restrictions"))return this.calculateValue(f,p);this._compileMe();return this.parseTree._compiledVersion(f,this.parameters,p,this._datefields)};m.testFeature=function(f,p=ha){return!!this._evaluateNode(this.parseTree,f,p)};m.testFeatureCompiled=function(f,p=ha){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(f,
this.parameters,p,this._datefields);if(M("esri-csp-restrictions"))return this.testFeature(f,p);this._compileMe();return!!this.parseTree._compiledVersion(f,this.parameters,p,this._datefields)};m.getFunctions=function(){const f=new Set;this._visitAll(this.parseTree,p=>{"function"===p.type&&f.add(p.name.toLowerCase())});return Array.from(f)};m.getExpressions=function(){const f=new Map;this._visitAll(this.parseTree,p=>{if("function"===p.type){const y=p.name.toLowerCase();p=p.args.value[0];if("column-reference"===
p.type){p=p.column;const C=`${y}-${p}`;f.has(C)||f.set(C,{aggregateType:y,field:p})}}});return[...f.values()]};m.getVariables=function(){const f=new Set;this._visitAll(this.parseTree,p=>{"parameter"===p.type&&f.add(p.value.toLowerCase())});return Array.from(f)};m._compileMe=function(){const f="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",f)).bind(kb)};m._extractExpressionInfo=
function(f){const p=[],y=new Set;let C=!0,G=!0;this._visitAll(this.parseTree,R=>{switch(R.type){case "column-reference":const T=f?.get(R.column);let da,ea;T?da=ea=T.name??"":(ea=R.column,da=ea.toLowerCase());T&&T.name&&("date"===T.type||"esriFieldTypeDate"===T.type)&&(this._datefields[T.name]=1);y.has(da)||(y.add(da),p.push(ea));R.column=ea;break;case "function":const {name:ya,args:Hb}=R;R=Hb.value.length;C&&(C=A.isStandardized(ya,R));G&&(G=S.isAggregate(ya,R))}});return{referencedFieldNames:Array.from(p),
isStandardized:C,isAggregate:G}};m._visitAll=function(f,p){if(null!=f)switch(p(f),f.type){case "when-clause":this._visitAll(f.operand,p);this._visitAll(f.value,p);break;case "case-expression":for(const y of f.clauses)this._visitAll(y,p);"simple"===f.format&&this._visitAll(f.operand,p);null!==f.else&&this._visitAll(f.else,p);break;case "expression-list":for(const y of f.value)this._visitAll(y,p);break;case "unary-expression":this._visitAll(f.expr,p);break;case "binary-expression":this._visitAll(f.left,
p);this._visitAll(f.right,p);break;case "function":this._visitAll(f.args,p)}};m.evaluateNodeToJavaScript=function(f){switch(f.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(f.value)+", "+JSON.stringify(f.qualifier)+","+JSON.stringify(f.op)+")";case "case-expression":var p="";if("simple"===f.format){var y="this.makeComparable("+this.evaluateNodeToJavaScript(f.operand)+")";p="( ";for(let C=0;C<f.clauses.length;C++)p+=" ("+y+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(f.clauses[C].operand)+
")) ? ("+this.evaluateNodeToJavaScript(f.clauses[C].value)+") : "}else for(p="( ",y=0;y<f.clauses.length;y++)p+=" this.makeBool("+this.evaluateNodeToJavaScript(f.clauses[y].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(f.clauses[y].value)+") : ";p=null!==f.else?p+this.evaluateNodeToJavaScript(f.else):p+"null";return p+" )";case "parameter":return"this.lookup("+JSON.stringify(f.value.toLowerCase())+",lookups)";case "expression-list":p="[";for(y of f.value)"["!==p&&(p+=","),p+=this.evaluateNodeToJavaScript(y);
return p+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(f.expr)+")";case "binary-expression":switch(f.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+
")";case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(f.left)+
","+this.evaluateNodeToJavaScript(f.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")"}throw Error("Not Supported Operator "+f.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(f.value);case "date":return"(new Date("+k(f.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+h(f.value).getTime().toString()+"))";case "current-time":return"date"===f.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(f.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(f.name)+","+this.evaluateNodeToJavaScript(f.args)+")"}throw Error("Unsupported sql syntax "+f.type);};m._evaluateNode=function(f,p,y){switch(f.type){case "interval":return p=
this._evaluateNode(f.value,p,y),A.SqlInterval.createFromValueAndQualifer(p,f.qualifier,f.op);case "case-expression":if("simple"===f.format){var C=J(this._evaluateNode(f.operand,p,y));for(var G=0;G<f.clauses.length;G++)if(C===J(this._evaluateNode(f.clauses[G].operand,p,y)))return this._evaluateNode(f.clauses[G].value,p,y)}else for(C=0;C<f.clauses.length;C++)if(!0===this._evaluateNode(f.clauses[C].operand,p,y))return this._evaluateNode(f.clauses[C].value,p,y);return null!==f.else?this._evaluateNode(f.else,
p,y):null;case "parameter":return this.parameters[f.value.toLowerCase()];case "expression-list":C=[];for(G of f.value)C.push(this._evaluateNode(G,p,y));return C;case "unary-expression":return v(this._evaluateNode(f.expr,p,y));case "binary-expression":switch(f.operator){case "AND":return w(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y));case "OR":return B(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y));case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(f.left,p,y);case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(f.left,p,y);case "IN":return C=g(this._evaluateNode(f.right,p,y)),q(this._evaluateNode(f.left,p,y),C);case "NOT IN":return C=g(this._evaluateNode(f.right,p,y)),v(q(this._evaluateNode(f.left,p,y),C));case "BETWEEN":return C=this._evaluateNode(f.left,p,y),f=this._evaluateNode(f.right,p,y),null==C||null==f[0]||null==f[1]?null:C>=J(f[0])&&C<=J(f[1]);
case "NOTBETWEEN":return C=this._evaluateNode(f.left,p,y),f=this._evaluateNode(f.right,p,y),null==C||null==f[0]||null==f[1]?null:C<J(f[0])||C>J(f[1]);case "LIKE":return z(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y),f.escape);case "NOT LIKE":return v(z(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y),f.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return E(f.operator,this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,
p,y));case "-":case "+":case "*":case "/":case "||":return ka(f.operator,this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y))}case "null":case "boolean":case "string":case "number":return f.value;case "date":return k(f.value);case "timestamp":return h(f.value);case "current-time":return p=new Date,"date"===f.mode&&p.setHours(0,0,0,0),p;case "column-reference":return ua(p,f.column,this._datefields,y);case "data-type":return f.value;case "function":return p=this._evaluateNode(f.args,p,y),
this.isAggregate?S.aggregateFunction(f.name,p):A.evaluateFunction(f.name,p)}throw Error("Unsupported sql syntax "+f.type);};D._createClass(r,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,f=>{"current-time"===f.type?this._hasDateFunctions=!0:"function"===f.type&&(this._hasDateFunctions=this._hasDateFunctions||Ua.has(f.name.toLowerCase()))});
return this._hasDateFunctions}}]);return r}();var ma;(function(r){r[r.Normal=0]="Normal";r[r.Escaped=1]="Escaped"})(ma||(ma={}));const ha={getAttribute(r,m){return(r&&"object"===typeof r.attributes?r.attributes:r)[m]}};u.WhereClause=Va;u.defaultAttributeAdapter=ha;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});