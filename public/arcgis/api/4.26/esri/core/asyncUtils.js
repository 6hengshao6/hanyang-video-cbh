// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(d,r,g,w,h,n,k,x){function p(a){return{ok:!0,value:a}}function q(a){return{ok:!1,error:a}}function u(a){return h.isSome(a)&&!0===a.ok?a.value:null}function v(a){return h.isSome(a)&&!1===a.ok?a.error:null}let e=function(a){function c(f,l){var b=m.call(this,{});b._result=null;b._abortHandle=null;b.abort=
()=>{b._abortController=h.abortMaybe(b._abortController)};b.remove=b.abort;b._abortController=new AbortController;const {signal:y}=b._abortController;b.promise=f(y);b.promise.then(t=>{b._result=p(t);b._cleanup()},t=>{b._result=q(t);b._cleanup()});b._abortHandle=n.onAbort(l,b.abort);return b}r._inherits(c,a);var m=r._createSuper(c);a=c.prototype;a.normalizeCtorArgs=function(){return{}};a.destroy=function(){this.abort()};a._cleanup=function(){this._abortHandle=h.removeMaybe(this._abortHandle);this._abortController=
null};r._createClass(c,[{key:"value",get:function(){return u(this._result)}},{key:"error",get:function(){return v(this._result)}},{key:"finished",get:function(){return h.isSome(this._result)}}]);return c}(w);g.__decorate([k.property()],e.prototype,"value",null);g.__decorate([k.property()],e.prototype,"error",null);g.__decorate([k.property()],e.prototype,"finished",null);g.__decorate([k.property()],e.prototype,"promise",void 0);g.__decorate([k.property()],e.prototype,"_result",void 0);e=g.__decorate([x.subclass("esri.core.asyncUtils.ReactiveTask")],
e);d.assertResult=function(a){if(!0===a.ok)return a.value;throw a.error;};d.createTask=function(a,c){return new e(a,c)};d.forEach=function(a,c,m){return n.eachAlways(a.map((f,l)=>c.apply(m,[f,l])))};d.makeResultError=q;d.makeResultOk=p;d.map=async function(a,c,m){return(await n.eachAlways(a.map((f,l)=>c.apply(m,[f,l])))).map(f=>f.value)};d.result=async function(a){if(h.isNone(a))return{ok:!1,error:Error("no promise provided")};try{return p(await a)}catch(c){return q(c)}};d.resultError=v;d.resultOrAbort=
async function(a){try{return p(await a)}catch(c){return n.throwIfAbortError(c),q(c)}};d.resultValue=u;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});