// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../chunks/_rollupPluginBabelHelpers","./executionError","../chunks/datetime"],function(g,p,z,e){function q(b){if(b instanceof e.Zone)return b;if("system"===b.toLowerCase())return"system";if("utc"===b.toLowerCase())return"utc";if("unknown"===b.toLowerCase())return h.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(b)){const d=e.FixedOffsetZone.parseSpecifier("UTC"+(b.startsWith("+")||b.startsWith("-")?"":"+")+b);if(d)return d}b=e.IANAZone.create(b);if(!b.isValid)throw new w(g.ArcadeDateErrorCodes.TimeZoneNotRecognised);
return b}let h=p._createClass(function(){});h.instance=new e.IANAZone("Etc/UTC");g.ArcadeDateErrorCodes=void 0;(g.ArcadeDateErrorCodes||(g.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const x={[g.ArcadeDateErrorCodes.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};let w=function(b){function d(c,f){c=a.call(this,z.doSubstitutions(x[c],f));c.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(p._assertThisInitialized(c),
d);return c}p._inherits(d,b);var a=p._createSuper(d);return p._createClass(d)}(p._wrapNativeSuper(Error)),B=function(){function b(a){this._date=a;this.declaredRootClass="esri.arcade.arcadedate"}b.fromParts=function(a=0,c=1,f=1,y=0,k=0,l=0,m=0,A){if(isNaN(a)||isNaN(c)||isNaN(f)||isNaN(y)||isNaN(k)||isNaN(l)||isNaN(m))return null;let r=0;var n=e.DateTime.local(a,c).daysInMonth;1>f&&(r=f-1,f=1);f>n&&(r=f-n,f=n);n=0;12<c?(n=c-12,c=12):1>c&&(n=c-1,c=1);let t=0;59<k?(t=k-59,k=59):0>k&&(t=k,k=0);let u=0;
59<l?(u=l-59,l=59):0>l&&(u=l,l=0);let v=0;999<m?(v=m-999,m=999):0>m&&(v=m,m=0);a=e.DateTime.fromObject({day:f,year:a,month:c,hour:y,minute:k,second:l,millisecond:m},{zone:q(A)});0!==n&&(a=a.plus({months:n}));0!==r&&(a=a.plus({days:r}));0!==t&&(a=a.plus({minutes:t}));0!==u&&(a=a.plus({seconds:u}));0!==v&&(a=a.plus({milliseconds:v}));return new b(a)};b.arcadeDateAndZoneToArcadeDate=function(a,c){const f=q(c);return a.isUnknownTimeZone||f===h.instance?b.fromParts(a.year,a.monthJS+1,a.day,a.hour,a.minute,
a.second,a.millisecond,f):new b(a._date.setZone(c))};b.dateJSToArcadeDate=function(a){return new b(e.DateTime.fromJSDate(a,{zone:"system"}))};b.dateJSAndZoneToArcadeDate=function(a,c="system"){return new b(e.DateTime.fromJSDate(a,{zone:c}))};b.unknownEpochToArcadeDate=function(a){return new b(e.DateTime.fromMillis(a,{zone:h.instance}))};b.unknownDateJSToArcadeDate=function(a){return new b(e.DateTime.fromMillis(a.getTime(),{zone:h.instance}))};b.epochToArcadeDate=function(a,c="system"){return new b(e.DateTime.fromMillis(a,
{zone:c}))};b.dateTimeToArcadeDate=function(a){return new b(a)};var d=b.prototype;d.changeTimeZone=function(a){a=q(a);return b.dateTimeToArcadeDate(this._date.setZone(a))};b.dateTimeAndZoneToArcadeDate=function(a,c){c=q(c);return a.zone===h.instance||c===h.instance?b.fromParts(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond,c):new b(a.setZone(c))};b.nowToArcadeDate=function(a){return new b(e.DateTime.fromJSDate(new Date,{zone:a}))};b.nowUTCToArcadeDate=function(){return new b(e.DateTime.utc())};
d.equals=function(a){return this.isSystem&&a.isSystem?this.toNumber()===a.toNumber():this.isUnknownTimeZone!==a.isUnknownTimeZone?!1:this._date.equals(a._date)};d.stringify=function(){return JSON.stringify(this.toJSDate())};d.plus=function(a){return new b(this._date.plus(a))};d.diff=function(a,c="milliseconds"){return this._date.diff(a._date,c)[c]};d.toISOString=function(a){return a?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};
d.toFormat=function(a,c){return this._date.toFormat(a,c)};d.toJSDate=function(){return this._date.toJSDate()};d.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};d.toDateTime=function(){return this._date};d.toNumber=function(){return this._date.toMillis()};d.getTime=function(){return this._date.toMillis()};d.toUTC=function(){return new b(this._date.toUTC())};d.toLocal=function(){return new b(this._date.toLocal())};d.toString=function(){return this.toISOString(!0)};
p._createClass(b,[{key:"isSystem",get:function(){return"system"===this.timeZone||this.timeZone===b.systemTimeZoneCanonicalName}},{key:"isUnknownTimeZone",get:function(){return this._date.zone===h.instance}},{key:"isValid",get:function(){return this._date.isValid}},{key:"hour",get:function(){return this._date.hour}},{key:"second",get:function(){return this._date.second}},{key:"day",get:function(){return this._date.day}},{key:"dayOfWeekISO",get:function(){return this._date.weekday}},{key:"dayOfWeekJS",
get:function(){let a=this._date.weekday;6<a&&(a=0);return a}},{key:"millisecond",get:function(){return this._date.millisecond}},{key:"monthISO",get:function(){return this._date.month}},{key:"weekISO",get:function(){return this._date.weekNumber}},{key:"yearISO",get:function(){return this._date.weekYear}},{key:"monthJS",get:function(){return this._date.month-1}},{key:"year",get:function(){return this._date.year}},{key:"minute",get:function(){return this._date.minute}},{key:"zone",get:function(){return this._date.zone}},
{key:"timeZoneOffset",get:function(){return this.isUnknownTimeZone?0:this._date.offset}},{key:"timeZone",get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const a=this.zone;return"fixed"===a.type?0===a.fixed?"utc":a.formatOffset(0,"short"):a.name}}],[{key:"systemTimeZoneCanonicalName",get:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}}]);return b}();g.ArcadeDate=B;g.ArcadeDateError=w;g.ArcadeDateErrorMessages=
x;g.UnknownTimeZone=h;g.createDateTimeZone=q;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});