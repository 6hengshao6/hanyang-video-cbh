// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../core/Error ../../../core/maybe ../../../intl/number ../../../renderers/support/rasterRendererHelper ../support/utils".split(" "),function(g,d,e,h,k,n){async function p(a){a=await n.processRasterRendererParameters(a);const f=a.layer,{rasterInfo:b}=f;if(1<b.bandCount)throw new d("raster-class-breaks-renderer:not-supported","Multiband raster is not supported");const {attributeTable:c}=b;a.field||(a.field=k.getField(c,"value")?.name??"value");if(!(e.isSome(c)&&c.fields.find(q=>
q.name.toLowerCase()===a.field?.toLowerCase())||e.isSome(b.histograms))&&(await f.updateRasterInfoWithEstimatedStats({renderingRule:a.renderingRule,signal:a.signal}),e.isNone(b.histograms)))throw new d("raster-class-breaks-renderer:not-supported","Histograms or raster attribute table is required on the source raster. Unable to estimate histograms");const {colors:l,numClasses:m}=a;if(l&&m&&l.length!==m)throw new d("raster-class-breaks-renderer:not-supported","The size of the `colors` parameter does not match 'numClasses'");
a.classificationMethod||(a.classificationMethod="natural-breaks");return a}g.createRenderer=async function(a){a=await p(a);a=k.createClassBreaksRenderer(a.layer.rasterInfo,a);if(e.isNone(a))throw new d("raster-class-breaks-renderer:not-supported","Class breaks renderer is not supported on this data");const f={minValue:a.minValue,maxValue:a.classBreakInfos[a.classBreakInfos.length-1].maxValue,normalizationTotal:null,classBreakInfos:a.classBreakInfos.map(b=>{var c=b.maxValue;c=h.formatNumber(b.minValue,
{maximumFractionDigits:3})+" - "+h.formatNumber(c,{maximumFractionDigits:3});b.label=c;return{minValue:b.minValue,maxValue:b.maxValue,label:c}})};return{renderer:a,classBreaksResult:f}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});