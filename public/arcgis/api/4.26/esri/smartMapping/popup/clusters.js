// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../PopupTemplate ../../core/Error ../../core/maybe ../../intl/messages ./support/clusterUtils ../../views/2d/layers/support/clusterUtils".split(" "),function(f,g,m,h,n,k,p){async function q(a){const {layer:c,renderer:d}=a;await c.load();a=d||c.renderer;if(!p.isClusterCompatibleRenderer(a))throw new m("clusters-popup:invalid-parameters","'renderer' is not valid");return{layer:c,renderer:a}}f.getTemplates=async function(a){const [{renderer:c,layer:d},e]=await Promise.all([q(a),n.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]);
a=await k.getContentAndInfos(d,c,e);if(!h.isSome(a))return null;a={name:"clusters",title:e.clusters.templateTitle,value:new g({fieldInfos:a.fieldInfos,expressionInfos:a.expressionInfos,content:a.content,title:e.clusters.clusterPopupTitle})};const l=[];var b=d.featureReduction;b=b&&"renderer"in b?b.renderer:null;"pie-chart"===b?.type&&(b=await k.getContentAndInfosForPieChart(d,b,e),h.isSome(b)&&l.push({name:"clusters-pie-chart",title:"clusters-pie-chart",value:new g({fieldInfos:b.fieldInfos,expressionInfos:b.expressionInfos,
content:b.content,title:e.clusters.clusterPopupTitle})}));return{primaryTemplate:a,secondaryTemplates:l}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});