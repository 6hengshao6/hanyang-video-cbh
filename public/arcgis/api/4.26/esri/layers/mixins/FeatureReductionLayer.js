// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../support/AggregateField ../support/featureReductionUtils ../../views/2d/layers/support/clusterUtils".split(" "),function(h,f,k,l,v,w,x,m,n,p,q){h.FeatureReductionLayer=d=>{d=function(r){function e(...a){var b=t.call(this,...a);b.own(b.watch("renderer",
()=>{if(b.featureReduction){const c=b._normalizeFeatureReduction(b.featureReduction);b._set("featureReduction",c)}},!0));return b}f._inherits(e,r);var t=f._createSuper(e);e.prototype._normalizeFeatureReduction=function(a){if("cluster"!==a?.type)return a;const b=a.clone(),c=[new n({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],g=(b.fields??[]).filter(u=>!u.isAutoGenerated);if(a.renderer&&!a.renderer.authoringInfo?.isAutoGenerated)return b.fields=[...c,...g],b;if(a.symbol)return b.fields=
[...c,...g],b.renderer=null,b;if(!this.renderer)return a;a=q.createClusterRenderer(c,this.renderer,a,null,!1);b.fields=[...c,...g];b.renderer=a;return b};f._createClass(e,[{key:"featureReduction",set:function(a){a=this._normalizeFeatureReduction(a);this._set("featureReduction",a)}},{key:"renderer",set:function(a){}}]);return e}(d);k.__decorate([l.property(p.featureReductionProperty)],d.prototype,"featureReduction",null);return d=k.__decorate([m.subclass("esri.layers.mixins.FeatureReductionLayer")],
d)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});