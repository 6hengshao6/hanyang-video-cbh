// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/Error ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,g,t,u,l,B,C,D,E,v){const m=new u.EventEmitter,n=Symbol("esri.layers.mixins.EditBusLayer");f.EditBusLayer=c=>{c=function(w){function k(...x){var a=y.call(this,...x);a[z]=!0;a.when().then(()=>{a.own([m.on("edits",b=>{const A="layer"in
b?b.layer?.url:b.serviceUrl,p="layer"in b?b.layer?.layerId:b.layerId;var e=b.event;if(("layer"in b?b.layer:null)!==g._assertThisInitialized(a)&&A===a.url)if(null!=p&&null!=a.layerId&&p===a.layerId)a.emit("edits",l.clone(e));else if(b=e.editedFeatures?.find(({layerId:h})=>h===a.layerId)){const {adds:h,updates:q,deletes:r}=b.editedFeatures;e={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:h?h.map(({attributes:d})=>({objectId:a.objectIdField&&d[a.objectIdField],
globalId:a.globalIdField&&d[a.globalIdField]})):[],deletedFeatures:r?r.map(({attributes:d})=>({objectId:a.objectIdField&&d[a.objectIdField],globalId:a.globalIdField&&d[a.globalIdField]})):[],updatedFeatures:q?q.map(({current:{attributes:d}})=>({objectId:a.objectIdField&&d[a.objectIdField],globalId:a.globalIdField&&d[a.globalIdField]})):[],editedFeatures:l.clone(e.editedFeatures),exceededTransferLimit:!1};a.emit("edits",e)}})])},()=>{});return a}g._inherits(k,w);var y=g._createSuper(k);return g._createClass(k)}(c);
var z=n;return c=t.__decorate([v.subclass("esri.layers.mixins.EditBusLayer")],c)};f.editEventBus=m;f.isEditBusLayer=function(c){return null!=c&&"object"===typeof c&&n in c};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});