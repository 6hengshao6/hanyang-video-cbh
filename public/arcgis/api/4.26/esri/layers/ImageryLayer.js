// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageBitmapUtils ../support/imageryRendererUtils ../support/MosaicRule ../support/MultidimensionalSubset ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterDatasets/multidimensionalUtils ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/has ../support/source/DataLayerSource ../../rest/query/executeQueryJSON ../../config ../../kernel ../../core/unitUtils ../../geometry/support/spatialReferenceUtils ../graphics/featureConversionUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../rest/support/FeatureSet ../../rest/support/Query ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../rest/query/executeForIds ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/imageService/fetchRasterInfo ../../rest/imageService/getCatalogItemRasterInfo ../../rest/support/ImageAngleParameters ../../rest/support/ImageAreaParameters ../../rest/support/ImageDistanceParameters ../../rest/support/ImageHeightParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImagePointParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n,k,v,h,m,w,B,a,f,g,e,b,d,t,q,z,E,F,M,I,J,r,y,N,P,R,X,U,W,Z,da,ea,aa,T,V,Y,ba,fa,ja,ia,ua,ma,ta,wa,Ba,ya,Aa,sa,va,Ia,Ga,La,Ma,Oa,Ja,Ka,Ua,Va,Ya,Za,$a,ab,Ra){function bb(na){return na?(na=JSON.stringify(na).match(/"rasterFunction":"(.*?")/gi)?.map(Ea=>Ea.replace('"rasterFunction":"',"").replace('"',"")))?na.join("/"):null:null}const Sa=Q.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",
UNKNOWN:"unknown"}),cb=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),db=k.ensureRange(v.ensureNumber,{min:0,max:255});H.ArcGISImageService=na=>{function Ea(ka){return ka?.path??""}na=function(ka){function Na(){var D=eb.apply(this,arguments);D._functionRasterInfos={};D._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};D._cachedRendererJson=null;D._serviceSupportsMosaicRule=null;D._rasterAttributeTableFieldPrefix="Raster.";D.adjustAspectRatio=null;D.bandIds=
void 0;D.capabilities=null;D.compressionQuality=void 0;D.compressionTolerance=.01;D.copyright=null;D.defaultMosaicRule=null;D.definitionExpression=null;D.exportImageServiceParameters=null;D.rasterInfo=null;D.fields=null;D.fullExtent=null;D.hasMultidimensions=!1;D.imageMaxHeight=4100;D.imageMaxWidth=4100;D.interpolation=void 0;D.minScale=0;D.maxScale=0;D.multidimensionalInfo=null;D.multidimensionalSubset=null;D.noData=null;D.noDataInterpretation=void 0;D.objectIdField=null;D.geometryType="polygon";
D.typeIdField=null;D.types=[];D.pixelFilter=null;D.raster=void 0;D.sourceType=null;D.viewId=void 0;D.symbolizer=null;D.rasterFunctionInfos=null;D.serviceDataType=null;D.spatialReference=null;D.pixelType=null;D.serviceRasterInfo=null;D.sourceJSON=null;D.url=null;D.version=void 0;return D}x._inherits(Na,ka);var eb=x._createSuper(Na);ka=Na.prototype;ka.initialize=function(){this._set("exportImageServiceParameters",new f.ExportImageServiceParameters({layer:this}))};ka.readServiceSupportsMosaicRule=function(D,
S){return this._isMosaicRuleSupported(S)};ka.readBandIds=function(D,S){if(Array.isArray(D)&&0<D.length&&D.every(ca=>"number"===typeof ca))return D};ka.readCapabilities=function(D,S){return this._readCapabilities(S)};ka.writeCompressionQuality=function(D,S,ca){null!=D&&"lerc"!==this.format&&(S[ca]=D)};ka.writeCompressionTolerance=function(D,S,ca){"lerc"===this.format&&null!=D&&(S[ca]=D)};ka.readDefaultMosaicRule=function(D,S){return this._serviceSupportsMosaicRule?t.fromJSON(S):null};ka.readFormat=
function(D,S){return"esriImageServiceDataTypeVector-UV"===S.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===S.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};ka.readMinScale=function(D,S){return null!=S.minLOD&&null!=S.maxLOD?D:0};ka.readMaxScale=function(D,S){return null!=S.minLOD&&null!=S.maxLOD?D:0};ka.readMosaicRule=function(D,S){return(D=D||S.mosaicRule)?t.fromJSON(D):this._isMosaicRuleSupported(S)?t.fromJSON(S):null};ka.writeMosaicRule=function(D,S,ca){D=this.mosaicRule;
const ha=this.definitionExpression;D?ha&&ha!==D.where&&(D=D.clone(),D.where=ha):ha&&(D=new t({where:ha}));this._isValidCustomizedMosaicRule(D)&&(S[ca]=D.toJSON())};ka.writeNoData=function(D,S,ca){null!=D&&"number"===typeof D&&(S[ca]=db(D))};ka.readObjectIdField=function(D,S){D||(D=(D=S.fields.filter(ca=>"esriFieldTypeOID"===ca.type||"oid"===ca.type))&&D[0]&&D[0].name);return D};ka.readSourceType=function(D,S){return this._isMosaicDataset(S)?"mosaic-dataset":"raster-dataset"};ka.readRenderer=function(D,
S,ca){D=S?.layerDefinition?.drawingInfo?.renderer;ca=K.read(D,ca);if(null==ca)return null;"vector-field"===ca.type&&S.symbolTileSize&&!D.symbolTileSize&&(ca.symbolTileSize=S.symbolTileSize);d.isSupportedRendererType(ca)||p.getLogger(this.declaredClass).warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return ca};ka.writeRenderer=function(D,S,ca){S.layerDefinition=S.layerDefinition||{};S.layerDefinition.drawingInfo=S.layerDefinition.drawingInfo||{};S.layerDefinition.drawingInfo.renderer=
D.toJSON();"vector-field"===D.type&&(S.symbolTileSize=D.symbolTileSize)};ka.readRenderingRule=function(D,S){D=S.rasterFunctionInfos;return S.renderingRule||D&&D.length&&"None"!==D[0].name?this._isRFTJson(S.renderingRule)?F.fromJSON({rasterFunctionDefinition:S.renderingRule}):F.fromJSON(S.renderingRule||{rasterFunctionInfos:S.rasterFunctionInfos}):null};ka.writeRenderingRule=function(D,S,ca){D=D.toJSON();S[ca]=D.rasterFunctionDefinition?D.rasterFunctionDefinition:D};ka.readSpatialReference=function(D,
S){return(D=D||S.extent.spatialReference)?Ra.fromJSON(D):null};ka.readPixelType=function(D){return Sa.fromJSON(D)||D};ka.writePixelType=function(D,S,ca){if(c.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)S[ca]=Sa.toJSON(D)};ka.readVersion=function(D,S){(D=S.currentVersion)||(D=S.hasOwnProperty("fields")||S.hasOwnProperty("timeInfo")?10:9.3);return D};ka.applyFilter=function(D){let S=D;this.pixelFilter&&(S=this._clonePixelData(D),this.pixelFilter(S));return S};ka.applyRenderer=
async function(D,S){var ca=D;const {renderer:ha,symbolizer:pa,pixelFilter:la,bandIds:ra}=this;if(!this._isPicture()&&ha&&pa&&!la){ca=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(ha.toJSON());const oa=this._rasterJobHandler.instance;oa?(ca&&(pa.bind(),await oa.updateSymbolizer(pa,S),this._cachedRendererJson=ha.toJSON()),S=await oa.symbolize({bandIds:ra,...D},S),ca={extent:D.extent,pixelBlock:S}):ca={extent:D.extent,pixelBlock:pa.symbolize({bandIds:ra,...D})}}return ca};ka.destroy=function(){this._shutdownJobHandler()};
ka.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};ka.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};ka.computeAngles=async function(D,S){if(!(await this._fetchCapabilities(S?.signal)).operations.supportsComputeAngles)throw new L("imagery-layer:compute-angles","this operation is not supported on the input image service");D=v.ensureClass(Ma,D).clone();return R.computeAngles(this.url,
D,this._getRequestOptions(S))};ka.computePixelSpaceLocations=async function(D,S){if(!(await this._fetchCapabilities(S?.signal)).operations.supportsComputePixelLocation)throw new L("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");D=v.ensureClass(Ya,D).clone();return R.computePixelSpaceLocations(this.url,D,this._getRequestOptions(S))};ka.computeHistograms=async function(D,S){if(!(await this._fetchCapabilities(S?.signal)).operations.supportsComputeHistograms)throw new L("imagery-layer:compute-histograms",
"this operation is not supported on the input image service");D=v.ensureClass(Ua,D).clone();this._applyMosaicAndRenderingRules(D);return R.computeHistograms(this.url,D,this._getRequestOptions(S))};ka.computeStatisticsHistograms=async function(D,S){if(!(await this._fetchCapabilities(S?.signal)).operations.supportsComputeStatisticsHistograms)throw new L("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");D=v.ensureClass(Ua,D).clone();this._applyMosaicAndRenderingRules(D);
return R.computeStatisticsHistograms(this.url,D,this._getRequestOptions(S))};ka.measureHeight=async function(D,S){const ca=await this._fetchCapabilities(S?.signal);if(!("base-and-top"===D.operationType?ca.mensuration.supportsHeightFromBaseAndTop:"base-and-top-shadow"===D.operationType?ca.mensuration.supportsHeightFromBaseAndTopShadow:ca.mensuration.supportsHeightFromTopAndTopShadow))throw new L("imagery-layer:measure-height","this operation is not supported on the input image service");D=v.ensureClass(Ka,
D).clone();this._applyMosaicAndRenderingRules(D);return R.measureHeight(this.url,D,this._getRequestOptions(S))};ka.measureAreaAndPerimeter=async function(D,S){const ca=await this._fetchCapabilities(S?.signal);if(!ca.mensuration.supportsAreaAndPerimeter||D.is3D&&!ca.mensuration.supports3D)throw new L("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");D=v.ensureClass(Oa,D).clone();this._applyMosaicAndRenderingRules(D);return R.measureAreaAndPerimeter(this.url,
D,this._getRequestOptions(S))};ka.measureDistanceAndAngle=async function(D,S){const ca=await this._fetchCapabilities(S?.signal);if(!ca.mensuration.supportsDistanceAndAngle||D.is3D&&!ca.mensuration.supports3D)throw new L("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");D=v.ensureClass(Ja,D).clone();this._applyMosaicAndRenderingRules(D);return R.measureDistanceAndAngle(this.url,D,this._getRequestOptions(S))};ka.measurePointOrCentroid=async function(D,
S){const ca=await this._fetchCapabilities(S?.signal);if(!ca.mensuration.supportsPointOrCentroid||D.is3D&&!ca.mensuration.supports3D)throw new L("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");D=v.ensureClass(Za,D).clone();this._applyMosaicAndRenderingRules(D);return R.measurePointOrCentroid(this.url,D,this._getRequestOptions(S))};ka.getField=function(D){const {fieldsIndex:S}=this;return c.isSome(S)?S.get(D):void 0};ka.getFieldDomain=function(D,
S){return(D=this.getField(D))?D.domain:null};ka.fetchImage=async function(D,S,ca,ha={}){if(null==D||null==S||null==ca)throw new L("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){var pa=await this.generateRasterInfo(this.renderingRule,{signal:ha.signal});pa&&(this.rasterInfo=pa)}pa=this.getExportImageServiceParameters(D,S,ca,ha.timeExtent);if(null==pa){if(ha.requestAsImageElement&&
this._canRequestImageElement(this.format))return D=document.createElement("canvas"),D.width=S,D.height=ca,ha.returnImageBitmap?{imageBitmap:await b.createBitmap(D,`${Ea(this.parsedUrl)}/exportImage`)}:{imageOrCanvasElement:D};const {bandIds:ra,rasterInfo:oa}=this;ha=(ra?.length||oa.bandCount)??0;pa=S*ca;var la=oa.pixelType;const za=[];for(let qa=0;qa<ha;qa++)za.push(z.createEmptyBand(la,pa));return{pixelData:{pixelBlock:new z({width:S,height:ca,pixels:za,mask:new Uint8Array(pa),pixelType:la}),extent:D}}}la=
!!ha.requestAsImageElement&&!this.pixelFilter;return this._requestArrayBuffer({imageServiceParameters:pa,imageProps:{extent:D,width:S,height:ca,format:this.format},requestAsImageElement:la,returnImageBitmap:la&&!!ha.returnImageBitmap,signal:ha.signal})};ka.fetchKeyProperties=function(D){return O(Ea(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version?D?.renderingRule:null})}).then(S=>S.data)};ka.fetchRasterAttributeTable=function(D){return 10.1>this.version?
Promise.reject(new L("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):O(Ea(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version?D?.renderingRule:null})}).then(S=>ta.fromJSON(S.data))};ka.getCatalogItemRasterInfo=function(D,S){const ca=this._getQueryParams();S={...S,query:ca};return La.getCatalogItemRasterInfo(Ea(this.parsedUrl),D,S)};ka.getCatalogItemICSInfo=async function(D,S){var {data:ca}=await O(Ea(this.parsedUrl)+"/"+D+"/info/ics",
{query:this._getQueryParams(),...S});if(ca=ca&&ca.ics){var ha=null;try{ha=(await O(Ea(this.parsedUrl)+"/"+D+"/info",{query:this._getQueryParams(),...S})).data.extent}catch{}if(!ha||!ha.spatialReference)return{ics:ca,icsToPixelTransform:null,icsExtent:null,northDirection:null};var pa=10.7<=this.version?O(Ea(this.parsedUrl)+"/"+D+"/info/icstopixel",{query:this._getQueryParams(),...S}).then(xa=>xa.data).catch(()=>({})):{},la=ha.spatialReference,ra={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",
geometries:[ha]}),inSR:la.wkid||JSON.stringify(la),outSR:"0:"+D};ra=O(Ea(this.parsedUrl)+"/project",{query:this._getQueryParams(ra),...S}).then(xa=>xa.data).catch(()=>({}));var oa=(ha.xmin+ha.xmax)/2,za=(ha.ymax-ha.ymin)/6;ha=ha.ymin+za;var qa=[];for(let xa=0;5>xa;xa++)qa.push({x:oa,y:ha+za*xa});D={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:qa}),inSR:la.wkid||JSON.stringify(la),outSR:"0:"+D};S=O(Ea(this.parsedUrl)+"/project",{query:this._getQueryParams(D),...S}).then(xa=>
xa.data).catch(()=>({}));D=await Promise.all([pa,ra,S]);S=D[0].ipxf;null==S&&(pa=ca.geodataXform?.xf_0,"topup"===pa?.name?.toLowerCase()&&6===pa?.coefficients?.length&&(S={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:pa.coefficients,cellsizeRatio:0,type:"GeometricXform"}}));if(pa=V.fromJSON(D[1]&&D[1].geometries&&D[1].geometries[0]))pa.spatialReference=new Ra({wkid:0,imageCoordinateSystem:ca});D=D[2].geometries?D[2].geometries.filter(xa=>null!=xa&&null!=xa.x&&
null!=xa.y&&"NaN"!==xa.x&&"NaN"!==xa.y):[];ra=D.length;if(3>ra)return{ics:ca,icsToPixelTransform:S,icsExtent:pa,northDirection:null};ha=za=oa=la=0;for(qa=0;qa<ra;qa++)la+=D[qa].x,oa+=D[qa].y,za+=D[qa].x*D[qa].x,ha+=D[qa].x*D[qa].y;ra=(ra*ha-la*oa)/(ra*za-la*la);la=0;oa=D[4].x>D[0].x;D=D[4].y>D[0].y;Infinity===ra?la=D?90:270:0===ra?la=oa?0:180:0<ra?la=oa?180*Math.atan(ra)/Math.PI:180*Math.atan(ra)/Math.PI+180:0>ra&&(la=D?180+180*Math.atan(ra)/Math.PI:360+180*Math.atan(ra)/Math.PI);return{ics:ca,icsToPixelTransform:S,
icsExtent:pa,northDirection:la}}};ka.generateRasterInfo=async function(D,S){D=v.ensureClass(F,D);if(this.serviceRasterInfo&&(!D||"none"===D.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(D)))return this.serviceRasterInfo;const ca=bb(D);if(!ca)return null;if(this._functionRasterInfos[ca])return this._functionRasterInfos[ca];D=this._generateRasterInfo(D,S);this._functionRasterInfos[ca]=D;try{return await D}catch{return this._functionRasterInfos[ca]=null}};ka.getExportImageServiceParameters=
function(D,S,ca,ha){D=D.clone().shiftCentralMeridian();const pa=R.getImageSpatialReferenceQueryParameter(D.spatialReference,Ea(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const la=this.exportImageServiceParameters.toJSON(),{bandIds:ra,noData:oa}=la;var {renderingRule:za}=la,qa=this.renderingRule?.rasterFunctionDefinition,xa=!this.renderer||"raster-stretch"===this.renderer.type;ra?.length&&this._hasRenderingRule(this.renderingRule)&&
!qa&&xa?(qa={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:ra}},"Stretch"===za.rasterFunction?(qa.rasterFunctionArguments.Raster=za.rasterFunctionArguments.Raster,za.rasterFunctionArguments.Raster=qa):"Colormap"===za.rasterFunction?(xa=za.rasterFunctionArguments.Raster,"Stretch"===xa?.rasterFunction?(qa.rasterFunctionArguments.Raster=xa.rasterFunctionArguments.Raster,xa.rasterFunctionArguments.Raster=qa):(qa.rasterFunctionArguments.Raster=xa,za.rasterFunctionArguments.Raster=qa)):
(qa.rasterFunctionArguments.Raster=za,za=qa),la.bandIds=void 0):la.bandIds=ra?.join(",");oa instanceof Array&&0<oa.length&&(la.noData=oa.join(","));ha=this._processMultidimensionalIntersection(null,ha,this.exportImageServiceParameters.mosaicRule);if(ha.isOutSide)return null;la.mosaicRule=c.isSome(ha.mosaicRule)?JSON.stringify(ha.mosaicRule):null;ha=ha.timeExtent;la.renderingRule=this._getRenderingRuleString(F.fromJSON(za));za={};if(c.isSome(ha)){const {start:Ca,end:Ha}=ha.toJSON();if(Ca&&Ha&&Ca===
Ha)za.time=""+Ca;else if(null!=Ca||null!=Ha)za.time=`${null==Ca?"null":Ca},${null==Ha?"null":Ha}`}return{bbox:D.xmin+","+D.ymin+","+D.xmax+","+D.ymax,bboxSR:pa,imageSR:pa,size:S+","+ca,...la,...za}};ka.getSamples=async function(D,S){if(!(await this._fetchCapabilities(S?.signal))?.operations.supportsGetSamples)throw new L("imagery-layer:get-samples","getSamples operation is not supported on the input image service");D=v.ensureClass($a,D).clone();const {raster:ca}=this;ca&&null==D.raster&&(D.raster=
ca);return R.getSamples(this.url,D,this._getRequestOptions(S))};ka.identify=async function(D,S){if(!(await this._fetchCapabilities(S?.signal)).operations.supportsIdentify)throw new L("imagery-layer:identify","identify operation is not supported on the input image service");D=v.ensureClass(Va,D).clone();const ca=this._processMultidimensionalIntersection(D.geometry,D.timeExtent,D.mosaicRule||this.mosaicRule);if(ca.isOutSide)throw new L("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");
D.timeExtent=c.unwrap(ca.timeExtent);D.mosaicRule=c.unwrap(ca.mosaicRule);const {raster:ha,renderingRule:pa}=this;pa&&null==D.renderingRule&&(D.renderingRule=pa);ha&&null==D.raster&&(D.raster=ha);return R.identify(this.url,D,this._getRequestOptions(S))};ka.createQuery=function(){const D=new wa;D.outFields=["*"];D.returnGeometry=!0;D.where=this.definitionExpression||"1\x3d1";return D};ka.queryRasters=async function(D,S){({query:D,requestOptions:S}=await this._prepareForQuery(D,S));return W.executeQueryJSON(this.url,
D,S)};ka.queryObjectIds=async function(D,S){({query:D,requestOptions:S}=await this._prepareForQuery(D,S));return sa.executeForIds(this.url,D,S)};ka.queryRasterCount=async function(D,S){({query:D,requestOptions:S}=await this._prepareForQuery(D,S));return Aa.executeForCount(this.url,D,S)};ka.queryVisibleRasters=async function(D,S){if(!D)throw new L("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const {pixelSize:ca,returnDomainValues:ha,returnTopmostRaster:pa,showNoDataRecords:la}=
S||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let ra=!1;var oa=null,za=null;const qa=this._rasterFunctionNamesIndex;if(c.isSome(D.outFields)&&(ra=D.outFields.some(Da=>!Da.toLowerCase().includes("raster.servicepixelvalue")),10.4<=this.version)){za=D.outFields.filter(Fa=>Fa.toLowerCase().includes("raster.servicepixelvalue")&&24<Fa.length).map(Fa=>{Fa=Fa.slice(25);return[this._updateRenderingRulesFunctionName(Fa,qa),Fa]});oa=za.map(Fa=>new F({functionName:Fa[0]}));
za=za.map(Fa=>Fa[1]);const {renderingRule:Da}=this;0===oa.length?Da?.functionName?(oa.push(Da),za.push(Da.functionName)):oa=null:Da?.functionName&&!oa.some(Fa=>Fa.functionName===Da.functionName)&&(oa.push(Da),za.push(Da.functionName))}const xa=c.isNone(D.outSpatialReference)||D.outSpatialReference.equals(this.spatialReference);var {multidimensionalSubset:Ca}=this;let Ha=D.timeExtent||this.timeExtent;if(Ca){const {isOutside:Da,intersection:Fa}=J.intersectMultimensionalSubset(Ca,{geometry:c.unwrap(D.geometry),
timeExtent:c.unwrap(D.timeExtent),multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(Da)throw new L("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");Fa&&c.isSome(Fa.timeExtent)&&(Ha=Fa.timeExtent)}Ca=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Ha);oa=this._getQueryParams({geometry:D.geometry,timeExtent:Ha,mosaicRule:Ca,renderingRule:10.4>
this.version?this.renderingRule:null,renderingRules:oa,pixelSize:ca,returnCatalogItems:ra,returnGeometry:xa,raster:this.raster,maxItemCount:pa?1:null});delete oa.f;oa=new Va(oa);try{await this.generateRasterInfo(this.renderingRule);const Da=await R.identify(this.url,oa,{signal:S?.signal,query:{...this.customParameters}}),Fa=D.outFields,fb=null!=Da.value&&Da.value.toLowerCase().includes("nodata");if(!ra||xa||!Da?.catalogItems?.features.length||!la&&fb)return this._processVisibleRastersResponse(Da,
{returnDomainValues:ha,templateRRFunctionNames:za,showNoDataRecords:la,templateFields:Fa});const Pa=this.objectIdField||"ObjectId",Wa=Da.catalogItems?.features??[],gb=Wa.map(Qa=>Qa.attributes?.[Pa]),hb=new wa({objectIds:gb,returnGeometry:!0,outSpatialReference:D.outSpatialReference,outFields:[Pa]}),Xa=await this.queryRasters(hb);Xa?.features?.length&&Xa.features.forEach(Qa=>{Wa.forEach(Ta=>{Ta.attributes[Pa]===Qa.attributes[Pa]&&(Ta.geometry=new ja(Qa.geometry),c.isSome(D.outSpatialReference)&&(Ta.geometry.spatialReference=
D.outSpatialReference))})});return this._processVisibleRastersResponse(Da,{returnDomainValues:ha,templateRRFunctionNames:za,showNoDataRecords:la,templateFields:Fa})}catch{throw new L("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");}};ka.fetchVariableStatisticsHistograms=async function(D,S){var ca=O(Ea(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:D}),signal:S}).then(ha=>ha.data?.statistics);D=O(Ea(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:D}),
signal:S}).then(ha=>ha.data?.histograms);ca=await Promise.all([ca,D]);ca[0]&&ca[0].forEach(ha=>{ha.avg=ha.mean;ha.stddev=ha.standardDeviation});return{statistics:ca[0]||null,histograms:ca[1]||null}};ka.createFlowMesh=async function(D,S){const ca=this._rasterJobHandler.instance;return ca?ca.createFlowMesh(D,S):ab.createFlowMesh(D.meshType,D.simulationSettings,D.flowData,c.isSome(S.signal)?S.signal:(new AbortController).signal)};ka.getMultidimensionalSubsetVariables=function(D){return J.getSubsetVariablesFromMdInfo(this.multidimensionalSubset,
D??this.serviceRasterInfo.multidimensionalInfo)};ka._fetchService=async function(D){await this._fetchServiceInfo(D);this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);var S=this.sourceJSON;S=c.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):Ga.fetchServiceRasterInfo(Ea(this.parsedUrl),S,{signal:D,query:this._getQueryParams()}).then(ha=>{this._set("serviceRasterInfo",ha);this._set("multidimensionalInfo",ha.multidimensionalInfo);return ha});D=this._hasRenderingRule(this.renderingRule)?
this.generateRasterInfo(this.renderingRule,{signal:D}):null;const ca=this._getRasterFunctionInfos();return Promise.all([S,D,ca]).then(ha=>{ha[1]?this._set("rasterInfo",ha[1]):this._set("rasterInfo",ha[0]);ha[2]&&this._set("rasterFunctionInfos",ha[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),p.getLogger(this.declaredClass).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",
this._configRenderer(this.renderer));this.addHandles([l.watch(()=>this.renderingRule,pa=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(pa).then(la=>{la&&(this.rasterInfo=la)})})]);({serviceRasterInfo:ha}=this);c.isSome(ha.multidimensionalInfo)&&this._updateMultidimensionalDefinition(ha)})};ka._combineMosaicRuleWithTimeExtent=function(D,S){var ca=this.timeInfo,{multidimensionalInfo:ha}=this.serviceRasterInfo;if(c.isNone(D)||c.isNone(ha)||c.isNone(S)||
c.isNone(ca?.startField))return D;const {startField:pa}=ca,la=ha.variables.some(qa=>qa.dimensions.some(xa=>xa.name===pa))?pa:"StdTime";D=D.clone();if("mosaic-dataset"===this.sourceType)return D.multidimensionalDefinition=D.multidimensionalDefinition?.filter(qa=>qa.dimensionName!==la),this._cleanupMultidimensionalDefinition(D);D.multidimensionalDefinition=D.multidimensionalDefinition||[];ca=D.multidimensionalDefinition.filter(qa=>qa.dimensionName===la);ha=c.isSome(S.start)?S.start.getTime():null;S=
c.isSome(S.end)?S.end.getTime():null;const ra=null==ha||null==S||ha===S,oa=ra?[ha||S]:[[ha,S]],za=10.8<=this.version;ca.length?ca.forEach(qa=>{qa.dimensionName===la&&(za?(qa.dimensionName=null,qa.isSlice=!1,qa.values=[]):(qa.isSlice=ra,qa.values=oa))}):za||(S=D.multidimensionalDefinition.filter(qa=>null!=qa.variableName&&null==qa.dimensionName),S.length?S.forEach(qa=>{qa.dimensionName=la;qa.isSlice=ra;qa.values=oa}):D.multidimensionalDefinition.push(new a({variableName:"",dimensionName:la,isSlice:ra,
values:oa})));return this._cleanupMultidimensionalDefinition(D)};ka._cleanupMultidimensionalDefinition=function(D){if(c.isNone(D))return null;D.multidimensionalDefinition&&(D.multidimensionalDefinition=D.multidimensionalDefinition.filter(S=>!(!S.variableName&&!S.dimensionName)),0===D.multidimensionalDefinition.length&&(D.multidimensionalDefinition=null));return"mosaic-dataset"!==this.sourceType&&null==D.multidimensionalDefinition?null:D};ka._prepareForQuery=async function(D,S){if(!(await this._fetchCapabilities(S?.signal)).operations.supportsQuery)throw new L("imagery-layer:query-rasters",
"query operation is not supported on the input image service");D=c.isSome(D)?v.ensureClass(wa,D):this.createQuery();S=this._getRequestOptions(S);this.raster&&(S.query={...S.query,raster:this.raster});return{query:D,requestOptions:S}};ka._initJobHandler=async function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const D=new I;this._rasterJobHandler.connectionPromise=D.initialize().then(()=>{this._rasterJobHandler.instance=D},()=>{});await this._rasterJobHandler.connectionPromise};
ka._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=null};ka._isSupportedRenderer=function(D){const {rasterInfo:S,renderingRule:ca}=this;return"unique-value"===D.type&&this._hasRenderingRule(ca)&&1===S?.bandCount&&["u8","s8"].includes(S.pixelType)||null!=S&&null!=D&&N.getSupportedRendererTypes(S).includes(D.type)};
ka._fetchCapabilities=async function(D){if(this.capabilities)return this.capabilities;await this._fetchServiceInfo(D);return this.capabilities};ka._fetchServiceInfo=async function(D){let S=this.sourceJSON;if(!S){const {data:ca,ssl:ha}=await O(Ea(this.parsedUrl),{query:this._getQueryParams(),signal:D});this.sourceJSON=S=ca;ha&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<S.capabilities?.toLowerCase().split(",").map(ca=>ca.trim()).indexOf("tilesonly"))throw new L("imagery-layer:fetch-service-info",
"use ImageryTileLayer to open tiles-only image services");this.read(S,{origin:"service",url:this.parsedUrl})};ka._isMosaicDataset=function(D){return D.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===D.serviceSourceType:0<D.fields?.length};ka._isMosaicRuleSupported=function(D){if(!D)return!1;const S=this._isMosaicDataset(D);D=10.71<=D.currentVersion&&D.hasMultidimensions&&!(1<D.fields?.length);return S||D};ka._isVectorFieldResampleFunction=function(D){if(c.isNone(D))return!1;const {functionName:S,
functionArguments:ca}=D;D="resample"===S?.toLowerCase();const ha=ca?.ResampleType||ca?.resampleType;return D&&(7===ha||10===ha)};ka._isPicture=function(){return!this.format||this.format.includes("jpg")||this.format.includes("png")};ka._configRenderer=function(D){var S=this._isPicture();const {rasterInfo:ca}=this;if(!S&&!this.pixelFilter||this._isVectorDataSet())!this.bandIds&&3<=ca.bandCount&&(!(S=N.getDefaultBandCombination(ca))||3===ca.bandCount&&0===S[0]&&1===S[1]&&2===S[2]||(this.bandIds=S)),
D||(D=N.createDefaultRenderer(ca,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName})),S=N.normalizeRendererJSON(D.toJSON()),this.symbolizer?(this.symbolizer.rendererJSON=S,this.symbolizer.rasterInfo=ca):this.symbolizer=new P({rendererJSON:S,rasterInfo:ca}),this.symbolizer.bind().success||(this.symbolizer=null);return D};ka._clonePixelData=function(D){return null==D?D:{extent:D.extent&&D.extent.clone(),pixelBlock:c.isSome(D.pixelBlock)?
D.pixelBlock.clone():null}};ka._getQueryParams=function(D){D&&c.isSome(D.renderingRule)&&"string"!==typeof D.renderingRule&&(D.renderingRule=this._getRenderingRuleString(D.renderingRule));const {raster:S,viewId:ca}=this;return{raster:S,viewId:ca,f:"json",...D,...this.customParameters}};ka._getRequestOptions=function(D){return{...D,query:{...D?.query,...this.customParameters}}};ka._decodePixelBlock=function(D,S,ca){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:D,
options:S}):r.decode(D,S,ca)};ka._getRasterFunctionInfos=async function(D){const S=this.sourceJSON.rasterFunctionInfos;return this.loaded?S:S&&10.3<=this.version?1===S.length&&"none"===S[0].name.toLowerCase()?S:(await O(Ea(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:D})).data?.rasterFunctionInfos:null};ka._canRequestImageElement=function(D){return!this.pixelFilter&&(!D||D.includes("png"))};ka._requestArrayBuffer=async function(D){const {imageProps:S,requestAsImageElement:ca,
returnImageBitmap:ha,signal:pa}=D;if(ca&&this._canRequestImageElement(S.format)){var la=`${Ea(this.parsedUrl)}/exportImage`;({data:D}=await O(la,{responseType:ha?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...D.imageServiceParameters}),signal:pa}));return D instanceof Blob?{imageBitmap:await b.createBitmap(D,la),params:S}:{imageOrCanvasElement:D,params:S}}la=this._initJobHandler();D=O(Ea(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",
...D.imageServiceParameters}),signal:pa});D=(await Promise.all([D,la]))[0].data;var ra=la=S.format||"jpgpng";"bsq"!==ra&&"bip"!==ra&&(ra=r.getFormat(D));if(!ra)throw new L("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(D)));ra="gif"===la||"bmp"===la||la.includes("png")&&("png"===ra||"jpg"===ra);const oa={signal:pa};return{pixelData:{pixelBlock:await (ra?r.decode(D,{useCanvas:!0,...S},oa):this._decodePixelBlock(D,{width:S.width,height:S.height,
planes:null,pixelType:null,noDataValue:null,format:la},oa)),extent:S.extent},params:S}};ka._generateRasterInfo=function(D,S){const ca=this._getQueryParams();S={...S,query:ca};return Ga.generateRasterInfo(Ea(this.parsedUrl),D,S)};ka._isValidCustomizedMosaicRule=function(D){return D&&JSON.stringify(D.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())};ka._updateMultidimensionalDefinition=function(D){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)&&(D=J.getDefaultMultidimensionalDefinition(D,
{multidimensionalSubset:this.multidimensionalSubset}),c.isSome(D)&&0<D.length)){this.mosaicRule=this.mosaicRule||new t;const S=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.renderingRule&&"none"!==this.renderingRule.functionName?.toLowerCase()&&D.forEach(ca=>ca.variableName="");D=D.filter(({variableName:ca,dimensionName:ha})=>ca&&"*"!==ca||ha);!S?.length&&D.length&&(this.mosaicRule.multidimensionalDefinition=D)}};ka._processVisibleRastersResponse=function(D,
S){S=S||{};const ca=D.value,{templateRRFunctionNames:ha,showNoDataRecords:pa,returnDomainValues:la,templateFields:ra}=S;S=D.processedValues;var oa=D.catalogItems&&D.catalogItems.features;let za=D.properties&&D.properties.Values&&D.properties.Values.map(Da=>Da.replace(/ /gi,", "))||[];var qa=this.objectIdField||"ObjectId",xa="string"===typeof ca&&ca.toLowerCase().includes("nodata");D=[];!ca||oa||xa||(oa={},oa[qa]=0,oa=new u(this.fullExtent,null,oa),za=[ca],oa=[oa]);if(!oa)return[];this._updateResponseFieldNames(oa,
ra);xa&&!pa&&(oa=[]);for(qa=0;qa<oa.length;qa++){xa=oa[qa];if(null!=ca){var Ca=za[qa];var Ha=this.renderingRule&&S&&0<S.length&&ha&&0<ha.length&&ha.includes(this.renderingRule.functionName)?S[ha.indexOf(this.renderingRule.functionName)]:ca;if("nodata"===Ca.toLowerCase()&&!pa)continue;xa.attributes["Raster.ItemPixelValue"]=Ca;xa.attributes["Raster.ServicePixelValue"]=Ha;this._updateFeatureWithMagDirValues(xa,Ca);const Da=this.fields&&0<this.fields.length;Ha=this.renderingRule&&c.isSome(this.serviceRasterInfo.attributeTable)?
Da?Ca:ca:Ha;this.renderingRule||(Ha=Da?Ca:ca);this._updateFeatureWithRasterAttributeTableValues(xa,Ha)}xa.sourceLayer=xa.layer=this;la&&this._updateFeatureWithDomainValues(xa);if(ha&&S&&ha.length===S.length)for(Ca=0;Ca<ha.length;Ca++)xa.attributes["Raster.ServicePixelValue."+ha[Ca]]=S[Ca];D.push(oa[qa])}return D};ka._processMultidimensionalIntersection=function(D,S,ca){const {multidimensionalSubset:ha}=this;if(!ha)return ca=this._combineMosaicRuleWithTimeExtent(ca,S),{isOutSide:!1,timeExtent:S,mosaicRule:ca};
if(ha){const {isOutside:pa,intersection:la}=J.intersectMultimensionalSubset(ha,{geometry:D,timeExtent:S});if(pa)return{isOutSide:!0,timeExtent:null,mosaicRule:null};la&&c.isSome(la.timeExtent)&&(S=la.timeExtent)}ca=this._combineMosaicRuleWithTimeExtent(ca,S);return c.isSome(ca)&&ca.multidimensionalDefinition&&({isOutside:D}=J.intersectMultimensionalSubset(ha,{multidimensionalDefinition:ca.multidimensionalDefinition}),D)?{isOutSide:!0,timeExtent:null,mosaicRule:null}:{isOutSide:!1,timeExtent:S,mosaicRule:ca}};
ka._updateFeatureWithRasterAttributeTableValues=function(D,S){var ca=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(!c.isNone(ca)){var {features:ha,fields:pa}=ca,la=(ca=pa.map(oa=>oa.name).filter(oa=>"value"===oa.toLowerCase()))&&ca[0];if(la){var ra=ha.filter(oa=>oa.attributes[la]===(null!=S?parseInt(S,10):null));ra&&ra[0]&&pa.forEach(oa=>{D.attributes[this._rasterAttributeTableFieldPrefix+oa.name]=ra[0].attributes[oa.name]})}}};ka._updateFeatureWithMagDirValues=function(D,
S){if(this._isVectorDataSet()){var ca=S.split(/,\s*/).map(ha=>parseFloat(ha));S=ca.map(ha=>[ha]);ca=ca.map(ha=>({minValue:ha,maxValue:ha,noDataValue:null}));S=new z({height:1,width:1,pixelType:"f32",pixels:S,statistics:ca});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:S,extent:new V(0,0,0,0,this.spatialReference)});S="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[S.pixels[0][0],S.pixels[1][0]]:y.uvComponentToVector([S.pixels[0][0],S.pixels[1][0]]);D.attributes["Raster.Magnitude"]=
S[0];D.attributes["Raster.Direction"]=S[1]}};ka._updateFeatureWithDomainValues=function(D){const S=this.fields&&this.fields.filter(ca=>ca.domain&&"coded-value"===ca.domain.type);null!=S&&S.forEach(ca=>{const ha=D.attributes[ca.name];if(null!=ha){const pa=ca.domain.codedValues.find(la=>la.code===ha);pa&&(D.attributes[ca.name]=pa.name)}})};ka._updateResponseFieldNames=function(D,S){if(S&&!(1>S.length)){var ca=this.fieldsIndex;c.isNone(ca)||D.forEach(ha=>{if(ha&&ha.attributes)for(const pa of S){const la=
ca.get(pa)?.name;la&&la!==pa&&(ha.attributes[pa]=ha.attributes[la],delete ha.attributes[la])}})}};ka._getRenderingRuleString=function(D){if(D){D=D.toJSON();D=D.rasterFunctionDefinition??D;if(D.thumbnail||D.thumbnailEx)D.thumbnail=D.thumbnailEx=null;return JSON.stringify(D)}return null};ka._hasRenderingRule=function(D){return null!=D&&null!=D.functionName&&"none"!==D.functionName.toLowerCase()};ka._updateRenderingRulesFunctionName=function(D,S){if(D&&!(1>D.length)){if("Raw"===D)return D.replace("Raw",
"None");var ca=D.toLowerCase().replace(/ /gi,"_");return S.has(ca)?S.get(ca):D}};ka._isRFTJson=function(D){return D&&D.name&&D.arguments&&D.function&&D.hasOwnProperty("functionType")};ka._isVectorDataSet=function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType};ka._applyMosaicAndRenderingRules=function(D){const {raster:S,mosaicRule:ca,renderingRule:ha}=this;ha&&null==D.renderingRule&&(D.renderingRule=ha);ca&&null==
D.mosaicRule&&(D.mosaicRule=ca);S&&null==D.raster&&(D.raster=S)};ka._readCapabilities=function(D){const S=D.capabilities?D.capabilities.toLowerCase().split(",").map(Ca=>Ca.trim()):["image","catalog"],{currentVersion:ca,advancedQueryCapabilities:ha,maxRecordCount:pa}=D,la=S.includes("image"),ra="esriImageServiceDataTypeElevation"===D.serviceDataType;var oa=!!(D.spatialReference||D.extent&&D.extent.spatialReference);const za=S.includes("edit");oa=S.includes("mensuration")&&oa;const qa=null==D.mensurationCapabilities?
[]:D.mensurationCapabilities.toLowerCase().split(",").map(Ca=>Ca.trim()),xa=oa&&qa.includes("basic");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:la,supportsExportImage:la,supportsIdentify:la,supportsMeasure:oa,supportsDownload:S.includes("download"),supportsQuery:S.includes("catalog")&&D.fields&&0<D.fields.length,supportsGetSamples:10.2<=ca&&la,supportsProject:10.3<=ca&&la,supportsComputeStatisticsHistograms:10.4<=ca&&la,supportsQueryBoundary:10.6<=ca&&la,supportsCalculateVolume:10.7<=
ca&&ra,supportsComputePixelLocation:10.7<=ca&&S.includes("catalog"),supportsComputeAngles:10.91<=ca,supportsAdd:za,supportsDelete:za,supportsEditing:za,supportsUpdate:za,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:pa,maxRecordCountFactor:void 0,supportsStatistics:!!ha?.supportsStatistics,
supportsOrderBy:!!ha?.supportsOrderBy,supportsDistinct:!!ha?.supportsDistinct,supportsPagination:!!ha?.supportsPagination,supportsStandardizedQueriesOnly:!!ha?.useStandardizedQueries,supportsPercentileStatistics:!!ha?.supportsPercentileStatistics,supportsCentroid:!!ha?.supportsReturningGeometryCentroid,supportsDistance:!!ha?.supportsQueryWithDistance,supportsExtent:!!ha?.supportsReturningQueryExtent,supportsGeometryProperties:!!ha?.supportsReturningGeometryProperties,supportsHavingClause:!!ha?.supportsHavingClause,
supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!ha?.supportsDefaultSR,supportsFullTextSearch:!1,
supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:xa,supportsAreaAndPerimeter:xa,supportsPointOrCentroid:xa,supportsHeightFromBaseAndTop:oa&&qa.includes("base-top height"),supportsHeightFromBaseAndTopShadow:oa&&qa.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:oa&&qa.includes("top-top shadow height"),supports3D:oa&&qa.includes("3d")}}};x._createClass(Na,[{key:"_rasterFunctionNamesIndex",get:function(){const D=
new Map;if(!this.rasterFunctionInfos||c.isSome(this.rasterFunctionInfos)&&1>this.rasterFunctionInfos.length)return D;c.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(S=>{D.set(S.name.toLowerCase().replace(/ /gi,"_"),S.name)});return D}},{key:"fieldsIndex",get:function(){return this.fields?new e(this.fields):null}},{key:"format",set:function(D){D&&cb.has(D.toLowerCase())&&this._set("format",D.toLowerCase())}},{key:"mosaicRule",set:function(D){D&&D.mosaicMethod&&(D=t.fromJSON({...D.toJSON(),
mosaicMethod:D.mosaicMethod,mosaicOperation:D.mosaicOperation}));this._set("mosaicRule",D)}},{key:"parsedUrl",get:function(){return n.urlToObject(this.url)}},{key:"renderer",set:function(D){this.loaded&&(D=this._configRenderer(D));this._set("renderer",D)}},{key:"rasterFields",get:function(){const D=this._rasterAttributeTableFieldPrefix||"Raster.";var S=new g({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const ca=new g({name:"Raster.ServicePixelValue",
alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),ha=new g({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let pa=this.fields?C.clone(this.fields):[];pa.push(ca);this.capabilities?.operations.supportsQuery&&this.fields&&0<this.fields.length&&pa.push(S);10.4<=this.version&&c.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(la=>"none"===la.name.toLowerCase())&&pa.push(ha);c.isSome(this.rasterFunctionInfos)&&
this.rasterFunctionInfos.filter(la=>"none"!==la.name.toLowerCase()).forEach(la=>{pa.push(new g({name:"Raster.ServicePixelValue."+la.name,alias:la.name,domain:null,editable:!1,length:50,type:"string"}))});this._isVectorDataSet()&&(pa.push(new g({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),pa.push(new g({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));({attributeTable:S}=this.rasterInfo??{});c.isSome(S)&&(S=S.fields.filter(la=>
"esriFieldTypeOID"!==la.type&&"value"!==la.name.toLowerCase()).map(la=>{const ra=C.clone(la);ra.name=D+la.name;return ra}),pa=pa.concat(S));return pa}},{key:"renderingRule",set:function(D){D&&D.rasterFunction&&(D=F.fromJSON({...D.toJSON(),rasterFunction:D.rasterFunction,rasterFunctionArguments:D.rasterFunctionArguments}));this._set("renderingRule",D)}}]);return Na}(na);A.__decorate([k.property()],na.prototype,"_functionRasterInfos",void 0);A.__decorate([k.property()],na.prototype,"_rasterJobHandler",
void 0);A.__decorate([k.property()],na.prototype,"_cachedRendererJson",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"_serviceSupportsMosaicRule",void 0);A.__decorate([h.reader("_serviceSupportsMosaicRule",["currentVersion","fields"])],na.prototype,"readServiceSupportsMosaicRule",null);A.__decorate([k.property()],na.prototype,"_rasterAttributeTableFieldPrefix",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"_rasterFunctionNamesIndex",null);A.__decorate([k.property()],
na.prototype,"adjustAspectRatio",void 0);A.__decorate([k.property({type:[v.Integer],json:{write:!0}})],na.prototype,"bandIds",void 0);A.__decorate([h.reader("bandIds")],na.prototype,"readBandIds",null);A.__decorate([k.property({readOnly:!0,json:{read:!1}})],na.prototype,"capabilities",void 0);A.__decorate([h.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],na.prototype,"readCapabilities",null);A.__decorate([k.property({type:Number})],na.prototype,"compressionQuality",
void 0);A.__decorate([w.writer("compressionQuality")],na.prototype,"writeCompressionQuality",null);A.__decorate([k.property({type:Number})],na.prototype,"compressionTolerance",void 0);A.__decorate([w.writer("compressionTolerance")],na.prototype,"writeCompressionTolerance",null);A.__decorate([k.property({json:{read:{source:"copyrightText"}}})],na.prototype,"copyright",void 0);A.__decorate([k.property({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],na.prototype,"defaultMosaicRule",void 0);
A.__decorate([h.reader("defaultMosaicRule",["defaultMosaicMethod"])],na.prototype,"readDefaultMosaicRule",null);A.__decorate([k.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],na.prototype,"definitionExpression",void 0);A.__decorate([k.property({readOnly:!0,constructOnly:!0})],na.prototype,"exportImageServiceParameters",void 0);A.__decorate([k.property()],na.prototype,"rasterInfo",void 0);A.__decorate([k.property({readOnly:!0,type:[g]})],
na.prototype,"fields",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"fieldsIndex",null);A.__decorate([k.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],na.prototype,"format",null);A.__decorate([h.reader("service","format",["serviceDataType"])],na.prototype,"readFormat",null);A.__decorate([k.property({type:V})],na.prototype,"fullExtent",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"hasMultidimensions",void 0);A.__decorate([k.property({json:{read:{source:"maxImageHeight"}}})],
na.prototype,"imageMaxHeight",void 0);A.__decorate([k.property({json:{read:{source:"maxImageWidth"}}})],na.prototype,"imageMaxWidth",void 0);A.__decorate([k.property({type:String,json:{type:E.interpolationKebab.jsonValues,read:E.interpolationKebab.read,write:E.interpolationKebab.write}})],na.prototype,"interpolation",void 0);A.__decorate([k.property()],na.prototype,"minScale",void 0);A.__decorate([h.reader("service","minScale")],na.prototype,"readMinScale",null);A.__decorate([k.property()],na.prototype,
"maxScale",void 0);A.__decorate([h.reader("service","maxScale")],na.prototype,"readMaxScale",null);A.__decorate([k.property({type:t})],na.prototype,"mosaicRule",null);A.__decorate([h.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],na.prototype,"readMosaicRule",null);A.__decorate([w.writer("mosaicRule")],na.prototype,"writeMosaicRule",null);A.__decorate([k.property()],na.prototype,"multidimensionalInfo",void 0);A.__decorate([k.property({type:q,json:{write:!0}})],na.prototype,"multidimensionalSubset",
void 0);A.__decorate([k.property({json:{type:v.Integer}})],na.prototype,"noData",void 0);A.__decorate([w.writer("noData")],na.prototype,"writeNoData",null);A.__decorate([k.property({type:String,json:{type:E.noDataInterpretationKebab.jsonValues,read:E.noDataInterpretationKebab.read,write:E.noDataInterpretationKebab.write}})],na.prototype,"noDataInterpretation",void 0);A.__decorate([k.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],na.prototype,"objectIdField",void 0);A.__decorate([h.reader("objectIdField")],
na.prototype,"readObjectIdField",null);A.__decorate([k.property({})],na.prototype,"geometryType",void 0);A.__decorate([k.property({})],na.prototype,"typeIdField",void 0);A.__decorate([k.property({})],na.prototype,"types",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"parsedUrl",null);A.__decorate([k.property({type:Function})],na.prototype,"pixelFilter",void 0);A.__decorate([k.property()],na.prototype,"raster",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"sourceType",
void 0);A.__decorate([h.reader("sourceType",["serviceSourceType","fields"])],na.prototype,"readSourceType",null);A.__decorate([k.property()],na.prototype,"viewId",void 0);A.__decorate([k.property({types:K.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:K.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(ka){return{enabled:ka&&"vector-field"!==ka.type&&"flow"!==ka.type}}}}}}})],na.prototype,"renderer",null);
A.__decorate([h.reader("renderer")],na.prototype,"readRenderer",null);A.__decorate([w.writer("renderer")],na.prototype,"writeRenderer",null);A.__decorate([k.property()],na.prototype,"symbolizer",void 0);A.__decorate([k.property(B.opacity)],na.prototype,"opacity",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"rasterFields",null);A.__decorate([k.property({constructOnly:!0})],na.prototype,"rasterFunctionInfos",void 0);A.__decorate([k.property({type:F})],na.prototype,"renderingRule",null);
A.__decorate([h.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],na.prototype,"readRenderingRule",null);A.__decorate([w.writer("renderingRule")],na.prototype,"writeRenderingRule",null);A.__decorate([k.property()],na.prototype,"serviceDataType",void 0);A.__decorate([k.property({readOnly:!0,type:Ra})],na.prototype,"spatialReference",void 0);A.__decorate([h.reader("spatialReference",["spatialReference","extent"])],na.prototype,"readSpatialReference",null);A.__decorate([k.property({json:{type:Sa.jsonValues}})],
na.prototype,"pixelType",void 0);A.__decorate([h.reader("pixelType")],na.prototype,"readPixelType",null);A.__decorate([w.writer("pixelType")],na.prototype,"writePixelType",null);A.__decorate([k.property({constructOnly:!0,type:M})],na.prototype,"serviceRasterInfo",void 0);A.__decorate([k.property()],na.prototype,"sourceJSON",void 0);A.__decorate([k.property(B.url)],na.prototype,"url",void 0);A.__decorate([k.property({readOnly:!0})],na.prototype,"version",void 0);A.__decorate([h.reader("version",["currentVersion",
"fields","timeInfo"])],na.prototype,"readVersion",null);return na=A.__decorate([m.subclass("esri.layers.mixins.ArcGISImageService")],na)};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(H,x,A,G,u,K,O,L,Q){function C(n,k){if(!n)return null;if("classBreaks"===n.type&&n.classificationMethod){var v=n.authoringInfo||{classificationMethod:""};v.classificationMethod=n.classificationMethod;n.authoringInfo=v}"vectorField"===n.type&&n.visualVariables&&!Array.isArray(n.visualVariables)&&(n.visualVariables=[n.visualVariables]);v=n?l[n.type]||null:null;if(v)return v=new v,v.read(n,k),v;k&&k.messages&&n&&k.messages.push(new x("renderer:unsupported","Renderers of type '"+(n.type||"unknown")+
"' are not supported",{definition:n,context:k}));return null}const p={key:"type",base:null,typeMap:{"unique-value":L,"class-breaks":A,"raster-colormap":u,"raster-stretch":O,"vector-field":Q,"raster-shaded-relief":K,flow:G}},c={...p,typeMap:{...p.typeMap}};delete c.typeMap["vector-field"];delete c.typeMap.flow;const l={uniqueValue:L,classBreaks:A,rasterStretch:O,rasterColormap:u,vectorField:Q,rasterShadedRelief:K,flowRenderer:G};H.ClassBreaksRenderer=A;H.FlowRenderer=G;H.RasterColormapRenderer=u;H.RasterShadedReliefRenderer=
K;H.RasterStretchRenderer=O;H.UniqueValueRenderer=L;H.VectorFieldRenderer=Q;H.fromJSON=function(n,k){return C(n,k)};H.rasterRendererTypes=p;H.read=C;H.websceneRasterRendererTypes=c;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/FlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n,k){var v;G=new G.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});u=v=function(h){function m(B){B=w.call(this,B);B.density=.8;B.color=new A([255,255,255,1]);B.maxPathLength=200;B.trailWidth=1.5;B.flowSpeed=10;B.trailLength=100;B.smoothing=0;B.flowRepresentation="flow-from";B.type="flow";B.authoringInfo=null;B.legendOptions=null;B.trailCap="butt";B.background="none";return B}H._inherits(m,h);var w=H._createSuper(m);h=m.prototype;h.clone=function(){const {density:B,
maxPathLength:a,trailWidth:f,flowSpeed:g,trailLength:e,smoothing:b,flowRepresentation:d,trailCap:t,background:q}=this,z=this.color.clone(),E=(this.visualVariables||[]).map(I=>I.clone()),F=this.authoringInfo?.clone(),M=this.legendOptions?.clone();return new v({density:B,color:z,maxPathLength:a,trailWidth:f,flowSpeed:g,trailLength:e,trailCap:t,background:q,smoothing:b,flowRepresentation:d,visualVariables:E,authoringInfo:F,legendOptions:M})};h.getSymbol=function(B,a){};h.getSymbolAsync=async function(B,
a){};h.getSymbols=function(){return[]};return H._createClass(m)}(l.VisualVariablesMixin(u.JSONSupport));x.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"density",void 0);x.__decorate([O.property({type:A,json:{write:{allowNull:!0}}})],u.prototype,"color",void 0);x.__decorate([O.property({type:Number,cast:K.toPt,json:{write:!0}})],u.prototype,"maxPathLength",void 0);x.__decorate([O.property({type:Number,cast:K.toPt,json:{write:!0}})],u.prototype,"trailWidth",void 0);x.__decorate([O.property({type:Number,
json:{write:!0}})],u.prototype,"flowSpeed",void 0);x.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"trailLength",void 0);x.__decorate([O.property({type:Number,cast:K.toPt,json:{write:!1}})],u.prototype,"smoothing",void 0);x.__decorate([O.property({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],u.prototype,"flowRepresentation",void 0);x.__decorate([p.enumeration({flowRenderer:"flow"})],u.prototype,"type",void 0);x.__decorate([O.property({type:n,
json:{write:!0}})],u.prototype,"authoringInfo",void 0);x.__decorate([O.property({type:k.LegendOptions,json:{write:!0}})],u.prototype,"legendOptions",void 0);x.__decorate([O.property({type:String,json:{write:!0}})],u.prototype,"trailCap",void 0);x.__decorate([O.property({type:String,json:{write:!0}})],u.prototype,"background",void 0);return u=v=x.__decorate([c.subclass("esri.renderers.FlowRenderer")],u)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p){var c;A=c=function(l){function n(v){v=k.call(this,v);v.colormapInfos=null;v.type="raster-colormap";return v}H._inherits(n,l);var k=H._createSuper(n);n.createFromColormap=function(v,h){if(!v)return null;const m=5===v[0].length;v=[...v].sort(w=>w[0][0]-w[1][0]).map(w=>C.fromJSON({value:w[0],color:m?w.slice(1,5):w.slice(1,4).concat([255]),label:h?h[w[0]]??"":w[0]}));return new c({colormapInfos:v})};n.createFromColorramp=function(v){v=p.convertColorRampToColormap(v);return c.createFromColormap(v)};
l=n.prototype;l.clone=function(){return new c({colormapInfos:this.colormapInfos.map(v=>v.toJSON())})};l.extractColormap=function(){return this.colormapInfos.map(({value:v,color:h})=>[v,h.r,h.g,h.b,1<h.a?h.a:255*h.a&255]).sort((v,h)=>v[0]-h[0])};return H._createClass(n)}(A.JSONSupport);x.__decorate([G.property({type:[C],json:{write:!0}})],A.prototype,"colormapInfos",void 0);x.__decorate([L.enumeration({rasterColormap:"raster-colormap"})],A.prototype,"type",void 0);return A=c=x.__decorate([Q.subclass("esri.renderers.RasterColormapRenderer")],
A)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(H,x,A,G,u,K,O,L,Q){G=function(C){function p(){var l=c.apply(this,arguments);l.value=null;l.label=null;l.color=null;return l}H._inherits(p,C);var c=H._createSuper(p);
return H._createClass(p)}(G.JSONSupport);x.__decorate([u.property({type:Number,json:{write:!0}})],G.prototype,"value",void 0);x.__decorate([u.property({type:String,json:{write:!0}})],G.prototype,"label",void 0);x.__decorate([u.property({type:A,json:{type:[K.Integer],write:!0}})],G.prototype,"color",void 0);return G=x.__decorate([Q.subclass("esri.renderers.support.ColormapInfo")],G)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils","../../core/jsonMap"],
function(H,x,A,G){function u(h,m){if(!h||!m||h.length!==m.length)return!1;for(let w=0;w<h.length;w++)if(h[w]>m[w]+2||h[w]<m[w]-2)return!1;return!0}function K(h,m){if(h){m=m??n;var w=null;"algorithmic"===h.type?m.some(B=>{if(u(h.fromColor.toRgb(),B.fromColor)&&u(h.toColor.toRgb(),B.toColor))return w=B.id,!0}):"multipart"===h.type&&m.some(B=>{const a=h.colorRamps,f=B.colorRamps;if(a&&f&&a.length===f.length&&!f.some((g,e)=>{if(!u(a[e].fromColor.toRgb(),(new x(g.fromColor)).toRgb())||!u(a[e].toColor.toRgb(),
(new x(g.toColor)).toRgb()))return!0})){if(w)return!0;w=B.id}});return w}}function O(h){return(h=K(h))?k[h]:null}function L(h){h=h||{};const m=h.numColors||256;return{...h,numColors:m,distanceOffset:h.distanceOffset||0,interpolateAlpha:!!h.interpolateAlpha,distanceInterval:h.distanceInterval||1/(m-1),isCustomInterval:null!=h.isCustomInterval?h.isCustomInterval:null!==h.distanceInterval&&h.distanceInterval!==1/(m-1),weights:h.weights}}function Q(h,m){let {fromColor:w,toColor:B}=h;3===w.length&&(w=
w.concat([255]));3===B.length&&(B=B.concat([255]));h=h.algorithm||"esriCIELabAlgorithm";var a=L(m);const {numColors:f,distanceOffset:g,isCustomInterval:e,interpolateAlpha:b}=a;if(1===f&&0===g)return[w];if(2===f&&0===g&&!e)return[w,B];var d={r:w[0],g:w[1],b:w[2]};m={r:B[0],g:B[1],b:B[2]};if("esriCIELabAlgorithm"===h){h=A.toLAB(d);m=A.toLAB(m);const {numColors:E,distanceOffset:F,distanceInterval:M,isCustomInterval:I}=a;let {l:J,a:r,b:y}=h;h=(m.l-J)*M;d=(m.a-r)*M;a=(m.b-y)*M;var t=[];if(F){var q=F/M;
J+=q*h;r+=q*d;y+=q*a}for(q=0;q<E-1;q++)t.push({l:J,a:r,b:y}),J+=h,r+=d,y+=a;t.push(I?{l:J,a:r,b:y}:m);m=t}else if("esriHSVAlgorithm"===h){h=A.toHSV(d);m=A.toHSV(m);const {numColors:E,distanceOffset:F,distanceInterval:M,isCustomInterval:I}=a;t=0===h.s;q=0===m.s;d=h.h;a=m.h;t&&!q?d=a:q&&!t&&(m={...m,h:d},a=d);t=Math.abs(a-d);180>t?a=(a-d)*M:(t=360-t,a=d>a?t*M:-t*M);t=(m.s-h.s)*M;q=(m.v-h.v)*M;let {s:J,v:r}=h;h=d;F&&(d=F/M,h=(h+d*a+360)%360,J+=d*t,r+=d*q);d=[];for(var z=0;z<E-1;z++)d.push({h,s:J,v:r}),
h=(h+a+360)%360,J+=t,r+=q;d.push(I?{h,s:J,v:r}:m);m=d}else{d=A.toLCH(d);m=A.toLCH(m);const {numColors:E,distanceOffset:F,distanceInterval:M,isCustomInterval:I}=a;a=d.h;t=m.h;h=2*Math.PI;a<=t?(q=t-a,a=t-a-h,a=Math.abs(a)<Math.abs(q)?a:q):(q=t+h-a,a=t-a,a=Math.abs(a)<Math.abs(q)?a:q);a*=M;t=(m.l-d.l)*M;q=(m.c-d.c)*M;let {l:J,c:r,h:y}=d;F&&(d=F/M,J+=d*t,r+=d*q,y=(y+d*a+h)%h);d=[];for(z=0;z<E-1;z++)d.push({l:J,c:r,h:y}),J+=t,r+=q,y=(y+a+h)%h;d.push(I?{l:J,c:r,h:y}:m);m=d}h=[];d=w[3]??255;a=((B[3]??255)-
d)/(f-1);for(t=0;t<f;t++){const {r:E,g:F,b:M}=A.toRGB(m[t]);h.push([E,F,M,b?Math.round(d+a*t):255])}return h}function C(h,m){const {numColors:w,interpolateAlpha:B}=L(m);m=m?.weights;({colorRamps:h}=h);if(m){const t=m.reduce((q,z)=>q+z);m=m.map(q=>q/t)}else{m=[];for(var a=0;a<h.length;a++)m[a]=1/h.length}a=[];let f=0,g=0;const e=1/(w-1);let b=!1;for(let t=0;t<h.length;t++){var d=b?0:f*e-g;let q=t===h.length-1?w-1-f:(m[t]-d)/e;b=Math.ceil(q)===q;q=Math.ceil(q);0!==q&&(d/=m[t],d=Q(h[t],{numColors:q,
interpolateAlpha:B,distanceOffset:d,distanceInterval:e/m[t]}),f+=d.length,a.push(...d),g+=m[t])}m=[...h[h.length-1].toColor];3===m.length&&m.push(255);a.push(m);return a}function p(h,m){h="toJSON"in h?h.toJSON():h;return"multipart"===h.type?C(h,m):Q(h,m)}function c(h){if(h)return{Algorithm:h.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:l(h.fromColor),ToColor:l(h.toColor)}}function l(h){h=A.toHSV(h);return{type:"HsvColor",Hue:h.h,Saturation:h.s,Value:h.v,AlphaValue:255}}
const n=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,
0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,
85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",
type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",
type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,
255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,
102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},
{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,
63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},
{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],
toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",
fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,
53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",
type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},
{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",
colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,
167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],k={aspect_predefined:"Aspect",
blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",
conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",
partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",
purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",
redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",
yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"},v=new G.JSONMap({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right",
"Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue",
"Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","urple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright",
"Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright",
"Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});
H.PREDEFINED_COLOR_RAMP_NAME_MAP=k;H.PREDEFINED_JSON_COLOR_RAMPS=n;H.colorRampDict=v;H.convertColorRampToColormap=function(h,m){h=p(h,m);const w=m?.interpolateAlpha;h.forEach((B,a)=>{B.unshift(a);w||B.pop()});return h};H.convertColorRampToColors=p;H.getColorRampId=K;H.getColorRampJSON=function(h){const m=v.toJSON(h),w=Object.entries(k).find(B=>B[1]===m)?.[0];return(h=n.find(B=>B.id===w))?h.colorRamps?{type:"multipart",colorRamps:h.colorRamps.map(B=>({type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:B.fromColor,toColor:B.toColor}))}:{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:h.fromColor,toColor:h.toColor}:null};H.getColorRampName=O;H.getRFxArgColorRampValue=function(h){const m=O(h);if(h){if("algorithmic"===h.type)return{...c(h),Name:m};if(h.colorRamps)return h=h.colorRamps.map(c),{type:"MultiPartColorRamp",NumColorRamps:h.length,ArrayOfColorRamp:h,Name:m}}};H.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");H.rgbaConvertTo32Bit=function(h){h=
h.reverse().map(m=>{m=m.toString(16);return 2>m.length?"0"+m:m});return 4294967295&Number.parseInt(h.join(""),16)};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(H){function x(C,p){const c=[];let l,n;if(C[0].length!==p.length)throw Error("dimensions do not match");const k=C.length,v=C[0].length;let h=0;for(l=0;l<k;l++){for(n=h=0;n<v;n++)h+=C[l][n]*p[n];c.push(h)}return c}function A(C){C=[C.r/255,C.g/255,C.b/255].map(p=>
.04045>=p?p/12.92:((p+.055)/1.055)**2.4);C=x(L,C);return{x:100*C[0],y:100*C[1],z:100*C[2]}}function G(C){C=x(Q,[C.x/100,C.y/100,C.z/100]).map(p=>Math.min(1,Math.max(.0031308>=p?12.92*p:1.055*p**(1/2.4)-.055,0)));return{r:Math.round(255*C[0]),g:Math.round(255*C[1]),b:Math.round(255*C[2])}}function u(C){C=[C.x/95.047,C.y/100,C.z/108.883].map(p=>p>(6/29)**3?p**(1/3):1/3*(29/6)**2*p+4/29);return{l:116*C[1]-16,a:500*(C[0]-C[1]),b:200*(C[1]-C[2])}}function K(C){const p=C.l;C=[(p+16)/116+C.a/500,(p+16)/
116,(p+16)/116-C.b/200].map(c=>c>6/29?c**3:3*(6/29)**2*(c-4/29));return{x:95.047*C[0],y:100*C[1],z:108.883*C[2]}}function O(C){if("r"in C&&"g"in C&&"b"in C)return C;if("l"in C&&"c"in C&&"h"in C){var p=C.c,c=C.h;return G(K({l:C.l,a:p*Math.cos(c),b:p*Math.sin(c)}))}if("l"in C&&"a"in C&&"b"in C)return G(K(C));if("x"in C&&"y"in C&&"z"in C)return G(C);if("h"in C&&"s"in C&&"v"in C){c=(C.h+360)%360/60;p=C.v/100*255;C=C.s/100*p;const l=C*(1-Math.abs(c%2-1));switch(Math.floor(c)){case 0:c={r:C,g:l,b:0};break;
case 1:c={r:l,g:C,b:0};break;case 2:c={r:0,g:C,b:l};break;case 3:c={r:0,g:l,b:C};break;case 4:c={r:l,g:0,b:C};break;case 5:case 6:c={r:C,g:0,b:l};break;default:c={r:0,g:0,b:0}}c.r=Math.round(c.r+p-C);c.g=Math.round(c.g+p-C);c.b=Math.round(c.b+p-C);return c}return C}const L=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Q=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];H.darken=function(C,p){C=u(A(C));C.l*=1-p;return G(K(C))};H.toHSV=function(C){if("h"in C&&"s"in
C&&"v"in C)return C;var p=O(C);C=p.r;const c=p.g,l=p.b;p=Math.max(C,c,l);const n=p-Math.min(C,c,l);C=0===n?0:p===C?(c-l)/n%6:p===c?(l-C)/n+2:(C-c)/n+4;0>C&&(C+=6);return{h:60*C,s:100*(0===n?0:n/p),v:100/255*p}};H.toLAB=function(C){return"l"in C&&"a"in C&&"b"in C?C:u(A(O(C)))};H.toLCH=function(C){if(!("l"in C&&"c"in C&&"h"in C)){var p=u(A(O(C)));C=p.l;var c=p.a;const l=p.b;p=Math.sqrt(c*c+l*l);c=Math.atan2(l,c);c=0<c?c:c+2*Math.PI;C={l:C,c:p,h:c}}return C};H.toRGB=O;H.toXYZ=function(C){return"x"in
C&&"y"in C&&"z"in C?C:A(O(C))};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),function(H,
x,A,G,u,K,O,L,Q,C){var p;A=p=function(c){function l(k){k=n.call(this,k);k.altitude=45;k.azimuth=315;k.colorRamp=null;k.hillshadeType="traditional";k.pixelSizePower=.664;k.pixelSizeFactor=.024;k.scalingType="none";k.type="raster-shaded-relief";k.zFactor=1;return k}H._inherits(l,c);var n=H._createSuper(l);c=l.prototype;c.readColorRamp=function(k){return C.fromJSON(k)};c.clone=function(){return new p({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:G.clone(this.colorRamp)})};return H._createClass(l)}(A.JSONSupport);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"altitude",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"azimuth",void 0);x.__decorate([u.property({types:C.types,json:{write:!0}})],A.prototype,"colorRamp",void 0);x.__decorate([L.reader("colorRamp")],A.prototype,"readColorRamp",null);x.__decorate([u.property({type:["traditional",
"multi-directional"],json:{write:!0}})],A.prototype,"hillshadeType",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"pixelSizePower",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"pixelSizeFactor",void 0);x.__decorate([u.property({type:["none","adjusted"],json:{write:!0}})],A.prototype,"scalingType",void 0);x.__decorate([O.enumeration({rasterShadedRelief:"raster-shaded-relief"})],A.prototype,"type",void 0);x.__decorate([u.property({type:Number,
json:{write:!0}})],A.prototype,"zFactor",void 0);return A=p=x.__decorate([Q.subclass("esri.renderers.RasterShadedReliefRenderer")],A)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c){var l;A=l=function(n){function k(h){h=v.call(this,h);h.colorRamp=null;h.computeGamma=!1;h.dynamicRangeAdjustment=!1;h.gamma=[];h.maxPercent=null;h.minPercent=null;h.numberOfStandardDeviations=null;h.outputMax=null;h.outputMin=null;h.sigmoidStrengthLevel=null;h.statistics=[];h.histograms=null;h.useGamma=!1;h.stretchType="none";h.type="raster-stretch";return h}H._inherits(k,n);var v=H._createSuper(k);n=k.prototype;n.readColorRamp=function(h){if(h)return c.fromJSON(h)};
n.writeStatistics=function(h,m,w){h?.length&&(Array.isArray(h[0])||(h=h.map(B=>[B.min,B.max,B.avg,B.stddev])),m[w]=h)};n.readStretchType=function(h,m){h=m.stretchType;"number"===typeof h&&(h=p.stretchTypeFunctionEnum[h]);return p.stretchTypeJSONDict.read(h)};n.clone=function(){return new l({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:G.clone(this.statistics),gamma:G.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:G.clone(this.colorRamp),histograms:G.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return H._createClass(k)}(A.JSONSupport);x.__decorate([u.property({types:c.types,json:{write:!0}})],A.prototype,"colorRamp",void 0);x.__decorate([L.reader("colorRamp")],A.prototype,"readColorRamp",null);x.__decorate([u.property({type:Boolean,json:{write:!0}})],A.prototype,
"computeGamma",void 0);x.__decorate([u.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],A.prototype,"dynamicRangeAdjustment",void 0);x.__decorate([u.property({type:[Number],json:{write:!0}})],A.prototype,"gamma",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"maxPercent",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"minPercent",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"numberOfStandardDeviations",
void 0);x.__decorate([u.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],A.prototype,"outputMax",void 0);x.__decorate([u.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],A.prototype,"outputMin",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"sigmoidStrengthLevel",void 0);x.__decorate([u.property({json:{type:[[Number]],write:!0}})],A.prototype,"statistics",void 0);x.__decorate([u.property()],A.prototype,"histograms",void 0);
x.__decorate([C.writer("statistics")],A.prototype,"writeStatistics",null);x.__decorate([u.property({type:Boolean,json:{write:!0}})],A.prototype,"useGamma",void 0);x.__decorate([u.property({type:p.stretchTypeJSONDict.apiValues,json:{type:p.stretchTypeJSONDict.jsonValues,write:p.stretchTypeJSONDict.write}})],A.prototype,"stretchType",void 0);x.__decorate([L.reader("stretchType",["stretchType"])],A.prototype,"readStretchType",null);x.__decorate([O.enumeration({rasterStretch:"raster-stretch"})],A.prototype,
"type",void 0);return A=l=x.__decorate([Q.subclass("esri.renderers.RasterStretchRenderer")],A)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(H,x){x=new x.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});H.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
H.stretchTypeJSONDict=x;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../geometry/Point ../symbols/PictureMarkerSymbol".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n,k,v,h,m,w,B,a,f,g,e,b,d,t,q){var z;const E=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);G=new O.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
O=new O.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});L=z=function(F){function M(J){J=I.call(this,J);J.attributeField="Magnitude";J.flowRepresentation="flow-from";J.rotationType="arithmetic";J.style="single-arrow";J.symbolTileSize=50;J.type="vector-field";return J}H._inherits(M,F);var I=H._createSuper(M);F=M.prototype;F.readInputUnit=function(J,r){return E.has(J)?h.unitKebabDict.fromJSON(J):null};F.readOutputUnit=function(J,r){return E.has(J)?h.unitKebabDict.fromJSON(J):null};F.clone=function(){return new z({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Q.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};F.getGraphicsFromPixelData=async function(J,r=!1,y=[]){const N=[];var P=h.getUnitConversionFactor(this.inputUnit,this.outputUnit),R=this.rotationVariables[0]?.rotationType||this.rotationType;r=r?h.convertVectorFieldData(J.pixelBlock,"vector-uv",R,P):h.convertVectorFieldUnit(J.pixelBlock,
"vector-magdir",P);if(C.isNone(r))return N;J=J.extent;P=C.isSome(r.mask)&&0<r.mask.length;R=0;const X=(J.xmax-J.xmin)/r.width,U=(J.ymax-J.ymin)/r.height;for(let Z=0;Z<r.height;Z++)for(let da=0;da<r.width;da++,R++){let ea=new t({x:J.xmin+da*X+X/2,y:J.ymax-Z*U-U/2,spatialReference:J.spatialReference});ea=(await v.normalizeCentralMeridian(ea))[0];var W=y.some(aa=>aa.intersects(ea));P&&!r.mask[R]||W||(W=new u({geometry:{type:"point",x:ea.x,y:ea.y,spatialReference:J.spatialReference},attributes:{Magnitude:r.pixels[0][R],
Direction:r.pixels[1][R]}}),W.symbol=this._getVisualVariablesAppliedSymbol(W),N.push(W))}return N};F.getSymbol=function(J,r){};F.getSymbolAsync=async function(J,r){};F.getSymbols=function(){return[]};F.getClassBreakInfos=function(){return this.styleRenderer?.classBreakInfos};F.getDefaultSymbol=function(){return this.styleRenderer?.defaultSymbol};F._getDefaultSymbol=function(J){return new b({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new e({width:0}),size:20,color:J||new A([0,92,230])})};
F._getVisualVariablesAppliedSymbol=function(J){if(J){var r=this.styleRenderer?.getSymbol(J)?.clone(),y=this.sizeVariables,N=this.rotationVariables;y&&y.length&&this.sizeVariables.forEach(P=>d.applySizesToSymbol(r,g.getAllSizes([P],J)));N&&N.length&&(J.attributes.Direction+="flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(P=>d.applyRotationToSymbol(r,g.getRotationAngle(P,J),P.axis)));return r}};F._createStyleRenderer=
function(J){let r={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(J){case "single-arrow":r=this._createSingleArrowRenderer();break;case "beaufort-kn":r=this._createBeaufortKnotsRenderer();break;case "beaufort-m":r=this._createBeaufortMeterRenderer();break;case "beaufort-ft":r=this._createBeaufortFeetRenderer();break;case "beaufort-mi":r=this._createBeaufortMilesRenderer();break;case "beaufort-km":r=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":r=this._createCurrentMeterRenderer();
break;case "ocean-current-kn":r=this._createCurrentKnotsRenderer();break;case "simple-scalar":r=this._createSimpleScalarRenderer();break;case "wind-barb":r=this._createWindBarbsRenderer();break;case "classified-arrow":r=this._createClassifiedArrowRenderer()}return new m(r)};F._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};F._createBeaufortKnotsRenderer=function(){const J=this._getDefaultSymbol(new A([214,47,39])),r=this._getClassBreaks([0,1,3,6,10,16,21,27,33,
40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:J,classBreakInfos:r}};F._createBeaufortMeterRenderer=function(){const J=this._getDefaultSymbol(new A([214,47,39])),r=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],
[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:J,classBreakInfos:r}};F._createBeaufortFeetRenderer=function(){const J=this._getDefaultSymbol(new A([214,47,39]));var r=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];r=r.map(y=>3.28084*y);r=this._getClassBreaks(r,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:J,classBreakInfos:r}};
F._createBeaufortMilesRenderer=function(){const J=this._getDefaultSymbol(new A([214,47,39]));var r=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];r=r.map(y=>2.23694*y);r=this._getClassBreaks(r,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:J,classBreakInfos:r}};F._createBeaufortKilometersRenderer=function(){const J=this._getDefaultSymbol(new A([214,
47,39]));var r=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];r=r.map(y=>3.6*y);r=this._getClassBreaks(r,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:J,classBreakInfos:r}};F._createCurrentMeterRenderer=function(){const J=this._getDefaultSymbol(new A([177,177,177])),r=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,
177]]);return{defaultSymbol:J,classBreakInfos:r}};F._createCurrentKnotsRenderer=function(){const J=this._getDefaultSymbol(new A([177,177,177])),r=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:J,classBreakInfos:r}};F._createClassifiedArrowRenderer=function(){const J=this._getDefaultSymbol(new A([56,168,0]));var r=[0,1E-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const y=
this.sizeVariables[0].minDataValue,N=this.sizeVariables[0].maxDataValue;if(y&&N){const P=(N-y)/5;r=Array.from(Array(6).keys()).map(R=>y+P*R)}}r=this._getClassBreaks(r,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:J,classBreakInfos:r}};F._createSimpleScalarRenderer=function(){return{defaultSymbol:q.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};F._createWindBarbsRenderer=function(){const J=Array.from(Array(31).keys()).map(P=>5*P),r=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],y=q.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),N=J.map((P,R)=>{if(R!==J.length-1)if(0===R)var X={minValue:P,maxValue:J[R+1],symbol:y};else X=q.fromJSON({type:"esriPMS",imageData:r[R].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),X={minValue:P,maxValue:J[R+1],symbol:X};return new B(X)});return{defaultSymbol:y,classBreakInfos:N}};F._getClassBreaks=function(J,r){return r.map((y,N)=>new B({minValue:J[N],maxValue:J[N+1],symbol:this._getDefaultSymbol(new A(y))}))};H._createClass(M,[{key:"styleRenderer",
get:function(){const J=this.attributeField,r=this._createStyleRenderer(this.style);r.field=J;return r}},{key:"sizeVariables",get:function(){const J=[];if(this.visualVariables)for(var r of this.visualVariables)"size"===r.type&&J.push(r);0===J.length&&(r=new f({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(r):this._set("visualVariables",[r]),J.push(r));return J}},{key:"rotationVariables",get:function(){const J=[];if(this.visualVariables)for(var r of this.visualVariables)"rotation"===
r.type&&J.push(r);0===J.length&&(r=new a({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(r):this._set("visualVariables",[r]),J.push(r));return J}}]);return M}(w.VisualVariablesMixin(L.JSONSupport));x.__decorate([p.property({type:String,json:{write:!0}})],L.prototype,"attributeField",void 0);x.__decorate([p.property({type:O.apiValues,json:{type:O.jsonValues,read:{reader:O.read},write:{writer:O.write}}})],L.prototype,"flowRepresentation",void 0);x.__decorate([p.property({type:["geographic",
"arithmetic"],json:{write:!0}})],L.prototype,"rotationType",void 0);x.__decorate([p.property({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],L.prototype,"style",void 0);x.__decorate([p.property({json:{write:!0}})],L.prototype,"symbolTileSize",void 0);x.__decorate([p.property({type:h.unitKebabDict.apiValues,json:{type:h.unitKebabDict.jsonValues,write:{writer:h.unitKebabDict.write}}})],L.prototype,"inputUnit",void 0);x.__decorate([n.reader("inputUnit")],L.prototype,
"readInputUnit",null);x.__decorate([p.property({type:h.unitKebabDict.apiValues,json:{type:h.unitKebabDict.jsonValues,read:{reader:h.unitKebabDict.read},write:{writer:h.unitKebabDict.write}}})],L.prototype,"outputUnit",void 0);x.__decorate([n.reader("outputUnit")],L.prototype,"readOutputUnit",null);x.__decorate([l.enumeration({vectorField:"vector-field"})],L.prototype,"type",void 0);x.__decorate([p.property({type:m})],L.prototype,"styleRenderer",null);x.__decorate([p.property({type:f})],L.prototype,
"sizeVariables",null);x.__decorate([p.property({type:a})],L.prototype,"rotationVariables",null);return L=z=x.__decorate([k.subclass("esri.renderers.VectorFieldRenderer")],L)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(H,x,A,G,u){function K(b,d){return h.get(b)/h.get(d)||1}function O(b,d="geographic"){const [t,q]=b;b=Math.sqrt(t*t+q*q);let z=Math.atan2(q,t)*m;z=(360+z)%
360;"geographic"===d&&(z=(450-z)%360);return[b,z]}function L(b,d="geographic"){let t=b[1];"geographic"===d&&(t=(450-t)%360);t%=360;b=b[0];return[b*Math.cos(t/m),b*Math.sin(t/m)]}function Q(b,d,t="geographic",q=1){if(!u.isValidPixelBlock(b))return b;const {pixels:z,width:E,height:F}=b;var M=E*F;const I=z[0],J=z[1],r=b.pixelType.startsWith("f")?b.pixelType:"f32",y=G.createEmptyBand(r,M);M=G.createEmptyBand(r,M);let N=0;for(let P=0;P<F;P++)for(let R=0;R<E;R++)"vector-uv"===d?([y[N],M[N]]=O([I[N],J[N]],
t),y[N]*=q):([y[N],M[N]]=L([I[N],J[N]],t),y[N]*=q,M[N]*=q),N++;b=new G({pixelType:r,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:[y,M]});b.updateStatistics();return b}function C(b=0,d=0,t=Math.PI,q=!0){q&&(t=(2*Math.PI-t)%(2*Math.PI));q=q?-1:1;const z=-7*q,E=-2*q,F=-16*q,[M,I]=c(0,d+13*q,t,21.75),[J,r]=c(b-5.5,d+z,t,21.75),[y,N]=c(b+5.5,d+z,t,21.75),[P,R]=c(b-1.5,d+E,t,21.75),[X,U]=c(b+1.5,d+E,t,21.75),[W,Z]=c(b-1.5,d+F,t,21.75),[da,
ea]=c(b+1.5,d+F,t,21.75);return[M,I,J,r,P,R,X,U,y,N,W,Z,da,ea]}function p(b=0,d=Math.PI,t=!0){t&&(d=(2*Math.PI-d)%(2*Math.PI));var q=t?-1:1,z=5*q;const E=20*q,F=25*q;q*=2;const M=t?1:-1;t=5*M;let [I,J]=[0+t,0-E],[r,y]=[I+2*M,J],[N,P]=[r-0*M,y+q],[R,X]=[0-t,0-F],[U,W]=[R+0*M,X-q],Z=Math.ceil(b/5),da=Math.floor(Z/10);Z-=8*da;b=[];const ea=[];for(let ua=0;ua<Z/2;ua++,da--){0>=da&&1===Z%2&&ua===(Z-1)/2&&(R=0,U=R+0*M,X=(X+J)/2,W=X-q);const [ma,ta]=c(R,X,d,45);if(0<da){const [wa,Ba]=c(r,X,d,45),[ya,Aa]=
c(I,J,d,45);b.push(wa);b.push(Ba);b.push(ma);b.push(ta);b.push(ya);b.push(Aa)}else{const [wa,Ba]=c(r,y,d,45),[ya,Aa]=c(N,P,d,45),[sa,va]=c(U,W,d,45);ea.push(ma);ea.push(ta);ea.push(sa);ea.push(va);ea.push(ya);ea.push(Aa);ea.push(wa);ea.push(Ba)}X+=z;J+=z;y+=z;P+=z;W+=z}const [aa,T]=c(0+t,0+E,d,45);z=7*M;const [V,Y]=c(0+z,0+E,d,45),[ba,fa]=c(0+t,0-F,d,45),[ja,ia]=c(0+z,0-F,d,45);return{pennants:b,barbs:ea,shaft:[aa,T,V,Y,ba,fa,ja,ia]}}function c(b,d,t,q=1){return[Math.sqrt(b*b+d*d)/q,(2*Math.PI+(2*
Math.PI+Math.atan2(d,b))%(2*Math.PI)-t)%(2*Math.PI)]}function l(b,d,t,q){t=K(q||"knots",t);for(q=1;q<d.length;q++)if(q===d.length-1){if(b<d[q]*t)break}else if(b<=d[q]*t)break;return Math.min(q-1,d.length-2)}function n(b,d,t,q,z){let E=0;switch(d){case "beaufort_kn":E=l(b,a,"knots",t);break;case "beaufort_km":E=l(b,a,"kilometer-per-hour",t);break;case "beaufort_ft":E=l(b,a,"feet-per-second",t);break;case "beaufort_m":E=l(b,a,"meter-per-second",t);break;case "classified_arrow":E=l(b,z??[],q,t);break;
case "ocean_current_m":E=l(b,f,"meter-per-second",t);break;case "ocean_current_kn":E=l(b,g,"knots",t)}return E}function k(b,d){const {style:t,inputUnit:q,outputUnit:z,breakValues:E}=d,F=w.fromJSON(q),M=w.fromJSON(z);let I=0,J=0;const {width:r,height:y,mask:N}=b,P=b.pixels[0];b=b.pixels[1];var R=A.isSome(N)?N.filter(W=>0<W).length:r*y;const X=new Float32Array(42*R);R=new Uint32Array(15*R);d=d.invertDirection?C(0,0,0,!1):B;for(let W=0;W<y;W++)for(let Z=0;Z<r;Z++){var U=W*r+Z;if(!N||N[W*r+Z]){const da=
(b[U]+360)%360/180*Math.PI,ea=n(P[U],t,F,M,E);for(let aa=0;aa<d.length;aa+=2)X[I++]=(Z+.5)/r,X[I++]=(W+.5)/y,X[I++]=d[aa],X[I++]=d[aa+1]+da,X[I++]=ea,X[I++]=P[U];U=7*(I/42-1);R[J++]=U;R[J++]=U+1;R[J++]=U+2;R[J++]=U+0;R[J++]=U+4;R[J++]=U+3;R[J++]=U+0;R[J++]=U+2;R[J++]=U+3;R[J++]=U+2;R[J++]=U+5;R[J++]=U+3;R[J++]=U+5;R[J++]=U+6;R[J++]=U+3}}return{vertexData:X,indexData:R}}function v(b,d){let t=0,q=0;const {width:z,height:E,mask:F}=b;b=b.pixels[0];const M=[],I=[];var J=w.fromJSON(d.inputUnit);J=K(J,"knots");
d="wind_speed"===d.style?5:Number.MAX_VALUE;for(let y=0;y<E;y++)for(let N=0;N<z;N++){var r=b[y*z+N]*J;if((!F||F[y*z+N])&&r<d){for(let P=0;4>P;P++)M[t++]=(N+.5)/z,M[t++]=(y+.5)/E,M[t++]=2>P?-.5:.5,M[t++]=0===P%2?-.5:.5,M[t++]=0,M[t++]=r;r=4*(t/24-1);I[q++]=r;I[q++]=r+1;I[q++]=r+2;I[q++]=r+1;I[q++]=r+2;I[q++]=r+3}}return{vertexData:new Float32Array(M),indexData:new Uint32Array(I)}}const h=new Map;h.set("meter-per-second",1);h.set("kilometer-per-hour",.277778);h.set("knots",.514444);h.set("feet-per-second",
.3048);h.set("mile-per-hour",.44704);const m=180/Math.PI,w=new x.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),B=C(0,0,0),a=[0,1,3,6,10,16,21,27,33,40,47,55,63],f=[0,.5,1,1.5,2],g=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],e=[];H.convertToLocalDirections=function(b,d,t,q="geographic"){if(!u.isValidPixelBlock(b)||A.isNone(t))return b;b="vector-magdir"===d?b.clone():A.unwrap(Q(b,
d));const z=b.pixels[1];for(let E=0;E<z.length;E++)z[E]="geographic"===q?(z[E]+t[E]+270)%360:(z[E]+360-t[E])%360;return"vector-magdir"===d?b:Q(b,"vector-magdir")};H.convertVectorFieldData=Q;H.convertVectorFieldUnit=function(b,d,t=1){if(1===t||!u.isValidPixelBlock(b))return b;b=b.clone();const {pixels:q,width:z,height:E}=b,F=q[0],M=q[1];let I=0;for(let J=0;J<E;J++)for(let r=0;r<z;r++)"vector-uv"===d?(F[I]*=t,M[I]*=t):F[I]*=t,I++;b.updateStatistics();return b};H.createVFMesh=function(b,d){if("simple_scalar"===
d.style)d=v(b,d);else if("wind_speed"===d.style){if(0===e.length)for(var t=0;30>t;t++)e.push(p(5*t,0,!d.invertDirection));d=w.fromJSON(d.inputUnit);d=K(d,"knots");const {width:F,height:M,mask:I}=b;t=b.pixels[0];b=b.pixels[1];const J=[],r=[];let y=0,N=0;for(let P=0;P<M;P++)for(let R=0;R<F;R++){var q=P*F+R,z=t[q]*d;if((!I||I[P*F+R])&&5<=z){const X=(b[q]+360)%360/180*Math.PI,{pennants:U,barbs:W,shaft:Z}=e[Math.min(Math.floor(z/5),29)];if(0===U.length+W.length)continue;q=J.length/6;const da=(R+.5)/F,
ea=(P+.5)/M;for(var E=0;E<U.length;E+=2)J[y++]=da,J[y++]=ea,J[y++]=U[E],J[y++]=U[E+1]+X,J[y++]=0,J[y++]=z;for(E=0;E<W.length;E+=2)J[y++]=da,J[y++]=ea,J[y++]=W[E],J[y++]=W[E+1]+X,J[y++]=0,J[y++]=z;for(E=0;E<Z.length;E+=2)J[y++]=da,J[y++]=ea,J[y++]=Z[E],J[y++]=Z[E+1]+X,J[y++]=0,J[y++]=z;for(z=0;z<U.length/6;z++)r[N++]=q,r[N++]=q+1,r[N++]=q+2,q+=3;for(z=0;z<W.length/8;z++)r[N++]=q,r[N++]=q+1,r[N++]=q+2,r[N++]=q+1,r[N++]=q+2,r[N++]=q+3,q+=4;r[N++]=q+0;r[N++]=q+1;r[N++]=q+2;r[N++]=q+1;r[N++]=q+3;r[N++]=
q+2;q+=4}}d={vertexData:new Float32Array(J),indexData:new Uint32Array(r)}}else d=k(b,d);return d};H.createVFMeshScalar=v;H.getUnitConversionFactor=K;H.sampleVectorField=function(b,d,t,q=[0,0],z=.5){const {width:E,height:F,mask:M}=b,[I,J]=b.pixels,[r,y]=q;b=Math.round((E-r)/t);q=Math.round((F-y)/t);var N=b*q;const P=new Float32Array(N),R=new Float32Array(N);N=new Uint8Array(N);d="vector-uv"===d;for(let U=0;U<q;U++)for(let W=0;W<b;W++){let Z=0;const da=U*b+W,ea=Math.max(0,U*t+y),aa=Math.max(0,W*t+r),
T=Math.min(F,ea+t),V=Math.min(E,aa+t);for(let Y=ea;Y<T;Y++)for(let ba=aa;ba<V;ba++){var X=Y*E+ba;if(!M||M[X]){Z++;X=d?[I[X],J[X]]:[I[X],(360+J[X])%360];const [fa,ja]=d?X:L(X);P[da]+=fa;R[da]+=ja}}if(Z>=(T-ea)*(V-aa)*(1-z)){N[da]=1;const [Y,ba]=O([P[da]/Z,R[da]/Z]);P[da]=Y;R[da]=ba}else N[da]=0,P[da]=0,R[da]=0}t=new G({width:b,height:q,pixels:[P,R],mask:N});t.updateStatistics();return t};H.snapImageToSymbolTile=function(b,d,t,q,z){if(A.isNone(z)||!z.spatialReference.equals(b.spatialReference))return{extent:b,
width:Math.round(d/q),height:Math.round(t/q),resolution:b.width/d};const E=z.xmin;z=z.ymax;d=(b.xmax-b.xmin)/d*q;t=(b.ymax-b.ymin)/t*q;b.xmin=E+Math.floor((b.xmin-E)/d)*d;b.xmax=E+Math.ceil((b.xmax-E)/d)*d;b.ymin=z+Math.floor((b.ymin-z)/t)*t;b.ymax=z+Math.ceil((b.ymax-z)/t)*t;return{extent:b,width:Math.round(b.width/d),height:Math.round(b.height/t),resolution:(d+t)/2}};H.unitKebabDict=w;H.uvComponentToVector=O;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c){var l;G=l=function(n){function k(h){h=v.call(this,h);h.width=null;h.height=null;h.pixelType="f32";h.validPixelCount=null;h.mask=null;h.maskIsAlpha=!1;h.premultiplyAlpha=!1;h.statistics=null;h.depthCount=1;return h}H._inherits(k,n);var v=H._createSuper(k);k.createEmptyBand=function(h,m){return new (l.getPixelArrayConstructor(h))(m)};k.getPixelArrayConstructor=function(h){let m;switch(h){case "u1":case "u2":case "u4":case "u8":m=Uint8Array;break;case "u16":m=Uint16Array;
break;case "u32":m=Uint32Array;break;case "s8":m=Int8Array;break;case "s16":m=Int16Array;break;case "s32":m=Int32Array;break;case "f32":m=Float32Array;break;case "f64":m=Float64Array;break;case "c64":case "c128":case "unknown":m=Float32Array}return m};n=k.prototype;n.castPixelType=function(h){if(!h)return"f32";h=h.toLowerCase();["u1","u2","u4"].includes(h)?h="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(h)||(h="f32");return h};n.getPlaneCount=function(){return this.pixels?.length};
n.addData=function(h){if(!h.pixels||h.pixels.length!==this.width*this.height)throw new A("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(h.pixels);this.statistics.push(h.statistics??new p.SimpleBandStatistics)};n.getAsRGBA=function(){const h=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(h);
break;default:this._fillFrom8Bit(h)}return new Uint8ClampedArray(h)};n.getAsRGBAFloat=function(){const h=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(h);return h};n.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(w=>this._calculateBandStatistics(w,this.mask));var h=this.mask,m=0;if(O.isSome(h))for(let w=0;w<h.length;w++)h[w]&&m++;else m=this.width*this.height;this.validPixelCount=m}};n.clamp=function(h){if(h&&"f64"!==h&&"f32"!==h&&this.pixels){var [m,
w]=c.getPixelValueRange(h),B=this.pixels,a=this.width*this.height,f=B.length,g=[];for(let t=0;t<f;t++){var e=l.createEmptyBand(h,a);var b=B[t];for(let q=0;q<a;q++){var d=b[q];e[q]=d>w?w:d<m?m:d}g.push(e)}this.pixels=g;this.pixelType=h}};n.extractBands=function(h){const {pixels:m,statistics:w}=this;if(O.isNone(h)||0===h.length||!m||0===m.length)return this;var B=m.length;const a=h.some(f=>f>=m.length);B=B===h.length&&!h.some((f,g)=>f!==g);return a||B?this:new l({pixelType:this.pixelType,width:this.width,
height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:h.map(f=>m[f]),statistics:w&&h.map(f=>w[f])})};n.clone=function(){const h=new l({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});O.isSome(this.mask)&&(h.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let m;const w=l.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){h.pixels=
[];const B=!!this.pixels[0].slice;for(m=0;m<this.pixels.length;m++)h.pixels[m]=B?this.pixels[m].slice(0,this.pixels[m].length):new w(this.pixels[m])}if(this.statistics)for(h.statistics=[],m=0;m<this.statistics.length;m++)h.statistics[m]=u.clone(this.statistics[m]);h.premultiplyAlpha=this.premultiplyAlpha;return h};n._fillFrom8Bit=function(h){const {mask:m,maskIsAlpha:w,premultiplyAlpha:B,pixels:a}=this;if(h&&a&&a.length){var f,g;var e=f=g=a[0];3<=a.length?(f=a[1],g=a[2]):2===a.length&&(f=a[1]);var b=
new Uint32Array(h),d=this.width*this.height;if(e.length!==d)K.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(O.isSome(m)&&m.length===d)if(w)for(h=0;h<d;h++){const t=m[h];if(t){const q=t/255;b[h]=B?t<<24|g[h]*q<<16|f[h]*q<<8|e[h]*q:t<<24|g[h]<<16|f[h]<<8|e[h]}}else for(h=0;h<d;h++)m[h]&&(b[h]=-16777216|g[h]<<16|f[h]<<8|e[h]);else for(h=0;h<d;h++)b[h]=-16777216|g[h]<<16|f[h]<<8|e[h]}else K.getLogger(this.declaredClass).error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};n._fillFromNon8Bit=function(h){const {pixels:m,mask:w,statistics:B}=this;if(h&&m&&m.length){var a=this.pixelType,f=1,g=0;f=1;if(B&&0<B.length){for(var e of B)null!=e.minValue&&(g=Math.min(g,e.minValue)),null!=e.maxValue&&null!=e.minValue&&(f=Math.max(f,e.maxValue-e.minValue));f=255/f}else f=255,"s8"===a?(g=-128,f=127):"u16"===a?f=65535:"s16"===a?(g=-32768,f=32767):"u32"===a?f=4294967295:"s32"===a?(g=-2147483648,f=2147483647):"f32"===a?
(g=-3.4*1E39,f=3.4*1E39):"f64"===a&&(g=-Number.MAX_VALUE,f=Number.MAX_VALUE),f=255/(f-g);h=new Uint32Array(h);a=this.width*this.height;var b,d,t;e=b=d=m[0];if(e.length!==a)return K.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=m.length)if(b=m[1],3<=m.length&&(d=m[2]),O.isSome(w)&&w.length===a)for(t=0;t<a;t++)w[t]&&(h[t]=-16777216|(d[t]-g)*f<<16|(b[t]-g)*f<<8|(e[t]-g)*f);else for(t=0;t<a;t++)h[t]=-16777216|(d[t]-g)*f<<16|(b[t]-g)*f<<
8|(e[t]-g)*f;else if(O.isSome(w)&&w.length===a)for(t=0;t<a;t++)b=(e[t]-g)*f,w[t]&&(h[t]=-16777216|b<<16|b<<8|b);else for(t=0;t<a;t++)b=(e[t]-g)*f,h[t]=-16777216|b<<16|b<<8|b}else K.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};n._fillFrom32Bit=function(h){const {pixels:m,mask:w}=this;if(!h||!m||!m.length)return K.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let B,
a,f,g;B=a=f=m[0];3<=m.length?(a=m[1],f=m[2]):2===m.length&&(a=m[1]);const e=this.width*this.height;if(B.length!==e)return K.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let b=0;if(O.isSome(w)&&w.length===e)for(g=0;g<e;g++)h[b++]=B[g],h[b++]=a[g],h[b++]=f[g],h[b++]=w[g]&1;else for(g=0;g<e;g++)h[b++]=B[g],h[b++]=a[g],h[b++]=f[g],h[b++]=1};n._calculateBandStatistics=function(h,m){let w=Infinity,B=-Infinity;const a=h.length;let f,g=0;
if(O.isSome(m))for(f=0;f<a;f++)m[f]&&(g=h[f],w=g<w?g:w,B=g>B?g:B);else for(f=0;f<a;f++)g=h[f],w=g<w?g:w,B=g>B?g:B;return new p.SimpleBandStatistics(w,B)};return H._createClass(k)}(G.JSONSupport);x.__decorate([L.property({json:{write:!0}})],G.prototype,"width",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"height",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"pixelType",void 0);x.__decorate([Q.cast("pixelType")],G.prototype,"castPixelType",null);x.__decorate([L.property({json:{write:!0}})],
G.prototype,"validPixelCount",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"mask",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"maskIsAlpha",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"pixels",void 0);x.__decorate([L.property()],G.prototype,"premultiplyAlpha",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"statistics",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"depthCount",void 0);x.__decorate([L.property({json:{write:!0}})],
G.prototype,"noDataValues",void 0);x.__decorate([L.property({json:{write:!0}})],G.prototype,"bandMasks",void 0);return G=l=x.__decorate([C.subclass("esri.layers.support.PixelBlock")],G)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(H,x){x=x._createClass(function(A=null,G=null,u=null){this.minValue=A;this.maxValue=G;this.noDataValue=u});H.SimpleBandStatistics=x;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],function(H){function x(G){return A[G]??[-3.4028234663852886E38,3.4028234663852886E38]}const A={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4028234663852886E38,3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};H.convertNoDataToMask=function(G,u,K){if(!(G.depthCount&&1<G.depthCount)){var {pixels:O,statistics:L,
pixelType:Q}=G,C=O[0].length,p=G.bandMasks??[],c=G.mask??(new Uint8Array(C)).fill(255),l="f32"===Q||"f64"===Q,n=x(Q),k=!1;for(let m=0;m<O.length;m++){const w="number"===typeof u?u:u[m];if(null==w)continue;var v=L?.[m].maxValue??n[1];if((L?.[m].minValue??n[0])>w+Number.EPSILON||v<w-Number.EPSILON)continue;v=p[m]||(new Uint8Array(C)).fill(255);const B=O[m];var h=K?.customFloatTolerance;if(l&&0!==h){h||(h=9.999999E37<=Math.abs(w)?2E-7*Math.abs(w):"f32"===Q?2**-23:Number.EPSILON);for(let a=0;a<B.length;a++)v[a]&&
Math.abs(B[a]-w)<h&&(B[a]=0,v[a]=0,c[a]=0,k=!0)}else for(h=0;h<B.length;h++)v[h]&&B[h]===w&&(B[h]=0,v[h]=0,c[h]=0,k=!0);p[m]=v}k&&(G.bandMasks=p,G.mask=c);k&&"updateStatistics"in G&&G.updateStatistics()}};H.getPixelValueRange=x;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils"],function(H,x,A,G){function u(a){return x.isSome(a)&&"esri.layers.support.PixelBlock"===
a.declaredClass&&a.pixels&&0<a.pixels.length}function K(a,f,g,e,b){const d=a.length;b=A.createEmptyBand(b,d);if(f)for(let t=0;t<d;t++)f[t]&&(b[t]=g[a[t]-e]);else for(f=0;f<d;f++)b[f]=g[a[f]-e];return b}function O(a,f,g,e){const b=null!=g&&2<=g.length?new Set(g):null;g=1===g?.length?g[0]:null;const d=!!f?.length;for(let t=0;t<a.length;t++)if(e[t]){const q=a[t];if(d){let z=!1;for(let E=0;E<f.length;E+=2)if(q>=f[E]&&q<=f[E+1]){z=!0;break}z||(e[t]=0)}e[t]&&(q===g||b?.has(q))&&(e[t]=0)}}function L(a,f){const g=
a[0].length;for(let e=0;e<g;e++)if(f[e]){let b=!1;for(let d=0;d<a.length;d++)if(a[d][e]){b=!0;break}b||(f[e]=0)}}function Q(a,f){const g=a[0].length;for(let e=0;e<g;e++)if(f[e]){let b=!1;for(let d=0;d<a.length;d++)if(0===a[d][e]){b=!0;break}b&&(f[e]=0)}}function C(a,f,g,e,b,d,t,q){return{xmin:b<=g*a?0:b<g*a+a?b-g*a:a,ymin:d<=e*f?0:d<e*f+f?d-e*f:f,xmax:b+t<=g*a?0:b+t<g*a+a?b+t-g*a:a,ymax:d+q<=e*f?0:d+q<e*f+f?d+q-e*f:f}}function p(a,f,g,e,b,d){const {width:t,height:q}=g.block,{x:z,y:E}=g.offset,{width:F,
height:M}=g.mosaic;g=C(t,q,e,b,z,E,F,M);let I=0;var J=0;if(d){var r=d.hasGCSSShiftTransform?360:d.halfWorldWidth??0,y=t*d.resolutionX;const N=d.startX+e*y;N<r&&N+y>r?J=d.rightPadding:N>=r&&(I=d.leftMargin-d.rightPadding,J=0)}g.xmax-=J;if("number"===typeof f)for(d=g.ymin;d<g.ymax;d++)for(J=(b*q+d-E)*F+(e*t-z)+I,r=g.xmin;r<g.xmax;r++)a[J+r]=f;else for(d=g.ymin;d<g.ymax;d++)for(J=(b*q+d-E)*F+(e*t-z)+I,r=d*t,y=g.xmin;y<g.xmax;y++)a[J+y]=f[r+y]}function c(a,f,g={}){const {clipOffset:e,clipSize:b,alignmentInfo:d,
blockWidths:t}=g;if(t)return l(a,f,{blockWidths:t});var q=a.find(R=>u(R));if(x.isNone(q))return null;g=b?b.width:f.width;const z=b?b.height:f.height;var E=q.width,F=q.height;const M=f.width/E,I=f.height/F;f={offset:e||{x:0,y:0},mosaic:b||f,block:{width:E,height:F}};E=q.pixelType;F=A.getPixelArrayConstructor(E);var J=q.pixels.length;q=[];for(var r=0;r<J;r++){var y=new F(g*z);for(let R=0;R<I;R++)for(let X=0;X<M;X++){var N=a[R*M+X];u(N)&&(N=N.pixels[r],p(y,N,f,X,R,d))}q.push(y)}let P;if(a.some(R=>x.isNone(R)||
x.isSome(R.mask)&&0<R.mask.length))for(P=new Uint8Array(g*z),F=0;F<I;F++)for(J=0;J<M;J++)y=a[F*M+J],r=x.isSome(y)?y.mask:null,x.isSome(r)?p(P,r,f,J,F,d):y?p(P,1,f,J,F,d):p(P,0,f,J,F,d);a=new A({width:g,height:z,pixels:q,pixelType:E,mask:P});a.updateStatistics();return a}function l(a,f,g){const e=a.find(J=>x.isSome(J));if(x.isNone(e))return null;var b=a.some(J=>x.isSome(J)?!!J.mask:!0);const {width:d,height:t}=f;f=b?new Uint8Array(d*t):null;({blockWidths:g}=g);const q=[],z=e.getPlaneCount(),E=A.getPixelArrayConstructor(e.pixelType);
if(b)for(let J=0,r=0;J<a.length;r+=g[J],J++)if(b=a[J],u(b)){var F=x.unwrap(b.mask);for(var M=0;M<t;M++)for(var I=0;I<g[J];I++)f[M*d+I+r]=null==F?255:F[M*b.width+I]}for(b=0;b<z;b++){F=new E(d*t);for(let J=0,r=0;J<a.length;r+=g[J],J++)if(M=a[J],u(M)&&(I=M.pixels[b],null!=I))for(let y=0;y<t;y++)for(let N=0;N<g[J];N++)F[y*d+N+r]=I[y*M.width+N];q.push(F)}a=new A({width:d,height:t,mask:f,pixels:q,pixelType:e.pixelType});a.updateStatistics();return a}function n(a){if(!u(a))return null;const f=a.clone(),
{width:g,height:e,pixels:b}=a;var d=b[0];const t=f.pixels[0];a=x.unwrap(a.mask);for(let E=2;E<e-1;E++){const F=new Map;for(var q=E-2;q<E+2;q++)for(var z=0;4>z;z++){const M=q*g+z;h(F,d[M],a?a[M]:1)}t[E*g]=k(F);t[E*g+1]=t[E*g+2]=t[E*g];for(q=3;q<g-1;q++)z=(E-2)*g+q+1,h(F,d[z],a?a[z]:1),z=(E-1)*g+q+1,h(F,d[z],a?a[z]:1),z=E*g+q+1,h(F,d[z],a?a[z]:1),z=(E+1)*g+q+1,h(F,d[z],a?a[z]:1),z=(E-2)*g+q-3,v(F,d[z],a?a[z]:1),z=(E-1)*g+q-3,v(F,d[z],a?a[z]:1),z=E*g+q-3,v(F,d[z],a?a[z]:1),z=(E+1)*g+q-3,v(F,d[z],a?a[z]:
1),t[E*g+q]=k(F);t[E*g+q+1]=t[E*g+q]}for(d=0;d<g;d++)t[d]=t[g+d]=t[2*g+d],t[(e-1)*g+d]=t[(e-2)*g+d];f.updateStatistics();return f}function k(a){if(0===a.size)return 0;let f=0,g=-1,e=0;const b=a.keys();let d=b.next();for(;!d.done;)e=a.get(d.value),e>f&&(g=d.value,f=e),d=b.next();return g}function v(a,f,g){0!==g&&(g=a.get(f),1===g?a.delete(f):a.set(f,g-1))}function h(a,f,g){0!==g&&a.set(f,a.has(f)?a.get(f)+1:1)}function m(a,f,g){let {x:e,y:b}=f;const {width:d,height:t}=g;if(0===e&&0===b&&t===a.height&&
d===a.width)return a;const {width:q,height:z}=a;f=Math.max(0,b);const E=Math.max(0,e),F=Math.min(e+d,q),M=Math.min(b+t,z);if(0>F||0>M||!u(a))return null;e=Math.max(0,-e);b=Math.max(0,-b);var {pixels:I}=a,J=d*t,r=I.length;const y=[];for(var N=0;N<r;N++){var P=I[N],R=A.createEmptyBand(a.pixelType,J);for(let X=f;X<M;X++){const U=X*q;let W=(X+b-f)*d+e;for(let Z=E;Z<F;Z++)R[W++]=P[U+Z]}y.push(R)}I=new Uint8Array(J);J=x.unwrap(a.mask);for(r=f;r<M;r++)for(N=r*q,P=(r+b-f)*d+e,R=E;R<F;R++)I[P++]=J?J[N+R]:
1;a=new A({width:g.width,height:g.height,pixelType:a.pixelType,pixels:y,mask:I});a.updateStatistics();return a}function w(a,f=!0){if(!u(a))return null;const {pixels:g,width:e,height:b,mask:d,pixelType:t}=a;a=[];const q=Math.round(e/2),z=Math.round(b/2),E=b-1,F=e-1;for(var M=0;M<g.length;M++){var I=g[M],J=A.createEmptyBand(t,q*z),r=0;for(var y=0;y<b;y+=2)for(var N=0;N<e;N+=2){var P=I[y*e+N];if(f){var R=N===F?P:I[y*e+N+1];const X=y===E?P:I[y*e+N+e],U=N===F?X:y===E?R:I[y*e+N+e+1];J[r++]=(P+R+X+U)/4}else J[r++]=
P}a.push(J)}M=null;if(x.isSome(d))for(M=new Uint8Array(q*z),I=0,J=0;J<b;J+=2)for(r=0;r<e;r+=2)y=d[J*e+r],f?(N=r===F?y:d[J*e+r+1],P=J===E?y:d[J*e+r+e],R=r===F?P:J===E?N:d[J*e+r+e+1],M[I++]=y*N*P*R?1:0):M[I++]=y;return new A({width:q,height:z,pixelType:t,pixels:a,mask:M})}function B(a,f,g,e,b=0){const {width:d,height:t}=a,{width:q,height:z}=f;a=e.cols;e=e.rows;f=Math.ceil(q/a-.1/a);const E=Math.ceil(z/e-.1/e);let F,M,I,J,r;const y=f*a;var N=y*E*e;const P=new Float32Array(N),R=new Float32Array(N),X=
new Uint32Array(N),U=new Uint32Array(N);let W=0,Z,da;for(let T=0;T<E;T++)for(let V=0;V<f;V++){var ea=12*(T*f+V);N=g[ea];F=g[ea+1];M=g[ea+2];I=g[ea+3];J=g[ea+4];r=g[ea+5];for(var aa=0;aa<e;aa++){W=(T*e+aa)*y+V*a;da=(aa+.5)/e;for(let Y=0;Y<aa;Y++)Z=(Y+.5)/a,P[W+Y]=(N*Z+F*da+M)*d+b,R[W+Y]=(I*Z+J*da+r)*t+b,X[W+Y]=Math.floor(P[W+Y]),U[W+Y]=Math.floor(R[W+Y])}ea+=6;N=g[ea];F=g[ea+1];M=g[ea+2];I=g[ea+3];J=g[ea+4];r=g[ea+5];for(ea=0;ea<e;ea++)for(W=(T*e+ea)*y+V*a,da=(ea+.5)/e,aa=ea;aa<a;aa++)Z=(aa+.5)/a,
P[W+aa]=(N*Z+F*da+M)*d+b,R[W+aa]=(I*Z+J*da+r)*t+b,X[W+aa]=Math.floor(P[W+aa]),U[W+aa]=Math.floor(R[W+aa])}return{offsets_x:P,offsets_y:R,offsets_xi:X,offsets_yi:U,gridWidth:y}}H.NoDataInterpretation=void 0;(function(a){a[a.matchAny=0]="matchAny";a[a.matchAll=1]="matchAll"})(H.NoDataInterpretation||(H.NoDataInterpretation={}));H.MissingBandAction=void 0;(function(a){a[a.bestMatch=0]="bestMatch";a[a.fail=1]="fail"})(H.MissingBandAction||(H.MissingBandAction={}));H.MAX_MAP_SIZE_GPU=6;H.approximateTransform=
function(a,f,g,e,b="nearest"){if(!u(a))return null;"majority"===b&&(a=n(a));const {pixels:d,mask:t,pixelType:q}=a,z=a.width;var E=a.height;const F=A.getPixelArrayConstructor(q),M=d.length,{width:I,height:J}=f;a=!1;for(let U=0;U<g.length;U+=3)-1===g[U]&&-1===g[U+1]&&-1===g[U+2]&&(a=!0);const {offsets_x:r,offsets_y:y,offsets_xi:N,offsets_yi:P,gridWidth:R}=B({width:z,height:E},f,g,e,"majority"===b?.5:0);let X;f=(U,W,Z)=>{const da=U instanceof Float32Array||U instanceof Float64Array?0:.5;for(let ea=0;ea<
J;ea++){X=ea*R;for(let aa=0;aa<I;aa++){if(0>r[X]||0>y[X])U[ea*I+aa]=0;else if(Z)U[ea*I+aa]=W[N[X]+P[X]*z];else{const T=Math.floor(r[X]),V=Math.floor(y[X]),Y=Math.ceil(r[X]),ba=Math.ceil(y[X]),fa=r[X]-T,ja=y[X]-V;U[ea*I+aa]=!t||t[T+V*z]&&t[Y+V*z]&&t[T+ba*z]&&t[Y+ba*z]?(1-ja)*((1-fa)*W[T+V*z]+fa*W[Y+V*z])+ja*((1-fa)*W[T+ba*z]+fa*W[Y+ba*z])+da:W[N[X]+P[X]*z]}X++}}};g=[];for(E=0;E<M;E++)e=new F(I*J),f(e,d[E],"nearest"===b||"majority"===b),g.push(e);b=new A({width:I,height:J,pixelType:q,pixels:g});if(x.isSome(t))b.mask=
new Uint8Array(I*J),f(b.mask,t,!0);else if(a)for(b.mask=new Uint8Array(I*J),a=0;a<I*J;a++)b.mask[a]=0>r[a]||0>y[a]?0:1;b.updateStatistics();return b};H.clip=m;H.colorize=function(a,f){if(!u(a)||!f||!f.indexedColormap&&!f.indexed2DColormap)return a;const g=a.clone();var e=g.pixels;let b=g.mask;const d=g.width*g.height;if(1!==e.length)return a;const {indexedColormap:t,indexed2DColormap:q,offset:z,alphaSpecified:E}=f;a=0;e=e[0];f=new Uint8Array(e.length);const F=new Uint8Array(e.length),M=new Uint8Array(e.length);
var I=0;if(t){const J=t.length-1;if(x.isSome(b))for(a=0;a<d;a++)b[a]&&(I=4*(e[a]-z),I<z||I>J?b[a]=0:(f[a]=t[I],F[a]=t[I+1],M[a]=t[I+2],b[a]=t[I+3]));else{b=new Uint8Array(d);for(a=0;a<d;a++)I=4*(e[a]-z),I<z||I>J?b[a]=0:(f[a]=t[I],F[a]=t[I+1],M[a]=t[I+2],b[a]=t[I+3]);g.mask=b}}else if(q)if(x.isSome(b))for(a=0;a<d;a++)b[a]&&(I=q[e[a]],f[a]=I[0],F[a]=I[1],M[a]=I[2],b[a]=I[3]);else{b=new Uint8Array(d);for(a=0;a<d;a++)I=q[e[a]],f[a]=I[0],F[a]=I[1],M[a]=I[2],b[a]=I[3];g.mask=b}g.pixels=[f,F,M];g.statistics=
null;g.pixelType="u8";g.maskIsAlpha=E;return g};H.compositeBands=function(a){if(!a?.length||a.some(z=>!u(z)))return null;if(1===a.length)return x.isSome(a[0])?a[0].clone():null;const {width:f,height:g,pixelType:e}=a[0];if(a.some(z=>z.width!==f||z.height!==g))return null;const b=a.map(({mask:z})=>z).filter(z=>null!=z);let d=null;b.length&&(d=new Uint8Array(f*g),d.set(b[0]),1<b.length&&Q(b.slice(1),d));const t=[];a.forEach(({pixels:z})=>t.push(...z));const q=[];a.map(({statistics:z})=>z).filter(z=>
z?.length).forEach(z=>q.push(...z));return new A({pixelType:e,width:f,height:g,mask:d,pixels:t,statistics:q.length?q:null})};H.createColormapLUT=function(a){if(a){var f=a.colormap;if(f&&0!==f.length){f=f.sort((E,F)=>E[0]-F[0]);var g=0;0>f[0][0]&&(g=f[0][0]);var e=Math.max(256,f[f.length-1][0]-g+1),b=new Uint8Array(4*e),d=[],t=0,q=0,z=5===f[0].length;if(65536<e)return f.forEach(E=>{d[E[0]-g]=z?E.slice(1):E.slice(1).concat([255])}),{indexed2DColormap:d,offset:g,alphaSpecified:z};if(a.fillUnspecified)for(a=
f[q],t=a[0]-g;t<e;t++)b[4*t]=a[1],b[4*t+1]=a[2],b[4*t+2]=a[3],b[4*t+3]=z?a[4]:255,t===a[0]-g&&(a=q===f.length-1?a:f[++q]);else for(t=0;t<f.length;t++)a=f[t],q=4*(a[0]-g),b[q]=a[1],b[q+1]=a[2],b[q+2]=a[3],b[q+3]=z?a[4]:255;return{indexedColormap:b,offset:g,alphaSpecified:z}}}};H.createMaskLUT=function(a,f,g){if("u8"!==a&&"s8"!==a&&"u16"!==a&&"s16"!==a)return null;var e=a.includes("16")?65536:256;a=a.includes("s")?-e/2:0;e=new Uint8Array(e);if(f)for(let d=0;d<f.length;d++){var b=Math.ceil(f[2*d]-a);
const t=Math.floor(f[2*d+1]-a);for(;b<=t;b++)e[b]=255}else e.fill(255);if(g)for(f=0;f<g.length;f++)e[g[f]-a]=0;return{lut:e,offset:a}};H.createRemapLUT=function(a){const {srcPixelType:f,inputRanges:g,outputValues:e,allowUnmatched:b,noDataRanges:d,isLastInputRangeInclusive:t,outputPixelType:q}=a;if("u8"!==f&&"s8"!==f&&"u16"!==f&&"s16"!==f)return null;var z=f.includes("16")?65536:256;a=f.includes("s")?-z/2:0;const E=A.createEmptyBand(q,z);z=new Uint8Array(z);b&&z.fill(255);const [F,M]=G.getPixelValueRange(q);
if(g?.length&&e?.length){var I=g.map(N=>N-1E-6);I[0]=g[0];t&&(I[I.length-1]=g[g.length-1]);for(var J=0;J<I.length;J++){var r=e[J]>M?M:e[J]<F?F:e[J],y=Math.ceil(I[2*J]-a);const N=Math.floor(I[2*J+1]-a);for(;y<=N;y++)E[y]=r,z[y]=255}}if(d?.length)for(I=0;I<d.length;I++)for(r=Math.ceil(d[2*I]-a),J=Math.floor(d[2*I+1]-a);r<=J;r++)z[r]=0;return{lut:E,offset:a,mask:z}};H.extractBands=function(a,f){if(!f?.length||!u(a))return a;const g=a.pixels.length;return f&&f.some(e=>e>=g)||1===g&&1===f.length&&0===
f[0]||g===f.length&&!f.some((e,b)=>e!==b)?a:new A({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:f.map(e=>a.pixels[e]),statistics:a.statistics&&f.map(e=>a.statistics[e])})};H.getClipBounds=C;H.getLocalArithmeticNorthRotations=function(a,f){const {coefficients:g,spacing:e}=f,{offsets_x:b,offsets_y:d,gridWidth:t}=B(a,a,g,{rows:e[0],cols:e[1]}),{width:q,height:z}=a;a=new Float32Array(q*z);f=180/Math.PI;for(let M=0;M<
z;M++)for(let I=0;I<q;I++){var E=M*t+I,F=0===M?E:E-t;const J=M===z-1?E:E+t;E=b[F]-b[J];F=d[J]-d[F];isNaN(E)||isNaN(F)?a[M*q+I]=90:(F=Math.atan2(F,E)*f,F=(360+F)%360,a[M*q+I]=F)}return a};H.interpolateOffsets=B;H.isValidPixelBlock=u;H.lookupBandValues=K;H.lookupPixels=function(a,f){if(!u(a))return null;const {pixels:g,mask:e}=a,b=g.length;let d=f.lut;const {offset:t}=f;d&&1===d[0].length&&(d=g.map(()=>d));const q=[];f=f.outputPixelType||"u8";for(let z=0;z<b;z++){const E=K(g[z],e,d[z],t||0,f);q.push(E)}a=
new A({width:a.width,height:a.height,pixels:q,mask:e,pixelType:f});a.updateStatistics();return a};H.mask=function(a,f){if(!u(a))return null;const {width:g,height:e,pixels:b}=a;var d=g*e;const t=new Uint8Array(d);a.mask?t.set(a.mask):t.fill(255);a=b.length;const {includedRanges:q,noDataValues:z,outputPixelType:E,matchAll:F,lookups:M}=f;if(M){d=[];for(f=0;f<a;f++){var I=M[f];I=K(b[f],t,I.lut,I.offset||0,"u8");d.push(I)}1===d.length?t.set(d[0]):F?L(d,t):Q(d,t)}else if(F){f=[];for(I=0;I<a;I++){const J=
new Uint8Array(d);J.set(t);O(b[I],q?.slice(2*I,2*I+2),z?.[I],J);f.push(J)}1===f.length?t.set(f[0]):L(f,t)}else for(d=0;d<a;d++)O(b[d],q?.slice(2*d,2*d+2),z?.[d],t);return new A({width:g,height:e,pixelType:E,pixels:b,mask:t})};H.mosaic=c;H.mosaicPixelData=function(a,f){if(!a||0===a.length)return null;var g=a.find(M=>M.pixelBlock);if(!g||x.isNone(g.pixelBlock))return null;var e=(g.extent.xmax-g.extent.xmin)/g.pixelBlock.width;const b=(g.extent.ymax-g.extent.ymin)/g.pixelBlock.height,d=.01*Math.min(e,
b),t=a.sort((M,I)=>Math.abs(M.extent.ymax-I.extent.ymax)>d?I.extent.ymax-M.extent.ymax:Math.abs(M.extent.xmin-I.extent.xmin)>d?M.extent.xmin-I.extent.xmin:0);var q=Math.min.apply(null,t.map(M=>M.extent.xmin));const z=Math.min.apply(null,t.map(M=>M.extent.ymin)),E=Math.max.apply(null,t.map(M=>M.extent.xmax)),F=Math.max.apply(null,t.map(M=>M.extent.ymax));a={x:Math.round((f.xmin-q)/e),y:Math.round((F-f.ymax)/b)};q={width:Math.round((E-q)/e),height:Math.round((F-z)/b)};e={width:Math.round((f.xmax-f.xmin)/
e),height:Math.round((f.ymax-f.ymin)/b)};if(Math.round(q.width/g.pixelBlock.width)*Math.round(q.height/g.pixelBlock.height)!==t.length||0>a.x||0>a.y||q.width<e.width||q.height<e.height)return null;g=t.map(M=>M.pixelBlock);g=c(g,q,{clipOffset:a,clipSize:e});return{extent:f,pixelBlock:g}};H.remap=function(a,f){if(!u(a))return null;const {width:g,height:e}=a,{inputRanges:b,outputValues:d,outputPixelType:t,noDataRanges:q,allowUnmatched:z,isLastInputRangeInclusive:E}=f;f=a.pixels[0];const F=A.createEmptyBand(t,
f.length),M=a.mask,I=new Uint8Array(g*e);M?I.set(M):I.fill(255);const J=a.pixelType.startsWith("f")?1E-6:0;a=b.map(W=>W-J);a[0]=b[0];a[a.length-1]=b[b.length-1]+(E?1E-6:0);var r=b.length/2;const [y,N]=G.getPixelValueRange(t);for(var P=0;P<e;P++)for(var R=0;R<g;R++){var X=P*g+R;if(I[X]){var U=f[X];let W=!1;for(let Z=r-1;0<=Z;Z--)if(U===a[2*Z]||U>a[2*Z]&&U<a[2*Z+1]){F[X]=d[Z];W=!0;break}W||(z?F[X]=U>N?N:U<y?y:U:I[X]=0)}}if(a=q?.length)for(r=0;r<e;r++)for(P=0;P<g;P++)if(R=r*g+P,!M||M[R])for(X=f[R],U=
0;U<a;U+=2)if(X>=q[U]&&X<=q[U+1]){F[R]=0;I[R]=0;break}return new A({width:g,height:e,pixelType:t,pixels:[F],mask:I})};H.remapColor=function(a,f){if(!u(a))return null;a=a.clone();var {pixels:g}=a;const e=a.width*a.height,b=f.length,d=Math.floor(b/2),t=f[Math.floor(d)];g=g[0];let q,z,E,F,M,I,J=!1;const r=new Uint8Array(e),y=new Uint8Array(e),N=new Uint8Array(e);let P=a.mask;const R=4===f[0].mappedColor.length;P||(P=new Uint8Array(e),P.fill(R?255:1),a.mask=P);for(M=0;M<e;M++)if(P[M]){q=g[M];J=!1;I=d;
z=t;E=0;for(F=b-1;1<F-E;){if(q===z.value){J=!0;break}q>z.value?E=I:F=I;I=Math.floor((E+F)/2);z=f[Math.floor(I)]}J||(q===f[E].value?(z=f[E],J=!0):q===f[F].value?(z=f[F],J=!0):q<f[E].value?(J=!1,z=null):q>f[E].value&&(q<f[F].value?(z=f[E],J=!0):F===b-1?(J=!1,z=null):(z=f[F],J=!0)));J?(r[M]=z.mappedColor[0],y[M]=z.mappedColor[1],N[M]=z.mappedColor[2],P[M]=z.mappedColor[3]):r[M]=y[M]=N[M]=P[M]=0}a.pixels=[r,y,N];a.mask=P;a.pixelType="u8";a.maskIsAlpha=R;return a};H.resampleByMajority=n;H.setValidBoundary=
function(a,f,g){if(!u(a))return null;const {width:e,height:b}=a,d=f.x;f=f.y;const t=g.width+d;g=g.height+f;if(0>d||0>f||t>e||g>b||0===d&&0===f&&t===e&&g===b)return a;a.mask||(a.mask=new Uint8Array(e*b));const q=a.mask;for(let z=0;z<b;z++){const E=z*e;for(let F=0;F<e;F++)q[E+F]=z<f||z>=g||F<d||F>=t?0:1}a.updateStatistics();return a};H.split=function(a,f,g){if(!u(a))return null;const {width:e,height:b}=f;let {width:d,height:t}=a;const q=new Map,z={x:0,y:0};g=null==g?1:1+g;for(let E=0;E<g;E++){const F=
Math.ceil(d/e),M=Math.ceil(t/b);for(let I=0;I<M;I++){z.y=I*b;for(let J=0;J<F;J++){z.x=J*e;const r=m(a,z,f);q.set(`${E}/${I}/${J}`,r)}}E<g-1&&(a=w(a));d=Math.round(d/2);t=Math.round(t/2)}return q};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c){function l(e){e=e.symbolLayers;if(!e)return null;let b=null;e.forEach(d=>{if("object"!==d.type||null==d.resource?.href)b="water"===d.type?O.unwrap(d.color):O.isSome(d.material)?O.unwrap(d.material.color):null});return b?new A(b):null}function n(e,b){if(null==b||null==e)return e;e=e.toRgba();e[3]*=b;return new A(e)}function k(e,b,d){if(e=e.symbolLayers){var t=q=>{q=O.isSome(q)?q:null;b=b??q??(null!=d?g:null);return n(b,d)};e.forEach(q=>{if("object"!==q.type||null==
q.resource?.href||b)if("water"===q.type)q.color=t(q.color);else{var z=O.isSome(q.material)?q.material.color:null;z=t(z);O.isNone(q.material)?q.material=new c.Symbol3DMaterial({color:z}):q.material.color=z;null!=d&&"outline"in q&&O.isSome(q.outline)&&O.isSome(q.outline.color)&&(q.outline.color=n(q.outline.color,d))}})}}async function v(e,b){(e=e.symbolLayers)&&await u.forEach(e,async d=>h(d,b))}async function h(e,b){switch(e.type){case "extrude":e.size="number"===typeof b[2]?b[2]:0;break;case "icon":case "line":case "text":b=
m(b);O.isSome(b)&&(e.size=b);break;case "path":const d=B(b,Q.ONES,[e.width,void 0,e.height]);e.width=f(b[0],e.width,1,d);e.height=f(b[2],e.height,1,d);break;case "object":await w(e,b)}}function m(e){for(const b of e)if("number"===typeof b)return b;return null}async function w(e,b){const {resourceSize:d,symbolSize:t}=await a(e),q=B(b,d,t);e.width=f(b[0],t[0],d[0],q);e.depth=f(b[1],t[1],d[1],q);e.height=f(b[2],t[2],d[2],q)}function B(e,b,d){for(let t=0;3>t;t++){const q=e[t];switch(q){case "symbol-value":return e=
d[t],null!=e?e/b[t]:1;case "proportional":break;default:if(q&&b[t])return q/b[t]}}return 1}async function a(e){const b=await (await new Promise((F,M)=>H(["./symbolLayerUtils"],F,M))).computeObjectLayerResourceSize(e,10),{width:d,height:t,depth:q}=e;e=[d,q,t];let z=1;for(var E=0;3>E;E++){const F=e[E];if(null!=F){z=F/b[E];break}}for(E=0;3>E;E++)null==e[E]&&(e[E]=b[E]*z);return{resourceSize:b,symbolSize:e}}function f(e,b,d,t){switch(e){case "proportional":return d*t;case "symbol-value":return null!=
b?b:d;default:return e}}const g=new A("white");x.applyColorToSymbol=function(e,b,d){if(e&&(b||null!=d))if(b&&(b=new A(b)),G.isSymbol3D(e))k(e,b,d);else if(G.isSymbol2D(e)){if(b=b??e.color)e.color=n(b,d);null!=d&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=n(e.outline.color,d))}};x.applyOpacityToColor=n;x.applyRotationToSymbol=function(e,b,d){e&&null!=b&&(G.isSymbol3D(e)?(e=e.symbolLayers)&&e.forEach(t=>{if(t&&"object"===t.type)switch(d){case "tilt":t.tilt=b;break;case "roll":t.roll=
b;break;default:t.heading=b}}):!G.isSymbol2D(e)||"simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=b))};x.applySizesToSymbol=async function(e,b){if(e&&b){if(G.isSymbol3D(e))return v(e,b);if(G.isSymbol2D(e)&&(b=m(b),!O.isNone(b)))switch(e.type){case "simple-marker":e.size=b;break;case "picture-marker":const d=e.width/e.height;1<d?(e.width=b,e.height=b*d):(e.width=b*d,e.height=b);break;case "simple-line":e.width=b;break;case "text":e.font.size=b}}};x.fetchWebStyleSymbol=
async function(e,b){const d=await e.fetchSymbol(b);return d?d:e.fetchCIMSymbol(b)};x.getCSSFilterFromEffectList=function(e){if(!e)return null;e=e.effects.filter(b=>"bloom"!==b.type).map(b=>b.toJSON());return C.effectFunctionsFromJSON(e)};x.getColorFromSymbol=function(e,b){if(!e)return null;let d=null;G.isSymbol3D(e)?d=l(e):G.isSymbol2D(e)&&(d=e.color?new A(e.color):null);return d?n(d,b):null};x.getIconHref=function(e){return O.unwrapOrThrow(e.resource).href};x.getSymbolOutlineSize=function(e){if(!e)return 0;
if(G.isSymbol3D(e)){{const b=e.symbolLayers&&e.symbolLayers.length;b?(e=e.symbolLayers.getItemAt(b-1),e="outline"in e?O.get(e,"outline","size"):void 0):e=void 0}return O.isSome(e)?e:0}return L.px2pt(p.getStroke(e)?.width)};x.isVolumetricSymbol=function(e){if(O.isNone(e)||!("symbolLayers"in e)||O.isNone(e.symbolLayers))return!1;switch(e.type){case "point-3d":return e.symbolLayers.some(b=>"object"===b.type);case "line-3d":return e.symbolLayers.some(b=>"path"===b.type);case "polygon-3d":return e.symbolLayers.some(b=>
"object"===b.type||"extrude"===b.type);default:return!1}};x.symbolHasExtrudeSymbolLayer=function(e){return O.isSome(e)&&"polygon-3d"===e.type&&e.symbolLayers.some(b=>"extrude"===b.type)};Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(H,x,A,G,u,K,O){function L(p){if(!p)return null;let c=null;switch(p.type){case "simple-fill":case "picture-fill":case "simple-marker":c=
L(p.outline);break;case "simple-line":const l=K.pt2px(p.width);null!=p.style&&"none"!==p.style&&0!==l&&(c={color:p.color,style:C(p.style),width:l,cap:p.cap,join:"miter"===p.join?K.pt2px(p.miterLimit):p.join});break;default:c=null}return c}const Q=new u(1E3),C=(()=>{const p={};return c=>{if(p[c])return p[c];const l=c.replace(/-/g,"");return p[c]=l}})();A=new A([128,128,128]);H.defaultThematicColor=A;H.dekebabifyLineStyle=C;H.getFill=function(p){const c=p.style;let l=null;if(p)switch(p.type){case "simple-marker":"cross"!==
c&&"x"!==c&&(l=p.color);break;case "simple-fill":"solid"===c?l=p.color:"none"!==c&&(l={type:"pattern",x:0,y:0,src:x.getAssetUrl(`esri/symbols/patterns/${c}.png`),width:5,height:5});break;case "picture-fill":l={type:"pattern",src:p.url,width:K.pt2px(p.width)*p.xscale,height:K.pt2px(p.height)*p.yscale,x:K.pt2px(p.xoffset),y:K.pt2px(p.yoffset)};break;case "text":l=p.color;break;case "cim":l=O.getCIMSymbolColor(p)}return l};H.getPatternUrlWithColor=function(p,c){const l=p+"-"+c;return void 0!==Q.get(l)?
Promise.resolve(Q.get(l)):G(p,{responseType:"image"}).then(n=>{n=n.data;const k=n.naturalWidth,v=n.naturalHeight,h=document.createElement("canvas");h.width=k;h.height=v;const m=h.getContext("2d");m.fillStyle=c;m.fillRect(0,0,k,v);m.globalCompositeOperation="destination-in";m.drawImage(n,0,0);n=h.toDataURL();Q.put(l,n);return n})};H.getStroke=L;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],
function(H,x){return function(){function A(u,K){this._storage=new x.MemCacheStorage;this._storage.maxSize=u;K&&this._storage.registerRemoveFunc("",K)}var G=A.prototype;G.put=function(u,K){this._storage.put(u,K,1,1)};G.pop=function(u){return this._storage.pop(u)};G.get=function(u){return this._storage.get(u)};G.clear=function(){this._storage.clearAll()};G.destroy=function(){this._storage.destroy()};return H._createClass(A)}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color",
"../cim/utils"],function(H,x,A){function G(c){c=A.toCIMSymbolJSON(c);if("CIMTextSymbol"===c?.type)return c.height??0;let l=0;if(c?.symbolLayers)for(const n of c.symbolLayers)A.isCIMMarker(n)&&null!=n.size&&n.size>l?l=n.size:A.isCIMStroke(n)&&null!=n.width&&n.width>l?l=n.width:A.isCIMFill(n);return l}function u(c,l,n,k){if(c)if("CIMTextSymbol"===c.type)null!=c.height&&(c.height*=l);else{if(n&&c.effects)for(const v of c.effects)L(v,l);if(c.symbolLayers)for(const v of c.symbolLayers)switch(v.type){case "CIMPictureMarker":case "CIMVectorMarker":K(v,
l,k);break;case "CIMPictureStroke":case "CIMSolidStroke":!k?.preserveOutlineWidth&&v.width&&(v.width*=l);break;case "CIMPictureFill":v.height&&(v.height*=l);v.offsetX&&(v.offsetX*=l);v.offsetY&&(v.offsetY*=l);break;case "CIMHatchFill":u(v.lineSymbol,l,!0,{...k,preserveOutlineWidth:!1}),v.offsetX&&(v.offsetX*=l),v.offsetY&&(v.offsetY*=l),v.separation&&(v.separation*=l)}}}function K(c,l,n){if(c&&(c.markerPlacement&&O(c.markerPlacement,l),c.offsetX&&(c.offsetX*=l),c.offsetY&&(c.offsetY*=l),c.anchorPoint&&
"Absolute"===c.anchorPointUnits&&(c.anchorPoint={x:c.anchorPoint.x*l,y:c.anchorPoint.y*l}),c.size=null!=c.size?c.size*l:0,"CIMVectorMarker"===c.type&&c.markerGraphics))for(const k of c.markerGraphics)c.scaleSymbolsProportionally||u(k.symbol,l,!0,n)}function O(c,l){A.isCIMMarkerStrokePlacement(c)&&c.offset&&(c.offset*=l);switch(c.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":c.customEndingOffset&&(c.customEndingOffset*=l);c.offsetAlongLine&&(c.offsetAlongLine*=
l);if(c.placementTemplate&&c.placementTemplate.length){var n=c.placementTemplate.map(k=>k*l);c.placementTemplate=n}break;case "CIMMarkerPlacementAlongLineVariableSize":c.maxRandomOffset&&(c.maxRandomOffset*=l);c.placementTemplate&&c.placementTemplate.length&&(n=c.placementTemplate.map(k=>k*l),c.placementTemplate=n);break;case "CIMMarkerPlacementOnLine":c.startPointOffset&&(c.startPointOffset*=l);break;case "CIMMarkerPlacementAtExtremities":c.offsetAlongLine&&(c.offsetAlongLine*=l);break;case "CIMMarkerPlacementAtRatioPositions":c.beginPosition&&
(c.beginPosition*=l);c.endPosition&&(c.endPosition*=l);break;case "CIMMarkerPlacementPolygonCenter":c.offsetX&&(c.offsetX*=l);c.offsetY&&(c.offsetY*=l);break;case "CIMMarkerPlacementInsidePolygon":c.offsetX&&(c.offsetX*=l),c.offsetY&&(c.offsetY*=l),c.stepX&&(c.stepX*=l),c.stepY&&(c.stepY*=l)}}function L(c,l){switch(c.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":c.width&&(c.width*=l);break;case "CIMGeometricEffectBuffer":c.size&&(c.size*=l);break;case "CIMGeometricEffectCut":c.beginCut&&
(c.beginCut*=l);c.endCut&&(c.endCut*=l);c.middleCut&&(c.middleCut*=l);break;case "CIMGeometricEffectDashes":c.customEndingOffset&&(c.customEndingOffset*=l);c.offsetAlongLine&&(c.offsetAlongLine*=l);if(c.dashTemplate&&c.dashTemplate.length){const n=c.dashTemplate.map(k=>k*l);c.dashTemplate=n}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":c.length&&(c.length*=l);break;case "CIMGeometricEffectMove":c.offsetX&&(c.offsetX*=l);c.offsetY&&(c.offsetY*=
l);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":c.offset&&(c.offset*=l);break;case "CIMGeometricEffectRegularPolygon":c.radius&&(c.radius*=l);break;case "CIMGeometricEffectTaperedPolygon":c.fromWidth&&(c.fromWidth*=l);c.length&&(c.length*=l);c.toWidth&&(c.toWidth*=l);break;case "CIMGeometricEffectWave":c.amplitude&&(c.amplitude*=l),c.period&&(c.period*=l)}}function Q(c,l){if(c){var n="CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===c.type;if(n?.symbolLayers)for(const k of n.symbolLayers)if(!(k.colorLocked||
c&&(A.isCIMStroke(k)||A.isCIMMarker(k)&&k.markerPlacement&&A.isCIMMarkerStrokePlacement(k.markerPlacement))))switch(k.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":k.tintColor&&C(l,k.tintColor);break;case "CIMVectorMarker":k.markerGraphics?.forEach(v=>{Q(v.symbol,l)});break;case "CIMSolidStroke":case "CIMSolidFill":C(l,k.color);break;case "CIMHatchFill":Q(k.lineSymbol,l)}}}function C(c,l){for(const n of c)if(n.join(".")===l.join("."))return;c.push(l)}function p(c,l,n){if(c){var k=
"CIMTextSymbol"===c.type?c.symbol:c;c="CIMPolygonSymbol"===k?.type;if(k?.symbolLayers)for(const v of k.symbolLayers)if(!v.colorLocked){if(c)if(n){if({layersToColor:k}=n,(A.isCIMStroke(v)||A.isCIMMarker(v)&&v.markerPlacement&&A.isCIMMarkerStrokePlacement(v.markerPlacement))&&"fill"===k||A.isCIMFill(v)&&"outline"===k)continue}else if(A.isCIMStroke(v)||A.isCIMMarker(v)&&v.markerPlacement&&A.isCIMMarkerStrokePlacement(v.markerPlacement))continue;k=l.toArray();switch(v.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":v.tintColor=
k;break;case "CIMVectorMarker":v.markerGraphics?.forEach(h=>{p(h.symbol,l,n)});break;case "CIMSolidStroke":case "CIMSolidFill":v.color=k;break;case "CIMHatchFill":p(v.lineSymbol,l,n)}}}}H.applyCIMSymbolColor=function(c,l,n){l instanceof x||(l=new x(l));(c=A.toCIMSymbolJSON(c))&&p(c,l,n)};H.applyCIMSymbolRotation=function(c,l,n=!1){c=A.toCIMSymbolJSON(c);n&&0!==l&&(l=360-l);if("CIMTextSymbol"===c?.type)c.angle=l;else if("CIMPointSymbol"===c?.type&&c.symbolLayers){n=l-(c.angle||0);for(const k of c.symbolLayers)if(A.isCIMMarker(k)){let v=
k.rotation||0;v=k.rotateClockwise?v-n:v+n;k.rotation=v}c.angle=l}};H.getCIMSymbolColor=function(c){c=A.toCIMSymbolJSON(c);const l=[];Q(c,l);return l.length?new x(A.fromCIMColor(l[0])):null};H.getCIMSymbolRotation=function(c,l=!1){c=A.toCIMSymbolJSON(c);return"CIMTextSymbol"===c?.type||"CIMPointSymbol"===c?.type?(c=c.angle,null!=c&&0!==c&&l?360-c:c??0):0};H.getCIMSymbolSize=G;H.getCIMSymbolType=function(c){c=A.toCIMSymbolJSON(c);if(!c)return null;switch(c.type){case "CIMPointSymbol":return"CIMPointSymbol";
case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};H.scaleCIMMarker=K;H.scaleCIMSymbol=u;H.scaleCIMSymbolTo=function(c,l,n){if(c){var k=A.toCIMSymbolJSON(c);c=G(c);if(0===c){if(k)if("CIMTextSymbol"===k.type)k.height=l;else if(k.symbolLayers)for(const v of k.symbolLayers)switch(v.type){case "CIMPictureMarker":case "CIMVectorMarker":v.size=l;break;case "CIMPictureStroke":case "CIMSolidStroke":v.width=
l}}else u(k,l/c,!1,n)}};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(H,x){function A(p){let c=p.length;for(;c--;)if(!" /-,\n".includes(p.charAt(c)))return!1;return!0}function G(p,c){const l=[];var n=0;let k=-1;do k=p.indexOf("[",n),k>=n&&(k>n&&(n=p.substr(n,k-n),l.push([n,null,A(n)])),n=k+1,k=p.indexOf("]",n),k>=n&&(k>n&&(n=p.substr(n,k-n),(n=c[n])&&l.push([null,n,!1])),n=k+1));while(-1!==k);n<p.length-1&&
(p=p.substr(n),l.push([p,null,A(p)]));return l}function u(p,c,l){let n="",k=null;for(const v of c){const [h,m,w]=v;if(h)w?k=h:(k&&(n+=k,k=null),n+=h);else if(c=p.attributes[m])k&&(n+=k,k=null),n+=c}return K(n,l)}function K(p,c){"string"!==typeof p&&(p=String(p));switch(c){case "LowerCase":return p.toLowerCase();case "Allcaps":return p.toUpperCase();default:return p}}function O(p){return p?{r:p[0],g:p[1],b:p[2],a:p[3]/255}:{r:0,g:0,b:0,a:0}}function L(p){if(!p)return null;switch(p.type){case "CIMPolygonSymbol":if(p.symbolLayers)for(const c of p.symbolLayers)if(p=
L(c),null!=p)return p;break;case "CIMTextSymbol":return L(p.symbol);case "CIMSolidFill":return p.color}}function Q(p){if(p)switch(p.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(p=p.symbolLayers)for(const c of p)if(p=Q(c),null!=p)return p;break;case "CIMTextSymbol":return Q(p.symbol);case "CIMSolidStroke":case "CIMSolidFill":return p.color}}function C(p){if(p)switch(p.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(p.symbolLayers)for(const c of p.symbolLayers)if(p=C(c),void 0!==p)return p;
break;case "CIMTextSymbol":return C(p.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return p.width}}x.adjustTextCase=K;x.analyzeTextParts=G;x.assignTextValuesFromFeature=u;x.attributesToFields=function(p){return(p?Object.keys(p):[]).map(c=>({name:c,alias:c,type:"string"===typeof p[c]?"esriFieldTypeString":"esriFieldTypeDouble"}))};x.colorToArray=function(p){return[p.r,p.g,p.b,p.a]};x.createLabelOverrideFunction=function(p,c,l){const n=G(c,p);return k=>u(k,n,l)};x.evaluateValueOrFunction=
function(p,c,l,n){return"function"===typeof p?p(c,l,n):p};x.fromCIMColor=O;x.fromCIMFontDecoration=function(p){return p.underline?"underline":p.strikethrough?"line-through":"none"};x.fromCIMFontStyle=function(p){let c="",l="";p&&(p=p.toLowerCase(),p.includes("italic")?c="italic":p.includes("oblique")&&(c="oblique"),p.includes("bold")?l="bold":p.includes("light")&&(l="lighter"));return{style:c,weight:l}};x.fromCIMHorizontalAlignment=function(p){switch(p){default:return"left";case "Right":return"right";
case "Center":return"center";case "Justify":return"center"}};x.fromCIMVerticalAlignment=function(p){switch(p){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};x.getFillColor=L;x.getFontStyle=function(p){if(!p)return"normal";switch(p.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};x.getFontWeight=function(p){if(!p)return"normal";switch(p.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";
case "lighter":return"lighter";default:return"normal"}};x.getStrokeColor=Q;x.getStrokeWidth=C;x.getTintColor=p=>p.tintColor?O(p.tintColor):{r:255,g:255,b:255,a:1};x.getValue=(p,c=0)=>null==p||isNaN(p)?c:p;x.importGeometryEngine=function(){return new Promise((p,c)=>H(["../../geometry/geometryEngineJSON"],p,c))};x.isCIMFill=function(p){return null!=p&&("CIMGradientFill"===p.type||"CIMHatchFill"===p.type||"CIMPictureFill"===p.type||"CIMSolidFill"===p.type||"CIMWaterFill"===p.type)};x.isCIMMarker=function(p){return"CIMVectorMarker"===
p.type||"CIMPictureMarker"===p.type||"CIMBarChartMarker"===p.type||"CIMCharacterMarker"===p.type||"CIMPieChartMarker"===p.type||"CIMStackedBarChartMarker"===p.type};x.isCIMMarkerStrokePlacement=function(p){return null!=p&&("CIMMarkerPlacementAlongLineRandomSize"===p.type||"CIMMarkerPlacementAlongLineSameSize"===p.type||"CIMMarkerPlacementAlongLineVariableSize"===p.type||"CIMMarkerPlacementAtExtremities"===p.type||"CIMMarkerPlacementAtMeasuredUnits"===p.type||"CIMMarkerPlacementAtRatioPositions"===
p.type||"CIMMarkerPlacementOnLine"===p.type||"CIMMarkerPlacementOnVertices"===p.type)};x.isCIMStroke=function(p){return"CIMGradientStroke"===p.type||"CIMPictureStroke"===p.type||"CIMSolidStroke"===p.type};x.isGeometryEngineRequired=p=>{if(!p)return!1;for(const c of p)switch(c.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};x.isSVGImage=p=>p.includes("data:image/svg+xml");x.mapCIMSymbolToGeometryType=function(p){if(!p)return null;
switch(p.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};x.resampleHermite=function(p,c,l,n,k,v,h=!0){const m=c/k;l/=v;const w=Math.ceil(m/2),B=Math.ceil(l/2);for(let g=0;g<v;g++)for(let e=0;e<k;e++){const b=4*(e+(h?v-g-1:g)*k);var a=0;let d=0,t=0,q=0,z=0,E=0,F=0;const M=(g+.5)*l;for(let I=Math.floor(g*l);I<(g+1)*l;I++){var f=Math.abs(M-(I+.5))/B;const J=
(e+.5)*m;f*=f;for(let r=Math.floor(e*m);r<(e+1)*m;r++){let y=Math.abs(J-(r+.5))/w;a=Math.sqrt(f+y*y);-1<=a&&1>=a&&(a=2*a*a*a-3*a*a+1,0<a&&(y=4*(r+I*c),F+=a*p[y+3],t+=a,255>p[y+3]&&(a=a*p[y+3]/250),q+=a*p[y],z+=a*p[y+1],E+=a*p[y+2],d+=a))}}n[b]=q/d;n[b+1]=z/d;n[b+2]=E/d;n[b+3]=F/t}};x.toCIMSymbolJSON=function(p){return p.data?.symbol??null};Object.defineProperty(x,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(H,x,A,G,u,K,O){var L;A=L=function(Q){function C(c){c=p.call(this,c);c.variableName=null;c.dimensionName=null;c.values=[];c.isSlice=!1;return c}H._inherits(C,Q);var p=H._createSuper(C);C.prototype.clone=function(){return new L({variableName:this.variableName,dimensionName:this.dimensionName,values:G.clone(this.values),isSlice:this.isSlice})};return H._createClass(C)}(A.JSONSupport);x.__decorate([u.property({type:String,json:{write:!0}})],A.prototype,"variableName",void 0);x.__decorate([u.property({type:String,
json:{write:!0}})],A.prototype,"dimensionName",void 0);x.__decorate([u.property({type:K.types.array(K.types.oneOf([K.types.native(Number),K.types.array(K.types.native(Number))])),json:{write:!0}})],A.prototype,"values",void 0);x.__decorate([u.property({type:Boolean,json:{write:!0}})],A.prototype,"isSlice",void 0);return A=L=x.__decorate([O.subclass("esri.layers.support.DimensionalDefinition")],A)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n){H.ExportImageServiceParameters=function(k){function v(){var m=h.apply(this,arguments);m.layer=null;m.compression=void 0;m.pixelType=void 0;m.lercVersion=2;return m}x._inherits(v,k);var h=x._createSuper(v);k=v.prototype;k.writeAdjustAspectRatio=function(m,w,B){10.3>this.layer.version||(w[B]=m)};k.writeCompressionQuality=function(m,w,B){this.format&&this.format.toLowerCase().includes("jpg")&&null!=m&&(w[B]=m)};k.writeCompressionTolerance=function(m,w,B){"lerc"===
this.format&&null!=m&&(w[B]=m)};k.writeLercVersion=function(m,w,B){"lerc"===this.format&&10.5<=this.layer.version&&(w[B]=m)};k.combineRendererWithRenderingRule=function(m){const w=this.layer,{rasterInfo:B,renderer:a}=w;m=m||w.renderingRule;return a&&p.isSupportedRendererType(a)?p.combineRenderingRules(p.convertRendererToRenderingRule(a,{rasterAttributeTable:B.attributeTable,pixelType:B.pixelType,dataType:B.dataType,bandProperties:B.keyProperties?.BandProperties,convertColorRampToColormap:10.6>w.version,
convertToRFT:!!m?.rasterFunctionDefinition,bandCount:B.bandCount}),m):m};k._addResampleRasterFunction=function(m){if("vector-field"!==this.layer.renderer?.type||"Resample"===m?.functionName)return m;let w=new n({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:this.layer.serviceRasterInfo.pixelSize}});w=m?.rasterFunctionDefinition?new n({rasterFunctionDefinition:p.convertRenderingRuleToRFT(w)}):w;return p.combineRenderingRules(w,
m)};k._addClipFunction=function(m,w){w=new n({functionName:"Clip",functionArguments:{ClippingGeometry:w.toJSON(),ClippingType:1}});return p.combineRenderingRules(w,m)};x._createClass(v,[{key:"adjustAspectRatio",get:function(){return this.layer.adjustAspectRatio}},{key:"bandIds",get:function(){return this.layer.bandIds}},{key:"compressionQuality",get:function(){return this.layer.compressionQuality}},{key:"compressionTolerance",get:function(){return this.layer.compressionTolerance}},{key:"format",get:function(){return"vector-field"===
this.layer.renderer?.type?"lerc":this.layer.format}},{key:"interpolation",get:function(){return this.layer.interpolation}},{key:"noData",get:function(){return this.layer.noData}},{key:"noDataInterpretation",get:function(){return this.layer.noDataInterpretation}},{key:"version",get:function(){const m=this.layer;m.commitProperty("bandIds");m.commitProperty("format");m.commitProperty("compressionQuality");m.commitProperty("compressionTolerance");m.commitProperty("interpolation");m.commitProperty("noData");
m.commitProperty("noDataInterpretation");m.commitProperty("mosaicRule");m.commitProperty("renderingRule");m.commitProperty("adjustAspectRatio");m.commitProperty("pixelFilter");m.commitProperty("definitionExpression");m.commitProperty("multidimensionalSubset");return(this._get("version")||0)+1},set:function(m){this._set("version",m)}},{key:"mosaicRule",get:function(){var m=this.layer;let w=m.mosaicRule;m=m.definitionExpression;w?m&&m!==w.where&&(w=w.clone(),w.where=m):m&&(w=new c({where:m}));return w}},
{key:"renderingRule",get:function(){const m=this.layer;let w=m.renderingRule;const B=m.pixelFilter,a=!m.format||m.format.includes("jpg")||m.format.includes("png");w=this._addResampleRasterFunction(w);const f=m.multidimensionalSubset?.areaOfInterest;f&&(w=this._addClipFunction(w,f));a&&!B&&"vector-field"!==m.renderer?.type&&(w=this.combineRendererWithRenderingRule(w));return w}}]);return v}(G.JSONSupport);A.__decorate([u.property()],H.ExportImageServiceParameters.prototype,"layer",void 0);A.__decorate([u.property({json:{write:!0}})],
H.ExportImageServiceParameters.prototype,"adjustAspectRatio",null);A.__decorate([C.writer("adjustAspectRatio")],H.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"bandIds",null);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"compression",void 0);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"compressionQuality",
null);A.__decorate([C.writer("compressionQuality")],H.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"compressionTolerance",null);A.__decorate([C.writer("compressionTolerance")],H.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"format",null);A.__decorate([u.property({type:String,
json:{read:{reader:l.interpolationKebab.read},write:{writer:l.interpolationKebab.write}}})],H.ExportImageServiceParameters.prototype,"interpolation",null);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"noData",null);A.__decorate([u.property({type:String,json:{read:{reader:l.noDataInterpretationKebab.read},write:{writer:l.noDataInterpretationKebab.write}}})],H.ExportImageServiceParameters.prototype,"noDataInterpretation",null);A.__decorate([u.property({json:{write:!0}})],
H.ExportImageServiceParameters.prototype,"pixelType",void 0);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"lercVersion",void 0);A.__decorate([C.writer("lercVersion")],H.ExportImageServiceParameters.prototype,"writeLercVersion",null);A.__decorate([u.property({type:Number})],H.ExportImageServiceParameters.prototype,"version",null);A.__decorate([u.property({json:{write:!0}})],H.ExportImageServiceParameters.prototype,"mosaicRule",null);A.__decorate([u.property({json:{write:!0}})],
H.ExportImageServiceParameters.prototype,"renderingRule",null);H.ExportImageServiceParameters=A.__decorate([Q.subclass("esri.layers.mixins.ExportImageServiceParameters")],H.ExportImageServiceParameters);Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ../../core/maybe ./RasterFunction ./rasterFunctionUtils ./rasterFormats/pixelRangeUtils ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(H,x,A,G,u,K,O,L,Q){function C(b,d){for(const t in b)"raster"===t.toLowerCase()&&("RasterFunctionVariable"===b[t].type?(b[t]=d.rasterFunctionDefinition,b[t].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===b[t].type&&C(b[t].arguments,d))}function p(b){const d=x.clone(u.schema[b.functionName+"Function"]);b=b.functionArguments;for(const t in b)"raster"===t.toLowerCase()?(d.arguments[t]=p(b[t]),d.arguments[t].type="RasterFunctionTemplate"):"colormap"===t.toLowerCase()?(d.arguments[t].value=
B(b[t]),d.arguments.ColorSchemeType.value=0):d.arguments[t].value=b[t];return d}function c(b){const d=b?.Raster;return d&&"esri.layers.support.RasterFunction"===d.declaredClass?c(d.functionArguments):b}function l(b,d){const t=new G;t.functionName="VectorFieldRenderer";const {dataType:q,bandProperties:z}=d,E="vector-uv"===q;let F,M;z&&2===z.length&&(F=z.map(y=>y.BandName.toLowerCase()).indexOf("magnitude"),M=z.map(y=>y.BandName.toLowerCase()).indexOf("direction"));if(-1===F||null===F)F=0,M=1;const I=
"arithmetic"===b.rotationType?1:2,J="flow-from"===b.flowRepresentation?0:1,r=b.visualVariables?b.visualVariables.find(y=>"Magnitude"===y.field):new Q;b={magnitudeBandID:F,directionBandID:M,isUVComponents:E,referenceSystem:I,massFlowAngleRepresentation:J,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:f[b.style.toLowerCase().replace("-","_")],minimumMagnitude:r.minDataValue,maximumMagnitude:r.maxDataValue,minimumSymbolSize:r.minSize,maximumSymbolSize:r.maxSize};
t.functionArguments=b;return d.convertToRFT?new G({rasterFunctionDefinition:p(t)}):t}function n(b,d){const t=d.convertToRFT,q=new G;q.functionName="Stretch";var z=e[L.stretchTypeJSONDict.toJSON(b.stretchType)],E=w(b.statistics??[]);E={StretchType:z,Statistics:E,DRA:b.dynamicRangeAdjustment,UseGamma:b.useGamma,Gamma:b.gamma,ComputeGamma:b.computeGamma};null!=b.outputMin&&(E.Min=b.outputMin);null!=b.outputMax&&(E.Max=b.outputMax);z===e.standardDeviation?(E.NumberOfStandardDeviations=b.numberOfStandardDeviations,
q.outputPixelType="u8"):z===e.percentClip?(E.MinPercent=b.minPercent,E.MaxPercent=b.maxPercent,q.outputPixelType="u8"):z===e.minMax?q.outputPixelType="u8":z===e.sigmoid&&(E.SigmoidStrengthLevel=b.sigmoidStrengthLevel);q.functionArguments=E;q.variableName="Raster";if(b.colorRamp){E=b.colorRamp;z=new G;if(t)z.functionArguments={ColorRamp:O.getRFxArgColorRampValue(E)};else{const F=O.getColorRampName(E);F?z.functionArguments={colorRamp:F}:!d.convertColorRampToColormap||"algorithmic"!==E.type&&"multipart"!==
E.type?(b=b.colorRamp.toJSON(),"algorithmic"===b.type?b.algorithm=b.algorithm||"esriCIELabAlgorithm":"multipart"===b.type&&b.colorRamps?.length&&b.colorRamps.forEach(M=>M.algorithm=M.algorithm||"esriCIELabAlgorithm"),z.functionArguments={colorRamp:b}):z.functionArguments={Colormap:O.convertColorRampToColormap(E)}}z.variableName="Raster";z.functionName="Colormap";z.functionArguments.Raster=q;return t?new G({rasterFunctionDefinition:p(z)}):z}return t?new G({rasterFunctionDefinition:p(q)}):q}function k(b,
d){const t=[],q=[],z=[],E=[],{pixelType:F,rasterAttributeTable:M}=d,I=A.isNone(M)?null:M.features,J=h(M);if(J&&I&&Array.isArray(I)&&b.classBreakInfos){b.classBreakInfos.forEach((P,R)=>{const X=P.symbol?.color;let U;X?.a&&null!=P.minValue&&null!=P.maxValue&&I.forEach(W=>{null!=P.minValue&&null!=P.maxValue&&(U=W.attributes[b.field],(U>=P.minValue&&U<P.maxValue||R===b.classBreakInfos.length-1&&U>=P.minValue)&&E.push([W.attributes[J],X.r,X.g,X.b]))})});var r=F?v(E,F):E,y=new G;y.functionName="Colormap";
y.functionArguments={};y.functionArguments.Colormap=r;y.variableName="Raster";return d.convertToRFT?new G({rasterFunctionDefinition:p(y)}):y}b.classBreakInfos.forEach((P,R)=>{if(null!=P.minValue&&null!=P.maxValue){var X=P.symbol&&P.symbol.color;X?.a?(0===R?t.push(P.minValue,P.maxValue+1E-6):t.push(P.minValue+1E-6,P.maxValue+1E-6),q.push(R),E.push([R,X.r,X.g,X.b])):z.push(P.minValue,P.maxValue)}});r=F?v(E,F):E;y=new G;y.functionName="Remap";y.functionArguments={InputRanges:t,OutputValues:q,NoDataRanges:z};
y.variableName="Raster";const N=new G;N.functionName="Colormap";N.functionArguments={Colormap:r,Raster:y};return d.convertToRFT?new G({rasterFunctionDefinition:p(N)}):N}function v(b,d){(d=a.has(d)?K.getPixelValueRange(d):null)&&b.push([Math.floor(d[0]-1),0,0,0],[Math.ceil(d[1]+1),0,0,0]);return b}function h(b){if(!A.isNone(b))return{fields:b}=b,(b=b&&b.find(d=>d&&d.name&&"value"===d.name.toLowerCase()))&&b.name}function m(b,d){const t=[],{pixelType:q,rasterAttributeTable:z}=d;var E=A.isNone(z)?null:
z.features;const F=h(z),M=b.defaultSymbol?.color?.toRgb();var I=b.uniqueValueInfos;if(I)if(!E)for(b=0;b<I.length;b++){var J=I[b];E=J.symbol?.color;J=+J.value;if(E?.a){if(isNaN(J))return null;t.push([J,E.r,E.g,E.b])}}else if(F){const r=new Map;I.forEach(N=>{const P=N.value;N=N.symbol?.color;null!=P&&N&&N.a&&r.set(String(P),N.toRgb())});const y=b.field;E.forEach(({attributes:N})=>{const P=N[F];(N=r.get(String(N[y])))?t.push([P,...N]):M&&t.push([P,...M])})}I=q&&0<t.length?v(t,q):t;b=new G;b.functionName=
"Colormap";b.functionArguments={};b.functionArguments.Colormap=I;b.variableName="Raster";return d.convertToRFT?new G({rasterFunctionDefinition:p(b)}):b}function w(b){const d=[];b?.forEach(t=>{Array.isArray(t)?d.push(t):null!=t.min&&null!=t.max&&d.push([t.min,t.max,t.avg||0,t.stddev||0])});return d}function B(b){const d=[],t=[];b.forEach(q=>{d.push(q[0]);t.push(O.rgbaConvertTo32Bit([...q.slice(1),255]))});return{type:"RasterColormap",values:d,colors:t}}const a=new Set("u1 u2 u4 u8 s8 u16 s16".split(" ")),
f={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},g=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),e={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};H.combineRenderingRules=function(b,d){if(!b||
!d)return x.clone(b||d);b=x.clone(b);if(b.rasterFunctionDefinition&&d.rasterFunctionDefinition){const t=d.rasterFunctionDefinition;if(t.thumbnail||t.thumbnailEx)t.thumbnail=t.thumbnailEx=void 0;C(b.rasterFunctionDefinition.arguments,d)}else"none"!==d.functionName?.toLowerCase()&&(c(b.functionArguments).Raster=d);return b};H.convertRendererToRenderingRule=function(b,d){d=d||{};switch(b.type){case "raster-stretch":return n(b,d);case "class-breaks":return k(b,d);case "unique-value":return m(b,d);case "raster-colormap":var t=
d;(d=b.extractColormap())&&0!==d.length?({pixelType:b}=t,b=b?v(d,b):d,d=new G,d.functionName="Colormap",d.functionArguments={},d.functionArguments.Colormap=b,b=t.convertToRFT?new G({rasterFunctionDefinition:p(d)}):d):b=null;return b;case "vector-field":return l(b,d);case "raster-shaded-relief":t=d.convertToRFT;if("elevation"!==d.dataType&&("generic"!==d.dataType||1!==d.bandCount||"s16"!==d.pixelType&&"s32"!==d.pixelType&&"f32"!==d.pixelType&&"f64"!==d.pixelType))b=new G;else{d=new G;d.functionName=
"Hillshade";var q="traditional"===b.hillshadeType?0:1,z="none"===b.scalingType?1:3,E={HillshadeType:q,SlopeType:z,ZFactor:b.zFactor};0===q&&(E.Azimuth=b.azimuth,E.Altitude=b.altitude);3===z&&(E.PSPower=b.pixelSizePower,E.PSZFactor=b.pixelSizeFactor);d.functionArguments=E;d.variableName="Raster";b.colorRamp&&(d.functionName="ShadedRelief",t?E.ColorRamp=O.getRFxArgColorRampValue(b.colorRamp):E.Colormap=O.convertColorRampToColormap(b.colorRamp));b=t?new G({rasterFunctionDefinition:p(d)}):d}return b;
case "flow":throw Error("Unsupported rendering rule.");}};H.convertRenderingRuleToRFT=p;H.isSupportedRendererType=function(b){return g.has(b.type)};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(H,x,A,G,u,K,O,L,Q,C){var p;const c=new Set(["raster","raster2","dem","fillraster"]),l=new Set(["rasters"]),n=m=>m&&m.rasterFunction?h.fromJSON(m):m,k=m=>m&&m instanceof h?m.toJSON():m,v=m=>m?.functionName&&!m.declaredClass?new h(m):m;let h=p=function(m){function w(a){a=B.call(this,a);a.functionName=null;a.outputPixelType="unknown";a.variableName=null;a.rasterFunctionDefinition=null;return a}H._inherits(w,m);var B=H._createSuper(w);m=w.prototype;m.readFunctionArguments=function(a){if(null==
a)var f=null;else{a=G.clone(a);var g={};for(f of Object.keys(a))c.has(f.toLowerCase())?g[f]=n(a[f]):l.has(f.toLowerCase())&&Array.isArray(a[f])?g[f]=a[f].map(n):g[f]=a[f];f=g}return f};m.writeFunctionArguments=function(a,f,g){const e={};for(const b of Object.keys(a))c.has(b.toLowerCase())?e[b]=k(a[b]):l.has(b.toLowerCase())&&Array.isArray(a[b])?e[b]=a[b].map(k):e[b]=k(a[b]);f[g]=e};m.readFunctionName=function(a,f){a=f.rasterFunctionInfos;const g=f.name;return g?g:a&&a.length&&"None"!==a[0].name?a[0].name:
f.rasterFunctionDefinition?f.rasterFunctionDefinition.name:f.rasterFunction};m.clone=function(){return new p({functionName:this.functionName,functionArguments:G.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:G.clone(this.rasterFunctionDefinition)})};H._createClass(w,[{key:"functionArguments",set:function(a){if(a){const f=Object.keys(a);if(f.some(g=>{var e;if(e=c.has(g.toLowerCase()))g=a[g],e=g?.functionName&&!g.declaredClass;
return e})||f.some(g=>l.has(g.toLowerCase())&&Array.isArray(a[g])&&a[g].some(e=>e?.functionName&&!e.declaredClass))){a=G.clone(a);for(const g of f)c.has(g.toLowerCase())?a[g]=v(a[g]):l.has(g.toLowerCase())&&Array.isArray(a[g])&&(a[g]=a[g].map(e=>v(e)))}}this._set("functionArguments",a)}}]);return w}(A.JSONSupport);x.__decorate([u.property({json:{type:Object,name:"rasterFunctionArguments"}})],h.prototype,"functionArguments",null);x.__decorate([L.reader("functionArguments")],h.prototype,"readFunctionArguments",
null);x.__decorate([C.writer("functionArguments")],h.prototype,"writeFunctionArguments",null);x.__decorate([u.property({json:{type:String,write:{target:"rasterFunction"}}})],h.prototype,"functionName",void 0);x.__decorate([L.reader("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],h.prototype,"readFunctionName",null);x.__decorate([O.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",
UNKNOWN:"unknown"},{ignoreUnknown:!1}),u.property({json:{default:"unknown"}})],h.prototype,"outputPixelType",void 0);x.__decorate([u.property({type:String,json:{read:!0,write:!0}})],h.prototype,"variableName",void 0);x.__decorate([u.property({type:Object,json:{name:"rasterFunctionDefinition"}})],h.prototype,"rasterFunctionDefinition",void 0);return h=p=x.__decorate([Q.subclass("esri.layers.support.RasterFunction")],h)})},"esri/layers/support/rasterFunctionUtils":function(){define(["exports"],function(H){H.schema=
{StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},
Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,
name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",
pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,
type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",
name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,
value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},
arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,
value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",
isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},
arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,
value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",
pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},
functionType:0,thumbnail:""}};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n){var k;const v=A.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),h=A.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});A=k=function(m){function w(a){a=B.call(this,a);a.ascending=!0;a.itemRenderingRule=null;
a.lockRasterIds=null;a.method=null;a.multidimensionalDefinition=null;a.objectIds=null;a.operation=null;a.sortField=null;a.sortValue=null;a.viewpoint=null;a.where=null;return a}H._inherits(w,m);var B=H._createSuper(w);m=w.prototype;m.readAscending=function(a,f){return null!=f.ascending?f.ascending:null!=f.sortAscending?f.sortAscending:!0};m.readMethod=function(a,f){a=f.mosaicMethod||f.defaultMosaicMethod;switch(a?a.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":a="esriMosaicAttribute";
break;case "lockraster":a="esriMosaicLockRaster";break;case "center":a="esriMosaicCenter";break;case "northwest":a="esriMosaicNorthwest";break;case "nadir":a="esriMosaicNadir";break;case "viewpoint":a="esriMosaicViewpoint";break;case "seamline":a="esriMosaicSeamline";break;case "none":a="esriMosaicNone";break;default:a="esriMosaicNone"}return h.fromJSON(a)};m.writeMultidimensionalDefinition=function(a,f,g){null!=a&&(a=a.filter(({variableName:e,dimensionName:b})=>e&&"*"!==e||b),a.length&&(f[g]=a.map(e=>
e.toJSON())))};m.readOperation=function(a,f){a=f.mosaicOperation;f=f.mosaicOperator&&f.mosaicOperator.toLowerCase();f=a||(f?v.toJSON(f):null);return v.fromJSON(f)||"first"};m.castSortValue=function(a){return null==a||"string"===typeof a||"number"===typeof a?a:`${a}`};m.clone=function(){return new k({ascending:this.ascending,itemRenderingRule:u.clone(this.itemRenderingRule),lockRasterIds:u.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:u.clone(this.multidimensionalDefinition),
objectIds:u.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:u.clone(this.viewpoint),where:this.where})};return H._createClass(w)}(G.JSONSupport);x.__decorate([K.property({type:Boolean,json:{write:!0}})],A.prototype,"ascending",void 0);x.__decorate([L.reader("ascending",["ascending","sortAscending"])],A.prototype,"readAscending",null);x.__decorate([K.property({type:n,json:{write:!0}})],A.prototype,"itemRenderingRule",void 0);x.__decorate([K.property({type:[p.Integer],
json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],A.prototype,"lockRasterIds",void 0);x.__decorate([K.property({type:String,json:{type:h.jsonValues,write:{target:"mosaicMethod",writer:h.write}}})],A.prototype,"method",void 0);x.__decorate([L.reader("method",["mosaicMethod","defaultMosaicMethod"])],A.prototype,"readMethod",null);x.__decorate([K.property({type:[l],json:{write:!0}})],A.prototype,"multidimensionalDefinition",void 0);x.__decorate([C.writer("multidimensionalDefinition")],
A.prototype,"writeMultidimensionalDefinition",null);x.__decorate([K.property({type:[p.Integer],json:{name:"fids",write:!0}})],A.prototype,"objectIds",void 0);x.__decorate([K.property({json:{type:v.jsonValues,read:{reader:v.read},write:{target:"mosaicOperation",writer:v.write}}})],A.prototype,"operation",void 0);x.__decorate([L.reader("operation",["mosaicOperation","mosaicOperator"])],A.prototype,"readOperation",null);x.__decorate([K.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===
this.method}}}}})],A.prototype,"sortField",void 0);x.__decorate([K.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],A.prototype,"sortValue",void 0);x.__decorate([O.cast("sortValue")],A.prototype,"castSortValue",null);x.__decorate([K.property({type:c,json:{write:!0}})],A.prototype,"viewpoint",void 0);x.__decorate([K.property({type:String,json:{write:!0}})],A.prototype,"where",void 0);return A=k=x.__decorate([Q.subclass("esri.layers.support.MosaicRule")],
A)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(H,x){const A=x.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});x=x.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});H.interpolationKebab=A;H.noDataInterpretationKebab=x;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../core/Error"],
function(H,x){H.createBitmap=async function(A,G){try{return await createImageBitmap(A)}catch(u){throw new x("request:server",`Unable to load ${G}`,{url:G,error:u});}};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MultidimensionalSubset":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon ../../geometry/support/jsonUtils ./DimensionalDefinition ../../geometry/Geometry".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n){var k;A={base:n,key:"type",typeMap:{extent:C,polygon:p}};G=k=function(v){function h(w){w=m.call(this,w);w.areaOfInterest=null;w.subsetDefinitions=null;return w}H._inherits(h,v);var m=H._createSuper(h);h.prototype.clone=function(){const w=this.subsetDefinitions?.map(a=>a.clone()),B=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new k({areaOfInterest:B,subsetDefinitions:w})};H._createClass(h,[{key:"dimensions",get:function(){var {subsetDefinitions:w}=
this;if(null==w||0===w.length)return[];const B=new Map;w.forEach(a=>{if(a.dimensionName){if(Array.isArray(a.values[0])){var f=a.values;var g=f[0][0];f=f[a.values.length-1][1]}else f=a.values,g=f[0],f=f[a.values.length-1];B.has(a.dimensionName)?(a=B.get(a.dimensionName),a[0]=Math.min(g,a[0]),a[1]=Math.max(f,a[1])):B.set(a.dimensionName,[g,f])}});w=[];for(const a of B)w.push({name:a[0],extent:a[1]});return w}},{key:"variables",get:function(){const {subsetDefinitions:w}=this;if(null==w||0===w.length)return[];
const B=new Set;w.forEach(a=>{a.variableName&&B.add(a.variableName)});return[...B]}}]);return h}(G.JSONSupport);x.__decorate([u.property({types:A,json:{read:c.fromJSON,write:!0}})],G.prototype,"areaOfInterest",void 0);x.__decorate([u.property({readOnly:!0})],G.prototype,"dimensions",null);x.__decorate([u.property({readOnly:!0})],G.prototype,"variables",null);x.__decorate([u.property({type:[l],json:{write:!0}})],G.prototype,"subsetDefinitions",void 0);return G=k=x.__decorate([Q.subclass("esri.layers.support.MultidimensionalSubset")],
G)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),function(H,x,A,G,u,K,O,L,Q,C,p){var c;A=c=function(l){function n(v){v=k.call(this,v);v.attributeTable=null;
v.bandCount=null;v.colormap=null;v.extent=null;v.format=void 0;v.height=null;v.width=null;v.histograms=null;v.keyProperties={};v.multidimensionalInfo=null;v.noDataValue=null;v.pixelSize=null;v.pixelType=null;v.isPseudoSpatialReference=!1;v.spatialReference=null;v.statistics=null;v.storageInfo=null;v.transform=null;return v}H._inherits(n,l);var k=H._createSuper(n);n.prototype.clone=function(){return new c({attributeTable:G.clone(this.attributeTable),bandCount:this.bandCount,colormap:G.clone(this.colormap),
extent:G.clone(this.extent),nativePixelSize:G.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:G.clone(this.histograms),keyProperties:G.clone(this.keyProperties),multidimensionalInfo:G.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:G.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:G.clone(this.spatialReference),statistics:G.clone(this.statistics),storageInfo:G.clone(this.storageInfo),
transform:G.clone(this.transform)})};H._createClass(n,[{key:"dataType",get:function(){const v=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===v?"standard-time":v}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(v){v&&this._set("nativeExtent",v)}},{key:"nativePixelSize",get:function(){if(u.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const v=this.nativeExtent;return{x:v.width/this.width,y:v.height/
this.height}}},{key:"hasMultidimensionalTranspose",get:function(){return!!this.storageInfo?.transposeInfo}}]);return n}(A.JSONSupport);x.__decorate([K.property({json:{write:!0}})],A.prototype,"attributeTable",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"bandCount",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"colormap",void 0);x.__decorate([K.property({type:String,readOnly:!0})],A.prototype,"dataType",null);x.__decorate([K.property({type:Q,json:{write:!0}})],
A.prototype,"extent",void 0);x.__decorate([K.property({type:Q,json:{write:!0}})],A.prototype,"nativeExtent",null);x.__decorate([K.property({json:{write:!0}})],A.prototype,"nativePixelSize",null);x.__decorate([K.property({json:{write:!0}})],A.prototype,"format",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"height",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"width",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"hasMultidimensionalTranspose",
null);x.__decorate([K.property({json:{write:!0}})],A.prototype,"histograms",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"keyProperties",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"multidimensionalInfo",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"noDataValue",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"pixelSize",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"pixelType",void 0);x.__decorate([K.property()],
A.prototype,"isPseudoSpatialReference",void 0);x.__decorate([K.property({type:C,json:{write:!0}})],A.prototype,"spatialReference",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"statistics",void 0);x.__decorate([K.property({type:p,json:{write:!0}})],A.prototype,"storageInfo",void 0);x.__decorate([K.property({json:{write:!0}})],A.prototype,"transform",void 0);return A=c=x.__decorate([L.subclass("esri.layers.support.RasterInfo")],A)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(H,x,A,G,u,K,O,L){var Q;A=Q=function(C){function p(){var l=c.apply(this,arguments);l.blockWidth=void 0;l.blockHeight=void 0;l.compression=null;l.origin=null;l.firstPyramidLevel=null;l.maximumPyramidLevel=null;l.pyramidScalingFactor=2;l.pyramidBlockWidth=null;l.pyramidBlockHeight=null;l.isVirtualTileInfo=!1;l.tileInfo=null;l.transposeInfo=null;l.blockBoundary=null;return l}H._inherits(p,C);var c=H._createSuper(p);p.prototype.clone=function(){return new Q({blockWidth:this.blockWidth,blockHeight:this.blockHeight,
compression:this.compression,origin:G.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:G.clone(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:G.clone(this.tileInfo),transposeInfo:G.clone(this.transposeInfo),blockBoundary:G.clone(this.blockBoundary)})};return H._createClass(p)}(A.JSONSupport);
x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"blockWidth",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"blockHeight",void 0);x.__decorate([u.property({type:String,json:{write:!0}})],A.prototype,"compression",void 0);x.__decorate([u.property({type:L,json:{write:!0}})],A.prototype,"origin",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"firstPyramidLevel",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],
A.prototype,"maximumPyramidLevel",void 0);x.__decorate([u.property({json:{write:!0}})],A.prototype,"pyramidResolutions",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"pyramidScalingFactor",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"pyramidBlockWidth",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"pyramidBlockHeight",void 0);x.__decorate([u.property({type:Boolean,json:{write:!0}})],A.prototype,"isVirtualTileInfo",
void 0);x.__decorate([u.property({json:{write:!0}})],A.prototype,"tileInfo",void 0);x.__decorate([u.property()],A.prototype,"transposeInfo",void 0);x.__decorate([u.property()],A.prototype,"blockBoundary",void 0);return A=Q=x.__decorate([O.subclass("esri.layers.support.RasterStorageInfo")],A)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../core/workers/workers","./PixelBlock"],function(H,x,A,G,u){return function(){function K(){this._workerThread=
null;this._destroyed=!1}var O=K.prototype;O.initialize=async function(){const L=await G.open("RasterWorker");this._destroyed?L.close():this._workerThread=L};O.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};O.convertVectorFieldData=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");return(L=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:L.pixelBlock.toJSON(),
type:L.dataType},Q))?new u(L):null};O.decode=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");return(L=await this._workerThread.invoke("decode",L,Q))?new u(L):null};O.symbolize=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");L={extent:L.extent&&L.extent.toJSON(),pixelBlock:A.isSome(L.pixelBlock)&&L.pixelBlock.toJSON(),simpleStretchParams:L.simpleStretchParams,
bandIds:L.bandIds};return(Q=await this._workerThread.invoke("symbolize",L,Q))?new u(Q):null};O.updateSymbolizer=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");const C=L?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:L.toJSON(),histograms:C},Q))};O.updateRasterFunction=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");
await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:L.toJSON()},Q))};O.process=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");return(L=await this._workerThread.invoke("process",{extent:L.extent?.toJSON(),primaryPixelSizes:L.primaryPixelSizes?.map(C=>A.isSome(C)?C.toJSON():null),primaryPixelBlocks:L.primaryPixelBlocks.map(C=>A.isSome(C)?C.toJSON():null),primaryRasterIds:L.primaryRasterIds},
Q))?new u(L):null};O.stretch=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");if(!L?.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),stretchParams:L.stretchParams};return(Q=await this._workerThread.invoke("stretch",L,Q))?new u(Q):null};O.split=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");if(!L?.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),
tileSize:L.tileSize,maximumPyramidLevel:L.maximumPyramidLevel};const C=await this._workerThread.invoke("split",L,Q);C&&C.forEach((p,c)=>{C.set(c,p?u.fromJSON(p):null)});return C};O.estimateStatisticsHistograms=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");if(!L?.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",L,Q)};O.mosaicAndTransform=async function(L,
Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection","no available worker connection");if(!L?.srcPixelBlocks?.length)return{pixelBlock:null};L={...L,srcPixelBlocks:L.srcPixelBlocks.map(C=>A.isSome(C)?C.toJSON():null)};Q=await this._workerThread.invoke("mosaicAndTransform",L,Q);return{pixelBlock:Q.pixelBlock?new u(Q.pixelBlock):null,localNorthDirections:Q.localNorthDirections}};O.createFlowMesh=async function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection",
"no available worker connection");const C={buffer:L.flowData.data.buffer,maskBuffer:L.flowData.mask.buffer,width:L.flowData.width,height:L.flowData.height},{meshType:p,simulationSettings:c}=L;L=await this._workerThread.invoke("createFlowMesh",{meshType:p,flowData:C,simulationSettings:c},{...Q,transferList:[C.buffer,C.maskBuffer]});return{vertexData:new Float32Array(L.vertexBuffer),indexData:new Uint32Array(L.indexBuffer)}};O.getProjectionOffsetGrid=function(L,Q){if(!this._workerThread)throw new x("raster-jobhandler:no-connection",
"no available worker connection");const C=A.isSome(L.datumTransformation)?L.datumTransformation.steps.map(c=>({wkid:c.wkid,wkt:c.wkt,isInverse:c.isInverse})):null,p=A.isSome(L.rasterTransform)?L.rasterTransform.toJSON():null;L={projectedExtent:L.projectedExtent.toJSON(),srcBufferExtent:L.srcBufferExtent.toJSON(),pixelSize:L.pixelSize,hasWrapAround:L.hasWrapAround,spacing:L.spacing,datumTransformationSteps:C,rasterTransform:p,isAdaptive:L.isAdaptive,includeGCSGrid:L.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",
L,Q)};return H._createClass(K)}()})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/maybe","../DimensionalDefinition"],function(H,x,A){function G(n,k,v){const h=k.shift();0===v.length&&v.push({sliceId:-1,multidimensionalDefinition:[]});const m=v.length;for(let w=0;w<m;w++){const B=v.shift().multidimensionalDefinition;h.values?.forEach(a=>{v.push({sliceId:-1,multidimensionalDefinition:[...B,{variableName:n,dimensionName:h.name,values:[a]}]})})}k.length&&
G(n,k,v)}function u(n,k){return Array.isArray(n)?k[0]===k[1]?n[0]===k[0]||n[1]===k[0]:n[0]>=k[0]&&n[0]<=k[1]&&n[1]>=k[0]&&n[1]<=k[1]:n>=k[0]&&n<=k[1]}function K(n,k){return n[0]<=k[0]&&n[1]>=k[0]||n[0]<=k[1]&&n[1]>=k[1]||n[0]>=k[0]&&n[1]<=k[1]}function O(n){return 1===n.length?[n[0],n[0]]:[n[0],n[n.length-1]]}function L(n,k,v){if(!k?.subsetDefinitions?.length)return n;if(v){const {variables:m}=k;if(m.length&&!m.includes(v))return null;k=k.subsetDefinitions.find(w=>w.dimensionName===n.name&&w.variableName===
v);if(!k?.values?.length)return n;k=O(k.values)}else k=k.dimensions.find(({name:m})=>m===n.name)?.extent;const h=k;if(!h||!h?.length)return n;k=n.values.filter(m=>u(m,h));return{...n,extent:[...h],values:k}}function Q(n,k,v){if(!k?.subsetDefinitions?.length)return!1;const {variables:h}=k;if(h.length&&n.some(({variableName:m})=>m&&!h.includes(m)))return!0;for(let m=0;m<n.length;m++){const w=n[m],B=k.subsetDefinitions.find(a=>(""===w.variableName||a.variableName===w.variableName)&&a.dimensionName===
w.dimensionName);if(B?.values.length){const a=O(B.values);if(!w.isSlice&&2===w.values.length&&!Array.isArray(w.values[0])&&w.values[0]!==w.values[1]&&v){if(!K(w.values,a))return!0}else if(w.values.some(f=>!u(f,a)))return!0}}return!1}function C(n,k){var v=n.dimensions.find(({name:B})=>"StdTime"===B);if(null==v||x.isNone(k.start)&&x.isNone(k.end))return k;k=k.clone();const {start:h,end:m}=k.toJSON(),w=h===m?[h]:null!=h&&null!=m?[h,m]:[h??m];if(2===w.length&&v?.extent.length&&(w[0]=Math.max(w[0],v.extent[0]),
w[1]=Math.min(w[1],v.extent[1]??v.extent[0]),w[1]<w[0]))return null;v=new A({variableName:"",dimensionName:"StdTime",isSlice:1===w.length,values:w});if(Q([v],n,!0))return null;k.start=new Date(w[0]);k.end=new Date(w[1]??w[0]);return k}function p(n,k={}){const {multidimensionalInfo:v,keyProperties:h}=n;if(x.isNone(v))return null;const {variableName:m,multidimensionalSubset:w,multidimensionalDefinition:B}=k;n=x.isSome(B)?B[0]?.variableName:null;const a=m||n||h?.DefaultVariable;({variables:n}=v);w?.variables?.length&&
(n=n.filter(({name:f})=>w.variables.includes(f)));return a?n.find(({name:f})=>f===a)??n[0]:n[0]}function c(n,k){var {values:v}=k;if(v?.length)return Array.isArray(v[0])!==Array.isArray(n)?-1:Array.isArray(v[0])?v.findIndex(w=>w[0]===n[0]&&w[1]===n[1]):v.indexOf(n);var {extent:h}=k;if(Array.isArray(n)||n<h[0]||n>h[1])return-1;v=k.interval||1;if("ISO8601"!==k.unit)return Math.round((n-h[0])/v);h=h[0];let m=-1;switch(k.intervalUnit?.toLowerCase()||"seconds"){case "seconds":m=Math.round((n-h)/1E3/v);
break;case "minutes":m=Math.round((n-h)/6E4/v);break;case "hours":m=Math.round((n-h)/36E5/v);break;case "days":m=Math.round((n-h)/864E5/v);break;case "months":k=(new Date(n)).getUTCFullYear()-(new Date(h)).getUTCFullYear();v=(new Date(h)).getUTCMonth();h=(new Date(n)).getUTCMonth();m=0===k?h-v:h+11-v+12*(k-1);break;case "years":m=Math.round(((new Date(n)).getUTCFullYear()-(new Date(h)).getUTCFullYear())/v);break;case "decades":m=Math.round(((new Date(n)).getUTCFullYear()-(new Date(h)).getUTCFullYear())/
10/v)}return m}function l(n){var k=n.values?.length;if(k)return k;const {extent:v,unit:h}=n;k=n.interval||1;var m=v?v[1]-v[0]:0;if("ISO8601"!==h)return Math.round(m/k);switch(n.intervalUnit?.toLowerCase()??"seconds"){case "seconds":k=Math.round(m/1E3/k);break;case "minutes":k=Math.round(m/6E4/k);break;case "hours":k=Math.round(m/36E5/k);break;case "days":k=Math.round(m/864E5/k);break;case "months":n=(new Date(v[1])).getUTCFullYear()-(new Date(v[0])).getUTCFullYear();k=(new Date(v[1][0])).getUTCMonth();
m=(new Date(v[1][1])).getUTCMonth();k=0===n?m-k+1:m+11-k+12*(n-1)+1;break;case "years":k=Math.round(((new Date(v[1])).getUTCFullYear()-(new Date(v[0])).getUTCFullYear())/k);break;case "decades":k=Math.round(((new Date(v[1])).getUTCFullYear()-(new Date(v[0])).getUTCFullYear())/10/k);break;default:k=0}return k}H.createSlices=function(n,k){const v=[];let h=0;(k?n.variables.filter(m=>m.name.toLowerCase()===k.toLowerCase()):[...n.variables].sort((m,w)=>m.name>w.name?1:-1)).forEach(m=>{const w=[],B=[...m.dimensions].sort((a,
f)=>a.name>f.name?-1:1);G(m.name,B,w);w.forEach(a=>{v.push({...a,sliceId:h++})})});return v};H.getDefaultMultidimensionalDefinition=function(n,k={}){var v=p(n,k);if(!v)return null;n=[];const {dimensions:h,name:m}=v;if(0===h.length)return[new A({variableName:m,dimensionName:"",values:[],isSlice:!0})];for(v=0;v<h.length;v++){const w=L(h[v],k.multidimensionalSubset,m);if(!w)return null;const {values:B,extent:a}=w;let f=B?.[0]??a[0];"stdz"===w.name.toLowerCase()&&!w.hasRanges&&Math.abs(a[1])<=Math.abs(a[0])&&
(f=B?.length?B[B.length-1]:a[1]);n.push(new A({variableName:m,dimensionName:w.name,values:[f],isSlice:k.useRangeForRangedDimensionInfo?!!w.hasRanges:!0}))}return n};H.getDefaultVariablInfo=p;H.getSliceIds=function(n,k,v){let h=n;k&&(k=[...k].sort((m,w)=>m.dimensionName<w.dimensionName?-1:1),k.forEach(({dimensionName:m,values:w,isSlice:B})=>{w.length&&(h=h.filter(a=>{a=a.multidimensionalDefinition.find(g=>g.dimensionName===m);if(null==a)return!1;const f=a.values[0];return"number"===typeof f?"number"===
typeof w[0]?w.includes(f):w.some(g=>g[0]<=f&&g[1]>=f):"number"===typeof w[0]?w.some(g=>f[0]<=g&&f[1]>=g):B?w.some(g=>g[0]===f[0]&&g[0]===f[1]):w.some(g=>g[0]>=f[0]&&g[0]<=f[1]||g[1]>=f[0]&&g[1]<=f[1]||g[0]<f[0]&&g[1]>f[1])}))}));if(h.length&&v&&x.isSome(v.start)&&x.isSome(v.end)){const m=v.start.getTime(),w=v.end.getTime(),B=h[0].multidimensionalDefinition.findIndex(a=>"StdTime"===a.dimensionName);-1<B&&(h=h.filter(a=>{a=a.multidimensionalDefinition[B].values[0];return m<=a&&w>=a}))}return h.map(m=>
m.sliceId)};H.getSliceIndex=function(n,k){let v=0;var h=n[0].variableName;k=[...k.variables].sort((w,B)=>w.name>B.name?1:-1);for(var m=0;m<k.length;m++){const w=k[m],B=[...w.dimensions].sort((a,f)=>a.name>f.name?-1:1);if(w.name!==h)v+=B.map(a=>l(a)).reduce((a,f)=>a*f);else{h=B.map(a=>l(a));k=B.length;for(let a=0;a<k;a++){m=n.find(f=>f.dimensionName===B[a].name);if(null==m)return null;m=c(m.values[0],B[a]);if(-1===m)return null;h.shift();v=a===k-1?v+m:v+m*h.reduce((f,g)=>f*g)}break}}return v};H.getSubsetVariablesFromMdInfo=
function(n,k){if(x.isNone(k)||x.isNone(n))return null;k=k.variables.map(v=>({...v}));n?.variables?.length&&(k=k.filter(({name:v})=>n.variables.includes(v)),k.forEach(v=>{v.dimensions=v.dimensions.map(h=>L(h,n,v.name)).filter(x.isSome)}));return k};H.hasExcludedVariableOrDimension=Q;H.intersectMultimensionalSubset=function(n,k){if(x.isNone(n))return{isOutside:!1};const {geometry:v,timeExtent:h,multidimensionalDefinition:m}=k;k=null;if(x.isSome(h)&&(k=C(n,h),x.isNone(k)))return{isOutside:!0};const {areaOfInterest:w}=
n;if(w&&v){const B="point"===v.type?v:"extent"===v.type?v.center:"polygon"===v.type?v.centroid:null;if(B&&!w.contains(B))return{isOutside:!0}}return x.isSome(m)&&m.length&&Q(m,n,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:v,timeExtent:k,multidimensionalDefinition:m}}};H.isMultiSliceOrRangeDefinition=function(n){return x.isNone(n)||!n.length?!1:n.some(k=>{if(null==k.values)return!0;const v=k.values.length;return 0===v||1<v||!k.isSlice&&Array.isArray(k.values[0])})};Object.defineProperty(H,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(H,x,A,G,u,K,O,L,Q,C,p,c,l){async function n(q,z){if(!l.isPlatformLittleEndian)throw new x("rasterCoded:decode","lerc decoder is not supported on big endian platform");await O.load();const {offset:E}=z,
{width:F,height:M,pixelType:I,statistics:J,depthCount:r,noDataValues:y,bandMasks:N,pixels:P,mask:R}=O.decode(q,{inputOffset:E,returnInterleaved:z.returnInterleaved});return new G({width:F,height:M,pixelType:I.toLowerCase(),pixels:P,mask:R,statistics:J,bandMasks:N,depthCount:r,noDataValues:y})}async function k(q,z){q=await c.decode(q,{...z,noDataValue:null});A.assertIsSome(q);q=new G({width:q.width,height:q.height,pixels:q.pixels,pixelType:q.pixelType.toLowerCase(),mask:q.mask,statistics:null});q.updateStatistics();
return q}async function v(q,z){q=await c.decodeTileOrStrip(q,z.customOptions);q=new G({width:q.width,height:q.height,pixels:q.pixels,pixelType:q.pixelType.toLowerCase(),mask:q.mask,statistics:null});q.updateStatistics();return q}function h(q,z){const E=z.pixelType||"u8",F=G.getPixelArrayConstructor(E),M="u8"===E?q:new F(q.buffer),I=[],J=z.planes||1;if(1===J)I.push(M);else for(let r=0;r<J;r++){const y=(z.width||1)*(z.height||q.length),N=new F(y);for(let P=0;P<y;P++)N[P]=M[P*J+r];I.push(N)}q=new G({width:z.width||
1,height:z.height||q.length,pixels:I,pixelType:E,statistics:null});q.updateStatistics();return q}function m(q,z){q=(new C.Zlib(new Uint8Array(q))).getBytes();return h(q,z)}function w(q,z){q=L.decode(q,z.offset,z.eof,!z.isInputBigEndian);return h(q,z)}function B(q,z){q=K.decode(q,z.hasNoZlibMask??void 0);q=new G({width:q.width,height:q.height,pixels:q.pixels,pixelType:"U8",mask:q.mask,statistics:null});q.updateStatistics();return q}function a(q,z){q=new Uint8Array(q);q=new d(q);const {width:E,height:F}=
z;z=E*F;q=q.decode();let M=0;var I=0;let J;I=new Uint8Array(z);for(M=0;M<z;M++)I[M]=q[4*M+3];const r=new G({width:E,height:F,pixels:[],pixelType:"U8",mask:I,statistics:[]});for(M=0;3>M;M++){J=new Uint8Array(z);for(I=0;I<z;I++)J[I]=q[4*I+M];r.addData({pixels:J})}r.updateStatistics();return r}async function f(q,z,E,F){q=await (new u).decode(q,{applyJpegMask:!1,format:z,...E},F);q=new G(q);q.updateStatistics();return q}function g(q){if(null==q)throw new x("rasterCodec:decode","parameter encodeddata is required.");
q=new Uint8Array(q,0,10);let z="";255===q[0]&&216===q[1]?z="jpg":137===q[0]&&80===q[1]&&78===q[2]&&71===q[3]?z="png":67===q[0]&&110===q[1]&&116===q[2]&&90===q[3]&&73===q[4]&&109===q[5]&&97===q[6]&&103===q[7]&&101===q[8]&&32===q[9]?z="lerc":76===q[0]&&101===q[1]&&114===q[2]&&99===q[3]&&50===q[4]&&32===q[5]?z="lerc2":73===q[0]&&73===q[1]&&42===q[2]&&0===q[3]||77===q[0]&&77===q[1]&&0===q[2]&&42===q[3]||73===q[0]&&73===q[1]&&43===q[2]&&0===q[3]||77===q[0]&&77===q[1]&&0===q[2]&&43===q[3]?z="tiff":71===
q[0]&&73===q[1]&&70===q[2]?z="gif":66===q[0]&&77===q[1]?z="bmp":String.fromCharCode.apply(null,q).toLowerCase().includes("error")&&(z="error");return z}function e(q){let z=null;switch(q){case "lerc":case "lerc2":z=n;break;case "jpg":z=B;break;case "png":z=a;break;case "bsq":case "bip":z=(E,F)=>{var M=F.pixelType,I=null;let J=null;switch(M?M.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":J=255;I=Uint8Array;break;case "u16":J=J||65535;I=Uint16Array;break;case "u32":J=J||2**32-1;I=Uint32Array;
break;case "s8":J=J||-128;I=Int8Array;break;case "s16":J=J||-32768;I=Int16Array;break;case "s32":J=J||-(2**31);I=Int32Array;break;default:I=Float32Array}({pixelTypeCtor:M}={pixelTypeCtor:I,noDataValue:J});I=p.decode;E=I(E,{width:F.width,height:F.height,pixelType:M,format:q});F=new G({width:F.width,height:F.height,pixels:E.pixels,pixelType:F.pixelType,mask:E.mask,statistics:null});F.updateStatistics();return F};break;case "tiff":z=k;break;case "deflate":z=m;break;case "lzw":z=w;break;case "error":z=
()=>{throw new x("rasterCodec:decode","input data contains error");};break;default:z=()=>{throw new x("rasterCodec:decode","unsupported raster format");}}return z}function b(q,z=1){if(q){var {pixels:E,width:F,height:M,mask:I}=q;if(E&&0!==E.length){var J=E.length,r=F-1,y=M-1,N=[],P,R,X=null,U=G.getPixelArrayConstructor(q.pixelType);if(0===z){for(z=0;z<J;z++){var W=E[z];var Z=new U(r*y);for(P=0;P<y;P++){var da=P*F;for(R=0;R<r;R++)Z[P*r+R]=W[da+R]}N.push(Z)}if(A.isSome(I))for(X=new Uint8Array(r*y),P=
0;P<y;P++)for(da=P*F,R=0;R<r;R++)X[P*r+R]=I[da+R]}else{for(z=0;z<J;z++){W=E[z];Z=new U(r*y);for(P=0;P<y;P++)for(da=P*F,R=0;R<r;R++)Z[P*r+R]=(W[da+R]+W[da+R+1]+W[da+F+R]+W[da+F+R+1])/4;N.push(Z)}if(I)for(X=new Uint8Array(r*y),P=0;P<y;P++)for(da=P*F,R=0;R<r;R++)X[P*r+R]=Math.min.apply(null,[I[da+R],I[da+R+1],I[da+F+R],I[da+F+R+1]])}q.width=r;q.height=y;q.mask=X;q.pixels=N}}}var d=function(q){function z(I){var J,r;this.data=I;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=
null;this.text={};for(r=null;;){var y=this.readUInt32();var N=I=void 0;I=[];for(N=0;4>N;++N)I.push(String.fromCharCode(this.data[this.pos++]));I=I.join("");switch(I){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||
Infinity,frames:[]};break;case "PLTE":this.palette=this.read(y);break;case "fcTL":r&&this.animation.frames.push(r);this.pos+=4;r={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};I=this.readUInt16();y=this.readUInt16()||100;r.delay=1E3*I/y;r.disposeOp=this.data[this.pos++];r.blendOp=this.data[this.pos++];r.data=[];break;case "IDAT":case "fdAT":"fdAT"===I&&(this.pos+=4,y-=4);I=(null!=r?r.data:void 0)||this.imgData;for(N=0;0<=y?N<y:N>y;0<=y?++N:--N)I.push(this.data[this.pos++]);
break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(y);y=255-this.transparency.indexed.length;if(0<y)for(I=0;0<=y?I<y:I>y;0<=y?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(y)[0];break;case 2:this.transparency.rgb=this.read(y)}break;case "tEXt":N=this.read(y);y=N.indexOf(0);I=String.fromCharCode.apply(String,N.slice(0,y));this.text[I]=String.fromCharCode.apply(String,N.slice(y+1));break;case "IEND":r&&
this.animation.frames.push(r);a:{switch(this.colorType){case 0:case 3:case 4:r=1;break a;case 2:case 6:r=3;break a}r=void 0}this.colors=r;this.hasAlphaChannel=4===(J=this.colorType)||6===J;J=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*J;a:{switch(this.colors){case 1:J="DeviceGray";break a;case 3:J="DeviceRGB";break a}J=void 0}this.colorSpace=J;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=y}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");
}}var E;z.load=function(I,J,r){"function"===typeof J&&(r=J);var y=new XMLHttpRequest;y.open("GET",I,!0);y.responseType="arraybuffer";y.onload=function(){var N=new Uint8Array(y.response||y.mozResponseArrayBuffer);N=new z(N);"function"===typeof(null!=J?J.getContext:void 0)&&N.render(J);return"function"===typeof r?r(N):void 0};return y.send(null)};z.prototype.read=function(I){var J;var r=[];for(J=0;0<=I?J<I:J>I;0<=I?++J:--J)r.push(this.data[this.pos++]);return r};z.prototype.readUInt32=function(){var I=
this.data[this.pos++]<<24;var J=this.data[this.pos++]<<16;var r=this.data[this.pos++]<<8;var y=this.data[this.pos++];return I|J|r|y};z.prototype.readUInt16=function(){var I=this.data[this.pos++]<<8;var J=this.data[this.pos++];return I|J};z.prototype.decodePixels=function(I){var J,r,y,N,P,R,X,U;null==I&&(I=this.imgData);if(0===I.length)return new Uint8Array(0);I=new C.Zlib(I);I=I.getBytes();var W=this.pixelBitlength/8;var Z=W*this.width;var da=new Uint8Array(Z*this.height);var ea=I.length;for(r=N=
P=0;N<ea;){switch(I[N++]){case 0:for(y=J=0;J<Z;y=J+=1)da[r++]=I[N++];break;case 1:for(y=R=0;R<Z;y=R+=1){J=I[N++];var aa=y<W?0:da[r-W];da[r++]=(J+aa)%256}break;case 2:for(y=aa=0;aa<Z;y=aa+=1){J=I[N++];var T=(y-y%W)/W;R=P&&da[(P-1)*Z+T*W+y%W];da[r++]=(R+J)%256}break;case 3:for(y=U=0;U<Z;y=U+=1)J=I[N++],T=(y-y%W)/W,aa=y<W?0:da[r-W],R=P&&da[(P-1)*Z+T*W+y%W],da[r++]=(J+Math.floor((aa+R)/2))%256;break;case 4:for(y=U=0;U<Z;y=U+=1){J=I[N++];T=(y-y%W)/W;aa=y<W?0:da[r-W];0===P?R=X=0:(R=da[(P-1)*Z+T*W+y%W],
X=T&&da[(P-1)*Z+(T-1)*W+y%W]);var V=aa+R-X;y=Math.abs(V-aa);T=Math.abs(V-R);V=Math.abs(V-X);aa=y<=T&&y<=V?aa:T<=V?R:X;da[r++]=(J+aa)%256}break;default:throw Error("Invalid filter algorithm: "+I[N-1]);}P++}return da};z.prototype.decodePalette=function(){var I,J,r,y;var N=this.palette;var P=this.transparency.indexed||[];var R=new Uint8Array((P.length||0)+N.length);var X=0;N.length;var U=J=I=0;for(r=N.length;J<r;U=J+=3)R[X++]=N[U],R[X++]=N[U+1],R[X++]=N[U+2],R[X++]=null!=(y=P[I++])?y:255;return R};z.prototype.copyToImageData=
function(I,J){var r,y;var N=this.colors;var P=null;var R=this.hasAlphaChannel;this.palette.length&&(P=null!=(r=this._decodedPalette)?r:this._decodedPalette=this.decodePalette(),N=4,R=!0);I=I.data||I;var X=I.length;var U=P||J;r=y=0;if(1===N)for(;r<X;)N=P?4*J[r/4]:y,y=U[N++],I[r++]=y,I[r++]=y,I[r++]=y,I[r++]=R?U[N++]:this.transparency.grayscale&&this.transparency.grayscale===y?0:255,y=N;else for(;r<X;)N=P?4*J[r/4]:y,I[r++]=U[N++],I[r++]=U[N++],I[r++]=U[N++],I[r++]=R?U[N++]:this.transparency.rgb&&this.transparency.rgb[1]===
U[N-3]&&this.transparency.rgb[3]===U[N-2]&&this.transparency.rgb[5]===U[N-1]?0:255,y=N};z.prototype.decode=function(){var I=new Uint8Array(this.width*this.height*4);this.copyToImageData(I,this.decodePixels());return I};var F=(E=q.document&&q.document.createElement("canvas"))&&E.getContext("2d");var M=function(I){F.width=I.width;F.height=I.height;F.clearRect(0,0,I.width,I.height);F.putImageData(I,0,0);I=new Image;I.src=E.toDataURL();return I};z.prototype.decodeFrames=function(I){var J,r;if(this.animation){var y=
this.animation.frames;var N=[];var P=J=0;for(r=y.length;J<r;P=++J){P=y[P];var R=I.createImageData(P.width,P.height);var X=this.decodePixels(new Uint8Array(P.data));this.copyToImageData(R,X);P.imageData=R;N.push(P.image=M(R))}return N}};z.prototype.renderFrame=function(I,J){var r=this.animation.frames;var y=r[J];r=r[J-1];0===J&&I.clearRect(0,0,this.width,this.height);1===(null!=r?r.disposeOp:void 0)?I.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&I.putImageData(r.imageData,
r.xOffset,r.yOffset);0===y.blendOp&&I.clearRect(y.xOffset,y.yOffset,y.width,y.height);return I.drawImage(y.image,y.xOffset,y.yOffset)};z.prototype.animate=function(I){var J,r=this;var y=0;var N=this.animation;var P=N.numFrames;var R=N.frames;var X=N.numPlays;return(J=function(){var U=y++%P;var W=R[U];r.renderFrame(I,U);if(1<P&&y/P<X)return r.animation._timeout=setTimeout(J,W.delay)})()};z.prototype.stopAnimation=function(){var I;return clearTimeout(null!=(I=this.animation)?I._timeout:void 0)};z.prototype.render=
function(I){I._png&&I._png.stopAnimation();I._png=this;I.width=this.width;I.height=this.height;I=I.getContext("2d");if(this.animation)return this.decodeFrames(I),this.animate(I);var J=I.createImageData(this.width,this.height);this.copyToImageData(J,this.decodePixels());return I.putImageData(J,0,0)};return z}(self);const t=new Set(["jpg","png","bmp","gif"]);H.decode=async function(q,z={},E){if(null==q)throw new x("rasterCodec:decode","missing encodeddata parameter.");let F=z.format&&z.format.toLowerCase();
if(!("bsq"!==F&&"bip"!==F||null!=z.width&&null!=z.height))throw new x("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===F&&z.customOptions)return v(q,z);if(!F||"bsq"!==F&&"bip"!==F&&"deflate"!==F&&"lzw"!==F)F=g(q);if(z.useCanvas&&t.has(F))return f(q,F,z,E);E=e(F);z.isPoint&&(z={...z},null!=z.width&&z.width++,null!=z.height&&z.height++);q=await E(q,z);if(!q)return q;"jpg"!==F&&null!=z.noDataValue&&1===q.depthCount&&Q.convertNoDataToMask(q,z.noDataValue,{customFloatTolerance:z.tolerance});
z.isPoint&&b(q);return q};H.getFormat=function(q){q=g(q);"lerc2"===q?q="lerc":"error"===q&&(q="");return q};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(H,x,A,G){return function(){function u(K){this._ctx=this._canvas=null;K&&(this._canvas=K.canvas,this._ctx=K.ctx||K.canvas&&K.canvas.getContext("2d"))}
u.prototype.decode=function(K,O,L){if(!K||10>K.byteLength)throw new x("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:Q=0,height:C=0,format:p}=O;const {applyJpegMask:c}=O;if(c&&(!Q||!C))throw new x("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,n)=>{let k=null;"jpg"===p&&c&&(k=u._getMask(K,{width:Q,height:C}));const v=new Blob([new Uint8Array(K)],{type:"jpg"==="image/"+p?"jpeg":p}),h=
URL.createObjectURL(v),m=new Image;let w;m.src=h;m.onload=()=>{URL.revokeObjectURL(h);if(A.isAborted(L))n(A.createAbortError());else{Q=m.width;C=m.height;if(this._canvas&&this._ctx){if(this._canvas.width!==Q||this._canvas.height!==C)this._canvas.width=Q,this._canvas.height=C;this._ctx.clearRect(0,0,Q,C)}else this._canvas=document.createElement("canvas"),this._canvas.width=Q,this._canvas.height=C,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(m,0,0);var B=this._ctx.getImageData(0,0,Q,
C);w=B.data;var a;if(O.renderOnCanvas){if(k)for(a=0;a<k.length;a++)w[4*a+3]=k[a]?255:0;this._ctx.putImageData(B,0,0);l(null)}else{B=Q*C;var f=new Uint8Array(B),g=new Uint8Array(B),e=new Uint8Array(B);if(k)for(a=0;a<B;a++)f[a]=w[4*a],g[a]=w[4*a+1],e[a]=w[4*a+2];else for(k=new Uint8Array(B),a=0;a<B;a++)f[a]=w[4*a],g[a]=w[4*a+1],e[a]=w[4*a+2],k[a]=w[4*a+3];l({width:Q,height:C,pixels:[f,g,e],mask:k,pixelType:"u8"})}}};m.onerror=()=>{URL.revokeObjectURL(h);n("cannot load image")}})};u._getMask=function(K,
O){let L=null;try{var Q=new Uint8Array(K);K=0;var C=Q.length-2;for(K=Math.ceil(Q.length/2);K<C&&(255!==Q[K]||217!==Q[K+1]);K++);K+=2;if(K<Q.length-1){const p=(new G.Zlib(Q.subarray(K))).getBytes();L=new Uint8Array(O.width*O.height);O=0;for(Q=0;Q<p.length;Q++)for(C=7;0<=C;C--)L[O++]=p[Q]>>C&1}}catch(p){}return L};return H._createClass(u)}()})},"esri/chunks/Zlib":function(){define(["exports"],function(H){var x={};(function(A){(function(G){G=G();void 0!==G&&(A.exports=G)})(function(){var G=function(){function u(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}u.prototype={ensureBuffer:function(K){var O=this.buffer,L=O?O.byteLength:0;if(K<L)return O;for(var Q=512;Q<K;)Q<<=1;K=new Uint8Array(Q);for(Q=0;Q<L;++Q)K[Q]=O[Q];return this.buffer=K},getByte:function(){for(var K=this.pos;this.bufferLength<=K;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(K){var O=this.pos;if(K){this.ensureBuffer(O+K);for(K=O+K;!this.eof&&this.bufferLength<K;)this.readBlock();var L=this.bufferLength;
K>L&&(K=L)}else{for(;!this.eof;)this.readBlock();K=this.bufferLength}this.pos=K;return this.buffer.subarray(O,K)},lookChar:function(){for(var K=this.pos;this.bufferLength<=K;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var K=this.pos;this.bufferLength<=K;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(K,O,L){for(var Q=K+O;this.bufferLength<=Q&&!this.eof;)this.readBlock();
return new Stream(this.buffer,K,O,L)},skip:function(K){K||(K=1);this.pos+=K},reset:function(){this.pos=0}};return u}();return function(){function u(c){throw Error(c);}function K(c){var l=0,n=c[l++],k=c[l++];-1!=n&&-1!=k||u("Invalid header in flate stream");8!=(n&15)&&u("Unknown compression method in flate stream");0!=((n<<8)+k)%31&&u("Bad FCHECK in flate stream");k&32&&u("FDICT bit set in flate stream");this.bytes=c;this.bytesPos=l;this.codeBuf=this.codeSize=0;G.call(this)}if(!self||!self.Uint32Array)return null;
var O=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),Q=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),C=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],p=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];K.prototype=Object.create(G.prototype);K.prototype.getBits=function(c){for(var l=this.codeSize,n=this.codeBuf,k=this.bytes,v=this.bytesPos,h;l<c;)"undefined"==typeof(h=k[v++])&&u("Bad encoding in flate stream"),n|=h<<
l,l+=8;this.codeBuf=n>>c;this.codeSize=l-=c;this.bytesPos=v;return n&(1<<c)-1};K.prototype.getCode=function(c){var l=c[0],n=c[1];c=this.codeSize;for(var k=this.codeBuf,v=this.bytes,h=this.bytesPos;c<n;){var m;"undefined"==typeof(m=v[h++])&&u("Bad encoding in flate stream");k|=m<<c;c+=8}n=l[k&(1<<n)-1];l=n>>16;n&=65535;(0==c||c<l||0==l)&&u("Bad encoding in flate stream");this.codeBuf=k>>l;this.codeSize=c-l;this.bytesPos=h;return n};K.prototype.generateHuffmanTable=function(c){for(var l=c.length,n=
0,k=0;k<l;++k)c[k]>n&&(n=c[k]);for(var v=1<<n,h=new Uint32Array(v),m=1,w=0,B=2;m<=n;++m,w<<=1,B<<=1)for(var a=0;a<l;++a)if(c[a]==m){var f=0,g=w;for(k=0;k<m;++k)f=f<<1|g&1,g>>=1;for(k=f;k<v;k+=B)h[k]=m<<16|a;++w}return[h,n]};K.prototype.readBlock=function(){function c(f,g,e,b,d){for(f=f.getBits(e)+b;0<f--;)g[w++]=d}var l=this.getBits(3);l&1&&(this.eof=!0);l>>=1;if(0==l){var n=this.bytes,k=this.bytesPos,v;"undefined"==typeof(v=n[k++])&&u("Bad block header in flate stream");var h=v;"undefined"==typeof(v=
n[k++])&&u("Bad block header in flate stream");h|=v<<8;"undefined"==typeof(v=n[k++])&&u("Bad block header in flate stream");l=v;"undefined"==typeof(v=n[k++])&&u("Bad block header in flate stream");(l|v<<8)!=(~h&65535)&&u("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;v=this.bufferLength;l=this.ensureBuffer(v+h);this.bufferLength=h=v+h;for(var m=v;m<h;++m){if("undefined"==typeof(v=n[k++])){this.eof=!0;break}l[m]=v}this.bytesPos=k}else{if(1==l)k=C,v=p;else if(2==l){l=
this.getBits(5)+257;v=this.getBits(5)+1;n=this.getBits(4)+4;k=Array(O.length);for(var w=0;w<n;)k[O[w++]]=this.getBits(3);k=this.generateHuffmanTable(k);w=n=0;v=l+v;for(h=Array(v);w<v;)m=this.getCode(k),16==m?c(this,h,2,3,n):17==m?c(this,h,3,3,n=0):18==m?c(this,h,7,11,n=0):h[w++]=n=m;k=this.generateHuffmanTable(h.slice(0,l));v=this.generateHuffmanTable(h.slice(l,v))}else u("Unknown block type in flate stream");h=(l=this.buffer)?l.length:0;for(m=this.bufferLength;;){var B=this.getCode(k);if(256>B)m+
1>=h&&(l=this.ensureBuffer(m+1),h=l.length),l[m++]=B;else{if(256==B){this.bufferLength=m;break}B-=257;B=L[B];var a=B>>16;0<a&&(a=this.getBits(a));n=(B&65535)+a;B=this.getCode(v);B=Q[B];a=B>>16;0<a&&(a=this.getBits(a));B=(B&65535)+a;m+n>=h&&(l=this.ensureBuffer(m+n),h=l.length);for(a=0;a<n;++a,++m)l[m]=l[m-B]}}}};return K}()})})({get exports(){return x},set exports(A){x=A}});H.Zlib=x})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/Jpg",
"../../../chunks/Zlib"],function(H,x,A){return function(){function G(){}G.decode=function(u,K=!1){const O=new Uint8Array(u);u=new x.JpegImage;u.parse(O);const {width:L,height:Q,numComponents:C,eof:p}=u,c=u.getData(L,Q,!0),l=L*Q;u=null;let n=0,k=0,v=0;if(!K&&p<O.length-1)try{var h=(new A.Zlib(O.subarray(p))).getBytes();u=new Uint8Array(l);for(n=K=0;n<h.length;n++)for(v=7;0<=v;v--)u[K++]=h[n]>>v&1}catch{}if(1===C&&c.length===L*Q)h=new Uint8Array(c.buffer),h=[h,h,h];else{h=[];for(n=0;3>n;n++)h.push(new Uint8Array(l));
for(k=v=0;k<l;k++)for(n=0;3>n;n++)h[n][k]=c[v++]}return{width:L,height:Q,pixels:h,mask:u}};return H._createClass(G)}()})},"esri/chunks/Jpg":function(){define(["exports"],function(H){var x={};(function(A){(function(G){G=G();void 0!==G&&(A.exports=G)})(function(){var G=function(){function u(K){this.message="JPEG error: "+K}u.prototype=Error();u.prototype.name="JpegError";return u.constructor=u}();return function(){function u(){this.decodeTransform=null;this.colorTransform=-1}function K(p,c){for(var l=
0,n=[],k,v,h=16;0<h&&!p[h-1];)h--;n.push({children:[],index:0});var m=n[0],w;for(k=0;k<h;k++){for(v=0;v<p[k];v++){m=n.pop();for(m.children[m.index]=c[l];0<m.index;)m=n.pop();m.index++;for(n.push(m);n.length<=k;)n.push(w={children:[],index:0}),m.children[m.index]=w.children,m=w;l++}k+1<h&&(n.push(w={children:[],index:0}),m.children[m.index]=w.children,m=w)}return n[0].children}function O(p,c,l,n,k,v,h,m,w){function B(){if(0<M)return M--,F>>M&1;F=p[c++];if(255===F){var aa=p[c++];if(aa)throw new G("unexpected marker "+
(F<<8|aa).toString(16));}M=7;return F>>>7}function a(aa){for(;;){aa=aa[B()];if("number"===typeof aa)return aa;if("object"!==typeof aa)throw new G("invalid huffman sequence");}}function f(aa){for(var T=0;0<aa;)T=T<<1|B(),aa--;return T}function g(aa){if(1===aa)return 1===B()?1:-1;var T=f(aa);return T>=1<<aa-1?T:T+(-1<<aa)+1}function e(aa,T){var V=a(aa.huffmanTableDC);V=0===V?0:g(V);aa.blockData[T]=aa.pred+=V;for(V=1;64>V;){var Y=a(aa.huffmanTableAC),ba=Y&15;Y>>=4;if(0===ba){if(15>Y)break;V+=16}else V+=
Y,aa.blockData[T+C[V]]=g(ba),V++}}function b(aa,T){var V=a(aa.huffmanTableDC);V=0===V?0:g(V)<<w;aa.blockData[T]=aa.pred+=V}function d(aa,T){aa.blockData[T]|=B()<<w}function t(aa,T){if(0<I)I--;else for(var V=v;V<=h;){var Y=a(aa.huffmanTableAC),ba=Y&15;Y>>=4;if(0===ba){if(15>Y){I=f(Y)+(1<<Y)-1;break}V+=16}else V+=Y,aa.blockData[T+C[V]]=g(ba)*(1<<w),V++}}function q(aa,T){for(var V=v,Y=0,ba;V<=h;){ba=C[V];switch(J){case 0:Y=a(aa.huffmanTableAC);ba=Y&15;Y>>=4;if(0===ba)15>Y?(I=f(Y)+(1<<Y),J=4):(Y=16,J=
1);else{if(1!==ba)throw new G("invalid ACn encoding");r=g(ba);J=Y?2:3}continue;case 1:case 2:aa.blockData[T+ba]?aa.blockData[T+ba]+=B()<<w:(Y--,0===Y&&(J=2===J?3:0));break;case 3:aa.blockData[T+ba]?aa.blockData[T+ba]+=B()<<w:(aa.blockData[T+ba]=r<<w,J=0);break;case 4:aa.blockData[T+ba]&&(aa.blockData[T+ba]+=B()<<w)}V++}4===J&&(I--,0===I&&(J=0))}var z=l.mcusPerLine,E=c,F=0,M=0,I=0,J=0,r,y=n.length,N,P,R,X;m=l.progressive?0===v?0===m?b:d:0===m?t:q:e;var U=0;l=1===y?n[0].blocksPerLine*n[0].blocksPerColumn:
z*l.mcusPerColumn;for(var W,Z;U<l;){var da=k?Math.min(l-U,k):l;for(N=0;N<y;N++)n[N].pred=0;I=0;if(1===y){var ea=n[0];for(X=0;X<da;X++)m(ea,64*((ea.blocksPerLine+1)*(U/ea.blocksPerLine|0)+U%ea.blocksPerLine)),U++}else for(X=0;X<da;X++){for(N=0;N<y;N++)for(ea=n[N],W=ea.h,Z=ea.v,P=0;P<Z;P++)for(R=0;R<W;R++)m(ea,64*((ea.blocksPerLine+1)*((U/z|0)*ea.v+P)+(U%z*ea.h+R)));U++}M=0;(ea=Q(p,c))&&ea.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ea.invalid),c=ea.offset);ea=ea&&ea.marker;
if(!ea||65280>=ea)throw new G("marker was not found");if(65488<=ea&&65495>=ea)c+=2;else break}(ea=Q(p,c))&&ea.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ea.invalid),c=ea.offset);return c-E}function L(p,c){p=c.blocksPerLine;for(var l=c.blocksPerColumn,n=new Int16Array(64),k=0;k<l;k++)for(var v=0;v<p;v++){var h=void 0,m=void 0,w=void 0,B=void 0,a=void 0,f=void 0,g=void 0,e=void 0,b=a=f=B=m=h=void 0,d=void 0,t=void 0,q=void 0,z=64*((c.blocksPerLine+1)*k+v),E=n,F=c.quantizationTable,
M=c.blockData;if(!F)throw new G("missing required Quantization Table.");for(var I=0;64>I;I+=8)h=M[z+I],e=M[z+I+1],g=M[z+I+2],f=M[z+I+3],a=M[z+I+4],B=M[z+I+5],w=M[z+I+6],m=M[z+I+7],h*=F[I],0===(e|g|f|a|B|w|m)?(h=5793*h+512>>10,E[I]=h,E[I+1]=h,E[I+2]=h,E[I+3]=h,E[I+4]=h,E[I+5]=h,E[I+6]=h,E[I+7]=h):(e*=F[I+1],g*=F[I+2],f*=F[I+3],a*=F[I+4],B*=F[I+5],w*=F[I+6],m*=F[I+7],q=5793*h+128>>8,t=5793*a+128>>8,d=g,b=w,a=2896*(e-m)+128>>8,m=2896*(e+m)+128>>8,f<<=4,B<<=4,q=q+t+1>>1,t=q-t,h=3784*d+1567*b+128>>8,d=
1567*d-3784*b+128>>8,b=h,a=a+B+1>>1,B=a-B,m=m+f+1>>1,f=m-f,q=q+b+1>>1,b=q-b,t=t+d+1>>1,d=t-d,h=2276*a+3406*m+2048>>12,a=3406*a-2276*m+2048>>12,m=h,h=799*f+4017*B+2048>>12,f=4017*f-799*B+2048>>12,B=h,E[I]=q+m,E[I+7]=q-m,E[I+1]=t+B,E[I+6]=t-B,E[I+2]=d+f,E[I+5]=d-f,E[I+3]=b+a,E[I+4]=b-a);for(F=0;8>F;++F)h=E[F],e=E[F+8],g=E[F+16],f=E[F+24],a=E[F+32],B=E[F+40],w=E[F+48],m=E[F+56],0===(e|g|f|a|B|w|m)?(h=5793*h+8192>>14,h=-2040>h?0:2024<=h?255:h+2056>>4,M[z+F]=h,M[z+F+8]=h,M[z+F+16]=h,M[z+F+24]=h,M[z+F+
32]=h,M[z+F+40]=h,M[z+F+48]=h,M[z+F+56]=h):(q=5793*h+2048>>12,t=5793*a+2048>>12,d=g,b=w,a=2896*(e-m)+2048>>12,m=2896*(e+m)+2048>>12,q=(q+t+1>>1)+4112,t=q-t,h=3784*d+1567*b+2048>>12,d=1567*d-3784*b+2048>>12,b=h,a=a+B+1>>1,B=a-B,m=m+f+1>>1,f=m-f,q=q+b+1>>1,b=q-b,t=t+d+1>>1,d=t-d,h=2276*a+3406*m+2048>>12,a=3406*a-2276*m+2048>>12,m=h,h=799*f+4017*B+2048>>12,f=4017*f-799*B+2048>>12,B=h,h=q+m,m=q-m,e=t+B,w=t-B,g=d+f,B=d-f,f=b+a,a=b-a,h=16>h?0:4080<=h?255:h>>4,e=16>e?0:4080<=e?255:e>>4,g=16>g?0:4080<=g?
255:g>>4,f=16>f?0:4080<=f?255:f>>4,a=16>a?0:4080<=a?255:a>>4,B=16>B?0:4080<=B?255:B>>4,w=16>w?0:4080<=w?255:w>>4,m=16>m?0:4080<=m?255:m>>4,M[z+F]=h,M[z+F+8]=e,M[z+F+16]=g,M[z+F+24]=f,M[z+F+32]=a,M[z+F+40]=B,M[z+F+48]=w,M[z+F+56]=m)}return c.blockData}function Q(p,c,l){var n=p.length-1;l=l<c?l:c;if(c>=n)return null;var k=p[c]<<8|p[c+1];if(65472<=k&&65534>=k)return{invalid:null,marker:k,offset:c};for(c=p[l]<<8|p[l+1];!(65472<=c&&65534>=c);){if(++l>=n)return null;c=p[l]<<8|p[l+1]}return{invalid:k.toString(16),
marker:c,offset:l}}if(!self||!self.Uint8ClampedArray)return null;var C=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);u.prototype={parse:function(p){function c(){var F=p[k]<<8|p[k+1];k+=2;return F}function l(){var F=c();F=k+F-2;var M=Q(p,F,k);M&&M.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+M.invalid),F=M.offset);F=
p.subarray(k,F);k+=F.length;return F}function n(F){for(var M=Math.ceil(F.samplesPerLine/8/F.maxH),I=Math.ceil(F.scanLines/8/F.maxV),J=0;J<F.components.length;J++){E=F.components[J];var r=Math.ceil(Math.ceil(F.samplesPerLine/8)*E.h/F.maxH),y=Math.ceil(Math.ceil(F.scanLines/8)*E.v/F.maxV);E.blockData=new Int16Array(64*I*E.v*(M*E.h+1));E.blocksPerLine=r;E.blocksPerColumn=y}F.mcusPerLine=M;F.mcusPerColumn=I}var k=0,v=null,h=null,m=[],w=[],B=[],a=c();if(65496!==a)throw new G("SOI not found");for(a=c();65497!==
a;){switch(a){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var f=l();65504===a&&74===f[0]&&70===f[1]&&73===f[2]&&70===f[3]&&0===f[4]&&(v={version:{major:f[5],minor:f[6]},densityUnits:f[7],xDensity:f[8]<<8|f[9],yDensity:f[10]<<8|f[11],thumbWidth:f[12],thumbHeight:f[13],thumbData:f.subarray(14,14+3*f[12]*f[13])});65518===a&&65===f[0]&&100===f[1]&&111===f[2]&&
98===f[3]&&101===f[4]&&(h={version:f[5]<<8|f[6],flags0:f[7]<<8|f[8],flags1:f[9]<<8|f[10],transformCode:f[11]});break;case 65499:a=c()+k-2;for(var g;k<a;){var e=p[k++],b=new Uint16Array(64);if(0===e>>4)for(f=0;64>f;f++)g=C[f],b[g]=p[k++];else if(1===e>>4)for(f=0;64>f;f++)g=C[f],b[g]=c();else throw new G("DQT - invalid table spec");m[e&15]=b}break;case 65472:case 65473:case 65474:if(d)throw new G("Only single frame JPEGs supported");c();var d={};d.extended=65473===a;d.progressive=65474===a;d.precision=
p[k++];d.scanLines=c();d.samplesPerLine=c();d.components=[];d.componentIds={};f=p[k++];for(a=b=e=0;a<f;a++){g=p[k];var t=p[k+1]>>4;var q=p[k+1]&15;e<t&&(e=t);b<q&&(b=q);t=d.components.push({h:t,v:q,quantizationId:p[k+2],quantizationTable:null});d.componentIds[g]=t-1;k+=3}d.maxH=e;d.maxV=b;n(d);break;case 65476:g=c();for(a=2;a<g;){e=p[k++];b=new Uint8Array(16);for(f=t=0;16>f;f++,k++)t+=b[f]=p[k];q=new Uint8Array(t);for(f=0;f<t;f++,k++)q[f]=p[k];a+=17+t;(0===e>>4?B:w)[e&15]=K(b,q)}break;case 65501:c();
var z=c();break;case 65498:c();g=p[k++];f=[];for(a=0;a<g;a++){e=d.componentIds[p[k++]];var E=d.components[e];e=p[k++];E.huffmanTableDC=B[e>>4];E.huffmanTableAC=w[e&15];f.push(E)}a=p[k++];g=p[k++];e=p[k++];a=O(p,k,d,f,z,a,g,e>>4,e&15);k+=a;break;case 65535:255!==p[k]&&k--;break;default:if(255===p[k-3]&&192<=p[k-2]&&254>=p[k-2])k-=3;else throw new G("unknown marker "+a.toString(16));}a=c()}this.width=d.samplesPerLine;this.height=d.scanLines;this.jfif=v;this.eof=k;this.adobe=h;this.components=[];for(a=
0;a<d.components.length;a++){E=d.components[a];if(v=m[E.quantizationId])E.quantizationTable=v;this.components.push({output:L(d,E),scaleX:E.h/d.maxH,scaleY:E.v/d.maxV,blocksPerLine:E.blocksPerLine,blocksPerColumn:E.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(p,c){var l=this.width/p,n=this.height/c,k,v,h=0,m=this.components.length,w=p*c*m,B=new Uint8ClampedArray(w),a=new Uint32Array(p);for(v=0;v<m;v++){var f=this.components[v];var g=f.scaleX*l;var e=
f.scaleY*n;h=v;var b=f.output;var d=f.blocksPerLine+1<<3;for(k=0;k<p;k++)f=0|k*g,a[k]=(f&4294967288)<<3|f&7;for(g=0;g<c;g++)for(f=0|g*e,f=d*(f&4294967288)|(f&7)<<3,k=0;k<p;k++)B[h]=b[f+a[k]],h+=m}if(c=this.decodeTransform)for(v=0;v<w;)for(p=f=0;f<m;f++,v++,p+=2)B[v]=(B[v]*c[p]>>8)+c[p+1];return B},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(p){for(var c,
l,n,k=0,v=p.length;k<v;k+=3)c=p[k],l=p[k+1],n=p[k+2],p[k]=c-179.456+1.402*n,p[k+1]=c+135.459-.344*l-.714*n,p[k+2]=c-226.816+1.772*l;return p},_convertYcckToRgb:function(p){for(var c,l,n,k,v=0,h=0,m=p.length;h<m;h+=4)c=p[h],l=p[h+1],n=p[h+2],k=p[h+3],p[v++]=-122.67195406894+l*(-6.60635669420364E-5*l+4.37130475926232E-4*n-5.4080610064599E-5*c+4.8449797120281E-4*k-.154362151871126)+n*(-9.57964378445773E-4*n+8.17076911346625E-4*c-.00477271405408747*k+1.53380253221734)+c*(9.61250184130688E-4*c-.00266257332283933*
k+.48357088451265)+k*(-3.36197177618394E-4*k+.484791561490776),p[v++]=107.268039397724+l*(2.19927104525741E-5*l-6.40992018297945E-4*n+6.59397001245577E-4*c+4.26105652938837E-4*k-.176491792462875)+n*(-7.78269941513683E-4*n+.00130872261408275*c+7.70482631801132E-4*k-.151051492775562)+c*(.00126935368114843*c-.00265090189010898*k+.25802910206845)+k*(-3.18913117588328E-4*k-.213742400323665),p[v++]=-20.810012546947+l*(-5.70115196973677E-4*l-2.63409051004589E-5*n+.0020741088115012*c-.00288260236853442*k+
.814272968359295)+n*(-1.53496057440975E-5*n-1.32689043961446E-4*c+5.60833691242812E-4*k-.195152027534049)+c*(.00174418132927582*c-.00255243321439347*k+.116935020465145)+k*(-3.43531996510555E-4*k+.24165260232407);return p},_convertYcckToCmyk:function(p){for(var c,l,n,k=0,v=p.length;k<v;k+=4)c=p[k],l=p[k+1],n=p[k+2],p[k]=434.456-c-1.402*n,p[k+1]=119.541-c+.344*l+.714*n,p[k+2]=481.816-c-1.772*l;return p},_convertCmykToRgb:function(p){for(var c,l,n,k,v=0,h=1/255,m=0,w=p.length;m<w;m+=4)c=p[m]*h,l=p[m+
1]*h,n=p[m+2]*h,k=p[m+3]*h,p[v++]=255+c*(-4.387332384609988*c+54.48615194189176*l+18.82290502165302*n+212.25662451639585*k-285.2331026137004)+l*(1.7149763477362134*l-5.6096736904047315*n-17.873870861415444*k-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*k+17.5119270841813)-k*(21.86122147463605*k+189.48180835922747),p[v++]=255+c*(8.841041422036149*c+60.118027045597366*l+6.871425592049007*n+31.159100130055922*k-79.2970844816548)+l*(-15.310361306967817*l+17.575251261109482*n+131.35250912493976*
k-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*k-24.86741582555878)-k*(20.737325471181034*k+187.80453709719578),p[v++]=255+c*(.8842522430003296*c+8.078677503112928*l+30.89978309703729*n-.23883238689178934*k-14.183576799673286)+l*(10.49593273432072*l+63.02378494754052*n+50.606957656360734*k-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*k-193.58209356861505)-k*(22.33816807309886*k+180.12613974708367);return p},getData:function(p,c,l){if(4<this.numComponents)throw new G("Unsupported color mode");
p=this._getLinearizedBlockData(p,c);if(1===this.numComponents&&l){l=p.length;c=new Uint8ClampedArray(3*l);for(var n=0,k=0;k<l;k++){var v=p[k];c[n++]=v;c[n++]=v;c[n++]=v}return c}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(p);if(4===this.numComponents){if(this._isColorConversionNeeded())return l?this._convertYcckToRgb(p):this._convertYcckToCmyk(p);if(l)return this._convertCmykToRgb(p)}return p}};return u}()})})({get exports(){return x},set exports(A){x=A}});
H.JpegImage=x})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(H,x,A){function G(C,p,c){c.set(C.slice(p,p+c.length))}function u(C){const {_malloc:p,_free:c,_lerc_getBlobInfo:l,_lerc_getDataRanges:n,_lerc_decode_4D:k,asm:v}=C;let h;const m=Object.values(v).find(B=>B&&"buffer"in B&&B.buffer===C.HEAPU8.buffer),w=B=>{B=B.map(g=>(g>>3<<3)+16);var a=B.reduce((g,e)=>g+e),f=p(a);h=new Uint8Array(m.buffer);a=B[0];B[0]=f;for(f=1;f<B.length;f++){const g=
B[f];B[f]=B[f-1]+a;a=g}return B};Q.getBlobInfo=B=>{var a=new Uint8Array(48),f=new Uint8Array(24);const [g,e,b]=w([B.length,a.length,f.length]);h.set(B,g);h.set(a,e);h.set(f,b);var d=l(g,B.length,e,b,12,3);if(d)throw c(g),Error(`lerc-getBlobInfo: error code is ${d}`);h=new Uint8Array(m.buffer);G(h,e,a);G(h,b,f);a=new Uint32Array(a.buffer);var t=new Float64Array(f.buffer);const [q,z,,E,F,M,I,J,r,y,N]=a;f={version:q,depthCount:y,width:E,height:F,validPixelCount:I,bandCount:M,blobSize:J,maskCount:r,dataType:z,
minValue:t[0],maxValue:t[1],maxZerror:t[2],statistics:[],bandCountWithNoData:N};if(N)return f;if(1===y&&1===M)return c(g),f.statistics.push({minValue:t[0],maxValue:t[1]}),f;d=y*M*8;var P=new Uint8Array(d),R=new Uint8Array(d);a=g;var X=t=0;let U=!1;h.byteLength<g+2*d?(c(g),U=!0,[a,t,X]=w([B.length,d,d]),h.set(B,a)):[t,X]=w([d,d]);h.set(P,t);h.set(R,X);if(d=n(a,B.length,y,M,t,X))throw c(a),U||c(t),Error(`lerc-getDataRanges: error code is ${d}`);h=new Uint8Array(m.buffer);G(h,t,P);G(h,X,R);B=new Float64Array(P.buffer);
d=new Float64Array(R.buffer);R=f.statistics;for(P=0;P<M;P++)if(1<y){X=B.slice(P*y,(P+1)*y);const W=d.slice(P*y,(P+1)*y),Z=Math.min.apply(null,X),da=Math.max.apply(null,W);R.push({minValue:Z,maxValue:da,depthStats:{minValues:X,maxValues:W}})}else R.push({minValue:B[P],maxValue:d[P]});c(a);U||c(t);return f};Q.decode=(B,a)=>{const {maskCount:f,depthCount:g,bandCount:e,width:b,height:d,dataType:t,bandCountWithNoData:q}=a;var z=K[t],E=b*d;a=new Uint8Array(E*e);z=new Uint8Array(E*g*e*z.size);E=new Uint8Array(e);
var F=new Uint8Array(8*e);const [M,I,J,r,y]=w([B.length,a.length,z.length,E.length,F.length]);h.set(B,M);h.set(a,I);h.set(z,J);h.set(E,r);h.set(F,y);if(B=k(M,B.length,f,I,g,b,d,e,t,J,r,y))throw c(M),Error(`lerc-decode: error code is ${B}`);h=new Uint8Array(m.buffer);G(h,J,z);G(h,I,a);B=null;if(q){G(h,r,E);G(h,y,F);B=[];F=new Float64Array(F.buffer);for(let N=0;N<E.length;N++)B.push(E[N]?F[N]:null)}c(M);return{data:z,maskData:a,noDataValues:B}}}const K=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,
127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];
let O=null,L=!1;const Q={getBlobInfo:null,decode:null};x.decode=function(C,p={}){var c=p.inputOffset??0;C=C instanceof Uint8Array?C.subarray(c):new Uint8Array(C,c);c=Q.getBlobInfo(C);const {data:l,maskData:n,noDataValues:k}=Q.decode(C,c),{width:v,height:h,bandCount:m,depthCount:w,dataType:B,maskCount:a,statistics:f}=c;var g=K[B],e=new g.ctor(l.buffer);C=[];c=[];const b=v*h;var d=b*w;for(var t=0;t<m;t++){var q=e.subarray(t*d,(t+1)*d);if(p.returnInterleaved)C.push(q);else{a:{var z=b,E=w;if(2>E)break a;
const F=new g.ctor(z*E);for(let M=0,I=0;M<z;M++)for(let J=0,r=M;J<E;J++,r+=z)F[r]=q[I++];q=F}C.push(q)}c.push(n.subarray(t*d,(t+1)*d))}e=0===a?null:1===a?c[0]:new Uint8Array(b);if(1<a)for(e.set(c[0]),d=1;d<c.length;d++)for(t=c[d],q=0;q<b;q++)e[q]&=t[q];({noDataValue:p}=p);d=null!=p&&g.range[0]<=p&&g.range[1]>=p;if(0<a&&d)for(d=0;d<m;d++)for(t=C[d],q=c[d]||e,z=0;z<b;z++)0===q[z]&&(t[z]=p);({pixelType:g}=g);return{width:v,height:h,bandCount:m,pixelType:g,depthCount:w,statistics:f,pixels:C,mask:e,bandMasks:a===
m&&1<m?c:null,noDataValues:k}};x.getBlobInfo=function(C,p={}){C=C instanceof Uint8Array?C.subarray(p.inputOffset??0):new Uint8Array(C,p.inputOffset??0);return Q.getBlobInfo(C)};x.isLoaded=function(){return L};x.load=function(){return O?O:O=(new Promise((C,p)=>H(["../../../chunks/lerc-wasm"],C,p))).then(C=>C.lercWasm).then(({default:C})=>C({locateFile:p=>A.getAssetUrl(`esri/layers/support/rasterFormats/${p}`)})).then(C=>{u(C);L=!0})};x.pixelTypeInfoMap=K;Object.defineProperty(x,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(H){function x(K,O,L,Q=!0){if(0!==O%4||0!==L%4){var C=new ArrayBuffer(4*Math.ceil(L/4));C=new Uint8Array(C);K=new Uint8Array(K,O,L);if(Q)for(Q=0;Q<C.length;Q+=4)C[Q]=K[Q+3],C[Q+1]=K[Q+2],C[Q+2]=K[Q+1],C[Q+3]=K[Q];else C.set(K);return new Uint32Array(C.buffer)}if(Q){Q=new Uint8Array(K,O,L);C=new Uint8Array(Q.length);for(K=0;K<C.length;K+=4)C[K]=Q[K+3],C[K+1]=Q[K+2],C[K+2]=Q[K+1],C[K+3]=Q[K];return new Uint32Array(C.buffer)}return new Uint32Array(K,
O,L/4)}function A(){const K=[];for(let O=0;257>=O;O++)K[O]=[O];return K}function G(K,O){for(let L=0;L<O.length;L++)K.push(O[L])}const u=new Set;u.add(511);u.add(1023);u.add(2047);u.add(4095);u.add(8191);H.decode=function(K,O,L,Q=!0){K=x(K,O,L,Q);O=9;Q=A();let C=32,p=Q.length,c=[],l=1,n=K[0],k=0;const v=K.length;L=8*(4*v-L);const h=[];for(;null!=n;){if(C>=O)C-=O,k=n>>>32-O,n<<=O;else{k=n>>>32-C;n=K[l++];var m=O-C;C=32-m;k=(k<<m)+(n>>>C);n<<=m}if(257===k)break;if(256===k)O=9,Q=A(),p=Q.length,c=[];else{m=
Q[k];if(null==m){if(k>Q.length)throw Error("data integrity issue: code does not exist on code page");c.push(c[0]);Q[p++]=c.slice();G(h,c)}else G(h,m),c.push(m[0]),1<c.length&&(Q[p++]=c.slice()),c=m.slice();u.has(p)&&O++;0===C&&(n=K[l++],C=32);if(l>v||l===v&&C<=L)break}}return new Uint8Array(h)};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(H){const x=A=>{let G=1;switch(A){case Uint8Array:case Int8Array:G=
1;break;case Uint16Array:case Int16Array:G=2;break;case Uint32Array:case Int32Array:case Float32Array:G=4;break;case Float64Array:G=8}return G};return function(){function A(){}A.decode=function(G,u){var K=u.pixelType;const O=[],L=u.width*u.height;var Q=Math.floor(G.byteLength/(u.width*u.height*x(u.pixelType)));const {bandIds:C,format:p}=u;u=C&&C.length||Math.floor(G.byteLength/(u.width*u.height*x(u.pixelType)));var c=G.byteLength-G.byteLength%(L*x(K)),l=new K(G,0,L*Q);let n,k,v,h,m=null;if("bip"===
p)for(n=0;n<u;n++){v=new K(L);h=C?C[n]:n;for(k=0;k<L;k++)v[k]=l[k*Q+h];O.push(v)}else if("bsq"===p)for(n=0;n<u;n++)h=C?C[n]:n,O.push(l.subarray(h*L,(h+1)*L));if(c<G.byteLength-1)if(G=G.slice(c),8*G.byteLength<L)m=null;else{G=new Uint8Array(G,0,Math.ceil(L/8));K=new Uint8Array(L);for(c=l=c=u=Q=0;c<G.length-1;c++)for(u=G[c],l=7;0<=l;l--)K[Q++]=u>>l&1;for(l=7;Q<L-1;)u=G[G.length-1],K[Q++]=u>>l&1,l--;m=K}return{pixels:O,mask:m}};return H._createClass(A)}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(H,x,A,G,u,K,O,L,Q){function C(r,y){let N="unknown";3===r?N=64===y?"f64":"f32":1===r?1===y?N="u1":2===y?N="u2":4===y?N="u4":8>=y?N="u8":16>=y?N="u16":32>=y&&(N="u32"):2===r&&(8>=y?N="s8":16>=y?N="s16":32>=y&&(N="s32"));return N}function p(r){let y=null;switch(r?r.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":y=Uint8Array;break;case "u16":y=Uint16Array;break;case "u32":y=Uint32Array;break;case "s8":y=Int8Array;break;case "s16":y=Int16Array;break;case "s32":y=Int32Array;break;
case "f64":y=Float64Array;break;default:y=Float32Array}return y}function c(r,y){return{x:y[0]*r.x+y[1]*r.y+y[2],y:y[3]*r.x+y[4]*r.y+y[5]}}function l(r,y){return r.get(y)?.values?.[0]}function n(r,y,N,P=0,R=O.TIFF_TAGS,X=4){var U=8===X;const W=U?d(new DataView(r,N,8),0,y):(new DataView(r,N,2)).getUint16(0,y),Z=4+2*X;var da=U?8:2;U=da+W*Z;if(N+U>r.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:U};const ea=N+U+4<=r.byteLength?t(new DataView(r,N+U,8===X?8:4),0,y,8===X):null;N+=
da;da=new Map;let aa,T,V,Y=0,ba=0;for(let ja=0;ja<W;ja++){var fa=new DataView(r,N+Z*ja,Z);aa=fa.getUint16(0,y);V=fa.getUint16(2,y);T=O.getTagName(aa,R);const ia=[];2===X?(Y=fa.getUint16(4,y),ba=fa.getUint16(6,y)):4===X?(Y=fa.getUint32(4,y),ba=fa.getUint32(8,y)):8===X&&(Y=t(fa,4,y,!0),ba=t(fa,12,y,!0),ia.push(fa.getUint32(12,y)),ia.push(fa.getUint32(16,y)));fa={id:aa,type:V,valueCount:Y,valueOffset:ba,valueOffsets:ia,values:null};B(r,y,fa,P,!1,X);da.set(T,fa)}return{success:!0,ifd:da,nextIFD:ea,requiredBufferSize:U}}
function k(r,y){if(1!==y&&2!==y&&4!==y)return r;const N=new Uint8Array(r),P=8/y;r=new Uint8Array(r.byteLength*P);let R=0;const X=2**y-1;for(let U=0;U<N.length;U++){const W=N[U];for(let Z=0;Z<P;Z++)r[R++]=W<<y*Z>>>8-y&X}return r.buffer}function v(r,y,N){const P=new A.JpegImage;P.parse(r);P.colorTransform=6===N?-1:0;r=P.getData(P.width,P.height,1!==y);return new Uint8Array(r.buffer)}function h(r){r=(new Q.Zlib(r)).getBytes();var y=new ArrayBuffer(r.length);y=new Uint8Array(y);y.set(r);return y}async function m(r,
y,N,P,R){var X=L.isPlatformLittleEndian===y,U=l(N,"BITSPERSAMPLE"),W=l(N,"SAMPLESPERPIXEL");const Z=l(N,"PHOTOMETRICINTERPRETATION");var da=l(N,"SAMPLEFORMAT")??1;const ea=C(da,U);var aa=l(N,"COMPRESSION")??1;da=p(ea);if(34887===aa)return await G.load(),G.decode(r,{inputOffset:P}).pixels[0];if(1===aa)W=r.slice(P,P+R),y=new Uint8Array(W);else if(8===aa||32946===aa)y=new Uint8Array(r,P,R),y=h(y),W=y.buffer;else if(6===aa)y=new Uint8Array(r,P,R),y=v(y,W,Z),W=y.buffer;else if(7===aa){aa=N.get("JPEGTABLES").values;
N=aa.length-2;y=new Uint8Array(N+R-2);for(let T=0;T<N;T++)y[T]=aa[T];r=new Uint8Array(r,P+2,R-2);for(P=0;P<r.length;P++)y[N+P]=r[P];y=v(y,W,Z);W=y.buffer}else if(5===aa)y=u.decode(r,P,R,y),W=y.buffer;else throw Error("tiff-decode: unsupport compression "+aa);W=k(W,U);if("u8"!==ea&&"s8"!==ea&&!X)switch(W=new ArrayBuffer(y.length),X=new Uint8Array(W),ea){case "u16":case "s16":for(U=0;U<y.length;U+=2)X[U]=y[U+1],X[U+1]=y[U];break;case "u32":case "s32":case "f32":for(U=0;U<y.length;U+=4)X[U]=y[U+3],X[U+
1]=y[U+2],X[U+2]=y[U+1],X[U+3]=y[U]}return new da(W)}async function w(r,y,N){const P=N.get("TILEOFFSETS")?.values;if(void 0===P)return null;const R=N.get("TILEBYTECOUNTS")?.values,{width:X,height:U,pixelType:W,tileWidth:Z,tileHeight:da}=a([N]);var ea=f(N,y);const aa=l(N,"SAMPLESPERPIXEL")||y.planes;var T=X*U,V=l(N,"BITSPERSAMPLE"),Y=34887===(l(N,"COMPRESSION")??1),ba=p(W);const fa=[];for(var ja=0;ja<aa;ja++)fa.push(new ba(T));let ia,ua,ma,ta,wa,Ba,ya,Aa;T=Math.ceil(X/Z);if(0===V%8)if(Y&&ea&&1<aa)for(ea=
Math.round(P.length/aa),V=0;V<ea;V++){var sa=Math.floor(V/T)*da;ma=V%T*Z;ba=sa*X+ma;for(Y=0;Y<aa;Y++)if(ja=V*aa+Y,0!==R[ja])for(ja=await m(r,y.littleEndian,N,P[ja],R[ja]),wa=0,ta=ba,ya=Math.min(Z,X-ma),Ba=Math.min(da,U-sa),Aa=fa[Y],ia=0;ia<Ba;ia++)for(ta=ba+ia*X,wa=ia*Z,ua=0;ua<ya;ua++,ta++,wa++)Aa[ta]=ja[wa]}else for(V=0;V<P.length;V++)if(0!==R[V])for(sa=Math.floor(V/T)*da,ma=V%T*Z,ba=sa*X+ma,ja=await m(r,y.littleEndian,N,P[V],R[V]),wa=0,ta=ba,ya=Math.min(Z,X-ma),Ba=Math.min(da,U-sa),sa=0;sa<aa;sa++)if(Aa=
fa[sa],ea||Y)for(ia=0;ia<Ba;ia++)for(ta=ba+ia*X,wa=Z*da*sa+ia*Z,ua=0;ua<ya;ua++,ta++,wa++)Aa[ta]=ja[wa];else for(ia=0;ia<Ba;ia++)for(ta=ba+ia*X,wa=ia*Z*aa+sa,ua=0;ua<ya;ua++,ta++,wa+=aa)Aa[ta]=ja[wa];return{width:X,height:U,pixelType:W,pixels:fa}}function B(r,y,N,P=0,R=!1,X=4){if(N.values)return!0;var U=N.type,W=N.valueCount,Z=N.valueOffset;let da=[];var ea=F[U],aa=8*ea,T=W*ea,V=W*F[U]*8,Y=8===X?64:32;X=N.valueOffsets;if(V>Y&&T>(R?r.byteLength:r?r.byteLength-Z+P:0))return N.offlineOffsetSize=[Z,T],
N.values=null,!1;if(V<=Y)if(y||(32>=Y?Z>>>=32-V:(r=X?.length?X[0]:Z>>>0,y=X?.length?X[1]:Math.round((Z-r)/4294967296),32>=V?(Z=r>>>32-V,X[0]=Z):(Z=r*2**(32-V)+(y>>>32-V),X[0]=r,X[1]=y>>>32-V))),1===W&&aa===Y)da=[Z];else if(64===Y)for(r=X?.length?X[0]:Z>>>0,Z=X?.length?X[1]:Math.round((Z-r)/4294967296),y=r,ea=32,r=1;r<=W;r++)T=32-aa*r%32,ea<aa?(T=y<<T>>>32-ea,V=Z<<32-ea>>>32-ea,y=Z,da.push(T+V*2**(aa-ea)),ea-=32-(aa-ea)):(da.push(y<<T>>>32-aa),ea-=aa),0===ea&&(ea=32,y=Z);else for(r=1;r<=W;r++)da.push(Z<<
32-aa*r>>>32-aa);else for(Z-=P,R&&(Z=0),W=Z;W<Z+T;W+=ea){switch(U){case 1:aa=(new DataView(r,W,1)).getUint8(0);break;case 2:aa=(new DataView(r,W,1)).getUint8(0);break;case 3:aa=(new DataView(r,W,2)).getUint16(0,y);break;case 4:case 13:aa=(new DataView(r,W,4)).getUint32(0,y);break;case 5:aa=(new DataView(r,W,4)).getUint32(0,y)/(new DataView(r,W+4,4)).getUint32(0,y);break;case 6:aa=(new DataView(r,W,1)).getInt8(0);break;case 7:aa=(new DataView(r,W,1)).getUint8(0);break;case 8:aa=(new DataView(r,W,2)).getInt16(0,
y);break;case 9:aa=(new DataView(r,W,4)).getInt32(0,y);break;case 10:aa=(new DataView(r,W,4)).getInt32(0,y)/(new DataView(r,W+4,4)).getInt32(0,y);break;case 11:aa=(new DataView(r,W,4)).getFloat32(0,y);break;case 12:aa=(new DataView(r,W,8)).getFloat64(0,y);break;case 16:case 18:aa=d(new DataView(r,W,8),0,y);break;case 17:X=new DataView(r,W,8);V=(aa=y)?X.getInt32(0,aa):X.getUint32(0,aa);X=aa?X.getUint32(4,aa):X.getInt32(4,aa);Y=0<=(aa?V:X)?1:-1;aa?V*=Y:X*=Y;aa=Y*(aa?4294967296*X+V:4294967296*V+X);break;
default:aa=null}da.push(aa)}if(2===U){U="";Z=da;da=[];for(r=0;r<Z.length;r++)0===Z[r]&&""!==U?(da.push(U),U=""):U+=String.fromCharCode(Z[r]);""===U&&0!==da.length||da.push(U)}N.values=da;return!0}function a(r){var y=r[0];const N=l(y,"TILEWIDTH"),P=l(y,"TILELENGTH"),R=l(y,"IMAGEWIDTH"),X=l(y,"IMAGELENGTH");var U=l(y,"BITSPERSAMPLE");const W=l(y,"SAMPLESPERPIXEL");var Z=l(y,"SAMPLEFORMAT")??1;const da=C(Z,U),ea=f(y);var aa=y.get("GDAL_NODATA")?.values;let T=null;aa?.length&&(T=aa.map(sa=>parseFloat(sa)),
T.some(sa=>isNaN(sa))&&(T=null));var V=l(y,"COMPRESSION")??1;switch(V){case 1:aa="NONE";break;case 2:case 3:case 4:case 32771:aa="CCITT";break;case 5:aa="LZW";break;case 6:case 7:aa="JPEG";break;case 32773:aa="PACKBITS";break;case 8:case 32946:aa="DEFLATE";break;case 34712:aa="JPEG2000";break;case 34887:aa="LERC";break;default:aa=String(V)}let Y=!0,ba="";M.has(V)||(Y=!1,ba+="unsupported tag compression "+V);3<Z&&(Y=!1,ba+="unsupported tag sampleFormat "+Z);1!==U&&2!==U&&4!==U&&0!==U%8&&(Y=!1,ba+=
"unsupported tag bitsPerSample "+U);U=y.get("GEOASCIIPARAMS")?.values?.[0];if(U){var fa=(fa=U.split("|").find(sa=>sa.includes("ESRI PE String \x3d ")))?fa.replace("ESRI PE String \x3d ",""):"";fa=fa.startsWith("COMPD_CS")||fa.startsWith("PROJCS")||fa.startsWith("GEOGCS")?{wkid:null,wkt:fa}:null}Z=y.get("GEOTIEPOINTS")?.values;U=y.get("GEOPIXELSCALE")?.values;V=y.get("GEOTRANSMATRIX")?.values;var ja=y.has("GEOKEYDIRECTORY")?y.get("GEOKEYDIRECTORY").data:null,ia=!1;y=!1;if(ja){ia=2===l(ja,"GTRasterTypeGeoKey");
var ua=l(ja,"GTModelTypeGeoKey");2===ua?(ja=l(ja,"GeographicTypeGeoKey"),1024<=ja&&32766>=ja&&(fa={wkid:ja}),fa||32767!==ja||(y=!0,fa={wkid:4326})):1===ua&&(ja=l(ja,"ProjectedCSTypeGeoKey"),1024<=ja&&32766>=ja&&(fa={wkid:ja}))}let ma;U&&Z&&6<=Z.length?(ma=[U[0],0,Z[3]-Z[0]*U[0],0,-Math.abs(U[1]),Z[4]-Z[1]*U[1]],ia&&(ma[2]-=.5*ma[0]+.5*ma[1],ma[5]-=.5*ma[3]+.5*ma[4])):V&&16===V.length&&(ma=ia?[V[0],V[1],V[3]-.5*V[0],V[4],V[5],V[7]-.5*V[5]]:[V[0],V[1],V[3],V[4],V[5],V[7]]);if(ma){Z=[{x:0,y:X},{x:0,
y:0},{x:R,y:X},{x:R,y:0}];ja=ia=Number.POSITIVE_INFINITY;let sa=ua=Number.NEGATIVE_INFINITY;for(let va=0;va<Z.length;va++)V=c(Z[va],ma),ia=V.x>ia?ia:V.x,ua=V.x<ua?ua:V.x,ja=V.y>ja?ja:V.y,sa=V.y<sa?sa:V.y;Z={xmin:ia,xmax:ua,ymin:ja,ymax:sa,spatialReference:fa}}else Z={xmin:-.5,ymin:.5-X,xmax:R-.5,ymax:.5,spatialReference:fa};y&&(400<Z.xmax-Z.xmin||361<Math.max(Math.abs(Z.xmin),Math.abs(Z.xmax)))&&(fa=null,Z.spatialReference=null);fa=g(r);let ta;let wa,Ba;if(0<fa.length){wa=Math.round(Math.log(R/l(fa[0],
"IMAGEWIDTH"))/Math.LN2);var ya=fa[fa.length-1];Ba=Math.round(Math.log(R/l(ya,"IMAGEWIDTH"))/Math.LN2);ta=l(ya,"TILEWIDTH");ya=l(ya,"TILELENGTH")}ta=null!=Ba&&0<Ba?ta||N:null;ya=null!=Ba&&0<Ba?ya||P:null;let Aa;N&&(Aa=[{maxCol:Math.ceil(R/N)-1,maxRow:Math.ceil(X/P)-1,minRow:0,minCol:0}],fa.forEach(sa=>{Aa.push({maxCol:Math.ceil(l(sa,"IMAGEWIDTH")/l(sa,"TILEWIDTH"))-1,maxRow:Math.ceil(l(sa,"IMAGELENGTH")/l(sa,"TILELENGTH"))-1,minRow:0,minCol:0})}));V=r[0].get("GDAL_METADATA")?.values?.[0];V=J(V);ba+=
" "+E({width:R,height:X,tileWidth:N,tileHeight:P,planes:W,ifds:r});r=e(r).length===fa.length+1;return{width:R,height:X,tileWidth:N,tileHeight:P,planes:W,isBSQ:ea,pixelType:da,compression:aa,noData:T,hasMaskBand:r,isSupported:Y,message:ba,extent:Z,isPseudoGeographic:y,affine:U?null:ma,firstPyramidLevel:wa,maximumPyramidLevel:Ba,pyramidBlockWidth:ta,pyramidBlockHeight:ya,tileBoundary:Aa,metadata:V}}function f(r,y){return(r=r.get("PLANARCONFIGURATION")?.values)?2===r[0]:y?y.isBSQ:!1}function g(r){return r.filter(y=>
1===l(y,"NEWSUBFILETYPE"))}function e(r){return r.filter(y=>{const N=4===((l(y,"NEWSUBFILETYPE")??0)&4);y=4===l(y,"PHOTOMETRICINTERPRETATION");return N&&y})}function b(r){const {littleEndian:y,isBigTiff:N,firstIFDPos:P}=q(r);var R=P;const X=[];do if(R=z(r,y,R,0,O.TIFF_TAGS,N?8:4),R.success)X.push(R.ifd),R=R.nextIFD;else break;while(0<R);r=a(X);R=g(X);const U=e(X);return{...r,littleEndian:y,isBigTiff:N,ifds:X,pyramidIFDs:R,maskIFDs:U}}function d(r,y,N){const P=r.getUint32(y,N);r=r.getUint32(y+4,N);
return N?4294967296*r+P:4294967296*P+r}function t(r,y,N,P){return P?d(r,y,N):r.getUint32(y,N)}function q(r){var y=new DataView(r,0,16),N=y.getUint16(0,!1);r=null;if(18761===N)r=!0;else if(19789===N)r=!1;else throw Error("unexpected endianess byte");var P=y.getUint16(2,r);if(42!==P&&43!==P)throw Error("unexpected tiff identifier");N=4;if(P=43===P){const R=y.getUint16(N,r);N+=2;if(8!==R)throw Error("unsupported bigtiff version");if(0!==y.getUint16(N,r))throw Error("unsupported bigtiff version");N+=
2}y=t(y,N,r,P);return{littleEndian:r,isBigTiff:P,firstIFDPos:y}}function z(r,y,N,P=0,R=O.TIFF_TAGS,X=4){N=n(r,y,N,P,R,X);let U;const W=N.ifd;W&&(O.ifdTags.forEach((Z,da)=>{W.has(da)&&(U=W.get(da),U.data=n(r,y,U.valueOffset-P,P,Z).ifd)}),W.has("GEOKEYDIRECTORY")&&(U=W.get("GEOKEYDIRECTORY"),(R=U.values)&&4<R.length&&(R=R[0]+"."+R[1]+"."+R[2],U.data=n(r,y,U.valueOffset+6-P,P,O.GEO_KEYS,2).ifd,U.data&&U.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[R]}))),W.has("XMP")&&
(U=W.get("XMP"),R=U.values,"number"===typeof R[0]&&7===U.type&&(U.values=[x.bytesToUTF8(new Uint8Array(R))])));return N}function E(r){const {width:y,height:N,tileHeight:P,tileWidth:R}=r,X=r.planes,U=R?R*P:y*N;r=l(r.ifds[0],"BITSPERSAMPLE");let W="";U*X>2**30/(8<r?r/8:1)&&(W=R?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return W}const F=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],M=new Set([1,5,6,7,8,34712,34887]),I=(r,y,N)=>{if(!(r&&
0<r.length&&y&&N))return null;let P,R,X;const U=r[0].length,W=r.length,Z=new Uint8Array(U);for(let ea=0;ea<W;ea++)if(P=r[ea],R=y[ea],X=N[ea],0===ea)for(var da=0;da<U;da++)Z[da]=P[da]<R||P[da]>X?0:1;else for(da=0;da<U;da++)Z[da]&&(Z[da]=P[da]<R||P[da]>X?0:1);return Z},J=r=>{if(!r)return null;var y=r.match(/<Item(.*?)Item>/gi);if(!y||0===y.length)return null;r=new Map;var N;for(var P=0;P<y.length;P++){var R=y[P];var X=R.slice(6,R.indexOf("\x3e"));var U=R.indexOf("sample\x3d");-1<U&&(N=R.slice(U+8,R.indexOf('"',
U+8)));U=R.indexOf("name\x3d");-1<U&&(X=R.slice(U+6,R.indexOf('"',U+6)));X&&(R=R.slice(R.indexOf("\x3e")+1,R.indexOf("\x3c/Item\x3e")).trim(),null!=N?r.has(X)?r.get(X)[N]=R:r.set(X,[R]):r.set(X,R));N=null}y=r.get("STATISTICS_MINIMUM");X=r.get("STATISTICS_MAXIMUM");P=r.get("STATISTICS_MEAN");R=r.get("STATISTICS_STDDEV");N=null;if(y&&X)for(N=[],U=0;U<y.length;U++)N.push({min:parseFloat(y[U]),max:parseFloat(X[U]),avg:P&&parseFloat(P[U]),stddev:R&&parseFloat(R[U])});X=r.get("BandName");P=r.get("WavelengthMin");
R=r.get("WavelengthMax");y=null;if(X)for(y=[],U=0;U<X.length;U++)y.push({BandName:X[U],WavelengthMin:P&&parseFloat(P[U]),WavelengthMax:R&&parseFloat(R[U])});X=r.get("DataType");return{statistics:N,bandProperties:y,dataType:X,rawMetadata:r}};H.decode=async function(r,y={}){var N=y.pyramidLevel||0,P=y.headerInfo||b(r);const {ifds:R,noData:X}=P;if(0===R.length)throw Error("no valid image file directory");var U=E(P);if(U)throw U;U=null;var W=-1===N?R[R.length-1]:R[N];y=X??y.noDataValue;if(P.tileWidth)U=
await w(r,P,W);else{{const Ba=L.isPlatformLittleEndian===P.littleEndian,ya=W.get("STRIPOFFSETS")?.values;if(void 0===ya)r=null;else{var {width:Z,height:da,pixelType:ea}=a([W]);N=l(W,"SAMPLESPERPIXEL")||P.planes;var aa=l(W,"PHOTOMETRICINTERPRETATION");U=Z*da;var T=l(W,"BITSPERSAMPLE"),V=p(ea),Y=new V(U*N),ba=W.get("STRIPBYTECOUNTS")?.values,fa=l(W,"ROWSPERSTRIP"),ja=l(W,"COMPRESSION")??1;var ia=fa;if(0===T%8)for(W=0;W<ya.length;W++){var ua=W*fa*Z*N;ia=(W+1)*fa>da?da-W*fa:fa;if("u8"===ea||"s8"===ea||
Ba)if(8===ja||32946===ja){var ma=new Uint8Array(r,ya[W],ba[W]);ma=h(ma);var ta=ma.buffer}else 6===ja?(ma=new Uint8Array(r,ya[W],ba[W]),ma=v(ma,N,aa),ta=ma.buffer):5===ja?(ma=u.decode(r,ya[W],ba[W],P.littleEndian),ta=ma.buffer):(ba[W]!==ia*Z*N*T/8&&console.log("strip byte counts is different than expected"),ta=r.slice(ya[W],ya[W]+ba[W]));else{if(6===ja||8===ja||32946===ja){ma=new Uint8Array(r,ya[W],ba[W]);var wa=h(ma);ta=wa.buffer}else ba[W]!==ia*Z*N*T/8&&console.log("strip byte counts is different than expected"),
ta=new ArrayBuffer(ba[W]),ma=new Uint8Array(r,ya[W],ba[W]),wa=new Uint8Array(ta);switch(ea){case "u16":case "s16":for(ia=0;ia<ma.length;ia+=2)wa[ia]=ma[ia+1],wa[ia+1]=ma[ia];break;case "u32":case "s32":case "f32":for(ia=0;ia<ma.length;ia+=4)wa[ia]=ma[ia+3],wa[ia+1]=ma[ia+2],wa[ia+2]=ma[ia+1],wa[ia+3]=ma[ia]}}ta=k(ta,T);ia=new V(ta);Y.set(ia,ua)}aa=[];if(1===N)aa.push(Y);else for(W=0;W<N;W++){P=new V(U);for(r=0;r<U;r++)P[r]=Y[r*N+W];aa.push(P)}r={width:Z,height:da,pixelType:ea,pixels:aa}}}U=await r}if(!U)return U;
null!=y&&K.convertNoDataToMask(U,y);return U};H.decodeTileOrStrip=async function(r,y){const {headerInfo:N,ifd:P,offsets:R,sizes:X}=y;var U=[];for(var W=0;W<R.length;W++){var Z=await m(r,N.littleEndian,P,R[W],X[W]||r.byteLength);U.push(Z)}var da=f(P,N);r=l(P,"BITSPERSAMPLE");W=l(P,"SAMPLEFORMAT")??1;W=C(W,r);var ea=l(P,"SAMPLESPERPIXEL")||N.planes;const aa=p(W);Z=l(P,"TILEWIDTH");const T=l(P,"TILELENGTH");var V=l(P,"COMPRESSION")??1;const Y=Z*T;r=[];let ba=U[0];const fa=34887===V;for(let ia=0;ia<ea;ia++){V=
new aa(Y);if(da&&fa){if(ba=U[ia],ba.length)for(var ja=0;ja<Y;ja++)V[ja]=ba[ia][ja+ia]}else if(ba.length)if(da||fa&&!da)V=ba.slice(Y*ia,Y*(ia+1));else for(ja=0;ja<Y;ja++)V[ja]=ba[ja*ea+ia];r.push(V)}U=N.noData?N.noData[0]:y.noDataValue;da=(ea=N.metadata?N.metadata.statistics:null)?ea.map(ia=>ia.min):null;ea=ea?ea.map(ia=>ia.max):null;W={pixelType:W,width:Z,height:T,pixels:r,noDataValue:U};null!=U?K.convertNoDataToMask(W,U):da&&ea&&y.applyMinMaxConstraint&&(W.mask=I(r,da,ea));return W};H.getImageInfo=
a;H.getMaskIFDs=e;H.getPyramidIFDs=g;H.isBSQConfig=f;H.parseFieldValues=B;H.parseHeader=b;H.parseIFD=z;H.parseSignature=q;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(H){H.bytesToUTF8=function(x,A){let G=0,u="",K=0,O=0;const L=x.length;for(;G<L;)if(O=x[G++],K=O>>4,8>K?K=1:15===K?(K=4,O=(O&7)<<18|(x[G++]&63)<<12|(x[G++]&63)<<6|x[G++]&63):14===K?(K=3,O=(O&15)<<12|(x[G++]&63)<<6|x[G++]&63):
(K=2,O=(O&31)<<6|x[G++]&63),0!==O||A)u+=String.fromCharCode(O);return u};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const H=(()=>{const u=[];u[254]="NEWSUBFILETYPE";u[255]="SUBFILETYPE";u[256]="IMAGEWIDTH";u[257]="IMAGELENGTH";u[258]="BITSPERSAMPLE";u[259]="COMPRESSION";u[262]="PHOTOMETRICINTERPRETATION";u[263]="THRESHHOLDING";u[264]="CELLWIDTH";u[265]="CELLLENGTH";u[266]="FILLORDER";u[269]="DOCUMENTNAME";
u[270]="IMAGEDESCRIPTION";u[271]="MAKE";u[272]="MODEL";u[273]="STRIPOFFSETS";u[274]="ORIENTATION";u[277]="SAMPLESPERPIXEL";u[278]="ROWSPERSTRIP";u[279]="STRIPBYTECOUNTS";u[280]="MINSAMPLEVALUE";u[281]="MAXSAMPLEVALUE";u[282]="XRESOLUTION";u[283]="YRESOLUTION";u[284]="PLANARCONFIGURATION";u[285]="PAGENAME";u[286]="XPOSITION";u[287]="YPOSITION";u[288]="FREEOFFSETS";u[289]="FREEBYTECOUNTS";u[290]="GRAYRESPONSEUNIT";u[291]="GRAYRESPONSECURVE";u[292]="T4OPTIONS";u[293]="T6OPTIONS";u[296]="RESOLUTIONUNIT";
u[297]="PAGENUMBER";u[300]="COLORRESPONSEUNIT";u[301]="TRANSFERFUNCTION";u[305]="SOFTWARE";u[306]="DATETIME";u[315]="ARTIST";u[316]="HOSTCOMPUTER";u[317]="PREDICTOR";u[318]="WHITEPOINT";u[319]="PRIMARYCHROMATICITIES";u[320]="COLORMAP";u[321]="HALFTONEHINTS";u[322]="TILEWIDTH";u[323]="TILELENGTH";u[324]="TILEOFFSETS";u[325]="TILEBYTECOUNTS";u[326]="BADFAXLINES";u[327]="CLEANFAXDATA";u[328]="CONSECUTIVEBADFAXLINES";u[330]="SUBIFD";u[332]="INKSET";u[333]="INKNAMES";u[334]="NUMBEROFINKS";u[336]="DOTRANGE";
u[337]="TARGETPRINTER";u[338]="EXTRASAMPLES";u[339]="SAMPLEFORMAT";u[340]="SMINSAMPLEVALUE";u[341]="SMAXSAMPLEVALUE";u[342]="TRANSFERRANGE";u[347]="JPEGTABLES";u[512]="JPEGPROC";u[513]="JPEGIFOFFSET";u[514]="JPEGIFBYTECOUNT";u[515]="JPEGRESTARTINTERVAL";u[517]="JPEGLOSSLESSPREDICTORS";u[518]="JPEGPOINTTRANSFORM";u[519]="JPEGQTABLES";u[520]="JPEGDCTABLES";u[521]="JPEGACTABLES";u[529]="YCBCRCOEFFICIENTS";u[530]="YCBCRSUBSAMPLING";u[531]="YCBCRPOSITIONING";u[532]="REFERENCEBLACKWHITE";u[700]="XMP";u[33550]=
"GEOPIXELSCALE";u[33922]="GEOTIEPOINTS";u[33432]="COPYRIGHT";u[42112]="GDAL_METADATA";u[42113]="GDAL_NODATA";u[50844]="RPCCOEFFICIENT";u[34264]="GEOTRANSMATRIX";u[34735]="GEOKEYDIRECTORY";u[34736]="GEODOUBLEPARAMS";u[34737]="GEOASCIIPARAMS";u[34665]="EXIFIFD";u[34853]="GPSIFD";u[40965]="INTEROPERABILITYIFD";return u})(),x=(()=>{const u=H.slice();u[36864]="ExifVersion";u[40960]="FlashpixVersion";u[40961]="ColorSpace";u[42240]="Gamma";u[37121]="ComponentsConfiguration";u[37122]="CompressedBitsPerPixel";
u[40962]="PixelXDimension";u[40963]="PixelYDimension";u[37500]="MakerNote";u[37510]="UserComment";u[40964]="RelatedSoundFile";u[36867]="DateTimeOriginal";u[36868]="DateTimeDigitized";u[36880]="OffsetTime";u[36881]="OffsetTimeOriginal";u[36882]="OffsetTimeDigitized";u[37520]="SubSecTime";u[37521]="SubSecTimeOriginal";u[37522]="SubSecTimeDigitized";u[37888]="Temperature";u[37889]="Humidity";u[37890]="Pressure";u[37891]="WaterDepth";u[37892]="Acceleration";u[37893]="CameraElevationAngle";u[42016]="ImageUniqueID";
u[42032]="CameraOwnerName";u[42033]="BodySerialNumber";u[42034]="LensSpecification";u[42035]="LensMake";u[42036]="LensModel";u[42037]="LensSerialNumber";u[33434]="ExposureTime";u[33437]="FNumber";u[34850]="ExposureProgram";u[34852]="SpectralSensitivity";u[34855]="PhotographicSensitivity";u[34856]="OECF";u[34864]="SensitivityType";u[34865]="StandardOutputSensitivity";u[34866]="RecommendedExposureIndex";u[34867]="ISOSpeed";u[34868]="ISOSpeedLatitudeyyy";u[34869]="ISOSpeedLatitudezzz";u[37377]="ShutterSpeedValue";
u[37378]="ApertureValue";u[37379]="BrightnessValue";u[37380]="ExposureBiasValue";u[37381]="MaxApertureValue";u[37382]="SubjectDistance";u[37383]="MeteringMode";u[37384]="LightSource";u[37385]="Flash";u[37386]="FocalLength";u[37396]="SubjectArea";u[41483]="FlashEnergy";u[41484]="SpatialFrequencyResponse";u[41486]="FocalPlaneXResolution";u[41487]="FocalPlaneYResolution";u[41488]="FocalPlaneResolutionUnit";u[41492]="SubjectLocation";u[41493]="ExposureIndex";u[41495]="SensingMethod";u[41728]="FileSource";
u[41729]="SceneType";u[41730]="CFAPattern";u[41985]="CustomRendered";u[41986]="ExposureMode";u[41987]="WhiteBalance";u[41988]="DigitalZoomRatio";u[41989]="FocalLengthIn35mmFilm";u[41990]="SceneCaptureType";u[41991]="GainControl";u[41992]="Contrast";u[41993]="Saturation";u[41994]="Sharpness";u[41995]="DeviceSettingDescription";u[41996]="SubjectDistanceRange";return u})(),A=(()=>{const u=[];u[1024]="GTModelTypeGeoKey";u[1025]="GTRasterTypeGeoKey";u[1026]="GTCitationGeoKey";u[2048]="GeographicTypeGeoKey";
u[2049]="GeogCitationGeoKey";u[2050]="GeogGeodeticDatumGeoKey";u[2051]="GeogPrimeMeridianGeoKey";u[2052]="GeogLinearUnitsGeoKey";u[2053]="GeogLinearUnitSizeGeoKey";u[2054]="GeogAngularUnitsGeoKey";u[2055]="GeogAngularUnitSizeGeoKey";u[2056]="GeogEllipsoidGeoKey";u[2057]="GeogSemiMajorAxisGeoKey";u[2058]="GeogSemiMinorAxisGeoKey";u[2059]="GeogInvFlatteningGeoKey";u[2061]="GeogPrimeMeridianLongGeoKey";u[2060]="GeogAzimuthUnitsGeoKey";u[3072]="ProjectedCSTypeGeoKey";u[3073]="PCSCitationGeoKey";u[3074]=
"ProjectionGeoKey";u[3075]="ProjCoordTransGeoKey";u[3076]="ProjLinearUnitsGeoKey";u[3077]="ProjLinearUnitSizeGeoKey";u[3078]="ProjStdParallel1GeoKey";u[3079]="ProjStdParallel2GeoKey";u[3080]="ProjNatOriginLongGeoKey";u[3081]="ProjNatOriginLatGeoKey";u[3082]="ProjFalseEastingGeoKey";u[3083]="ProjFalseNorthingGeoKey";u[3084]="ProjFalseOriginLongGeoKey";u[3085]="ProjFalseOriginLatGeoKey";u[3086]="ProjFalseOriginEastingGeoKey";u[3087]="ProjFalseOriginNorthingGeoKey";u[3088]="ProjCenterLongGeoKey";u[3090]=
"ProjCenterEastingGeoKey";u[3091]="ProjCenterNorthingGeoKey";u[3092]="ProjScaleAtNatOriginGeoKey";u[3093]="ProjScaleAtCenterGeoKey";u[3094]="ProjAzimuthAngleGeoKey";u[3095]="ProjStraightVertPoleLongGeoKey";u[4096]="VerticalCSTypeGeoKey";u[4097]="VerticalCitationGeoKey";u[4098]="VerticalDatumGeoKey";u[4099]="VerticalUnitsGeoKey";return u})(),G=new Map;G.set("EXIFIFD",x);G.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:H,ifdTags:G,GEO_KEYS:A,getTagName:(u,K)=>{K=(K||H)[u];void 0===K&&(K="unknown"+String(u));return K}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(H){const x=new ArrayBuffer(4),A=new Uint8Array(x);(new Uint32Array(x))[0]=1;H.isPlatformLittleEndian=1===A[0];Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n,k,v,h,m,w,B,a){function f(T,V){T=g(T,V?.variableName);const {bandCount:Y}=T;let {bandIds:ba,stretchType:fa}=V||{};ba?.some(ta=>ta>=Y)&&(ba=null);let ja=G.unwrap(T.statistics),ia=G.unwrap(T.histograms);1<Y?(ba=ba?.length?ba:e(T),ja=null==ja?null:ba?.map(ta=>ja[ta]),ia=null==ia?null:ba?.map(ta=>ia[ta])):ba=[0];null==fa&&(fa=d(T));let ua=!1;switch(fa){case "none":ua=!1;break;case "percent-clip":ua=!ia?.length;break;default:ua=!ja?.length}var {dataType:ma}=T;ma=1===
ba?.length&&ea.has(ma)?Z:null;ma=new v({stretchType:fa,dynamicRangeAdjustment:ua,colorRamp:ma,outputMin:0,outputMax:255,gamma:1===ba?.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===fa?ma.maxPercent=ma.minPercent=.25:"standard-deviation"===fa&&(ma.numberOfStandardDeviations=2);if(!ua&&(G.isSome(T.multidimensionalInfo)||V?.includeStatisticsInStretch))if("percent-clip"===fa)ma.histograms=ia;else if("min-max"===fa||"standard-deviation"===fa)ma.statistics=ja;return ma}function g(T,V){if(!V)return T;
let Y=G.unwrap(T.statistics),ba=G.unwrap(T.histograms);var {multidimensionalInfo:fa}=T;if(V&&G.isSome(fa)&&(fa=fa.variables.find(ja=>ja.name===V))){const {statistics:ja,histograms:ia}=fa;ja?.length&&(Y=ja);ia?.length&&(ba=ia)}return O.fromJSON({...T.toJSON(),statistics:Y,histograms:ba})}function e(T){const V=T.bandCount;if(1===V)return null;if(2===V)return[0];T=T.keyProperties&&T.keyProperties.BandProperties;let Y;if(T&&T.length===V){const {red:ba,green:fa,blue:ja,nir:ia}=b(T);null!=ba&&null!=fa&&
null!=ja?Y=[ba,fa,ja]:null!=ia&&null!=ba&&null!=fa&&(Y=[ia,ba,fa])}!Y&&3<=V&&(Y=[0,1,2]);return Y}function b(T){const V={};for(let fa=0;fa<T.length;fa++){var Y=T[fa],ba=Y.BandName?.toLowerCase();"red"===ba?V.red=fa:"green"===ba?V.green=fa:"blue"===ba?V.blue=fa:"nearinfrared"===ba||"nearinfrared_1"===ba||"nir"===ba?V.nir=fa:Y.WavelengthMax&&Y.WavelengthMin&&(ba=Y.WavelengthMin,Y=Y.WavelengthMax,null==V.blue&&410<=ba&&480>=ba&&480<=Y&&540>=Y?V.blue=fa:null==V.green&&490<=ba&&560>=ba&&560<=Y&&610>=Y?
V.green=fa:null==V.red&&595<=ba&&670>=ba&&660<=Y&&730>=Y?V.red=fa:null==V.nir&&700<=ba&&860>=ba&&800<=Y&&950>=Y&&(V.nir=fa))}return V}function d(T){let V="percent-clip";const {pixelType:Y,dataType:ba,histograms:fa,statistics:ja,multidimensionalInfo:ia}=T;T=ea.has(ba)||"generic"===ba&&G.isSome(ia);"u8"!==Y||"processed"!==ba&&G.isSome(fa)&&G.isSome(ja)?"u8"===Y||"elevation"===ba||T?V="min-max":G.isSome(fa)?V="percent-clip":G.isSome(ja)&&(V="min-max"):V="none";return V}function t(T,V,Y,ba){if(!F(T,V))return null;
const {attributeTable:fa,statistics:ja}=T,ia=q(fa,V),ua=E(fa,"red"),ma=E(fa,"green"),ta=E(fa,"blue");T=new Q;const wa=[],Ba=new Set,ya=!!(ua&&ma&&ta);if(G.isSome(fa))fa.features.forEach(Aa=>{var sa=Aa.attributes[ia.name];Ba.has(Aa.attributes[ia.name])||null==sa||(Ba.add(sa),sa=!ya||"single"!==ua.type&&"double"!==ua.type||"single"!==ma.type&&"double"!==ma.type||"single"!==ta.type&&"double"!==ta.type||fa.features.some(va=>1<va.attributes[ua.name]||1<va.attributes[ma.name]||1<va.attributes[ta.name])?
1:255,wa.push(new c({value:Aa.attributes[ia.name],label:Aa.attributes[ia.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:ya?new x([Aa.attributes[ua.name]*sa,Aa.attributes[ma.name]*sa,Aa.attributes[ta.name]*sa,1]):new x([0,0,0,0])}})))});else if(ja?.[0])for(V=ja[0].min;V<=ja[0].max;V++)wa.push(new c({value:V,label:V.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new x([0,0,0,0])}}));wa.sort((Aa,sa)=>Aa.value&&"string"===typeof Aa.value.valueOf()?0:Aa.value>
sa.value?1:-1);if(!ya){const Aa=p.convertColorRampToColormap(da,{numColors:wa.length});wa.forEach((sa,va)=>sa.symbol.color=new x(Aa[va].slice(1,4)));T.colorRamp=da}if(Y||ba){const Aa=Y||p.convertColorRampToColormap(ba,{numColors:wa.length}).map(sa=>sa.slice(1));wa.forEach((sa,va)=>sa.symbol.color=new x(Aa[va]));T.colorRamp=ba}return new h({field:ia.name,uniqueValueInfos:wa,authoringInfo:T})}function q(T,V,Y){let ba;G.isSome(T)?(ba=V?T.fields.find(fa=>V.toLowerCase()===fa.name.toLowerCase()):z(T.fields),
ba||(Y||(ba=T.fields.find(fa=>"string"===fa.type)),ba||(ba=E(T,"value")))):ba=new K({name:"value"});return ba}function z(T){let V;for(let Y=0;Y<T.length;Y++){const ba=T[Y].name.toLowerCase();if("string"===T[Y].type){if(ba.startsWith("class")){V=T[Y];break}null==V&&(ba.endsWith("name")||ba.endsWith("type"))&&(V=T[Y])}}return V}function E(T,V){return G.isNone(T)?null:T.fields.find(Y=>Y.name.toLowerCase()===V)}function F(T,V){const {attributeTable:Y,bandCount:ba}=T;return G.isNone(Y)&&N(T)?!0:G.isNone(Y)||
1<ba||V&&null==Y.fields.find(fa=>fa.name.toLowerCase()===V.toLowerCase())?!1:!0}function M(T){const {bandCount:V,colormap:Y}=T;return G.isSome(Y)&&0<Y.length&&1===V}function I(T){if(!M(T))return null;let V;const {attributeTable:Y,colormap:ba}=T;if(G.isSome(Y)){const fa=E(Y,"value"),ja=q(Y,null,!0);"string"===ja.type&&(V={},Y.features.forEach(ia=>{ia=ia.attributes;V[ia[fa.name]]=ja?ia[ja.name]:ia[fa.name]}))}return m.createFromColormap(G.unwrap(ba),V)}function J(T){const {bandCount:V,dataType:Y,pixelType:ba}=
T;return"elevation"===Y||"generic"===Y&&1===V&&("s16"===ba||"s32"===ba||"f32"===ba||"f64"===ba)}function r(T,V=!1){const {attributeTable:Y,bandCount:ba}=T;return 1===ba&&(!V||G.isSome(Y)||G.isSome(T.histograms))}function y(T,V,Y){let ba=0,fa=0;G.isSome(T.attributeTable)?(T=T.attributeTable,ba=fa=T.features[0].attributes[V.name],T.features.forEach(ja=>{ja=ja.attributes[V.name];ja<ba&&(ba=ja);ja>fa&&(fa=ja)})):G.isSome(T.histograms)&&(T=T.histograms,ba=T[0].min,fa=T[0].max);return(fa-ba)/Y}function N(T){return["u8",
"s8"].includes(T.pixelType)&&null!=T.statistics?.[0]?.min&&null!=T.statistics[0]?.max&&1===T.bandCount}function P(T){({dataType:T}=T);return"vector-uv"===T||"vector-magdir"===T}function R(T){({dataType:T}=T);return"vector-uv"===T||"vector-magdir"===T}function X(T){if(!P(T))return null;if(G.isSome(T.statistics)&&T.statistics.length&&("vector-magdir"===T.dataType||"vector-uv"===T.dataType)){const {minMagnitude:Y,maxMagnitude:ba}=W(T.dataType,T.statistics);var V=[{type:"size",field:"Magnitude",minSize:10,
maxSize:40,minDataValue:Y,maxDataValue:ba}]}T=G.isSome(T.multidimensionalInfo)?aa.get(T.multidimensionalInfo.variables[0].unit):null;V=new a({visualVariables:V,inputUnit:T,rotationType:"geographic"});V.visualVariables=[...V.sizeVariables,...V.rotationVariables];return V}function U(T){return{color:T.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function W(T,V){if("vector-magdir"===T)T=V[0].min,V=V[0].max;else{const Y=V[0].min,ba=V[0].max,fa=V[1].min;V=V[1].max;T=0;V=Math.max(Math.abs(Y),
Math.abs(fa),Math.abs(ba),Math.abs(V))}return{minMagnitude:T,maxMagnitude:V}}const Z=k.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),da=k.fromJSON(p.PREDEFINED_JSON_COLOR_RAMPS[0]),ea=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),aa=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots",
"knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);H.createClassBreaksRenderer=function(T,V){T=g(T,V?.variableName);const {attributeTable:Y}=T;if(!r(T))return null;const ba=G.isSome(T.histograms)?T.histograms[0]:null,fa=null!=V?.numClasses&&isFinite(V?.numClasses)?V.numClasses:5,ja=new Q({classificationMethod:V?.classificationMethod,colorRamp:V?.colorRamp});let ia=V?.field||"value";const ua=[],ma=[],ta=G.isSome(Y),wa=ta&&Y.fields.find(va=>"count"===va.name.toLowerCase()),Ba=ta?Y.fields.find(va=>
va.name.toLowerCase()===ia.toLowerCase()):void 0;if(Ba&&ta){ia=Ba.name;const va=Y.features.length;let Ia=0;Y.features.forEach(Ga=>Ia+=(wa?Ga.attributes[wa.name]:50)/va);Y.features.forEach(Ga=>{const La=Ga.attributes[Ba.name];Ga=wa?Ga.attributes[wa.name]:50;if(0<Ga){ma.push(Ga);Ga=Math.max(1,Math.round(Ga/va/Ia*1E3));for(let Ma=0;Ma<Ga;Ma++)ua.push(La)}})}else{var {pixelType:ya}=T;const va=(ba.max-ba.min)/ba.size,Ia=(ya=ya.includes("s")||ya.includes("u"))&&1===va?Math.floor(ba.min+.5):ba.min,Ga=ya&&
1===va?Math.floor(ba.max-.5):ba.max,La=ba.size;let Ma=0,Oa;ba.counts.forEach(Ja=>Ma+=Ja/La);ba.counts.forEach((Ja,Ka)=>{if(0<Ja)for(ma.push(Ja),Ja=Math.max(1,Math.round(Ja/La/Ma*1E3)),Oa=ta?Y.features[Ka].attributes[Ba.name]:0===Ka?Ia:Ka===La-1?Ga:ba.min+va*(Ka+.5),Ka=0;Ka<Ja;Ka++)ua.push(Oa)})}ya=V?.classificationMethod||"natural-breaks";let Aa=V?.definedInterval;"defined-interval"!==ya||Aa||(Aa=y(T,Ba,fa));T=n.createGenerateRendererClassBreaks({values:ua,valueFrequency:ma,normalizationTotal:null,
definition:new l({classificationMethod:ya,breakCount:fa,definedInterval:Aa})});let sa=V?.colors;sa||(V=V?.colorRamp||Z,ja.colorRamp=V,sa=p.convertColorRampToColormap(V,{numColors:T.classBreaks.length,interpolateAlpha:!0}).map(va=>va.slice(1)));V=T.classBreaks.map((va,Ia)=>new C({minValue:va.minValue,maxValue:va.maxValue,label:va.label,symbol:{type:"simple-fill",color:sa[Ia]}}));return new B({field:ia,classBreakInfos:V,authoringInfo:ja})};H.createColormapRenderer=I;H.createDefaultRenderer=function(T,
V){const {attributeTable:Y,colormap:ba}=T;if(P(T)){var fa=X(T);if(G.isSome(fa))return fa}return G.isSome(ba)&&(fa=I(T),G.isSome(fa))||G.isSome(Y)&&(fa=t(T),G.isSome(fa))?fa:f(T,V)};H.createFlowRenderer=function(T){if(!R(T))return null;let V;if(G.isSome(T.statistics)&&0<T.statistics.length&&("vector-magdir"===T.dataType||"vector-uv"===T.dataType)){const {minMagnitude:Y,maxMagnitude:ba}=W(T.dataType,T.statistics);V=[{type:"color",field:"Magnitude",stops:[{value:Y,color:"#1020C0"},{value:ba,color:"#C02010"}]}]}return new L({visualVariables:V})};
H.createShadedReliefRenderer=function(T,V="traditional"){if(!J(T))return null;({extent:T}=T);T=T.width*u.getMetersPerUnitForSR(T.spatialReference);return new w({hillshadeType:V,scalingType:5E6<T?"adjusted":"none"})};H.createStretchRenderer=f;H.createUVRenderer=t;H.createVectorFieldRenderer=X;H.estimateMagnitudeRange=W;H.getBandNames=function(T,V){const Y=T.keyProperties&&T.keyProperties.BandProperties;V=V?.length?V:Array.from(Array(T.bandCount).keys());return V.map(ba=>Y&&Y.length===T.bandCount?Y[ba]&&
Y[ba].BandName||"band_"+(ba+1):"band_"+(ba+1))};H.getClassField=q;H.getDefaultBandCombination=e;H.getDefaultInterpolation=function(T,V,Y){const ba=["nearest","bilinear","cubic","majority"].find(fa=>fa===Y?.toLowerCase());return"Map"===V?ba??"bilinear":"standard-time"===T.dataType?ba??"nearest":"thematic"===T.dataType||T.attributeTable||T.colormap?"nearest"===ba||"majority"===ba?ba:"nearest":ba??"bilinear"};H.getDefinedInterval=y;H.getField=E;H.getSupportedRendererTypes=function(T,V=!1){const Y=["raster-stretch"];
M(T)&&Y.push("raster-colormap");F(T)&&Y.push("unique-value");r(T,V)&&Y.push("class-breaks");J(T)&&Y.push("raster-shaded-relief");P(T)&&Y.push("vector-field");R(T)&&Y.push("flow");return Y};H.getVariableRasterInfo=g;H.getWellKnownBandIndexes=b;H.isClassBreaksSupported=r;H.isColormapRendererSupported=M;H.isFlowRendererSupported=R;H.isShadedReliefRendererSupported=J;H.isSingleBand8BitRasterWithStats=N;H.isUVRendererSupported=F;H.isVectorFieldRendererSupported=P;H.normalizeRendererJSON=function(T){if("uniqueValue"===
T.type){var V=T.uniqueValueInfos;V?.[0].symbol?.symbolLayers?.length&&(T.uniqueValueInfos=V?.map(Y=>({value:Y.value,label:Y.label,symbol:Y.symbol?U(Y.symbol):null})));return T}"classBreaks"===T.type&&(V=T.classBreakInfos,V[0].symbol?.symbolLayers?.length&&(T.classBreakInfos=V.map(Y=>({classMinValue:Y.classMinValue,classMaxValue:Y.classMaxValue,label:Y.label,symbol:Y.symbol?U(Y.symbol):null}))));return T};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(H,x,A,G,u,K,O,L,Q,C){K=new A.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});A=new A.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});G=function(p){function c(n){n=l.call(this,n);n.type="class-breaks-definition";n.breakCount=
null;n.classificationField=null;n.classificationMethod=null;n.normalizationField=null;n.normalizationType=null;return n}H._inherits(c,p);var l=H._createSuper(c);H._createClass(c,[{key:"standardDeviationInterval",set:function(n){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",n)}},{key:"definedInterval",set:function(n){"defined-interval"===this.classificationMethod&&this._set("definedInterval",n)}}]);return c}(G.JSONSupport);x.__decorate([Q.enumeration({classBreaksDef:"class-breaks-definition"})],
G.prototype,"type",void 0);x.__decorate([u.property({json:{write:!0}})],G.prototype,"breakCount",void 0);x.__decorate([u.property({json:{write:!0}})],G.prototype,"classificationField",void 0);x.__decorate([u.property({type:String,json:{read:K.read,write:K.write}})],G.prototype,"classificationMethod",void 0);x.__decorate([u.property({json:{write:!0}})],G.prototype,"normalizationField",void 0);x.__decorate([u.property({json:{read:A.read,write:A.write}})],G.prototype,"normalizationType",void 0);x.__decorate([u.property({value:null,
json:{write:!0}})],G.prototype,"standardDeviationInterval",null);x.__decorate([u.property({value:null,json:{write:!0}})],G.prototype,"definedInterval",null);return G=x.__decorate([C.subclass("esri.rest.support.ClassBreaksDefinition")],G)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(H,x){function A(l){var n=l.definition;const {classificationMethod:k,normalizationType:v,definedInterval:h}=n;n=n.breakCount??1;const m=[];var w=l.values;if(0===
w.length)return[];w=w.sort((b,d)=>b-d);var B=w[0],a=w[w.length-1];if("equal-interval"===k)if(w.length>=n){w=(a-B)/n;l=B;for(var f=1;f<n;f++){var g=Number((B+f*w).toFixed(6));m.push({minValue:l,maxValue:g,label:G(l,g,v)});l=g}m.push({minValue:l,maxValue:a,label:G(l,a,v)})}else w.forEach(b=>{m.push({minValue:b,maxValue:b,label:G(b,b,v)})});else if("natural-breaks"===k){w=u(w);l=K(w.uniqueValues,l.valueFrequency||w.valueFrequency,n);for(f=1;f<n;f++)w.uniqueValues.length>f&&(g=Number(w.uniqueValues[l[f]].toFixed(6)),
m.push({minValue:B,maxValue:g,label:G(B,g,v)}),B=g);m.push({minValue:B,maxValue:a,label:G(B,a,v)})}else if("quantile"===k)if(w.length>=n&&B!==a){l=Math.ceil(w.length/n);f=0;for(g=1;g<n;g++){var e=l+f-1;e>w.length&&(e=w.length-1);0>e&&(e=0);m.push({minValue:B,maxValue:w[e],label:G(B,w[e],v)});B=w[e];f+=l;l=Math.ceil((w.length-f)/(n-g))}m.push({minValue:B,maxValue:a,label:G(B,a,v)})}else for(n=-1,a=0;a<w.length;a++)B=w[a],B!==n&&(n=B,m.push({minValue:n,maxValue:B,label:G(n,B,v)}),n=B);else if("standard-deviation"===
k)if(l=Q(w),f=C(w,l),0===f)m.push({minValue:w[0],maxValue:w[0],label:G(w[0],w[0],v)});else{w=L(B,a,n,l,f)*f;f=0;for(g=n;1<=g;g--)e=Number((l-(g-.5)*w).toFixed(6)),m.push({minValue:B,maxValue:e,label:G(B,e,v)}),B=e,f++;g=Number((l+.5*w).toFixed(6));m.push({minValue:B,maxValue:g,label:G(B,g,v)});B=g;f++;for(e=1;e<=n;e++)g=f===2*n?a:Number((l+(e+.5)*w).toFixed(6)),m.push({minValue:B,maxValue:g,label:G(B,g,v)}),B=g,f++}else if("defined-interval"===k){if(!h)return m;n=w[0];a=w[w.length-1];w=Math.ceil((a-
n)/h);B=n;for(l=1;l<w;l++)f=Number((n+l*h).toFixed(6)),m.push({minValue:B,maxValue:f,label:G(B,f,v)}),B=f;m.push({minValue:B,maxValue:a,label:G(B,a,v)})}return m}function G(l,n,k){let v=null;return v=l===n?k&&"percent-of-total"===k?l+"%":l.toString():k&&"percent-of-total"===k?l+"% - "+n+"%":l+" - "+n}function u(l){const n=[],k=[];let v=Number.MIN_VALUE,h=1,m=-1;for(let w=0;w<l.length;w++){const B=l[w];B===v?(h++,k[m]=h):null!==B&&(n.push(B),v=B,h=1,k.push(h),m++)}return{uniqueValues:n,valueFrequency:k}}
function K(l,n,k){var v=l.length;const h=[];k>v&&(k=v);for(var m=0;m<k;m++)h.push(Math.round(m*v/k-1));h.push(v-1);m=O(h,l,n,k);v=m.mean;m=m.sdcm;var w=k,B=0,a=0;let f=0,g=0,e=!0;for(let d=0;2>d&&e;d++){0===d&&(e=!1);for(var b=0;b<w-1;b++)for(;h[b+1]+1!==h[b+2];)if(h[b+1]+=1,B=p(b,h,l,n),f=B.sbMean,B=B.sbSdcm,a=p(b+1,h,l,n),g=a.sbMean,a=a.sbSdcm,B+a<m[b]+m[b+1])m[b]=B,m[b+1]=a,v[b]=f,v[b+1]=g,e=!0;else{--h[b+1];break}for(b=w-1;0<b;b--)for(;h[b]!==h[b-1]+1;)if(--h[b],B=p(b-1,h,l,n),f=B.sbMean,B=B.sbSdcm,
a=p(b,h,l,n),g=a.sbMean,a=a.sbSdcm,B+a<m[b-1]+m[b])m[b-1]=B,m[b]=a,v[b-1]=f,v[b]=g,e=!0;else{h[b]+=1;break}}e&&(m=O(h,l,n,k));return h}function O(l,n,k,v){let h=[];var m=[],w=[];let B=0;const a=[],f=[];for(var g=0;g<v;g++){var e=p(g,l,n,k);a.push(e.sbMean);f.push(e.sbSdcm);B+=f[g]}e=B;for(g=!0;g||B<e;){g=!1;h=[];for(m=0;m<v;m++)h.push(l[m]);for(w=0;w<v;w++)for(e=l[w]+1;e<=l[w+1];e++)if(m=n[e],0<w&&e!==l[w+1]&&Math.abs(m-a[w])>Math.abs(m-a[w-1]))l[w]=e;else if(w<v-1&&l[w]!==e-1&&Math.abs(m-a[w])>Math.abs(m-
a[w+1])){l[w+1]=e-1;break}e=B;B=0;m=[];w=[];for(let b=0;b<v;b++){m.push(a[b]);w.push(f[b]);const d=p(b,l,n,k);a[b]=d.sbMean;f[b]=d.sbSdcm;B+=f[b]}}if(B>e){for(n=0;n<v;n++)l[n]=h[n],a[n]=m[n],f[n]=w[n];B=e}return{mean:a,sdcm:f}}function L(l,n,k,v,h){l=Math.max(v-l,n-v)/h/k;return 1<=l?1:.5<=l?.5:.25}function Q(l){let n=0;for(let k=0;k<l.length;k++)n+=l[k];return n/=l.length}function C(l,n){let k=0;for(let v=0;v<l.length;v++){const h=l[v];k+=(h-n)*(h-n)}k/=l.length;return Math.sqrt(k)}function p(l,
n,k,v){var h=0,m=0;for(var w=n[l]+1;w<=n[l+1];w++){const B=v[w];h+=k[w]*B;m+=B}0>=m&&c.warn("Exception in Natural Breaks calculation");h/=m;m=0;for(w=n[l]+1;w<=n[l+1];w++)m+=v[w]*(k[w]-h)**2;return{sbMean:h,sbSdcm:m}}const c=x.getLogger("esri.rest.support.generateRendererUtils");H.createGenerateRendererClassBreaks=function(l){const {normalizationTotal:n}=l;return{classBreaks:A(l),normalizationTotal:n}};H.createGenerateRendererUniqueValues=function(l){l=u(l);const n=[],k=l.uniqueValues.length;for(let v=
0;v<k;v++){const h=l.uniqueValues[v];n.push({value:h,count:l.valueFrequency[v],label:h.toString()})}return{uniqueValues:n}};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n,k,v){function h(B,a){const {attributeTable:f,bandCount:g}=B;return K.isNone(f)||1<g||a&&null==f.fields.find(e=>e.name.toLowerCase()===a.toLowerCase())?!1:!0}function m(B){const {bandCount:a,colormap:f}=B;return K.isSome(f)&&0<f.length&&1===a}function w(B){return l.isValidPixelBlock(B)&&0!==B.validPixelCount}G=function(B){function a(g){return f.call(this,g)}H._inherits(a,B);var f=H._createSuper(a);B=a.prototype;B.bind=function(){const {rendererJSON:g}=this;if(!g)return{success:!1};
this.lookup={rendererJSON:{}};let e;switch(g.type){case "uniqueValue":e=this._updateUVRenderer(g);break;case "rasterColormap":e=this._updateColormapRenderer(g);break;case "rasterStretch":e=this._updateStretchRenderer(g);break;case "classBreaks":e=this._updateClassBreaksRenderer(g);break;case "rasterShadedRelief":e=this._updateShadedReliefRenderer(g);break;case "vectorField":e=this._updateVectorFieldRenderer();break;case "flowRenderer":e=this._updateFlowRenderer()}return e};B.symbolize=function(g){let e=
g&&g.pixelBlock;if(!w(e))return e;if(g.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(e,g.simpleStretchParams);try{3<e.pixels.length&&(e=l.extractBands(e,[0,1,2]));let b;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":b=this._symbolizeColormap(e);break;case "classBreaks":b=this._symbolizeClassBreaks(e);break;case "rasterStretch":b=this._symbolizeStretch(e,g.bandIds);break;case "rasterShadedRelief":const d=g.extent;b=this._symbolizeShadedRelief(e,
{isGCS:d.spatialReference.isGeographic,resolution:{x:(d.xmax-d.xmin)/e.width,y:(d.ymax-d.ymin)/e.height}})}return b}catch(b){return u.getLogger(this.declaredClass).error("symbolize",b.message),e}};B.simpleStretch=function(g,e){if(!w(g))return g;try{return 3<g.pixels.length&&(g=l.extractBands(g,[0,1,2])),n.stretch(g,{...e,isRenderer:!0})}catch(b){return u.getLogger(this.declaredClass).error("symbolize",b.message),g}};B.generateWebGLParameters=function(g){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:q,
offset:z}=this.lookup.colormapLut||{};return{colormap:q,colormapOffset:z,type:"lut"}}const {pixelBlock:e,isGCS:b,resolution:d,bandIds:t}=g;({rendererJSON:g}=this);return"rasterStretch"===g.type?this._generateStretchWebGLParams(e,g,t):"rasterShadedRelief"===g.type?this._generateShadedReliefWebGLParams(g,b,d??void 0):"vectorField"===g.type?this._generateVectorFieldWebGLParams(g):null};B._isLUTChanged=function(g){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const e=
this.rendererJSON.colorRamp;if(g)return JSON.stringify(e)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};B._symbolizeColormap=function(g){return this._isLUTChanged()&&!this.bind().success?g:l.colorize(g,this.lookup.colormapLut)};B._symbolizeClassBreaks=function(g){const {canUseIndexedLUT:e}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&
!this.bind().success?g:e?l.colorize(g,this.lookup.colormapLut):l.remapColor(g,this.lookup.remapLut??[])};B._symbolizeStretch=function(g,e){const {rasterInfo:b}=this,{pixelType:d,bandCount:t}=b,q=this.rendererJSON;var z=["u8","u16","s8","s16"].includes(d);let E;var {dra:F}=q;({gamma:M}=this.lookup);if("histogramEqualization"===q.stretchType){z=F?null:this.lookup?.histogramLut;e=n.getStretchCutoff(q,{rasterInfo:b,pixelBlock:g,bandIds:e,returnHistogramLut:!z});var M=n.stretch(g,{...e,gamma:M,isRenderer:!0});
M=l.lookupPixels(M,{lut:F?e.histogramLut:z,offset:0})}else if(z){if(F)F=n.getStretchCutoff(q,{rasterInfo:b,pixelBlock:g,bandIds:e}),E=n.createStretchLUT({pixelType:d,...F,gamma:M,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return g;E=this.lookup?this.lookup.stretchLut:null}if(!E)return g;1<t&&e?.length===K.unwrap(g)?.pixels.length&&E?.lut.length===t&&(E={lut:e.map(I=>E.lut[I]),offset:E.offset});M=l.lookupPixels(g,E)}else F=n.getStretchCutoff(q,{rasterInfo:b,pixelBlock:g,
bandIds:e}),M=n.stretch(g,{...F,gamma:M,isRenderer:!0});if(q.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return g;M=l.colorize(M,this.lookup?.colormapLut)}return M};B._symbolizeShadedRelief=function(g,e){var b=this.rendererJSON;e=k.hillshade(g,{...b,...e});if(!b.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return e;b=this.lookup?this.lookup.hsvMap:null;if(!b)return e;const d=K.unwrap(this.rasterInfo.statistics)?.[0]??{min:0,max:8E3};k.tintHillshade(e,g,b,d);return e};B._isVectorFieldData=
function(){const {bandCount:g,dataType:e}=this.rasterInfo;return 2===g&&("vector-magdir"===e||"vector-uv"===e)};B._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};B._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};
B._updateUVRenderer=function(g){const {bandCount:e,attributeTable:b,pixelType:d}=this.rasterInfo,t=g.field1;if(!t)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const q=g.defaultSymbol;var z=1===e&&["u8","s8"].includes(d);if(!h(this.rasterInfo,t)&&!z)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const E=[];if(K.isSome(b)){const F=b.fields.find(M=>"value"===M.name.toLowerCase());
if(!F)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};b.features.forEach(M=>{const I=g.uniqueValueInfos?.find(J=>String(J.value)===String(M.attributes[t]))?.symbol?.color;I?E.push([M.attributes[F.name]].concat(I)):q&&E.push([M.attributes[F.name]].concat(q.color))})}else{if("value"!==t.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};g.uniqueValueInfos?.forEach(F=>
{const M=F?.symbol?.color;M?E.push([parseInt(""+F.value,10)].concat(M)):q&&E.push([parseInt(""+F.value,10)].concat(q?.color))})}if(0===E.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};z=l.createColormapLUT({colormap:E});this.lookup={rendererJSON:g,colormapLut:z};this.canRenderInWebGL=!0;return{success:!0}};B._updateColormapRenderer=function(g){if(!m(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};
var e=g.colormapInfos.map(b=>[b.value].concat(b.color)).sort((b,d)=>b[0]-d[0]);if(!e||0===e.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};e=l.createColormapLUT({colormap:e});this.lookup={rendererJSON:g,colormapLut:e};this.canRenderInWebGL=!0;return{success:!0}};B._updateShadedReliefRenderer=function(g){const {bandCount:e,dataType:b,pixelType:d}=this.rasterInfo;if("elevation"!==b&&("generic"!==b||1!==e||"s16"!==d&&"f32"!==d&&"f64"!==d))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(g.colorRamp){var t=v.convertColorRampToColormap(g.colorRamp,{interpolateAlpha:!0});t=l.createColormapLUT({colormap:t});const q=[],z=t.indexedColormap;for(let E=0;E<z.length;E+=4){const F=A.toHSV({r:z[E],g:z[E+1],b:z[E+2]});q.push([F.h/60,F.s/100,255*F.v/100])}this.lookup={rendererJSON:g,colormapLut:t,hsvMap:q}}else this.lookup=null;this.canRenderInWebGL=!0;
return{success:!0}};B._analyzeClassBreaks=function(g){const {attributeTable:e,pixelType:b}=this.rasterInfo,d=K.isSome(e)?e.fields.find(z=>"value"===z.name.toLowerCase()):null,t=K.isSome(e)?e.fields.find(z=>z.name.toLowerCase()===g.field.toLowerCase()):null,q=null!=d&&null!==t;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(b)||q,tableValueField:d,tableBreakField:t}};B._updateClassBreaksRenderer=function(g){var {attributeTable:e}=this.rasterInfo;const {canUseIndexedLUT:b,tableValueField:d,
tableBreakField:t}=this._analyzeClassBreaks(g);var q=g.classBreakInfos;if(!q?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};q=q.sort((I,J)=>I.classMaxValue-J.classMaxValue);var z=q[q.length-1],E=g.minValue;if(!b){var F=[];for(var M=0;M<q.length;M++)F.push({value:q[M].classMinValue??E,mappedColor:q[M].symbol.color}),E=q[M].classMaxValue;F.push({value:z.classMaxValue,mappedColor:z.symbol.color});this.lookup={rendererJSON:g,remapLut:F};
this.canRenderInWebGL=!1;return{success:!0}}F=[];if(K.isSome(e)&&null!=d&&null!==t&&d!==t){z=d.name;const I=t.name,J=q[q.length-1],{classMaxValue:r}=J;E=g.minValue;for(M of e.features){e=M.attributes[z];const y=M.attributes[I],N=y===r?J:y<E?null:q.find(({classMaxValue:P})=>P>y);N&&F.push([e].concat(N.symbol.color))}}else{E=Math.floor(g.minValue);for(M=0;M<q.length;M++){for(e=q[M];E<e.classMaxValue;E++)F.push([E].concat(e.symbol.color));E=Math.ceil(e.classMaxValue)}z.classMaxValue===E&&F.push([z.classMaxValue].concat(z.symbol.color))}q=
l.createColormapLUT({colormap:F,fillUnspecified:!1});this.lookup={rendererJSON:g,colormapLut:q};this.canRenderInWebGL=!0;return{success:!0}};B._isHistogramRequired=function(g){return"percentClip"===g||"histogramEqualization"===g};B._isValidRasterStatistics=function(g){return K.isSome(g)&&0<g.length&&null!=g[0].min&&null!=g[0].max};B._updateStretchRenderer=function(g){let {stretchType:e,dra:b}=g;if(!("none"===e||g.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||b))return{success:!1,
error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var d=K.unwrap(g.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(g.stretchType)||d?.length||b||(e="minMax");const {computeGamma:t,useGamma:q,colorRamp:z}=g;var {gamma:E}=g;q&&t&&!E?.length&&(E=g.statistics?.length?g.statistics:K.unwrap(this.rasterInfo.statistics),E=n.computeGammaValues(this.rasterInfo.pixelType,E));const F=this.rasterInfo.pixelType,M=!b&&["u8","u16",
"s8","s16"].includes(F);"histogramEqualization"===e?(d=d.map(I=>n.createHistogramEqualizationLUT(I)),this.lookup={rendererJSON:g,histogramLut:d}):M&&(d=n.getStretchCutoff(g,{rasterInfo:this.rasterInfo}),d=n.createStretchLUT({pixelType:F,...d,gamma:q?E:null,rounding:"floor"}),this.lookup={rendererJSON:g,stretchLut:d});z&&(d=v.convertColorRampToColormap(z,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:g}),this.lookup.colormapLut=l.createColormapLUT({colormap:d}),this.lookup.rendererJSON=
g);this.lookup.gamma=q&&E?.length?E:null;this.canRenderInWebGL=!0;return{success:!0}};B._generateStretchWebGLParams=function(g,e,b){let d=null,t=null;var q=this.lookup&&this.lookup.colormapLut;e.colorRamp&&q&&(d=q.indexedColormap,t=q.offset);"histogramEqualization"===e.stretchType&&(e={...e,stretchType:"minMax"});({gamma:q}=this.lookup);const z=!!(e.useGamma&&q&&q.some(N=>1!==N)),{minCutOff:E,maxCutOff:F,outMin:M,outMax:I}=n.getStretchCutoff(e,{rasterInfo:this.rasterInfo,pixelBlock:g,bandIds:b});
var J=0;K.isSome(g)&&(J=g.getPlaneCount(),2===J&&(g=g.clone(),g.statistics=[g.statistics[0]],g.pixels=[g.pixels[0]]));({bandCount:g}=this.rasterInfo);b=Math.min(3,b?.length||J||g,g);g=new Float32Array(b);J=d||z?1:255;let r;for(r=0;r<E.length;r++)g[r]=F[r]===E[r]?0:(I-M)/(F[r]-E[r])/J;const y=new Float32Array(b);if(z&&q)for(r=0;r<b;r++)y[r]=1<q[r]?2<q[r]?6.5+(q[r]-2)**2.5:6.5+100*(2-q[r])**4:1;return{bandCount:b,outMin:M/J,outMax:I/J,minCutOff:E,maxCutOff:F,factor:g,useGamma:z,gamma:z?q:[1,1,1],gammaCorrection:z?
y:[1,1,1],colormap:d,colormapOffset:t,stretchType:e.stretchType,type:"stretch"}};B._generateShadedReliefWebGLParams=function(g,e=!1,b={x:0,y:0}){let d=null,t=null;const q=this.lookup&&this.lookup.colormapLut;g.colorRamp&&q&&(d=q.indexedColormap,t=q.offset);e=k.calculateHillshadeParams({...g,isGCS:e,resolution:b});b=K.unwrap(this.rasterInfo.statistics)?.[0];return{...e,minValue:b?.min??0,maxValue:b?.max??8E3,hillshadeType:"traditional"===g.hillshadeType?0:1,type:"hillshade",colormap:d,colormapOffset:t}};
B._generateVectorFieldWebGLParams=function(g){const {style:e,inputUnit:b,outputUnit:d,visualVariables:t,symbolTileSize:q,flowRepresentation:z}=g;let E;var F=this.rasterInfo.statistics?.[0].min??0,M=this.rasterInfo.statistics?.[0].max??50,I=t?.find(y=>"sizeInfo"===y.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:M,maxSize:.8*q,minDataValue:F,minSize:.2*q},J=I.minDataValue??F,r=I.maxDataValue??M;M=K.isSome(I.maxSize)&&K.isSome(I.minSize)?[I.minSize/q,I.maxSize/q]:[.2,.8];"wind_speed"===e&&(M[0]=
M[1]=(M[0]+M[1])/2);F=K.isSome(J)&&K.isSome(r)?[J,r]:null;if("classified_arrow"===e)if(K.isSome(J)&&K.isSome(r)&&K.isSome(I))for(E=[],J=(I.maxDataValue-I.minDataValue)/5,r=0;6>r;r++)E.push(I.minDataValue+J*r);else E=[0,1E-6,3.5,7,10.5,14];I="flow_to"===z===("ocean_current_kn"===e||"ocean_current_m"===e)?0:Math.PI;J=t?.find(y=>"rotationInfo"===y.type);return{breakValues:E,dataRange:F,inputUnit:b,outputUnit:d,symbolTileSize:q,symbolPercentRange:M,style:e||"single_arrow",rotation:I,rotationType:this.rasterInfo.storageInfo?.tileInfo&&
"vector-uv"===this.rasterInfo.dataType?"geographic":J?.rotationType||g.rotationType,type:"vectorField"}};return H._createClass(a)}(G.JSONSupport);x.__decorate([O.property({json:{write:!0}})],G.prototype,"rendererJSON",void 0);x.__decorate([O.property({type:c,json:{write:!0}})],G.prototype,"rasterInfo",void 0);x.__decorate([O.property({json:{write:!0}})],G.prototype,"lookup",void 0);x.__decorate([O.property()],G.prototype,"canRenderInWebGL",void 0);return G=x.__decorate([p.subclass("esri.renderers.support.RasterSymbolizer")],
G)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils","../../../renderers/support/stretchRendererUtils"],function(H,x,A,G,u){function K(c,l=256){l=Math.min(l,256);const {size:n,counts:k}=c;c=new Uint8Array(n);var v=k.reduce((a,f)=>a+f/l,0);let h=0;var m=0;let w=0,B=v;for(let a=0;a<n;a++)if(w+=k[a],!(a<n-1&&w+k[a+1]<B)){for(;h<l-1&&B<w;)h++,B+=v;for(;m<=a;m++)c[m]=h;m=a+1}for(v=m;v<n;v++)c[v]=l-
1;return c}function O(c,l){c=Math.min(Math.max(c,-100),100);l=Math.min(Math.max(l??0,-100),100);let n=0,k=0;const v=new Uint8Array(256);for(n=0;256>n;n++)0<c&&100>c?k=(200*n-25500+510*l)/(2*(100-c))+128:0>=c&&-100<c?k=(200*n-25500+510*l)*(100+c)/2E4+128:100===c?(k=200*n-25500+256*(100-c)+510*l,k=0<k?255:0):-100===c&&(k=128),v[n]=255<k?255:0>k?0:k;return v}function L(c){if(x.isNone(c)||!c.pixels?.length)return null;const {pixels:l,mask:n,pixelType:k}=c,v=c.width*c.height,h=l.length;let m,w;let B;var a;
const f=[],g=[];for(B=0;B<h;B++){var e=new Uint32Array(256);var b=l[B];if("u8"===k)if(m=-.5,w=255.5,n)for(a=0;a<v;a++)n[a]&&e[b[a]]++;else for(a=0;a<v;a++)e[b[a]]++;else{a=!1;c.statistics||(c.updateStatistics(),a=!0);var d=c.statistics;m=d[B].minValue;w=d[B].maxValue;var t=(w-m)/256;if(0===t)for(!d||c.validPixelCount||a||c.updateStatistics(),t=(c.validPixelCount||c.width*c.height)/256,a=0;256>a;a++)e[a]=Math.round(t*(a+1))-Math.round(t*a);else{d=new Uint32Array(257);for(a=0;a<v;a++)n&&!n[a]||d[Math.floor((b[a]-
m)/t)]++;for(a=0;255>a;a++)e[a]=d[a];e[255]=d[255]+d[256]}}f.push({min:m,max:w,size:256,counts:e});for(a=d=b=t=0;256>a;a++)t+=e[a],b+=a*e[a];b/=t;for(a=0;256>a;a++)d+=e[a]*(a-b)**2;a=Math.sqrt(d/(t-1));t=(w-m)/256;e=(b+.5)*t+m;t*=a;g.push({min:m,max:w,avg:e,stddev:t})}return{statistics:g,histograms:f}}function Q(c,l){if(null==l||0===l.length)return c;const n=Math.max.apply(null,l),{minCutOff:k,maxCutOff:v,outMin:h,outMax:m,histogramLut:w}=c;return k.length===l.length||k.length<=n?c:{minCutOff:l.map(B=>
k[B]),maxCutOff:l.map(B=>v[B]),histogramLut:w?l.map(B=>w[B]):null,outMin:h,outMax:m}}function C(c,l){const n=new Float32Array(c);for(let k=0;k<c;k++)n[k]=1<l[k]?2<l[k]?6.5+(l[k]-2)**2.5:6.5+100*(2-l[k])**4:1;return n}const p=[.299,.587,.114];H.computeGammaCorrection=C;H.computeGammaValues=function(c,l,n){const k=[];for(let B=0;B<l.length;B++){var v=0,h=0,m=0;"min"in l[B]?{min:v,max:h,avg:m}=l[B]:[v,h,m]=l[B];m=m??0;"u8"!==c&&(m=255*(m-v)/(h-v));n&&(m*=p[B]);v=k;h=v.push;if(0>=m||255<=m)m=1;else{var w=
0;150!==m&&(w=150>=m?45*Math.cos(.01047*m):17*Math.sin(.021*m));w=Math.log((m+w)/255);0===w?m=1:(m=Math.log(m/255)/w,m=isNaN(m)?1:Math.min(9.9,Math.max(.01,m)))}h.call(v,m)}return k};H.createContrastBrightnessLUT=O;H.createHistogramEqualizationLUT=K;H.createStretchLUT=function(c){const {minCutOff:l,maxCutOff:n,gamma:k,pixelType:v,rounding:h}=c,m=c.outMin||0,w=c.outMax||255;if(!["u8","u16","s8","s16"].includes(v))return null;const B=l.length;let a,f,g=0;"s8"===v?g=-127:"s16"===v&&(g=-32767);let e=
256;["u16","s16"].includes(v)&&(e=65536);var b=[],d=[];const t=w-m;for(a=0;a<B;a++)d[a]=n[a]-l[a],b[a]=0===d[a]?0:t/d[a];let q;const z=[];let E,F;if(k&&k.length>=B)for(b=C(B,k),a=0;a<B;a++){F=[];for(f=0;f<e;f++)if(0===d[a])F[f]=m;else{var M=f+g;q=(M-l[a])/d[a];E=1;1<k[a]&&(E-=(1/t)**(q*b[a]));M<n[a]&&M>l[a]?(M=E*t*q**(1/k[a])+m,F[f]="floor"===h?Math.floor(M):"round"===h?Math.round(M):M):F[f]=M>=n[a]?w:m}z[a]=F}else for(a=0;a<B;a++){F=[];for(f=0;f<e;f++)M=f+g,M<=l[a]?F[f]=m:M>=n[a]?F[f]=w:(d=(M-l[a])*
b[a]+m,F[f]="floor"===h?Math.floor(d):"round"===h?Math.round(d):d);z[a]=F}if(null!=c.contrastOffset)for(c=O(c.contrastOffset,c.brightnessOffset),a=0;a<B;a++)for(F=z[a],f=0;f<e;f++)F[f]=c[F[f]];return{lut:z,offset:g}};H.estimateStatisticsFromHistograms=function(c){const l=[];for(let h=0;h<c.length;h++){const {min:m,max:w,size:B,counts:a}=c[h];let f=0;var n=0;for(var k=0;k<B;k++)f+=a[k],n+=k*a[k];n/=f;k=0;for(var v=0;v<B;v++)k+=a[v]*(v-n)**2;v=(w-m)/B;l.push({min:m,max:w,avg:(n+.5)*v+m,stddev:Math.sqrt(k/
(f-1))*v})}return l};H.estimateStatisticsHistograms=L;H.getStretchCutoff=function(c,l){const {pixelBlock:n,bandIds:k,returnHistogramLut:v,rasterInfo:h}=l;var m=null;l=null;var w=c.stretchType;"number"===typeof w&&(w=u.stretchTypeFunctionEnum[w]);c.dra?"minMax"===w&&x.isSome(n)&&n.statistics?m=n.statistics.map(M=>[M.minValue,M.maxValue,0,0]):(l=L(n),m=x.isSome(l)?l.statistics:null,l=x.isSome(l)?l.histograms:null):(m=0<c.statistics?.length?c.statistics:x.unwrap(h.statistics),l=c.histograms||x.unwrap(h.histograms));
"percentClip"!==w&&"histogramEqualization"!==w||l?.length||(w="minMax");var B=m?.length||l?.length||h.bandCount;const a=[],f=[];let g;let e,b,d,t;m&&!Array.isArray(m[0])&&(m=m.map(M=>[M.min,M.max,M.avg,M.stddev]));const [q,z]=G.getPixelValueRange(h.pixelType);if(!m?.length){m=[];for(d=0;d<B;d++)m.push([q,z,1,1]);"standardDeviation"===w&&(w="minMax")}switch(w){case "none":for(d=0;d<B;d++)a[d]=q,f[d]=z;break;case "minMax":for(d=0;d<B;d++)a[d]=m[d][0],f[d]=m[d][1];break;case "standardDeviation":for(d=
0;d<B;d++)a[d]=m[d][2]-c.numberOfStandardDeviations*m[d][3],f[d]=m[d][2]+c.numberOfStandardDeviations*m[d][3],a[d]<m[d][0]&&(a[d]=m[d][0]),f[d]>m[d][1]&&(f[d]=m[d][1]);break;case "histogramEqualization":x.assertIsSome(l);for(d=0;d<B;d++)a[d]=l[d].min,f[d]=l[d].max;break;case "percentClip":x.assertIsSome(l);for(d=0;d<l.length;d++){m=l[d];e=new Uint32Array(m.size);var E=[...m.counts];20<=E.length&&(E[0]=E[1]=E[2]=E[E.length-1]=E[E.length-2]=0);g=0;B=(m.max-m.min)/m.size;b=-.5===m.min&&1===B?.5:0;for(t=
0;t<m.size;t++)g+=E[t],e[t]=g;E=(c.minPercent||0)*g/100;a[d]=m.min+b;for(t=0;t<m.size;t++)if(e[t]>E){a[d]=m.min+B*(t+b);break}E=(1-(c.maxPercent||0)/100)*g;f[d]=m.max+b;for(t=m.size-2;0<=t;t--)if(e[t]<E){f[d]=m.min+B*(t+2-b);break}f[d]<a[d]&&(m=a[d],a[d]=f[d],f[d]=m)}break;default:for(d=0;d<B;d++)a[d]=m[d][0],f[d]=m[d][1]}let F;"histogramEqualization"===w?(x.assertIsSome(l),w=l[0].size||256,c=0,v&&(F=l.map(M=>K(M)))):(w=c.max||255,c=c.min||0);return Q({minCutOff:a,maxCutOff:f,outMax:w,outMin:c,histogramLut:F},
k)};H.stretch=function(c,l){if(x.isNone(c)||!c.pixels?.length)return c;const {mask:n,width:k,height:v,pixels:h}=c,{minCutOff:m,maxCutOff:w,gamma:B}=l;var a=l.outMin||0;const f=l.outMax||255,g=k*v,e=l.outputPixelType||"u8";c=c.pixels.map(()=>A.createEmptyBand(e,g));const b=c.length;let d;let t,q;var z=f-a,E=[];const F=[];for(d=0;d<b;d++)F[d]=w[d]-m[d],E[d]=0===F[d]?0:z/F[d];const M=e.startsWith("u")||e.startsWith("s"),I=!!l.isRenderer;if(B&&B.length>=b)for(E=C(b,B),l=0;l<g;l++){if(null==n||n[l])for(d=
0;d<b;d++)if(0===F[d])c[d][l]=a;else{var J=h[d][l];q=(J-m[d])/F[d];t=1;1<B[d]&&(t-=(1/z)**(q*E[d]));J<w[d]&&J>m[d]?(J=t*z*q**(1/B[d])+a,c[d][l]=I?Math.floor(J):M?Math.round(J):J):c[d][l]=J>=w[d]?f:a}}else for(l=0;l<g;l++)if(null==n||n[l])for(d=0;d<b;d++)J=h[d][l],J<w[d]&&J>m[d]?(z=(J-m[d])*E[d]+a,c[d][l]=I?Math.floor(z):M?Math.round(z):z):c[d][l]=J>=w[d]?f:a;a=new A({width:k,height:v,mask:n,pixels:c,pixelType:e});a.updateStatistics();return a};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","./pixelUtils"],function(H,x,A,G){function u(K){let {altitude:O,azimuth:L}=K;const {hillshadeType:Q,pixelSizePower:C=1,pixelSizeFactor:p=1,scalingType:c,isGCS:l,resolution:n}=K;var k="multi-directional"===Q?2*K.zFactor:K.zFactor;const {x:v,y:h}=n;K=k/(8*v);var m=k/(8*h);l&&.001<k&&(K/=111E3,m/=111E3);"adjusted"===c&&(l?(K=111E3*v,m=111E3*h,K=(k+K**C*p)/(8*K),m=(k+m**C*p)/(8*m)):(K=
(k+v**C*p)/(8*v),m=(k+h**C*p)/(8*h)));var w=(90-O)*Math.PI/180;k=Math.cos(w);let B=(360-L+90)*Math.PI/180,a=Math.sin(w)*Math.cos(B);w=Math.sin(w)*Math.sin(B);const f=[315,270,225,360,180,0],g=[60,60,60,60,60,90];var e=new Float32Array([3,5,3,2,1,4]);const b=e.reduce((E,F)=>E+F);e=e.map(E=>E/b);const d="multi-directional"===Q?f.length:1,t=new Float32Array(6),q=new Float32Array(6),z=new Float32Array(6);if("multi-directional"===Q)for(let E=0;E<d;E++)O=g[E],L=f[E],w=(90-O)*Math.PI/180,k=Math.cos(w),B=
(360-L+90)*Math.PI/180,a=Math.sin(w)*Math.cos(B),w=Math.sin(w)*Math.sin(B),t[E]=k,q[E]=a,z[E]=w;else t.fill(k),q.fill(a),z.fill(w);return{resolution:n,factor:[K,m],sinZcosA:a,sinZsinA:w,cosZ:k,sinZcosAs:q,sinZsinAs:z,cosZs:t,weights:e,hillshadeType:["traditional","multi-directional"].indexOf(Q)}}H.aspect=function(K,O={}){if(!G.isValidPixelBlock(K))return K;const {width:L,height:Q,mask:C}=K;var p=K.pixels[0];const c=new Uint8Array(L*Q);x.isSome(C)&&c.set(C);const l=new Float32Array(L*Q);var {resolution:n}=
O;O=n?1/n.x:1;n=n?1/n.y:1;let k;let v,h,m,w;const B=x.isSome(C);for(let e=1;e<Q-1;e++){const b=e*L;for(let d=1;d<L-1;d++)if(C&&!C[b+d])l[b+d]=0;else{var a=0;if(B&&(a=C[b-L+d-1]+C[b-L+d]+C[b-L+d+1]+C[b+d-1]+C[b+d+1]+C[b+L+d-1]+C[b+L+d]+C[b+L+d+1],7>a)){l[b+d]=0;c[b+d]=0;continue}if(C&&7===a){a=C[b-L+d-1]?p[b-L+d-1]:p[b+d];var f=C[b-L+d]?p[b-L+d]:p[b+d];k=C[b-L+d+1]?p[b-L+d+1]:p[b+d];var g=C[b+d-1]?p[b+d-1]:p[b+d];v=C[b+d+1]?p[b+d+1]:p[b+d];h=C[b+L+d-1]?p[b+L+d-1]:p[b+d];m=C[b+L+d]?p[b+L+d]:p[b+d];
w=C[b+L+d+1]?p[b+L+d+1]:p[b+d]}else a=p[b-L+d-1],f=p[b-L+d],k=p[b-L+d+1],g=p[b+d-1],v=p[b+d+1],h=p[b+L+d-1],m=p[b+L+d],w=p[b+L+d+1];g=(k+v+v+w-(a+g+g+h))*O;a=(h+m+m+w-(a+f+f+k))*n;f=-1;if(0!==g||0!==a)f=90-57.29578*Math.atan2(a,-g),0>f&&(f+=360),360===f?f=0:360<f&&(f%=360);l[b+d]=f}}for(p=0;p<Q;p++)l[p*L]=l[p*L+1],l[(p+1)*L-1]=l[(p+1)*L-2];for(p=1;p<L-1;p++)l[p]=l[p+L],l[p+(Q-1)*L]=l[p+(Q-2)*L];return new A({width:L,height:Q,pixels:[l],mask:C?c:null,pixelType:"f32",validPixelCount:K.validPixelCount,
statistics:[{minValue:0,maxValue:360}]})};H.calculateHillshadeParams=u;H.hillshade=function(K,O){if(!G.isValidPixelBlock(K))return K;const {width:L,height:Q,mask:C}=K,p=new Uint8Array(L*Q);var c=1;if(x.isSome(C)){for(var l=0;l<C.length;l++)if(C[l]){c=C[l];break}p.set(C)}const {factor:n,sinZcosA:k,sinZsinA:v,cosZ:h,sinZcosAs:m,sinZsinAs:w,cosZs:B,weights:a}=u(O),[f,g]=n;({hillshadeType:l}=O);const e=K.pixels[0];O=new Uint8Array(L*Q);let b;const d=x.isSome(C);for(let J=1;J<Q-1;J++){const r=J*L;for(let y=
1;y<L-1;y++)if(C&&!C[r+y])O[r+y]=0;else{var t=8;if(d&&(t=(C[r-L+y-1]+C[r-L+y]+C[r-L+y+1]+C[r+y-1]+C[r+y+1]+C[r+L+y-1]+C[r+L+y]+C[r+L+y+1])/c,7>t)){O[r+y]=0;p[r+y]=0;continue}if(C&&7===t){var q=C[r-L+y-1]?e[r-L+y-1]:e[r+y];var z=C[r-L+y]?e[r-L+y]:e[r+y];var E=C[r-L+y+1]?e[r-L+y+1]:e[r+y];t=C[r+y-1]?e[r+y-1]:e[r+y];b=C[r+y+1]?e[r+y+1]:e[r+y];var F=C[r+L+y-1]?e[r+L+y-1]:e[r+y];var M=C[r+L+y]?e[r+L+y]:e[r+y];var I=C[r+L+y+1]?e[r+L+y+1]:e[r+y]}else q=e[r-L+y-1],z=e[r-L+y],E=e[r-L+y+1],t=e[r+y-1],b=e[r+
y+1],F=e[r+L+y-1],M=e[r+L+y],I=e[r+L+y+1];t=(E+b+b+I-(q+t+t+F))*f;q=(F+M+M+I-(q+z+z+E))*g;z=Math.sqrt(1+t*t+q*q);E=0;if("traditional"===l)t=255*(h+v*q-k*t)/z,0>t&&(t=0),E=t;else for(F=w.length,M=0;M<F;M++)I=255*(B[M]+w[M]*q-m[M]*t)/z,0>I&&(I=0),E+=I*a[M];O[r+y]=E&255}}for(c=0;c<Q;c++)O[c*L]=O[c*L+1],O[(c+1)*L-1]=O[(c+1)*L-2];for(c=1;c<L-1;c++)O[c]=O[c+L],O[c+(Q-1)*L]=O[c+(Q-2)*L];return new A({width:L,height:Q,pixels:[O],mask:C?p:null,pixelType:"u8",validPixelCount:K.validPixelCount,statistics:[{minValue:0,
maxValue:255}]})};H.slope=function(K,O){if(!G.isValidPixelBlock(K))return K;var L=O.zFactor,Q=O.pixelSizePower??1,C=O.pixelSizeFactor??1,p=O.slopeType,c=O.isGCS;const {width:l,height:n,mask:k}=K,v=K.pixels[0],h=new Uint8Array(l*n);let m=1;if(x.isSome(k)){for(var w=0;w<k.length;w++)if(k[w]){m=k[w];break}h.set(k)}w=new Float32Array(l*n);const {x:B,y:a}=O.resolution;O=L/(8*B);let f=L/(8*a);c&&1E-4>Math.abs(L-1)&&(O/=111E3,f/=111E3);"adjusted"===p&&(O=(L+B**Q*C)/(8*B),f=(L+a**Q*C)/(8*a));let g,e;let b,
d,t,q;L=x.isSome(k);for(Q=1;Q<n-1;Q++)for(C=Q*l,c=1;c<l-1;c++)if(k&&!k[C+c])w[C+c]=0;else{var z=0;if(L&&(z=(k[C-l+c-1]+k[C-l+c]+k[C-l+c+1]+k[C+c-1]+k[C+c+1]+k[C+l+c-1]+k[C+l+c]+k[C+l+c+1])/m,7>z)){w[C+c]=0;h[C+c]=0;continue}if(k&&7===z){z=k[C-l+c-1]?v[C-l+c-1]:v[C+c];g=k[C-l+c]?v[C-l+c]:v[C+c];e=k[C-l+c+1]?v[C-l+c+1]:v[C+c];var E=k[C+c-1]?v[C+c-1]:v[C+c];b=k[C+c+1]?v[C+c+1]:v[C+c];d=k[C+l+c-1]?v[C+l+c-1]:v[C+c];t=k[C+l+c]?v[C+l+c]:v[C+c];q=k[C+l+c+1]?v[C+l+c+1]:v[C+c]}else z=v[C-l+c-1],g=v[C-l+c],
e=v[C-l+c+1],E=v[C+c-1],b=v[C+c+1],d=v[C+l+c-1],t=v[C+l+c],q=v[C+l+c+1];E=(e+b+b+q-(z+E+E+d))*O;z=(d+t+t+q-(z+g+g+e))*f;z=Math.sqrt(E*E+z*z);w[C+c]="percent-rise"===p?100*z:57.2957795*Math.atan(z)}for(p=0;p<n;p++)w[p*l]=w[p*l+1],w[(p+1)*l-1]=w[(p+1)*l-2];for(p=1;p<l-1;p++)w[p]=w[p+l],w[p+(n-1)*l]=w[p+(n-2)*l];K=new A({width:l,height:n,pixels:[w],mask:k?h:null,pixelType:"f32",validPixelCount:K.validPixelCount});K.updateStatistics();return K};H.tintHillshade=function(K,O,L,Q){if(G.isValidPixelBlock(K)&&
G.isValidPixelBlock(O)){var {min:C,max:p}=Q;Q=K.pixels[0];var {pixels:c,mask:l}=O;O=c[0];var n=255.00001/(p-C),k=new Uint8ClampedArray(O.length),v=new Uint8ClampedArray(O.length),h=new Uint8ClampedArray(O.length),m=L.length-1;for(let a=0;a<O.length;a++){if(l&&0===l[a])continue;var w=Math.floor((O[a]-C)*n);const [f,g]=L[0>w?0:w>m?m:w];var B=Q[a];w=B*g;const e=w*(1-Math.abs(f%2-1));B-=w;switch(Math.floor(f)){case 0:k[a]=w+B;v[a]=e+B;h[a]=B;break;case 1:k[a]=e+B;v[a]=w+B;h[a]=B;break;case 2:k[a]=B;v[a]=
w+B;h[a]=e+B;break;case 3:k[a]=B;v[a]=e+B;h[a]=w+B;break;case 4:k[a]=e+B;v[a]=B;h[a]=w+B;break;case 5:case 6:k[a]=w+B,v[a]=B,h[a]=e+B}}K.pixels=[k,v,h];K.updateStatistics()}};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService":function(){define("exports ../geometry ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageAreaResult ./support/ImageDistanceResult ./support/ImageHeightResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImagePointResult ./support/ImageSampleResult ../geometry/SpatialReference".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n,k){function v(f){const g=f?.time;if(g&&(null!=g.start||null!=g.end)){const e=[];null!=g.start&&e.push(g.start);null==g.end||e.includes(g.end)||e.push(g.end);f.time=e.join(",")}}async function h(f,g,e){f=K.parseUrl(f);var b=await u.normalizeCentralMeridian(g.geometry?[g.geometry]:[]);g=g.toJSON();v(g);b=b&&b[0];G.isSome(b)&&(g.geometry=b.toJSON());f=K.encode({...f.query,f:"json",...g});return K.asValidOptions(f,e)}async function m(f,g,e,b){f=K.parseUrl(f);e=await u.normalizeCentralMeridian(e);
g=g.toJSON();G.isSome(e[0])&&(g.fromGeometry=JSON.stringify(w(e[0])));G.isSome(e[1])&&(g.toGeometry=JSON.stringify(w(e[1])));g=K.encode({...f.query,f:"json",...g});b=K.asValidOptions(g,b);({data:b}=await A(f.path+"/measure",b));return b}function w(f){const g=f.toJSON();f.spatialReference?.imageCoordinateSystem&&(g.spatialReference=B(f.spatialReference));return g}function B(f){const {imageCoordinateSystem:g}=f;if(g){const {id:e,referenceServiceName:b}=g;return null!=e?b?{icsid:e,icsns:b}:{icsid:e}:
{ics:g}}return f.toJSON()}function a(f,g){f=B(f);const {icsid:e,icsns:b,wkid:d}=f;return null!=e?null==b||g?.toLowerCase().includes("/"+b.toLowerCase()+"/")?`0:${e}`:JSON.stringify(f):d?d.toString():JSON.stringify(f)}H.computeAngles=async function(f,g,e){var b=g.toJSON();G.isSome(b.angleName)&&(b.angleName=b.angleName.join(","));G.isSome(g.point)&&g.point.spatialReference?.imageCoordinateSystem&&(b.point.spatialReference=B(g.point.spatialReference));G.isSome(g.spatialReference)&&g.spatialReference.imageCoordinateSystem&&
(b.spatialReference=a(g.spatialReference));f=K.parseUrl(f);b=K.encode({...f.query,f:"json",...b});e=K.asValidOptions(b,e);({data:e}=await A(`${f.path}/computeAngles`,e));e.spatialReference=e.spatialReference?null!=e.spatialReference.geodataXform?new k({wkid:0,imageCoordinateSystem:e.spatialReference}):k.fromJSON(e.spatialReference):null;"NaN"===e.north&&(e.north=null);"NaN"===e.up&&(e.up=null);return new O(e)};H.computeHistograms=async function(f,g,e){g=await h(f,g,e);f=K.parseUrl(f);({data:f}=await A(`${f.path}/computeHistograms`,
g));return{histograms:f.histograms}};H.computePixelSpaceLocations=async function(f,g,e){var b=g.toJSON();({geometries:g}=g);if(g)for(let d=0;d<g.length;d++)g[d].spatialReference?.imageCoordinateSystem&&(b.geometries.geometries[d].spatialReference=B(g[d].spatialReference));f=K.parseUrl(f);b=K.encode({...f.query,f:"json",...b});e=K.asValidOptions(b,e);({data:e}=await A(`${f.path}/computePixelLocation`,e));return c.fromJSON(e)};H.computeStatisticsHistograms=async function(f,g,e){g=await h(f,g,e);f=K.parseUrl(f);
({data:f}=await A(`${f.path}/computeStatisticsHistograms`,g));({statistics:g}=f);g?.length&&g.forEach(b=>{b.avg=b.mean;b.stddev=b.standardDeviation});return{statistics:g,histograms:f.histograms}};H.getImageSpatialReferenceJSON=B;H.getImageSpatialReferenceQueryParameter=a;H.getSamples=async function(f,g,e){var b=g.toJSON();v(b);b.outFields?.length&&(b.outFields=b.outFields.join(","));g=(await u.normalizeCentralMeridian(g.geometry))?.[0];G.isSome(g)&&(b.geometry=g.toJSON());f=K.parseUrl(f);b=K.encode({...f.query,
f:"json",...b});e=K.asValidOptions(b,e);({data:e}=await A(`${f.path}/getSamples`,e));e=e?.samples?.map(d=>{const t="NaN"===d.value||""===d.value?null:d.value.split(" ").map(q=>Number(q));return{...d,pixelValue:t}});return n.fromJSON({samples:e})};H.identify=async function(f,g,e){const b=K.parseUrl(f);return u.normalizeCentralMeridian(g.geometry?[g.geometry]:[]).then(d=>{var t=g.toJSON();d=d&&d[0];G.isSome(d)&&(t.geometry=JSON.stringify(d.toJSON()));t=K.encode({...b.query,f:"json",...t});t=K.asValidOptions(t,
e);return A(b.path+"/identify",t)}).then(d=>p.fromJSON(d.data))};H.measureAreaAndPerimeter=async function(f,g,e){f=await m(f,g,[g.geometry],e);return L.fromJSON(f)};H.measureDistanceAndAngle=async function(f,g,e){f=await m(f,g,[g.fromGeometry,g.toGeometry],e);return Q.fromJSON(f)};H.measureHeight=async function(f,g,e){f=await m(f,g,[g.fromGeometry,g.toGeometry],e);return C.fromJSON(f)};H.measurePointOrCentroid=async function(f,g,e){f=await m(f,g,[g.geometry],e);return l.fromJSON(f)};Object.defineProperty(H,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageAngleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),function(H,x,A,G,u,K,O,L,Q,C){A=function(p){function c(n){n=l.call(this,n);n.north=null;n.up=
null;n.spatialReference=null;return n}H._inherits(c,p);var l=H._createSuper(c);return H._createClass(c)}(G.JSONSupport);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"north",void 0);x.__decorate([u.property({type:Number,json:{write:!0}})],A.prototype,"up",void 0);x.__decorate([u.property({type:C,json:{write:!0}})],A.prototype,"spatialReference",void 0);return A=x.__decorate([Q.subclass("esri.rest.support.ImageAngleResult")],A)})},"esri/rest/support/ImageAreaResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(H,x,A,G,u,K,O,L){G=function(Q){function C(){var c=p.apply(this,arguments);c.area=null;c.perimeter=null;return c}H._inherits(C,Q);var p=H._createSuper(C);return H._createClass(C)}(L.BaseImageMeasureResult);x.__decorate([A.property({type:L.ImageMeasureResultAreaValue,json:{read:!0,write:!0}})],G.prototype,"area",void 0);x.__decorate([A.property({type:L.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],G.prototype,"perimeter",void 0);return G=x.__decorate([O.subclass("esri.rest.support.ImageAreaResult")],
G)})},"esri/rest/support/BaseImageMeasureResult":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(H,x,A,G,u,K,O,L,Q,C){O=function(p){function c(){var n=l.apply(this,arguments);n.value=null;n.displayValue=null;n.uncertainty=null;
return n}x._inherits(c,p);var l=x._createSuper(c);return x._createClass(c)}(G.JSONSupport);A.__decorate([K.property({type:Number,json:{read:!0,write:!0}})],O.prototype,"value",void 0);A.__decorate([K.property({type:String,json:{read:!0,write:!0}})],O.prototype,"displayValue",void 0);A.__decorate([K.property({type:Number,json:{read:!0,write:!0}})],O.prototype,"uncertainty",void 0);O=A.__decorate([C.subclass("esri.rest.support.ImageMeasureResultValue")],O);H.ImageMeasureResultLengthValue=function(p){function c(){var n=
l.apply(this,arguments);n.unit=null;return n}x._inherits(c,p);var l=x._createSuper(c);return x._createClass(c)}(O);A.__decorate([K.property({type:String,json:{read:u.lengthUnitsJSONMap.read,write:u.lengthUnitsJSONMap.write}})],H.ImageMeasureResultLengthValue.prototype,"unit",void 0);H.ImageMeasureResultLengthValue=A.__decorate([C.subclass("esri.rest.support.ImageMeasureResultLengthValue")],H.ImageMeasureResultLengthValue);H.ImageMeasureResultAreaValue=function(p){function c(){var n=l.apply(this,arguments);
n.unit=null;return n}x._inherits(c,p);var l=x._createSuper(c);return x._createClass(c)}(O);A.__decorate([K.property({type:String,json:{read:u.areaUnitsJSONMap.read,write:u.areaUnitsJSONMap.write}})],H.ImageMeasureResultAreaValue.prototype,"unit",void 0);H.ImageMeasureResultAreaValue=A.__decorate([C.subclass("esri.rest.support.ImageMeasureResultAreaValue")],H.ImageMeasureResultAreaValue);H.ImageMeasureResultAngleValue=function(p){function c(){var n=l.apply(this,arguments);n.unit=null;return n}x._inherits(c,
p);var l=x._createSuper(c);return x._createClass(c)}(O);A.__decorate([K.property({type:String,json:{read:u.angleUnitsJSONMap.read,write:u.angleUnitsJSONMap.write}})],H.ImageMeasureResultAngleValue.prototype,"unit",void 0);H.ImageMeasureResultAngleValue=A.__decorate([C.subclass("esri.rest.support.ImageMeasureResultAngleValue")],H.ImageMeasureResultAngleValue);H.BaseImageMeasureResult=function(p){function c(){var n=l.apply(this,arguments);n.name=null;n.sensorName=null;return n}x._inherits(c,p);var l=
x._createSuper(c);return x._createClass(c)}(G.JSONSupport);A.__decorate([K.property({type:String,json:{read:!0,write:!0}})],H.BaseImageMeasureResult.prototype,"name",void 0);A.__decorate([K.property({type:String,json:{read:!0,write:!0}})],H.BaseImageMeasureResult.prototype,"sensorName",void 0);H.BaseImageMeasureResult=A.__decorate([C.subclass("esri.rest.support.BaseImageMeasureResult")],H.BaseImageMeasureResult);Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(H,x,A,G,u,K,O,L){G=function(Q){function C(){var c=p.apply(this,arguments);c.distance=null;c.azimuthAngle=null;c.elevationAngle=null;return c}H._inherits(C,Q);var p=H._createSuper(C);return H._createClass(C)}(L.BaseImageMeasureResult);x.__decorate([A.property({type:L.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],G.prototype,"distance",void 0);x.__decorate([A.property({type:L.ImageMeasureResultAngleValue,json:{read:!0,write:!0}})],G.prototype,"azimuthAngle",void 0);x.__decorate([A.property({type:L.ImageMeasureResultAngleValue,
json:{read:!0,write:!0}})],G.prototype,"elevationAngle",void 0);return G=x.__decorate([O.subclass("esri.rest.support.ImageDistanceResult")],G)})},"esri/rest/support/ImageHeightResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),function(H,x,A,G,u,K,O,L){G=function(Q){function C(){var c=
p.apply(this,arguments);c.height=null;return c}H._inherits(C,Q);var p=H._createSuper(C);return H._createClass(C)}(L.BaseImageMeasureResult);x.__decorate([A.property({type:L.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],G.prototype,"height",void 0);return G=x.__decorate([O.subclass("esri.rest.support.ImageHeightResult")],G)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),
function(H,x,A,G,u,K,O,L,Q,C){A=function(p){function c(){var n=l.apply(this,arguments);n.catalogItemVisibilities=null;n.catalogItems=null;n.location=null;n.name=null;n.objectId=null;n.processedValues=null;n.properties=null;n.value=null;return n}H._inherits(c,p);var l=H._createSuper(c);return H._createClass(c)}(A.JSONSupport);x.__decorate([G.property({json:{write:!0}})],A.prototype,"catalogItemVisibilities",void 0);x.__decorate([G.property({type:C,json:{write:!0}})],A.prototype,"catalogItems",void 0);
x.__decorate([G.property({type:Q,json:{write:!0}})],A.prototype,"location",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"name",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"objectId",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"processedValues",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"properties",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"value",void 0);return A=x.__decorate([L.subclass("esri.rest.support.ImageIdentifyResult")],
A)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(H,x,A,G,u,K,O,L){A=function(Q){function C(){var c=p.apply(this,arguments);c.geometries=null;return c}H._inherits(C,Q);var p=H._createSuper(C);return H._createClass(C)}(A.JSONSupport);
x.__decorate([G.property({json:{write:!0}})],A.prototype,"geometries",void 0);return A=x.__decorate([L.subclass("esri.rest.support.ImagePixelLocationResult")],A)})},"esri/rest/support/ImagePointResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult ../../geometry/Point".split(" "),
function(H,x,A,G,u,K,O,L,Q,C){A=function(p){function c(){var n=l.apply(this,arguments);n.point=null;return n}H._inherits(c,p);var l=H._createSuper(c);return H._createClass(c)}(Q.BaseImageMeasureResult);x.__decorate([G.property({type:C,json:{name:"point.value",read:!0,write:!0}})],A.prototype,"point",void 0);return A=x.__decorate([L.subclass("esri.rest.support.ImagePointResult")],A)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(H,x,A,G,u,K,O,L,Q){A=function(C){function p(){var l=c.apply(this,arguments);l.samples=null;return l}H._inherits(p,C);var c=H._createSuper(p);return H._createClass(p)}(A.JSONSupport);x.__decorate([G.property({type:[Q],json:{write:!0}})],A.prototype,"samples",void 0);return A=x.__decorate([L.subclass("esri.rest.support.ImageSampleResult")],A)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(H,x,A,G,u,K,O,L,Q){A=function(C){function p(){var l=c.apply(this,arguments);l.attributes=null;l.location=null;l.locationId=null;l.rasterId=null;l.resolution=null;l.pixelValue=null;return l}H._inherits(p,C);var c=H._createSuper(p);return H._createClass(p)}(A.JSONSupport);x.__decorate([G.property({json:{write:!0}})],A.prototype,"attributes",void 0);x.__decorate([G.property({type:Q,json:{write:!0}})],A.prototype,"location",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"locationId",
void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"rasterId",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"resolution",void 0);x.__decorate([G.property({json:{write:!0}})],A.prototype,"pixelValue",void 0);return A=x.__decorate([L.subclass("esri.rest.support.ImageSample")],A)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),
function(H,x,A,G,u,K,O,L,Q){var C;const p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};A=C=function(c){function l(k){k=n.call(this,k);k.contentType=null;k.exifInfo=null;k.id=null;k.globalId=null;k.keywords=null;k.name=null;k.parentGlobalId=null;k.parentObjectId=null;k.size=null;
k.url=null;return k}H._inherits(l,c);var n=H._createSuper(l);l.prototype.clone=function(){return new C({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};H._createClass(l,[{key:"orientationInfo",get:function(){var {exifInfo:k}=this;k=Q.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:k});return p[k]||null}}]);
return l}(A.JSONSupport);x.__decorate([G.property({type:String})],A.prototype,"contentType",void 0);x.__decorate([G.property()],A.prototype,"exifInfo",void 0);x.__decorate([G.property({readOnly:!0})],A.prototype,"orientationInfo",null);x.__decorate([G.property({type:u.Integer})],A.prototype,"id",void 0);x.__decorate([G.property({type:String})],A.prototype,"globalId",void 0);x.__decorate([G.property({type:String})],A.prototype,"keywords",void 0);x.__decorate([G.property({type:String})],A.prototype,
"name",void 0);x.__decorate([G.property({json:{read:!1}})],A.prototype,"parentGlobalId",void 0);x.__decorate([G.property({json:{read:!1}})],A.prototype,"parentObjectId",void 0);x.__decorate([G.property({type:u.Integer})],A.prototype,"size",void 0);x.__decorate([G.property({json:{read:!1}})],A.prototype,"url",void 0);return A=C=x.__decorate([L.subclass("esri.layers.support.AttachmentInfo")],A)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(H){function x(A){const {tagName:G,
tags:u}=A;return u&&G?(A=u.find(K=>K.name===G))&&A.value||null:null}H.getExifValue=function(A){const {exifInfo:G,exifName:u,tagName:K}=A;return G&&u&&K?(A=G.find(O=>O.name===u))?x({tagName:K,tags:A.tags}):null:null};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),
function(H,x,A,G,u,K,O,L){async function Q(C,p,c){C=O.parseUrl(C);const {renderingRule:l,sourceJSON:n}=p||{};p=l?JSON.stringify(l.rasterFunctionDefinition||l):null;p=O.encode({...C.query,renderingRule:p,f:"json"});p=O.asValidOptions(p,c);C=C.path;c=n||await x(C,p).then(b=>b.data);var k=c.hasRasterAttributeTable?x(`${C}/rasterAttributeTable`,p):null,v=c.hasColormap?x(`${C}/colormap`,p):null,h=c.hasHistograms?x(`${C}/histograms`,p):null,m=10.3<=c.currentVersion?x(`${C}/keyProperties`,p):null;C=c.hasMultidimensions?
x(`${C}/multidimensionalInfo`,p):null;p=await Promise.allSettled([k,v,h,m,C]);C=null;if(c.minValues&&c.minValues.length===c.bandCount)for(C=[],k=0;k<c.minValues.length;k++)C.push({min:c.minValues[k],max:c.maxValues[k],avg:c.meanValues[k],stddev:c.stdvValues[k]});v=A.fromJSON(c.extent);k=Math.ceil(v.width/c.pixelSizeX-.1);v=Math.ceil(v.height/c.pixelSizeY-.1);h=u.fromJSON(c.spatialReference||c.extent.spatialReference);m="fulfilled"===p[0].status?p[0].value?L.fromJSON(p[0].value.data):null:null;const w=
"fulfilled"===p[1].status?p[1].value?.data.colormap:null,B="fulfilled"===p[2].status?p[2].value?.data.histograms:null,a="fulfilled"===p[3].status?p[3].value?.data??{}:{};p="fulfilled"===p[4].status?p[4].value?.data.multidimensionalInfo:null;p?.variables?.length&&p.variables.forEach(b=>{b.statistics?.length&&b.statistics.forEach(d=>{d.avg=d.mean;d.stddev=d.standardDeviation})});const {defaultVariable:f,serviceDataType:g}=c;f&&f!==a.DefaultVariable&&(a.DefaultVariable=f);g&&g.includes("esriImageServiceDataTypeVector")&&
!g.includes(a.DataType)&&(a.DataType=g.replace("esriImageServiceDataType",""));let e=c.noDataValue;c.noDataValues?.length&&c.noDataValues.some(b=>b!==e)&&(e=c.noDataValues);return new K({width:k,height:v,bandCount:c.bandCount,extent:A.fromJSON(c.extent),spatialReference:h,pixelSize:new G({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:h}),pixelType:c.pixelType.toLowerCase(),statistics:C,attributeTable:m,colormap:w,histograms:B,keyProperties:a,noDataValue:e,multidimensionalInfo:p})}H.fetchServiceRasterInfo=
function(C,p,c){return Q(C,{sourceJSON:p},c)};H.generateRasterInfo=function(C,p,c){return Q(C,{renderingRule:p},c)};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/getCatalogItemRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../layers/support/RasterInfo ../../layers/support/RasterStorageInfo ../utils".split(" "),function(H,x,A,G,u,K,O){H.getCatalogItemRasterInfo=async function(L,Q,C){L=O.parseUrl(L);var p=
O.encode({...L?.query,f:"json"});C=O.asValidOptions(p,C);L=`${L?.path}/${Q}/info`;Q=x(`${L}`,C);C=x(`${L}/keyProperties`,C);C=await Promise.allSettled([Q,C]);Q="fulfilled"===C[0].status?C[0].value.data:null;C="fulfilled"===C[1].status?C[1].value.data:null;L=null;Q.statistics?.length&&(L=Q.statistics.map(m=>({min:m[0],max:m[1],avg:m[2],stddev:m[3]})));p=A.fromJSON(Q.extent);const c=Math.ceil(p.width/Q.pixelSizeX-.1),l=Math.ceil(p.height/Q.pixelSizeY-.1),n=p.spatialReference,k=new G({x:Q.pixelSizeX,
y:Q.pixelSizeY,spatialReference:n}),v=Q.histograms?.length?Q.histograms:null,h=new K({origin:Q.origin,blockWidth:Q.blockWidth,blockHeight:Q.blockHeight,firstPyramidLevel:Q.firstPyramidLevel,maximumPyramidLevel:Q.maxPyramidLevel});return new u({width:c,height:l,bandCount:Q.bandCount,extent:p,spatialReference:n,pixelSize:k,pixelType:Q.pixelType.toLowerCase(),statistics:L,histograms:v,keyProperties:C,storageInfo:h})};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(H,x,A,G,u,K,O,L,Q,C){var p;A=p=function(c){function l(k){k=n.call(this,k);k.angleNames=null;k.point=null;k.spatialReference=null;k.rasterId=null;return k}H._inherits(l,c);var n=H._createSuper(l);l.prototype.clone=function(){return new p(u.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))};return H._createClass(l)}(G.JSONSupport);x.__decorate([K.property({type:[String],json:{name:"angleName",write:!0}})],A.prototype,"angleNames",
void 0);x.__decorate([K.property({type:Q,json:{write:!0}})],A.prototype,"point",void 0);x.__decorate([K.property({type:C,json:{write:!0}})],A.prototype,"spatialReference",void 0);x.__decorate([K.property({type:O.Integer,json:{write:!0}})],A.prototype,"rasterId",void 0);return A=p=x.__decorate([L.subclass("esri.rest.support.ImageAngleParameters")],A)})},"esri/rest/support/ImageAreaParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p){var c;O=c=function(l){function n(){var v=k.apply(this,arguments);v.type="area-perimeter";v.geometry=null;v.is3D=!1;v.linearUnit="meters";v.areaUnit="square-meters";return v}H._inherits(n,l);var k=H._createSuper(n);l=n.prototype;l.writeGeometry=function(v,h,m){null!=v&&(h.geometryType=C.getJsonType(v),h[m]=v.toJSON())};l.clone=function(){return new c(G.clone({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,
renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))};H._createClass(n,[{key:"measureOperation",get:function(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}}]);return n}(p.BaseImageMeasureParameters);x.__decorate([K.property({types:A.geometryTypes,json:{name:"fromGeometry",read:!0,write:!0}})],O.prototype,"geometry",void 0);x.__decorate([Q.writer("geometry")],O.prototype,"writeGeometry",null);x.__decorate([K.property({type:p.measureOperationJSONMap.apiValues,
json:{write:p.measureOperationJSONMap.write}})],O.prototype,"measureOperation",null);x.__decorate([K.property({json:{read:!0}})],O.prototype,"is3D",void 0);x.__decorate([K.property({type:String,json:{read:u.lengthUnitsJSONMap.read,write:u.lengthUnitsJSONMap.write}})],O.prototype,"linearUnit",void 0);x.__decorate([K.property({type:String,json:{read:u.areaUnitsJSONMap.read,write:u.areaUnitsJSONMap.write}})],O.prototype,"areaUnit",void 0);return O=c=x.__decorate([L.subclass("esri.rest.support.ImageAreaParameters")],
O)})},"esri/rest/support/BaseImageMeasureParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),function(H,x,A,G,u,K,O,L,Q,C,p,c,
l,n){G=new u.JSONMap({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",
esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});H.BaseImageMeasureParameters=function(k){function v(){var m=h.apply(this,arguments);m.type=null;m.measureOperation=null;m.mosaicRule=null;m.renderingRule=null;m.pixelSize=null;m.raster=void 0;return m}x._inherits(v,k);var h=x._createSuper(v);return x._createClass(v)}(K.JSONSupport);A.__decorate([O.property()],H.BaseImageMeasureParameters.prototype,"type",void 0);A.__decorate([O.property({type:G.apiValues,json:{read:G.read,write:G.write}})],
H.BaseImageMeasureParameters.prototype,"measureOperation",void 0);A.__decorate([O.property({type:c,json:{write:!0}})],H.BaseImageMeasureParameters.prototype,"mosaicRule",void 0);A.__decorate([O.property({type:l,json:{write:!0}})],H.BaseImageMeasureParameters.prototype,"renderingRule",void 0);A.__decorate([O.property({type:n,json:{write:!0}})],H.BaseImageMeasureParameters.prototype,"pixelSize",void 0);A.__decorate([O.property({json:{write:!0}})],H.BaseImageMeasureParameters.prototype,"raster",void 0);
H.BaseImageMeasureParameters=A.__decorate([p.subclass("esri.rest.support.BaseImageMeasureParameters")],H.BaseImageMeasureParameters);H.measureOperationJSONMap=G;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c){var l;A=l=function(n){function k(){var h=v.apply(this,arguments);h.type="distance-angle";h.fromGeometry=null;h.toGeometry=null;h.is3D=!1;h.linearUnit="meters";h.angularUnit="degrees";return h}H._inherits(k,n);var v=H._createSuper(k);n=k.prototype;n.writeFromGeometry=function(h,m,w){null!=h&&(m.geometryType=C.getJsonType(h),m[w]=h.toJSON())};n.clone=function(){return new l(G.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,
angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))};H._createClass(k,[{key:"measureOperation",get:function(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}}]);return k}(p.BaseImageMeasureParameters);x.__decorate([K.property({type:c,json:{read:!0,write:!0}})],A.prototype,"fromGeometry",void 0);x.__decorate([Q.writer("fromGeometry")],A.prototype,"writeFromGeometry",null);x.__decorate([K.property({type:c,
json:{read:!0,write:!0}})],A.prototype,"toGeometry",void 0);x.__decorate([K.property({type:p.measureOperationJSONMap.apiValues,json:{write:p.measureOperationJSONMap.write}})],A.prototype,"measureOperation",null);x.__decorate([K.property({json:{read:!0}})],A.prototype,"is3D",void 0);x.__decorate([K.property({type:String,json:{read:u.lengthUnitsJSONMap.read,write:u.lengthUnitsJSONMap.write}})],A.prototype,"linearUnit",void 0);x.__decorate([K.property({type:String,json:{read:u.angleUnitsJSONMap.read,
write:u.angleUnitsJSONMap.write}})],A.prototype,"angularUnit",void 0);return A=l=x.__decorate([L.subclass("esri.rest.support.ImageDistanceParameters")],A)})},"esri/rest/support/ImageHeightParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c){var l;A=l=function(n){function k(){var h=v.apply(this,arguments);h.type="height";h.fromGeometry=null;h.toGeometry=null;h.operationType="base-and-top";h.linearUnit="meters";return h}H._inherits(k,n);var v=H._createSuper(k);n=k.prototype;n.writeFromGeometry=function(h,m,w){null!=h&&(m.geometryType=C.getJsonType(h),m[w]=h.toJSON())};n.clone=function(){return new l(G.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,
mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))};H._createClass(k,[{key:"measureOperation",get:function(){return this.operationType}}]);return k}(p.BaseImageMeasureParameters);x.__decorate([K.property({type:c,json:{read:!0}})],A.prototype,"fromGeometry",void 0);x.__decorate([Q.writer("fromGeometry")],A.prototype,"writeFromGeometry",null);x.__decorate([K.property({type:c,json:{read:!0,write:!0}})],A.prototype,"toGeometry",void 0);x.__decorate([K.property({type:p.measureOperationJSONMap.apiValues,
json:{write:p.measureOperationJSONMap.write}})],A.prototype,"measureOperation",null);x.__decorate([K.property({json:{read:!0}})],A.prototype,"operationType",void 0);x.__decorate([K.property({type:String,json:{read:u.lengthUnitsJSONMap.read,write:u.lengthUnitsJSONMap.write}})],A.prototype,"linearUnit",void 0);return A=l=x.__decorate([L.subclass("esri.rest.support.ImageHeightParameters")],A)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n){var k;u=k=function(v){function h(){var w=m.apply(this,arguments);w.geometry=null;w.mosaicRule=null;w.renderingRule=null;w.pixelSize=null;w.raster=void 0;w.timeExtent=null;return w}H._inherits(h,v);var m=H._createSuper(h);v=h.prototype;v.writeGeometry=function(w,B,a){null!=w&&(B.geometryType=p.getJsonType(w),B[a]=w.toJSON())};v.clone=function(){return new k(K.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return H._createClass(h)}(u.JSONSupport);x.__decorate([O.property({types:A.geometryTypes,json:{read:p.fromJSON}})],u.prototype,"geometry",void 0);x.__decorate([C.writer("geometry")],u.prototype,"writeGeometry",null);x.__decorate([O.property({type:c,json:{write:!0}})],u.prototype,"mosaicRule",void 0);x.__decorate([O.property({type:l,json:{write:!0}})],u.prototype,"renderingRule",void 0);x.__decorate([O.property({type:n,json:{write:!0}})],u.prototype,
"pixelSize",void 0);x.__decorate([O.property({json:{write:!0}})],u.prototype,"raster",void 0);x.__decorate([O.property({type:G,json:{read:{source:"time"},write:{target:"time"}}})],u.prototype,"timeExtent",void 0);return u=k=x.__decorate([Q.subclass("esri.rest.support.ImageHistogramParameters")],u)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n){var k;G=k=function(v){function h(){var w=m.apply(this,arguments);w.geometry=null;w.renderingRules=null;w.pixelSize=null;w.returnGeometry=!0;w.returnCatalogItems=!0;w.returnPixelValues=!0;w.maxItemCount=null;w.timeExtent=null;w.raster=void 0;w.viewId=void 0;w.processAsMultidimensional=!1;return w}H._inherits(h,v);var m=H._createSuper(h);v=h.prototype;v.writeGeometry=function(w,B,a){null!=w&&(B.geometryType=c.getJsonType(w),B[a]=JSON.stringify(w.toJSON()))};v.writeMosaicRule=
function(w,B,a){null!=w&&(B[a]=JSON.stringify(w.toJSON()))};v.writeRenderingRule=function(w,B,a){null!=w&&(B[a]=JSON.stringify(w.toJSON()));w.rasterFunctionDefinition&&(B[a]=JSON.stringify(w.rasterFunctionDefinition))};v.writeRenderingRules=function(w,B,a){null!=w&&(B[a]=JSON.stringify(w.map(f=>f.rasterFunctionDefinition||f.toJSON())))};v.writePixelSize=function(w,B,a){null!=w&&(B[a]=JSON.stringify(w))};v.writeTimeExtent=function(w,B,a){if(null!=w){const f=K.isSome(w.start)?w.start.getTime():null;
w=K.isSome(w.end)?w.end.getTime():null;B[a]=null!=f?null!=w?`${f},${w}`:`${f}`:null}};v.clone=function(){return new k(u.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};
H._createClass(h,[{key:"mosaicRule",set:function(w){w&&w.mosaicMethod&&(w=l.fromJSON({...w.toJSON(),mosaicMethod:w.mosaicMethod,mosaicOperation:w.mosaicOperation}));this._set("mosaicRule",w)}},{key:"renderingRule",set:function(w){w&&w.rasterFunction&&(w=n.fromJSON({...w.toJSON(),rasterFunction:w.rasterFunction,rasterFunctionArguments:w.rasterFunctionArguments}));this._set("renderingRule",w)}}]);return h}(G.JSONSupport);x.__decorate([O.property({json:{write:!0}})],G.prototype,"geometry",void 0);x.__decorate([C.writer("geometry")],
G.prototype,"writeGeometry",null);x.__decorate([O.property({type:l,json:{write:!0}})],G.prototype,"mosaicRule",null);x.__decorate([C.writer("mosaicRule")],G.prototype,"writeMosaicRule",null);x.__decorate([O.property({type:n,json:{write:!0}})],G.prototype,"renderingRule",null);x.__decorate([C.writer("renderingRule")],G.prototype,"writeRenderingRule",null);x.__decorate([O.property({type:[n],json:{write:!0}})],G.prototype,"renderingRules",void 0);x.__decorate([C.writer("renderingRules")],G.prototype,
"writeRenderingRules",null);x.__decorate([O.property({type:p,json:{write:!0}})],G.prototype,"pixelSize",void 0);x.__decorate([C.writer("pixelSize")],G.prototype,"writePixelSize",null);x.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"returnGeometry",void 0);x.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"returnCatalogItems",void 0);x.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"returnPixelValues",void 0);x.__decorate([O.property({type:Number,
json:{write:!0}})],G.prototype,"maxItemCount",void 0);x.__decorate([O.property({type:A,json:{write:{target:"time"}}})],G.prototype,"timeExtent",void 0);x.__decorate([C.writer("timeExtent")],G.prototype,"writeTimeExtent",null);x.__decorate([O.property({json:{write:!0}})],G.prototype,"raster",void 0);x.__decorate([O.property({json:{write:!0}})],G.prototype,"viewId",void 0);x.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"processAsMultidimensional",void 0);return G=k=x.__decorate([Q.subclass("esri.rest.support.ImageIdentifyParameters")],
G)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),function(H,x,A,G,u,K,O,L,Q,C,p){var c;A=c=function(l){function n(){var v=k.apply(this,
arguments);v.geometries=null;v.rasterId=null;return v}H._inherits(n,l);var k=H._createSuper(n);l=n.prototype;l.writeGeometry=function(v,h,m){h.geometries={geometryType:"esriGeometryPoint",geometries:v.map(w=>w.toJSON())}};l.clone=function(){return new c({geometries:this.geometries?.map(v=>v.clone())??[],rasterId:this.rasterId})};return H._createClass(n)}(G.JSONSupport);x.__decorate([u.property({type:[p],json:{write:!0}})],A.prototype,"geometries",void 0);x.__decorate([C.writer("geometries")],A.prototype,
"writeGeometry",null);x.__decorate([u.property({type:K.Integer,json:{write:!0}})],A.prototype,"rasterId",void 0);return A=c=x.__decorate([Q.subclass("esri.rest.support.ImagePixelLocationParameters")],A)})},"esri/rest/support/ImagePointParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(H,x,A,G,u,K,O,L,Q,C){var p;K=p=function(c){function l(){var k=n.apply(this,arguments);k.type="point";k.geometry=null;k.is3D=!1;return k}H._inherits(l,c);var n=H._createSuper(l);c=l.prototype;c.writeGeometry=function(k,v,h){null!=k&&(v.geometryType=Q.getJsonType(k),v[h]=k.toJSON())};c.clone=function(){return new p(G.clone({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))};H._createClass(l,[{key:"measureOperation",
get:function(){const {is3D:k,geometry:v}=this;return"point"===v.type?k?"point-3D":"point":k?"centroid-3D":"centroid"}}]);return l}(C.BaseImageMeasureParameters);x.__decorate([u.property({types:A.geometryTypes,json:{name:"fromGeometry",read:Q.fromJSON}})],K.prototype,"geometry",void 0);x.__decorate([L.writer("geometry")],K.prototype,"writeGeometry",null);x.__decorate([u.property({type:C.measureOperationJSONMap.apiValues,json:{read:C.measureOperationJSONMap.read,write:C.measureOperationJSONMap.write}})],
K.prototype,"measureOperation",null);x.__decorate([u.property({json:{read:!0}})],K.prototype,"is3D",void 0);return K=p=x.__decorate([O.subclass("esri.rest.support.ImagePointParameters")],K)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Multipoint ../../geometry/Point".split(" "),
function(H,x,A,G,u,K,O,L,Q,C,p,c,l,n,k){var v;u=v=function(h){function m(){var B=w.apply(this,arguments);B.geometry=null;B.interpolation="nearest";B.mosaicRule=null;B.outFields=null;B.pixelSize=null;B.returnFirstValueOnly=!0;B.sampleDistance=null;B.sampleCount=null;B.sliceId=null;B.timeExtent=null;return B}H._inherits(m,h);var w=H._createSuper(m);h=m.prototype;h.writeGeometry=function(B,a,f){null!=B&&(a.geometryType=p.getJsonType(B),a[f]=B.toJSON())};h.clone=function(){return new v(K.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};H._createClass(m,[{key:"locations",set:function(B){if(B?.length){const a=new n({spatialReference:B[0].spatialReference});a.points=B.map(f=>[f.x,f.y]);this._set("locations",B);this.geometry=
a}}}]);return m}(u.JSONSupport);x.__decorate([O.property({types:A.geometryTypes,json:{read:p.fromJSON}})],u.prototype,"geometry",void 0);x.__decorate([C.writer("geometry")],u.prototype,"writeGeometry",null);x.__decorate([O.property()],u.prototype,"locations",null);x.__decorate([O.property({type:String,json:{type:l.interpolationKebab.jsonValues,read:l.interpolationKebab.read,write:l.interpolationKebab.write}})],u.prototype,"interpolation",void 0);x.__decorate([O.property({type:c,json:{write:!0}})],
u.prototype,"mosaicRule",void 0);x.__decorate([O.property({type:[String],json:{write:!0}})],u.prototype,"outFields",void 0);x.__decorate([O.property({type:k,json:{write:!0}})],u.prototype,"pixelSize",void 0);x.__decorate([O.property({type:String,json:{write:!0}})],u.prototype,"raster",void 0);x.__decorate([O.property({type:Boolean,json:{write:!0}})],u.prototype,"returnFirstValueOnly",void 0);x.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"sampleDistance",void 0);x.__decorate([O.property({type:Number,
json:{write:!0}})],u.prototype,"sampleCount",void 0);x.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"sliceId",void 0);x.__decorate([O.property({type:G,json:{read:{source:"time"},write:{target:"time"}}})],u.prototype,"timeExtent",void 0);return u=v=x.__decorate([Q.subclass("esri.rest.support.ImageSampleParameters")],u)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(H,x,A,G,u,K,O,L,Q,C){function p(a,f){const g=n(f.data,f.width,f.height,a.smoothing);return a.interpolate?(e,b)=>{const d=Math.floor(e),t=Math.floor(b);if(0>d||d>=f.width||0>t||t>=f.height)return[0,0];e-=d;b-=t;const q=d<f.width-1?d+1:d,z=t<f.height-1?t+1:t;return[(g[2*(t*f.width+d)]*(1-b)+g[2*(z*f.width+d)]*b)*(1-e)+(g[2*(t*f.width+q)]*(1-b)+g[2*(z*f.width+q)]*b)*e,(g[2*(t*f.width+d)+1]*(1-b)+g[2*(z*f.width+d)+1]*b)*(1-e)+(g[2*(t*f.width+q)+1]*(1-b)+g[2*(z*f.width+q)+1]*b)*e]}:(e,b)=>{e=
Math.round(e);b=Math.round(b);return 0>e||e>=f.width||0>b||b>=f.height?[0,0]:[g[2*(b*f.width+e)],g[2*(b*f.width+e)+1]]}}function c(a,f,g,e,b,d,t,q,z){const E=[];let F=0,[M,I]=f(g,e);M*=a.velocityScale;I*=a.velocityScale;E.push({x:g,y:e,t:F,speed:Math.sqrt(M*M+I*I)});for(let y=0;y<a.verticesPerLine;y++){let [N,P]=f(g,e);N*=a.velocityScale;P*=a.velocityScale;const R=Math.sqrt(N*N+P*P);if(R<a.minSpeedThreshold)break;const X=N/R,U=P/R;g+=X*a.segmentLength;e+=U*a.segmentLength;F+=a.segmentLength/R;if(Math.acos(X*
J+U*r)>a.maxTurnAngle)break;if(a.collisions){var J=Math.round(g*z);var r=Math.round(e*z);if(0>J||J>t-1||0>r||r>q-1)break;const W=d[r*t+J];if(-1!==W&&W!==b)break;d[r*t+J]=b}E.push({x:g,y:e,t:F,speed:R});J=X;r=U}return E}function l(a,f,g,e){const b=[],d=new L,t=1/Math.max(a.lineCollisionWidth,1),q=Math.round(g*t),z=Math.round(e*t),E=new Int32Array(q*z);for(var F=0;F<E.length;F++)E[F]=-1;F=[];for(let M=0;M<e;M+=a.lineSpacing)for(let I=0;I<g;I+=a.lineSpacing)F.push({x:I,y:M,sort:d.getFloat()});F.sort((M,
I)=>M.sort-I.sort);for(const {x:M,y:I}of F)d.getFloat()<a.density&&(g=c(a,f,M,I,b.length,E,q,z,t),2>g.length||b.push(g));return b}function n(a,f,g,e){if(0===e)return a;const b=Math.round(3*e),d=Array(2*b+1);var t=0;for(var q=-b;q<=b;q++){var z=Math.exp(-q*q/(e*e));d[q+b]=z;t+=z}for(e=-b;e<=b;e++)d[e+b]/=t;t=new Float32Array(a.length);for(e=0;e<g;e++)for(q=0;q<f;q++){var E=z=0;for(var F=-b;F<=b;F++)if(!(0>q+F||q+F>=f)){var M=d[F+b];z+=M*a[2*(e*f+(q+F))];E+=M*a[2*(e*f+(q+F))+1]}t[2*(e*f+q)]=z;t[2*(e*
f+q)+1]=E}a=new Float32Array(a.length);for(e=0;e<f;e++)for(q=0;q<g;q++){E=z=0;for(F=-b;F<=b;F++)0>q+F||q+F>=g||(M=d[F+b],z+=M*t[2*((q+F)*f+e)],E+=M*t[2*((q+F)*f+e)+1]);a[2*(q*f+e)]=z;a[2*(q*f+e)+1]=E}return a}function k(a,f){const g=new L;var e=a.reduce((q,z)=>q+z.length,0);e=new Float32Array(4*e);const b=Array(a.length);let d=0,t=0;for(const q of a){a=d;for(const z of q)e[4*d]=z.x,e[4*d+1]=z.y,e[4*d+2]=z.t,e[4*d+3]=z.speed,d++;b[t++]={startVertex:a,numberOfVertices:q.length,totalTime:q[q.length-
1].t,timeSeed:f?g.getFloat():0}}return{lineVertices:e,lineDescriptors:b}}function v(a,f){function g(J,r,y,N,P,R,X,U){const W=9*z;let Z=0;q[W+Z++]=J;q[W+Z++]=r;q[W+Z++]=1;q[W+Z++]=y;q[W+Z++]=R;q[W+Z++]=X;q[W+Z++]=N/2;q[W+Z++]=P/2;q[W+Z++]=U;z++;q[W+Z++]=J;q[W+Z++]=r;q[W+Z++]=-1;q[W+Z++]=y;q[W+Z++]=R;q[W+Z++]=X;q[W+Z++]=-N/2;q[W+Z++]=-P/2;q[W+Z++]=U;z++}const {lineVertices:e,lineDescriptors:b}=a;var d=a=0;for(var t of b)a+=2*t.numberOfVertices,d+=6*(t.numberOfVertices-1);const q=new Float32Array(9*
a);t=new Uint32Array(d);let z=0;a=0;for(const J of b){const {totalTime:r,timeSeed:y}=J;let N=d=null,P=null;var E=null,F=null,M=null;for(let R=0;R<J.numberOfVertices;R++){E=e[4*(J.startVertex+R)];const X=e[4*(J.startVertex+R)+1],U=e[4*(J.startVertex+R)+2],W=e[4*(J.startVertex+R)+3];let Z=null,da=null;var I=null;let ea=null;0<R&&(Z=E-d,da=X-N,I=Math.sqrt(Z*Z+da*da),Z/=I,da/=I,1<R?(F=Z+F,M=da+M,I=Math.sqrt(F*F+M*M),F/=I,M/=I,I=Math.min(1/(F*Z+M*da),f),F*=I,M*=I,I=-M,ea=F):(I=-da,ea=Z),null!==I&&null!==
ea&&(g(d,N,P,I,ea,r,y,W),t[a++]=z-2,t[a++]=z,t[a++]=z-1,t[a++]=z,t[a++]=z+1,t[a++]=z-1));d=E;N=X;P=U;F=Z;M=da;E=W}g(d,N,P,-M,F,r,y,E)}return{vertexData:q,indexData:t}}function h(a){function f(T,V){var Y=U+Z,ba=W+da,fa=Math.sqrt(Y*Y+ba*ba);Y/=fa;ba/=fa;var ja=U*Y+W*ba,ia=Z+ea,ua=da+aa;fa=Math.sqrt(ia*ia+ua*ua);ia/=fa;ua/=fa;var ma=Z*ia+da*ua;fa=I;var ta=J,wa=r,Ba=y;ba=-(ba/ja);Y/=ja;ja=N;var ya=P,Aa=R,sa=X;ua=-(ua/ma);ia/=ma;ma=16*F;let va=0;for(const Ia of[1,2])for(const Ga of[1,2,3,4])z[ma+va++]=
fa,z[ma+va++]=ta,z[ma+va++]=wa,z[ma+va++]=Ba,z[ma+va++]=ja,z[ma+va++]=ya,z[ma+va++]=Aa,z[ma+va++]=sa,z[ma+va++]=Ia,z[ma+va++]=Ga,z[ma+va++]=T,z[ma+va++]=V,z[ma+va++]=ba/2,z[ma+va++]=Y/2,z[ma+va++]=ua/2,z[ma+va++]=ia/2,F++;E[M++]=F-8;E[M++]=F-7;E[M++]=F-6;E[M++]=F-7;E[M++]=F-5;E[M++]=F-6;E[M++]=F-4;E[M++]=F-3;E[M++]=F-2;E[M++]=F-3;E[M++]=F-1;E[M++]=F-2}function g(T,V,Y,ba,fa,ja){U=Z;W=da;Z=ea;da=aa;null==U&&null==W&&(U=Z,W=da);if(null!=N&&null!=P){ea=T-N;aa=V-P;const ia=Math.sqrt(ea*ea+aa*aa);ea/=
ia;aa/=ia}null!=U&&null!=W&&f(fa,ja);I=N;J=P;r=R;y=X;N=T;P=V;R=Y;X=ba}function e(T,V){U=Z;W=da;Z=ea;da=aa;null==U&&null==W&&(U=Z,W=da);null!=U&&null!=W&&f(T,V)}const {lineVertices:b,lineDescriptors:d}=a;let t=a=0;for(var q of d){const T=q.numberOfVertices-1;a+=8*T;t+=12*T}const z=new Float32Array(16*a),E=new Uint32Array(t);let F=0,M=0,I,J,r,y,N,P,R,X,U,W,Z,da,ea,aa;for(const T of d){aa=ea=da=Z=W=U=X=R=P=N=y=r=J=I=null;const {totalTime:V,timeSeed:Y}=T;for(q=0;q<T.numberOfVertices;q++)g(b[4*(T.startVertex+
q)],b[4*(T.startVertex+q)+1],b[4*(T.startVertex+q)+2],b[4*(T.startVertex+q)+3],V,Y);e(V,Y)}return{vertexData:z,indexData:E}}function m(a,f){const g=f.pixels,{width:e,height:b}=f,d=new Float32Array(e*b*2),t=f.mask||new Uint8Array(e*b*2);f.mask||t.fill(255);if("vector-uv"===a)for(a=0;a<e*b;a++)d[2*a]=g[0][a],d[2*a+1]=-g[1][a];else if("vector-magdir"===a)for(a=0;a<e*b;a++){f=g[0][a];const q=u.deg2rad(g[1][a]),z=Math.sin(q-Math.PI/2);d[2*a]=Math.cos(q-Math.PI/2)*f;d[2*a+1]=z*f}return{data:d,mask:t,width:e,
height:b}}async function w(a,f,g,e,b,d){const t={requestProjectedLocalDirections:!0,signal:d};K.isSome(b)&&(t.timeExtent=b);if("imagery"===a.type)return await a.load({signal:d}),b=a.rasterInfo.dataType,a=await a.fetchImage(f,g,e,t),!a||K.isNone(a.pixelData)||K.isNone(a.pixelData.pixelBlock)?{data:new Float32Array(g*e*2),mask:new Uint8Array(g*e),width:g,height:e}:m(b,a.pixelData.pixelBlock);await a.load({signal:d});b=a.rasterInfo.dataType;a=await a.fetchPixels(f,g,e,t);return!a||K.isNone(a.pixelBlock)?
{data:new Float32Array(g*e*2),mask:new Uint8Array(g*e),width:g,height:e}:m(b,a.pixelBlock)}const B=G.getLogger("esri.views.2d.engine.flow.dataUtils");H.createAnimatedLinesData=k;H.createFlowMesh=async function(a,f,g,e){const b=performance.now();var d=p(f,g);const t=performance.now();g=l(f,d,g.width,g.height);f=performance.now();d=k(g,!0);g=performance.now();a="Streamlines"===a?v(d,10):h(d);d=performance.now();A("esri-2d-profiler")&&(B.info("I.1","_createFlowFieldFromData (ms)",Math.round(t-b)),B.info("I.2",
"_getStreamlines (ms)",Math.round(f-t)),B.info("I.3","createAnimatedLinesData (ms)",Math.round(g-f)),B.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(d-g)),B.info("I.5","createFlowMesh (ms)",Math.round(d-b)),B.info("I.6","Mesh size (bytes)",a.vertexData.buffer.byteLength+a.indexData.buffer.byteLength));await Promise.resolve();O.throwIfAborted(e);return a};H.createParticlesMesh=h;H.createStreamlinesMesh=v;H.loadImagery=async function(a,f,g,e,b,d){const t=performance.now();var q=Q.getInfo(f.spatialReference);
if(!q)return g=await w(a,f,g,e,b,d),A("esri-2d-profiler")&&B.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-t)),A("esri-2d-profiler")&&B.info("I.9","Number of parts",1),g;const [z,E]=q.valid,F=Math.ceil(f.width/(E-z)),M=f.width/F,I=Math.round(g/F);let J=f.xmin;const r=[];q=performance.now();for(let y=0;y<F;y++){const N=new C({xmin:J,xmax:J+M,ymin:f.ymin,ymax:f.ymax,spatialReference:f.spatialReference});r.push(w(a,N,I,e,b,d));J+=M}a=await Promise.all(r);A("esri-2d-profiler")&&
B.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-q));A("esri-2d-profiler")&&B.info("I.9","Number of parts",a.length);e={data:new Float32Array(g*e*2),mask:new Uint8Array(g*e),width:g,height:e};f=0;for(const y of a){for(a=0;a<y.height;a++)for(b=0;b<y.width;b++)f+b>=g||(e.data[2*(a*g+f+b)]=y.data[2*(a*y.width+b)],e.data[2*(a*g+f+b)+1]=y.data[2*(a*y.width+b)+1],e.mask[a*g+f+b]=y.mask[a*y.width+b]);f+=y.width}A("esri-2d-profiler")&&B.info("I.10","loadImagery, general exit (ms)",
Math.round(performance.now()-t));return e};Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils".split(" "),function(H,
x,A,G,u,K,O,L,Q,C,p,c,l,n,k,v,h,m,w,B,a,f,g,e,b){u=function(d){function t(...z){z=q.call(this,...z);z.legendEnabled=!0;z.isReference=null;z.operationalLayerType="ArcGISImageServiceLayer";z.popupEnabled=!0;z.popupTemplate=null;z.type="imagery";return z}H._inherits(t,d);var q=H._createSuper(t);d=t.prototype;d.normalizeCtorArgs=function(z,E){return"string"===typeof z?{url:z,...E}:z};d.load=function(z){const E=G.isSome(z)?z.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
z).catch(K.throwIfAbortError).then(()=>this._fetchService(E)));return Promise.resolve(this)};d.writeOperationalLayerType=function(z,E,F){E[F]="vector-field"===this.renderer?.type?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};d.createPopupTemplate=function(z){const E=this.rasterFields,F=this.title,M=new Set;var I=!1;let J=!1;this.capabilities&&(I=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length,J="esriImageServiceDataTypeVector-UV"===this.serviceDataType||
"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);const r=new Set;I&&r.add("raster.itempixelvalue");for(const y of E)I=y.name.toLowerCase(),r.has(I)||I.includes("raster.servicepixelvalue.")||M.add(y.name);J&&M.add("raster.magnitude").add("raster.direction");return b.createPopupTemplate({fields:E,title:F},{...z,visibleFieldNames:M})};d.queryFeatures=function(z,E){return this.queryRasters(z,E).then(F=>{if(F?.features)for(const M of F.features)M.layer=M.sourceLayer=this;return F})};d.queryFeatureCount=
function(z,E){return this.queryRasterCount(z,E)};d.redraw=function(){this.emit("redraw")};d.serviceSupportsSpatialReference=function(z){return e.serviceSupportsSpatialReference(this,z)};H._createClass(t,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return t}(v.BlendLayer(f.TemporalLayer(a.ScaleRangeLayer(m.OperationalLayer(w.PortalLayer(n.ArcGISImageService(B.RefreshableLayer(h.CustomParametersMixin(k.ArcGISService(u.MultiOriginJSONMixin(l)))))))))));x.__decorate([O.property(g.legendEnabled)],
u.prototype,"legendEnabled",void 0);x.__decorate([O.property({type:["show","hide"]})],u.prototype,"listMode",void 0);x.__decorate([O.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],u.prototype,"isReference",void 0);x.__decorate([O.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],u.prototype,"operationalLayerType",
void 0);x.__decorate([c.writer("web-map","operationalLayerType")],u.prototype,"writeOperationalLayerType",null);x.__decorate([O.property(g.popupEnabled)],u.prototype,"popupEnabled",void 0);x.__decorate([O.property({type:A,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],u.prototype,"popupTemplate",void 0);x.__decorate([O.property({readOnly:!0})],u.prototype,"defaultPopupTemplate",null);x.__decorate([O.property({readOnly:!0,json:{read:!1}})],u.prototype,"type",void 0);return u=x.__decorate([p.subclass("esri.layers.ImageryLayer")],
u)});