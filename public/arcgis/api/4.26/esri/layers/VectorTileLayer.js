// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/serviceTileInfoProperty ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(b,a,x,r,q,h,u,
e,l,d,k,c,f){b.ArcGISCachedService=p=>{p=function(n){function y(){var F=D.apply(this,arguments);F.copyright=null;F.minScale=0;F.maxScale=0;F.spatialReference=null;F.tileInfo=null;F.tilemapCache=null;return F}a._inherits(y,n);var D=a._createSuper(y);n=y.prototype;n.readMinScale=function(F,C){return null!=C.minLOD&&null!=C.maxLOD?F:0};n.readMaxScale=function(F,C){return null!=C.minLOD&&null!=C.maxLOD?F:0};n.readTilemapCache=function(F,C){return C.capabilities&&C.capabilities.includes("Tilemap")?new c.TilemapCache({layer:this}):
null};n.destroy=function(){this.tilemapCache?.destroy()};a._createClass(y,[{key:"supportsBlankTile",get:function(){return 10.2<=this.version}}]);return y}(p);x.__decorate([q.property({json:{read:{source:"copyrightText"}}})],p.prototype,"copyright",void 0);x.__decorate([q.property()],p.prototype,"minScale",void 0);x.__decorate([l.reader("service","minScale")],p.prototype,"readMinScale",null);x.__decorate([q.property()],p.prototype,"maxScale",void 0);x.__decorate([l.reader("service","maxScale")],p.prototype,
"readMaxScale",null);x.__decorate([q.property({type:f})],p.prototype,"spatialReference",void 0);x.__decorate([q.property({readOnly:!0})],p.prototype,"supportsBlankTile",null);x.__decorate([q.property(k.serviceTileInfoProperty)],p.prototype,"tileInfo",void 0);x.__decorate([q.property()],p.prototype,"tilemapCache",void 0);x.__decorate([l.reader("service","tilemapCache",["capabilities"])],p.prototype,"readTilemapCache",null);x.__decorate([q.property()],p.prototype,"version",void 0);return p=x.__decorate([d.subclass("esri.layers.mixins.ArcGISCachedService")],
p)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(b,a){function x(q,h,u,e){if(!q)return null;const {minScale:l,maxScale:d,minLOD:k,maxLOD:c}=h;if(null!=k&&null!=c)return e&&e.ignoreMinMaxLOD?a.fromJSON(q):a.fromJSON({...q,lods:q.lods.filter(({level:f})=>null!=f&&f>=k&&f<=c)});if(0!==l&&0!==d){const f=l?Math.round(1E4*l)/1E4:Infinity,p=d?Math.round(1E4*d)/1E4:-Infinity;return a.fromJSON({...q,
lods:q.lods.filter(n=>{n=Math.round(1E4*n.scale)/1E4;return n<=f&&n>=p})})}return a.fromJSON(q)}const r={type:a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:x}}}}};b.readServiceTileInfo=x;b.serviceTileInfoProperty=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(b,a,x,r,q,h,u,e,l,d,k,c,f,p,n,y,D,F,C,J){var L;x=new x.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});r=L=function(z){function G(A){A=w.call(this,A);A.dpi=96;A.format=null;A.origin=null;A.minScale=0;A.maxScale=0;A.size=null;A.spatialReference=null;return A}b._inherits(G,z);var w=b._createSuper(G);G.create=
function(A={}){const {resolutionFactor:H=1,scales:E,size:M=256,spatialReference:P=n.WebMercator,numLODs:O=24}=A;if(!D.isValid(P)){A=[];if(E)for(var Q=0;Q<E.length;Q++){var S=E[Q];A.push(new C({level:Q,scale:S,resolution:S}))}else for(Q=5E-4,S=O-1;0<=S;S--)A.unshift(new C({level:S,scale:Q,resolution:Q})),Q*=2;return new L({dpi:96,lods:A,origin:new p(0,0,P),size:[M,M],spatialReference:P})}Q=D.getInfo(P);A=A.origin?new p({x:A.origin.x,y:A.origin.y,spatialReference:P}):Q?new p({x:Q.origin[0],y:Q.origin[1],
spatialReference:P}):new p({x:0,y:0,spatialReference:P});Q=1/(39.37*h.getMetersPerUnitForSR(P)*96);S=[];if(E)for(var U=0;U<E.length;U++){var Y=E[U];S.push(new C({level:U,scale:Y,resolution:Y*Q}))}else{var Z=D.isGeographic(P)?512/M*5.916575275917094E8:256/M*5.91657527591555E8;U=Math.ceil(O/H);S.push(new C({level:0,scale:Z,resolution:Z*Q}));for(Y=1;Y<U;Y++)Z/=2**H,S.push(new C({level:Y,scale:Z,resolution:Z*Q}))}return new L({dpi:96,lods:S,origin:A,size:[M,M],spatialReference:P})};z=G.prototype;z.readOrigin=
function(A,H){return p.fromJSON({spatialReference:H.spatialReference,...A})};z.readSize=function(A,H){return[H.cols,H.rows]};z.writeSize=function(A,H){H.cols=A[0];H.rows=A[1]};z.zoomToScale=function(A){const H=this.scales;if(0>=A)return H[0];if(A>=H.length-1)return H[H.length-1];const E=Math.floor(A);return H[E]/(H[E]/H[E+1])**(A-E)};z.scaleToZoom=function(A){const H=this.scales,E=H.length-1;let M=0;for(;M<E;M++){const P=H[M],O=H[M+1];if(P<=A)break;if(O===A)return M+1;if(P>A&&O<A)return M+Math.log(P/
A)/Math.log(P/O)}return M};z.snapScale=function(A,H=.95){A=this.scaleToZoom(A);return A%Math.floor(A)>=H?this.zoomToScale(Math.ceil(A)):this.zoomToScale(Math.floor(A))};z.tileAt=function(A,H,E,M){var P=this.lodAt(A);if(!P)return null;let O;if("number"===typeof H)O=H,H=E;else{if(D.equals(H.spatialReference,this.spatialReference))O=H.x,H=H.y;else{M=F.project(H,this.spatialReference);if(q.isNone(M))return null;O=M.x;H=M.y}M=E}E=P.resolution*this.size[0];P=P.resolution*this.size[1];M||(M=new J.TileKey(null,
0,0,0,y.create()));M.level=A;M.row=Math.floor((this.origin.y-H)/P+.001);M.col=Math.floor((O-this.origin.x)/E+.001);this.updateTileInfo(M);return M};z.updateTileInfo=function(A,H=L.ExtrapolateOptions.NONE){var E=this.lodAt(A.level);E||H!==L.ExtrapolateOptions.POWER_OF_TWO||(H=this.lods[this.lods.length-1],H.level<A.level&&(E=H));if(E){var M=A.level-E.level;H=E.resolution*this.size[0]/2**M;E=E.resolution*this.size[1]/2**M;A.id=`${A.level}/${A.row}/${A.col}`;A.extent||(A.extent=y.create());A.extent[0]=
this.origin.x+A.col*H;A.extent[1]=this.origin.y-(A.row+1)*E;A.extent[2]=A.extent[0]+H;A.extent[3]=A.extent[1]+E}};z.upsampleTile=function(A){const H=this._upsampleLevels[A.level];if(!H||-1===H.parentLevel)return!1;A.level=H.parentLevel;A.row=Math.floor(A.row/H.factor+.001);A.col=Math.floor(A.col/H.factor+.001);this.updateTileInfo(A);return!0};z.getTileBounds=function(A,H){var E=this.lodAt(H.level);if(null==E)return null;var {resolution:M}=E;E=M*this.size[0];M*=this.size[1];A[0]=this.origin.x+H.col*
E;A[1]=this.origin.y-(H.row+1)*M;A[2]=A[0]+E;A[3]=A[1]+M;return A};z.lodAt=function(A){return this._levelToLOD?.[A]??null};z.clone=function(){return L.fromJSON(this.write({}))};z.getOrCreateCompatible=function(A,H){if(256===this.size[0]&&256===this.size[1])return 256===A?this:null;const E=[],M=this.lods.length;for(let P=0;P<M;P++){const O=this.lods[P];E.push(new C({level:O.level,scale:O.scale,resolution:O.resolution*H}))}return new L({size:[A,A],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,
origin:this.origin,spatialReference:this.spatialReference,lods:E})};z._initializeUpsampleLevels=function(){const A=this.lods;this._upsampleLevels=[];let H=null;for(let E=0;E<A.length;E++){const M=A[E];this._upsampleLevels[M.level]={parentLevel:H?H.level:-1,factor:H?H.resolution/M.resolution:0};H=M}};b._createClass(G,[{key:"isWrappable",get:function(){const {spatialReference:A,origin:H}=this;if(A&&H){const E=D.getInfo(A);return A.isWrappable&&!!E&&Math.abs(E.origin[0]-H.x)<=E.dx}return!1}},{key:"lods",
set:function(A){let H=0,E=0;const M=[],P=this._levelToLOD={};A&&(H=-Infinity,E=Infinity,A.forEach(O=>{M.push(O.scale);H=O.scale>H?O.scale:H;E=O.scale<E?O.scale:E;P[O.level]=O}));this._set("scales",M);this._set("minScale",H);this._set("maxScale",E);this._set("lods",A);this._initializeUpsampleLevels()}}]);return G}(r.JSONSupport);a.__decorate([u.property({type:Number,json:{write:!0}})],r.prototype,"compressionQuality",void 0);a.__decorate([u.property({type:Number,json:{write:!0}})],r.prototype,"dpi",
void 0);a.__decorate([u.property({type:String,json:{read:x.read,write:x.write,origins:{"web-scene":{read:!1,write:!1}}}})],r.prototype,"format",void 0);a.__decorate([u.property({readOnly:!0})],r.prototype,"isWrappable",null);a.__decorate([u.property({type:p,json:{write:!0}})],r.prototype,"origin",void 0);a.__decorate([k.reader("origin")],r.prototype,"readOrigin",null);a.__decorate([u.property({type:[C],value:null,json:{write:!0}})],r.prototype,"lods",null);a.__decorate([u.property({readOnly:!0})],
r.prototype,"minScale",void 0);a.__decorate([u.property({readOnly:!0})],r.prototype,"maxScale",void 0);a.__decorate([u.property({readOnly:!0})],r.prototype,"scales",void 0);a.__decorate([u.property({cast:z=>Array.isArray(z)?z:"number"===typeof z?[z,z]:[256,256]})],r.prototype,"size",void 0);a.__decorate([k.reader("size",["rows","cols"])],r.prototype,"readSize",null);a.__decorate([f.writer("size",{cols:{type:e.Integer},rows:{type:e.Integer}})],r.prototype,"writeSize",null);a.__decorate([u.property({type:n,
json:{write:!0}})],r.prototype,"spatialReference",void 0);r=L=a.__decorate([c.subclass("esri.layers.support.TileInfo")],r);(function(z){z=z.ExtrapolateOptions||(z.ExtrapolateOptions={});z[z.NONE=0]="NONE";z[z.POWER_OF_TWO=1]="POWER_OF_TWO"})(r||(r={}));return r})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,x,r,q,h,u,e){var l;x=l=function(d){function k(f){f=c.call(this,f);f.cols=null;f.level=0;f.levelValue=null;f.origin=null;f.resolution=0;f.rows=null;f.scale=0;return f}b._inherits(k,d);var c=b._createSuper(k);k.prototype.clone=function(){return new l({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return b._createClass(k)}(x.JSONSupport);a.__decorate([r.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},
"portal-item":{read:!1,write:!1}}}})],x.prototype,"cols",void 0);a.__decorate([r.property({type:q.Integer,json:{write:!0}})],x.prototype,"level",void 0);a.__decorate([r.property({type:String,json:{write:!0}})],x.prototype,"levelValue",void 0);a.__decorate([r.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],x.prototype,"origin",void 0);a.__decorate([r.property({type:Number,json:{write:!0}})],x.prototype,"resolution",void 0);a.__decorate([r.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],x.prototype,"rows",void 0);a.__decorate([r.property({type:Number,json:{write:!0}})],x.prototype,"scale",void 0);return x=l=a.__decorate([e.subclass("esri.layers.support.LOD")],x)})},"esri/layers/support/TileKey":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(b,a){a=a._createClass(function(x,r,q,h,u){this.id=x;this.level=r;this.row=q;this.col=h;this.extent=u});b.TileKey=a;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/byteSizeEstimations ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./TileKey ./Tilemap".split(" "),
function(b,a,x,r,q,h,u,e,l,d,k,c,f,p,n,y,D,F,C,J,L,z){var G;b.TilemapCache=G=function(w){function A(E){E=H.call(this,E);E._pendingTilemapRequests={};E._availableLevels={};E.levels=5;E.cacheByteSize=2*h.ByteSizeUnit.MEGABYTES;E.request=r;E._prefetchingEnabled=!0;return E}a._inherits(A,w);var H=a._createSuper(A);w=A.prototype;w.initialize=function(){this._tilemapCache=new d(this.cacheByteSize);this.addHandles([f.watch(()=>{const {layer:E}=this;return[E?.parsedUrl,E?.tileServers,E?.apiKey,E?.customParameters]},
()=>this._initializeTilemapDefinition()),f.watch(()=>this.layer?.tileInfo?.lods,E=>this._initializeAvailableLevels(E),f.syncAndInitial)]);this._initializeTilemapDefinition()};w.castLevels=function(E){return 2>=E?(l.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",E),3):E};w.fetchTilemap=function(E,M,P,O){if(!this._availableLevels[E])return Promise.reject(new u("tilemap-cache:level-unavailable",`Level ${E} is unavailable in the service`));const Q=this._tmpTilemapDefinition;
if(E=this._tilemapFromCache(E,M,P,Q))return Promise.resolve(E);const S=O&&O.signal;O={...O,signal:null};return new Promise((U,Y)=>{c.onAbort(S,()=>Y(c.createAbortError()));const Z=z.tilemapDefinitionId(Q);let da=this._pendingTilemapRequests[Z];if(!da){da=z.Tilemap.fromDefinition(Q,O).then(ea=>{this._tilemapCache.put(Z,ea,ea.byteSize);return ea});const X=()=>delete this._pendingTilemapRequests[Z];this._pendingTilemapRequests[Z]=da;da.then(X,X)}da.then(U,Y)})};w.getAvailability=function(E,M,P){return this._availableLevels[E]?
(E=this._tilemapFromCache(E,M,P,this._tmpTilemapDefinition))?E.getAvailability(M,P):"unknown":"unavailable"};w.fetchAvailability=function(E,M,P,O){return this._availableLevels[E]?this.fetchTilemap(E,M,P,O).catch(Q=>Q).then(Q=>{if(Q instanceof z.Tilemap){Q=Q.getAvailability(M,P);if("unavailable"===Q)throw new u("tile-map:tile-unavailable","Tile is not available",{level:E,row:M,col:P});return Q}if(c.isAbortError(Q))throw Q;return"unknown"}):Promise.reject(new u("tilemap-cache:level-unavailable",`Level ${E} is unavailable in the service`))};
w.fetchAvailabilityUpsample=function(E,M,P,O,Q){O.level=E;O.row=M;O.col=P;const S=this.layer.tileInfo;S.updateTileInfo(O);const U=this.fetchAvailability(E,M,P,Q).catch(Y=>{if(c.isAbortError(Y))throw Y;if(S.upsampleTile(O))return this.fetchAvailabilityUpsample(O.level,O.row,O.col,O);throw Y;});this._fetchAvailabilityUpsamplePrefetch(O.id,E,M,P,Q,U);return U};w._fetchAvailabilityUpsamplePrefetch=async function(E,M,P,O,Q,S){if(this._prefetchingEnabled&&null!=E){var U=`prefetch-${E}`;if(!this.handles.has(U)){var Y=
new AbortController;S.then(()=>Y.abort(),()=>Y.abort());var Z=!1;this.handles.add({remove(){Z||(Z=!0,Y.abort())}},U);await p.waitTicks(10,Y.signal).catch(()=>{});Z||(Z=!0,this.handles.remove(U));if(!c.isAborted(Y))for(E=new L.TileKey(E,M,P,O),Q={...Q,signal:Y.signal},M=this.layer.tileInfo,P=0;G._prefetches.length<G._maxPrefetch&&M.upsampleTile(E);++P){const da=this.fetchAvailability(E.level,E.row,E.col,Q);G._prefetches.push(da);O=()=>{G._prefetches.removeUnordered(da)};da.then(O,O)}}}};w._initializeTilemapDefinition=
function(){if(this.layer.parsedUrl){var {parsedUrl:E,apiKey:M,customParameters:P}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:E.path,query:n.objectToQuery({...E.query,...P,token:M??E.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};w._tilemapFromCache=function(E,M,P,O){O.level=E;O.row=M-M%this.size;O.col=P-P%this.size;E=z.tilemapDefinitionId(O);return this._tilemapCache.get(E)};
w._initializeAvailableLevels=function(E){this._availableLevels={};E&&E.forEach(M=>this._availableLevels[M.level]=!0)};a._createClass(A,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const E=this;return{get prefetchingEnabled(){return E._prefetchingEnabled},set prefetchingEnabled(M){E._prefetchingEnabled=M},hasTilemap(M,P,O){return!!E._tilemapFromCache(M,P,O,E._tmpTilemapDefinition)}}}}]);return A}(e.HandleOwnerMixin(q));b.TilemapCache._maxPrefetch=4;b.TilemapCache._prefetches=
new k({initialSize:G._maxPrefetch});x.__decorate([y.property({constructOnly:!0,type:Number})],b.TilemapCache.prototype,"levels",void 0);x.__decorate([D.cast("levels")],b.TilemapCache.prototype,"castLevels",null);x.__decorate([y.property({readOnly:!0,type:Number})],b.TilemapCache.prototype,"size",null);x.__decorate([y.property({constructOnly:!0,type:Number})],b.TilemapCache.prototype,"cacheByteSize",void 0);x.__decorate([y.property({constructOnly:!0})],b.TilemapCache.prototype,"layer",void 0);x.__decorate([y.property({constructOnly:!0})],
b.TilemapCache.prototype,"request",void 0);b.TilemapCache=G=x.__decorate([J.subclass("esri.layers.support.TilemapCache")],b.TilemapCache);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Tilemap":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/arrayUtils ../../core/Error ../../core/lang".split(" "),function(b,a,x,r,q,h){function u(l){if("vector-tile"===l.service.type)var d=`${l.service.url}/tilemap/${l.level}/${l.row}/${l.col}/${l.width}/${l.height}`;
else d=l.service.tileServers,d=`${d&&d.length?d[l.row%d.length]:l.service.url}/tilemap/${l.level}/${l.row}/${l.col}/${l.width}/${l.height}`;(l=l.service.query)&&(d=`${d}?${l}`);return d}let e=function(){function l(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var d=l.prototype;d.getAvailability=function(k,c){if("unknown"!==this._allAvailability)return this._allAvailability;k=(k-this.location.top)*this.location.width+(c-this.location.left);c=k>>3;
const f=this._tileAvailabilityBitSet;return 0>c||c>f.length?"unknown":f[c]&1<<k%8?"available":"unavailable"};d._updateFromData=function(k){let c=!0,f=!0;const p=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let n=0;for(let y=0;y<k.length;y++){const D=y%8;k[y]?(f=!1,p[n]|=1<<D):c=!1;7===D&&++n}f?this._allAvailability="unavailable":c?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=p,this.byteSize+=p.length)};l.fromDefinition=function(k,
c){const f=k.service.request||x,{row:p,col:n,width:y,height:D}=k,F={query:{f:"json"}};c=c?{...F,...c}:F;return f(u(k),c).then(C=>C.data).catch(C=>{if(C&&C.details&&422===C.details.httpStatus)return{location:{top:p,left:n,width:y,height:D},valid:!0,data:r.constant(y*D,0)};throw C;}).then(C=>{if(C.location&&(C.location.top!==p||C.location.left!==n||C.location.width!==y||C.location.height!==D))throw new q("tilemap:location-mismatch","Tilemap response for different location than requested",{response:C,
definition:{top:p,left:n,width:y,height:D}});return l.fromJSON(C)})};l.fromJSON=function(k){l._validateJSON(k);const c=new l;c.location=Object.freeze(h.clone(k.location));c._updateFromData(k.data);return Object.freeze(c)};l._validateJSON=function(k){if(!k||!k.location)throw new q("tilemap:missing-location","Location missing from tilemap response");if(!1===k.valid)throw new q("tilemap:invalid","Tilemap response was marked as invalid");if(!k.data)throw new q("tilemap:missing-data","Data missing from tilemap response");
if(!Array.isArray(k.data))throw new q("tilemap:data-mismatch","Data must be an array of numbers");if(k.data.length!==k.location.width*k.location.height)throw new q("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return a._createClass(l)}();b.Tilemap=e;b.tilemapDefinitionId=function(l){return`${l.level}/${l.row}/${l.col}/${l.width}/${l.height}`};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageUtils":function(){define(["exports"],
function(b){let a=null;b.checkWebPSupport=function(x){if(a)return a;const r={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return a=new Promise(q=>{const h=
new Image;h.onload=()=>{h.onload=h.onerror=null;q(0<h.width&&0<h.height)};h.onerror=()=>{h.onload=h.onerror=null;q(!1)};h.src="data:image/webp;base64,"+r[x]})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/SpriteSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/Logger ../../core/typedArrayUtil ../../core/urlUtils".split(" "),function(b,a,x,r,q,h){function u(e){var l=document.createElement("canvas");const d=
l.getContext("2d");l.width=e.width;l.height=e.height;d.drawImage(e,0,0,e.width,e.height);l=d.getImageData(0,0,e.width,e.height);return{width:e.width,height:e.height,data:new Uint8Array(l.data)}}return function(){function e(d,k){this._spriteSource=d;this._maxTextureSize=k;this.devicePixelRatio=1;this._spriteImageFormat="png";this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded";"url"===d.type&&d.spriteFormat&&(this._spriteImageFormat=d.spriteFormat);
d.pixelRatio&&(this.devicePixelRatio=d.pixelRatio);this.baseURL=d.spriteUrl}var l=e.prototype;l.getSpriteInfo=function(d){return this._spritesData?this._spritesData[d]:null};l.load=async function(d){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(d),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"};l._loadSprites=async function(d){this._isRetina=1.15<this.devicePixelRatio;const {width:k,height:c,data:f,json:p}=await this._getSpriteData(this._spriteSource,
d);if((d=Object.keys(p))&&0!==d.length&&f){this._spritesData=p;this.width=k;this.height=c;d=Math.max(this._maxTextureSize,4096);if(k>d||c>d)throw d=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${d} pixels}`,r.getLogger("esri.layers.support.SpriteSource").error(d),new x("SpriteSource",d);for(let n=0;n<f.length;n+=4)d=f[n+3]/255,f[n]*=d,f[n+1]*=d,f[n+2]*=d;this.image=f}else this._spritesData=this.image=null,this.width=this.height=0};l._getSpriteData=async function(d,
k){if("image"===d.type){if(1.15>this.devicePixelRatio){if(!d.spriteSource1x)throw new x("SpriteSource","no image data provided for low resolution sprites!");k=d.spriteSource1x.image;d=d.spriteSource1x.json}else{if(!d.spriteSource2x)throw new x("SpriteSource","no image data provided for high resolution sprites!");k=d.spriteSource2x.image;d=d.spriteSource2x.json}return"width"in k&&"height"in k&&"data"in k&&(q.isArrayBuffer(k.data)||q.isUint8ClampedArray(k.data))?{width:k.width,height:k.height,data:new Uint8Array(k.data),
json:d}:{...u(k),json:d}}d=h.urlToObject(this.baseURL);const c=d.query?"?"+h.objectToQuery(d.query):"",f=this._isRetina?"@2x":"",p=`${d.path}${f}.${this._spriteImageFormat}${c}`,[n,y]=await Promise.all([a(`${d.path}${f}.json${c}`,k),a(p,{responseType:"image",...k})]);return{...u(y.data),json:n.data}};b._createClass(e,[{key:"spriteNames",get:function(){const d=[];for(const k in this._spritesData)d.push(k);d.sort();return d}}]);return e}()})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../config ../../request ../../core/promiseUtils ../../core/urlUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),
function(b,a,x,r,q,h){function u(f){f&&(f=q.getOrigin(f),c&&!c.includes(f)&&c.push(f))}function e(...f){let p=void 0;for(const n of f)null!=n&&(q.isProtocolRelative(n)?p&&(p=p.split("://")[0]+":"+n.trim()):p=q.isAbsolute(n)?n:q.join(p,n));return p?q.removeTrailingSlash(p):void 0}async function l(f,p,n,y,D){r.throwIfAborted(D);let F,C;if("string"===typeof n){n=q.normalize(n);u(n);var J=await x(n,{...D,responseType:"json",query:{f:"json",...D?.query}});J.ssl&&(F&&(F=F.replace(/^http:/i,"https:")),C&&
(C=C.replace(/^http:/i,"https:")));C=F=n}else null!=n&&(J={data:n},F=n.jsonUrl||null,C=y);J=J?.data;if(J?.sources)return f.styleUrl=F||null,d(f,J,C,D);if(!J?.sources)return f.sourceUrl?k(f,J,C,!1,p,D):(f.sourceUrl=F||null,k(f,J,C,!0,p,D));throw Error("You must specify the URL or the JSON for a service or for a style.");}async function d(f,p,n,y){n=n?q.removeFile(n):q.getAppBaseUrl();f.styleBase=n;f.style=p;f.styleUrl&&u(f.styleUrl);p["sprite-format"]&&"webp"===p["sprite-format"].toLowerCase()&&(f.spriteFormat=
"webp");const D=[];if(p.sources&&p.sources.esri){const F=p.sources.esri;F.url?await l(f,"esri",e(n,F.url),void 0,y):D.push(l(f,"esri",F,n,y))}for(const F of Object.keys(p.sources))"esri"!==F&&"vector"===p.sources[F].type&&(p.sources[F].url?D.push(l(f,F,e(n,p.sources[F].url),void 0,y)):p.sources[F].tiles&&D.push(l(f,F,p.sources[F],n,y)));await Promise.all(D)}async function k(f,p,n,y,D,F){n=n?q.removeTrailingSlash(n)+"/":q.getAppBaseUrl();if(p.hasOwnProperty("tileInfo"))var C=p;else{var J={xmin:-2.0037507067161843E7,
ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},L=78271.51696400007,z=2.958287637957775E8,G=[],w=p.hasOwnProperty("minzoom")?+p.minzoom:0,A=p.hasOwnProperty("maxzoom")?+p.maxzoom:22;for(let H=0;H<=A;H++)H>=w&&G.push({level:H,scale:z,resolution:L}),L/=2,z/=2;for(C of p.tiles??[])u(e(n,C));C={capabilities:"TilesOnly",initialExtent:J,fullExtent:J,minScale:0,maxScale:0,tiles:p.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,
y:2.0037508342787E7},lods:G,spatialReference:{wkid:102100}}}}J=new h(D,q.addQueryParameters(n,F?.query??{}),C);if(!y&&f.primarySourceName in f.sourceNameToSource){L=f.sourceNameToSource[f.primarySourceName];if(!L.isCompatibleWith(J))return;null!=J.fullExtent&&(null!=L.fullExtent?L.fullExtent.union(J.fullExtent):L.fullExtent=J.fullExtent.clone());L.tileInfo&&J.tileInfo&&L.tileInfo.lods.length<J.tileInfo.lods.length&&(L.tileInfo=J.tileInfo)}y?(f.sourceBase=n,f.source=p,f.validatedSource=C,f.primarySourceName=
D,f.sourceUrl&&u(f.sourceUrl)):u(n);f.sourceNameToSource[D]=J;if(!f.style){if(null==p.defaultStyles)throw Error();return"string"===typeof p.defaultStyles?l(f,"",e(n,p.defaultStyles,"root.json"),void 0,F):l(f,"",p.defaultStyles,e(n,"root.json"),F)}}const c=a.defaults&&a.defaults.io.corsEnabledServers;b.loadMetadata=async function(f,p){const n={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},
[y,D]="string"===typeof f?[f,null]:[null,f.jsonUrl];await l(n,"esri",f,D,p);f={layerDefinition:n.validatedSource,url:y,serviceUrl:n.sourceUrl,style:n.style,styleUrl:n.styleUrl,spriteUrl:n.style.sprite&&e(n.styleBase,n.style.sprite),spriteFormat:n.spriteFormat,glyphsUrl:n.style.glyphs&&e(n.styleBase,n.style.glyphs),sourceNameToSource:n.sourceNameToSource,primarySourceName:n.primarySourceName};u(f.spriteUrl);u(f.glyphsUrl);return f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TilemapIndex ../TilemapRequest ./VectorTilesRequestManager".split(" "),
function(b,a,x,r,q,h,u,e,l){return function(){function d(c,f,p){this.fullExtent=this.capabilities=this.tileInfo=this.tilemap=null;this.name=c;this.sourceUrl=f;c=x.urlToObject(this.sourceUrl);f=a.clone(p);var n=f.tiles;if(c)for(var y=0;y<n.length;y++){var D=x.urlToObject(n[y]);D&&(x.isAbsolute(D.path)||(D.path=x.join(c.path,D.path)),n[y]=x.addQueryParameters(D.path,{...c.query,...D.query}))}this.tileServers=n;y=p.capabilities&&p.capabilities.split(",").map(F=>F.toLowerCase().trim());n=!0===p?.exportTilesAllowed;
y=!0===y?.includes("tilemap");D=n&&p.hasOwnProperty("maxExportTilesCount")?p.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:n,supportsTileMap:y},exportTiles:n?{maxExportTilesCount:+D}:null};this.tileInfo=q.readServiceTileInfo(f.tileInfo,f,null,{ignoreMinMaxLOD:!0});f=p.tileMap?x.addQueryParameters(x.join(c.path,p.tileMap),c.query??{}):null;y?(this.type="vector-tile",this.tilemap=new e(new h.TilemapCache({layer:{parsedUrl:c,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),
f)):f&&(this.tilemap=new u(f));this.fullExtent=r.fromJSON(p.fullExtent)}var k=d.prototype;k.destroy=function(){this.tilemap?.destroy()};k.getRefKey=async function(c,f){return await this.tilemap?.dataKey(c,f)??c};k.requestTile=function(c,f,p,n){return l.request(this.tileServers[f%this.tileServers.length],c,f,p,n)};k.isCompatibleWith=function(c){var f=this.tileInfo;c=c.tileInfo;if(!f.spatialReference.equals(c.spatialReference)||!f.origin.equals(c.origin)||Math.round(f.dpi)!==Math.round(c.dpi))return!1;
f=f.lods;c=c.lods;const p=Math.min(f.length,c.length);for(let n=0;n<p;n++){const y=f[n],D=c[n];if(y.level!==D.level||Math.round(y.scale)!==Math.round(D.scale))return!1}return!0};return b._createClass(d)}()})},"esri/views/2d/engine/vectorTiles/TilemapIndex":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(b,a,x,r){return function(){function q(u){this.url=u}var h=q.prototype;h.destroy=function(){this._tileIndexPromise=
null};h.fetchTileIndex=async function(){this._tileIndexPromise||(this._tileIndexPromise=a(this.url).then(u=>u.data.index));return this._tileIndexPromise};h.dataKey=async function(u,e){const l=await this.fetchTileIndex();x.throwIfAborted(e);return this._getIndexedDataKey(l,u)};h._getIndexedDataKey=function(u,e){const l=[e];if(0>e.level||0>e.row||0>e.col||0<e.row>>e.level||0<e.col>>e.level)return null;for(;0!==e.level;)e=new r(e.level-1,e.row>>1,e.col>>1,e.world),l.push(e);e=l.pop();let d,k;if(1===
u)return e;for(;l.length;)if(d=l.pop(),k=(d.col&1)+((d.row&1)<<1),u){if(0===u[k]){e=null;break}if(1===u[k]){e=d;break}e=d;u=u[k]}return e};return b._createClass(q)}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(b,a){let x=function(){function r(h,u,e,l){this.set(h,u,e,l)}r.getId=function(h,u,e,l){return"object"===typeof h?`${h.level}/${h.row}/${h.col}/${h.world}`:`${h}/${u}/${e}/${l}`};var q=r.prototype;q.acquire=
function(h,u,e,l){this.set(h,u,e,l)};q.contains=function(h){const u=h.level-this.level;return 0<=u&&this.row===h.row>>u&&this.col===h.col>>u&&this.world===h.world};q.equals=function(h){return this.level===h.level&&this.row===h.row&&this.col===h.col&&this.world===h.world};q.clone=function(){return new r(this)};q.release=function(){this.world=this.col=this.row=this.level=0};q.set=function(h,u,e,l){if(null==h)this.world=this.col=this.row=this.level=0;else if("object"===typeof h)this.level=h.level||0,
this.row=h.row||0,this.col=h.col||0,this.world=h.world||0;else if("string"===typeof h){const [d,k,c,f]=h.split("/");this.level=parseFloat(d);this.row=parseFloat(k);this.col=parseFloat(c);this.world=parseFloat(f)}else this.level=+h,this.row=+u,this.col=+e,this.world=+l||0;return this};q.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};q.getParentKey=function(){return 0>=this.level?null:new r(this.level-1,this.row>>1,this.col>>1,this.world)};q.getChildKeys=function(){const h=
this.level+1,u=this.row<<1,e=this.col<<1,l=this.world;return[new r(h,u,e,l),new r(h,u,e+1,l),new r(h,u+1,e,l),new r(h,u+1,e+1,l)]};q.compareRowMajor=function(h){return this.row<h.row?-1:this.row>h.row?1:this.col<h.col?-1:this.col>h.col?1:0};b._createClass(r,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(h){this.set(h)}},{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return r}();x.pool=
new a(x,null,null,25,50);return x})},"esri/views/2d/engine/vectorTiles/TilemapRequest":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/maybe","../../../../core/promiseUtils","../../tiling/TileKey"],function(b,a,x,r,q){return function(){function h(e,l){this._tilemap=e;this._tileIndexUrl=l}var u=h.prototype;u.destroy=function(){this._tilemap=x.destroyMaybe(this._tilemap);this._tileIndexPromise=null};u.fetchTileIndex=async function(e){this._tileIndexPromise||
(this._tileIndexPromise=a(this._tileIndexUrl,{query:{...e?.query}}).then(l=>l.data.index));return this._tileIndexPromise};u.dataKey=function(e,l){const {level:d,row:k,col:c}=e,f=new q(e);return this._tilemap.fetchAvailabilityUpsample(d,k,c,f,l).then(()=>{f.world=e.world;return f}).catch(p=>{if(r.isAbortError(p))throw p;return null})};return b._createClass(h)}()})},"esri/views/2d/engine/vectorTiles/style/VectorTilesRequestManager":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../request ../../../../../core/lang ../../../../../core/MapUtils ../../../../../core/promiseUtils".split(" "),
function(b,a,x,r,q,h){function u(d,k){return q.getOrCreateMapValue(l,d,()=>new e(d)).getData(k).then(c=>{l.delete(d);return c}).catch(c=>{l.delete(d);throw c;})}let e=function(){function d(c){this._tileUrl=c;this._abortController=this._promise=null;this._abortOptions=[]}var k=d.prototype;k.getData=function(c){null===this._promise&&(this._abortController=new AbortController,this._promise=this._makeRequest(this._tileUrl,this._abortController.signal));const f=this._abortOptions;f.push(c);h.onAbort(c,
()=>{f.every(p=>h.isAborted(p))&&this._abortController.abort()});return this._promise.then(p=>r.clone(p))};k._makeRequest=async function(c,f){({data:c}=await x(c,{responseType:"array-buffer",signal:f}));return c};return a._createClass(d)}();const l=new Map;b.request=function(d,k,c,f,p){d=d.replace(/\{z\}/gi,k.toString()).replace(/\{y\}/gi,c.toString()).replace(/\{x\}/gi,f.toString());return u(d,p)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports",
"../../../../geometry/Point","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(b,a,x,r){b.areSchemasOverlapping=function(q,h){if(q===h)return!0;if(null==q&&null!=h||null!=q&&null==h||null==q||null==h||!q.spatialReference.equals(h.spatialReference)||q.dpi!==h.dpi)return!1;var u=q.origin;const e=h.origin;if(1E-6<=Math.abs(u.x-e.x)||1E-6<=Math.abs(u.y-e.y))return!1;q.lods[0].scale>h.lods[0].scale?(u=q,q=h):u=h;for(h=u.lods[0].scale;h>=q.lods[q.lods.length-1].scale-1E-6;h/=
2)if(1E-6>Math.abs(h-q.lods[0].scale))return!0;return!1};b.unionTileInfos=function(q,h){if(q===h)return q;if(null==q&&null!=h)return h;if(null!=q&&null==h)return q;if(null==q||null==h)return null;const u=q.size[0],e=q.format,l=q.dpi,d=new a({x:q.origin.x,y:q.origin.y}),k=q.spatialReference;var c=q.lods[0].scale>h.lods[0].scale?q.lods[0]:h.lods[0];q=(q.lods[q.lods.length-1].scale<=h.lods[h.lods.length-1].scale?q.lods[q.lods.length-1]:h.lods[h.lods.length-1]).scale;h=[];let f=c.scale;c=c.resolution;
let p=0;for(;f>q;)h.push(new x({level:p,resolution:c,scale:f})),p++,f/=2,c/=2;return new r({size:[u,u],dpi:l,format:e||"pbf",origin:d,lods:h,spatialReference:k})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","./StyleDefinition","./StyleLayer"],function(b,a,x){return function(){function r(h){this._style=h;this.backgroundBucketIds=[];this._uidToLayer=new Map;
this._layerByName={};this._runningId=0;h.layers||(h.layers=[]);this.version=parseFloat(h.version);if(this.layers=h.layers.map((u,e,l)=>this._create(u,e,l)).filter(u=>!!u))for(let u=0;u<this.layers.length;u++)h=this.layers[u],this._layerByName[h.id]=h,this._uidToLayer.set(h.uid,h),h.type===a.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(h.id);this._identifyRefLayers()}var q=r.prototype;q.isPainterDataDriven=function(h){return(h=this._layerByName[h])?h.isPainterDataDriven():!1};q.getStyleLayerId=
function(h){return h>=this.layers.length?null:this.layers[h].id};q.getStyleLayerByUID=function(h){return this._uidToLayer.get(h)??null};q.getStyleLayerIndex=function(h){return(h=this._layerByName[h])?this.layers.indexOf(h):-1};q.setStyleLayer=function(h,u){if(h&&h.id){var e=this._style;null!=u&&u>=this.layers.length&&(u=this.layers.length-1);var l=!0,d;if(d=this._layerByName[h.id]){const k=this.layers.indexOf(d);u||(u=k);u===k?(l=!1,d=r._recreateLayer(h,d),this.layers[u]=d,e.layers[u]=h):(this.layers.splice(k,
1),e.layers.splice(k,1),d=this._create(h,u,this.layers),this.layers.splice(u,0,d),e.layers.splice(u,0,h))}else d=this._create(h,u,this.layers),!u||u>=this.layers.length?(this.layers.push(d),e.layers.push(h)):(this.layers.splice(u,0,d),e.layers.splice(u,0,h));this._layerByName[h.id]=d;this._uidToLayer.set(d.uid,d);l&&this._recomputeZValues();this._identifyRefLayers()}};q.getStyleLayer=function(h){return(h=this._layerByName[h])?{type:h.typeName,id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,
maxzoom:h.maxzoom,filter:h.filter,layout:h.layout,paint:h.paint}:null};q.deleteStyleLayer=function(h){const u=this._layerByName[h];u&&(delete this._layerByName[h],this._uidToLayer.delete(u.uid),h=this.layers.indexOf(u),this.layers.splice(h,1),this._style.layers.splice(h,1),this._recomputeZValues(),this._identifyRefLayers())};q.getLayerById=function(h){return this._layerByName[h]};q.getLayoutProperties=function(h){return(h=this._layerByName[h])?h.layout:null};q.getPaintProperties=function(h){return(h=
this._layerByName[h])?h.paint:null};q.setPaintProperties=function(h,u){if(h=this._layerByName[h]){var e=r._recreateLayer({type:h.typeName,id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,maxzoom:h.maxzoom,filter:h.filter,layout:h.layout,paint:u},h),l=this.layers.indexOf(h);this.layers[l]=e;this._style.layers[l].paint=u;this._layerByName[h.id]=e;this._uidToLayer.set(h.uid,e)}};q.setLayoutProperties=function(h,u){if(h=this._layerByName[h]){var e=r._recreateLayer({type:h.typeName,
id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,maxzoom:h.maxzoom,filter:h.filter,layout:u,paint:h.paint},h),l=this.layers.indexOf(h);this.layers[l]=e;this._style.layers[l].layout=u;this._layerByName[h.id]=e;this._uidToLayer.set(h.uid,e)}};q.setStyleLayerVisibility=function(h,u){if(h=this._layerByName[h]){var e=h.layout||{};e.visibility=u;u=r._recreateLayer({type:h.typeName,id:h.id,source:h.source,"source-layer":h.sourceLayer,minzoom:h.minzoom,maxzoom:h.maxzoom,filter:h.filter,
layout:e,paint:h.paint},h);var l=this.layers.indexOf(h);this.layers[l]=u;this._style.layers[l].layout=e;this._layerByName[h.id]=u;this._uidToLayer.set(h.uid,u)}};q.getStyleLayerVisibility=function(h){return(h=this._layerByName[h])?h.layout?.visibility??"visible":"none"};q._recomputeZValues=function(){const h=this.layers,u=1/(h.length+1);for(let e=0;e<h.length;e++)h[e].z=1-(1+e)*u};q._identifyRefLayers=function(){const h=[],u=[];let e=0;for(const k of this.layers){const c=k.layout;if(k.type===a.StyleLayerType.FILL){var l=
k,d=k.source+"|"+k.sourceLayer;d+="|"+(c?.visibility??"");d+="|"+k.minzoom;d+="|"+k.maxzoom;d+="|"+JSON.stringify(k.filter);if(l.hasDataDrivenFill||l.hasDataDrivenOutline)d+="|"+e;h.push({key:d,layer:k})}else if(k.type===a.StyleLayerType.LINE){l=k;d=k.paint;d=null!=d&&(null!=d["line-pattern"]||null!=d["line-dasharray"]);let f=k.source+"|"+k.sourceLayer;f+="|"+(c?.visibility??"");f+="|"+k.minzoom;f+="|"+k.maxzoom;f+="|"+JSON.stringify(k.filter);f+="|"+(void 0!==c?c["line-cap"]:"");f+="|"+(void 0!==
c?c["line-join"]:"");if(l.hasDataDrivenLine||d)f+="|"+e;u.push({key:f,layer:k})}++e}this._assignRefLayers(h);this._assignRefLayers(u)};q._assignRefLayers=function(h){h.sort((c,f)=>c.key<f.key?-1:c.key>f.key?1:0);let u,e;const l=h.length;for(let c=0;c<l;c++){const f=h[c];if(f.key===u)f.layer.refLayerId=e;else if(u=f.key,e=f.layer.id,f.layer.type===a.StyleLayerType.FILL){if(!f.layer.getPaintProperty("fill-outline-color"))for(var d=c+1;d<l;d++){var k=h[d];if(k.key===u){if(k.layer.getPaintProperty("fill-outline-color")){h[c]=
k;h[d]=f;e=k.layer.id;break}}else break}}else if(f.layer.type===a.StyleLayerType.LINE)for(d=f.layer,k=c+1;k<l;k++){const p=h[k];if(p.key!==u)break;const n=p.layer;if(d.canUseThinTessellation&&!n.canUseThinTessellation||!d.canUseThinTessellation&&(n.getPaintProperty("line-pattern")||n.getPaintProperty("line-dasharray")))d=n,h[c]=p,h[k]=f,e=p.layer.id}}};q._create=function(h,u,e){u=1-1/(e.length+1)*(1+u);e=this._runningId++;switch(h.type){case "background":return new x.BackgroundStyleLayer(a.StyleLayerType.BACKGROUND,
h,u,e);case "fill":return new x.FillStyleLayer(a.StyleLayerType.FILL,h,u,e);case "line":return new x.LineStyleLayer(a.StyleLayerType.LINE,h,u,e);case "symbol":return new x.SymbolStyleLayer(a.StyleLayerType.SYMBOL,h,u,e);case "raster":console.warn(`Unsupported vector tile raster layer ${h.id}`);break;case "circle":return new x.CircleStyleLayer(a.StyleLayerType.CIRCLE,h,u,e)}return null};r._recreateLayer=function(h,u){switch(h.type){case "background":return new x.BackgroundStyleLayer(a.StyleLayerType.BACKGROUND,
h,u.z,u.uid);case "fill":return new x.FillStyleLayer(a.StyleLayerType.FILL,h,u.z,u.uid);case "line":return new x.LineStyleLayer(a.StyleLayerType.LINE,h,u.z,u.uid);case "symbol":return new x.SymbolStyleLayer(a.StyleLayerType.SYMBOL,h,u.z,u.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${h.id}`);break;case "circle":return new x.CircleStyleLayer(a.StyleLayerType.CIRCLE,h,u.z,u.uid)}return null};return b._createClass(r)}()})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../../../../../symbols/cim/enums"],function(b,a,x){b.StyleLayerType=void 0;(function(r){r[r.BACKGROUND=0]="BACKGROUND";r[r.FILL=1]="FILL";r[r.LINE=2]="LINE";r[r.SYMBOL=3]="SYMBOL";r[r.CIRCLE=4]="CIRCLE"})(b.StyleLayerType||(b.StyleLayerType={}));b.Visibility=void 0;(function(r){r[r.VISIBLE=0]="VISIBLE";r[r.NONE=1]="NONE"})(b.Visibility||(b.Visibility={}));b.SymbolPlacement=void 0;(function(r){r[r.POINT=0]="POINT";r[r.LINE=1]="LINE";r[r.LINE_CENTER=
2]="LINE_CENTER"})(b.SymbolPlacement||(b.SymbolPlacement={}));b.RotationAlignment=void 0;(function(r){r[r.MAP=0]="MAP";r[r.VIEWPORT=1]="VIEWPORT";r[r.AUTO=2]="AUTO"})(b.RotationAlignment||(b.RotationAlignment={}));b.TextJustification=void 0;(function(r){r[r.AUTO=0]="AUTO";r[r.LEFT=1]="LEFT";r[r.CENTER=2]="CENTER";r[r.RIGHT=3]="RIGHT"})(b.TextJustification||(b.TextJustification={}));b.SymbolAnchor=void 0;(function(r){r[r.CENTER=0]="CENTER";r[r.LEFT=1]="LEFT";r[r.RIGHT=2]="RIGHT";r[r.TOP=3]="TOP";r[r.BOTTOM=
4]="BOTTOM";r[r.TOP_LEFT=5]="TOP_LEFT";r[r.TOP_RIGHT=6]="TOP_RIGHT";r[r.BOTTOM_LEFT=7]="BOTTOM_LEFT";r[r.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"})(b.SymbolAnchor||(b.SymbolAnchor={}));b.TextTransform=void 0;(function(r){r[r.NONE=0]="NONE";r[r.UPPERCASE=1]="UPPERCASE";r[r.LOWERCASE=2]="LOWERCASE"})(b.TextTransform||(b.TextTransform={}));b.TranslateAnchor=void 0;(function(r){r[r.MAP=0]="MAP";r[r.VIEWPORT=1]="VIEWPORT"})(b.TranslateAnchor||(b.TranslateAnchor={}));b.TextWritingMode=void 0;(function(r){r[r.HORIZONTAL=
0]="HORIZONTAL";r[r.VERTICAL=1]="VERTICAL"})(b.TextWritingMode||(b.TextWritingMode={}));a=a._createClass(function(){});a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:x.CapType.BUTT},
"line-join":{type:"enum",values:["bevel","round","miter"],default:x.JoinType.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:b.SymbolPlacement.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",
minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:b.SymbolAnchor.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,
default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:b.SymbolAnchor.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular",
"Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:b.TextJustification.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},
"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:b.TextTransform.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[b.TextWritingMode.HORIZONTAL]}};
a.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};a.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",
default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};a.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",
minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},"line-width":{type:"number",minimum:0,default:1}};a.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},
"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",
value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",
minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};a.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,
default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};b.StyleDefinition=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/enums":function(){define(["exports"],function(b){b.CapType=void 0;(function(a){a[a.BUTT=0]="BUTT";a[a.ROUND=1]="ROUND";a[a.SQUARE=2]="SQUARE";a[a.UNKNOWN=4]="UNKNOWN"})(b.CapType||(b.CapType={}));b.JoinType=void 0;(function(a){a[a.BEVEL=
0]="BEVEL";a[a.ROUND=1]="ROUND";a[a.MITER=2]="MITER";a[a.UNKNOWN=4]="UNKNOWN"})(b.JoinType||(b.JoinType={}));b.Alignment=void 0;(function(a){a[a.SCREEN=0]="SCREEN";a[a.MAP=1]="MAP"})(b.Alignment||(b.Alignment={}));b.ExternalColorMixMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Ignore=1]="Ignore";a[a.Multiply=99]="Multiply"})(b.ExternalColorMixMode||(b.ExternalColorMixMode={}));b.ExtremityPlacement=void 0;(function(a){a.Both="Both";a.JustBegin="JustBegin";a.JustEnd="JustEnd";a.None="None"})(b.ExtremityPlacement||
(b.ExtremityPlacement={}));b.FillMode=void 0;(function(a){a[a.Mosaic=0]="Mosaic";a[a.Centered=1]="Centered"})(b.FillMode||(b.FillMode={}));b.FontEffects=void 0;(function(a){a[a.Normal=0]="Normal";a[a.Superscript=1]="Superscript";a[a.Subscript=2]="Subscript"})(b.FontEffects||(b.FontEffects={}));b.FontEncoding=void 0;(function(a){a[a.MSSymbol=0]="MSSymbol";a[a.Unicode=1]="Unicode"})(b.FontEncoding||(b.FontEncoding={}));b.FontType=void 0;(function(a){a[a.Unspecified=0]="Unspecified";a[a.TrueType=1]=
"TrueType";a[a.PSOpenType=2]="PSOpenType";a[a.TTOpenType=3]="TTOpenType";a[a.Type1=4]="Type1"})(b.FontType||(b.FontType={}));b.AngleAlignment=void 0;(function(a){a[a.Display=0]="Display";a[a.Map=1]="Map"})(b.AngleAlignment||(b.AngleAlignment={}));b.AnimatedSymbolRepeatType=void 0;(function(a){a.None="None";a.Loop="Loop";a.Oscillate="Oscillate"})(b.AnimatedSymbolRepeatType||(b.AnimatedSymbolRepeatType={}));b.DominantSizeAxis=void 0;(function(a){a[a.Z=0]="Z";a[a.X=1]="X";a[a.Y=2]="Y"})(b.DominantSizeAxis||
(b.DominantSizeAxis={}));b.RotationOrder=void 0;(function(a){a[a.XYZ=0]="XYZ";a[a.ZXY=1]="ZXY";a[a.YXZ=2]="YXZ"})(b.RotationOrder||(b.RotationOrder={}));b.BalloonCalloutStyle=void 0;(function(a){a[a.Rectangle=0]="Rectangle";a[a.RoundedRectangle=1]="RoundedRectangle";a[a.Oval=2]="Oval"})(b.BalloonCalloutStyle||(b.BalloonCalloutStyle={}));b.BlendingMode=void 0;(function(a){a[a.None=0]="None";a[a.Alpha=1]="Alpha";a[a.Screen=2]="Screen";a[a.Multiply=3]="Multiply";a[a.Add=4]="Add"})(b.BlendingMode||(b.BlendingMode=
{}));b.BlockProgression=void 0;(function(a){a[a.TTB=0]="TTB";a[a.RTL=1]="RTL";a[a.BTT=2]="BTT"})(b.BlockProgression||(b.BlockProgression={}));b.BillBoardMode=void 0;(function(a){a[a.None=0]="None";a[a.SignPost=1]="SignPost";a[a.FaceNearPlane=2]="FaceNearPlane"})(b.BillBoardMode||(b.BillBoardMode={}));b.CGAAttributeType=void 0;(function(a){a[a.Float=0]="Float";a[a.String=1]="String";a[a.Boolean=2]="Boolean"})(b.CGAAttributeType||(b.CGAAttributeType={}));b.ClippingType=void 0;(function(a){a[a.Intersect=
0]="Intersect";a[a.Subtract=1]="Subtract"})(b.ClippingType||(b.ClippingType={}));b.GeometricEffectArrowType=void 0;(function(a){a.OpenEnded="OpenEnded";a.Block="Block";a.Crossed="Crossed"})(b.GeometricEffectArrowType||(b.GeometricEffectArrowType={}));b.GeometricEffectControlMeasureLineRule=void 0;(function(a){a.FullGeometry="FullGeometry";a.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment";a.ReversedFirstSegment="ReversedFirstSegment";a.PerpendicularToSecondSegment="PerpendicularToSecondSegment";
a.SecondSegmentWithTicks="SecondSegmentWithTicks";a.DoublePerpendicular="DoublePerpendicular";a.OppositeToFirstSegment="OppositeToFirstSegment";a.TriplePerpendicular="TriplePerpendicular";a.HalfCircleFirstSegment="HalfCircleFirstSegment";a.HalfCircleSecondSegment="HalfCircleSecondSegment";a.HalfCircleExtended="HalfCircleExtended";a.OpenCircle="OpenCircle";a.CoverageEdgesWithTicks="CoverageEdgesWithTicks";a.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks";a.GapExtentMidline="GapExtentMidline";a.Chevron=
"Chevron";a.PerpendicularWithArc="PerpendicularWithArc";a.ClosedHalfCircle="ClosedHalfCircle";a.TripleParallelExtended="TripleParallelExtended";a.ParallelWithTicks="ParallelWithTicks";a.Parallel="Parallel";a.PerpendicularToFirstSegment="PerpendicularToFirstSegment";a.ParallelOffset="ParallelOffset";a.OffsetOpposite="OffsetOpposite";a.OffsetSame="OffsetSame";a.CircleWithArc="CircleWithArc";a.DoubleJog="DoubleJog";a.PerpendicularOffset="PerpendicularOffset";a.LineExcludingLastSegment="LineExcludingLastSegment";
a.MultivertexArrow="MultivertexArrow";a.CrossedArrow="CrossedArrow";a.ChevronArrow="ChevronArrow";a.ChevronArrowOffset="ChevronArrowOffset";a.PartialFirstSegment="PartialFirstSegment";a.Arch="Arch";a.CurvedParallelTicks="CurvedParallelTicks";a.Arc90Degrees="Arc90Degrees"})(b.GeometricEffectControlMeasureLineRule||(b.GeometricEffectControlMeasureLineRule={}));b.GeometricEffectDonutMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square";a.TrueBuffer=
"TrueBuffer"})(b.GeometricEffectDonutMethod||(b.GeometricEffectDonutMethod={}));b.GeometricEffectEnclosingPolygonMethod=void 0;(function(a){a.ClosePath="ClosePath";a.ConvexHull="ConvexHull";a.RectangularBox="RectangularBox"})(b.GeometricEffectEnclosingPolygonMethod||(b.GeometricEffectEnclosingPolygonMethod={}));b.GeometricEffectExtensionOrigin=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectExtensionOrigin||(b.GeometricEffectExtensionOrigin={}));
b.GeometricEffectOffsetMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square"})(b.GeometricEffectOffsetMethod||(b.GeometricEffectOffsetMethod={}));b.GeometricEffectOffsetOption=void 0;(function(a){a.Fast="Fast";a.Accurate="Accurate"})(b.GeometricEffectOffsetOption||(b.GeometricEffectOffsetOption={}));b.GeometricEffectOffsetTangentMethod=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectOffsetTangentMethod||
(b.GeometricEffectOffsetTangentMethod={}));b.GeometricEffectWaveform=void 0;(function(a){a.Sinus="Sinus";a.Square="Square";a.Triangle="Triangle";a.Random="Random"})(b.GeometricEffectWaveform||(b.GeometricEffectWaveform={}));b.GlyphHinting=void 0;(function(a){a[a.None=0]="None";a[a.Default=1]="Default";a[a.Force=2]="Force"})(b.GlyphHinting||(b.GlyphHinting={}));b.GradientAlignment=void 0;(function(a){a[a.Buffered=0]="Buffered";a[a.Left=1]="Left";a[a.Right=2]="Right";a[a.AlongLine=3]="AlongLine"})(b.GradientAlignment||
(b.GradientAlignment={}));b.GradientFillMethod=void 0;(function(a){a[a.Linear=0]="Linear";a[a.Rectangular=1]="Rectangular";a[a.Circular=2]="Circular";a[a.Buffered=3]="Buffered"})(b.GradientFillMethod||(b.GradientFillMethod={}));b.GradientStrokeType=void 0;(function(a){a[a.Discrete=0]="Discrete";a[a.Continuous=1]="Continuous"})(b.GradientStrokeType||(b.GradientStrokeType={}));b.GradientStrokeMethod=void 0;(function(a){a[a.AcrossLine=0]="AcrossLine";a[a.AloneLine=1]="AloneLine"})(b.GradientStrokeMethod||
(b.GradientStrokeMethod={}));b.HorizontalAlignment=void 0;(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Center=2]="Center";a[a.Justify=3]="Justify"})(b.HorizontalAlignment||(b.HorizontalAlignment={}));b.LeaderLineStyle=void 0;(function(a){a[a.Base=0]="Base";a[a.MidPoint=1]="MidPoint";a[a.ThreePoint=2]="ThreePoint";a[a.FourPoint=3]="FourPoint";a[a.Underline=4]="Underline";a[a.CircularCW=5]="CircularCW";a[a.CircularCCW=6]="CircularCCW"})(b.LeaderLineStyle||(b.LeaderLineStyle={}));b.LineCapStyle=
void 0;(function(a){a.Butt="Butt";a.Round="Round";a.Square="Square"})(b.LineCapStyle||(b.LineCapStyle={}));b.LineDashEnding=void 0;(function(a){a.NoConstraint="NoConstraint";a.HalfPattern="HalfPattern";a.HalfGap="HalfGap";a.FullPattern="FullPattern";a.FullGap="FullGap";a.Custom="Custom"})(b.LineDashEnding||(b.LineDashEnding={}));b.LineDecorationStyle=void 0;(function(a){a[a.None=-1]="None";a[a.Custom=0]="Custom";a[a.Circle=1]="Circle";a[a.OpenArrow=2]="OpenArrow";a[a.ClosedArrow=3]="ClosedArrow";
a[a.Diamond=4]="Diamond"})(b.LineDecorationStyle||(b.LineDecorationStyle={}));b.LineGapType=void 0;(function(a){a[a.ExtraLeading=0]="ExtraLeading";a[a.Multiple=1]="Multiple";a[a.Exact=2]="Exact"})(b.LineGapType||(b.LineGapType={}));b.LineJoinStyle=void 0;(function(a){a.Bevel="Bevel";a.Round="Round";a.Miter="Miter"})(b.LineJoinStyle||(b.LineJoinStyle={}));b.ExpressionReturnType=void 0;(function(a){a[a.Default=0]="Default";a[a.String=1]="String";a[a.Numeric=2]="Numeric"})(b.ExpressionReturnType||(b.ExpressionReturnType=
{}));b.MarkerPlacementType=void 0;(function(a){a[a.InsidePolygon=0]="InsidePolygon";a[a.PolygonCenter=1]="PolygonCenter";a[a.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(b.MarkerPlacementType||(b.MarkerPlacementType={}));b.MaterialMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Replace=1]="Replace";a[a.Multiply=2]="Multiply"})(b.MaterialMode||(b.MaterialMode={}));b.PlacementClip=void 0;(function(a){a[a.ClipAtBoundary=0]="ClipAtBoundary";a[a.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary";
a[a.DoNotTouchBoundary=2]="DoNotTouchBoundary";a[a.DoNotClip=3]="DoNotClip"})(b.PlacementClip||(b.PlacementClip={}));b.PlacementEndings=void 0;(function(a){a.NoConstraint="NoConstraint";a.WithMarkers="WithMarkers";a.WithFullGap="WithFullGap";a.WithHalfGap="WithHalfGap";a.Custom="Custom"})(b.PlacementEndings||(b.PlacementEndings={}));b.PlacementGridType=void 0;(function(a){a.Fixed="Fixed";a.Random="Random";a.RandomFixedQuantity="RandomFixedQuantity"})(b.PlacementGridType||(b.PlacementGridType={}));
b.PlacementOnLineRelativeTo=void 0;(function(a){a.LineMiddle="LineMiddle";a.LineBeginning="LineBeginning";a.LineEnd="LineEnd";a.SegmentMidpoint="SegmentMidpoint"})(b.PlacementOnLineRelativeTo||(b.PlacementOnLineRelativeTo={}));b.PlacementPolygonCenterMethod=void 0;(function(a){a.OnPolygon="OnPolygon";a.CenterOfMass="CenterOfMass";a.BoundingBoxCenter="BoundingBoxCenter"})(b.PlacementPolygonCenterMethod||(b.PlacementPolygonCenterMethod={}));b.PlacementRandomlyAlongLineRandomization=void 0;(function(a){a[a.Low=
0]="Low";a[a.Medium=1]="Medium";a[a.High=2]="High"})(b.PlacementRandomlyAlongLineRandomization||(b.PlacementRandomlyAlongLineRandomization={}));b.PlacementStepPosition=void 0;(function(a){a[a.MarkerCenter=0]="MarkerCenter";a[a.MarkerBounds=1]="MarkerBounds"})(b.PlacementStepPosition||(b.PlacementStepPosition={}));b.PointSymbolCalloutScale=void 0;(function(a){a[a.None=0]="None";a[a.PropUniform=1]="PropUniform";a[a.PropNonuniform=2]="PropNonuniform";a[a.DifUniform=3]="DifUniform";a[a.DifNonuniform=
4]="DifNonuniform"})(b.PointSymbolCalloutScale||(b.PointSymbolCalloutScale={}));b.Simple3DLineStyle=void 0;(function(a){a.Tube="Tube";a.Strip="Strip";a.Wall="Wall"})(b.Simple3DLineStyle||(b.Simple3DLineStyle={}));b.SizeVariationMethod=void 0;(function(a){a[a.Random=0]="Random";a[a.Increasing=1]="Increasing";a[a.Decreasing=2]="Decreasing";a[a.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(b.SizeVariationMethod||(b.SizeVariationMethod={}));b.SymbolUnits=void 0;(function(a){a[a.Relative=0]=
"Relative";a[a.Absolute=1]="Absolute"})(b.SymbolUnits||(b.SymbolUnits={}));b.TextCase=void 0;(function(a){a[a.Normal=0]="Normal";a[a.LowerCase=1]="LowerCase";a[a.Allcaps=2]="Allcaps"})(b.TextCase||(b.TextCase={}));b.TextReadingDirection=void 0;(function(a){a[a.LTR=0]="LTR";a[a.RTL=1]="RTL"})(b.TextReadingDirection||(b.TextReadingDirection={}));b.TextureFilter=void 0;(function(a){a.Draft="Draft";a.Picture="Picture";a.Text="Text"})(b.TextureFilter||(b.TextureFilter={}));b.VerticalAlignment=void 0;(function(a){a[a.Top=
0]="Top";a[a.Center=1]="Center";a[a.Baseline=2]="Baseline";a[a.Bottom=3]="Bottom"})(b.VerticalAlignment||(b.VerticalAlignment={}));b.VerticalGlyphOrientation=void 0;(function(a){a[a.Right=0]="Right";a[a.Upright=1]="Upright"})(b.VerticalGlyphOrientation||(b.VerticalGlyphOrientation={}));b.WaterbodySize=void 0;(function(a){a[a.Small=0]="Small";a[a.Medium=1]="Medium";a[a.Large=2]="Large"})(b.WaterbodySize||(b.WaterbodySize={}));b.WaveStrength=void 0;(function(a){a[a.Calm=0]="Calm";a[a.Rippled=1]="Rippled";
a[a.Slight=2]="Slight";a[a.Moderate=3]="Moderate"})(b.WaveStrength||(b.WaveStrength={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(b,a,x,r,q,h,u,e,l,d,k,c){b.CapType=void 0;(function(L){L[L.BUTT=0]="BUTT";L[L.ROUND=1]="ROUND";L[L.SQUARE=2]="SQUARE";L[L.UNKNOWN=4]="UNKNOWN"})(b.CapType||(b.CapType={}));let f=function(){function L(G,w,A,H){this.type=G;this.typeName=w.type;this.id=w.id;this.source=w.source;this.sourceLayer=w["source-layer"];this.minzoom=w.minzoom;this.maxzoom=w.maxzoom;this.filter=w.filter;this.layout=w.layout;this.paint=w.paint;this.z=A;this.uid=H;switch(G){case d.StyleLayerType.BACKGROUND:this._layoutDefinition=
d.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=d.StyleDefinition.backgroundPaintDefinition;break;case d.StyleLayerType.FILL:this._layoutDefinition=d.StyleDefinition.fillLayoutDefinition;this._paintDefinition=d.StyleDefinition.fillPaintDefinition;break;case d.StyleLayerType.LINE:this._layoutDefinition=d.StyleDefinition.lineLayoutDefinition;this._paintDefinition=d.StyleDefinition.linePaintDefinition;break;case d.StyleLayerType.SYMBOL:this._layoutDefinition=d.StyleDefinition.symbolLayoutDefinition;
this._paintDefinition=d.StyleDefinition.symbolPaintDefinition;break;case d.StyleLayerType.CIRCLE:this._layoutDefinition=d.StyleDefinition.circleLayoutDefinition,this._paintDefinition=d.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var z=L.prototype;z.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=l.createFilter(this.filter)};z.getLayoutProperty=
function(G){return this._layoutProperties[G]};z.getPaintProperty=function(G){return this._paintProperties[G]};z.getLayoutValue=function(G,w,A){let H;const E=this._layoutProperties[G];E&&(H=E.getValue(w,A));void 0===H&&(H=this._layoutDefinition[G]["default"]);return H};z.getPaintValue=function(G,w,A){let H;const E=this._paintProperties[G];E&&(H=E.getValue(w,A));void 0===H&&(H=this._paintDefinition[G]["default"]);return H};z.isPainterDataDriven=function(){const G=this._paintProperties;if(G)for(const w in G)if(G[w].isDataDriven)return!0;
return!1};z._parseLayout=function(G){const w={};for(const A in G){const H=this._layoutDefinition[A];H&&(w[A]=new k(H,G[A]))}return w};z._parsePaint=function(G){const w={};for(const A in G){const H=this._paintDefinition[A];H&&(w[A]=new k(H,G[A]))}return w};z.computeAttributesKey=function(G,w,A,H){let E=0,M=0;for(const P of w){w=3;if(!P||P!==H){const {isLayout:O,isOptional:Q}=A[P];w=O?this.getLayoutProperty(P):this.getPaintProperty(P);w=w?.interpolator?2:w?.isDataDriven?1:Q&&!w?3:0}M|=w<<E;E+=2}return M<<
3|G};return a._createClass(L)}(),p=function(L){function z(w,A,H,E){w=G.call(this,w,A,H,E);w.backgroundMaterial=new r.VTLBackgroundMaterial(w.computeAttributesKey(x.ShaderProgramType.BACKGROUND,r.VTLBackgroundMaterial.ATTRIBUTES,r.VTLBackgroundMaterial.ATTRIBUTES_INFO));return w}a._inherits(z,L);var G=a._createSuper(z);return a._createClass(z)}(f),n=function(L){function z(w,A,H,E){w=G.call(this,w,A,H,E);A=w.getPaintProperty("fill-color");H=w.getPaintProperty("fill-opacity");E=w.getPaintProperty("fill-pattern");
w.hasDataDrivenColor=A?.isDataDriven;w.hasDataDrivenOpacity=H?.isDataDriven;w.hasDataDrivenFill=w.hasDataDrivenColor||w.hasDataDrivenOpacity||E?.isDataDriven;H=w.getPaintProperty("fill-outline-color");w.outlineUsesFillColor=!H;w.hasDataDrivenOutlineColor=H?.isDataDriven;w.hasDataDrivenOutline=H?H.isDataDriven:A?A.isDataDriven:!1;w.hasDataDrivenOutline=(H?w.hasDataDrivenOutlineColor:w.hasDataDrivenColor)||w.hasDataDrivenOpacity;w.fillMaterial=new h.VTLFillMaterial(w.computeAttributesKey(x.ShaderProgramType.FILL,
h.VTLFillMaterial.ATTRIBUTES,h.VTLFillMaterial.ATTRIBUTES_INFO));w.outlineMaterial=new h.VTLOutlineMaterial(w.computeAttributesKey(x.ShaderProgramType.OUTLINE,w.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_FILL:h.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,w.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:h.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),w.outlineUsesFillColor);return w}a._inherits(z,L);var G=a._createSuper(z);return a._createClass(z)}(f),y=function(L){function z(w,A,
H,E){w=G.call(this,w,A,H,E);A=w.getPaintProperty("line-pattern");w.lineMaterial=new u.VTLLineMaterial(w.computeAttributesKey(x.ShaderProgramType.LINE,u.VTLLineMaterial.ATTRIBUTES,u.VTLLineMaterial.ATTRIBUTES_INFO,A?"line-dasharray":""));w.hasDataDrivenLine=w.getPaintProperty("line-blur")?.isDataDriven||w.getPaintProperty("line-color")?.isDataDriven||w.getPaintProperty("line-gap-width")?.isDataDriven||w.getPaintProperty("line-offset")?.isDataDriven||w.getPaintProperty("line-opacity")?.isDataDriven||
w.getPaintProperty("line-pattern")?.isDataDriven||w.getPaintProperty("line-dasharray")?.isDataDriven||w.getLayoutProperty("line-cap")?.isDataDriven||w.getPaintProperty("line-width")?.isDataDriven;w.canUseThinTessellation=!1;!w.hasDataDrivenLine&&(A=w.getPaintProperty("line-width"),!A||"number"===typeof A&&.5*A<c.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(A=w.getPaintProperty("line-offset"),!A||"number"===typeof A&&0===A)&&(w.canUseThinTessellation=!0);return w}a._inherits(z,L);var G=a._createSuper(z);z.prototype.getDashKey=
function(w,A){switch(A){case b.CapType.BUTT:A="Butt";break;case b.CapType.ROUND:A="Round";break;case b.CapType.SQUARE:A="Square";break;default:A="Butt"}return`dasharray-[${w.toString()}]-${A}`};return a._createClass(z)}(f),D=function(L){function z(w,A,H,E){w=G.call(this,w,A,H,E);w.iconMaterial=new e.VTLIconMaterial(w.computeAttributesKey(x.ShaderProgramType.ICON,e.VTLIconMaterial.ATTRIBUTES,e.VTLIconMaterial.ATTRIBUTES_INFO));w.textMaterial=new e.VTLTextMaterial(w.computeAttributesKey(x.ShaderProgramType.TEXT,
e.VTLTextMaterial.ATTRIBUTES,e.VTLTextMaterial.ATTRIBUTES_INFO));w.hasDataDrivenIcon=w.getPaintProperty("icon-color")?.isDataDriven||w.getPaintProperty("icon-halo-blur")?.isDataDriven||w.getPaintProperty("icon-halo-color")?.isDataDriven||w.getPaintProperty("icon-halo-width")?.isDataDriven||w.getPaintProperty("icon-opacity")?.isDataDriven||w.getLayoutProperty("icon-size")?.isDataDriven;w.hasDataDrivenText=w.getPaintProperty("text-color")?.isDataDriven||w.getPaintProperty("text-halo-blur")?.isDataDriven||
w.getPaintProperty("text-halo-color")?.isDataDriven||w.getPaintProperty("text-halo-width")?.isDataDriven||w.getPaintProperty("text-opacity")?.isDataDriven||w.getLayoutProperty("text-size")?.isDataDriven;return w}a._inherits(z,L);var G=a._createSuper(z);return a._createClass(z)}(f),F=function(L){function z(w,A,H,E){w=G.call(this,w,A,H,E);w.circleMaterial=new q.VTLCircleMaterial(w.computeAttributesKey(x.ShaderProgramType.CIRCLE,q.VTLCircleMaterial.ATTRIBUTES,q.VTLCircleMaterial.ATTRIBUTES_INFO));return w}
a._inherits(z,L);var G=a._createSuper(z);return a._createClass(z)}(f),C=function(){function L(z,G,w){this.allowOverlap=z.getLayoutValue("icon-allow-overlap",G);this.ignorePlacement=z.getLayoutValue("icon-ignore-placement",G);this.keepUpright=z.getLayoutValue("icon-keep-upright",G);this.optional=z.getLayoutValue("icon-optional",G);this.rotationAlignment=z.getLayoutValue("icon-rotation-alignment",G);this.rotationAlignment===d.RotationAlignment.AUTO&&(this.rotationAlignment=w?d.RotationAlignment.MAP:
d.RotationAlignment.VIEWPORT);w=z.getLayoutProperty("icon-anchor");w?.isDataDriven?this._anchorProp=w:this.anchor=z.getLayoutValue("icon-anchor",G);w=z.getLayoutProperty("icon-offset");w?.isDataDriven?this._offsetProp=w:this.offset=z.getLayoutValue("icon-offset",G);w=z.getLayoutProperty("icon-padding");w?.isDataDriven?this._paddingProp=w:this.padding=z.getLayoutValue("icon-padding",G);w=z.getLayoutProperty("icon-rotate");w?.isDataDriven?this._rotateProp=w:this.rotate=z.getLayoutValue("icon-rotate",
G);w=z.getLayoutProperty("icon-size");w?.isDataDriven?this._sizeProp=w:this.size=z.getLayoutValue("icon-size",G)}L.prototype.update=function(z,G){this._anchorProp&&(this.anchor=this._anchorProp.getValue(z,G));this._offsetProp&&(this.offset=this._offsetProp.getValue(z,G));this._paddingProp&&(this.padding=this._paddingProp.getValue(z,G));this._rotateProp&&(this.rotate=this._rotateProp.getValue(z,G));this._sizeProp&&(this.size=this._sizeProp.getValue(z,G))};return a._createClass(L)}(),J=function(){function L(z,
G,w){this.allowOverlap=z.getLayoutValue("text-allow-overlap",G);this.ignorePlacement=z.getLayoutValue("text-ignore-placement",G);this.keepUpright=z.getLayoutValue("text-keep-upright",G);this.optional=z.getLayoutValue("text-optional",G);this.rotationAlignment=z.getLayoutValue("text-rotation-alignment",G);this.rotationAlignment===d.RotationAlignment.AUTO&&(this.rotationAlignment=w?d.RotationAlignment.MAP:d.RotationAlignment.VIEWPORT);w=z.getLayoutProperty("text-anchor");w?.isDataDriven?this._anchorProp=
w:this.anchor=z.getLayoutValue("text-anchor",G);w=z.getLayoutProperty("text-justify");w?.isDataDriven?this._justifyProp=w:this.justify=z.getLayoutValue("text-justify",G);w=z.getLayoutProperty("text-letter-spacing");w?.isDataDriven?this._letterSpacingProp=w:this.letterSpacing=z.getLayoutValue("text-letter-spacing",G);w=z.getLayoutProperty("text-line-height");w?.isDataDriven?this._lineHeightProp=w:this.lineHeight=z.getLayoutValue("text-line-height",G);w=z.getLayoutProperty("text-max-angle");w?.isDataDriven?
this._maxAngleProp=w:this.maxAngle=z.getLayoutValue("text-max-angle",G);w=z.getLayoutProperty("text-max-width");w?.isDataDriven?this._maxWidthProp=w:this.maxWidth=z.getLayoutValue("text-max-width",G);w=z.getLayoutProperty("text-offset");w?.isDataDriven?this._offsetProp=w:this.offset=z.getLayoutValue("text-offset",G);w=z.getLayoutProperty("text-padding");w?.isDataDriven?this._paddingProp=w:this.padding=z.getLayoutValue("text-padding",G);w=z.getLayoutProperty("text-rotate");w?.isDataDriven?this._rotateProp=
w:this.rotate=z.getLayoutValue("text-rotate",G);w=z.getLayoutProperty("text-size");w?.isDataDriven?this._sizeProp=w:this.size=z.getLayoutValue("text-size",G);w=z.getLayoutProperty("text-writing-mode");w?.isDataDriven?this._writingModeProp=w:this.writingMode=z.getLayoutValue("text-writing-mode",G)}L.prototype.update=function(z,G){this._anchorProp&&(this.anchor=this._anchorProp.getValue(z,G));this._justifyProp&&(this.justify=this._justifyProp.getValue(z,G));this._letterSpacingProp&&(this.letterSpacing=
this._letterSpacingProp.getValue(z,G));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(z,G));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(z,G));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(z,G));this._offsetProp&&(this.offset=this._offsetProp.getValue(z,G));this._paddingProp&&(this.padding=this._paddingProp.getValue(z,G));this._rotateProp&&(this.rotate=this._rotateProp.getValue(z,G));this._sizeProp&&(this.size=this._sizeProp.getValue(z,G));
this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(z,G))};return a._createClass(L)}();b.BackgroundStyleLayer=p;b.CircleStyleLayer=F;b.FillStyleLayer=n;b.IconLayout=C;b.LineStyleLayer=y;b.StyleLayer=f;b.SymbolStyleLayer=D;b.TextLayout=J;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/enums":function(){define(["exports"],function(b){b.BucketType=void 0;(function(a){a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.SYMBOL=3]="SYMBOL";a[a.CIRCLE=
4]="CIRCLE"})(b.BucketType||(b.BucketType={}));b.ShaderProgramType=void 0;(function(a){a[a.BACKGROUND=0]="BACKGROUND";a[a.FILL=1]="FILL";a[a.OUTLINE=2]="OUTLINE";a[a.LINE=3]="LINE";a[a.ICON=4]="ICON";a[a.CIRCLE=5]="CIRCLE";a[a.TEXT=6]="TEXT";a[a.TILEINFO=7]="TILEINFO"})(b.ShaderProgramType||(b.ShaderProgramType={}));b.StyleUpdateType=void 0;(function(a){a[a.PAINTER_CHANGED=0]="PAINTER_CHANGED";a[a.LAYOUT_CHANGED=1]="LAYOUT_CHANGED";a[a.LAYER_CHANGED=2]="LAYER_CHANGED";a[a.LAYER_REMOVED=3]="LAYER_REMOVED";
a[a.SPRITES_CHANGED=4]="SPRITES_CHANGED"})(b.StyleUpdateType||(b.StyleUpdateType={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,x,r,q){x=function(h){function u(l){return e.call(this,l)}a._inherits(u,h);var e=a._createSuper(u);h=u.prototype;
h.geometryInfo=function(){return u.GEOMETRY_LAYOUT};h.opacityInfo=function(){return null};h.attributes=function(){return u.ATTRIBUTES};h.attributesInfo=function(){return u.ATTRIBUTES_INFO};return a._createClass(u)}(x.VTLMaterial);x.ATTRIBUTES=[];x.GEOMETRY_LAYOUT=[new q.VertexElementDescriptor("a_pos",2,r.DataType.BYTE,0,2)];x.ATTRIBUTES_INFO={};b.VTLBackgroundMaterial=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../MemoryBuffer ./enums ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,x,r,q,h,u){let e=function(){function k(f){this._locations=new Map;this._key=f}var c=k.prototype;c.defines=function(){return[]};c.getStride=function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};c.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};c.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};c.getEncodingInfos=function(){this._propertyEncodingInfo||this._buildAttributesInfo();
return this._propertyEncodingInfo};c.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};c.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};c.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};c.setDataUniforms=function(f,p,n,y,D){var F=this.getUniforms();for(const C of F){const {name:J,type:L,getValue:z}=C;F=z(n,p,y,D);if(null!==F)switch(L){case "float":f.setUniform1f(J,
F);break;case "vec2":f.setUniform2fv(J,F);break;case "vec4":f.setUniform4fv(J,F)}}};c.encodeAttributes=function(f,p,n,y){const D=this.attributesInfo(),F=this.getEncodingInfos(),C=[];let J=0,L=0;for(const G of Object.keys(F)){var z=F[G];const {type:w,precisionFactor:A,isLayout:H}=D[G],E=H?n.getLayoutProperty(G):n.getPaintProperty(G),M=E.interpolator?.getInterpolationRange(p);let P=0;for(const O of z){const {offset:Q,bufferElementsToAdd:S}=O;if(0<S){for(z=0;z<S;z++)C.push(0);J+=L;L=O.bufferElementsToAdd}z=
y??E.getValue(M?M[P]:p,f);switch(w){case q.EncodingType.R8_SIGNED:case q.EncodingType.R8_UNSIGNED:C[J]|=this._encodeByte(z*(A||1),8*Q);break;case q.EncodingType.R16_SIGNED:case q.EncodingType.R16_UNSIGNED:C[J]|=this._encodeShort(z*(A||1),8*Q);break;case q.EncodingType.R8G8_SIGNED:case q.EncodingType.R8G8_UNSIGNED:C[J]|=this._encodeByte(z*(A||1),8*Q);C[J]|=this._encodeByte(z*(A||1),8*Q+8);break;case q.EncodingType.R16G16_SIGNED:case q.EncodingType.R16G16_UNSIGNED:C[J]|=this._encodeShort(z*(A||1),8*
Q);C[J]|=this._encodeShort(z*(A||1),8*Q+16);break;case q.EncodingType.R8G8B8A8_SIGNED:case q.EncodingType.R8G8B8A8_UNSIGNED:C[J]|=this._encodeByte(z*(A||1),8*Q);C[J]|=this._encodeByte(z*(A||1),8*Q+8);C[J]|=this._encodeByte(z*(A||1),8*Q+16);C[J]|=this._encodeByte(z*(A||1),8*Q+24);break;case q.EncodingType.R8G8B8A8_COLOR:C[J]=this._encodeColor(z);break;case q.EncodingType.R16G16B16A16_DASHARRAY:case q.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(J,C,z);break;default:throw Error("Unsupported encoding type");
}P++}}return C};c.getAtributeState=function(f){const p=3+2*f;f=0|this._bit(p);return f|=this._bit(p+1)<<1};c._buildAttributesInfo=function(){const f=[],p={};var n={},y=-1;const D=this.attributesInfo();var F=this.attributes();let C=-1;for(const G of F){C++;F=this.getAtributeState(C);if(F===q.AttributeStatus.UNIFORM||F===q.AttributeStatus.UNUSED)continue;var J=D[G];const w=[];p[G]=w;J=J.type;for(let A=0;A<F;A++){const {dataType:H,bytesPerElement:E,count:M,normalized:P}=k._encodingInfo[J],O=E*M;var L=
`${H}-${!0===P}`;let Q=n[L],S=0;!Q||4<Q.count+M?(y++,Q={dataIndex:y,count:0,offset:0},4!==M&&(n[L]=Q),f.push({location:-1,name:"a_data_"+y,count:M,type:H,normalized:P}),S=Math.ceil(Math.max(O/4,1))):(L=f[Q.dataIndex],L.count+=M,S=Math.ceil(Math.max(L.count*E/4,1))-Math.ceil(Math.max(Q.offset/4,1)));w.push({dataIndex:Q.dataIndex,offset:Q.offset,bufferElementsToAdd:S});Q.offset+=O;Q.count+=M}}for(const G of f)switch(G.type){case h.DataType.BYTE:case h.DataType.UNSIGNED_BYTE:G.count=4;break;case h.DataType.SHORT:case h.DataType.UNSIGNED_SHORT:G.count+=
G.count%2}this._buildVertexBufferLayout(f);n=0;y=this._layoutInfo.geometry;for(var z of y)this._locations.set(z.name,n++);if(z=this._layoutInfo.opacity)for(const G of z)this._locations.set(G.name,n++);this._buildShaderInfo(f,p);this._propertyEncodingInfo=p};c._buildVertexBufferLayout=function(f){const p={},n=this.geometryInfo();let y=n[0].stride;if(0===f.length)p.geometry=n;else{const D=[];let F=y;for(const C of f)y+=l(C.type)*C.count;for(const C of n)D.push(new u.VertexElementDescriptor(C.name,C.count,
C.type,C.offset,y,C.normalized));for(const C of f)D.push(new u.VertexElementDescriptor(C.name,C.count,C.type,F,y,C.normalized)),F+=l(C.type)*C.count;p.geometry=D}this.opacityInfo()&&(p.opacity=this.opacityInfo());this._layoutInfo=p;this._stride=y};c._buildShaderInfo=function(f,p){let n="\n",y="\n";const D=[];for(var F of f)n+=`attribute ${this._getType(F.count)} ${F.name};\n`;var C=this.attributes();f=this.attributesInfo();F=-1;for(const z of C){F++;const {name:G,type:w,precisionFactor:A,isLayout:H}=
f[z];C=A&&1!==A?` * ${1/A}`:"";const {bytesPerElement:E,count:M}=k._encodingInfo[w];var J=P=>`a_data_${P.dataIndex}${d(M,P.offset,E)}`;switch(this.getAtributeState(F)){case q.AttributeStatus.UNIFORM:C=this._getType(M);var L=`u_${G}`;D.push({name:L,type:C,getValue:(O,Q,S,U)=>{S=H?O.getLayoutValue(z,Q):O.getPaintValue(z,Q);if(w===q.EncodingType.R16G16B16A16_DASHARRAY){O=O.getDashKey(S,O.getLayoutValue("line-cap",Q));U=U.getMosaicItemPosition(O,!1);if(x.isNone(U))return null;const {tl:Y,br:Z}=U;return[Y[0],
Z[1],Z[0],Y[1]]}if(w===q.EncodingType.R16G16B16A16_PATTERN){U=U.getMosaicItemPosition(S,!z.includes("line-"));if(x.isNone(U))return null;const {tl:Y,br:Z}=U;return[Y[0],Z[1],Z[0],Y[1]]}return w===q.EncodingType.R8G8B8A8_COLOR?(U=S[3],[U*S[0],U*S[1],U*S[2],U]):S}});n+=`uniform ${C} ${L};\n`;y+=`${C} ${G} = ${L};\n`;break;case q.AttributeStatus.DATA_DRIVEN:L=J(p[z][0]);y+=`${this._getType(M)} ${G} = ${L}${C};\n`;break;case q.AttributeStatus.INTERPOLATED_DATA_DRIVEN:L=`u_t_${G}`;D.push({name:L,type:"float",
getValue:(O,Q,S,U)=>(H?O.getLayoutProperty(z):O.getPaintProperty(z)).interpolator.interpolationUniformValue(S,Q)});n+=`uniform float ${L};\n`;const P=J(p[z][0]);J=J(p[z][1]);y+=`${this._getType(M)} ${G} = mix(${P}${C}, ${J}${C}, ${L});\n`}}this._shaderHeader=n;this._shaderMain=y;this._uniforms=D};c._bit=function(f){return(this._key&1<<f)>>f};c._getType=function(f){switch(f){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};c._encodeColor=
function(f){const p=255*f[3];return r.i8888to32(f[0]*p,f[1]*p,f[2]*p,p)};c._encodePattern=function(f,p,n){if(n&&n.rect){var y=n.rect,D=n.width;n=n.height;p[f]=this._encodeShort(y.x+2,0);p[f]|=this._encodeShort(y.y+2+n,16);p[f+1]=this._encodeShort(y.x+2+D,0);p[f+1]|=this._encodeShort(y.y+2,16)}};c._encodeByte=function(f,p){return(f&255)<<p};c._encodeShort=function(f,p){return(f&65535)<<p};a._createClass(k,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);
return k}();e._encodingInfo={[q.EncodingType.R8_SIGNED]:{dataType:h.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[q.EncodingType.R8_UNSIGNED]:{dataType:h.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[q.EncodingType.R16_SIGNED]:{dataType:h.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[q.EncodingType.R16_UNSIGNED]:{dataType:h.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[q.EncodingType.R8G8_SIGNED]:{dataType:h.DataType.BYTE,bytesPerElement:1,
count:2,normalized:!1},[q.EncodingType.R8G8_UNSIGNED]:{dataType:h.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[q.EncodingType.R16G16_SIGNED]:{dataType:h.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[q.EncodingType.R16G16_UNSIGNED]:{dataType:h.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[q.EncodingType.R8G8B8A8_SIGNED]:{dataType:h.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[q.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:h.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[q.EncodingType.R8G8B8A8_COLOR]:{dataType:h.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[q.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:h.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[q.EncodingType.R16G16B16A16_PATTERN]:{dataType:h.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const l=k=>{switch(k){case h.DataType.FLOAT:return 4;case h.DataType.INT:return 4;case h.DataType.UNSIGNED_INT:return 4;
case h.DataType.SHORT:return 2;case h.DataType.UNSIGNED_SHORT:return 2;case h.DataType.BYTE:return 1;case h.DataType.UNSIGNED_BYTE:return 1}},d=(k,c,f)=>{c/=f;if(1===k)switch(c){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===k)switch(c){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===k)switch(c){case 0:return".xyz";case 1:return".yzw"}return""};b.VTLMaterial=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],
function(b){return function(){function a(r){this._array=[];0>=r&&console.error("strideInBytes must be positive!");this._stride=r}var x=a.prototype;x.reset=function(){this.array.length=0};x.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(r,q){return 65535&r|q<<16};a.i8888to32=function(r,q,h,u){return r&255|(q&255)<<8|(h&255)<<16|u<<24};a.i8816to32=function(r,q,h){return r&255|(q&255)<<8|h<<16};b._createClass(a,[{key:"array",get:function(){return this._array}},
{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}}]);return a}()})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(b){b.EncodingType=void 0;(function(a){a[a.R8_SIGNED=0]="R8_SIGNED";a[a.R8_UNSIGNED=1]="R8_UNSIGNED";a[a.R16_SIGNED=2]="R16_SIGNED";a[a.R16_UNSIGNED=3]="R16_UNSIGNED";a[a.R8G8_SIGNED=4]="R8G8_SIGNED";a[a.R8G8_UNSIGNED=
5]="R8G8_UNSIGNED";a[a.R16G16_SIGNED=6]="R16G16_SIGNED";a[a.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";a[a.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";a[a.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";a[a.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";a[a.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";a[a.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(b.EncodingType||(b.EncodingType={}));b.AttributeStatus=void 0;(function(a){a[a.UNIFORM=0]="UNIFORM";a[a.DATA_DRIVEN=1]="DATA_DRIVEN";a[a.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";
a[a.UNUSED=3]="UNUSED"})(b.AttributeStatus||(b.AttributeStatus={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],function(b){b.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT";a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(b.ClearBufferBit||(b.ClearBufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";
a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType={}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";
a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||
(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"})(b.BufferType||(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=
1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=
514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=
void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||
(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";
a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=
33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=
33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";
a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||
(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=
5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";
a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";
a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget=
{}));b.TargetType=void 0;(function(a){a[a.TEXTURE=0]="TEXTURE";a[a.RENDER_BUFFER=1]="RENDER_BUFFER";a[a.CUBEMAP=2]="CUBEMAP"})(b.TargetType||(b.TargetType={}));b.DepthStencilTargetType=void 0;(function(a){a[a.NONE=0]="NONE";a[a.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER";a[a.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER";a[a.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER";a[a.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"})(b.DepthStencilTargetType||(b.DepthStencilTargetType={}));
b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";a[a.Sync=7]="Sync";a[a.COUNT=8]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=
36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]=
"COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=
33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=
37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";
a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";
a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]=
"INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=
37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=
37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.BASE_TEXTURE_UNIT=33984;b.DepthStencilAttachment=33306;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/VertexElementDescriptor":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers"],function(b,a){a=a._createClass(function(x,r,q,h,u,e=!1,l=0){this.name=x;this.count=r;this.type=q;this.offset=h;this.stride=u;this.normalized=e;this.divisor=l});b.VertexElementDescriptor=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,x,r,q,h){r=function(u){function e(d){return l.call(this,d)}a._inherits(e,u);var l=a._createSuper(e);u=e.prototype;u.geometryInfo=function(){return e.GEOMETRY_LAYOUT};u.opacityInfo=function(){return null};u.attributes=function(){return e.ATTRIBUTES};u.attributesInfo=function(){return e.ATTRIBUTES_INFO};return a._createClass(e)}(r.VTLMaterial);r.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");r.GEOMETRY_LAYOUT=
[new h.VertexElementDescriptor("a_pos",2,q.DataType.SHORT,0,4)];r.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:x.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:x.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",
type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:32}};b.VTLCircleMaterial=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(b,a,x,r,q,h){let u=function(e){function l(k){return d.call(this,
k)}a._inherits(l,e);var d=a._createSuper(l);e=l.prototype;e.geometryInfo=function(){return l.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return l.ATTRIBUTES};e.attributesInfo=function(){return l.ATTRIBUTES_INFO};return a._createClass(l)}(r.VTLMaterial);u.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];u.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,q.DataType.SHORT,0,4)];u.ATTRIBUTES_INFO={"fill-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},
"fill-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:x.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};r=function(e){function l(k,c){k=d.call(this,k);k._usefillColor=c;return k}a._inherits(l,e);var d=a._createSuper(l);e=l.prototype;e.geometryInfo=function(){return l.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return this._usefillColor?l.ATTRIBUTES_FILL:l.ATTRIBUTES_OUTLINE};e.attributesInfo=function(){return this._usefillColor?
l.ATTRIBUTES_INFO_FILL:l.ATTRIBUTES_INFO_OUTLINE};return a._createClass(l)}(r.VTLMaterial);r.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];r.ATTRIBUTES_FILL=["fill-color","fill-opacity"];r.GEOMETRY_LAYOUT=[new h.VertexElementDescriptor("a_pos",2,q.DataType.SHORT,0,8),new h.VertexElementDescriptor("a_offset",2,q.DataType.BYTE,4,8),new h.VertexElementDescriptor("a_xnormal",2,q.DataType.BYTE,6,8)];r.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},
"fill-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100}};r.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100}};b.VTLFillMaterial=u;b.VTLOutlineMaterial=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,x,r,q,h){r=function(u){function e(d){return l.call(this,d)}a._inherits(e,u);var l=a._createSuper(e);u=e.prototype;u.geometryInfo=function(){return e.GEOMETRY_LAYOUT};u.opacityInfo=function(){return null};u.attributes=function(){return e.ATTRIBUTES};u.attributesInfo=function(){return e.ATTRIBUTES_INFO};return a._createClass(e)}(r.VTLMaterial);r.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");r.GEOMETRY_LAYOUT=
[new h.VertexElementDescriptor("a_pos",2,q.DataType.SHORT,0,16),new h.VertexElementDescriptor("a_extrude_offset",4,q.DataType.BYTE,4,16),new h.VertexElementDescriptor("a_dir_normal",4,q.DataType.BYTE,8,16),new h.VertexElementDescriptor("a_accumulatedDistance",2,q.DataType.UNSIGNED_SHORT,12,16)];r.ATTRIBUTES_INFO={"line-width":{name:"width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",
type:x.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:x.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:x.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};b.VTLLineMaterial=r;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(b,a,x,r,q,h){const u=[new h.VertexElementDescriptor("a_pos",2,q.DataType.SHORT,0,16),new h.VertexElementDescriptor("a_vertexOffset",2,q.DataType.SHORT,4,16),new h.VertexElementDescriptor("a_texAngleRange",4,q.DataType.UNSIGNED_BYTE,8,16),
new h.VertexElementDescriptor("a_levelInfo",4,q.DataType.UNSIGNED_BYTE,12,16)],e=[new h.VertexElementDescriptor("a_opacityInfo",1,q.DataType.UNSIGNED_BYTE,0,1)];q=function(l){function d(c){return k.call(this,c)}a._inherits(d,l);var k=a._createSuper(d);l=d.prototype;l.geometryInfo=function(){return u};l.opacityInfo=function(){return e};l.attributes=function(){return d.ATTRIBUTES};l.attributesInfo=function(){return d.ATTRIBUTES_INFO};return a._createClass(d)}(r.VTLMaterial);q.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");
q.ATTRIBUTES_INFO={"icon-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:x.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:x.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};
r=function(l){function d(c){return k.call(this,c)}a._inherits(d,l);var k=a._createSuper(d);l=d.prototype;l.geometryInfo=function(){return u};l.opacityInfo=function(){return e};l.attributes=function(){return d.ATTRIBUTES};l.attributesInfo=function(){return d.ATTRIBUTES_INFO};return a._createClass(d)}(r.VTLMaterial);r.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");r.ATTRIBUTES_INFO={"text-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},
"text-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:x.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:x.EncodingType.R8_UNSIGNED,isLayout:!0}};b.VTLIconMaterial=q;b.VTLTextMaterial=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../expression/expression","../expression/types"],function(b,a,x){return function(){function r(q){this._expression=q}r.prototype.filter=function(q,h){if(!this._expression)return!0;try{return this._expression.evaluate(q,h)}catch(u){return console.log(u.message),!0}};r.createFilter=function(q){if(!q)return null;this.isLegacyFilter(q)&&(q=this.convertLegacyFilter(q));try{const h=a.createExpression(q,
null,x.BooleanType);return new r(h)}catch(h){return console.log(h.message),null}};r.isLegacyFilter=function(q){if(!Array.isArray(q)||0===q.length)return!0;switch(q[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===q.length&&"string"===typeof q[1]&&!Array.isArray(q[2]);case "in":return 3<=q.length&&"string"===typeof q[1]&&!Array.isArray(q[2]);case "!in":return!0;case "any":case "all":for(let h=1;h<q.length;h++)if(this.isLegacyFilter(q[h]))return!0;
return!1;case "none":return!0;case "has":return 2===q.length&&("$id"===q[1]||"$type"===q[1]);case "!has":return!0;default:return!1}};r.convertLegacyFilter=function(q){if(!Array.isArray(q)||0===q.length)return!0;const h=q[0];if(1===q.length)return"any"!==h;switch(h){case "\x3d\x3d":return r.convertComparison("\x3d\x3d",q[1],q[2]);case "!\x3d":return r.negate(r.convertComparison("\x3d\x3d",q[1],q[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return r.convertComparison(h,q[1],q[2]);case "in":return r.convertIn(q[1],
q.slice(2));case "!in":return r.negate(r.convertIn(q[1],q.slice(2)));case "any":case "all":case "none":return r.convertCombining(h,q.slice(1));case "has":return r.convertHas(q[1]);case "!has":return r.negate(r.convertHas(q[1]));default:throw Error("Unexpected legacy filter.");}};r.convertComparison=function(q,h,u){switch(h){case "$type":return[q,["geometry-type"],u];case "$id":return[q,["id"],u];default:return[q,["get",h],u]}};r.convertIn=function(q,h){switch(q){case "$type":return["in",["geometry-type"],
["literal",h]];case "$id":return["in",["id"],["literal",h]];default:return["in",["get",q],["literal",h]]}};r.convertHas=function(q){switch(q){case "$type":return!0;case "$id":return["has-id"];default:return["has",q]}};r.convertCombining=function(q,h){return[q].concat(h.map(this.convertLegacyFilter))};r.negate=function(q){return["!",q]};return b._createClass(r)}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),
function(b,a,x,r,q,h,u,e){function l(t,g,m){var v=typeof t;if("string"===v||"boolean"===v||"number"===v||null===t){if(m)switch(m.kind){case "string":"string"!==v&&(t=fa.toString(t));break;case "number":"number"!==v&&(t=fa.toNumber(t));break;case "color":t=fa.toColor(t)}t=["literal",t]}if(!Array.isArray(t)||0===t.length)throw Error("Expression must be a non empty array");v=t[0];if("string"!==typeof v)throw Error("First element of expression must be a string");const B=ma[v];if(void 0===B)throw Error(`Invalid expression operator "${v}"`);
if(!B)throw Error(`Unimplemented expression operator "${v}"`);return B.parse(t,g,m)}let d=function(){function t(m){this._parent=m;this._vars={}}var g=t.prototype;g.add=function(m,v){this._vars[m]=v};g.get=function(m){return this._vars[m]?this._vars[m]:this._parent?this._parent.get(m):null};return a._createClass(t)}(),k=function(){function t(){this.type=e.ValueType}t.parse=function(g){if(1<g.length)throw Error('"id" does not expect arguments');return new t};t.prototype.evaluate=function(g,m){return g?.id};
return a._createClass(t)}(),c=function(){function t(){this.type=e.StringType}t.parse=function(g){if(1<g.length)throw Error('"geometry-type" does not expect arguments');return new t};t.prototype.evaluate=function(g,m){if(!g)return null;switch(g.type){case q.GeometryType.Point:return"Point";case q.GeometryType.LineString:return"LineString";case q.GeometryType.Polygon:return"Polygon";default:return null}};return a._createClass(t)}(),f=function(){function t(){this.type=e.ObjectType}t.parse=function(g){if(1<
g.length)throw Error('"properties" does not expect arguments');return new t};t.prototype.evaluate=function(g,m){return g?.values};return a._createClass(t)}(),p=function(){function t(){this.type=e.NumberType}t.parse=function(g){if(1<g.length)throw Error('"zoom" does not expect arguments');return new t};t.prototype.evaluate=function(g,m){return m};return a._createClass(t)}(),n=function(){function t(g,m,v){this._lhs=g;this._rhs=m;this._compare=v;this.type=e.BooleanType}t.parse=function(g,m,v){if(3!==
g.length&&4!==g.length)throw Error(`"${g[0]}" expects 2 or 3 arguments`);if(4===g.length)throw Error(`"${g[0]}" collator not supported`);return new t(l(g[1],m),l(g[2],m),v)};t.prototype.evaluate=function(g,m){return this._compare(this._lhs.evaluate(g,m),this._rhs.evaluate(g,m))};return a._createClass(t)}(),y=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return n.parse(v,B,(I,N)=>I===N)};return a._createClass(g)}(n),D=function(t){function g(){return m.apply(this,
arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return n.parse(v,B,(I,N)=>I!==N)};return a._createClass(g)}(n),F=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return n.parse(v,B,(I,N)=>I<N)};return a._createClass(g)}(n),C=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return n.parse(v,B,(I,N)=>I<=N)};return a._createClass(g)}(n),
J=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return n.parse(v,B,(I,N)=>I>N)};return a._createClass(g)}(n),L=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return n.parse(v,B,(I,N)=>I>=N)};return a._createClass(g)}(n),z=function(){function t(g){this._arg=g;this.type=e.BooleanType}t.parse=function(g,m){if(2!==g.length)throw Error('"!" expects 1 argument');
return new t(l(g[1],m))};t.prototype.evaluate=function(g,m){return!this._arg.evaluate(g,m)};return a._createClass(t)}(),G=function(){function t(g){this._args=g;this.type=e.BooleanType}t.parse=function(g,m){const v=[];for(let B=1;B<g.length;B++)v.push(l(g[B],m));return new t(v)};t.prototype.evaluate=function(g,m){for(const v of this._args)if(!v.evaluate(g,m))return!1;return!0};return a._createClass(t)}(),w=function(){function t(g){this._args=g;this.type=e.BooleanType}t.parse=function(g,m){const v=
[];for(let B=1;B<g.length;B++)v.push(l(g[B],m));return new t(v)};t.prototype.evaluate=function(g,m){for(const v of this._args)if(v.evaluate(g,m))return!0;return!1};return a._createClass(t)}(),A=function(){function t(g){this._args=g;this.type=e.BooleanType}t.parse=function(g,m){const v=[];for(let B=1;B<g.length;B++)v.push(l(g[B],m));return new t(v)};t.prototype.evaluate=function(g,m){for(const v of this._args)if(v.evaluate(g,m))return!1;return!0};return a._createClass(t)}(),H=function(){function t(g,
m,v){this.type=g;this._args=m;this._fallback=v}t.parse=function(g,m,v){if(4>g.length)throw Error('"case" expects at least 3 arguments');if(1===g.length%2)throw Error('"case" expects an odd number of arguments');let B;const I=[];for(let N=1;N<g.length-1;N+=2){const V=l(g[N],m),T=l(g[N+1],m,v);B||(B=T.type);I.push({condition:V,output:T})}g=l(g[g.length-1],m,v);B||(B=g.type);return new t(B,I,g)};t.prototype.evaluate=function(g,m){for(const v of this._args)if(v.condition.evaluate(g,m))return v.output.evaluate(g,
m);return this._fallback.evaluate(g,m)};return a._createClass(t)}(),E=function(){function t(g,m){this.type=g;this._args=m}t.parse=function(g,m){if(2>g.length)throw Error('"coalesce" expects at least 1 argument');let v;const B=[];for(let I=1;I<g.length;I++){const N=l(g[I],m);v||(v=N.type);B.push(N)}return new t(v,B)};t.prototype.evaluate=function(g,m){for(const v of this._args){const B=v.evaluate(g,m);if(null!==B)return B}return null};return a._createClass(t)}(),M=function(){function t(g,m,v,B,I){this.type=
g;this._input=m;this._labels=v;this._outputs=B;this._fallback=I}t.parse=function(g,m){if(3>g.length)throw Error('"match" expects at least 3 arguments');if(0===g.length%2)throw Error('"case" expects an even number of arguments');let v;const B=l(g[1],m),I=[],N={};let V;for(let ba=2;ba<g.length-1;ba+=2){var T=g[ba];Array.isArray(T)||(T=[T]);for(const ha of T){T=typeof ha;if("string"!==T&&"number"!==T)throw Error('"match" requires string or number literal as labels');if(!V)V=T;else if(T!==V)throw Error('"match" requires labels to have the same type');
N[ha]=I.length}T=l(g[ba+1],m);v||(v=T.type);I.push(T)}return new t(v,B,N,I,l(g[g.length-1],m))};t.prototype.evaluate=function(g,m){const v=this._input.evaluate(g,m);return(this._outputs[this._labels[v]]||this._fallback).evaluate(g,m)};return a._createClass(t)}(),P=function(){function t(m,v,B,I,N){this._operator=m;this.type=v;this.interpolation=B;this.input=I;this._stops=N}t.parse=function(m,v,B){const I=m[0];if(5>m.length)throw Error(`"${I}" expects at least 4 arguments`);const N=m[1];if(!Array.isArray(N)||
0===N.length)throw Error(`"${N}" is not a valid interpolation`);switch(N[0]){case "linear":if(1!==N.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==N.length||"number"!==typeof N[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==N.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var V=1;5>V;V++){var T=N[V];if("number"!==typeof T||
0>T||1<T)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${m[0]}" unknown interpolation type "${N[0]}"`);}if(1!==m.length%2)throw Error(`"${I}" expects an even number of arguments`);V=l(m[2],v,e.NumberType);let ba;"interpolate-hcl"===I||"interpolate-lab"===I?ba=e.ColorType:B&&"value"!==B.kind&&(ba=B);B=[];for(T=3;T<m.length;T+=2){const ha=m[T];if("number"!==typeof ha)throw Error(`"${I}" requires stop inputs as literal numbers`);
if(B.length&&B[B.length-1][0]>=ha)throw Error(`"${I}" requires strictly ascending stop inputs`);const na=l(m[T+1],v,ba);ba||(ba=na.type);B.push([ha,na])}if(ba&&ba!==e.ColorType&&ba!==e.NumberType&&("array"!==ba.kind||ba.itemType!==e.NumberType))throw Error(`"${I}" cannot interpolate type ${e.typeToString(ba)}`);return new t(I,ba,N,V,B)};var g=t.prototype;g.evaluate=function(m,v){var B=this._stops;if(1===B.length)return B[0][1].evaluate(m,v);var I=this.input.evaluate(m,v);if(I<=B[0][0])return B[0][1].evaluate(m,
v);if(I>=B[B.length-1][0])return B[B.length-1][1].evaluate(m,v);let N=0;for(;++N<B.length&&!(I<B[N][0]););const V=t.interpolationRatio(this.interpolation,I,B[N-1][0],B[N][0]);I=B[N-1][1].evaluate(m,v);const T=B[N][1].evaluate(m,v);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(I)&&Array.isArray(T))return I.map((ba,ha)=>u.interpolate(ba,T[ha],V));if("color"===this.type.kind&&I instanceof x&&T instanceof x)return I=new x(I),m=new x(T),new x([u.interpolate(I.r,m.r,V),u.interpolate(I.g,
m.g,V),u.interpolate(I.b,m.b,V),u.interpolate(I.a,m.a,V)]);if("number"===this.type.kind&&"number"===typeof I&&"number"===typeof T)return u.interpolate(I,T,V);throw Error(`"${this._operator}" cannot interpolate type ${e.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return m=r.toLCH(I),v=r.toLCH(T),B=v.h-m.h,m=r.toRGB({h:m.h+V*(180<B||-180>B?B-360*Math.round(B/360):B),c:u.interpolate(m.c,v.c,V),l:u.interpolate(m.l,v.l,V)}),new x({a:u.interpolate(I.a,T.a,V),...m});if("interpolate-lab"===
this._operator)return m=r.toLAB(I),v=r.toLAB(T),m=r.toRGB({l:u.interpolate(m.l,v.l,V),a:u.interpolate(m.a,v.a,V),b:u.interpolate(m.b,v.b,V)}),new x({a:u.interpolate(I.a,T.a,V),...m});throw Error(`Unexpected operator "${this._operator}"`);};g.interpolationUniformValue=function(m,v){const B=this._stops;if(1===B.length||m>=B[B.length-1][0])return 0;let I=0;for(;++I<B.length&&!(m<B[I][0]););return t.interpolationRatio(this.interpolation,v,B[I-1][0],B[I][0])};g.getInterpolationRange=function(m){const v=
this._stops;if(1===v.length)return m=v[0][0],[m,m];var B=v[v.length-1][0];if(m>=B)return[B,B];for(B=0;++B<v.length&&!(m<v[B][0]););return[v[B-1][0],v[B][0]]};t.interpolationRatio=function(m,v,B,I){let N=0;"linear"===m[0]?N=t._exponentialInterpolationRatio(v,1,B,I):"exponential"===m[0]?N=t._exponentialInterpolationRatio(v,m[1],B,I):"cubic-bezier"===m[0]&&(N=h.unitBezier(m[1],m[2],m[3],m[4])(t._exponentialInterpolationRatio(v,1,B,I),1E-5));0>N?N=0:1<N&&(N=1);return N};t._exponentialInterpolationRatio=
function(m,v,B,I){I-=B;if(0===I)return 0;m-=B;return 1===v?m/I:(v**m-1)/(v**I-1)};return a._createClass(t)}(),O=function(){function t(g,m,v){this.type=g;this._input=m;this._stops=v}t.parse=function(g,m){if(5>g.length)throw Error('"step" expects at least 4 arguments');if(1!==g.length%2)throw Error('"step" expects an even number of arguments');const v=l(g[1],m,e.NumberType);let B;const I=[];I.push([-Infinity,l(g[2],m)]);for(let N=3;N<g.length;N+=2){const V=g[N];if("number"!==typeof V)throw Error('"step" requires stop inputs as literal numbers');
if(I.length&&I[I.length-1][0]>=V)throw Error('"step" requires strictly ascending stop inputs');const T=l(g[N+1],m);B||(B=T.type);I.push([V,T])}return new t(B,v,I)};t.prototype.evaluate=function(g,m){const v=this._stops;if(1===v.length)return v[0][1].evaluate(g,m);const B=this._input.evaluate(g,m);let I=0;for(;++I<v.length&&!(B<v[I][0]););return this._stops[I-1][1].evaluate(g,m)};return a._createClass(t)}(),Q=function(){function t(g,m){this.type=g;this._output=m}t.parse=function(g,m,v){if(4>g.length)throw Error('"let" expects at least 3 arguments');
if(1===g.length%2)throw Error('"let" expects an odd number of arguments');const B=new d(m);for(let I=1;I<g.length-1;I+=2){const N=g[I];if("string"!==typeof N)throw Error(`"let" requires a string to define variable names - found ${N}`);B.add(N,l(g[I+1],m))}g=l(g[g.length-1],B,v);return new t(g.type,g)};t.prototype.evaluate=function(g,m){return this._output.evaluate(g,m)};return a._createClass(t)}(),S=function(){function t(g,m){this.type=g;this.output=m}t.parse=function(g,m,v){if(2!==g.length||"string"!==
typeof g[1])throw Error('"var" requires just one literal string argument');m=m.get(g[1]);if(!m)throw Error(`${g[1]} must be defined before being used in a "var" expression`);return new t(v||e.ValueType,m)};t.prototype.evaluate=function(g,m){return this.output.evaluate(g,m)};return a._createClass(t)}(),U=function(){function t(g,m,v){this.type=g;this._index=m;this._array=v}t.parse=function(g,m){if(3!==g.length)throw Error('"at" expects 2 arguments');const v=l(g[1],m,e.NumberType);g=l(g[2],m);return new t(g.type.itemType,
v,g)};t.prototype.evaluate=function(g,m){const v=this._index.evaluate(g,m);g=this._array.evaluate(g,m);if(0>v||v>=g.length)throw Error('"at" index out of bounds');if(v!==Math.floor(v))throw Error('"at" index must be an integer');return g[v]};return a._createClass(t)}(),Y=function(){function t(g,m){this._key=g;this._obj=m;this.type=e.ValueType}t.parse=function(g,m){let v;switch(g.length){case 2:return v=l(g[1],m),new t(v);case 3:return v=l(g[1],m),g=l(g[2],m),new t(v,g);default:throw Error('"get" expects 1 or 2 arguments');
}};t.prototype.evaluate=function(g,m){const v=this._key.evaluate(g,m);return this._obj?this._obj.evaluate(g,m)[v]:g?.values[v]};return a._createClass(t)}(),Z=function(){function t(g,m){this._key=g;this._obj=m;this.type=e.BooleanType}t.parse=function(g,m){let v;switch(g.length){case 2:return v=l(g[1],m),new t(v);case 3:return v=l(g[1],m),g=l(g[2],m),new t(v,g);default:throw Error('"has" expects 1 or 2 arguments');}};t.prototype.evaluate=function(g,m){const v=this._key.evaluate(g,m);return this._obj?
(g=this._obj.evaluate(g,m),v in g):!!g?.values[v]};return a._createClass(t)}(),da=function(){function t(g,m){this._key=g;this._vals=m;this.type=e.BooleanType}t.parse=function(g,m){if(3!==g.length)throw Error('"in" expects 2 arguments');return new t(l(g[1],m),l(g[2],m))};t.prototype.evaluate=function(g,m){const v=this._key.evaluate(g,m);return this._vals.evaluate(g,m).includes(v)};return a._createClass(t)}(),X=function(){function t(g,m,v){this._item=g;this._array=m;this._from=v;this.type=e.NumberType}
t.parse=function(g,m){if(3>g.length||4<g.length)throw Error('"index-of" expects 3 or 4 arguments');const v=l(g[1],m),B=l(g[2],m);return 4===g.length?(g=l(g[3],m,e.NumberType),new t(v,B,g)):new t(v,B)};t.prototype.evaluate=function(g,m){const v=this._item.evaluate(g,m),B=this._array.evaluate(g,m);if(this._from){g=this._from.evaluate(g,m);if(g!==Math.floor(g))throw Error('"index-of" index must be an integer');return B.indexOf(v,g)}return B.indexOf(v)};return a._createClass(t)}(),ea=function(){function t(g){this._arg=
g;this.type=e.NumberType}t.parse=function(g,m){if(2!==g.length)throw Error('"length" expects 2 arguments');g=l(g[1],m);return new t(g)};t.prototype.evaluate=function(g,m){g=this._arg.evaluate(g,m);if("string"===typeof g||Array.isArray(g))return g.length;throw Error('"length" expects string or array');};return a._createClass(t)}(),ka=function(){function t(g,m,v,B){this.type=g;this._array=m;this._from=v;this._to=B}t.parse=function(g,m){if(3>g.length||4<g.length)throw Error('"slice" expects 2 or 3 arguments');
const v=l(g[1],m),B=l(g[2],m,e.NumberType);if(B.type!==e.NumberType)throw Error('"slice" index must return a number');if(4===g.length){g=l(g[3],m,e.NumberType);if(g.type!==e.NumberType)throw Error('"slice" index must return a number');return new t(v.type,v,B,g)}return new t(v.type,v,B)};t.prototype.evaluate=function(g,m){const v=this._array.evaluate(g,m);if(!Array.isArray(v)&&"string"!==typeof v)throw Error('"slice" input must be an array or a string');const B=this._from.evaluate(g,m);if(0>B||B>=
v.length)throw Error('"slice" index out of bounds');if(B!==Math.floor(B))throw Error('"slice" index must be an integer');if(this._to){g=this._to.evaluate(g,m);if(0>g||g>=v.length)throw Error('"slice" index out of bounds');if(g!==Math.floor(g))throw Error('"slice" index must be an integer');return v.slice(B,g)}return v.slice(B)};return a._createClass(t)}(),K=function(){function t(){this.type=e.BooleanType}t.parse=function(g){if(1!==g.length)throw Error('"has-id" expects no arguments');return new t};
t.prototype.evaluate=function(g,m){return g&&void 0!==g.id};return a._createClass(t)}(),R=function(){function t(g,m){this._args=g;this._calculate=m;this.type=e.NumberType}t.parse=function(g,m,v){g=g.slice(1).map(B=>l(B,m));return new t(g,v)};t.prototype.evaluate=function(g,m){let v;this._args&&(v=this._args.map(B=>B.evaluate(g,m)));return this._calculate(v)};return a._createClass(t)}(),W=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,
B){switch(v.length){case 2:return R.parse(v,B,I=>-I[0]);case 3:return R.parse(v,B,I=>I[0]-I[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return a._createClass(g)}(R),ca=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return R.parse(v,B,I=>{let N=1;for(const V of I)N*=V;return N})};return a._createClass(g)}(R),ia=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=
function(v,B){if(3===v.length)return R.parse(v,B,I=>I[0]/I[1]);throw Error('"/" expects 2 arguments');};return a._createClass(g)}(R),oa=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){if(3===v.length)return R.parse(v,B,I=>I[0]%I[1]);throw Error('"%" expects 2 arguments');};return a._createClass(g)}(R),pa=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){if(3===
v.length)return R.parse(v,B,I=>I[0]**I[1]);throw Error('"^" expects 1 or 2 arguments');};return a._createClass(g)}(R),qa=function(t){function g(){return m.apply(this,arguments)}a._inherits(g,t);var m=a._createSuper(g);g.parse=function(v,B){return R.parse(v,B,I=>{let N=0;for(const V of I)N+=V;return N})};return a._createClass(g)}(R),aa=function(){function t(g,m){this._args=g;this._calculate=m;this.type=e.NumberType}t.parse=function(g,m){const v=g.slice(1).map(B=>l(B,m));return new t(v,t.ops[g[0]])};
t.prototype.evaluate=function(g,m){let v;this._args&&(v=this._args.map(B=>B.evaluate(g,m)));return this._calculate(v)};return a._createClass(t)}();aa.ops={abs:t=>Math.abs(t[0]),acos:t=>Math.acos(t[0]),asin:t=>Math.asin(t[0]),atan:t=>Math.atan(t[0]),ceil:t=>Math.ceil(t[0]),cos:t=>Math.cos(t[0]),e:()=>Math.E,floor:t=>Math.floor(t[0]),ln:t=>Math.log(t[0]),ln2:()=>Math.LN2,log10:t=>Math.log(t[0])/Math.LN10,log2:t=>Math.log(t[0])/Math.LN2,max:t=>Math.max(...t),min:t=>Math.min(...t),pi:()=>Math.PI,round:t=>
Math.round(t[0]),sin:t=>Math.sin(t[0]),sqrt:t=>Math.sqrt(t[0]),tan:t=>Math.tan(t[0])};let ra=function(){function t(g){this._args=g;this.type=e.StringType}t.parse=function(g,m){return new t(g.slice(1).map(v=>l(v,m)))};t.prototype.evaluate=function(g,m){return this._args.map(v=>v.evaluate(g,m)).join("")};return a._createClass(t)}(),la=function(){function t(g,m){this._arg=g;this._calculate=m;this.type=e.StringType}t.parse=function(g,m){if(2!==g.length)throw Error(`${g[0]} expects 1 argument`);m=l(g[1],
m);return new t(m,t.ops[g[0]])};t.prototype.evaluate=function(g,m){return this._calculate(this._arg.evaluate(g,m))};return a._createClass(t)}();la.ops={downcase:t=>t.toLowerCase(),upcase:t=>t.toUpperCase()};let sa=function(){function t(m){this._args=m;this.type=e.ColorType}t.parse=function(m,v){if(4!==m.length)throw Error('"rgb" expects 3 arguments');m=m.slice(1).map(B=>l(B,v));return new t(m)};var g=t.prototype;g.evaluate=function(m,v){const B=this._validate(this._args[0].evaluate(m,v)),I=this._validate(this._args[1].evaluate(m,
v));m=this._validate(this._args[2].evaluate(m,v));return new x({r:B,g:I,b:m})};g._validate=function(m){if("number"!==typeof m||0>m||255<m)throw Error(`${m}: invalid color component`);return Math.round(m)};return a._createClass(t)}(),ta=function(){function t(m){this._args=m;this.type=e.ColorType}t.parse=function(m,v){if(5!==m.length)throw Error('"rgba" expects 4 arguments');m=m.slice(1).map(B=>l(B,v));return new t(m)};var g=t.prototype;g.evaluate=function(m,v){const B=this._validate(this._args[0].evaluate(m,
v)),I=this._validate(this._args[1].evaluate(m,v)),N=this._validate(this._args[2].evaluate(m,v));m=this._validateAlpha(this._args[3].evaluate(m,v));return new x({r:B,g:I,b:N,a:m})};g._validate=function(m){if("number"!==typeof m||0>m||255<m)throw Error(`${m}: invalid color component`);return Math.round(m)};g._validateAlpha=function(m){if("number"!==typeof m||0>m||1<m)throw Error(`${m}: invalid alpha color component`);return m};return a._createClass(t)}(),ua=function(){function t(g){this._color=g;this.type=
e.arrayType(e.NumberType,4)}t.parse=function(g,m){if(2!==g.length)throw Error('"to-rgba" expects 1 argument');g=l(g[1],m);return new t(g)};t.prototype.evaluate=function(g,m){return(new x(this._color.evaluate(g,m))).toRgba()};return a._createClass(t)}(),ja=function(){function t(g,m){this.type=g;this._args=m}t.parse=function(g,m){var v=g[0];if(2>g.length)throw Error(`${v} expects at least one argument`);let B=1,I;if("array"===v){if(2<g.length){switch(g[1]){case "string":I=e.StringType;break;case "number":I=
e.NumberType;break;case "boolean":I=e.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}B++}else I=e.ValueType;if(3<g.length){var N=g[2];if(null!==N&&("number"!==typeof N||0>N||N!==Math.floor(N)))throw Error('"array" length argument must be a positive integer literal');B++}I=e.arrayType(I,N)}else switch(v){case "string":I=e.StringType;break;case "number":I=e.NumberType;break;case "boolean":I=e.BooleanType;break;case "object":I=e.ObjectType}for(v=[];B<
g.length;B++)N=l(g[B],m),v.push(N);return new t(I,v)};t.prototype.evaluate=function(g,m){let v;for(const B of this._args){const I=B.evaluate(g,m);v=e.getType(I);if(e.matchType(v,this.type))return I}throw Error(`Expected ${e.typeToString(this.type)} but got ${e.typeToString(v)}`);};return a._createClass(t)}(),fa=function(){function t(g,m){this.type=g;this._args=m}t.parse=function(g,m){var v=g[0];const B=t.types[v];if(B===e.BooleanType||B===e.StringType){if(2!==g.length)throw Error(`${v} expects one argument`);
}else if(2>g.length)throw Error(`${v} expects at least one argument`);v=[];for(let I=1;I<g.length;I++){const N=l(g[I],m);v.push(N)}return new t(B,v)};t.prototype.evaluate=function(g,m){if(this.type===e.BooleanType)return!!this._args[0].evaluate(g,m);if(this.type===e.StringType)return e.valueToString(this._args[0].evaluate(g,m));if(this.type===e.NumberType){for(const B of this._args){var v=Number(B.evaluate(g,m));if(!isNaN(v))return v}return null}if(this.type===e.ColorType){for(v of this._args)try{const B=
t.toColor(v.evaluate(g,m));if(B instanceof x)return B}catch{}return null}};t.toBoolean=function(g){return!!g};t.toString=function(g){return e.valueToString(g)};t.toNumber=function(g){const m=Number(g);if(isNaN(m))throw Error(`"${g}" is not a number`);return m};t.toColor=function(g){if(g instanceof x)return g;if("string"===typeof g){const m=x.fromString(g);if(m)return m;throw Error(`"${g}" is not a color`);}if(Array.isArray(g))return x.fromArray(g);throw Error(`"${g}" is not a color`);};return a._createClass(t)}();
fa.types={"to-boolean":e.BooleanType,"to-color":e.ColorType,"to-number":e.NumberType,"to-string":e.StringType};let va=function(){function t(g){this._val=g;this.type=e.getType(g)}t.parse=function(g){if(2!==g.length)throw Error('"literal" expects 1 argument');return new t(g[1])};t.prototype.evaluate=function(g,m){return this._val};return a._createClass(t)}(),wa=function(){function t(g){this._arg=g;this.type=e.StringType}t.parse=function(g,m){if(2!==g.length)throw Error('"typeof" expects 1 argument');
return new t(l(g[1],m))};t.prototype.evaluate=function(g,m){return e.typeToString(e.getType(this._arg.evaluate(g,m)))};return a._createClass(t)}();const ma={array:ja,boolean:ja,collator:null,format:null,image:null,literal:va,number:ja,"number-format":null,object:ja,string:ja,"to-boolean":fa,"to-color":fa,"to-number":fa,"to-string":fa,typeof:wa,accumulated:null,"feature-state":null,"geometry-type":c,id:k,"line-progress":null,properties:f,at:U,get:Y,has:Z,in:da,"index-of":X,length:ea,slice:ka,"!":z,
"!\x3d":D,"\x3c":F,"\x3c\x3d":C,"\x3d\x3d":y,"\x3e":J,"\x3e\x3d":L,all:G,any:w,case:H,coalesce:E,match:M,within:null,interpolate:P,"interpolate-hcl":P,"interpolate-lab":P,step:O,let:Q,var:S,concat:ra,downcase:la,"is-supported-script":null,"resolved-locale":null,upcase:la,rgb:sa,rgba:ta,"to-rgba":ua,"-":W,"*":ca,"/":ia,"%":oa,"^":pa,"+":qa,abs:aa,acos:aa,asin:aa,atan:aa,ceil:aa,cos:aa,e:aa,floor:aa,ln:aa,ln2:aa,log10:aa,log2:aa,max:aa,min:aa,pi:aa,round:aa,sin:aa,sqrt:aa,tan:aa,zoom:p,"heatmap-density":null,
"has-id":K,none:A};b.ALL=G;b.ANY=w;b.Add=qa;b.Assert=ja;b.At=U;b.Calculate=aa;b.Case=H;b.Coalesce=E;b.Coerce=fa;b.Concat=ra;b.Div=ia;b.EQ=y;b.GE=L;b.GT=J;b.GeomType=c;b.Get=Y;b.Has=Z;b.HasID=K;b.ID=k;b.In=da;b.IndexOf=X;b.Interpolate=P;b.LE=C;b.LT=F;b.Length=ea;b.Let=Q;b.Literal=va;b.Match=M;b.Mod=oa;b.Mul=ca;b.NE=D;b.NONE=A;b.NOT=z;b.Pow=pa;b.Properties=f;b.Rgb=sa;b.Rgba=ta;b.Slice=ka;b.Step=O;b.String=la;b.Sub=W;b.ToRgba=ua;b.TypeOf=wa;b.Var=S;b.Zoom=p;b.createExpression=l;b.ops=ma;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(b){function a(d,k){const c=[];let f,p;if(d[0].length!==k.length)throw Error("dimensions do not match");const n=d.length,y=d[0].length;let D=0;for(f=0;f<n;f++){for(p=D=0;p<y;p++)D+=d[f][p]*k[p];c.push(D)}return c}function x(d){d=[d.r/255,d.g/255,d.b/255].map(k=>.04045>=k?k/12.92:((k+.055)/1.055)**2.4);d=a(e,d);return{x:100*d[0],y:100*d[1],z:100*d[2]}}function r(d){d=a(l,[d.x/100,d.y/100,d.z/100]).map(k=>
Math.min(1,Math.max(.0031308>=k?12.92*k:1.055*k**(1/2.4)-.055,0)));return{r:Math.round(255*d[0]),g:Math.round(255*d[1]),b:Math.round(255*d[2])}}function q(d){d=[d.x/95.047,d.y/100,d.z/108.883].map(k=>k>(6/29)**3?k**(1/3):1/3*(29/6)**2*k+4/29);return{l:116*d[1]-16,a:500*(d[0]-d[1]),b:200*(d[1]-d[2])}}function h(d){const k=d.l;d=[(k+16)/116+d.a/500,(k+16)/116,(k+16)/116-d.b/200].map(c=>c>6/29?c**3:3*(6/29)**2*(c-4/29));return{x:95.047*d[0],y:100*d[1],z:108.883*d[2]}}function u(d){if("r"in d&&"g"in d&&
"b"in d)return d;if("l"in d&&"c"in d&&"h"in d){var k=d.c,c=d.h;return r(h({l:d.l,a:k*Math.cos(c),b:k*Math.sin(c)}))}if("l"in d&&"a"in d&&"b"in d)return r(h(d));if("x"in d&&"y"in d&&"z"in d)return r(d);if("h"in d&&"s"in d&&"v"in d){c=(d.h+360)%360/60;k=d.v/100*255;d=d.s/100*k;const f=d*(1-Math.abs(c%2-1));switch(Math.floor(c)){case 0:c={r:d,g:f,b:0};break;case 1:c={r:f,g:d,b:0};break;case 2:c={r:0,g:d,b:f};break;case 3:c={r:0,g:f,b:d};break;case 4:c={r:f,g:0,b:d};break;case 5:case 6:c={r:d,g:0,b:f};
break;default:c={r:0,g:0,b:0}}c.r=Math.round(c.r+k-d);c.g=Math.round(c.g+k-d);c.b=Math.round(c.b+k-d);return c}return d}const e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];b.darken=function(d,k){d=q(x(d));d.l*=1-k;return r(h(d))};b.toHSV=function(d){if("h"in d&&"s"in d&&"v"in d)return d;var k=u(d);d=k.r;const c=k.g,f=k.b;k=Math.max(d,c,f);const p=k-Math.min(d,c,f);d=0===p?0:k===d?(c-f)/p%6:k===c?(f-d)/p+2:(d-c)/
p+4;0>d&&(d+=6);return{h:60*d,s:100*(0===p?0:p/k),v:100/255*k}};b.toLAB=function(d){return"l"in d&&"a"in d&&"b"in d?d:q(x(u(d)))};b.toLCH=function(d){if(!("l"in d&&"c"in d&&"h"in d)){var k=q(x(u(d)));d=k.l;var c=k.a;const f=k.b;k=Math.sqrt(c*c+f*f);c=Math.atan2(f,c);c=0<c?c:c+2*Math.PI;d={l:d,c:k,h:c}}return d};b.toRGB=u;b.toXYZ=function(d){return"x"in d&&"y"in d&&"z"in d?d:x(u(d))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/TileClipper":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers"],function(b,a){b.GeometryType=void 0;(function(d){d[d.Unknown=0]="Unknown";d[d.Point=1]="Point";d[d.LineString=2]="LineString";d[d.Polygon=3]="Polygon"})(b.GeometryType||(b.GeometryType={}));let x=function(){function d(c,f){this.x=c;this.y=f}var k=d.prototype;k.clone=function(){return new d(this.x,this.y)};k.equals=function(c,f){return c===this.x&&f===this.y};k.isEqual=function(c){return c.x===this.x&&c.y===this.y};k.setCoords=function(c,f){this.x=c;this.y=
f};k.normalize=function(){var c=this.x;const f=this.y;c=Math.sqrt(c*c+f*f);this.x/=c;this.y/=c};k.rightPerpendicular=function(){const c=this.x;this.x=this.y;this.y=-c};k.move=function(c,f){this.x+=c;this.y+=f};k.assign=function(c){this.x=c.x;this.y=c.y};k.assignAdd=function(c,f){this.x=c.x+f.x;this.y=c.y+f.y};k.assignSub=function(c,f){this.x=c.x-f.x;this.y=c.y-f.y};k.rotate=function(c,f){const p=this.x,n=this.y;this.x=p*c-n*f;this.y=p*f+n*c};k.scale=function(c){this.x*=c;this.y*=c};k.length=function(){const c=
this.x,f=this.y;return Math.sqrt(c*c+f*f)};d.distance=function(c,f){const p=f.x-c.x;c=f.y-c.y;return Math.sqrt(p*p+c*c)};d.add=function(c,f){return new d(c.x+f.x,c.y+f.y)};d.sub=function(c,f){return new d(c.x-f.x,c.y-f.y)};return a._createClass(d)}(),r=a._createClass(function(d,k,c){this.ratio=d;this.x=k;this.y=c}),q=function(){function d(c,f,p,n=8,y=8){this._lines=[];this._starts=[];this.validateTessellation=!0;this._pixelRatio=n;this._pixelMargin=y;this._tileSize=512*n;this._dz=c;this._yPos=f;this._xPos=
p}var k=d.prototype;k.setPixelMargin=function(c){c!==this._pixelMargin&&(this._pixelMargin=c,this.setExtent(this._extent))};k.setExtent=function(c){this._extent=c;this._finalRatio=this._tileSize/c*(1<<this._dz);let f=this._pixelRatio*this._pixelMargin;f/=this._finalRatio;c>>=this._dz;f>c&&(f=c);this._margin=f;this._xmin=c*this._xPos-f;this._ymin=c*this._yPos-f;this._xmax=this._xmin+c+2*f;this._ymax=this._ymin+c+2*f};k.reset=function(c){this._type=c;this._lines=[];this._starts=[];this._line=null;this._start=
0};k.moveTo=function(c,f){this._pushLine();this._prevIsIn=this._isIn(c,f);this._moveTo(c,f,this._prevIsIn);this._prevPt=new x(c,f);this._firstPt=new x(c,f);this._dist=0};k.lineTo=function(c,f){const p=this._isIn(c,f),n=new x(c,f),y=x.distance(this._prevPt,n);if(p)if(this._prevIsIn)this._lineTo(c,f,!0);else{var D=this._prevPt;var F=n;c=this._intersect(F,D);this._start=this._dist+y*(1-this._r);this._lineTo(c.x,c.y,!0);this._lineTo(F.x,F.y,!0)}else if(this._prevIsIn)F=this._prevPt,D=n,c=this._intersect(F,
D),this._lineTo(c.x,c.y,!0),this._lineTo(D.x,D.y,!1);else{const J=this._prevPt;if(!(J.x<=this._xmin&&n.x<=this._xmin||J.x>=this._xmax&&n.x>=this._xmax||J.y<=this._ymin&&n.y<=this._ymin||J.y>=this._ymax&&n.y>=this._ymax)){c=[];if(J.x<this._xmin&&n.x>this._xmin||J.x>this._xmin&&n.x<this._xmin){f=(this._xmin-J.x)/(n.x-J.x);var C=J.y+f*(n.y-J.y);C<=this._ymin?F=!1:C>=this._ymax?F=!0:c.push(new r(f,this._xmin,C))}if(J.x<this._xmax&&n.x>this._xmax||J.x>this._xmax&&n.x<this._xmax)f=(this._xmax-J.x)/(n.x-
J.x),C=J.y+f*(n.y-J.y),C<=this._ymin?F=!1:C>=this._ymax?F=!0:c.push(new r(f,this._xmax,C));if(J.y<this._ymin&&n.y>this._ymin||J.y>this._ymin&&n.y<this._ymin)f=(this._ymin-J.y)/(n.y-J.y),C=J.x+f*(n.x-J.x),C<=this._xmin?D=!1:C>=this._xmax?D=!0:c.push(new r(f,C,this._ymin));if(J.y<this._ymax&&n.y>this._ymax||J.y>this._ymax&&n.y<this._ymax)f=(this._ymax-J.y)/(n.y-J.y),C=J.x+f*(n.x-J.x),C<=this._xmin?D=!1:C>=this._xmax?D=!0:c.push(new r(f,C,this._ymax));if(0===c.length)D?F?this._lineTo(this._xmax,this._ymax,
!0):this._lineTo(this._xmax,this._ymin,!0):F?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(1<c.length&&c[0].ratio>c[1].ratio)this._start=this._dist+y*c[1].ratio,this._lineTo(c[1].x,c[1].y,!0),this._lineTo(c[0].x,c[0].y,!0);else for(this._start=this._dist+y*c[0].ratio,D=0;D<c.length;D++)this._lineTo(c[D].x,c[D].y,!0)}this._lineTo(n.x,n.y,!1)}this._dist+=y;this._prevIsIn=p;this._prevPt=n};k.close=function(){if(2<this._line.length){var c=this._firstPt,f=this._prevPt;
c.x===f.x&&c.y===f.y||this.lineTo(c.x,c.y);c=this._line;for(f=c.length;4<=f;)if(c[0].x===c[1].x&&c[0].x===c[f-2].x||c[0].y===c[1].y&&c[0].y===c[f-2].y)c.pop(),c[0].x=c[f-2].x,c[0].y=c[f-2].y,--f;else break}};k.result=function(c=!0){this._pushLine();if(0===this._lines.length)return null;this._type===b.GeometryType.Polygon&&c&&e.simplify(this._tileSize,this._margin*this._finalRatio,this._lines);return this._lines};k.resultWithStarts=function(){if(this._type!==b.GeometryType.LineString)throw Error("Only valid for lines");
this._pushLine();const c=this._lines,f=c.length;if(0===f)return null;const p=[];for(let n=0;n<f;n++)p.push({line:c[n],start:this._starts[n]||0});return p};k._isIn=function(c,f){return c>=this._xmin&&c<=this._xmax&&f>=this._ymin&&f<=this._ymax};k._intersect=function(c,f){let p,n,y;if(f.x>=this._xmin&&f.x<=this._xmax)n=f.y<=this._ymin?this._ymin:this._ymax,y=(n-c.y)/(f.y-c.y),p=c.x+y*(f.x-c.x);else if(f.y>=this._ymin&&f.y<=this._ymax)p=f.x<=this._xmin?this._xmin:this._xmax,y=(p-c.x)/(f.x-c.x),n=c.y+
y*(f.y-c.y);else{n=f.y<=this._ymin?this._ymin:this._ymax;p=f.x<=this._xmin?this._xmin:this._xmax;const D=(p-c.x)/(f.x-c.x),F=(n-c.y)/(f.y-c.y);D<F?(y=D,n=c.y+D*(f.y-c.y)):(y=F,p=c.x+F*(f.x-c.x))}this._r=y;return new x(p,n)};k._pushLine=function(){this._line&&(this._type===b.GeometryType.Point?0<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===b.GeometryType.LineString?1<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===
b.GeometryType.Polygon&&3<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)));this._line=[];this._start=0};k._moveTo=function(c,f,p){this._type!==b.GeometryType.Polygon?p&&(c=Math.round((c-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new x(c,f))):(p||(c<this._xmin&&(c=this._xmin),c>this._xmax&&(c=this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),c=Math.round((c-(this._xmin+
this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new x(c,f)),this._isV=this._isH=!1)};k._lineTo=function(c,f,p){if(this._type!==b.GeometryType.Polygon)if(p){c=Math.round((c-(this._xmin+this._margin))*this._finalRatio);f=Math.round((f-(this._ymin+this._margin))*this._finalRatio);if(0<this._line.length&&(p=this._line[this._line.length-1],p.equals(c,f)))return;this._line.push(new x(c,f))}else this._line&&0<this._line.length&&this._pushLine();
else if(p||(c<this._xmin&&(c=this._xmin),c>this._xmax&&(c=this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),c=Math.round((c-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line&&0<this._line.length){p=this._line[this._line.length-1];const n=p.x===c,y=p.y===f;n&&y||(this._isH&&n?(p.x=c,p.y=f,p=this._line[this._line.length-2],p.x===c&&p.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(p=this._line[this._line.length-
2],this._isH=p.x===c,this._isV=p.y===f)):(this._isH=p.x===c,this._isV=p.y===f)):this._isV&&y?(p.x=c,p.y=f,p=this._line[this._line.length-2],p.x===c&&p.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(p=this._line[this._line.length-2],this._isH=p.x===c,this._isV=p.y===f)):(this._isH=p.x===c,this._isV=p.y===f)):(this._line.push(new x(c,f)),this._isH=n,this._isV=y))}else this._line.push(new x(c,f))};return a._createClass(d)}(),h=function(){function d(){}var k=d.prototype;k.setExtent=
function(c){this._ratio=4096===c?1:4096/c};k.reset=function(c){this._lines=[];this._line=null};k.moveTo=function(c,f){this._line&&this._lines.push(this._line);this._line=[];const p=this._ratio;this._line.push(new x(c*p,f*p))};k.lineTo=function(c,f){const p=this._ratio;this._line.push(new x(c*p,f*p))};k.close=function(){const c=this._line;c&&!c[0].isEqual(c[c.length-1])&&c.push(c[0])};k.result=function(){this._line&&this._lines.push(this._line);return 0===this._lines.length?null:this._lines};a._createClass(d,
[{key:"validateTessellation",get:function(){return 1>this._ratio}}]);return d}();var u;(function(d){d[d.sideLeft=0]="sideLeft";d[d.sideRight=1]="sideRight";d[d.sideTop=2]="sideTop";d[d.sideBottom=3]="sideBottom"})(u||(u={}));let e=function(){function d(){}d.simplify=function(k,c,f){if(f){var p=-c,n=k+c,y=-c,D=k+c;k=[];c=[];var F=f.length;for(let C=0;C<F;++C){const J=f[C];if(!J||2>J.length)continue;let L=J[0],z;const G=J.length;for(let w=1;w<G;++w)z=J[w],L.x===z.x&&(L.x<=p&&(L.y>z.y?(k.push(C),k.push(w),
k.push(u.sideLeft),k.push(-1)):(c.push(C),c.push(w),c.push(u.sideLeft),c.push(-1))),L.x>=n&&(L.y<z.y?(k.push(C),k.push(w),k.push(u.sideRight),k.push(-1)):(c.push(C),c.push(w),c.push(u.sideRight),c.push(-1)))),L.y===z.y&&(L.y<=y&&(L.x<z.x?(k.push(C),k.push(w),k.push(u.sideTop),k.push(-1)):(c.push(C),c.push(w),c.push(u.sideTop),c.push(-1))),L.y>=D&&(L.x>z.x?(k.push(C),k.push(w),k.push(u.sideBottom),k.push(-1)):(c.push(C),c.push(w),c.push(u.sideBottom),c.push(-1)))),L=z}0!==k.length&&0!==c.length&&(d.fillParent(f,
c,k),d.fillParent(f,k,c),p=[],d.calcDeltas(p,c,k),d.calcDeltas(p,k,c),d.addDeltas(p,f))}};d.fillParent=function(k,c,f){const p=f.length,n=c.length;for(let J=0;J<n;J+=4){var y=c[J],D=c[J+1];const L=c[J+2],z=k[y][D-1];y=k[y][D];D=8092;let G=-1;for(let w=0;w<p;w+=4){if(f[w+2]!==L)continue;var F=f[w];const A=f[w+1];var C=k[F][A-1];F=k[F][A];switch(L){case u.sideLeft:case u.sideRight:l(z.y,C.y,F.y)&&l(y.y,C.y,F.y)&&(C=Math.abs(F.y-C.y),C<D&&(D=C,G=w));break;case u.sideTop:case u.sideBottom:l(z.x,C.x,F.x)&&
l(y.x,C.x,F.x)&&(C=Math.abs(F.x-C.x),C<D&&(D=C,G=w))}}c[J+3]=G}};d.calcDeltas=function(k,c,f){const p=c.length;for(let n=0;n<p;n+=4){const y=d.calcDelta(n,c,f,[]);k.push(c[n]);k.push(c[n+1]);k.push(c[n+2]);k.push(y)}};d.calcDelta=function(k,c,f,p){k=c[k+3];if(-1===k)return 0;const n=p.length;if(1<n&&p[n-2]===k)return 0;p.push(k);return d.calcDelta(k,f,c,p)+1};d.addDeltas=function(k,c){const f=k.length;let p=0;for(var n=0;n<f;n+=4){var y=k[n+3];y>p&&(p=y)}for(n=0;n<f;n+=4){y=c[k[n]];const D=k[n+1],
F=p-k[n+3];switch(k[n+2]){case u.sideLeft:y[D-1].x-=F;y[D].x-=F;1===D&&(y[y.length-1].x-=F);D===y.length-1&&(y[0].x-=F);break;case u.sideRight:y[D-1].x+=F;y[D].x+=F;1===D&&(y[y.length-1].x+=F);D===y.length-1&&(y[0].x+=F);break;case u.sideTop:y[D-1].y-=F;y[D].y-=F;1===D&&(y[y.length-1].y-=F);D===y.length-1&&(y[0].y-=F);break;case u.sideBottom:y[D-1].y+=F,y[D].y+=F,1===D&&(y[y.length-1].y+=F),D===y.length-1&&(y[0].y+=F)}}};return a._createClass(d)}();const l=(d,k,c)=>d>=k&&d<=c||d>=c&&d<=k;b.Point=
x;b.SimpleBuilder=h;b.TileClipper=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(b){function a(q,h,u,e){function l(y,D){var F;let C,J;C=y;for(F=0;8>F;F++){J=((c*C+k)*C+d)*C-y;if(Math.abs(J)<D)return C;var L=(3*c*C+2*k)*C+d;if(1E-6>Math.abs(L))break;C-=J/L}L=0;F=1;C=y;if(C<L)return L;if(C>F)return F;for(;L<F;){J=((c*C+k)*C+d)*C;if(Math.abs(J-y)<D)break;y>J?L=C:F=C;C=.5*(F-L)+L}return C}const d=3*q,k=3*(u-q)-d,c=1-
d-k,f=3*h,p=3*(e-h)-f,n=1-f-p;return function(y,D=1E-6){y=l(y,D);return((n*y+p)*y+f)*y}}const x=/^cubic-bezier\((.*)\)/,r={};r.ease=a(.25,.1,.25,1);r.linear=a(0,0,1,1);r.easeIn=r["ease-in"]=a(.42,0,1,1);r.easeOut=r["ease-out"]=a(0,0,.58,1);r.easeInOut=r["ease-in-out"]=a(.42,0,.58,1);b.easingFunctions=r;b.parse=function(q){let h=r[q]||null;!h&&(q=x.exec(q))&&(q=q[1].split(",").map(u=>parseFloat(u.trim())),4!==q.length||q.some(u=>isNaN(u))||(h=a.apply(a,q)));return h};b.unitBezier=a;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],function(b){function a(e,l){e%=l;return 0<=e?e:e+l}const x=Number.POSITIVE_INFINITY,r=Math.PI,q=128/r,h=256/360,u=1/Math.LN2;b.C_2PI=2*r;b.C_DEG_TO_256=h;b.C_DEG_TO_RAD=r/180;b.C_INFINITY=x;b.C_PI=r;b.C_RAD_TO_256=q;b.between=function(e,l,d){return e>=l&&e<=d||e>=d&&e<=l};b.degToByte=function(e){return a(e*h,256)};b.interpolate=function(e,l,d){return e*(1-d)+l*d};b.log2=function(e){return Math.log(e)*
u};b.positiveMod=a;b.radToByte=function(e){return a(e*q,256)};b.sqr=function(e){return e*e};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(b,a){function x(n,y){return{kind:"array",itemType:n,n:y}}function r(n){if("array"===n.kind){const y=r(n.itemType);return"number"===typeof n.n?`array<${y}, ${n.n}>`:"value"===n.itemType.kind?"array":`array<${y}>`}return n.kind}function q(n){if(null===
n)return u;if("string"===typeof n)return l;if("boolean"===typeof n)return d;if("number"===typeof n)return e;if(n instanceof a)return k;if(Array.isArray(n)){let y;for(const D of n){const F=q(D);if(!y)y=F;else if(y!==F){y=f;break}}return x(y||f,n.length)}return"object"===typeof n?c:f}function h(n,y){if("array"===y.kind)return"array"===n.kind&&(0===n.n&&"value"===n.itemType.kind||h(n.itemType,y.itemType))&&("number"!==typeof y.n||y.n===n.n);if("value"===y.kind)for(const D of p)if(h(n,D))return!0;return y.kind===
n.kind}const u={kind:"null"},e={kind:"number"},l={kind:"string"},d={kind:"boolean"},k={kind:"color"},c={kind:"object"},f={kind:"value"},p=[u,e,l,d,k,c,x(f)];b.BooleanType=d;b.ColorType=k;b.NullType=u;b.NumberType=e;b.ObjectType=c;b.StringType=l;b.ValueType=f;b.arrayType=x;b.getType=q;b.matchType=h;b.typeToString=r;b.valueToString=function(n){if(null===n)return"";const y=typeof n;return"string"===y?n:"number"===y||"boolean"===y?String(n):n instanceof a?n.toString():JSON.stringify(n)};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(b,a,x,r,q){return function(){function h(e,l){this.isDataDriven=!1;this.interpolator=null;switch(e.type){case "number":var d=!0;break;case "color":d=!0;break;case "array":d="number"===e.value;break;default:d=!1}null==l&&(l=e.default);if(Array.isArray(l)&&
0<l.length&&r.ops[l[0]]){d={number:q.NumberType,color:q.ColorType,string:q.StringType,boolean:q.BooleanType,enum:q.StringType};try{var k="array"===e.type?q.arrayType(d[e.value]||q.ValueType,e.length):d[e.type];const c=r.createExpression(l,null,k);this.getValue=this._buildExpression(c,e);this.isDataDriven=!0;c instanceof r.Interpolate&&c.input instanceof r.Zoom&&(this.interpolator=c)}catch(c){console.log(c.message),this.getValue=this._buildSimple(e.default)}}else{d&&"interval"===l.type&&(d=!1);if(k=
l&&l.stops&&0<l.stops.length)for(const c of l.stops)c[1]=this._validate(c[1],e);if(this.isDataDriven=l?!!l.property:!1)if(void 0!==l.default&&(l.default=this._validate(l.default,e)),k)switch(l.type){case "identity":this.getValue=this._buildIdentity(l,e);break;case "categorical":this.getValue=this._buildCategorical(l,e);break;default:this.getValue=d?this._buildInterpolate(l,e):this._buildInterval(l,e)}else this.getValue=this._buildIdentity(l,e);else k?this.getValue=d?this._buildZoomInterpolate(l):
this._buildZoomInterval(l):(l=this._validate(l,e),this.getValue=this._buildSimple(l))}}var u=h.prototype;u._validate=function(e,l){if("number"===l.type){if(e<l.minimum)return l.minimum;if(e>l.maximum)return l.maximum}else"color"===l.type?e=h._parseColor(e):"enum"===l.type?"string"===typeof e&&(e=l.values.indexOf(e)):"array"===l.type&&"enum"===l.value?e=e.map(d=>"string"===typeof d?l.values.indexOf(d):d):"string"===l.type&&(e=q.valueToString(e));return e};u._buildSimple=function(e){return()=>e};u._buildExpression=
function(e,l){return(d,k)=>{try{const c=e.evaluate(k,d);return void 0===c?l.default:this._validate(c,l)}catch(c){return console.log(c.message),l.default}}};u._buildIdentity=function(e,l){return(d,k)=>{let c;k&&(c=k.values[e.property]);void 0!==c&&(c=this._validate(c,l));return null!=c?c:void 0!==e.default?e.default:l.default}};u._buildCategorical=function(e,l){return(d,k)=>{let c;k&&(c=k.values[e.property]);c=this._categorical(c,e.stops);return void 0!==c?c:void 0!==e.default?e.default:l.default}};
u._buildInterval=function(e,l){return(d,k)=>{let c;k&&(c=k.values[e.property]);return"number"===typeof c?this._interval(c,e.stops):void 0!==e.default?e.default:l.default}};u._buildInterpolate=function(e,l){return(d,k)=>{let c;k&&(c=k.values[e.property]);return"number"===typeof c?this._interpolate(c,e.stops,e.base||1):void 0!==e.default?e.default:l.default}};u._buildZoomInterpolate=function(e){return l=>this._interpolate(l,e.stops,e.base||1)};u._buildZoomInterval=function(e){return l=>this._interval(l,
e.stops)};u._categorical=function(e,l){const d=l.length;for(let k=0;k<d;k++)if(l[k][0]===e)return l[k][1]};u._interval=function(e,l){const d=l.length;let k=0;for(let c=0;c<d;c++)if(l[c][0]<=e)k=c;else break;return l[k][1]};u._interpolate=function(e,l,d){const k=l.length;for(let p=0;p<k;p++){const n=l[p];if(n[0]<=e)var c=n;else{var f=n;break}}if(c&&f){l=f[0]-c[0];e-=c[0];d=1===d?e/l:(d**e-1)/(d**l-1);if(Array.isArray(c[1])){c=c[1];f=f[1];e=[];for(l=0;l<c.length;l++)e.push(x.interpolate(c[l],f[l],d));
return e}return x.interpolate(c[1],f[1],d)}if(c)return c[1];if(f)return f[1]};h._isEmpty=function(e){for(const l in e)if(e.hasOwnProperty(l))return!1;return!0};h._parseColor=function(e){if(Array.isArray(e))return e;"string"===typeof e&&(e=new a(e));if(e instanceof a&&!this._isEmpty(e))return a.toUnitRGBA(e)};return b._createClass(h)}()})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(b){b.ANGLE_FACTOR_256=256/360;b.ATTRIBUTE_DATA_ANIMATION=1;b.ATTRIBUTE_DATA_DD0=
3;b.ATTRIBUTE_DATA_DD1=4;b.ATTRIBUTE_DATA_FILTER_FLAGS=0;b.ATTRIBUTE_DATA_GPGPU=2;b.ATTRIBUTE_DATA_VV=3;b.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;b.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};b.BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR=8;b.BITSET_FILL_RANDOM_PATTERN_OFFSET=4;b.BITSET_GENERIC_CONSIDER_ALPHA_ONLY=16;b.BITSET_GENERIC_LOCK_COLOR=2;b.BITSET_LINE_SCALE_DASH=4;b.BITSET_MARKER_ALIGNMENT_MAP=1;b.BITSET_MARKER_ALIGNMENT_SCREEN=0;b.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE=
4;b.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY=8;b.BITSET_TYPE_FILL_OUTLINE=1;b.BUFFER_DATA_MINIMUM_SIZE=128;b.BUFFER_DATA_POOL_SIZE=4;b.CHART_MAX_FIELDS=10;b.COLLISION_BOX_PADDING=16;b.COLLISION_BUCKET_SIZE=128;b.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;b.COLLISION_MAX_ZOOM_DELTA=1;b.COLLISION_PLACEMENT_PADDING=8;b.COLLISION_TILE_BOX_SIZE=4;b.DEBUG_LABELS=!1;b.DISPLAY_RECORD_INT_PER_ELEMENT=8;b.DOT_DENSITY_MAX_FIELDS=8;b.EFFECT_FLAG_0=4;b.ENABLE_EARLY_LABEL_DISCARD=!1;b.EXTRUDE_SCALE=64;b.FILTER_FLAG_0=
2;b.GLYPH_SIZE=24;b.HEURISTIC_GLYPHS_PER_FEATURE=10;b.HEURISTIC_GLYPHS_PER_LINE=50;b.HIGHLIGHT_FLAG=1;b.HITTEST_RADIUS=3;b.MAGIC_LABEL_LINE_HEIGHT=29;b.MAX_FILTERS=2;b.MAX_GPU_UPLOADS_PER_FRAME=2;b.MIN_MAX_ZOOM_PRECISION_FACTOR=10;b.NAN_MAGIC_NUMBER=1E-30;b.PATCH_PIXEL_BUFFER_ALLOC_SIZE=500;b.PATTERN_FILL_RASTERIZATION_SCALE=2;b.PICTURE_FILL_COLOR=4294967295;b.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE=1024;b.RASTER_TILE_SIZE=256;b.SDF_TEXTURE_SIZE=124;b.SPRITE_PADDING=2;b.TEXTURE_BINDING_ATTRIBUTE_DATA_0=
1;b.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;b.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;b.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;b.TEXTURE_BINDING_ATTRIBUTE_DATA_4=5;b.TEXTURE_BINDING_ATTRIBUTE_DATA_5=6;b.TEXTURE_BINDING_BITMAP=0;b.TEXTURE_BINDING_GLYPH_ATLAS=0;b.TEXTURE_BINDING_GPGPU=12;b.TEXTURE_BINDING_HIGHLIGHT_0=5;b.TEXTURE_BINDING_HIGHLIGHT_1=6;b.TEXTURE_BINDING_RENDERER_0=5;b.TEXTURE_BINDING_RENDERER_1=6;b.TEXTURE_BINDING_SPRITE_ATLAS=0;b.TEXTURE_UPLOAD_MANAGER_BUDGET=4;b.TEXTURE_UPLOAD_MANAGER_CHUNK_SIZE=
128;b.TEXT_PLACEMENT_PADDING=8;b.THIN_LINE_HALF_WIDTH_THRESHOLD=1.05;b.TILE_SIZE=512;b.VTL_HIGH_RES_CUTOFF=1.15;b.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6;b.VTL_TEXTURE_BINDING_UNIT_SPRITES=5;b.WEBGL_MAX_INNER_STOPS=6;b.WEBGL_MAX_STOPS=8;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],function(b,a,x,r){function q(p){switch(p){case r.ContextType.WEBGL1:return h();
case r.ContextType.WEBGL2:return u()}}function h(){if(!l){{const p=new c,n=e(r.ContextType.WEBGL1,p);x.isNone(n)||(p.supportsElementIndexUint=null!==n.getExtension("OES_element_index_uint"),p.supportsStandardDerivatives=null!==n.getExtension("OES_standard_derivatives"),p.supportsInstancedArrays=null!==n.getExtension("ANGLE_instanced_arrays"),p.supportsTextureFloat=null!==n.getExtension("OES_texture_float"),p.supportsTextureHalfFloat=null!==n.getExtension("OES_texture_half_float"),p.supportsColorBufferFloat=
null!==n.getExtension("WEBGL_color_buffer_float"),p.supportsColorBufferFloatBlend=null!==n.getExtension("EXT_float_blend"),p.supportsColorBufferHalfFloat=null!==n.getExtension("EXT_color_buffer_half_float"));l=p}}return l}function u(){if(!d){{const p=new f,n=e(r.ContextType.WEBGL2,p);x.isNone(n)||(p.supportsColorBufferFloat=null!==n.getExtension("EXT_color_buffer_float"),p.supportsColorBufferFloatBlend=null!==n.getExtension("EXT_float_blend"),p.supportsColorBufferHalfFloat=p.supportsColorBufferFloat||
null!==n.getExtension("EXT_color_buffer_half_float"));d=p}}return d}function e(p,n){if(p===r.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||p===r.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const y=document.createElement("canvas");if(!y)return null;let D=r.createContext(y,p,{failIfMajorPerformanceCaveat:!0});x.isNone(D)&&(D=r.createContext(y,p),x.isSome(D)&&(n.majorPerformanceCaveat=!0));if(x.isNone(D))return D;if(p===r.ContextType.WEBGL1){if(p=D.getParameter(D.VERSION)?.match(/^WebGL\s+([\d.]*)/))p=
parseFloat(p[1]),n.available=.94<=p}else n.available=!0;n.maxTextureSize=D.getParameter(D.MAX_TEXTURE_SIZE);n.supportsVertexShaderSamplers=0<D.getParameter(D.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(p=D.getShaderPrecisionFormat(D.FRAGMENT_SHADER,D.HIGH_FLOAT))n.supportsHighPrecisionFragment=0<p.precision;return D}let l,d,k=a._createClass(function(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=
this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}),c=function(p){function n(){var D=y.apply(this,arguments);D.type=r.ContextType.WEBGL1;return D}a._inherits(n,p);var y=a._createSuper(n);return a._createClass(n)}(k),f=function(p){function n(){var D=y.apply(this,arguments);D.type=r.ContextType.WEBGL2;D.supportsElementIndexUint=!0;
D.supportsStandardDerivatives=!0;D.supportsInstancedArrays=!0;D.supportsTextureFloat=!0;D.supportsTextureHalfFloat=!0;return D}a._inherits(n,p);var y=a._createSuper(n);return a._createClass(n)}(k);b.getWebGL1Capabilities=h;b.getWebGL2Capabilities=u;b.getWebGLCapabilities=function(p){for(p=r.getContextTypes(p);1<p.length;){const n=q(p.shift());if(n.available)return n}return q(p.shift())};b.getWebGLVersionCapabilities=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/context-util":function(){define(["exports",
"../../core/has","../../core/maybe"],function(b,a,x){function r(e){const l=a("esri-force-webgl");if(l===b.ContextType.WEBGL1||l===b.ContextType.WEBGL2)return[l];switch(e){case "2d":return a("mac")&&a("chrome")?[b.ContextType.WEBGL1,b.ContextType.WEBGL2]:[b.ContextType.WEBGL2,b.ContextType.WEBGL1];case "3d":return[b.ContextType.WEBGL2,b.ContextType.WEBGL1]}}function q(e,l,d={}){if(!window.WebGLRenderingContext)return u(e,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),
null;l=h(e,l,d);x.isNone(l)&&u(e,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return l}function h(e,l,d={}){l=l===b.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let k=null;for(const c of l){try{k=e.getContext(c,d)}catch(f){}if(k)break}return k}function u(e,l){(e=e.parentNode)&&(e.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
l+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}b.ContextType=void 0;(function(e){e[e.WEBGL1=1]="WEBGL1";e[e.WEBGL2=2]="WEBGL2"})(b.ContextType||(b.ContextType={}));b.createContext=h;b.createContextOrErrorHTML=function(e,l,d={}){for(e=r(e);1<e.length;){const k=h(l,e.shift(),d);if(x.isSome(k))return k}return q(l,e.shift(),d)};b.getContextTypes=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/asyncUtils ../core/Error ../core/lang ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/imageUtils ./support/SpriteSource ./support/TileInfo ./support/vectorTileLayerLoader ../portal/support/jsonContext ../portal/support/urlUtils ../chunks/persistableUrlUtils ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),function(b,
a,x,r,q,h,u,e,l,d,k,c,f,p,n,y,D,F,C,J,L,z,G,w,A,H,E,M,P,O,Q,S,U,Y,Z,da){e=function(X){function ea(...K){K=ka.call(this,...K);K._spriteSourceMap=new Map;K.currentStyleInfo=null;K.style=null;K.isReference=null;K.operationalLayerType="VectorTileLayer";K.type="vector-tile";K.url=null;K.showCollisionBoxes="none";K.path=null;return K}b._inherits(ea,X);var ka=b._createSuper(ea);X=ea.prototype;X.normalizeCtorArgs=function(K,R){return"string"===typeof K?{url:K,...R}:K};X.destroy=function(){if(this.sourceNameToSource)for(const K of Object.values(this.sourceNameToSource))K?.destroy();
this.primarySource?.destroy();this._spriteSourceMap.clear()};X.prefetchResources=async function(K){await this.loadSpriteSource(globalThis.devicePixelRatio||1,K)};X.load=function(K){const R=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},K).catch(l.throwIfAbortError).then(async()=>{if(this.portalItem&&this.portalItem.id){var W=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await x(W,{...K,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:W},
Q.createForItemRead(this.portalItem))}}).catch(l.throwIfAbortError).then(()=>this._loadStyle(K));this.addResolvingPromise(R);return Promise.resolve(this)};X.writeStyleUrl=function(K,R){K&&d.isProtocolRelative(K)&&(K=`https:${K}`);const W=u.unwrap(S.parseKnownArcGISOnlineDomain(K));R.styleUrl=U.ensureMainOnlineDomain(K,W)};X.readVersion=function(K,R){return R.version?parseFloat(R.version):parseFloat(R.currentVersion)};X.loadSpriteSource=async function(K=1,R){if(!this._spriteSourceMap.has(K)){var W=
da.getWebGLCapabilities("2d").maxTextureSize;const ca=this.currentStyleInfo?.spriteUrl?d.addQueryParameters(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null;W=new M({type:"url",spriteUrl:ca,pixelRatio:K,spriteFormat:this.currentStyleInfo?.spriteFormat},W);await W.load(R);this._spriteSourceMap.set(K,W)}return this._spriteSourceMap.get(K)};X.setSpriteSource=async function(K,R){if(!K)return null;var W=da.getWebGLCapabilities("2d").maxTextureSize,ca=K.spriteUrl;ca=ca?
d.addQueryParameters(ca,{...this.customParameters,token:this.apiKey}):null;if(!ca&&"url"===K.type)return null;W=new M(K,W);try{await W.load(R);const ia=K.pixelRatio||1;this._spriteSourceMap.clear();this._spriteSourceMap.set(ia,W);ca&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=ca);this.emit("spriteSource-change",{spriteSource:W});return W}catch(ia){l.throwIfAbortError(ia)}return null};X.loadStyle=async function(K,R){const W=K||this.style||this.url;if(this._loadingTask&&"string"===typeof W&&
this.url===W)return this._loadingTask.promise;this._loadingTask?.abort();this._loadingTask=r.createTask(ca=>{this._spriteSourceMap.clear();return this._getSourceAndStyle(W,{signal:ca})},R);return this._loadingTask.promise};X.getStyleLayerId=function(K){return this.styleRepository.getStyleLayerId(K)};X.getStyleLayerIndex=function(K){return this.styleRepository.getStyleLayerIndex(K)};X.getPaintProperties=function(K){return h.clone(this.styleRepository.getPaintProperties(K))};X.setPaintProperties=function(K,
R){const W=this.styleRepository.isPainterDataDriven(K);this.styleRepository.setPaintProperties(K,R);const ca=this.styleRepository.isPainterDataDriven(K);this.emit("paint-change",{layer:K,paint:R,isDataDriven:W||ca})};X.getStyleLayer=function(K){return h.clone(this.styleRepository.getStyleLayer(K))};X.setStyleLayer=function(K,R){this.styleRepository.setStyleLayer(K,R);this.emit("style-layer-change",{layer:K,index:R})};X.deleteStyleLayer=function(K){this.styleRepository.deleteStyleLayer(K);this.emit("delete-style-layer",
{layer:K})};X.getLayoutProperties=function(K){return h.clone(this.styleRepository.getLayoutProperties(K))};X.setLayoutProperties=function(K,R){this.styleRepository.setLayoutProperties(K,R);this.emit("layout-change",{layer:K,layout:R})};X.setStyleLayerVisibility=function(K,R){this.styleRepository.setStyleLayerVisibility(K,R);this.emit("style-layer-visibility-change",{layer:K,visibility:R})};X.getStyleLayerVisibility=function(K){return this.styleRepository.getStyleLayerVisibility(K)};X.write=function(K,
R){return R?.origin&&!this.styleUrl?(R.messages&&R.messages.push(new q("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):b._get(b._getPrototypeOf(ea.prototype),"write",this).call(this,K,R)};X.getTileUrl=function(K,R,W){return null};X._getSourceAndStyle=async function(K,R){if(!K)throw Error("invalid style!");R=await O.loadMetadata(K,{...R,query:{...this.customParameters,token:this.apiKey}});"webp"!==R.spriteFormat||
await E.checkWebPSupport("lossy")||(R.spriteFormat="png");this._set("currentStyleInfo",{...R});"string"===typeof K?(this.url=K,this.style=null):(this.url=null,this.style=K);this._set("sourceNameToSource",R.sourceNameToSource);this._set("primarySource",R.sourceNameToSource[R.primarySourceName]);this._set("styleRepository",new Z(R.style));this.read(R.layerDefinition,{origin:"service"});this.emit("load-style")};X._getDefaultAttribution=function(K){var R=K.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);
K="OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" ");if(R){var W=R[2]&&R[2].toLowerCase();if(W){R=R[1]||"";for(const ca of K)if(ca.toLowerCase().includes(W))return d.normalize(`//static.arcgis.com/attribution/Vector${R}/${ca}`)}}};X._loadStyle=async function(K){return this._loadingTask?.promise??this.loadStyle(null,
K)};b._createClass(ea,[{key:"attributionDataUrl",get:function(){var K=this.currentStyleInfo;K=K&&K.serviceUrl&&d.urlToObject(K.serviceUrl);return K?(K=this._getDefaultAttribution(K.path))?d.addQueryParameters(K,{...this.customParameters,token:this.apiKey}):null:null}},{key:"capabilities",get:function(){const K=this.primarySource;return K?K.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){return this.primarySource?.fullExtent||
null}},{key:"parsedUrl",get:function(){return this.serviceUrl?d.urlToObject(this.serviceUrl):null}},{key:"serviceUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo?.spatialReference??null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"tileInfo",get:function(){const K=[];for(var R in this.sourceNameToSource)K.push(this.sourceNameToSource[R]);
R=this.primarySource?.tileInfo||new P;if(1<K.length)for(let W=0;W<K.length;W++)Y.areSchemasOverlapping(R,K[W].tileInfo)&&(R=Y.unionTileInfos(R,K[W].tileInfo));return R}}]);return ea}(z.BlendLayer(H.ScaleRangeLayer(J.ArcGISCachedService(L.ArcGISService(w.OperationalLayer(A.PortalLayer(G.CustomParametersMixin(C.APIKeyMixin(e.MultiOriginJSONMixin(F))))))))));a.__decorate([k.property({readOnly:!0})],e.prototype,"attributionDataUrl",null);a.__decorate([k.property({type:["show","hide"]})],e.prototype,"listMode",
void 0);a.__decorate([k.property({json:{read:!0,write:!0}})],e.prototype,"blendMode",void 0);a.__decorate([k.property({readOnly:!0,json:{read:!1}})],e.prototype,"capabilities",null);a.__decorate([k.property({readOnly:!0})],e.prototype,"currentStyleInfo",void 0);a.__decorate([k.property({json:{read:!1},readOnly:!0,type:y})],e.prototype,"fullExtent",null);a.__decorate([k.property()],e.prototype,"style",void 0);a.__decorate([k.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>
({enabled:!1})}}})],e.prototype,"isReference",void 0);a.__decorate([k.property({type:["VectorTileLayer"]})],e.prototype,"operationalLayerType",void 0);a.__decorate([k.property({readOnly:!0})],e.prototype,"parsedUrl",null);a.__decorate([k.property({readOnly:!0})],e.prototype,"serviceUrl",null);a.__decorate([k.property({type:D,readOnly:!0})],e.prototype,"spatialReference",null);a.__decorate([k.property({readOnly:!0})],e.prototype,"styleRepository",void 0);a.__decorate([k.property({readOnly:!0})],e.prototype,
"sourceNameToSource",void 0);a.__decorate([k.property({readOnly:!0})],e.prototype,"primarySource",void 0);a.__decorate([k.property({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],e.prototype,"styleUrl",null);a.__decorate([n.writer(["portal-item","web-document"],"styleUrl")],e.prototype,"writeStyleUrl",null);a.__decorate([k.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:P})],e.prototype,"tileInfo",null);
a.__decorate([k.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],e.prototype,"type",void 0);a.__decorate([k.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],e.prototype,"url",void 0);a.__decorate([k.property({readOnly:!0})],e.prototype,"version",void 0);a.__decorate([f.reader("version",["version","currentVersion"])],e.prototype,"readVersion",null);a.__decorate([k.property({type:String})],e.prototype,"showCollisionBoxes",
void 0);a.__decorate([k.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],e.prototype,"path",void 0);return e=a.__decorate([p.subclass("esri.layers.VectorTileLayer")],e)});