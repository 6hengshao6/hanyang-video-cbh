// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/ImageElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Error ../../core/maybe ../../core/urlUtils ../../core/uuid ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./MediaElementBase ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils".split(" "),
function(A,l,w,M,z,H,m,r,y,E,B,k,G,C,q,K,N){async function t(n){if("string"===typeof n){if(H.isBlobProtocol(n)){var {data:e}=await w(n,{responseType:"blob"});return e}if(H.isDataProtocol(n))return H.dataToBlob(n);e=await w(n,{responseType:"image"});return t(e.data)}return new Promise(u=>{if(n instanceof HTMLCanvasElement)var a=n;else{a=n instanceof HTMLImageElement?n.naturalWidth:n.width;var f=n instanceof HTMLImageElement?n.naturalHeight:n.height,g=document.createElement("canvas"),b=g.getContext("2d");
g.width=a;g.height=f;n instanceof HTMLImageElement?b.drawImage(n,0,0,n.width,n.height):n instanceof ImageData&&b.putImageData(n,0,0);a=g}return a.toBlob(u)})}function J(n,e){const u=m.generateUUID();n=`${H.join("media",u)}.${K.getResourceContentExtension(n)}`;return e.resourceFromPath(n)}y=function(n){function e(a){a=u.call(this,a);a.content=null;a.image=null;a.type="image";a.image=null;return a}A._inherits(e,n);var u=A._createSuper(e);n=e.prototype;n.load=function(){const a=this.image;if("string"===
typeof a){var f=w(a,{responseType:"image"}).then(({data:g})=>{this._set("content",g)});this.addResolvingPromise(f)}else a instanceof HTMLImageElement?(f=a.decode().then(()=>{this._set("content",a)}),this.addResolvingPromise(f)):a?this._set("content",a):this.addResolvingPromise(Promise.reject(new M("image-element:invalid-image-type","Invalid image type",{image:a})));return Promise.resolve(this)};n.readImage=function(a,f,g){return N.fromJSON(f.url,g)};n.writeImage=function(a,f,g,b){if(!z.isNone(a)){var c=
b?.portalItem,d=b?.resources;if(c&&d){var h="string"!==typeof a||H.isDataProtocol(a)||H.isBlobProtocol(a)?null:a;if(h){if(null==N.itemIdFromResourceUrl(h)){f[g]=h;return}b=N.toJSON(h,{...b,verifyItemRelativeUrls:b&&b.verifyItemRelativeUrls?{writtenUrls:b.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},N.MarkKeep.NO);if(c&&b&&!H.isAbsolute(b)){d.toKeep.push({resource:c.resourceFromPath(b),compress:!1});f[g]=b;return}}f[g]="\x3cpending\x3e";d.pendingOperations.push(t(a).then(p=>{const v=
J(p,c);f[g]=v.itemRelativeUrl;d.toAdd.push({resource:v,content:p,compress:!1,finish:L=>{this.image=L.url}})}))}else"string"===typeof a&&(f[g]=N.toJSON(a,b))}};return A._createClass(e)}(q);l.__decorate([r.property({readOnly:!0})],y.prototype,"content",void 0);l.__decorate([r.property({json:{name:"url",type:String}})],y.prototype,"image",void 0);l.__decorate([k.reader("image",["url"])],y.prototype,"readImage",null);l.__decorate([C.writer("image")],y.prototype,"writeImage",null);l.__decorate([r.property({readOnly:!0,
json:{name:"mediaType"}})],y.prototype,"type",void 0);return y=l.__decorate([G.subclass("esri.layers.support.ImageElement")],y)})},"esri/layers/support/MediaElementBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/Loadable ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./ControlPointsGeoreference ./CornersGeoreference ./ExtentAndRotationGeoreference ./GeoreferenceBase".split(" "),
function(A,l,w,M,z,H,m,r,y,E,B,k,G,C,q){m={key:"type",base:q,typeMap:{"control-points":k,corners:G,"extent-and-rotation":C}};w=function(K){function N(J){J=t.call(this,J);J.georeference=null;J.opacity=1;return J}A._inherits(N,K);var t=A._createSuper(N);N.prototype.readGeoreference=function(J){return k.fromJSON(J)};return A._createClass(N)}(w.NumericIdentifiableMixin(M.JSONSupportMixin(z)));l.__decorate([H.property({types:m,json:{write:!0}})],w.prototype,"georeference",void 0);l.__decorate([E.reader("georeference")],
w.prototype,"readGeoreference",null);l.__decorate([H.property()],w.prototype,"opacity",void 0);return w=l.__decorate([B.subclass("esri.layers.support.MediaElementBase")],w)})},"esri/layers/support/ControlPointsGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/perspectiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/mat3 ../../chunks/mat3f64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ../../geometry/SpatialReference ./GeoreferenceBase".split(" "),
function(A,l,w,M,z,H,m,r,y,E,B,k,G,C,q,K,N,t,J,n,e,u,a,f,g){function b(R){return m.isSome(R)&&m.isSome(R.sourcePoint)&&m.isSome(R.mapPoint)}function c(R,T,V){J.set(R,V.sourcePoint.x,V.sourcePoint.y);J.set(T,V.mapPoint.x,V.mapPoint.y)}function d(R,T,V){c(D,P,T);c(I,W,V);J.rotate(Q,I,D,ia);J.rotate(S,D,I,ia);J.rotate(fa,W,P,-ia);J.rotate(ba,P,W,-ia);T=P;V=W;var x=fa,O=ba;return r.getProjectiveTransform(R,v(ka,D,I,Q,S),v(la,T,V,x,O))}function h(R,T,V,x){c(D,P,T);c(I,W,V);c(Q,fa,x);J.lerp(S,D,I,.5);J.rotate(S,
Q,S,Math.PI);J.lerp(ba,P,W,.5);J.rotate(ba,fa,ba,Math.PI);T=P;V=W;x=fa;var O=ba;return r.getProjectiveTransform(R,v(ka,D,I,Q,S),v(la,T,V,x,O))}function p(R,T,V,x,O){c(D,P,T);c(I,W,V);c(Q,fa,x);c(S,ba,O);T=P;V=W;x=fa;O=ba;return r.getProjectiveTransform(R,v(ka,D,I,Q,S),v(la,T,V,x,O))}function v(R,T,V,x,O){R[0]=T[0];R[1]=T[1];R[2]=V[0];R[3]=V[1];R[4]=x[0];R[5]=x[1];R[6]=O[0];R[7]=O[1];return R}const L=t.create(),F=n.create();w=function(R){function T(){var x=V.apply(this,arguments);x.sourcePoint=null;
x.mapPoint=null;return x}A._inherits(T,R);var V=A._createSuper(T);return A._createClass(T)}(w);l.__decorate([E.property()],w.prototype,"sourcePoint",void 0);l.__decorate([E.property({type:e})],w.prototype,"mapPoint",void 0);w=l.__decorate([q.subclass("esri.layers.support.ControlPoint")],w);z=function(R){function T(x){x=V.call(this,x);x.controlPoints=null;x.height=0;x.type="control-points";x.width=0;return x}A._inherits(T,R);var V=A._createSuper(T);R=T.prototype;R.readControlPoints=function(x,O){const Y=
f.fromJSON(O.spatialReference),X=t.fromValues(...O.coefficients,1);return x.map(U=>{J.set(F,U.x,U.y);r.transformProjective(F,F,X);return{sourcePoint:U,mapPoint:new e({x:F[0],y:F[1],spatialReference:Y})}})};R.writeControlPoints=function(x,O,Y,X){m.isNone(this.transform)?(x=new M("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:X?.layer,georeference:this}),X?.messages?X.messages.push(x):H.getLogger(this.declaredClass).error(x.name,x.message)):
m.isSome(x)&&b(x[0])&&(O.controlPoints=x.map(U=>{U=m.unwrap(U.sourcePoint);return{x:U.x,y:U.y}}),O.spatialReference=x[0].mapPoint.spatialReference.toJSON(),O.coefficients=this.transform.slice(0,8))};R.toMap=function(x){if(m.isNone(x)||m.isNone(this.transform)||m.isNone(this.controlPoints)||!b(this.controlPoints[0]))return null;J.set(F,x.x,x.y);x=this.controlPoints[0].mapPoint.spatialReference;r.transformProjective(F,F,this.transform);return new e({x:F[0],y:F[1],spatialReference:x})};R.toSource=function(x){if(m.isNone(x)||
m.isNone(this.inverseTransform)||m.isNone(this.controlPoints)||!b(this.controlPoints[0]))return null;const O=this.controlPoints[0].mapPoint.spatialReference;x=x.normalize();x=a.projectOrLoad(x,O).geometry;if(m.isNone(x))return null;J.set(F,x.x,x.y);r.transformProjective(F,F,this.inverseTransform);return y.createScreenPoint(F[0],F[1])};R._updateTransform=function(x){const {controlPoints:O,width:Y,height:X}=this;if(!(!m.isNone(O)&&0<Y&&0<X))return null;const [U,Z,ca,ja]=O;if(!b(U))return null;var aa=
U.mapPoint.spatialReference;const da=this._projectControlPoint(Z,aa),ea=this._projectControlPoint(ca,aa);aa=this._projectControlPoint(ja,aa);if(!(da.valid&&ea.valid&&aa.valid&&b(da.controlPoint)))return null;m.isNone(x)&&(x=t.create());let ha=null;ha=b(ea.controlPoint)&&b(aa.controlPoint)?p(x,U,da.controlPoint,ea.controlPoint,aa.controlPoint):b(ea.controlPoint)?h(x,U,da.controlPoint,ea.controlPoint):d(x,U,da.controlPoint);return ha.every(ma=>0===ma)?null:ha};R._projectControlPoint=function(x,O){if(!b(x))return{valid:!0,
controlPoint:x};const {sourcePoint:Y,mapPoint:X}=x,{geometry:U,pending:Z}=a.projectOrLoad(X,O);return Z?{valid:!1,controlPoint:null}:Z||U?{valid:!0,controlPoint:{sourcePoint:Y,mapPoint:U}}:(H.getLogger(this.declaredClass).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:x,sourceSpatialReference:X.spatialReference,targetSpatialReference:O}),{valid:!1,controlPoint:null})};A._createClass(T,[{key:"coords",get:function(){if(m.isNone(this.controlPoints))return null;
const x=this._updateTransform(L);if(m.isNone(x)||!b(this.controlPoints[0]))return null;var O=this.width,Y=this.height,X=this.controlPoints[0].mapPoint.spatialReference;const U=n.fromValues(0,Y),Z=n.fromValues(0,0),ca=n.fromValues(O,0);O=n.fromValues(O,Y);r.transformProjective(U,U,x);r.transformProjective(Z,Z,x);r.transformProjective(ca,ca,x);r.transformProjective(O,O,x);return new u({rings:[[U,Z,ca,O,U]],spatialReference:X})},set:function(x){if(!m.isNone(this.controlPoints)&&b(this.controlPoints[0])){var O=
this.controlPoints[0].mapPoint.spatialReference;x=this.projectOrWarn(x,O);if(!m.isNone(x)){var {width:Y,height:X}=this,{rings:[[U,Z,ca,ja]]}=x;x={sourcePoint:y.createScreenPoint(0,X),mapPoint:new e({x:U[0],y:U[1],spatialReference:O})};var aa={sourcePoint:y.createScreenPoint(0,0),mapPoint:new e({x:Z[0],y:Z[1],spatialReference:O})},da={sourcePoint:y.createScreenPoint(Y,0),mapPoint:new e({x:ca[0],y:ca[1],spatialReference:O})},ea={sourcePoint:y.createScreenPoint(Y,X),mapPoint:new e({x:ja[0],y:ja[1],spatialReference:O})};
b(x)&&b(aa)&&b(da)&&b(ea)&&(p(L,x,aa,da,ea),this.controlPoints=m.unwrap(this.controlPoints).map(({sourcePoint:ha})=>{J.set(F,ha.x,ha.y);r.transformProjective(F,F,L);return{sourcePoint:ha,mapPoint:new e({x:F[0],y:F[1],spatialReference:O})}}))}}}},{key:"inverseTransform",get:function(){return m.isNone(this.transform)?null:N.invert(t.create(),this.transform)}},{key:"transform",get:function(){return this._updateTransform()}}]);return T}(z.JSONSupportMixin(g));l.__decorate([E.property({type:[w],json:{write:{allowNull:!1,
isRequired:!0}}})],z.prototype,"controlPoints",void 0);l.__decorate([C.reader("controlPoints")],z.prototype,"readControlPoints",null);l.__decorate([K.writer("controlPoints")],z.prototype,"writeControlPoints",null);l.__decorate([E.property()],z.prototype,"coords",null);l.__decorate([E.property({json:{write:!0}})],z.prototype,"height",void 0);l.__decorate([E.property({readOnly:!0})],z.prototype,"inverseTransform",null);l.__decorate([E.property({readOnly:!0})],z.prototype,"transform",null);l.__decorate([E.property({json:{write:!0}})],
z.prototype,"width",void 0);z=l.__decorate([q.subclass("esri.layers.support.ControlPointsGeoreference")],z);const D=n.create(),I=n.create(),Q=n.create(),S=n.create(),P=n.create(),W=n.create(),fa=n.create(),ba=n.create(),ia=Math.PI/2,ka=Array(8).fill(0),la=Array(8).fill(0);return z})},"esri/core/perspectiveUtils":function(){define("exports ../chunks/mat3 ../chunks/mat3f64 ../chunks/vec2 ../chunks/vec3 ../chunks/vec3f64".split(" "),function(A,l,w,M,z,H){function m(k,G,C,q,K,N,t,J,n){l.set(k,G,q,N,C,
K,t,1,1,1);z.set(r,J,n,1);l.adjoint(y,k);const [e,u,a]=z.transformMat3(r,r,l.transpose(y,y));l.set(y,e,0,0,0,u,0,0,0,a);return l.multiply(k,y,k)}const r=H.create(),y=w.create(),E=w.create(),B=w.create();A.getProjectiveTransform=function(k,G,C){m(E,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7]);m(B,C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7]);l.multiply(k,l.adjoint(E,E),B);0!==k[8]&&(k[0]/=k[8],k[1]/=k[8],k[2]/=k[8],k[3]/=k[8],k[4]/=k[8],k[5]/=k[8],k[6]/=k[8],k[7]/=k[8],k[8]/=k[8]);return k};A.transformProjective=
function(k,G,C){z.set(r,G[0],G[1],1);z.transformMat3(r,r,l.transpose(y,C));return 0===r[2]?M.set(k,r[0],r[1]):M.set(k,r[0]/r[2],r[1]/r[2])};Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/GeoreferenceBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/Logger ../../core/maybe ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/subclass ../../geometry/projection".split(" "),
function(A,l,w,M,z,H,m,r,y,E,B){w=function(k){function G(){return C.apply(this,arguments)}A._inherits(G,k);var C=A._createSuper(G);G.prototype.projectOrWarn=function(q,K){if(z.isNone(q))return q;const {geometry:N,pending:t}=B.projectOrLoad(q,K);return t?null:t||N?N:(M.getLogger(this.declaredClass).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:q,sourceSpatialReference:q.spatialReference,targetSpatialReference:K}),null)};return A._createClass(G)}(w.Clonable);
return w=l.__decorate([E.subclass("esri.layers.support.GeoreferenceBase")],w)})},"esri/layers/support/CornersGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/Polygon ./GeoreferenceBase".split(" "),function(A,l,w,M,z,H,m,r,y,E,B){z=function(k){function G(q){q=
C.call(this,q);q.bottomLeft=null;q.bottomRight=null;q.topLeft=null;q.topRight=null;q.type="corners";return q}A._inherits(G,k);var C=A._createSuper(G);A._createClass(G,[{key:"coords",get:function(){let {topLeft:q,topRight:K,bottomLeft:N,bottomRight:t}=this;if(w.isNone(q)||w.isNone(K)||w.isNone(N)||w.isNone(t))return null;const J=q.spatialReference;K=this.projectOrWarn(K,J);N=this.projectOrWarn(N,J);t=this.projectOrWarn(t,J);return w.isNone(K)||w.isNone(N)||w.isNone(t)?null:new E({rings:[[[N.x,N.y],
[q.x,q.y],[K.x,K.y],[t.x,t.y],[N.x,N.y]]],spatialReference:J})},set:function(q){var {topLeft:K}=this;if(!w.isNone(K)&&(K=K.spatialReference,q=this.projectOrWarn(q,K),!w.isNone(q))){var {rings:[[N,t,J,n]]}=q;this.bottomLeft=new y({x:N[0],y:N[1],spatialReference:K});this.topLeft=new y({x:t[0],y:t[1],spatialReference:K});this.topRight=new y({x:J[0],y:J[1],spatialReference:K});this.bottomRight=new y({x:n[0],y:n[1],spatialReference:K})}}}]);return G}(B);l.__decorate([M.property()],z.prototype,"coords",
null);l.__decorate([M.property({type:y})],z.prototype,"bottomLeft",void 0);l.__decorate([M.property({type:y})],z.prototype,"bottomRight",void 0);l.__decorate([M.property({type:y})],z.prototype,"topLeft",void 0);l.__decorate([M.property({type:y})],z.prototype,"topRight",void 0);return z=l.__decorate([r.subclass("esri.layers.support.CornersGeoreference")],z)})},"esri/layers/support/ExtentAndRotationGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/mathUtils ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../geometry/Extent ../../geometry/Polygon ./GeoreferenceBase".split(" "),
function(A,l,w,M,z,H,m,r,y,E,B,k,G){function C(q,K,N){N=E.toRadian(N);const t=Math.cos(N),J=Math.sin(N);return(n,e)=>[t*(n-q)+J*(e-K)+q,t*(e-K)-J*(n-q)+K]}H=function(q){function K(t){t=N.call(this,t);t.extent=null;t.rotation=0;t.type="extent-and-rotation";return t}A._inherits(K,q);var N=A._createSuper(K);A._createClass(K,[{key:"coords",get:function(){if(M.isNone(this.extent))return null;const {xmin:t,ymin:J,xmax:n,ymax:e,spatialReference:u}=this.extent;if(this.rotation){const {x:f,y:g}=this.extent.center;
var a=C(f,g,this.rotation);a=[a(t,J),a(t,e),a(n,e),a(n,J)];a.push(a[0])}else a=[[t,J],[t,e],[n,e],[n,J],[t,J]];return new k({rings:[a],spatialReference:u})},set:function(t){if(!M.isNone(t)&&!M.isNone(this.extent)){var J=this.extent.spatialReference;t=this.projectOrWarn(t,J);if(!M.isNone(t)&&!M.isNone(t.extent)){var {rings:[[n,e,u]],extent:{center:{x:a,y:f}}}=t;t=w.rad2deg(Math.PI/2-Math.atan2(e[1]-n[1],e[0]-n[0]));var g=C(a,f,-t),[b,c]=g(n[0],n[1]),[d,h]=g(u[0],u[1]);this.extent=new B({xmin:b,ymin:c,
xmax:d,ymax:h,spatialReference:J});this.rotation=t}}}}]);return K}(G);l.__decorate([z.property()],H.prototype,"coords",null);l.__decorate([z.property({type:B})],H.prototype,"extent",void 0);l.__decorate([z.property({type:Number})],H.prototype,"rotation",void 0);return H=l.__decorate([y.subclass("esri.layers.support.ExtentAndRotationGeoreference")],H)})},"esri/portal/support/resourceExtension":function(){define(["exports","../../core/urlUtils"],function(A,l){const w={},M=w["text/plain"],z={png:"image/png",
jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const H in z)w[z[H]]=H;A.getResourceContentExtension=function(H){H instanceof Blob?H=H.type:(H=l.getPathExtension(H.url),H=z[H]||"text/plain");return w[H]||M};Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/LocalMediaElementSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Collection ../../core/collectionUtils ../../core/Evented ../../core/HandleOwner ../../core/Loadable ../../core/Logger ../../core/maybe ../../core/Promise ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/intersectsBase ../../geometry/support/spatialReferenceUtils ../graphics/data/BoundsStore ./ImageElement ./MediaElementBase ./MediaElementView ./VideoElement ../../geometry/SpatialReference".split(" "),
function(A,l,w,M,z,H,m,r,y,E,B,k,G,C,q,K,N,t,J,n,e,u,a,f,g,b,c,d,h){const p=M.ofType({key:"type",defaultKeyValue:"image",base:b,typeMap:{image:g,video:d}});w=function(v){function L(D){var I=F.call(this,D);I._index=new f.BoundsStore;I._elementViewsMap=new Map;I._elementsIndexes=new Map;I._elementsChangedHandler=Q=>{for(var S of Q.removed){const P=I._elementViewsMap.get(S);I._elementViewsMap.delete(S);I._index.delete(P);I.handles.remove(P);P.destroy();I.notifyChange("fullExtent")}({spatialReference:S}=
A._assertThisInitialized(I));for(const P of Q.added){if(I._elementViewsMap.get(P))continue;const W=new c.MediaElementView({spatialReference:S,element:P});I._elementViewsMap.set(P,W);Q=G.watch(()=>W.coords,()=>I._updateIndexForElement(W,!1));I._updateIndexForElement(W,!0);I.handles.add(Q,W)}I._elementsIndexes.clear();I.elements.forEach((P,W)=>I._elementsIndexes.set(P,W));I.emit("refresh")};I.elements=new p;return I}A._inherits(L,v);var F=A._createSuper(L);v=L.prototype;v.load=async function(D){k.throwIfAborted(D);
this.spatialReference||(D=this.elements.find(I=>E.isSome(I.georeference)&&E.isSome(I.georeference.coords)),this._set("spatialReference",D?E.unwrap(E.unwrap(D.georeference).coords).spatialReference:h.WGS84));this._elementsChangedHandler({added:this.elements.items,removed:[]});this.handles.add(this.elements.on("change",this._elementsChangedHandler));return this};v.destroy=function(){this._index.clear();this._elementViewsMap.clear();this._elementsIndexes.clear()};v.queryElements=async function(D,I){await this.load();
await n.initializeProjection(D.spatialReference,this.spatialReference,null,I);D=a.equals(D.spatialReference,this.spatialReference)?D:n.project(D,this.spatialReference);if(!D)return[];D=D.normalize();const Q=[];for(const S of D)this._index.forEachInBounds(e.fromExtent(S),({normalizedCoords:P,element:W})=>{E.isSome(P)&&u.extentIntersectsPolygon(S,P)&&Q.push(W)});Q.sort((S,P)=>this._elementsIndexes.get(S)-this._elementsIndexes.get(P));return Q};v._updateIndexForElement=function(D,I){const Q=D.normalizedBounds,
S=this._index.has(D),P=E.isSome(Q);this._index.delete(D);P&&this._index.set(D,Q);this.notifyChange("fullExtent");I||(S!==P?this.emit("refresh"):this.emit("change",{element:D.element}))};A._createClass(L,[{key:"elements",set:function(D){this._set("elements",z.referenceSetter(D,this._get("elements"),p))}},{key:"fullExtent",get:function(){if("not-loaded"===this.loadStatus)return null;const D=this._index.fullBounds;return E.isNone(D)?null:new J({xmin:D[0],ymin:D[1],xmax:D[2],ymax:D[3],spatialReference:this.spatialReference})}},
{key:"spatialReference",set:function(D){"not-loaded"!==this.loadStatus?y.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded."):this._set("spatialReference",D)}}]);return L}(r.LoadableMixin(B.EsriPromiseMixin(m.HandleOwnerMixin(H.EventedAccessor))));l.__decorate([C.property()],w.prototype,"elements",null);l.__decorate([C.property({readOnly:!0})],w.prototype,"fullExtent",null);l.__decorate([C.property()],w.prototype,"spatialReference",
null);return w=l.__decorate([t.subclass("esri.layers.support.LocalMediaElementSource")],w)})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(A,l,w,M,z){function H(y,E,B){m.minX=E[0];m.minY=E[1];m.maxX=E[2];m.maxY=E[3];y.search(m,B)}const m={minX:0,minY:0,maxX:0,maxY:0};let r=function(){function y(){this._indexInvalid=!1;this._boundsToLoad=
[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new M.PooledRBush(9,w("esri-csp-restrictions")?B=>({minX:B[0],minY:B[1],maxX:B[2],maxY:B[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const B=Array(this._idByBounds.size);let k=0;this._idByBounds.forEach((G,C)=>{B[k++]=C});this._indexInvalid=!1;this._index.clear();this._index.load(B)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(B=>this._idByBounds.has(B))))),
this._boundsToLoad.length=0)}}var E=y.prototype;E.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};E.delete=function(B){const k=this._boundsById.get(B);this._boundsById.delete(B);k&&(this._idByBounds.delete(k),this._indexInvalid||this._index.remove(k))};E.forEachInBounds=function(B,k){this._loadIndex();H(this._index,B,G=>k(this._idByBounds.get(G)))};E.get=function(B){return this._boundsById.get(B)};E.has=function(B){return this._boundsById.has(B)};
E.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};E.set=function(B,k){if(!this._indexInvalid){const G=this._boundsById.get(B);G&&(this._index.remove(G),this._idByBounds.delete(G))}this._boundsById.set(B,k);k&&(this._idByBounds.set(k,B),this._indexInvalid||(this._boundsToLoad.push(k),5E4<this._boundsToLoad.length&&this._loadIndex()))};l._createClass(y,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const B=z.empty();for(const k of this._boundsById.values())k&&
(B[0]=Math.min(k[0],B[0]),B[1]=Math.min(k[1],B[1]),B[2]=Math.max(k[2],B[2]),B[3]=Math.max(k[3],B[3]));return B}},{key:"valid",get:function(){return!this._indexInvalid}}]);return y}();A.BoundsStore=r;Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(A,l,w,M,z,H){function m(g,b){r(g,0,g.children.length,
b,g)}function r(g,b,c,d,h){h||(h=new a([]));h.minX=Infinity;h.minY=Infinity;h.maxX=-Infinity;h.maxY=-Infinity;for(let p=b,v;p<c;p++)v=g.children[p],y(h,g.leaf?d(v):v);return h}function y(g,b){g.minX=Math.min(g.minX,b.minX);g.minY=Math.min(g.minY,b.minY);g.maxX=Math.max(g.maxX,b.maxX);g.maxY=Math.max(g.maxY,b.maxY)}function E(g,b){return g.minX-b.minX}function B(g,b){return g.minY-b.minY}function k(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function G(g){return g.maxX-g.minX+(g.maxY-g.minY)}function C(g,
b){return g.minX<=b.minX&&g.minY<=b.minY&&b.maxX<=g.maxX&&b.maxY<=g.maxY}function q(g,b){return b.minX<=g.maxX&&b.minY<=g.maxY&&b.maxX>=g.minX&&b.maxY>=g.minY}function K(g,b,c,d,h){for(b=[b,c];b.length;){c=M.assumeNonNull(b.pop());const p=M.assumeNonNull(b.pop());if(c-p<=d)continue;const v=p+Math.ceil((c-p)/d/2)*d;H.quickselect(g,v,p,c,h);b.push(p,v,v,c)}}let N=function(){function g(c=9,d){this._compareMinX=E;this._compareMinY=B;this._toBBox=h=>h;this._maxEntries=Math.max(4,c||9);this._minEntries=
Math.max(2,Math.ceil(.4*this._maxEntries));d&&("function"===typeof d?this._toBBox=d:this._initFormat(d));this.clear()}var b=g.prototype;b.destroy=function(){this.clear();t.prune();J.prune();n.prune();e.prune()};b.all=function(c){this._all(this._data,c)};b.search=function(c,d){let h=this._data;const p=this._toBBox;if(q(c,h))for(t.clear();h;){for(let v=0,L=h.children.length;v<L;v++){const F=h.children[v],D=h.leaf?p(F):F;q(c,D)&&(h.leaf?d(F):C(c,D)?this._all(F,d):t.push(F))}h=t.pop()}};b.collides=function(c){let d=
this._data;const h=this._toBBox;if(!q(c,d))return!1;for(t.clear();d;){for(let p=0,v=d.children.length;p<v;p++){const L=d.children[p],F=d.leaf?h(L):L;if(q(c,F)){if(d.leaf||C(c,F))return!0;t.push(L)}}d=t.pop()}return!1};b.load=function(c){if(!c.length)return this;if(c.length<this._minEntries){for(let d=0,h=c.length;d<h;d++)this.insert(c[d]);return this}c=this._build(c.slice(0,c.length),0,c.length-1,0);if(this._data.children.length)if(this._data.height===c.height)this._splitRoot(this._data,c);else{if(this._data.height<
c.height){const d=this._data;this._data=c;c=d}this._insert(c,this._data.height-c.height-1,!0)}else this._data=c;return this};b.insert=function(c){c&&this._insert(c,this._data.height-1);return this};b.clear=function(){this._data=new a([]);return this};b.remove=function(c){if(!c)return this;let d=this._data,h=null,p=0,v=!1,L;const F=this._toBBox(c);n.clear();for(e.clear();d||0<n.length;){d||(d=M.assumeNonNull(n.pop()),h=n.data[n.length-1],p=e.pop()??0,v=!0);if(d.leaf&&(L=w.indexOf(d.children,c,d.children.length,
d.indexHint),-1!==L)){d.children.splice(L,1);n.push(d);this._condense(n);break}v||d.leaf||!C(d,F)?h?(p++,d=h.children[p],v=!1):d=null:(n.push(d),e.push(p),p=0,h=d,d=d.children[0])}return this};b.toJSON=function(){return this._data};b.fromJSON=function(c){this._data=c;return this};b._all=function(c,d){for(J.clear();c;){if(!0===c.leaf)for(const h of c.children)d(h);else J.pushArray(c.children);c=J.pop()??null}};b._build=function(c,d,h,p){var v=h-d+1,L=this._maxEntries;if(v<=L)return c=new a(c.slice(d,
h+1)),m(c,this._toBBox),c;p||(p=Math.ceil(Math.log(v)/Math.log(L)),L=Math.ceil(v/L**(p-1)));const F=new f([]);F.height=p;v=Math.ceil(v/L);L=v*Math.ceil(Math.sqrt(L));for(K(c,d,h,L,this._compareMinX);d<=h;d+=L){const D=Math.min(d+L-1,h);K(c,d,D,v,this._compareMinY);for(let I=d;I<=D;I+=v)F.children.push(this._build(c,I,Math.min(I+v-1,D),p-1))}m(F,this._toBBox);return F};b._chooseSubtree=function(c,d,h,p){for(;;){p.push(d);if(!0===d.leaf||p.length-1===h)break;let v=Infinity,L=Infinity,F=void 0;for(let D=
0,I=d.children.length;D<I;D++){const Q=d.children[D],S=k(Q),P=(Math.max(Q.maxX,c.maxX)-Math.min(Q.minX,c.minX))*(Math.max(Q.maxY,c.maxY)-Math.min(Q.minY,c.minY))-S;P<L?(L=P,v=S<v?S:v,F=Q):P===L&&S<v&&(v=S,F=Q)}d=F||d.children[0]}return d};b._insert=function(c,d,h){var p=this._toBBox;h=h?c:p(c);n.clear();p=this._chooseSubtree(h,this._data,d,n);p.children.push(c);for(y(p,h);0<=d;)if(n.data[d].children.length>this._maxEntries)this._split(n,d),d--;else break;this._adjustParentBBoxes(h,n,d)};b._split=
function(c,d){const h=c.data[d];var p=h.children.length;const v=this._minEntries;this._chooseSplitAxis(h,v,p);(p=this._chooseSplitIndex(h,v,p))?(p=h.children.splice(p,h.children.length-p),p=h.leaf?new a(p):new f(p),p.height=h.height,m(h,this._toBBox),m(p,this._toBBox),d?c.data[d-1].children.push(p):this._splitRoot(h,p)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};b._splitRoot=function(c,d){this._data=new f([c,d]);this._data.height=c.height+1;m(this._data,
this._toBBox)};b._chooseSplitIndex=function(c,d,h){let p,v,L=void 0;p=v=Infinity;for(let D=d;D<=h-d;D++){var F=r(c,0,D,this._toBBox);const I=r(c,D,h,this._toBBox),Q=Math.max(0,Math.min(F.maxX,I.maxX)-Math.max(F.minX,I.minX))*Math.max(0,Math.min(F.maxY,I.maxY)-Math.max(F.minY,I.minY));F=k(F)+k(I);Q<p?(p=Q,L=D,v=F<v?F:v):Q===p&&F<v&&(v=F,L=D)}return L};b._chooseSplitAxis=function(c,d,h){const p=c.leaf?this._compareMinX:E,v=c.leaf?this._compareMinY:B,L=this._allDistMargin(c,d,h,p);d=this._allDistMargin(c,
d,h,v);L<d&&c.children.sort(p)};b._allDistMargin=function(c,d,h,p){c.children.sort(p);p=this._toBBox;var v=r(c,0,d,p);const L=r(c,h-d,h,p);let F=G(v)+G(L);for(let D=d;D<h-d;D++){const I=c.children[D];y(v,c.leaf?p(I):I);F+=G(v)}for(h=h-d-1;h>=d;h--)v=c.children[h],y(L,c.leaf?p(v):v),F+=G(L);return F};b._adjustParentBBoxes=function(c,d,h){for(;0<=h;h--)y(d.data[h],c)};b._condense=function(c){for(let d=c.length-1;0<=d;d--){const h=c.data[d];if(0===h.children.length)if(0<d){const p=c.data[d-1],v=p.children;
v.splice(w.indexOf(v,h,v.length,p.indexHint),1)}else this.clear();else m(h,this._toBBox)}};b._initFormat=function(c){const d=["return a"," - b",";"];this._compareMinX=new Function("a","b",d.join(c[0]));this._compareMinY=new Function("a","b",d.join(c[1]));this._toBBox=new Function("a","return {minX: a"+c[0]+", minY: a"+c[1]+", maxX: a"+c[2]+", maxY: a"+c[3]+"};")};return l._createClass(g)}();const t=new z,J=new z,n=new z,e=new z({deallocator:void 0});z=l._createClass(function(){this.minY=this.minX=
Infinity;this.maxY=this.maxX=-Infinity});let u=function(g){function b(){var d=c.apply(this,arguments);d.height=1;d.indexHint=new w.PositionHint;return d}l._inherits(b,g);var c=l._createSuper(b);return l._createClass(b)}(z),a=function(g){function b(d){var h=c.call(this);h.children=d;h.leaf=!0;return h}l._inherits(b,g);var c=l._createSuper(b);return l._createClass(b)}(u),f=function(g){function b(d){var h=c.call(this);h.children=d;h.leaf=!1;return h}l._inherits(b,g);var c=l._createSuper(b);return l._createClass(b)}(u);
A.BBox=z;A.PooledRBush=N;Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(A){var l={};(function(w){(function(M){M=M();void 0!==M&&(w.exports=M)})(function(){function M(m,r,y,E,B){for(;E>y;){if(600<E-y){var k=E-y+1,G=r-y+1,C=Math.log(k),q=.5*Math.exp(2*C/3);C=.5*Math.sqrt(C*q*(k-q)/k)*(0>G-k/2?-1:1);M(m,r,Math.max(y,Math.floor(r-G*q/k+C)),Math.min(E,Math.floor(r+(k-G)*q/k+C)),B)}k=m[r];G=y;q=E;z(m,y,r);for(0<B(m[E],k)&&
z(m,y,E);G<q;){z(m,G,q);G++;for(q--;0>B(m[G],k);)G++;for(;0<B(m[q],k);)q--}0===B(m[y],k)?z(m,y,q):(q++,z(m,q,E));q<=r&&(y=q+1);r<=q&&(E=q-1)}}function z(m,r,y){var E=m[r];m[r]=m[y];m[y]=E}function H(m,r){return m<r?-1:m>r?1:0}return function(m,r,y,E,B){M(m,r,y||0,E||m.length-1,B||H)}})})({get exports(){return l},set exports(w){l=w}});A.quickselect=l})},"esri/layers/support/MediaElementView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Polygon ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/normalizeUtilsSync".split(" "),
function(A,l,w,M,z,H,m,r,y,E,B,k,G,C){A.MediaElementView=function(q){function K(t){return N.call(this,t)}l._inherits(K,q);var N=l._createSuper(K);l._createClass(K,[{key:"bounds",get:function(){const t=this.coords;return z.isNone(t)||z.isNone(t.extent)?null:G.fromExtent(t.extent)}},{key:"coords",get:function(){const t=z.unwrap(this.element.georeference)?.coords;return k.projectOrLoad(t,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return B.fromJSON(C.normalizeCentralMeridianSync(this.coords))}},
{key:"normalizedBounds",get:function(){const t=z.isSome(this.normalizedCoords)?this.normalizedCoords.extent:null;return z.isSome(t)?G.fromExtent(t):null}}]);return K}(M);w.__decorate([H.property()],A.MediaElementView.prototype,"spatialReference",void 0);w.__decorate([H.property()],A.MediaElementView.prototype,"element",void 0);w.__decorate([H.property()],A.MediaElementView.prototype,"bounds",null);w.__decorate([H.property()],A.MediaElementView.prototype,"coords",null);w.__decorate([H.property()],
A.MediaElementView.prototype,"normalizedCoords",null);w.__decorate([H.property()],A.MediaElementView.prototype,"normalizedBounds",null);A.MediaElementView=w.__decorate([E.subclass("esri.layers.support.MediaElementView")],A.MediaElementView);Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsSync":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ./aaBoundingRect ./boundsUtils ./coordsUtils ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),
function(A,l,w,M,z,H,m,r,y){function E(e,u){if(w.isNone(e))return null;var a=e.spatialReference,f=y.getInfo(a);e="toJSON"in e?e.toJSON():e;if(!f)return e;a=y.isWebMercator(a)?102100:4326;const g=r.cutParams[a].maxX,b=r.cutParams[a].minX;if(m.isPoint(e))return k(e,g,b);if(m.isMultipoint(e))e.points=e.points.map(c=>k(c,g,b));else{if(m.isExtent(e))return B(e,f);if(m.isPolygon(e)||m.isPolyline(e)){a=z.getBoundsXY(J,e);f=a[0];a=a[2];const c=2*r.offsetMagnitude(f,b)*g;e=0===c?e:r.updatePolyGeometry(e,c);
f+=c;a+=c;return a>g?N(e,g,u):f<b?N(e,b,u):e}}return e}function B(e,u){if(!u)return e;const a=G(e,u).map(f=>f.extent);return 2>a.length?a[0]||e:2<a.length?(e.xmin=u.valid[0],e.xmax=u.valid[1],e):{rings:a.map(f=>[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]])}}function k(e,u,a){if(Array.isArray(e)){var f=e[0];f>u?(a=r.offsetMagnitude(f,u),e[0]=f+-2*a*u):f<a&&(u=r.offsetMagnitude(f,a),e[0]=f+-2*u*a)}else f=e.x,f>u?(a=r.offsetMagnitude(f,u),e.x+=-2*a*u):f<a&&(u=r.offsetMagnitude(f,
a),e.x+=-2*u*a);return e}function G(e,u){const a=[],{ymin:f,ymax:g,xmin:b,xmax:c}=e;var d=e.xmax-e.xmin;const [h,p]=u.valid,{x:v,frameId:L}=C(e.xmin,u),{x:F,frameId:D}=C(e.xmax,u);e=v===F&&0<d;if(d>2*p){d={xmin:b<c?v:F,ymin:f,xmax:p,ymax:g};e={xmin:h,ymin:f,xmax:b<c?F:v,ymax:g};u={xmin:0,ymin:f,xmax:p,ymax:g};const I={xmin:h,ymin:f,xmax:0,ymax:g},Q=[],S=[];q(d,u)&&Q.push(L);q(d,I)&&S.push(L);q(e,u)&&Q.push(D);q(e,I)&&S.push(D);for(let P=L+1;P<D;P++)Q.push(P),S.push(P);a.push(new t(d,[L]),new t(e,
[D]),new t(u,Q),new t(I,S))}else v>F||e?a.push(new t({xmin:v,ymin:f,xmax:p,ymax:g},[L]),new t({xmin:h,ymin:f,xmax:F,ymax:g},[D])):a.push(new t({xmin:v,ymin:f,xmax:F,ymax:g},[L]));return a}function C(e,u){const [a,f]=u.valid;u=2*f;var g=0;e>f?(g=Math.ceil(Math.abs(e-f)/u),e-=g*u):e<a&&(g=Math.ceil(Math.abs(e-a)/u),e+=g*u,g=-g);return{x:e,frameId:g}}function q(e,u){const {xmin:a,ymin:f,xmax:g,ymax:b}=u;return K(e,a,f)&&K(e,a,b)&&K(e,g,b)&&K(e,g,f)}function K(e,u,a){return u>=e.xmin&&u<=e.xmax&&a>=e.ymin&&
a<=e.ymax?!0:!1}function N(e,u,a=!0){const f=!m.isPolyline(e);f&&H.closeRings(e);if(a)return(new n).cut(e,u);a=f?e.rings:e.paths;const g=f?4:2,b=a.length;u*=-2;for(let c=0;c<b;c++){const d=a[c];if(d&&d.length>=g){const h=[];for(const p of d)h.push([p[0]+u,p[1]]);a.push(h)}}f?e.rings=a:e.paths=a;return e}let t=l._createClass(function(e,u){this.extent=e;this.frameIds=u});const J=M.create();let n=function(){function e(){this._linesIn=[];this._linesOut=[]}var u=e.prototype;u.cut=function(a,f){this._xCut=
f;if(a.rings)this._closed=!0,f=a.rings,this._minPts=4;else if(a.paths)this._closed=!1,f=a.paths,this._minPts=2;else return null;for(var g of f)if(g&&!(g.length<this._minPts)){f=!0;for(const b of g)f?(this.moveTo(b),f=!1):this.lineTo(b);this._closed&&this.close()}this._pushLineIn();this._pushLineOut();f=[];for(const b of this._linesIn)b&&b.length>=this._minPts&&f.push(b);g=-2*this._xCut;for(const b of this._linesOut)if(b&&b.length>=this._minPts){for(const c of b)c[0]+=g;f.push(b)}this._closed?a.rings=
f:a.paths=f;return a};u.moveTo=function(a){this._pushLineIn();this._pushLineOut();this._prevSide=this._side(a[0]);this._moveTo(a[0],a[1],this._prevSide);this._firstPt=this._prevPt=a};u.lineTo=function(a){const f=this._side(a[0]);if(-1===f*this._prevSide){const g=this._intersect(this._prevPt,a);this._lineTo(this._xCut,g,0);this._prevSide=0}this._lineTo(a[0],a[1],f);this._prevSide=f;this._prevPt=a};u.close=function(){const a=this._firstPt,f=this._prevPt;a[0]===f[0]&&a[1]===f[1]||this.lineTo(a);this._checkClosingPt(this._lineIn);
this._checkClosingPt(this._lineOut)};u._moveTo=function(a,f,g){this._closed?(this._lineIn.push([0>=g?a:this._xCut,f]),this._lineOut.push([0<=g?a:this._xCut,f])):(0>=g&&this._lineIn.push([a,f]),0<=g&&this._lineOut.push([a,f]))};u._lineTo=function(a,f,g){this._closed?(this._addPolyVertex(this._lineIn,0>=g?a:this._xCut,f),this._addPolyVertex(this._lineOut,0<=g?a:this._xCut,f)):0>g?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([a,f])):0<g?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([a,
f])):0>this._prevSide?(this._lineIn.push([a,f]),this._lineOut.push([a,f])):0<this._prevSide&&(this._lineOut.push([a,f]),this._lineIn.push([a,f]))};u._addPolyVertex=function(a,f,g){const b=a.length;1<b&&a[b-1][0]===f&&a[b-2][0]===f?a[b-1][1]=g:a.push([f,g])};u._checkClosingPt=function(a){const f=a.length;3<f&&a[0][0]===this._xCut&&a[f-2][0]===this._xCut&&a[1][0]===this._xCut&&(a[0][1]=a[f-2][1],a.pop())};u._side=function(a){return a<this._xCut?-1:a>this._xCut?1:0};u._intersect=function(a,f){return a[1]+
(this._xCut-a[0])/(f[0]-a[0])*(f[1]-a[1])};u._pushLineIn=function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn);this._lineIn=[]};u._pushLineOut=function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut);this._lineOut=[]};return l._createClass(e)}();A.CutVertical=n;A.normalizeCentralMeridianForDisplay=function(e){return E(e,!1)};A.normalizeCentralMeridianSync=function(e){return E(e,!0)};Object.defineProperty(A,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/VideoElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),function(A,l,w,M,z,H,m,r,y,E){H=function(B){function k(C){C=G.call(this,C);C.content=null;C.type="video";return C}A._inherits(k,B);
var G=A._createSuper(k);B=k.prototype;B.load=function(){const C=this.video;if("string"===typeof C){const q=document.createElement("video");q.src=C;q.crossOrigin="anonymous";q.autoplay=!0;q.muted=!0;q.loop=!0;this.addResolvingPromise(this._loadVideo(q).then(()=>{this._set("content",q)}))}else C instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(C).then(()=>{this._set("content",C)})):this.addResolvingPromise(Promise.reject(new w("video-element:invalid-video-type","Invalid video type",
{video:C})));return Promise.resolve(this)};B._loadVideo=function(C){return new Promise((q,K)=>{C.oncanplay=()=>{C.oncanplay=null;C.play().then(q,K)};"anonymous"!==C.crossOrigin&&(C.crossOrigin="anonymous",C.src=C.src)})};A._createClass(k,[{key:"video",set:function(C){"not-loaded"!==this.loadStatus?M.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded."):this._set("video",C)}}]);return k}(E);l.__decorate([z.property({readOnly:!0})],H.prototype,"content",
void 0);l.__decorate([z.property()],H.prototype,"video",null);return H=l.__decorate([y.subclass("esri.layers.support.VideoElement")],H)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Error ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/BlendLayer ./mixins/OperationalLayer ./mixins/ScaleRangeLayer ./support/ImageElement ./support/LocalMediaElementSource ./support/VideoElement".split(" "),function(A,
l,w,M,z,H,m,r,y,E,B,k,G,C,q,K,N,t,J,n,e){function u(a){return"object"===typeof a&&null!=a&&"type"in a}m=function(a){function f(b){b=g.call(this,b);b.effectiveSource=null;b.copyright=null;b.operationalLayerType="MediaLayer";b.spatialReference=null;b.type="media";b.source=new n;return b}A._inherits(f,a);var g=A._createSuper(f);a=f.prototype;a.load=function(b){const c=this.source;if(!c)return this.addResolvingPromise(Promise.reject(new M("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer."))),
Promise.resolve(this);const d=u(c)?new n({elements:new w([c])}):c;this._set("effectiveSource",d);this.spatialReference&&(d.spatialReference=this.spatialReference);b=d.load(b).then(()=>{this.spatialReference=d.spatialReference});this.addResolvingPromise(b);return Promise.resolve(this)};a.destroy=function(){H.unwrap(this.effectiveSource)?.destroy();H.unwrap(this.source)?.destroy()};a.castSource=function(b){return b?Array.isArray(b)?new n({elements:new w(b)}):b instanceof w?new n({elements:b}):b:null};
a.readSource=function(b,c,d){b="image"===c.mediaType?new J:"video"===c.mediaType?new e:null;b?.read(c,d);return b};a.writeSource=function(b,c,d,h){b&&u(b)&&"image"===b.type?b.write(c,h):h?.messages&&h?.messages?.push(new M("media-layer:unsupported-source","source must be an 'ImageElement'"))};A._createClass(f,[{key:"fullExtent",get:function(){return this.loaded?this.effectiveSource.fullExtent:null}},{key:"source",set:function(b){"not-loaded"!==this.loadStatus?z.getLogger(this.declaredClass).error("#source",
"source cannot be changed after the layer is loaded."):this._set("source",b)}}]);return f}(K.BlendLayer(t.ScaleRangeLayer(N.OperationalLayer(m.MultiOriginJSONMixin(q)))));l.__decorate([r.property({readOnly:!0})],m.prototype,"effectiveSource",void 0);l.__decorate([r.property({type:String})],m.prototype,"copyright",void 0);l.__decorate([r.property({readOnly:!0})],m.prototype,"fullExtent",null);l.__decorate([r.property({type:["MediaLayer"]})],m.prototype,"operationalLayerType",void 0);l.__decorate([r.property({type:["show",
"hide"]})],m.prototype,"listMode",void 0);l.__decorate([r.property({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1}}})],m.prototype,"source",null);l.__decorate([y.cast("source")],m.prototype,"castSource",null);l.__decorate([k.reader("source",["url"])],m.prototype,"readSource",null);l.__decorate([C.writer("source")],m.prototype,"writeSource",null);l.__decorate([r.property()],m.prototype,"spatialReference",void 0);l.__decorate([r.property({readOnly:!0})],m.prototype,"type",void 0);return m=l.__decorate([G.subclass("esri.layers.MediaLayer")],
m)});