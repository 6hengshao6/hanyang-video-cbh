// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./NDVIFunctionArguments".split(" "),function(k,g,n,l,d,w,x,p,m,q,r){d=function(e){function h(){var a=t.apply(this,arguments);a.functionName="NDVI";a.functionArguments=null;a.rasterArgumentNames=
["raster"];return a}k._inherits(h,e);var t=k._createSuper(h);e=h.prototype;e._bindSourceRasters=function(){const {scientificOutput:a}=this.functionArguments;this.outputPixelType=this._getOutputPixelType(a?"f32":"u8");const b=this.sourceRasterInfos[0].clone();b.pixelType=this.outputPixelType;b.colormap=null;b.histograms=null;b.bandCount=1;const [c,f,u,v]=a?[-1,1,0,.1]:[0,200,100,10];b.statistics=[{min:c,max:f,avg:u,stddev:v}];this.rasterInfo=b;return{success:!0,supportsGPU:!0}};e._processPixels=function(a){a=
a.pixelBlocks?.[0];if(n.isNone(a))return null;const {visibleBandID:b,infraredBandID:c,scientificOutput:f}=this.functionArguments;return m.calculateNDVI(a,b,c,!f)};e._getWebGLParameters=function(){const {visibleBandID:a,infraredBandID:b,scientificOutput:c}=this.functionArguments;return{bandIndexMat3:m.getBandMatrix3(this.isInputBandIdsSwizzled?[0,1,2]:[b,a,0]),scaled:!c}};e._getInputBandIds=function(a){const {visibleBandID:b,infraredBandID:c}=this.functionArguments;return[c,b,0].map(f=>a[f])};return k._createClass(h)}(q);
g.__decorate([l.property({json:{write:!0,name:"rasterFunction"}})],d.prototype,"functionName",void 0);g.__decorate([l.property({type:r,json:{write:!0,name:"rasterFunctionArguments"}})],d.prototype,"functionArguments",void 0);g.__decorate([l.property()],d.prototype,"rasterArgumentNames",void 0);return d=g.__decorate([p.subclass("esri.layers.support.rasterFunctions.NDVIFunction")],d)});