// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./LabelExpressionInfo ./labelUtils ./layerUtils ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),
function(u,e,w,n,c,x,D,g,I,E,F,q,y,p,G,H,z){function r(d,k,h){return{enabled:!G.isSceneServiceLayer(h?.layer)}}function A(d){return d?"service"===d.origin?!1:"map-image"!==d.layer?.type:!0}function B(d){return"map-image"===d?.type?!!d.capabilities?.exportMap?.supportsArcadeExpressionForLabeling:!1}var v;n=new n.JSONMap({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",
esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",
esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},
{ignoreUnknown:!0});c=v=function(d){function k(a){a=h.call(this,a);a.type="label";a.name=null;a.allowOverrun=!1;a.deconflictionStrategy="static";a.labelExpression=null;a.labelExpressionInfo=null;a.labelPlacement=null;a.labelPosition="curved";a.maxScale=0;a.minScale=0;a.repeatLabel=!0;a.repeatLabelDistance=null;a.symbol=H.defaultTextSymbol2D;a.useCodedValues=void 0;a.where=null;return a}u._inherits(k,d);var h=u._createSuper(k);k.evaluateWhere=function(a,f){const m=(b,t,l)=>{switch(t){case "\x3d":return b==
l;case "\x3c\x3e":return b!=l;case "\x3e":return b>l;case "\x3e\x3d":return b>=l;case "\x3c":return b<l;case "\x3c\x3d":return b<=l}return!1};try{if(null==a)return!0;const b=a.split(" ");if(3===b.length)return m(f[b[0]],b[1],b[2]);if(7===b.length){const t=m(f[b[0]],b[1],b[2]),l=b[3],C=m(f[b[4]],b[5],b[6]);switch(l){case "AND":return t&&C;case "OR":return t||C}}return!1}catch(b){console.log("Error.: can't parse \x3d "+a)}};d=k.prototype;d.readLabelExpression=function(a,f){f=f.labelExpressionInfo;if(!f||
!f.value&&!f.expression)return a};d.writeLabelExpression=function(a,f,m){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)a=p.templateStringToSql(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const b=p.getSingleFieldArcadeExpression(this.labelExpressionInfo.expression);b&&(a="["+b+"]")}null!=a&&(f[m]=a)};d.writeLabelExpressionInfo=function(a,f,m,b){if(null==a&&null!=this.labelExpression&&A(b))a=new y({expression:this.getLabelExpressionArcade()});
else if(!a)return;a=a.toJSON(b);a.expression&&(f[m]=a)};d.writeMaxScale=function(a,f){if(a||this.minScale)f.maxScale=a};d.writeMinScale=function(a,f){if(a||this.maxScale)f.minScale=a};d.getLabelExpression=function(){return p.getLabelExpression(this)};d.getLabelExpressionArcade=function(){return p.getLabelExpressionArcade(this)};d.getLabelExpressionSingleField=function(){return p.getLabelExpressionSingleField(this)};d.hash=function(){return JSON.stringify(this)};d.clone=function(){return new v({allowOverrun:this.allowOverrun,
deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:x.clone(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:x.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};return u._createClass(k)}(c.JSONSupport);e.__decorate([g.property({type:String,
json:{write:!0}})],c.prototype,"name",void 0);e.__decorate([g.property({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:r}}}}})],c.prototype,"allowOverrun",void 0);e.__decorate([g.property({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:r}}}}})],c.prototype,"deconflictionStrategy",void 0);e.__decorate([g.property({type:String,json:{write:{overridePolicy(d,
k,h){return this.labelExpressionInfo&&"service"===h?.origin&&B(h.layer)?{enabled:!1}:{allowNull:!0}}}}})],c.prototype,"labelExpression",void 0);e.__decorate([E.reader("labelExpression")],c.prototype,"readLabelExpression",null);e.__decorate([q.writer("labelExpression")],c.prototype,"writeLabelExpression",null);e.__decorate([g.property({type:y,json:{write:{overridePolicy(d,k,h){return A(h)||B(h?.layer)?{allowNull:!0}:{enabled:!1}}}}})],c.prototype,"labelExpressionInfo",void 0);e.__decorate([q.writer("labelExpressionInfo")],
c.prototype,"writeLabelExpressionInfo",null);e.__decorate([g.property({type:n.apiValues,json:{type:n.jsonValues,read:n.read,write:n.write}})],c.prototype,"labelPlacement",void 0);e.__decorate([g.property({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],c.prototype,"labelPosition",void 0);e.__decorate([g.property({type:Number})],c.prototype,"maxScale",void 0);e.__decorate([q.writer("maxScale")],c.prototype,"writeMaxScale",
null);e.__decorate([g.property({type:Number})],c.prototype,"minScale",void 0);e.__decorate([q.writer("minScale")],c.prototype,"writeMinScale",null);e.__decorate([g.property({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:r}}}}})],c.prototype,"repeatLabel",void 0);e.__decorate([g.property({type:Number,cast:D.toPt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:r}}}}})],c.prototype,"repeatLabelDistance",void 0);e.__decorate([g.property({types:w.symbolTypesLabel,
json:{origins:{"web-scene":{types:w.symbolTypesLabel3D,write:z.writeLabelSymbol,default:null}},write:z.writeLabelSymbol,default:null}})],c.prototype,"symbol",void 0);e.__decorate([g.property({type:Boolean,json:{write:!0}})],c.prototype,"useCodedValues",void 0);e.__decorate([g.property({type:String,json:{write:!0}})],c.prototype,"where",void 0);return c=v=e.__decorate([F.subclass("esri.layers.support.LabelClass")],c)});