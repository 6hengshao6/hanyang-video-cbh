// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(K,k){return function(){function M(p){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(p&&p.steps)for(const F of p.steps)F instanceof k?this.steps.push(F):this.steps.push(new k({wkid:F.wkid,wkt:F.wkt,isInverse:F.isInverse}))}M.cacheKey=function(p,F){return[void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():
"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():"",void 0!==F.wkid&&null!==F.wkid?F.wkid.toString():"-1",void 0!==F.wkt&&null!==F.wkt?F.wkt.toString():""].join()};M.fromGE=function(p){const F=new M;let Z="";for(const V of p.steps)p=k.fromGE(V),F.steps.push(p),Z+=p.uid.toString()+",";F._cachedProjection={};F._gtlistentry=null;F._chain=Z;return F};var H=M.prototype;H.getInverse=function(){const p=new M;p.steps=[];for(let F=this.steps.length-1;0<=F;F--)p.steps.push(this.steps[F].getInverse());return p};
H.getGTListEntry=function(){let p="";for(const F of this.steps)p+=F.uid.toString()+",";p!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=p);return this._gtlistentry};H.assignCachedGe=function(p,F,Z){this._cachedProjection[M.cacheKey(p,F)]=Z};H.getCachedGeTransformation=function(p,F){let Z="";for(const V of this.steps)Z+=V.uid.toString()+",";Z!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=Z);p=this._cachedProjection[M.cacheKey(p,F)];return void 0===
p?null:p};return K._createClass(M)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(K){let k=0;return function(){function M(H){this.uid=k++;H?(this._wkt=null!=H.wkt?H.wkt:null,this._wkid=null!=H.wkid?H.wkid:-1,this._isInverse=null!=H.isInverse?!0===H.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}M.fromGE=function(H){const p=new M;p._wkt=H.wkt;p._wkid=H.wkid;p._isInverse=H.isInverse;return p};M.prototype.getInverse=
function(){const H=new M;H._wkt=this.wkt;H._wkid=this._wkid;H._isInverse=!this.isInverse;return H};K._createClass(M,[{key:"wkt",get:function(){return this._wkt},set:function(H){this._wkt=H;this.uid=k++}},{key:"wkid",get:function(){return this._wkid},set:function(H){this._wkid=H;this.uid=k++}},{key:"isInverse",get:function(){return this._isInverse},set:function(H){this._isInverse=H;this.uid=k++}}]);return M}()})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x){var w;H=w=function(L){function r(b){b=q.call(this,b);b.width=null;b.height=null;b.pixelType="f32";b.validPixelCount=null;b.mask=null;b.maskIsAlpha=!1;b.premultiplyAlpha=!1;b.statistics=null;b.depthCount=1;return b}K._inherits(r,L);var q=K._createSuper(r);r.createEmptyBand=function(b,l){return new (w.getPixelArrayConstructor(b))(l)};r.getPixelArrayConstructor=function(b){let l;switch(b){case "u1":case "u2":case "u4":case "u8":l=Uint8Array;break;case "u16":l=Uint16Array;
break;case "u32":l=Uint32Array;break;case "s8":l=Int8Array;break;case "s16":l=Int16Array;break;case "s32":l=Int32Array;break;case "f32":l=Float32Array;break;case "f64":l=Float64Array;break;case "c64":case "c128":case "unknown":l=Float32Array}return l};L=r.prototype;L.castPixelType=function(b){if(!b)return"f32";b=b.toLowerCase();["u1","u2","u4"].includes(b)?b="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(b)||(b="f32");return b};L.getPlaneCount=function(){return this.pixels?.length};
L.addData=function(b){if(!b.pixels||b.pixels.length!==this.width*this.height)throw new M("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(b.pixels);this.statistics.push(b.statistics??new N.SimpleBandStatistics)};L.getAsRGBA=function(){const b=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(b);
break;default:this._fillFrom8Bit(b)}return new Uint8ClampedArray(b)};L.getAsRGBAFloat=function(){const b=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(b);return b};L.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(A=>this._calculateBandStatistics(A,this.mask));var b=this.mask,l=0;if(Z.isSome(b))for(let A=0;A<b.length;A++)b[A]&&l++;else l=this.width*this.height;this.validPixelCount=l}};L.clamp=function(b){if(b&&"f64"!==b&&"f32"!==b&&this.pixels){var [l,
A]=x.getPixelValueRange(b),u=this.pixels,a=this.width*this.height,e=u.length,f=[];for(let t=0;t<e;t++){var d=w.createEmptyBand(b,a);var h=u[t];for(let m=0;m<a;m++){var g=h[m];d[m]=g>A?A:g<l?l:g}f.push(d)}this.pixels=f;this.pixelType=b}};L.extractBands=function(b){const {pixels:l,statistics:A}=this;if(Z.isNone(b)||0===b.length||!l||0===l.length)return this;var u=l.length;const a=b.some(e=>e>=l.length);u=u===b.length&&!b.some((e,f)=>e!==f);return a||u?this:new w({pixelType:this.pixelType,width:this.width,
height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:b.map(e=>l[e]),statistics:A&&b.map(e=>A[e])})};L.clone=function(){const b=new w({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});Z.isSome(this.mask)&&(b.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let l;const A=w.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){b.pixels=
[];const u=!!this.pixels[0].slice;for(l=0;l<this.pixels.length;l++)b.pixels[l]=u?this.pixels[l].slice(0,this.pixels[l].length):new A(this.pixels[l])}if(this.statistics)for(b.statistics=[],l=0;l<this.statistics.length;l++)b.statistics[l]=p.clone(this.statistics[l]);b.premultiplyAlpha=this.premultiplyAlpha;return b};L._fillFrom8Bit=function(b){const {mask:l,maskIsAlpha:A,premultiplyAlpha:u,pixels:a}=this;if(b&&a&&a.length){var e,f;var d=e=f=a[0];3<=a.length?(e=a[1],f=a[2]):2===a.length&&(e=a[1]);var h=
new Uint32Array(b),g=this.width*this.height;if(d.length!==g)F.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(Z.isSome(l)&&l.length===g)if(A)for(b=0;b<g;b++){const t=l[b];if(t){const m=t/255;h[b]=u?t<<24|f[b]*m<<16|e[b]*m<<8|d[b]*m:t<<24|f[b]<<16|e[b]<<8|d[b]}}else for(b=0;b<g;b++)l[b]&&(h[b]=-16777216|f[b]<<16|e[b]<<8|d[b]);else for(b=0;b<g;b++)h[b]=-16777216|f[b]<<16|e[b]<<8|d[b]}else F.getLogger(this.declaredClass).error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};L._fillFromNon8Bit=function(b){const {pixels:l,mask:A,statistics:u}=this;if(b&&l&&l.length){var a=this.pixelType,e=1,f=0;e=1;if(u&&0<u.length){for(var d of u)null!=d.minValue&&(f=Math.min(f,d.minValue)),null!=d.maxValue&&null!=d.minValue&&(e=Math.max(e,d.maxValue-d.minValue));e=255/e}else e=255,"s8"===a?(f=-128,e=127):"u16"===a?e=65535:"s16"===a?(f=-32768,e=32767):"u32"===a?e=4294967295:"s32"===a?(f=-2147483648,e=2147483647):"f32"===a?
(f=-3.4*1E39,e=3.4*1E39):"f64"===a&&(f=-Number.MAX_VALUE,e=Number.MAX_VALUE),e=255/(e-f);b=new Uint32Array(b);a=this.width*this.height;var h,g,t;d=h=g=l[0];if(d.length!==a)return F.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=l.length)if(h=l[1],3<=l.length&&(g=l[2]),Z.isSome(A)&&A.length===a)for(t=0;t<a;t++)A[t]&&(b[t]=-16777216|(g[t]-f)*e<<16|(h[t]-f)*e<<8|(d[t]-f)*e);else for(t=0;t<a;t++)b[t]=-16777216|(g[t]-f)*e<<16|(h[t]-f)*e<<
8|(d[t]-f)*e;else if(Z.isSome(A)&&A.length===a)for(t=0;t<a;t++)h=(d[t]-f)*e,A[t]&&(b[t]=-16777216|h<<16|h<<8|h);else for(t=0;t<a;t++)h=(d[t]-f)*e,b[t]=-16777216|h<<16|h<<8|h}else F.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};L._fillFrom32Bit=function(b){const {pixels:l,mask:A}=this;if(!b||!l||!l.length)return F.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let u,
a,e,f;u=a=e=l[0];3<=l.length?(a=l[1],e=l[2]):2===l.length&&(a=l[1]);const d=this.width*this.height;if(u.length!==d)return F.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let h=0;if(Z.isSome(A)&&A.length===d)for(f=0;f<d;f++)b[h++]=u[f],b[h++]=a[f],b[h++]=e[f],b[h++]=A[f]&1;else for(f=0;f<d;f++)b[h++]=u[f],b[h++]=a[f],b[h++]=e[f],b[h++]=1};L._calculateBandStatistics=function(b,l){let A=Infinity,u=-Infinity;const a=b.length;let e,f=0;
if(Z.isSome(l))for(e=0;e<a;e++)l[e]&&(f=b[e],A=f<A?f:A,u=f>u?f:u);else for(e=0;e<a;e++)f=b[e],A=f<A?f:A,u=f>u?f:u;return new N.SimpleBandStatistics(A,u)};return K._createClass(r)}(H.JSONSupport);k.__decorate([V.property({json:{write:!0}})],H.prototype,"width",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"height",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"pixelType",void 0);k.__decorate([O.cast("pixelType")],H.prototype,"castPixelType",null);k.__decorate([V.property({json:{write:!0}})],
H.prototype,"validPixelCount",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"mask",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"maskIsAlpha",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"pixels",void 0);k.__decorate([V.property()],H.prototype,"premultiplyAlpha",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"statistics",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"depthCount",void 0);k.__decorate([V.property({json:{write:!0}})],
H.prototype,"noDataValues",void 0);k.__decorate([V.property({json:{write:!0}})],H.prototype,"bandMasks",void 0);return H=w=k.__decorate([I.subclass("esri.layers.support.PixelBlock")],H)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(K,k){k=k._createClass(function(M=null,H=null,p=null){this.minValue=M;this.maxValue=H;this.noDataValue=p});K.SimpleBandStatistics=k;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],function(K){function k(H){return M[H]??[-3.4028234663852886E38,3.4028234663852886E38]}const M={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4028234663852886E38,3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};K.convertNoDataToMask=function(H,p,F){if(!(H.depthCount&&1<H.depthCount)){var {pixels:Z,statistics:V,
pixelType:O}=H,I=Z[0].length,N=H.bandMasks??[],x=H.mask??(new Uint8Array(I)).fill(255),w="f32"===O||"f64"===O,L=k(O),r=!1;for(let l=0;l<Z.length;l++){const A="number"===typeof p?p:p[l];if(null==A)continue;var q=V?.[l].maxValue??L[1];if((V?.[l].minValue??L[0])>A+Number.EPSILON||q<A-Number.EPSILON)continue;q=N[l]||(new Uint8Array(I)).fill(255);const u=Z[l];var b=F?.customFloatTolerance;if(w&&0!==b){b||(b=9.999999E37<=Math.abs(A)?2E-7*Math.abs(A):"f32"===O?2**-23:Number.EPSILON);for(let a=0;a<u.length;a++)q[a]&&
Math.abs(u[a]-A)<b&&(u[a]=0,q[a]=0,x[a]=0,r=!0)}else for(b=0;b<u.length;b++)q[b]&&u[b]===A&&(u[b]=0,q[b]=0,x[b]=0,r=!0);N[l]=q}r&&(H.bandMasks=N,H.mask=x);r&&"updateStatistics"in H&&H.updateStatistics()}};K.getPixelValueRange=k;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w){async function L(m,v){if(!w.isPlatformLittleEndian)throw new k("rasterCoded:decode","lerc decoder is not supported on big endian platform");await Z.load();const {offset:y}=v,{width:D,height:J,pixelType:E,statistics:R,depthCount:z,noDataValues:C,bandMasks:U,pixels:ia,mask:fa}=Z.decode(m,{inputOffset:y,returnInterleaved:v.returnInterleaved});return new H({width:D,height:J,pixelType:E.toLowerCase(),pixels:ia,mask:fa,statistics:R,bandMasks:U,depthCount:z,noDataValues:C})}
async function r(m,v){m=await x.decode(m,{...v,noDataValue:null});M.assertIsSome(m);m=new H({width:m.width,height:m.height,pixels:m.pixels,pixelType:m.pixelType.toLowerCase(),mask:m.mask,statistics:null});m.updateStatistics();return m}async function q(m,v){m=await x.decodeTileOrStrip(m,v.customOptions);m=new H({width:m.width,height:m.height,pixels:m.pixels,pixelType:m.pixelType.toLowerCase(),mask:m.mask,statistics:null});m.updateStatistics();return m}function b(m,v){const y=v.pixelType||"u8",D=H.getPixelArrayConstructor(y),
J="u8"===y?m:new D(m.buffer),E=[],R=v.planes||1;if(1===R)E.push(J);else for(let z=0;z<R;z++){const C=(v.width||1)*(v.height||m.length),U=new D(C);for(let ia=0;ia<C;ia++)U[ia]=J[ia*R+z];E.push(U)}m=new H({width:v.width||1,height:v.height||m.length,pixels:E,pixelType:y,statistics:null});m.updateStatistics();return m}function l(m,v){m=(new I.Zlib(new Uint8Array(m))).getBytes();return b(m,v)}function A(m,v){m=V.decode(m,v.offset,v.eof,!v.isInputBigEndian);return b(m,v)}function u(m,v){m=F.decode(m,v.hasNoZlibMask??
void 0);m=new H({width:m.width,height:m.height,pixels:m.pixels,pixelType:"U8",mask:m.mask,statistics:null});m.updateStatistics();return m}function a(m,v){m=new Uint8Array(m);m=new g(m);const {width:y,height:D}=v;v=y*D;m=m.decode();let J=0;var E=0;let R;E=new Uint8Array(v);for(J=0;J<v;J++)E[J]=m[4*J+3];const z=new H({width:y,height:D,pixels:[],pixelType:"U8",mask:E,statistics:[]});for(J=0;3>J;J++){R=new Uint8Array(v);for(E=0;E<v;E++)R[E]=m[4*E+J];z.addData({pixels:R})}z.updateStatistics();return z}
async function e(m,v,y,D){m=await (new p).decode(m,{applyJpegMask:!1,format:v,...y},D);m=new H(m);m.updateStatistics();return m}function f(m){if(null==m)throw new k("rasterCodec:decode","parameter encodeddata is required.");m=new Uint8Array(m,0,10);let v="";255===m[0]&&216===m[1]?v="jpg":137===m[0]&&80===m[1]&&78===m[2]&&71===m[3]?v="png":67===m[0]&&110===m[1]&&116===m[2]&&90===m[3]&&73===m[4]&&109===m[5]&&97===m[6]&&103===m[7]&&101===m[8]&&32===m[9]?v="lerc":76===m[0]&&101===m[1]&&114===m[2]&&99===
m[3]&&50===m[4]&&32===m[5]?v="lerc2":73===m[0]&&73===m[1]&&42===m[2]&&0===m[3]||77===m[0]&&77===m[1]&&0===m[2]&&42===m[3]||73===m[0]&&73===m[1]&&43===m[2]&&0===m[3]||77===m[0]&&77===m[1]&&0===m[2]&&43===m[3]?v="tiff":71===m[0]&&73===m[1]&&70===m[2]?v="gif":66===m[0]&&77===m[1]?v="bmp":String.fromCharCode.apply(null,m).toLowerCase().includes("error")&&(v="error");return v}function d(m){let v=null;switch(m){case "lerc":case "lerc2":v=L;break;case "jpg":v=u;break;case "png":v=a;break;case "bsq":case "bip":v=
(y,D)=>{var J=D.pixelType,E=null;let R=null;switch(J?J.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":R=255;E=Uint8Array;break;case "u16":R=R||65535;E=Uint16Array;break;case "u32":R=R||2**32-1;E=Uint32Array;break;case "s8":R=R||-128;E=Int8Array;break;case "s16":R=R||-32768;E=Int16Array;break;case "s32":R=R||-(2**31);E=Int32Array;break;default:E=Float32Array}({pixelTypeCtor:J}={pixelTypeCtor:E,noDataValue:R});E=N.decode;y=E(y,{width:D.width,height:D.height,pixelType:J,format:m});D=new H({width:D.width,
height:D.height,pixels:y.pixels,pixelType:D.pixelType,mask:y.mask,statistics:null});D.updateStatistics();return D};break;case "tiff":v=r;break;case "deflate":v=l;break;case "lzw":v=A;break;case "error":v=()=>{throw new k("rasterCodec:decode","input data contains error");};break;default:v=()=>{throw new k("rasterCodec:decode","unsupported raster format");}}return v}function h(m,v=1){if(m){var {pixels:y,width:D,height:J,mask:E}=m;if(y&&0!==y.length){var R=y.length,z=D-1,C=J-1,U=[],ia,fa,B=null,G=H.getPixelArrayConstructor(m.pixelType);
if(0===v){for(v=0;v<R;v++){var Q=y[v];var X=new G(z*C);for(ia=0;ia<C;ia++){var ja=ia*D;for(fa=0;fa<z;fa++)X[ia*z+fa]=Q[ja+fa]}U.push(X)}if(M.isSome(E))for(B=new Uint8Array(z*C),ia=0;ia<C;ia++)for(ja=ia*D,fa=0;fa<z;fa++)B[ia*z+fa]=E[ja+fa]}else{for(v=0;v<R;v++){Q=y[v];X=new G(z*C);for(ia=0;ia<C;ia++)for(ja=ia*D,fa=0;fa<z;fa++)X[ia*z+fa]=(Q[ja+fa]+Q[ja+fa+1]+Q[ja+D+fa]+Q[ja+D+fa+1])/4;U.push(X)}if(E)for(B=new Uint8Array(z*C),ia=0;ia<C;ia++)for(ja=ia*D,fa=0;fa<z;fa++)B[ia*z+fa]=Math.min.apply(null,[E[ja+
fa],E[ja+fa+1],E[ja+D+fa],E[ja+D+fa+1]])}m.width=z;m.height=C;m.mask=B;m.pixels=U}}}var g=function(m){function v(E){var R,z;this.data=E;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(z=null;;){var C=this.readUInt32();var U=E=void 0;E=[];for(U=0;4>U;++U)E.push(String.fromCharCode(this.data[this.pos++]));E=E.join("");switch(E){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];
this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(C);break;case "fcTL":z&&this.animation.frames.push(z);this.pos+=4;z={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};E=this.readUInt16();C=this.readUInt16()||100;z.delay=
1E3*E/C;z.disposeOp=this.data[this.pos++];z.blendOp=this.data[this.pos++];z.data=[];break;case "IDAT":case "fdAT":"fdAT"===E&&(this.pos+=4,C-=4);E=(null!=z?z.data:void 0)||this.imgData;for(U=0;0<=C?U<C:U>C;0<=C?++U:--U)E.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(C);C=255-this.transparency.indexed.length;if(0<C)for(E=0;0<=C?E<C:E>C;0<=C?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=
this.read(C)[0];break;case 2:this.transparency.rgb=this.read(C)}break;case "tEXt":U=this.read(C);C=U.indexOf(0);E=String.fromCharCode.apply(String,U.slice(0,C));this.text[E]=String.fromCharCode.apply(String,U.slice(C+1));break;case "IEND":z&&this.animation.frames.push(z);a:{switch(this.colorType){case 0:case 3:case 4:z=1;break a;case 2:case 6:z=3;break a}z=void 0}this.colors=z;this.hasAlphaChannel=4===(R=this.colorType)||6===R;R=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*
R;a:{switch(this.colors){case 1:R="DeviceGray";break a;case 3:R="DeviceRGB";break a}R=void 0}this.colorSpace=R;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=C}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var y;v.load=function(E,R,z){"function"===typeof R&&(z=R);var C=new XMLHttpRequest;C.open("GET",E,!0);C.responseType="arraybuffer";C.onload=function(){var U=new Uint8Array(C.response||C.mozResponseArrayBuffer);U=new v(U);"function"===
typeof(null!=R?R.getContext:void 0)&&U.render(R);return"function"===typeof z?z(U):void 0};return C.send(null)};v.prototype.read=function(E){var R;var z=[];for(R=0;0<=E?R<E:R>E;0<=E?++R:--R)z.push(this.data[this.pos++]);return z};v.prototype.readUInt32=function(){var E=this.data[this.pos++]<<24;var R=this.data[this.pos++]<<16;var z=this.data[this.pos++]<<8;var C=this.data[this.pos++];return E|R|z|C};v.prototype.readUInt16=function(){var E=this.data[this.pos++]<<8;var R=this.data[this.pos++];return E|
R};v.prototype.decodePixels=function(E){var R,z,C,U,ia,fa,B,G;null==E&&(E=this.imgData);if(0===E.length)return new Uint8Array(0);E=new I.Zlib(E);E=E.getBytes();var Q=this.pixelBitlength/8;var X=Q*this.width;var ja=new Uint8Array(X*this.height);var ca=E.length;for(z=U=ia=0;U<ca;){switch(E[U++]){case 0:for(C=R=0;R<X;C=R+=1)ja[z++]=E[U++];break;case 1:for(C=fa=0;fa<X;C=fa+=1){R=E[U++];var ba=C<Q?0:ja[z-Q];ja[z++]=(R+ba)%256}break;case 2:for(C=ba=0;ba<X;C=ba+=1){R=E[U++];var oa=(C-C%Q)/Q;fa=ia&&ja[(ia-
1)*X+oa*Q+C%Q];ja[z++]=(fa+R)%256}break;case 3:for(C=G=0;G<X;C=G+=1)R=E[U++],oa=(C-C%Q)/Q,ba=C<Q?0:ja[z-Q],fa=ia&&ja[(ia-1)*X+oa*Q+C%Q],ja[z++]=(R+Math.floor((ba+fa)/2))%256;break;case 4:for(C=G=0;G<X;C=G+=1){R=E[U++];oa=(C-C%Q)/Q;ba=C<Q?0:ja[z-Q];0===ia?fa=B=0:(fa=ja[(ia-1)*X+oa*Q+C%Q],B=oa&&ja[(ia-1)*X+(oa-1)*Q+C%Q]);var ea=ba+fa-B;C=Math.abs(ea-ba);oa=Math.abs(ea-fa);ea=Math.abs(ea-B);ba=C<=oa&&C<=ea?ba:oa<=ea?fa:B;ja[z++]=(R+ba)%256}break;default:throw Error("Invalid filter algorithm: "+E[U-1]);
}ia++}return ja};v.prototype.decodePalette=function(){var E,R,z,C;var U=this.palette;var ia=this.transparency.indexed||[];var fa=new Uint8Array((ia.length||0)+U.length);var B=0;U.length;var G=R=E=0;for(z=U.length;R<z;G=R+=3)fa[B++]=U[G],fa[B++]=U[G+1],fa[B++]=U[G+2],fa[B++]=null!=(C=ia[E++])?C:255;return fa};v.prototype.copyToImageData=function(E,R){var z,C;var U=this.colors;var ia=null;var fa=this.hasAlphaChannel;this.palette.length&&(ia=null!=(z=this._decodedPalette)?z:this._decodedPalette=this.decodePalette(),
U=4,fa=!0);E=E.data||E;var B=E.length;var G=ia||R;z=C=0;if(1===U)for(;z<B;)U=ia?4*R[z/4]:C,C=G[U++],E[z++]=C,E[z++]=C,E[z++]=C,E[z++]=fa?G[U++]:this.transparency.grayscale&&this.transparency.grayscale===C?0:255,C=U;else for(;z<B;)U=ia?4*R[z/4]:C,E[z++]=G[U++],E[z++]=G[U++],E[z++]=G[U++],E[z++]=fa?G[U++]:this.transparency.rgb&&this.transparency.rgb[1]===G[U-3]&&this.transparency.rgb[3]===G[U-2]&&this.transparency.rgb[5]===G[U-1]?0:255,C=U};v.prototype.decode=function(){var E=new Uint8Array(this.width*
this.height*4);this.copyToImageData(E,this.decodePixels());return E};var D=(y=m.document&&m.document.createElement("canvas"))&&y.getContext("2d");var J=function(E){D.width=E.width;D.height=E.height;D.clearRect(0,0,E.width,E.height);D.putImageData(E,0,0);E=new Image;E.src=y.toDataURL();return E};v.prototype.decodeFrames=function(E){var R,z;if(this.animation){var C=this.animation.frames;var U=[];var ia=R=0;for(z=C.length;R<z;ia=++R){ia=C[ia];var fa=E.createImageData(ia.width,ia.height);var B=this.decodePixels(new Uint8Array(ia.data));
this.copyToImageData(fa,B);ia.imageData=fa;U.push(ia.image=J(fa))}return U}};v.prototype.renderFrame=function(E,R){var z=this.animation.frames;var C=z[R];z=z[R-1];0===R&&E.clearRect(0,0,this.width,this.height);1===(null!=z?z.disposeOp:void 0)?E.clearRect(z.xOffset,z.yOffset,z.width,z.height):2===(null!=z?z.disposeOp:void 0)&&E.putImageData(z.imageData,z.xOffset,z.yOffset);0===C.blendOp&&E.clearRect(C.xOffset,C.yOffset,C.width,C.height);return E.drawImage(C.image,C.xOffset,C.yOffset)};v.prototype.animate=
function(E){var R,z=this;var C=0;var U=this.animation;var ia=U.numFrames;var fa=U.frames;var B=U.numPlays;return(R=function(){var G=C++%ia;var Q=fa[G];z.renderFrame(E,G);if(1<ia&&C/ia<B)return z.animation._timeout=setTimeout(R,Q.delay)})()};v.prototype.stopAnimation=function(){var E;return clearTimeout(null!=(E=this.animation)?E._timeout:void 0)};v.prototype.render=function(E){E._png&&E._png.stopAnimation();E._png=this;E.width=this.width;E.height=this.height;E=E.getContext("2d");if(this.animation)return this.decodeFrames(E),
this.animate(E);var R=E.createImageData(this.width,this.height);this.copyToImageData(R,this.decodePixels());return E.putImageData(R,0,0)};return v}(self);const t=new Set(["jpg","png","bmp","gif"]);K.decode=async function(m,v={},y){if(null==m)throw new k("rasterCodec:decode","missing encodeddata parameter.");let D=v.format&&v.format.toLowerCase();if(!("bsq"!==D&&"bip"!==D||null!=v.width&&null!=v.height))throw new k("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===
D&&v.customOptions)return q(m,v);if(!D||"bsq"!==D&&"bip"!==D&&"deflate"!==D&&"lzw"!==D)D=f(m);if(v.useCanvas&&t.has(D))return e(m,D,v,y);y=d(D);v.isPoint&&(v={...v},null!=v.width&&v.width++,null!=v.height&&v.height++);m=await y(m,v);if(!m)return m;"jpg"!==D&&null!=v.noDataValue&&1===m.depthCount&&O.convertNoDataToMask(m,v.noDataValue,{customFloatTolerance:v.tolerance});v.isPoint&&h(m);return m};K.getFormat=function(m){m=f(m);"lerc2"===m?m="lerc":"error"===m&&(m="");return m};Object.defineProperty(K,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(K,k,M,H){return function(){function p(F){this._ctx=this._canvas=null;F&&(this._canvas=F.canvas,this._ctx=F.ctx||F.canvas&&F.canvas.getContext("2d"))}p.prototype.decode=function(F,Z,V){if(!F||10>F.byteLength)throw new k("imagecanvasdecoder: decode","required a valid encoded data as input.");
let {width:O=0,height:I=0,format:N}=Z;const {applyJpegMask:x}=Z;if(x&&(!O||!I))throw new k("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((w,L)=>{let r=null;"jpg"===N&&x&&(r=p._getMask(F,{width:O,height:I}));const q=new Blob([new Uint8Array(F)],{type:"jpg"==="image/"+N?"jpeg":N}),b=URL.createObjectURL(q),l=new Image;let A;l.src=b;l.onload=()=>{URL.revokeObjectURL(b);if(M.isAborted(V))L(M.createAbortError());else{O=l.width;
I=l.height;if(this._canvas&&this._ctx){if(this._canvas.width!==O||this._canvas.height!==I)this._canvas.width=O,this._canvas.height=I;this._ctx.clearRect(0,0,O,I)}else this._canvas=document.createElement("canvas"),this._canvas.width=O,this._canvas.height=I,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(l,0,0);var u=this._ctx.getImageData(0,0,O,I);A=u.data;var a;if(Z.renderOnCanvas){if(r)for(a=0;a<r.length;a++)A[4*a+3]=r[a]?255:0;this._ctx.putImageData(u,0,0);w(null)}else{u=O*I;var e=new Uint8Array(u),
f=new Uint8Array(u),d=new Uint8Array(u);if(r)for(a=0;a<u;a++)e[a]=A[4*a],f[a]=A[4*a+1],d[a]=A[4*a+2];else for(r=new Uint8Array(u),a=0;a<u;a++)e[a]=A[4*a],f[a]=A[4*a+1],d[a]=A[4*a+2],r[a]=A[4*a+3];w({width:O,height:I,pixels:[e,f,d],mask:r,pixelType:"u8"})}}};l.onerror=()=>{URL.revokeObjectURL(b);L("cannot load image")}})};p._getMask=function(F,Z){let V=null;try{var O=new Uint8Array(F);F=0;var I=O.length-2;for(F=Math.ceil(O.length/2);F<I&&(255!==O[F]||217!==O[F+1]);F++);F+=2;if(F<O.length-1){const N=
(new H.Zlib(O.subarray(F))).getBytes();V=new Uint8Array(Z.width*Z.height);Z=0;for(O=0;O<N.length;O++)for(I=7;0<=I;I--)V[Z++]=N[O]>>I&1}}catch(N){}return V};return K._createClass(p)}()})},"esri/chunks/Zlib":function(){define(["exports"],function(K){var k={};(function(M){(function(H){H=H();void 0!==H&&(M.exports=H)})(function(){var H=function(){function p(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}p.prototype={ensureBuffer:function(F){var Z=this.buffer,V=Z?Z.byteLength:0;if(F<V)return Z;
for(var O=512;O<F;)O<<=1;F=new Uint8Array(O);for(O=0;O<V;++O)F[O]=Z[O];return this.buffer=F},getByte:function(){for(var F=this.pos;this.bufferLength<=F;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(F){var Z=this.pos;if(F){this.ensureBuffer(Z+F);for(F=Z+F;!this.eof&&this.bufferLength<F;)this.readBlock();var V=this.bufferLength;F>V&&(F=V)}else{for(;!this.eof;)this.readBlock();F=this.bufferLength}this.pos=F;return this.buffer.subarray(Z,F)},lookChar:function(){for(var F=
this.pos;this.bufferLength<=F;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var F=this.pos;this.bufferLength<=F;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(F,Z,V){for(var O=F+Z;this.bufferLength<=O&&!this.eof;)this.readBlock();return new Stream(this.buffer,F,Z,V)},skip:function(F){F||(F=1);this.pos+=F},reset:function(){this.pos=0}};return p}();return function(){function p(x){throw Error(x);
}function F(x){var w=0,L=x[w++],r=x[w++];-1!=L&&-1!=r||p("Invalid header in flate stream");8!=(L&15)&&p("Unknown compression method in flate stream");0!=((L<<8)+r)%31&&p("Bad FCHECK in flate stream");r&32&&p("FDICT bit set in flate stream");this.bytes=x;this.bytesPos=w;this.codeBuf=this.codeSize=0;H.call(this)}if(!self||!self.Uint32Array)return null;var Z=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),V=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,
131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),O=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),I=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,
459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,
459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,
459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,
459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,
459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,
459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,
459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],N=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,
327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];F.prototype=Object.create(H.prototype);F.prototype.getBits=function(x){for(var w=this.codeSize,L=this.codeBuf,r=this.bytes,q=this.bytesPos,b;w<x;)"undefined"==typeof(b=r[q++])&&p("Bad encoding in flate stream"),L|=b<<w,w+=8;this.codeBuf=L>>x;this.codeSize=w-=x;this.bytesPos=q;return L&(1<<x)-1};F.prototype.getCode=function(x){var w=x[0],L=x[1];x=this.codeSize;for(var r=
this.codeBuf,q=this.bytes,b=this.bytesPos;x<L;){var l;"undefined"==typeof(l=q[b++])&&p("Bad encoding in flate stream");r|=l<<x;x+=8}L=w[r&(1<<L)-1];w=L>>16;L&=65535;(0==x||x<w||0==w)&&p("Bad encoding in flate stream");this.codeBuf=r>>w;this.codeSize=x-w;this.bytesPos=b;return L};F.prototype.generateHuffmanTable=function(x){for(var w=x.length,L=0,r=0;r<w;++r)x[r]>L&&(L=x[r]);for(var q=1<<L,b=new Uint32Array(q),l=1,A=0,u=2;l<=L;++l,A<<=1,u<<=1)for(var a=0;a<w;++a)if(x[a]==l){var e=0,f=A;for(r=0;r<l;++r)e=
e<<1|f&1,f>>=1;for(r=e;r<q;r+=u)b[r]=l<<16|a;++A}return[b,L]};F.prototype.readBlock=function(){function x(e,f,d,h,g){for(e=e.getBits(d)+h;0<e--;)f[A++]=g}var w=this.getBits(3);w&1&&(this.eof=!0);w>>=1;if(0==w){var L=this.bytes,r=this.bytesPos,q;"undefined"==typeof(q=L[r++])&&p("Bad block header in flate stream");var b=q;"undefined"==typeof(q=L[r++])&&p("Bad block header in flate stream");b|=q<<8;"undefined"==typeof(q=L[r++])&&p("Bad block header in flate stream");w=q;"undefined"==typeof(q=L[r++])&&
p("Bad block header in flate stream");(w|q<<8)!=(~b&65535)&&p("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;q=this.bufferLength;w=this.ensureBuffer(q+b);this.bufferLength=b=q+b;for(var l=q;l<b;++l){if("undefined"==typeof(q=L[r++])){this.eof=!0;break}w[l]=q}this.bytesPos=r}else{if(1==w)r=I,q=N;else if(2==w){w=this.getBits(5)+257;q=this.getBits(5)+1;L=this.getBits(4)+4;r=Array(Z.length);for(var A=0;A<L;)r[Z[A++]]=this.getBits(3);r=this.generateHuffmanTable(r);A=L=0;q=
w+q;for(b=Array(q);A<q;)l=this.getCode(r),16==l?x(this,b,2,3,L):17==l?x(this,b,3,3,L=0):18==l?x(this,b,7,11,L=0):b[A++]=L=l;r=this.generateHuffmanTable(b.slice(0,w));q=this.generateHuffmanTable(b.slice(w,q))}else p("Unknown block type in flate stream");b=(w=this.buffer)?w.length:0;for(l=this.bufferLength;;){var u=this.getCode(r);if(256>u)l+1>=b&&(w=this.ensureBuffer(l+1),b=w.length),w[l++]=u;else{if(256==u){this.bufferLength=l;break}u-=257;u=V[u];var a=u>>16;0<a&&(a=this.getBits(a));L=(u&65535)+a;
u=this.getCode(q);u=O[u];a=u>>16;0<a&&(a=this.getBits(a));u=(u&65535)+a;l+L>=b&&(w=this.ensureBuffer(l+L),b=w.length);for(a=0;a<L;++a,++l)w[l]=w[l-u]}}}};return F}()})})({get exports(){return k},set exports(M){k=M}});K.Zlib=k})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/Jpg","../../../chunks/Zlib"],function(K,k,M){return function(){function H(){}H.decode=function(p,F=!1){const Z=new Uint8Array(p);p=new k.JpegImage;p.parse(Z);
const {width:V,height:O,numComponents:I,eof:N}=p,x=p.getData(V,O,!0),w=V*O;p=null;let L=0,r=0,q=0;if(!F&&N<Z.length-1)try{var b=(new M.Zlib(Z.subarray(N))).getBytes();p=new Uint8Array(w);for(L=F=0;L<b.length;L++)for(q=7;0<=q;q--)p[F++]=b[L]>>q&1}catch{}if(1===I&&x.length===V*O)b=new Uint8Array(x.buffer),b=[b,b,b];else{b=[];for(L=0;3>L;L++)b.push(new Uint8Array(w));for(r=q=0;r<w;r++)for(L=0;3>L;L++)b[L][r]=x[q++]}return{width:V,height:O,pixels:b,mask:p}};return K._createClass(H)}()})},"esri/chunks/Jpg":function(){define(["exports"],
function(K){var k={};(function(M){(function(H){H=H();void 0!==H&&(M.exports=H)})(function(){var H=function(){function p(F){this.message="JPEG error: "+F}p.prototype=Error();p.prototype.name="JpegError";return p.constructor=p}();return function(){function p(){this.decodeTransform=null;this.colorTransform=-1}function F(N,x){for(var w=0,L=[],r,q,b=16;0<b&&!N[b-1];)b--;L.push({children:[],index:0});var l=L[0],A;for(r=0;r<b;r++){for(q=0;q<N[r];q++){l=L.pop();for(l.children[l.index]=x[w];0<l.index;)l=L.pop();
l.index++;for(L.push(l);L.length<=r;)L.push(A={children:[],index:0}),l.children[l.index]=A.children,l=A;w++}r+1<b&&(L.push(A={children:[],index:0}),l.children[l.index]=A.children,l=A)}return L[0].children}function Z(N,x,w,L,r,q,b,l,A){function u(){if(0<J)return J--,D>>J&1;D=N[x++];if(255===D){var ba=N[x++];if(ba)throw new H("unexpected marker "+(D<<8|ba).toString(16));}J=7;return D>>>7}function a(ba){for(;;){ba=ba[u()];if("number"===typeof ba)return ba;if("object"!==typeof ba)throw new H("invalid huffman sequence");
}}function e(ba){for(var oa=0;0<ba;)oa=oa<<1|u(),ba--;return oa}function f(ba){if(1===ba)return 1===u()?1:-1;var oa=e(ba);return oa>=1<<ba-1?oa:oa+(-1<<ba)+1}function d(ba,oa){var ea=a(ba.huffmanTableDC);ea=0===ea?0:f(ea);ba.blockData[oa]=ba.pred+=ea;for(ea=1;64>ea;){var wa=a(ba.huffmanTableAC),c=wa&15;wa>>=4;if(0===c){if(15>wa)break;ea+=16}else ea+=wa,ba.blockData[oa+I[ea]]=f(c),ea++}}function h(ba,oa){var ea=a(ba.huffmanTableDC);ea=0===ea?0:f(ea)<<A;ba.blockData[oa]=ba.pred+=ea}function g(ba,oa){ba.blockData[oa]|=
u()<<A}function t(ba,oa){if(0<E)E--;else for(var ea=q;ea<=b;){var wa=a(ba.huffmanTableAC),c=wa&15;wa>>=4;if(0===c){if(15>wa){E=e(wa)+(1<<wa)-1;break}ea+=16}else ea+=wa,ba.blockData[oa+I[ea]]=f(c)*(1<<A),ea++}}function m(ba,oa){for(var ea=q,wa=0,c;ea<=b;){c=I[ea];switch(R){case 0:wa=a(ba.huffmanTableAC);c=wa&15;wa>>=4;if(0===c)15>wa?(E=e(wa)+(1<<wa),R=4):(wa=16,R=1);else{if(1!==c)throw new H("invalid ACn encoding");z=f(c);R=wa?2:3}continue;case 1:case 2:ba.blockData[oa+c]?ba.blockData[oa+c]+=u()<<
A:(wa--,0===wa&&(R=2===R?3:0));break;case 3:ba.blockData[oa+c]?ba.blockData[oa+c]+=u()<<A:(ba.blockData[oa+c]=z<<A,R=0);break;case 4:ba.blockData[oa+c]&&(ba.blockData[oa+c]+=u()<<A)}ea++}4===R&&(E--,0===E&&(R=0))}var v=w.mcusPerLine,y=x,D=0,J=0,E=0,R=0,z,C=L.length,U,ia,fa,B;l=w.progressive?0===q?0===l?h:g:0===l?t:m:d;var G=0;w=1===C?L[0].blocksPerLine*L[0].blocksPerColumn:v*w.mcusPerColumn;for(var Q,X;G<w;){var ja=r?Math.min(w-G,r):w;for(U=0;U<C;U++)L[U].pred=0;E=0;if(1===C){var ca=L[0];for(B=0;B<
ja;B++)l(ca,64*((ca.blocksPerLine+1)*(G/ca.blocksPerLine|0)+G%ca.blocksPerLine)),G++}else for(B=0;B<ja;B++){for(U=0;U<C;U++)for(ca=L[U],Q=ca.h,X=ca.v,ia=0;ia<X;ia++)for(fa=0;fa<Q;fa++)l(ca,64*((ca.blocksPerLine+1)*((G/v|0)*ca.v+ia)+(G%v*ca.h+fa)));G++}J=0;(ca=O(N,x))&&ca.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ca.invalid),x=ca.offset);ca=ca&&ca.marker;if(!ca||65280>=ca)throw new H("marker was not found");if(65488<=ca&&65495>=ca)x+=2;else break}(ca=O(N,x))&&ca.invalid&&
(console.log("decodeScan - unexpected Scan data, next marker is: "+ca.invalid),x=ca.offset);return x-y}function V(N,x){N=x.blocksPerLine;for(var w=x.blocksPerColumn,L=new Int16Array(64),r=0;r<w;r++)for(var q=0;q<N;q++){var b=void 0,l=void 0,A=void 0,u=void 0,a=void 0,e=void 0,f=void 0,d=void 0,h=a=e=u=l=b=void 0,g=void 0,t=void 0,m=void 0,v=64*((x.blocksPerLine+1)*r+q),y=L,D=x.quantizationTable,J=x.blockData;if(!D)throw new H("missing required Quantization Table.");for(var E=0;64>E;E+=8)b=J[v+E],
d=J[v+E+1],f=J[v+E+2],e=J[v+E+3],a=J[v+E+4],u=J[v+E+5],A=J[v+E+6],l=J[v+E+7],b*=D[E],0===(d|f|e|a|u|A|l)?(b=5793*b+512>>10,y[E]=b,y[E+1]=b,y[E+2]=b,y[E+3]=b,y[E+4]=b,y[E+5]=b,y[E+6]=b,y[E+7]=b):(d*=D[E+1],f*=D[E+2],e*=D[E+3],a*=D[E+4],u*=D[E+5],A*=D[E+6],l*=D[E+7],m=5793*b+128>>8,t=5793*a+128>>8,g=f,h=A,a=2896*(d-l)+128>>8,l=2896*(d+l)+128>>8,e<<=4,u<<=4,m=m+t+1>>1,t=m-t,b=3784*g+1567*h+128>>8,g=1567*g-3784*h+128>>8,h=b,a=a+u+1>>1,u=a-u,l=l+e+1>>1,e=l-e,m=m+h+1>>1,h=m-h,t=t+g+1>>1,g=t-g,b=2276*a+
3406*l+2048>>12,a=3406*a-2276*l+2048>>12,l=b,b=799*e+4017*u+2048>>12,e=4017*e-799*u+2048>>12,u=b,y[E]=m+l,y[E+7]=m-l,y[E+1]=t+u,y[E+6]=t-u,y[E+2]=g+e,y[E+5]=g-e,y[E+3]=h+a,y[E+4]=h-a);for(D=0;8>D;++D)b=y[D],d=y[D+8],f=y[D+16],e=y[D+24],a=y[D+32],u=y[D+40],A=y[D+48],l=y[D+56],0===(d|f|e|a|u|A|l)?(b=5793*b+8192>>14,b=-2040>b?0:2024<=b?255:b+2056>>4,J[v+D]=b,J[v+D+8]=b,J[v+D+16]=b,J[v+D+24]=b,J[v+D+32]=b,J[v+D+40]=b,J[v+D+48]=b,J[v+D+56]=b):(m=5793*b+2048>>12,t=5793*a+2048>>12,g=f,h=A,a=2896*(d-l)+2048>>
12,l=2896*(d+l)+2048>>12,m=(m+t+1>>1)+4112,t=m-t,b=3784*g+1567*h+2048>>12,g=1567*g-3784*h+2048>>12,h=b,a=a+u+1>>1,u=a-u,l=l+e+1>>1,e=l-e,m=m+h+1>>1,h=m-h,t=t+g+1>>1,g=t-g,b=2276*a+3406*l+2048>>12,a=3406*a-2276*l+2048>>12,l=b,b=799*e+4017*u+2048>>12,e=4017*e-799*u+2048>>12,u=b,b=m+l,l=m-l,d=t+u,A=t-u,f=g+e,u=g-e,e=h+a,a=h-a,b=16>b?0:4080<=b?255:b>>4,d=16>d?0:4080<=d?255:d>>4,f=16>f?0:4080<=f?255:f>>4,e=16>e?0:4080<=e?255:e>>4,a=16>a?0:4080<=a?255:a>>4,u=16>u?0:4080<=u?255:u>>4,A=16>A?0:4080<=A?255:
A>>4,l=16>l?0:4080<=l?255:l>>4,J[v+D]=b,J[v+D+8]=d,J[v+D+16]=f,J[v+D+24]=e,J[v+D+32]=a,J[v+D+40]=u,J[v+D+48]=A,J[v+D+56]=l)}return x.blockData}function O(N,x,w){var L=N.length-1;w=w<x?w:x;if(x>=L)return null;var r=N[x]<<8|N[x+1];if(65472<=r&&65534>=r)return{invalid:null,marker:r,offset:x};for(x=N[w]<<8|N[w+1];!(65472<=x&&65534>=x);){if(++w>=L)return null;x=N[w]<<8|N[w+1]}return{invalid:r.toString(16),marker:x,offset:w}}if(!self||!self.Uint8ClampedArray)return null;var I=new Uint8Array([0,1,8,16,9,
2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);p.prototype={parse:function(N){function x(){var D=N[r]<<8|N[r+1];r+=2;return D}function w(){var D=x();D=r+D-2;var J=O(N,D,r);J&&J.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+J.invalid),D=J.offset);D=N.subarray(r,D);r+=D.length;return D}function L(D){for(var J=Math.ceil(D.samplesPerLine/8/D.maxH),
E=Math.ceil(D.scanLines/8/D.maxV),R=0;R<D.components.length;R++){y=D.components[R];var z=Math.ceil(Math.ceil(D.samplesPerLine/8)*y.h/D.maxH),C=Math.ceil(Math.ceil(D.scanLines/8)*y.v/D.maxV);y.blockData=new Int16Array(64*E*y.v*(J*y.h+1));y.blocksPerLine=z;y.blocksPerColumn=C}D.mcusPerLine=J;D.mcusPerColumn=E}var r=0,q=null,b=null,l=[],A=[],u=[],a=x();if(65496!==a)throw new H("SOI not found");for(a=x();65497!==a;){switch(a){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var e=
w();65504===a&&74===e[0]&&70===e[1]&&73===e[2]&&70===e[3]&&0===e[4]&&(q={version:{major:e[5],minor:e[6]},densityUnits:e[7],xDensity:e[8]<<8|e[9],yDensity:e[10]<<8|e[11],thumbWidth:e[12],thumbHeight:e[13],thumbData:e.subarray(14,14+3*e[12]*e[13])});65518===a&&65===e[0]&&100===e[1]&&111===e[2]&&98===e[3]&&101===e[4]&&(b={version:e[5]<<8|e[6],flags0:e[7]<<8|e[8],flags1:e[9]<<8|e[10],transformCode:e[11]});break;case 65499:a=x()+r-2;for(var f;r<a;){var d=N[r++],h=new Uint16Array(64);if(0===d>>4)for(e=
0;64>e;e++)f=I[e],h[f]=N[r++];else if(1===d>>4)for(e=0;64>e;e++)f=I[e],h[f]=x();else throw new H("DQT - invalid table spec");l[d&15]=h}break;case 65472:case 65473:case 65474:if(g)throw new H("Only single frame JPEGs supported");x();var g={};g.extended=65473===a;g.progressive=65474===a;g.precision=N[r++];g.scanLines=x();g.samplesPerLine=x();g.components=[];g.componentIds={};e=N[r++];for(a=h=d=0;a<e;a++){f=N[r];var t=N[r+1]>>4;var m=N[r+1]&15;d<t&&(d=t);h<m&&(h=m);t=g.components.push({h:t,v:m,quantizationId:N[r+
2],quantizationTable:null});g.componentIds[f]=t-1;r+=3}g.maxH=d;g.maxV=h;L(g);break;case 65476:f=x();for(a=2;a<f;){d=N[r++];h=new Uint8Array(16);for(e=t=0;16>e;e++,r++)t+=h[e]=N[r];m=new Uint8Array(t);for(e=0;e<t;e++,r++)m[e]=N[r];a+=17+t;(0===d>>4?u:A)[d&15]=F(h,m)}break;case 65501:x();var v=x();break;case 65498:x();f=N[r++];e=[];for(a=0;a<f;a++){d=g.componentIds[N[r++]];var y=g.components[d];d=N[r++];y.huffmanTableDC=u[d>>4];y.huffmanTableAC=A[d&15];e.push(y)}a=N[r++];f=N[r++];d=N[r++];a=Z(N,r,
g,e,v,a,f,d>>4,d&15);r+=a;break;case 65535:255!==N[r]&&r--;break;default:if(255===N[r-3]&&192<=N[r-2]&&254>=N[r-2])r-=3;else throw new H("unknown marker "+a.toString(16));}a=x()}this.width=g.samplesPerLine;this.height=g.scanLines;this.jfif=q;this.eof=r;this.adobe=b;this.components=[];for(a=0;a<g.components.length;a++){y=g.components[a];if(q=l[y.quantizationId])y.quantizationTable=q;this.components.push({output:V(g,y),scaleX:y.h/g.maxH,scaleY:y.v/g.maxV,blocksPerLine:y.blocksPerLine,blocksPerColumn:y.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(N,x){var w=this.width/N,L=this.height/x,r,q,b=0,l=this.components.length,A=N*x*l,u=new Uint8ClampedArray(A),a=new Uint32Array(N);for(q=0;q<l;q++){var e=this.components[q];var f=e.scaleX*w;var d=e.scaleY*L;b=q;var h=e.output;var g=e.blocksPerLine+1<<3;for(r=0;r<N;r++)e=0|r*f,a[r]=(e&4294967288)<<3|e&7;for(f=0;f<x;f++)for(e=0|f*d,e=g*(e&4294967288)|(e&7)<<3,r=0;r<N;r++)u[b]=h[e+a[r]],b+=l}if(x=this.decodeTransform)for(q=0;q<A;)for(N=e=0;e<l;e++,
q++,N+=2)u[q]=(u[q]*x[N]>>8)+x[N+1];return u},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(N){for(var x,w,L,r=0,q=N.length;r<q;r+=3)x=N[r],w=N[r+1],L=N[r+2],N[r]=x-179.456+1.402*L,N[r+1]=x+135.459-.344*w-.714*L,N[r+2]=x-226.816+1.772*w;return N},_convertYcckToRgb:function(N){for(var x,w,L,r,q=0,b=0,l=N.length;b<l;b+=4)x=N[b],w=N[b+1],L=N[b+2],r=N[b+3],N[q++]=
-122.67195406894+w*(-6.60635669420364E-5*w+4.37130475926232E-4*L-5.4080610064599E-5*x+4.8449797120281E-4*r-.154362151871126)+L*(-9.57964378445773E-4*L+8.17076911346625E-4*x-.00477271405408747*r+1.53380253221734)+x*(9.61250184130688E-4*x-.00266257332283933*r+.48357088451265)+r*(-3.36197177618394E-4*r+.484791561490776),N[q++]=107.268039397724+w*(2.19927104525741E-5*w-6.40992018297945E-4*L+6.59397001245577E-4*x+4.26105652938837E-4*r-.176491792462875)+L*(-7.78269941513683E-4*L+.00130872261408275*x+7.70482631801132E-4*
r-.151051492775562)+x*(.00126935368114843*x-.00265090189010898*r+.25802910206845)+r*(-3.18913117588328E-4*r-.213742400323665),N[q++]=-20.810012546947+w*(-5.70115196973677E-4*w-2.63409051004589E-5*L+.0020741088115012*x-.00288260236853442*r+.814272968359295)+L*(-1.53496057440975E-5*L-1.32689043961446E-4*x+5.60833691242812E-4*r-.195152027534049)+x*(.00174418132927582*x-.00255243321439347*r+.116935020465145)+r*(-3.43531996510555E-4*r+.24165260232407);return N},_convertYcckToCmyk:function(N){for(var x,
w,L,r=0,q=N.length;r<q;r+=4)x=N[r],w=N[r+1],L=N[r+2],N[r]=434.456-x-1.402*L,N[r+1]=119.541-x+.344*w+.714*L,N[r+2]=481.816-x-1.772*w;return N},_convertCmykToRgb:function(N){for(var x,w,L,r,q=0,b=1/255,l=0,A=N.length;l<A;l+=4)x=N[l]*b,w=N[l+1]*b,L=N[l+2]*b,r=N[l+3]*b,N[q++]=255+x*(-4.387332384609988*x+54.48615194189176*w+18.82290502165302*L+212.25662451639585*r-285.2331026137004)+w*(1.7149763477362134*w-5.6096736904047315*L-17.873870861415444*r-5.497006427196366)+L*(-2.5217340131683033*L-21.248923337353073*
r+17.5119270841813)-r*(21.86122147463605*r+189.48180835922747),N[q++]=255+x*(8.841041422036149*x+60.118027045597366*w+6.871425592049007*L+31.159100130055922*r-79.2970844816548)+w*(-15.310361306967817*w+17.575251261109482*L+131.35250912493976*r-190.9453302588951)+L*(4.444339102852739*L+9.8632861493405*r-24.86741582555878)-r*(20.737325471181034*r+187.80453709719578),N[q++]=255+x*(.8842522430003296*x+8.078677503112928*w+30.89978309703729*L-.23883238689178934*r-14.183576799673286)+w*(10.49593273432072*
w+63.02378494754052*L+50.606957656360734*r-112.23884253719248)+L*(.03296041114873217*L+115.60384449646641*r-193.58209356861505)-r*(22.33816807309886*r+180.12613974708367);return N},getData:function(N,x,w){if(4<this.numComponents)throw new H("Unsupported color mode");N=this._getLinearizedBlockData(N,x);if(1===this.numComponents&&w){w=N.length;x=new Uint8ClampedArray(3*w);for(var L=0,r=0;r<w;r++){var q=N[r];x[L++]=q;x[L++]=q;x[L++]=q}return x}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(N);
if(4===this.numComponents){if(this._isColorConversionNeeded())return w?this._convertYcckToRgb(N):this._convertYcckToCmyk(N);if(w)return this._convertCmykToRgb(N)}return N}};return p}()})})({get exports(){return k},set exports(M){k=M}});K.JpegImage=k})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(K,k,M){function H(I,N,x){x.set(I.slice(N,N+x.length))}function p(I){const {_malloc:N,_free:x,_lerc_getBlobInfo:w,_lerc_getDataRanges:L,_lerc_decode_4D:r,
asm:q}=I;let b;const l=Object.values(q).find(u=>u&&"buffer"in u&&u.buffer===I.HEAPU8.buffer),A=u=>{u=u.map(f=>(f>>3<<3)+16);var a=u.reduce((f,d)=>f+d),e=N(a);b=new Uint8Array(l.buffer);a=u[0];u[0]=e;for(e=1;e<u.length;e++){const f=u[e];u[e]=u[e-1]+a;a=f}return u};O.getBlobInfo=u=>{var a=new Uint8Array(48),e=new Uint8Array(24);const [f,d,h]=A([u.length,a.length,e.length]);b.set(u,f);b.set(a,d);b.set(e,h);var g=w(f,u.length,d,h,12,3);if(g)throw x(f),Error(`lerc-getBlobInfo: error code is ${g}`);b=new Uint8Array(l.buffer);
H(b,d,a);H(b,h,e);a=new Uint32Array(a.buffer);var t=new Float64Array(e.buffer);const [m,v,,y,D,J,E,R,z,C,U]=a;e={version:m,depthCount:C,width:y,height:D,validPixelCount:E,bandCount:J,blobSize:R,maskCount:z,dataType:v,minValue:t[0],maxValue:t[1],maxZerror:t[2],statistics:[],bandCountWithNoData:U};if(U)return e;if(1===C&&1===J)return x(f),e.statistics.push({minValue:t[0],maxValue:t[1]}),e;g=C*J*8;var ia=new Uint8Array(g),fa=new Uint8Array(g);a=f;var B=t=0;let G=!1;b.byteLength<f+2*g?(x(f),G=!0,[a,t,
B]=A([u.length,g,g]),b.set(u,a)):[t,B]=A([g,g]);b.set(ia,t);b.set(fa,B);if(g=L(a,u.length,C,J,t,B))throw x(a),G||x(t),Error(`lerc-getDataRanges: error code is ${g}`);b=new Uint8Array(l.buffer);H(b,t,ia);H(b,B,fa);u=new Float64Array(ia.buffer);g=new Float64Array(fa.buffer);fa=e.statistics;for(ia=0;ia<J;ia++)if(1<C){B=u.slice(ia*C,(ia+1)*C);const Q=g.slice(ia*C,(ia+1)*C),X=Math.min.apply(null,B),ja=Math.max.apply(null,Q);fa.push({minValue:X,maxValue:ja,depthStats:{minValues:B,maxValues:Q}})}else fa.push({minValue:u[ia],
maxValue:g[ia]});x(a);G||x(t);return e};O.decode=(u,a)=>{const {maskCount:e,depthCount:f,bandCount:d,width:h,height:g,dataType:t,bandCountWithNoData:m}=a;var v=F[t],y=h*g;a=new Uint8Array(y*d);v=new Uint8Array(y*f*d*v.size);y=new Uint8Array(d);var D=new Uint8Array(8*d);const [J,E,R,z,C]=A([u.length,a.length,v.length,y.length,D.length]);b.set(u,J);b.set(a,E);b.set(v,R);b.set(y,z);b.set(D,C);if(u=r(J,u.length,e,E,f,h,g,d,t,R,z,C))throw x(J),Error(`lerc-decode: error code is ${u}`);b=new Uint8Array(l.buffer);
H(b,R,v);H(b,E,a);u=null;if(m){H(b,z,y);H(b,C,D);u=[];D=new Float64Array(D.buffer);for(let U=0;U<y.length;U++)u.push(y[U]?D[U]:null)}x(J);return{data:v,maskData:a,noDataValues:u}}}const F=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let Z=null,V=!1;const O={getBlobInfo:null,decode:null};k.decode=function(I,N={}){var x=N.inputOffset??0;I=I instanceof Uint8Array?I.subarray(x):new Uint8Array(I,x);x=O.getBlobInfo(I);const {data:w,maskData:L,noDataValues:r}=O.decode(I,x),{width:q,height:b,bandCount:l,
depthCount:A,dataType:u,maskCount:a,statistics:e}=x;var f=F[u],d=new f.ctor(w.buffer);I=[];x=[];const h=q*b;var g=h*A;for(var t=0;t<l;t++){var m=d.subarray(t*g,(t+1)*g);if(N.returnInterleaved)I.push(m);else{a:{var v=h,y=A;if(2>y)break a;const D=new f.ctor(v*y);for(let J=0,E=0;J<v;J++)for(let R=0,z=J;R<y;R++,z+=v)D[z]=m[E++];m=D}I.push(m)}x.push(L.subarray(t*g,(t+1)*g))}d=0===a?null:1===a?x[0]:new Uint8Array(h);if(1<a)for(d.set(x[0]),g=1;g<x.length;g++)for(t=x[g],m=0;m<h;m++)d[m]&=t[m];({noDataValue:N}=
N);g=null!=N&&f.range[0]<=N&&f.range[1]>=N;if(0<a&&g)for(g=0;g<l;g++)for(t=I[g],m=x[g]||d,v=0;v<h;v++)0===m[v]&&(t[v]=N);({pixelType:f}=f);return{width:q,height:b,bandCount:l,pixelType:f,depthCount:A,statistics:e,pixels:I,mask:d,bandMasks:a===l&&1<l?x:null,noDataValues:r}};k.getBlobInfo=function(I,N={}){I=I instanceof Uint8Array?I.subarray(N.inputOffset??0):new Uint8Array(I,N.inputOffset??0);return O.getBlobInfo(I)};k.isLoaded=function(){return V};k.load=function(){return Z?Z:Z=(new Promise((I,N)=>
K(["../../../chunks/lerc-wasm"],I,N))).then(I=>I.lercWasm).then(({default:I})=>I({locateFile:N=>M.getAssetUrl(`esri/layers/support/rasterFormats/${N}`)})).then(I=>{p(I);V=!0})};k.pixelTypeInfoMap=F;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(K){function k(F,Z,V,O=!0){if(0!==Z%4||0!==V%4){var I=new ArrayBuffer(4*Math.ceil(V/4));I=new Uint8Array(I);F=new Uint8Array(F,Z,V);if(O)for(O=0;O<I.length;O+=4)I[O]=
F[O+3],I[O+1]=F[O+2],I[O+2]=F[O+1],I[O+3]=F[O];else I.set(F);return new Uint32Array(I.buffer)}if(O){O=new Uint8Array(F,Z,V);I=new Uint8Array(O.length);for(F=0;F<I.length;F+=4)I[F]=O[F+3],I[F+1]=O[F+2],I[F+2]=O[F+1],I[F+3]=O[F];return new Uint32Array(I.buffer)}return new Uint32Array(F,Z,V/4)}function M(){const F=[];for(let Z=0;257>=Z;Z++)F[Z]=[Z];return F}function H(F,Z){for(let V=0;V<Z.length;V++)F.push(Z[V])}const p=new Set;p.add(511);p.add(1023);p.add(2047);p.add(4095);p.add(8191);K.decode=function(F,
Z,V,O=!0){F=k(F,Z,V,O);Z=9;O=M();let I=32,N=O.length,x=[],w=1,L=F[0],r=0;const q=F.length;V=8*(4*q-V);const b=[];for(;null!=L;){if(I>=Z)I-=Z,r=L>>>32-Z,L<<=Z;else{r=L>>>32-I;L=F[w++];var l=Z-I;I=32-l;r=(r<<l)+(L>>>I);L<<=l}if(257===r)break;if(256===r)Z=9,O=M(),N=O.length,x=[];else{l=O[r];if(null==l){if(r>O.length)throw Error("data integrity issue: code does not exist on code page");x.push(x[0]);O[N++]=x.slice();H(b,x)}else H(b,l),x.push(l[0]),1<x.length&&(O[N++]=x.slice()),x=l.slice();p.has(N)&&Z++;
0===I&&(L=F[w++],I=32);if(w>q||w===q&&I<=V)break}}return new Uint8Array(b)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(K){const k=M=>{let H=1;switch(M){case Uint8Array:case Int8Array:H=1;break;case Uint16Array:case Int16Array:H=2;break;case Uint32Array:case Int32Array:case Float32Array:H=4;break;case Float64Array:H=8}return H};return function(){function M(){}M.decode=
function(H,p){var F=p.pixelType;const Z=[],V=p.width*p.height;var O=Math.floor(H.byteLength/(p.width*p.height*k(p.pixelType)));const {bandIds:I,format:N}=p;p=I&&I.length||Math.floor(H.byteLength/(p.width*p.height*k(p.pixelType)));var x=H.byteLength-H.byteLength%(V*k(F)),w=new F(H,0,V*O);let L,r,q,b,l=null;if("bip"===N)for(L=0;L<p;L++){q=new F(V);b=I?I[L]:L;for(r=0;r<V;r++)q[r]=w[r*O+b];Z.push(q)}else if("bsq"===N)for(L=0;L<p;L++)b=I?I[L]:L,Z.push(w.subarray(b*V,(b+1)*V));if(x<H.byteLength-1)if(H=
H.slice(x),8*H.byteLength<V)l=null;else{H=new Uint8Array(H,0,Math.ceil(V/8));F=new Uint8Array(V);for(x=w=x=p=O=0;x<H.length-1;x++)for(p=H[x],w=7;0<=w;w--)F[O++]=p>>w&1;for(w=7;O<V-1;)p=H[H.length-1],F[O++]=p>>w&1,w--;l=F}return{pixels:Z,mask:l}};return K._createClass(M)}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(K,k,
M,H,p,F,Z,V,O){function I(z,C){let U="unknown";3===z?U=64===C?"f64":"f32":1===z?1===C?U="u1":2===C?U="u2":4===C?U="u4":8>=C?U="u8":16>=C?U="u16":32>=C&&(U="u32"):2===z&&(8>=C?U="s8":16>=C?U="s16":32>=C&&(U="s32"));return U}function N(z){let C=null;switch(z?z.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":C=Uint8Array;break;case "u16":C=Uint16Array;break;case "u32":C=Uint32Array;break;case "s8":C=Int8Array;break;case "s16":C=Int16Array;break;case "s32":C=Int32Array;break;case "f64":C=
Float64Array;break;default:C=Float32Array}return C}function x(z,C){return{x:C[0]*z.x+C[1]*z.y+C[2],y:C[3]*z.x+C[4]*z.y+C[5]}}function w(z,C){return z.get(C)?.values?.[0]}function L(z,C,U,ia=0,fa=Z.TIFF_TAGS,B=4){var G=8===B;const Q=G?g(new DataView(z,U,8),0,C):(new DataView(z,U,2)).getUint16(0,C),X=4+2*B;var ja=G?8:2;G=ja+Q*X;if(U+G>z.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:G};const ca=U+G+4<=z.byteLength?t(new DataView(z,U+G,8===B?8:4),0,C,8===B):null;U+=ja;ja=new Map;
let ba,oa,ea,wa=0,c=0;for(let P=0;P<Q;P++){var n=new DataView(z,U+X*P,X);ba=n.getUint16(0,C);ea=n.getUint16(2,C);oa=Z.getTagName(ba,fa);const S=[];2===B?(wa=n.getUint16(4,C),c=n.getUint16(6,C)):4===B?(wa=n.getUint32(4,C),c=n.getUint32(8,C)):8===B&&(wa=t(n,4,C,!0),c=t(n,12,C,!0),S.push(n.getUint32(12,C)),S.push(n.getUint32(16,C)));n={id:ba,type:ea,valueCount:wa,valueOffset:c,valueOffsets:S,values:null};u(z,C,n,ia,!1,B);ja.set(oa,n)}return{success:!0,ifd:ja,nextIFD:ca,requiredBufferSize:G}}function r(z,
C){if(1!==C&&2!==C&&4!==C)return z;const U=new Uint8Array(z),ia=8/C;z=new Uint8Array(z.byteLength*ia);let fa=0;const B=2**C-1;for(let G=0;G<U.length;G++){const Q=U[G];for(let X=0;X<ia;X++)z[fa++]=Q<<C*X>>>8-C&B}return z.buffer}function q(z,C,U){const ia=new M.JpegImage;ia.parse(z);ia.colorTransform=6===U?-1:0;z=ia.getData(ia.width,ia.height,1!==C);return new Uint8Array(z.buffer)}function b(z){z=(new O.Zlib(z)).getBytes();var C=new ArrayBuffer(z.length);C=new Uint8Array(C);C.set(z);return C}async function l(z,
C,U,ia,fa){var B=V.isPlatformLittleEndian===C,G=w(U,"BITSPERSAMPLE"),Q=w(U,"SAMPLESPERPIXEL");const X=w(U,"PHOTOMETRICINTERPRETATION");var ja=w(U,"SAMPLEFORMAT")??1;const ca=I(ja,G);var ba=w(U,"COMPRESSION")??1;ja=N(ca);if(34887===ba)return await H.load(),H.decode(z,{inputOffset:ia}).pixels[0];if(1===ba)Q=z.slice(ia,ia+fa),C=new Uint8Array(Q);else if(8===ba||32946===ba)C=new Uint8Array(z,ia,fa),C=b(C),Q=C.buffer;else if(6===ba)C=new Uint8Array(z,ia,fa),C=q(C,Q,X),Q=C.buffer;else if(7===ba){ba=U.get("JPEGTABLES").values;
U=ba.length-2;C=new Uint8Array(U+fa-2);for(let oa=0;oa<U;oa++)C[oa]=ba[oa];z=new Uint8Array(z,ia+2,fa-2);for(ia=0;ia<z.length;ia++)C[U+ia]=z[ia];C=q(C,Q,X);Q=C.buffer}else if(5===ba)C=p.decode(z,ia,fa,C),Q=C.buffer;else throw Error("tiff-decode: unsupport compression "+ba);Q=r(Q,G);if("u8"!==ca&&"s8"!==ca&&!B)switch(Q=new ArrayBuffer(C.length),B=new Uint8Array(Q),ca){case "u16":case "s16":for(G=0;G<C.length;G+=2)B[G]=C[G+1],B[G+1]=C[G];break;case "u32":case "s32":case "f32":for(G=0;G<C.length;G+=
4)B[G]=C[G+3],B[G+1]=C[G+2],B[G+2]=C[G+1],B[G+3]=C[G]}return new ja(Q)}async function A(z,C,U){const ia=U.get("TILEOFFSETS")?.values;if(void 0===ia)return null;const fa=U.get("TILEBYTECOUNTS")?.values,{width:B,height:G,pixelType:Q,tileWidth:X,tileHeight:ja}=a([U]);var ca=e(U,C);const ba=w(U,"SAMPLESPERPIXEL")||C.planes;var oa=B*G,ea=w(U,"BITSPERSAMPLE"),wa=34887===(w(U,"COMPRESSION")??1),c=N(Q);const n=[];for(var P=0;P<ba;P++)n.push(new c(oa));let S,ma,ka,ra,pa,ua,va,xa;oa=Math.ceil(B/X);if(0===ea%
8)if(wa&&ca&&1<ba)for(ca=Math.round(ia.length/ba),ea=0;ea<ca;ea++){var za=Math.floor(ea/oa)*ja;ka=ea%oa*X;c=za*B+ka;for(wa=0;wa<ba;wa++)if(P=ea*ba+wa,0!==fa[P])for(P=await l(z,C.littleEndian,U,ia[P],fa[P]),pa=0,ra=c,va=Math.min(X,B-ka),ua=Math.min(ja,G-za),xa=n[wa],S=0;S<ua;S++)for(ra=c+S*B,pa=S*X,ma=0;ma<va;ma++,ra++,pa++)xa[ra]=P[pa]}else for(ea=0;ea<ia.length;ea++)if(0!==fa[ea])for(za=Math.floor(ea/oa)*ja,ka=ea%oa*X,c=za*B+ka,P=await l(z,C.littleEndian,U,ia[ea],fa[ea]),pa=0,ra=c,va=Math.min(X,
B-ka),ua=Math.min(ja,G-za),za=0;za<ba;za++)if(xa=n[za],ca||wa)for(S=0;S<ua;S++)for(ra=c+S*B,pa=X*ja*za+S*X,ma=0;ma<va;ma++,ra++,pa++)xa[ra]=P[pa];else for(S=0;S<ua;S++)for(ra=c+S*B,pa=S*X*ba+za,ma=0;ma<va;ma++,ra++,pa+=ba)xa[ra]=P[pa];return{width:B,height:G,pixelType:Q,pixels:n}}function u(z,C,U,ia=0,fa=!1,B=4){if(U.values)return!0;var G=U.type,Q=U.valueCount,X=U.valueOffset;let ja=[];var ca=D[G],ba=8*ca,oa=Q*ca,ea=Q*D[G]*8,wa=8===B?64:32;B=U.valueOffsets;if(ea>wa&&oa>(fa?z.byteLength:z?z.byteLength-
X+ia:0))return U.offlineOffsetSize=[X,oa],U.values=null,!1;if(ea<=wa)if(C||(32>=wa?X>>>=32-ea:(z=B?.length?B[0]:X>>>0,C=B?.length?B[1]:Math.round((X-z)/4294967296),32>=ea?(X=z>>>32-ea,B[0]=X):(X=z*2**(32-ea)+(C>>>32-ea),B[0]=z,B[1]=C>>>32-ea))),1===Q&&ba===wa)ja=[X];else if(64===wa)for(z=B?.length?B[0]:X>>>0,X=B?.length?B[1]:Math.round((X-z)/4294967296),C=z,ca=32,z=1;z<=Q;z++)oa=32-ba*z%32,ca<ba?(oa=C<<oa>>>32-ca,ea=X<<32-ca>>>32-ca,C=X,ja.push(oa+ea*2**(ba-ca)),ca-=32-(ba-ca)):(ja.push(C<<oa>>>32-
ba),ca-=ba),0===ca&&(ca=32,C=X);else for(z=1;z<=Q;z++)ja.push(X<<32-ba*z>>>32-ba);else for(X-=ia,fa&&(X=0),Q=X;Q<X+oa;Q+=ca){switch(G){case 1:ba=(new DataView(z,Q,1)).getUint8(0);break;case 2:ba=(new DataView(z,Q,1)).getUint8(0);break;case 3:ba=(new DataView(z,Q,2)).getUint16(0,C);break;case 4:case 13:ba=(new DataView(z,Q,4)).getUint32(0,C);break;case 5:ba=(new DataView(z,Q,4)).getUint32(0,C)/(new DataView(z,Q+4,4)).getUint32(0,C);break;case 6:ba=(new DataView(z,Q,1)).getInt8(0);break;case 7:ba=(new DataView(z,
Q,1)).getUint8(0);break;case 8:ba=(new DataView(z,Q,2)).getInt16(0,C);break;case 9:ba=(new DataView(z,Q,4)).getInt32(0,C);break;case 10:ba=(new DataView(z,Q,4)).getInt32(0,C)/(new DataView(z,Q+4,4)).getInt32(0,C);break;case 11:ba=(new DataView(z,Q,4)).getFloat32(0,C);break;case 12:ba=(new DataView(z,Q,8)).getFloat64(0,C);break;case 16:case 18:ba=g(new DataView(z,Q,8),0,C);break;case 17:B=new DataView(z,Q,8);ea=(ba=C)?B.getInt32(0,ba):B.getUint32(0,ba);B=ba?B.getUint32(4,ba):B.getInt32(4,ba);wa=0<=
(ba?ea:B)?1:-1;ba?ea*=wa:B*=wa;ba=wa*(ba?4294967296*B+ea:4294967296*ea+B);break;default:ba=null}ja.push(ba)}if(2===G){G="";X=ja;ja=[];for(z=0;z<X.length;z++)0===X[z]&&""!==G?(ja.push(G),G=""):G+=String.fromCharCode(X[z]);""===G&&0!==ja.length||ja.push(G)}U.values=ja;return!0}function a(z){var C=z[0];const U=w(C,"TILEWIDTH"),ia=w(C,"TILELENGTH"),fa=w(C,"IMAGEWIDTH"),B=w(C,"IMAGELENGTH");var G=w(C,"BITSPERSAMPLE");const Q=w(C,"SAMPLESPERPIXEL");var X=w(C,"SAMPLEFORMAT")??1;const ja=I(X,G),ca=e(C);var ba=
C.get("GDAL_NODATA")?.values;let oa=null;ba?.length&&(oa=ba.map(za=>parseFloat(za)),oa.some(za=>isNaN(za))&&(oa=null));var ea=w(C,"COMPRESSION")??1;switch(ea){case 1:ba="NONE";break;case 2:case 3:case 4:case 32771:ba="CCITT";break;case 5:ba="LZW";break;case 6:case 7:ba="JPEG";break;case 32773:ba="PACKBITS";break;case 8:case 32946:ba="DEFLATE";break;case 34712:ba="JPEG2000";break;case 34887:ba="LERC";break;default:ba=String(ea)}let wa=!0,c="";J.has(ea)||(wa=!1,c+="unsupported tag compression "+ea);
3<X&&(wa=!1,c+="unsupported tag sampleFormat "+X);1!==G&&2!==G&&4!==G&&0!==G%8&&(wa=!1,c+="unsupported tag bitsPerSample "+G);G=C.get("GEOASCIIPARAMS")?.values?.[0];if(G){var n=(n=G.split("|").find(za=>za.includes("ESRI PE String \x3d ")))?n.replace("ESRI PE String \x3d ",""):"";n=n.startsWith("COMPD_CS")||n.startsWith("PROJCS")||n.startsWith("GEOGCS")?{wkid:null,wkt:n}:null}X=C.get("GEOTIEPOINTS")?.values;G=C.get("GEOPIXELSCALE")?.values;ea=C.get("GEOTRANSMATRIX")?.values;var P=C.has("GEOKEYDIRECTORY")?
C.get("GEOKEYDIRECTORY").data:null,S=!1;C=!1;if(P){S=2===w(P,"GTRasterTypeGeoKey");var ma=w(P,"GTModelTypeGeoKey");2===ma?(P=w(P,"GeographicTypeGeoKey"),1024<=P&&32766>=P&&(n={wkid:P}),n||32767!==P||(C=!0,n={wkid:4326})):1===ma&&(P=w(P,"ProjectedCSTypeGeoKey"),1024<=P&&32766>=P&&(n={wkid:P}))}let ka;G&&X&&6<=X.length?(ka=[G[0],0,X[3]-X[0]*G[0],0,-Math.abs(G[1]),X[4]-X[1]*G[1]],S&&(ka[2]-=.5*ka[0]+.5*ka[1],ka[5]-=.5*ka[3]+.5*ka[4])):ea&&16===ea.length&&(ka=S?[ea[0],ea[1],ea[3]-.5*ea[0],ea[4],ea[5],
ea[7]-.5*ea[5]]:[ea[0],ea[1],ea[3],ea[4],ea[5],ea[7]]);if(ka){X=[{x:0,y:B},{x:0,y:0},{x:fa,y:B},{x:fa,y:0}];P=S=Number.POSITIVE_INFINITY;let za=ma=Number.NEGATIVE_INFINITY;for(let Aa=0;Aa<X.length;Aa++)ea=x(X[Aa],ka),S=ea.x>S?S:ea.x,ma=ea.x<ma?ma:ea.x,P=ea.y>P?P:ea.y,za=ea.y<za?za:ea.y;X={xmin:S,xmax:ma,ymin:P,ymax:za,spatialReference:n}}else X={xmin:-.5,ymin:.5-B,xmax:fa-.5,ymax:.5,spatialReference:n};C&&(400<X.xmax-X.xmin||361<Math.max(Math.abs(X.xmin),Math.abs(X.xmax)))&&(n=null,X.spatialReference=
null);n=f(z);let ra;let pa,ua;if(0<n.length){pa=Math.round(Math.log(fa/w(n[0],"IMAGEWIDTH"))/Math.LN2);var va=n[n.length-1];ua=Math.round(Math.log(fa/w(va,"IMAGEWIDTH"))/Math.LN2);ra=w(va,"TILEWIDTH");va=w(va,"TILELENGTH")}ra=null!=ua&&0<ua?ra||U:null;va=null!=ua&&0<ua?va||ia:null;let xa;U&&(xa=[{maxCol:Math.ceil(fa/U)-1,maxRow:Math.ceil(B/ia)-1,minRow:0,minCol:0}],n.forEach(za=>{xa.push({maxCol:Math.ceil(w(za,"IMAGEWIDTH")/w(za,"TILEWIDTH"))-1,maxRow:Math.ceil(w(za,"IMAGELENGTH")/w(za,"TILELENGTH"))-
1,minRow:0,minCol:0})}));ea=z[0].get("GDAL_METADATA")?.values?.[0];ea=R(ea);c+=" "+y({width:fa,height:B,tileWidth:U,tileHeight:ia,planes:Q,ifds:z});z=d(z).length===n.length+1;return{width:fa,height:B,tileWidth:U,tileHeight:ia,planes:Q,isBSQ:ca,pixelType:ja,compression:ba,noData:oa,hasMaskBand:z,isSupported:wa,message:c,extent:X,isPseudoGeographic:C,affine:G?null:ka,firstPyramidLevel:pa,maximumPyramidLevel:ua,pyramidBlockWidth:ra,pyramidBlockHeight:va,tileBoundary:xa,metadata:ea}}function e(z,C){return(z=
z.get("PLANARCONFIGURATION")?.values)?2===z[0]:C?C.isBSQ:!1}function f(z){return z.filter(C=>1===w(C,"NEWSUBFILETYPE"))}function d(z){return z.filter(C=>{const U=4===((w(C,"NEWSUBFILETYPE")??0)&4);C=4===w(C,"PHOTOMETRICINTERPRETATION");return U&&C})}function h(z){const {littleEndian:C,isBigTiff:U,firstIFDPos:ia}=m(z);var fa=ia;const B=[];do if(fa=v(z,C,fa,0,Z.TIFF_TAGS,U?8:4),fa.success)B.push(fa.ifd),fa=fa.nextIFD;else break;while(0<fa);z=a(B);fa=f(B);const G=d(B);return{...z,littleEndian:C,isBigTiff:U,
ifds:B,pyramidIFDs:fa,maskIFDs:G}}function g(z,C,U){const ia=z.getUint32(C,U);z=z.getUint32(C+4,U);return U?4294967296*z+ia:4294967296*ia+z}function t(z,C,U,ia){return ia?g(z,C,U):z.getUint32(C,U)}function m(z){var C=new DataView(z,0,16),U=C.getUint16(0,!1);z=null;if(18761===U)z=!0;else if(19789===U)z=!1;else throw Error("unexpected endianess byte");var ia=C.getUint16(2,z);if(42!==ia&&43!==ia)throw Error("unexpected tiff identifier");U=4;if(ia=43===ia){const fa=C.getUint16(U,z);U+=2;if(8!==fa)throw Error("unsupported bigtiff version");
if(0!==C.getUint16(U,z))throw Error("unsupported bigtiff version");U+=2}C=t(C,U,z,ia);return{littleEndian:z,isBigTiff:ia,firstIFDPos:C}}function v(z,C,U,ia=0,fa=Z.TIFF_TAGS,B=4){U=L(z,C,U,ia,fa,B);let G;const Q=U.ifd;Q&&(Z.ifdTags.forEach((X,ja)=>{Q.has(ja)&&(G=Q.get(ja),G.data=L(z,C,G.valueOffset-ia,ia,X).ifd)}),Q.has("GEOKEYDIRECTORY")&&(G=Q.get("GEOKEYDIRECTORY"),(fa=G.values)&&4<fa.length&&(fa=fa[0]+"."+fa[1]+"."+fa[2],G.data=L(z,C,G.valueOffset+6-ia,ia,Z.GEO_KEYS,2).ifd,G.data&&G.data.set("GEOTIFFVersion",
{id:0,type:2,valueCount:1,valueOffset:null,values:[fa]}))),Q.has("XMP")&&(G=Q.get("XMP"),fa=G.values,"number"===typeof fa[0]&&7===G.type&&(G.values=[k.bytesToUTF8(new Uint8Array(fa))])));return U}function y(z){const {width:C,height:U,tileHeight:ia,tileWidth:fa}=z,B=z.planes,G=fa?fa*ia:C*U;z=w(z.ifds[0],"BITSPERSAMPLE");let Q="";G*B>2**30/(8<z?z/8:1)&&(Q=fa?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return Q}const D=[0,1,1,2,4,
8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],J=new Set([1,5,6,7,8,34712,34887]),E=(z,C,U)=>{if(!(z&&0<z.length&&C&&U))return null;let ia,fa,B;const G=z[0].length,Q=z.length,X=new Uint8Array(G);for(let ca=0;ca<Q;ca++)if(ia=z[ca],fa=C[ca],B=U[ca],0===ca)for(var ja=0;ja<G;ja++)X[ja]=ia[ja]<fa||ia[ja]>B?0:1;else for(ja=0;ja<G;ja++)X[ja]&&(X[ja]=ia[ja]<fa||ia[ja]>B?0:1);return X},R=z=>{if(!z)return null;var C=z.match(/<Item(.*?)Item>/gi);if(!C||0===C.length)return null;z=new Map;var U;for(var ia=0;ia<C.length;ia++){var fa=
C[ia];var B=fa.slice(6,fa.indexOf("\x3e"));var G=fa.indexOf("sample\x3d");-1<G&&(U=fa.slice(G+8,fa.indexOf('"',G+8)));G=fa.indexOf("name\x3d");-1<G&&(B=fa.slice(G+6,fa.indexOf('"',G+6)));B&&(fa=fa.slice(fa.indexOf("\x3e")+1,fa.indexOf("\x3c/Item\x3e")).trim(),null!=U?z.has(B)?z.get(B)[U]=fa:z.set(B,[fa]):z.set(B,fa));U=null}C=z.get("STATISTICS_MINIMUM");B=z.get("STATISTICS_MAXIMUM");ia=z.get("STATISTICS_MEAN");fa=z.get("STATISTICS_STDDEV");U=null;if(C&&B)for(U=[],G=0;G<C.length;G++)U.push({min:parseFloat(C[G]),
max:parseFloat(B[G]),avg:ia&&parseFloat(ia[G]),stddev:fa&&parseFloat(fa[G])});B=z.get("BandName");ia=z.get("WavelengthMin");fa=z.get("WavelengthMax");C=null;if(B)for(C=[],G=0;G<B.length;G++)C.push({BandName:B[G],WavelengthMin:ia&&parseFloat(ia[G]),WavelengthMax:fa&&parseFloat(fa[G])});B=z.get("DataType");return{statistics:U,bandProperties:C,dataType:B,rawMetadata:z}};K.decode=async function(z,C={}){var U=C.pyramidLevel||0,ia=C.headerInfo||h(z);const {ifds:fa,noData:B}=ia;if(0===fa.length)throw Error("no valid image file directory");
var G=y(ia);if(G)throw G;G=null;var Q=-1===U?fa[fa.length-1]:fa[U];C=B??C.noDataValue;if(ia.tileWidth)G=await A(z,ia,Q);else{{const ua=V.isPlatformLittleEndian===ia.littleEndian,va=Q.get("STRIPOFFSETS")?.values;if(void 0===va)z=null;else{var {width:X,height:ja,pixelType:ca}=a([Q]);U=w(Q,"SAMPLESPERPIXEL")||ia.planes;var ba=w(Q,"PHOTOMETRICINTERPRETATION");G=X*ja;var oa=w(Q,"BITSPERSAMPLE"),ea=N(ca),wa=new ea(G*U),c=Q.get("STRIPBYTECOUNTS")?.values,n=w(Q,"ROWSPERSTRIP"),P=w(Q,"COMPRESSION")??1;var S=
n;if(0===oa%8)for(Q=0;Q<va.length;Q++){var ma=Q*n*X*U;S=(Q+1)*n>ja?ja-Q*n:n;if("u8"===ca||"s8"===ca||ua)if(8===P||32946===P){var ka=new Uint8Array(z,va[Q],c[Q]);ka=b(ka);var ra=ka.buffer}else 6===P?(ka=new Uint8Array(z,va[Q],c[Q]),ka=q(ka,U,ba),ra=ka.buffer):5===P?(ka=p.decode(z,va[Q],c[Q],ia.littleEndian),ra=ka.buffer):(c[Q]!==S*X*U*oa/8&&console.log("strip byte counts is different than expected"),ra=z.slice(va[Q],va[Q]+c[Q]));else{if(6===P||8===P||32946===P){ka=new Uint8Array(z,va[Q],c[Q]);var pa=
b(ka);ra=pa.buffer}else c[Q]!==S*X*U*oa/8&&console.log("strip byte counts is different than expected"),ra=new ArrayBuffer(c[Q]),ka=new Uint8Array(z,va[Q],c[Q]),pa=new Uint8Array(ra);switch(ca){case "u16":case "s16":for(S=0;S<ka.length;S+=2)pa[S]=ka[S+1],pa[S+1]=ka[S];break;case "u32":case "s32":case "f32":for(S=0;S<ka.length;S+=4)pa[S]=ka[S+3],pa[S+1]=ka[S+2],pa[S+2]=ka[S+1],pa[S+3]=ka[S]}}ra=r(ra,oa);S=new ea(ra);wa.set(S,ma)}ba=[];if(1===U)ba.push(wa);else for(Q=0;Q<U;Q++){ia=new ea(G);for(z=0;z<
G;z++)ia[z]=wa[z*U+Q];ba.push(ia)}z={width:X,height:ja,pixelType:ca,pixels:ba}}}G=await z}if(!G)return G;null!=C&&F.convertNoDataToMask(G,C);return G};K.decodeTileOrStrip=async function(z,C){const {headerInfo:U,ifd:ia,offsets:fa,sizes:B}=C;var G=[];for(var Q=0;Q<fa.length;Q++){var X=await l(z,U.littleEndian,ia,fa[Q],B[Q]||z.byteLength);G.push(X)}var ja=e(ia,U);z=w(ia,"BITSPERSAMPLE");Q=w(ia,"SAMPLEFORMAT")??1;Q=I(Q,z);var ca=w(ia,"SAMPLESPERPIXEL")||U.planes;const ba=N(Q);X=w(ia,"TILEWIDTH");const oa=
w(ia,"TILELENGTH");var ea=w(ia,"COMPRESSION")??1;const wa=X*oa;z=[];let c=G[0];const n=34887===ea;for(let S=0;S<ca;S++){ea=new ba(wa);if(ja&&n){if(c=G[S],c.length)for(var P=0;P<wa;P++)ea[P]=c[S][P+S]}else if(c.length)if(ja||n&&!ja)ea=c.slice(wa*S,wa*(S+1));else for(P=0;P<wa;P++)ea[P]=c[P*ca+S];z.push(ea)}G=U.noData?U.noData[0]:C.noDataValue;ja=(ca=U.metadata?U.metadata.statistics:null)?ca.map(S=>S.min):null;ca=ca?ca.map(S=>S.max):null;Q={pixelType:Q,width:X,height:oa,pixels:z,noDataValue:G};null!=
G?F.convertNoDataToMask(Q,G):ja&&ca&&C.applyMinMaxConstraint&&(Q.mask=E(z,ja,ca));return Q};K.getImageInfo=a;K.getMaskIFDs=d;K.getPyramidIFDs=f;K.isBSQConfig=e;K.parseFieldValues=u;K.parseHeader=h;K.parseIFD=v;K.parseSignature=m;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(K){K.bytesToUTF8=function(k,M){let H=0,p="",F=0,Z=0;const V=k.length;for(;H<V;)if(Z=k[H++],F=Z>>4,8>F?F=1:15===F?(F=
4,Z=(Z&7)<<18|(k[H++]&63)<<12|(k[H++]&63)<<6|k[H++]&63):14===F?(F=3,Z=(Z&15)<<12|(k[H++]&63)<<6|k[H++]&63):(F=2,Z=(Z&31)<<6|k[H++]&63),0!==Z||M)p+=String.fromCharCode(Z);return p};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const K=(()=>{const p=[];p[254]="NEWSUBFILETYPE";p[255]="SUBFILETYPE";p[256]="IMAGEWIDTH";p[257]="IMAGELENGTH";p[258]="BITSPERSAMPLE";p[259]="COMPRESSION";p[262]="PHOTOMETRICINTERPRETATION";
p[263]="THRESHHOLDING";p[264]="CELLWIDTH";p[265]="CELLLENGTH";p[266]="FILLORDER";p[269]="DOCUMENTNAME";p[270]="IMAGEDESCRIPTION";p[271]="MAKE";p[272]="MODEL";p[273]="STRIPOFFSETS";p[274]="ORIENTATION";p[277]="SAMPLESPERPIXEL";p[278]="ROWSPERSTRIP";p[279]="STRIPBYTECOUNTS";p[280]="MINSAMPLEVALUE";p[281]="MAXSAMPLEVALUE";p[282]="XRESOLUTION";p[283]="YRESOLUTION";p[284]="PLANARCONFIGURATION";p[285]="PAGENAME";p[286]="XPOSITION";p[287]="YPOSITION";p[288]="FREEOFFSETS";p[289]="FREEBYTECOUNTS";p[290]="GRAYRESPONSEUNIT";
p[291]="GRAYRESPONSECURVE";p[292]="T4OPTIONS";p[293]="T6OPTIONS";p[296]="RESOLUTIONUNIT";p[297]="PAGENUMBER";p[300]="COLORRESPONSEUNIT";p[301]="TRANSFERFUNCTION";p[305]="SOFTWARE";p[306]="DATETIME";p[315]="ARTIST";p[316]="HOSTCOMPUTER";p[317]="PREDICTOR";p[318]="WHITEPOINT";p[319]="PRIMARYCHROMATICITIES";p[320]="COLORMAP";p[321]="HALFTONEHINTS";p[322]="TILEWIDTH";p[323]="TILELENGTH";p[324]="TILEOFFSETS";p[325]="TILEBYTECOUNTS";p[326]="BADFAXLINES";p[327]="CLEANFAXDATA";p[328]="CONSECUTIVEBADFAXLINES";
p[330]="SUBIFD";p[332]="INKSET";p[333]="INKNAMES";p[334]="NUMBEROFINKS";p[336]="DOTRANGE";p[337]="TARGETPRINTER";p[338]="EXTRASAMPLES";p[339]="SAMPLEFORMAT";p[340]="SMINSAMPLEVALUE";p[341]="SMAXSAMPLEVALUE";p[342]="TRANSFERRANGE";p[347]="JPEGTABLES";p[512]="JPEGPROC";p[513]="JPEGIFOFFSET";p[514]="JPEGIFBYTECOUNT";p[515]="JPEGRESTARTINTERVAL";p[517]="JPEGLOSSLESSPREDICTORS";p[518]="JPEGPOINTTRANSFORM";p[519]="JPEGQTABLES";p[520]="JPEGDCTABLES";p[521]="JPEGACTABLES";p[529]="YCBCRCOEFFICIENTS";p[530]=
"YCBCRSUBSAMPLING";p[531]="YCBCRPOSITIONING";p[532]="REFERENCEBLACKWHITE";p[700]="XMP";p[33550]="GEOPIXELSCALE";p[33922]="GEOTIEPOINTS";p[33432]="COPYRIGHT";p[42112]="GDAL_METADATA";p[42113]="GDAL_NODATA";p[50844]="RPCCOEFFICIENT";p[34264]="GEOTRANSMATRIX";p[34735]="GEOKEYDIRECTORY";p[34736]="GEODOUBLEPARAMS";p[34737]="GEOASCIIPARAMS";p[34665]="EXIFIFD";p[34853]="GPSIFD";p[40965]="INTEROPERABILITYIFD";return p})(),k=(()=>{const p=K.slice();p[36864]="ExifVersion";p[40960]="FlashpixVersion";p[40961]=
"ColorSpace";p[42240]="Gamma";p[37121]="ComponentsConfiguration";p[37122]="CompressedBitsPerPixel";p[40962]="PixelXDimension";p[40963]="PixelYDimension";p[37500]="MakerNote";p[37510]="UserComment";p[40964]="RelatedSoundFile";p[36867]="DateTimeOriginal";p[36868]="DateTimeDigitized";p[36880]="OffsetTime";p[36881]="OffsetTimeOriginal";p[36882]="OffsetTimeDigitized";p[37520]="SubSecTime";p[37521]="SubSecTimeOriginal";p[37522]="SubSecTimeDigitized";p[37888]="Temperature";p[37889]="Humidity";p[37890]="Pressure";
p[37891]="WaterDepth";p[37892]="Acceleration";p[37893]="CameraElevationAngle";p[42016]="ImageUniqueID";p[42032]="CameraOwnerName";p[42033]="BodySerialNumber";p[42034]="LensSpecification";p[42035]="LensMake";p[42036]="LensModel";p[42037]="LensSerialNumber";p[33434]="ExposureTime";p[33437]="FNumber";p[34850]="ExposureProgram";p[34852]="SpectralSensitivity";p[34855]="PhotographicSensitivity";p[34856]="OECF";p[34864]="SensitivityType";p[34865]="StandardOutputSensitivity";p[34866]="RecommendedExposureIndex";
p[34867]="ISOSpeed";p[34868]="ISOSpeedLatitudeyyy";p[34869]="ISOSpeedLatitudezzz";p[37377]="ShutterSpeedValue";p[37378]="ApertureValue";p[37379]="BrightnessValue";p[37380]="ExposureBiasValue";p[37381]="MaxApertureValue";p[37382]="SubjectDistance";p[37383]="MeteringMode";p[37384]="LightSource";p[37385]="Flash";p[37386]="FocalLength";p[37396]="SubjectArea";p[41483]="FlashEnergy";p[41484]="SpatialFrequencyResponse";p[41486]="FocalPlaneXResolution";p[41487]="FocalPlaneYResolution";p[41488]="FocalPlaneResolutionUnit";
p[41492]="SubjectLocation";p[41493]="ExposureIndex";p[41495]="SensingMethod";p[41728]="FileSource";p[41729]="SceneType";p[41730]="CFAPattern";p[41985]="CustomRendered";p[41986]="ExposureMode";p[41987]="WhiteBalance";p[41988]="DigitalZoomRatio";p[41989]="FocalLengthIn35mmFilm";p[41990]="SceneCaptureType";p[41991]="GainControl";p[41992]="Contrast";p[41993]="Saturation";p[41994]="Sharpness";p[41995]="DeviceSettingDescription";p[41996]="SubjectDistanceRange";return p})(),M=(()=>{const p=[];p[1024]="GTModelTypeGeoKey";
p[1025]="GTRasterTypeGeoKey";p[1026]="GTCitationGeoKey";p[2048]="GeographicTypeGeoKey";p[2049]="GeogCitationGeoKey";p[2050]="GeogGeodeticDatumGeoKey";p[2051]="GeogPrimeMeridianGeoKey";p[2052]="GeogLinearUnitsGeoKey";p[2053]="GeogLinearUnitSizeGeoKey";p[2054]="GeogAngularUnitsGeoKey";p[2055]="GeogAngularUnitSizeGeoKey";p[2056]="GeogEllipsoidGeoKey";p[2057]="GeogSemiMajorAxisGeoKey";p[2058]="GeogSemiMinorAxisGeoKey";p[2059]="GeogInvFlatteningGeoKey";p[2061]="GeogPrimeMeridianLongGeoKey";p[2060]="GeogAzimuthUnitsGeoKey";
p[3072]="ProjectedCSTypeGeoKey";p[3073]="PCSCitationGeoKey";p[3074]="ProjectionGeoKey";p[3075]="ProjCoordTransGeoKey";p[3076]="ProjLinearUnitsGeoKey";p[3077]="ProjLinearUnitSizeGeoKey";p[3078]="ProjStdParallel1GeoKey";p[3079]="ProjStdParallel2GeoKey";p[3080]="ProjNatOriginLongGeoKey";p[3081]="ProjNatOriginLatGeoKey";p[3082]="ProjFalseEastingGeoKey";p[3083]="ProjFalseNorthingGeoKey";p[3084]="ProjFalseOriginLongGeoKey";p[3085]="ProjFalseOriginLatGeoKey";p[3086]="ProjFalseOriginEastingGeoKey";p[3087]=
"ProjFalseOriginNorthingGeoKey";p[3088]="ProjCenterLongGeoKey";p[3090]="ProjCenterEastingGeoKey";p[3091]="ProjCenterNorthingGeoKey";p[3092]="ProjScaleAtNatOriginGeoKey";p[3093]="ProjScaleAtCenterGeoKey";p[3094]="ProjAzimuthAngleGeoKey";p[3095]="ProjStraightVertPoleLongGeoKey";p[4096]="VerticalCSTypeGeoKey";p[4097]="VerticalCitationGeoKey";p[4098]="VerticalDatumGeoKey";p[4099]="VerticalUnitsGeoKey";return p})(),H=new Map;H.set("EXIFIFD",k);H.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:K,ifdTags:H,GEO_KEYS:M,getTagName:(p,F)=>{F=(F||K)[p];void 0===F&&(F="unknown"+String(p));return F}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(K){const k=new ArrayBuffer(4),M=new Uint8Array(k);(new Uint32Array(k))[0]=1;K.isPlatformLittleEndian=1===M[0];Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils"],
function(K,k,M,H){function p(a){return k.isSome(a)&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function F(a,e,f,d,h){const g=a.length;h=M.createEmptyBand(h,g);if(e)for(let t=0;t<g;t++)e[t]&&(h[t]=f[a[t]-d]);else for(e=0;e<g;e++)h[e]=f[a[e]-d];return h}function Z(a,e,f,d){const h=null!=f&&2<=f.length?new Set(f):null;f=1===f?.length?f[0]:null;const g=!!e?.length;for(let t=0;t<a.length;t++)if(d[t]){const m=a[t];if(g){let v=!1;for(let y=0;y<e.length;y+=2)if(m>=e[y]&&
m<=e[y+1]){v=!0;break}v||(d[t]=0)}d[t]&&(m===f||h?.has(m))&&(d[t]=0)}}function V(a,e){const f=a[0].length;for(let d=0;d<f;d++)if(e[d]){let h=!1;for(let g=0;g<a.length;g++)if(a[g][d]){h=!0;break}h||(e[d]=0)}}function O(a,e){const f=a[0].length;for(let d=0;d<f;d++)if(e[d]){let h=!1;for(let g=0;g<a.length;g++)if(0===a[g][d]){h=!0;break}h&&(e[d]=0)}}function I(a,e,f,d,h,g,t,m){return{xmin:h<=f*a?0:h<f*a+a?h-f*a:a,ymin:g<=d*e?0:g<d*e+e?g-d*e:e,xmax:h+t<=f*a?0:h+t<f*a+a?h+t-f*a:a,ymax:g+m<=d*e?0:g+m<d*
e+e?g+m-d*e:e}}function N(a,e,f,d,h,g){const {width:t,height:m}=f.block,{x:v,y}=f.offset,{width:D,height:J}=f.mosaic;f=I(t,m,d,h,v,y,D,J);let E=0;var R=0;if(g){var z=g.hasGCSSShiftTransform?360:g.halfWorldWidth??0,C=t*g.resolutionX;const U=g.startX+d*C;U<z&&U+C>z?R=g.rightPadding:U>=z&&(E=g.leftMargin-g.rightPadding,R=0)}f.xmax-=R;if("number"===typeof e)for(g=f.ymin;g<f.ymax;g++)for(R=(h*m+g-y)*D+(d*t-v)+E,z=f.xmin;z<f.xmax;z++)a[R+z]=e;else for(g=f.ymin;g<f.ymax;g++)for(R=(h*m+g-y)*D+(d*t-v)+E,z=
g*t,C=f.xmin;C<f.xmax;C++)a[R+C]=e[z+C]}function x(a,e,f={}){const {clipOffset:d,clipSize:h,alignmentInfo:g,blockWidths:t}=f;if(t)return w(a,e,{blockWidths:t});var m=a.find(fa=>p(fa));if(k.isNone(m))return null;f=h?h.width:e.width;const v=h?h.height:e.height;var y=m.width,D=m.height;const J=e.width/y,E=e.height/D;e={offset:d||{x:0,y:0},mosaic:h||e,block:{width:y,height:D}};y=m.pixelType;D=M.getPixelArrayConstructor(y);var R=m.pixels.length;m=[];for(var z=0;z<R;z++){var C=new D(f*v);for(let fa=0;fa<
E;fa++)for(let B=0;B<J;B++){var U=a[fa*J+B];p(U)&&(U=U.pixels[z],N(C,U,e,B,fa,g))}m.push(C)}let ia;if(a.some(fa=>k.isNone(fa)||k.isSome(fa.mask)&&0<fa.mask.length))for(ia=new Uint8Array(f*v),D=0;D<E;D++)for(R=0;R<J;R++)C=a[D*J+R],z=k.isSome(C)?C.mask:null,k.isSome(z)?N(ia,z,e,R,D,g):C?N(ia,1,e,R,D,g):N(ia,0,e,R,D,g);a=new M({width:f,height:v,pixels:m,pixelType:y,mask:ia});a.updateStatistics();return a}function w(a,e,f){const d=a.find(R=>k.isSome(R));if(k.isNone(d))return null;var h=a.some(R=>k.isSome(R)?
!!R.mask:!0);const {width:g,height:t}=e;e=h?new Uint8Array(g*t):null;({blockWidths:f}=f);const m=[],v=d.getPlaneCount(),y=M.getPixelArrayConstructor(d.pixelType);if(h)for(let R=0,z=0;R<a.length;z+=f[R],R++)if(h=a[R],p(h)){var D=k.unwrap(h.mask);for(var J=0;J<t;J++)for(var E=0;E<f[R];E++)e[J*g+E+z]=null==D?255:D[J*h.width+E]}for(h=0;h<v;h++){D=new y(g*t);for(let R=0,z=0;R<a.length;z+=f[R],R++)if(J=a[R],p(J)&&(E=J.pixels[h],null!=E))for(let C=0;C<t;C++)for(let U=0;U<f[R];U++)D[C*g+U+z]=E[C*J.width+
U];m.push(D)}a=new M({width:g,height:t,mask:e,pixels:m,pixelType:d.pixelType});a.updateStatistics();return a}function L(a){if(!p(a))return null;const e=a.clone(),{width:f,height:d,pixels:h}=a;var g=h[0];const t=e.pixels[0];a=k.unwrap(a.mask);for(let y=2;y<d-1;y++){const D=new Map;for(var m=y-2;m<y+2;m++)for(var v=0;4>v;v++){const J=m*f+v;b(D,g[J],a?a[J]:1)}t[y*f]=r(D);t[y*f+1]=t[y*f+2]=t[y*f];for(m=3;m<f-1;m++)v=(y-2)*f+m+1,b(D,g[v],a?a[v]:1),v=(y-1)*f+m+1,b(D,g[v],a?a[v]:1),v=y*f+m+1,b(D,g[v],a?
a[v]:1),v=(y+1)*f+m+1,b(D,g[v],a?a[v]:1),v=(y-2)*f+m-3,q(D,g[v],a?a[v]:1),v=(y-1)*f+m-3,q(D,g[v],a?a[v]:1),v=y*f+m-3,q(D,g[v],a?a[v]:1),v=(y+1)*f+m-3,q(D,g[v],a?a[v]:1),t[y*f+m]=r(D);t[y*f+m+1]=t[y*f+m]}for(g=0;g<f;g++)t[g]=t[f+g]=t[2*f+g],t[(d-1)*f+g]=t[(d-2)*f+g];e.updateStatistics();return e}function r(a){if(0===a.size)return 0;let e=0,f=-1,d=0;const h=a.keys();let g=h.next();for(;!g.done;)d=a.get(g.value),d>e&&(f=g.value,e=d),g=h.next();return f}function q(a,e,f){0!==f&&(f=a.get(e),1===f?a.delete(e):
a.set(e,f-1))}function b(a,e,f){0!==f&&a.set(e,a.has(e)?a.get(e)+1:1)}function l(a,e,f){let {x:d,y:h}=e;const {width:g,height:t}=f;if(0===d&&0===h&&t===a.height&&g===a.width)return a;const {width:m,height:v}=a;e=Math.max(0,h);const y=Math.max(0,d),D=Math.min(d+g,m),J=Math.min(h+t,v);if(0>D||0>J||!p(a))return null;d=Math.max(0,-d);h=Math.max(0,-h);var {pixels:E}=a,R=g*t,z=E.length;const C=[];for(var U=0;U<z;U++){var ia=E[U],fa=M.createEmptyBand(a.pixelType,R);for(let B=e;B<J;B++){const G=B*m;let Q=
(B+h-e)*g+d;for(let X=y;X<D;X++)fa[Q++]=ia[G+X]}C.push(fa)}E=new Uint8Array(R);R=k.unwrap(a.mask);for(z=e;z<J;z++)for(U=z*m,ia=(z+h-e)*g+d,fa=y;fa<D;fa++)E[ia++]=R?R[U+fa]:1;a=new M({width:f.width,height:f.height,pixelType:a.pixelType,pixels:C,mask:E});a.updateStatistics();return a}function A(a,e=!0){if(!p(a))return null;const {pixels:f,width:d,height:h,mask:g,pixelType:t}=a;a=[];const m=Math.round(d/2),v=Math.round(h/2),y=h-1,D=d-1;for(var J=0;J<f.length;J++){var E=f[J],R=M.createEmptyBand(t,m*v),
z=0;for(var C=0;C<h;C+=2)for(var U=0;U<d;U+=2){var ia=E[C*d+U];if(e){var fa=U===D?ia:E[C*d+U+1];const B=C===y?ia:E[C*d+U+d],G=U===D?B:C===y?fa:E[C*d+U+d+1];R[z++]=(ia+fa+B+G)/4}else R[z++]=ia}a.push(R)}J=null;if(k.isSome(g))for(J=new Uint8Array(m*v),E=0,R=0;R<h;R+=2)for(z=0;z<d;z+=2)C=g[R*d+z],e?(U=z===D?C:g[R*d+z+1],ia=R===y?C:g[R*d+z+d],fa=z===D?ia:R===y?U:g[R*d+z+d+1],J[E++]=C*U*ia*fa?1:0):J[E++]=C;return new M({width:m,height:v,pixelType:t,pixels:a,mask:J})}function u(a,e,f,d,h=0){const {width:g,
height:t}=a,{width:m,height:v}=e;a=d.cols;d=d.rows;e=Math.ceil(m/a-.1/a);const y=Math.ceil(v/d-.1/d);let D,J,E,R,z;const C=e*a;var U=C*y*d;const ia=new Float32Array(U),fa=new Float32Array(U),B=new Uint32Array(U),G=new Uint32Array(U);let Q=0,X,ja;for(let oa=0;oa<y;oa++)for(let ea=0;ea<e;ea++){var ca=12*(oa*e+ea);U=f[ca];D=f[ca+1];J=f[ca+2];E=f[ca+3];R=f[ca+4];z=f[ca+5];for(var ba=0;ba<d;ba++){Q=(oa*d+ba)*C+ea*a;ja=(ba+.5)/d;for(let wa=0;wa<ba;wa++)X=(wa+.5)/a,ia[Q+wa]=(U*X+D*ja+J)*g+h,fa[Q+wa]=(E*
X+R*ja+z)*t+h,B[Q+wa]=Math.floor(ia[Q+wa]),G[Q+wa]=Math.floor(fa[Q+wa])}ca+=6;U=f[ca];D=f[ca+1];J=f[ca+2];E=f[ca+3];R=f[ca+4];z=f[ca+5];for(ca=0;ca<d;ca++)for(Q=(oa*d+ca)*C+ea*a,ja=(ca+.5)/d,ba=ca;ba<a;ba++)X=(ba+.5)/a,ia[Q+ba]=(U*X+D*ja+J)*g+h,fa[Q+ba]=(E*X+R*ja+z)*t+h,B[Q+ba]=Math.floor(ia[Q+ba]),G[Q+ba]=Math.floor(fa[Q+ba])}return{offsets_x:ia,offsets_y:fa,offsets_xi:B,offsets_yi:G,gridWidth:C}}K.NoDataInterpretation=void 0;(function(a){a[a.matchAny=0]="matchAny";a[a.matchAll=1]="matchAll"})(K.NoDataInterpretation||
(K.NoDataInterpretation={}));K.MissingBandAction=void 0;(function(a){a[a.bestMatch=0]="bestMatch";a[a.fail=1]="fail"})(K.MissingBandAction||(K.MissingBandAction={}));K.MAX_MAP_SIZE_GPU=6;K.approximateTransform=function(a,e,f,d,h="nearest"){if(!p(a))return null;"majority"===h&&(a=L(a));const {pixels:g,mask:t,pixelType:m}=a,v=a.width;var y=a.height;const D=M.getPixelArrayConstructor(m),J=g.length,{width:E,height:R}=e;a=!1;for(let G=0;G<f.length;G+=3)-1===f[G]&&-1===f[G+1]&&-1===f[G+2]&&(a=!0);const {offsets_x:z,
offsets_y:C,offsets_xi:U,offsets_yi:ia,gridWidth:fa}=u({width:v,height:y},e,f,d,"majority"===h?.5:0);let B;e=(G,Q,X)=>{const ja=G instanceof Float32Array||G instanceof Float64Array?0:.5;for(let ca=0;ca<R;ca++){B=ca*fa;for(let ba=0;ba<E;ba++){if(0>z[B]||0>C[B])G[ca*E+ba]=0;else if(X)G[ca*E+ba]=Q[U[B]+ia[B]*v];else{const oa=Math.floor(z[B]),ea=Math.floor(C[B]),wa=Math.ceil(z[B]),c=Math.ceil(C[B]),n=z[B]-oa,P=C[B]-ea;G[ca*E+ba]=!t||t[oa+ea*v]&&t[wa+ea*v]&&t[oa+c*v]&&t[wa+c*v]?(1-P)*((1-n)*Q[oa+ea*v]+
n*Q[wa+ea*v])+P*((1-n)*Q[oa+c*v]+n*Q[wa+c*v])+ja:Q[U[B]+ia[B]*v]}B++}}};f=[];for(y=0;y<J;y++)d=new D(E*R),e(d,g[y],"nearest"===h||"majority"===h),f.push(d);h=new M({width:E,height:R,pixelType:m,pixels:f});if(k.isSome(t))h.mask=new Uint8Array(E*R),e(h.mask,t,!0);else if(a)for(h.mask=new Uint8Array(E*R),a=0;a<E*R;a++)h.mask[a]=0>z[a]||0>C[a]?0:1;h.updateStatistics();return h};K.clip=l;K.colorize=function(a,e){if(!p(a)||!e||!e.indexedColormap&&!e.indexed2DColormap)return a;const f=a.clone();var d=f.pixels;
let h=f.mask;const g=f.width*f.height;if(1!==d.length)return a;const {indexedColormap:t,indexed2DColormap:m,offset:v,alphaSpecified:y}=e;a=0;d=d[0];e=new Uint8Array(d.length);const D=new Uint8Array(d.length),J=new Uint8Array(d.length);var E=0;if(t){const R=t.length-1;if(k.isSome(h))for(a=0;a<g;a++)h[a]&&(E=4*(d[a]-v),E<v||E>R?h[a]=0:(e[a]=t[E],D[a]=t[E+1],J[a]=t[E+2],h[a]=t[E+3]));else{h=new Uint8Array(g);for(a=0;a<g;a++)E=4*(d[a]-v),E<v||E>R?h[a]=0:(e[a]=t[E],D[a]=t[E+1],J[a]=t[E+2],h[a]=t[E+3]);
f.mask=h}}else if(m)if(k.isSome(h))for(a=0;a<g;a++)h[a]&&(E=m[d[a]],e[a]=E[0],D[a]=E[1],J[a]=E[2],h[a]=E[3]);else{h=new Uint8Array(g);for(a=0;a<g;a++)E=m[d[a]],e[a]=E[0],D[a]=E[1],J[a]=E[2],h[a]=E[3];f.mask=h}f.pixels=[e,D,J];f.statistics=null;f.pixelType="u8";f.maskIsAlpha=y;return f};K.compositeBands=function(a){if(!a?.length||a.some(v=>!p(v)))return null;if(1===a.length)return k.isSome(a[0])?a[0].clone():null;const {width:e,height:f,pixelType:d}=a[0];if(a.some(v=>v.width!==e||v.height!==f))return null;
const h=a.map(({mask:v})=>v).filter(v=>null!=v);let g=null;h.length&&(g=new Uint8Array(e*f),g.set(h[0]),1<h.length&&O(h.slice(1),g));const t=[];a.forEach(({pixels:v})=>t.push(...v));const m=[];a.map(({statistics:v})=>v).filter(v=>v?.length).forEach(v=>m.push(...v));return new M({pixelType:d,width:e,height:f,mask:g,pixels:t,statistics:m.length?m:null})};K.createColormapLUT=function(a){if(a){var e=a.colormap;if(e&&0!==e.length){e=e.sort((y,D)=>y[0]-D[0]);var f=0;0>e[0][0]&&(f=e[0][0]);var d=Math.max(256,
e[e.length-1][0]-f+1),h=new Uint8Array(4*d),g=[],t=0,m=0,v=5===e[0].length;if(65536<d)return e.forEach(y=>{g[y[0]-f]=v?y.slice(1):y.slice(1).concat([255])}),{indexed2DColormap:g,offset:f,alphaSpecified:v};if(a.fillUnspecified)for(a=e[m],t=a[0]-f;t<d;t++)h[4*t]=a[1],h[4*t+1]=a[2],h[4*t+2]=a[3],h[4*t+3]=v?a[4]:255,t===a[0]-f&&(a=m===e.length-1?a:e[++m]);else for(t=0;t<e.length;t++)a=e[t],m=4*(a[0]-f),h[m]=a[1],h[m+1]=a[2],h[m+2]=a[3],h[m+3]=v?a[4]:255;return{indexedColormap:h,offset:f,alphaSpecified:v}}}};
K.createMaskLUT=function(a,e,f){if("u8"!==a&&"s8"!==a&&"u16"!==a&&"s16"!==a)return null;var d=a.includes("16")?65536:256;a=a.includes("s")?-d/2:0;d=new Uint8Array(d);if(e)for(let g=0;g<e.length;g++){var h=Math.ceil(e[2*g]-a);const t=Math.floor(e[2*g+1]-a);for(;h<=t;h++)d[h]=255}else d.fill(255);if(f)for(e=0;e<f.length;e++)d[f[e]-a]=0;return{lut:d,offset:a}};K.createRemapLUT=function(a){const {srcPixelType:e,inputRanges:f,outputValues:d,allowUnmatched:h,noDataRanges:g,isLastInputRangeInclusive:t,outputPixelType:m}=
a;if("u8"!==e&&"s8"!==e&&"u16"!==e&&"s16"!==e)return null;var v=e.includes("16")?65536:256;a=e.includes("s")?-v/2:0;const y=M.createEmptyBand(m,v);v=new Uint8Array(v);h&&v.fill(255);const [D,J]=H.getPixelValueRange(m);if(f?.length&&d?.length){var E=f.map(U=>U-1E-6);E[0]=f[0];t&&(E[E.length-1]=f[f.length-1]);for(var R=0;R<E.length;R++){var z=d[R]>J?J:d[R]<D?D:d[R],C=Math.ceil(E[2*R]-a);const U=Math.floor(E[2*R+1]-a);for(;C<=U;C++)y[C]=z,v[C]=255}}if(g?.length)for(E=0;E<g.length;E++)for(z=Math.ceil(g[2*
E]-a),R=Math.floor(g[2*E+1]-a);z<=R;z++)v[z]=0;return{lut:y,offset:a,mask:v}};K.extractBands=function(a,e){if(!e?.length||!p(a))return a;const f=a.pixels.length;return e&&e.some(d=>d>=f)||1===f&&1===e.length&&0===e[0]||f===e.length&&!e.some((d,h)=>d!==h)?a:new M({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:e.map(d=>a.pixels[d]),statistics:a.statistics&&e.map(d=>a.statistics[d])})};K.getClipBounds=I;K.getLocalArithmeticNorthRotations=
function(a,e){const {coefficients:f,spacing:d}=e,{offsets_x:h,offsets_y:g,gridWidth:t}=u(a,a,f,{rows:d[0],cols:d[1]}),{width:m,height:v}=a;a=new Float32Array(m*v);e=180/Math.PI;for(let J=0;J<v;J++)for(let E=0;E<m;E++){var y=J*t+E,D=0===J?y:y-t;const R=J===v-1?y:y+t;y=h[D]-h[R];D=g[R]-g[D];isNaN(y)||isNaN(D)?a[J*m+E]=90:(D=Math.atan2(D,y)*e,D=(360+D)%360,a[J*m+E]=D)}return a};K.interpolateOffsets=u;K.isValidPixelBlock=p;K.lookupBandValues=F;K.lookupPixels=function(a,e){if(!p(a))return null;const {pixels:f,
mask:d}=a,h=f.length;let g=e.lut;const {offset:t}=e;g&&1===g[0].length&&(g=f.map(()=>g));const m=[];e=e.outputPixelType||"u8";for(let v=0;v<h;v++){const y=F(f[v],d,g[v],t||0,e);m.push(y)}a=new M({width:a.width,height:a.height,pixels:m,mask:d,pixelType:e});a.updateStatistics();return a};K.mask=function(a,e){if(!p(a))return null;const {width:f,height:d,pixels:h}=a;var g=f*d;const t=new Uint8Array(g);a.mask?t.set(a.mask):t.fill(255);a=h.length;const {includedRanges:m,noDataValues:v,outputPixelType:y,
matchAll:D,lookups:J}=e;if(J){g=[];for(e=0;e<a;e++){var E=J[e];E=F(h[e],t,E.lut,E.offset||0,"u8");g.push(E)}1===g.length?t.set(g[0]):D?V(g,t):O(g,t)}else if(D){e=[];for(E=0;E<a;E++){const R=new Uint8Array(g);R.set(t);Z(h[E],m?.slice(2*E,2*E+2),v?.[E],R);e.push(R)}1===e.length?t.set(e[0]):V(e,t)}else for(g=0;g<a;g++)Z(h[g],m?.slice(2*g,2*g+2),v?.[g],t);return new M({width:f,height:d,pixelType:y,pixels:h,mask:t})};K.mosaic=x;K.mosaicPixelData=function(a,e){if(!a||0===a.length)return null;var f=a.find(J=>
J.pixelBlock);if(!f||k.isNone(f.pixelBlock))return null;var d=(f.extent.xmax-f.extent.xmin)/f.pixelBlock.width;const h=(f.extent.ymax-f.extent.ymin)/f.pixelBlock.height,g=.01*Math.min(d,h),t=a.sort((J,E)=>Math.abs(J.extent.ymax-E.extent.ymax)>g?E.extent.ymax-J.extent.ymax:Math.abs(J.extent.xmin-E.extent.xmin)>g?J.extent.xmin-E.extent.xmin:0);var m=Math.min.apply(null,t.map(J=>J.extent.xmin));const v=Math.min.apply(null,t.map(J=>J.extent.ymin)),y=Math.max.apply(null,t.map(J=>J.extent.xmax)),D=Math.max.apply(null,
t.map(J=>J.extent.ymax));a={x:Math.round((e.xmin-m)/d),y:Math.round((D-e.ymax)/h)};m={width:Math.round((y-m)/d),height:Math.round((D-v)/h)};d={width:Math.round((e.xmax-e.xmin)/d),height:Math.round((e.ymax-e.ymin)/h)};if(Math.round(m.width/f.pixelBlock.width)*Math.round(m.height/f.pixelBlock.height)!==t.length||0>a.x||0>a.y||m.width<d.width||m.height<d.height)return null;f=t.map(J=>J.pixelBlock);f=x(f,m,{clipOffset:a,clipSize:d});return{extent:e,pixelBlock:f}};K.remap=function(a,e){if(!p(a))return null;
const {width:f,height:d}=a,{inputRanges:h,outputValues:g,outputPixelType:t,noDataRanges:m,allowUnmatched:v,isLastInputRangeInclusive:y}=e;e=a.pixels[0];const D=M.createEmptyBand(t,e.length),J=a.mask,E=new Uint8Array(f*d);J?E.set(J):E.fill(255);const R=a.pixelType.startsWith("f")?1E-6:0;a=h.map(Q=>Q-R);a[0]=h[0];a[a.length-1]=h[h.length-1]+(y?1E-6:0);var z=h.length/2;const [C,U]=H.getPixelValueRange(t);for(var ia=0;ia<d;ia++)for(var fa=0;fa<f;fa++){var B=ia*f+fa;if(E[B]){var G=e[B];let Q=!1;for(let X=
z-1;0<=X;X--)if(G===a[2*X]||G>a[2*X]&&G<a[2*X+1]){D[B]=g[X];Q=!0;break}Q||(v?D[B]=G>U?U:G<C?C:G:E[B]=0)}}if(a=m?.length)for(z=0;z<d;z++)for(ia=0;ia<f;ia++)if(fa=z*f+ia,!J||J[fa])for(B=e[fa],G=0;G<a;G+=2)if(B>=m[G]&&B<=m[G+1]){D[fa]=0;E[fa]=0;break}return new M({width:f,height:d,pixelType:t,pixels:[D],mask:E})};K.remapColor=function(a,e){if(!p(a))return null;a=a.clone();var {pixels:f}=a;const d=a.width*a.height,h=e.length,g=Math.floor(h/2),t=e[Math.floor(g)];f=f[0];let m,v,y,D,J,E,R=!1;const z=new Uint8Array(d),
C=new Uint8Array(d),U=new Uint8Array(d);let ia=a.mask;const fa=4===e[0].mappedColor.length;ia||(ia=new Uint8Array(d),ia.fill(fa?255:1),a.mask=ia);for(J=0;J<d;J++)if(ia[J]){m=f[J];R=!1;E=g;v=t;y=0;for(D=h-1;1<D-y;){if(m===v.value){R=!0;break}m>v.value?y=E:D=E;E=Math.floor((y+D)/2);v=e[Math.floor(E)]}R||(m===e[y].value?(v=e[y],R=!0):m===e[D].value?(v=e[D],R=!0):m<e[y].value?(R=!1,v=null):m>e[y].value&&(m<e[D].value?(v=e[y],R=!0):D===h-1?(R=!1,v=null):(v=e[D],R=!0)));R?(z[J]=v.mappedColor[0],C[J]=v.mappedColor[1],
U[J]=v.mappedColor[2],ia[J]=v.mappedColor[3]):z[J]=C[J]=U[J]=ia[J]=0}a.pixels=[z,C,U];a.mask=ia;a.pixelType="u8";a.maskIsAlpha=fa;return a};K.resampleByMajority=L;K.setValidBoundary=function(a,e,f){if(!p(a))return null;const {width:d,height:h}=a,g=e.x;e=e.y;const t=f.width+g;f=f.height+e;if(0>g||0>e||t>d||f>h||0===g&&0===e&&t===d&&f===h)return a;a.mask||(a.mask=new Uint8Array(d*h));const m=a.mask;for(let v=0;v<h;v++){const y=v*d;for(let D=0;D<d;D++)m[y+D]=v<e||v>=f||D<g||D>=t?0:1}a.updateStatistics();
return a};K.split=function(a,e,f){if(!p(a))return null;const {width:d,height:h}=e;let {width:g,height:t}=a;const m=new Map,v={x:0,y:0};f=null==f?1:1+f;for(let y=0;y<f;y++){const D=Math.ceil(g/d),J=Math.ceil(t/h);for(let E=0;E<J;E++){v.y=E*h;for(let R=0;R<D;R++){v.x=R*d;const z=l(a,v,e);m.set(`${y}/${E}/${R}`,z)}}y<f-1&&(a=A(a));g=Math.round(g/2);t=Math.round(t/2)}return m};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/rasterFunctionHelper":function(){define("exports ../../../core/colorUtils ../../../core/Error ../../../core/lang ./AspectFunction ./BandArithmeticFunction ./ColormapFunction ./CompositeBandFunction ./ConvolutionFunction ./ExtractBandFunction ./LocalFunction ./MaskFunction ./NDVIFunction ./RemapFunction ./SlopeFunction ./StatisticsHistogramFunction ./StretchFunction".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w,L,r,q,b){function l(y,D){({rasterFunctionArguments:y}=y);y&&(y.rasters||[y.raster]).forEach(J=>{J&&"number"!==typeof J&&("string"===typeof J?J.startsWith("http")&&(D.includes(J)||D.push(J)):"rasterFunctionArguments"in J&&l(J,D))})}function A(y,D){return"rasters"===D[0]&&Array.isArray(y.rasters)?y.rasters:D.map(J=>y[J])}function u(y){return!!(y&&"object"===typeof y&&y.rasterFunction&&y.rasterFunctionArguments)}function a(y){const {rasterFunction:D,rasterFunctionArguments:J}=
y,E={};for(const z in J){let C=J[z];var R=z.toLowerCase();if("rasters"===R&&Array.isArray(C))E.rasters=C.map(U=>u(U)?a(U):U);else switch(u(C)&&(C=a(C)),R){case "dra":E.dra=C;break;case "pspower":E.psPower=C;break;case "pszfactor":E.psZFactor=C;break;case "bandids":E.bandIds=C;break;default:R=z[0].toLowerCase()+z.slice(1),E[R]=C}}"Local"!==D||E.rasters?.length||(E.rasters=["$$"]);return{...y,rasterFunctionArguments:E}}function e(y,D){const {rasterFunction:J,rasterFunctionArguments:E}=y;var R=y.outputPixelType?.toLowerCase();
if(null==J||!v.has(J))throw new M("raster-function-helper",`unsupported raster function: ${J}`);var z=v.get(J);y=("function"===typeof z.ctor?z.ctor:z.ctor["default"]).fromJSON({...y,outputPixelType:R});({rasterArgumentNames:R}=y);z=[];const C=A(E,R),U="rasters"===R[0],ia=[];for(let fa=0;fa<C.length;fa++){const B=C[fa];let G;null==B||"string"===typeof B&&B.startsWith("$")?z.push(D?.raster):"string"===typeof B?D[B]&&z.push(D[B]):"number"!==typeof B&&"rasterFunction"in B&&(G=e(B,D),U||(y.functionArguments[R[fa]]=
G),z.push(G));U&&ia.push(G??B)}U&&(y.functionArguments.rasters=ia);D&&(y.sourceRasters=z,D=D.raster?.url)&&(y.mainPrimaryRasterId=D);return y}function f(y,D){if(y&&D)for(const J in y){const E=y[J];E&&"object"===typeof E&&(E.function&&E.arguments?f(E.arguments,D):"RasterFunctionVariable"===E.type&&null!=D[E.name]&&(E.value=D[E.name]))}}function d(y){if(!y||"object"!==typeof y)return y;if(Array.isArray(y)&&0===y.length)return 0===y.length?null:["number","string"].includes(typeof y[0])?y:y.map(D=>d(D));
if("value"in y&&["number","string","boolean"].includes(typeof y.value))return y.value;if(!("type"in y))return y;switch(y.type){case "Scalar":return y.value;case "AlgorithmicColorRamp":return h(y);case "MultiPartColorRamp":return{type:"multipart",colorRamps:y.ArrayOfColorRamp.map(h)};case "ArgumentArray":return y.elements?.length&&"RasterStatistics"!==y.elements[0].type?"RasterFunctionVariable"===y.elements[0].type?y.elements.map(D=>null!=D.value?d(D.value):D.name.toLowerCase().includes("raster")?
"$$":null):y:y.elements;default:return y}}function h(y){const D=y.algorithm??"esriHSVAlgorithm";let {FromColor:J,ToColor:E}=y;if(!Array.isArray(J)){const {r:R,g:z,b:C}=k.toRGB({h:J.Hue,s:J.Saturation,v:J.Value});J=[R,z,C,J.AlphaValue]}if(!Array.isArray(E)){const {r:R,g:z,b:C}=k.toRGB({h:E.Hue,s:E.Saturation,v:E.Value});E=[R,z,C,E.AlphaValue]}return{type:"algorithmic",algorithm:D,fromColor:J,toColor:E}}function g(y,D){if(y&&D){var {function:J,arguments:E}=y;if(J&&E){D.rasterFunction=J.type.replace("Function",
"");D.outputPixelType=J.pixelType;y={};D.rasterFunctionArguments=y;for(const R in E){const z=E[R];"object"===typeof z&&("function"in z&&z.function&&z.arguments?(D.rasterFunctionArguments[R]={},g(z,D.rasterFunctionArguments[R])):"value"in z&&(y[R]=d(z.value)))}y.DEM&&!y.Raster&&(y.Raster=y.DEM,delete y.DEM);switch(D.rasterFunction){case "Stretch":t(y);break;case "Colormap":"randomcolorramp"===y.ColorRamp?.type?.toLowerCase()&&(delete y.ColorRamp,y.ColormapName="Random");0===y.ColorSchemeType&&delete y.ColorRamp;
break;case "Convolution":null!=y.ConvolutionType&&(y.Type=y.ConvolutionType,delete y.ConvolutionType);break;case "Mask":m(y)}}}}function t(y){y.Statistics?.length&&"object"===typeof y.Statistics&&(y.Statistics=y.Statistics.map(D=>[D.min,D.max,D.mean,D.standardDeviation]));null!=y.NumberOfStandardDeviation&&(y.NumberOfStandardDeviations=y.NumberOfStandardDeviation,delete y.NumberOfStandardDeviation)}function m(y){y.NoDataValues?.length&&"string"===typeof y.NoDataValues[0]&&(y.NoDataValues=y.NoDataValues.filter(D=>
""!==D).map(D=>Number(D)))}const v=new Map;v.set("Aspect",{desc:"Aspect Function",ctor:p,rasterArgumentNames:["raster"]});v.set("BandArithmetic",{desc:"Band Arithmetic Function",ctor:F,rasterArgumentNames:["raster"]});v.set("Colormap",{desc:"Colormap Function",ctor:Z,rasterArgumentNames:["raster"]});v.set("CompositeBand",{desc:"CompositeBand Function",ctor:V,rasterArgumentNames:["rasters"]});v.set("Convolution",{desc:"Convolution Function",ctor:O,rasterArgumentNames:["raster"]});v.set("ExtractBand",
{desc:"ExtractBand Function",ctor:I,rasterArgumentNames:["raster"]});v.set("Local",{desc:"Local Function",ctor:N,rasterArgumentNames:["rasters"]});v.set("Mask",{desc:"Mask Function",ctor:x,rasterArgumentNames:["raster"]});v.set("NDVI",{desc:"NDVI Function",ctor:w,rasterArgumentNames:["raster"]});v.set("Remap",{desc:"Remap Function",ctor:L,rasterArgumentNames:["raster"]});v.set("Slope",{desc:"Slope Function",ctor:r,rasterArgumentNames:["raster"]});v.set("StatisticsHistogram",{desc:"Statistics Histogram Function",
ctor:q,rasterArgumentNames:["raster"]});v.set("Stretch",{desc:"Stretch Function",ctor:b,rasterArgumentNames:["raster"]});K.create=function(y,D){D=D??{};y=H.clone(y);if("function"in y&&"arguments"in y&&y.arguments){D&&f(y,D);const J={};g(y,J);y=J}if("rasterFunction"in y)return y=a(y),e(y,D);throw new M("raster-function-helper","unsupported raster function json.");};K.getPrimaryRasterUrls=l;K.getRasterValues=A;K.getSupportedFunctions=function(){const y=new Set;v.forEach((D,J)=>y.add(J));return y};K.register=
function(y,D,J=["raster"],E=""){v.set(y,{desc:E,ctor:D,rasterArgumentNames:J})};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/AspectFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./AspectFunctionArguments ./BaseRasterFunction ./surfaceUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){p=function(x){function w(){var r=L.apply(this,arguments);r.functionName="Aspect";r.functionArguments=null;r.rasterArgumentNames=["raster"];r.isGCS=!1;return r}K._inherits(w,x);var L=K._createSuper(w);x=w.prototype;x._bindSourceRasters=function(){var r=this.sourceRasterInfos[0];this.isGCS=r.spatialReference?.isGeographic??!1;this.outputPixelType=this._getOutputPixelType("f32");r=r.clone();r.pixelType=this.outputPixelType;r.statistics=[{min:-1,max:360,avg:180,stddev:30}];
r.histograms=null;r.colormap=null;r.attributeTable=null;r.bandCount=1;this.rasterInfo=r;return{success:!0,supportsGPU:!0}};x._processPixels=function(r){const q=r.pixelBlocks?.[0];if(M.isNone(q))return null;const {extent:b,primaryPixelSizes:l}=r;r=l?.[0];r=M.isNone(r)?b?{x:b.width/q.width,y:b.height/q.height}:{x:1,y:1}:r;return N.aspect(q,{resolution:r})};return K._createClass(w)}(I);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:O,
json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);k.__decorate([H.property({json:{write:!0}})],p.prototype,"isGCS",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.AspectFunction")],p)})},"esri/layers/support/rasterFunctions/AspectFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O){var I;M=I=function(N){function x(){return w.apply(this,arguments)}K._inherits(x,N);var w=K._createSuper(x);x.prototype.clone=function(){return new I({raster:this.raster})};return K._createClass(x)}(O);return M=I=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],M)})},"esri/layers/support/rasterFunctions/BaseFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(K,k,M,H,p,F,Z,V){M=function(O){function I(){var x=N.apply(this,arguments);x.raster=void 0;return x}K._inherits(I,O);var N=K._createSuper(I);return K._createClass(I)}(M.JSONSupport);k.__decorate([H.property({json:{write:!0}})],M.prototype,"raster",void 0);return M=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],M)})},"esri/layers/support/rasterFunctions/BaseRasterFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../PixelBlock ../RasterInfo".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){M=function(x){function w(){var r=L.apply(this,arguments);r.functionArguments=null;r.readingBufferSize=0;r.id=-1;r.isNoopProcess=!1;r.rawInputBandIds=[];r.isInputBandIdsSwizzled=!1;r.swizzledBandSelection=[];r.isBranch=!1;r._bindingResult=null;return r}K._inherits(w,x);var L=K._createSuper(w);x=w.prototype;x.bind=function(r,q=!1,b=-1){this.id=b+1;b=this._getRasterValues();let l=!0;for(let u=0;u<b.length;u++){var A=b[u];if(H.isSome(A)&&this._isRasterFunctionValue(A)){A=
A.bind(r,q,this.id+u);if(!A.success)return this._bindingResult=A;l=l&&A.supportsGPU}}if(!this.rasterInfo||q)return this.sourceRasterInfos=this._getSourceRasterInfos(r),this._bindingResult=this._bindSourceRasters(),this._bindingResult.supportsGPU=l&&this._bindingResult.supportsGPU,this.processInputBandIds(),this._bindingResult;this._bindingResult={success:!0,supportsGPU:!0};this.processInputBandIds();return this._bindingResult};x.process=function(r){var q=this._getRasterValues();q=0===q.length?r.pixelBlocks??
r.primaryPixelBlocks:q.map(b=>this._readRasterValue(b,r));return this._processPixels({...r,pixelBlocks:q})};x.processInputBandIds=function(){var r=this._getRasterValues().filter(this._isRasterFunctionValue);if(1<r.length)return this.rawInputBandIds=r.map(b=>b.processInputBandIds()[0]),this.isInputBandIdsSwizzled=this.rawInputBandIds.some((b,l)=>b!==l),r=r.filter(b=>"ExtractBand"===b.functionName),r.length&&r.forEach((b,l)=>{b.isInputBandIdsSwizzled=!0;b.swizzledBandSelection=[l,l,l]}),this.rawInputBandIds;
var q=r[0];if(q){if(r=q.processInputBandIds(),q.isInputBandIdsSwizzled)return this.rawInputBandIds=r}else{r=[];({bandCount:q}=this.sourceRasterInfos[0]);for(let b=0;b<q;b++)r.push(b)}r=this._getInputBandIds(r);this.isInputBandIdsSwizzled=r.some((b,l)=>b!==l);return this.rawInputBandIds=r};x.getPrimaryRasters=function(){const r=[],q=[];this._getPrimaryRasters(this,r,q);return{rasters:r,rasterIds:q}};x.getWebGLProcessorDefinition=function(){const r=this._getWebGLParameters(),{raster:q,rasters:b}=this.functionArguments;
b&&Array.isArray(b)&&b.length?(r.rasters=b.map(l=>this._isRasterFunctionValue(l)?l.getWebGLProcessorDefinition():"number"===typeof l?{name:"Constant",parameters:{value:l},pixelType:"f32",id:-1,isNoopProcess:!1}:{name:"Identity",parameters:{value:l},pixelType:"f32",id:-1,isNoopProcess:!1}),r.rasters.some(l=>null!=l)||(r.rasters=null)):this._isRasterFunctionValue(q)&&(r.raster=q.getWebGLProcessorDefinition());return{name:this.functionName,parameters:r,pixelType:this.outputPixelType,id:this.id,isNoopProcess:this.isNoopProcess}};
x._getOutputPixelType=function(r){return"unknown"===this.outputPixelType?r:this.outputPixelType??r};x._getWebGLParameters=function(){return{}};x._getInputBandIds=function(r){return r};x._isOutputRoundingNeeded=function(){const {outputPixelType:r}=this;return(r?.startsWith("u")||r?.startsWith("s"))??!1};x._getRasterValues=function(){const {rasterArgumentNames:r}=this;return"rasters"===r[0]?this.functionArguments.rasters??[]:r.map(q=>this.functionArguments[q])};x._getSourceRasterInfos=function(r){const q=
this._getRasterValues(),{rasterInfos:b,rasterIds:l}=r;if(0===q.length)return b;const A=q.map(a=>{if(a&&"object"===typeof a&&"bind"in a&&a.rasterInfo)return a.rasterInfo;if("string"===typeof a&&l.includes(a))return b[l.indexOf(a)];if("number"!==typeof a)return b[0]}),u=A.find(a=>a)??b[0];A.forEach((a,e)=>{void 0===a&&(A[e]=u)});return A};x._getPrimaryRasterId=function(r){return r?.url};x._getPrimaryRasters=function(r,q=[],b=[]){for(let A=0;A<r.sourceRasters.length;A++){var l=r.sourceRasters[A];if("number"!==
typeof l)if("bind"in l)this._getPrimaryRasters(l,q,b);else{const u=this._getPrimaryRasterId(l);null==u||b.includes(u)||(this.mainPrimaryRasterId===u?(q.unshift(l),b.unshift(u)):(q.push(l),b.push(u)))}}};x._isRasterFunctionValue=function(r){return null!=r&&"object"===typeof r&&"getWebGLProcessorDefinition"in r};x._readRasterValue=function(r,q){var {primaryPixelBlocks:b}=q;if(H.isNone(r)||"$$"===r)return r=b[0],H.isNone(r)?null:r.clone();if("string"===typeof r)return r=q.primaryRasterIds.indexOf(r),
-1===r?null:b[r];if("number"===typeof r){b=b[0];if(H.isNone(b))return null;const {width:l,height:A,pixelType:u,mask:a}=b;b=a?new Uint8Array(a):null;q=new Float32Array(l*A);q.fill(r);r=Array(this.sourceRasterInfos[0].bandCount).fill(q);return new I({width:l,height:A,pixelType:u,pixels:r,mask:b})}return r.process(q)};K._createClass(w,[{key:"supportsGPU",get:function(){return this._bindingResult.supportsGPU}},{key:"flatWebGLFunctionChain",get:function(){var r=this.getWebGLProcessorDefinition();if(!r)return null;
const q=[r];({parameters:r}=r);for(r=r.rasters||r.raster&&[r.raster];r?.length;){q.unshift(...r);var b=[];for(var l=0;l<r.length;l++){var {parameters:A}=r[l];A=A.rasters||A.raster&&[A.raster];A?.length&&b.push(...A)}r=b}for(r=q.length-1;0<=r;r--)q[r].isNoopProcess&&q.splice(r,1);r=!1;for(b=0;b<q.length;b++)l=q[b],l.id=q.length-b-1,{rasters:l}=l.parameters,r=r||null!=l&&1<l.length;b=q.some(({name:u})=>"Slope"===u||"Aspect"===u);return{functions:q,hasBranches:r,hasSurfaceFunction:b}}}]);return w}(M.JSONSupport);
k.__decorate([p.property({json:{write:!0}})],M.prototype,"functionName",void 0);k.__decorate([p.property({json:{write:!0}})],M.prototype,"functionArguments",void 0);k.__decorate([p.property()],M.prototype,"rasterArgumentNames",void 0);k.__decorate([p.property({json:{write:!0}}),F.cast(x=>x?.toLowerCase())],M.prototype,"outputPixelType",void 0);k.__decorate([p.property({json:{write:!0}})],M.prototype,"mainPrimaryRasterId",void 0);k.__decorate([p.property()],M.prototype,"sourceRasters",void 0);k.__decorate([p.property({type:[N],
json:{write:!0}})],M.prototype,"sourceRasterInfos",void 0);k.__decorate([p.property({json:{write:!0}})],M.prototype,"rasterInfo",void 0);k.__decorate([p.property({json:{write:!0}})],M.prototype,"readingBufferSize",void 0);k.__decorate([p.property({json:{write:!0}})],M.prototype,"id",void 0);k.__decorate([p.property()],M.prototype,"isNoopProcess",void 0);k.__decorate([p.property()],M.prototype,"supportsGPU",null);k.__decorate([p.property()],M.prototype,"rawInputBandIds",void 0);k.__decorate([p.property()],
M.prototype,"isInputBandIdsSwizzled",void 0);k.__decorate([p.property()],M.prototype,"swizzledBandSelection",void 0);k.__decorate([p.property()],M.prototype,"isBranch",void 0);k.__decorate([p.property()],M.prototype,"flatWebGLFunctionChain",null);k.__decorate([p.property()],M.prototype,"_bindingResult",void 0);return M=k.__decorate([O.subclass("esri.layers.support.rasterFunctions.BaseRasterFunction")],M)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){var x;M=x=function(w){function L(q){q=r.call(this,q);q.attributeTable=null;q.bandCount=null;q.colormap=null;q.extent=null;q.format=void 0;q.height=null;q.width=null;q.histograms=null;q.keyProperties={};q.multidimensionalInfo=null;q.noDataValue=null;q.pixelSize=null;q.pixelType=null;q.isPseudoSpatialReference=!1;q.spatialReference=null;q.statistics=null;q.storageInfo=null;q.transform=null;return q}K._inherits(L,w);var r=K._createSuper(L);L.prototype.clone=function(){return new x({attributeTable:H.clone(this.attributeTable),
bandCount:this.bandCount,colormap:H.clone(this.colormap),extent:H.clone(this.extent),nativePixelSize:H.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:H.clone(this.histograms),keyProperties:H.clone(this.keyProperties),multidimensionalInfo:H.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:H.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:H.clone(this.spatialReference),
statistics:H.clone(this.statistics),storageInfo:H.clone(this.storageInfo),transform:H.clone(this.transform)})};K._createClass(L,[{key:"dataType",get:function(){const q=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===q?"standard-time":q}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(q){q&&this._set("nativeExtent",q)}},{key:"nativePixelSize",get:function(){if(p.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;
const q=this.nativeExtent;return{x:q.width/this.width,y:q.height/this.height}}},{key:"hasMultidimensionalTranspose",get:function(){return!!this.storageInfo?.transposeInfo}}]);return L}(M.JSONSupport);k.__decorate([F.property({json:{write:!0}})],M.prototype,"attributeTable",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"bandCount",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"colormap",void 0);k.__decorate([F.property({type:String,readOnly:!0})],M.prototype,"dataType",
null);k.__decorate([F.property({type:O,json:{write:!0}})],M.prototype,"extent",void 0);k.__decorate([F.property({type:O,json:{write:!0}})],M.prototype,"nativeExtent",null);k.__decorate([F.property({json:{write:!0}})],M.prototype,"nativePixelSize",null);k.__decorate([F.property({json:{write:!0}})],M.prototype,"format",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"height",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"width",void 0);k.__decorate([F.property({json:{write:!0}})],
M.prototype,"hasMultidimensionalTranspose",null);k.__decorate([F.property({json:{write:!0}})],M.prototype,"histograms",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"keyProperties",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"multidimensionalInfo",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"noDataValue",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"pixelSize",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,
"pixelType",void 0);k.__decorate([F.property()],M.prototype,"isPseudoSpatialReference",void 0);k.__decorate([F.property({type:I,json:{write:!0}})],M.prototype,"spatialReference",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"statistics",void 0);k.__decorate([F.property({type:N,json:{write:!0}})],M.prototype,"storageInfo",void 0);k.__decorate([F.property({json:{write:!0}})],M.prototype,"transform",void 0);return M=x=k.__decorate([V.subclass("esri.layers.support.RasterInfo")],M)})},
"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),function(K,k,M,H,p,F,Z,V){var O;M=O=function(I){function N(){var w=x.apply(this,arguments);w.blockWidth=void 0;w.blockHeight=void 0;w.compression=null;w.origin=null;w.firstPyramidLevel=
null;w.maximumPyramidLevel=null;w.pyramidScalingFactor=2;w.pyramidBlockWidth=null;w.pyramidBlockHeight=null;w.isVirtualTileInfo=!1;w.tileInfo=null;w.transposeInfo=null;w.blockBoundary=null;return w}K._inherits(N,I);var x=K._createSuper(N);N.prototype.clone=function(){return new O({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:H.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:H.clone(this.pyramidResolutions),
pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:H.clone(this.tileInfo),transposeInfo:H.clone(this.transposeInfo),blockBoundary:H.clone(this.blockBoundary)})};return K._createClass(N)}(M.JSONSupport);k.__decorate([p.property({type:Number,json:{write:!0}})],M.prototype,"blockWidth",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],M.prototype,"blockHeight",
void 0);k.__decorate([p.property({type:String,json:{write:!0}})],M.prototype,"compression",void 0);k.__decorate([p.property({type:V,json:{write:!0}})],M.prototype,"origin",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],M.prototype,"firstPyramidLevel",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],M.prototype,"maximumPyramidLevel",void 0);k.__decorate([p.property({json:{write:!0}})],M.prototype,"pyramidResolutions",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],
M.prototype,"pyramidScalingFactor",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],M.prototype,"pyramidBlockWidth",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],M.prototype,"pyramidBlockHeight",void 0);k.__decorate([p.property({type:Boolean,json:{write:!0}})],M.prototype,"isVirtualTileInfo",void 0);k.__decorate([p.property({json:{write:!0}})],M.prototype,"tileInfo",void 0);k.__decorate([p.property()],M.prototype,"transposeInfo",void 0);k.__decorate([p.property()],
M.prototype,"blockBoundary",void 0);return M=O=k.__decorate([Z.subclass("esri.layers.support.RasterStorageInfo")],M)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","./pixelUtils"],function(K,k,M,H){function p(F){let {altitude:Z,azimuth:V}=F;const {hillshadeType:O,pixelSizePower:I=1,pixelSizeFactor:N=1,scalingType:x,isGCS:w,resolution:L}=F;var r="multi-directional"===O?2*F.zFactor:F.zFactor;const {x:q,y:b}=L;F=r/(8*q);var l=
r/(8*b);w&&.001<r&&(F/=111E3,l/=111E3);"adjusted"===x&&(w?(F=111E3*q,l=111E3*b,F=(r+F**I*N)/(8*F),l=(r+l**I*N)/(8*l)):(F=(r+q**I*N)/(8*q),l=(r+b**I*N)/(8*b)));var A=(90-Z)*Math.PI/180;r=Math.cos(A);let u=(360-V+90)*Math.PI/180,a=Math.sin(A)*Math.cos(u);A=Math.sin(A)*Math.sin(u);const e=[315,270,225,360,180,0],f=[60,60,60,60,60,90];var d=new Float32Array([3,5,3,2,1,4]);const h=d.reduce((y,D)=>y+D);d=d.map(y=>y/h);const g="multi-directional"===O?e.length:1,t=new Float32Array(6),m=new Float32Array(6),
v=new Float32Array(6);if("multi-directional"===O)for(let y=0;y<g;y++)Z=f[y],V=e[y],A=(90-Z)*Math.PI/180,r=Math.cos(A),u=(360-V+90)*Math.PI/180,a=Math.sin(A)*Math.cos(u),A=Math.sin(A)*Math.sin(u),t[y]=r,m[y]=a,v[y]=A;else t.fill(r),m.fill(a),v.fill(A);return{resolution:L,factor:[F,l],sinZcosA:a,sinZsinA:A,cosZ:r,sinZcosAs:m,sinZsinAs:v,cosZs:t,weights:d,hillshadeType:["traditional","multi-directional"].indexOf(O)}}K.aspect=function(F,Z={}){if(!H.isValidPixelBlock(F))return F;const {width:V,height:O,
mask:I}=F;var N=F.pixels[0];const x=new Uint8Array(V*O);k.isSome(I)&&x.set(I);const w=new Float32Array(V*O);var {resolution:L}=Z;Z=L?1/L.x:1;L=L?1/L.y:1;let r;let q,b,l,A;const u=k.isSome(I);for(let d=1;d<O-1;d++){const h=d*V;for(let g=1;g<V-1;g++)if(I&&!I[h+g])w[h+g]=0;else{var a=0;if(u&&(a=I[h-V+g-1]+I[h-V+g]+I[h-V+g+1]+I[h+g-1]+I[h+g+1]+I[h+V+g-1]+I[h+V+g]+I[h+V+g+1],7>a)){w[h+g]=0;x[h+g]=0;continue}if(I&&7===a){a=I[h-V+g-1]?N[h-V+g-1]:N[h+g];var e=I[h-V+g]?N[h-V+g]:N[h+g];r=I[h-V+g+1]?N[h-V+g+
1]:N[h+g];var f=I[h+g-1]?N[h+g-1]:N[h+g];q=I[h+g+1]?N[h+g+1]:N[h+g];b=I[h+V+g-1]?N[h+V+g-1]:N[h+g];l=I[h+V+g]?N[h+V+g]:N[h+g];A=I[h+V+g+1]?N[h+V+g+1]:N[h+g]}else a=N[h-V+g-1],e=N[h-V+g],r=N[h-V+g+1],f=N[h+g-1],q=N[h+g+1],b=N[h+V+g-1],l=N[h+V+g],A=N[h+V+g+1];f=(r+q+q+A-(a+f+f+b))*Z;a=(b+l+l+A-(a+e+e+r))*L;e=-1;if(0!==f||0!==a)e=90-57.29578*Math.atan2(a,-f),0>e&&(e+=360),360===e?e=0:360<e&&(e%=360);w[h+g]=e}}for(N=0;N<O;N++)w[N*V]=w[N*V+1],w[(N+1)*V-1]=w[(N+1)*V-2];for(N=1;N<V-1;N++)w[N]=w[N+V],w[N+
(O-1)*V]=w[N+(O-2)*V];return new M({width:V,height:O,pixels:[w],mask:I?x:null,pixelType:"f32",validPixelCount:F.validPixelCount,statistics:[{minValue:0,maxValue:360}]})};K.calculateHillshadeParams=p;K.hillshade=function(F,Z){if(!H.isValidPixelBlock(F))return F;const {width:V,height:O,mask:I}=F,N=new Uint8Array(V*O);var x=1;if(k.isSome(I)){for(var w=0;w<I.length;w++)if(I[w]){x=I[w];break}N.set(I)}const {factor:L,sinZcosA:r,sinZsinA:q,cosZ:b,sinZcosAs:l,sinZsinAs:A,cosZs:u,weights:a}=p(Z),[e,f]=L;({hillshadeType:w}=
Z);const d=F.pixels[0];Z=new Uint8Array(V*O);let h;const g=k.isSome(I);for(let R=1;R<O-1;R++){const z=R*V;for(let C=1;C<V-1;C++)if(I&&!I[z+C])Z[z+C]=0;else{var t=8;if(g&&(t=(I[z-V+C-1]+I[z-V+C]+I[z-V+C+1]+I[z+C-1]+I[z+C+1]+I[z+V+C-1]+I[z+V+C]+I[z+V+C+1])/x,7>t)){Z[z+C]=0;N[z+C]=0;continue}if(I&&7===t){var m=I[z-V+C-1]?d[z-V+C-1]:d[z+C];var v=I[z-V+C]?d[z-V+C]:d[z+C];var y=I[z-V+C+1]?d[z-V+C+1]:d[z+C];t=I[z+C-1]?d[z+C-1]:d[z+C];h=I[z+C+1]?d[z+C+1]:d[z+C];var D=I[z+V+C-1]?d[z+V+C-1]:d[z+C];var J=I[z+
V+C]?d[z+V+C]:d[z+C];var E=I[z+V+C+1]?d[z+V+C+1]:d[z+C]}else m=d[z-V+C-1],v=d[z-V+C],y=d[z-V+C+1],t=d[z+C-1],h=d[z+C+1],D=d[z+V+C-1],J=d[z+V+C],E=d[z+V+C+1];t=(y+h+h+E-(m+t+t+D))*e;m=(D+J+J+E-(m+v+v+y))*f;v=Math.sqrt(1+t*t+m*m);y=0;if("traditional"===w)t=255*(b+q*m-r*t)/v,0>t&&(t=0),y=t;else for(D=A.length,J=0;J<D;J++)E=255*(u[J]+A[J]*m-l[J]*t)/v,0>E&&(E=0),y+=E*a[J];Z[z+C]=y&255}}for(x=0;x<O;x++)Z[x*V]=Z[x*V+1],Z[(x+1)*V-1]=Z[(x+1)*V-2];for(x=1;x<V-1;x++)Z[x]=Z[x+V],Z[x+(O-1)*V]=Z[x+(O-2)*V];return new M({width:V,
height:O,pixels:[Z],mask:I?N:null,pixelType:"u8",validPixelCount:F.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};K.slope=function(F,Z){if(!H.isValidPixelBlock(F))return F;var V=Z.zFactor,O=Z.pixelSizePower??1,I=Z.pixelSizeFactor??1,N=Z.slopeType,x=Z.isGCS;const {width:w,height:L,mask:r}=F,q=F.pixels[0],b=new Uint8Array(w*L);let l=1;if(k.isSome(r)){for(var A=0;A<r.length;A++)if(r[A]){l=r[A];break}b.set(r)}A=new Float32Array(w*L);const {x:u,y:a}=Z.resolution;Z=V/(8*u);let e=V/(8*a);x&&1E-4>
Math.abs(V-1)&&(Z/=111E3,e/=111E3);"adjusted"===N&&(Z=(V+u**O*I)/(8*u),e=(V+a**O*I)/(8*a));let f,d;let h,g,t,m;V=k.isSome(r);for(O=1;O<L-1;O++)for(I=O*w,x=1;x<w-1;x++)if(r&&!r[I+x])A[I+x]=0;else{var v=0;if(V&&(v=(r[I-w+x-1]+r[I-w+x]+r[I-w+x+1]+r[I+x-1]+r[I+x+1]+r[I+w+x-1]+r[I+w+x]+r[I+w+x+1])/l,7>v)){A[I+x]=0;b[I+x]=0;continue}if(r&&7===v){v=r[I-w+x-1]?q[I-w+x-1]:q[I+x];f=r[I-w+x]?q[I-w+x]:q[I+x];d=r[I-w+x+1]?q[I-w+x+1]:q[I+x];var y=r[I+x-1]?q[I+x-1]:q[I+x];h=r[I+x+1]?q[I+x+1]:q[I+x];g=r[I+w+x-1]?
q[I+w+x-1]:q[I+x];t=r[I+w+x]?q[I+w+x]:q[I+x];m=r[I+w+x+1]?q[I+w+x+1]:q[I+x]}else v=q[I-w+x-1],f=q[I-w+x],d=q[I-w+x+1],y=q[I+x-1],h=q[I+x+1],g=q[I+w+x-1],t=q[I+w+x],m=q[I+w+x+1];y=(d+h+h+m-(v+y+y+g))*Z;v=(g+t+t+m-(v+f+f+d))*e;v=Math.sqrt(y*y+v*v);A[I+x]="percent-rise"===N?100*v:57.2957795*Math.atan(v)}for(N=0;N<L;N++)A[N*w]=A[N*w+1],A[(N+1)*w-1]=A[(N+1)*w-2];for(N=1;N<w-1;N++)A[N]=A[N+w],A[N+(L-1)*w]=A[N+(L-2)*w];F=new M({width:w,height:L,pixels:[A],mask:r?b:null,pixelType:"f32",validPixelCount:F.validPixelCount});
F.updateStatistics();return F};K.tintHillshade=function(F,Z,V,O){if(H.isValidPixelBlock(F)&&H.isValidPixelBlock(Z)){var {min:I,max:N}=O;O=F.pixels[0];var {pixels:x,mask:w}=Z;Z=x[0];var L=255.00001/(N-I),r=new Uint8ClampedArray(Z.length),q=new Uint8ClampedArray(Z.length),b=new Uint8ClampedArray(Z.length),l=V.length-1;for(let a=0;a<Z.length;a++){if(w&&0===w[a])continue;var A=Math.floor((Z[a]-I)*L);const [e,f]=V[0>A?0:A>l?l:A];var u=O[a];A=u*f;const d=A*(1-Math.abs(e%2-1));u-=A;switch(Math.floor(e)){case 0:r[a]=
A+u;q[a]=d+u;b[a]=u;break;case 1:r[a]=d+u;q[a]=A+u;b[a]=u;break;case 2:r[a]=u;q[a]=A+u;b[a]=d+u;break;case 3:r[a]=u;q[a]=d+u;b[a]=A+u;break;case 4:r[a]=d+u;q[a]=u;b[a]=A+u;break;case 5:case 6:r[a]=A+u,q[a]=u,b[a]=d+u}}F.pixels=[r,q,b];F.updateStatistics()}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/BandArithmeticFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BandArithmeticFunctionArguments ./bandIndexUtils ./BaseRasterFunction".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){const x=new Set(["vari","mtvi2","rtvi-core","evi"]);p=function(w){function L(){var q=r.apply(this,arguments);q.functionName="BandArithmetic";q.functionArguments=null;q.rasterArgumentNames=["raster"];return q}K._inherits(L,w);var r=K._createSuper(L);w=L.prototype;w._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const q=this.sourceRasterInfos[0],b=q.clone();b.pixelType=this.outputPixelType;b.statistics=null;b.histograms=null;b.bandCount=
"sultan"===this.functionArguments.method?q.bandCount:1;this.rasterInfo=b;return{success:!0,supportsGPU:!["custom","gvitm","sultan"].includes(this.functionArguments.method)}};w._processPixels=function(q){q=q.pixelBlocks?.[0];if(M.isNone(q))return q;const {method:b,bandIndexes:l}=this.functionArguments,A=l.split(" ").map(u=>parseFloat(u));return I.calculateBandIndex(q,{method:b,bandIndexes:A,equation:l})};w._getWebGLParameters=function(){const q=this.functionArguments.bandIndexes.split(" ").map(u=>
parseFloat(u)-1);2===q.length&&q.push(0);var b=this.isInputBandIdsSwizzled?[0,1,2]:q;const l=new Float32Array(3);({method:A}=this.functionArguments);switch(A){case "gndvi":case "nbr":case "ndbi":case "ndvi":case "ndvi-re":case "ndsi":case "ndmi":case "mndwi":b=I.getBandMatrix3([b[0],b[1],0]);var A="ndxi";break;case "ndwi":b=I.getBandMatrix3([b[1],b[0],0]);A="ndxi";break;case "sr":case "sr-re":case "iron-oxide":case "ferrous-minerals":case "clay-minerals":b=I.getBandMatrix3([b[0],b[1],0]);A="sr";break;
case "ci-g":case "ci-re":b=I.getBandMatrix3([b[0],b[1],0]);A="ci";break;case "savi":b=I.getBandMatrix3([b[0],b[1],0]);A="savi";l[0]=q[2]+1;break;case "tsavi":b=I.getBandMatrix3([b[0],b[1],0]);A="tsavi";l[0]=q[2]+1;l[1]=q[3]+1;l[2]=q[4]+1;break;case "msavi":b=I.getBandMatrix3([b[0],b[1],0]);A="msavi";break;case "gemi":b=I.getBandMatrix3([b[0],b[1],0]);A="gemi";break;case "pvi":b=I.getBandMatrix3([b[0],b[1],0]);A="tsavi";l[0]=q[2]+1;l[1]=q[3]+1;break;case "vari":b=I.getBandMatrix3([b[0],b[1],b[2]]);
A="vari";break;case "mtvi2":b=I.getBandMatrix3([b[0],b[1],b[2]]);A="mtvi2";break;case "rtvi-core":b=I.getBandMatrix3([b[0],b[1],b[2]]);A="rtvicore";break;case "evi":b=I.getBandMatrix3([b[0],b[1],b[2]]);A="evi";break;case "wndwi":b=I.getBandMatrix3([b[0],b[1],0]);A="wndwi";l[0]=q[3]?q[3]+1:.5;break;case "bai":b=I.getBandMatrix3([b[1],b[0],0]);A="bai";break;default:b=I.getBandMatrix3([0,1,2]),A="custom"}return{bandIndexMat3:b,indexType:A,adjustments:l}};w._getInputBandIds=function(q){if("custom"===
this.functionArguments.method)return q;var b=this.functionArguments.bandIndexes.split(" ").map(u=>parseFloat(u)-1);const l=q.length;b=b.map(u=>u>=l?l-1:u);const A=x.has(this.functionArguments.method)?3:2;b=b.slice(0,A).map(u=>q[u]);2===b.length&&b.push(0);return b};return K._createClass(L)}(N);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:O,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",
void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunction")],p)})},"esri/layers/support/rasterFunctions/BandArithmeticFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O){var I;p=I=function(N){function x(){var L=w.apply(this,arguments);L.method="custom";return L}K._inherits(x,N);var w=K._createSuper(x);x.prototype.clone=function(){return new I({method:this.method,bandIndexes:this.bandIndexes,raster:M.clone(this.raster)})};return K._createClass(x)}(O);k.__decorate([H.property({json:{type:String,write:!0}})],p.prototype,"bandIndexes",void 0);k.__decorate([F.enumeration(V.bandIndexMethodMap)],p.prototype,"method",void 0);return p=I=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunctionArguments")],
p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(K,k,M){K.enumeration=function(H,p={}){H=H instanceof k.JSONMap?H:new k.JSONMap(H,p);H={type:p?.ignoreUnknown??!0?H.apiValues:String,json:{type:H.jsonValues,read:p?.readOnly?!1:{reader:H.read},write:{writer:H.write}}};void 0!==p?.readOnly&&(H.readOnly=!!p.readOnly);void 0!==p?.default&&(H.json.default=p.default);void 0!==p?.name&&(H.json.name=p.name);void 0!==p?.nonNullable&&
(H.nonNullable=p.nonNullable);return M.property(H)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/bandIndexUtils":function(){define("exports ../../../core/jsonMap ../../../core/maybe ../PixelBlock ./customBandIndexUtils ./pixelUtils".split(" "),function(K,k,M,H,p,F){function Z(f,d,h){const g=h.length,t=new Float32Array(g);for(let m=0;m<g;m++)if(null==f||f[m]){const v=d[m],y=h[m],D=v+y;D&&(t[m]=(v-y)/D)}return[t]}function V(f,d,h){const g=h.length,
t=new Float32Array(g);for(let m=0;m<g;m++)if(null==f||f[m]){const v=d[m],y=h[m];y&&(t[m]=v/y)}return[t]}function O(f,d,h){const g=d.length,t=new Float32Array(g);for(let m=0;m<g;m++)if(null==f||f[m]){const v=d[m],y=h[m];y&&(t[m]=v/y-1)}return[t]}function I(f,d,h,g){const t=h.length,m=new Float32Array(t);for(let v=0;v<t;v++)if(null==f||f[v]){const y=h[v],D=d[v],J=D+y+g;J&&(m[v]=(D-y)/J*(1+g))}return[m]}function N(f,d,h,g,t,m){const v=h.length,y=new Float32Array(v);m=-t*g+m*(1+g*g);for(let D=0;D<v;D++)if(null==
f||f[D]){const J=h[D],E=d[D],R=t*E+J+m;R&&(y[D]=g*(E-g*J-t)/R)}return[y]}function x(f,d,h){const g=h.length,t=new Float32Array(g);for(let m=0;m<g;m++)if(null==f||f[m]){const v=d[m];t[m]=.5*(2*(v+1)-Math.sqrt((2*v+1)**2-8*(v-h[m])))}return[t]}function w(f,d,h){const g=h.length,t=new Float32Array(g);for(let v=0;v<g;v++)if(null==f||f[v]){const y=h[v];var m=d[v];1!==y&&(m=(2*(m*m-y*y)+1.5*m+.5*y)/(m+y+.5),t[v]=m*(1-.25*m)-(y-.125)/(1-y))}return[t]}function L(f,d,h,g,t){const m=h.length,v=new Float32Array(m),
y=Math.sqrt(1+g*g);for(let D=0;D<m;D++)if(null==f||f[D])v[D]=(d[D]-g*h[D]-t)/y;return[v]}function r(f,d){const [h,g,t,m,v,y]=d;d=h.length;const D=new Float32Array(d);for(let J=0;J<d;J++)if(null==f||f[J])D[J]=-.2848*h[J]-.2435*g[J]-.5436*t[J]+.7243*m[J]+.084*v[J]-1.18*y[J];return[D]}function q(f,d){const [h,,g,t,m,v]=d;d=h.length;const y=new Float32Array(d),D=new Float32Array(d),J=new Float32Array(d);for(let E=0;E<d;E++)if(null==f||f[E])y[E]=v[E]?m[E]/v[E]*100:0,D[E]=h[E]?m[E]/h[E]*100:0,J[E]=t[E]?
g[E]/t[E]*(m[E]/t[E])*100:0;return[y,D,J]}function b(f,d){const [h,g,t]=d;d=h.length;const m=new Float32Array(d);for(let v=0;v<d;v++)if(null==f||f[v])for(v=0;v<d;v++){const y=h[v],D=g[v],J=D+y-t[v];J&&(m[v]=(D-y)/J)}return[m]}function l(f,d){const [h,g,t]=d;d=h.length;const m=new Float32Array(d);for(let v=0;v<d;v++)if(null==f||f[v])for(v=0;v<d;v++){const y=h[v],D=g[v],J=t[v];m[v]=1.5*(1.2*(y-J)-2.5*(D-J))*Math.sqrt((2*y+1)**2-6*y-5*Math.sqrt(D)-.5)}return[m]}function A(f,d){const [h,g,t]=d;d=h.length;
const m=new Float32Array(d);for(let v=0;v<d;v++)if(null==f||f[v])for(v=0;v<d;v++){const y=h[v];m[v]=100*(y-g[v])-10*(y-t[v])}return[m]}function u(f,d){const [h,g,t]=d;d=h.length;const m=new Float32Array(d);for(let v=0;v<d;v++)if(null==f||f[v])for(v=0;v<d;v++){const y=h[v],D=g[v],J=y+6*D-7.5*t[v]+1;J&&(m[v]=2.5*(y-D)/J)}return[m]}function a(f,d,h=.5){const [g,t,m]=d;d=t.length;const v=new Float32Array(d);for(let y=0;y<d;y++)if(null==f||f[y])for(y=0;y<d;y++){const D=g[y],J=t[y],E=m[y],R=D+h*J+(1-h)*
E;R&&(v[y]=(D-h*J-(1-h)*E)/R)}return[v]}function e(f,d,h){const g=h.length,t=new Float32Array(g);for(let m=0;m<g;m++)if(null==f||f[m])for(m=0;m<g;m++){const v=(.1-d[m])**2+(.06-h[m])**2;v&&(t[m]=1/v)}return[t]}k=new k.JSONMap({0:"custom",1:"ndvi",2:"savi",3:"tsavi",4:"msavi",5:"gemi",6:"pvi",7:"gvitm",8:"sultan",9:"vari",10:"gndvi",11:"sr",12:"ndvi-re",13:"sr-re",14:"mtvi2",15:"rtvi-core",16:"ci-re",17:"ci-g",18:"ndwi",19:"evi",20:"iron-oxide",21:"ferrous-minerals",22:"clay-minerals",23:"wndwi",24:"bai",
25:"nbr",26:"ndbi",27:"ndmi",28:"ndsi",29:"mndwi"},{useNumericKeys:!0});K.bandIndexMethodMap=k;K.calculateBandIndex=function(f,d){if(!F.isValidPixelBlock(f))return f;const {equation:h,method:g}=d;d=d.bandIndexes.map(y=>y-1);const {pixels:t,mask:m}=f;switch(g){case "gndvi":case "nbr":case "ndbi":case "ndvi":case "ndvi-re":case "ndsi":case "ndmi":case "mndwi":d=Z(m,t[d[0]],t[d[1]]);break;case "ndwi":d=Z(m,t[d[1]],t[d[0]]);break;case "sr":case "sr-re":case "iron-oxide":case "ferrous-minerals":case "clay-minerals":d=
V(m,t[d[0]],t[d[1]]);break;case "ci-g":case "ci-re":d=O(m,t[d[0]],t[d[1]]);break;case "savi":d=I(m,t[d[0]],t[d[1]],d[2]+1);break;case "tsavi":d=N(m,t[d[0]],t[d[1]],d[2]+1,d[3]+1,d[4]+1);break;case "msavi":d=x(m,t[d[0]],t[d[1]]);break;case "gemi":d=w(m,t[d[0]],t[d[1]]);break;case "pvi":d=L(m,t[d[0]],t[d[1]],d[2]+1,d[3]+1);break;case "gvitm":d=r(m,[t[d[0]],t[d[1]],t[d[2]],t[d[3]],t[d[4]],t[d[5]]]);break;case "sultan":d=q(m,[t[d[0]],t[d[1]],t[d[2]],t[d[3]],t[d[4]],t[d[5]]]);break;case "vari":d=b(m,[t[d[0]],
t[d[1]],t[d[2]]]);break;case "mtvi2":d=l(m,[t[d[0]],t[d[1]],t[d[2]]]);break;case "rtvi-core":d=A(m,[t[d[0]],t[d[1]],t[d[2]]]);break;case "evi":d=u(m,[t[d[0]],t[d[1]],t[d[2]]]);break;case "wndwi":d=a(m,[t[d[0]],t[d[1]],t[d[2]]],d[3]?d[3]+1:.5);break;case "bai":d=e(m,t[d[0]],t[d[1]]);break;case "custom":d=p.calculateCustomBandIndex(m,t,h);break;default:return f}const v=M.isSome(m)?new Uint8Array(m.length):null;M.isSome(m)&&M.isSome(v)&&v.set(m);f=new H({width:f.width,height:f.height,pixelType:"f32",
pixels:d,mask:v});f.updateStatistics();return f};K.calculateNDVI=function(f,d,h,g){const {mask:t,pixels:m,width:v,height:y}=f;f=m[h];d=m[d];h=d.length;const D=g?new Uint8Array(h):new Float32Array(h),J=g?100:1,E=g?100.5:0;for(let R=0;R<h;R++)if(null==t||t[R]){const z=f[R],C=d[R],U=z+C;U&&(D[R]=(z-C)/U*J+E)}g=new H({width:v,height:y,mask:t,pixelType:g?"u8":"f32",pixels:[D]});g.updateStatistics();return g};K.getBandMatrix3=function(f){const d=new Float32Array(9);d[3*f[0]]=1;d[3*f[1]+1]=1;d[3*f[2]+2]=
1;return d};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/customBandIndexUtils":function(){define(["exports","../../../core/has"],function(K,k){const M=new Set("+-*/()".split(""));K.calculateCustomBandIndex=function(H,p,F){F=F.replace(/ /g,"");F.startsWith("-")&&(F="0"+F);F.startsWith("+")&&(F=F.slice(1,F.length));F=F.split("");var Z=[],V=[],O="";for(let w=0;w<F.length;w++){const L=F[w];M.has(L)?(""!==O&&V.push(parseFloat(O)),Z.push(L),O=""):
"b"===L.toLowerCase()?(w++,O=L.concat(F[w]),V.push(p[parseInt(O[1],10)-1]),O=""):(O=O.concat(L),w===F.length-1&&V.push(parseFloat(O)))}let {ops:I,nums:N}={ops:Z,nums:V};if(0===I.length){H=1===N.length?N[0]:p[0];if(H instanceof Float32Array)return[H];var x=new Float32Array(p[0].length);"number"===typeof H?x.fill(H):x.set(H);return[x]}for(;0<I.length;){x=I;if(1===x.length)x={opIndex:0,numIndex:0};else{Z=F=0;for(p=0;p<x.length;p++)if("("===x[p])F=p;else if(")"===x[p]){Z=p;break}V=0===Z?x:x.slice(F+1,
Z);p=-1;for(O=0;O<V.length;O++)if("*"===V[O]||"/"===V[O]){p=O;break}if(!(-1<p))for(O=0;O<V.length;O++)if("+"===V[O]||"-"===V[O]){p=O;break}0<Z&&(p+=F+1);F=0;for(Z=0;Z<p;Z++)"("===x[Z]&&F++;x={opIndex:p,numIndex:p-F}}const {numIndex:w,opIndex:L}=x;Z=void 0;x=H;O=I[L];p=N[w];F=N[w+1];if("number"===typeof p&&"number"===typeof F)x=p+F;else{"number"===typeof p?(Z=F.length,V=p,p=new Float32Array(Z),p.fill(V)):(Z=p.length,F.constructor===Number&&(V=F,F=new Float32Array(Z),F.fill(V)));V=new Float32Array(Z);
switch(O){case "+":for(O=0;O<Z;O++)if(null==x||x[O])V[O]=p[O]+F[O];break;case "-":for(O=0;O<Z;O++)if(null==x||x[O])V[O]=p[O]-F[O];break;case "*":for(O=0;O<Z;O++)if(null==x||x[O])V[O]=p[O]*F[O];break;case "/":for(O=0;O<Z;O++)(null==x||x[O])&&F[O]&&(V[O]=p[O]/F[O]);break;case "(":case ")":throw Error("encountered error with custom band index equation");}x=V}if(1===I.length)break;else{p=I;p.splice(L,1);Z=F=0;do{Z=F=0;for(V=0;V<p.length;V++)if("("===p[V])F=V;else if(")"===p[V]){Z=V;break}Z===F+1&&p.splice(F,
2)}while(Z===F+1);I=p;N.splice(w,2,x)}}return[x]};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ColormapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./ColormapFunctionArguments ./colormaps ../../../renderers/support/colorRampUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){H=function(x){function w(){var r=L.apply(this,arguments);r.functionName="Colormap";r.functionArguments=null;r.rasterArgumentNames=["raster"];r.isNoopProcess=!0;return r}K._inherits(w,x);var L=K._createSuper(w);x=w.prototype;x._bindSourceRasters=function(){var r=this.sourceRasterInfos[0];if(1<r.bandCount)return{success:!1,supportsGPU:!1,error:"colormap-function: source data must be single band"};let {colormap:q,colormapName:b,colorRamp:l,colorRampName:A}=this.functionArguments;
if(!q?.length)if(l)q=N.convertColorRampToColormap(l,{interpolateAlpha:!0});else if(A){const u=N.getColorRampJSON(A);u&&(q=N.convertColorRampToColormap(u))}else b&&(q=I.getColormapByName(b));if(!q?.length)return{success:!1,supportsGPU:!1,error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");r=r.clone();r.pixelType=this.outputPixelType;r.colormap=q;r.bandCount=1;this.rasterInfo=r;return{success:!0,supportsGPU:!0}};x._processPixels=function(r){return r.pixelBlocks?.[0]};
return K._createClass(w)}(V);k.__decorate([M.property({json:{write:!0,name:"rasterFunction"}})],H.prototype,"functionName",void 0);k.__decorate([M.property({type:O,json:{write:!0,name:"rasterFunctionArguments"}})],H.prototype,"functionArguments",void 0);k.__decorate([M.property()],H.prototype,"rasterArgumentNames",void 0);k.__decorate([M.property()],H.prototype,"isNoopProcess",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"indexedColormap",void 0);return H=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.ColormapFunction")],
H)})},"esri/layers/support/rasterFunctions/ColormapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ../../../renderers/support/colorRampUtils ../../../rest/support/colorRamps".split(" "),function(K,k,M,H,p,F,
Z,V,O,I){var N;V=N=function(x){function w(){return L.apply(this,arguments)}K._inherits(w,x);var L=K._createSuper(w);x=w.prototype;x.castColormapName=function(r){if(!r)return null;r=r.toLowerCase();return O.rasterColormapNames.includes(r)?r:null};x.readColorRamp=function(r){return I.fromJSON(r)};x.readColorRampName=function(r,q){return r?(q=O.colorRampDict.jsonValues.find(b=>b.toLowerCase()===r.toLowerCase()))?O.colorRampDict.fromJSON(q):null:null};x.clone=function(){return new N({colormap:M.clone(this.colormap),
colormapName:this.colormapName,colorRamp:this.colorRamp?.clone(),colorRampName:this.colorRampName})};return K._createClass(w)}(V);k.__decorate([H.property({type:[[Number]],json:{write:!0}})],V.prototype,"colormap",void 0);k.__decorate([H.property({type:String,json:{write:!0}})],V.prototype,"colormapName",void 0);k.__decorate([p.cast("colormapName")],V.prototype,"castColormapName",null);k.__decorate([H.property({types:I.types,json:{write:!0}})],V.prototype,"colorRamp",void 0);k.__decorate([F.reader("colorRamp")],
V.prototype,"readColorRamp",null);k.__decorate([H.property({type:O.colorRampDict.apiValues,json:{type:O.colorRampDict.jsonValues,write:O.colorRampDict.write}})],V.prototype,"colorRampName",void 0);k.__decorate([F.reader("colorRampName")],V.prototype,"readColorRampName",null);return V=N=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.ColormapFunctionArguments")],V)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils","../../core/jsonMap"],
function(K,k,M,H){function p(b,l){if(!b||!l||b.length!==l.length)return!1;for(let A=0;A<b.length;A++)if(b[A]>l[A]+2||b[A]<l[A]-2)return!1;return!0}function F(b,l){if(b){l=l??L;var A=null;"algorithmic"===b.type?l.some(u=>{if(p(b.fromColor.toRgb(),u.fromColor)&&p(b.toColor.toRgb(),u.toColor))return A=u.id,!0}):"multipart"===b.type&&l.some(u=>{const a=b.colorRamps,e=u.colorRamps;if(a&&e&&a.length===e.length&&!e.some((f,d)=>{if(!p(a[d].fromColor.toRgb(),(new k(f.fromColor)).toRgb())||!p(a[d].toColor.toRgb(),
(new k(f.toColor)).toRgb()))return!0})){if(A)return!0;A=u.id}});return A}}function Z(b){return(b=F(b))?r[b]:null}function V(b){b=b||{};const l=b.numColors||256;return{...b,numColors:l,distanceOffset:b.distanceOffset||0,interpolateAlpha:!!b.interpolateAlpha,distanceInterval:b.distanceInterval||1/(l-1),isCustomInterval:null!=b.isCustomInterval?b.isCustomInterval:null!==b.distanceInterval&&b.distanceInterval!==1/(l-1),weights:b.weights}}function O(b,l){let {fromColor:A,toColor:u}=b;3===A.length&&(A=
A.concat([255]));3===u.length&&(u=u.concat([255]));b=b.algorithm||"esriCIELabAlgorithm";var a=V(l);const {numColors:e,distanceOffset:f,isCustomInterval:d,interpolateAlpha:h}=a;if(1===e&&0===f)return[A];if(2===e&&0===f&&!d)return[A,u];var g={r:A[0],g:A[1],b:A[2]};l={r:u[0],g:u[1],b:u[2]};if("esriCIELabAlgorithm"===b){b=M.toLAB(g);l=M.toLAB(l);const {numColors:y,distanceOffset:D,distanceInterval:J,isCustomInterval:E}=a;let {l:R,a:z,b:C}=b;b=(l.l-R)*J;g=(l.a-z)*J;a=(l.b-C)*J;var t=[];if(D){var m=D/J;
R+=m*b;z+=m*g;C+=m*a}for(m=0;m<y-1;m++)t.push({l:R,a:z,b:C}),R+=b,z+=g,C+=a;t.push(E?{l:R,a:z,b:C}:l);l=t}else if("esriHSVAlgorithm"===b){b=M.toHSV(g);l=M.toHSV(l);const {numColors:y,distanceOffset:D,distanceInterval:J,isCustomInterval:E}=a;t=0===b.s;m=0===l.s;g=b.h;a=l.h;t&&!m?g=a:m&&!t&&(l={...l,h:g},a=g);t=Math.abs(a-g);180>t?a=(a-g)*J:(t=360-t,a=g>a?t*J:-t*J);t=(l.s-b.s)*J;m=(l.v-b.v)*J;let {s:R,v:z}=b;b=g;D&&(g=D/J,b=(b+g*a+360)%360,R+=g*t,z+=g*m);g=[];for(var v=0;v<y-1;v++)g.push({h:b,s:R,v:z}),
b=(b+a+360)%360,R+=t,z+=m;g.push(E?{h:b,s:R,v:z}:l);l=g}else{g=M.toLCH(g);l=M.toLCH(l);const {numColors:y,distanceOffset:D,distanceInterval:J,isCustomInterval:E}=a;a=g.h;t=l.h;b=2*Math.PI;a<=t?(m=t-a,a=t-a-b,a=Math.abs(a)<Math.abs(m)?a:m):(m=t+b-a,a=t-a,a=Math.abs(a)<Math.abs(m)?a:m);a*=J;t=(l.l-g.l)*J;m=(l.c-g.c)*J;let {l:R,c:z,h:C}=g;D&&(g=D/J,R+=g*t,z+=g*m,C=(C+g*a+b)%b);g=[];for(v=0;v<y-1;v++)g.push({l:R,c:z,h:C}),R+=t,z+=m,C=(C+a+b)%b;g.push(E?{l:R,c:z,h:C}:l);l=g}b=[];g=A[3]??255;a=((u[3]??
255)-g)/(e-1);for(t=0;t<e;t++){const {r:y,g:D,b:J}=M.toRGB(l[t]);b.push([y,D,J,h?Math.round(g+a*t):255])}return b}function I(b,l){const {numColors:A,interpolateAlpha:u}=V(l);l=l?.weights;({colorRamps:b}=b);if(l){const t=l.reduce((m,v)=>m+v);l=l.map(m=>m/t)}else{l=[];for(var a=0;a<b.length;a++)l[a]=1/b.length}a=[];let e=0,f=0;const d=1/(A-1);let h=!1;for(let t=0;t<b.length;t++){var g=h?0:e*d-f;let m=t===b.length-1?A-1-e:(l[t]-g)/d;h=Math.ceil(m)===m;m=Math.ceil(m);0!==m&&(g/=l[t],g=O(b[t],{numColors:m,
interpolateAlpha:u,distanceOffset:g,distanceInterval:d/l[t]}),e+=g.length,a.push(...g),f+=l[t])}l=[...b[b.length-1].toColor];3===l.length&&l.push(255);a.push(l);return a}function N(b,l){b="toJSON"in b?b.toJSON():b;return"multipart"===b.type?I(b,l):O(b,l)}function x(b){if(b)return{Algorithm:b.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:w(b.fromColor),ToColor:w(b.toColor)}}function w(b){b=M.toHSV(b);return{type:"HsvColor",Hue:b.h,Saturation:b.s,Value:b.v,AlphaValue:255}}
const L=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,
0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,
85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",
type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",
type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,
255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,
102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},
{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,
63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},
{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],
toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",
fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,
53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",
type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},
{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",
colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,
167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],r={aspect_predefined:"Aspect",
blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",
conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",
partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",
purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",
redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",
yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"},q=new H.JSONMap({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right",
"Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue",
"Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","urple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright",
"Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright",
"Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});
K.PREDEFINED_COLOR_RAMP_NAME_MAP=r;K.PREDEFINED_JSON_COLOR_RAMPS=L;K.colorRampDict=q;K.convertColorRampToColormap=function(b,l){b=N(b,l);const A=l?.interpolateAlpha;b.forEach((u,a)=>{u.unshift(a);A||u.pop()});return b};K.convertColorRampToColors=N;K.getColorRampId=F;K.getColorRampJSON=function(b){const l=q.toJSON(b),A=Object.entries(r).find(u=>u[1]===l)?.[0];return(b=L.find(u=>u.id===A))?b.colorRamps?{type:"multipart",colorRamps:b.colorRamps.map(u=>({type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:u.fromColor,toColor:u.toColor}))}:{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:b.fromColor,toColor:b.toColor}:null};K.getColorRampName=Z;K.getRFxArgColorRampValue=function(b){const l=Z(b);if(b){if("algorithmic"===b.type)return{...x(b),Name:l};if(b.colorRamps)return b=b.colorRamps.map(x),{type:"MultiPartColorRamp",NumColorRamps:b.length,ArrayOfColorRamp:b,Name:l}}};K.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");K.rgbaConvertTo32Bit=function(b){b=
b.reverse().map(l=>{l=l.toString(16);return 2>l.length?"0"+l:l});return 4294967295&Number.parseInt(b.join(""),16)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(K,k,M,H){M={key:"type",base:M,typeMap:{algorithmic:k,multipart:H}};K.fromJSON=function(p){return p&&p.type?"algorithmic"===p.type?k.fromJSON(p):"multipart"===p.type?H.fromJSON(p):null:null};
K.types=M;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(K,k,M,H,p,F,Z,V,O){var I;O=I=function(N){function x(L){L=w.call(this,
L);L.algorithm=null;L.fromColor=null;L.toColor=null;L.type="algorithmic";return L}K._inherits(x,N);var w=K._createSuper(x);x.prototype.clone=function(){return new I({fromColor:H.clone(this.fromColor),toColor:H.clone(this.toColor),algorithm:this.algorithm})};return K._createClass(x)}(O);k.__decorate([Z.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],O.prototype,"algorithm",void 0);k.__decorate([p.property({type:M,json:{type:[F.Integer],write:!0}})],
O.prototype,"fromColor",void 0);k.__decorate([p.property({type:M,json:{type:[F.Integer],write:!0}})],O.prototype,"toColor",void 0);k.__decorate([p.property({type:["algorithmic"]})],O.prototype,"type",void 0);return O=I=k.__decorate([V.subclass("esri.rest.support.AlgorithmicColorRamp")],O)})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(K,k,M,H,p,F,Z,V){M=function(O){function I(x){x=N.call(this,x);x.type=null;return x}K._inherits(I,O);var N=K._createSuper(I);return K._createClass(I)}(M.JSONSupport);k.__decorate([H.property({readOnly:!0,json:{read:!1,write:!0}})],M.prototype,"type",void 0);return M=k.__decorate([V.subclass("esri.rest.support.ColorRamp")],M)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(K,k,M,H,p,F,Z,V){var O;p=O=function(I){function N(w){w=x.call(this,w);w.colorRamps=null;w.type="multipart";return w}K._inherits(N,I);var x=K._createSuper(N);N.prototype.clone=function(){return new O({colorRamps:M.clone(this.colorRamps)})};return K._createClass(N)}(V);k.__decorate([H.property({type:[Z],json:{write:!0}})],p.prototype,"colorRamps",void 0);k.__decorate([H.property({type:["multipart"]})],p.prototype,"type",void 0);return p=O=k.__decorate([F.subclass("esri.rest.support.MultipartColorRamp")],
p)})},"esri/layers/support/rasterFunctions/colormaps":function(){define(["exports","../../../renderers/support/colorRampUtils"],function(K,k){function M(V,O){const I=[],N=[];for(let x=0;x<V.length-1;x++)I.push({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:V[x].slice(1),toColor:V[x+1].slice(1)}),N.push(V[x+1][0]-V[x][0]);V=V[V.length-1][0];O=O??N;return k.convertColorRampToColors({type:"multipart",colorRamps:I},{numColors:V,weights:O})}function H(){const V=M([[0,255,255,255],[70,0,0,255],
[80,205,193,173],[100,150,150,150],[110,120,100,51],[130,120,200,100],[140,28,144,3],[160,6,55,0],[180,10,30,25],[201,6,27,7]]);for(let O=V.length;256>O;O++)V.push([6,27,7]);return V}function p(){const V=[];for(let O=0;256>O;O++){const I=[];for(let N=0;3>N;N++)I.push(Math.round(255*Math.random()));V.push(I)}return V}const F=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[112,75,3],[113,76,3],[114,77,3],[115,77,3],[116,78,3],[117,79,3],[118,79,3],[119,80,3],[121,81,4],[122,82,4],[123,82,4],[124,83,4],
[125,84,4],[126,84,4],[127,85,4],[128,86,4],[129,86,4],[130,87,4],[131,88,4],[132,89,4],[133,89,4],[134,90,4],[135,91,4],[136,91,4],[137,92,4],[138,93,4],[139,94,4],[140,94,4],[142,95,5],[143,96,5],[144,96,5],[145,97,5],[146,98,5],[147,99,5],[148,99,5],[149,100,5],[150,101,5],[151,101,5],[152,102,5],[153,103,5],[154,104,5],[155,104,5],[156,105,5],[157,106,5],[158,106,5],[159,107,5],[160,108,5],[161,108,5],[162,109,5],[164,110,6],[165,111,6],[166,111,6],[167,112,6],[168,113,6],[169,113,6],[170,114,
6],[171,115,6],[172,116,6],[173,116,6],[174,117,6],[245,0,0],[245,5,0],[245,10,0],[246,15,0],[246,20,0],[246,25,0],[246,30,0],[247,35,0],[247,40,0],[247,45,0],[247,50,0],[247,55,0],[248,60,0],[248,65,0],[248,70,0],[248,75,0],[249,81,0],[249,86,0],[249,91,0],[249,96,0],[250,101,0],[250,106,0],[250,111,0],[250,116,0],[250,121,0],[251,126,0],[251,131,0],[251,136,0],[251,141,0],[252,146,0],[252,151,0],[252,156,0],[252,156,0],[251,159,0],[250,162,0],[249,165,0],[248,168,0],[247,171,0],[246,174,0],[245,
177,0],[245,179,0],[244,182,0],[243,185,0],[242,188,0],[241,191,0],[240,194,0],[239,197,0],[238,200,0],[237,203,0],[236,206,0],[235,209,0],[234,212,0],[233,215,0],[232,218,0],[231,221,0],[230,224,0],[230,226,0],[229,229,0],[228,232,0],[227,235,0],[226,238,0],[225,241,0],[224,244,0],[223,247,0],[165,247,0],[163,244,0],[161,240,0],[158,237,0],[156,233,1],[154,230,1],[152,227,1],[149,223,1],[147,220,1],[145,216,1],[143,213,1],[140,210,2],[138,206,2],[136,203,2],[134,200,2],[132,196,2],[129,193,2],[127,
189,2],[125,186,3],[123,183,3],[120,179,3],[118,176,3],[116,172,3],[114,169,3],[111,166,3],[109,162,4],[107,159,4],[105,155,4],[103,152,4],[100,149,4],[98,145,4],[96,142,4],[94,138,5],[91,135,5],[89,132,5],[87,128,5],[85,125,5],[82,121,5],[80,118,5],[78,115,6],[76,111,6],[73,108,6],[71,105,6],[69,101,6],[67,98,6],[65,94,6],[62,91,7],[60,88,7],[58,84,7],[56,81,7],[53,77,7],[51,74,7],[49,71,7],[47,67,8],[44,64,8],[42,60,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,
8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],
[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8]],Z=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[245,20,0],[245,24,0],[245,29,0],[245,31,0],[247,33,0],[247,33,0],[247,37,0],[247,41,0],[247,41,0],[247,41,0],[247,45,0],[247,45,0],[247,47,0],[247,49,0],[247,49,0],[247,54,0],[247,54,0],[247,56,0],[247,58,0],[247,58,0],[250,62,0],[250,62,0],[250,62,0],[250,67,0],[250,67,0],[250,67,0],[250,69,0],[250,71,0],[250,
71,0],[250,75,0],[250,75,0],[250,78,0],[250,79,0],[250,79,0],[250,79,0],[250,81,0],[250,83,0],[250,83,0],[250,87,0],[250,87,0],[250,90,0],[250,92,0],[252,93,0],[252,93,0],[252,97,0],[252,97,0],[252,97,0],[252,97,0],[252,101,0],[252,101,0],[252,101,0],[252,101,0],[252,105,0],[252,105,0],[252,107,0],[252,109,0],[252,109,0],[252,113,13],[255,118,20],[255,119,23],[255,121,25],[255,126,33],[255,132,38],[255,133,40],[255,135,43],[255,141,48],[255,144,54],[255,150,59],[255,152,61],[255,153,64],[255,159,
69],[255,163,77],[255,165,79],[255,168,82],[255,174,87],[255,176,92],[255,181,97],[255,183,99],[255,186,102],[255,191,107],[255,197,115],[255,201,120],[255,203,123],[255,205,125],[255,209,130],[255,214,138],[255,216,141],[255,218,143],[255,224,150],[255,228,156],[255,234,163],[255,236,165],[255,238,168],[255,243,173],[255,248,181],[255,252,186],[253,252,186],[250,252,187],[244,250,180],[238,247,176],[234,246,173],[231,245,169],[223,240,163],[217,237,157],[211,235,150],[205,233,146],[200,230,142],
[195,227,136],[189,224,132],[184,222,126],[180,220,123],[174,217,119],[169,214,114],[163,212,108],[160,210,105],[154,207,101],[148,204,96],[143,201,93],[138,199,88],[134,197,84],[130,194,81],[126,191,77],[117,189,70],[115,186,68],[112,184,64],[106,181,60],[100,179,55],[94,176,49],[92,174,47],[90,173,45],[81,168,37],[75,166,33],[71,163,28],[66,160,24],[62,158,21],[56,156,14],[51,153,0],[51,153,0],[51,153,0],[50,150,0],[50,150,0],[50,150,0],[50,150,0],[49,148,0],[49,148,0],[49,148,0],[48,145,0],[48,
145,0],[48,145,0],[48,145,0],[48,143,0],[48,143,0],[48,143,0],[48,143,0],[47,140,0],[47,140,0],[47,140,0],[47,140,0],[46,138,0],[46,138,0],[46,138,0],[46,138,0],[45,135,0],[45,135,0],[45,135,0],[45,135,0],[44,133,0],[44,133,0],[44,133,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[42,128,0],[42,128,0],[42,128,0],[42,125,0],[42,125,0],[42,125,0],[42,125,0],[41,122,0],[41,122,0],[41,122,0],[41,122,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[39,117,0],[39,117,0],
[39,117,0],[39,117,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,
0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0]];K.getColormapByName=function(V){let O;switch(V){case "elevation":O=M([[0,0,191,191],[51,0,255,0],[102,255,255,0],[153,255,127,0],[204,191,127,63],[256,20,20,20]]);break;case "gray":O=k.convertColorRampToColors({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:[0,0,0],toColor:[255,255,255]});break;case "hillshade":O=M([[0,38,54,41],[69,79,90,82],
[131,156,156,156],[256,253,241,253]],[.268,.238,.495]);break;case "ndvi":O=F;break;case "ndvi2":O=H();break;case "ndvi3":O=Z;break;case "random":O=p()}return O?O=O.map((I,N)=>[N,...I]):null};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/CompositeBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./CompositeBandFunctionArguments ./pixelUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){p=function(x){function w(){var r=L.apply(this,arguments);r.functionName="CompositeBand";r.functionArguments=null;r.rasterArgumentNames=["rasters"];return r}K._inherits(w,x);var L=K._createSuper(w);x=w.prototype;x._bindSourceRasters=function(){const {sourceRasterInfos:r}=this;var q=r[0];this.outputPixelType=this._getOutputPixelType(q.pixelType);q=q.clone();q.attributeTable=null;q.colormap=null;q.pixelType=this.outputPixelType;q.bandCount=r.map(({bandCount:b})=>b).reduce((b,
l)=>b+l);if(r.every(({statistics:b})=>M.isSome(b)&&b.length)){const b=[];r.forEach(({statistics:l})=>M.isSome(l)&&b.push(...l));q.statistics=b}if(r.every(({histograms:b})=>M.isSome(b)&&b.length)){const b=[];r.forEach(({histograms:l})=>M.isSome(l)&&b.push(...l));q.histograms=b}1<q.bandCount&&(q.colormap=null,q.attributeTable=null);this.rasterInfo=q;return{success:!0,supportsGPU:3>=q.bandCount}};x._processPixels=function(r){({pixelBlocks:r}=r);return!r||M.isNone(r?.[0])?null:N.compositeBands(r)};x._getWebGLParameters=
function(){return{bandCount:this.rasterInfo.bandCount}};return K._createClass(w)}(O);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:I,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.CompositeBandFunction")],p)})},"esri/layers/support/rasterFunctions/CompositeBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V){var O;p=O=function(I){function N(){var w=x.apply(this,arguments);w.rasters=[];return w}K._inherits(N,I);var x=K._createSuper(N);I=N.prototype;I.writeRasters=function(w,L){L.rasters=w.map(r=>"number"===typeof r||"string"===typeof r?r:r.toJSON())};I.clone=function(){return new O({rasters:M.clone(this.rasters)})};return K._createClass(N)}(V);k.__decorate([H.property({json:{write:!0}})],p.prototype,"rasters",void 0);k.__decorate([Z.writer("rasters")],p.prototype,"writeRasters",
null);return p=O=k.__decorate([F.subclass("esri.layers.support.rasterFunctions.CompositeBandFunctionArguments")],p)})},"esri/layers/support/rasterFunctions/ConvolutionFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./ConvolutionFunctionArguments ./convolutionUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w){p=function(L){function r(){var b=q.apply(this,arguments);b.functionName="Convolution";b.rasterArgumentNames=["raster"];return b}K._inherits(r,L);var q=K._createSuper(r);L=r.prototype;L._bindSourceRasters=function(){const {convolutionType:b,rows:l,cols:A,kernel:u}=this.functionArguments;if(!Object.values(O.convolutionKernel).includes(b))return{success:!1,supportsGPU:!1,error:`convolution-function: the specified kernel type is not supported ${b}`};if(b!==O.convolutionKernel.none&&
l*A!==u.length)return{success:!1,supportsGPU:!1,error:"convolution-function: the specified rows and cols do not match the length of the kernel"};var a=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(a.pixelType);a=a.clone();a.pixelType=this.outputPixelType;const e=[O.convolutionKernel.none,O.convolutionKernel.sharpen,O.convolutionKernel.sharpen2,O.convolutionKernel.sharpening3x3,O.convolutionKernel.sharpening5x5];"u8"===this.outputPixelType||e.includes(b)||(a.statistics=null,
a.histograms=null);a.colormap=null;a.attributeTable=null;this.rasterInfo=a;return{success:!0,supportsGPU:25>=u.length}};L._processPixels=function(b){b=b.pixelBlocks?.[0];if(M.isNone(b)||this.functionArguments.convolutionType===O.convolutionKernel.none)return b;let {kernel:l,rows:A,cols:u}=this.functionArguments;const a=l.reduce((e,f)=>e+f);0!==a&&1!==a&&(l=l.map(e=>e/a));return w.convolute(b,{kernel:l,rows:A,cols:u,outputPixelType:this.outputPixelType})};L._getWebGLParameters=function(){let {kernel:b}=
this.functionArguments;const l=b.reduce((u,a)=>u+a);0!==l&&1!==l&&(b=b.map(u=>u/l));const A=new Float32Array(25);A.set(b);return{kernelRows:this.functionArguments.rows,kernelCols:this.functionArguments.cols,kernel:A,clampRange:I.getPixelValueRange(this.outputPixelType)}};return K._createClass(r)}(N);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:x,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",
void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.ConvolutionFunction")],p)})},"esri/layers/support/rasterFunctionConstants":function(){define(["exports"],function(K){const k={plus:1,minus:2,times:3,sqrt:4,power:5,abs:10,divide:23,exp:25,exp10:26,exp2:27,int:30,float:32,ln:35,log10:36,log2:37,mod:44,negate:45,roundDown:48,roundUp:49,square:53,floatDivide:64,floorDivide:65},M={bitwiseAnd:11,bitwiseLeftShift:12,
bitwiseNot:13,bitwiseOr:14,bitwiseRightShift:15,bitwiseXOr:16,booleanAnd:17,booleanNot:18,booleanOr:19,booleanXOr:20,equalTo:24,greaterThan:28,greaterThanEqual:29,lessThan:33,lessThanEqual:34,isNull:31,notEqual:46},H={acos:6,asin:7,atan:8,atanh:9,cos:21,cosh:22,sin:51,sinh:52,tan:56,tanh:57,acosh:59,asinh:60,atan2:61},p={majority:38,max:39,mean:40,med:41,min:42,minority:43,range:47,stddev:54,sum:55,variety:58,majorityIgnoreNoData:66,maxIgnoreNoData:67,meanIgnoreNoData:68,medIgnoreNoData:69,minIgnoreNoData:70,
minorityIgnoreNoData:71,rangeIgnoreNoData:72,stddevIgnoreNoData:73,sumIgnoreNoData:74,varietyIgnoreNoData:75},F={setNull:50,conditional:78},Z={...k,...M,...H,...p,...F};K.bandIndexType={userDefined:0,NDVI:1,SAVI:2,TSAVI:3,MSAVI:4,GEMI:5,PVI:6,GVITM:7,Sultan:8,VARI:9,GNDVI:10,SR:11,NDVIRe:12,SRRe:13,MTVI2:14,RTVICore:15,CIRe:16,CIG:17,NDWI:18,EVI:19,ironOxide:20,ferrousMinerals:21,clayMinerals:22,WNDWI:23,BAI:24,NBR:25,NDBI:26,NDMI:27,NDSI:28,MNDWI:29};K.cellStatisticalOperation=p;K.colorRampName=
{aspect:"Aspect",blackToWhite:"Black to White",blueBright:"Blue Bright",blueLightToDark:"Blue Light to Dark",blueGreenBright:"Blue-Green Bright",blueGreenLightToDark:"Blue-Green Light to Dark",brownLightToDark:"Brown Light to Dark",brownToBlueGreenDivergingRight:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDiverging:"Brown to Blue Green Diverging, Dark",coefficientBias:"Coefficient Bias",coldToHotDiverging:"Cold to Hot Diverging",conditionNumber:"Condition Number",cyanToPurple:"Cyan to Purple",
cyanLightToBlueDark:"Cyan-Light to Blue-Dark",distance:"Distance",elevation1:"Elevation #1",elevation2:"Elevation #2",errors:"Errors",grayLightToDark:"Gray Light to Dark",greenBright:"Green Bright",greenLightToDark:"Green Light to Dark",greenToBlue:"Green to Blue",orangeBright:"Orange Bright",orangeLightToDark:"Orange Light to Dark",partialSpectrum:"Partial Spectrum",partialSpectrum1Diverging:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark:"Pink to YellowGreen Diverging, Dark",precipitation:"Precipitation",prediction:"Prediction",purpleBright:"Purple Bright",purpleToGreenDivergingBright:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark:"Purple to Green Diverging, Dark",purpleBlueBright:"Purple-Blue Bright",purpleBlueLightToDark:"Purple-Blue Light to Dark",purpleRedBright:"Purple-Red Bright",purpleRedLightToDark:"Purple-Red Light to Dark",redBright:"Red Bright",redLightToDark:"Red Light to Dark",
redToBlueDivergingBright:"Red to Blue Diverging, Bright",redToBlueDivergingDark:"Red to Blue Diverging, Dark",redToGreen:"Red to Green",redToGreenDivergingBright:"Red to Green Diverging, Bright",redToGreenDivergingDark:"Red to Green Diverging, Dark",slope:"Slope",spectrumFullBright:"Spectrum-Full Bright",spectrumFullDark:"Spectrum-Full Dark",spectrumFullLight:"Spectrum-Full Light",surface:"Surface",temperature:"Temperature",whiteToBlack:"White to Black",yellowToDarkRed:"Yellow to Dark Red",yellowToGreenToDarkBlue:"Yellow to Green to Dark Blue",
yellowToRed:"Yellow to Red",yellowGreenBright:"Yellow-Green Bright",yellowGreenLightToDark:"Yellow-Green Light to Dark"};K.colormapName={random:"Random",NDVI:"NDVI",NDVI2:"NDVI2",NDVI3:"NDVI3",elevation:"Elevation",gray:"Gray",hillshade:"Hillshade"};K.convolutionKernel={userDefined:-1,lineDetectionHorizontal:0,lineDetectionVertical:1,lineDetectionLeftDiagonal:2,lineDetectionRightDiagonal:3,gradientNorth:4,gradientWest:5,gradientEast:6,gradientSouth:7,gradientNorthEast:8,gradientNorthWest:9,smoothArithmeticMean:10,
smoothing3x3:11,smoothing5x5:12,sharpening3x3:13,sharpening5x5:14,laplacian3x3:15,laplacian5x5:16,sobelHorizontal:17,sobelVertical:18,sharpen:19,sharpen2:20,pointSpread:21,none:255};K.localArithmeticOperation=k;K.localConditionalOperation=F;K.localLogicalOperation=M;K.localOperators=Z;K.localTrigonometricOperation=H;K.missingBandAction={bestMatch:0,fail:1};K.noDataInterpretation={matchAny:0,matchAll:1};K.slopeType={degree:1,percentRise:2,adjusted:3};K.stretchType={none:0,standardDeviation:3,histogramEqualization:4,
minMax:5,percentClip:6,sigmoid:9};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ConvolutionFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ./BaseFunctionArguments ./convolutionUtils".split(" "),function(K,
k,M,H,p,F,Z,V,O){var I;p=I=function(N){function x(){var L=w.apply(this,arguments);L.rows=3;L.cols=3;L.kernel=[0,0,0,0,1,0,0,0,0];return L}K._inherits(x,N);var w=K._createSuper(x);x.prototype.clone=function(){return new I({cols:this.cols,rows:this.rows,kernel:[...this.kernel],convolutionType:this.convolutionType,raster:M.clone(this.raster)})};K._createClass(x,[{key:"convolutionType",set:function(L){this._set("convolutionType",L);const r=O.convolutionKernels.get(L);r&&L!==Z.convolutionKernel.userDefined&&
L!==Z.convolutionKernel.none&&(L=Math.sqrt(r.length),this._set("kernel",r),this._set("cols",L),this._set("rows",L))}}]);return x}(V);k.__decorate([H.property({json:{type:Number,write:!0}})],p.prototype,"rows",void 0);k.__decorate([H.property({json:{type:Number,write:!0}})],p.prototype,"cols",void 0);k.__decorate([H.property({json:{name:"type",type:Number,write:!0}})],p.prototype,"convolutionType",null);k.__decorate([H.property({json:{type:[Number],write:!0}})],p.prototype,"kernel",void 0);return p=
I=k.__decorate([F.subclass("esri.layers.support.rasterFunctions.ConvolutionFunctionArguments")],p)})},"esri/layers/support/rasterFunctions/convolutionUtils":function(){define(["exports","../PixelBlock","../rasterFunctionConstants"],function(K,k,M){function H(I){const N=Math.sqrt(I.length),x=I.slice(0,N),w=[1];for(let L=1;L<N;L++){let r=null;for(let q=0;q<N;q++){const b=I[q+L*N],l=I[q];if(null==r)if(0===l){if(b)return{separable:!1,row:null,col:null}}else r=b/l;else if(b/l!==r)return{separable:!1,row:null,
col:null}}if(null==r)return{separable:!1,row:null,col:null};w.push(r)}return{separable:!0,row:x,col:w}}function p(I,N,x,w,L,r,q){const b=new Float32Array(N*x),l=r.length,A=q?0:w,u=q?w:0;q=q?1:N;for(let a=A;a<x-A;a++){const e=a*N;for(let f=u;f<N-u;f++){if(L&&!L[e+f])continue;let d=0;for(let h=0;h<l;h++)d+=I[e+f+(h-w)*q]*r[h];b[e+f]=d}}return b}function F(I,N,x=!0){const {pixels:w,width:L,height:r,pixelType:q,mask:b}=I;I=w.length;const l=[],{kernel:A,rows:u,cols:a}=N;for(N=0;N<I;N++){var e=w[N],f=L,
d=r,h=u,g=a,t=b,m=A;const v=new Float32Array(f*d),y=Math.floor(h/2),D=Math.floor(g/2);for(let J=y;J<d-y;J++){const E=J*f;for(let R=D;R<f-D;R++){if(t&&!t[E+R])continue;let z=0;for(let C=0;C<h;C++)for(let U=0;U<g;U++)z+=e[E+R+(C-y)*f+U-D]*m[C*g+U];v[E+R]=z}}e=v;x&&Z(e,L,r,u,a);l.push(e)}return new k({width:L,height:r,pixelType:q,pixels:l,mask:b})}function Z(I,N,x,w,L){w=Math.floor(w/2);for(var r=0;r<w;r++)for(var q=0;q<N;q++)I[r*N+q]=I[(L-1-r)*N+q],I[(x-1-r)*N+q]=I[(x-L+r)*N+q];w=Math.floor(L/2);for(r=
0;r<x;r++){q=r*N;for(let b=0;b<w;b++)I[q+b]=I[q+L-1-b],I[q+N-b-1]=I[q+N+b-L]}}function V(I,N,x,w=!0){const {pixels:L,width:r,height:q,pixelType:b,mask:l}=I;I=L.length;const A=[],u=N.length,a=x.length,e=Math.floor(u/2),f=Math.floor(a/2);for(let d=0;d<I;d++){let h=p(L[d],r,q,e,l,N,!0);h=p(h,r,q,f,l,x,!1);w&&Z(h,r,q,u,a);A.push(h)}return new k({width:r,height:q,pixelType:b,pixels:A,mask:l})}const O=new Map;O.set(M.convolutionKernel.none,[0,0,0,0,1,0,0,0,0]);O.set(M.convolutionKernel.lineDetectionHorizontal,
[-1,-1,-1,2,2,2,-1,-1,-1]);O.set(M.convolutionKernel.lineDetectionVertical,[-1,2,-1,-1,2,-1,-1,2,-1]);O.set(M.convolutionKernel.lineDetectionLeftDiagonal,[2,-1,-1,-1,2,-1,-1,-1,2]);O.set(M.convolutionKernel.lineDetectionRightDiagonal,[-1,-1,2,-1,2,-1,2,-1,-1]);O.set(M.convolutionKernel.gradientNorth,[-1,-2,-1,0,0,0,1,2,1]);O.set(M.convolutionKernel.gradientWest,[-1,0,1,-2,0,2,-1,0,1]);O.set(M.convolutionKernel.gradientEast,[1,0,-1,2,0,-2,1,0,-1]);O.set(M.convolutionKernel.gradientSouth,[1,2,1,0,0,
0,-1,-2,-1]);O.set(M.convolutionKernel.gradientNorthEast,[0,-1,-2,1,0,-1,2,1,0]);O.set(M.convolutionKernel.gradientNorthWest,[-2,-1,0,-1,0,1,0,1,2]);O.set(M.convolutionKernel.smoothArithmeticMean,[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111]);O.set(M.convolutionKernel.smoothing3x3,[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625]);O.set(M.convolutionKernel.smoothing5x5,[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,
1,1]);O.set(M.convolutionKernel.sharpening3x3,[-1,-1,-1,-1,9,-1,-1,-1,-1]);O.set(M.convolutionKernel.sharpening5x5,[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1]);O.set(M.convolutionKernel.laplacian3x3,[0,-1,0,-1,4,-1,0,-1,0]);O.set(M.convolutionKernel.laplacian5x5,[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0]);O.set(M.convolutionKernel.sobelHorizontal,[-1,-2,-1,0,0,0,1,2,1]);O.set(M.convolutionKernel.sobelVertical,[-1,0,1,-2,0,2,-1,0,1]);O.set(M.convolutionKernel.sharpen,
[0,-.25,0,-.25,2,-.25,0,-.25,0]);O.set(M.convolutionKernel.sharpen2,[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25]);O.set(M.convolutionKernel.pointSpread,[-.627,.352,-.627,.352,2.923,.352,-.627,.352,-.627]);K.convolute=function(I,N){const x=H(N.kernel),w=!1!==N.mirrorEdges;I=x.separable?V(I,x.row,x.col,w):F(I,N,w);({outputPixelType:N}=N);N&&I.clamp(N);return I};K.convoluteSeparable=V;K.convolutionKernels=O;K.separateKernels=H;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ExtractBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./ExtractBandFunctionArguments ./pixelUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x){p=function(w){function L(){var q=r.apply(this,arguments);q.functionName="ExtractBand";q.functionArguments=null;q.rasterArgumentNames=["raster"];return q}K._inherits(L,w);var r=K._createSuper(L);w=L.prototype;w._bindSourceRasters=function(){var {sourceRasterInfos:q}=this;q=q[0];const {bandCount:b}=q,{bandIds:l,missingBandAction:A}=this.functionArguments;if(A===x.MissingBandAction.fail&&l.some(e=>0>e||e>=b))return{success:!1,supportsGPU:!1,error:"extract-band-function: invalid bandIds"};
this.outputPixelType=this._getOutputPixelType("f32");q=q.clone();q.pixelType=this.outputPixelType;q.bandCount=l.length;const {statistics:u,histograms:a}=q;M.isSome(u)&&u.length&&(q.statistics=l.map(e=>u[e]||u[u.length-1]));M.isSome(a)&&a.length&&(q.histograms=l.map(e=>a[e]||a[a.length-1]));this.rasterInfo=q;return{success:!0,supportsGPU:3>=q.bandCount}};w._processPixels=function(q){q=q.pixelBlocks?.[0];if(M.isNone(q))return null;const b=q.pixels.length,l=this.functionArguments.bandIds.map(A=>A>=b?
b-1:A);return q.extractBands(l)};w._getWebGLParameters=function(){let q;if(this.isInputBandIdsSwizzled)q=this.swizzledBandSelection.length?this.swizzledBandSelection:[0,1,2];else{q=[...this.functionArguments.bandIds];0===q.length?q=[0,1,2]:3>q.length&&(q[1]=q[1]??q[0],q[2]=q[2]??q[1]);for(let b=0;3>b;b++)q[b]=Math.min(q[b],2)}return{bandIndexMat3:O.getBandMatrix3(q)}};w._getInputBandIds=function(q){const b=q.length;return this.functionArguments.bandIds.map(l=>l>=b?b-1:l).map(l=>q[l])};return K._createClass(L)}(I);
k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:N,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.ExtractBandFunction")],p)})},"esri/layers/support/rasterFunctions/ExtractBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O){var I;H=I=function(N){function x(){var L=w.apply(this,arguments);L.bandIds=[];L.missingBandAction=O.MissingBandAction.bestMatch;return L}K._inherits(x,N);var w=K._createSuper(x);x.prototype.clone=function(){return new I({bandIds:[...this.bandIds],missingBandAction:this.missingBandAction})};return K._createClass(x)}(V);k.__decorate([M.property({json:{write:!0}})],H.prototype,"bandIds",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"missingBandAction",void 0);
return H=I=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.ExtractBandFunctionArguments")],H)})},"esri/layers/support/rasterFunctions/LocalFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./LocalFunctionArguments ./localUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w){p=function(L){function r(){var b=q.apply(this,arguments);b.functionName="Local";b.functionArguments=null;b.rasterArgumentNames=["rasters"];return b}K._inherits(r,L);var q=K._createSuper(r);L=r.prototype;L._bindSourceRasters=function(){var {sourceRasterInfos:b}=this,l=b[0];const {bandCount:A}=l;var {processAsMultiband:u}=this.functionArguments;if(b.some(f=>f.bandCount!==A))return{success:!1,supportsGPU:!1,error:"local-function: input rasters do not have same band count"};
const {operation:a,rasters:e}=this.functionArguments;b=w.operandsCount[a];if(!(999===b||e.length===b||1>=e.length&&1===b))return{success:!1,supportsGPU:!1,error:`local-function: the length of functionArguments.rasters does not match operation's requirement: ${b}`};this.outputPixelType=this._getOutputPixelType("f32");l=l.clone();l.pixelType=this.outputPixelType;l.statistics=null;l.histograms=null;l.colormap=null;l.attributeTable=null;l.bandCount=999!==b||u?A:1;if(u=w.getOutputDomain(a)){l.statistics=
[];for(let f=0;f<l.bandCount;f++)l.statistics[f]={min:u[0],max:u[1],avg:(u[0]+u[1])/2,stddev:(u[0]+u[1])/10}}this.rasterInfo=l;return{success:!0,supportsGPU:1===l.bandCount&&3>=b&&(11>a||16<a)}};L._processPixels=function(b){({pixelBlocks:b}=b);return M.isNone(b)||b.some(l=>M.isNone(l))?null:w.local(b,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})};L._getWebGLParameters=function(){const {operation:b}=this.functionArguments,
l=w.operandsCount[b],A=Object.keys(O.localOperators).find(f=>O.localOperators[f]===b)?.toLowerCase()??"undefined";var u=this.outputPixelType??"f32";let [a,e]=I.getPixelValueRange(u);if(u=u.startsWith("u")||u.startsWith("s"))a-=1E-4,e+=1E-4;return{imageCount:l,operationName:A,domainRange:[a,e],isOutputRounded:u}};return K._createClass(r)}(N);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:x,json:{write:!0,name:"rasterFunctionArguments"}})],
p.prototype,"functionArguments",void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.LocalFunction")],p)})},"esri/layers/support/rasterFunctions/LocalFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V){var O;p=O=function(I){function N(){var w=x.apply(this,arguments);w.rasters=[];w.processAsMultiband=!0;return w}K._inherits(N,I);var x=K._createSuper(N);I=N.prototype;I.writeRasters=function(w,L){L.rasters=w.map(r=>"number"===typeof r||"string"===typeof r?r:r.toJSON())};I.clone=function(){return new O({operation:this.operation,processAsMultiband:this.processAsMultiband,rasters:M.clone(this.rasters)})};return K._createClass(N)}(V);k.__decorate([H.property({json:{write:!0}})],
p.prototype,"operation",void 0);k.__decorate([H.property({json:{write:!0}})],p.prototype,"rasters",void 0);k.__decorate([Z.writer("rasters")],p.prototype,"writeRasters",null);k.__decorate([H.property({json:{write:!0}})],p.prototype,"processAsMultiband",void 0);return p=O=k.__decorate([F.subclass("esri.layers.support.rasterFunctions.LocalFunctionArguments")],p)})},"esri/layers/support/rasterFunctions/localUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFunctionConstants",
"../rasterFormats/pixelRangeUtils"],function(K,k,M,H,p){function F(Y,la=!1){var aa=Y.map(ha=>ha.mask);const sa=aa.filter(ha=>k.isSome(ha));var ta=Y[0].pixels[0].length;if(0===sa.length)return(new Uint8Array(ta)).fill(255);Y=new Uint8Array(sa[0]);if(1===sa.length)return Y;if(!la){for(la=1;la<sa.length;la++)for(aa=sa[la],ta=0;ta<Y.length;ta++)Y[ta]&&(Y[ta]=aa[ta]?255:0);return Y}if(sa.length!==aa.length)return(new Uint8Array(ta)).fill(255);for(la=1;la<sa.length;la++)for(aa=sa[la],ta=0;ta<Y.length;ta++)0===
Y[ta]&&(Y[ta]=aa[ta]?255:0);return Y}function Z(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]+ta[ha];return aa}function V(Y,la,aa){[Y]=Y;la=M.createEmptyBand("f32",Y.length);la.set(Y);return la}function O(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]-ta[ha];return aa}function I(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||
la[ha])aa[ha]=sa[ha]*ta[ha];return aa}function N(Y,la,aa){[Y]=Y;const sa=Y.length;aa=M.createEmptyBand(aa,sa);for(let ta=0;ta<sa;ta++)if(!la||la[ta])aa[ta]=Math.sign(Y[ta])*Math.floor(Math.abs(Y[ta]));return aa}function x(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]/ta[ha];return aa}function w(Y,la,aa){return x(Y,la,"f32")}function L(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||
la[ha])aa[ha]=Math.floor(sa[ha]/ta[ha]);return aa}function r(Y,la,aa,sa){Y=Y[0];const ta=Y.length;aa=M.createEmptyBand(aa,ta);if(sa===H.localTrigonometricOperation.atanh){for(sa=0;sa<ta;sa++)if(la[sa]){var ha=Y[sa];1<=Math.abs(ha)?la[sa]=0:aa[sa]=Math.atanh(ha)}return aa}sa=sa===H.localTrigonometricOperation.asin?Math.asin:Math.acos;for(ha=0;ha<ta;ha++)if(la[ha]){const ya=Y[ha];1<Math.abs(ya)?la[ha]=0:aa[ha]=sa(ya)}return aa}function q(Y,la,aa,sa){[Y]=Y;const ta=Y.length;aa=M.createEmptyBand(aa,ta);
for(let ha=0;ha<ta;ha++)if(!la||la[ha])aa[ha]=sa(Y[ha]);return aa}function b(Y,la,aa,sa){const [ta,ha]=Y;Y=ta.length;aa=M.createEmptyBand(aa,Y);for(let ya=0;ya<Y;ya++)if(!la||la[ya])aa[ya]=sa(ta[ya],ha[ya]);return aa}function l(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]&ta[ha];return aa}function A(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]<<ta[ha];return aa}
function u(Y,la,aa){[Y]=Y;const sa=Y.length;aa=M.createEmptyBand(aa,sa);for(let ta=0;ta<sa;ta++)if(!la||la[ta])aa[ta]=~Y[ta];return aa}function a(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]|ta[ha];return aa}function e(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]>>ta[ha];return aa}function f(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=
0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]^ta[ha];return aa}function d(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]&&ta[ha]?1:0;return aa}function h(Y,la,aa){[Y]=Y;const sa=Y.length;aa=M.createEmptyBand(aa,sa);for(let ta=0;ta<sa;ta++)if(!la||la[ta])aa[ta]=Y[ta]?0:1;return aa}function g(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]||ta[ha]?1:0;return aa}function t(Y,
la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=(sa[ha]?1:0)^(ta[ha]?1:0);return aa}function m(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]===ta[ha]?1:0;return aa}function v(Y,la,aa,sa){[Y]=Y;const ta=Y.length;aa=M.createEmptyBand(aa,ta);const ha=sa===Math.E;for(let ya=0;ya<ta;ya++)if(!la||la[ya])aa[ya]=ha?Math.exp(Y[ya]):sa**Y[ya];return aa}function y(Y,la,aa){return v(Y,
la,aa,10)}function D(Y,la,aa){return v(Y,la,aa,2)}function J(Y,la,aa){return v(Y,la,aa,Math.E)}function E(Y,la,aa,sa){[Y]=Y;const ta=Y.length;aa=M.createEmptyBand(aa,ta);for(let ha=0;ha<ta;ha++)if(!la||la[ha])0>=Y[ha]?la[ha]=0:aa[ha]=sa(Y[ha]);return aa}function R(Y,la,aa){return E(Y,la,aa,Math.log10)}function z(Y,la,aa){return E(Y,la,aa,Math.log2)}function C(Y,la,aa){return E(Y,la,aa,Math.log)}function U(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||
la[ha])aa[ha]=sa[ha]>ta[ha]?1:0;return aa}function ia(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]>=ta[ha]?1:0;return aa}function fa(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]<ta[ha]?1:0;return aa}function B(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]<=ta[ha]?1:0;return aa}function G(Y,
la,aa){[Y]=Y;Y=Y.length;aa=M.createEmptyBand(aa,Y);if(!la)return aa;for(let sa=0;sa<Y;sa++)aa[sa]=la[sa]?0:1;return aa}function Q(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||la[ha])aa[ha]=sa[ha]%ta[ha];return aa}function X(Y,la,aa){[Y]=Y;const sa=Y.length;aa=M.createEmptyBand(aa,sa);for(let ta=0;ta<sa;ta++)if(!la||la[ta])aa[ta]=-Y[ta];return aa}function ja(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)if(!la||
la[ha])aa[ha]=sa[ha]===ta[ha]?0:1;return aa}function ca(Y,la,aa){const [sa,ta]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);const ha=new Uint8Array(Y);for(let ya=0;ya<Y;ya++)null!=la&&!la[ya]||0!==sa[ya]||(aa[ya]=ta[ya],ha[ya]=255);return{band:aa,mask:ha}}function ba(Y,la,aa){const [sa,ta,ha]=Y;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ya=0;ya<Y;ya++)if(!la||la[ya])aa[ya]=sa[ya]?ta[ya]:ha[ya];return aa}function oa(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];const [ta]=Y,ha=ta.length;aa=M.createEmptyBand(aa,
ha);for(let ya=0;ya<ha;ya++)if(!la||la[ya]){let Ba=ta[ya];for(let Fa=1;Fa<sa;Fa++){const Ia=Y[Fa][ya];Ba<Ia&&(Ba=Ia)}aa[ya]=Ba}return aa}function ea(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];const [ta]=Y,ha=ta.length;aa=M.createEmptyBand(aa,ha);for(let ya=0;ya<ha;ya++)if(!la||la[ya]){let Ba=ta[ya];for(let Fa=1;Fa<sa;Fa++){const Ia=Y[Fa][ya];Ba>Ia&&(Ba=Ia)}aa[ya]=Ba}return aa}function wa(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];const [ta]=Y,ha=ta.length;aa=M.createEmptyBand(aa,ha);for(let ya=
0;ya<ha;ya++)if(!la||la[ya]){let Ba=ta[ya],Fa=Ba;for(let Ia=1;Ia<sa;Ia++){const Ka=Y[Ia][ya];Fa<Ka?Fa=Ka:Ba>Ka&&(Ba=Ka)}aa[ya]=Fa-Ba}return aa}function c(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];var [ta]=Y;ta=ta.length;aa=M.createEmptyBand(aa,ta);for(let ha=0;ha<ta;ha++)if(!la||la[ha]){let ya=0;for(let Ba=0;Ba<sa;Ba++)ya+=Y[Ba][ha];aa[ha]=ya/sa}return aa}function n(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];var [ta]=Y;ta=ta.length;aa=M.createEmptyBand(aa,ta);for(let ha=0;ha<ta;ha++)if(!la||
la[ha])for(let ya=0;ya<sa;ya++)aa[ha]+=Y[ya][ha];return aa}function P(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];var [ta]=Y;ta=ta.length;aa=M.createEmptyBand(aa,ta);for(let Ba=0;Ba<ta;Ba++)if(!la||la[Ba]){const Fa=new Float32Array(sa);let Ia=0;for(var ha=0;ha<sa;ha++){var ya=Y[ha];Ia+=ya[Ba];Fa[ha]=ya[Ba]}Ia/=sa;ha=0;for(ya=0;ya<sa;ya++)ha+=(Fa[ya]-Ia)**2;aa[Ba]=Math.sqrt(ha/sa)}return aa}function S(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];const ta=Math.floor(sa/2);var [ha]=Y;ha=ha.length;
aa=M.createEmptyBand(aa,ha);const ya=new Float32Array(sa),Ba=1===sa%2;for(let Fa=0;Fa<ha;Fa++)if(!la||la[Fa]){for(let Ia=0;Ia<sa;Ia++)ya[Ia]=Y[Ia][Fa];ya.sort();aa[Fa]=Ba?ya[ta]:(ya[ta]+ya[ta-1])/2}return aa}function ma(Y,la,aa){const [sa,ta]=Y;if(null==ta)return sa;Y=sa.length;aa=M.createEmptyBand(aa,Y);for(let ha=0;ha<Y;ha++)la[ha]&&(sa[ha]===ta[ha]?aa[ha]=sa[ha]:la[ha]=0);return aa}function ka(Y,la,aa){const sa=Y.length;if(2>=sa)return ma(Y,la,aa);const ta=Y[0].length;aa=M.createEmptyBand(aa,ta);
const ha=new Map;for(let Ba=0;Ba<ta;Ba++)if(!la||la[Ba]){ha.clear();let Fa;for(var ya=0;ya<sa;ya++)Fa=Y[ya][Ba],ha.set(Fa,ha.has(Fa)?ha.get(Fa)+1:1);let Ia=ya=0;for(const Ka of ha.keys())ya=ha.get(Ka),ya>Ia&&(Ia=ya,Fa=Ka);aa[Ba]=Fa}return aa}function ra(Y,la,aa){const sa=Y.length;if(2>=sa)return ma(Y,la,aa);const ta=Y[0].length;aa=M.createEmptyBand(aa,ta);const ha=new Map;for(let Ba=0;Ba<ta;Ba++)if(!la||la[Ba]){ha.clear();let Fa;for(var ya=0;ya<sa;ya++)Fa=Y[ya][Ba],ha.set(Fa,ha.has(Fa)?ha.get(Fa)+
1:1);ya=0;let Ia=Y.length;for(const Ka of ha.keys())ya=ha.get(Ka),ya<Ia&&(Ia=ya,Fa=Ka);aa[Ba]=Fa}return aa}function pa(Y,la,aa){const sa=Y.length;if(2>sa)return Y[0];var [ta]=Y;ta=ta.length;aa=M.createEmptyBand(aa,ta);const ha=new Set;for(let ya=0;ya<ta;ya++)if(!la||la[ya]){ha.clear();let Ba;for(let Fa=0;Fa<sa;Fa++)Ba=Y[Fa][ya],ha.add(Ba);aa[ya]=ha.size}return aa}function ua(Y,la,aa,sa){let [ta,ha]=p.getPixelValueRange(aa);if(aa=aa.startsWith("u")||aa.startsWith("s"))ta-=1E-5,ha+=1E-5;for(let ya=
0;ya<la.length;ya++)if(la[ya]){const Ba=Y[ya];isNaN(Ba)||Ba<ta||Ba>ha?la[ya]=0:sa[ya]=aa?Math.round(Ba):Ba}}const va=new Map;va.set(H.localTrigonometricOperation.acos,[0,Math.PI]);va.set(H.localTrigonometricOperation.asin,[-Math.PI/2,Math.PI/2]);va.set(H.localTrigonometricOperation.atan,[-Math.PI/2,Math.PI/2]);va.set(H.localTrigonometricOperation.cos,[-1,1]);va.set(H.localTrigonometricOperation.sin,[-1,1]);va.set(H.localLogicalOperation.booleanAnd,[0,1]);va.set(H.localLogicalOperation.booleanNot,
[0,1]);va.set(H.localLogicalOperation.booleanOr,[0,1]);va.set(H.localLogicalOperation.booleanXOr,[0,1]);va.set(H.localLogicalOperation.equalTo,[0,1]);va.set(H.localLogicalOperation.notEqual,[0,1]);va.set(H.localLogicalOperation.greaterThan,[0,1]);va.set(H.localLogicalOperation.greaterThanEqual,[0,1]);va.set(H.localLogicalOperation.lessThan,[0,1]);va.set(H.localLogicalOperation.lessThanEqual,[0,1]);va.set(H.localLogicalOperation.isNull,[0,1]);const xa=new Map,za=new Map,Aa=new Map,Ca=new Map;K.getOutputDomain=
function(Y){return va.get(Y)};K.local=function(Y,la,aa={}){xa.size||(xa.set(4,Math.sqrt),xa.set(6,Math.acos),xa.set(7,Math.asin),xa.set(8,Math.atan),xa.set(9,Math.atanh),xa.set(10,Math.abs),xa.set(21,Math.cos),xa.set(22,Math.cosh),xa.set(48,Math.floor),xa.set(49,Math.ceil),xa.set(51,Math.sin),xa.set(52,Math.sinh),xa.set(56,Math.tan),xa.set(57,Math.tanh),xa.set(59,Math.acosh),xa.set(60,Math.asinh),xa.set(65,Math.floor),za.set(5,Math.pow),za.set(61,Math.atan2),Aa.set(1,Z),Aa.set(2,O),Aa.set(3,I),Aa.set(11,
l),Aa.set(12,A),Aa.set(12,A),Aa.set(13,u),Aa.set(14,a),Aa.set(15,e),Aa.set(16,f),Aa.set(17,d),Aa.set(18,h),Aa.set(19,g),Aa.set(20,t),Aa.set(23,x),Aa.set(24,m),Aa.set(25,J),Aa.set(26,y),Aa.set(27,D),Aa.set(28,U),Aa.set(29,ia),Aa.set(30,N),Aa.set(31,G),Aa.set(32,V),Aa.set(33,fa),Aa.set(34,B),Aa.set(35,C),Aa.set(36,R),Aa.set(37,z),Aa.set(44,Q),Aa.set(45,X),Aa.set(46,ja),Aa.set(64,w),Aa.set(65,L),Aa.set(76,ba),Aa.set(78,ba),Ca.set(38,ka),Ca.set(39,oa),Ca.set(40,c),Ca.set(41,S),Ca.set(42,ea),Ca.set(43,
ra),Ca.set(47,wa),Ca.set(54,P),Ca.set(55,n),Ca.set(58,pa),Ca.set(66,ka),Ca.set(67,oa),Ca.set(68,c),Ca.set(69,S),Ca.set(70,ea),Ca.set(71,ra),Ca.set(72,wa),Ca.set(73,P),Ca.set(74,n),Ca.set(75,pa));var sa=F(Y,66<=la&&75>=la);const {outputPixelType:ta="f32"}=aa,ha=!Ca.has(la)||aa.processAsMultiband,ya=ha?Y[0].pixels.length:1;aa=[];for(let Ia=0;Ia<ya;Ia++){var Ba=Ca.has(la)&&!ha?Y.flatMap(Ka=>Ka.pixels):Y.map(Ka=>Ka.pixels[Ia]),Fa=!0;la===H.localConditionalOperation.setNull?(sa=ca(Ba,sa,ta),Ba=sa.band,
sa=sa.mask,Fa=!1):Aa.has(la)?Ba=Aa.get(la)(Ba,sa,"f64"):xa.has(la)?Ba=la===H.localTrigonometricOperation.asin||la===H.localTrigonometricOperation.acos||la===H.localTrigonometricOperation.atanh?r(Ba,sa,"f64",la):q(Ba,sa,"f64",xa.get(la)):za.has(la)?Ba=b(Ba,sa,"f64",za.get(la)):Ca.has(la)?Ba=Ca.get(la)(Ba,sa,"f64"):(Ba=Ba[0],Fa=!1);Fa&&la!==H.localLogicalOperation.isNull&&!va.has(la)&&(Fa=M.createEmptyBand(ta,Ba.length),sa||(sa=(new Uint8Array(Ba.length)).fill(255)),ua(Ba,sa,ta,Fa),Ba=Fa);aa.push(Ba)}Y=
Y[0];return new M({width:Y.width,height:Y.height,pixelType:ta,mask:la===H.localLogicalOperation.isNull?null:sa,pixels:aa})};K.operandsCount=[0,2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,2,1,1,1,999,999,1,1,999,1,1,2,999,999,2,2,999,999,999,999,999,999,999,999,999,999,3,999,3];Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/MaskFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/mathUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./MaskFunctionArguments ./pixelUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x){F=function(w){function L(){var q=r.apply(this,arguments);q.functionName="Mask";q.functionArguments=null;q.rasterArgumentNames=["raster"];return q}K._inherits(L,w);var r=K._createSuper(L);w=L.prototype;w._bindSourceRasters=function(){var q=this.sourceRasterInfos[0].clone();const {pixelType:b}=q;this.outputPixelType=this._getOutputPixelType(b);q.pixelType=this.outputPixelType;this.rasterInfo=q;const {includedRanges:l,normalizedNoDataValues:A}=this.functionArguments;
if(!l?.length&&!A?.length)return{success:!1,supportsGPU:!1,error:"missing includedRanges or noDataValues argument"};let u=[];for(let a=0;a<q.bandCount;a++){const e=x.createMaskLUT(b,l?.slice(2*a,2*a+2),A?.[a]);if(null==e){u=null;break}u.push(e)}this.lookups=u;q=null!=A&&A.every(a=>a?.length===A[0]?.length);return{success:!0,supportsGPU:(!l||l.length<=2*x.MAX_MAP_SIZE_GPU)&&(!A||q&&A[0].length<=x.MAX_MAP_SIZE_GPU)}};w._processPixels=function(q){q=q.pixelBlocks?.[0];if(H.isNone(q))return null;const {outputPixelType:b,
lookups:l}=this,{includedRanges:A,noDataInterpretation:u,normalizedNoDataValues:a}=this.functionArguments;return x.mask(q,{includedRanges:A,noDataValues:a,outputPixelType:b,matchAll:u===x.NoDataInterpretation.matchAll,lookups:l})};w._getWebGLParameters=function(){const {includedRanges:q,normalizedNoDataValues:b}=this.functionArguments,l=new Float32Array(x.MAX_MAP_SIZE_GPU);l.fill(M.NUMBER_MAX_FLOAT32);b?.[0]?.length&&l.set(b[0]);const A=new Float32Array(x.MAX_MAP_SIZE_GPU);for(let u=0;u<A.length;u+=
2)A[u]=q?.[u]??-M.NUMBER_MAX_FLOAT32,A[u+1]=q?.[u+1]??M.NUMBER_MAX_FLOAT32;q&&q.length&&A.set(q);return{bandCount:this.sourceRasterInfos[0].bandCount,noDataValues:l,includedRanges:A}};return K._createClass(L)}(I);k.__decorate([p.property({json:{write:!0,name:"rasterFunction"}})],F.prototype,"functionName",void 0);k.__decorate([p.property({type:N,json:{write:!0,name:"rasterFunctionArguments"}})],F.prototype,"functionArguments",void 0);k.__decorate([p.property()],F.prototype,"rasterArgumentNames",void 0);
k.__decorate([p.property({json:{write:!0}})],F.prototype,"lookups",void 0);return F=k.__decorate([O.subclass("esri.layers.support.rasterFunctions.MaskFunction")],F)})},"esri/layers/support/rasterFunctions/MaskFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O){var I;H=I=function(N){function x(){var L=w.apply(this,arguments);L.includedRanges=null;L.noDataValues=null;L.noDataInterpretation=O.NoDataInterpretation.matchAny;return L}K._inherits(x,N);var w=K._createSuper(x);x.prototype.clone=function(){return new I({includedRanges:this.includedRanges?.slice()??[],noDataValues:this.noDataValues?.slice()??[],noDataInterpretation:this.noDataInterpretation})};K._createClass(x,[{key:"normalizedNoDataValues",get:function(){var {noDataValues:L}=
this;if(!L?.length)return null;let r=!1;L=L.map(q=>"number"===typeof q?(r=!0,[q]):"string"===typeof q?(q=q.trim().split(" ").filter(b=>""!==b.trim()).map(b=>Number(b)),r=r||0<q.length,0===q.length?null:q):null);return r?L:null}}]);return x}(V);k.__decorate([M.property({json:{write:!0}})],H.prototype,"includedRanges",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"noDataValues",void 0);k.__decorate([M.property()],H.prototype,"normalizedNoDataValues",null);k.__decorate([M.property({json:{write:!0}})],
H.prototype,"noDataInterpretation",void 0);return H=I=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.MaskFunctionArguments")],H)})},"esri/layers/support/rasterFunctions/NDVIFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./NDVIFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){p=function(x){function w(){var r=L.apply(this,arguments);r.functionName="NDVI";r.functionArguments=null;r.rasterArgumentNames=["raster"];return r}K._inherits(w,x);var L=K._createSuper(w);x=w.prototype;x._bindSourceRasters=function(){const {scientificOutput:r}=this.functionArguments;this.outputPixelType=this._getOutputPixelType(r?"f32":"u8");const q=this.sourceRasterInfos[0].clone();q.pixelType=this.outputPixelType;q.colormap=null;q.histograms=null;q.bandCount=1;const [b,
l,A,u]=r?[-1,1,0,.1]:[0,200,100,10];q.statistics=[{min:b,max:l,avg:A,stddev:u}];this.rasterInfo=q;return{success:!0,supportsGPU:!0}};x._processPixels=function(r){r=r.pixelBlocks?.[0];if(M.isNone(r))return null;const {visibleBandID:q,infraredBandID:b,scientificOutput:l}=this.functionArguments;return O.calculateNDVI(r,q,b,!l)};x._getWebGLParameters=function(){const {visibleBandID:r,infraredBandID:q,scientificOutput:b}=this.functionArguments;return{bandIndexMat3:O.getBandMatrix3(this.isInputBandIdsSwizzled?
[0,1,2]:[q,r,0]),scaled:!b}};x._getInputBandIds=function(r){const {visibleBandID:q,infraredBandID:b}=this.functionArguments;return[b,q,0].map(l=>r[l])};return K._createClass(w)}(I);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:N,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.NDVIFunction")],
p)})},"esri/layers/support/rasterFunctions/NDVIFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),function(K,k,M,H,p,F,Z,V){var O;H=O=function(I){function N(){var w=x.apply(this,arguments);w.visibleBandID=0;w.infraredBandID=1;
w.scientificOutput=!1;return w}K._inherits(N,I);var x=K._createSuper(N);N.prototype.clone=function(){const {visibleBandID:w,infraredBandID:L,scientificOutput:r}=this;return new O({visibleBandID:w,infraredBandID:L,scientificOutput:r})};return K._createClass(N)}(V);k.__decorate([M.property({json:{write:!0}})],H.prototype,"visibleBandID",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"infraredBandID",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"scientificOutput",
void 0);return H=O=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.NDVIFunctionArguments")],H)})},"esri/layers/support/rasterFunctions/RemapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/mathUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./pixelUtils ./RemapFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w){F=function(L){function r(){var b=q.apply(this,arguments);b.functionName="Remap";b.functionArguments=null;b.rasterArgumentNames=["raster"];b.lookup=null;return b}K._inherits(r,L);var q=K._createSuper(r);L=r.prototype;L._bindSourceRasters=function(){const b=this.sourceRasterInfos[0].clone(),{pixelType:l}=b;this.outputPixelType=this._getOutputPixelType(l);b.pixelType=this.outputPixelType;b.colormap=null;b.histograms=null;b.bandCount=1;b.attributeTable=null;const {statistics:A}=
b,{allowUnmatched:u,outputValues:a,inputRanges:e,noDataRanges:f,isLastInputRangeInclusive:d}=this.functionArguments;if(H.isSome(A)&&A.length&&a?.length)if(u){var h=Math.min.apply(null,[...a,A[0].min]),g=Math.max.apply(null,[...a,A[0].max]);b.statistics=[{...A[0],min:h,max:g}]}else{g=h=a[0];for(let t=0;t<a.length;t++)h=h>a[t]?a[t]:h,g=g>a[t]?g:a[t];b.statistics=[{...A[0],min:h,max:g}]}this.rasterInfo=b;this.lookup=u?null:x.createRemapLUT({srcPixelType:l,inputRanges:e,outputValues:a,noDataRanges:f,
allowUnmatched:u,isLastInputRangeInclusive:d,outputPixelType:this.outputPixelType});return{success:!0,supportsGPU:(!a||a.length<=x.MAX_MAP_SIZE_GPU)&&(!f||f.length<=x.MAX_MAP_SIZE_GPU)}};L._processPixels=function(b){b=b.pixelBlocks?.[0];if(H.isNone(b))return null;const {lookup:l,outputPixelType:A}=this;if(l){const h=x.lookupPixels(b,{lut:[l.lut],offset:l.offset,outputPixelType:A});H.isSome(h)&&l.mask&&(h.mask=x.lookupBandValues(b.pixels[0],b.mask,l.mask,l.offset,"u8"));return h}const {inputRanges:u,
outputValues:a,noDataRanges:e,allowUnmatched:f,isLastInputRangeInclusive:d}=this.functionArguments;return x.remap(b,{inputRanges:u,outputValues:a,noDataRanges:e,outputPixelType:A,allowUnmatched:f,isLastInputRangeInclusive:d})};L._getWebGLParameters=function(){const {allowUnmatched:b,noDataRanges:l,isLastInputRangeInclusive:A}=this.functionArguments,u=new Float32Array(3*x.MAX_MAP_SIZE_GPU);var a=this.functionArguments.inputRanges??[],e=this.functionArguments.outputValues??[];const f=e.length;for(let d=
0;d<x.MAX_MAP_SIZE_GPU;d++)if(u[3*d]=a[2*d]??M.NUMBER_MAX_FLOAT32-1,u[3*d+1]=a[2*d+1]??M.NUMBER_MAX_FLOAT32,u[3*d+2]=e[d]??0,d<f&&(0<d&&(u[3*d]-=1E-5),d<f-1||!A))u[3*d+1]-=1E-5;a=new Float32Array(2*x.MAX_MAP_SIZE_GPU);a.fill(M.NUMBER_MAX_FLOAT32);l?.length&&a.set(l);e=I.getPixelValueRange(this.outputPixelType);return{allowUnmatched:b,rangeMaps:u,noDataRanges:a,clampRange:e}};return K._createClass(r)}(N);k.__decorate([p.property({json:{write:!0,name:"rasterFunction"}})],F.prototype,"functionName",
void 0);k.__decorate([p.property({type:w,json:{write:!0,name:"rasterFunctionArguments"}})],F.prototype,"functionArguments",void 0);k.__decorate([p.property()],F.prototype,"rasterArgumentNames",void 0);k.__decorate([p.property({json:{write:!0}})],F.prototype,"lookup",void 0);return F=k.__decorate([O.subclass("esri.layers.support.rasterFunctions.RemapFunction")],F)})},"esri/layers/support/rasterFunctions/RemapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V){var O;H=O=function(I){function N(){var w=x.apply(this,arguments);w.inputRanges=null;w.outputValues=null;w.noDataRanges=null;w.allowUnmatched=!1;w.isLastInputRangeInclusive=!1;return w}K._inherits(N,I);var x=K._createSuper(N);N.prototype.clone=function(){return new O({inputRanges:[...this.inputRanges],outputValues:[...this.outputValues],noDataRanges:[...this.noDataRanges],allowUnmatched:this.allowUnmatched,isLastInputRangeInclusive:this.isLastInputRangeInclusive})};return K._createClass(N)}(V);
k.__decorate([M.property({json:{write:!0}})],H.prototype,"inputRanges",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"outputValues",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"noDataRanges",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"allowUnmatched",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"isLastInputRangeInclusive",void 0);return H=O=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.RemapFunctionArguments")],
H)})},"esri/layers/support/rasterFunctions/SlopeFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./SlopeFunctionArguments ./surfaceUtils".split(" "),function(K,k,M,H,p,F,Z,V,O,I,N){const x=1/111E3;p=function(w){function L(){var q=
r.apply(this,arguments);q.functionName="Slope";q.functionArguments=null;q.rasterArgumentNames=["raster"];q.isGCS=!1;return q}K._inherits(L,w);var r=K._createSuper(L);w=L.prototype;w._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const q=this.sourceRasterInfos[0].clone();q.pixelType=this.outputPixelType;q.statistics="percent-rise"!==this.functionArguments.slopeType?[{min:0,max:90,avg:1,stddev:1}]:null;q.histograms=null;q.colormap=null;q.attributeTable=null;q.bandCount=
1;this.rasterInfo=q;this.isGCS=q.spatialReference?.isGeographic??!1;return{success:!0,supportsGPU:!0}};w._processPixels=function(q){const b=q.pixelBlocks?.[0];if(M.isNone(b))return null;const {zFactor:l,slopeType:A,pixelSizePower:u,pixelSizeFactor:a}=this.functionArguments,{isGCS:e}=this,{extent:f,primaryPixelSizes:d}=q;q=d?.[0];q=M.isNone(q)?f?{x:f.width/b.width,y:f.height/b.height}:{x:1,y:1}:q;return N.slope(b,{zFactor:l,slopeType:A,pixelSizePower:u,pixelSizeFactor:a,isGCS:e,resolution:q})};w._getWebGLParameters=
function(){const {zFactor:q,slopeType:b,pixelSizeFactor:l,pixelSizePower:A}=this.functionArguments;return{zFactor:this.isGCS&&1<=q?q*x:q,slopeType:b,pixelSizeFactor:l??0,pixelSizePower:A??0}};return K._createClass(L)}(O);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:I,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",
void 0);k.__decorate([H.property({json:{write:!0}})],p.prototype,"isGCS",void 0);return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.SlopeFunction")],p)})},"esri/layers/support/rasterFunctions/SlopeFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O,I){var N;M=new M.JSONMap({1:"degree",2:"percent-rise",3:"adjusted"},{useNumericKeys:!0});I=N=function(x){function w(){var r=L.apply(this,arguments);r.slopeType="degree";r.zFactor=1;r.pixelSizePower=.664;r.pixelSizeFactor=.024;r.removeEdgeEffect=!1;return r}K._inherits(w,x);var L=K._createSuper(w);w.prototype.clone=function(){return new N({slopeType:this.slopeType,zFactor:this.zFactor,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,removeEdgeEffect:this.removeEdgeEffect,
raster:this.raster})};return K._createClass(w)}(I);k.__decorate([V.enumeration(M)],I.prototype,"slopeType",void 0);k.__decorate([H.property({type:Number,json:{write:!0}})],I.prototype,"zFactor",void 0);k.__decorate([H.property({type:Number,json:{name:"psPower",write:!0}})],I.prototype,"pixelSizePower",void 0);k.__decorate([H.property({type:Number,json:{name:"psZFactor",write:!0}})],I.prototype,"pixelSizeFactor",void 0);k.__decorate([H.property({type:Boolean,json:{write:!0}})],I.prototype,"removeEdgeEffect",
void 0);return I=N=k.__decorate([O.subclass("esri.layers.support.rasterFunctions.SlopeFunctionArguments")],I)})},"esri/layers/support/rasterFunctions/StatisticsHistogramFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./StatisticsHistogramFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O){H=function(I){function N(){var w=x.apply(this,arguments);w.functionName="StatisticsHistogram";w.functionArguments=null;w.rasterArgumentNames=["raster"];w.isNoopProcess=!0;return w}K._inherits(N,I);var x=K._createSuper(N);I=N.prototype;I._bindSourceRasters=function(){var w=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType("u8");w=w.clone();const {statistics:L,histograms:r}=this.functionArguments;r&&(w.histograms=r);L&&(w.statistics=L);this.rasterInfo=
w;return{success:!0,supportsGPU:!0}};I._processPixels=function(w){return w.pixelBlocks?.[0]};return K._createClass(N)}(V);k.__decorate([M.property({json:{write:!0,name:"rasterFunction"}})],H.prototype,"functionName",void 0);k.__decorate([M.property({type:O,json:{write:!0,name:"rasterFunctionArguments"}})],H.prototype,"functionArguments",void 0);k.__decorate([M.property()],H.prototype,"rasterArgumentNames",void 0);k.__decorate([M.property({json:{write:!0}})],H.prototype,"indexedColormap",void 0);k.__decorate([M.property()],
H.prototype,"isNoopProcess",void 0);return H=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramFunction")],H)})},"esri/layers/support/rasterFunctions/StatisticsHistogramFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O){var I;p=I=function(N){function x(){var L=w.apply(this,arguments);L.statistics=null;L.histograms=null;return L}K._inherits(x,N);var w=K._createSuper(x);N=x.prototype;N.readStatistics=function(L,r){if(!L?.length)return null;const q=[];L.forEach(b=>{q.push({min:b.min,max:b.max,avg:b.avg??b.mean,stddev:b.stddev??b.standardDeviation})});return q};N.writeStatistics=function(L,r,q){if(L?.length){var b=[];L.forEach(l=>{l={...l,mean:l.avg,standardDeviation:l.stddev};delete l.avg;
delete l.stddev;b.push(l)});r[q]=b}};N.clone=function(){return new I({statistics:M.clone(this.statistics),histograms:M.clone(this.histograms)})};return K._createClass(x)}(O);k.__decorate([H.property({json:{write:!0}})],p.prototype,"statistics",void 0);k.__decorate([F.reader("statistics")],p.prototype,"readStatistics",null);k.__decorate([V.writer("statistics")],p.prototype,"writeStatistics",null);k.__decorate([H.property({json:{write:!0}})],p.prototype,"histograms",void 0);return p=I=k.__decorate([Z.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramFunctionArguments")],
p)})},"esri/layers/support/rasterFunctions/StretchFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./pixelUtils ./StretchFunctionArguments ./stretchUtils".split(" "),function(K,k,M,H,p,F,Z,V,O,I,N,x){p=function(w){function L(){var q=
r.apply(this,arguments);q.functionName="Stretch";q.functionArguments=null;q.rasterArgumentNames=["raster"];q.lookup=null;q.cutOffs=null;return q}K._inherits(L,w);var r=K._createSuper(L);w=L.prototype;w._bindSourceRasters=function(){this.cutOffs=this.lookup=null;var q=this.sourceRasterInfos[0];const {pixelType:b}=q;var {functionArguments:l}=this;const {dynamicRangeAdjustment:A,gamma:u,useGamma:a}=l;if(!A&&["u8","u16","s8","s16"].includes(b)){l=x.getStretchCutoff(l.toJSON(),{rasterInfo:q});const e=
this._isOutputRoundingNeeded()?"round":"float";this.lookup=x.createStretchLUT({pixelType:b,...l,gamma:a?u:null,rounding:e});this.cutOffs=l}else A||(this.cutOffs=x.getStretchCutoff(l.toJSON(),{rasterInfo:q}));this.outputPixelType=this._getOutputPixelType(b);q=q.clone();q.pixelType=this.outputPixelType;q.statistics=null;q.histograms=null;q.colormap=null;q.attributeTable=null;"u8"===this.outputPixelType&&(q.keyProperties.DataType="processed");this.rasterInfo=q;return{success:!0,supportsGPU:!A}};w._processPixels=
function(q){q=q.pixelBlocks?.[0];if(M.isNone(q))return q;var {lookup:b}=this;if(b)return I.lookupPixels(q,{...b,outputPixelType:this.rasterInfo.pixelType});({functionArguments:b}=this);const l=this.cutOffs||x.getStretchCutoff(b.toJSON(),{rasterInfo:this.sourceRasterInfos[0],pixelBlock:q});return x.stretch(q,{...l,gamma:b.useGamma?b.gamma:null,outputPixelType:this.outputPixelType})};w._getWebGLParameters=function(){const {outputMin:q=0,outputMax:b=255,gamma:l,useGamma:A}=this.functionArguments,u=2<=
this.rasterInfo.bandCount?3:1,a=A&&l&&l.length?x.computeGammaCorrection(u,l):[1,1,1],{minCutOff:e,maxCutOff:f}=this.cutOffs??{minCutOff:[0,0,0],maxCutOff:[255,255,255]};1===e.length&&(e[1]=e[2]=e[0],f[1]=f[2]=f[0]);const d=new Float32Array(u);var h;for(h=0;h<u;h++)d[h]=(b-q)/(f[h]-e[h]);h=this._isOutputRoundingNeeded();return{bandCount:u,outMin:q,outMax:b,minCutOff:e,maxCutOff:f,factor:d,useGamma:A,gamma:A&&l?l:[1,1,1],gammaCorrection:A&&a?a:[1,1,1],stretchType:this.functionArguments.stretchType,
isOutputRounded:h,type:"stretch"}};return K._createClass(L)}(O);k.__decorate([H.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);k.__decorate([H.property({type:N,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);k.__decorate([H.property()],p.prototype,"rasterArgumentNames",void 0);k.__decorate([H.property({json:{write:!0}})],p.prototype,"lookup",void 0);k.__decorate([H.property({json:{write:!0}})],p.prototype,"cutOffs",void 0);
return p=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.StretchFunction")],p)})},"esri/layers/support/rasterFunctions/StretchFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(K,k,M,H,p,F,Z,V,O,I){var N;M=new M.JSONMap({0:"none",3:"standard-deviation",4:"histogram-equalization",5:"min-max",6:"percent-clip",9:"sigmoid"},{useNumericKeys:!0});I=N=function(x){function w(){var r=L.apply(this,arguments);r.computeGamma=!1;r.dynamicRangeAdjustment=!1;r.gamma=[];r.histograms=null;r.statistics=null;r.stretchType="none";r.useGamma=!1;return r}K._inherits(w,x);var L=K._createSuper(w);x=w.prototype;x.writeStatistics=function(r,q,b){r?.length&&(Array.isArray(r[0])||(r=r.map(l=>
[l.min,l.max,l.avg,l.stddev])),q[b]=r)};x.clone=function(){return new N({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:H.clone(this.statistics),gamma:H.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,histograms:H.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment,
raster:this.raster})};return K._createClass(w)}(I);k.__decorate([p.property({type:Boolean,json:{write:!0}})],I.prototype,"computeGamma",void 0);k.__decorate([p.property({type:Boolean,json:{name:"dra",write:!0}})],I.prototype,"dynamicRangeAdjustment",void 0);k.__decorate([p.property({type:[Number],json:{write:!0}})],I.prototype,"gamma",void 0);k.__decorate([p.property()],I.prototype,"histograms",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],I.prototype,"maxPercent",void 0);k.__decorate([p.property({type:Number,
json:{write:!0}})],I.prototype,"minPercent",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],I.prototype,"numberOfStandardDeviations",void 0);k.__decorate([p.property({type:Number,json:{name:"max",write:!0}})],I.prototype,"outputMax",void 0);k.__decorate([p.property({type:Number,json:{name:"min",write:!0}})],I.prototype,"outputMin",void 0);k.__decorate([p.property({type:Number,json:{write:!0}})],I.prototype,"sigmoidStrengthLevel",void 0);k.__decorate([p.property({json:{type:[[Number]],
write:!0}})],I.prototype,"statistics",void 0);k.__decorate([O.writer("statistics")],I.prototype,"writeStatistics",null);k.__decorate([Z.enumeration(M)],I.prototype,"stretchType",void 0);k.__decorate([p.property({type:Boolean,json:{write:!0}})],I.prototype,"useGamma",void 0);return I=N=k.__decorate([V.subclass("esri.layers.support.rasterFunctions.StretchFunctionArguments")],I)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils",
"../../../renderers/support/stretchRendererUtils"],function(K,k,M,H,p){function F(x,w=256){w=Math.min(w,256);const {size:L,counts:r}=x;x=new Uint8Array(L);var q=r.reduce((a,e)=>a+e/w,0);let b=0;var l=0;let A=0,u=q;for(let a=0;a<L;a++)if(A+=r[a],!(a<L-1&&A+r[a+1]<u)){for(;b<w-1&&u<A;)b++,u+=q;for(;l<=a;l++)x[l]=b;l=a+1}for(q=l;q<L;q++)x[q]=w-1;return x}function Z(x,w){x=Math.min(Math.max(x,-100),100);w=Math.min(Math.max(w??0,-100),100);let L=0,r=0;const q=new Uint8Array(256);for(L=0;256>L;L++)0<x&&
100>x?r=(200*L-25500+510*w)/(2*(100-x))+128:0>=x&&-100<x?r=(200*L-25500+510*w)*(100+x)/2E4+128:100===x?(r=200*L-25500+256*(100-x)+510*w,r=0<r?255:0):-100===x&&(r=128),q[L]=255<r?255:0>r?0:r;return q}function V(x){if(k.isNone(x)||!x.pixels?.length)return null;const {pixels:w,mask:L,pixelType:r}=x,q=x.width*x.height,b=w.length;let l,A;let u;var a;const e=[],f=[];for(u=0;u<b;u++){var d=new Uint32Array(256);var h=w[u];if("u8"===r)if(l=-.5,A=255.5,L)for(a=0;a<q;a++)L[a]&&d[h[a]]++;else for(a=0;a<q;a++)d[h[a]]++;
else{a=!1;x.statistics||(x.updateStatistics(),a=!0);var g=x.statistics;l=g[u].minValue;A=g[u].maxValue;var t=(A-l)/256;if(0===t)for(!g||x.validPixelCount||a||x.updateStatistics(),t=(x.validPixelCount||x.width*x.height)/256,a=0;256>a;a++)d[a]=Math.round(t*(a+1))-Math.round(t*a);else{g=new Uint32Array(257);for(a=0;a<q;a++)L&&!L[a]||g[Math.floor((h[a]-l)/t)]++;for(a=0;255>a;a++)d[a]=g[a];d[255]=g[255]+g[256]}}e.push({min:l,max:A,size:256,counts:d});for(a=g=h=t=0;256>a;a++)t+=d[a],h+=a*d[a];h/=t;for(a=
0;256>a;a++)g+=d[a]*(a-h)**2;a=Math.sqrt(g/(t-1));t=(A-l)/256;d=(h+.5)*t+l;t*=a;f.push({min:l,max:A,avg:d,stddev:t})}return{statistics:f,histograms:e}}function O(x,w){if(null==w||0===w.length)return x;const L=Math.max.apply(null,w),{minCutOff:r,maxCutOff:q,outMin:b,outMax:l,histogramLut:A}=x;return r.length===w.length||r.length<=L?x:{minCutOff:w.map(u=>r[u]),maxCutOff:w.map(u=>q[u]),histogramLut:A?w.map(u=>A[u]):null,outMin:b,outMax:l}}function I(x,w){const L=new Float32Array(x);for(let r=0;r<x;r++)L[r]=
1<w[r]?2<w[r]?6.5+(w[r]-2)**2.5:6.5+100*(2-w[r])**4:1;return L}const N=[.299,.587,.114];K.computeGammaCorrection=I;K.computeGammaValues=function(x,w,L){const r=[];for(let u=0;u<w.length;u++){var q=0,b=0,l=0;"min"in w[u]?{min:q,max:b,avg:l}=w[u]:[q,b,l]=w[u];l=l??0;"u8"!==x&&(l=255*(l-q)/(b-q));L&&(l*=N[u]);q=r;b=q.push;if(0>=l||255<=l)l=1;else{var A=0;150!==l&&(A=150>=l?45*Math.cos(.01047*l):17*Math.sin(.021*l));A=Math.log((l+A)/255);0===A?l=1:(l=Math.log(l/255)/A,l=isNaN(l)?1:Math.min(9.9,Math.max(.01,
l)))}b.call(q,l)}return r};K.createContrastBrightnessLUT=Z;K.createHistogramEqualizationLUT=F;K.createStretchLUT=function(x){const {minCutOff:w,maxCutOff:L,gamma:r,pixelType:q,rounding:b}=x,l=x.outMin||0,A=x.outMax||255;if(!["u8","u16","s8","s16"].includes(q))return null;const u=w.length;let a,e,f=0;"s8"===q?f=-127:"s16"===q&&(f=-32767);let d=256;["u16","s16"].includes(q)&&(d=65536);var h=[],g=[];const t=A-l;for(a=0;a<u;a++)g[a]=L[a]-w[a],h[a]=0===g[a]?0:t/g[a];let m;const v=[];let y,D;if(r&&r.length>=
u)for(h=I(u,r),a=0;a<u;a++){D=[];for(e=0;e<d;e++)if(0===g[a])D[e]=l;else{var J=e+f;m=(J-w[a])/g[a];y=1;1<r[a]&&(y-=(1/t)**(m*h[a]));J<L[a]&&J>w[a]?(J=y*t*m**(1/r[a])+l,D[e]="floor"===b?Math.floor(J):"round"===b?Math.round(J):J):D[e]=J>=L[a]?A:l}v[a]=D}else for(a=0;a<u;a++){D=[];for(e=0;e<d;e++)J=e+f,J<=w[a]?D[e]=l:J>=L[a]?D[e]=A:(g=(J-w[a])*h[a]+l,D[e]="floor"===b?Math.floor(g):"round"===b?Math.round(g):g);v[a]=D}if(null!=x.contrastOffset)for(x=Z(x.contrastOffset,x.brightnessOffset),a=0;a<u;a++)for(D=
v[a],e=0;e<d;e++)D[e]=x[D[e]];return{lut:v,offset:f}};K.estimateStatisticsFromHistograms=function(x){const w=[];for(let b=0;b<x.length;b++){const {min:l,max:A,size:u,counts:a}=x[b];let e=0;var L=0;for(var r=0;r<u;r++)e+=a[r],L+=r*a[r];L/=e;r=0;for(var q=0;q<u;q++)r+=a[q]*(q-L)**2;q=(A-l)/u;w.push({min:l,max:A,avg:(L+.5)*q+l,stddev:Math.sqrt(r/(e-1))*q})}return w};K.estimateStatisticsHistograms=V;K.getStretchCutoff=function(x,w){const {pixelBlock:L,bandIds:r,returnHistogramLut:q,rasterInfo:b}=w;var l=
null;w=null;var A=x.stretchType;"number"===typeof A&&(A=p.stretchTypeFunctionEnum[A]);x.dra?"minMax"===A&&k.isSome(L)&&L.statistics?l=L.statistics.map(J=>[J.minValue,J.maxValue,0,0]):(w=V(L),l=k.isSome(w)?w.statistics:null,w=k.isSome(w)?w.histograms:null):(l=0<x.statistics?.length?x.statistics:k.unwrap(b.statistics),w=x.histograms||k.unwrap(b.histograms));"percentClip"!==A&&"histogramEqualization"!==A||w?.length||(A="minMax");var u=l?.length||w?.length||b.bandCount;const a=[],e=[];let f;let d,h,g,
t;l&&!Array.isArray(l[0])&&(l=l.map(J=>[J.min,J.max,J.avg,J.stddev]));const [m,v]=H.getPixelValueRange(b.pixelType);if(!l?.length){l=[];for(g=0;g<u;g++)l.push([m,v,1,1]);"standardDeviation"===A&&(A="minMax")}switch(A){case "none":for(g=0;g<u;g++)a[g]=m,e[g]=v;break;case "minMax":for(g=0;g<u;g++)a[g]=l[g][0],e[g]=l[g][1];break;case "standardDeviation":for(g=0;g<u;g++)a[g]=l[g][2]-x.numberOfStandardDeviations*l[g][3],e[g]=l[g][2]+x.numberOfStandardDeviations*l[g][3],a[g]<l[g][0]&&(a[g]=l[g][0]),e[g]>
l[g][1]&&(e[g]=l[g][1]);break;case "histogramEqualization":k.assertIsSome(w);for(g=0;g<u;g++)a[g]=w[g].min,e[g]=w[g].max;break;case "percentClip":k.assertIsSome(w);for(g=0;g<w.length;g++){l=w[g];d=new Uint32Array(l.size);var y=[...l.counts];20<=y.length&&(y[0]=y[1]=y[2]=y[y.length-1]=y[y.length-2]=0);f=0;u=(l.max-l.min)/l.size;h=-.5===l.min&&1===u?.5:0;for(t=0;t<l.size;t++)f+=y[t],d[t]=f;y=(x.minPercent||0)*f/100;a[g]=l.min+h;for(t=0;t<l.size;t++)if(d[t]>y){a[g]=l.min+u*(t+h);break}y=(1-(x.maxPercent||
0)/100)*f;e[g]=l.max+h;for(t=l.size-2;0<=t;t--)if(d[t]<y){e[g]=l.min+u*(t+2-h);break}e[g]<a[g]&&(l=a[g],a[g]=e[g],e[g]=l)}break;default:for(g=0;g<u;g++)a[g]=l[g][0],e[g]=l[g][1]}let D;"histogramEqualization"===A?(k.assertIsSome(w),A=w[0].size||256,x=0,q&&(D=w.map(J=>F(J)))):(A=x.max||255,x=x.min||0);return O({minCutOff:a,maxCutOff:e,outMax:A,outMin:x,histogramLut:D},r)};K.stretch=function(x,w){if(k.isNone(x)||!x.pixels?.length)return x;const {mask:L,width:r,height:q,pixels:b}=x,{minCutOff:l,maxCutOff:A,
gamma:u}=w;var a=w.outMin||0;const e=w.outMax||255,f=r*q,d=w.outputPixelType||"u8";x=x.pixels.map(()=>M.createEmptyBand(d,f));const h=x.length;let g;let t,m;var v=e-a,y=[];const D=[];for(g=0;g<h;g++)D[g]=A[g]-l[g],y[g]=0===D[g]?0:v/D[g];const J=d.startsWith("u")||d.startsWith("s"),E=!!w.isRenderer;if(u&&u.length>=h)for(y=I(h,u),w=0;w<f;w++){if(null==L||L[w])for(g=0;g<h;g++)if(0===D[g])x[g][w]=a;else{var R=b[g][w];m=(R-l[g])/D[g];t=1;1<u[g]&&(t-=(1/v)**(m*y[g]));R<A[g]&&R>l[g]?(R=t*v*m**(1/u[g])+a,
x[g][w]=E?Math.floor(R):J?Math.round(R):R):x[g][w]=R>=A[g]?e:a}}else for(w=0;w<f;w++)if(null==L||L[w])for(g=0;g<h;g++)R=b[g][w],R<A[g]&&R>l[g]?(v=(R-l[g])*y[g]+a,x[g][w]=E?Math.floor(v):J?Math.round(v):v):x[g][w]=R>=A[g]?e:a;a=new M({width:r,height:q,mask:L,pixels:x,pixelType:d});a.updateStatistics();return a};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(K,k){k=new k.JSONMap({none:"none",
standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});K.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};K.stretchTypeJSONDict=k;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/SpatialReference".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N){function x(B,G,Q){return!Z.canProjectWithoutEngine(B,G,Q)}function w(B,G,Q){if((B=x(B,G,Q))&&!Z.isLoaded())throw new M("rasterprojectionhelper-project","projection engine is not loaded");return B}function L(B,G,Q,X=null){const ja=B.spatialReference;if(ja.equals(G))return B;w(ja,G,X);Q=Q.center;Q=new V({xmin:Q.x-B.x/2,xmax:Q.x+B.x/2,ymin:Q.y-B.y/2,ymax:Q.y+B.y/2,spatialReference:ja});X=Z.project(Q,G,X);Q=v(G);H.isNone(X)||H.isSome(Q)&&X.width>=Q?(G=p.getMetersPerUnitForSR(ja)/
p.getMetersPerUnitForSR(G),B={x:B.x*G,y:B.y*G}):B={x:X.width,y:X.height};return B}function r(B,G=.01){return p.getMetersPerUnitForSR(B)?G/p.getMetersPerUnitForSR(B):0}function q(B,G,Q=null,X=!0){const ja=B.spatialReference;if(ja.equals(G))return B;w(ja,G,Q);Q=Z.project(B,G,Q);if(!X||!Q)return Q;b([B],[Q],ja,G);return Q}function b(B,G,Q,X){const ja=y(Q,!0),ca=y(X,!0);Q=r(Q,500);X=r(X,500);if(Q&&H.isSome(ja)&&H.isSome(ca))for(let ba=0;ba<B.length;ba++){const oa=G[ba];if(!oa)continue;const {x:ea}=B[ba],
{x:wa}=oa;wa>=ca[1]-X&&Math.abs(ea-ja[0])<Q?oa.x-=ca[1]-ca[0]:wa<=ca[0]+X&&Math.abs(ea-ja[1])<Q&&(oa.x+=ca[1]-ca[0])}}function l(B){const {inSR:G,outSR:Q,datumTransformation:X,preferPE:ja}=B;if(G.equals(Q))return{points:B}=f(B,null),B;if(G.isWebMercator&&Q.isWGS84||G.isWGS84&&Q.isWebMercator){const {cols:wa,rows:c,xres:n,yres:P,usePixelCenter:S,inSR:ma,outSR:ka}=B;let {xmin:ra,ymax:pa}=B;S&&(ra+=n/2,pa-=P/2);B=[];var ca=[],ba=Math.max(wa,c);for(var oa=0;oa<ba;oa++){var ea=Z.project(new O({x:ra+n*
Math.min(wa,oa),y:pa-P*Math.min(c,oa),spatialReference:ma}),ka);oa<=wa&&B.push(ea.x);oa<=c&&ca.push(ea.y)}ba=[];for(oa=0;oa<wa;oa++)for(ea=0;ea<c;ea++)ba.push([B[oa],ca[ea]]);return ba}if(w(G,Q,X)&&ja){if(G.isGeographic)return u(B);ca=a(G);if(H.isSome(ca))return u(B)}return A(B)}function A(B){var {points:G}=f(B,null);const {inSR:Q,outSR:X,datumTransformation:ja}=B;B=G.map(ca=>new O(ca[0],ca[1],Q));G=Z.project(B,X,ja);ja&&b(B,G,Q,X);return G.map(ca=>ca?[ca.x,ca.y]:[NaN,NaN])}function u(B){const {inSR:G,
outSR:Q,datumTransformation:X}=B;var ja=a(G);const {points:ca,mask:ba}=f(B,ja);G.isGeographic||(B=G.wkid?F.PeFactory.coordsys(G.wkid):F.PeFactory.fromString(G.isGeographic?F.PeDefs.PE_TYPE_GEOGCS:F.PeDefs.PE_TYPE_PROJCS,G.wkt),F.PeCSTransformations.projToGeog(B,ca.length,ca));if(H.isSome(X)&&X.steps.length){var oa;Q.isGeographic&&(oa=ca.map(([ea])=>179.9955<ea?1:-179.9955>ea?-1:0));X.steps.forEach(ea=>{const wa=ea.wkid?F.PeFactory.geogtran(ea.wkid):F.PeFactory.fromString(F.PeDefs.PE_TYPE_GEOGTRAN,
ea.wkt);F.PeGTTransformations.geogToGeog(wa,ca.length,ca,null,ea.isInverse?F.PeDefs.PE_TRANSFORM_2_TO_1:F.PeDefs.PE_TRANSFORM_1_TO_2)});if(oa)for(B=0;B<ca.length;B++){ja=oa[B];const ea=ca[B][0],wa=179.9955<ea?1:-179.9955>ea?-1:0;ja&&wa&&ja!==wa&&(ca[B][0]=0<ja?ea+360:ea-360)}}Q.isGeographic||(oa=a(Q,!0),oa=H.isSome(oa)&&oa.isEnvelope?[oa.bbox[1],oa.bbox[3]]:[-90,90],d(ca,oa),oa=Q.wkid?F.PeFactory.coordsys(Q.wkid):F.PeFactory.fromString(Q.isGeographic?F.PeDefs.PE_TYPE_GEOGCS:F.PeDefs.PE_TYPE_PROJCS,
Q.wkt),F.PeCSTransformations.geogToProj(oa,ca.length,ca));oa=ca;if(ba&&ca.length!==ba.length){oa=[];for(let ea=0,wa=0;ea<ba.length;ea++)ba[ea]?oa.push(ca[wa++]):oa.push([NaN,NaN])}return oa}function a(B,G=!1){var Q=B.wkid||B.wkt;if(!Q||B.isGeographic)return null;Q=String(Q);if(ia.has(Q))return Q=ia.get(Q),G?Q?.gcs:Q?.pcs;var X=B.wkid?F.PeFactory.coordsys(B.wkid):F.PeFactory.fromString(B.isGeographic?F.PeDefs.PE_TYPE_GEOGCS:F.PeDefs.PE_TYPE_PROJCS,B.wkt);B=r(B,1E-4);B=e(X,B);X=e(X,0,!0);ia.set(Q,{pcs:B,
gcs:X});return G?X:B}function e(B,G=0,Q=!1){var X=F.PePCSInfo.generate(B),ja=Q?B.horizonGcsGenerate():B.horizonPcsGenerate();if(!X||!ja?.length)return null;B=!1;var ca=ja.find(c=>1===c.getInclusive()&&1===c.getKind());if(!ca){ca=ja.find(c=>1===c.getInclusive()&&0===c.getKind());if(!ca)return null;B=!0}Q=Q?0:(2===X.getNorthPoleLocation()?1:0)|(2===X.getSouthPoleLocation()?2:0);X=X.isPannableRectangle();ca=ca.getCoord();if(B)return{isEnvelope:B,isPannable:X,vertices:ca,coef:null,bbox:[ca[0][0]-G,ca[0][1]-
G,ca[1][0]+G,ca[1][1]+G],poleLocation:Q};G=0;B=[];let [ba,oa]=ca[0],[ea,wa]=ca[0];for(let c=0,n=ca.length;c<n;c++){G++;G===n&&(G=0);const [P,S]=ca[c],[ma,ka]=ca[G];if(ka===S)B.push([P,ma,S,ka,2]);else{ja=(ma-P)/(ka-S||1E-4);const ra=P-ja*S;S<ka?B.push([ja,ra,S,ka,0]):B.push([ja,ra,ka,S,1])}ba=ba<P?ba:P;oa=oa<S?oa:S;ea=ea>P?ea:P;wa=wa>S?wa:S}return{isEnvelope:!1,isPannable:X,vertices:ca,coef:B,bbox:[ba,oa,ea,wa],poleLocation:Q}}function f(B,G){const Q=[],{cols:X,rows:ja,xres:ca,yres:ba,usePixelCenter:oa}=
B;let {xmin:ea,ymax:wa}=B;oa&&(ea+=ca/2,wa-=ba/2);if(H.isNone(G)){for(B=0;B<X;B++)for(G=0;G<ja;G++)Q.push([ea+ca*B,wa-ba*G]);return{points:Q}}B=new Uint8Array(X*ja);if(G.isEnvelope){const {bbox:[ra,pa,ua,va]}=G;for(let xa=0,za=0;xa<X;xa++){var c=ea+ca*xa,n=G.isPannable||c>=ra&&c<=ua;for(var P=0;P<ja;P++,za++){var S=wa-ba*P;n&&S>=pa&&S<=va&&(Q.push([c,S]),B[za]=1)}}return{points:Q,mask:B}}c=G.coef;G=[];for(n=0;n<ja;n++){var ma=wa-ba*n;P=[];S=[];for(var ka=0;ka<c.length;ka++){const [ra,pa,ua,va,xa]=
c[ka];ma===ua&&ua===va?(P.push(ra),P.push(pa),S.push(2),S.push(2)):ma>=ua&&ma<=va&&(P.push(ra*ma+pa),S.push(xa))}ma=P;if(2<P.length){ka=2===S[0]?0:S[0];let ra=P[0];ma=[];for(let pa=1;pa<S.length;pa++)if(2!==S[pa]||pa===S.length-1)S[pa]!==ka&&(ma.push(0===ka?Math.min(ra,P[pa-1]):Math.max(ra,P[pa-1])),ka=S[pa],ra=P[pa]),pa===S.length-1&&ma.push(0===S[pa]?Math.min(ra,P[pa]):Math.max(ra,P[pa]));ma.sort((pa,ua)=>pa-ua)}else P[0]>P[1]&&(ma=[P[1],P[0]]);G.push(ma)}for(let ra=0,pa=0;ra<X;ra++)for(c=ea+ca*
ra,n=0;n<ja;n++,pa++)if(P=wa-ba*n,S=G[n],2===S.length)c>=S[0]&&c<=S[1]&&(Q.push([c,P]),B[pa]=1);else if(2<S.length){ma=!1;for(ka=0;ka<S.length;ka+=2)if(c>=S[ka]&&c<=S[ka+1]){ma=!0;break}ma&&(Q.push([c,P]),B[pa]=1)}return{points:Q,mask:B}}function d(B,G){const [Q,X]=G;for(G=0;G<B.length;G++){const ja=B[G][1];if(ja<Q||ja>X)B[G]=[NaN,NaN]}}function h(B){const G=v(B[0].spatialReference);if(2>B.length||H.isNone(G))return B[0];const Q=r(B[0].spatialReference);B=B.filter(oa=>oa.width>Q);if(1===B.length)return B[0];
let {xmin:X,xmax:ja,ymin:ca,ymax:ba}=B[0];for(let oa=1;oa<B.length;oa++){const ea=B[oa];ja=ea.xmax+G*oa;ca=Math.min(ca,ea.ymin);ba=Math.max(ba,ea.ymax)}return new V({xmin:X,xmax:ja,ymin:ca,ymax:ba,spatialReference:B[0].spatialReference})}function g(B,G,Q=null,X=!0){var ja=B.spatialReference;if(ja.equals(G))return B;var ca=J(B);const ba=v(ja,!0);var oa=v(G);if(0===ca||H.isNone(ba)||H.isNone(oa))return ca=m(B,G,Q,X),H.isNone(ba)&&H.isSome(oa)&&Math.abs(ca.width-oa)<r(G)&&Z.isLoaded()&&(ja=a(ja),H.isSome(ja)&&
ja.poleLocation===z.None&&B.width<(ja.bbox[2]-ja.bbox[0])/2)?t(B,G)||ca:ca;oa=B.clone().normalize();if(1===oa.length&&B.xmax<ba&&B.xmax-ba/2>r(ja)){const {xmin:ea,xmax:wa}=B;for(let c=0;c<=ca;c++)oa[c]=new V({xmin:0===c?ea:-ba/2,xmax:c===ca?wa-ba*c:ba/2,ymin:B.ymin,ymax:B.ymax,spatialReference:ja})}B=oa.map(ea=>m(ea,G,Q,X));return h(B.filter(H.isSome))}function t(B,G){const Q=v(G);if(H.isNone(Q))return null;let {xmin:X,ymin:ja,xmax:ca,ymax:ba}=B;var oa=B.spatialReference;B=new I({spatialReference:oa,
rings:[[[X,ja],[ca,ja],[ca,ba],[X,ba],[X,ja]]]});B=Z.project(B,G);if(2!==B.rings.length||!B.rings[0].length||!B.rings[1].length)return null;({rings:B}=B);oa=r(oa);G=new V({spatialReference:G});for(let ea=0;2>ea;ea++){X=ca=B[ea][0][0];ja=ba=B[ea][0][1];for(let wa=0;wa<B[ea].length;wa++)X=X>B[ea][wa][0]?B[ea][wa][0]:X,ca=ca<B[ea][wa][0]?B[ea][wa][0]:ca,ja=ja>B[ea][wa][1]?B[ea][wa][1]:ja,ba=ba<B[ea][wa][1]?B[ea][wa][1]:ba;if(0===ea)G.ymin=ja,G.ymax=ba,G.xmin=X,G.xmax=ca;else if(G.ymin=Math.min(G.ymin,
ja),G.ymax=Math.max(G.ymax,ba),Math.abs(ca-Q/2)<oa)G.xmin=X,G.xmax+=Q;else if(Math.abs(X+Q/2)<oa)G.xmax=ca+Q;else return null}return G}function m(B,G,Q=null,X=!0,ja=!0){const ca=B.spatialReference;if(ca.equals(G)||!G)return B;w(ca,G,Q);const ba=Z.project(B,G,Q);if(ja&&G.isWebMercator&&ba&&(ba.ymax=Math.min(2.0037508342787E7,ba.ymax),ba.ymin=Math.max(-2.0037508342787E7,ba.ymin),ba.ymin>=ba.ymax))return null;if(!X||!ba)return ba;var oa=y(ca,!0);X=y(G,!0);if(H.isNone(oa)||H.isNone(X))return ba;ja=r(ca,
.001);const ea=r(ca,500);var wa=r(G,.001);if(Math.abs(ba.xmin-X[0])<wa&&Math.abs(ba.xmax-X[1])<wa){wa=Math.abs(B.xmin-oa[0]);oa=Math.abs(oa[1]-B.xmax);if(wa<ja&&oa>ea){ba.xmin=X[0];var c=[];c.push(new O(B.xmax,B.ymin,ca));c.push(new O(B.xmax,(B.ymin+B.ymax)/2,ca));c.push(new O(B.xmax,B.ymax,ca));c=c.map(n=>q(n,G,Q)).filter(n=>!isNaN(n?.x)).map(n=>n.x);ba.xmax=Math.max.apply(null,c)}oa<ja&&wa>ea&&(ba.xmax=X[1],X=[],X.push(new O(B.xmin,B.ymin,ca)),X.push(new O(B.xmin,(B.ymin+B.ymax)/2,ca)),X.push(new O(B.xmin,
B.ymax,ca)),B=X.map(n=>q(n,G,Q)).filter(n=>!isNaN(n?.x)).map(n=>n.x),ba.xmin=Math.min.apply(null,B))}else B=r(G,.001),Math.abs(ba.xmin-X[0])<B&&(ba.xmin=X[0]),Math.abs(ba.xmax-X[1])<B&&(ba.xmax=X[1]);return ba}function v(B,G=!1){return B?B.isWebMercator?2*(G?2.0037508342787E7:2.0037508342788905E7):B.wkid&&B.isGeographic?360:2*U[B.wkid]||null:null}function y(B,G=!1){if(B.isGeographic)return[-180,180];B=v(B,G);return H.isSome(B)?[-B/2,B/2]:null}function D(B,G,Q,X){B=(B-G)/Q;0!==B-Math.floor(B)?B=Math.floor(B):
X&&--B;return B}function J(B,G=!1){var Q=v(B.spatialReference);if(H.isNone(Q))return 0;const X=G?0:-(Q/2),ja=r(B.spatialReference),ca=!G&&Math.abs(B.xmin+Q/2)<ja?-Q/2:B.xmin;B=D(!G&&Math.abs(B.xmax-Q/2)<ja?Q/2:B.xmax,X,Q,!0);Q=D(ca,X,Q,!1);return B-Q}function E(B){const {projectedExtent:G,srcBufferExtent:Q,pixelSize:X,datumTransformation:ja,rasterTransform:ca}=B;var ba=G.spatialReference;const oa=Q.spatialReference;var ea=w(ba,oa);const {xmin:wa,ymin:c,xmax:n,ymax:P}=G,S=v(oa),ma=H.isSome(S)&&(B.hasWrapAround||
"gcs-shift"===ca?.type);B=B.spacing||[32,32];var ka=B[0]*X.x,ra=B[1]*X.y;const pa=1===B[0],ua=Math.ceil((n-wa)/ka-.1/B[0])+(pa?0:1),va=Math.ceil((P-c)/ra-.1/B[1])+(pa?0:1);ka=l({cols:ua,rows:va,xmin:wa,ymax:P,xres:ka,yres:ra,inSR:ba,outSR:oa,datumTransformation:ja,preferPE:4>=B[0],usePixelCenter:pa});ra=[];let xa,za=0;const Aa=pa?-1:NaN,{xmin:Ca,xmax:Y,ymax:la,width:aa,height:sa}=Q,ta=r(oa,500),ha=H.isSome(S)&&0<Ca&&Y>S/2;var ya=!1;ea&&(ya=a(ba),ya=H.isSome(ya)&&0<ya.poleLocation);for(ba=0;ba<ua;ba++){ea=
[];for(let Fa=0;Fa<va;Fa++){var Ba=ka[ba*va+Fa];ma&&Ba[0]>Y&&Ba[0]>S/2-ta?Ba[0]-=S:ma&&0===ba&&0>Ba[0]&&ha&&!ca&&(Ba[0]+=S);!Ba||isNaN(Ba[0])||isNaN(Ba[1])?(ra.push(Aa),ra.push(Aa),ea.push(null),za++):(ca&&(Ba=ca.inverseTransform(new O({x:Ba[0],y:Ba[1],spatialReference:oa})),Ba=[Ba.x,Ba.y]),ea.push(Ba),0<ba&&ma&&xa[Fa]&&Ba[0]<xa[Fa][0]&&(Ba[0]+=S,ya&&Ba[0]>Y&&Ba[0]>S&&(Ba[0]-=S)),ra.push((Ba[0]-Ca)/aa),ra.push((la-Ba[1])/sa))}xa=ea}return{offsets:ra,error:null,coefficients:null,outofBoundPointCount:za,
spacing:B,size:pa?[ua,va]:[ua-1,va-1]}}function R(B,G,Q){const {cols:X,rows:ja}=G;G=new Float32Array((X-1)*(ja-1)*12);const ca=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),ba=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let P=0;P<X-1;P++){for(var oa=0;oa<ja-1;oa++){var ea=P*ja*2+2*oa,wa=B[ea];const S=B[ea+1];var c=B[ea+2],n=B[ea+3];ea+=2*ja;const ma=B[ea],ka=B[ea+1],ra=B[ea+2];ea=B[ea+3];let pa=0,ua=12*(oa*(X-1)+P);for(let va=0;3>va;va++)G[ua++]=ca[pa++]*wa+ca[pa++]*c+ca[pa++]*ra;pa=0;for(c=0;3>c;c++)G[ua++]=
ca[pa++]*S+ca[pa++]*n+ca[pa++]*ea;pa=0;for(n=0;3>n;n++)G[ua++]=ba[pa++]*wa+ba[pa++]*ma+ba[pa++]*ra;pa=0;for(wa=0;3>wa;wa++)G[ua++]=ba[pa++]*S+ba[pa++]*ka+ba[pa++]*ea}if(Q)for(oa=0;oa<G.length;oa++)isNaN(G[oa])&&(G[oa]=-1)}return G}var z;(function(B){B[B.None=0]="None";B[B.North=1]="North";B[B.South=2]="South";B[B.Both=3]="Both"})(z||(z={}));const C=(B,G,Q,X=0)=>{if(1===Q[0])return[0,0];var ja=1,ca=-1,ba=1,oa=-1;for(var ea=0;ea<B.length;ea+=2)isNaN(B[ea])||(ja=ja>B[ea]?B[ea]:ja,ca=ca>B[ea]?ca:B[ea],
ba=ba>B[ea+1]?B[ea+1]:ba,oa=oa>B[ea+1]?oa:B[ea+1]);const {cols:wa,rows:c}=G;G=(ca-ja)/wa/Q[0];Q=(oa-ba)/c/Q[1];X*=2;ba=0;oa=!1;ja=[0,0];for(ca=0;ca<wa-3;ca++){for(ea=0;ea<c-3;ea++){var n=ca*c*2+2*ea;const P=Math.abs(((B[n]+B[n+4]+B[n+4*c]+B[n+4*c+4])/4-B[n+2*c+2])/G);n=Math.abs(((B[n+1]+B[n+5]+B[n+4*c+1]+B[n+4*c+5])/4-B[n+2*c+3])/Q);P+n>ba&&(ba=P+n,ja=[P,n]);if(X&&ba>X){oa=!0;break}}if(oa)break}return ja},U={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,
4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,
54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7},ia=new Map,fa=new Map;K.computeProjectedScales=function(B,G,Q=512,X=!0){const {extent:ja,spatialReference:ca,pixelSize:ba}=B,oa=L(new O({x:ba.x,y:ba.y,spatialReference:ca}),G,ja);if(null==oa)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const ea=(oa.x+oa.y)/2,wa=p.getMetersPerUnitForSR(G);var c=ea*wa*96*39.37,n=G.isGeographic?
256/Q*2.958287637958547E8:256/Q*5.91657527591555E8,P="vector-magdir"===B.dataType||"vector-uv"===B.dataType,S=g(ja,G),ma=Math.min(Math.ceil(Math.log(Math.min(B.width,B.height)/32)/Math.LN2),Math.ceil(Math.log(n/2/c)/Math.LN2));!P&&X&&(G.isGeographic||G.isWebMercator)&&(P=0>S.xmin*S.xmax,!P&&3>ma&&(X=v(G),H.isSome(X)&&(P=2**ma*ea*Q,Q=Math.ceil(X/P),P=1===Q||2===Q&&X/2-S.xmax<P)));X=c;B=Math.min(2,Math.max(1.414,B.storageInfo?.pyramidScalingFactor||2));if(P)X=n,n=G.isGeographic?1.341104507446289E-6:
.29858214164761665,ma=96*n*wa*39.37,G=L(new O({x:n,y:n,spatialReference:{wkid:G.isGeographic?4326:3857}}),ca,S),G.x*=X/ma,G.y*=X/ma;else{G={x:ba.x,y:ba.y};for(S=0;X<.5005*n&&S<ma;)S++,X*=B,G.x*=B,G.y*=B;1.001>=Math.max(X,n)/Math.min(X,n)&&(X=n)}n=[X];S=[{x:G.x,y:G.y}];for(c=Math.min(70.5310735,c)/1.001;X>=c;)X/=B,G.x/=B,G.y/=B,n.push(X),S.push({x:G.x,y:G.y});return{projectedPixelSize:oa,scales:n,srcResolutions:S,isCustomTilingScheme:!P}};K.defaultGridSpacing=32;K.defaultProjectionToleranceInPixels=
4;K.getDefaultDatumTransformationForDataset=function(B,G,Q){return w(B.spatialReference,G)?Q?Z.getTransformation(G,B.spatialReference,B):Z.getTransformation(B.spatialReference,G,B):null};K.getProjectedGridPoints=l;K.getProjectionOffsetGrid=function(B){var G=B.isAdaptive&&null==B.spacing;let Q=B.spacing||[32,32],X=E(B);var ja={cols:X.size[0]+1,rows:X.size[1]+1};const ca=0<X.outofBoundPointCount&&X.outofBoundPointCount<X.offsets.length/2;let ba=X.outofBoundPointCount===X.offsets.length/2||G&&ca?[0,
0]:C(X.offsets,ja,Q,4);const oa=(ba[0]+ba[1])/2;var ea=B.projectedExtent.spatialReference;const wa=B.srcBufferExtent.spatialReference;G&&(ca||4<oa)&&(x(ea,wa,B.datumTransformation)&&(ea.isGeographic||H.isSome(a(ea))),Q=[4,4],X=E({...B,spacing:Q}),ja={cols:X.size[0]+1,rows:X.size[1]+1},ba=C(X.offsets,ja,Q,4));X.error=ba;1<Q[0]&&(X.coefficients=R(X.offsets,ja,ca));!B.includeGCSGrid||ea.isGeographic||ea.isWebMercator||(wa.isGeographic?X.gcsGrid={offsets:X.offsets,coefficients:X.coefficients,spacing:Q}:
(G=a(ea),H.isSome(G)&&!G.isEnvelope&&(ea&&!ea.isGeographic&&(G=String(ea.wkid||ea.wkt),fa.has(G)?ea=fa.get(G):(ea=(ea.wkid?F.PeFactory.coordsys(ea.wkid):F.PeFactory.fromString(F.PeDefs.PE_TYPE_PROJCS,ea.wkt)).getGeogcs().getCode(),fa.set(G,ea)),ea=new N({wkid:ea})),ea=g(B.projectedExtent,ea),{offsets:B}=E({...B,srcBufferExtent:ea,spacing:Q}),ja=R(B,ja,ca),X.gcsGrid={offsets:B,coefficients:ja,spacing:Q})));return X};K.getRasterDatasetAlignmentInfo=function(B){const G=B.storageInfo.origin.x;var Q=v(B.spatialReference,
!0);if(H.isNone(Q))return{originX:G,halfWorldWidth:null,pyramidsInfo:null};const X=Q/2,{nativePixelSize:ja,storageInfo:ca,extent:ba}=B,{maximumPyramidLevel:oa,blockWidth:ea,pyramidScalingFactor:wa}=ca;let c=ja.x;const n=[];B=H.isSome(B.transform)&&"gcs-shift"===B.transform.type;const P=G+(B?0:X);Q=B?Q-G:X-G;for(let S=0;S<=oa;S++){const ma=(ba.xmax-G)/c/ea,ka=Q/c/ea;n.push({resolutionX:c,blockWidth:ea,datsetColumnCount:0===ma-Math.floor(ma)?ma:Math.ceil(ma),worldColumnCountFromOrigin:0===ka-Math.floor(ka)?
ka:Math.ceil(ka),leftMargin:Math.round(P/c)%ea,rightPadding:(ea-Math.round(Q/c)%ea)%ea,originColumnOffset:Math.floor(P/c/ea)});c*=wa}return{originX:G,halfWorldWidth:X,pyramidsInfo:n,hasGCSSShiftTransform:B}};K.getWorldWidth=v;K.getWorldWrapCount=J;K.load=async function(){Z.isLoaded()||await Z.load()};K.minimumGridSpacing=4;K.projectExtent=g;K.projectPoint=q;K.projectResolution=L;K.requirePE=x;K.snapExtent=function(B){B=B.clone().normalize();return 1===B.length?B[0]:h(B)};K.snapPyramid=function(B,
G,Q){const {storageInfo:X,pixelSize:ja}=G;var ca=0;let ba=!1;var {pyramidResolutions:oa}=X;if(H.isSome(oa)&&oa.length){B=(B.x+B.y)/2;var ea=oa[oa.length-1];ea=(ea.x+ea.y)/2;var wa=(ja.x+ja.y)/2;if(B<=wa)ca=0;else if(B>=ea)ca=oa.length,ba=8<B/ea;else{ea=wa;for(let c=1;c<=oa.length;c++){wa=(oa[c-1].x+oa[c-1].y)/2;if(B<=wa){B===wa?ca=c:"down"===Q?(ca=c-1,ba=8<B/ea):ca="up"===Q?c:B-ea>wa-B||2<B/ea?c:c-1;break}ea=wa}}Q=0===ca?ja:oa[ca-1];ba&&(oa=Math.min(Q.x,Q.y),B=p.getMetersPerUnitForSR(G.spatialReference),
19567<oa*B&&(ba=!1));return{pyramidLevel:ca,pyramidResolution:new O({x:Q.x,y:Q.y,spatialReference:G.spatialReference}),excessiveReading:ba}}ca=Math.log(B.x/ja.x)/Math.LN2;B=Math.log(B.y/ja.y)/Math.LN2;oa=G.storageInfo.maximumPyramidLevel||0;ca="down"===Q?Math.floor(Math.min(ca,B)):"up"===Q?Math.ceil(Math.max(ca,B)):Math.round((ca+B)/2);0>ca?ca=0:ca>oa&&(ba=ca>oa+3,ca=oa);Q=2**ca;G=new O({x:Q*G.nativePixelSize.x,y:Q*G.nativePixelSize.y,spatialReference:G.spatialReference});return{pyramidLevel:ca,pyramidResolution:G,
excessiveReading:ba}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(K,k,M,H,p){function F(){return!!k._pe}function Z(){return!!p("esri-wasm")}function V(){return L?L:L=(new Promise((q,b)=>K(["./pe-wasm"],q,b))).then(q=>q.peWasm).then(({default:q})=>q({locateFile:b=>H.getAssetUrl(`esri/geometry/support/${b}`)})).then(q=>{O(q)})}function O(q){function b(u,a,e){u[a]=
e(u[a])}k._pe=q;k.PeDefs.init();k.PeGTlistExtended.init();k.PeNotationMgrs.init();k.PeNotationUtm.init();k.PePCSInfo.init();k.PeGCSExtent=function(u){function a(){return e.apply(this,arguments)}M._inherits(a,u);var e=M._createSuper(a);a.prototype.destroy=function(){k._pe.destroy(this)};return M._createClass(a)}(k._pe.PeGCSExtent);q=[k._pe.PeDatum,k._pe.PeGeogcs,k._pe.PeGeogtran,k._pe.PeObject,k._pe.PeParameter,k._pe.PePrimem,k._pe.PeProjcs,k._pe.PeSpheroid,k._pe.PeUnit];for(var l of q)b(l.prototype,
"getName",u=>function(){return u.call(this,Array(k.PeDefs.PE_NAME_MAX))});for(const u of[k._pe.PeGeogtran,k._pe.PeProjcs])b(u.prototype,"getParameters",a=>function(){const e=Array(k.PeDefs.PE_PARM_MAX);let f=a.call(this);for(let d=0;d<e.length;d++){const h=k._pe.getValue(f,"*");e[d]=h?k._pe.wrapPointer(h,k._pe.PeParameter):null;f+=Int32Array.BYTES_PER_ELEMENT}return e});b(k._pe.PeHorizon.prototype,"getCoord",u=>function(){const a=this.getSize();if(!a)return null;const e=[],f=u.call(this);w(e,a,f);
return e});b(k._pe.PeGTlistExtendedEntry.prototype,"getEntries",u=>{const a=k._pe._pe_getPeGTlistExtendedGTsSize();return function(){let e=null;var f=u.call(this);if(!k._pe.compare(f,k._pe.NULL)){e=[f];const d=this.getSteps();if(1<d){f=k._pe.getPointer(f);for(let h=1;h<d;h++)e.push(k._pe.wrapPointer(f+a*h,k._pe.PeGTlistExtendedGTs))}}return e}});const A=k._pe._pe_getPeHorizonSize();l=u=>function(){let a=this._cache;a||(this._cache=a=new Map);if(a.has(u))return a.get(u);let e=null;var f=u.call(this);
if(!k._pe.compare(f,k._pe.NULL)){e=[f];const d=f.getNump();if(1<d){f=k._pe.getPointer(f);for(let h=1;h<d;h++)e.push(k._pe.wrapPointer(f+A*h,k._pe.PeHorizon))}}a.set(u,e);return e};b(k._pe.PeProjcs.prototype,"horizonGcsGenerate",l);b(k._pe.PeProjcs.prototype,"horizonPcsGenerate",l);k._pe.PeObject.prototype.toString=function(u=k.PeDefs.PE_STR_OPTS_NONE){k._pe.ensureCache.prepare();const a=k._pe.getPointer(this),e=k._pe.ensureInt8(Array(k.PeDefs.PE_BUFFER_MAX));return k._pe.UTF8ToString(k._pe._pe_object_to_string_ext(a,
u,e))}}function I(q){if(q){var b=k._pe.getClass(q);b&&(b=k._pe.getCache(b))&&(q=k._pe.getPointer(q))&&delete b[q]}}function N(q,b){const l=[];b=Array(b);for(let A=0;A<q;A++)l.push(k._pe.ensureInt8(b));return l}function x(q){let b;Array.isArray(q[0])?(b=[],q.forEach(l=>{b.push(l[0],l[1])})):b=q;return b}function w(q,b,l,A=!1){if(A)for(A=0;A<2*b;A++)q[A]=k._pe.getValue(l+A*Float64Array.BYTES_PER_ELEMENT,"double");else{A=0===q.length;for(let u=0;u<b;u++)A&&(q[u]=Array(2)),q[u][0]=k._pe.getValue(l,"double"),
q[u][1]=k._pe.getValue(l+Float64Array.BYTES_PER_ELEMENT,"double"),l+=2*Float64Array.BYTES_PER_ELEMENT}}let L;k._pe=null;k.PeCSTransformations=void 0;(function(q){function b(u,a,e){k._pe.ensureCache.prepare();var f=x(e);const d=e===f;f=k._pe.ensureFloat64(f);(u=k._pe._pe_geog_to_proj(k._pe.getPointer(u),a,f))&&w(e,a,f,d);return u}function l(u,a,e){return A(u,a,e,0)}function A(u,a,e,f){k._pe.ensureCache.prepare();var d=x(e);const h=e===d;d=k._pe.ensureFloat64(d);(u=k._pe._pe_proj_to_geog_center(k._pe.getPointer(u),
a,d,f))&&w(e,a,d,h);return u}q.geogToProj=b;q.projGeog=function(u,a,e,f){switch(f){case k.PeDefs.PE_TRANSFORM_P_TO_G:return l(u,a,e);case k.PeDefs.PE_TRANSFORM_G_TO_P:return b(u,a,e)}return 0};q.projToGeog=l;q.projToGeogCenter=A})(k.PeCSTransformations||(k.PeCSTransformations={}));k.PeDefs=void 0;(function(q){q.init=function(){q.PE_BUFFER_MAX=k._pe.PeDefs.prototype.PE_BUFFER_MAX;q.PE_NAME_MAX=k._pe.PeDefs.prototype.PE_NAME_MAX;q.PE_MGRS_MAX=k._pe.PeDefs.prototype.PE_MGRS_MAX;q.PE_USNG_MAX=k._pe.PeDefs.prototype.PE_USNG_MAX;
q.PE_DD_MAX=k._pe.PeDefs.prototype.PE_DD_MAX;q.PE_DDM_MAX=k._pe.PeDefs.prototype.PE_DDM_MAX;q.PE_DMS_MAX=k._pe.PeDefs.prototype.PE_DMS_MAX;q.PE_UTM_MAX=k._pe.PeDefs.prototype.PE_UTM_MAX;q.PE_PARM_MAX=k._pe.PeDefs.prototype.PE_PARM_MAX;q.PE_TYPE_NONE=k._pe.PeDefs.prototype.PE_TYPE_NONE;q.PE_TYPE_GEOGCS=k._pe.PeDefs.prototype.PE_TYPE_GEOGCS;q.PE_TYPE_PROJCS=k._pe.PeDefs.prototype.PE_TYPE_PROJCS;q.PE_TYPE_GEOGTRAN=k._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;q.PE_TYPE_COORDSYS=k._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
q.PE_TYPE_UNIT=k._pe.PeDefs.prototype.PE_TYPE_UNIT;q.PE_TYPE_LINUNIT=k._pe.PeDefs.prototype.PE_TYPE_LINUNIT;q.PE_STR_OPTS_NONE=k._pe.PeDefs.prototype.PE_STR_OPTS_NONE;q.PE_STR_AUTH_NONE=k._pe.PeDefs.prototype.PE_STR_AUTH_NONE;q.PE_STR_AUTH_TOP=k._pe.PeDefs.prototype.PE_STR_AUTH_TOP;q.PE_STR_NAME_CANON=k._pe.PeDefs.prototype.PE_STR_NAME_CANON;q.PE_PARM_X0=k._pe.PeDefs.prototype.PE_PARM_X0;q.PE_PARM_ND=k._pe.PeDefs.prototype.PE_PARM_ND;q.PE_TRANSFORM_1_TO_2=k._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
q.PE_TRANSFORM_2_TO_1=k._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;q.PE_TRANSFORM_P_TO_G=k._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;q.PE_TRANSFORM_G_TO_P=k._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;q.PE_HORIZON_RECT=k._pe.PeDefs.prototype.PE_HORIZON_RECT;q.PE_HORIZON_POLY=k._pe.PeDefs.prototype.PE_HORIZON_POLY;q.PE_HORIZON_LINE=k._pe.PeDefs.prototype.PE_HORIZON_LINE;q.PE_HORIZON_DELTA=k._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(k.PeDefs||(k.PeDefs={}));k.PeFactory=void 0;(function(q){function b(a,e){let f=
null,d=l[a];d||(d={},l[a]=d);d.hasOwnProperty(String(e))?f=d[e]:(a=k._pe.PeFactory.prototype.factoryByType(a,e),k._pe.compare(a,k._pe.NULL)||(f=a,d[e]=f));return f=u(f)}const l={},A={},u=a=>{if(a){const e=a.getType();switch(e){case k.PeDefs.PE_TYPE_GEOGCS:a=k._pe.castObject(a,k._pe.PeGeogcs);break;case k.PeDefs.PE_TYPE_PROJCS:a=k._pe.castObject(a,k._pe.PeProjcs);break;case k.PeDefs.PE_TYPE_GEOGTRAN:a=k._pe.castObject(a,k._pe.PeGeogtran);break;default:e&k.PeDefs.PE_TYPE_UNIT&&(a=k._pe.castObject(a,
k._pe.PeUnit))}}return a};q.initialize=function(){k._pe.PeFactory.prototype.initialize(null)};q.coordsys=function(a){return b(k.PeDefs.PE_TYPE_COORDSYS,a)};q.factoryByType=b;q.fromString=function(a,e){let f=null,d=A[a];d||(d={},A[a]=d);d.hasOwnProperty(e)?f=d[e]:(a=k._pe.PeFactory.prototype.fromString(a,e),k._pe.compare(a,k._pe.NULL)||(f=a,d[e]=f));return f=u(f)};q.geogcs=function(a){return b(k.PeDefs.PE_TYPE_GEOGCS,a)};q.geogtran=function(a){return b(k.PeDefs.PE_TYPE_GEOGTRAN,a)};q.getCode=function(a){return k._pe.PeFactory.prototype.getCode(a)};
q.projcs=function(a){return b(k.PeDefs.PE_TYPE_PROJCS,a)};q.unit=function(a){return b(k.PeDefs.PE_TYPE_UNIT,a)}})(k.PeFactory||(k.PeFactory={}));k.PeGCSExtent=null;k.PeGTlistExtended=void 0;(function(q){let b;q.init=function(){q.PE_GTLIST_OPTS_COMMON=k._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;b=k._pe._pe_getPeGTlistExtendedEntrySize()};q.getGTlist=function(l,A,u,a,e,f){let d=null;const h=new k._pe.PeInteger(f);try{const g=k._pe.PeGTlistExtended.prototype.getGTlist(l,A,u,a,e,h);if(f=h.val)if(d=
[g],1<f){const t=k._pe.getPointer(g);for(l=1;l<f;l++)d.push(k._pe.wrapPointer(t+b*l,k._pe.PeGTlistExtendedEntry))}}finally{k._pe.destroy(h)}return d}})(k.PeGTlistExtended||(k.PeGTlistExtended={}));k.PeGTlistExtendedEntry=void 0;(function(q){q.destroy=function(b){if(b&&b.length){for(const l of b)I(l),l.getEntries().forEach(A=>{I(A);A=A.getGeogtran();I(A);A.getParameters().forEach(I);[A.getGeogcs1(),A.getGeogcs2()].forEach(u=>{I(u);const a=u.getDatum();I(a);I(a.getSpheroid());I(u.getPrimem());I(u.getUnit())})});
k._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(k.PeGTlistExtendedEntry||(k.PeGTlistExtendedEntry={}));k.PeGTTransformations=void 0;(function(q){q.geogToGeog=function(b,l,A,u,a){k._pe.ensureCache.prepare();var e=x(A);const f=A===e;e=k._pe.ensureFloat64(e);let d=0;u&&(d=k._pe.ensureFloat64(u));(b=k._pe._pe_geog_to_geog(k._pe.getPointer(b),l,e,d,a))&&w(A,l,e,f);return b}})(k.PeGTTransformations||(k.PeGTTransformations={}));k.PeNotationDms=void 0;(function(q){const b=(A,u,a,e,f,d)=>{k._pe.ensureCache.prepare();
switch(A){case "dd":var h=k._pe._pe_geog_to_dd;var g=k.PeDefs.PE_DD_MAX;break;case "ddm":h=k._pe._pe_geog_to_ddm;g=k.PeDefs.PE_DDM_MAX;break;case "dms":h=k._pe._pe_geog_to_dms,g=k.PeDefs.PE_DMS_MAX}A=0;u&&(A=k._pe.getPointer(u));u=x(e);u=k._pe.ensureFloat64(u);g=N(a,g);e=k._pe.ensureInt32(g);if(f=h(A,a,u,f,e))for(h=0;h<a;h++)d[h]=k._pe.UTF8ToString(g[h]);return f},l=(A,u,a,e,f)=>{k._pe.ensureCache.prepare();switch(A){case "dd":var d=k._pe._pe_dd_to_geog;break;case "ddm":d=k._pe._pe_ddm_to_geog;break;
case "dms":d=k._pe._pe_dms_to_geog}A=0;u&&(A=k._pe.getPointer(u));u=e.map(h=>k._pe.ensureString(h));e=k._pe.ensureInt32(u);u=k._pe.ensureFloat64(Array(2*a));(d=d(A,a,e,u))&&w(f,a,u);return d};q.geogToDms=function(A,u,a,e,f){return b("dms",A,u,a,e,f)};q.dmsToGeog=function(A,u,a,e){return l("dms",A,u,a,e)};q.geogToDdm=function(A,u,a,e,f){return b("ddm",A,u,a,e,f)};q.ddmToGeog=function(A,u,a,e){return l("ddm",A,u,a,e)};q.geogToDd=function(A,u,a,e,f){return b("dd",A,u,a,e,f)};q.ddToGeog=function(A,u,
a,e){return l("dd",A,u,a,e)}})(k.PeNotationDms||(k.PeNotationDms={}));k.PeNotationMgrs=void 0;(function(q){q.init=function(){q.PE_MGRS_STYLE_NEW=k._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;q.PE_MGRS_STYLE_OLD=k._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;q.PE_MGRS_STYLE_AUTO=k._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;q.PE_MGRS_180_ZONE_1_PLUS=k._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;q.PE_MGRS_ADD_SPACES=k._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};q.geogToMgrsExtended=
function(b,l,A,u,a,e,f){k._pe.ensureCache.prepare();let d=0;b&&(d=k._pe.getPointer(b));b=x(A);A=k._pe.ensureFloat64(b);b=N(l,k.PeDefs.PE_MGRS_MAX);const h=k._pe.ensureInt32(b);if(u=k._pe._pe_geog_to_mgrs_extended(d,l,A,u,a,e,h))for(a=0;a<l;a++)f[a]=k._pe.UTF8ToString(b[a]);return u};q.mgrsToGeogExtended=function(b,l,A,u,a){k._pe.ensureCache.prepare();let e=0;b&&(e=k._pe.getPointer(b));b=A.map(f=>k._pe.ensureString(f));A=k._pe.ensureInt32(b);b=k._pe.ensureFloat64(Array(2*l));(u=k._pe._pe_mgrs_to_geog_extended(e,
l,A,u,b))&&w(a,l,b);return u}})(k.PeNotationMgrs||(k.PeNotationMgrs={}));k.PeNotationUsng=void 0;(function(q){q.geogToUsng=function(b,l,A,u,a,e,f){k._pe.ensureCache.prepare();let d=0;b&&(d=k._pe.getPointer(b));b=x(A);A=k._pe.ensureFloat64(b);b=N(l,k.PeDefs.PE_MGRS_MAX);const h=k._pe.ensureInt32(b);if(u=k._pe._pe_geog_to_usng(d,l,A,u,a,e,h))for(a=0;a<l;a++)f[a]=k._pe.UTF8ToString(b[a]);return u};q.usngToGeog=function(b,l,A,u){k._pe.ensureCache.prepare();var a=0;b&&(a=k._pe.getPointer(b));b=A.map(e=>
k._pe.ensureString(e));A=k._pe.ensureInt32(b);b=k._pe.ensureFloat64(Array(2*l));(a=k._pe._pe_usng_to_geog(a,l,A,b))&&w(u,l,b);return a}})(k.PeNotationUsng||(k.PeNotationUsng={}));k.PeNotationUtm=void 0;(function(q){q.init=function(){q.PE_UTM_OPTS_NONE=k._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;q.PE_UTM_OPTS_ADD_SPACES=k._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;q.PE_UTM_OPTS_NS=k._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};q.geogToUtm=function(b,l,A,u,a){k._pe.ensureCache.prepare();var e=
0;b&&(e=k._pe.getPointer(b));b=x(A);A=k._pe.ensureFloat64(b);b=N(l,k.PeDefs.PE_UTM_MAX);const f=k._pe.ensureInt32(b);if(u=k._pe._pe_geog_to_utm(e,l,A,u,f))for(e=0;e<l;e++)a[e]=k._pe.UTF8ToString(b[e]);return u};q.utmToGeog=function(b,l,A,u,a){k._pe.ensureCache.prepare();let e=0;b&&(e=k._pe.getPointer(b));b=A.map(f=>k._pe.ensureString(f));A=k._pe.ensureInt32(b);b=k._pe.ensureFloat64(Array(2*l));(u=k._pe._pe_utm_to_geog(e,l,A,u,b))&&w(a,l,b);return u}})(k.PeNotationUtm||(k.PeNotationUtm={}));k.PePCSInfo=
void 0;(function(q){const b=new Map;q.init=function(){q.PE_PCSINFO_OPTION_NONE=k._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;q.PE_PCSINFO_OPTION_DOMAIN=k._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;q.PE_POLE_OUTSIDE_BOUNDARY=k._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;q.PE_POLE_POINT=k._pe.PePCSInfo.prototype.PE_POLE_POINT};q.generate=function(l,A=q.PE_PCSINFO_OPTION_DOMAIN){let u=null,a=null;b.has(l)&&(a=b.get(l),a[A]&&(u=a[A]));u||(u=k._pe.PePCSInfo.prototype.generate(l,A),a||(a=
[],b.set(l,a)),a[A]=u);return u}})(k.PePCSInfo||(k.PePCSInfo={}));k.PeVersion=void 0;(function(q){q.versionString=function(){return k._pe.PeVersion.prototype.version_string()}})(k.PeVersion||(k.PeVersion={}));const r=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return k.PeCSTransformations},get PeDefs(){return k.PeDefs},get PeFactory(){return k.PeFactory},get PeGCSExtent(){return k.PeGCSExtent},get PeGTTransformations(){return k.PeGTTransformations},get PeGTlistExtended(){return k.PeGTlistExtended},
get PeGTlistExtendedEntry(){return k.PeGTlistExtendedEntry},get PeNotationDms(){return k.PeNotationDms},get PeNotationMgrs(){return k.PeNotationMgrs},get PeNotationUsng(){return k.PeNotationUsng},get PeNotationUtm(){return k.PeNotationUtm},get PePCSInfo(){return k.PePCSInfo},get PeVersion(){return k.PeVersion},_init:O,get _pe(){return k._pe},isLoaded:F,isSupported:Z,load:V},Symbol.toStringTag,{value:"Module"}));k._init=O;k.isLoaded=F;k.isSupported=Z;k.load=V;k.pe=r})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w,L,r,q,b,l,A,u,a,e,f,d,h,g,t){function m(){return!!Na&&b.isLoaded()}function v(T){F.isNone(La)&&(La=Promise.all([b.load(),(new Promise((da,W)=>K(["../chunks/geometryEngineBase"],da,W))).then(da=>da.geometryEngineBase),new Promise((da,W)=>K(["./geometryAdapters/hydrated"],da,W))]));return La.then(([,da,{hydratedAdapter:W}])=>{Z.throwIfAborted(T);Ra=W;Na=da.default;Na._enableProjection(b.pe);db.notify()})}function y(T,da,W=null,qa=null){return Array.isArray(T)?0===
T.length?[]:D(Ra,T,T[0].spatialReference,da,W,qa):D(Ra,[T],T.spatialReference,da,W,qa)[0]}function D(T,da,W,qa,Da=null,Ea=null){if(F.isNone(W)||F.isNone(qa))return da;if(z(W,qa,Da))return da.map(Ga=>F.unwrap(C(Ga,W,qa)));if(F.isNone(Da)){const Ga=d.cacheKey(W,qa);void 0!==ab[Ga]?Da=ab[Ga]:(Da=E(W,qa,void 0),F.isNone(Da)&&(Da=new d),ab[Ga]=Da)}if(F.isNone(Na)||F.isNone(T))throw new Sa;return F.isSome(Ea)?Na._project(T,da,W,qa,Da,Ea):Na._project(T,da,W,qa,Da)}function J(T,da){if(!m())for(const W of T)if(F.isSome(W)&&
!h.equals(W.spatialReference,da)&&h.isValid(W.spatialReference)&&h.isValid(da)&&!z(W.spatialReference,da))return O.trackAccess(db),{pending:v(),geometries:null};return{pending:null,geometries:T.map(W=>F.isNone(W)?null:h.equals(W.spatialReference,da)?W:h.isValid(W.spatialReference)&&h.isValid(da)?R(W,da):null)}}function E(T,da,W=null){if(F.isNone(T)||F.isNone(da))return null;if(F.isNone(Na)||F.isNone(Ra))throw new Sa;T=Na._getTransformation(Ra,T,da,W,W?.spatialReference);return null!==T?d.fromGE(T):
null}function R(T,da){try{const W=y(T,da);if(null==W)return null;"xmin"in T&&"xmin"in W&&(W.zmin=T.zmin,W.zmax=T.zmax);const qa=t.getGeometryZScaler(W.type,T.spatialReference,da);F.isSome(qa)&&qa(W);return W}catch(W){if(!(W instanceof Sa))throw W;return null}}function z(T,da,W){return W?!1:h.equals(T,da)?!0:h.isValid(T)&&h.isValid(da)&&!!Ka(T,da,gb)}function C(T,da,W){return T?"x"in T?U(T,da,new l,W,0):"xmin"in T?G(T,da,new r,W,0):"rings"in T?B(T,da,new A,W,0):"paths"in T?fa(T,da,new u,W,0):"points"in
T?ia(T,da,new q,W,0):null:null}function U(T,da,W,qa,Da){Ja[0]=T.x;Ja[1]=T.y;const Ea=T.z;Ja[2]=void 0!==Ea?Ea:Da;if(!ca(Ja,da,0,Ja,qa,0,1))return null;W.x=Ja[0];W.y=Ja[1];W.spatialReference=qa;void 0===Ea?(W.z=void 0,W.hasZ=!1):(W.z=Ja[2],W.hasZ=!0);void 0===T.m?(W.m=void 0,W.hasM=!1):(W.m=T.m,W.hasM=!0);return W}function ia(T,da,W,qa,Da){const {points:Ea,hasZ:Ga,hasM:Ha}=T;T=[];const Qa=Ea.length,Pa=[];for(var Oa of Ea)Pa.push(Oa[0],Oa[1],Ga?Oa[2]:Da);if(!ca(Pa,da,0,Pa,qa,0,Qa))return null;for(da=
0;da<Qa;++da){Da=3*da;Oa=Pa[Da];const Ua=Pa[Da+1];Ga&&Ha?T.push([Oa,Ua,Pa[Da+2],Ea[da][3]]):Ga?T.push([Oa,Ua,Pa[Da+2]]):Ha?T.push([Oa,Ua,Ea[da][2]]):T.push([Oa,Ua])}W.points=T;W.spatialReference=qa;W.hasZ=Ga;W.hasM=Ha;return W}function fa(T,da,W,qa,Da){const {paths:Ea,hasZ:Ga,hasM:Ha}=T;T=[];if(!ba(Ea,Ga??!1,Ha??!1,da,T,qa,Da))return null;W.paths=T;W.spatialReference=qa;W.hasZ=Ga;W.hasM=Ha;return W}function B(T,da,W,qa,Da){const {rings:Ea,hasZ:Ga,hasM:Ha}=T;T=[];if(!ba(Ea,Ga??!1,Ha??!1,da,T,qa,Da))return null;
W.rings=T;W.spatialReference=qa;W.hasZ=Ga;W.hasM=Ha;return W}function G(T,da,W,qa,Da){const {xmin:Ea,ymin:Ga,xmax:Ha,ymax:Qa,hasZ:Pa,hasM:Oa}=T;if(!Q(Ea,Ga,Pa?T.zmin:Da,da,Ja,qa))return null;W.xmin=Ja[0];W.ymin=Ja[1];Pa&&(W.zmin=Ja[2]);if(!Q(Ha,Qa,Pa?T.zmax:Da,da,Ja,qa))return null;W.xmax=Ja[0];W.ymax=Ja[1];Pa&&(W.zmax=Ja[2]);Oa&&(W.mmin=T.mmin,W.mmax=T.mmax);W.spatialReference=qa;return W}function Q(T,da,W,qa,Da,Ea){Ma[0]=T;Ma[1]=da;Ma[2]=W;return ca(Ma,qa,0,Da,Ea,0,1)}function X(T,da,W,qa){if(F.isNone(da)||
F.isNone(qa)||2>T.length)return!1;2===T.length&&(Ma[0]=T[0],Ma[1]=T[1],Ma[2]=0,T=Ma);return ca(T,da,0,W,qa,0,1)}function ja(T,da,W){if(F.isNone(da))return!1;da=c(da,bb);da=Wa[da][na.WGS84_COMPARABLE_LON_LAT];if(F.isNone(da))return!1;da(T,0,Ma,0);W!==Ma&&(W[0]=Ma[0],W[1]=Ma[1],2<W.length&&(W[2]=Ma[2]));return!0}function ca(T,da,W,qa,Da,Ea,Ga=1){da=Ka(da,Da,gb);if(F.isNone(da))return!1;if(da===n){if(T===qa&&W===Ea)return!0;Ga=W+3*Ga;for(let Ha=W,Qa=Ea;Ha<Ga;Ha++,Qa++)qa[Qa]=T[Ha];return!0}Ga=W+3*Ga;
for(let Ha=W,Qa=Ea;Ha<Ga;Ha+=3,Qa+=3)da(T,Ha,qa,Qa);return!0}function ba(T,da,W,qa,Da,Ea,Ga=0){const Ha=[];for(const Qa of T)for(const Pa of Qa)Ha.push(Pa[0],Pa[1],da?Pa[2]:Ga);if(!ca(Ha,qa,0,Ha,Ea,0,Ha.length/3))return!1;qa=0;Da.length=0;for(const Qa of T){T=[];for(const Pa of Qa)da&&W?T.push([Ha[qa++],Ha[qa++],Ha[qa++],Pa[3]]):da?T.push([Ha[qa++],Ha[qa++],Ha[qa++]]):(W?T.push([Ha[qa++],Ha[qa++],Pa[2]]):T.push([Ha[qa++],Ha[qa++]]),qa++);Da.push(T)}return!0}function oa(T,da,W,qa){da=qa+da;if(da<qa/
2||W>da)return Number.MAX_VALUE;T=Math.abs(Xa*T)+Math.asin(W/da);return T>=Math.PI/2?Number.MAX_VALUE:W/Math.cos(T)}function ea(T,da,W){const qa=Math.sin(T);T=Math.cos(T);const Da=Math.sin(da);da=Math.cos(da);W[0]=-qa;W[4]=-Da*T;W[8]=da*T;W[12]=0;W[1]=T;W[5]=-Da*qa;W[9]=da*qa;W[13]=0;W[2]=0;W[6]=da;W[10]=Da;W[14]=0;W[3]=0;W[7]=0;W[11]=0;W[15]=1;return W}function wa(T,da,W){ea(T,da,W);N.transpose(W,W);return W}function c(T,da){if(!T)return na.UNKNOWN;if(da.spatialReference===T)return da.spatialReferenceId;
da.spatialReference=T;"metersPerUnit"in da&&(da.metersPerUnit=V.getMetersPerUnitForSR(T,1));return T.wkt===L.SphericalECEFSpatialReferenceLike.wkt?da.spatialReferenceId=na.SPHERICAL_ECEF:h.isWGS84(T)?da.spatialReferenceId=na.WGS84:h.isWebMercator(T)?da.spatialReferenceId=na.WEB_MERCATOR:h.isPlateCarree(T)?da.spatialReferenceId=na.PLATE_CARREE:T.wkt===L.WGS84ECEFSpatialReferenceLike.wkt?da.spatialReferenceId=na.WGS84_ECEF:T.wkid===g.SupportedGCSWkids.CGCS2000?da.spatialReferenceId=na.CGCS2000:T.wkt===
L.SphericalPCPFMarsLike.wkt?da.spatialReferenceId=na.SPHERICAL_MARS_PCPF:T.wkt===L.SphericalPCPFMoonLike.wkt?da.spatialReferenceId=na.SPHERICAL_MOON_PCPF:h.isMars(T)?da.spatialReferenceId=na.GCSMARS2000:h.isMoon(T)?da.spatialReferenceId=na.GCSMOON2000:da.spatialReferenceId=na.UNKNOWN}function n(T,da,W,qa){T!==W&&(W[qa++]=T[da++],W[qa++]=T[da++],W[qa]=T[da])}function P(T,da,W,qa){W[qa++]=cb*(T[da++]/e.earth.radius);W[qa++]=cb*(Math.PI/2-2*Math.atan(Math.exp(-T[da++]/e.earth.radius)));W[qa]=T[da]}function S(T,
da,W,qa){P(T,da,W,qa);Ca(W,qa,W,qa)}function ma(T,da,W,qa){P(T,da,W,qa);ya(W,qa,W,qa)}function ka(T,da,W,qa,Da){var Ea=.4999999*Math.PI;Ea=p.clamp(Xa*T[da+1],-Ea,Ea);Ea=Math.sin(Ea);W[qa++]=Xa*T[da]*Da.radius;W[qa++]=Da.halfSemiMajorAxis*Math.log((1+Ea)/(1-Ea));W[qa]=T[da+2]}function ra(T,da,W,qa){ka(T,da,W,qa,e.earth)}function pa(T,da,W,qa){W[qa]=T[da]*hb;W[qa+1]=T[da+1]*hb;W[qa+2]=T[da+2]}function ua(T,da,W,qa){W[qa]=T[da]*eb;W[qa+1]=T[da+1]*eb;W[qa+2]=T[da+2]}function va(T,da,W,qa){P(T,da,W,qa);
pa(W,qa,W,qa)}function xa(T,da,W,qa,Da){Da+=T[da+2];const Ea=Xa*T[da+1];T=Xa*T[da];da=Math.cos(Ea);W[qa++]=Math.cos(T)*da*Da;W[qa++]=Math.sin(T)*da*Da;W[qa]=Math.sin(Ea)*Da}function za(T,da,W,qa){xa(T,da,W,qa,e.moon.radius)}function Aa(T,da,W,qa){xa(T,da,W,qa,e.mars.radius)}function Ca(T,da,W,qa){xa(T,da,W,qa,e.earth.radius)}function Y(T,da,W,qa,Da){var Ea=T[da];const Ga=T[da+1];da=T[da+2];T=Math.sqrt(Ea*Ea+Ga*Ga+da*da);da=p.asinClamped(da/(0===T?1:T));Ea=Math.atan2(Ga,Ea);W[qa++]=cb*Ea;W[qa++]=cb*
da;W[qa]=T-Da}function la(T,da,W,qa){Y(T,da,W,qa,e.moon.radius)}function aa(T,da,W,qa){Y(T,da,W,qa,e.mars.radius)}function sa(T,da,W,qa){Y(T,da,W,qa,e.earth.radius)}function ta(T,da,W,qa){sa(T,da,W,qa);ra(W,qa,W,qa)}function ha(T,da,W,qa){sa(T,da,W,qa);ya(W,qa,W,qa)}function ya(T,da,W,qa){var Da=e.earth;const Ea=Xa*T[da];var Ga=Xa*T[da+1];T=T[da+2];da=Math.sin(Ga);Ga=Math.cos(Ga);const Ha=Da.radius/Math.sqrt(1-Da.eccentricitySquared*da*da);W[qa++]=(Ha+T)*Ga*Math.cos(Ea);W[qa++]=(Ha+T)*Ga*Math.sin(Ea);
W[qa++]=(Ha*(1-Da.eccentricitySquared)+T)*da}function Ba(T,da,W,qa){var Da=f.earthEllipsoidConstants,Ea=T[da],Ga=T[da+1];T=T[da+2];let Ha;da=Math.abs(T);var Qa=Ea*Ea+Ga*Ga;var Pa=Math.sqrt(Qa);var Oa=Qa+T*T;var Ua=Math.sqrt(Oa);Ea=Math.atan2(Ga,Ea);var Za=T*T/Oa;Oa=Qa/Oa;Ga=Da.a2/Ua;Qa=Da.a3-Da.a4/Ua;.3<Oa?(Za=da/Ua*(1+Oa*(Da.a1+Ga+Za*Qa)/Ua),Ua=Math.asin(Za),Ga=Za*Za,Oa=Math.sqrt(1-Ga)):(Oa=Pa/Ua*(1-Za*(Da.a5-Ga-Oa*Qa)/Ua),Ua=Math.acos(Oa),Ga=1-Oa*Oa,Za=Math.sqrt(Ga));Ha=1-e.earth.eccentricitySquared*
Ga;Ga=e.earth.radius/Math.sqrt(Ha);Da=Da.a6*Ga;Ga=Pa-Ga*Oa;Qa=da-Da*Za;da=Oa*Ga+Za*Qa;Pa=Oa*Qa-Za*Ga;Da=Pa/(Da/Ha+da);Ua+=Da;0>T&&(Ua=-Ua);W[qa++]=cb*Ea;W[qa++]=cb*Ua;W[qa]=da+Pa*Da/2}function Fa(T,da,W,qa){Ba(T,da,W,qa);Ca(W,qa,W,qa)}function Ia(T,da,W,qa){Ba(T,da,W,qa);ra(W,qa,W,qa)}function Ka(T,da,W=Ta()){return F.isNone(T)||F.isNone(da)?null:Va(T,da,W).projector}function Va(T,da,W){if(F.isNone(T)||F.isNone(da)||W.source.spatialReference===T&&W.dest.spatialReference===da)return W;const qa=c(T,
W.source),Da=c(da,W.dest);qa===na.UNKNOWN&&Da===na.UNKNOWN?h.equals(T,da)?W.projector=n:W.projector=null:W.projector=Wa[qa][Da];return W}function Ta(){return{source:{spatialReference:null,spatialReferenceId:na.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:na.UNKNOWN,metersPerUnit:1},projector:n}}let Na=null,Ra=null,La=null,ab={};const db=new I.SimpleObservable;let Sa=function(T){function da(){return W.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}
M._inherits(da,T);var W=M._createSuper(da);return M._createClass(da)}(H);var na;(function(T){T[T.UNKNOWN=0]="UNKNOWN";T[T.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";T[T.WGS84=2]="WGS84";T[T.WEB_MERCATOR=3]="WEB_MERCATOR";T[T.WGS84_ECEF=4]="WGS84_ECEF";T[T.CGCS2000=5]="CGCS2000";T[T.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";T[T.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";T[T.GCSMARS2000=8]="GCSMARS2000";T[T.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";T[T.GCSMOON2000=10]="GCSMOON2000";T[T.LON_LAT=
11]="LON_LAT";T[T.PLATE_CARREE=12]="PLATE_CARREE"})(na||(na={}));const hb=e.earth.radius*Math.PI/180,eb=180/(e.earth.radius*Math.PI),Wa={[na.WGS84]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:n,[na.WGS84_COMPARABLE_LON_LAT]:n,[na.SPHERICAL_ECEF]:Ca,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:ra,[na.PLATE_CARREE]:pa,[na.WGS84]:n,[na.WGS84_ECEF]:ya},[na.CGCS2000]:{[na.CGCS2000]:n,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,
[na.LON_LAT]:n,[na.WGS84_COMPARABLE_LON_LAT]:n,[na.SPHERICAL_ECEF]:Ca,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:pa,[na.WGS84]:null,[na.WGS84_ECEF]:ya},[na.GCSMARS2000]:{[na.CGCS2000]:null,[na.GCSMARS2000]:n,[na.GCSMOON2000]:null,[na.LON_LAT]:n,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:Aa,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,
[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.GCSMOON2000]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:n,[na.LON_LAT]:n,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:za,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.WEB_MERCATOR]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:P,[na.WGS84_COMPARABLE_LON_LAT]:P,[na.SPHERICAL_ECEF]:S,
[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:n,[na.PLATE_CARREE]:va,[na.WGS84]:P,[na.WGS84_ECEF]:ma},[na.WGS84_ECEF]:{[na.CGCS2000]:Ba,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:Ba,[na.WGS84_COMPARABLE_LON_LAT]:Ba,[na.SPHERICAL_ECEF]:Fa,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:Ia,[na.PLATE_CARREE]:function(T,da,W,qa){Ba(T,da,W,qa);pa(W,qa,W,qa)},[na.WGS84]:Ba,[na.WGS84_ECEF]:n},
[na.SPHERICAL_ECEF]:{[na.CGCS2000]:sa,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:sa,[na.WGS84_COMPARABLE_LON_LAT]:sa,[na.SPHERICAL_ECEF]:n,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:ta,[na.PLATE_CARREE]:function(T,da,W,qa){sa(T,da,W,qa);pa(W,qa,W,qa)},[na.WGS84]:sa,[na.WGS84_ECEF]:ha},[na.SPHERICAL_MARS_PCPF]:{[na.CGCS2000]:null,[na.GCSMARS2000]:aa,[na.GCSMOON2000]:null,[na.LON_LAT]:aa,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,
[na.SPHERICAL_MARS_PCPF]:n,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.SPHERICAL_MOON_PCPF]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:la,[na.LON_LAT]:la,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:n,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.UNKNOWN]:{[na.CGCS2000]:null,
[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:null,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:n,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.LON_LAT]:{[na.CGCS2000]:n,[na.GCSMARS2000]:n,[na.GCSMOON2000]:n,[na.LON_LAT]:n,[na.WGS84_COMPARABLE_LON_LAT]:n,[na.SPHERICAL_ECEF]:Ca,[na.SPHERICAL_MARS_PCPF]:Aa,[na.SPHERICAL_MOON_PCPF]:za,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:ra,
[na.PLATE_CARREE]:pa,[na.WGS84]:n,[na.WGS84_ECEF]:ya},[na.WGS84_COMPARABLE_LON_LAT]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:n,[na.WGS84_COMPARABLE_LON_LAT]:n,[na.SPHERICAL_ECEF]:Ca,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:pa,[na.WGS84]:n,[na.WGS84_ECEF]:ya},[na.PLATE_CARREE]:{[na.CGCS2000]:ua,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:ua,[na.WGS84_COMPARABLE_LON_LAT]:ua,
[na.SPHERICAL_ECEF]:function(T,da,W,qa){ua(T,da,W,qa);Ca(W,qa,W,qa)},[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:function(T,da,W,qa){ua(T,da,W,qa);ra(W,qa,W,qa)},[na.PLATE_CARREE]:n,[na.WGS84]:ua,[na.WGS84_ECEF]:function(T,da,W,qa){ua(T,da,W,qa);ya(W,qa,W,qa)}}},bb={spatialReference:null,spatialReferenceId:na.UNKNOWN},ib={spatialReference:null,spatialReferenceId:na.UNKNOWN},gb=Ta(),jb=Ta(),Xa=p.deg2rad(1),cb=p.rad2deg(1),Ma=w.create(),Ya=w.create(),
$a=w.create(),Ja=w.create(),fb=w.create();k.canProjectToWGS84ComparableLonLat=function(T){if(F.isNone(T))return!1;T=c(T,bb);return!!Wa[T][na.WGS84_COMPARABLE_LON_LAT]};k.canProjectWithoutEngine=z;k.computeENUToSphericalPCPFLocalRotation=ea;k.computeSphericalPCPFToENULocalRotation=wa;k.computeTranslationToOriginAndRotation=function(T,da,W,qa){if(F.isNone(T)||F.isNone(qa))return!1;var Da=c(T,bb),Ea=c(qa,ib);if(Da===Ea&&Ea!==na.SPHERICAL_ECEF&&Ea!==na.SPHERICAL_MARS_PCPF&&Ea!==na.SPHERICAL_MOON_PCPF&&
(Da!==na.UNKNOWN||h.equals(T,qa)))return N.fromTranslation(W,da),!0;if(Ea===na.SPHERICAL_ECEF||Ea===na.SPHERICAL_MARS_PCPF||Ea===na.SPHERICAL_MOON_PCPF){Da=Wa[Da][na.LON_LAT];Ea=Wa[na.LON_LAT][Ea];if(F.isNone(Da)||F.isNone(Ea))return!1;Da(da,0,Ya,0);Ea(Ya,0,$a,0);ea(Xa*Ya[0],Xa*Ya[1],W);W[12]=$a[0];W[13]=$a[1];W[14]=$a[2];return!0}if((Ea===na.WEB_MERCATOR||Ea===na.PLATE_CARREE)&&(Da===na.WGS84||Da===na.CGCS2000&&Ea===na.PLATE_CARREE||Da===na.SPHERICAL_ECEF||Da===na.WEB_MERCATOR)){T=Wa[Da][na.LON_LAT];
Ea=Wa[na.LON_LAT][Ea];if(F.isNone(T)||F.isNone(Ea))return!1;T(da,0,Ya,0);Ea(Ya,0,$a,0);Da===na.SPHERICAL_ECEF?wa(Xa*Ya[0],Xa*Ya[1],W):N.identity(W);W[12]=$a[0];W[13]=$a[1];W[14]=$a[2];return!0}return!1};k.getProjectorName=function(T,da){switch(Ka(T,da,gb)){case n:return"copy3";case Ca:return"wgs84ToSphericalECEF";case ra:return"wgs84ToWebMercator";case pa:return"wgs84ToPlateCarree";case ya:return"wgs84ToWGS84ECEF";case P:return"webMercatorToWGS84";case S:return"webMercatorToSphericalECEF";case ma:return"webMercatorToWGS84ECEF";
case va:return"webMercatorToPlateCarree";case Ba:return"wgs84ECEFToWGS84";case Fa:return"wgs84ECEFToSphericalECEF";case Ia:return"wgs84ECEFToWebMercator";case sa:return"sphericalECEFToWGS84";case ta:return"sphericalECEFToWebMercator";case aa:return"sphericalMarsPCPFToMars2000";case la:return"sphericalMoonPCPFToMoon2000";case ha:return"sphericalECEFToWGS84ECEF";case Aa:return"mars2000ToSphericalPCPF";case za:return"moon2000ToSphericalPCPF";default:return null}};k.getTransformation=E;k.getTransformations=
function(T,da,W=null){if(F.isNone(Na)||F.isNone(Ra))throw new Sa;T=Na._getTransformationBySuitability(Ra,T,da,W,W?.spatialReference);if(null!==T){da=[];for(const qa of T)da.push(d.fromGE(qa));return da}return[]};k.initializeProjection=async function(T,da,W,qa){if(m())return Z.waitTick(qa);if(Array.isArray(T))for(const {source:Da,dest:Ea,geographicTransformation:Ga}of T){if(!z(Da,Ea,Ga))return v(qa)}else if(!z(T,da,W))return v(qa);return Z.waitTick(qa)};k.isLoaded=m;k.load=v;k.localLinearScaleFactors=
function(T,da,W,qa){if(F.isNone(da)||F.isNone(qa))return!1;const Da=c(da,bb);var Ea=c(qa,ib);if(Da===Ea&&Da!==na.UNKNOWN||h.equals(da,qa))return W[0]=1,W[1]=1,W[2]=1,!0;if(Da===na.SPHERICAL_ECEF){da=x.length(T);T=da/Math.sqrt(T[0]*T[0]+T[1]*T[1]);da/=e.earth.radius;if(Ea===na.WEB_MERCATOR)return W[0]=T*da,W[1]=T*da,W[2]=1,!0;if(Ea===na.WGS84||Ea===na.CGCS2000)return Ea=eb,W[0]=Ea*T*da,W[1]=Ea*da,W[2]=1,!0}else if(Da===na.PLATE_CARREE){if(Ea===na.WGS84||Ea===na.CGCS2000)return W[0]=eb,W[1]=eb,W[2]=
1,!0;if(Ea===na.WEB_MERCATOR)return Ea=T[1]/e.earth.radius,W[0]=1,W[1]=1/Math.cos(Ea),W[2]=1,!0}return!1};k.lonLatToSphericalPCPF=function(T,da,W,qa){const Da=Math.cos(W);T[0]=Math.cos(da)*Da*qa;T[1]=Math.sin(da)*Da*qa;T[2]=Math.sin(W)*qa};k.lonLatToWebMercatorComparable=ka;k.project=y;k.projectBoundingRect=function(T,da,W,qa){if(null==T)return!1;if(h.equals(da,qa))return a.copy(W,T),!0;Ma[0]=T[0];Ma[1]=T[1];Ma[2]=0;if(!ca(Ma,da,0,Ma,qa,0,1))return!1;W[0]=Ma[0];W[1]=Ma[1];Ma[0]=T[2];Ma[1]=T[3];Ma[2]=
0;if(!ca(Ma,da,0,Ma,qa,0,1))return!1;W[2]=Ma[0];W[3]=Ma[1];return!0};k.projectBoundingSphere=function(T,da,W,qa){if(F.isNone(da)||F.isNone(qa))return!1;da=Va(da,qa,jb);if(da.projector===n)return W[0]=T[0],W[1]=T[1],W[2]=T[2],W[3]=T[3],!0;if(F.isNone(da.projector))return!1;const {source:Da,dest:Ea}=da;if(Ea.spatialReferenceId===na.WEB_MERCATOR){da=Wa[Da.spatialReferenceId][na.WGS84];if(F.isNone(da))return!1;da(T,0,Ya,0);ra(Ya,0,W,0);W[3]=oa(Ya[1],T[2],T[3],e.earth.radius);return!0}if(Da.spatialReferenceId!==
na.WGS84&&Da.spatialReferenceId!==na.CGCS2000||Ea.spatialReferenceId!==na.PLATE_CARREE)da.projector(T,0,W,0),W[3]=T[3]*(Da.metersPerUnit??1)/(Ea.metersPerUnit??1);else{qa=Wa[na.SPHERICAL_ECEF][na.PLATE_CARREE];let Ga=T[3];F.isSome(Wa[Da.spatialReferenceId][na.SPHERICAL_ECEF])&&F.isSome(qa)&&(Ga=oa(T[1],T[2],T[3],e.earth.radius));da.projector(T,0,W,0);W[3]=Ga}return!0};k.projectBuffer=ca;k.projectDirection=function(T,da,W,qa,Da){x.copy(Ja,T);x.add(fb,T,da);X(Ja,W,Ja,Da);X(fb,W,fb,Da);x.subtract(qa,
fb,Ja);x.normalize(qa,qa)};k.projectExtent=function(T,da,W=da.spatialReference,qa=0){return F.isSome(T.spatialReference)&&F.isSome(W)&&F.isSome(G(T,T.spatialReference,da,W,qa))};k.projectMany=D;k.projectMultipoint=function(T,da,W=da.spatialReference,qa=0){return F.isSome(T.spatialReference)&&F.isSome(W)&&F.isSome(ia(T,T.spatialReference,da,W,qa))};k.projectOrLoad=function(T,da){T=J([T],da);return F.isSome(T.pending)?{pending:T.pending,geometry:null}:F.isSome(T.geometries)?{pending:null,geometry:T.geometries[0]}:
{pending:null,geometry:null}};k.projectOrLoadMany=J;k.projectPoint=function(T,da,W=da.spatialReference,qa=0){return F.isSome(W)&&F.isSome(T.spatialReference)&&F.isSome(U(T,T.spatialReference,da,W,qa))};k.projectPointToVector=function(T,da,W,qa=0){Ja[0]=T.x;Ja[1]=T.y;const Da=T.z;Ja[2]=void 0!==Da?Da:qa;return ca(Ja,T.spatialReference,0,da,W,0,1)};k.projectPointToWGS84ComparableLonLat=function(T,da){Ja[0]=T.x;Ja[1]=T.y;const W=T.z;Ja[2]=void 0!==W?W:0;return ja(Ja,T.spatialReference,da)};k.projectPolygon=
function(T,da,W=da.spatialReference,qa=0){return F.isSome(T.spatialReference)&&F.isSome(W)&&F.isSome(B(T,T.spatialReference,da,W,qa))};k.projectPolygonToWGS84ComparableLonLat=function({hasZ:T,spatialReference:da,rings:W},qa,Da=0){da=c(da,bb);da=Wa[da][na.WGS84_COMPARABLE_LON_LAT];if(F.isNone(da))return!1;T=T?Ea=>Ea:Ea=>x.set(Ja,Ea[0],Ea[1],Da);for(const Ea of W){W=[];for(const Ga of Ea){const Ha=[0,0,Da];da(T(Ga),0,Ha,0);W.push(Ha)}qa.push(W)}return!0};k.projectPolyline=function(T,da,W=da.spatialReference,
qa=0){return F.isSome(T.spatialReference)&&F.isSome(W)&&F.isSome(fa(T,T.spatialReference,da,W,qa))};k.projectPolylineToWGS84ComparableLonLat=function({hasZ:T,spatialReference:da,paths:W},qa,Da=0){da=c(da,bb);da=Wa[da][na.WGS84_COMPARABLE_LON_LAT];if(F.isNone(da))return!1;T=T?Ea=>Ea:Ea=>x.set(Ja,Ea[0],Ea[1],Da);for(const Ea of W){W=[];for(const Ga of Ea){const Ha=[0,0,Da];da(T(Ga),0,Ha,0);W.push(Ha)}qa.push(W)}return!0};k.projectVectorToDehydratedPoint=function(T,da,W){return ca(T,da,0,Ja,W.spatialReference,
0,1)?(W.x=Ja[0],W.y=Ja[1],W.z=Ja[2],W):null};k.projectVectorToPoint=function(T,da,W){if(F.isNone(da)||F.isNone(W))return null;const qa=new l({spatialReference:W});return ca(T,da,0,Ja,W,0,1)?(qa.x=Ja[0],qa.y=Ja[1],qa.z=Ja[2],qa):null};k.projectVectorToVector=X;k.projectVectorToWGS84ComparableLonLat=function(T,da,W){return ja(T,da,W)};k.projectWithoutEngine=C;k.projectXYZToVector=Q;k.sphericalPCPFtoLonLatElevation=Y;k.test={get loadPromise(){return La}};k.tryProjectWithZConversion=R;k.unload=function(){La=
Ra=Na=null;ab={}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(K,k,M){M=function(H){function p(){return F.apply(this,arguments)}k._inherits(p,H);var F=k._createSuper(p);p.prototype.notify=function(){var Z=this._observers;if(Z&&0<Z.length){Z=Z.slice();for(const V of Z)V.onInvalidated(),V.onCommitted()}};return k._createClass(p)}(M.ObservableBase);
K.SimpleObservable=M;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(K,k,M){function H(c,n){c[0]=n[0];c[1]=n[1];c[2]=n[2];c[3]=n[3];c[4]=n[4];c[5]=n[5];c[6]=n[6];c[7]=n[7];c[8]=n[8];c[9]=n[9];c[10]=n[10];c[11]=n[11];c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15];return c}function p(c,n,P,S,ma,ka,ra,pa,ua,va,xa,za,Aa,Ca,Y,la,aa){c[0]=n;c[1]=P;c[2]=S;c[3]=ma;c[4]=ka;c[5]=ra;c[6]=pa;c[7]=ua;c[8]=va;c[9]=
xa;c[10]=za;c[11]=Aa;c[12]=Ca;c[13]=Y;c[14]=la;c[15]=aa;return c}function F(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Z(c,n){if(c===n){const P=n[1],S=n[2],ma=n[3],ka=n[6],ra=n[7],pa=n[11];c[1]=n[4];c[2]=n[8];c[3]=n[12];c[4]=P;c[6]=n[9];c[7]=n[13];c[8]=S;c[9]=ka;c[11]=n[14];c[12]=ma;c[13]=ra;c[14]=pa}else c[0]=n[0],c[1]=n[4],c[2]=n[8],c[3]=n[12],c[4]=n[1],c[5]=n[5],c[6]=n[9],c[7]=n[13],c[8]=n[2],c[9]=n[6],
c[10]=n[10],c[11]=n[14],c[12]=n[3],c[13]=n[7],c[14]=n[11],c[15]=n[15];return c}function V(c,n){O(c,n)||F(c);return c}function O(c,n){const P=n[0],S=n[1],ma=n[2],ka=n[3],ra=n[4],pa=n[5],ua=n[6],va=n[7],xa=n[8],za=n[9],Aa=n[10],Ca=n[11],Y=n[12],la=n[13],aa=n[14];n=n[15];const sa=P*pa-S*ra,ta=P*ua-ma*ra,ha=P*va-ka*ra,ya=S*ua-ma*pa,Ba=S*va-ka*pa,Fa=ma*va-ka*ua,Ia=xa*la-za*Y,Ka=xa*aa-Aa*Y,Va=xa*n-Ca*Y,Ta=za*aa-Aa*la,Na=za*n-Ca*la,Ra=Aa*n-Ca*aa;let La=sa*Ra-ta*Na+ha*Ta+ya*Va-Ba*Ka+Fa*Ia;if(!La)return null;
La=1/La;c[0]=(pa*Ra-ua*Na+va*Ta)*La;c[1]=(ma*Na-S*Ra-ka*Ta)*La;c[2]=(la*Fa-aa*Ba+n*ya)*La;c[3]=(Aa*Ba-za*Fa-Ca*ya)*La;c[4]=(ua*Va-ra*Ra-va*Ka)*La;c[5]=(P*Ra-ma*Va+ka*Ka)*La;c[6]=(aa*ha-Y*Fa-n*ta)*La;c[7]=(xa*Fa-Aa*ha+Ca*ta)*La;c[8]=(ra*Na-pa*Va+va*Ia)*La;c[9]=(S*Va-P*Na-ka*Ia)*La;c[10]=(Y*Ba-la*ha+n*sa)*La;c[11]=(za*ha-xa*Ba-Ca*sa)*La;c[12]=(pa*Ka-ra*Ta-ua*Ia)*La;c[13]=(P*Ta-S*Ka+ma*Ia)*La;c[14]=(la*ta-Y*ya-aa*sa)*La;c[15]=(xa*ya-za*ta+Aa*sa)*La;return c}function I(c,n){const P=n[0],S=n[1],ma=n[2],
ka=n[3],ra=n[4],pa=n[5],ua=n[6],va=n[7],xa=n[8],za=n[9],Aa=n[10],Ca=n[11],Y=n[12],la=n[13],aa=n[14];n=n[15];c[0]=pa*(Aa*n-Ca*aa)-za*(ua*n-va*aa)+la*(ua*Ca-va*Aa);c[1]=-(S*(Aa*n-Ca*aa)-za*(ma*n-ka*aa)+la*(ma*Ca-ka*Aa));c[2]=S*(ua*n-va*aa)-pa*(ma*n-ka*aa)+la*(ma*va-ka*ua);c[3]=-(S*(ua*Ca-va*Aa)-pa*(ma*Ca-ka*Aa)+za*(ma*va-ka*ua));c[4]=-(ra*(Aa*n-Ca*aa)-xa*(ua*n-va*aa)+Y*(ua*Ca-va*Aa));c[5]=P*(Aa*n-Ca*aa)-xa*(ma*n-ka*aa)+Y*(ma*Ca-ka*Aa);c[6]=-(P*(ua*n-va*aa)-ra*(ma*n-ka*aa)+Y*(ma*va-ka*ua));c[7]=P*(ua*
Ca-va*Aa)-ra*(ma*Ca-ka*Aa)+xa*(ma*va-ka*ua);c[8]=ra*(za*n-Ca*la)-xa*(pa*n-va*la)+Y*(pa*Ca-va*za);c[9]=-(P*(za*n-Ca*la)-xa*(S*n-ka*la)+Y*(S*Ca-ka*za));c[10]=P*(pa*n-va*la)-ra*(S*n-ka*la)+Y*(S*va-ka*pa);c[11]=-(P*(pa*Ca-va*za)-ra*(S*Ca-ka*za)+xa*(S*va-ka*pa));c[12]=-(ra*(za*aa-Aa*la)-xa*(pa*aa-ua*la)+Y*(pa*Aa-ua*za));c[13]=P*(za*aa-Aa*la)-xa*(S*aa-ma*la)+Y*(S*Aa-ma*za);c[14]=-(P*(pa*aa-ua*la)-ra*(S*aa-ma*la)+Y*(S*ua-ma*pa));c[15]=P*(pa*Aa-ua*za)-ra*(S*Aa-ma*za)+xa*(S*ua-ma*pa);return c}function N(c){const n=
c[0],P=c[1],S=c[2],ma=c[3],ka=c[4],ra=c[5],pa=c[6],ua=c[7],va=c[8],xa=c[9],za=c[10],Aa=c[11],Ca=c[12],Y=c[13],la=c[14];c=c[15];return(n*ra-P*ka)*(za*c-Aa*la)-(n*pa-S*ka)*(xa*c-Aa*Y)+(n*ua-ma*ka)*(xa*la-za*Y)+(P*pa-S*ra)*(va*c-Aa*Ca)-(P*ua-ma*ra)*(va*la-za*Ca)+(S*ua-ma*pa)*(va*Y-xa*Ca)}function x(c,n,P){const S=n[0],ma=n[1],ka=n[2],ra=n[3],pa=n[4],ua=n[5],va=n[6],xa=n[7],za=n[8],Aa=n[9],Ca=n[10],Y=n[11],la=n[12],aa=n[13],sa=n[14];n=n[15];let ta=P[0],ha=P[1],ya=P[2],Ba=P[3];c[0]=ta*S+ha*pa+ya*za+Ba*
la;c[1]=ta*ma+ha*ua+ya*Aa+Ba*aa;c[2]=ta*ka+ha*va+ya*Ca+Ba*sa;c[3]=ta*ra+ha*xa+ya*Y+Ba*n;ta=P[4];ha=P[5];ya=P[6];Ba=P[7];c[4]=ta*S+ha*pa+ya*za+Ba*la;c[5]=ta*ma+ha*ua+ya*Aa+Ba*aa;c[6]=ta*ka+ha*va+ya*Ca+Ba*sa;c[7]=ta*ra+ha*xa+ya*Y+Ba*n;ta=P[8];ha=P[9];ya=P[10];Ba=P[11];c[8]=ta*S+ha*pa+ya*za+Ba*la;c[9]=ta*ma+ha*ua+ya*Aa+Ba*aa;c[10]=ta*ka+ha*va+ya*Ca+Ba*sa;c[11]=ta*ra+ha*xa+ya*Y+Ba*n;ta=P[12];ha=P[13];ya=P[14];Ba=P[15];c[12]=ta*S+ha*pa+ya*za+Ba*la;c[13]=ta*ma+ha*ua+ya*Aa+Ba*aa;c[14]=ta*ka+ha*va+ya*Ca+
Ba*sa;c[15]=ta*ra+ha*xa+ya*Y+Ba*n;return c}function w(c,n,P){const S=P[0],ma=P[1];P=P[2];if(n===c)c[12]=n[0]*S+n[4]*ma+n[8]*P+n[12],c[13]=n[1]*S+n[5]*ma+n[9]*P+n[13],c[14]=n[2]*S+n[6]*ma+n[10]*P+n[14],c[15]=n[3]*S+n[7]*ma+n[11]*P+n[15];else{const ka=n[0],ra=n[1],pa=n[2],ua=n[3],va=n[4],xa=n[5],za=n[6],Aa=n[7],Ca=n[8],Y=n[9],la=n[10],aa=n[11];c[0]=ka;c[1]=ra;c[2]=pa;c[3]=ua;c[4]=va;c[5]=xa;c[6]=za;c[7]=Aa;c[8]=Ca;c[9]=Y;c[10]=la;c[11]=aa;c[12]=ka*S+va*ma+Ca*P+n[12];c[13]=ra*S+xa*ma+Y*P+n[13];c[14]=
pa*S+za*ma+la*P+n[14];c[15]=ua*S+Aa*ma+aa*P+n[15]}return c}function L(c,n,P){const S=P[0],ma=P[1];P=P[2];c[0]=n[0]*S;c[1]=n[1]*S;c[2]=n[2]*S;c[3]=n[3]*S;c[4]=n[4]*ma;c[5]=n[5]*ma;c[6]=n[6]*ma;c[7]=n[7]*ma;c[8]=n[8]*P;c[9]=n[9]*P;c[10]=n[10]*P;c[11]=n[11]*P;c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15];return c}function r(c,n,P,S){let ma=S[0],ka=S[1];S=S[2];let ra=Math.sqrt(ma*ma+ka*ka+S*S);var pa=void 0,ua=void 0;let va=void 0,xa=void 0,za=void 0,Aa=void 0,Ca=void 0,Y=void 0,la=void 0,aa=void 0,
sa=void 0,ta=void 0,ha=void 0,ya=void 0,Ba=void 0,Fa=void 0,Ia=void 0,Ka=void 0,Va=void 0,Ta=void 0,Na=void 0,Ra=void 0;ua=pa=void 0;if(ra<M.getEpsilon())return null;ra=1/ra;ma*=ra;ka*=ra;S*=ra;pa=Math.sin(P);ua=Math.cos(P);va=1-ua;xa=n[0];za=n[1];Aa=n[2];Ca=n[3];Y=n[4];la=n[5];aa=n[6];sa=n[7];ta=n[8];ha=n[9];ya=n[10];Ba=n[11];Fa=ma*ma*va+ua;Ia=ka*ma*va+S*pa;Ka=S*ma*va-ka*pa;Va=ma*ka*va-S*pa;Ta=ka*ka*va+ua;Na=S*ka*va+ma*pa;Ra=ma*S*va+ka*pa;pa=ka*S*va-ma*pa;ua=S*S*va+ua;c[0]=xa*Fa+Y*Ia+ta*Ka;c[1]=
za*Fa+la*Ia+ha*Ka;c[2]=Aa*Fa+aa*Ia+ya*Ka;c[3]=Ca*Fa+sa*Ia+Ba*Ka;c[4]=xa*Va+Y*Ta+ta*Na;c[5]=za*Va+la*Ta+ha*Na;c[6]=Aa*Va+aa*Ta+ya*Na;c[7]=Ca*Va+sa*Ta+Ba*Na;c[8]=xa*Ra+Y*pa+ta*ua;c[9]=za*Ra+la*pa+ha*ua;c[10]=Aa*Ra+aa*pa+ya*ua;c[11]=Ca*Ra+sa*pa+Ba*ua;n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);return c}function q(c,n,P){const S=Math.sin(P);P=Math.cos(P);const ma=n[4],ka=n[5],ra=n[6],pa=n[7],ua=n[8],va=n[9],xa=n[10],za=n[11];n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=
n[13],c[14]=n[14],c[15]=n[15]);c[4]=ma*P+ua*S;c[5]=ka*P+va*S;c[6]=ra*P+xa*S;c[7]=pa*P+za*S;c[8]=ua*P-ma*S;c[9]=va*P-ka*S;c[10]=xa*P-ra*S;c[11]=za*P-pa*S;return c}function b(c,n,P){const S=Math.sin(P);P=Math.cos(P);const ma=n[0],ka=n[1],ra=n[2],pa=n[3],ua=n[8],va=n[9],xa=n[10],za=n[11];n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=ma*P-ua*S;c[1]=ka*P-va*S;c[2]=ra*P-xa*S;c[3]=pa*P-za*S;c[8]=ma*S+ua*P;c[9]=ka*S+va*P;c[10]=ra*S+xa*P;c[11]=pa*S+za*
P;return c}function l(c,n,P){const S=Math.sin(P);P=Math.cos(P);const ma=n[0],ka=n[1],ra=n[2],pa=n[3],ua=n[4],va=n[5],xa=n[6],za=n[7];n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=ma*P+ua*S;c[1]=ka*P+va*S;c[2]=ra*P+xa*S;c[3]=pa*P+za*S;c[4]=ua*P-ma*S;c[5]=va*P-ka*S;c[6]=xa*P-ra*S;c[7]=za*P-pa*S;return c}function A(c,n){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=n[0];c[13]=n[1];c[14]=n[2];c[15]=
1;return c}function u(c,n){c[0]=n[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=n[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function a(c,n,P){if(0===n)return F(c);let S=P[0],ma=P[1];P=P[2];let ka=Math.sqrt(S*S+ma*ma+P*P),ra=void 0,pa=void 0,ua=void 0;if(ka<M.getEpsilon())return null;ka=1/ka;S*=ka;ma*=ka;P*=ka;ra=Math.sin(n);pa=Math.cos(n);ua=1-pa;c[0]=S*S*ua+pa;c[1]=ma*S*ua+P*ra;c[2]=P*S*ua-ma*ra;c[3]=0;c[4]=S*ma*ua-P*ra;c[5]=ma*ma*ua+pa;c[6]=P*ma*ua+S*ra;c[7]=
0;c[8]=S*P*ua+ma*ra;c[9]=ma*P*ua-S*ra;c[10]=P*P*ua+pa;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function e(c,n){const P=Math.sin(n);n=Math.cos(n);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n;c[6]=P;c[7]=0;c[8]=0;c[9]=-P;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function f(c,n){const P=Math.sin(n);n=Math.cos(n);c[0]=n;c[1]=0;c[2]=-P;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=P;c[9]=0;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function d(c,n){const P=Math.sin(n);n=Math.cos(n);
c[0]=n;c[1]=P;c[2]=0;c[3]=0;c[4]=-P;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function h(c,n,P){var S=n[0],ma=n[1],ka=n[2],ra=n[3],pa=S+S,ua=ma+ma;const va=ka+ka;n=S*pa;const xa=S*ua;S*=va;const za=ma*ua;ma*=va;ka*=va;pa*=ra;ua*=ra;ra*=va;c[0]=1-(za+ka);c[1]=xa+ra;c[2]=S-ua;c[3]=0;c[4]=xa-ra;c[5]=1-(n+ka);c[6]=ma+pa;c[7]=0;c[8]=S+ua;c[9]=ma-pa;c[10]=1-(n+za);c[11]=0;c[12]=P[0];c[13]=P[1];c[14]=P[2];c[15]=1;return c}function g(c,n){const P=wa,S=-n[0],
ma=-n[1],ka=-n[2],ra=n[3],pa=n[4],ua=n[5],va=n[6],xa=n[7],za=S*S+ma*ma+ka*ka+ra*ra;0<za?(P[0]=2*(pa*ra+xa*S+ua*ka-va*ma)/za,P[1]=2*(ua*ra+xa*ma+va*S-pa*ka)/za,P[2]=2*(va*ra+xa*ka+pa*ma-ua*S)/za):(P[0]=2*(pa*ra+xa*S+ua*ka-va*ma),P[1]=2*(ua*ra+xa*ma+va*S-pa*ka),P[2]=2*(va*ra+xa*ka+pa*ma-ua*S));h(c,n,P);return c}function t(c,n){c[0]=n[12];c[1]=n[13];c[2]=n[14];return c}function m(c,n){const P=n[0],S=n[1],ma=n[2],ka=n[4],ra=n[5],pa=n[6],ua=n[8],va=n[9];n=n[10];c[0]=Math.sqrt(P*P+S*S+ma*ma);c[1]=Math.sqrt(ka*
ka+ra*ra+pa*pa);c[2]=Math.sqrt(ua*ua+va*va+n*n);return c}function v(c,n){const P=n[0]+n[5]+n[10];let S=0;0<P?(S=2*Math.sqrt(P+1),c[3]=.25*S,c[0]=(n[6]-n[9])/S,c[1]=(n[8]-n[2])/S,c[2]=(n[1]-n[4])/S):n[0]>n[5]&&n[0]>n[10]?(S=2*Math.sqrt(1+n[0]-n[5]-n[10]),c[3]=(n[6]-n[9])/S,c[0]=.25*S,c[1]=(n[1]+n[4])/S,c[2]=(n[8]+n[2])/S):n[5]>n[10]?(S=2*Math.sqrt(1+n[5]-n[0]-n[10]),c[3]=(n[8]-n[2])/S,c[0]=(n[1]+n[4])/S,c[1]=.25*S,c[2]=(n[6]+n[9])/S):(S=2*Math.sqrt(1+n[10]-n[0]-n[5]),c[3]=(n[1]-n[4])/S,c[0]=(n[8]+
n[2])/S,c[1]=(n[6]+n[9])/S,c[2]=.25*S);return c}function y(c,n,P,S){var ma=n[0],ka=n[1],ra=n[2],pa=n[3],ua=ma+ma,va=ka+ka,xa=ra+ra;n=ma*ua;const za=ma*va;ma*=xa;const Aa=ka*va;ka*=xa;ra*=xa;ua*=pa;va*=pa;pa*=xa;xa=S[0];const Ca=S[1];S=S[2];c[0]=(1-(Aa+ra))*xa;c[1]=(za+pa)*xa;c[2]=(ma-va)*xa;c[3]=0;c[4]=(za-pa)*Ca;c[5]=(1-(n+ra))*Ca;c[6]=(ka+ua)*Ca;c[7]=0;c[8]=(ma+va)*S;c[9]=(ka-ua)*S;c[10]=(1-(n+Aa))*S;c[11]=0;c[12]=P[0];c[13]=P[1];c[14]=P[2];c[15]=1;return c}function D(c,n,P,S,ma){var ka=n[0],ra=
n[1],pa=n[2],ua=n[3],va=ka+ka,xa=ra+ra,za=pa+pa;n=ka*va;var Aa=ka*xa,Ca=ka*za;ka=ra*xa;ra*=za;var Y=pa*za;pa=ua*va;xa*=ua;const la=ua*za;var aa=S[0],sa=S[1];za=S[2];S=ma[0];ua=ma[1];ma=ma[2];va=(1-(ka+Y))*aa;const ta=(Aa+la)*aa;aa*=Ca-xa;Aa=(Aa-la)*sa;Y=(1-(n+Y))*sa;sa*=ra+pa;Ca=(Ca+xa)*za;ra=(ra-pa)*za;n=(1-(n+ka))*za;c[0]=va;c[1]=ta;c[2]=aa;c[3]=0;c[4]=Aa;c[5]=Y;c[6]=sa;c[7]=0;c[8]=Ca;c[9]=ra;c[10]=n;c[11]=0;c[12]=P[0]+S-(va*S+Aa*ua+Ca*ma);c[13]=P[1]+ua-(ta*S+Y*ua+ra*ma);c[14]=P[2]+ma-(aa*S+sa*
ua+n*ma);c[15]=1;return c}function J(c,n){var P=n[0],S=n[1],ma=n[2];n=n[3];var ka=P+P,ra=S+S;const pa=ma+ma;P*=ka;const ua=S*ka;S*=ra;const va=ma*ka,xa=ma*ra;ma*=pa;ka*=n;ra*=n;n*=pa;c[0]=1-S-ma;c[1]=ua+n;c[2]=va-ra;c[3]=0;c[4]=ua-n;c[5]=1-P-ma;c[6]=xa+ka;c[7]=0;c[8]=va+ra;c[9]=xa-ka;c[10]=1-P-S;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function E(c,n,P,S,ma,ka,ra){const pa=1/(P-n),ua=1/(ma-S),va=1/(ka-ra);c[0]=2*ka*pa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*ka*ua;c[6]=0;c[7]=0;c[8]=(P+n)*pa;c[9]=
(ma+S)*ua;c[10]=(ra+ka)*va;c[11]=-1;c[12]=0;c[13]=0;c[14]=ra*ka*2*va;c[15]=0;return c}function R(c,n,P,S,ma){n=1/Math.tan(n/2);let ka=void 0;c[0]=n/P;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=ma&&Infinity!==ma?(ka=1/(S-ma),c[10]=(ma+S)*ka,c[14]=2*ma*S*ka):(c[10]=-1,c[14]=-2*S);return c}function z(c,n,P,S){const ma=Math.tan(n.upDegrees*Math.PI/180),ka=Math.tan(n.downDegrees*Math.PI/180),ra=Math.tan(n.leftDegrees*Math.PI/180);n=Math.tan(n.rightDegrees*
Math.PI/180);const pa=2/(ra+n),ua=2/(ma+ka);c[0]=pa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=ua;c[6]=0;c[7]=0;c[8]=-((ra-n)*pa*.5);c[9]=(ma-ka)*ua*.5;c[10]=S/(P-S);c[11]=-1;c[12]=0;c[13]=0;c[14]=S*P/(P-S);c[15]=0;return c}function C(c,n,P,S,ma,ka,ra){const pa=1/(n-P),ua=1/(S-ma),va=1/(ka-ra);c[0]=-2*pa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*ua;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*va;c[11]=0;c[12]=(n+P)*pa;c[13]=(ma+S)*ua;c[14]=(ra+ka)*va;c[15]=1;return c}function U(c,n,P,S){var ma=void 0;let ka=void 0;var ra=
void 0,pa=void 0;let ua=void 0,va=void 0;var xa=void 0,za=void 0;let Aa=void 0,Ca=void 0;const Y=n[0],la=n[1];n=n[2];ra=S[0];pa=S[1];S=S[2];xa=P[0];za=P[1];P=P[2];ma=M.getEpsilon();if(Math.abs(Y-xa)<ma&&Math.abs(la-za)<ma&&Math.abs(n-P)<ma)return F(c);xa=Y-xa;za=la-za;Aa=n-P;Ca=1/Math.sqrt(xa*xa+za*za+Aa*Aa);xa*=Ca;za*=Ca;Aa*=Ca;ma=pa*Aa-S*za;ka=S*xa-ra*Aa;ra=ra*za-pa*xa;(Ca=Math.sqrt(ma*ma+ka*ka+ra*ra))?(Ca=1/Ca,ma*=Ca,ka*=Ca,ra*=Ca):ra=ka=ma=0;pa=za*ra-Aa*ka;ua=Aa*ma-xa*ra;va=xa*ka-za*ma;(Ca=Math.sqrt(pa*
pa+ua*ua+va*va))?(Ca=1/Ca,pa*=Ca,ua*=Ca,va*=Ca):va=ua=pa=0;c[0]=ma;c[1]=pa;c[2]=xa;c[3]=0;c[4]=ka;c[5]=ua;c[6]=za;c[7]=0;c[8]=ra;c[9]=va;c[10]=Aa;c[11]=0;c[12]=-(ma*Y+ka*la+ra*n);c[13]=-(pa*Y+ua*la+va*n);c[14]=-(xa*Y+za*la+Aa*n);c[15]=1;return c}function ia(c,n,P,S){const ma=n[0],ka=n[1];n=n[2];var ra=S[0];const pa=S[1];var ua=S[2];S=ma-P[0];let va=ka-P[1];P=n-P[2];let xa=S*S+va*va+P*P;0<xa&&(xa=1/Math.sqrt(xa),S*=xa,va*=xa,P*=xa);let za=pa*P-ua*va;ua=ua*S-ra*P;ra=ra*va-pa*S;xa=za*za+ua*ua+ra*ra;
0<xa&&(xa=1/Math.sqrt(xa),za*=xa,ua*=xa,ra*=xa);c[0]=za;c[1]=ua;c[2]=ra;c[3]=0;c[4]=va*ra-P*ua;c[5]=P*za-S*ra;c[6]=S*ua-va*za;c[7]=0;c[8]=S;c[9]=va;c[10]=P;c[11]=0;c[12]=ma;c[13]=ka;c[14]=n;c[15]=1;return c}function fa(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function B(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**
2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function G(c,n,P){c[0]=n[0]+P[0];c[1]=n[1]+P[1];c[2]=n[2]+P[2];c[3]=n[3]+P[3];c[4]=n[4]+P[4];c[5]=n[5]+P[5];c[6]=n[6]+P[6];c[7]=n[7]+P[7];c[8]=n[8]+P[8];c[9]=n[9]+P[9];c[10]=n[10]+P[10];c[11]=n[11]+P[11];c[12]=n[12]+P[12];c[13]=n[13]+P[13];c[14]=n[14]+P[14];c[15]=n[15]+P[15];return c}function Q(c,n,P){c[0]=n[0]-P[0];c[1]=n[1]-P[1];c[2]=n[2]-P[2];c[3]=n[3]-P[3];c[4]=n[4]-P[4];c[5]=n[5]-P[5];c[6]=n[6]-P[6];c[7]=n[7]-P[7];c[8]=n[8]-P[8];
c[9]=n[9]-P[9];c[10]=n[10]-P[10];c[11]=n[11]-P[11];c[12]=n[12]-P[12];c[13]=n[13]-P[13];c[14]=n[14]-P[14];c[15]=n[15]-P[15];return c}function X(c,n,P){c[0]=n[0]*P;c[1]=n[1]*P;c[2]=n[2]*P;c[3]=n[3]*P;c[4]=n[4]*P;c[5]=n[5]*P;c[6]=n[6]*P;c[7]=n[7]*P;c[8]=n[8]*P;c[9]=n[9]*P;c[10]=n[10]*P;c[11]=n[11]*P;c[12]=n[12]*P;c[13]=n[13]*P;c[14]=n[14]*P;c[15]=n[15]*P;return c}function ja(c,n,P,S){c[0]=n[0]+P[0]*S;c[1]=n[1]+P[1]*S;c[2]=n[2]+P[2]*S;c[3]=n[3]+P[3]*S;c[4]=n[4]+P[4]*S;c[5]=n[5]+P[5]*S;c[6]=n[6]+P[6]*
S;c[7]=n[7]+P[7]*S;c[8]=n[8]+P[8]*S;c[9]=n[9]+P[9]*S;c[10]=n[10]+P[10]*S;c[11]=n[11]+P[11]*S;c[12]=n[12]+P[12]*S;c[13]=n[13]+P[13]*S;c[14]=n[14]+P[14]*S;c[15]=n[15]+P[15]*S;return c}function ca(c,n){return c[0]===n[0]&&c[1]===n[1]&&c[2]===n[2]&&c[3]===n[3]&&c[4]===n[4]&&c[5]===n[5]&&c[6]===n[6]&&c[7]===n[7]&&c[8]===n[8]&&c[9]===n[9]&&c[10]===n[10]&&c[11]===n[11]&&c[12]===n[12]&&c[13]===n[13]&&c[14]===n[14]&&c[15]===n[15]}function ba(c,n){if(c===n)return!0;const P=c[0],S=c[1],ma=c[2],ka=c[3],ra=c[4],
pa=c[5],ua=c[6],va=c[7],xa=c[8],za=c[9],Aa=c[10],Ca=c[11],Y=c[12],la=c[13],aa=c[14];c=c[15];const sa=n[0],ta=n[1],ha=n[2],ya=n[3],Ba=n[4],Fa=n[5],Ia=n[6],Ka=n[7],Va=n[8],Ta=n[9],Na=n[10],Ra=n[11],La=n[12],ab=n[13],db=n[14];n=n[15];const Sa=M.getEpsilon();return Math.abs(P-sa)<=Sa*Math.max(1,Math.abs(P),Math.abs(sa))&&Math.abs(S-ta)<=Sa*Math.max(1,Math.abs(S),Math.abs(ta))&&Math.abs(ma-ha)<=Sa*Math.max(1,Math.abs(ma),Math.abs(ha))&&Math.abs(ka-ya)<=Sa*Math.max(1,Math.abs(ka),Math.abs(ya))&&Math.abs(ra-
Ba)<=Sa*Math.max(1,Math.abs(ra),Math.abs(Ba))&&Math.abs(pa-Fa)<=Sa*Math.max(1,Math.abs(pa),Math.abs(Fa))&&Math.abs(ua-Ia)<=Sa*Math.max(1,Math.abs(ua),Math.abs(Ia))&&Math.abs(va-Ka)<=Sa*Math.max(1,Math.abs(va),Math.abs(Ka))&&Math.abs(xa-Va)<=Sa*Math.max(1,Math.abs(xa),Math.abs(Va))&&Math.abs(za-Ta)<=Sa*Math.max(1,Math.abs(za),Math.abs(Ta))&&Math.abs(Aa-Na)<=Sa*Math.max(1,Math.abs(Aa),Math.abs(Na))&&Math.abs(Ca-Ra)<=Sa*Math.max(1,Math.abs(Ca),Math.abs(Ra))&&Math.abs(Y-La)<=Sa*Math.max(1,Math.abs(Y),
Math.abs(La))&&Math.abs(la-ab)<=Sa*Math.max(1,Math.abs(la),Math.abs(ab))&&Math.abs(aa-db)<=Sa*Math.max(1,Math.abs(aa),Math.abs(db))&&Math.abs(c-n)<=Sa*Math.max(1,Math.abs(c),Math.abs(n))}function oa(c){const n=M.getEpsilon(),P=c[0],S=c[1],ma=c[2],ka=c[4],ra=c[5],pa=c[6],ua=c[8],va=c[9];c=c[10];return Math.abs(1-(P*P+ka*ka+ua*ua))<=n&&Math.abs(1-(S*S+ra*ra+va*va))<=n&&Math.abs(1-(ma*ma+pa*pa+c*c))<=n}function ea(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&
1===c[10]}const wa=k.create();k=Object.freeze(Object.defineProperty({__proto__:null,add:G,adjoint:I,copy:H,determinant:N,equals:ba,exactEquals:ca,frob:B,fromQuat:J,fromQuat2:g,fromRotation:a,fromRotationTranslation:h,fromRotationTranslationScale:y,fromRotationTranslationScaleOrigin:D,fromScaling:u,fromTranslation:A,fromXRotation:e,fromYRotation:f,fromZRotation:d,frustum:E,getRotation:v,getScaling:m,getTranslation:t,hasIdentityRotation:ea,identity:F,invert:O,invertOrIdentity:V,isOrthoNormal:oa,lookAt:U,
mul:x,multiply:x,multiplyScalar:X,multiplyScalarAndAdd:ja,ortho:C,perspective:R,perspectiveFromFieldOfView:z,rotate:r,rotateX:q,rotateY:b,rotateZ:l,scale:L,set:p,str:fa,sub:Q,subtract:Q,targetTo:ia,translate:w,transpose:Z},Symbol.toStringTag,{value:"Module"}));K.add=G;K.adjoint=I;K.copy=H;K.determinant=N;K.equals=ba;K.exactEquals=ca;K.frob=B;K.fromQuat=J;K.fromQuat2=g;K.fromRotation=a;K.fromRotationTranslation=h;K.fromRotationTranslationScale=y;K.fromRotationTranslationScaleOrigin=D;K.fromScaling=
u;K.fromTranslation=A;K.fromXRotation=e;K.fromYRotation=f;K.fromZRotation=d;K.frustum=E;K.getRotation=v;K.getScaling=m;K.getTranslation=t;K.hasIdentityRotation=ea;K.identity=F;K.invert=O;K.invertOrIdentity=V;K.isOrthoNormal=oa;K.lookAt=U;K.mat4=k;K.mul=x;K.multiply=x;K.multiplyScalar=X;K.multiplyScalarAndAdd=ja;K.ortho=C;K.perspective=R;K.perspectiveFromFieldOfView=z;K.rotate=r;K.rotateX=q;K.rotateY=b;K.rotateZ=l;K.scale=L;K.set=p;K.str=fa;K.sub=Q;K.subtract=Q;K.targetTo=ia;K.translate=w;K.transpose=
Z})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(K,k){const M=Math.PI/180;var H=k.earth.radius;const p=k.earth.eccentricitySquared;H={a1:H*p,a2:H*p*H*p,a3:H*p*p/2,a4:H*p*H*p*2.5,a5:H*p+H*p*p/2,a6:1-p};k={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:k.earth.radius,f:k.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:k.moon.radius,f:k.moon.flattening},104904:{a:3393400,
f:.005207166853303471},104905:{a:k.mars.radius,f:k.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},
104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,
f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:k.mars.radius,
f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};K.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;K.earthEllipsoidConstants=H;K.spheroids=k;K.toRadians=M;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(K,k,M,H){K.getGeometryZScaler=function(p,F,Z){if(k.isNone(F)||k.isNone(Z)||Z.vcsWkid||H.equals(F,Z))return null;F=M.getMetersPerVerticalUnitForSR(F);
Z=M.getMetersPerVerticalUnitForSR(Z);const V=F/Z;if(1===V)return null;switch(p){case "point":case "esriGeometryPoint":return O=>{O&&null!=O.z&&(O.z*=V)};case "polyline":case "esriGeometryPolyline":return O=>{if(O)for(const I of O.paths)for(const N of I)2<N.length&&(N[2]*=V)};case "polygon":case "esriGeometryPolygon":return O=>{if(O)for(const I of O.rings)for(const N of I)2<N.length&&(N[2]*=V)};case "multipoint":case "esriGeometryMultipoint":return O=>{if(O)for(const I of O.points)2<I.length&&(I[2]*=
V)};case "extent":case "esriGeometryExtent":return O=>{O&&null!=O.zmin&&null!=O.zmax&&(O.zmin*=V,O.zmax*=V)};default:return null}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(K,k,M,H,p){function F(h,g){return b.get(h)/b.get(g)||1}function Z(h,g="geographic"){const [t,m]=h;h=Math.sqrt(t*t+m*m);let v=Math.atan2(m,
t)*l;v=(360+v)%360;"geographic"===g&&(v=(450-v)%360);return[h,v]}function V(h,g="geographic"){let t=h[1];"geographic"===g&&(t=(450-t)%360);t%=360;h=h[0];return[h*Math.cos(t/l),h*Math.sin(t/l)]}function O(h,g,t="geographic",m=1){if(!p.isValidPixelBlock(h))return h;const {pixels:v,width:y,height:D}=h;var J=y*D;const E=v[0],R=v[1],z=h.pixelType.startsWith("f")?h.pixelType:"f32",C=H.createEmptyBand(z,J);J=H.createEmptyBand(z,J);let U=0;for(let ia=0;ia<D;ia++)for(let fa=0;fa<y;fa++)"vector-uv"===g?([C[U],
J[U]]=Z([E[U],R[U]],t),C[U]*=m):([C[U],J[U]]=V([E[U],R[U]],t),C[U]*=m,J[U]*=m),U++;h=new H({pixelType:z,width:h.width,height:h.height,mask:h.mask,validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:[C,J]});h.updateStatistics();return h}function I(h=0,g=0,t=Math.PI,m=!0){m&&(t=(2*Math.PI-t)%(2*Math.PI));m=m?-1:1;const v=-7*m,y=-2*m,D=-16*m,[J,E]=x(0,g+13*m,t,21.75),[R,z]=x(h-5.5,g+v,t,21.75),[C,U]=x(h+5.5,g+v,t,21.75),[ia,fa]=x(h-1.5,g+y,t,21.75),[B,G]=x(h+1.5,g+y,t,21.75),[Q,X]=x(h-
1.5,g+D,t,21.75),[ja,ca]=x(h+1.5,g+D,t,21.75);return[J,E,R,z,ia,fa,B,G,C,U,Q,X,ja,ca]}function N(h=0,g=Math.PI,t=!0){t&&(g=(2*Math.PI-g)%(2*Math.PI));var m=t?-1:1,v=5*m;const y=20*m,D=25*m;m*=2;const J=t?1:-1;t=5*J;let [E,R]=[0+t,0-y],[z,C]=[E+2*J,R],[U,ia]=[z-0*J,C+m],[fa,B]=[0-t,0-D],[G,Q]=[fa+0*J,B-m],X=Math.ceil(h/5),ja=Math.floor(X/10);X-=8*ja;h=[];const ca=[];for(let ma=0;ma<X/2;ma++,ja--){0>=ja&&1===X%2&&ma===(X-1)/2&&(fa=0,G=fa+0*J,B=(B+R)/2,Q=B-m);const [ka,ra]=x(fa,B,g,45);if(0<ja){const [pa,
ua]=x(z,B,g,45),[va,xa]=x(E,R,g,45);h.push(pa);h.push(ua);h.push(ka);h.push(ra);h.push(va);h.push(xa)}else{const [pa,ua]=x(z,C,g,45),[va,xa]=x(U,ia,g,45),[za,Aa]=x(G,Q,g,45);ca.push(ka);ca.push(ra);ca.push(za);ca.push(Aa);ca.push(va);ca.push(xa);ca.push(pa);ca.push(ua)}B+=v;R+=v;C+=v;ia+=v;Q+=v}const [ba,oa]=x(0+t,0+y,g,45);v=7*J;const [ea,wa]=x(0+v,0+y,g,45),[c,n]=x(0+t,0-D,g,45),[P,S]=x(0+v,0-D,g,45);return{pennants:h,barbs:ca,shaft:[ba,oa,ea,wa,c,n,P,S]}}function x(h,g,t,m=1){return[Math.sqrt(h*
h+g*g)/m,(2*Math.PI+(2*Math.PI+Math.atan2(g,h))%(2*Math.PI)-t)%(2*Math.PI)]}function w(h,g,t,m){t=F(m||"knots",t);for(m=1;m<g.length;m++)if(m===g.length-1){if(h<g[m]*t)break}else if(h<=g[m]*t)break;return Math.min(m-1,g.length-2)}function L(h,g,t,m,v){let y=0;switch(g){case "beaufort_kn":y=w(h,a,"knots",t);break;case "beaufort_km":y=w(h,a,"kilometer-per-hour",t);break;case "beaufort_ft":y=w(h,a,"feet-per-second",t);break;case "beaufort_m":y=w(h,a,"meter-per-second",t);break;case "classified_arrow":y=
w(h,v??[],m,t);break;case "ocean_current_m":y=w(h,e,"meter-per-second",t);break;case "ocean_current_kn":y=w(h,f,"knots",t)}return y}function r(h,g){const {style:t,inputUnit:m,outputUnit:v,breakValues:y}=g,D=A.fromJSON(m),J=A.fromJSON(v);let E=0,R=0;const {width:z,height:C,mask:U}=h,ia=h.pixels[0];h=h.pixels[1];var fa=M.isSome(U)?U.filter(Q=>0<Q).length:z*C;const B=new Float32Array(42*fa);fa=new Uint32Array(15*fa);g=g.invertDirection?I(0,0,0,!1):u;for(let Q=0;Q<C;Q++)for(let X=0;X<z;X++){var G=Q*z+
X;if(!U||U[Q*z+X]){const ja=(h[G]+360)%360/180*Math.PI,ca=L(ia[G],t,D,J,y);for(let ba=0;ba<g.length;ba+=2)B[E++]=(X+.5)/z,B[E++]=(Q+.5)/C,B[E++]=g[ba],B[E++]=g[ba+1]+ja,B[E++]=ca,B[E++]=ia[G];G=7*(E/42-1);fa[R++]=G;fa[R++]=G+1;fa[R++]=G+2;fa[R++]=G+0;fa[R++]=G+4;fa[R++]=G+3;fa[R++]=G+0;fa[R++]=G+2;fa[R++]=G+3;fa[R++]=G+2;fa[R++]=G+5;fa[R++]=G+3;fa[R++]=G+5;fa[R++]=G+6;fa[R++]=G+3}}return{vertexData:B,indexData:fa}}function q(h,g){let t=0,m=0;const {width:v,height:y,mask:D}=h;h=h.pixels[0];const J=
[],E=[];var R=A.fromJSON(g.inputUnit);R=F(R,"knots");g="wind_speed"===g.style?5:Number.MAX_VALUE;for(let C=0;C<y;C++)for(let U=0;U<v;U++){var z=h[C*v+U]*R;if((!D||D[C*v+U])&&z<g){for(let ia=0;4>ia;ia++)J[t++]=(U+.5)/v,J[t++]=(C+.5)/y,J[t++]=2>ia?-.5:.5,J[t++]=0===ia%2?-.5:.5,J[t++]=0,J[t++]=z;z=4*(t/24-1);E[m++]=z;E[m++]=z+1;E[m++]=z+2;E[m++]=z+1;E[m++]=z+2;E[m++]=z+3}}return{vertexData:new Float32Array(J),indexData:new Uint32Array(E)}}const b=new Map;b.set("meter-per-second",1);b.set("kilometer-per-hour",
.277778);b.set("knots",.514444);b.set("feet-per-second",.3048);b.set("mile-per-hour",.44704);const l=180/Math.PI,A=new k.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),u=I(0,0,0),a=[0,1,3,6,10,16,21,27,33,40,47,55,63],e=[0,.5,1,1.5,2],f=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],d=[];K.convertToLocalDirections=function(h,g,t,m="geographic"){if(!p.isValidPixelBlock(h)||M.isNone(t))return h;
h="vector-magdir"===g?h.clone():M.unwrap(O(h,g));const v=h.pixels[1];for(let y=0;y<v.length;y++)v[y]="geographic"===m?(v[y]+t[y]+270)%360:(v[y]+360-t[y])%360;return"vector-magdir"===g?h:O(h,"vector-magdir")};K.convertVectorFieldData=O;K.convertVectorFieldUnit=function(h,g,t=1){if(1===t||!p.isValidPixelBlock(h))return h;h=h.clone();const {pixels:m,width:v,height:y}=h,D=m[0],J=m[1];let E=0;for(let R=0;R<y;R++)for(let z=0;z<v;z++)"vector-uv"===g?(D[E]*=t,J[E]*=t):D[E]*=t,E++;h.updateStatistics();return h};
K.createVFMesh=function(h,g){if("simple_scalar"===g.style)g=q(h,g);else if("wind_speed"===g.style){if(0===d.length)for(var t=0;30>t;t++)d.push(N(5*t,0,!g.invertDirection));g=A.fromJSON(g.inputUnit);g=F(g,"knots");const {width:D,height:J,mask:E}=h;t=h.pixels[0];h=h.pixels[1];const R=[],z=[];let C=0,U=0;for(let ia=0;ia<J;ia++)for(let fa=0;fa<D;fa++){var m=ia*D+fa,v=t[m]*g;if((!E||E[ia*D+fa])&&5<=v){const B=(h[m]+360)%360/180*Math.PI,{pennants:G,barbs:Q,shaft:X}=d[Math.min(Math.floor(v/5),29)];if(0===
G.length+Q.length)continue;m=R.length/6;const ja=(fa+.5)/D,ca=(ia+.5)/J;for(var y=0;y<G.length;y+=2)R[C++]=ja,R[C++]=ca,R[C++]=G[y],R[C++]=G[y+1]+B,R[C++]=0,R[C++]=v;for(y=0;y<Q.length;y+=2)R[C++]=ja,R[C++]=ca,R[C++]=Q[y],R[C++]=Q[y+1]+B,R[C++]=0,R[C++]=v;for(y=0;y<X.length;y+=2)R[C++]=ja,R[C++]=ca,R[C++]=X[y],R[C++]=X[y+1]+B,R[C++]=0,R[C++]=v;for(v=0;v<G.length/6;v++)z[U++]=m,z[U++]=m+1,z[U++]=m+2,m+=3;for(v=0;v<Q.length/8;v++)z[U++]=m,z[U++]=m+1,z[U++]=m+2,z[U++]=m+1,z[U++]=m+2,z[U++]=m+3,m+=4;
z[U++]=m+0;z[U++]=m+1;z[U++]=m+2;z[U++]=m+1;z[U++]=m+3;z[U++]=m+2;m+=4}}g={vertexData:new Float32Array(R),indexData:new Uint32Array(z)}}else g=r(h,g);return g};K.createVFMeshScalar=q;K.getUnitConversionFactor=F;K.sampleVectorField=function(h,g,t,m=[0,0],v=.5){const {width:y,height:D,mask:J}=h,[E,R]=h.pixels,[z,C]=m;h=Math.round((y-z)/t);m=Math.round((D-C)/t);var U=h*m;const ia=new Float32Array(U),fa=new Float32Array(U);U=new Uint8Array(U);g="vector-uv"===g;for(let G=0;G<m;G++)for(let Q=0;Q<h;Q++){let X=
0;const ja=G*h+Q,ca=Math.max(0,G*t+C),ba=Math.max(0,Q*t+z),oa=Math.min(D,ca+t),ea=Math.min(y,ba+t);for(let wa=ca;wa<oa;wa++)for(let c=ba;c<ea;c++){var B=wa*y+c;if(!J||J[B]){X++;B=g?[E[B],R[B]]:[E[B],(360+R[B])%360];const [n,P]=g?B:V(B);ia[ja]+=n;fa[ja]+=P}}if(X>=(oa-ca)*(ea-ba)*(1-v)){U[ja]=1;const [wa,c]=Z([ia[ja]/X,fa[ja]/X]);ia[ja]=wa;fa[ja]=c}else U[ja]=0,ia[ja]=0,fa[ja]=0}t=new H({width:h,height:m,pixels:[ia,fa],mask:U});t.updateStatistics();return t};K.snapImageToSymbolTile=function(h,g,t,m,
v){if(M.isNone(v)||!v.spatialReference.equals(h.spatialReference))return{extent:h,width:Math.round(g/m),height:Math.round(t/m),resolution:h.width/g};const y=v.xmin;v=v.ymax;g=(h.xmax-h.xmin)/g*m;t=(h.ymax-h.ymin)/t*m;h.xmin=y+Math.floor((h.xmin-y)/g)*g;h.xmax=y+Math.ceil((h.xmax-y)/g)*g;h.ymin=v+Math.floor((h.ymin-v)/t)*t;h.ymax=v+Math.ceil((h.ymax-v)/t)*t;return{extent:h,width:Math.round(h.width/g),height:Math.round(h.height/t),resolution:(g+t)/2}};K.unitKebabDict=A;K.uvComponentToVector=Z;Object.defineProperty(K,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(K,k,M,H){const p={GCSShiftXform:k,IdentityXform:M,PolynomialXform:H},F=Object.keys(p);K.isTransformSupported=function(Z){return!Z||F.includes(Z?.type)};K.readTransform=function(Z){if(!Z?.type)return null;var V=p[Z?.type];return V?(V=new V,V.read(Z),V):null};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(K,k,M,H,p,F,Z,V,O){H=function(I){function N(){var w=x.apply(this,arguments);w.type=
"gcs-shift";w.tolerance=1E-8;return w}K._inherits(N,I);var x=K._createSuper(N);I=N.prototype;I.forwardTransform=function(w){w=w.clone();if("point"===w.type)return w.x>180+this.tolerance&&(w.x-=360),w;w.xmin>=180-this.tolerance?(w.xmax-=360,w.xmin-=360):w.xmax>180+this.tolerance&&(w.xmin=-180,w.xmax=180);return w};I.inverseTransform=function(w){w=w.clone();if("point"===w.type)return w.x<-this.tolerance&&(w.x+=360),w;w.xmin<-this.tolerance&&(w.xmin+=360,w.xmax+=360);return w};return K._createClass(N)}(O);
k.__decorate([Z.enumeration({GCSShiftXform:"gcs-shift"})],H.prototype,"type",void 0);k.__decorate([M.property()],H.prototype,"tolerance",void 0);return H=k.__decorate([V.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],H)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(K,k,M,H,p,F,Z,V){M=function(O){function I(){return N.apply(this,arguments)}K._inherits(I,O);var N=K._createSuper(I);O=I.prototype;O.forwardTransform=function(x){return x};O.inverseTransform=function(x){return x};K._createClass(I,[{key:"affectsPixelSize",get:function(){return!1}}]);return I}(M.JSONSupport);k.__decorate([H.property()],M.prototype,"affectsPixelSize",null);k.__decorate([H.property({json:{write:!0}})],M.prototype,"spatialReference",void 0);return M=k.__decorate([V.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
M)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(K,k,M,H,p,F,Z,V,O,I){M=function(N){function x(){var L=w.apply(this,arguments);L.type=
"identity";return L}K._inherits(x,N);var w=K._createSuper(x);return K._createClass(x)}(I);k.__decorate([V.enumeration({IdentityXform:"identity"})],M.prototype,"type",void 0);return M=k.__decorate([O.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],M)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w,L){function r(b,l,A){const {x:u,y:a}=l;if(2>A)return{x:b[0]+u*b[2]+a*b[4],y:b[1]+u*b[3]+a*b[5]};if(2===A){l=u*u;A=a*a;var e=u*a;return{x:b[0]+u*b[2]+a*b[4]+l*b[6]+e*b[8]+A*b[10],y:b[1]+u*b[3]+a*b[5]+l*b[7]+e*b[9]+A*b[11]}}l=u*u;A=a*a;e=u*a;const f=l*u,d=l*a,h=u*A,g=a*A;return{x:b[0]+u*b[2]+a*b[4]+l*b[6]+e*b[8]+A*b[10]+f*b[12]+d*b[14]+h*b[16]+g*b[18],y:b[1]+u*b[3]+a*b[5]+l*b[7]+e*b[9]+A*b[11]+f*b[13]+d*b[15]+h*b[17]+g*b[19]}}function q(b,l,A){const {xmin:u,ymin:a,
xmax:e,ymax:f,spatialReference:d}=l;l=[];if(2>A)l.push({x:u,y:f}),l.push({x:e,y:f}),l.push({x:u,y:a}),l.push({x:e,y:a});else{var h=10;for(var g=0;g<h;g++)l.push({x:u,y:a+(f-a)*g/(h-1)}),l.push({x:e,y:a+(f-a)*g/(h-1)});h=8;for(g=1;g<=h;g++)l.push({x:u+(e-u)*g/h,y:a}),l.push({x:u+(e-u)*g/h,y:f})}l=l.map(t=>r(b,t,A));h=l.map(t=>t.x);l=l.map(t=>t.y);return new L({xmin:Math.min.apply(null,h),xmax:Math.max.apply(null,h),ymin:Math.min.apply(null,l),ymax:Math.max.apply(null,l),spatialReference:d})}M=function(b){function l(){var u=
A.apply(this,arguments);u.polynomialOrder=1;u.type="polynomial";return u}K._inherits(l,b);var A=K._createSuper(l);b=l.prototype;b.readForwardCoefficients=function(u,a){const {coeffX:e,coeffY:f}=a;if(!e?.length||!f?.length||e.length!==f.length)return null;u=[];for(a=0;a<e.length;a++)u.push(e[a]),u.push(f[a]);return u};b.writeForwardCoefficients=function(u,a,e){e=[];const f=[];for(let d=0;d<u?.length;d++)0===d%2?e.push(u[d]):f.push(u[d]);a.coeffX=e;a.coeffY=f};b.readInverseCoefficients=function(u,a){const {inverseCoeffX:e,
inverseCoeffY:f}=a;if(!e?.length||!f?.length||e.length!==f.length)return null;u=[];for(a=0;a<e.length;a++)u.push(e[a]),u.push(f[a]);return u};b.writeInverseCoefficients=function(u,a,e){e=[];const f=[];for(let d=0;d<u?.length;d++)0===d%2?e.push(u[d]):f.push(u[d]);a.inverseCoeffX=e;a.inverseCoeffY=f};b.forwardTransform=function(u){if("point"===u.type){const a=r(this.forwardCoefficients,u,this.polynomialOrder);return new w({x:a.x,y:a.y,spatialReference:u.spatialReference})}return q(this.forwardCoefficients,
u,this.polynomialOrder)};b.inverseTransform=function(u){if("point"===u.type){const a=r(this.inverseCoefficients,u,this.polynomialOrder);return new w({x:a.x,y:a.y,spatialReference:u.spatialReference})}return q(this.inverseCoefficients,u,this.polynomialOrder)};K._createClass(l,[{key:"inverseCoefficients",get:function(){var u=this._get("inverseCoefficients"),a=this._get("forwardCoefficients");if(!u&&a&&2>this.polynomialOrder){const [e,f,d,h,g,t]=a;u=d*t-g*h;a=g*h-d*t;u=[(g*f-e*t)/u,(d*f-e*h)/a,t/u,h/
a,-g/u,-d/a]}return u},set:function(u){this._set("inverseCoefficients",u)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return l}(x);k.__decorate([H.property({json:{write:!0}})],M.prototype,"polynomialOrder",void 0);k.__decorate([H.property()],M.prototype,"forwardCoefficients",void 0);k.__decorate([O.reader("forwardCoefficients",["coeffX","coeffY"])],M.prototype,"readForwardCoefficients",null);k.__decorate([N.writer("forwardCoefficients")],M.prototype,"writeForwardCoefficients",
null);k.__decorate([H.property({json:{write:!0}})],M.prototype,"inverseCoefficients",null);k.__decorate([O.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],M.prototype,"readInverseCoefficients",null);k.__decorate([N.writer("inverseCoefficients")],M.prototype,"writeInverseCoefficients",null);k.__decorate([H.property()],M.prototype,"affectsPixelSize",null);k.__decorate([V.enumeration({PolynomialXform:"polynomial"})],M.prototype,"type",void 0);return M=k.__decorate([I.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],
M)})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(K,k,M,H,p,F,Z,V,O,I,N,x,w,L,r,q){function b(u,a){const {attributeTable:e,bandCount:f}=u;return F.isNone(e)||1<f||a&&null==e.fields.find(d=>d.name.toLowerCase()===a.toLowerCase())?!1:!0}function l(u){const {bandCount:a,colormap:e}=u;return F.isSome(e)&&0<e.length&&1===a}function A(u){return w.isValidPixelBlock(u)&&0!==u.validPixelCount}H=function(u){function a(f){return e.call(this,f)}K._inherits(a,u);var e=K._createSuper(a);u=a.prototype;u.bind=function(){const {rendererJSON:f}=this;if(!f)return{success:!1};
this.lookup={rendererJSON:{}};let d;switch(f.type){case "uniqueValue":d=this._updateUVRenderer(f);break;case "rasterColormap":d=this._updateColormapRenderer(f);break;case "rasterStretch":d=this._updateStretchRenderer(f);break;case "classBreaks":d=this._updateClassBreaksRenderer(f);break;case "rasterShadedRelief":d=this._updateShadedReliefRenderer(f);break;case "vectorField":d=this._updateVectorFieldRenderer();break;case "flowRenderer":d=this._updateFlowRenderer()}return d};u.symbolize=function(f){let d=
f&&f.pixelBlock;if(!A(d))return d;if(f.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(d,f.simpleStretchParams);try{3<d.pixels.length&&(d=w.extractBands(d,[0,1,2]));let h;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":h=this._symbolizeColormap(d);break;case "classBreaks":h=this._symbolizeClassBreaks(d);break;case "rasterStretch":h=this._symbolizeStretch(d,f.bandIds);break;case "rasterShadedRelief":const g=f.extent;h=this._symbolizeShadedRelief(d,
{isGCS:g.spatialReference.isGeographic,resolution:{x:(g.xmax-g.xmin)/d.width,y:(g.ymax-g.ymin)/d.height}})}return h}catch(h){return p.getLogger(this.declaredClass).error("symbolize",h.message),d}};u.simpleStretch=function(f,d){if(!A(f))return f;try{return 3<f.pixels.length&&(f=w.extractBands(f,[0,1,2])),L.stretch(f,{...d,isRenderer:!0})}catch(h){return p.getLogger(this.declaredClass).error("symbolize",h.message),f}};u.generateWebGLParameters=function(f){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:m,
offset:v}=this.lookup.colormapLut||{};return{colormap:m,colormapOffset:v,type:"lut"}}const {pixelBlock:d,isGCS:h,resolution:g,bandIds:t}=f;({rendererJSON:f}=this);return"rasterStretch"===f.type?this._generateStretchWebGLParams(d,f,t):"rasterShadedRelief"===f.type?this._generateShadedReliefWebGLParams(f,h,g??void 0):"vectorField"===f.type?this._generateVectorFieldWebGLParams(f):null};u._isLUTChanged=function(f){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const d=
this.rendererJSON.colorRamp;if(f)return JSON.stringify(d)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};u._symbolizeColormap=function(f){return this._isLUTChanged()&&!this.bind().success?f:w.colorize(f,this.lookup.colormapLut)};u._symbolizeClassBreaks=function(f){const {canUseIndexedLUT:d}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&
!this.bind().success?f:d?w.colorize(f,this.lookup.colormapLut):w.remapColor(f,this.lookup.remapLut??[])};u._symbolizeStretch=function(f,d){const {rasterInfo:h}=this,{pixelType:g,bandCount:t}=h,m=this.rendererJSON;var v=["u8","u16","s8","s16"].includes(g);let y;var {dra:D}=m;({gamma:J}=this.lookup);if("histogramEqualization"===m.stretchType){v=D?null:this.lookup?.histogramLut;d=L.getStretchCutoff(m,{rasterInfo:h,pixelBlock:f,bandIds:d,returnHistogramLut:!v});var J=L.stretch(f,{...d,gamma:J,isRenderer:!0});
J=w.lookupPixels(J,{lut:D?d.histogramLut:v,offset:0})}else if(v){if(D)D=L.getStretchCutoff(m,{rasterInfo:h,pixelBlock:f,bandIds:d}),y=L.createStretchLUT({pixelType:g,...D,gamma:J,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return f;y=this.lookup?this.lookup.stretchLut:null}if(!y)return f;1<t&&d?.length===F.unwrap(f)?.pixels.length&&y?.lut.length===t&&(y={lut:d.map(E=>y.lut[E]),offset:y.offset});J=w.lookupPixels(f,y)}else D=L.getStretchCutoff(m,{rasterInfo:h,pixelBlock:f,
bandIds:d}),J=L.stretch(f,{...D,gamma:J,isRenderer:!0});if(m.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return f;J=w.colorize(J,this.lookup?.colormapLut)}return J};u._symbolizeShadedRelief=function(f,d){var h=this.rendererJSON;d=r.hillshade(f,{...h,...d});if(!h.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return d;h=this.lookup?this.lookup.hsvMap:null;if(!h)return d;const g=F.unwrap(this.rasterInfo.statistics)?.[0]??{min:0,max:8E3};r.tintHillshade(d,f,h,g);return d};u._isVectorFieldData=
function(){const {bandCount:f,dataType:d}=this.rasterInfo;return 2===f&&("vector-magdir"===d||"vector-uv"===d)};u._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};u._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};
u._updateUVRenderer=function(f){const {bandCount:d,attributeTable:h,pixelType:g}=this.rasterInfo,t=f.field1;if(!t)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const m=f.defaultSymbol;var v=1===d&&["u8","s8"].includes(g);if(!b(this.rasterInfo,t)&&!v)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const y=[];if(F.isSome(h)){const D=h.fields.find(J=>"value"===J.name.toLowerCase());
if(!D)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};h.features.forEach(J=>{const E=f.uniqueValueInfos?.find(R=>String(R.value)===String(J.attributes[t]))?.symbol?.color;E?y.push([J.attributes[D.name]].concat(E)):m&&y.push([J.attributes[D.name]].concat(m.color))})}else{if("value"!==t.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};f.uniqueValueInfos?.forEach(D=>
{const J=D?.symbol?.color;J?y.push([parseInt(""+D.value,10)].concat(J)):m&&y.push([parseInt(""+D.value,10)].concat(m?.color))})}if(0===y.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};v=w.createColormapLUT({colormap:y});this.lookup={rendererJSON:f,colormapLut:v};this.canRenderInWebGL=!0;return{success:!0}};u._updateColormapRenderer=function(f){if(!l(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};
var d=f.colormapInfos.map(h=>[h.value].concat(h.color)).sort((h,g)=>h[0]-g[0]);if(!d||0===d.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};d=w.createColormapLUT({colormap:d});this.lookup={rendererJSON:f,colormapLut:d};this.canRenderInWebGL=!0;return{success:!0}};u._updateShadedReliefRenderer=function(f){const {bandCount:d,dataType:h,pixelType:g}=this.rasterInfo;if("elevation"!==h&&("generic"!==h||1!==d||"s16"!==g&&"f32"!==g&&"f64"!==g))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(f.colorRamp){var t=q.convertColorRampToColormap(f.colorRamp,{interpolateAlpha:!0});t=w.createColormapLUT({colormap:t});const m=[],v=t.indexedColormap;for(let y=0;y<v.length;y+=4){const D=M.toHSV({r:v[y],g:v[y+1],b:v[y+2]});m.push([D.h/60,D.s/100,255*D.v/100])}this.lookup={rendererJSON:f,colormapLut:t,hsvMap:m}}else this.lookup=null;this.canRenderInWebGL=!0;
return{success:!0}};u._analyzeClassBreaks=function(f){const {attributeTable:d,pixelType:h}=this.rasterInfo,g=F.isSome(d)?d.fields.find(v=>"value"===v.name.toLowerCase()):null,t=F.isSome(d)?d.fields.find(v=>v.name.toLowerCase()===f.field.toLowerCase()):null,m=null!=g&&null!==t;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(h)||m,tableValueField:g,tableBreakField:t}};u._updateClassBreaksRenderer=function(f){var {attributeTable:d}=this.rasterInfo;const {canUseIndexedLUT:h,tableValueField:g,
tableBreakField:t}=this._analyzeClassBreaks(f);var m=f.classBreakInfos;if(!m?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};m=m.sort((E,R)=>E.classMaxValue-R.classMaxValue);var v=m[m.length-1],y=f.minValue;if(!h){var D=[];for(var J=0;J<m.length;J++)D.push({value:m[J].classMinValue??y,mappedColor:m[J].symbol.color}),y=m[J].classMaxValue;D.push({value:v.classMaxValue,mappedColor:v.symbol.color});this.lookup={rendererJSON:f,remapLut:D};
this.canRenderInWebGL=!1;return{success:!0}}D=[];if(F.isSome(d)&&null!=g&&null!==t&&g!==t){v=g.name;const E=t.name,R=m[m.length-1],{classMaxValue:z}=R;y=f.minValue;for(J of d.features){d=J.attributes[v];const C=J.attributes[E],U=C===z?R:C<y?null:m.find(({classMaxValue:ia})=>ia>C);U&&D.push([d].concat(U.symbol.color))}}else{y=Math.floor(f.minValue);for(J=0;J<m.length;J++){for(d=m[J];y<d.classMaxValue;y++)D.push([y].concat(d.symbol.color));y=Math.ceil(d.classMaxValue)}v.classMaxValue===y&&D.push([v.classMaxValue].concat(v.symbol.color))}m=
w.createColormapLUT({colormap:D,fillUnspecified:!1});this.lookup={rendererJSON:f,colormapLut:m};this.canRenderInWebGL=!0;return{success:!0}};u._isHistogramRequired=function(f){return"percentClip"===f||"histogramEqualization"===f};u._isValidRasterStatistics=function(f){return F.isSome(f)&&0<f.length&&null!=f[0].min&&null!=f[0].max};u._updateStretchRenderer=function(f){let {stretchType:d,dra:h}=f;if(!("none"===d||f.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||h))return{success:!1,
error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var g=F.unwrap(f.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(f.stretchType)||g?.length||h||(d="minMax");const {computeGamma:t,useGamma:m,colorRamp:v}=f;var {gamma:y}=f;m&&t&&!y?.length&&(y=f.statistics?.length?f.statistics:F.unwrap(this.rasterInfo.statistics),y=L.computeGammaValues(this.rasterInfo.pixelType,y));const D=this.rasterInfo.pixelType,J=!h&&["u8","u16",
"s8","s16"].includes(D);"histogramEqualization"===d?(g=g.map(E=>L.createHistogramEqualizationLUT(E)),this.lookup={rendererJSON:f,histogramLut:g}):J&&(g=L.getStretchCutoff(f,{rasterInfo:this.rasterInfo}),g=L.createStretchLUT({pixelType:D,...g,gamma:m?y:null,rounding:"floor"}),this.lookup={rendererJSON:f,stretchLut:g});v&&(g=q.convertColorRampToColormap(v,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:f}),this.lookup.colormapLut=w.createColormapLUT({colormap:g}),this.lookup.rendererJSON=
f);this.lookup.gamma=m&&y?.length?y:null;this.canRenderInWebGL=!0;return{success:!0}};u._generateStretchWebGLParams=function(f,d,h){let g=null,t=null;var m=this.lookup&&this.lookup.colormapLut;d.colorRamp&&m&&(g=m.indexedColormap,t=m.offset);"histogramEqualization"===d.stretchType&&(d={...d,stretchType:"minMax"});({gamma:m}=this.lookup);const v=!!(d.useGamma&&m&&m.some(U=>1!==U)),{minCutOff:y,maxCutOff:D,outMin:J,outMax:E}=L.getStretchCutoff(d,{rasterInfo:this.rasterInfo,pixelBlock:f,bandIds:h});
var R=0;F.isSome(f)&&(R=f.getPlaneCount(),2===R&&(f=f.clone(),f.statistics=[f.statistics[0]],f.pixels=[f.pixels[0]]));({bandCount:f}=this.rasterInfo);h=Math.min(3,h?.length||R||f,f);f=new Float32Array(h);R=g||v?1:255;let z;for(z=0;z<y.length;z++)f[z]=D[z]===y[z]?0:(E-J)/(D[z]-y[z])/R;const C=new Float32Array(h);if(v&&m)for(z=0;z<h;z++)C[z]=1<m[z]?2<m[z]?6.5+(m[z]-2)**2.5:6.5+100*(2-m[z])**4:1;return{bandCount:h,outMin:J/R,outMax:E/R,minCutOff:y,maxCutOff:D,factor:f,useGamma:v,gamma:v?m:[1,1,1],gammaCorrection:v?
C:[1,1,1],colormap:g,colormapOffset:t,stretchType:d.stretchType,type:"stretch"}};u._generateShadedReliefWebGLParams=function(f,d=!1,h={x:0,y:0}){let g=null,t=null;const m=this.lookup&&this.lookup.colormapLut;f.colorRamp&&m&&(g=m.indexedColormap,t=m.offset);d=r.calculateHillshadeParams({...f,isGCS:d,resolution:h});h=F.unwrap(this.rasterInfo.statistics)?.[0];return{...d,minValue:h?.min??0,maxValue:h?.max??8E3,hillshadeType:"traditional"===f.hillshadeType?0:1,type:"hillshade",colormap:g,colormapOffset:t}};
u._generateVectorFieldWebGLParams=function(f){const {style:d,inputUnit:h,outputUnit:g,visualVariables:t,symbolTileSize:m,flowRepresentation:v}=f;let y;var D=this.rasterInfo.statistics?.[0].min??0,J=this.rasterInfo.statistics?.[0].max??50,E=t?.find(C=>"sizeInfo"===C.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:J,maxSize:.8*m,minDataValue:D,minSize:.2*m},R=E.minDataValue??D,z=E.maxDataValue??J;J=F.isSome(E.maxSize)&&F.isSome(E.minSize)?[E.minSize/m,E.maxSize/m]:[.2,.8];"wind_speed"===d&&(J[0]=
J[1]=(J[0]+J[1])/2);D=F.isSome(R)&&F.isSome(z)?[R,z]:null;if("classified_arrow"===d)if(F.isSome(R)&&F.isSome(z)&&F.isSome(E))for(y=[],R=(E.maxDataValue-E.minDataValue)/5,z=0;6>z;z++)y.push(E.minDataValue+R*z);else y=[0,1E-6,3.5,7,10.5,14];E="flow_to"===v===("ocean_current_kn"===d||"ocean_current_m"===d)?0:Math.PI;R=t?.find(C=>"rotationInfo"===C.type);return{breakValues:y,dataRange:D,inputUnit:h,outputUnit:g,symbolTileSize:m,symbolPercentRange:J,style:d||"single_arrow",rotation:E,rotationType:this.rasterInfo.storageInfo?.tileInfo&&
"vector-uv"===this.rasterInfo.dataType?"geographic":R?.rotationType||f.rotationType,type:"vectorField"}};return K._createClass(a)}(H.JSONSupport);k.__decorate([Z.property({json:{write:!0}})],H.prototype,"rendererJSON",void 0);k.__decorate([Z.property({type:x,json:{write:!0}})],H.prototype,"rasterInfo",void 0);k.__decorate([Z.property({json:{write:!0}})],H.prototype,"lookup",void 0);k.__decorate([Z.property()],H.prototype,"canRenderInWebGL",void 0);return H=k.__decorate([N.subclass("esri.renderers.support.RasterSymbolizer")],
H)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),function(K,k,M,H,p,F,Z,V,O,I){function N(a,e){const f=L(e.data,e.width,e.height,a.smoothing);return a.interpolate?(d,h)=>{const g=Math.floor(d),t=Math.floor(h);if(0>g||
g>=e.width||0>t||t>=e.height)return[0,0];d-=g;h-=t;const m=g<e.width-1?g+1:g,v=t<e.height-1?t+1:t;return[(f[2*(t*e.width+g)]*(1-h)+f[2*(v*e.width+g)]*h)*(1-d)+(f[2*(t*e.width+m)]*(1-h)+f[2*(v*e.width+m)]*h)*d,(f[2*(t*e.width+g)+1]*(1-h)+f[2*(v*e.width+g)+1]*h)*(1-d)+(f[2*(t*e.width+m)+1]*(1-h)+f[2*(v*e.width+m)+1]*h)*d]}:(d,h)=>{d=Math.round(d);h=Math.round(h);return 0>d||d>=e.width||0>h||h>=e.height?[0,0]:[f[2*(h*e.width+d)],f[2*(h*e.width+d)+1]]}}function x(a,e,f,d,h,g,t,m,v){const y=[];let D=0,
[J,E]=e(f,d);J*=a.velocityScale;E*=a.velocityScale;y.push({x:f,y:d,t:D,speed:Math.sqrt(J*J+E*E)});for(let C=0;C<a.verticesPerLine;C++){let [U,ia]=e(f,d);U*=a.velocityScale;ia*=a.velocityScale;const fa=Math.sqrt(U*U+ia*ia);if(fa<a.minSpeedThreshold)break;const B=U/fa,G=ia/fa;f+=B*a.segmentLength;d+=G*a.segmentLength;D+=a.segmentLength/fa;if(Math.acos(B*R+G*z)>a.maxTurnAngle)break;if(a.collisions){var R=Math.round(f*v);var z=Math.round(d*v);if(0>R||R>t-1||0>z||z>m-1)break;const Q=g[z*t+R];if(-1!==Q&&
Q!==h)break;g[z*t+R]=h}y.push({x:f,y:d,t:D,speed:fa});R=B;z=G}return y}function w(a,e,f,d){const h=[],g=new V,t=1/Math.max(a.lineCollisionWidth,1),m=Math.round(f*t),v=Math.round(d*t),y=new Int32Array(m*v);for(var D=0;D<y.length;D++)y[D]=-1;D=[];for(let J=0;J<d;J+=a.lineSpacing)for(let E=0;E<f;E+=a.lineSpacing)D.push({x:E,y:J,sort:g.getFloat()});D.sort((J,E)=>J.sort-E.sort);for(const {x:J,y:E}of D)g.getFloat()<a.density&&(f=x(a,e,J,E,h.length,y,m,v,t),2>f.length||h.push(f));return h}function L(a,e,
f,d){if(0===d)return a;const h=Math.round(3*d),g=Array(2*h+1);var t=0;for(var m=-h;m<=h;m++){var v=Math.exp(-m*m/(d*d));g[m+h]=v;t+=v}for(d=-h;d<=h;d++)g[d+h]/=t;t=new Float32Array(a.length);for(d=0;d<f;d++)for(m=0;m<e;m++){var y=v=0;for(var D=-h;D<=h;D++)if(!(0>m+D||m+D>=e)){var J=g[D+h];v+=J*a[2*(d*e+(m+D))];y+=J*a[2*(d*e+(m+D))+1]}t[2*(d*e+m)]=v;t[2*(d*e+m)+1]=y}a=new Float32Array(a.length);for(d=0;d<e;d++)for(m=0;m<f;m++){y=v=0;for(D=-h;D<=h;D++)0>m+D||m+D>=f||(J=g[D+h],v+=J*t[2*((m+D)*e+d)],
y+=J*t[2*((m+D)*e+d)+1]);a[2*(m*e+d)]=v;a[2*(m*e+d)+1]=y}return a}function r(a,e){const f=new V;var d=a.reduce((m,v)=>m+v.length,0);d=new Float32Array(4*d);const h=Array(a.length);let g=0,t=0;for(const m of a){a=g;for(const v of m)d[4*g]=v.x,d[4*g+1]=v.y,d[4*g+2]=v.t,d[4*g+3]=v.speed,g++;h[t++]={startVertex:a,numberOfVertices:m.length,totalTime:m[m.length-1].t,timeSeed:e?f.getFloat():0}}return{lineVertices:d,lineDescriptors:h}}function q(a,e){function f(R,z,C,U,ia,fa,B,G){const Q=9*v;let X=0;m[Q+
X++]=R;m[Q+X++]=z;m[Q+X++]=1;m[Q+X++]=C;m[Q+X++]=fa;m[Q+X++]=B;m[Q+X++]=U/2;m[Q+X++]=ia/2;m[Q+X++]=G;v++;m[Q+X++]=R;m[Q+X++]=z;m[Q+X++]=-1;m[Q+X++]=C;m[Q+X++]=fa;m[Q+X++]=B;m[Q+X++]=-U/2;m[Q+X++]=-ia/2;m[Q+X++]=G;v++}const {lineVertices:d,lineDescriptors:h}=a;var g=a=0;for(var t of h)a+=2*t.numberOfVertices,g+=6*(t.numberOfVertices-1);const m=new Float32Array(9*a);t=new Uint32Array(g);let v=0;a=0;for(const R of h){const {totalTime:z,timeSeed:C}=R;let U=g=null,ia=null;var y=null,D=null,J=null;for(let fa=
0;fa<R.numberOfVertices;fa++){y=d[4*(R.startVertex+fa)];const B=d[4*(R.startVertex+fa)+1],G=d[4*(R.startVertex+fa)+2],Q=d[4*(R.startVertex+fa)+3];let X=null,ja=null;var E=null;let ca=null;0<fa&&(X=y-g,ja=B-U,E=Math.sqrt(X*X+ja*ja),X/=E,ja/=E,1<fa?(D=X+D,J=ja+J,E=Math.sqrt(D*D+J*J),D/=E,J/=E,E=Math.min(1/(D*X+J*ja),e),D*=E,J*=E,E=-J,ca=D):(E=-ja,ca=X),null!==E&&null!==ca&&(f(g,U,ia,E,ca,z,C,Q),t[a++]=v-2,t[a++]=v,t[a++]=v-1,t[a++]=v,t[a++]=v+1,t[a++]=v-1));g=y;U=B;ia=G;D=X;J=ja;y=Q}f(g,U,ia,-J,D,z,
C,y)}return{vertexData:m,indexData:t}}function b(a){function e(oa,ea){var wa=G+X,c=Q+ja,n=Math.sqrt(wa*wa+c*c);wa/=n;c/=n;var P=G*wa+Q*c,S=X+ca,ma=ja+ba;n=Math.sqrt(S*S+ma*ma);S/=n;ma/=n;var ka=X*S+ja*ma;n=E;var ra=R,pa=z,ua=C;c=-(c/P);wa/=P;P=U;var va=ia,xa=fa,za=B;ma=-(ma/ka);S/=ka;ka=16*D;let Aa=0;for(const Ca of[1,2])for(const Y of[1,2,3,4])v[ka+Aa++]=n,v[ka+Aa++]=ra,v[ka+Aa++]=pa,v[ka+Aa++]=ua,v[ka+Aa++]=P,v[ka+Aa++]=va,v[ka+Aa++]=xa,v[ka+Aa++]=za,v[ka+Aa++]=Ca,v[ka+Aa++]=Y,v[ka+Aa++]=oa,v[ka+
Aa++]=ea,v[ka+Aa++]=c/2,v[ka+Aa++]=wa/2,v[ka+Aa++]=ma/2,v[ka+Aa++]=S/2,D++;y[J++]=D-8;y[J++]=D-7;y[J++]=D-6;y[J++]=D-7;y[J++]=D-5;y[J++]=D-6;y[J++]=D-4;y[J++]=D-3;y[J++]=D-2;y[J++]=D-3;y[J++]=D-1;y[J++]=D-2}function f(oa,ea,wa,c,n,P){G=X;Q=ja;X=ca;ja=ba;null==G&&null==Q&&(G=X,Q=ja);if(null!=U&&null!=ia){ca=oa-U;ba=ea-ia;const S=Math.sqrt(ca*ca+ba*ba);ca/=S;ba/=S}null!=G&&null!=Q&&e(n,P);E=U;R=ia;z=fa;C=B;U=oa;ia=ea;fa=wa;B=c}function d(oa,ea){G=X;Q=ja;X=ca;ja=ba;null==G&&null==Q&&(G=X,Q=ja);null!=
G&&null!=Q&&e(oa,ea)}const {lineVertices:h,lineDescriptors:g}=a;let t=a=0;for(var m of g){const oa=m.numberOfVertices-1;a+=8*oa;t+=12*oa}const v=new Float32Array(16*a),y=new Uint32Array(t);let D=0,J=0,E,R,z,C,U,ia,fa,B,G,Q,X,ja,ca,ba;for(const oa of g){ba=ca=ja=X=Q=G=B=fa=ia=U=C=z=R=E=null;const {totalTime:ea,timeSeed:wa}=oa;for(m=0;m<oa.numberOfVertices;m++)f(h[4*(oa.startVertex+m)],h[4*(oa.startVertex+m)+1],h[4*(oa.startVertex+m)+2],h[4*(oa.startVertex+m)+3],ea,wa);d(ea,wa)}return{vertexData:v,
indexData:y}}function l(a,e){const f=e.pixels,{width:d,height:h}=e,g=new Float32Array(d*h*2),t=e.mask||new Uint8Array(d*h*2);e.mask||t.fill(255);if("vector-uv"===a)for(a=0;a<d*h;a++)g[2*a]=f[0][a],g[2*a+1]=-f[1][a];else if("vector-magdir"===a)for(a=0;a<d*h;a++){e=f[0][a];const m=p.deg2rad(f[1][a]),v=Math.sin(m-Math.PI/2);g[2*a]=Math.cos(m-Math.PI/2)*e;g[2*a+1]=v*e}return{data:g,mask:t,width:d,height:h}}async function A(a,e,f,d,h,g){const t={requestProjectedLocalDirections:!0,signal:g};F.isSome(h)&&
(t.timeExtent=h);if("imagery"===a.type)return await a.load({signal:g}),h=a.rasterInfo.dataType,a=await a.fetchImage(e,f,d,t),!a||F.isNone(a.pixelData)||F.isNone(a.pixelData.pixelBlock)?{data:new Float32Array(f*d*2),mask:new Uint8Array(f*d),width:f,height:d}:l(h,a.pixelData.pixelBlock);await a.load({signal:g});h=a.rasterInfo.dataType;a=await a.fetchPixels(e,f,d,t);return!a||F.isNone(a.pixelBlock)?{data:new Float32Array(f*d*2),mask:new Uint8Array(f*d),width:f,height:d}:l(h,a.pixelBlock)}const u=H.getLogger("esri.views.2d.engine.flow.dataUtils");
K.createAnimatedLinesData=r;K.createFlowMesh=async function(a,e,f,d){const h=performance.now();var g=N(e,f);const t=performance.now();f=w(e,g,f.width,f.height);e=performance.now();g=r(f,!0);f=performance.now();a="Streamlines"===a?q(g,10):b(g);g=performance.now();M("esri-2d-profiler")&&(u.info("I.1","_createFlowFieldFromData (ms)",Math.round(t-h)),u.info("I.2","_getStreamlines (ms)",Math.round(e-t)),u.info("I.3","createAnimatedLinesData (ms)",Math.round(f-e)),u.info("I.4","create{Streamlines|Particles}Mesh (ms)",
Math.round(g-f)),u.info("I.5","createFlowMesh (ms)",Math.round(g-h)),u.info("I.6","Mesh size (bytes)",a.vertexData.buffer.byteLength+a.indexData.buffer.byteLength));await Promise.resolve();Z.throwIfAborted(d);return a};K.createParticlesMesh=b;K.createStreamlinesMesh=q;K.loadImagery=async function(a,e,f,d,h,g){const t=performance.now();var m=O.getInfo(e.spatialReference);if(!m)return f=await A(a,e,f,d,h,g),M("esri-2d-profiler")&&u.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-
t)),M("esri-2d-profiler")&&u.info("I.9","Number of parts",1),f;const [v,y]=m.valid,D=Math.ceil(e.width/(y-v)),J=e.width/D,E=Math.round(f/D);let R=e.xmin;const z=[];m=performance.now();for(let C=0;C<D;C++){const U=new I({xmin:R,xmax:R+J,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});z.push(A(a,U,E,d,h,g));R+=J}a=await Promise.all(z);M("esri-2d-profiler")&&u.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-m));M("esri-2d-profiler")&&u.info("I.9","Number of parts",
a.length);d={data:new Float32Array(f*d*2),mask:new Uint8Array(f*d),width:f,height:d};e=0;for(const C of a){for(a=0;a<C.height;a++)for(h=0;h<C.width;h++)e+h>=f||(d.data[2*(a*f+e+h)]=C.data[2*(a*C.width+h)],d.data[2*(a*f+e+h)+1]=C.data[2*(a*C.width+h)+1],d.mask[a*f+e+h]=C.mask[a*C.width+h]);e+=C.width}M("esri-2d-profiler")&&u.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-t));return d};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/maybe ../../geometry/support/GeographicTransformation ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/rasterFunctionHelper ./rasterFunctions/rasterProjectionHelper ./rasterFunctions/stretchUtils ./rasterFunctions/vectorFieldUtils ./rasterTransforms/utils ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent ../../geometry/Point".split(" "),function(K,
k,M,H,p,F,Z,V,O,I,N,x,w,L,r,q){return function(){function b(){}var l=b.prototype;l.convertVectorFieldData=function(A){const u=p.fromJSON(A.pixelBlock);A=N.convertVectorFieldData(u,A.type);return Promise.resolve(M.isSome(A)?A.toJSON():null)};l.decode=async function(A){return(A=await F.decode(A.data,A.options))&&A.toJSON()};l.symbolize=function(A){A.pixelBlock=p.fromJSON(A.pixelBlock);A.extent=A.extent?r.fromJSON(A.extent):null;A=this.symbolizer.symbolize(A);return Promise.resolve(M.isSome(A)?A.toJSON():
null)};l.updateSymbolizer=async function(A){this.symbolizer=w.fromJSON(A.symbolizerJSON);A.histograms&&"rasterStretch"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=A.histograms)};l.updateRasterFunction=async function(A){this.rasterFunction=V.create(A.rasterFunctionJSON)};l.process=async function(A){A=this.rasterFunction.process({extent:r.fromJSON(A.extent),primaryPixelBlocks:A.primaryPixelBlocks.map(u=>M.isSome(u)?p.fromJSON(u):null),primaryPixelSizes:A.primaryPixelSizes?.map(u=>
M.isSome(u)?q.fromJSON(u):null),primaryRasterIds:A.primaryRasterIds});return M.isSome(A)?A.toJSON():null};l.stretch=function(A){A=this.symbolizer.simpleStretch(p.fromJSON(A.srcPixelBlock),A.stretchParams);return Promise.resolve(M.isSome(A)&&A.toJSON())};l.estimateStatisticsHistograms=function(A){A=I.estimateStatisticsHistograms(p.fromJSON(A.srcPixelBlock));return Promise.resolve(A)};l.split=function(A){const u=Z.split(p.fromJSON(A.srcPixelBlock),A.tileSize,A.maximumPyramidLevel);u&&u.forEach((a,e)=>
{u.set(e,a?.toJSON())});return Promise.resolve(u)};l.mosaicAndTransform=async function(A){var u=A.srcPixelBlocks.map(f=>f?new p(f):null);let a=u=Z.mosaic(u,A.srcMosaicSize,{blockWidths:A.blockWidths,alignmentInfo:A.alignmentInfo,clipOffset:A.clipOffset,clipSize:A.clipSize});A.coefs&&(a=Z.approximateTransform(u,A.destDimension,A.coefs,A.sampleSpacing,A.interpolation));let e;A.projectDirections&&A.gcsGrid&&(e=Z.getLocalArithmeticNorthRotations(A.destDimension,A.gcsGrid),a=M.unwrap(N.convertToLocalDirections(a,
A.isUV?"vector-uv":"vector-magdir",e)));return{pixelBlock:a?.toJSON(),localNorthDirections:e}};l.createFlowMesh=async function(A,u){const a={data:new Float32Array(A.flowData.buffer),mask:new Uint8Array(A.flowData.maskBuffer),width:A.flowData.width,height:A.flowData.height},{vertexData:e,indexData:f}=await L.createFlowMesh(A.meshType,A.simulationSettings,a,u.signal);return{result:{vertexBuffer:e.buffer,indexBuffer:f.buffer},transferList:[e.buffer,f.buffer]}};l.getProjectionOffsetGrid=async function(A){const u=
r.fromJSON(A.projectedExtent),a=r.fromJSON(A.srcBufferExtent);let e=null;A.datumTransformationSteps&&(e=new H({steps:A.datumTransformationSteps}));(A.includeGCSGrid||O.requirePE(u.spatialReference,a.spatialReference,e))&&await O.load();const f=A.rasterTransform?x.readTransform(A.rasterTransform):null;return O.getProjectionOffsetGrid({...A,projectedExtent:u,srcBufferExtent:a,datumTransformation:e,rasterTransform:f})};return K._createClass(b)}()});