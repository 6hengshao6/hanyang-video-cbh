// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(l,f,ia,aa,S,P,R,H){function h(Q){return{ok:!0,value:Q}}function k(Q){return{ok:!1,error:Q}}function q(Q){return S.isSome(Q)&&!0===Q.ok?Q.value:null}function T(Q){return S.isSome(Q)&&!1===Q.ok?Q.error:null}let N=function(Q){function B(u,M){var L=e.call(this,
{});L._result=null;L._abortHandle=null;L.abort=()=>{L._abortController=S.abortMaybe(L._abortController)};L.remove=L.abort;L._abortController=new AbortController;const {signal:v}=L._abortController;L.promise=u(v);L.promise.then(K=>{L._result=h(K);L._cleanup()},K=>{L._result=k(K);L._cleanup()});L._abortHandle=P.onAbort(M,L.abort);return L}f._inherits(B,Q);var e=f._createSuper(B);Q=B.prototype;Q.normalizeCtorArgs=function(){return{}};Q.destroy=function(){this.abort()};Q._cleanup=function(){this._abortHandle=
S.removeMaybe(this._abortHandle);this._abortController=null};f._createClass(B,[{key:"value",get:function(){return q(this._result)}},{key:"error",get:function(){return T(this._result)}},{key:"finished",get:function(){return S.isSome(this._result)}}]);return B}(aa);ia.__decorate([R.property()],N.prototype,"value",null);ia.__decorate([R.property()],N.prototype,"error",null);ia.__decorate([R.property()],N.prototype,"finished",null);ia.__decorate([R.property()],N.prototype,"promise",void 0);ia.__decorate([R.property()],
N.prototype,"_result",void 0);N=ia.__decorate([H.subclass("esri.core.asyncUtils.ReactiveTask")],N);l.assertResult=function(Q){if(!0===Q.ok)return Q.value;throw Q.error;};l.createTask=function(Q,B){return new N(Q,B)};l.forEach=function(Q,B,e){return P.eachAlways(Q.map((u,M)=>B.apply(e,[u,M])))};l.makeResultError=k;l.makeResultOk=h;l.map=async function(Q,B,e){return(await P.eachAlways(Q.map((u,M)=>B.apply(e,[u,M])))).map(u=>u.value)};l.result=async function(Q){if(S.isNone(Q))return{ok:!1,error:Error("no promise provided")};
try{return h(await Q)}catch(B){return k(B)}};l.resultError=T;l.resultOrAbort=async function(Q){try{return h(await Q)}catch(B){return P.throwIfAbortError(B),k(B)}};l.resultValue=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k){function q(y,O){return y?O?4:3:O?3:2}function T(y,O,Z,W){if(y){if(Z)return O&&W?m:Aa;if(O&&W)return c}else if(O&&W)return Aa;return ra}function N({scale:y,translate:O},Z){return Math.round((Z-O[0])/y[0])}function Q({scale:y,translate:O},Z){return Math.round((O[1]-Z)/y[1])}function B({scale:y,translate:O},Z,W){return Z*y[W]+O[W]}function e(y){y=y.coords;return{x:y[0],y:y[1]}}function u(y,O){y.coords[0]=O.x;y.coords[1]=O.y;return y}function M(y){y=y.coords;return{x:y[0],
y:y[1],z:y[2]}}function L(y,O){y.coords[0]=O.x;y.coords[1]=O.y;y.coords[2]=O.z;return y}function v(y){y=y.coords;return{x:y[0],y:y[1],m:y[2]}}function K(y,O){y.coords[0]=O.x;y.coords[1]=O.y;y.coords[2]=O.m;return y}function F(y){y=y.coords;return{x:y[0],y:y[1],z:y[2],m:y[3]}}function n(y,O){y.coords[0]=O.x;y.coords[1]=O.y;y.coords[2]=O.z;y.coords[3]=O.m;return y}function C(y,O){return y&&O?n:y?L:O?K:u}function w(y,O,Z,W,fa){Z=C(Z,W);for(const {geometry:ma,attributes:oa}of O)O=aa.isSome(ma)?Z(new k,
ma):null,y.push(new H.OptimizedFeature(O,oa,null,fa?oa[fa]:void 0));return y}function D(y,O,Z,W){for(const {geometry:fa,attributes:ma}of O)y.push({attributes:ma,geometry:aa.isSome(fa)?z(fa,Z,W):null});return y}function z(y,O,Z){if(aa.isNone(y))return null;const W=q(O,Z),fa=[];for(let ma=0;ma<y.coords.length;ma+=W){const oa=[];for(let wa=0;wa<W;wa++)oa.push(y.coords[ma+wa]);fa.push(oa)}return O?Z?{points:fa,hasZ:O,hasM:Z}:{points:fa,hasZ:O}:Z?{points:fa,hasM:Z}:{points:fa}}function x(y,O,Z,W,fa){Z=
q(Z,W);for(const {geometry:ma,attributes:oa}of O)O=aa.isSome(ma)?E(new k,ma,Z):null,y.push(new H.OptimizedFeature(O,oa,null,fa?oa[fa]:void 0));return y}function E(y,O,Z=q(O.hasZ,O.hasM)){y.lengths[0]=O.points.length;const W=y.coords;let fa=0;for(const ma of O.points)for(O=0;O<Z;O++)W[fa++]=ma[O];return y}function ca(y,O,Z){if(!y)return null;const W=q(O,Z),{coords:fa,lengths:ma}=y;y=[];let oa=0;for(const wa of ma){const ua=[];for(let Ea=0;Ea<wa;Ea++){const Ba=[];for(let Fa=0;Fa<W;Fa++)Ba.push(fa[oa++]);
ua.push(Ba)}y.push(ua)}return O?Z?{paths:y,hasZ:O,hasM:Z}:{paths:y,hasZ:O}:Z?{paths:y,hasM:Z}:{paths:y}}function J(y,O,Z,W,fa){Z=q(Z,W);for(const {geometry:ma,attributes:oa}of O)O=aa.isSome(ma)?G(new k,ma,Z):null,y.push(new H.OptimizedFeature(O,oa,null,fa?oa[fa]:void 0));return y}function G(y,O,Z=q(O.hasZ,O.hasM)){const {lengths:W,coords:fa}=y;let ma=0;for(const oa of O.paths){for(const wa of oa)for(O=0;O<Z;O++)fa[ma++]=wa[O];W.push(oa.length)}return y}function p(y,O,Z){if(!y)return null;const W=
q(O,Z),{coords:fa,lengths:ma}=y;y=[];let oa=0;for(const wa of ma){const ua=[];for(let Ea=0;Ea<wa;Ea++){const Ba=[];for(let Fa=0;Fa<W;Fa++)Ba.push(fa[oa++]);ua.push(Ba)}y.push(ua)}return O?Z?{rings:y,hasZ:O,hasM:Z}:{rings:y,hasZ:O}:Z?{rings:y,hasM:Z}:{rings:y}}function t(y,O,Z,W,fa){for(const {geometry:ma,centroid:oa,attributes:wa}of O){O=aa.isSome(ma)?X(new k,ma,Z,W):null;const ua=fa?wa[fa]:void 0;aa.isSome(oa)?y.push(new H.OptimizedFeature(O,wa,u(new k,oa),ua)):y.push(new H.OptimizedFeature(O,wa,
null,ua))}return y}function X(y,O,Z=O.hasZ,W=O.hasM){ha(y,O.rings,Z,W);return y}function ha(y,O,Z,W){Z=q(Z,W);const {lengths:fa,coords:ma}=y;W=0;Ya(y);for(const oa of O){for(const wa of oa)for(O=0;O<Z;O++)ma[W++]=wa[O];fa.push(oa.length)}return y}function va(y,O,Z,W,fa,ma){Ua(y);if(!Z){for(const oa of O)y.push(new H.OptimizedFeature(null,oa.attributes,null,ma?oa.attributes[ma]:void 0));return y}switch(Z){case "esriGeometryPoint":return w(y,O,W,fa,ma);case "esriGeometryMultipoint":return x(y,O,W,fa,
ma);case "esriGeometryPolyline":return J(y,O,W,fa,ma);case "esriGeometryPolygon":return t(y,O,W,fa,ma);default:gb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${Z}'`)),Ua(y)}return y}function Da(y,O,Z,W){y=y&&("coords"in y?y:y.geometry);if(aa.isNone(y))return null;switch(O){case "esriGeometryPoint":return O=e,Z&&W?O=F:Z?O=M:W&&(O=v),O(y);case "esriGeometryMultipoint":return z(y,Z,W);case "esriGeometryPolyline":return ca(y,Z,W);case "esriGeometryPolygon":return p(y,
Z,W);default:return gb.error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${O}'`)),null}}function Ha(y,O,Z,W,fa){Ua(y);if(aa.isNone(Z)){for(const oa of O)y.push({attributes:oa.attributes});return y}switch(Z){case "esriGeometryPoint":Z=e;W&&fa?Z=F:W?Z=M:fa&&(Z=v);for(var ma of O){const {geometry:oa,attributes:wa}=ma;W=aa.isSome(oa)?Z(oa):null;y.push({attributes:wa,geometry:W})}break;case "esriGeometryMultipoint":return D(y,O,W,fa);case "esriGeometryPolyline":for(const {geometry:oa,
attributes:wa}of O)y.push({attributes:wa,geometry:aa.isSome(oa)?ca(oa,W,fa):null});break;case "esriGeometryPolygon":for(const {geometry:oa,attributes:wa,centroid:ua}of O)ma=aa.isSome(oa)?p(oa,W,fa):null,aa.isSome(ua)?(O=e(ua),y.push({attributes:wa,centroid:O,geometry:ma})):y.push({attributes:wa,geometry:ma});break;default:gb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${Z}'`))}return y}function Ia(y,O,Z,W,fa,ma,oa=Z,wa=W){Ya(y);if(aa.isNone(O)||!O.coords.length)return null;
fa=na[fa];const {coords:ua,lengths:Ea}=O;O=q(Z,W);const Ba=q(Z&&oa,W&&wa);Z=T(Z,W,oa,wa);if(!Ea.length)return Z(y.coords,ua,0,0,N(ma,ua[0]),Q(ma,ua[1])),Ya(y,O,0),y;let Fa,Ra=0,Oa,Ta=0;for(const Sa of Ea){if(Sa<fa)continue;let La=0;Oa=Ta;wa=W=N(ma,ua[Ra]);Fa=oa=Q(ma,ua[Ra+1]);Z(y.coords,ua,Oa,Ra,wa,Fa);La++;Ra+=O;Oa+=Ba;for(let Va=1;Va<Sa;Va++,Ra+=O)if(wa=N(ma,ua[Ra]),Fa=Q(ma,ua[Ra+1]),wa!==W||Fa!==oa)Z(y.coords,ua,Oa,Ra,wa-W,Fa-oa),Oa+=Ba,La++,W=wa,oa=Fa;La>=fa&&(y.lengths.push(La),Ta=Oa)}Ua(y.coords,
Ta);return y.coords.length?y:null}function Ja(y,O,Z,W,fa,ma,oa){let wa=W,ua=0;for(let Ba=ma+Z;Ba<oa;Ba+=Z){var Ea=O[Ba];const Fa=O[Ba+1],Ra=O[oa],Oa=O[oa+1];let Ta=O[ma],Sa=O[ma+1],La=Ra-Ta,Va=Oa-Sa;if(0!==La||0!==Va){const ab=((Ea-Ta)*La+(Fa-Sa)*Va)/(La*La+Va*Va);1<ab?(Ta=Ra,Sa=Oa):0<ab&&(Ta+=La*ab,Sa+=Va*ab)}La=Ea-Ta;Va=Fa-Sa;Ea=La*La+Va*Va;Ea>wa&&(ua=Ba,wa=Ea)}wa>W&&(ua-ma>Z&&Ja(y,O,Z,W,fa,ma,ua),fa(y,O,y.length,ua,O[ua],O[ua+1]),oa-ua>Z&&Ja(y,O,Z,W,fa,ua,oa))}function Ma(y,O,Z,W,fa){const {coords:ma,
lengths:oa}=O;Z=q(Z,W);if(!ma.length)return y!==O&&Ya(y),y;aa.assertIsSome(fa);const {originPosition:wa,scale:ua,translate:Ea}=fa;fa=sa;fa.originPosition=wa;W=fa.scale;W[0]=ua[0]??1;W[1]=-(ua[1]??1);W[2]=ua[2]??1;W[3]=ua[3]??1;var Ba=fa.translate;Ba[0]=Ea[0]??0;Ba[1]=Ea[1]??0;Ba[2]=Ea[2]??0;Ba[3]=Ea[3]??0;if(!oa.length){for(W=0;W<Z;++W)y.coords[W]=B(fa,ma[W],W);y!==O&&Ya(y,Z,0);return y}Ba=0;for(let Ra=0;Ra<oa.length;Ra++){const Oa=oa[Ra];y.lengths[Ra]=Oa;for(var Fa=0;Fa<Z;++Fa)y.coords[Ba+Fa]=B(fa,
ma[Ba+Fa],Fa);Fa=y.coords[Ba];let Ta=y.coords[Ba+1];Ba+=Z;for(let Sa=1;Sa<Oa;Sa++,Ba+=Z){Fa+=ma[Ba]*W[0];Ta+=ma[Ba+1]*W[1];y.coords[Ba]=Fa;y.coords[Ba+1]=Ta;for(let La=2;La<Z;++La)y.coords[Ba+La]=B(fa,ma[Ba+La],La)}}y!==O&&Ya(y,ma.length,oa.length);return y}function Wa(y,O,Z,W){let fa=0,ma=y[W*O],oa=y[W*(O+1)];for(let wa=1;wa<Z;wa++){const ua=ma+y[W*(O+wa)],Ea=oa+y[W*(O+wa)+1],Ba=(ua-ma)*(Ea+oa);ma=ua;oa=Ea;fa+=Ba}return.5*fa}function Ya(y,O=0,Z=0){Ua(y.lengths,Z);Ua(y.coords,O)}function Ua(y,O=0){y.length!==
O&&(y.length=O)}const gb=ia.getLogger("esri.layers.graphics.featureConversionUtils"),na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ra=(y,O,Z,W,fa,ma)=>{y[Z]=fa;y[Z+1]=ma},Aa=(y,O,Z,W,fa,ma)=>{y[Z]=fa;y[Z+1]=ma;y[Z+2]=O[W+2]},c=(y,O,Z,W,fa,ma)=>{y[Z]=fa;y[Z+1]=ma;y[Z+2]=O[W+3]},m=(y,O,Z,W,fa,ma)=>{y[Z]=fa;y[Z+1]=ma;y[Z+2]=O[W+2];y[Z+3]=O[W+3]},da=[],ka=[],sa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};l.convertFromFeature=function(y,
O,Z,W,fa){da[0]=y;[y]=va(ka,da,O,Z,W,fa);Ua(da);Ua(ka);return y};l.convertFromFeatureSet=function(y,O){const Z=new h,{hasM:W,hasZ:fa,features:ma,objectIdFieldName:oa,spatialReference:wa,geometryType:ua,exceededTransferLimit:Ea,transform:Ba,fields:Fa}=y;Fa&&(Z.fields=Fa);Z.geometryType=ua??null;Z.objectIdFieldName=oa??O??null;Z.spatialReference=wa??null;if(!Z.objectIdFieldName)return gb.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Z;ma&&va(Z.features,
ma,ua,fa,W,Z.objectIdFieldName);Ea&&(Z.exceededTransferLimit=Ea);W&&(Z.hasM=W);fa&&(Z.hasZ=fa);Ba&&(Z.transform=Ba);return Z};l.convertFromFeatures=va;l.convertFromGeometry=function(y,O,Z){if(aa.isNone(y))return null;const W=new k;"hasZ"in y&&null==O&&(O=y.hasZ);"hasM"in y&&null==Z&&(Z=y.hasM);if(R.isPoint(y))return C(null!=O?O:null!=y.z,null!=Z?Z:null!=y.m)(W,y);if(R.isPolygon(y))return X(W,y,O,Z);if(R.isPolyline(y))return G(W,y,q(O,Z));if(R.isMultipoint(y))return E(W,y,q(O,Z));gb.error("convertFromGeometry:unknown-geometry",
new f(`Unable to parse unknown geometry type '${y}'`))};l.convertFromGraphics=function(y,O,Z,W,fa,ma){const oa=y.length;switch(Z){case "esriGeometryPoint":w(y,O,W,fa,ma);break;case "esriGeometryMultipoint":x(y,O,W,fa,ma);break;case "esriGeometryPolyline":J(y,O,W,fa,ma);break;case "esriGeometryPolygon":t(y,O,W,fa,ma);break;default:gb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${Z}'`))}for(W=0;W<O.length;W++)y[W+oa].geometryType=Z,y[W+oa].insertAfter=
O[W].insertAfter,y[W+oa].groupId=O[W].groupId;return y};l.convertFromMultipoint=E;l.convertFromMultipointFeatures=x;l.convertFromNestedArray=ha;l.convertFromPoint=function(y,O,Z=C(null!=O.z,null!=O.m)){return Z(y,O)};l.convertFromPointFeatures=w;l.convertFromPolygon=X;l.convertFromPolyline=G;l.convertFromPolylineFeatures=J;l.convertToFeature=function(y,O,Z,W){ka[0]=y;Ha(da,ka,O,Z,W);y=da[0];Ua(da);Ua(ka);return y};l.convertToFeatureSet=function(y){const {objectIdFieldName:O,spatialReference:Z,transform:W,
fields:fa,hasM:ma,hasZ:oa,features:wa,geometryType:ua,exceededTransferLimit:Ea,uniqueIdField:Ba,queryGeometry:Fa,queryGeometryType:Ra}=y;y=Ha([],wa,ua,oa,ma);const Oa=Da(Fa,Ra,!1,!1);y={features:y,fields:fa,geometryType:ua,objectIdFieldName:O,spatialReference:Z,uniqueIdField:Ba,queryGeometry:Oa};W&&(y.transform=W);Ea&&(y.exceededTransferLimit=Ea);ma&&(y.hasM=ma);oa&&(y.hasZ=oa);return y};l.convertToFeatures=Ha;l.convertToGeometry=Da;l.convertToMultipoint=z;l.convertToMultipointFeatures=D;l.convertToPoint=
function(y,O,Z){return y?O?Z?F(y):M(y):Z?v(y):e(y):null};l.convertToPolygon=p;l.convertToPolyline=ca;l.deltaDecodeGeometry=function(y,O){if(aa.isNone(y))return null;const Z=y.clone(),W=y.coords;y=y.lengths;let fa=0;for(let wa=0;wa<y.length;wa++){const ua=y[wa];var ma=W[O*fa],oa=W[O*fa+1];for(let Ea=1;Ea<ua;Ea++)ma+=W[O*(fa+Ea)],oa+=W[O*(fa+Ea)+1],Z.coords[O*(fa+Ea)]=ma,Z.coords[O*(fa+Ea)+1]=oa;fa+=ua}return Z};l.deltaEncodeGeometry=function(y,O){const Z=y.clone(),W=y.coords;y=y.lengths;let fa=0;for(let oa=
0;oa<y.length;oa++){const wa=y[oa];let ua=W[O*fa];var ma=W[O*fa+1];for(let Ea=1;Ea<wa;Ea++){const Ba=W[O*(fa+Ea)],Fa=W[O*(fa+Ea)+1];ma=Fa-ma;Z.coords[O*(fa+Ea)]=Ba-ua;Z.coords[O*(fa+Ea)+1]=ma;ua=Ba;ma=Fa}fa+=wa}return Z};l.generalizeOptimizedGeometry=function(y,O,Z,W,fa,ma,oa=Z,wa=W){Ya(y);if(!O||!O.coords.length)return null;fa=na[fa];const {coords:ua,lengths:Ea}=O;O=q(Z,W);const Ba=q(Z&&oa,W&&wa);Z=T(Z,W,oa,wa);if(!Ea.length)return Z(y.coords,ua,0,0,ua[0],ua[1]),Ya(y,O,0),y;W=0;ma*=ma;for(const Fa of Ea){if(Fa<
fa){W+=Fa*O;continue}oa=y.coords.length/Ba;wa=W;const Ra=W+(Fa-1)*O;Z(y.coords,ua,y.coords.length,wa,ua[wa],ua[wa+1]);Ja(y.coords,ua,O,ma,Z,wa,Ra);Z(y.coords,ua,y.coords.length,Ra,ua[Ra],ua[Ra+1]);wa=y.coords.length/Ba-oa;wa>=fa?y.lengths.push(wa):Ua(y.coords,oa*Ba);W+=Fa*O}return y.coords.length?y:null};l.getBoundsOptimizedGeometry=function(y,O,Z,W){if(aa.isNone(O)||!O.coords||!O.coords.length)return null;Z=q(Z,W);let fa=W=Number.POSITIVE_INFINITY,ma=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY;
if(O&&O.coords){O=O.coords;for(let wa=0;wa<O.length;wa+=Z){const ua=O[wa],Ea=O[wa+1];W=Math.min(W,ua);ma=Math.max(ma,ua);fa=Math.min(fa,Ea);oa=Math.max(oa,Ea)}}S.is(y)?S.fromRectValues(y,W,fa,ma,oa):P.fromValues(W,fa,ma,oa,y);return y};l.getQuantizedArea=function(y,O){const {coords:Z,lengths:W}=y;let fa=y=0;for(let ma=0;ma<W.length;ma++){const oa=W[ma];fa+=Wa(Z,y,oa,O);y+=oa}return Math.abs(fa)};l.getQuantizedBoundsOptimizedGeometry=function(y,O,Z,W){Z=q(Z,W);const {lengths:fa,coords:ma}=O;W=O=Number.POSITIVE_INFINITY;
let oa=Number.NEGATIVE_INFINITY,wa=Number.NEGATIVE_INFINITY,ua=0;for(const Ea of fa){let Ba=ma[ua],Fa=ma[ua+1];O=Math.min(Ba,O);W=Math.min(Fa,W);oa=Math.max(Ba,oa);wa=Math.max(Fa,wa);ua+=Z;for(let Ra=1;Ra<Ea;Ra++,ua+=Z){const Oa=ma[ua],Ta=ma[ua+1];Ba+=Oa;Fa+=Ta;0>Oa&&(O=Math.min(O,Ba));0<Oa&&(oa=Math.max(oa,Ba));0>Ta?W=Math.min(W,Fa):0<Ta&&(wa=Math.max(wa,Fa))}}y[0]=O;y[1]=W;y[2]=oa;y[3]=wa;return y};l.getSignedQuantizedRingArea=Wa;l.quantizeOptimizedFeatureSet=function(y,O){const {geometryType:Z,
features:W,hasM:fa,hasZ:ma}=O;if(!y)return O;for(let oa=0;oa<W.length;oa++){const wa=W[oa],ua=wa.weakClone();ua.geometry=new k;Ia(ua.geometry,wa.geometry,fa,ma,Z,y);wa.centroid&&(ua.centroid=new k,Ia(ua.centroid,wa.centroid,fa,ma,"esriGeometryPoint",y));W[oa]=ua}O.transform=y;return O};l.quantizeOptimizedGeometry=Ia;l.quantizeX=N;l.quantizeY=Q;l.removeCollinearVectices=function(y,O,Z,W,fa){if(!O||!O.coords||!O.coords.length)return null;Z=na[Z];const {coords:ma,lengths:oa}=O;O=T(W,fa,W,fa);W=q(W,fa);
let wa=fa=0,ua=0,Ea=0;for(const Ra of oa){wa=Ea;O(y.coords,ma,wa,fa,ma[fa],ma[fa+1]);fa+=W;var Ba=ma[fa];let Oa=ma[fa+1],Ta=Ba,Sa=Oa;var Fa=Oa/Ba;wa+=W;O(y.coords,ma,wa,fa,Ta,Sa);fa+=W;for(let La=2;La<Ra;La++){Ba=ma[fa];Oa=ma[fa+1];const Va=Oa/Ba,ab=Fa===Va||!isFinite(Fa)&&!isFinite(Va);Fa=ab&&isFinite(Va)?0<=Fa&&0<=Va||0>=Fa&&0>=Va:0<=Sa&&0<=Oa||0>=Sa&&0>=Oa;ab&&Fa?(Ta+=Ba,Sa+=Oa):(Ta=Ba,Sa=Oa,wa+=W);O(y.coords,ma,wa,fa,Ta,Sa);fa+=W;Fa=Va}wa+=W;Ba=(wa-Ea)/W;Ba>=Z&&(y.lengths[ua]=Ba,Ea=wa,ua++)}y.coords.length>
Ea&&(y.coords.length=Ea);y.lengths.length>ua&&(y.lengths.length=ua);return y.coords.length&&y.lengths.length?y:null};l.removeZMValues=function(y,O,Z,W,fa,ma){Ya(y);y.lengths.push(...O.lengths);if(Z===fa&&W===ma)for(var oa=0;oa<O.coords.length;oa++)y.coords.push(O.coords[oa]);else for(oa=q(Z,W),Z=T(Z,W,fa,ma),O=O.coords,W=0;W<O.length;W+=oa)Z(y.coords,O,y.coords.length,W,O[W],O[W+1]);return y};l.unquantizeOptimizedFeatureSet=function(y){const {transform:O,features:Z,hasM:W,hasZ:fa}=y;if(!O)return y;
for(const ma of Z)aa.isSome(ma.geometry)&&Ma(ma.geometry,ma.geometry,W,fa,O),aa.isSome(ma.centroid)&&Ma(ma.centroid,ma.centroid,W,fa,O);y.transform=null;return y};l.unquantizeOptimizedGeometry=Ma;l.unquantizeValue=B;l.unquantizeX=function(y,O){return B(y,O,0)};l.unquantizeY=function(y,O){return B(y,-O,1)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(l,f,
ia,aa){function S(e=Q){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function P(e,u,M,L,v,K,F=S()){F[0]=e;F[1]=u;F[2]=M;F[3]=L;F[4]=v;F[5]=K;return F}function R(e){return e[0]>=e[3]?0:e[3]-e[0]}function H(e){return e[1]>=e[4]?0:e[4]-e[1]}function h(e){return e[2]>=e[5]?0:e[5]-e[2]}function k(e,u){return Math.max(u[0],e[0])<=Math.min(u[3],e[3])&&Math.max(u[1],e[1])<=Math.min(u[4],e[4])&&Math.max(u[2],e[2])<=Math.min(u[5],e[5])}function q(e,u){e[0]=u[0];e[1]=u[1];e[2]=u[2];e[3]=u[3];e[4]=u[4];e[5]=u[5];return e}
function T(e){return 6===e.length}const N=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],Q=[0,0,0,0,0,0],B=S();l.NEGATIVE_INFINITY=N;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=Q;l.allFinite=function(e){for(let u=0;6>u;u++)if(!isFinite(e[u]))return!1;return!0};l.center=function(e,u=[0,0,0]){u[0]=e[0]+R(e)/2;u[1]=e[1]+H(e)/2;u[2]=e[2]+h(e)/2;return u};l.contains=function(e,u){return u[0]>=e[0]&&u[1]>=e[1]&&u[2]>=e[2]&&u[3]<=e[3]&&u[4]<=e[4]&&u[5]<=
e[5]};l.containsPoint=function(e,u){return u[0]>=e[0]&&u[1]>=e[1]&&u[2]>=e[2]&&u[0]<=e[3]&&u[1]<=e[4]&&u[2]<=e[5]};l.containsPointWithMargin=function(e,u,M){return u[0]>=e[0]-M&&u[1]>=e[1]-M&&u[2]>=e[2]-M&&u[0]<=e[3]+M&&u[1]<=e[4]+M&&u[2]<=e[5]+M};l.create=S;l.depth=H;l.diameter=function(e){const u=R(e),M=h(e);e=H(e);return Math.sqrt(u*u+M*M+e*e)};l.empty=function(e){return e?q(e,N):S(N)};l.equals=function(e,u,M){if(f.isNone(e)||f.isNone(u))return e===u;if(!T(e)||!T(u))return!1;if(M)for(let L=0;L<
e.length;L++){if(!M(e[L],u[L]))return!1}else for(M=0;M<e.length;M++)if(e[M]!==u[M])return!1;return!0};l.expandWithAABB=function(e,u){e[0]=Math.min(e[0],u[0]);e[1]=Math.min(e[1],u[1]);e[2]=Math.min(e[2],u[2]);e[3]=Math.max(e[3],u[3]);e[4]=Math.max(e[4],u[4]);e[5]=Math.max(e[5],u[5])};l.expandWithBuffer=function(e,u,M=0,L=u.length/3){let v=e[0],K=e[1],F=e[2],n=e[3],C=e[4],w=e[5];for(let D=0;D<L;D++)v=Math.min(v,u[M+3*D]),K=Math.min(K,u[M+3*D+1]),F=Math.min(F,u[M+3*D+2]),n=Math.max(n,u[M+3*D]),C=Math.max(C,
u[M+3*D+1]),w=Math.max(w,u[M+3*D+2]);e[0]=v;e[1]=K;e[2]=F;e[3]=n;e[4]=C;e[5]=w};l.expandWithNestedArray=function(e,u,M){const L=u.length;let v=e[0],K=e[1],F=e[2],n=e[3],C=e[4],w=e[5];if(M)for(M=0;M<L;M++){var D=u[M];v=Math.min(v,D[0]);K=Math.min(K,D[1]);F=Math.min(F,D[2]);n=Math.max(n,D[0]);C=Math.max(C,D[1]);w=Math.max(w,D[2])}else for(M=0;M<L;M++)D=u[M],v=Math.min(v,D[0]),K=Math.min(K,D[1]),n=Math.max(n,D[0]),C=Math.max(C,D[1]);e[0]=v;e[1]=K;e[2]=F;e[3]=n;e[4]=C;e[5]=w};l.expandWithOffset=function(e,
u,M,L){e[0]=Math.min(e[0],e[0]+u);e[3]=Math.max(e[3],e[3]+u);e[1]=Math.min(e[1],e[1]+M);e[4]=Math.max(e[4],e[4]+M);e[2]=Math.min(e[2],e[2]+L);e[5]=Math.max(e[5],e[5]+L)};l.expandWithRect=function(e,u){e[0]=Math.min(e[0],u[0]);e[1]=Math.min(e[1],u[1]);e[3]=Math.max(e[3],u[2]);e[4]=Math.max(e[4],u[3])};l.expandWithVec3=function(e,u){e[0]=Math.min(e[0],u[0]);e[1]=Math.min(e[1],u[1]);e[2]=Math.min(e[2],u[2]);e[3]=Math.max(e[3],u[0]);e[4]=Math.max(e[4],u[1]);e[5]=Math.max(e[5],u[2])};l.fromExtent=function(e,
u=S()){u[0]=e.xmin;u[1]=e.ymin;u[2]=e.hasZ?e.zmin:-Infinity;u[3]=e.xmax;u[4]=e.ymax;u[5]=e.hasZ?e.zmax:Infinity;return u};l.fromMinMax=function(e,u,M=S()){M[0]=e[0];M[1]=e[1];M[2]=e[2];M[3]=u[0];M[4]=u[1];M[5]=u[2];return M};l.fromRect=function(e,u){e[0]=u[0];e[1]=u[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=u[2];e[4]=u[3];e[5]=Number.POSITIVE_INFINITY;return e};l.fromRectValues=function(e,u,M,L,v){e[0]=u;e[1]=M;e[2]=Number.NEGATIVE_INFINITY;e[3]=L;e[4]=v;e[5]=Number.POSITIVE_INFINITY;return e};l.fromValues=
P;l.getMax=function(e,u){u[0]=e[3];u[1]=e[4];u[2]=e[5];return u};l.getMin=function(e,u){u[0]=e[0];u[1]=e[1];u[2]=e[2];return u};l.height=h;l.intersects=k;l.intersectsClippingArea=function(e,u){return f.isNone(u)?!0:k(e,u)};l.is=T;l.isPoint=function(e){return 0===R(e)&&0===H(e)&&0===h(e)};l.maximumDimension=function(e){return Math.max(R(e),h(e),H(e))};l.offset=function(e,u,M,L,v=e){v[0]=e[0]+u;v[1]=e[1]+M;v[2]=e[2]+L;v[3]=e[3]+u;v[4]=e[4]+M;v[5]=e[5]+L;return v};l.scale=function(e,u,M=e){const L=e[0]+
R(e)/2,v=e[1]+H(e)/2,K=e[2]+h(e)/2;M[0]=L+(e[0]-L)*u;M[1]=v+(e[1]-v)*u;M[2]=K+(e[2]-K)*u;M[3]=L+(e[3]-L)*u;M[4]=v+(e[4]-v)*u;M[5]=K+(e[5]-K)*u;return M};l.set=q;l.setMax=function(e,u,M=e){M[3]=u[0];M[4]=u[1];M[5]=u[2];M!==e&&(M[0]=e[0],M[1]=e[1],M[2]=e[2]);return e};l.setMin=function(e,u,M=e){M[0]=u[0];M[1]=u[1];M[2]=u[2];M!==e&&(M[3]=e[3],M[4]=e[4],M[5]=e[5]);return M};l.size=function(e,u=[0,0,0]){u[0]=R(e);u[1]=H(e);u[2]=h(e);return u};l.toExtent=function(e,u){return isFinite(e[2])||isFinite(e[5])?
new ia({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:u}):new ia({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:u})};l.toRect=function(e,u){u||(u=aa.create());u[0]=e[0];u[1]=e[1];u[2]=e[3];u[3]=e[4];return u};l.width=R;l.wrap=function(e,u,M,L,v,K){return P(e,u,M,L,v,K,B)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],
function(l,f,ia){let aa=function(){function P(R=null,H={},h,k){this.geometry=R;this.attributes=H;this.centroid=h;this.objectId=k;this.geohashY=this.geohashX=this.displayId=0}P.prototype.weakClone=function(){const R=new P(this.geometry,this.attributes,this.centroid,this.objectId);R.displayId=this.displayId;R.geohashX=this.geohashX;R.geohashY=this.geohashY;return R};return f._createClass(P)}(),S=function(P){function R(){return H.apply(this,arguments)}f._inherits(R,P);var H=f._createSuper(R);return f._createClass(R)}(aa);
l.OptimizedFeature=aa;l.OptimizedFeatureWithGeometry=S;l.hasGeometry=function(P){return!(ia.isNone(P.geometry)||!P.geometry.coords||!P.geometry.coords.length)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=
null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}f.prototype.weakClone=function(){const ia=new f;ia.objectIdFieldName=this.objectIdFieldName;ia.globalIdFieldName=this.globalIdFieldName;ia.geohashFieldName=this.geohashFieldName;ia.geometryProperties=this.geometryProperties;ia.geometryType=this.geometryType;ia.spatialReference=this.spatialReference;ia.hasZ=this.hasZ;ia.hasM=
this.hasM;ia.features=this.features;ia.fields=this.fields;ia.transform=this.transform;ia.exceededTransferLimit=this.exceededTransferLimit;ia.uniqueIdField=this.uniqueIdField;ia.queryGeometry=this.queryGeometry;ia.queryGeometryType=this.queryGeometryType;return ia};return l._createClass(f)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(aa=[],S=[],P=!1){this.lengths=aa??[];this.coords=S??[];this.hasIndeterminateRingOrder=
P}f.fromRect=function(aa){const [S,P,R,H]=aa;aa=R-S;const h=H-P;return new f([5],[S,P,aa,0,0,h,-aa,0,0,-h])};var ia=f.prototype;ia.forEachVertex=function(aa){let S=0;this.lengths.length||aa(this.coords[0],this.coords[1]);for(let P=0;P<this.lengths.length;P++){const R=this.lengths[P];for(let H=0;H<R;H++)aa(this.coords[2*(H+S)],this.coords[2*(H+S)+1]);S+=R}};ia.clone=function(aa){return aa?(aa.set(this.coords),new f(this.lengths.slice(),aa,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),
this.coords.slice(),this.hasIndeterminateRingOrder)};l._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((aa,S)=>aa+S)}}]);return f}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k,q){const T=P.create();return function(){function N(B){this.geometryInfo=B;this._boundsStore=new h.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ia;this.featureAdapter=k.optimizedFeatureQueryEngineAdapter}var Q=N.prototype;Q.getFullExtent=function(B){if(S.isNone(this.fullBounds))return null;const [e,u,M,L]=this.fullBounds;return{xmin:e,ymin:u,xmax:M,ymax:L,spatialReference:q.cleanFromGeometryEngine(B)}};Q.add=function(B){this._add(B);
this._emitChanged()};Q.addMany=function(B){for(const e of B)this._add(e);this._emitChanged()};Q.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};Q.removeById=function(B){B=this._featuresById.get(B);if(!B)return null;this._remove(B);this._emitChanged();return B};Q.removeManyById=function(B){this._boundsStore.invalidateIndex();for(const e of B)(B=this._featuresById.get(e))&&this._remove(B);this._emitChanged()};Q.forEachBounds=function(B,e){for(const u of B)(B=
this._boundsStore.get(u.objectId))&&e(P.fromRect(T,B))};Q.getFeature=function(B){return this._featuresById.get(B)};Q.has=function(B){return this._featuresById.has(B)};Q.forEach=function(B){this._featuresById.forEach(e=>B(e))};Q.forEachInBounds=function(B,e){this._boundsStore.forEachInBounds(B,u=>{e(this._featuresById.get(u))})};Q.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};Q.sweep=function(){let B=!1;this._featuresById.forEach((e,u)=>{this._markedIds.has(u)||
(B=!0,this._remove(e))});this._markedIds.clear();B&&this._emitChanged()};Q._emitChanged=function(){this.events.emit("changed",void 0)};Q._add=function(B){if(B){var e=B.objectId;if(null==e)aa.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:B}));else{var u=this._featuresById.get(e);this._markedIds.add(e);if(u){B.displayId=u.displayId;var M=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(S.isSome(this.onFeatureAdd))this.onFeatureAdd(B);
!S.isNone(B.geometry)&&B.geometry.coords&&B.geometry.coords.length?(M=H.getBoundsOptimizedGeometry(S.isSome(M)?M:R.create(),B.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),S.isSome(M)&&this._boundsStore.set(e,M)):this._boundsStore.set(e,null);this._featuresById.set(e,B)}}};Q._remove=function(B){if(S.isSome(this.onFeatureRemove))this.onFeatureRemove(B);const e=B.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return B};l._createClass(N,[{key:"geometryType",
get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let B=0;this._featuresById.forEach(e=>{S.isSome(e.geometry)&&e.geometry.coords&&(B+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,
vertexCount:B/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return N}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,f,ia,aa,S){let P=function(){function R(){this._emitter=new R.EventEmitter(this)}var H=R.prototype;H.emit=function(h,k){return this._emitter.emit(h,k)};H.on=function(h,k){return this._emitter.on(h,k)};H.once=function(h,k){return this._emitter.once(h,
k)};H.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return l._createClass(R)}();(function(R){let H=function(){function k(T=null){this._target=T;this._listenersMap=null}var q=k.prototype;q.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};q.emit=function(T,N){T=this._listenersMap&&this._listenersMap.get(T);if(!T)return!1;const Q=this._target||this;[...T].forEach(B=>{B.call(Q,N)});return 0<T.length};q.on=function(T,N){if(Array.isArray(T)){var Q=
T.map(B=>this.on(B,N));return aa.handlesGroup(Q)}if(T.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);Q=this._listenersMap.get(T)||[];Q.push(N);this._listenersMap.set(T,Q);return{remove:()=>{const B=this._listenersMap&&this._listenersMap.get(T)||[],e=B.indexOf(N);0<=e&&B.splice(e,1)}}};q.once=function(T,N){const Q=this.on(T,B=>{Q.remove();N.call(null,B)});return Q};q.hasEventListener=function(T){T=
this._listenersMap&&this._listenersMap.get(T);return null!=T&&0<T.length};return l._createClass(k)}();R.EventEmitter=H;R.EventedMixin=k=>{k=function(q){function T(){var Q=N.apply(this,arguments);Q._emitter=new H;return Q}l._inherits(T,q);var N=l._createSuper(T);q=T.prototype;q.destroy=function(){this._emitter.clear()};q.emit=function(Q,B){return this._emitter.emit(Q,B)};q.on=function(Q,B){return this._emitter.on(Q,B)};q.once=function(Q,B){return this._emitter.once(Q,B)};q.hasEventListener=function(Q){return this._emitter.hasEventListener(Q)};
return l._createClass(T)}(k);return k=f.__decorate([S.subclass("esri.core.Evented")],k)};let h=function(k){function q(){var N=T.apply(this,arguments);N._emitter=new P.EventEmitter(l._assertThisInitialized(N));return N}l._inherits(q,k);var T=l._createSuper(q);k=q.prototype;k.destroy=function(){this._emitter.clear()};k.emit=function(N,Q){return this._emitter.emit(N,Q)};k.on=function(N,Q){return this._emitter.on(N,Q)};k.once=function(N,Q){return this._emitter.once(N,Q)};k.hasEventListener=function(N){return this._emitter.hasEventListener(N)};
return l._createClass(q)}(ia);h=f.__decorate([S.subclass("esri.core.Evented")],h);R.EventedAccessor=h})(P||(P={}));return P})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(l,f,ia,aa,S){function P(h,k,q){R.minX=k[0];R.minY=k[1];R.maxX=k[2];R.maxY=k[3];h.search(R,q)}const R={minX:0,minY:0,maxX:0,maxY:0};let H=function(){function h(){this._indexInvalid=
!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new aa.PooledRBush(9,ia("esri-csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let T=0;this._idByBounds.forEach((N,Q)=>{q[T++]=Q});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(q=>
this._idByBounds.has(q))))),this._boundsToLoad.length=0)}}var k=h.prototype;k.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};k.delete=function(q){const T=this._boundsById.get(q);this._boundsById.delete(q);T&&(this._idByBounds.delete(T),this._indexInvalid||this._index.remove(T))};k.forEachInBounds=function(q,T){this._loadIndex();P(this._index,q,N=>T(this._idByBounds.get(N)))};k.get=function(q){return this._boundsById.get(q)};
k.has=function(q){return this._boundsById.has(q)};k.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};k.set=function(q,T){if(!this._indexInvalid){const N=this._boundsById.get(q);N&&(this._index.remove(N),this._idByBounds.delete(N))}this._boundsById.set(q,T);T&&(this._idByBounds.set(T,q),this._indexInvalid||(this._boundsToLoad.push(T),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(h,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;
const q=S.empty();for(const T of this._boundsById.values())T&&(q[0]=Math.min(T[0],q[0]),q[1]=Math.min(T[1],q[1]),q[2]=Math.max(T[2],q[2]),q[3]=Math.max(T[3],q[3]));return q}},{key:"valid",get:function(){return!this._indexInvalid}}]);return h}();l.BoundsStore=H;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(l,f,ia,aa,S,P){function R(w,D){H(w,0,w.children.length,D,w)}function H(w,D,z,x,E){E||(E=new n([]));E.minX=Infinity;E.minY=Infinity;E.maxX=-Infinity;E.maxY=-Infinity;for(let ca=D,J;ca<z;ca++)J=w.children[ca],h(E,w.leaf?x(J):J);return E}function h(w,D){w.minX=Math.min(w.minX,D.minX);w.minY=Math.min(w.minY,D.minY);w.maxX=Math.max(w.maxX,D.maxX);w.maxY=Math.max(w.maxY,D.maxY)}function k(w,D){return w.minX-D.minX}function q(w,D){return w.minY-D.minY}function T(w){return(w.maxX-w.minX)*(w.maxY-
w.minY)}function N(w){return w.maxX-w.minX+(w.maxY-w.minY)}function Q(w,D){return w.minX<=D.minX&&w.minY<=D.minY&&D.maxX<=w.maxX&&D.maxY<=w.maxY}function B(w,D){return D.minX<=w.maxX&&D.minY<=w.maxY&&D.maxX>=w.minX&&D.maxY>=w.minY}function e(w,D,z,x,E){for(D=[D,z];D.length;){z=aa.assumeNonNull(D.pop());const ca=aa.assumeNonNull(D.pop());if(z-ca<=x)continue;const J=ca+Math.ceil((z-ca)/x/2)*x;P.quickselect(w,J,ca,z,E);D.push(ca,J,J,z)}}let u=function(){function w(z=9,x){this._compareMinX=k;this._compareMinY=
q;this._toBBox=E=>E;this._maxEntries=Math.max(4,z||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));x&&("function"===typeof x?this._toBBox=x:this._initFormat(x));this.clear()}var D=w.prototype;D.destroy=function(){this.clear();M.prune();L.prune();v.prune();K.prune()};D.all=function(z){this._all(this._data,z)};D.search=function(z,x){let E=this._data;const ca=this._toBBox;if(B(z,E))for(M.clear();E;){for(let J=0,G=E.children.length;J<G;J++){const p=E.children[J],t=E.leaf?ca(p):p;B(z,t)&&
(E.leaf?x(p):Q(z,t)?this._all(p,x):M.push(p))}E=M.pop()}};D.collides=function(z){let x=this._data;const E=this._toBBox;if(!B(z,x))return!1;for(M.clear();x;){for(let ca=0,J=x.children.length;ca<J;ca++){const G=x.children[ca],p=x.leaf?E(G):G;if(B(z,p)){if(x.leaf||Q(z,p))return!0;M.push(G)}}x=M.pop()}return!1};D.load=function(z){if(!z.length)return this;if(z.length<this._minEntries){for(let x=0,E=z.length;x<E;x++)this.insert(z[x]);return this}z=this._build(z.slice(0,z.length),0,z.length-1,0);if(this._data.children.length)if(this._data.height===
z.height)this._splitRoot(this._data,z);else{if(this._data.height<z.height){const x=this._data;this._data=z;z=x}this._insert(z,this._data.height-z.height-1,!0)}else this._data=z;return this};D.insert=function(z){z&&this._insert(z,this._data.height-1);return this};D.clear=function(){this._data=new n([]);return this};D.remove=function(z){if(!z)return this;let x=this._data,E=null,ca=0,J=!1,G;const p=this._toBBox(z);v.clear();for(K.clear();x||0<v.length;){x||(x=aa.assumeNonNull(v.pop()),E=v.data[v.length-
1],ca=K.pop()??0,J=!0);if(x.leaf&&(G=ia.indexOf(x.children,z,x.children.length,x.indexHint),-1!==G)){x.children.splice(G,1);v.push(x);this._condense(v);break}J||x.leaf||!Q(x,p)?E?(ca++,x=E.children[ca],J=!1):x=null:(v.push(x),K.push(ca),ca=0,E=x,x=x.children[0])}return this};D.toJSON=function(){return this._data};D.fromJSON=function(z){this._data=z;return this};D._all=function(z,x){for(L.clear();z;){if(!0===z.leaf)for(const E of z.children)x(E);else L.pushArray(z.children);z=L.pop()??null}};D._build=
function(z,x,E,ca){var J=E-x+1,G=this._maxEntries;if(J<=G)return z=new n(z.slice(x,E+1)),R(z,this._toBBox),z;ca||(ca=Math.ceil(Math.log(J)/Math.log(G)),G=Math.ceil(J/G**(ca-1)));const p=new C([]);p.height=ca;J=Math.ceil(J/G);G=J*Math.ceil(Math.sqrt(G));for(e(z,x,E,G,this._compareMinX);x<=E;x+=G){const t=Math.min(x+G-1,E);e(z,x,t,J,this._compareMinY);for(let X=x;X<=t;X+=J)p.children.push(this._build(z,X,Math.min(X+J-1,t),ca-1))}R(p,this._toBBox);return p};D._chooseSubtree=function(z,x,E,ca){for(;;){ca.push(x);
if(!0===x.leaf||ca.length-1===E)break;let J=Infinity,G=Infinity,p=void 0;for(let t=0,X=x.children.length;t<X;t++){const ha=x.children[t],va=T(ha),Da=(Math.max(ha.maxX,z.maxX)-Math.min(ha.minX,z.minX))*(Math.max(ha.maxY,z.maxY)-Math.min(ha.minY,z.minY))-va;Da<G?(G=Da,J=va<J?va:J,p=ha):Da===G&&va<J&&(J=va,p=ha)}x=p||x.children[0]}return x};D._insert=function(z,x,E){var ca=this._toBBox;E=E?z:ca(z);v.clear();ca=this._chooseSubtree(E,this._data,x,v);ca.children.push(z);for(h(ca,E);0<=x;)if(v.data[x].children.length>
this._maxEntries)this._split(v,x),x--;else break;this._adjustParentBBoxes(E,v,x)};D._split=function(z,x){const E=z.data[x];var ca=E.children.length;const J=this._minEntries;this._chooseSplitAxis(E,J,ca);(ca=this._chooseSplitIndex(E,J,ca))?(ca=E.children.splice(ca,E.children.length-ca),ca=E.leaf?new n(ca):new C(ca),ca.height=E.height,R(E,this._toBBox),R(ca,this._toBBox),x?z.data[x-1].children.push(ca):this._splitRoot(E,ca)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
D._splitRoot=function(z,x){this._data=new C([z,x]);this._data.height=z.height+1;R(this._data,this._toBBox)};D._chooseSplitIndex=function(z,x,E){let ca,J,G=void 0;ca=J=Infinity;for(let t=x;t<=E-x;t++){var p=H(z,0,t,this._toBBox);const X=H(z,t,E,this._toBBox),ha=Math.max(0,Math.min(p.maxX,X.maxX)-Math.max(p.minX,X.minX))*Math.max(0,Math.min(p.maxY,X.maxY)-Math.max(p.minY,X.minY));p=T(p)+T(X);ha<ca?(ca=ha,G=t,J=p<J?p:J):ha===ca&&p<J&&(J=p,G=t)}return G};D._chooseSplitAxis=function(z,x,E){const ca=z.leaf?
this._compareMinX:k,J=z.leaf?this._compareMinY:q,G=this._allDistMargin(z,x,E,ca);x=this._allDistMargin(z,x,E,J);G<x&&z.children.sort(ca)};D._allDistMargin=function(z,x,E,ca){z.children.sort(ca);ca=this._toBBox;var J=H(z,0,x,ca);const G=H(z,E-x,E,ca);let p=N(J)+N(G);for(let t=x;t<E-x;t++){const X=z.children[t];h(J,z.leaf?ca(X):X);p+=N(J)}for(E=E-x-1;E>=x;E--)J=z.children[E],h(G,z.leaf?ca(J):J),p+=N(G);return p};D._adjustParentBBoxes=function(z,x,E){for(;0<=E;E--)h(x.data[E],z)};D._condense=function(z){for(let x=
z.length-1;0<=x;x--){const E=z.data[x];if(0===E.children.length)if(0<x){const ca=z.data[x-1],J=ca.children;J.splice(ia.indexOf(J,E,J.length,ca.indexHint),1)}else this.clear();else R(E,this._toBBox)}};D._initFormat=function(z){const x=["return a"," - b",";"];this._compareMinX=new Function("a","b",x.join(z[0]));this._compareMinY=new Function("a","b",x.join(z[1]));this._toBBox=new Function("a","return {minX: a"+z[0]+", minY: a"+z[1]+", maxX: a"+z[2]+", maxY: a"+z[3]+"};")};return f._createClass(w)}();
const M=new S,L=new S,v=new S,K=new S({deallocator:void 0});S=f._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let F=function(w){function D(){var x=z.apply(this,arguments);x.height=1;x.indexHint=new ia.PositionHint;return x}f._inherits(D,w);var z=f._createSuper(D);return f._createClass(D)}(S),n=function(w){function D(x){var E=z.call(this);E.children=x;E.leaf=!0;return E}f._inherits(D,w);var z=f._createSuper(D);return f._createClass(D)}(F),C=function(w){function D(x){var E=
z.call(this);E.children=x;E.leaf=!1;return E}f._inherits(D,w);var z=f._createSuper(D);return f._createClass(D)}(F);l.BBox=S;l.PooledRBush=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(l){var f={};(function(ia){(function(aa){aa=aa();void 0!==aa&&(ia.exports=aa)})(function(){function aa(R,H,h,k,q){for(;k>h;){if(600<k-h){var T=k-h+1,N=H-h+1,Q=Math.log(T),B=.5*Math.exp(2*Q/3);Q=.5*Math.sqrt(Q*B*(T-B)/T)*(0>N-T/2?-1:1);
aa(R,H,Math.max(h,Math.floor(H-N*B/T+Q)),Math.min(k,Math.floor(H+(T-N)*B/T+Q)),q)}T=R[H];N=h;B=k;S(R,h,H);for(0<q(R[k],T)&&S(R,h,k);N<B;){S(R,N,B);N++;for(B--;0>q(R[N],T);)N++;for(;0<q(R[B],T);)B--}0===q(R[h],T)?S(R,h,B):(B++,S(R,B,k));B<=H&&(h=B+1);H<=B&&(k=B-1)}}function S(R,H,h){var k=R[H];R[H]=R[h];R[h]=k}function P(R,H){return R<H?-1:R>H?1:0}return function(R,H,h,k,q){aa(R,H,h||0,k||R.length-1,q||P)}})})({get exports(){return f},set exports(ia){f=ia}});l.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,f,ia,aa,S){l.optimizedFeatureQueryEngineAdapter={getObjectId(P){return P.objectId},getAttributes(P){return P.attributes},getAttribute(P,R){return P.attributes[R]},cloneWithGeometry(P,R){return new aa.OptimizedFeature(R,P.attributes,null,P.objectId)},getGeometry(P){return P.geometry},getCentroid(P,R){f.isNone(P.centroid)&&(P.centroid=ia.getCentroidOptimizedGeometry(new S,P.geometry,R.hasZ,R.hasM));return P.centroid}};
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(l,f){function ia(S,P,R,H,h,k,q=1){k=h?k?4:3:k?3:2;let T=R,N=R+k,Q=0,B=0,e=R=0,u=0;for(let M=0,L=H-1;M<L;M++,T+=k,N+=k){H=P[T];const v=P[T+1],K=P[T+2],F=P[N],n=P[N+1],C=P[N+2];let w=H*n-F*v;e+=w;Q+=(H+F)*w;B+=(v+n)*w;h&&(w=H*C-F*K,R+=(K+C)*w,u+=w);H<S[0]&&(S[0]=H);H>S[1]&&(S[1]=H);v<S[2]&&(S[2]=v);v>S[3]&&(S[3]=v);h&&(K<S[4]&&(S[4]=K),K>S[5]&&(S[5]=
K))}0<e*q&&(e*=-1);0<u*q&&(u*=-1);if(!e)return null;S=[Q,B,.5*e];h&&(S[3]=R,S[4]=.5*u);return S}function aa(S,P,R,H,h){h=H?h?4:3:h?3:2;let k=P,q=P+h,T=0,N=0,Q=0,B=0;for(let L=0,v=R-1;L<v;L++,k+=h,q+=h){var e=S[k];const K=S[k+1],F=S[k+2],n=S[q],C=S[q+1],w=S[q+2];if(H){var u=n-e;var M=C-K;const D=w-F;u=Math.sqrt(u*u+M*M+D*D)}else u=n-e,M=C-K,u=Math.sqrt(u*u+M*M);u&&(T+=u,H?(e=[e+.5*(n-e),K+.5*(C-K),F+.5*(w-F)],N+=u*e[0],Q+=u*e[1],B+=u*e[2]):(e=[e+.5*(n-e),K+.5*(C-K)],N+=u*e[0],Q+=u*e[1]))}return 0<
T?H?[N/T,Q/T,B/T]:[N/T,Q/T]:0<R?H?[S[P],S[P+1],S[P+2]]:[S[P],S[P+1]]:null}l.getCentroidOptimizedGeometry=function(S,P,R,H,h){if(f.isNone(P)||!P.lengths.length)return null;const k="upperLeft"===h?.originPosition?-1:1;S.lengths.length&&(S.lengths.length=0);S.coords.length&&(S.coords.length=0);h=S.coords;const q=[],T=R?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:N,coords:Q}=P,B=R?H?4:3:H?3:2;let e=0;for(var u of N){const M=ia(T,Q,e,u,R,H,k);M&&q.push(M);e+=u*B}q.sort((M,L)=>{let v=k*M[2]-k*L[2];0===v&&R&&(v=M[4]-L[4]);return v});q.length&&(u=6*q[0][2],h[0]=q[0][0]/u,h[1]=q[0][1]/u,R&&(u=6*q[0][4],h[2]=0!==u?q[0][3]/u:0),h[0]<T[0]||h[0]>T[1]||h[1]<T[2]||h[1]>T[3]||R&&(h[2]<T[4]||h[2]>T[5]))&&(h.length=0);if(!h.length)if(P=P.lengths[0]?aa(Q,0,N[0],R,H):null)h[0]=P[0],h[1]=P[1],R&&2<P.length&&(h[2]=
P[2]);else return null;return S};l.lineCentroid=aa;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k,q,T,N){async function Q(w,D,z){if(!w)return null;var {where:x}=w;w.where=x=x&&x.trim();if(!x||/^1 *= *1$/.test(x)||D&&D===x)w.where=null;if(!w.geometry)return w;D=await e(w);w.distance=0;w.units=null;"esriSpatialRelEnvelopeIntersects"===w.spatialRel&&({spatialReference:x}=w.geometry,D=R.getGeometryExtent(D),D.spatialReference=x);if(D){await N.checkProjectionSupport(D.spatialReference,z);x=D.spatialReference;D=B(D,z)&&H.isExtent(D)?{spatialReference:x,rings:[[[D.xmin,
D.ymin],[D.xmin,D.ymax],[D.xmax,D.ymax],[D.xmax,D.ymin],[D.xmin,D.ymin]]]}:D;x=(await h.normalizeCentralMeridian(H.fromJSON(D)))[0];if(aa.isNone(x))throw L;const E="quantizationParameters"in w&&w.quantizationParameters?.tolerance||"maxAllowableOffset"in w&&w.maxAllowableOffset||0;D=E&&B(D,z)?{densificationStep:8*E}:void 0;x=x.toJSON();D=await N.project(x,x.spatialReference,z,D);if(!D)throw L;D.spatialReference=z;w.geometry=D}return w}function B(w,D){if(!w)return!1;const z=w.spatialReference;return(H.isExtent(w)||
H.isPolygon(w)||H.isPolyline(w))&&!k.equals(z,D)&&!P.canProjectWithoutEngine(z,D)}async function e(w){const {distance:D,units:z}=w,x=w.geometry;if(null==D||"vertexAttributes"in x)return x;var E=x.spatialReference;w=z?M.fromJSON(z):S.getUnitString(E);E=E&&(k.isGeographic(E)||k.isWebMercator(E))?x:await N.checkProjectionSupport(E,k.WGS84).then(()=>N.project(x,k.WGS84));return(await u())(E.spatialReference,E,D,w)}async function u(){return(await new Promise((w,D)=>l(["../../../geometry/geometryEngineJSON"],
w,D))).geodesicBuffer}const M=new ia.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),L=Object.freeze({}),v=new T,K=new T,F=new T,n={esriGeometryPoint:q.convertToPoint,esriGeometryPolyline:q.convertToPolyline,esriGeometryPolygon:q.convertToPolygon,esriGeometryMultipoint:q.convertToMultipoint},C=(w,D)=>"_geVersion"!==w?D:void 0;f.QUERY_ENGINE_EMPTY_RESULT=
L;f.cleanFromGeometryEngine=function(w){return w&&"_geVersion"in w?JSON.parse(JSON.stringify(w,C)):w};f.getGeometry=function(w,D,z,x,E,ca,J=D,G=z){const p=D&&J,t=z&&G;x=aa.isSome(x)?"coords"in x?x:x.geometry:null;if(aa.isNone(x))return null;if(E)return D=q.generalizeOptimizedGeometry(K,x,D,z,w,E,J,G),ca&&(D=q.quantizeOptimizedGeometry(F,D,p,t,w,ca)),n[w]?.(D,p,t)??null;if(ca)return ca=q.quantizeOptimizedGeometry(F,x,D,z,w,ca,J,G),n[w]?.(ca,p,t)??null;q.removeZMValues(v,x,D,z,J,G);return n[w]?.(v,
p,t)??null};f.normalizeQuery=async function(w,D,z){const {outFields:x,orderByFields:E,groupByFieldsForStatistics:ca,outStatistics:J}=w;if(x)for(var G=0;G<x.length;G++)x[G]=x[G].trim();if(E)for(G=0;G<E.length;G++)E[G]=E[G].trim();if(ca)for(G=0;G<ca.length;G++)ca[G]=ca[G].trim();if(J)for(G=0;G<J.length;G++)J[G].onStatisticField&&(J[G].onStatisticField=J[G].onStatisticField.trim());w.geometry&&!w.outSR&&(w.outSR=w.geometry.spatialReference);return Q(w,D,z)};f.normalizeQueryLike=Q;f.transformCentroid=
function(w,D,z,x=w.hasZ,E=w.hasM){if(aa.isNone(D))return null;const ca=w.hasZ&&x,J=w.hasM&&E;return z?(w=q.quantizeOptimizedGeometry(F,D,w.hasZ,w.hasM,"esriGeometryPoint",z,x,E),q.convertToPoint(w,ca,J)):q.convertToPoint(D,ca,J)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k,q,T,N,Q,B,e,u,M,L,v,K,F,n,C,w,D,z){function x(){return!!ib&&u.isLoaded()}function E(U){P.isNone(hb)&&(hb=Promise.all([u.load(),(new Promise((ea,V)=>l(["../chunks/geometryEngineBase"],ea,V))).then(ea=>ea.geometryEngineBase),new Promise((ea,V)=>l(["./geometryAdapters/hydrated"],ea,V))]));return hb.then(([,ea,{hydratedAdapter:V}])=>{R.throwIfAborted(U);b=V;ib=ea.default;ib._enableProjection(u.pe);Rb.notify()})}function ca(U,ea,V=null,pa=null){return Array.isArray(U)?0===
U.length?[]:J(b,U,U[0].spatialReference,ea,V,pa):J(b,[U],U.spatialReference,ea,V,pa)[0]}function J(U,ea,V,pa,Ca=null,Ga=null){if(P.isNone(V)||P.isNone(pa))return ea;if(X(V,pa,Ca))return ea.map(Pa=>P.unwrap(ha(Pa,V,pa)));if(P.isNone(Ca)){const Pa=C.cacheKey(V,pa);void 0!==Ib[Pa]?Ca=Ib[Pa]:(Ca=p(V,pa,void 0),P.isNone(Ca)&&(Ca=new C),Ib[Pa]=Ca)}if(P.isNone(ib)||P.isNone(U))throw new nb;return P.isSome(Ga)?ib._project(U,ea,V,pa,Ca,Ga):ib._project(U,ea,V,pa,Ca)}function G(U,ea){if(!x())for(const V of U)if(P.isSome(V)&&
!w.equals(V.spatialReference,ea)&&w.isValid(V.spatialReference)&&w.isValid(ea)&&!X(V.spatialReference,ea))return h.trackAccess(Rb),{pending:E(),geometries:null};return{pending:null,geometries:U.map(V=>P.isNone(V)?null:w.equals(V.spatialReference,ea)?V:w.isValid(V.spatialReference)&&w.isValid(ea)?t(V,ea):null)}}function p(U,ea,V=null){if(P.isNone(U)||P.isNone(ea))return null;if(P.isNone(ib)||P.isNone(b))throw new nb;U=ib._getTransformation(b,U,ea,V,V?.spatialReference);return null!==U?C.fromGE(U):
null}function t(U,ea){try{const V=ca(U,ea);if(null==V)return null;"xmin"in U&&"xmin"in V&&(V.zmin=U.zmin,V.zmax=U.zmax);const pa=z.getGeometryZScaler(V.type,U.spatialReference,ea);P.isSome(pa)&&pa(V);return V}catch(V){if(!(V instanceof nb))throw V;return null}}function X(U,ea,V){return V?!1:w.equals(U,ea)?!0:w.isValid(U)&&w.isValid(ea)&&!!xa(U,ea,Yb)}function ha(U,ea,V){return U?"x"in U?va(U,ea,new M,V,0):"xmin"in U?Ja(U,ea,new B,V,0):"rings"in U?Ia(U,ea,new L,V,0):"paths"in U?Ha(U,ea,new v,V,0):
"points"in U?Da(U,ea,new e,V,0):null:null}function va(U,ea,V,pa,Ca){Za[0]=U.x;Za[1]=U.y;const Ga=U.z;Za[2]=void 0!==Ga?Ga:Ca;if(!Ua(Za,ea,0,Za,pa,0,1))return null;V.x=Za[0];V.y=Za[1];V.spatialReference=pa;void 0===Ga?(V.z=void 0,V.hasZ=!1):(V.z=Za[2],V.hasZ=!0);void 0===U.m?(V.m=void 0,V.hasM=!1):(V.m=U.m,V.hasM=!0);return V}function Da(U,ea,V,pa,Ca){const {points:Ga,hasZ:Pa,hasM:Xa}=U;U=[];const ob=Ga.length,mb=[];for(var lb of Ga)mb.push(lb[0],lb[1],Pa?lb[2]:Ca);if(!Ua(mb,ea,0,mb,pa,0,ob))return null;
for(ea=0;ea<ob;++ea){Ca=3*ea;lb=mb[Ca];const xb=mb[Ca+1];Pa&&Xa?U.push([lb,xb,mb[Ca+2],Ga[ea][3]]):Pa?U.push([lb,xb,mb[Ca+2]]):Xa?U.push([lb,xb,Ga[ea][2]]):U.push([lb,xb])}V.points=U;V.spatialReference=pa;V.hasZ=Pa;V.hasM=Xa;return V}function Ha(U,ea,V,pa,Ca){const {paths:Ga,hasZ:Pa,hasM:Xa}=U;U=[];if(!gb(Ga,Pa??!1,Xa??!1,ea,U,pa,Ca))return null;V.paths=U;V.spatialReference=pa;V.hasZ=Pa;V.hasM=Xa;return V}function Ia(U,ea,V,pa,Ca){const {rings:Ga,hasZ:Pa,hasM:Xa}=U;U=[];if(!gb(Ga,Pa??!1,Xa??!1,ea,
U,pa,Ca))return null;V.rings=U;V.spatialReference=pa;V.hasZ=Pa;V.hasM=Xa;return V}function Ja(U,ea,V,pa,Ca){const {xmin:Ga,ymin:Pa,xmax:Xa,ymax:ob,hasZ:mb,hasM:lb}=U;if(!Ma(Ga,Pa,mb?U.zmin:Ca,ea,Za,pa))return null;V.xmin=Za[0];V.ymin=Za[1];mb&&(V.zmin=Za[2]);if(!Ma(Xa,ob,mb?U.zmax:Ca,ea,Za,pa))return null;V.xmax=Za[0];V.ymax=Za[1];mb&&(V.zmax=Za[2]);lb&&(V.mmin=U.mmin,V.mmax=U.mmax);V.spatialReference=pa;return V}function Ma(U,ea,V,pa,Ca,Ga){kb[0]=U;kb[1]=ea;kb[2]=V;return Ua(kb,pa,0,Ca,Ga,0,1)}function Wa(U,
ea,V,pa){if(P.isNone(ea)||P.isNone(pa)||2>U.length)return!1;2===U.length&&(kb[0]=U[0],kb[1]=U[1],kb[2]=0,U=kb);return Ua(U,ea,0,V,pa,0,1)}function Ya(U,ea,V){if(P.isNone(ea))return!1;ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(P.isNone(ea))return!1;ea(U,0,kb,0);V!==kb&&(V[0]=kb[0],V[1]=kb[1],2<V.length&&(V[2]=kb[2]));return!0}function Ua(U,ea,V,pa,Ca,Ga,Pa=1){ea=xa(ea,Ca,Yb);if(P.isNone(ea))return!1;if(ea===m){if(U===pa&&V===Ga)return!0;Pa=V+3*Pa;for(let Xa=V,ob=Ga;Xa<Pa;Xa++,ob++)pa[ob]=
U[Xa];return!0}Pa=V+3*Pa;for(let Xa=V,ob=Ga;Xa<Pa;Xa+=3,ob+=3)ea(U,Xa,pa,ob);return!0}function gb(U,ea,V,pa,Ca,Ga,Pa=0){const Xa=[];for(const ob of U)for(const mb of ob)Xa.push(mb[0],mb[1],ea?mb[2]:Pa);if(!Ua(Xa,pa,0,Xa,Ga,0,Xa.length/3))return!1;pa=0;Ca.length=0;for(const ob of U){U=[];for(const mb of ob)ea&&V?U.push([Xa[pa++],Xa[pa++],Xa[pa++],mb[3]]):ea?U.push([Xa[pa++],Xa[pa++],Xa[pa++]]):(V?U.push([Xa[pa++],Xa[pa++],mb[2]]):U.push([Xa[pa++],Xa[pa++]]),pa++);Ca.push(U)}return!0}function na(U,
ea,V,pa){ea=pa+ea;if(ea<pa/2||V>ea)return Number.MAX_VALUE;U=Math.abs(Eb*U)+Math.asin(V/ea);return U>=Math.PI/2?Number.MAX_VALUE:V/Math.cos(U)}function ra(U,ea,V){const pa=Math.sin(U);U=Math.cos(U);const Ca=Math.sin(ea);ea=Math.cos(ea);V[0]=-pa;V[4]=-Ca*U;V[8]=ea*U;V[12]=0;V[1]=U;V[5]=-Ca*pa;V[9]=ea*pa;V[13]=0;V[2]=0;V[6]=ea;V[10]=Ca;V[14]=0;V[3]=0;V[7]=0;V[11]=0;V[15]=1;return V}function Aa(U,ea,V){ra(U,ea,V);q.transpose(V,V);return V}function c(U,ea){if(!U)return la.UNKNOWN;if(ea.spatialReference===
U)return ea.spatialReferenceId;ea.spatialReference=U;"metersPerUnit"in ea&&(ea.metersPerUnit=H.getMetersPerUnitForSR(U,1));return U.wkt===Q.SphericalECEFSpatialReferenceLike.wkt?ea.spatialReferenceId=la.SPHERICAL_ECEF:w.isWGS84(U)?ea.spatialReferenceId=la.WGS84:w.isWebMercator(U)?ea.spatialReferenceId=la.WEB_MERCATOR:w.isPlateCarree(U)?ea.spatialReferenceId=la.PLATE_CARREE:U.wkt===Q.WGS84ECEFSpatialReferenceLike.wkt?ea.spatialReferenceId=la.WGS84_ECEF:U.wkid===D.SupportedGCSWkids.CGCS2000?ea.spatialReferenceId=
la.CGCS2000:U.wkt===Q.SphericalPCPFMarsLike.wkt?ea.spatialReferenceId=la.SPHERICAL_MARS_PCPF:U.wkt===Q.SphericalPCPFMoonLike.wkt?ea.spatialReferenceId=la.SPHERICAL_MOON_PCPF:w.isMars(U)?ea.spatialReferenceId=la.GCSMARS2000:w.isMoon(U)?ea.spatialReferenceId=la.GCSMOON2000:ea.spatialReferenceId=la.UNKNOWN}function m(U,ea,V,pa){U!==V&&(V[pa++]=U[ea++],V[pa++]=U[ea++],V[pa]=U[ea])}function da(U,ea,V,pa){V[pa++]=Sb*(U[ea++]/F.earth.radius);V[pa++]=Sb*(Math.PI/2-2*Math.atan(Math.exp(-U[ea++]/F.earth.radius)));
V[pa]=U[ea]}function ka(U,ea,V,pa){da(U,ea,V,pa);ua(V,pa,V,pa)}function sa(U,ea,V,pa){da(U,ea,V,pa);Sa(V,pa,V,pa)}function y(U,ea,V,pa,Ca){var Ga=.4999999*Math.PI;Ga=S.clamp(Eb*U[ea+1],-Ga,Ga);Ga=Math.sin(Ga);V[pa++]=Eb*U[ea]*Ca.radius;V[pa++]=Ca.halfSemiMajorAxis*Math.log((1+Ga)/(1-Ga));V[pa]=U[ea+2]}function O(U,ea,V,pa){y(U,ea,V,pa,F.earth)}function Z(U,ea,V,pa){V[pa]=U[ea]*hc;V[pa+1]=U[ea+1]*hc;V[pa+2]=U[ea+2]}function W(U,ea,V,pa){V[pa]=U[ea]*Tb;V[pa+1]=U[ea+1]*Tb;V[pa+2]=U[ea+2]}function fa(U,
ea,V,pa){da(U,ea,V,pa);Z(V,pa,V,pa)}function ma(U,ea,V,pa,Ca){Ca+=U[ea+2];const Ga=Eb*U[ea+1];U=Eb*U[ea];ea=Math.cos(Ga);V[pa++]=Math.cos(U)*ea*Ca;V[pa++]=Math.sin(U)*ea*Ca;V[pa]=Math.sin(Ga)*Ca}function oa(U,ea,V,pa){ma(U,ea,V,pa,F.moon.radius)}function wa(U,ea,V,pa){ma(U,ea,V,pa,F.mars.radius)}function ua(U,ea,V,pa){ma(U,ea,V,pa,F.earth.radius)}function Ea(U,ea,V,pa,Ca){var Ga=U[ea];const Pa=U[ea+1];ea=U[ea+2];U=Math.sqrt(Ga*Ga+Pa*Pa+ea*ea);ea=S.asinClamped(ea/(0===U?1:U));Ga=Math.atan2(Pa,Ga);
V[pa++]=Sb*Ga;V[pa++]=Sb*ea;V[pa]=U-Ca}function Ba(U,ea,V,pa){Ea(U,ea,V,pa,F.moon.radius)}function Fa(U,ea,V,pa){Ea(U,ea,V,pa,F.mars.radius)}function Ra(U,ea,V,pa){Ea(U,ea,V,pa,F.earth.radius)}function Oa(U,ea,V,pa){Ra(U,ea,V,pa);O(V,pa,V,pa)}function Ta(U,ea,V,pa){Ra(U,ea,V,pa);Sa(V,pa,V,pa)}function Sa(U,ea,V,pa){var Ca=F.earth;const Ga=Eb*U[ea];var Pa=Eb*U[ea+1];U=U[ea+2];ea=Math.sin(Pa);Pa=Math.cos(Pa);const Xa=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ea*ea);V[pa++]=(Xa+U)*Pa*Math.cos(Ga);
V[pa++]=(Xa+U)*Pa*Math.sin(Ga);V[pa++]=(Xa*(1-Ca.eccentricitySquared)+U)*ea}function La(U,ea,V,pa){var Ca=n.earthEllipsoidConstants,Ga=U[ea],Pa=U[ea+1];U=U[ea+2];let Xa;ea=Math.abs(U);var ob=Ga*Ga+Pa*Pa;var mb=Math.sqrt(ob);var lb=ob+U*U;var xb=Math.sqrt(lb);Ga=Math.atan2(Pa,Ga);var Kb=U*U/lb;lb=ob/lb;Pa=Ca.a2/xb;ob=Ca.a3-Ca.a4/xb;.3<lb?(Kb=ea/xb*(1+lb*(Ca.a1+Pa+Kb*ob)/xb),xb=Math.asin(Kb),Pa=Kb*Kb,lb=Math.sqrt(1-Pa)):(lb=mb/xb*(1-Kb*(Ca.a5-Pa-lb*ob)/xb),xb=Math.acos(lb),Pa=1-lb*lb,Kb=Math.sqrt(Pa));
Xa=1-F.earth.eccentricitySquared*Pa;Pa=F.earth.radius/Math.sqrt(Xa);Ca=Ca.a6*Pa;Pa=mb-Pa*lb;ob=ea-Ca*Kb;ea=lb*Pa+Kb*ob;mb=lb*ob-Kb*Pa;Ca=mb/(Ca/Xa+ea);xb+=Ca;0>U&&(xb=-xb);V[pa++]=Sb*Ga;V[pa++]=Sb*xb;V[pa]=ea+mb*Ca/2}function Va(U,ea,V,pa){La(U,ea,V,pa);ua(V,pa,V,pa)}function ab(U,ea,V,pa){La(U,ea,V,pa);O(V,pa,V,pa)}function xa(U,ea,V=sb()){return P.isNone(U)||P.isNone(ea)?null:wb(U,ea,V).projector}function wb(U,ea,V){if(P.isNone(U)||P.isNone(ea)||V.source.spatialReference===U&&V.dest.spatialReference===
ea)return V;const pa=c(U,V.source),Ca=c(ea,V.dest);pa===la.UNKNOWN&&Ca===la.UNKNOWN?w.equals(U,ea)?V.projector=m:V.projector=null:V.projector=Db[pa][Ca];return V}function sb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:m}}let ib=null,b=null,hb=null,Ib={};const Rb=new k.SimpleObservable;let nb=function(U){function ea(){return V.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}
ia._inherits(ea,U);var V=ia._createSuper(ea);return ia._createClass(ea)}(aa);var la;(function(U){U[U.UNKNOWN=0]="UNKNOWN";U[U.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";U[U.WGS84=2]="WGS84";U[U.WEB_MERCATOR=3]="WEB_MERCATOR";U[U.WGS84_ECEF=4]="WGS84_ECEF";U[U.CGCS2000=5]="CGCS2000";U[U.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";U[U.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";U[U.GCSMARS2000=8]="GCSMARS2000";U[U.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";U[U.GCSMOON2000=10]="GCSMOON2000";U[U.LON_LAT=
11]="LON_LAT";U[U.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const hc=F.earth.radius*Math.PI/180,Tb=180/(F.earth.radius*Math.PI),Db={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:O,[la.PLATE_CARREE]:Z,[la.WGS84]:m,[la.WGS84_ECEF]:Sa},[la.CGCS2000]:{[la.CGCS2000]:m,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:Z,[la.WGS84]:null,[la.WGS84_ECEF]:Sa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:m,[la.GCSMOON2000]:null,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:m,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:da,[la.WGS84_COMPARABLE_LON_LAT]:da,[la.SPHERICAL_ECEF]:ka,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:m,[la.PLATE_CARREE]:fa,[la.WGS84]:da,[la.WGS84_ECEF]:sa},[la.WGS84_ECEF]:{[la.CGCS2000]:La,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:La,[la.WGS84_COMPARABLE_LON_LAT]:La,[la.SPHERICAL_ECEF]:Va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(U,ea,V,pa){La(U,ea,V,pa);Z(V,pa,V,pa)},[la.WGS84]:La,[la.WGS84_ECEF]:m},
[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ra,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ra,[la.WGS84_COMPARABLE_LON_LAT]:Ra,[la.SPHERICAL_ECEF]:m,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Oa,[la.PLATE_CARREE]:function(U,ea,V,pa){Ra(U,ea,V,pa);Z(V,pa,V,pa)},[la.WGS84]:Ra,[la.WGS84_ECEF]:Ta},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Fa,[la.GCSMOON2000]:null,[la.LON_LAT]:Fa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:m,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ba,[la.LON_LAT]:Ba,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:m,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:m,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:m,[la.GCSMARS2000]:m,[la.GCSMOON2000]:m,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:O,
[la.PLATE_CARREE]:Z,[la.WGS84]:m,[la.WGS84_ECEF]:Sa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:Z,[la.WGS84]:m,[la.WGS84_ECEF]:Sa},[la.PLATE_CARREE]:{[la.CGCS2000]:W,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:W,[la.WGS84_COMPARABLE_LON_LAT]:W,[la.SPHERICAL_ECEF]:function(U,
ea,V,pa){W(U,ea,V,pa);ua(V,pa,V,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(U,ea,V,pa){W(U,ea,V,pa);O(V,pa,V,pa)},[la.PLATE_CARREE]:m,[la.WGS84]:W,[la.WGS84_ECEF]:function(U,ea,V,pa){W(U,ea,V,pa);Sa(V,pa,V,pa)}}},Jb={spatialReference:null,spatialReferenceId:la.UNKNOWN},ac={spatialReference:null,spatialReferenceId:la.UNKNOWN},Yb=sb(),ic=sb(),Eb=S.deg2rad(1),Sb=S.rad2deg(1),kb=N.create(),Gb=N.create(),Hb=N.create(),Za=N.create(),bc=N.create();
f.canProjectToWGS84ComparableLonLat=function(U){if(P.isNone(U))return!1;U=c(U,Jb);return!!Db[U][la.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=X;f.computeENUToSphericalPCPFLocalRotation=ra;f.computeSphericalPCPFToENULocalRotation=Aa;f.computeTranslationToOriginAndRotation=function(U,ea,V,pa){if(P.isNone(U)||P.isNone(pa))return!1;var Ca=c(U,Jb),Ga=c(pa,ac);if(Ca===Ga&&Ga!==la.SPHERICAL_ECEF&&Ga!==la.SPHERICAL_MARS_PCPF&&Ga!==la.SPHERICAL_MOON_PCPF&&(Ca!==la.UNKNOWN||w.equals(U,pa)))return q.fromTranslation(V,
ea),!0;if(Ga===la.SPHERICAL_ECEF||Ga===la.SPHERICAL_MARS_PCPF||Ga===la.SPHERICAL_MOON_PCPF){Ca=Db[Ca][la.LON_LAT];Ga=Db[la.LON_LAT][Ga];if(P.isNone(Ca)||P.isNone(Ga))return!1;Ca(ea,0,Gb,0);Ga(Gb,0,Hb,0);ra(Eb*Gb[0],Eb*Gb[1],V);V[12]=Hb[0];V[13]=Hb[1];V[14]=Hb[2];return!0}if((Ga===la.WEB_MERCATOR||Ga===la.PLATE_CARREE)&&(Ca===la.WGS84||Ca===la.CGCS2000&&Ga===la.PLATE_CARREE||Ca===la.SPHERICAL_ECEF||Ca===la.WEB_MERCATOR)){U=Db[Ca][la.LON_LAT];Ga=Db[la.LON_LAT][Ga];if(P.isNone(U)||P.isNone(Ga))return!1;
U(ea,0,Gb,0);Ga(Gb,0,Hb,0);Ca===la.SPHERICAL_ECEF?Aa(Eb*Gb[0],Eb*Gb[1],V):q.identity(V);V[12]=Hb[0];V[13]=Hb[1];V[14]=Hb[2];return!0}return!1};f.getProjectorName=function(U,ea){switch(xa(U,ea,Yb)){case m:return"copy3";case ua:return"wgs84ToSphericalECEF";case O:return"wgs84ToWebMercator";case Z:return"wgs84ToPlateCarree";case Sa:return"wgs84ToWGS84ECEF";case da:return"webMercatorToWGS84";case ka:return"webMercatorToSphericalECEF";case sa:return"webMercatorToWGS84ECEF";case fa:return"webMercatorToPlateCarree";
case La:return"wgs84ECEFToWGS84";case Va:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ra:return"sphericalECEFToWGS84";case Oa:return"sphericalECEFToWebMercator";case Fa:return"sphericalMarsPCPFToMars2000";case Ba:return"sphericalMoonPCPFToMoon2000";case Ta:return"sphericalECEFToWGS84ECEF";case wa:return"mars2000ToSphericalPCPF";case oa:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=p;f.getTransformations=function(U,ea,V=null){if(P.isNone(ib)||
P.isNone(b))throw new nb;U=ib._getTransformationBySuitability(b,U,ea,V,V?.spatialReference);if(null!==U){ea=[];for(const pa of U)ea.push(C.fromGE(pa));return ea}return[]};f.initializeProjection=async function(U,ea,V,pa){if(x())return R.waitTick(pa);if(Array.isArray(U))for(const {source:Ca,dest:Ga,geographicTransformation:Pa}of U){if(!X(Ca,Ga,Pa))return E(pa)}else if(!X(U,ea,V))return E(pa);return R.waitTick(pa)};f.isLoaded=x;f.load=E;f.localLinearScaleFactors=function(U,ea,V,pa){if(P.isNone(ea)||
P.isNone(pa))return!1;const Ca=c(ea,Jb);var Ga=c(pa,ac);if(Ca===Ga&&Ca!==la.UNKNOWN||w.equals(ea,pa))return V[0]=1,V[1]=1,V[2]=1,!0;if(Ca===la.SPHERICAL_ECEF){ea=T.length(U);U=ea/Math.sqrt(U[0]*U[0]+U[1]*U[1]);ea/=F.earth.radius;if(Ga===la.WEB_MERCATOR)return V[0]=U*ea,V[1]=U*ea,V[2]=1,!0;if(Ga===la.WGS84||Ga===la.CGCS2000)return Ga=Tb,V[0]=Ga*U*ea,V[1]=Ga*ea,V[2]=1,!0}else if(Ca===la.PLATE_CARREE){if(Ga===la.WGS84||Ga===la.CGCS2000)return V[0]=Tb,V[1]=Tb,V[2]=1,!0;if(Ga===la.WEB_MERCATOR)return Ga=
U[1]/F.earth.radius,V[0]=1,V[1]=1/Math.cos(Ga),V[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(U,ea,V,pa){const Ca=Math.cos(V);U[0]=Math.cos(ea)*Ca*pa;U[1]=Math.sin(ea)*Ca*pa;U[2]=Math.sin(V)*pa};f.lonLatToWebMercatorComparable=y;f.project=ca;f.projectBoundingRect=function(U,ea,V,pa){if(null==U)return!1;if(w.equals(ea,pa))return K.copy(V,U),!0;kb[0]=U[0];kb[1]=U[1];kb[2]=0;if(!Ua(kb,ea,0,kb,pa,0,1))return!1;V[0]=kb[0];V[1]=kb[1];kb[0]=U[2];kb[1]=U[3];kb[2]=0;if(!Ua(kb,ea,0,kb,pa,0,1))return!1;
V[2]=kb[0];V[3]=kb[1];return!0};f.projectBoundingSphere=function(U,ea,V,pa){if(P.isNone(ea)||P.isNone(pa))return!1;ea=wb(ea,pa,ic);if(ea.projector===m)return V[0]=U[0],V[1]=U[1],V[2]=U[2],V[3]=U[3],!0;if(P.isNone(ea.projector))return!1;const {source:Ca,dest:Ga}=ea;if(Ga.spatialReferenceId===la.WEB_MERCATOR){ea=Db[Ca.spatialReferenceId][la.WGS84];if(P.isNone(ea))return!1;ea(U,0,Gb,0);O(Gb,0,V,0);V[3]=na(Gb[1],U[2],U[3],F.earth.radius);return!0}if(Ca.spatialReferenceId!==la.WGS84&&Ca.spatialReferenceId!==
la.CGCS2000||Ga.spatialReferenceId!==la.PLATE_CARREE)ea.projector(U,0,V,0),V[3]=U[3]*(Ca.metersPerUnit??1)/(Ga.metersPerUnit??1);else{pa=Db[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Pa=U[3];P.isSome(Db[Ca.spatialReferenceId][la.SPHERICAL_ECEF])&&P.isSome(pa)&&(Pa=na(U[1],U[2],U[3],F.earth.radius));ea.projector(U,0,V,0);V[3]=Pa}return!0};f.projectBuffer=Ua;f.projectDirection=function(U,ea,V,pa,Ca){T.copy(Za,U);T.add(bc,U,ea);Wa(Za,V,Za,Ca);Wa(bc,V,bc,Ca);T.subtract(pa,bc,Za);T.normalize(pa,pa)};f.projectExtent=
function(U,ea,V=ea.spatialReference,pa=0){return P.isSome(U.spatialReference)&&P.isSome(V)&&P.isSome(Ja(U,U.spatialReference,ea,V,pa))};f.projectMany=J;f.projectMultipoint=function(U,ea,V=ea.spatialReference,pa=0){return P.isSome(U.spatialReference)&&P.isSome(V)&&P.isSome(Da(U,U.spatialReference,ea,V,pa))};f.projectOrLoad=function(U,ea){U=G([U],ea);return P.isSome(U.pending)?{pending:U.pending,geometry:null}:P.isSome(U.geometries)?{pending:null,geometry:U.geometries[0]}:{pending:null,geometry:null}};
f.projectOrLoadMany=G;f.projectPoint=function(U,ea,V=ea.spatialReference,pa=0){return P.isSome(V)&&P.isSome(U.spatialReference)&&P.isSome(va(U,U.spatialReference,ea,V,pa))};f.projectPointToVector=function(U,ea,V,pa=0){Za[0]=U.x;Za[1]=U.y;const Ca=U.z;Za[2]=void 0!==Ca?Ca:pa;return Ua(Za,U.spatialReference,0,ea,V,0,1)};f.projectPointToWGS84ComparableLonLat=function(U,ea){Za[0]=U.x;Za[1]=U.y;const V=U.z;Za[2]=void 0!==V?V:0;return Ya(Za,U.spatialReference,ea)};f.projectPolygon=function(U,ea,V=ea.spatialReference,
pa=0){return P.isSome(U.spatialReference)&&P.isSome(V)&&P.isSome(Ia(U,U.spatialReference,ea,V,pa))};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:U,spatialReference:ea,rings:V},pa,Ca=0){ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(P.isNone(ea))return!1;U=U?Ga=>Ga:Ga=>T.set(Za,Ga[0],Ga[1],Ca);for(const Ga of V){V=[];for(const Pa of Ga){const Xa=[0,0,Ca];ea(U(Pa),0,Xa,0);V.push(Xa)}pa.push(V)}return!0};f.projectPolyline=function(U,ea,V=ea.spatialReference,pa=0){return P.isSome(U.spatialReference)&&
P.isSome(V)&&P.isSome(Ha(U,U.spatialReference,ea,V,pa))};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:U,spatialReference:ea,paths:V},pa,Ca=0){ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(P.isNone(ea))return!1;U=U?Ga=>Ga:Ga=>T.set(Za,Ga[0],Ga[1],Ca);for(const Ga of V){V=[];for(const Pa of Ga){const Xa=[0,0,Ca];ea(U(Pa),0,Xa,0);V.push(Xa)}pa.push(V)}return!0};f.projectVectorToDehydratedPoint=function(U,ea,V){return Ua(U,ea,0,Za,V.spatialReference,0,1)?(V.x=Za[0],V.y=Za[1],V.z=Za[2],
V):null};f.projectVectorToPoint=function(U,ea,V){if(P.isNone(ea)||P.isNone(V))return null;const pa=new M({spatialReference:V});return Ua(U,ea,0,Za,V,0,1)?(pa.x=Za[0],pa.y=Za[1],pa.z=Za[2],pa):null};f.projectVectorToVector=Wa;f.projectVectorToWGS84ComparableLonLat=function(U,ea,V){return Ya(U,ea,V)};f.projectWithoutEngine=ha;f.projectXYZToVector=Ma;f.sphericalPCPFtoLonLatElevation=Ea;f.test={get loadPromise(){return hb}};f.tryProjectWithZConversion=t;f.unload=function(){hb=b=ib=null;Ib={}};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(l,f,ia){ia=function(aa){function S(){return P.apply(this,arguments)}f._inherits(S,aa);var P=f._createSuper(S);S.prototype.notify=function(){var R=this._observers;if(R&&0<R.length){R=R.slice();for(const H of R)H.onInvalidated(),H.onCommitted()}};return f._createClass(S)}(ia.ObservableBase);l.SimpleObservable=
ia;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,f,ia){function aa(c,m){c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=m[3];c[4]=m[4];c[5]=m[5];c[6]=m[6];c[7]=m[7];c[8]=m[8];c[9]=m[9];c[10]=m[10];c[11]=m[11];c[12]=m[12];c[13]=m[13];c[14]=m[14];c[15]=m[15];return c}function S(c,m,da,ka,sa,y,O,Z,W,fa,ma,oa,wa,ua,Ea,Ba,Fa){c[0]=m;c[1]=da;c[2]=ka;c[3]=sa;c[4]=y;c[5]=O;c[6]=Z;c[7]=W;c[8]=fa;c[9]=ma;c[10]=oa;c[11]=
wa;c[12]=ua;c[13]=Ea;c[14]=Ba;c[15]=Fa;return c}function P(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function R(c,m){if(c===m){const da=m[1],ka=m[2],sa=m[3],y=m[6],O=m[7],Z=m[11];c[1]=m[4];c[2]=m[8];c[3]=m[12];c[4]=da;c[6]=m[9];c[7]=m[13];c[8]=ka;c[9]=y;c[11]=m[14];c[12]=sa;c[13]=O;c[14]=Z}else c[0]=m[0],c[1]=m[4],c[2]=m[8],c[3]=m[12],c[4]=m[1],c[5]=m[5],c[6]=m[9],c[7]=m[13],c[8]=m[2],c[9]=m[6],c[10]=m[10],c[11]=
m[14],c[12]=m[3],c[13]=m[7],c[14]=m[11],c[15]=m[15];return c}function H(c,m){h(c,m)||P(c);return c}function h(c,m){const da=m[0],ka=m[1],sa=m[2],y=m[3],O=m[4],Z=m[5],W=m[6],fa=m[7],ma=m[8],oa=m[9],wa=m[10],ua=m[11],Ea=m[12],Ba=m[13],Fa=m[14];m=m[15];const Ra=da*Z-ka*O,Oa=da*W-sa*O,Ta=da*fa-y*O,Sa=ka*W-sa*Z,La=ka*fa-y*Z,Va=sa*fa-y*W,ab=ma*Ba-oa*Ea,xa=ma*Fa-wa*Ea,wb=ma*m-ua*Ea,sb=oa*Fa-wa*Ba,ib=oa*m-ua*Ba,b=wa*m-ua*Fa;let hb=Ra*b-Oa*ib+Ta*sb+Sa*wb-La*xa+Va*ab;if(!hb)return null;hb=1/hb;c[0]=(Z*b-W*
ib+fa*sb)*hb;c[1]=(sa*ib-ka*b-y*sb)*hb;c[2]=(Ba*Va-Fa*La+m*Sa)*hb;c[3]=(wa*La-oa*Va-ua*Sa)*hb;c[4]=(W*wb-O*b-fa*xa)*hb;c[5]=(da*b-sa*wb+y*xa)*hb;c[6]=(Fa*Ta-Ea*Va-m*Oa)*hb;c[7]=(ma*Va-wa*Ta+ua*Oa)*hb;c[8]=(O*ib-Z*wb+fa*ab)*hb;c[9]=(ka*wb-da*ib-y*ab)*hb;c[10]=(Ea*La-Ba*Ta+m*Ra)*hb;c[11]=(oa*Ta-ma*La-ua*Ra)*hb;c[12]=(Z*xa-O*sb-W*ab)*hb;c[13]=(da*sb-ka*xa+sa*ab)*hb;c[14]=(Ba*Oa-Ea*Sa-Fa*Ra)*hb;c[15]=(ma*Sa-oa*Oa+wa*Ra)*hb;return c}function k(c,m){const da=m[0],ka=m[1],sa=m[2],y=m[3],O=m[4],Z=m[5],W=
m[6],fa=m[7],ma=m[8],oa=m[9],wa=m[10],ua=m[11],Ea=m[12],Ba=m[13],Fa=m[14];m=m[15];c[0]=Z*(wa*m-ua*Fa)-oa*(W*m-fa*Fa)+Ba*(W*ua-fa*wa);c[1]=-(ka*(wa*m-ua*Fa)-oa*(sa*m-y*Fa)+Ba*(sa*ua-y*wa));c[2]=ka*(W*m-fa*Fa)-Z*(sa*m-y*Fa)+Ba*(sa*fa-y*W);c[3]=-(ka*(W*ua-fa*wa)-Z*(sa*ua-y*wa)+oa*(sa*fa-y*W));c[4]=-(O*(wa*m-ua*Fa)-ma*(W*m-fa*Fa)+Ea*(W*ua-fa*wa));c[5]=da*(wa*m-ua*Fa)-ma*(sa*m-y*Fa)+Ea*(sa*ua-y*wa);c[6]=-(da*(W*m-fa*Fa)-O*(sa*m-y*Fa)+Ea*(sa*fa-y*W));c[7]=da*(W*ua-fa*wa)-O*(sa*ua-y*wa)+ma*(sa*fa-y*W);c[8]=
O*(oa*m-ua*Ba)-ma*(Z*m-fa*Ba)+Ea*(Z*ua-fa*oa);c[9]=-(da*(oa*m-ua*Ba)-ma*(ka*m-y*Ba)+Ea*(ka*ua-y*oa));c[10]=da*(Z*m-fa*Ba)-O*(ka*m-y*Ba)+Ea*(ka*fa-y*Z);c[11]=-(da*(Z*ua-fa*oa)-O*(ka*ua-y*oa)+ma*(ka*fa-y*Z));c[12]=-(O*(oa*Fa-wa*Ba)-ma*(Z*Fa-W*Ba)+Ea*(Z*wa-W*oa));c[13]=da*(oa*Fa-wa*Ba)-ma*(ka*Fa-sa*Ba)+Ea*(ka*wa-sa*oa);c[14]=-(da*(Z*Fa-W*Ba)-O*(ka*Fa-sa*Ba)+Ea*(ka*W-sa*Z));c[15]=da*(Z*wa-W*oa)-O*(ka*wa-sa*oa)+ma*(ka*W-sa*Z);return c}function q(c){const m=c[0],da=c[1],ka=c[2],sa=c[3],y=c[4],O=c[5],Z=
c[6],W=c[7],fa=c[8],ma=c[9],oa=c[10],wa=c[11],ua=c[12],Ea=c[13],Ba=c[14];c=c[15];return(m*O-da*y)*(oa*c-wa*Ba)-(m*Z-ka*y)*(ma*c-wa*Ea)+(m*W-sa*y)*(ma*Ba-oa*Ea)+(da*Z-ka*O)*(fa*c-wa*ua)-(da*W-sa*O)*(fa*Ba-oa*ua)+(ka*W-sa*Z)*(fa*Ea-ma*ua)}function T(c,m,da){const ka=m[0],sa=m[1],y=m[2],O=m[3],Z=m[4],W=m[5],fa=m[6],ma=m[7],oa=m[8],wa=m[9],ua=m[10],Ea=m[11],Ba=m[12],Fa=m[13],Ra=m[14];m=m[15];let Oa=da[0],Ta=da[1],Sa=da[2],La=da[3];c[0]=Oa*ka+Ta*Z+Sa*oa+La*Ba;c[1]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[2]=Oa*y+Ta*fa+
Sa*ua+La*Ra;c[3]=Oa*O+Ta*ma+Sa*Ea+La*m;Oa=da[4];Ta=da[5];Sa=da[6];La=da[7];c[4]=Oa*ka+Ta*Z+Sa*oa+La*Ba;c[5]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[6]=Oa*y+Ta*fa+Sa*ua+La*Ra;c[7]=Oa*O+Ta*ma+Sa*Ea+La*m;Oa=da[8];Ta=da[9];Sa=da[10];La=da[11];c[8]=Oa*ka+Ta*Z+Sa*oa+La*Ba;c[9]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[10]=Oa*y+Ta*fa+Sa*ua+La*Ra;c[11]=Oa*O+Ta*ma+Sa*Ea+La*m;Oa=da[12];Ta=da[13];Sa=da[14];La=da[15];c[12]=Oa*ka+Ta*Z+Sa*oa+La*Ba;c[13]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[14]=Oa*y+Ta*fa+Sa*ua+La*Ra;c[15]=Oa*O+Ta*ma+Sa*Ea+La*m;return c}
function N(c,m,da){const ka=da[0],sa=da[1];da=da[2];if(m===c)c[12]=m[0]*ka+m[4]*sa+m[8]*da+m[12],c[13]=m[1]*ka+m[5]*sa+m[9]*da+m[13],c[14]=m[2]*ka+m[6]*sa+m[10]*da+m[14],c[15]=m[3]*ka+m[7]*sa+m[11]*da+m[15];else{const y=m[0],O=m[1],Z=m[2],W=m[3],fa=m[4],ma=m[5],oa=m[6],wa=m[7],ua=m[8],Ea=m[9],Ba=m[10],Fa=m[11];c[0]=y;c[1]=O;c[2]=Z;c[3]=W;c[4]=fa;c[5]=ma;c[6]=oa;c[7]=wa;c[8]=ua;c[9]=Ea;c[10]=Ba;c[11]=Fa;c[12]=y*ka+fa*sa+ua*da+m[12];c[13]=O*ka+ma*sa+Ea*da+m[13];c[14]=Z*ka+oa*sa+Ba*da+m[14];c[15]=W*
ka+wa*sa+Fa*da+m[15]}return c}function Q(c,m,da){const ka=da[0],sa=da[1];da=da[2];c[0]=m[0]*ka;c[1]=m[1]*ka;c[2]=m[2]*ka;c[3]=m[3]*ka;c[4]=m[4]*sa;c[5]=m[5]*sa;c[6]=m[6]*sa;c[7]=m[7]*sa;c[8]=m[8]*da;c[9]=m[9]*da;c[10]=m[10]*da;c[11]=m[11]*da;c[12]=m[12];c[13]=m[13];c[14]=m[14];c[15]=m[15];return c}function B(c,m,da,ka){let sa=ka[0],y=ka[1];ka=ka[2];let O=Math.sqrt(sa*sa+y*y+ka*ka);var Z=void 0,W=void 0;let fa=void 0,ma=void 0,oa=void 0,wa=void 0,ua=void 0,Ea=void 0,Ba=void 0,Fa=void 0,Ra=void 0,Oa=
void 0,Ta=void 0,Sa=void 0,La=void 0,Va=void 0,ab=void 0,xa=void 0,wb=void 0,sb=void 0,ib=void 0,b=void 0;W=Z=void 0;if(O<ia.getEpsilon())return null;O=1/O;sa*=O;y*=O;ka*=O;Z=Math.sin(da);W=Math.cos(da);fa=1-W;ma=m[0];oa=m[1];wa=m[2];ua=m[3];Ea=m[4];Ba=m[5];Fa=m[6];Ra=m[7];Oa=m[8];Ta=m[9];Sa=m[10];La=m[11];Va=sa*sa*fa+W;ab=y*sa*fa+ka*Z;xa=ka*sa*fa-y*Z;wb=sa*y*fa-ka*Z;sb=y*y*fa+W;ib=ka*y*fa+sa*Z;b=sa*ka*fa+y*Z;Z=y*ka*fa-sa*Z;W=ka*ka*fa+W;c[0]=ma*Va+Ea*ab+Oa*xa;c[1]=oa*Va+Ba*ab+Ta*xa;c[2]=wa*Va+Fa*
ab+Sa*xa;c[3]=ua*Va+Ra*ab+La*xa;c[4]=ma*wb+Ea*sb+Oa*ib;c[5]=oa*wb+Ba*sb+Ta*ib;c[6]=wa*wb+Fa*sb+Sa*ib;c[7]=ua*wb+Ra*sb+La*ib;c[8]=ma*b+Ea*Z+Oa*W;c[9]=oa*b+Ba*Z+Ta*W;c[10]=wa*b+Fa*Z+Sa*W;c[11]=ua*b+Ra*Z+La*W;m!==c&&(c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);return c}function e(c,m,da){const ka=Math.sin(da);da=Math.cos(da);const sa=m[4],y=m[5],O=m[6],Z=m[7],W=m[8],fa=m[9],ma=m[10],oa=m[11];m!==c&&(c[0]=m[0],c[1]=m[1],c[2]=m[2],c[3]=m[3],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[4]=sa*
da+W*ka;c[5]=y*da+fa*ka;c[6]=O*da+ma*ka;c[7]=Z*da+oa*ka;c[8]=W*da-sa*ka;c[9]=fa*da-y*ka;c[10]=ma*da-O*ka;c[11]=oa*da-Z*ka;return c}function u(c,m,da){const ka=Math.sin(da);da=Math.cos(da);const sa=m[0],y=m[1],O=m[2],Z=m[3],W=m[8],fa=m[9],ma=m[10],oa=m[11];m!==c&&(c[4]=m[4],c[5]=m[5],c[6]=m[6],c[7]=m[7],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[0]=sa*da-W*ka;c[1]=y*da-fa*ka;c[2]=O*da-ma*ka;c[3]=Z*da-oa*ka;c[8]=sa*ka+W*da;c[9]=y*ka+fa*da;c[10]=O*ka+ma*da;c[11]=Z*ka+oa*da;return c}function M(c,
m,da){const ka=Math.sin(da);da=Math.cos(da);const sa=m[0],y=m[1],O=m[2],Z=m[3],W=m[4],fa=m[5],ma=m[6],oa=m[7];m!==c&&(c[8]=m[8],c[9]=m[9],c[10]=m[10],c[11]=m[11],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[0]=sa*da+W*ka;c[1]=y*da+fa*ka;c[2]=O*da+ma*ka;c[3]=Z*da+oa*ka;c[4]=W*da-sa*ka;c[5]=fa*da-y*ka;c[6]=ma*da-O*ka;c[7]=oa*da-Z*ka;return c}function L(c,m){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=m[0];c[13]=m[1];c[14]=m[2];c[15]=1;return c}function v(c,
m){c[0]=m[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=m[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function K(c,m,da){if(0===m)return P(c);let ka=da[0],sa=da[1];da=da[2];let y=Math.sqrt(ka*ka+sa*sa+da*da),O=void 0,Z=void 0,W=void 0;if(y<ia.getEpsilon())return null;y=1/y;ka*=y;sa*=y;da*=y;O=Math.sin(m);Z=Math.cos(m);W=1-Z;c[0]=ka*ka*W+Z;c[1]=sa*ka*W+da*O;c[2]=da*ka*W-sa*O;c[3]=0;c[4]=ka*sa*W-da*O;c[5]=sa*sa*W+Z;c[6]=da*sa*W+ka*O;c[7]=0;c[8]=ka*da*W+sa*O;c[9]=
sa*da*W-ka*O;c[10]=da*da*W+Z;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function F(c,m){const da=Math.sin(m);m=Math.cos(m);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m;c[6]=da;c[7]=0;c[8]=0;c[9]=-da;c[10]=m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function n(c,m){const da=Math.sin(m);m=Math.cos(m);c[0]=m;c[1]=0;c[2]=-da;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=da;c[9]=0;c[10]=m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function C(c,m){const da=Math.sin(m);m=Math.cos(m);c[0]=m;c[1]=
da;c[2]=0;c[3]=0;c[4]=-da;c[5]=m;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function w(c,m,da){var ka=m[0],sa=m[1],y=m[2],O=m[3],Z=ka+ka,W=sa+sa;const fa=y+y;m=ka*Z;const ma=ka*W;ka*=fa;const oa=sa*W;sa*=fa;y*=fa;Z*=O;W*=O;O*=fa;c[0]=1-(oa+y);c[1]=ma+O;c[2]=ka-W;c[3]=0;c[4]=ma-O;c[5]=1-(m+y);c[6]=sa+Z;c[7]=0;c[8]=ka+W;c[9]=sa-Z;c[10]=1-(m+oa);c[11]=0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function D(c,m){const da=Aa,ka=-m[0],sa=-m[1],y=-m[2],
O=m[3],Z=m[4],W=m[5],fa=m[6],ma=m[7],oa=ka*ka+sa*sa+y*y+O*O;0<oa?(da[0]=2*(Z*O+ma*ka+W*y-fa*sa)/oa,da[1]=2*(W*O+ma*sa+fa*ka-Z*y)/oa,da[2]=2*(fa*O+ma*y+Z*sa-W*ka)/oa):(da[0]=2*(Z*O+ma*ka+W*y-fa*sa),da[1]=2*(W*O+ma*sa+fa*ka-Z*y),da[2]=2*(fa*O+ma*y+Z*sa-W*ka));w(c,m,da);return c}function z(c,m){c[0]=m[12];c[1]=m[13];c[2]=m[14];return c}function x(c,m){const da=m[0],ka=m[1],sa=m[2],y=m[4],O=m[5],Z=m[6],W=m[8],fa=m[9];m=m[10];c[0]=Math.sqrt(da*da+ka*ka+sa*sa);c[1]=Math.sqrt(y*y+O*O+Z*Z);c[2]=Math.sqrt(W*
W+fa*fa+m*m);return c}function E(c,m){const da=m[0]+m[5]+m[10];let ka=0;0<da?(ka=2*Math.sqrt(da+1),c[3]=.25*ka,c[0]=(m[6]-m[9])/ka,c[1]=(m[8]-m[2])/ka,c[2]=(m[1]-m[4])/ka):m[0]>m[5]&&m[0]>m[10]?(ka=2*Math.sqrt(1+m[0]-m[5]-m[10]),c[3]=(m[6]-m[9])/ka,c[0]=.25*ka,c[1]=(m[1]+m[4])/ka,c[2]=(m[8]+m[2])/ka):m[5]>m[10]?(ka=2*Math.sqrt(1+m[5]-m[0]-m[10]),c[3]=(m[8]-m[2])/ka,c[0]=(m[1]+m[4])/ka,c[1]=.25*ka,c[2]=(m[6]+m[9])/ka):(ka=2*Math.sqrt(1+m[10]-m[0]-m[5]),c[3]=(m[1]-m[4])/ka,c[0]=(m[8]+m[2])/ka,c[1]=
(m[6]+m[9])/ka,c[2]=.25*ka);return c}function ca(c,m,da,ka){var sa=m[0],y=m[1],O=m[2],Z=m[3],W=sa+sa,fa=y+y,ma=O+O;m=sa*W;const oa=sa*fa;sa*=ma;const wa=y*fa;y*=ma;O*=ma;W*=Z;fa*=Z;Z*=ma;ma=ka[0];const ua=ka[1];ka=ka[2];c[0]=(1-(wa+O))*ma;c[1]=(oa+Z)*ma;c[2]=(sa-fa)*ma;c[3]=0;c[4]=(oa-Z)*ua;c[5]=(1-(m+O))*ua;c[6]=(y+W)*ua;c[7]=0;c[8]=(sa+fa)*ka;c[9]=(y-W)*ka;c[10]=(1-(m+wa))*ka;c[11]=0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function J(c,m,da,ka,sa){var y=m[0],O=m[1],Z=m[2],W=m[3],fa=
y+y,ma=O+O,oa=Z+Z;m=y*fa;var wa=y*ma,ua=y*oa;y=O*ma;O*=oa;var Ea=Z*oa;Z=W*fa;ma*=W;const Ba=W*oa;var Fa=ka[0],Ra=ka[1];oa=ka[2];ka=sa[0];W=sa[1];sa=sa[2];fa=(1-(y+Ea))*Fa;const Oa=(wa+Ba)*Fa;Fa*=ua-ma;wa=(wa-Ba)*Ra;Ea=(1-(m+Ea))*Ra;Ra*=O+Z;ua=(ua+ma)*oa;O=(O-Z)*oa;m=(1-(m+y))*oa;c[0]=fa;c[1]=Oa;c[2]=Fa;c[3]=0;c[4]=wa;c[5]=Ea;c[6]=Ra;c[7]=0;c[8]=ua;c[9]=O;c[10]=m;c[11]=0;c[12]=da[0]+ka-(fa*ka+wa*W+ua*sa);c[13]=da[1]+W-(Oa*ka+Ea*W+O*sa);c[14]=da[2]+sa-(Fa*ka+Ra*W+m*sa);c[15]=1;return c}function G(c,
m){var da=m[0],ka=m[1],sa=m[2];m=m[3];var y=da+da,O=ka+ka;const Z=sa+sa;da*=y;const W=ka*y;ka*=O;const fa=sa*y,ma=sa*O;sa*=Z;y*=m;O*=m;m*=Z;c[0]=1-ka-sa;c[1]=W+m;c[2]=fa-O;c[3]=0;c[4]=W-m;c[5]=1-da-sa;c[6]=ma+y;c[7]=0;c[8]=fa+O;c[9]=ma-y;c[10]=1-da-ka;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function p(c,m,da,ka,sa,y,O){const Z=1/(da-m),W=1/(sa-ka),fa=1/(y-O);c[0]=2*y*Z;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*y*W;c[6]=0;c[7]=0;c[8]=(da+m)*Z;c[9]=(sa+ka)*W;c[10]=(O+y)*fa;c[11]=-1;c[12]=0;c[13]=
0;c[14]=O*y*2*fa;c[15]=0;return c}function t(c,m,da,ka,sa){m=1/Math.tan(m/2);let y=void 0;c[0]=m/da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=sa&&Infinity!==sa?(y=1/(ka-sa),c[10]=(sa+ka)*y,c[14]=2*sa*ka*y):(c[10]=-1,c[14]=-2*ka);return c}function X(c,m,da,ka){const sa=Math.tan(m.upDegrees*Math.PI/180),y=Math.tan(m.downDegrees*Math.PI/180),O=Math.tan(m.leftDegrees*Math.PI/180);m=Math.tan(m.rightDegrees*Math.PI/180);const Z=2/(O+m),W=2/(sa+
y);c[0]=Z;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=W;c[6]=0;c[7]=0;c[8]=-((O-m)*Z*.5);c[9]=(sa-y)*W*.5;c[10]=ka/(da-ka);c[11]=-1;c[12]=0;c[13]=0;c[14]=ka*da/(da-ka);c[15]=0;return c}function ha(c,m,da,ka,sa,y,O){const Z=1/(m-da),W=1/(ka-sa),fa=1/(y-O);c[0]=-2*Z;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*W;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*fa;c[11]=0;c[12]=(m+da)*Z;c[13]=(sa+ka)*W;c[14]=(O+y)*fa;c[15]=1;return c}function va(c,m,da,ka){var sa=void 0;let y=void 0;var O=void 0,Z=void 0;let W=void 0,fa=void 0;var ma=
void 0,oa=void 0;let wa=void 0,ua=void 0;const Ea=m[0],Ba=m[1];m=m[2];O=ka[0];Z=ka[1];ka=ka[2];ma=da[0];oa=da[1];da=da[2];sa=ia.getEpsilon();if(Math.abs(Ea-ma)<sa&&Math.abs(Ba-oa)<sa&&Math.abs(m-da)<sa)return P(c);ma=Ea-ma;oa=Ba-oa;wa=m-da;ua=1/Math.sqrt(ma*ma+oa*oa+wa*wa);ma*=ua;oa*=ua;wa*=ua;sa=Z*wa-ka*oa;y=ka*ma-O*wa;O=O*oa-Z*ma;(ua=Math.sqrt(sa*sa+y*y+O*O))?(ua=1/ua,sa*=ua,y*=ua,O*=ua):O=y=sa=0;Z=oa*O-wa*y;W=wa*sa-ma*O;fa=ma*y-oa*sa;(ua=Math.sqrt(Z*Z+W*W+fa*fa))?(ua=1/ua,Z*=ua,W*=ua,fa*=ua):fa=
W=Z=0;c[0]=sa;c[1]=Z;c[2]=ma;c[3]=0;c[4]=y;c[5]=W;c[6]=oa;c[7]=0;c[8]=O;c[9]=fa;c[10]=wa;c[11]=0;c[12]=-(sa*Ea+y*Ba+O*m);c[13]=-(Z*Ea+W*Ba+fa*m);c[14]=-(ma*Ea+oa*Ba+wa*m);c[15]=1;return c}function Da(c,m,da,ka){const sa=m[0],y=m[1];m=m[2];var O=ka[0];const Z=ka[1];var W=ka[2];ka=sa-da[0];let fa=y-da[1];da=m-da[2];let ma=ka*ka+fa*fa+da*da;0<ma&&(ma=1/Math.sqrt(ma),ka*=ma,fa*=ma,da*=ma);let oa=Z*da-W*fa;W=W*ka-O*da;O=O*fa-Z*ka;ma=oa*oa+W*W+O*O;0<ma&&(ma=1/Math.sqrt(ma),oa*=ma,W*=ma,O*=ma);c[0]=oa;c[1]=
W;c[2]=O;c[3]=0;c[4]=fa*O-da*W;c[5]=da*oa-ka*O;c[6]=ka*W-fa*oa;c[7]=0;c[8]=ka;c[9]=fa;c[10]=da;c[11]=0;c[12]=sa;c[13]=y;c[14]=m;c[15]=1;return c}function Ha(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ia(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**
2)}function Ja(c,m,da){c[0]=m[0]+da[0];c[1]=m[1]+da[1];c[2]=m[2]+da[2];c[3]=m[3]+da[3];c[4]=m[4]+da[4];c[5]=m[5]+da[5];c[6]=m[6]+da[6];c[7]=m[7]+da[7];c[8]=m[8]+da[8];c[9]=m[9]+da[9];c[10]=m[10]+da[10];c[11]=m[11]+da[11];c[12]=m[12]+da[12];c[13]=m[13]+da[13];c[14]=m[14]+da[14];c[15]=m[15]+da[15];return c}function Ma(c,m,da){c[0]=m[0]-da[0];c[1]=m[1]-da[1];c[2]=m[2]-da[2];c[3]=m[3]-da[3];c[4]=m[4]-da[4];c[5]=m[5]-da[5];c[6]=m[6]-da[6];c[7]=m[7]-da[7];c[8]=m[8]-da[8];c[9]=m[9]-da[9];c[10]=m[10]-da[10];
c[11]=m[11]-da[11];c[12]=m[12]-da[12];c[13]=m[13]-da[13];c[14]=m[14]-da[14];c[15]=m[15]-da[15];return c}function Wa(c,m,da){c[0]=m[0]*da;c[1]=m[1]*da;c[2]=m[2]*da;c[3]=m[3]*da;c[4]=m[4]*da;c[5]=m[5]*da;c[6]=m[6]*da;c[7]=m[7]*da;c[8]=m[8]*da;c[9]=m[9]*da;c[10]=m[10]*da;c[11]=m[11]*da;c[12]=m[12]*da;c[13]=m[13]*da;c[14]=m[14]*da;c[15]=m[15]*da;return c}function Ya(c,m,da,ka){c[0]=m[0]+da[0]*ka;c[1]=m[1]+da[1]*ka;c[2]=m[2]+da[2]*ka;c[3]=m[3]+da[3]*ka;c[4]=m[4]+da[4]*ka;c[5]=m[5]+da[5]*ka;c[6]=m[6]+da[6]*
ka;c[7]=m[7]+da[7]*ka;c[8]=m[8]+da[8]*ka;c[9]=m[9]+da[9]*ka;c[10]=m[10]+da[10]*ka;c[11]=m[11]+da[11]*ka;c[12]=m[12]+da[12]*ka;c[13]=m[13]+da[13]*ka;c[14]=m[14]+da[14]*ka;c[15]=m[15]+da[15]*ka;return c}function Ua(c,m){return c[0]===m[0]&&c[1]===m[1]&&c[2]===m[2]&&c[3]===m[3]&&c[4]===m[4]&&c[5]===m[5]&&c[6]===m[6]&&c[7]===m[7]&&c[8]===m[8]&&c[9]===m[9]&&c[10]===m[10]&&c[11]===m[11]&&c[12]===m[12]&&c[13]===m[13]&&c[14]===m[14]&&c[15]===m[15]}function gb(c,m){if(c===m)return!0;const da=c[0],ka=c[1],
sa=c[2],y=c[3],O=c[4],Z=c[5],W=c[6],fa=c[7],ma=c[8],oa=c[9],wa=c[10],ua=c[11],Ea=c[12],Ba=c[13],Fa=c[14];c=c[15];const Ra=m[0],Oa=m[1],Ta=m[2],Sa=m[3],La=m[4],Va=m[5],ab=m[6],xa=m[7],wb=m[8],sb=m[9],ib=m[10],b=m[11],hb=m[12],Ib=m[13],Rb=m[14];m=m[15];const nb=ia.getEpsilon();return Math.abs(da-Ra)<=nb*Math.max(1,Math.abs(da),Math.abs(Ra))&&Math.abs(ka-Oa)<=nb*Math.max(1,Math.abs(ka),Math.abs(Oa))&&Math.abs(sa-Ta)<=nb*Math.max(1,Math.abs(sa),Math.abs(Ta))&&Math.abs(y-Sa)<=nb*Math.max(1,Math.abs(y),
Math.abs(Sa))&&Math.abs(O-La)<=nb*Math.max(1,Math.abs(O),Math.abs(La))&&Math.abs(Z-Va)<=nb*Math.max(1,Math.abs(Z),Math.abs(Va))&&Math.abs(W-ab)<=nb*Math.max(1,Math.abs(W),Math.abs(ab))&&Math.abs(fa-xa)<=nb*Math.max(1,Math.abs(fa),Math.abs(xa))&&Math.abs(ma-wb)<=nb*Math.max(1,Math.abs(ma),Math.abs(wb))&&Math.abs(oa-sb)<=nb*Math.max(1,Math.abs(oa),Math.abs(sb))&&Math.abs(wa-ib)<=nb*Math.max(1,Math.abs(wa),Math.abs(ib))&&Math.abs(ua-b)<=nb*Math.max(1,Math.abs(ua),Math.abs(b))&&Math.abs(Ea-hb)<=nb*Math.max(1,
Math.abs(Ea),Math.abs(hb))&&Math.abs(Ba-Ib)<=nb*Math.max(1,Math.abs(Ba),Math.abs(Ib))&&Math.abs(Fa-Rb)<=nb*Math.max(1,Math.abs(Fa),Math.abs(Rb))&&Math.abs(c-m)<=nb*Math.max(1,Math.abs(c),Math.abs(m))}function na(c){const m=ia.getEpsilon(),da=c[0],ka=c[1],sa=c[2],y=c[4],O=c[5],Z=c[6],W=c[8],fa=c[9];c=c[10];return Math.abs(1-(da*da+y*y+W*W))<=m&&Math.abs(1-(ka*ka+O*O+fa*fa))<=m&&Math.abs(1-(sa*sa+Z*Z+c*c))<=m}function ra(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&
0===c[9]&&1===c[10]}const Aa=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Ja,adjoint:k,copy:aa,determinant:q,equals:gb,exactEquals:Ua,frob:Ia,fromQuat:G,fromQuat2:D,fromRotation:K,fromRotationTranslation:w,fromRotationTranslationScale:ca,fromRotationTranslationScaleOrigin:J,fromScaling:v,fromTranslation:L,fromXRotation:F,fromYRotation:n,fromZRotation:C,frustum:p,getRotation:E,getScaling:x,getTranslation:z,hasIdentityRotation:ra,identity:P,invert:h,invertOrIdentity:H,isOrthoNormal:na,
lookAt:va,mul:T,multiply:T,multiplyScalar:Wa,multiplyScalarAndAdd:Ya,ortho:ha,perspective:t,perspectiveFromFieldOfView:X,rotate:B,rotateX:e,rotateY:u,rotateZ:M,scale:Q,set:S,str:Ha,sub:Ma,subtract:Ma,targetTo:Da,translate:N,transpose:R},Symbol.toStringTag,{value:"Module"}));l.add=Ja;l.adjoint=k;l.copy=aa;l.determinant=q;l.equals=gb;l.exactEquals=Ua;l.frob=Ia;l.fromQuat=G;l.fromQuat2=D;l.fromRotation=K;l.fromRotationTranslation=w;l.fromRotationTranslationScale=ca;l.fromRotationTranslationScaleOrigin=
J;l.fromScaling=v;l.fromTranslation=L;l.fromXRotation=F;l.fromYRotation=n;l.fromZRotation=C;l.frustum=p;l.getRotation=E;l.getScaling=x;l.getTranslation=z;l.hasIdentityRotation=ra;l.identity=P;l.invert=h;l.invertOrIdentity=H;l.isOrthoNormal=na;l.lookAt=va;l.mat4=f;l.mul=T;l.multiply=T;l.multiplyScalar=Wa;l.multiplyScalarAndAdd=Ya;l.ortho=ha;l.perspective=t;l.perspectiveFromFieldOfView=X;l.rotate=B;l.rotateX=e;l.rotateY=u;l.rotateZ=M;l.scale=Q;l.set=S;l.str=Ha;l.sub=Ma;l.subtract=Ma;l.targetTo=Da;l.translate=
N;l.transpose=R})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,f,ia,aa,S){function P(){return!!f._pe}function R(){return!!S("esri-wasm")}function H(){return Q?Q:Q=(new Promise((e,u)=>l(["./pe-wasm"],e,u))).then(e=>e.peWasm).then(({default:e})=>e({locateFile:u=>aa.getAssetUrl(`esri/geometry/support/${u}`)})).then(e=>{h(e)})}function h(e){function u(v,K,F){v[K]=F(v[K])}f._pe=e;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();
f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(v){function K(){return F.apply(this,arguments)}ia._inherits(K,v);var F=ia._createSuper(K);K.prototype.destroy=function(){f._pe.destroy(this)};return ia._createClass(K)}(f._pe.PeGCSExtent);e=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,f._pe.PeUnit];for(var M of e)u(M.prototype,"getName",v=>function(){return v.call(this,Array(f.PeDefs.PE_NAME_MAX))});for(const v of[f._pe.PeGeogtran,
f._pe.PeProjcs])u(v.prototype,"getParameters",K=>function(){const F=Array(f.PeDefs.PE_PARM_MAX);let n=K.call(this);for(let C=0;C<F.length;C++){const w=f._pe.getValue(n,"*");F[C]=w?f._pe.wrapPointer(w,f._pe.PeParameter):null;n+=Int32Array.BYTES_PER_ELEMENT}return F});u(f._pe.PeHorizon.prototype,"getCoord",v=>function(){const K=this.getSize();if(!K)return null;const F=[],n=v.call(this);N(F,K,n);return F});u(f._pe.PeGTlistExtendedEntry.prototype,"getEntries",v=>{const K=f._pe._pe_getPeGTlistExtendedGTsSize();
return function(){let F=null;var n=v.call(this);if(!f._pe.compare(n,f._pe.NULL)){F=[n];const C=this.getSteps();if(1<C){n=f._pe.getPointer(n);for(let w=1;w<C;w++)F.push(f._pe.wrapPointer(n+K*w,f._pe.PeGTlistExtendedGTs))}}return F}});const L=f._pe._pe_getPeHorizonSize();M=v=>function(){let K=this._cache;K||(this._cache=K=new Map);if(K.has(v))return K.get(v);let F=null;var n=v.call(this);if(!f._pe.compare(n,f._pe.NULL)){F=[n];const C=n.getNump();if(1<C){n=f._pe.getPointer(n);for(let w=1;w<C;w++)F.push(f._pe.wrapPointer(n+
L*w,f._pe.PeHorizon))}}K.set(v,F);return F};u(f._pe.PeProjcs.prototype,"horizonGcsGenerate",M);u(f._pe.PeProjcs.prototype,"horizonPcsGenerate",M);f._pe.PeObject.prototype.toString=function(v=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();const K=f._pe.getPointer(this),F=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(K,v,F))}}function k(e){if(e){var u=f._pe.getClass(e);u&&(u=f._pe.getCache(u))&&(e=f._pe.getPointer(e))&&delete u[e]}}
function q(e,u){const M=[];u=Array(u);for(let L=0;L<e;L++)M.push(f._pe.ensureInt8(u));return M}function T(e){let u;Array.isArray(e[0])?(u=[],e.forEach(M=>{u.push(M[0],M[1])})):u=e;return u}function N(e,u,M,L=!1){if(L)for(L=0;L<2*u;L++)e[L]=f._pe.getValue(M+L*Float64Array.BYTES_PER_ELEMENT,"double");else{L=0===e.length;for(let v=0;v<u;v++)L&&(e[v]=Array(2)),e[v][0]=f._pe.getValue(M,"double"),e[v][1]=f._pe.getValue(M+Float64Array.BYTES_PER_ELEMENT,"double"),M+=2*Float64Array.BYTES_PER_ELEMENT}}let Q;
f._pe=null;f.PeCSTransformations=void 0;(function(e){function u(v,K,F){f._pe.ensureCache.prepare();var n=T(F);const C=F===n;n=f._pe.ensureFloat64(n);(v=f._pe._pe_geog_to_proj(f._pe.getPointer(v),K,n))&&N(F,K,n,C);return v}function M(v,K,F){return L(v,K,F,0)}function L(v,K,F,n){f._pe.ensureCache.prepare();var C=T(F);const w=F===C;C=f._pe.ensureFloat64(C);(v=f._pe._pe_proj_to_geog_center(f._pe.getPointer(v),K,C,n))&&N(F,K,C,w);return v}e.geogToProj=u;e.projGeog=function(v,K,F,n){switch(n){case f.PeDefs.PE_TRANSFORM_P_TO_G:return M(v,
K,F);case f.PeDefs.PE_TRANSFORM_G_TO_P:return u(v,K,F)}return 0};e.projToGeog=M;e.projToGeogCenter=L})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;e.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=
f._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=f._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;e.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
e.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=f._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;e.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
e.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(e){function u(K,F){let n=null,C=M[K];C||(C={},M[K]=C);C.hasOwnProperty(String(F))?n=C[F]:(K=f._pe.PeFactory.prototype.factoryByType(K,F),f._pe.compare(K,
f._pe.NULL)||(n=K,C[F]=n));return n=v(n)}const M={},L={},v=K=>{if(K){const F=K.getType();switch(F){case f.PeDefs.PE_TYPE_GEOGCS:K=f._pe.castObject(K,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:K=f._pe.castObject(K,f._pe.PeProjcs);break;case f.PeDefs.PE_TYPE_GEOGTRAN:K=f._pe.castObject(K,f._pe.PeGeogtran);break;default:F&f.PeDefs.PE_TYPE_UNIT&&(K=f._pe.castObject(K,f._pe.PeUnit))}}return K};e.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(K){return u(f.PeDefs.PE_TYPE_COORDSYS,
K)};e.factoryByType=u;e.fromString=function(K,F){let n=null,C=L[K];C||(C={},L[K]=C);C.hasOwnProperty(F)?n=C[F]:(K=f._pe.PeFactory.prototype.fromString(K,F),f._pe.compare(K,f._pe.NULL)||(n=K,C[F]=n));return n=v(n)};e.geogcs=function(K){return u(f.PeDefs.PE_TYPE_GEOGCS,K)};e.geogtran=function(K){return u(f.PeDefs.PE_TYPE_GEOGTRAN,K)};e.getCode=function(K){return f._pe.PeFactory.prototype.getCode(K)};e.projcs=function(K){return u(f.PeDefs.PE_TYPE_PROJCS,K)};e.unit=function(K){return u(f.PeDefs.PE_TYPE_UNIT,
K)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=null;f.PeGTlistExtended=void 0;(function(e){let u;e.init=function(){e.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;u=f._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(M,L,v,K,F,n){let C=null;const w=new f._pe.PeInteger(n);try{const D=f._pe.PeGTlistExtended.prototype.getGTlist(M,L,v,K,F,w);if(n=w.val)if(C=[D],1<n){const z=f._pe.getPointer(D);for(M=1;M<n;M++)C.push(f._pe.wrapPointer(z+u*M,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(w)}return C}})(f.PeGTlistExtended||
(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(u){if(u&&u.length){for(const M of u)k(M),M.getEntries().forEach(L=>{k(L);L=L.getGeogtran();k(L);L.getParameters().forEach(k);[L.getGeogcs1(),L.getGeogcs2()].forEach(v=>{k(v);const K=v.getDatum();k(K);k(K.getSpheroid());k(v.getPrimem());k(v.getUnit())})});f._pe.PeGTlistExtendedEntry.prototype.Delete(u[0])}}})(f.PeGTlistExtendedEntry||(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(e){e.geogToGeog=
function(u,M,L,v,K){f._pe.ensureCache.prepare();var F=T(L);const n=L===F;F=f._pe.ensureFloat64(F);let C=0;v&&(C=f._pe.ensureFloat64(v));(u=f._pe._pe_geog_to_geog(f._pe.getPointer(u),M,F,C,K))&&N(L,M,F,n);return u}})(f.PeGTTransformations||(f.PeGTTransformations={}));f.PeNotationDms=void 0;(function(e){const u=(L,v,K,F,n,C)=>{f._pe.ensureCache.prepare();switch(L){case "dd":var w=f._pe._pe_geog_to_dd;var D=f.PeDefs.PE_DD_MAX;break;case "ddm":w=f._pe._pe_geog_to_ddm;D=f.PeDefs.PE_DDM_MAX;break;case "dms":w=
f._pe._pe_geog_to_dms,D=f.PeDefs.PE_DMS_MAX}L=0;v&&(L=f._pe.getPointer(v));v=T(F);v=f._pe.ensureFloat64(v);D=q(K,D);F=f._pe.ensureInt32(D);if(n=w(L,K,v,n,F))for(w=0;w<K;w++)C[w]=f._pe.UTF8ToString(D[w]);return n},M=(L,v,K,F,n)=>{f._pe.ensureCache.prepare();switch(L){case "dd":var C=f._pe._pe_dd_to_geog;break;case "ddm":C=f._pe._pe_ddm_to_geog;break;case "dms":C=f._pe._pe_dms_to_geog}L=0;v&&(L=f._pe.getPointer(v));v=F.map(w=>f._pe.ensureString(w));F=f._pe.ensureInt32(v);v=f._pe.ensureFloat64(Array(2*
K));(C=C(L,K,F,v))&&N(n,K,v);return C};e.geogToDms=function(L,v,K,F,n){return u("dms",L,v,K,F,n)};e.dmsToGeog=function(L,v,K,F){return M("dms",L,v,K,F)};e.geogToDdm=function(L,v,K,F,n){return u("ddm",L,v,K,F,n)};e.ddmToGeog=function(L,v,K,F){return M("ddm",L,v,K,F)};e.geogToDd=function(L,v,K,F,n){return u("dd",L,v,K,F,n)};e.ddToGeog=function(L,v,K,F){return M("dd",L,v,K,F)}})(f.PeNotationDms||(f.PeNotationDms={}));f.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
e.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geogToMgrsExtended=function(u,M,L,v,K,F,n){f._pe.ensureCache.prepare();let C=0;u&&(C=f._pe.getPointer(u));u=T(L);L=f._pe.ensureFloat64(u);u=q(M,f.PeDefs.PE_MGRS_MAX);const w=f._pe.ensureInt32(u);if(v=f._pe._pe_geog_to_mgrs_extended(C,
M,L,v,K,F,w))for(K=0;K<M;K++)n[K]=f._pe.UTF8ToString(u[K]);return v};e.mgrsToGeogExtended=function(u,M,L,v,K){f._pe.ensureCache.prepare();let F=0;u&&(F=f._pe.getPointer(u));u=L.map(n=>f._pe.ensureString(n));L=f._pe.ensureInt32(u);u=f._pe.ensureFloat64(Array(2*M));(v=f._pe._pe_mgrs_to_geog_extended(F,M,L,v,u))&&N(K,M,u);return v}})(f.PeNotationMgrs||(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(e){e.geogToUsng=function(u,M,L,v,K,F,n){f._pe.ensureCache.prepare();let C=0;u&&(C=f._pe.getPointer(u));
u=T(L);L=f._pe.ensureFloat64(u);u=q(M,f.PeDefs.PE_MGRS_MAX);const w=f._pe.ensureInt32(u);if(v=f._pe._pe_geog_to_usng(C,M,L,v,K,F,w))for(K=0;K<M;K++)n[K]=f._pe.UTF8ToString(u[K]);return v};e.usngToGeog=function(u,M,L,v){f._pe.ensureCache.prepare();var K=0;u&&(K=f._pe.getPointer(u));u=L.map(F=>f._pe.ensureString(F));L=f._pe.ensureInt32(u);u=f._pe.ensureFloat64(Array(2*M));(K=f._pe._pe_usng_to_geog(K,M,L,u))&&N(v,M,u);return K}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(e){e.init=
function(){e.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geogToUtm=function(u,M,L,v,K){f._pe.ensureCache.prepare();var F=0;u&&(F=f._pe.getPointer(u));u=T(L);L=f._pe.ensureFloat64(u);u=q(M,f.PeDefs.PE_UTM_MAX);const n=f._pe.ensureInt32(u);if(v=f._pe._pe_geog_to_utm(F,M,L,v,n))for(F=0;F<M;F++)K[F]=f._pe.UTF8ToString(u[F]);return v};e.utmToGeog=
function(u,M,L,v,K){f._pe.ensureCache.prepare();let F=0;u&&(F=f._pe.getPointer(u));u=L.map(n=>f._pe.ensureString(n));L=f._pe.ensureInt32(u);u=f._pe.ensureFloat64(Array(2*M));(v=f._pe._pe_utm_to_geog(F,M,L,v,u))&&N(K,M,u);return v}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=void 0;(function(e){const u=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=
f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(M,L=e.PE_PCSINFO_OPTION_DOMAIN){let v=null,K=null;u.has(M)&&(K=u.get(M),K[L]&&(v=K[L]));v||(v=f._pe.PePCSInfo.prototype.generate(M,L),K||(K=[],u.set(M,K)),K[L]=v);return v}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;(function(e){e.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const B=Object.freeze(Object.defineProperty({__proto__:null,
get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},get PeGCSExtent(){return f.PeGCSExtent},get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},
get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:h,get _pe(){return f._pe},isLoaded:P,isSupported:R,load:H},Symbol.toStringTag,{value:"Module"}));f._init=h;f.isLoaded=P;f.isSupported=R;f.load=H;f.pe=B})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,f){const ia=Math.PI/180;var aa=f.earth.radius;const S=f.earth.eccentricitySquared;aa={a1:aa*S,a2:aa*S*aa*S,a3:aa*S*S/2,a4:aa*S*aa*S*2.5,a5:aa*S+aa*S*S/2,a6:1-S};f={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=aa;l.spheroids=f;l.toRadians=ia;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./GeographicTransformationStep"],function(l,f){return function(){function ia(S){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(S&&S.steps)for(const P of S.steps)P instanceof f?this.steps.push(P):this.steps.push(new f({wkid:P.wkid,wkt:P.wkt,isInverse:P.isInverse}))}ia.cacheKey=function(S,P){return[void 0!==S.wkid&&null!==S.wkid?S.wkid.toString():"-1",void 0!==S.wkt&&null!==S.wkt?S.wkt.toString():"",void 0!==P.wkid&&null!==P.wkid?P.wkid.toString():"-1",void 0!==P.wkt&&
null!==P.wkt?P.wkt.toString():""].join()};ia.fromGE=function(S){const P=new ia;let R="";for(const H of S.steps)S=f.fromGE(H),P.steps.push(S),R+=S.uid.toString()+",";P._cachedProjection={};P._gtlistentry=null;P._chain=R;return P};var aa=ia.prototype;aa.getInverse=function(){const S=new ia;S.steps=[];for(let P=this.steps.length-1;0<=P;P--)S.steps.push(this.steps[P].getInverse());return S};aa.getGTListEntry=function(){let S="";for(const P of this.steps)S+=P.uid.toString()+",";S!==this._chain&&(this._gtlistentry=
null,this._cachedProjection={},this._chain=S);return this._gtlistentry};aa.assignCachedGe=function(S,P,R){this._cachedProjection[ia.cacheKey(S,P)]=R};aa.getCachedGeTransformation=function(S,P){let R="";for(const H of this.steps)R+=H.uid.toString()+",";R!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=R);S=this._cachedProjection[ia.cacheKey(S,P)];return void 0===S?null:S};return l._createClass(ia)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(l){let f=0;return function(){function ia(aa){this.uid=f++;aa?(this._wkt=null!=aa.wkt?aa.wkt:null,this._wkid=null!=aa.wkid?aa.wkid:-1,this._isInverse=null!=aa.isInverse?!0===aa.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ia.fromGE=function(aa){const S=new ia;S._wkt=aa.wkt;S._wkid=aa.wkid;S._isInverse=aa.isInverse;return S};ia.prototype.getInverse=function(){const aa=new ia;aa._wkt=this.wkt;aa._wkid=this._wkid;aa._isInverse=!this.isInverse;return aa};l._createClass(ia,[{key:"wkt",
get:function(){return this._wkt},set:function(aa){this._wkt=aa;this.uid=f++}},{key:"wkid",get:function(){return this._wkid},set:function(aa){this._wkid=aa;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(aa){this._isInverse=aa;this.uid=f++}}]);return ia}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(l,f,ia,aa){l.getGeometryZScaler=function(S,P,R){if(f.isNone(P)||f.isNone(R)||
R.vcsWkid||aa.equals(P,R))return null;P=ia.getMetersPerVerticalUnitForSR(P);R=ia.getMetersPerVerticalUnitForSR(R);const H=P/R;if(1===H)return null;switch(S){case "point":case "esriGeometryPoint":return h=>{h&&null!=h.z&&(h.z*=H)};case "polyline":case "esriGeometryPolyline":return h=>{if(h)for(const k of h.paths)for(const q of k)2<q.length&&(q[2]*=H)};case "polygon":case "esriGeometryPolygon":return h=>{if(h)for(const k of h.rings)for(const q of k)2<q.length&&(q[2]*=H)};case "multipoint":case "esriGeometryMultipoint":return h=>
{if(h)for(const k of h.points)2<k.length&&(k[2]*=H)};case "extent":case "esriGeometryExtent":return h=>{h&&null!=h.zmin&&null!=h.zmax&&(h.zmin*=H,h.zmax*=H)};default:return null}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k,q,T){function N(v){const K=[];let F=0,n=0;for(let C=0;C<v.length;C++){const w=v[C];let D=null;for(let z=0;z<w.length;z++)D=w[z],K.push(D),0===z?n=F=D[0]:(F=Math.min(F,D[0]),n=Math.max(n,D[0]));D&&K.push([(F+n)/2,0])}return K}function Q(v,K){if(!(v instanceof R||v instanceof P))throw L.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ia("straightLineDensify: the input geometry is neither polyline nor polygon");var F=H.getGeometryParts(v);
const n=[];for(const w of F){F=[];n.push(F);F.push([w[0][0],w[0][1]]);for(let D=0;D<w.length-1;D++){const z=w[D][0],x=w[D][1],E=w[D+1][0],ca=w[D+1][1];var C=Math.sqrt((E-z)*(E-z)+(ca-x)*(ca-x));const J=(ca-x)/C,G=(E-z)/C,p=C/K;if(1<p){for(let t=1;t<=p-1;t++){const X=t*K;F.push([G*X+z,J*X+x])}C=(C+Math.floor(p-1)*K)/2;F.push([G*C+z,J*C+x])}F.push([E,ca])}}return"polygon"===v.type?new P({rings:n,spatialReference:v.spatialReference}):new R({paths:n,spatialReference:v.spatialReference})}function B(v,
K,F){K&&(v=Q(v,1E6),v=k.webMercatorToGeographic(v,!0));F&&(v=H.updatePolyGeometry(v,F));return v}function e(v,K,F){if(Array.isArray(v)){var n=v[0];n>K?(F=H.offsetMagnitude(n,K),v[0]=n+-2*F*K):n<F&&(K=H.offsetMagnitude(n,F),v[0]=n+-2*K*F)}else n=v.x,n>K?(F=H.offsetMagnitude(n,K),v=v.clone().offset(-2*F*K,0)):n<F&&(K=H.offsetMagnitude(n,F),v=v.clone().offset(-2*K*F,0));return v}function u(v,K){let F=-1;for(let n=0;n<K.cutIndexes.length;n++){const C=K.cutIndexes[n],w=K.geometries[n],D=H.getGeometryParts(w);
for(let z=0;z<D.length;z++){const x=D[z];x.some(E=>{if(180>E[0])return!0;E=0;for(var ca=0;ca<x.length;ca++){var J=x[ca][0];E=J>E?J:E}E=Number(E.toFixed(9));E=-360*H.offsetMagnitude(E,180);for(ca=0;ca<x.length;ca++)J=w.getPoint(z,ca),w.setPoint(z,ca,J.clone().offset(E,0));return!0})}if(C===F)if("polygon"===v[0].type)for(const z of H.getGeometryParts(w))v[C]=v[C].addRing(z);else{if("polyline"===v[0].type)for(const z of H.getGeometryParts(w))v[C]=v[C].addPath(z)}else F=C,v[C]=w}return v}async function M(v,
K,F){if(!Array.isArray(v))return M([v],K);K&&"string"!==typeof K&&L.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var n="string"===typeof K?K:K?.url??f.geometryServiceUrl;let C,w,D;let z=0;var x=[];K=[];for(var E of v)if(S.isNone(E))K.push(E);else{if(!ca){var ca=E.spatialReference;var J=h.getInfo(ca);var G=(C=ca.isWebMercator)?102100:4326;w=H.cutParams[G].maxX;D=H.cutParams[G].minX;var p=H.cutParams[G].plus180Line;G=H.cutParams[G].minus180Line}if(J)if("mesh"===
E.type)K.push(E);else if("point"===E.type)K.push(e(E.clone(),w,D));else if("multipoint"===E.type){var t=E.clone();t.points=t.points.map(X=>e(X,w,D));K.push(t)}else if("extent"===E.type)t=E.clone()._normalize(!1,!1,J),K.push(t.rings?new P(t):t);else if(E.extent){t=E.extent;const X=2*H.offsetMagnitude(t.xmin,D)*w;let ha=0===X?E.clone():H.updatePolyGeometry(E.clone(),X);t.offset(X,0);t.intersects(p)&&t.xmax!==w?(z=t.xmax>z?t.xmax:z,ha=B(ha,C),x.push(ha),K.push("cut")):t.intersects(G)&&t.xmin!==D?(z=
2*t.xmax*w>z?2*t.xmax*w:z,ha=B(ha,C,360),x.push(ha),K.push("cut")):K.push(ha)}else K.push(E.clone());else K.push(E)}ca=H.offsetMagnitude(z,w);J=-90;p=ca;for(E=new R;0<ca;)G=-180+360*ca,E.addPath([[G,J],[G,-1*J]]),J*=-1,ca--;if(0<x.length&&0<p){ca=await q.cut(n,x,E,F);ca=u(x,ca);J=[];x=[];for(p=0;p<K.length;p++)E=K[p],"cut"!==E?x.push(E):(E=ca.shift(),G=v[p],S.isSome(G)&&"polygon"===G.type&&G.rings&&1<G.rings.length&&E.rings.length>=G.rings.length?(J.push(E),x.push("simplify")):x.push(C?k.geographicToWebMercator(E):
E));if(!J.length)return x;K=await T.simplify(n,J,F);v=[];for(F=0;F<x.length;F++)n=x[F],"simplify"!==n?v.push(n):v.push(C?k.geographicToWebMercator(K.shift()):K.shift());return v}v=[];for(F=0;F<K.length;F++)n=K[F],"cut"!==n?v.push(n):(n=x.shift(),v.push(!0===C?k.geographicToWebMercator(n):n));return v}const L=aa.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(v){if(!v)return null;const K=v.extent;if(!K)return null;var F=v.spatialReference&&h.getInfo(v.spatialReference);
if(!F)return K;const [n,C]=F.valid;({width:F}=K);let {xmin:w,xmax:D}=K;[w,D]=[D,w];if("extent"===v.type||0===F||F<=C||F>2*C||w<n||D>C)return K;let z;switch(v.type){case "polygon":if(1<v.rings.length)z=N(v.rings);else return K;break;case "polyline":if(1<v.paths.length)z=N(v.paths);else return K;break;case "multipoint":z=v.points}v=K.clone();for(let x=0;x<z.length;x++){let E=z[x][0];0>E?(E+=C,D=Math.max(E,D)):(E-=C,w=Math.min(E,w))}v.xmin=w;v.xmax=D;return v.width<F?(v.xmin-=C,v.xmax-=C,v):K};l.normalizeCentralMeridian=
M;l.normalizeMapX=function(v,K){if(K=h.getInfo(K)){const [F,n]=K.valid;K=n-F;if(v<F)for(;v<F;)v+=K;if(v>n)for(;v>n;)v-=K}return v};l.straightLineDensify=Q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,f,ia,aa){function S(P){return aa.isPolygon(P)?P.rings:P.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:ia.WGS84}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:ia.WGS84})}};l.cutParams=f;l.getGeometryParts=S;l.offsetMagnitude=function(P,
R){return Math.ceil((P-R)/(2*R))};l.updatePolyGeometry=function(P,R){const H=S(P);for(const h of H)for(const k of h)k[0]+=R;return P};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(l,f,ia,aa,S){l.cut=async function(P,R,H,h){P=S.parseUrl(P);const k=R[0].spatialReference;R={...h,query:{...P.query,f:"json",sr:JSON.stringify(k),target:JSON.stringify({geometryType:aa.getJsonType(R[0]),
geometries:R}),cutter:JSON.stringify(H)}};R=await ia(P.path+"/cut",R);const {cutIndexes:q,geometries:T=[]}=R.data;return{cutIndexes:q,geometries:T.map(N=>{N=aa.fromJSON(N);N.spatialReference=k;return N})}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(l,f,ia,aa,S,P){function R(H,h,k){const q={};for(const N in H)if("declaredClass"!==N){var T=H[N];
if(null!=T&&"function"!==typeof T)if(Array.isArray(T)){q[N]=[];for(let Q=0;Q<T.length;Q++)q[N][Q]=R(T[Q])}else"object"===typeof T?T.toJSON?(T=T.toJSON(k&&k[N]),q[N]=h?T:JSON.stringify(T)):q[N]=h?T:JSON.stringify(T):q[N]=T}return q}l.asValidOptions=function(H,h){return h?{...h,query:{...(H??{}),...h.query}}:{query:H}};l.encode=R;l.getToken=function(H,h){return H?P.supportsApiKey(H)&&(h||f.apiKey)?h||f.apiKey:ia.id?.findCredential(H)?.token:null};l.parseUrl=function(H){return"string"===typeof H?S.urlToObject(H):
aa.clone(H)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(l,f,ia,aa,S){l.simplify=async function(P,R,H){const h="string"===typeof P?ia.urlToObject(P):P;P=R[0].spatialReference;const k=aa.getJsonType(R[0]);R={...H,query:{...h.query,f:"json",sr:P.wkid??JSON.stringify(P),geometries:JSON.stringify(S.encodeGeometries(R))}};({data:R}=
await f(h.path+"/simplify",R));return S.decodeGeometries(R.geometries,k,P)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(l,f){l.decodeGeometries=function(ia,aa,S){const P=f.getGeometryType(aa);return ia.map(R=>{R=P.fromJSON(R);R.spatialReference=S;return R})};l.encodeGeometries=function(ia){return{geometryType:f.getJsonType(ia[0]),geometries:ia.map(aa=>aa.toJSON())}};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(l,f,ia,aa,S,P,R){function H(B,e){if(!e)return null;if("x"in e){var u={x:0,y:0};[u.x,u.y]=B(e.x,e.y,q);null!=e.z&&(u.z=e.z);null!=e.m&&(u.m=e.m);return u}return"xmin"in
e?(u={xmin:0,ymin:0,xmax:0,ymax:0},[u.xmin,u.ymin]=B(e.xmin,e.ymin,q),[u.xmax,u.ymax]=B(e.xmax,e.ymax,q),e.hasZ&&(u.zmin=e.zmin,u.zmax=e.zmax,u.hasZ=!0),e.hasM&&(u.mmin=e.mmin,u.mmax=e.mmax,u.hasM=!0),u):"rings"in e?{rings:h(e.rings,B),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:h(e.paths,B),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:k(e.points,B),hasM:e.hasM,hasZ:e.hasZ}:null}function h(B,e){const u=[];for(const M of B)u.push(k(M,e));return u}function k(B,e){const u=[];for(const M of B)B=e(M[0],
M[1],[0,0]),u.push(B),2<M.length&&B.push(M[2]),3<M.length&&B.push(M[3]);return u}const q=[0,0],T=H.bind(null,R.lngLatToXY),N=H.bind(null,R.xyToLngLat),Q=new (function(){function B(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var e=B.prototype;e.push=async function(u,M,L){if(!(u&&u.length&&M&&L)||P.equals(M,L))return u;const v={geometries:u,inSpatialReference:M,outSpatialReference:L,resolve:null};this._jobs.push(v);return new Promise(K=>{v.resolve=K;null===this._timer&&(this._timer=
setTimeout(this._process,10))})};e._process=function(){this._timer=null;const u=this._jobs.shift();if(u){var {geometries:M,inSpatialReference:L,outSpatialReference:v,resolve:K}=u;R.canProject(L,v)?P.isWebMercator(v)?K(M.map(T)):K(M.map(N)):K(aa.projectMany(S.jsonAdapter,M,L,v,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return f._createClass(B)}());l.checkProjectionSupport=async function(B,e){B&&e&&(B=Array.isArray(B)?B.map(u=>ia.isSome(u.geometry)?u.geometry.spatialReference:
null).filter(ia.isSome):[B],await aa.initializeProjection(B.map(u=>({source:u,dest:e}))))};l.project=function(B,e,u,M){if(!B)return B;u||(u=e,e=B.spatialReference);return P.isValid(e)&&P.isValid(u)&&!P.equals(e,u)?R.canProject(e,u)?(B=P.isWebMercator(u)?T(B):N(B),B.spatialReference=u,B):aa.projectMany(S.jsonAdapter,[B],e,u,null,M)[0]:B};l.projectMany=function(B,e,u){return Q.push(B,e,u)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers"],function(l,f){let ia=f._createClass(function(H,h,k){this.x=H;this.y=h;this.spatialReference=k;this.m=this.z=void 0}),aa=f._createClass(function(H,h,k,q){this.rings=H;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);q&&(this.hasM=q)}),S=f._createClass(function(H,h,k,q){this.paths=H;this.spatialReference=h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);q&&(this.hasM=q)}),P=f._createClass(function(H,h,k,q){this.points=H;this.spatialReference=
h;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);q&&(this.hasM=q)}),R=f._createClass(function(H,h,k,q,T){this.xmin=H;this.ymin=h;this.xmax=k;this.ymax=q;this.spatialReference=T;this.mmax=this.mmin=this.zmax=this.zmin=void 0});l.jsonAdapter={convertToGEGeometry:function(H,h){return null==h?null:H.convertJSONToGeometry(h)},exportPoint:function(H,h,k){k=new ia(H.getPointX(h),H.getPointY(h),k);const q=H.hasZ(h),T=H.hasM(h);q&&(k.z=H.getPointZ(h));T&&(k.m=H.getPointM(h));return k},exportPolygon:function(H,
h,k){return new aa(H.exportPaths(h),k,H.hasZ(h),H.hasM(h))},exportPolyline:function(H,h,k){return new S(H.exportPaths(h),k,H.hasZ(h),H.hasM(h))},exportMultipoint:function(H,h,k){return new P(H.exportPoints(h),k,H.hasZ(h),H.hasM(h))},exportExtent:function(H,h,k){var q=H.hasZ(h);const T=H.hasM(h);k=new R(H.getXMin(h),H.getYMin(h),H.getXMax(h),H.getYMax(h),k);q&&(q=H.getZExtent(h),k.zmin=q.vmin,k.zmax=q.vmax);T&&(H=H.getMExtent(h),k.mmin=H.vmin,k.mmax=H.vmax);return k}};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k,q,T,N,Q,B,e,u,M,L,v,K,F,n,C,w,D){function z(G){return null!=G&&G.every(p=>"exceedslimit"!==p.statisticType)}let x=f._createClass(function(G,p=null,t,X,ha){this.attributes=G;this.geometry=t;this.centroid=X;this.filterFlags=ha;this.groupId=-1;this.displayId=p});const E=new R.MemCacheStorage(2E6);let ca=0,J=function(){function G(t){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:L.queryCapabilities};this.geometryType=t.geometryType;this.hasM=!!t.hasM;
this.hasZ=!!t.hasZ;this.objectIdField=t.objectIdField;this.spatialReference=t.spatialReference;this.definitionExpression=t.definitionExpression;this.featureStore=t.featureStore;this.aggregateAdapter=t.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=t.timeInfo;t.cacheSpatialQueries&&(this._geometryQueryCache=new R.MemCache(ca++ +"$$",E));this.fieldsIndex=new C(t.fields);t.scheduler&&t.priority&&(this._frameTask=t.scheduler.registerTask(t.priority))}
var p=G.prototype;p.destroy=function(){this._frameTask=P.removeMaybe(this._frameTask);this.clearCache();P.destroyMaybe(this._geometryQueryCache);this._changeHandle=P.removeMaybe(this._changeHandle);P.destroyMaybe(this.fieldsIndex)};p.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};p.executeQuery=async function(t,X){try{return(await this._executeQuery(t,{},X)).createQueryResponse()}catch(ha){if(ha!==n.QUERY_ENGINE_EMPTY_RESULT)throw ha;
return(new v.QueryEngineResult([],t,this)).createQueryResponse()}};p.executeQueryForCount=async function(t={},X){try{return(await this._executeQuery(t,{returnGeometry:!1,returnCentroid:!1,outSR:null},X)).createQueryResponseForCount()}catch(ha){if(ha!==n.QUERY_ENGINE_EMPTY_RESULT)throw ha;return 0}};p.executeQueryForExtent=async function(t,X){const ha=t.outSR;try{const va=await this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},X),Da=va.size;if(!Da)return{count:0,extent:null};const Ha=
await this._getBounds(va.items,va.spatialReference,ha||this.spatialReference);return{count:Da,extent:Ha}}catch(va){if(va===n.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw va;}};p.executeQueryForIds=async function(t,X){return this.executeQueryForIdSet(t,X).then(ha=>Array.from(ha))};p.executeQueryForIdSet=async function(t,X){try{const ha=await this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},X),va=ha.items,Da=new Set;await this._reschedule(()=>{for(const Ha of va)Da.add(ha.featureAdapter.getObjectId(Ha))},
X);return Da}catch(ha){if(ha===n.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ha;}};p.executeQueryForSnapping=async function(t,X){const {point:ha,distance:va,types:Da}=t;if(Da===v.SnappingTypes.NONE)return{candidates:[]};const Ha=await this._reschedule(()=>this._checkQuerySupport(t.query),X),Ia=!B.equals(ha.spatialReference,this.spatialReference);Ia&&await M.checkProjectionSupport(ha.spatialReference,this.spatialReference);var Ja="number"===typeof va?va:va.x,Ma="number"===typeof va?va:va.y;Ja={xmin:ha.x-
Ja,xmax:ha.x+Ja,ymin:ha.y-Ma,ymax:ha.y+Ma,spatialReference:ha.spatialReference};Ja=Ia?M.project(Ja,this.spatialReference):Ja;if(!Ja)return{candidates:[]};Ma=(await Q.normalizeCentralMeridian(N.fromJSON(ha),null,{signal:X}))[0];const Wa=(await Q.normalizeCentralMeridian(N.fromJSON(Ja),null,{signal:X}))[0];if(P.isNone(Ma)||P.isNone(Wa))return{candidates:[]};const Ya=new v.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Wa.toJSON())),X),Ha,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Ya),X);await this._reschedule(()=>this._executeTimeQuery(Ya),X);await this._reschedule(()=>this._executeAttributesQuery(Ya),X);X=Ma.toJSON();X=Ia?M.project(X,this.spatialReference):X;return Ya.createSnappingResponse({...t,point:X,distance:Ia?Math.max(Ja.xmax-Ja.xmin,Ja.ymax-Ja.ymin)/2:va},ha.spatialReference)};p.executeQueryForLatestObservations=async function(t,X){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new aa("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:t,timeInfo:this.timeInfo});try{const ha=await this._executeQuery(t,{},X);await this._reschedule(()=>this._filterLatest(ha),X);return ha.createQueryResponse()}catch(ha){if(ha!==n.QUERY_ENGINE_EMPTY_RESULT)throw ha;return(new v.QueryEngineResult([],t,this)).createQueryResponse()}};p.executeQueryForSummaryStatistics=async function(t={},X,ha){const {field:va,normalizationField:Da,valueExpression:Ha}=X;return(await this._getQueryEngineResultForStats(t,{field:va,normalizationField:Da,valueExpression:Ha},
ha)).createSummaryStatisticsResponse(X)};p.executeQueryForUniqueValues=async function(t={},X,ha){const {field:va,field2:Da,field3:Ha,valueExpression:Ia}=X;return(await this._getQueryEngineResultForStats(t,{field:va,field2:Da,field3:Ha,valueExpression:Ia},ha)).createUniqueValuesResponse(X)};p.executeQueryForClassBreaks=async function(t={},X,ha){const {field:va,normalizationField:Da,valueExpression:Ha}=X;return(await this._getQueryEngineResultForStats(t,{field:va,normalizationField:Da,valueExpression:Ha},
ha)).createClassBreaksResponse(X)};p.executeQueryForHistogram=async function(t={},X,ha){const {field:va,normalizationField:Da,valueExpression:Ha}=X;return(await this._getQueryEngineResultForStats(t,{field:va,normalizationField:Da,valueExpression:Ha},ha)).createHistogramResponse(X)};p.fetchRecomputedExtents=async function(t){const [X,ha]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),P.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=F.getTimeExtent(this.timeInfo,this.featureStore)]);H.throwIfAborted(t);return{fullExtent:X,timeExtent:ha}};p._getBounds=async function(t,X,ha){const va=k.set(k.create(),k.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(t,Da=>k.expandWithAABB(va,Da));t={xmin:va[0],ymin:va[1],xmax:va[3],ymax:va[4],spatialReference:n.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(va[2])&&isFinite(va[5])&&(t.zmin=va[2],t.zmax=va[5]);X=M.project(t,X,ha);X.spatialReference=n.cleanFromGeometryEngine(ha);0===X.xmax-X.xmin&&(ha=h.getMetersPerUnitForSR(X.spatialReference),X.xmin-=ha,X.xmax+=ha);0===X.ymax-X.ymin&&(ha=h.getMetersPerUnitForSR(X.spatialReference),X.ymin-=ha,X.ymax+=ha);this.hasZ&&null!=X.zmin&&null!=X.zmax&&0===X.zmax-X.zmin&&(ha=h.getMetersPerUnitForSR(X.spatialReference),X.zmin-=ha,X.zmax+=ha);return X};p._schedule=async function(t,X){return P.isSome(this._frameTask)?
this._frameTask.schedule(t,X):t(D.noBudget)};p._reschedule=async function(t,X){return P.isSome(this._frameTask)?this._frameTask.reschedule(t,X):t(D.noBudget)};p._getAllFeaturesQueryEngineResult=async function(t){return new v.QueryEngineResult(await this._getAllFeatures(),t,this)};p._getAllFeatures=async function(){if(P.isNone(this._allFeaturesPromise)){const ha=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(va=>ha.push(va))})().then(()=>ha)}const t=this._allFeaturesPromise,
X=await t;return t===this._allFeaturesPromise?X.slice():this._getAllFeatures()};p._executeQuery=async function(t,X,ha){t=S.clone(t);t=await this._schedule(()=>n.normalizeQuery(t,this.definitionExpression,this.spatialReference),ha);t=await this._reschedule(()=>this._checkQuerySupport(t),ha);t={...t,...X};const va=await this._reschedule(()=>this._executeSceneFilterQuery(t,ha),ha),Da=await this._reschedule(()=>this._executeGeometryQuery(t,va,ha),ha);await this._reschedule(()=>this._executeAggregateIdsQuery(Da),
ha);await this._reschedule(()=>this._executeObjectIdsQuery(Da),ha);await this._reschedule(()=>this._executeTimeQuery(Da),ha);await this._reschedule(()=>this._executeAttributesQuery(Da),ha);return Da};p._executeSceneFilterQuery=async function(t,X){if(P.isNone(t.sceneFilter))return null;const {outSR:ha,returnGeometry:va,returnCentroid:Da}=t;var Ha=this.featureStore.featureSpatialReference,Ia=t.sceneFilter.geometry;const Ja=P.isNone(Ha)||B.equals(Ha,Ia.spatialReference)?Ia:M.project(Ia,Ha);if(!Ja)return null;
Ha=va||Da;Ha=B.isValid(ha)&&!B.equals(this.spatialReference,ha)&&Ha?async Ua=>this._project(Ua,ha):Ua=>Ua;const Ma=this.featureAdapter;Ia=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ja)),X);if("disjoint"===t.sceneFilter.spatialRelationship){if(!Ia.length)return null;const Ua=new Set;for(var Wa of Ia)Ua.add(Ma.getObjectId(Wa));const gb=await this._reschedule(()=>this._getAllFeatures(),X);Wa=await this._reschedule(async()=>{const na=await K.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ja,this.geometryType,this.hasZ,this.hasM),ra=await this._runSpatialFilter(gb,Aa=>!Ua.has(Ma.getObjectId(Aa))||na(Ma.getGeometry(Aa)),X);return new v.QueryEngineResult(ra,t,this)},X);return Ha(Wa)}if(!Ia.length)return new v.QueryEngineResult([],t,this);if(this._canExecuteSinglePass(Ja,t))return Ha(new v.QueryEngineResult(Ia,t,this));const Ya=await K.getSpatialQueryOperator("esriSpatialRelContains",Ja,this.geometryType,this.hasZ,this.hasM);Wa=await this._runSpatialFilter(Ia,Ua=>Ya(Ma.getGeometry(Ua)),
X);return Ha(new v.QueryEngineResult(Wa,t,this))};p._executeGeometryQuery=async function(t,X,ha){if(P.isSome(X)&&0===X.items.length)return X;t=P.isSome(X)?X.query:t;const {geometry:va,outSR:Da,spatialRel:Ha,returnGeometry:Ia,returnCentroid:Ja}=t;var Ma=this.featureStore.featureSpatialReference;const Wa=!va||P.isNone(Ma)||B.equals(Ma,va.spatialReference)?va:M.project(va,Ma),Ya=Ia||Ja,Ua=B.isValid(Da)&&!B.equals(this.spatialReference,Da),gb=this._geometryQueryCache&&P.isNone(X)?Ua&&Ya?JSON.stringify({originalFilterGeometry:va,
spatialRelationship:Ha,outSpatialReference:Da}):JSON.stringify({originalFilterGeometry:va,spatialRelationship:Ha}):null;Ma=gb?this._geometryQueryCache.get(gb):null;if(P.isSome(Ma))return new v.QueryEngineResult(Ma,t,this);Ma=async m=>{Ua&&Ya&&await this._project(m,Da);gb&&this._geometryQueryCache.put(gb,m.items,m.items.length+1);return m};if(!Wa)return Ma(P.isSome(X)?X:await this._getAllFeaturesQueryEngineResult(t));const na=this.featureAdapter;let ra=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(va)),
ha);if("esriSpatialRelDisjoint"===Ha){if(!ra.length)return Ma(P.isSome(X)?X:await this._getAllFeaturesQueryEngineResult(t));const m=new Set;for(var Aa of ra)m.add(na.getObjectId(Aa));const da=P.isSome(X)?X.items:await this._reschedule(()=>this._getAllFeatures(),ha);Aa=await this._reschedule(async()=>{const ka=await K.getSpatialQueryOperator(Ha,Wa,this.geometryType,this.hasZ,this.hasM),sa=await this._runSpatialFilter(da,y=>!m.has(na.getObjectId(y))||ka(na.getGeometry(y)),ha);return new v.QueryEngineResult(sa,
t,this)},ha);return Ma(Aa)}if(P.isSome(X)){const m=new ia.PositionHint;ra=ra.filter(da=>0<=ia.indexOf(X.items,da,X.items.length,m))}if(!ra.length)return Ma=new v.QueryEngineResult([],t,this),gb&&this._geometryQueryCache.put(gb,Ma.items,1),Ma;if(this._canExecuteSinglePass(Wa,t))return Ma(new v.QueryEngineResult(ra,t,this));const c=await K.getSpatialQueryOperator(Ha,Wa,this.geometryType,this.hasZ,this.hasM);Aa=await this._runSpatialFilter(ra,m=>c(na.getGeometry(m)),ha);return Ma(new v.QueryEngineResult(Aa,
t,this))};p._executeAggregateIdsQuery=function(t){if(0!==t.items.length&&t.query.aggregateIds&&t.query.aggregateIds.length&&!P.isNone(this.aggregateAdapter)){var X=new Set;for(const va of t.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(va).forEach(Da=>X.add(Da));var ha=this.featureAdapter.getObjectId;t.items=t.items.filter(va=>X.has(ha(va)))}};p._executeObjectIdsQuery=function(t){if(0!==t.items.length&&t.query.objectIds&&t.query.objectIds.length){var X=new Set(t.query.objectIds),ha=
this.featureAdapter.getObjectId;t.items=t.items.filter(va=>X.has(ha(va)))}};p._executeTimeQuery=function(t){if(0!==t.items.length){var X=F.getTimeOperator(this.timeInfo,t.query.timeExtent,this.featureAdapter);P.isNone(X)||(t.items=t.items.filter(X))}};p._executeAttributesQuery=function(t){if(0!==t.items.length){var X=u.getWhereClause(t.query.where,this.fieldsIndex);if(X){if(!X.isStandardized)throw new TypeError("Where clause is not standardized");t.items=t.items.filter(ha=>X.testFeature(ha,this.featureAdapter))}}};
p._runSpatialFilter=async function(t,X,ha){if(!X)return t;if(P.isNone(this._frameTask))return t.filter(Ia=>X(Ia));let va=0;const Da=[],Ha=async Ia=>{for(;va<t.length;){const Ja=t[va++];X(Ja)&&(Da.push(Ja),Ia.madeProgress());Ia.done&&await this._reschedule(Ma=>Ha(Ma),ha)}};return this._reschedule(Ia=>Ha(Ia),ha).then(()=>Da)};p._filterLatest=function(t){const {trackIdField:X,startTimeField:ha,endTimeField:va}=this.timeInfo,Da=va||ha,Ha=new Map,Ia=this.featureAdapter.getAttribute;for(const Ja of t.items){const Ma=
Ia(Ja,X),Wa=Ia(Ja,Da),Ya=Ha.get(Ma);(!Ya||Wa>Ia(Ya,Da))&&Ha.set(Ma,Ja)}t.items=Array.from(Ha.values())};p._canExecuteSinglePass=function(t,X){({spatialRel:X}=X);return K.canQueryWithRBush(t)&&("esriSpatialRelEnvelopeIntersects"===X||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===X||"esriSpatialRelContains"===X||"esriSpatialRelWithin"===X))};p._project=async function(t,X){if(!X||B.equals(this.spatialReference,X))return t;const ha=this.featureAdapter;X=await M.projectMany(t.items.map(va=>
n.getGeometry(this.geometryType,this.hasZ,this.hasM,ha.getGeometry(va))),this.spatialReference,X);t.items=X.map((va,Da)=>ha.cloneWithGeometry(t.items[Da],e.convertFromGeometry(va,this.hasZ,this.hasM)));return t};p._getQueryBBoxes=function(t){if(K.canQueryWithRBush(t)){if(N.isExtent(t))return[q.fromValues(t.xmin,t.ymin,t.xmax,t.ymax)];if(N.isPolygon(t))return t.rings.map(X=>q.fromValues(Math.min(X[0][0],X[2][0]),Math.min(X[0][1],X[2][1]),Math.max(X[0][0],X[2][0]),Math.max(X[0][1],X[2][1])))}return[T.getBoundsXY(q.create(),
t)]};p._searchFeatures=async function(t){const X=new Set;await Promise.all(t.map(ha=>this.featureStore.forEachInBounds(ha,va=>X.add(va))));t=Array.from(X.values());X.clear();return t};p._checkStatisticsSupport=async function(t,X){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);
return Promise.all([this._checkStatisticsParamsSupport(X),K.checkSpatialQuerySupport(t,this.geometryType,this.spatialReference),M.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)};p._checkStatisticsParamsSupport=async function(t){var X=[];t.valueExpression&&({arcadeUtils:X}=await w.loadArcade(),X=X.extractFieldNames(t.valueExpression));t.field&&X.push(t.field);t.field2&&X.push(t.field2);t.field3&&X.push(t.field3);t.normalizationField&&X.push(t.normalizationField);if(!X.length)throw new aa("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:t});u.validateFields(this.fieldsIndex,X,"params contains missing fields")};p._checkQuerySupport=async function(t){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);this._checkStatisticsQuerySupport(t);return Promise.all([K.checkSpatialQuerySupport(t,this.geometryType,
this.spatialReference),M.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)};p._checkAttributesQuerySupport=function(t){const {outFields:X,orderByFields:ha,returnDistinctValues:va,outStatistics:Da}=t,Ha=Da?Da.map(Ia=>Ia.outStatisticFieldName&&Ia.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ha&&0<ha.length){const Ia=ha.map(Ja=>{const Ma=Ja.toLowerCase();return Ma.includes(" asc")?Ma.split(" asc")[0]:Ma.includes(" desc")?Ma.split(" desc")[0]:Ja}).filter(Ja=>!Ha.includes(Ja));
u.validateFields(this.fieldsIndex,Ia,"orderByFields contains missing fields")}if(X&&0<X.length)u.validateFields(this.fieldsIndex,X,"outFields contains missing fields");else if(va)throw new aa("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:t});u.validateWhere(this.fieldsIndex,t.where)};p._checkStatisticsQuerySupport=function(t){const {outStatistics:X,groupByFieldsForStatistics:ha,having:va}=t;var Da=ha&&ha.length,Ha=X&&X.length;if(va){if(!Da||!Ha)throw new aa("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});u.validateHaving(this.fieldsIndex,va,X)}if(Ha&&z(X)){Ha=X.map(Ia=>Ia.onStatisticField).filter(Boolean);u.validateFields(this.fieldsIndex,Ha,"onStatisticFields contains missing fields");Da&&u.validateFields(this.fieldsIndex,ha,"groupByFieldsForStatistics contains missing fields");for(const Ia of X){const {onStatisticField:Ja,statisticType:Ma}=Ia;if(("percentile_disc"===Ma||"percentile_cont"===Ma)&&"statisticParameters"in
Ia){if({statisticParameters:Da}=Ia,!Da)throw new aa("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ia,query:t});}else if("count"!==Ma&&Ja&&u.hasInvalidFieldType(Ja,this.fieldsIndex))throw new aa("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ia,query:t});}}};p._getQueryEngineResultForStats=async function(t,X,ha){t=S.clone(t);try{t=await this._schedule(()=>n.normalizeQuery(t,this.definitionExpression,this.spatialReference),
ha);t=await this._reschedule(()=>this._checkStatisticsSupport(t,X),ha);const va=await this._reschedule(()=>this._executeSceneFilterQuery(t,ha),ha),Da=await this._reschedule(()=>this._executeGeometryQuery(t,va,ha),ha);await this._reschedule(()=>this._executeAggregateIdsQuery(Da),ha);await this._reschedule(()=>this._executeObjectIdsQuery(Da),ha);await this._reschedule(()=>this._executeTimeQuery(Da),ha);await this._reschedule(()=>this._executeAttributesQuery(Da),ha);return Da}catch(va){if(va!==n.QUERY_ENGINE_EMPTY_RESULT)throw va;
return new v.QueryEngineResult([],t,this)}};f._createClass(G,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return G}();l.Feature=x;l.QueryEngine=J;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(l,f,ia,aa){l.RemoveMode=void 0;(function(R){R[R.ALL=0]="ALL";R[R.SOME=1]="SOME"})(l.RemoveMode||(l.RemoveMode={}));let S=function(){function R(h,
k,q){this._namespace=h;this._storage=k;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";q&&(this._storage.registerRemoveFunc(this._namespace,q),this._removeFunc=!0)}var H=R.prototype;H.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};H.resetHitRate=function(){this._hit=this._miss=0};H.put=function(h,k,q,T=0){this._storage.put(this._namespace+
h,k,q,T)};H.get=function(h){h=this._storage.get(this._namespace+h);void 0===h?++this._miss:++this._hit;return h};H.pop=function(h){h=this._storage.pop(this._namespace+h);void 0===h?++this._miss:++this._hit;return h};H.updateSize=function(h,k,q){this._storage.updateSize(this._namespace+h,k,q)};H.clear=function(){this._storage.clear(this._namespace)};H.clearAll=function(){this._storage.clearAll()};H.getStats=function(){return this._storage.getStats()};H.resetStats=function(){this._storage.resetStats()};
f._createClass(R,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return R}(),P=function(){function R(h=10485760){this._maxSize=h;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new aa;this._users=new aa}var H=R.prototype;H.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};H.register=function(h){this._users.push(h)};H.deregister=function(h){this._users.removeUnordered(h)};H.registerRemoveFunc=function(h,k){this._removeFuncs.push([h,k])};H.deregisterRemoveFunc=function(h){this._removeFuncs.filterInPlace(k=>k[0]!==h)};H.put=function(h,k,q,T){const N=this._db.get(h);N&&(this._size-=N.size,this._db.delete(h),N.entry!==k&&this._notifyRemove(h,N.entry,l.RemoveMode.ALL));q>this._maxSize?this._notifyRemove(h,k,l.RemoveMode.ALL):void 0===k?
console.warn("Refusing to cache undefined entry "):!q||0>q?console.warn("Refusing to cache entry with invalid size "+q):(T=1+Math.max(T,-3)- -3,this._db.set(h,{entry:k,size:q,lifetime:T,lives:T}),this._size+=q,this._checkSizeLimit())};H.updateSize=function(h,k,q){const T=this._db.get(h);if(T&&T.entry===k){for(this._size-=T.size;q>this._maxSize;)if(q=this._notifyRemove(h,k,l.RemoveMode.SOME),!(ia.isSome(q)&&0<q)){this._db.delete(h);return}T.size=q;this._size+=q;this._checkSizeLimit()}};H.pop=function(h){const k=
this._db.get(h);if(k)return this._size-=k.size,this._db.delete(h),++this._hit,k.entry;++this._miss};H.get=function(h){const k=this._db.get(h);if(void 0===k)++this._miss;else return this._db.delete(h),k.lives=k.lifetime,this._db.set(h,k),++this._hit,k.entry};H.getStats=function(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},k={},q=[];this._db.forEach((Q,B)=>{const e=Q.lifetime;
q[e]=(q[e]||0)+Q.size;this._users.forAll(u=>{u=u.namespace;B.startsWith(u)&&(k[u]=(k[u]||0)+Q.size)})});const T={};this._users.forAll(Q=>{const B=Q.namespace;!isNaN(Q.hitRate)&&0<Q.hitRate?(k[B]=k[B]||0,T[B]=Math.round(100*Q.hitRate)+"%"):T[B]="0%"});var N=Object.keys(k);N.sort((Q,B)=>k[B]-k[Q]);N.forEach(Q=>h[Q]=Math.round(k[Q]/2**20)+"MB / "+T[Q]);for(N=q.length-1;0<=N;--N){const Q=q[N];Q&&(h["Priority "+(N+-3-1)]=Math.round(Q/this.size*100)+"%")}return h};H.resetStats=function(){this._hit=this._miss=
0;this._users.forAll(h=>h.resetHitRate())};H.clear=function(h){this._db.forEach((k,q)=>{q.startsWith(h)&&(this._size-=k.size,this._db.delete(q),this._notifyRemove(q,k.entry,l.RemoveMode.ALL))})};H.clearAll=function(){this._db.forEach((h,k)=>this._notifyRemove(k,h.entry,l.RemoveMode.ALL));this._size=0;this._db.clear()};H._getHitRate=function(){return this._hit/(this._hit+this._miss)};H._notifyRemove=function(h,k,q){let T;this._removeFuncs.some(N=>h.startsWith(N[0])?(N=N[1](k,q),"number"===typeof N&&
(T=N),!0):!1);return T};H._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [h,k]of this._db){this._db.delete(h);if(1>=k.lives){this._size-=k.size;const q=this._notifyRemove(h,k.entry,l.RemoveMode.SOME);ia.isSome(q)&&0<q&&(this._size+=q,k.lives=k.lifetime,k.size=q,this._db.set(h,k))}else--k.lives,this._db.set(h,k);if(this._size<=.9*this.maxSize)break}};f._createClass(R,[{key:"size",get:function(){return this._size}},{key:"sizeMB",get:function(){return this._size/1024/1024}},{key:"maxSize",
get:function(){return this._maxSize},set:function(h){this._maxSize=Math.max(h,0);this._checkSizeLimit()}}]);return R}();l.MIN_PRIORITY=-3;l.MemCache=S;l.MemCacheStorage=P;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(l,f,ia){function aa(h,k){return h?R.get(h,k):null}function S(h,k,q,T=!0){const N=[];for(const Q of k)if("*"!==Q&&!h.has(Q))if(T){k=
P(Q);try{const B=aa(k,h);if(!B)throw new f("feature-store:unsupported-query","invalid SQL expression",{where:k});if(!B.isStandardized)throw new f("feature-store:unsupported-query","expression is not standard",{clause:B});S(h,B.fieldNames,"expression contains missing fields")}catch(B){if((k=B&&B.details)&&(k.clause||k.where))throw B;k&&k.missingFields?N.push(...k.missingFields):N.push(Q)}}else N.push(Q);if(N.length)throw new f("feature-store:unsupported-query",q,{missingFields:N});}function P(h){return h.split(" as ")[0]}
const R=new ia.WhereClauseCache(50,500),H=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));l.getAliasFromFieldName=function(h){return h.split(" as ")[1]};l.getExpressionFromFieldName=P;l.getWhereClause=aa;l.hasInvalidFieldType=function(h,k){return(h=k.get(h))?!H.has(h.type):!1};l.validateFields=S;l.validateHaving=function(h,k,q){if(!k)return!0;const T=R.get(k,h);if(!T)throw new f("feature-store:unsupported-query",
"invalid SQL expression",{having:k});if(!T.isAggregate)throw new f("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:k});S(h,T.fieldNames,"having contains missing fields");if(!T.getExpressions().every(N=>{const {aggregateType:Q,field:B}=N,e=h.get(B)?.name;return q.some(u=>{const {onStatisticField:M,statisticType:L}=u;return h.get(M)?.name===e&&L.toLowerCase().trim()===Q})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",
{having:k});return!0};l.validateWhere=function(h,k){if(!k)return!0;const q=R.get(k,h);if(!q)throw new f("feature-store:unsupported-query","invalid SQL expression",{where:k});if(!q.isStandardized)throw new f("feature-store:unsupported-query","where clause is not standard",{where:k});S(h,q.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../ItemCache","./WhereClause"],function(l,f,ia,aa){let S=function(){function P(R,H){this._cache=new ia(R);this._invalidCache=new ia(H)}P.prototype.get=function(R,H){const h=`${H.uid}:${R}`,k=this._cache.get(h);if(k)return k;if(void 0!==this._invalidCache.get(h))return null;try{const q=aa.WhereClause.create(R,H);this._cache.put(h,q);return q}catch{return this._invalidCache.put(h,null),null}};return f._createClass(P)}();l.WhereClauseCache=S;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/core/ItemCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(l,f){return function(){function ia(S,P){this._storage=new f.MemCacheStorage;this._storage.maxSize=S;P&&this._storage.registerRemoveFunc("",P)}var aa=ia.prototype;aa.put=function(S,P){this._storage.put(S,P,1,1)};aa.pop=function(S){return this._storage.pop(S)};aa.get=function(S){return this._storage.get(S)};aa.clear=function(){this._storage.clearAll()};aa.destroy=function(){this._storage.destroy()};
return l._createClass(ia)}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,f,ia,aa,S,P){function R(J,G){J+="";return J.length>=G?J:Array(G-J.length+1).join("0")+J}function H(J,G,p="0",t="0",X="0",ha="0",va="",Da="0",Ha="0"){return"+"===va||"-"===va?(J=`${R(parseInt(J,10),4)}-${R(parseInt(G,10),2)}-${R(parseInt(p,10),2)}`,G="",10>parseFloat(ha)&&(G="0"),t=`${R(parseInt(t,
10),2)}:${R(parseInt(X,10),2)}:${G+parseFloat(ha).toString()}`,va=`${va}${R(parseInt(Da,10),2)}:${R(parseInt(Ha,10),2)}`,new Date(J+"T"+t+va)):new Date(parseInt(J,10),parseInt(G,10)-1,parseInt(p,10),parseInt(t,10),parseInt(X,10),parseFloat(ha))}function h(J){let G=F.exec(J);if(null!==G){const [,p,t,X,ha,va,Da]=G;return H(p,t,X,ha,va,Da)}G=n.exec(J);if(null!==G){const [,p,t,X,ha,va,Da,Ha,Ia,Ja]=G;return H(p,t,X,ha,va,Da,Ha,Ia,Ja)}G=C.exec(J);if(null!==G){const [,p,t,X,ha,va,Da,Ha,Ia]=G;return H(p,
t,X,ha,va,"0",Da,Ha,Ia)}G=w.exec(J);if(null!==G){const [,p,t,X,ha,va]=G;return H(p,t,X,ha,va)}G=K.exec(J);if(null!==G){const [,p,t,X]=G;return H(p,t,X)}throw Error("SQL Invalid Timestamp");}function k(J){const G=K.exec(J);if(null===G)try{return h(J)}catch{throw Error("SQL Invalid Date");}const [,p,t,X]=G;return new Date(parseInt(p,10),parseInt(t,10)-1,parseInt(X,10))}function q(J){return Array.isArray(J)?J:[J]}function T(J){return null!==J?!0!==J:null}function N(J,G){return null!=J&&null!=G?!0===
J&&!0===G:!1===J||!1===G?!1:null}function Q(J,G){return null!=J&&null!=G?!0===J||!0===G:!0===J||!0===G?!0:null}function B(J,G){if(null==J)return null;let p=!1;for(const t of G)if(null==t)p=null;else if(J===t){p=!0;break}return p}function e(J,G,p){if(null==J)return null;let t="",X=E.Normal;for(let ha=0;ha<G.length;ha++){const va=G.charAt(ha);switch(X){case E.Normal:va===p?X=E.Escaped:t="-[]/{}()*+?.\\^$|".includes(va)?t+("\\"+va):"%"===va?t+".*":"_"===va?t+".":t+va;break;case E.Escaped:t="-[]/{}()*+?.\\^$|".includes(va)?
t+("\\"+va):t+va,X=E.Normal}}return(new RegExp("^"+t+"$","m")).test(J)}function u(J){return J instanceof Date?J.valueOf():J}function M(J,G,p){if(null==G||null==p)return null;G=u(G);p=u(p);switch(J){case "\x3c\x3e":return G!==p;case "\x3d":return G===p;case "\x3e":return G>p;case "\x3c":return G<p;case "\x3e\x3d":return G>=p;case "\x3c\x3d":return G<=p}}function L(J,G,p){if("||"===J)return S.evaluateFunction("concat",[G,p]);if(G instanceof S.SqlInterval)if(p instanceof Date)switch(J){case "+":return new Date(G.valueInMilliseconds()+
p.getTime());case "-":return G.valueInMilliseconds()-p.getTime();case "*":return G.valueInMilliseconds()*p.getTime();case "/":return G.valueInMilliseconds()/p.getTime()}else if(p instanceof S.SqlInterval)switch(J){case "+":return S.SqlInterval.createFromMilliseconds(G.valueInMilliseconds()+p.valueInMilliseconds());case "-":return S.SqlInterval.createFromMilliseconds(G.valueInMilliseconds()-p.valueInMilliseconds());case "*":return G.valueInMilliseconds()*p.valueInMilliseconds();case "/":return G.valueInMilliseconds()/
p.valueInMilliseconds()}else G=G.valueInMilliseconds();else if(p instanceof S.SqlInterval)if(G instanceof Date)switch(J){case "+":return new Date(p.valueInMilliseconds()+G.getTime());case "-":return new Date(G.getTime()-p.valueInMilliseconds());case "*":return G.getTime()*p.valueInMilliseconds();case "/":return G.getTime()/p.valueInMilliseconds()}else p=p.valueInMilliseconds();else if(G instanceof Date&&"number"===typeof p)switch(p*=864E5,G=G.getTime(),J){case "+":return new Date(G+p);case "-":return new Date(G-
p);case "*":return new Date(G*p);case "/":return new Date(G/p)}else if(p instanceof Date&&"number"===typeof G)switch(G*=864E5,p=p.getTime(),J){case "+":return new Date(G+p);case "-":return new Date(G-p);case "*":return new Date(G*p);case "/":return new Date(G/p)}switch(J){case "+":return G+p;case "-":return G-p;case "*":return G*p;case "/":return G/p}}function v(J,G,p,t){J=t.getAttribute(J,G);return null!=J&&1===p[G]?new Date(J):J}const K=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
n=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,D=new Set(["current_timestamp","current_date","current_time"]);let z=function(){function J(){}J.makeBool=function(G){return!0===G};J.featureValue=function(G,p,t,X){return v(G,p,t,X)};J.equalsNull=function(G){return null===G};J.applyLike=function(G,p,t){return e(G,p,
t)};J.ensureArray=function(G){return q(G)};J.applyIn=function(G,p){return B(G,p)};J.currentDate=function(){const G=new Date;G.setHours(0,0,0,0);return G};J.makeSqlInterval=function(G,p,t){return S.SqlInterval.createFromValueAndQualifer(G,p,t)};J.convertInterval=function(G){return G instanceof S.SqlInterval?G.valueInMilliseconds():G};J.currentTimestamp=function(){return new Date};J.compare=function(G,p,t){return M(G,p,t)};J.calculate=function(G,p,t){return L(G,p,t)};J.makeComparable=function(G){return u(G)};
J.evaluateFunction=function(G,p){return S.evaluateFunction(G,p)};J.lookup=function(G,p){G=p[G];return void 0===G?null:G};J.between=function(G,p){return null==G||null==p[0]||null==p[1]?null:G>=p[0]&&G<=p[1]};J.notbetween=function(G,p){return null==G||null==p[0]||null==p[1]?null:G<p[0]||G>p[1]};J.ternaryNot=function(G){return T(G)};J.ternaryAnd=function(G,p){return N(G,p)};J.ternaryOr=function(G,p){return Q(G,p)};return f._createClass(J)}(),x=function(){function J(p,t){this.fieldsIndex=t;this._datefields=
{};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=P.WhereGrammar.parse(p);const {isStandardized:X,isAggregate:ha,referencedFieldNames:va}=this._extractExpressionInfo(t);this._referencedFieldNames=va;this.isStandardized=X;this.isAggregate=ha}J.create=function(p,t){return new J(p,t)};var G=J.prototype;G.testSet=function(p,t=ca){const X={};for(const ha of this.fieldNames)X[ha]=p.map(va=>t.getAttribute(va,ha));return!!this._evaluateNode(this.parseTree,{attributes:X},ca)};G.calculateValue=
function(p,t=ca){p=this._evaluateNode(this.parseTree,p,t);return p instanceof S.SqlInterval?p.valueInMilliseconds()/864E5:p};G.calculateValueCompiled=function(p,t=ca){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(p,this.parameters,t,this._datefields);if(ia("esri-csp-restrictions"))return this.calculateValue(p,t);this._compileMe();return this.parseTree._compiledVersion(p,this.parameters,t,this._datefields)};G.testFeature=function(p,t=ca){return!!this._evaluateNode(this.parseTree,
p,t)};G.testFeatureCompiled=function(p,t=ca){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(p,this.parameters,t,this._datefields);if(ia("esri-csp-restrictions"))return this.testFeature(p,t);this._compileMe();return!!this.parseTree._compiledVersion(p,this.parameters,t,this._datefields)};G.getFunctions=function(){const p=new Set;this._visitAll(this.parseTree,t=>{"function"===t.type&&p.add(t.name.toLowerCase())});return Array.from(p)};G.getExpressions=function(){const p=
new Map;this._visitAll(this.parseTree,t=>{if("function"===t.type){const X=t.name.toLowerCase();t=t.args.value[0];if("column-reference"===t.type){t=t.column;const ha=`${X}-${t}`;p.has(ha)||p.set(ha,{aggregateType:X,field:t})}}});return[...p.values()]};G.getVariables=function(){const p=new Set;this._visitAll(this.parseTree,t=>{"parameter"===t.type&&p.add(t.value.toLowerCase())});return Array.from(p)};G._compileMe=function(){const p="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",p)).bind(z)};G._extractExpressionInfo=function(p){const t=[],X=new Set;let ha=!0,va=!0;this._visitAll(this.parseTree,Da=>{switch(Da.type){case "column-reference":const Ha=p?.get(Da.column);let Ia,Ja;Ha?Ia=Ja=Ha.name??"":(Ja=Da.column,Ia=Ja.toLowerCase());Ha&&Ha.name&&("date"===Ha.type||"esriFieldTypeDate"===Ha.type)&&(this._datefields[Ha.name]=1);X.has(Ia)||(X.add(Ia),t.push(Ja));Da.column=Ja;break;
case "function":const {name:Ma,args:Wa}=Da;Da=Wa.value.length;ha&&(ha=S.isStandardized(Ma,Da));va&&(va=aa.isAggregate(Ma,Da))}});return{referencedFieldNames:Array.from(t),isStandardized:ha,isAggregate:va}};G._visitAll=function(p,t){if(null!=p)switch(t(p),p.type){case "when-clause":this._visitAll(p.operand,t);this._visitAll(p.value,t);break;case "case-expression":for(const X of p.clauses)this._visitAll(X,t);"simple"===p.format&&this._visitAll(p.operand,t);null!==p.else&&this._visitAll(p.else,t);break;
case "expression-list":for(const X of p.value)this._visitAll(X,t);break;case "unary-expression":this._visitAll(p.expr,t);break;case "binary-expression":this._visitAll(p.left,t);this._visitAll(p.right,t);break;case "function":this._visitAll(p.args,t)}};G.evaluateNodeToJavaScript=function(p){switch(p.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(p.value)+", "+JSON.stringify(p.qualifier)+","+JSON.stringify(p.op)+")";case "case-expression":var t="";if("simple"===p.format){var X=
"this.makeComparable("+this.evaluateNodeToJavaScript(p.operand)+")";t="( ";for(let ha=0;ha<p.clauses.length;ha++)t+=" ("+X+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(p.clauses[ha].operand)+")) ? ("+this.evaluateNodeToJavaScript(p.clauses[ha].value)+") : "}else for(t="( ",X=0;X<p.clauses.length;X++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(p.clauses[X].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(p.clauses[X].value)+") : ";t=null!==p.else?t+this.evaluateNodeToJavaScript(p.else):
t+"null";return t+" )";case "parameter":return"this.lookup("+JSON.stringify(p.value.toLowerCase())+",lookups)";case "expression-list":t="[";for(X of p.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(X);return t+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(p.expr)+")";case "binary-expression":switch(p.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+" )";case "OR":return"this.ternaryOr("+
this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+" )";case "IS":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(p.left)+")";case "ISNOT":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(p.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(p.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(p.right)+
"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(p.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(p.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+
","+JSON.stringify(p.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+","+JSON.stringify(p.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(p.operator)+","+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(p.operator)+
","+this.evaluateNodeToJavaScript(p.left)+","+this.evaluateNodeToJavaScript(p.right)+")"}throw Error("Not Supported Operator "+p.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(p.value);case "date":return"(new Date("+k(p.value).getTime().toString()+"))";case "timestamp":return"(new Date("+h(p.value).getTime().toString()+"))";case "current-time":return"date"===p.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+
JSON.stringify(p.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(p.name)+","+this.evaluateNodeToJavaScript(p.args)+")"}throw Error("Unsupported sql syntax "+p.type);};G._evaluateNode=function(p,t,X){switch(p.type){case "interval":return t=this._evaluateNode(p.value,t,X),S.SqlInterval.createFromValueAndQualifer(t,p.qualifier,p.op);case "case-expression":if("simple"===p.format){var ha=u(this._evaluateNode(p.operand,t,X));for(var va=0;va<p.clauses.length;va++)if(ha===
u(this._evaluateNode(p.clauses[va].operand,t,X)))return this._evaluateNode(p.clauses[va].value,t,X)}else for(ha=0;ha<p.clauses.length;ha++)if(!0===this._evaluateNode(p.clauses[ha].operand,t,X))return this._evaluateNode(p.clauses[ha].value,t,X);return null!==p.else?this._evaluateNode(p.else,t,X):null;case "parameter":return this.parameters[p.value.toLowerCase()];case "expression-list":ha=[];for(va of p.value)ha.push(this._evaluateNode(va,t,X));return ha;case "unary-expression":return T(this._evaluateNode(p.expr,
t,X));case "binary-expression":switch(p.operator){case "AND":return N(this._evaluateNode(p.left,t,X),this._evaluateNode(p.right,t,X));case "OR":return Q(this._evaluateNode(p.left,t,X),this._evaluateNode(p.right,t,X));case "IS":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(p.left,t,X);case "ISNOT":if("null"!==p.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(p.left,t,X);case "IN":return ha=q(this._evaluateNode(p.right,
t,X)),B(this._evaluateNode(p.left,t,X),ha);case "NOT IN":return ha=q(this._evaluateNode(p.right,t,X)),T(B(this._evaluateNode(p.left,t,X),ha));case "BETWEEN":return ha=this._evaluateNode(p.left,t,X),p=this._evaluateNode(p.right,t,X),null==ha||null==p[0]||null==p[1]?null:ha>=u(p[0])&&ha<=u(p[1]);case "NOTBETWEEN":return ha=this._evaluateNode(p.left,t,X),p=this._evaluateNode(p.right,t,X),null==ha||null==p[0]||null==p[1]?null:ha<u(p[0])||ha>u(p[1]);case "LIKE":return e(this._evaluateNode(p.left,t,X),
this._evaluateNode(p.right,t,X),p.escape);case "NOT LIKE":return T(e(this._evaluateNode(p.left,t,X),this._evaluateNode(p.right,t,X),p.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return M(p.operator,this._evaluateNode(p.left,t,X),this._evaluateNode(p.right,t,X));case "-":case "+":case "*":case "/":case "||":return L(p.operator,this._evaluateNode(p.left,t,X),this._evaluateNode(p.right,t,X))}case "null":case "boolean":case "string":case "number":return p.value;
case "date":return k(p.value);case "timestamp":return h(p.value);case "current-time":return t=new Date,"date"===p.mode&&t.setHours(0,0,0,0),t;case "column-reference":return v(t,p.column,this._datefields,X);case "data-type":return p.value;case "function":return t=this._evaluateNode(p.args,t,X),this.isAggregate?aa.aggregateFunction(p.name,t):S.evaluateFunction(p.name,t)}throw Error("Unsupported sql syntax "+p.type);};f._createClass(J,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,p=>{"current-time"===p.type?this._hasDateFunctions=!0:"function"===p.type&&(this._hasDateFunctions=this._hasDateFunctions||D.has(p.name.toLowerCase()))});return this._hasDateFunctions}}]);return J}();var E;(function(J){J[J.Normal=0]="Normal";J[J.Escaped=1]="Escaped"})(E||(E={}));const ca={getAttribute(J,G){return(J&&"object"===typeof J.attributes?
J.attributes:J)[G]}};l.WhereClause=x;l.defaultAttributeAdapter=ca;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function f(S){let P=0;for(let R=0;R<S.length;R++)P+=S[R];return P/S.length}function ia(S){const P=f(S),R=S.length;let H=0;for(const h of S)H+=(h-P)**2;return 1<R?H/(R-1):0}const aa={min:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:Math.min.apply(Math,S[0])},max:{minParams:1,maxParams:1,
evaluate:S=>null==S[0]?null:Math.max.apply(Math,S[0])},avg:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:f(S[0])},sum:{minParams:1,maxParams:1,evaluate:S=>{if(null==S[0])S=null;else{S=S[0];let P=0;for(let R=0;R<S.length;R++)P+=S[R];S=P}return S}},stddev:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:Math.sqrt(ia(S[0]))},count:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:S[0].length},var:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:ia(S[0])}};l.aggregateFunction=function(S,
P){const R=aa[S.toLowerCase()];if(null==R)throw Error("Function Not Recognised");if(P.length<R.minParams||P.length>R.maxParams)throw Error(`Invalid Parameter count for call to ${S.toUpperCase()}`);return R.evaluate(P)};l.isAggregate=function(S,P){S=aa[S.toLowerCase()];return null!=S&&P>=S.minParams&&P<=S.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport",
"../string","../../chunks/datetime"],function(l,f,ia,aa,S){function P(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function R(k,q){if(k instanceof Date)return q?P(k):k;if("string"===typeof k||k instanceof String)if(k=S.DateTime.fromSQL(k),k.isValid)return q?P(k.toJSDate()):k.toJSDate();throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);}let H=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(q){if(null!==
q.precision||null!==q.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(q,T){T.includes(".")?(T=T.split("."),q.second=parseFloat(T[0]),q.millis=parseInt(T[1],10)):q.second=parseFloat(T)};k.createFromMilliseconds=function(q){const T=new k;T.second=q/1E3;return T};k.createFromValueAndQualifer=function(q,T,N){let Q=null;const B=new k;B.op="-"===N?"-":"+";if("interval-period"===T.type){k._fixDefaults(T);N=RegExp("^[0-9]{1,}$");if("year"===
T.period||"month"===T.period)throw Error("Year-Month Intervals not supported");if("second"===T.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(q))k._parseSecondsComponent(B,q);else throw Error("Illegal Interval");else if(N.test(q))B[T.period]=parseFloat(q);else throw Error("Illegal Interval");}else{k._fixDefaults(T.start);k._fixDefaults(T.end);if("year"===T.start.period||"month"===T.start.period)throw Error("Year-Month Intervals not supported");if("year"===T.end.period||"month"===T.end.period)throw Error("Year-Month Intervals not supported");
switch(T.start.period){case "day":switch(T.end.period){case "hour":Q=RegExp("^[0-9]{1,} [0-9]{1,}$");if(Q.test(q))B[T.start.period]=parseFloat(q.split(" ")[0]),B[T.end.period]=parseFloat(q.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":Q=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(Q.test(q))B[T.start.period]=parseFloat(q.split(" ")[0]),q=q.split(" ")[1].split(":"),B.hour=parseFloat(q[0]),B.minute=parseFloat(q[1]);else throw Error("Illegal Interval");break;case "second":Q=
RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(Q.test(q))B[T.start.period]=parseFloat(q.split(" ")[0]),q=q.split(" ")[1].split(":"),B.hour=parseFloat(q[0]),B.minute=parseFloat(q[1]),k._parseSecondsComponent(B,q[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(T.end.period){case "minute":Q=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(Q.test(q))B.hour=parseFloat(q.split(":")[0]),B.minute=parseFloat(q.split(":")[1]);
else throw Error("Illegal Interval");break;case "second":Q=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(Q.test(q))q=q.split(":"),B.hour=parseFloat(q[0]),B.minute=parseFloat(q[1]),k._parseSecondsComponent(B,q[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(T.end.period){case "second":Q=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(Q.test(q))q=q.split(":"),B.minute=parseFloat(q[0]),k._parseSecondsComponent(B,
q[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return B};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f._createClass(k)}();const h={extract:{minParams:2,maxParams:2,evaluate:([k,q])=>{if(null==q)return null;if(q instanceof Date)switch(k.toUpperCase()){case "SECOND":return q.getSeconds();
case "MINUTE":return q.getMinutes();case "HOUR":return q.getHours();case "DAY":return q.getDate();case "MONTH":return q.getMonth()+1;case "YEAR":return q.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [q,T]=k;return null==q||null==T?null:q.toString().substring(T-1)}if(3===k.length){const [q,T,N]=k;return null==q||null==T||null==N?null:0>=N?"":q.toString().substring(T-1,T+N-1)}}},position:{minParams:2,maxParams:2,
evaluate:([k,q])=>null==k||null==q?null:q.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var q=3===k.length,T=q?k[1]:" ";q=q?k[2]:k[1];if(null==T||null==q)return null;T=`(${aa.escapeRegExpString(T)})`;switch(k[0]){case "BOTH":return q.replace(new RegExp(`^${T}*|${T}*$`,"g"),"");case "LEADING":return q.replace(new RegExp(`^${T}*`,"g"),"");case "TRAILING":return q.replace(new RegExp(`${T}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>
null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==
k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const q=k[0];k=2===k.length?10**k[1]:1;return null==q?null:Math.round(q*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let q="";for(let T=0;T<k.length;T++){if(null==k[T])return null;
q+=k[T].toString()}return q}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const q of k)if(null!==q)return q;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>
null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const q=k[0];k=k[1];return(q instanceof Date?q.valueOf():q)===(k instanceof Date?k.valueOf():k)?null:q}},cast:{minParams:2,maxParams:2,evaluate:k=>{var q=k[0];k=k[1];if(null===q)return null;switch(k.type){case "integer":q=parseInt(q,10);if(isNaN(q))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return q;case "smallint":q=parseInt(q,10);if(isNaN(q))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);if(32767<
q||-32767>q)throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return q;case "float":case "real":q=parseFloat(q);if(isNaN(q))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return q;case "date":return R(q,!0);case "timestamp":return R(q,!1);case "varchar":q=q.toString();if(q.length>k.size)throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return q;default:throw new ia.SqlError(ia.SqlErrorCodes.InvalidDataType);}}}};l.SqlInterval=H;l.evaluateFunction=function(k,q){const T=h[k.toLowerCase()];
if(null==T)throw Error("Function Not Recognised");if(q.length<T.minParams||q.length>T.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return T.evaluate(q)};l.isStandardized=function(k,q){k=h[k.toLowerCase()];return null!=k&&q>=k.minParams&&q<=k.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(l,
f,ia){l.SqlErrorCodes=void 0;(function(H){H.InvalidFunctionParameters="InvalidFunctionParameters";H.UnsupportedSqlFunction="UnsupportedSqlFunction";H.UnsupportedOperator="UnsupportedOperator";H.UnsupportedSyntax="UnsupportedSyntax";H.UnsupportedIsRhs="UnsupportedIsRhs";H.UnsupportedIsLhs="UnsupportedIsLhs";H.InvalidDataType="InvalidDataType";H.CannotCastValue="CannotCastValue";H.MissingStatisticParameters="MissingStatisticParameters"})(l.SqlErrorCodes||(l.SqlErrorCodes={}));const aa={[l.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",
[l.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[l.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[l.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[l.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[l.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[l.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[l.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",
[l.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let S=function(H){function h(q,T){q=k.call(this,ia.doSubstitutions(aa[q],T));q.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(q),h);return q}f._inherits(h,H);var k=f._createSuper(h);return f._createClass(h)}(f._wrapNativeSuper(Error));l.FeatureSetErrorCodes=void 0;(function(H){H.NeverReach="NeverReach";H.NotImplemented="NotImplemented";
H.Cancelled="Cancelled";H.InvalidStatResponse="InvalidStatResponse";H.InvalidRequest="InvalidRequest";H.RequestFailed="RequestFailed";H.MissingFeatures="MissingFeatures";H.AggregationFieldNotFound="AggregationFieldNotFound";H.DataElementsNotFound="DataElementsNotFound"})(l.FeatureSetErrorCodes||(l.FeatureSetErrorCodes={}));const P={[l.FeatureSetErrorCodes.Cancelled]:"Cancelled",[l.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[l.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",
[l.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[l.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[l.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[l.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[l.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[l.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let R=function(H){function h(q,T){q=k.call(this,ia.doSubstitutions(P[q],T));q.declaredRootClass=
"esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(q),h);return q}f._inherits(h,H);var k=f._createSuper(h);return f._createClass(h)}(f._wrapNativeSuper(Error));l.FeatureSetError=R;l.FeatureSetErrorMessages=P;l.SqlError=S;l.SqlErrorMessages=aa;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(l,f){function ia(N){return N&&
N.loc?`Line : ${N.loc.start?.line}, ${N.loc.start?.column}: `:""}function aa(N,Q){try{if(!Q)return N;for(const B in Q){let e=Q[B];e||(e="");N=N.replace("{"+B+"}",Q[B])}}catch(B){}return N}l.ExecutionErrorCodes=void 0;(function(N){N.AsyncNotEnabled="AsyncNotEnabled";N.ModulesNotSupported="ModulesNotSupported";N.CircularModules="CircularModules";N.NeverReach="NeverReach";N.UnsupportedHashType="UnsupportedHashType";N.InvalidParameter="InvalidParameter";N.UnexpectedToken="UnexpectedToken";N.Unrecognised=
"Unrecognised";N.UnrecognisedType="UnrecognisedType";N.MaximumCallDepth="MaximumCallDepth";N.BooleanConditionRequired="BooleanConditionRequired";N.TypeNotAllowedInFeature="TypeNotAllowedInFeature";N.KeyMustBeString="KeyMustBeString";N.WrongNumberOfParameters="WrongNumberOfParameters";N.CallNonFunction="CallNonFunction";N.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";N.NoFunctionInDictionary="NoFunctionInDictionary";N.NoFunctionInArray="NoFunctionInArray";N.AssignModuleFunction="AssignModuleFunction";
N.LogicExpressionOrAnd="LogicExpressionOrAnd";N.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";N.FuncionNotFound="FunctionNotFound";N.InvalidMemberAccessKey="InvalidMemberAccessKey";N.UnsupportedUnaryOperator="UnsupportUnaryOperator";N.InvalidIdentifier="InvalidIdentifier";N.MemberOfNull="MemberOfNull";N.UnsupportedOperator="UnsupportedOperator";N.Cancelled="Cancelled";N.ModuleAccessorMustBeString="ModuleAccessorMustBeString";N.ModuleExportNotFound="ModuleExportNotFound";N.Immutable=
"Immutable";N.OutOfBounds="OutOfBounds";N.IllegalResult="IllegalResult";N.FieldNotFound="FieldNotFound";N.PortalRequired="PortalRequired";N.LogicError="LogicError";N.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";N.KeyAccessorMustBeString="KeyAccessorMustBeString";N.WrongSpatialReference="WrongSpatialReference"})(l.ExecutionErrorCodes||(l.ExecutionErrorCodes={}));const S={[l.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[l.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",
[l.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[l.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[l.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[l.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[l.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[l.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[l.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[l.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[l.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[l.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[l.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[l.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[l.ExecutionErrorCodes.PortalRequired]:"Portal is required",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[l.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[l.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[l.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[l.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[l.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[l.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[l.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[l.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[l.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[l.ExecutionErrorCodes.Immutable]:"Object is immutable",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[l.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[l.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[l.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[l.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[l.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[l.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[l.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[l.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[l.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[l.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[l.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[l.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[l.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let P=function(N){function Q(...e){return B.call(this,...e)}f._inherits(Q,N);var B=f._createSuper(Q);return f._createClass(Q)}(f._wrapNativeSuper(Error)),R=function(N){function Q(e,
u){e=B.call(this,ia(u)+e.message,{cause:e});e.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),Q);u&&u.loc&&(e.loc=u.loc);return e}f._inherits(Q,N);var B=f._createSuper(Q);return f._createClass(Q)}(P),H=function(N){function Q(e,u,M,L){e=B.call(this,"Execution error - "+ia(M)+aa(S[u],L));e.loc=null;e.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),Q);M&&M.loc&&(e.loc=M.loc);return e}
f._inherits(Q,N);var B=f._createSuper(Q);return f._createClass(Q)}(f._wrapNativeSuper(Error)),h=function(N){function Q(e,u,M,L){e=B.call(this,"Compilation error - "+ia(M)+aa(S[u],L));e.loc=null;e.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),Q);M&&M.loc&&(e.loc=M.loc);return e}f._inherits(Q,N);var B=f._createSuper(Q);return f._createClass(Q)}(f._wrapNativeSuper(Error)),k=function(N){function Q(){var e=B.call(this,
"Uncompilable code structures");e.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),Q);return e}f._inherits(Q,N);var B=f._createSuper(Q);return f._createClass(Q)}(f._wrapNativeSuper(Error));l.ModuleErrorCodes=void 0;(function(N){N.UnrecognisedUri="UnrecognisedUri";N.UnsupportedUriProtocol="UnsupportedUriProtocol"})(l.ModuleErrorCodes||(l.ModuleErrorCodes={}));const q={[l.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[l.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let T=function(N){function Q(e,u){e=B.call(this,aa(q[e],u));e.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),Q);return e}f._inherits(Q,N);var B=f._createSuper(Q);return f._createClass(Q)}(f._wrapNativeSuper(Error));l.ArcadeCompilationError=h;l.ArcadeExecutionError=H;l.ArcadeUncompilableError=k;l.ErrorWithCause=P;l.ExecutionErrorMessages=S;l.LocatableArcadeExecutionError=
R;l.ModuleError=T;l.ModuleErrorMessages=q;l.doSubstitutions=aa;l.ensureArcadeExecutionError=function(N,Q,B){return"esri.arcade.arcadeexecutionerror"===B.declaredRootClass||"esri.arcade.arcadecompilationerror"===B.declaredRootClass?null===B.loc&&Q&&Q.loc?new R(B,{cause:B}):B:Q&&Q.loc?new R(B,{cause:B}):B};l.parsingValidationMessage=function(N,Q,B){return"Parsing error - "+ia(N)+aa(S[Q],B)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],
function(l){function f(a,g={}){const I=JSON.stringify([a,g]);let ba=hd[I];ba||(ba=new Intl.ListFormat(a,g),hd[I]=ba);return ba}function ia(a,g={}){const I=JSON.stringify([a,g]);let ba=Hc[I];ba||(ba=new Intl.DateTimeFormat(a,g),Hc[I]=ba);return ba}function aa(a,g={}){const I=JSON.stringify([a,g]);let ba=Ic[I];ba||(ba=new Intl.NumberFormat(a,g),Ic[I]=ba);return ba}function S(a,g={}){const {base:I,...ba}=g,ja=JSON.stringify([a,ba]);let qa=Jc[ja];qa||(qa=new Intl.RelativeTimeFormat(a,g),Jc[ja]=qa);return qa}
function P(a){const g=[];for(let I=1;12>=I;I++){const ba=bb.utc(2016,I,1);g.push(a(ba))}return g}function R(a){const g=[];for(let I=1;7>=I;I++){const ba=bb.utc(2016,11,13+I);g.push(a(ba))}return g}function H(a,g,I,ba,ja){a=a.listingMode(I);return"error"===a?null:"en"===a?ba(g):ja(g)}function h(a,g){if(k(a)||null===a)return g;if(a instanceof jc)return a;if("string"===typeof a){const I=a.toLowerCase();return"default"===I?g:"local"===I||"system"===I?nc.instance:"utc"===I||"gmt"===I?Fb.utcInstance:Fb.parseSpecifier(I)||
Ub.create(a)}return q(a)?Fb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new me(a)}function k(a){return"undefined"===typeof a}function q(a){return"number"===typeof a}function T(a){return"number"===typeof a&&0===a%1}function N(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function Q(a,g,I){if(0!==a.length)return a.reduce((ba,ja)=>{ja=[g(ja),ja];return ba?I(ba[0],ja[0])===ba[0]?ba:ja:ja},null)[1]}function B(a,g){return g.reduce((I,ba)=>
{I[ba]=a[ba];return I},{})}function e(a,g){return Object.prototype.hasOwnProperty.call(a,g)}function u(a,g,I){return T(a)&&a>=g&&a<=I}function M(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function L(a){if(!k(a)&&null!==a&&""!==a)return parseInt(a,10)}function v(a){if(!k(a)&&null!==a&&""!==a)return parseFloat(a)}function K(a){if(!k(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function F(a,g,I=!1){g=10**g;return(I?Math.trunc:Math.round)(a*g)/g}function n(a){return 0===
a%4&&(0!==a%100||0===a%400)}function C(a,g){var I=g-1;I=I-12*Math.floor(I/12)+1;return 2===I?n(a+(g-I)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][I-1]}function w(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function D(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:
52}function z(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function x(a,g,I,ba=null){a=new Date(a);const ja={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ba&&(ja.timeZone=ba);return(g=(new Intl.DateTimeFormat(I,{timeZoneName:g,...ja})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?g.value:null}function E(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function ca(a){const g=
Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Ca(`Invalid unit value ${a}`);return g}function J(a,g){const I={};for(const ba in a)if(e(a,ba)){const ja=a[ba];void 0!==ja&&null!==ja&&(I[g(ba)]=ca(ja))}return I}function G(a,g){const I=Math.trunc(Math.abs(a/60)),ba=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${M(I,2)}:${M(ba,2)}`;case "narrow":return`${a}${I}${0<ba?`:${ba}`:""}`;case "techie":return`${a}${M(I,2)}${M(ba,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);
}}function p(a){return B(a,["hour","minute","second","millisecond"])}function t(a){switch(a){case "narrow":return[...ne];case "short":return[...Kc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function X(a){switch(a){case "narrow":return[...pe];case "short":return[...id];case "long":return[...Lc];case "numeric":return"1234567".split("");default:return null}}function ha(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function va(a,g,I="always",ba=!1){const ja={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===I&&qa)switch(I="days"===a,g){case 1:return I?"tomorrow":`next ${ja[a][0]}`;case -1:return I?"yesterday":`last ${ja[a][0]}`;case 0:return I?
"today":`this ${ja[a][0]}`}I=Object.is(g,-0)||0>g;g=Math.abs(g);qa=1===g;const za=ja[a];a=ba?qa?za[1]:za[2]||za[1]:qa?ja[a][0]:a;return I?`${g} ${a} ago`:`in ${g} ${a}`}function Da(a,g){let I="";for(const ba of a)I=ba.literal?I+ba.val:I+g(ba.val);return I}function Ha(...a){a=a.reduce((g,I)=>g+I.source,"");return RegExp(`^${a}$`)}function Ia(...a){return g=>a.reduce(([I,ba,ja],qa)=>{const [za,Ka,Qa]=qa(g,ja);return[{...I,...za},Ka||ba,Qa]},[{},null,1]).slice(0,2)}function Ja(a,...g){if(null==a)return[null,
null];for(const [I,ba]of g)if(g=I.exec(a))return ba(g);return[null,null]}function Ma(...a){return(g,I)=>{const ba={};let ja;for(ja=0;ja<a.length;ja++)ba[a[ja]]=L(g[I+ja]);return[ba,null,I+ja]}}function Wa(a,g,I){a=a[g];return k(a)?I:L(a)}function Ya(a,g){return[{hours:Wa(a,g,0),minutes:Wa(a,g+1,0),seconds:Wa(a,g+2,0),milliseconds:K(a[g+3])},null,g+4]}function Ua(a,g){const I=!a[g]&&!a[g+1];a=E(a[g+1],a[g+2]);return[{},I?null:Fb.instance(a),g+3]}function gb(a,g){return[{},a[g]?Ub.create(a[g]):null,
g+1]}function na(a){const [g,I,ba,ja,qa,za,Ka,Qa,cb]=a,d="-"===g[0];a=Qa&&"-"===Qa[0];const db=($a,zb=!1)=>void 0!==$a&&(zb||$a&&d)?-$a:$a;return[{years:db(v(I)),months:db(v(ba)),weeks:db(v(ja)),days:db(v(qa)),hours:db(v(za)),minutes:db(v(Ka)),seconds:db(v(Qa),"-0"===Qa),milliseconds:db(K(cb),a)}]}function ra(a,g,I,ba,ja,qa,za){g={year:2===g.length?z(L(g)):L(g),month:Kc.indexOf(I)+1,day:L(ba),hour:L(ja),minute:L(qa)};za&&(g.second=L(za));a&&(g.weekday=3<a.length?Lc.indexOf(a)+1:id.indexOf(a)+1);return g}
function Aa(a){const [,g,I,ba,ja,qa,za,Ka,Qa,cb,d,db]=a;a=ra(g,ja,ba,I,qa,za,Ka);let $a;$a=Qa?te[Qa]:cb?0:E(d,db);return[a,new Fb($a)]}function c(a){const [,g,I,ba,ja,qa,za,Ka]=a;return[ra(g,ja,ba,I,qa,za,Ka),Fb.utcInstance]}function m(a){const [,g,I,ba,ja,qa,za,Ka]=a;return[ra(g,Ka,I,ba,ja,qa,za),Fb.utcInstance]}function da(a,g,I=!1){a={values:I?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};
return new jb(a)}function ka(a,g,I,ba,ja){a=a[ja][I];var qa=g[I]/a;qa=Math.sign(qa)!==Math.sign(ba[ja])&&0!==ba[ja]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);ba[ja]+=qa;g[I]-=qa*a}function sa(a,g){ue.reduce((I,ba)=>{if(k(g[ba]))return I;I&&ka(a,g,I,g,ba);return ba},null)}function y(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(jb.fromMillis(a).as("days"))}function O(a,g,I){const ba=[["years",
(Qa,cb)=>cb.year-Qa.year],["quarters",(Qa,cb)=>cb.quarter-Qa.quarter+4*(cb.year-Qa.year)],["months",(Qa,cb)=>cb.month-Qa.month+12*(cb.year-Qa.year)],["weeks",(Qa,cb)=>{Qa=y(Qa,cb);return(Qa-Qa%7)/7}],["days",y]],ja={},qa=a;let za,Ka;for(const [Qa,cb]of ba)0<=I.indexOf(Qa)&&(za=Qa,ja[Qa]=cb(a,g),Ka=qa.plus(ja),Ka>g?(ja[Qa]--,a=qa.plus(ja)):a=Ka);return[a,ja,Ka,za]}function Z(a,g,I,ba){let [ja,qa,za,Ka]=O(a,g,I);a=g-ja;I=I.filter(Qa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Qa));0===
I.length&&(za<g&&(za=ja.plus({[Ka]:1})),za!==ja&&(qa[Ka]=(qa[Ka]||0)+a/(za-ja)));g=jb.fromObject(qa,ba);return 0<I.length?jb.fromMillis(a,ba).shiftTo(...I).plus(g):g}function W({numberingSystem:a},g=""){return new RegExp(`${Mc[a||"latn"]}${g}`)}function fa(a,g=I=>I){return{regex:a,deser:([I])=>{{let ba=parseInt(I,10);if(isNaN(ba)){ba="";for(let ja=0;ja<I.length;ja++){const qa=I.charCodeAt(ja);if(-1!==I[ja].search(Mc.hanidec))ba+=ve.indexOf(I[ja]);else for(const za in jd){const [Ka,Qa]=jd[za];qa>=
Ka&&qa<=Qa&&(ba+=qa-Ka)}}I=parseInt(ba,10)}else I=ba}return g(I)}}}function ma(a){return a.replace(/\./g,"\\.?").replace(Nc,kd)}function oa(a,g){return null===a?null:{regex:RegExp(a.map(ma).join("|")),deser:([I])=>a.findIndex(ba=>I.replace(/\./g,"").replace(Nc," ").toLowerCase()===ba.replace(/\./g,"").replace(Nc," ").toLowerCase())+g}}function wa(a,g){return{regex:a,deser:([,I,ba])=>E(I,ba),groups:g}}function ua(a){return{regex:a,deser:([g])=>g}}function Ea(a,g){const I=W(g),ba=W(g,"{2}"),ja=W(g,
"{3}"),qa=W(g,"{4}"),za=W(g,"{6}"),Ka=W(g,"{1,2}"),Qa=W(g,"{1,3}"),cb=W(g,"{1,6}"),d=W(g,"{1,9}"),db=W(g,"{2,4}"),$a=W(g,"{4,6}"),zb=Vb=>({regex:RegExp(Vb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([r])=>r,literal:!0}),ta=(Vb=>{if(a.literal)return zb(Vb);switch(Vb.val){case "G":return oa(g.eras("short",!1),0);case "GG":return oa(g.eras("long",!1),0);case "y":return fa(cb);case "yy":return fa(db,z);case "yyyy":return fa(qa);case "yyyyy":return fa($a);case "yyyyyy":return fa(za);case "M":return fa(Ka);
case "MM":return fa(ba);case "MMM":return oa(g.months("short",!0,!1),1);case "MMMM":return oa(g.months("long",!0,!1),1);case "L":return fa(Ka);case "LL":return fa(ba);case "LLL":return oa(g.months("short",!1,!1),1);case "LLLL":return oa(g.months("long",!1,!1),1);case "d":return fa(Ka);case "dd":return fa(ba);case "o":return fa(Qa);case "ooo":return fa(ja);case "HH":return fa(ba);case "H":return fa(Ka);case "hh":return fa(ba);case "h":return fa(Ka);case "mm":return fa(ba);case "m":return fa(Ka);case "q":return fa(Ka);
case "qq":return fa(ba);case "s":return fa(Ka);case "ss":return fa(ba);case "S":return fa(Qa);case "SSS":return fa(ja);case "u":return ua(d);case "uu":return ua(Ka);case "uuu":return fa(I);case "a":return oa(g.meridiems(),0);case "kkkk":return fa(qa);case "kk":return fa(db,z);case "W":return fa(Ka);case "WW":return fa(ba);case "E":case "c":return fa(I);case "EEE":return oa(g.weekdays("short",!1,!1),1);case "EEEE":return oa(g.weekdays("long",!1,!1),1);case "ccc":return oa(g.weekdays("short",!0,!1),
1);case "cccc":return oa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return wa(new RegExp(`([+-]${Ka.source})(?::(${ba.source}))?`),2);case "ZZZ":return wa(new RegExp(`([+-]${Ka.source})(${ba.source})?`),2);case "z":return ua(/[a-z_+-/]{1,256}?/i);case " ":return ua(/[^\S\n\r]/);default:return zb(Vb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ta.token=a;return ta}function Ba(a){return[`^${a.map(g=>g.regex).reduce((g,I)=>`${g}(${I.source})`,"")}$`,a]}function Fa(a,
g,I){if(a=a.match(g)){g={};let ba=1;for(const ja in I)if(e(I,ja)){const qa=I[ja],za=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(g[qa.token.val[0]]=qa.deser(a.slice(ba,ba+za)));ba+=za}return[a,g]}return[a,{}]}function Ra(a){const g=ja=>{switch(ja){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let I=null,ba;k(a.z)||(I=Ub.create(a.z));k(a.Z)||(I||(I=new Fb(a.Z)),ba=a.Z);k(a.q)||(a.M=3*(a.q-1)+1);k(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);k(a.u)||(a.S=K(a.u));return[Object.keys(a).reduce((ja,qa)=>{const za=g(qa);za&&(ja[za]=a[qa]);return ja},{}),I,ba]}function Oa(a,g){return Array.prototype.concat(...a.map(I=>{if(!I.literal){var ba=Ab.macroTokenToFormatOpts(I.val);ba=Sa(ba,
g);I=null==ba||ba.includes(void 0)?I:ba}return I}))}function Ta(a,g,I){I=Oa(Ab.parseFormat(I),a);var ba=I.map($a=>Ea($a,a));const ja=ba.find($a=>$a.invalidReason);if(ja)return{input:g,tokens:I,invalidReason:ja.invalidReason};const [qa,za]=Ba(ba);ba=RegExp(qa,"i");const [Ka,Qa]=Fa(g,ba,za),[cb,d,db]=Qa?Ra(Qa):[null,null,void 0];if(e(Qa,"a")&&e(Qa,"H"))throw new V("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:I,regex:ba,rawMatches:Ka,matches:Qa,result:cb,zone:d,specificOffset:db}}
function Sa(a,g){if(!a)return null;g=Ab.create(g,a);var I=g.formatDateTimeParts;Oc||(Oc=bb.fromMillis(1555555555555));return I.call(g,Oc).map(ba=>{{const {type:qa,value:za}=ba;if("literal"===qa)ba=/^\s+$/.test(za),ba={literal:!ba,val:ba?" ":za};else{ba=a[qa];var ja=we[qa];"object"===typeof ja&&(ja=ja[ba]);ba=ja?{literal:!1,val:ja}:void 0}}return ba})}function La(a,g){return new Qb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Va(a,g,I){g=new Date(Date.UTC(a,
g-1,I));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function ab(a,g){a=n(a)?Pc:Qc;const I=a.findIndex(ba=>ba<g);return{month:I+1,day:g-a[I]}}function xa(a){const {year:g,month:I,day:ba}=a;var ja=ba+(n(g)?Pc:Qc)[I-1];const qa=Va(g,I,ba);ja=Math.floor((ja-qa+10)/7);let za;1>ja?(za=g-1,ja=D(za)):ja>D(g)?(za=g+1,ja=1):za=g;return{weekYear:za,weekNumber:ja,weekday:qa,...p(a)}}function wb(a){const {weekYear:g,weekNumber:I,weekday:ba}=a;var ja=Va(g,1,4),qa=n(g)?
366:365;ja=7*I+ba-ja-3;1>ja?(qa=g-1,ja+=n(qa)?366:365):ja>qa?(qa=g+1,ja-=n(g)?366:365):qa=g;const {month:za,day:Ka}=ab(qa,ja);return{year:qa,month:za,day:Ka,...p(a)}}function sb(a){const {year:g,month:I,day:ba}=a;var ja=ba+(n(g)?Pc:Qc)[I-1];return{year:g,ordinal:ja,...p(a)}}function ib(a){const {year:g,ordinal:I}=a,{month:ba,day:ja}=ab(g,I);return{year:g,month:ba,day:ja,...p(a)}}function b(a){const g=T(a.year),I=u(a.month,1,12),ba=u(a.day,1,C(a.year,a.month));return g?I?ba?!1:La("day",a.day):La("month",
a.month):La("year",a.year)}function hb(a){const {hour:g,minute:I,second:ba,millisecond:ja}=a;a=u(g,0,23)||24===g&&0===I&&0===ba&&0===ja;const qa=u(I,0,59),za=u(ba,0,59),Ka=u(ja,0,999);return a?qa?za?Ka?!1:La("millisecond",ja):La("second",ba):La("minute",I):La("hour",g)}function Ib(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Rb(a){null===a.weekData&&(a.weekData=xa(a.c));return a.weekData}function nb(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new bb({...a,...g,old:a})}function la(a,g,I){let ba=a-6E4*g;const ja=I.offset(ba);if(g===ja)return[ba,g];ba-=6E4*(ja-g);g=I.offset(ba);return ja===g?[ba,ja]:[a-6E4*Math.min(ja,g),Math.max(ja,g)]}function hc(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Tb(a,g,I){return la(w(a),g,I)}function Db(a,g){const I=a.o;var ba=a.c.year+
Math.trunc(g.years);const ja=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);ba={...a.c,year:ba,month:ja,day:Math.min(a.c.day,C(ba,ja))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=jb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");ba=w(ba);let [qa,za]=
la(ba,I,a.zone);0!==g&&(qa+=g,za=a.zone.offset(qa));return{ts:qa,o:za}}function Jb(a,g,I,ba,ja,qa){const {setZone:za,zone:Ka}=I;return a&&0!==Object.keys(a).length||g?(a=bb.fromObject(a,{...I,zone:g||Ka,specificOffset:qa}),za?a:a.setZone(Ka)):bb.invalid(new Qb("unparsable",`the input "${ja}" can't be parsed as ${ba}`))}function ac(a,g,I=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:I,forceSimple:!0}).formatDateTimeFromString(a,g):null}function Yb(a,g){const I=9999<a.c.year||0>a.c.year;
let ba="";I&&0<=a.c.year&&(ba+="+");ba+=M(a.c.year,I?6:4);g?(ba=ba+"-"+M(a.c.month),ba=ba+"-"+M(a.c.day)):(ba+=M(a.c.month),ba+=M(a.c.day));return ba}function ic(a,g,I,ba,ja,qa){let za=M(a.c.hour);g?(za=za+":"+M(a.c.minute),0===a.c.second&&I||(za+=":")):za+=M(a.c.minute);0===a.c.second&&I||(za+=M(a.c.second),0===a.c.millisecond&&ba||(za=za+"."+M(a.c.millisecond,3)));ja&&(a.isOffsetFixed&&0===a.offset&&!qa?za+="Z":0>a.o?(za=za+"-"+M(Math.trunc(-a.o/60)),za=za+":"+M(Math.trunc(-a.o%60))):(za=za+"+"+
M(Math.trunc(a.o/60)),za=za+":"+M(Math.trunc(a.o%60))));qa&&(za+="["+a.zone.ianaName+"]");return za}function Eb(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new pa(a);return g}function Sb(a,g){const I=h(g.zone,yb.defaultZone);g=rb.fromObject(g);const ba=yb.now();var ja;if(k(a.year))a=ba;else{for(const qa of ld)k(a[qa])&&(a[qa]=md[qa]);if(ja=b(a)||hb(a))return bb.invalid(ja);ja=I.offset(ba);[a,ja]=Tb(a,ja,I)}return new bb({ts:a,zone:I,loc:g,o:ja})}function kb(a,g,I){const ba=k(I.round)?!0:I.round,ja=(za,Ka)=>{za=F(za,ba||I.calendary?0:2,!0);return g.loc.clone(I).relFormatter(I).format(za,
Ka)},qa=za=>I.calendary?g.hasSame(a,za)?0:g.startOf(za).diff(a.startOf(za),za).get(za):g.diff(a,za).get(za);if(I.unit)return ja(qa(I.unit),I.unit);for(const za of I.units){const Ka=qa(za);if(1<=Math.abs(Ka))return ja(Ka,za)}return ja(a>g?-0:0,I.units[I.units.length-1])}function Gb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Hb(a){if(bb.isDateTime(a))return a;if(a&&a.valueOf&&q(a.valueOf()))return bb.fromJSDate(a);
if(a&&"object"===typeof a)return bb.fromObject(a);throw new Ca(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Za extends Error{}class bc extends Za{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class U extends Za{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class ea extends Za{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class V extends Za{}class pa extends Za{constructor(a){super(`Invalid unit ${a}`)}}class Ca extends Za{}class Ga extends Za{constructor(){super("Zone is an abstract class")}}
const Pa={year:"numeric",month:"numeric",day:"numeric"},Xa={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},lb={year:"numeric",month:"long",day:"numeric",weekday:"long"},xb={hour:"numeric",minute:"numeric"},Kb={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class jc{get type(){throw new Ga;}get name(){throw new Ga;}get ianaName(){return this.name}get isUniversal(){throw new Ga;}offsetName(a,g){throw new Ga;}formatOffset(a,g){throw new Ga;}offset(a){throw new Ga;}equals(a){throw new Ga;}get isValid(){throw new Ga;}}let Rc=null;class nc extends jc{static get instance(){null===
Rc&&(Rc=new nc);return Rc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:g,locale:I}){return x(a,g,I)}formatOffset(a,g){return G(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Ub extends jc{static create(a){pc[a]||(pc[a]=new Ub(a));return pc[a]}static resetCache(){pc=
{};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Ub.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:I}){return x(a,g,I,this.name)}formatOffset(a,g){return G(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;
oc[g]||(oc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));g=oc[g];if(g.formatToParts){g=g.formatToParts(a);var I=[];for(let d=0;d<g.length;d++){const {type:db,value:$a}=g[d],zb=ye[db];"era"===db?I[zb]=$a:k(zb)||(I[zb]=parseInt($a,10))}g=I}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,db,$a,zb,ta,Vb,r]=g;g=[$a,d,db,zb,
ta,Vb,r]}let [ba,ja,qa,za,Ka,Qa,cb]=g;"BC"===za&&(ba=-Math.abs(ba)+1);g=w({year:ba,month:ja,day:qa,hour:24===Ka?0:Ka,minute:Qa,second:cb,millisecond:0});a=+a;I=a%1E3;return(g-(a-(0<=I?I:1E3+I)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let hd={},Hc={},Ic={},Jc={},qc=null;class ze{constructor(a,g,I){this.padTo=I.padTo||0;this.floor=I.floor||!1;const {padTo:ba,floor:ja,...qa}=I;if(!g||0<Object.keys(qa).length)g={useGrouping:!1,...I},0<I.padTo&&(g.minimumIntegerDigits=
I.padTo),this.inf=aa(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):F(a,3);return M(a,this.padTo)}}class Ae{constructor(a,g,I){this.opts=I;I=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(I=a.offset/60*-1,I=0<=I?`Etc/GMT+${I}`:`Etc/GMT${I}`,0!==a.offset&&Ub.create(I).valid?this.dt=a:(I="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,I=a.zone.name):(I="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||I;this.dtf=ia(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const I=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...g,value:I}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,g,I){this.opts={style:"long",...I};!g&&N()&&(this.rtf=S(a,I))}format(a,g){return this.rtf?this.rtf.format(a,g):va(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,I,ba=!1){a=
a||yb.defaultLocale;var ja;(ja=a)||(ba?ba="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),ba=qc),ja=ba);return new rb(ja,g||yb.defaultNumberingSystem,I||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:I}={}){return rb.create(a,g,I)}constructor(a,g,I,ba){var ja=a.indexOf("-x-");-1!==ja&&(a=a.substring(0,ja));ja=a.indexOf("-u-");if(-1===ja)var qa=[a];else{try{qa=ia(a).resolvedOptions();var za=
a}catch($a){za=a.substring(0,ja),qa=ia(za).resolvedOptions()}const {numberingSystem:d,calendar:db}=qa;qa=[za,d,db]}const [Ka,Qa,cb]=qa;this.locale=Ka;this.numberingSystem=g||Qa||null;this.outputCalendar=I||cb||null;g=this.locale;I=this.numberingSystem;if((qa=this.outputCalendar)||I)g.includes("-u-")||(g+="-u"),qa&&(g+=`-ca-${qa}`),I&&(g+=`-nu-${I}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
ba;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,I=!0){return H(this,a,I,t,()=>{const ba=g?{month:a,day:"numeric"}:{month:a},ja=g?"format":"standalone";this.monthsCache[ja][a]||(this.monthsCache[ja][a]=
P(qa=>this.extract(qa,ba,"month")));return this.monthsCache[ja][a]})}weekdays(a,g=!1,I=!0){return H(this,a,I,X,()=>{const ba=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ja=g?"format":"standalone";this.weekdaysCache[ja][a]||(this.weekdaysCache[ja][a]=R(qa=>this.extract(qa,ba,"weekday")));return this.weekdaysCache[ja][a]})}meridiems(a=!0){return H(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[bb.utc(2016,11,13,
9),bb.utc(2016,11,13,19)].map(I=>this.extract(I,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return H(this,a,g,ha,()=>{const I={era:a};this.eraCache[a]||(this.eraCache[a]=[bb.utc(-40,1,1),bb.utc(2017,1,1)].map(ba=>this.extract(ba,I,"era")));return this.eraCache[a]})}extract(a,g,I){return(a=this.dtFormatter(a,g).formatToParts().find(ba=>ba.type.toLowerCase()===I))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,
this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Sc=null;class Fb extends jc{static get utcInstance(){null===Sc&&(Sc=new Fb(0));return Sc}static instance(a){return 0===
a?Fb.utcInstance:new Fb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Fb(E(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${G(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${G(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return G(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends jc{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Tc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Uc=null,Fd=60,Gd;class yb{static get now(){return Tc}static set now(a){Tc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return h(Cd,
nc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Uc}static set defaultOutputCalendar(a){Uc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Ub.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Kc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Lc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),id="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Vc={D:Pa,DD:Xa,DDD:mb,DDDD:lb,t:xb,tt:Kb,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=
null,I="",ba=!1;const ja=[];for(let qa=0;qa<a.length;qa++){const za=a.charAt(qa);"'"===za?(0<I.length&&ja.push({literal:ba||/^\s+$/.test(I),val:I}),g=null,I="",ba=!ba):ba?I+=za:za===g?I+=za:(0<I.length&&ja.push({literal:/^\s+$/.test(I),val:I}),g=I=za)}0<I.length&&ja.push({literal:ba||/^\s+$/.test(I),val:I});return ja}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return M(a,
g);const I={...this.opts};0<g&&(I.padTo=g);return this.loc.numberFormatter(I).format(a)}formatDateTimeFromString(a,g){const I="en"===this.loc.listingMode(),ba=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ja=(d,db)=>this.loc.extract(a,d,db),qa=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",za=(d,db)=>I?t(d)[a.month-1]:ja(db?{month:d}:{month:d,day:"numeric"},"month"),Ka=(d,db)=>I?X(d)[a.weekday-1]:ja(db?{weekday:d}:{weekday:d,month:"long",
day:"numeric"},"weekday"),Qa=d=>{const db=Ab.macroTokenToFormatOpts(d);return db?this.formatWithSystemDefault(a,db):d},cb=d=>I?ha(d)[0>a.year?0:1]:ja({era:d},"era");return Da(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return I?Bd[12>a.hour?0:1]:ja({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ba?ja({day:"numeric"},"day"):this.num(a.day);case "dd":return ba?ja({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ka("short",!0);case "cccc":return Ka("long",!0);case "ccccc":return Ka("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ka("short",!1);case "EEEE":return Ka("long",
!1);case "EEEEE":return Ka("narrow",!1);case "L":return ba?ja({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ba?ja({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return za("short",!0);case "LLLL":return za("long",!0);case "LLLLL":return za("narrow",!0);case "M":return ba?ja({month:"numeric"},"month"):this.num(a.month);case "MM":return ba?ja({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return za("short",!1);case "MMMM":return za("long",
!1);case "MMMMM":return za("narrow",!1);case "y":return ba?ja({year:"numeric"},"year"):this.num(a.year);case "yy":return ba?ja({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ba?ja({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ba?ja({year:"numeric"},"year"):this.num(a.year,6);case "G":return cb("short");case "GG":return cb("long");case "GGGGG":return cb("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Qa(d)}})}formatDurationFromString(a,g){const I=ja=>{switch(ja[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};g=Ab.parseFormat(g);const ba=g.reduce((ja,{literal:qa,val:za})=>qa?ja:ja.concat(za),[]);a=a.shiftTo(...ba.map(I).filter(ja=>ja));return Da(g,(ja=>qa=>{const za=I(qa);return za?this.num(ja.get(za),qa.length):qa})(a))}}class Qb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Wc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Wc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Xc=RegExp(`(?:T${Jd.source})?`),Ce=Ma("weekYear","weekNumber","weekDay"),Kd=Ma("year","ordinal"),Ld=RegExp(`${Wc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Wc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ha(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Xc),Je=Ha(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Xc),Ke=Ha(/(\d{4})-?(\d{3})/,Xc),Le=Ha(Jd),Od=Ia(function(a,g){return[{year:Wa(a,g),month:Wa(a,g+1,1),day:Wa(a,g+2,1)},null,g+3]},Ya,Ua,gb),Me=Ia(Ce,Ya,Ua,gb),Ne=Ia(Kd,Ya,Ua,gb),Oe=Ia(Ya,Ua,gb),Pe=Ia(Ya),Qe=Ha(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ha(Ld),Se=Ia(Ya,Ua,gb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=cc.slice(0).reverse();
class jb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let I=g?Ue:Te;a.matrix&&(I=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=I;this.isLuxonDuration=!0}static fromMillis(a,g){return jb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Ca(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new jb({values:J(a,
jb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(q(a))return jb.fromMillis(a);if(jb.isDuration(a))return a;if("object"===typeof a)return jb.fromObject(a);throw new Ca(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [I]=Ja(a,[De,na]);return I?jb.fromObject(I,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [I]=Ja(a,[Nd,Pe]);return I?
jb.fromObject(I,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Ca("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new ea(a);return new jb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new pa(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=cc.map(I=>{const ba=this.values[I];return k(ba)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:I.slice(0,-1)}).format(ba)}).filter(I=>I);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=F(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let I="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(I+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(I+=".SSS"));g=g.toFormat(I);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);const g=
{};for(const I of cc)if(e(a.values,I)||e(this.values,I))g[I]=a.get(I)+this.get(I);return da(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const I of Object.keys(this.values))g[I]=ca(a(this.values[I],I));return da(this,{values:g},!0)}get(a){return this[jb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...J(a,jb.normalizeUnit)};return da(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:I,matrix:ba}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:ba,conversionAccuracy:I};return da(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();sa(this.matrix,a);return da(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [I,ba]of Object.entries(a))0!==ba&&(g[I]=ba);return da(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>jb.normalizeUnit(qa));const g={},I={},ba=this.toObject();let ja;for(const qa of cc)if(0<=a.indexOf(qa)){ja=qa;let za=0;for(const Qa in I)za+=this.matrix[Qa][qa]*I[Qa],I[Qa]=0;q(ba[qa])&&(za+=ba[qa]);const Ka=Math.trunc(za);g[qa]=Ka;I[qa]=(1E3*za-1E3*Ka)/1E3;for(const Qa in ba)cc.indexOf(Qa)>cc.indexOf(qa)&&ka(this.matrix,ba,Qa,g,qa)}else q(ba[qa])&&(I[qa]=ba[qa]);for(const qa in I)0!==I[qa]&&(g[ja]+=qa===ja?I[qa]:I[qa]/this.matrix[ja][qa]);return da(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return da(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ba of cc){var g=this.values[ba];var I=a.values[ba];g=void 0===g||0===g?void 0===I||0===I:g===I;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Ca("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new U(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Hb(a);g=Hb(g);var I=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==I?new vb({start:a,end:g}):I}static after(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [I,ba]=(a||"").split("/",2);if(I&&ba){let za;try{var ja=bb.fromISO(I,g);za=ja.isValid}catch(Qa){za=!1}let Ka;try{var qa=bb.fromISO(ba,g);Ka=qa.isValid}catch(Qa){Ka=!1}if(za&&Ka)return vb.fromDateTimes(ja,qa);if(za){if(qa=jb.fromISO(ba,g),qa.isValid)return vb.after(ja,qa)}else if(Ka&&(ja=jb.fromISO(I,g),ja.isValid))return vb.before(qa,ja)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),I=this.end.startOf(a);return Math.floor(I.diff(g,a).get(a))+(I.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Hb).filter(qa=>this.contains(qa)).sort();const g=[];let {s:I}=this,ba=0;for(;I<this.e;){var ja=a[ba]||this.e;ja=+ja>+this.e?
this.e:ja;g.push(vb.fromDateTimes(I,ja));I=ja;ba+=1}return g}splitBy(a){a=jb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,I=1;const ba=[];for(;g<this.e;){var ja=this.start.plus(a.mapUnits(qa=>qa*I));ja=+ja>+this.e?this.e:ja;ba.push(vb.fromDateTimes(g,ja));g=ja;I+=1}return ba}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,I]=a.sort((ba,ja)=>ba.s-ja.s).reduce(([ba,ja],qa)=>
ja?ja.overlaps(qa)||ja.abutsStart(qa)?[ba,ja.union(qa)]:[ba.concat([ja]),qa]:[ba,qa],[[],null]);I&&g.push(I);return g}static xor(a){let g=null,I=0;const ba=[];a=a.map(ja=>[{time:ja.s,type:"s"},{time:ja.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ja,qa)=>ja.time-qa.time);for(const ja of a)I+="s"===ja.type?1:-1,1===I?g=ja.time:(g&&+g!==+ja.time&&ba.push(vb.fromDateTimes(g,ja.time)),g=null);return vb.merge(ba)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Pa,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):jb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const g=bb.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Ub.isValidZone(a)}static normalizeZone(a){return h(a,yb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:I=null,locObj:ba=null,outputCalendar:ja="gregory"}={}){return(ba||rb.create(g,I,ja)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:I=null,locObj:ba=null,outputCalendar:ja="gregory"}={}){return(ba||rb.create(g,I,ja)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:I=null,locObj:ba=null}={}){return(ba||rb.create(g,I,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:I=null,locObj:ba=null}=
{}){return(ba||rb.create(g,I,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:N()}}}const Mc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},jd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Mc.hanidec.replace(/[\[|\]]/g,"").split(""),kd=`[ ${String.fromCharCode(160)}]`,Nc=new RegExp(kd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Oc=null;const Qc=[0,31,59,90,120,151,181,212,243,273,304,334],Pc=[0,31,60,91,121,152,182,213,244,274,305,335],md={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ld="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class bb{constructor(a){const g=a.zone||yb.defaultZone;let I=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(g.isValid?null:Ib(g));this.ts=k(a.ts)?yb.now():a.ts;let ba=null;var ja=null;I||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[ba,ja]=[a.old.c,a.old.o]:(ja=g.offset(this.ts),ba=hc(this.ts,ja),ba=(I=Number.isNaN(ba.year)?new Qb("invalid input"):null)?null:ba,ja=I?null:ja));this._zone=g;this.loc=a.loc||rb.create();this.invalid=I;this.weekData=null;this.c=ba;this.o=ja;this.isLuxonDateTime=
!0}static now(){return new bb({})}static local(){const [a,g]=Gb(arguments),[I,ba,ja,qa,za,Ka,Qa]=g;return Sb({year:I,month:ba,day:ja,hour:qa,minute:za,second:Ka,millisecond:Qa},a)}static utc(){const [a,g]=Gb(arguments),[I,ba,ja,qa,za,Ka,Qa]=g;a.zone=Fb.utcInstance;return Sb({year:I,month:ba,day:ja,hour:qa,minute:za,second:Ka,millisecond:Qa},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return bb.invalid("invalid input");const I=
h(g.zone,yb.defaultZone);return I.isValid?new bb({ts:a,zone:I,loc:rb.fromObject(g)}):bb.invalid(Ib(I))}static fromMillis(a,g={}){if(q(a))return-864E13>a||864E13<a?bb.invalid("Timestamp out of range"):new bb({ts:a,zone:h(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Ca(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(q(a))return new bb({ts:1E3*a,zone:h(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Ca("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var I=h(g.zone,yb.defaultZone);if(!I.isValid)return bb.invalid(Ib(I));var ba=yb.now();const ja=k(g.specificOffset)?I.offset(ba):g.specificOffset,qa=J(a,Eb);var za=!k(qa.ordinal),Ka=!k(qa.year),Qa=!k(qa.month)||!k(qa.day);Ka=Ka||Qa;var cb=qa.weekYear||qa.weekNumber;g=rb.fromObject(g);if((Ka||za)&&cb)throw new V("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Qa&&za)throw new V("Can't mix ordinal dates with month/day");Qa=cb||qa.weekday&&
!Ka;let d=hc(ba,ja);Qa?(ba=Xe,cb=Ve,d=xa(d)):za?(ba=Ye,cb=We,d=sb(d)):(ba=ld,cb=md);let db=!1;for(var $a of ba)k(qa[$a])?qa[$a]=db?cb[$a]:d[$a]:db=!0;Qa?($a=T(qa.weekYear),ba=u(qa.weekNumber,1,D(qa.weekYear)),cb=u(qa.weekday,1,7),$a=$a?ba?cb?!1:La("weekday",qa.weekday):La("week",qa.week):La("weekYear",qa.weekYear)):za?($a=T(qa.year),ba=u(qa.ordinal,1,n(qa.year)?366:365),$a=$a?ba?!1:La("ordinal",qa.ordinal):La("year",qa.year)):$a=b(qa);if($a=$a||hb(qa))return bb.invalid($a);za=Qa?wb(qa):za?ib(qa):
qa;const [zb,ta]=Tb(za,ja,I);I=new bb({ts:zb,zone:I,o:ta,loc:g});return qa.weekday&&Ka&&a.weekday!==I.weekday?bb.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${I.toISO()}`):I}static fromISO(a,g={}){const [I,ba]=Ja(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Jb(I,ba,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [I,ba]=Ja(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,Aa]);return Jb(I,ba,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [I,
ba]=Ja(a,[Fe,c],[Ge,c],[He,m]);return Jb(I,ba,g,"HTTP",g)}static fromFormat(a,g,I={}){if(k(a)||k(g))throw new Ca("fromFormat requires an input string and a format");const {locale:ba=null,numberingSystem:ja=null}=I,qa=rb.fromOpts({locale:ba,numberingSystem:ja,defaultToEN:!0}),{result:za,zone:Ka,specificOffset:Qa,invalidReason:cb}=Ta(qa,a,g),[d,db,$a,zb]=[za,Ka,Qa,cb];return zb?bb.invalid(zb):Jb(d,db,I,`format ${g}`,a,$a)}static fromString(a,g,I={}){return bb.fromFormat(a,g,I)}static fromSQL(a,g={}){const [I,
ba]=Ja(a,[Qe,Od],[Re,Se]);return Jb(I,ba,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Ca("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new bc(a);return new bb({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Sa(a,rb.fromObject(g)))?a.map(I=>I?I.val:null).join(""):null}static expandFormat(a,g={}){return Oa(Ab.parseFormat(a),rb.fromObject(g)).map(I=>I.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rb(this).weekYear:NaN}get weekNumber(){return this.isValid?Rb(this).weekNumber:NaN}get weekday(){return this.isValid?Rb(this).weekday:
NaN}get ordinal(){return this.isValid?sb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return n(this.year)}get daysInMonth(){return C(this.year,this.month)}get daysInYear(){return this.isValid?
n(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?D(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:I,calendar:ba}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:I,outputCalendar:ba}}toUTC(a=0,g={}){return this.setZone(Fb.instance(a),g)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:I=!1}={}){a=h(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ba=
this.ts;if(g||I)g=a.offset(this.ts),I=this.toObject(),[ba]=Tb(I,g,a);return nb(this,{ts:ba,zone:a})}return bb.invalid(Ib(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:I}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:I});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=J(a,Eb);var g=!k(a.weekYear)||!k(a.weekNumber)||!k(a.weekday);const I=!k(a.ordinal),ba=!k(a.year),ja=!k(a.month)||!k(a.day),qa=a.weekYear||
a.weekNumber;if((ba||ja||I)&&qa)throw new V("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ja&&I)throw new V("Can't mix ordinal dates with month/day");g?g=wb({...xa(this.c),...a}):k(a.ordinal)?(g={...this.toObject(),...a},k(a.day)&&(g.day=Math.min(C(g.year,g.month),g.day))):g=ib({...sb(this.c),...a});const [za,Ka]=Tb(g,this.o,this.zone);return nb(this,{ts:za,o:Ka})}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return nb(this,Db(this,a))}minus(a){if(!this.isValid)return this;
a=jb.fromDurationLike(a).negate();return nb(this,Db(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=jb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Pa,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:I=!1,includeOffset:ba=!0,extendedZone:ja=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
Yb(this,a);return qa=qa+"T"+ic(this,a,g,I,ba,ja)}toISODate({format:a="extended"}={}){return this.isValid?Yb(this,"extended"===a):null}toISOWeekDate(){return ac(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:I=!0,includePrefix:ba=!1,extendedZone:ja=!1,format:qa="extended"}={}){return this.isValid?(ba?"T":"")+ic(this,"extended"===qa,g,a,I,ja):null}toRFC2822(){return ac(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ac(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Yb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:I=!0}={}){let ba="HH:mm:ss.SSS";if(g||a)I&&(ba+=" "),g?ba+="z":a&&(ba+="ZZ");return ac(this,ba,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",I={}){if(!this.isValid||!a.isValid)return jb.invalid("created by diffing an invalid DateTime");I={locale:this.locale,numberingSystem:this.numberingSystem,...I};
const ba=(Array.isArray(g)?g:[g]).map(jb.normalizeUnit);g=a.valueOf()>this.valueOf();a=Z(g?this:a,g?a:this,ba,I);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(bb.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const I=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=I&&I<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||bb.fromObject({},{zone:this.zone}),I=a.padding?this<g?-a.padding:a.padding:0;let ba="years months days hours minutes seconds".split(" "),ja=a.unit;Array.isArray(a.unit)&&(ba=a.unit,ja=void 0);return kb(g,this.plus(I),{...a,numeric:"always",units:ba,unit:ja})}toRelativeCalendar(a={}){return this.isValid?kb(a.base||bb.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(bb.isDateTime))throw new Ca("min requires all arguments be DateTimes");
return Q(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(bb.isDateTime))throw new Ca("max requires all arguments be DateTimes");return Q(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,I={}){const {locale:ba=null,numberingSystem:ja=null}=I;I=rb.fromOpts({locale:ba,numberingSystem:ja,defaultToEN:!0});return Ta(I,a,g)}static fromStringExplain(a,g,I={}){return bb.fromFormatExplain(a,g,I)}static get DATE_SHORT(){return Pa}static get DATE_MED(){return Xa}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return lb}static get TIME_SIMPLE(){return xb}static get TIME_WITH_SECONDS(){return Kb}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
l.DateTime=bb;l.Duration=jb;l.FixedOffsetZone=Fb;l.IANAZone=Ub;l.Info=lc;l.Interval=vb;l.SystemZone=nc;l.Zone=jc})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(l,f,ia){var aa={};(function(P){(function(R,H){P.exports&&(P.exports=H())})(ia.commonjsGlobal,function(){function R(h,k,q,T){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,R.prototype);h.expected=k;h.found=q;h.location=T;h.name=
"SyntaxError";return h}function H(h,k,q){q=q||" ";if(h.length>k)return h;k-=h.length;q+=q.repeat(k);return h+q.slice(0,k)}(function(h,k){function q(){this.constructor=h}q.prototype=k.prototype;h.prototype=new q})(R,Error);R.prototype.format=function(h){var k="Error: "+this.message;if(this.location){var q=null,T;for(T=0;T<h.length;T++)if(h[T].source===this.location.source){q=h[T].text.split(/\r\n|\n|\r/g);break}h=this.location.start;T=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(h):h;var N=this.location.source+":"+T.line+":"+T.column;if(q){var Q=this.location.end,B=H("",T.line.toString().length," ");q=q[h.line-1];Q=(h.line===Q.line?Q.column:q.length+1)-h.column||1;k+="\n --\x3e "+N+"\n"+B+" |\n"+T.line+" | "+q+"\n"+B+" | "+H("",h.column-1," ")+H("",Q,"^")}else k+="\n at "+N}return k};R.buildMessage=function(h,k){function q(e){return e.charCodeAt(0).toString(16).toUpperCase()}function T(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+q(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+q(u)})}function N(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+q(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+q(u)})}function Q(e){return B[e.type](e)}
var B={literal:function(e){return'"'+T(e.text)+'"'},class:function(e){var u=e.parts.map(function(M){return Array.isArray(M)?N(M[0])+"-"+N(M[1]):N(M)});return"["+(e.inverted?"^":"")+u.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){e=e.map(Q);var u,M;e.sort();if(0<e.length){for(M=u=1;u<e.length;u++)e[u-1]!==e[u]&&(e[M]=e[u],M++);e.length=M}switch(e.length){case 1:return e[0];case 2:return e[0]+
" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(h)+" but "+(k?'"'+T(k)+'"':"end of input")+" found."};return{SyntaxError:R,parse:function(h,k){function q(r,A){return{type:"literal",text:r,ignoreCase:A}}function T(r,A,Y){return{type:"class",parts:r,inverted:A,ignoreCase:Y}}function N(r){var A=db[r],Y;if(!A){for(Y=r-1;!db[Y];)Y--;A=db[Y];for(A={line:A.line,column:A.column};Y<r;)10===h.charCodeAt(Y)?(A.line++,A.column=1):A.column++,Y++;db[r]=A}return A}function Q(r,A,Y){var ya=
N(r),Na=N(A);r={source:hb,start:{offset:r,line:ya.line,column:ya.column},end:{offset:A,line:Na.line,column:Na.column}};Y&&hb&&"function"===typeof hb.offset&&(r.start=hb.offset(r.start),r.end=hb.offset(r.end));return r}function B(r){d<$a||(d>$a&&($a=d,zb=[]),zb.push(r))}function e(){var r=d;xa();var A=M();A!==b?(xa(),r=A):(d=r,r=b);return r}function u(){var r=d;var A=M();if(A!==b){r=[];var Y=d;var ya=xa();var Na=La();if(Na!==b){var eb=xa();var fb=M();fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)}else d=Y,Y=
b;for(;Y!==b;)r.push(Y),Y=d,ya=xa(),Na=La(),Na!==b?(eb=xa(),fb=M(),fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)):(d=Y,Y=b);Y={type:"expression-list"};A=[A];for(ya=0;ya<r.length;ya++)A.push(r[ya][3]);Y.value=A;r=Y}else d=r,r=b;return r}function M(){var r=d;var A=L();if(A!==b){r=[];var Y=d;var ya=xa();var Na=sa();if(Na!==b){var eb=xa();var fb=L();fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)r.push(Y),Y=d,ya=xa(),Na=sa(),Na!==b?(eb=xa(),fb=L(),fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)):(d=Y,Y=b);r=
ib(A,r)}else d=r,r=b;return r}function L(){var r=d;var A=v();if(A!==b){r=[];var Y=d;var ya=xa();var Na=ka();if(Na!==b){var eb=xa();var fb=v();fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)r.push(Y),Y=d,ya=xa(),Na=ka(),Na!==b?(eb=xa(),fb=v(),fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)):(d=Y,Y=b);r=ib(A,r)}else d=r,r=b;return r}function v(){var r=d;var A=da();if(A===b){A=d;if(33===h.charCodeAt(d)){var Y=nb;d++}else Y=b,0===ta&&B(ne);if(Y!==b){var ya=d;ta++;if(61===h.charCodeAt(d)){var Na=la;
d++}else Na=b,0===ta&&B(Lc);ta--;Na===b?ya=void 0:(d=ya,ya=b);ya!==b?A=Y=[Y,ya]:(d=A,A=b)}else d=A,A=b}A!==b?(Y=xa(),ya=v(),ya!==b?r={type:"unary-expression",operator:"NOT",expr:ya}:(d=r,r=b)):(d=r,r=b);if(r===b){A=d;r=C();if(r!==b){xa();A=[];Y=d;ya=xa();Na=K();if(Na!==b){var eb=xa();var fb=C();fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)}else d=Y,Y=b;if(Y!==b)for(;Y!==b;)A.push(Y),Y=d,ya=xa(),Na=K(),Na!==b?(eb=xa(),fb=C(),fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)):(d=Y,Y=b);else A=b;A!==b&&(A={type:"arithmetic",
tail:A});A===b&&(A=d,Y=n(),Y!==b?(xa(),ya=Va(),ya!==b?(xa(),ya=u(),ya!==b?(xa(),Na=ab(),Na!==b?A={op:Y,right:ya}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=n(),Y!==b?(xa(),ya=Va(),ya!==b?(xa(),ya=ab(),ya!==b?A={op:Y,right:{type:"expression-list",value:[]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=n(),Y!==b?(xa(),ya=p(),ya!==b?A={op:Y,right:ya}:(d=A,A=b)):(d=A,A=b))),A===b&&(A=d,Na=da(),Na!==b?(xa(),Y=y(),Y!==b?(xa(),ya=C(),ya!==b?(xa(),eb=ka(),eb!==b?(xa(),Na=C(),Na!==b?A={op:"NOT"+
Y,right:{type:"expression-list",value:[ya,Na]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Na=y(),Na!==b?(xa(),Y=C(),Y!==b?(xa(),ya=ka(),ya!==b?(xa(),eb=C(),eb!==b?A={op:Na,right:{type:"expression-list",value:[Y,eb]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,Y=c(),Y!==b?(xa(),ya=da(),ya!==b?(xa(),ya=C(),ya!==b?A={op:Y+"NOT",right:ya}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=c(),Y!==b?(xa(),ya=C(),ya!==b?A={op:Y,right:ya}:(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,
Y=F(),Y!==b?(xa(),ya=Ha(),ya!==b?(xa(),Na=d,h.substr(d,6).toLowerCase()===ob?(eb=h.substr(d,6),d+=6):(eb=b,0===ta&&B(Od)),eb!==b?(eb=d,ta++,fb=J(),ta--,fb===b?eb=void 0:(d=eb,eb=b),eb!==b?Na="ESCAPE":(d=Na,Na=b)):(d=Na,Na=b),Na!==b?(xa(),Na=Ia(),Na!==b?A={op:Y,right:ya,escape:Na.value}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=F(),Y!==b?(xa(),ya=Ha(),ya!==b?A={op:Y,right:ya,escape:""}:(d=A,A=b)):(d=A,A=b))))));A===b&&(A=null);""==A||void 0==A||null==A?A=r:(Y=null,A=Y="arithmetic"==
A.type?ib(r,A.tail):sb(A.op,r,A.right,A.escape))}else d=A,A=b;r=A}return r}function K(){if(h.substr(d,2)===hc){var r=hc;d+=2}else r=b,0===ta&&B(id);r===b&&(62===h.charCodeAt(d)?(r=Tb,d++):(r=b,0===ta&&B(pe)),r===b&&(h.substr(d,2)===Db?(r=Db,d+=2):(r=b,0===ta&&B(Bd)),r===b&&(h.substr(d,2)===Jb?(r=Jb,d+=2):(r=b,0===ta&&B(se)),r===b&&(60===h.charCodeAt(d)?(r=ac,d++):(r=b,0===ta&&B(re)),r===b&&(61===h.charCodeAt(d)?(r=la,d++):(r=b,0===ta&&B(Lc)),r===b&&(h.substr(d,2)===Yb?(r=Yb,d+=2):(r=b,0===ta&&B(qe))))))));
return r}function F(){var r=r=d;var A=da();if(A!==b){var Y=xa();var ya=m();ya!==b?r=A=[A,Y,ya]:(d=r,r=b)}else d=r,r=b;r!==b&&(r=r[0]+" "+r[2]);r===b&&(r=m());return r}function n(){var r=r=d;var A=da();if(A!==b){var Y=xa();var ya=Aa();ya!==b?r=A=[A,Y,ya]:(d=r,r=b)}else d=r,r=b;r!==b&&(r=r[0]+" "+r[2]);r===b&&(r=Aa());return r}function C(){var r=d;var A=D();if(A!==b){r=[];var Y=d;var ya=xa();var Na=w();if(Na!==b){var eb=xa();var fb=D();fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)r.push(Y),
Y=d,ya=xa(),Na=w(),Na!==b?(eb=xa(),fb=D(),fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)):(d=Y,Y=b);r=ib(A,r)}else d=r,r=b;return r}function w(){if(43===h.charCodeAt(d)){var r=ic;d++}else r=b,0===ta&&B(Vc);r===b&&(45===h.charCodeAt(d)?(r=Eb,d++):(r=b,0===ta&&B(Ab)),r===b&&(h.substr(d,2)===Sb?(r=Sb,d+=2):(r=b,0===ta&&B(Qb))));return r}function D(){var r=d;var A=x();if(A!==b){r=[];var Y=d;var ya=xa();var Na=z();if(Na!==b){var eb=xa();var fb=x();fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)r.push(Y),
Y=d,ya=xa(),Na=z(),Na!==b?(eb=xa(),fb=x(),fb!==b?Y=ya=[ya,Na,eb,fb]:(d=Y,Y=b)):(d=Y,Y=b);r=ib(A,r)}else d=r,r=b;return r}function z(){if(42===h.charCodeAt(d)){var r=kb;d++}else r=b,0===ta&&B(Hd);r===b&&(47===h.charCodeAt(d)?(r=Gb,d++):(r=b,0===ta&&B(Id)));return r}function x(){var r=Ia();if(r===b){var A=d;var Y=d;var ya=Ya();if(ya!==b){var Na=Ua();if(Na!==b){var eb=gb();eb!==b?Y=parseFloat(ya+Na+eb):(d=Y,Y=b)}else d=Y,Y=b}else d=Y,Y=b;Y===b&&(Y=d,ya=Ya(),ya!==b?(Na=Ua(),Na!==b?Y=parseFloat(ya+Na):
(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=Ya(),ya!==b?(Na=gb(),Na!==b?Y=parseFloat(ya+Na):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=Ya(),ya!==b&&(ya=parseFloat(ya)),Y=ya)));var fb=Y;if(fb!==b){var Qd=d;ta++;var Lf=ca();ta--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?A={type:"number",value:fb}:(d=A,A=b)}else d=A,A=b;r=A;if(r===b){var Yc=d;var rc=d;if(h.substr(d,4).toLowerCase()===pa){var Rd=h.substr(d,4);d+=4}else Rd=b,0===ta&&B(He);if(Rd!==b){var Zc=d;ta++;var Mf=J();ta--;Mf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Rd=[Rd,
Zc]:(d=rc,rc=b)}else d=rc,rc=b;var mc=rc;mc!==b&&(mc={type:"boolean",value:!0});Yc=mc;if(Yc===b){Yc=d;var sc=d;if(h.substr(d,5).toLowerCase()===Ca){var Sd=h.substr(d,5);d+=5}else Sd=b,0===ta&&B(Ie);if(Sd!==b){var $c=d;ta++;var Nf=J();ta--;Nf===b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Sd=[Sd,$c]:(d=sc,sc=b)}else d=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Yc=mc}r=Yc;if(r===b){var tc=d;if(h.substr(d,4).toLowerCase()===V){var Td=h.substr(d,4);d+=4}else Td=b,0===ta&&B(Ge);if(Td!==b){var ad=d;ta++;
var Of=J();ta--;Of===b?ad=void 0:(d=ad,ad=b);ad!==b?tc=Td=[Td,ad]:(d=tc,tc=b)}else d=tc,tc=b;var Ze=tc;Ze!==b&&(Ze={type:"null",value:null});r=Ze;if(r===b){var uc=d;if(fa()!==b){xa();var lf=Ha();lf!==b?uc={type:"date",value:lf.value}:(d=uc,uc=b)}else d=uc,uc=b;r=uc;if(r===b){var vc=d;if(W()!==b){xa();var mf=Ha();mf!==b?vc={type:"timestamp",value:mf.value}:(d=vc,vc=b)}else d=vc,vc=b;r=vc;if(r===b){var Bb=d;var $e=ma();if($e!==b){xa();if(45===h.charCodeAt(d)){var dc=Eb;d++}else dc=b,0===ta&&B(Ab);dc===
b&&(43===h.charCodeAt(d)?(dc=ic,d++):(dc=b,0===ta&&B(Vc)));if(dc!==b){xa();var bd=Ha();if(bd!==b){xa();var nf=X();nf!==b?Bb={type:"interval",value:bd,qualifier:nf,op:dc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=ma(),$e!==b?(xa(),dc=Ha(),dc!==b?(xa(),bd=X(),bd!==b?Bb={type:"interval",value:dc,qualifier:bd,op:""}:(d=Bb,Bb=b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));r=Bb}}}}}}var pb=r;if(pb===b){var Mb=d;var wc=d;if(h.substr(d,7).toLowerCase()===qd){var of=h.substr(d,7);d+=7}else of=
b,0===ta&&B(Pd);if(of!==b){var Ud=d;ta++;var Pf=J();ta--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?wc="EXTRACT":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){xa();var Qf=Va();if(Qf!==b){xa();var Wb=oa();Wb===b&&(Wb=wa(),Wb===b&&(Wb=ua(),Wb===b&&(Wb=Ea(),Wb===b&&(Wb=Ba(),Wb===b&&(Wb=Fa())))));var pf=Wb;if(pf!==b){xa();var Rf=O();if(Rf!==b){xa();var qf=M();if(qf!==b){xa();var Sf=ab();Sf!==b?Mb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Mb,Mb=b)}else d=Mb,
Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var xc=d;if(h.substr(d,9).toLowerCase()===pd){var rf=h.substr(d,9);d+=9}else rf=b,0===ta&&B(Se);if(rf!==b){var Vd=d;ta++;var Tf=J();ta--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?xc="SUBSTRING":(d=xc,xc=b)}else d=xc,xc=b;if(xc!==b){xa();var Uf=Va();if(Uf!==b){xa();var af=M();if(af!==b){xa();var Vf=O();if(Vf!==b){xa();var bf=M();if(bf!==b){xa();var ec=d;var yc=d;if(h.substr(d,3).toLowerCase()===od){var sf=h.substr(d,
3);d+=3}else sf=b,0===ta&&B(Re);if(sf!==b){var Wd=d;ta++;var Wf=J();ta--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?yc="FOR":(d=yc,yc=b)}else d=yc,yc=b;var cd=yc;if(cd!==b){var Xf=xa();var tf=M();if(tf!==b){var Yf=xa();ec=cd=[cd,Xf,tf,Yf]}else d=ec,ec=b}else d=ec,ec=b;ec===b&&(ec=null);cd=ab();cd!==b?Nb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[af,bf,ec[2]]:[af,bf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var tb=
d;var cf=Z();if(cf!==b){xa();var df=Va();if(df!==b){xa();var fc=t();fc===b&&(fc=null);xa();var dd=M();if(dd!==b){xa();var ef=O();if(ef!==b){xa();var uf=M();if(uf!==b){xa();var Zf=ab();Zf!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd,uf]}}:(d=tb,tb=b)}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b;tb===b&&(tb=d,cf=Z(),cf!==b?(xa(),df=Va(),df!==b?(xa(),fc=t(),fc===b&&(fc=null),xa(),dd=M(),dd!==b?(xa(),
ef=ab(),ef!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd]}}:(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b));pb=tb;if(pb===b){var Ob=d;var zc=d;if(h.substr(d,8).toLowerCase()===sd){var vf=h.substr(d,8);d+=8}else vf=b,0===ta&&B(Ue);if(vf!==b){var Xd=d;ta++;var $f=J();ta--;$f===b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?zc="POSITION":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){xa();var ag=Va();if(ag!==b){xa();var wf=M();if(wf!==b){xa();var bg=Aa();
if(bg!==b){xa();var xf=M();if(xf!==b){xa();var cg=ab();cg!==b?Ob={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Ob,Ob=b)}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b;pb=Ob;if(pb===b){var Pb=d;var Ac=d;if(h.substr(d,4).toLowerCase()===xd){var yf=h.substr(d,4);d+=4}else yf=b,0===ta&&B(Mc);if(yf!==b){var Yd=d;ta++;var dg=J();ta--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?Ac="CAST":(d=Ac,Ac=b)}else d=Ac,Ac=b;if(Ac!==b){xa();var eg=Va();if(eg!==
b){xa();var zf=M();if(zf!==b){xa();var Bc=d;if(h.substr(d,2).toLowerCase()===yd){var Af=h.substr(d,2);d+=2}else Af=b,0===ta&&B(jd);if(Af!==b){var Zd=d;ta++;var fg=J();ta--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Bc="AS":(d=Bc,Bc=b)}else d=Bc,Bc=b;var gg=Bc;if(gg!==b){xa();var qb=d;var Cc=d;if(h.substr(d,7).toLowerCase()===zd){var Bf=h.substr(d,7);d+=7}else Bf=b,0===ta&&B(ve);if(Bf!==b){var $d=d;ta++;var hg=J();ta--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Cc="INTEGER":(d=Cc,Cc=b)}else d=Cc,Cc=b;var ub=Cc;
ub!==b&&(ub={type:"data-type",value:{type:"integer"}});qb=ub;if(qb===b){qb=d;var Dc=d;if(h.substr(d,8).toLowerCase()===Ad){var Cf=h.substr(d,8);d+=8}else Cf=b,0===ta&&B(kd);if(Cf!==b){var ae=d;ta++;var ig=J();ta--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Dc="SMALLINT":(d=Dc,Dc=b)}else d=Dc,Dc=b;ub=Dc;ub!==b&&(ub={type:"data-type",value:{type:"smallint"}});qb=ub;if(qb===b){qb=d;var Ec=d;if(h.substr(d,5).toLowerCase()===jc){var Df=h.substr(d,5);d+=5}else Df=b,0===ta&&B(Nc);if(Df!==b){var be=d;ta++;var jg=
J();ta--;jg===b?be=void 0:(d=be,be=b);be!==b?Ec="FLOAT":(d=Ec,Ec=b)}else d=Ec,Ec=b;ub=Ec;ub!==b&&(ub={type:"data-type",value:{type:"float"}});qb=ub;if(qb===b){qb=d;var Fc=d;if(h.substr(d,4).toLowerCase()===Rc){var Ef=h.substr(d,4);d+=4}else Ef=b,0===ta&&B(we);if(Ef!==b){var ce=d;ta++;var kg=J();ta--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Fc="REAL":(d=Fc,Fc=b)}else d=Fc,Fc=b;ub=Fc;ub!==b&&(ub={type:"data-type",value:{type:"real"}});qb=ub;if(qb===b&&(qb=d,ub=fa(),ub!==b&&(ub={type:"data-type",value:{type:"date"}}),
qb=ub,qb===b&&(qb=d,ub=W(),ub!==b&&(ub={type:"data-type",value:{type:"timestamp"}}),qb=ub,qb===b))){qb=d;var Gc=d;if(h.substr(d,7).toLowerCase()===nc){var Ff=h.substr(d,7);d+=7}else Ff=b,0===ta&&B(Oc);if(Ff!==b){var de=d;ta++;var lg=J();ta--;lg===b?de=void 0:(d=de,de=b);de!==b?Gc="VARCHAR":(d=Gc,Gc=b)}else d=Gc,Gc=b;ub=Gc;if(ub!==b){xa();var mg=Va();if(mg!==b){xa();var Gf=na();if(Gf!==b){xa();var ng=ab();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=
b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){xa();var og=ab();og!==b?Pb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Pb,Pb=b)}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b;pb=Pb;if(pb===b){var kc=d;var ee;var Xb=d;Xb=ee=E();if(Xb===b)if(Xb=d,96===h.charCodeAt(d)?(ee=Tc,d++):(ee=b,0===ta&&B(Qa)),ee!==b){var fe=[];if(Kc.test(h.charAt(d))){var gc=h.charAt(d);d++}else gc=b,0===ta&&B(cb);if(gc!==b)for(;gc!==b;)fe.push(gc),Kc.test(h.charAt(d))?
(gc=h.charAt(d),d++):(gc=b,0===ta&&B(cb));else fe=b;fe!==b?(96===h.charCodeAt(d)?(gc=Tc,d++):(gc=b,0===ta&&B(Qa)),gc!==b?Xb=fe.join(""):(d=Xb,Xb=b)):(d=Xb,Xb=b)}else d=Xb,Xb=b;var If=Xb;if(If!==b){xa();var pg=Va();if(pg!==b){xa();var ge=u();ge===b&&(ge=null);xa();var qg=ab();qg!==b?kc={type:"function",name:If,args:ge?ge:{type:"expression-list",value:[]}}:(d=kc,kc=b)}else d=kc,kc=b}else d=kc,kc=b;pb=kc;if(pb===b){var Zb;var Cb=d;var ff=Ra();if(ff!==b){xa();var ed=M();if(ed!==b){xa();var fd=[];for(Zb=
Ma();Zb!==b;)fd.push(Zb),Zb=Ma();Zb=xa();var he=Oa();he!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Ra(),ff!==b)if(xa(),ed=M(),ed!==b){xa();fd=[];for(Zb=Ma();Zb!==b;)fd.push(Zb),Zb=Ma();Zb=xa();he=Wa();if(he!==b){xa();var rg=Oa();rg!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var $b;
var Lb=d;var hf=Ra();if(hf!==b){xa();var gd=[];for($b=Ja();$b!==b;)gd.push($b),$b=Ja();$b=xa();var ie=Oa();ie!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:null}:(d=Lb,Lb=b)}else d=Lb,Lb=b;if(Lb===b)if(Lb=d,hf=Ra(),hf!==b){xa();gd=[];for($b=Ja();$b!==b;)gd.push($b),$b=Ja();$b=xa();ie=Wa();if(ie!==b){xa();var sg=Oa();sg!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:ie.value}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b;gf=Lb}pb=gf;if(pb===b){var je;var ke=d;var Jf=
ca();if(Jf!==b){var Kf=[];for(je=G();je!==b;)Kf.push(je),je=G();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=p(),pb===b)){pb=d;var tg=Va();if(tg!==b){xa();var kf=M();if(kf!==b){xa();var ug=ab();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}
function E(){var r;var A=d;var Y=ca();if(Y!==b){A=[];for(r=J();r!==b;)A.push(r),r=J();A=Y+A.join("")}else d=A,A=b;return A}function ca(){if(Cd.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&B(Wc);return r}function J(){if(Dd.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&B(Jd);return r}function G(){if(Ed.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&B(Xc);return r}function p(){var r=d;if(64===h.charCodeAt(d)){var A=Hb;d++}else A=b,0===ta&&B(Ce);if(A!==b){var Y=E();
Y!==b?r=A=[A,Y]:(d=r,r=b)}else d=r,r=b;r!==b&&(r={type:"parameter",value:r[1]});return r}function t(){var r=d;if(h.substr(d,7).toLowerCase()===vd){var A=h.substr(d,7);d+=7}else A=b,0===ta&&B(jb);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="LEADING":(d=r,r=b)}else d=r,r=b;r===b&&(r=d,h.substr(d,8).toLowerCase()===wd?(A=h.substr(d,8),d+=8):(A=b,0===ta&&B(vb)),A!==b?(A=d,ta++,Y=J(),ta--,Y===b?A=void 0:(d=A,A=b),A!==b?r="TRAILING":(d=r,r=b)):(d=r,r=b),r===b&&(r=d,h.substr(d,4).toLowerCase()===
xe?(A=h.substr(d,4),d+=4):(A=b,0===ta&&B(lc)),A!==b?(A=d,ta++,Y=J(),ta--,Y===b?A=void 0:(d=A,A=b),A!==b?r="BOTH":(d=r,r=b)):(d=r,r=b)));return r}function X(){var r=d;var A=d;var Y=ha();if(Y!==b){xa();var ya=Va();if(ya!==b)if(xa(),ya=Da(),ya!==b){xa();var Na=ab();Na!==b?A={type:"interval-period",period:Y.value,precision:ya,secondary:null}:(d=A,A=b)}else d=A,A=b;else d=A,A=b}else d=A,A=b;A===b&&(A=d,Y=ha(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),A=Y);if(A!==
b)if(xa(),Y=d,h.substr(d,2).toLowerCase()===oc?(ya=h.substr(d,2),d+=2):(ya=b,0===ta&&B(Qc)),ya!==b?(ya=d,ta++,Na=J(),ta--,Na===b?ya=void 0:(d=ya,ya=b),ya!==b?Y="TO":(d=Y,Y=b)):(d=Y,Y=b),Y!==b){xa();Y=d;ya=ha();ya!==b&&(ya={type:"interval-period",period:ya.value,precision:null,secondary:null});Y=ya;if(Y===b){Y=d;ya=Fa();if(ya!==b)if(xa(),ya=Va(),ya!==b)if(xa(),ya=Da(),ya!==b)if(xa(),Na=La(),Na!==b)if(xa(),Na=va(),Na!==b){xa();var eb=ab();eb!==b?Y={type:"interval-period",period:"second",precision:ya,
secondary:Na}:(d=Y,Y=b)}else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=b;Y===b&&(Y=d,ya=Fa(),ya!==b?(xa(),ya=Va(),ya!==b?(xa(),ya=Da(),ya!==b?(xa(),Na=ab(),Na!==b?Y={type:"interval-period",period:"second",precision:ya,secondary:null}:(d=Y,Y=b)):(d=Y,Y=b)):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=Fa(),ya!==b&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),Y=ya))}Y!==b?r={type:"interval-qualifier",start:A,end:Y}:(d=r,r=b)}else d=r,r=b;else d=r,r=b;r===b&&(r=d,
Y=ha(),Y!==b?(xa(),A=Va(),A!==b?(xa(),A=va(),A!==b?(xa(),ya=ab(),ya!==b?r={type:"interval-period",period:Y.value,precision:A,secondary:null}:(d=r,r=b)):(d=r,r=b)):(d=r,r=b)):(d=r,r=b),r===b&&(r=d,Y=ha(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),r=Y,r===b&&(r=d,Y=Fa(),Y!==b?(xa(),A=Va(),A!==b?(xa(),A=Da(),A!==b?(xa(),ya=La(),ya!==b?(xa(),Y=va(),Y!==b?(xa(),ya=ab(),ya!==b?r={type:"interval-period",period:"second",precision:A,secondary:Y}:(d=r,r=b)):(d=r,r=b)):
(d=r,r=b)):(d=r,r=b)):(d=r,r=b)):(d=r,r=b),r===b&&(r=d,Y=Fa(),Y!==b?(xa(),A=Va(),A!==b?(xa(),A=va(),A!==b?(xa(),ya=ab(),ya!==b?r={type:"interval-period",period:"second",precision:A,secondary:null}:(d=r,r=b)):(d=r,r=b)):(d=r,r=b)):(d=r,r=b),r===b&&(r=d,Y=Fa(),Y!==b&&(Y={type:"interval-period",period:"second",precision:null,secondary:null}),r=Y)))));return r}function ha(){var r=d;r=ua();r!==b&&(r={type:"string",value:"day"});r===b&&(r=d,r=Ea(),r!==b&&(r={type:"string",value:"hour"}),r===b&&(r=d,r=Ba(),
r!==b&&(r={type:"string",value:"minute"}),r===b&&(r=d,r=wa(),r!==b&&(r={type:"string",value:"month"}),r===b&&(r=d,r=oa(),r!==b&&(r={type:"string",value:"year"})))));return r}function va(){var r=na();r!==b&&(r=parseFloat(r));return r}function Da(){var r=na();r!==b&&(r=parseFloat(r));return r}function Ha(){var r=Ia();r===b&&(r=p());return r}function Ia(){var r=d;if(39===h.charCodeAt(d)){var A=Za;d++}else A=b,0===ta&&B(Kd);A===b&&(h.substr(d,2)===bc?(A=bc,d+=2):(A=b,0===ta&&B(Ld)));if(A!==b){A=[];var Y=
d;h.substr(d,2)===U?(Y=U,d+=2):(Y=b,0===ta&&B(Md));Y!==b&&(Y="'");Y===b&&(Uc.test(h.charAt(d))?(Y=h.charAt(d),d++):(Y=b,0===ta&&B(Nd)));for(;Y!==b;)A.push(Y),Y=d,h.substr(d,2)===U?(Y=U,d+=2):(Y=b,0===ta&&B(Md)),Y!==b&&(Y="'"),Y===b&&(Uc.test(h.charAt(d))?(Y=h.charAt(d),d++):(Y=b,0===ta&&B(Nd)));39===h.charCodeAt(d)?(Y=Za,d++):(Y=b,0===ta&&B(Kd));Y!==b?r={type:"string",value:A.join("")}:(d=r,r=b)}else d=r,r=b;return r}function Ja(){var r=d;if(Ta()!==b){xa();var A=M();if(A!==b){xa();var Y=Sa();Y!==
b?(xa(),Y=M(),Y!==b?r={type:"when-clause",operand:A,value:Y}:(d=r,r=b)):(d=r,r=b)}else d=r,r=b}else d=r,r=b;return r}function Ma(){var r=d;if(Ta()!==b){xa();var A=M();if(A!==b){xa();var Y=Sa();Y!==b?(xa(),Y=M(),Y!==b?r={type:"when-clause",operand:A,value:Y}:(d=r,r=b)):(d=r,r=b)}else d=r,r=b}else d=r,r=b;return r}function Wa(){var r=d;var A=d;if(h.substr(d,4).toLowerCase()===rb){var Y=h.substr(d,4);d+=4}else Y=b,0===ta&&B(ba);if(Y!==b){Y=d;ta++;var ya=J();ta--;ya===b?Y=void 0:(d=Y,Y=b);Y!==b?A="ELSE":
(d=A,A=b)}else d=A,A=b;A!==b?(xa(),A=M(),A!==b?r={type:"else-clause",value:A}:(d=r,r=b)):(d=r,r=b);return r}function Ya(){var r=na();if(r===b){r=d;if(45===h.charCodeAt(d)){var A=Eb;d++}else A=b,0===ta&&B(Ab);A===b&&(43===h.charCodeAt(d)?(A=ic,d++):(A=b,0===ta&&B(Vc)));if(A!==b){var Y=na();Y!==b?r=A[0]+Y:(d=r,r=b)}else d=r,r=b}return r}function Ua(){var r=d;if(46===h.charCodeAt(d)){var A=ea;d++}else A=b,0===ta&&B(De);A!==b?(r=na(),r===b&&(r=null),r="."+(null!=r?r:"")):(d=r,r=b);return r}function gb(){var r;
var A=r=d;if(Gd.test(h.charAt(d))){var Y=h.charAt(d);d++}else Y=b,0===ta&&B(Ee);Y!==b?(yb.test(h.charAt(d))?(A=h.charAt(d),d++):(A=b,0===ta&&B(Fe)),A===b&&(A=null),A="e"+(null===A?"":A)):(d=A,A=b);A!==b?(Y=na(),Y!==b?r=A+Y:(d=r,r=b)):(d=r,r=b);return r}function na(){var r=[];var A=ra();if(A!==b)for(;A!==b;)r.push(A),A=ra();else r=b;r!==b&&(r=r.join(""));return r}function ra(){if(Fd.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&B(te);return r}function Aa(){var r=d;if(h.substr(d,2).toLowerCase()===
Ga){var A=h.substr(d,2);d+=2}else A=b,0===ta&&B(Je);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="IN":(d=r,r=b)}else d=r,r=b;return r}function c(){var r=d;if(h.substr(d,2).toLowerCase()===Pa){var A=h.substr(d,2);d+=2}else A=b,0===ta&&B(Ke);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="IS":(d=r,r=b)}else d=r,r=b;return r}function m(){var r=d;if(h.substr(d,4).toLowerCase()===Xa){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(Le);if(A!==b){A=d;ta++;var Y=J();
ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="LIKE":(d=r,r=b)}else d=r,r=b;return r}function da(){var r=d;if(h.substr(d,3).toLowerCase()===mb){var A=h.substr(d,3);d+=3}else A=b,0===ta&&B(Me);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="NOT":(d=r,r=b)}else d=r,r=b;return r}function ka(){var r=d;if(h.substr(d,3).toLowerCase()===lb){var A=h.substr(d,3);d+=3}else A=b,0===ta&&B(Ne);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="AND":(d=r,r=b)}else d=r,r=b;return r}
function sa(){var r=d;if(h.substr(d,2).toLowerCase()===xb){var A=h.substr(d,2);d+=2}else A=b,0===ta&&B(Oe);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="OR":(d=r,r=b)}else d=r,r=b;return r}function y(){var r=d;if(h.substr(d,7).toLowerCase()===Kb){var A=h.substr(d,7);d+=7}else A=b,0===ta&&B(Pe);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="BETWEEN":(d=r,r=b)}else d=r,r=b;return r}function O(){var r=d;if(h.substr(d,4).toLowerCase()===nd){var A=h.substr(d,
4);d+=4}else A=b,0===ta&&B(Qe);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="FROM":(d=r,r=b)}else d=r,r=b;return r}function Z(){var r=d;if(h.substr(d,4).toLowerCase()===rd){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(Te);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="TRIM":(d=r,r=b)}else d=r,r=b;return r}function W(){var r=d;if(h.substr(d,9).toLowerCase()===td){var A=h.substr(d,9);d+=9}else A=b,0===ta&&B(cc);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:
(d=A,A=b);A!==b?r="TIMESTAMP":(d=r,r=b)}else d=r,r=b;return r}function fa(){var r=d;if(h.substr(d,4).toLowerCase()===ud){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(ue);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="DATE":(d=r,r=b)}else d=r,r=b;return r}function ma(){var r=d;if(h.substr(d,8).toLowerCase()===ye){var A=h.substr(d,8);d+=8}else A=b,0===ta&&B(Pc);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="INTERVAL":(d=r,r=b)}else d=r,r=b;return r}function oa(){var r=
d;if(h.substr(d,4).toLowerCase()===pc){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(md);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="YEAR":(d=r,r=b)}else d=r,r=b;return r}function wa(){var r=d;if(h.substr(d,5).toLowerCase()===Ub){var A=h.substr(d,5);d+=5}else A=b,0===ta&&B(Ve);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="MONTH":(d=r,r=b)}else d=r,r=b;return r}function ua(){var r=d;if(h.substr(d,3).toLowerCase()===hd){var A=h.substr(d,3);d+=3}else A=b,0===
ta&&B(We);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="DAY":(d=r,r=b)}else d=r,r=b;return r}function Ea(){var r=d;if(h.substr(d,4).toLowerCase()===Hc){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(ld);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="HOUR":(d=r,r=b)}else d=r,r=b;return r}function Ba(){var r=d;if(h.substr(d,6).toLowerCase()===Ic){var A=h.substr(d,6);d+=6}else A=b,0===ta&&B(Xe);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r=
"MINUTE":(d=r,r=b)}else d=r,r=b;return r}function Fa(){var r=d;if(h.substr(d,6).toLowerCase()===Jc){var A=h.substr(d,6);d+=6}else A=b,0===ta&&B(Ye);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="SECOND":(d=r,r=b)}else d=r,r=b;return r}function Ra(){var r=d;if(h.substr(d,4).toLowerCase()===qc){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(bb);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="CASE":(d=r,r=b)}else d=r,r=b;return r}function Oa(){var r=d;if(h.substr(d,
3).toLowerCase()===ze){var A=h.substr(d,3);d+=3}else A=b,0===ta&&B(a);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="END":(d=r,r=b)}else d=r,r=b;return r}function Ta(){var r=d;if(h.substr(d,4).toLowerCase()===Ae){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(g);if(A!==b){A=d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="WHEN":(d=r,r=b)}else d=r,r=b;return r}function Sa(){var r=d;if(h.substr(d,4).toLowerCase()===Be){var A=h.substr(d,4);d+=4}else A=b,0===ta&&B(I);if(A!==b){A=
d;ta++;var Y=J();ta--;Y===b?A=void 0:(d=A,A=b);A!==b?r="THEN":(d=r,r=b)}else d=r,r=b;return r}function La(){if(44===h.charCodeAt(d)){var r=Sc;d++}else r=b,0===ta&&B(ja);return r}function Va(){if(40===h.charCodeAt(d)){var r=Fb;d++}else r=b,0===ta&&B(qa);return r}function ab(){if(41===h.charCodeAt(d)){var r=me;d++}else r=b,0===ta&&B(za);return r}function xa(){var r;var A=[];for(r=wb();r!==b;)A.push(r),r=wb();return A}function wb(){if(oe.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&B(Ka);
return r}function sb(r,A,Y,ya){r={type:"binary-expression",operator:r,left:A,right:Y};void 0!==ya&&(r.escape=ya);return r}function ib(r,A){for(var Y=0;Y<A.length;Y++)r=sb(A[Y][1],r,A[Y][3]);return r}k=void 0!==k?k:{};var b={},hb=k.grammarSource,Ib={start:e},Rb=e,nb="!",la="\x3d",hc="\x3e\x3d",Tb="\x3e",Db="\x3c\x3d",Jb="\x3c\x3e",ac="\x3c",Yb="!\x3d",ic="+",Eb="-",Sb="||",kb="*",Gb="/",Hb="@",Za="'",bc="N'",U="''",ea=".",V="null",pa="true",Ca="false",Ga="in",Pa="is",Xa="like",ob="escape",mb="not",
lb="and",xb="or",Kb="between",nd="from",od="for",pd="substring",qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",jc="float",Rc="real",nc="varchar",oc="to",ye="interval",pc="year",Ub="month",hd="day",Hc="hour",Ic="minute",Jc="second",qc="case",ze="end",Ae="when",Be="then",rb="else",Sc=",",Fb="(",me=")",Tc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Uc=/^[^']/,Fd=/^[0-9]/,
Gd=/^[eE]/,yb=/^[+\-]/,oe=/^[ \t\n\r]/,Kc=/^[^`]/,ne=q("!",!1),Lc=q("\x3d",!1),id=q("\x3e\x3d",!1),pe=q("\x3e",!1),Bd=q("\x3c\x3d",!1),se=q("\x3c\x3e",!1),re=q("\x3c",!1),qe=q("!\x3d",!1),Vc=q("+",!1),Ab=q("-",!1),Qb=q("||",!1),Hd=q("*",!1),Id=q("/",!1),Wc=T([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=T([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Xc=T([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=q("@",!1),Kd=q("'",!1),Ld=q("N'",!1),Md=q("''",!1),Nd=T(["'"],!0,!1),
De=q(".",!1),te=T([["0","9"]],!1,!1),Ee=T(["e","E"],!1,!1),Fe=T(["+","-"],!1,!1),Ge=q("NULL",!0),He=q("TRUE",!0),Ie=q("FALSE",!0),Je=q("IN",!0),Ke=q("IS",!0),Le=q("LIKE",!0),Od=q("ESCAPE",!0),Me=q("NOT",!0),Ne=q("AND",!0),Oe=q("OR",!0),Pe=q("BETWEEN",!0),Qe=q("FROM",!0),Re=q("FOR",!0),Se=q("SUBSTRING",!0),Pd=q("EXTRACT",!0),Te=q("TRIM",!0),Ue=q("POSITION",!0),cc=q("TIMESTAMP",!0),ue=q("DATE",!0),jb=q("LEADING",!0),vb=q("TRAILING",!0),lc=q("BOTH",!0),Mc=q("CAST",!0),jd=q("AS",!0),ve=q("INTEGER",!0),
kd=q("SMALLINT",!0),Nc=q("FLOAT",!0),we=q("REAL",!0),Oc=q("VARCHAR",!0),Qc=q("TO",!0),Pc=q("INTERVAL",!0),md=q("YEAR",!0),Ve=q("MONTH",!0),We=q("DAY",!0),ld=q("HOUR",!0),Xe=q("MINUTE",!0),Ye=q("SECOND",!0),bb=q("CASE",!0),a=q("END",!0),g=q("WHEN",!0),I=q("THEN",!0),ba=q("ELSE",!0),ja=q(",",!1),qa=q("(",!1),za=q(")",!1),Ka=T([" ","\t","\n","\r"],!1,!1),Qa=q("`",!1),cb=T(["`"],!0,!1),d=0,db=[{line:1,column:1}],$a=0,zb=[],ta=0;if("startRule"in k){if(!(k.startRule in Ib))throw Error("Can't start parsing from rule \""+
k.startRule+'".');Rb=Ib[k.startRule]}var Vb=Rb();if(Vb!==b&&d===h.length)return Vb;Vb!==b&&d<h.length&&B({type:"end"});throw function(r,A,Y){return new R(R.buildMessage(r,A),r,A,Y)}(zb,$a<h.length?h.charAt($a):null,$a<h.length?Q($a,$a+1):Q($a,$a));}}})})({get exports(){return aa},set exports(P){aa=P}});let S=function(){function P(){}P.parse=function(R){return aa.parse(R)};return f._createClass(P)}();l.WhereGrammar=S;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],
function(l){l.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};l.getDefaultExportFromCjs=function(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f["default"]:f}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,
supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k,q,T,N,Q,B){function e(v,K,F,n){const C=n.x-F.x;n=n.y-F.y;K=Math.min(1,Math.max(0,((K.x-F.x)*C+(K.y-F.y)*n)/(C*C+n*n)));v.x=F.x+C*K;v.y=F.y+n*K}function u(v,K){return v?K?4:3:K?3:2}let M=function(){function v(F,n,C){this.items=F;this.query=n;this.geometryType=C.geometryType;this.hasM=C.hasM;this.hasZ=C.hasZ;this.fieldsIndex=C.fieldsIndex;this.objectIdField=C.objectIdField;this.spatialReference=C.spatialReference;this.featureAdapter=C.featureAdapter}var K=v.prototype;
K.createQueryResponseForCount=function(){const F=new h(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return F.countDistinctValues(this.items);const {groupByFieldsForStatistics:n,having:C,outStatistics:w}=this.query;if(!n?.length)return 1;const D=new Map,z=new Map,x=new Set;for(const J of w){var {statisticType:E}=J;E="exceedslimit"!==E?J.onStatisticField:void 0;if(!z.has(E)){var ca=[];for(const G of n){const p=this._getAttributeValues(F,G,D);ca.push(p)}z.set(E,this._calculateUniqueValues(ca,
F.returnDistinctValues))}E=z.get(E);for(const G in E){const {data:p,items:t}=E[G];ca=p.join(",");C&&!F.validateItems(t,C)||x.add(ca)}}return x.size};K.createQueryResponse=async function(){let F;F=this.query.outStatistics?this.query.outStatistics.some(n=>"exceedslimit"===n.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const n=this.query.geometry;H.isValid(this.query.outSR)&&
!H.equals(n.spatialReference,this.query.outSR)?F.queryGeometry=T.cleanFromGeometryEngine({spatialReference:this.query.outSR,...k.project(n,n.spatialReference,this.query.outSR)}):F.queryGeometry=T.cleanFromGeometryEngine({spatialReference:this.query.outSR,...n})}return F};K.createSnappingResponse=function(F,n){const C=this.featureAdapter,w=u(this.hasZ,this.hasM),{point:D,mode:z}=F,x="number"===typeof F.distance?F.distance:F.distance.x,E="number"===typeof F.distance?F.distance:F.distance.y,ca={candidates:[]},
J="esriGeometryPolygon"===this.geometryType;n=this._getPointCreator(z,this.spatialReference,n);const G=new L(null,0),p=new L(null,0),t={x:0,y:0,z:0};for(const Ja of this.items){var X=C.getGeometry(Ja);if(aa.isNone(X))continue;const {coords:Ma,lengths:Wa}=X;G.coords=Ma;p.coords=Ma;if(F.types&f.SnappingTypes.EDGE){X=0;for(var ha=0;ha<Wa.length;ha++){var va=Wa[ha];for(var Da=0;Da<va;Da++,X+=w){var Ha=G;Ha.coordsIndex=X;if(Da!==va-1){const Ya=p;Ya.coordsIndex=X+w;const Ua=t;e(t,D,Ha,Ya);var Ia=(D.x-Ua.x)/
x;const gb=(D.y-Ua.y)/E;Ia=Ia*Ia+gb*gb;1>=Ia&&ca.candidates.push(q.makeEdgeCandidate(C.getObjectId(Ja),n(Ua),Math.sqrt(Ia),n(Ha),n(Ya)))}}}}if(F.types&f.SnappingTypes.VERTEX)for(X=J?Ma.length-w:Ma.length,ha=0;ha<X;ha+=w)va=G,va.coordsIndex=ha,Da=(D.x-va.x)/x,Ha=(D.y-va.y)/E,Da=Da*Da+Ha*Ha,1>=Da&&ca.candidates.push(q.makeVertexCandidate(C.getObjectId(Ja),n(va),Math.sqrt(Da)))}ca.candidates.sort((Ja,Ma)=>Ja.distance-Ma.distance);return ca};K._getPointCreator=function(F,n,C){const w=aa.isSome(C)&&!H.equals(n,
C)?z=>k.project(z,n,C):z=>z,{hasZ:D}=this;return"3d"===F?D?({x:z,y:x,z:E})=>w({x:z,y:x,z:E}):({x:z,y:x})=>w({x:z,y:x,z:0}):({x:z,y:x})=>w({x:z,y:x})};K.createSummaryStatisticsResponse=async function(F){const {field:n,valueExpression:C,normalizationField:w,normalizationType:D,normalizationTotal:z,minValue:x,maxValue:E,scale:ca}=F;F=this.fieldsIndex.isDateField(n);var J=await this._getDataValues({field:n,valueExpression:C,normalizationField:w,normalizationType:D,normalizationTotal:z,scale:ca});const G=
Q.isNullCountSupported({normalizationType:D,normalizationField:w,minValue:x,maxValue:E}),p=this.fieldsIndex.get(n),t={value:.5,fieldType:p?.type};J=N.isStringField(p)?Q.calculateStringStatistics({values:J,supportsNullCount:G,percentileParams:t}):Q.calculateStatistics({values:J,minValue:x,maxValue:E,useSampleStdDev:!D,supportsNullCount:G,percentileParams:t});return Q.processSummaryStatisticsResult(J,F)};K.createUniqueValuesResponse=async function(F){const {field:n,valueExpression:C,domains:w,returnAllCodedValues:D,
scale:z}=F;var x=await this._getDataValues({field:n,field2:F.field2,field3:F.field3,fieldDelimiter:F.fieldDelimiter,valueExpression:C,scale:z});x=Q.calculateUniqueValuesCount(x);return Q.createUVResult(x,w,D,F.fieldDelimiter)};K.createClassBreaksResponse=async function(F){const {field:n,valueExpression:C,normalizationField:w,normalizationType:D,normalizationTotal:z,classificationMethod:x,standardDeviationInterval:E,minValue:ca,maxValue:J,numClasses:G,scale:p}=F;F=await this._getDataValues({field:n,
valueExpression:C,normalizationField:w,normalizationType:D,normalizationTotal:z,scale:p});F=Q.calculateClassBreaks(F,{field:n,normalizationField:w,normalizationType:D,normalizationTotal:z,classificationMethod:x,standardDeviationInterval:E,minValue:ca,maxValue:J,numClasses:G});return Q.resolveCBResult(F,x)};K.createHistogramResponse=async function(F){const {field:n,valueExpression:C,normalizationField:w,normalizationType:D,normalizationTotal:z,classificationMethod:x,standardDeviationInterval:E,minValue:ca,
maxValue:J,numBins:G,scale:p}=F;F=await this._getDataValues({field:n,valueExpression:C,normalizationField:w,normalizationType:D,normalizationTotal:z,scale:p});return Q.calculateHistogram(F,{field:n,normalizationField:w,normalizationType:D,normalizationTotal:z,classificationMethod:x,standardDeviationInterval:E,minValue:ca,maxValue:J,numBins:G})};K._sortFeatures=function(F,n,C){if(1<F.length&&n&&n.length)for(const w of n.reverse()){n=w.split(" ");const D=n[0],z=this.fieldsIndex.get(D);n=n[1]?"desc"===
n[1].toLowerCase():!1;const x=Q.getAttributeComparator(z?.type,n);F.sort((E,ca)=>{E=C(E,D,z);ca=C(ca,D,z);return x(E,ca)})}};K._createFeatureQueryResponse=function(F){const n=this.items,{geometryType:C,hasM:w,hasZ:D,objectIdField:z,spatialReference:x}=this,{outFields:E,outSR:ca,quantizationParameters:J,resultRecordCount:G,resultOffset:p,returnZ:t,returnM:X}=F,ha=null!=G?n.length>(p||0)+G:!1,va=E&&(E.includes("*")?[...this.fieldsIndex.fields]:E.map(Da=>this.fieldsIndex.get(Da)));return{exceededTransferLimit:ha,
features:this._createFeatures(F,n),fields:va,geometryType:C,hasM:w&&X,hasZ:D&&t,objectIdFieldName:z,spatialReference:T.cleanFromGeometryEngine(ca||x),transform:J&&R.toQuantizationTransform(J)||null}};K._createFeatures=function(F,n){const C=new h(F,this.featureAdapter,this.fieldsIndex),{hasM:w,hasZ:D}=this,{orderByFields:z,quantizationParameters:x,returnGeometry:E,returnCentroid:ca,maxAllowableOffset:J,resultOffset:G,resultRecordCount:p,returnZ:t=!1,returnM:X=!1}=F,ha=D&&t,va=w&&X;F=[];var Da=0;n=
[...n];this._sortFeatures(n,z,(Ja,Ma,Wa)=>C.getFieldValue(Ja,Ma,Wa));if(E||ca){var Ha=R.toQuantizationTransform(x)??void 0;if(E&&!ca)for(var Ia of n)F[Da++]={attributes:C.getAttributes(Ia),geometry:T.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ia),J,Ha,ha,va)};else if(!E&&ca)for(const Ja of n)F[Da++]={attributes:C.getAttributes(Ja),centroid:T.transformCentroid(this,this.featureAdapter.getCentroid(Ja,this),Ha)};else for(const Ja of n)F[Da++]={attributes:C.getAttributes(Ja),
centroid:T.transformCentroid(this,this.featureAdapter.getCentroid(Ja,this),Ha),geometry:T.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ja),J,Ha,ha,va)}}else for(Ha of n)(Ia=C.getAttributes(Ha))&&(F[Da++]={attributes:Ia});Da=G||0;null!=p&&(F=F.slice(Da,Math.min(F.length,Da+p)));return F};K._createExceedsLimitQueryResponse=function(F){var n=!1;let C=Number.POSITIVE_INFINITY,w=Number.POSITIVE_INFINITY;n=Number.POSITIVE_INFINITY;for(const D of F.outStatistics??[])if("exceedslimit"===
D.statisticType){C=null!=D.maxPointCount?D.maxPointCount:Number.POSITIVE_INFINITY;w=null!=D.maxRecordCount?D.maxRecordCount:Number.POSITIVE_INFINITY;n=null!=D.maxVertexCount?D.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)n=this.items.length>C;else if(this.items.length>w)n=!0;else{F=u(this.hasZ,this.hasM);const D=this.featureAdapter;n=this.items.reduce((z,x)=>{x=D.getGeometry(x);return z+(aa.isSome(x)&&x.coords.length||0)},0)/F>n}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(n)}}]}};K._createStatisticsQueryResponse=async function(F){var n={attributes:{}};const C=[],w=new Map,D=new Map,z=new Map,x=new Map,E=new h(F,this.featureAdapter,this.fieldsIndex);var ca=F.outStatistics;const {groupByFieldsForStatistics:J,having:G,orderByFields:p}=F;F=J&&J.length;const t=!!F,X=t?J[0]:null,ha=t&&!this.fieldsIndex.get(X);for(const Ja of ca??
[]){const {outStatisticFieldName:Ma,statisticType:Wa}=Ja;ca=Ja;var va="exceedslimit"!==Wa?Ja.onStatisticField:void 0;const Ya="percentile_disc"===Wa||"percentile_cont"===Wa,Ua="EnvelopeAggregate"===Wa||"CentroidAggregate"===Wa||"ConvexHullAggregate"===Wa,gb=t&&1===F&&(va===X||ha)&&"count"===Wa;if(t){if(!z.has(va)){var Da=[];for(const na of J){var Ha=this._getAttributeValues(E,na,w);Da.push(Ha)}z.set(va,this._calculateUniqueValues(Da,Ua?!1:E.returnDistinctValues))}Da=z.get(va);for(const na in Da){const {count:ra,
data:Aa,items:c,itemPositions:m}=Da[na];Ha=Aa.join(",");if(!G||E.validateItems(c,G)){const da=x.get(Ha)||{attributes:{}};if(Ua){da.aggregateGeometries||(da.aggregateGeometries={});const {aggregateGeometries:sa,outStatisticFieldName:y}=await this._getAggregateGeometry(ca,c);da.aggregateGeometries[y]=sa}else{var Ia=null;if(gb)Ia=ra;else{const sa=this._getAttributeValues(E,va,w);Ia=m.map(y=>sa[y]);Ia=Ya&&"statisticParameters"in ca?this._getPercentileValue(ca,Ia):this._getStatisticValue(ca,Ia,null,E.returnDistinctValues)}da.attributes[Ma]=
Ia}let ka=0;J.forEach((sa,y)=>da.attributes[this.fieldsIndex.get(sa)?sa:`EXPR_${++ka}`]=Aa[y]);x.set(Ha,da)}}}else if(Ua){n.aggregateGeometries||(n.aggregateGeometries={});const {aggregateGeometries:na,outStatisticFieldName:ra}=await this._getAggregateGeometry(ca,this.items);n.aggregateGeometries[ra]=na}else va=this._getAttributeValues(E,va,w),n.attributes[Ma]=Ya&&"statisticParameters"in ca?this._getPercentileValue(ca,va):this._getStatisticValue(ca,va,D,E.returnDistinctValues);C.push({name:Ma,alias:Ma,
type:"esriFieldTypeDouble"})}n=t?Array.from(x.values()):[n];this._sortFeatures(n,p,(Ja,Ma)=>Ja.attributes[Ma]);return{fields:C,features:n}};K._getAggregateGeometry=async function(F,n){var C=await new Promise((p,t)=>l(["../../../geometry/geometryEngineJSON"],p,t));const {statisticType:w,outStatisticFieldName:D}=F,{featureAdapter:z,spatialReference:x,geometryType:E,hasZ:ca,hasM:J}=this;n=n.map(p=>T.getGeometry(E,ca,J,z.getGeometry(p)));const G=C.convexHull(x,n,!0)[0];F={aggregateGeometries:null,outStatisticFieldName:null};
"EnvelopeAggregate"===w?(C=G?P.getPolygonExtent(G):P.getGeometryExtent(C.union(x,n)),F.aggregateGeometries={...C,spatialReference:x},F.outStatisticFieldName=D||"extent"):"CentroidAggregate"===w?(C=G?S.polygonCentroid(G):S.extentCentroid(P.getGeometryExtent(C.union(x,n))),F.aggregateGeometries={x:C[0],y:C[1],spatialReference:x},F.outStatisticFieldName=D||"centroid"):"ConvexHullAggregate"===w&&(F.aggregateGeometries=G,F.outStatisticFieldName=D||"convexHull");return F};K._getStatisticValue=function(F,
n,C,w){const {onStatisticField:D,statisticType:z}=F;F=null;F=C?.has(D)?C.get(D):N.isStringField(this.fieldsIndex.get(D))?Q.calculateStringStatistics({values:n,returnDistinct:w}):Q.calculateStatistics({values:w?[...(new Set(n))]:n,minValue:null,maxValue:null,useSampleStdDev:!0});C&&C.set(D,F);return F["var"===z?"variance":z]};K._getPercentileValue=function(F,n){const {onStatisticField:C,statisticParameters:w,statisticType:D}=F,{value:z,orderBy:x}=w;F=this.fieldsIndex.get(C);return Q.calculatePercentile(n,
{value:z,orderBy:x,fieldType:F?.type,isDiscrete:"percentile_disc"===D})};K._getAttributeValues=function(F,n,C){if(C.has(n))return C.get(n);const w=this.fieldsIndex.get(n),D=this.items.map(z=>F.getFieldValue(z,n,w));C.set(n,D);return D};K._getAttributeDataValues=function(F,n){return this.items.map(C=>F.getDataValue(C,{field:n.field,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,normalizationField:n.normalizationField,normalizationType:n.normalizationType,normalizationTotal:n.normalizationTotal}))};
K._getAttributeExpressionValues=async function(F,n,C){const {arcadeUtils:w}=await B.loadArcade();n=w.createFunction(n);C=C&&w.getViewInfo(C);return F.getExpressionValues(this.items,n,C,w)};K._calculateUniqueValues=function(F,n){const C={},w=this.items,D=w.length;for(let z=0;z<D;z++){const x=w[z],E=[];for(const J of F)E.push(J[z]);const ca=E.join(",");null==C[ca]?C[ca]={count:1,data:E,items:[x],itemPositions:[z]}:(n||C[ca].count++,C[ca].items.push(x),C[ca].itemPositions.push(z))}return C};K._getDataValues=
async function(F){const n=new h(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:C,field:w,normalizationField:D,normalizationType:z,normalizationTotal:x,scale:E}=F,ca=C?{viewingMode:"map",scale:E,spatialReference:this.query.outSR||this.spatialReference}:null;return C?this._getAttributeExpressionValues(n,C,ca):this._getAttributeDataValues(n,{field:w,field2:F.field2,field3:F.field3,fieldDelimiter:F.fieldDelimiter,normalizationField:D,normalizationType:z,normalizationTotal:x})};ia._createClass(v,
[{key:"size",get:function(){return this.items.length}}]);return v}();f.SnappingTypes=void 0;(function(v){v[v.NONE=0]="NONE";v[v.EDGE=1]="EDGE";v[v.VERTEX=2]="VERTEX"})(f.SnappingTypes||(f.SnappingTypes={}));let L=function(){function v(K,F){this.coords=K;this.coordsIndex=F}ia._createClass(v,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return v}();f.QueryEngineResult=
M;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(l,f,ia){function aa({scale:z,translate:x},E){return Math.round((E-x[0])/z[0])}function S({scale:z,translate:x},E){return Math.round((x[1]-E)/z[1])}function P(z,x,E){const ca=[];let J,G,p,t;for(let X=0;X<E.length;X++){const ha=E[X];if(0<X){if(p=aa(z,ha[0]),t=S(z,ha[1]),p!==J||t!==G)ca.push(x(ha,p-J,t-G)),J=p,G=t}else J=aa(z,
ha[0]),G=S(z,ha[1]),ca.push(x(ha,J,G))}return 0<ca.length?ca:null}function R(z,x,E,ca){return P(z,E?ca?D:w:ca?w:C,x)}function H(z,x,E,ca){const J=[];E=E?ca?D:w:ca?w:C;for(ca=0;ca<x.length;ca++){const G=P(z,E,x[ca]);G&&3<=G.length&&J.push(G)}return J.length?J:null}function h(z,x,E,ca){const J=[];E=E?ca?D:w:ca?w:C;for(ca=0;ca<x.length;ca++){const G=P(z,E,x[ca]);G&&2<=G.length&&J.push(G)}return J.length?J:null}function k({scale:z,translate:x},E){return E*z[0]+x[0]}function q({scale:z,translate:x},E){return x[1]-
E*z[1]}function T(z,x,E){const ca=Array(E.length);if(!E.length)return ca;const [J,G]=z.scale;let p=k(z,E[0][0]);z=q(z,E[0][1]);ca[0]=x(E[0],p,z);for(let t=1;t<E.length;t++){const X=E[t];p+=X[0]*J;z-=X[1]*G;ca[t]=x(X,p,z)}return ca}function N(z,x,E){const ca=Array(E.length);for(let J=0;J<E.length;J++)ca[J]=T(z,x,E[J]);return ca}function Q(z,x,E,ca){return T(z,E?ca?D:w:ca?w:C,x)}function B(z,x,E,ca){return N(z,E?ca?D:w:ca?w:C,x)}function e(z,x,E,ca){return N(z,E?ca?D:w:ca?w:C,x)}function u(z,x,E){let [ca,
J]=E[0],G=Math.min(ca,x[0]),p=Math.min(J,x[1]),t=Math.max(ca,x[2]);x=Math.max(J,x[3]);for(let X=1;X<E.length;X++){const [ha,va]=E[X];ca+=ha;J+=va;0>ha&&(G=Math.min(G,ca));0<ha&&(t=Math.max(t,ca));0>va?p=Math.min(p,J):0<va&&(x=Math.max(x,J))}z[0]=G;z[1]=p;z[2]=t;z[3]=x;return z}function M(z,x){if(!x.length)return null;z[0]=z[1]=Number.POSITIVE_INFINITY;z[2]=z[3]=Number.NEGATIVE_INFINITY;for(let E=0;E<x.length;E++)u(z,z,x[E]);return z}function L(z,x,E,ca,J){x.xmin=aa(z,E.xmin);x.ymin=S(z,E.ymin);x.xmax=
aa(z,E.xmax);x.ymax=S(z,E.ymax);x!==E&&(ca&&(x.zmin=E.zmin,x.zmax=E.zmax),J&&(x.mmin=E.mmin,x.mmax=E.mmax));return x}function v(z,x,E,ca,J){x.points=R(z,E.points,ca,J)??[];return x}function K(z,x,E,ca,J){x.x=aa(z,E.x);x.y=S(z,E.y);x!==E&&(ca&&(x.z=E.z),J&&(x.m=E.m));return x}function F(z,x,E,ca,J){z=H(z,E.rings,ca,J);if(!z)return null;x.rings=z;return x}function n(z,x,E,ca,J){z=h(z,E.paths,ca,J);if(!z)return null;x.paths=z;return x}const C=(z,x,E)=>[x,E],w=(z,x,E)=>[x,E,z[2]],D=(z,x,E)=>[x,E,z[2],
z[3]];l.equals=function(z,x){if(z===x||null==z&&null==x)return!0;if(null==z||null==x)return!1;let E,ca,J,G;z&&"upperLeft"===z.originPosition?(E=z.translate[0],ca=z.translate[1],z=z.scale[0]):(E=f.isSome(z.extent)?z.extent.xmin:0,ca=f.isSome(z.extent)?z.extent.ymax:0,z=z.tolerance);x&&"upperLeft"===x.originPosition?(J=x.translate[0],G=x.translate[1],x=x.scale[0]):(J=f.isSome(x.extent)?x.extent.xmin:0,G=f.isSome(x.extent)?x.extent.ymax:0,x=x.tolerance);return E===J&&ca===G&&z===x};l.getQuantizedBoundsCoordsArray=
u;l.getQuantizedBoundsCoordsArrayArray=M;l.getQuantizedBoundsPaths=function(z){return M([0,0,0,0],z)};l.getQuantizedBoundsPoints=function(z){const x=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return u(x,x,z)};l.getQuantizedBoundsRings=function(z){return M([0,0,0,0],z)};l.quantizeBounds=function(z,x,E){x[0]=aa(z,E[0]);x[3]=S(z,E[1]);x[2]=aa(z,E[2]);x[1]=S(z,E[3]);return x};l.quantizeExtent=L;l.quantizeGeometry=function(z,x){return z&&x?ia.isPoint(x)?
K(z,{},x,!1,!1):ia.isPolyline(x)?n(z,{},x,!1,!1):ia.isPolygon(x)?F(z,{},x,!1,!1):ia.isMultipoint(x)?v(z,{},x,!1,!1):ia.isExtent(x)?L(z,{},x,!1,!1):null:null};l.quantizeMultipoint=v;l.quantizePaths=h;l.quantizePoint=K;l.quantizePoints=R;l.quantizePolygon=F;l.quantizePolyline=n;l.quantizeRings=H;l.quantizeX=aa;l.quantizeY=S;l.toQuantizationTransform=function(z){return z?{originPosition:"upper-left"===z.originPosition?"upperLeft":"lower-left"===z.originPosition?"lowerLeft":z.originPosition,scale:z.tolerance?
[z.tolerance,z.tolerance]:[1,1],translate:f.isSome(z.extent)?[z.extent.xmin,z.extent.ymax]:[0,0]}:null};l.unquantizeBounds=function(z,x,E){return E?(x[0]=k(z,E[0]),x[1]=q(z,E[3]),x[2]=k(z,E[2]),x[3]=q(z,E[1]),x):[k(z,x[0]),q(z,x[3]),k(z,x[2]),q(z,x[1])]};l.unquantizeCoordsArray=T;l.unquantizeCoordsArrayArray=N;l.unquantizeExtent=function(z,x,E,ca,J){x.xmin=k(z,E.xmin);x.ymin=q(z,E.ymin);x.xmax=k(z,E.xmax);x.ymax=q(z,E.ymax);x!==E&&(ca&&(x.zmin=E.zmin,x.zmax=E.zmax),J&&(x.mmin=E.mmin,x.mmax=E.mmax));
return x};l.unquantizeMultipoint=function(z,x,E,ca,J){f.isSome(E)&&(x.points=Q(z,E.points,ca,J));return x};l.unquantizePaths=B;l.unquantizePoint=function(z,x,E,ca,J){if(f.isNone(E))return x;x.x=k(z,E.x);x.y=q(z,E.y);x!==E&&(ca&&(x.z=E.z),J&&(x.m=E.m));return x};l.unquantizePoints=Q;l.unquantizePolygon=function(z,x,E,ca,J){f.isSome(E)&&(x.rings=e(z,E.rings,ca,J));return x};l.unquantizePolyline=function(z,x,E,ca,J){f.isSome(E)&&(x.paths=B(z,E.paths,ca,J));return x};l.unquantizeRings=e;l.unquantizeX=
k;l.unquantizeY=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(l,f,ia,aa){return function(){function S(R,H,h){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=R.returnDistinctValues??!1;this.fieldsIndex=h;this.featureAdapter=H;if((H=R.outFields)&&!H.includes("*")){this.outFields=
H;R=0;for(const q of H){var k=ia.getExpressionFromFieldName(q);k=(H=this.fieldsIndex.get(k))?null:ia.getWhereClause(k,h);H=H?H.name:ia.getAliasFromFieldName(q)||`FIELD_EXP_${R++}`;this._fieldDataCache.set(q,{alias:H,clause:k})}}}var P=S.prototype;P.countDistinctValues=function(R){if(!this.returnDistinctValues)return R.length;R.forEach(H=>this.getAttributes(H));return this._returnDistinctMap.size};P.getAttributes=function(R){R=this._processAttributesForOutFields(R);return this._processAttributesForDistinctValues(R)};
P.getFieldValue=function(R,H,h){const k=h?h.name:H;let q=null;this._fieldDataCache.has(k)?q=this._fieldDataCache.get(k)?.clause:h||(q=ia.getWhereClause(H,this.fieldsIndex),this._fieldDataCache.set(k,{alias:k,clause:q}));return h?this.featureAdapter.getAttribute(R,k):q?.calculateValue(R,this.featureAdapter)};P.getDataValue=function(R,H){const h=H.normalizationType,k=H.normalizationTotal;let q=H.field&&this.getFieldValue(R,H.field,this.fieldsIndex.get(H.field));H.field2&&(q=`${aa.processNullValue(q)}${H.fieldDelimiter}${aa.processNullValue(this.getFieldValue(R,
H.field2,this.fieldsIndex.get(H.field2)))}`,H.field3&&(q=`${q}${H.fieldDelimiter}${aa.processNullValue(this.getFieldValue(R,H.field3,this.fieldsIndex.get(H.field3)))}`));h&&Number.isFinite(q)&&(R="field"===h&&H.normalizationField?this.getFieldValue(R,H.normalizationField,this.fieldsIndex.get(H.normalizationField)):null,q=aa.getNormalizedValue(q,h,R,k));return q};P.getExpressionValue=function(R,H,h,k){R={attributes:this.featureAdapter.getAttributes(R),layer:{fields:this.fieldsIndex.fields}};h=k.createExecContext(R,
h);return k.executeFunction(H,h)};P.getExpressionValues=function(R,H,h,k){const q={fields:this.fieldsIndex.fields};return R.map(T=>{T={attributes:this.featureAdapter.getAttributes(T),layer:q};T=k.createExecContext(T,h);return k.executeFunction(H,T)})};P.validateItem=function(R,H){this._fieldDataCache.has(H)||this._fieldDataCache.set(H,{alias:H,clause:ia.getWhereClause(H,this.fieldsIndex)});return this._fieldDataCache.get(H)?.clause?.testFeature(R,this.featureAdapter)??!1};P.validateItems=function(R,
H){this._fieldDataCache.has(H)||this._fieldDataCache.set(H,{alias:H,clause:ia.getWhereClause(H,this.fieldsIndex)});return this._fieldDataCache.get(H)?.clause?.testSet(R,this.featureAdapter)??!1};P._processAttributesForOutFields=function(R){const H=this.outFields;if(!H||!H.length)return this.featureAdapter.getAttributes(R);const h={};for(const k of H){const {alias:q,clause:T}=this._fieldDataCache.get(k);h[q]=T?T.calculateValue(R,this.featureAdapter):this.featureAdapter.getAttribute(R,q)}return h};
P._processAttributesForDistinctValues=function(R){if(f.isNone(R)||!this.returnDistinctValues)return R;var H=this.outFields,h=[];if(H)for(const q of H){var {alias:k}=this._fieldDataCache.get(q);h.push(R[k])}else for(k in R)h.push(R[k]);H=`${(H||["*"]).join(",")}=${h.join(",")}`;h=this._returnDistinctMap.get(H)||0;this._returnDistinctMap.set(H,++h);return 1<h?null:R};return l._createClass(S)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(l,f,ia){function aa(n){return null==n||"string"===typeof n&&!n?"\x3cNull\x3e":n}function S(n){const C=null!=n.minValue||null!=n.maxValue,w=!!n.sqlExpression&&n.supportsSQLExpression;return!(null!=n.normalizationField||null!=n.normalizationType)&&!C&&!w}function P(n){const {values:C,useSampleStdDev:w,supportsNullCount:D}=n;var z=Number.POSITIVE_INFINITY;let x=Number.NEGATIVE_INFINITY,E=null,ca=null;var J=null;let G=null,p=0;const t=null==n.minValue?-Infinity:n.minValue,X=null==n.maxValue?
Infinity:n.maxValue;for(const ha of C)Number.isFinite(ha)?ha>=t&&ha<=X&&(E=null===E?ha:E+ha,z=Math.min(z,ha),x=Math.max(x,ha),p++):"string"===typeof ha&&p++;if(p&&null!=E){ca=E/p;J=0;for(const ha of C)Number.isFinite(ha)&&ha>=t&&ha<=X&&(J+=(ha-ca)**2);G=w?1<p?J/(p-1):0:0<p?J/p:0;J=Math.sqrt(G)}else x=z=null;z={avg:ca,count:p,max:x,min:z,stddev:J,sum:E,variance:G};D&&(z.nullcount=C.length-p);n.percentileParams&&(z.median=R(C,n.percentileParams));return z}function R(n,C){const {fieldType:w,value:D,
orderBy:z,isDiscrete:x}=C,E=H(w,"desc"===z);n=[...n].filter(p=>null!=p).sort((p,t)=>E(p,t));if(0===n.length)return null;if(0>=D)return n[0];if(1<=D)return n[n.length-1];var ca=(n.length-1)*D,J=Math.floor(ca);C=J+1;ca%=1;J=n[J];const G=n[C];return C>=n.length||x||"string"===typeof J||"string"===typeof G?J:J*(1-ca)+G*ca}function H(n,C){const w=C?1:-1,D=q(C),z=k(C);if(!n||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...K].includes(n))return(x,E)=>"number"===
typeof x&&"number"===typeof E?D(x,E):"string"===typeof x&&"string"===typeof E?z(x,E):w;if("esriFieldTypeDate"===n)return(x,E)=>{x=(new Date(x)).getTime();E=(new Date(E)).getTime();return isNaN(x)||isNaN(E)?w:D(x,E)};if(K.has(n))return(x,E)=>D(x,E);if("esriFieldTypeString"===n)return(x,E)=>z(x,E);if("esriFieldTypeGUID"===n||"esriFieldTypeGlobalID"===n){const x=k(C);return(E,ca)=>x(T(E),T(ca))}return C?(x,E)=>1:(x,E)=>-1}function h(n,C,w){if(w){if(null==n)return null==C?0:1;if(null==C)return-1}else{if(null==
n)return null==C?0:-1;if(null==C)return 1}return null}function k(n){return n?(C,w)=>{const D=h(C,w,!0);if(null!=D)return D;C=C.toUpperCase();w=w.toUpperCase();return C>w?-1:C<w?1:0}:(C,w)=>{const D=h(C,w,!1);if(null!=D)return D;C=C.toUpperCase();w=w.toUpperCase();return C<w?-1:C>w?1:0}}function q(n){return n?(C,w)=>{const D=h(C,w,!0);return null!=D?D:w-C}:(C,w)=>{const D=h(C,w,!1);return null!=D?D:C-w}}function T(n){return n.substr(24,12)+n.substr(19,4)+n.substr(16,2)+n.substr(14,2)+n.substr(11,2)+
n.substr(9,2)+n.substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2)}function N(n){return"coded-value"!==n?.type?[]:n.codedValues.map(C=>C.code)}function Q(n,C){const w=e({field:C.field,normalizationType:C.normalizationType,normalizationField:C.normalizationField,classificationMethod:C.classificationMethod,standardDeviationInterval:C.standardDeviationInterval,breakCount:C.numClasses||5});n=B(n,C.minValue,C.maxValue);return ia.createGenerateRendererClassBreaks({definition:w,values:n,normalizationTotal:C.normalizationTotal})}
function B(n,C,w){const D=null==C?-Infinity:C,z=null==w?Infinity:w;return n.filter(x=>Number.isFinite(x)&&x>=D&&x<=z)}function e(n){const {breakCount:C,field:w,normalizationField:D,normalizationType:z}=n,x=n.classificationMethod||"equal-interval";return new f({breakCount:C,classificationField:w,classificationMethod:x,normalizationField:"field"===z?D:void 0,normalizationType:z,standardDeviationInterval:"standard-deviation"===x?n.standardDeviationInterval||1:void 0})}function u(n,C){const {field:w,
classificationMethod:D,standardDeviationInterval:z,normalizationType:x,normalizationField:E,normalizationTotal:ca,minValue:J,maxValue:G}=C,p=C.numBins||10;let t=C=null,X=null;D&&"equal-interval"!==D||x?({classBreaks:n}=Q(n,{field:w,normalizationType:x,normalizationField:E,normalizationTotal:ca,classificationMethod:D,standardDeviationInterval:z,minValue:J,maxValue:G,numClasses:p}),C=n[0].minValue,t=n[n.length-1].maxValue,X=n.map(ha=>[ha.minValue,ha.maxValue])):(null!=J&&null!=G?(C=J,t=G):(n=P({values:n,
minValue:J,maxValue:G,useSampleStdDev:!x,supportsNullCount:S({normalizationType:x,normalizationField:E,minValue:J,maxValue:G})}),C=n.min??null,t=n.max??null),X=L(C??0,t??0,p));return{min:C,max:t,intervals:X}}function M(n,C){let w=-1;for(let D=n.length-1;0<=D;D--)if(C>=n[D][0]){w=D;break}return w}function L(n,C,w){const D=(C-n)/w,z=[];let x;for(let E=1;E<=w;E++)x=n+D,x=Number(x.toFixed(16)),z.push([n,E===w?C:x]),n=x;return z}const v=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,K=new Set(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),F="min max avg stddev count sum variance nullcount median".split(" ");l.calculateClassBreaks=Q;l.calculateHistogram=function(n,C){var w=u(n,C);const D=w.intervals,z=w.min??0;w=w.max??0;const x=D.map((E,ca)=>({minValue:D[ca][0],maxValue:D[ca][1],count:0}));for(const E of n)null!=E&&E>=z&&E<=w&&(n=M(D,E),-1<n&&x[n].count++);return{bins:x,minValue:z,maxValue:w,normalizationTotal:C.normalizationTotal}};l.calculatePercentile=R;l.calculateStatistics=
P;l.calculateStringStatistics=function(n){const C=n.returnDistinct?[...(new Set(n.values))]:n.values,w=C.filter(z=>null!=z).length,D={count:w};n.supportsNullCount&&(D.nullcount=C.length-w);n.percentileParams&&(D.median=R(C,n.percentileParams));return D};l.calculateUniqueValuesCount=function(n){const C={};for(let w of n){if(null==w||"string"===typeof w&&""===w.trim())w=null;null==C[w]?C[w]={count:1,data:w}:C[w].count++}return{count:C}};l.createClassBreaksDefinition=e;l.createUVResult=function(n,C,
w,D){n=n.count;const z=[];if(w&&C){w=[];var x=N(C[0]);for(const E of x)if(C[1]){x=N(C[1]);for(const ca of x)if(C[2]){x=N(C[2]);for(const J of x)w.push(`${aa(E)}${D}${aa(ca)}${D}${aa(J)}`)}else w.push(`${aa(E)}${D}${aa(ca)}`)}else w.push(E);for(const E of w)n.hasOwnProperty(E)||(n[E]={data:E,count:0})}for(const E in n)C=n[E],z.push({value:C.data,count:C.count,label:C.label});return{uniqueValueInfos:z}};l.getAttributeComparator=H;l.getEqualIntervalBins=L;l.getNormalizedValue=function(n,C,w,D){let z=
null;switch(C){case "log":0!==n&&(z=Math.log(n)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(D)&&0!==D&&(z=n/D*100);break;case "field":Number.isFinite(w)&&0!==w&&(z=n/w);break;case "natural-log":0<n&&(z=Math.log(n));break;case "square-root":0<n&&(z=n**.5)}return z};l.isNullCountSupported=S;l.processNullValue=aa;l.processSummaryStatisticsResult=function(n,C){let w;for(w in n)F.includes(w)&&(Number.isFinite(n[w])||(n[w]=null));if(!C)return n;["avg","stddev","variance"].forEach(D=>{null!=
n[D]&&(n[D]=Math.ceil(n[D]))});return n};l.resolveCBResult=function(n,C){let w=n.classBreaks;const D=w[0].minValue,z=w[w.length-1].maxValue,x="standard-deviation"===C;w=w.map(E=>{const ca=E.label;E={minValue:E.minValue,maxValue:E.maxValue,label:ca};if(x&&ca){const J=ca.match(v)?.map(G=>+G.trim())??[];2===J.length?(E.minStdDev=J[0],E.maxStdDev=J[1],0>J[0]&&0<J[1]&&(E.hasAvg=!0)):1===J.length&&(ca.includes("\x3c")?(E.minStdDev=null,E.maxStdDev=J[0]):ca.includes("\x3e")&&(E.minStdDev=J[0],E.maxStdDev=
null))}return E});return{minValue:D,maxValue:z,classBreakInfos:w,normalizationTotal:n.normalizationTotal}};l.statisticTypes=F;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k){P=new ia.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ia=new ia.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});aa=function(q){function T(Q){Q=N.call(this,Q);Q.type="class-breaks-definition";Q.breakCount=
null;Q.classificationField=null;Q.classificationMethod=null;Q.normalizationField=null;Q.normalizationType=null;return Q}l._inherits(T,q);var N=l._createSuper(T);l._createClass(T,[{key:"standardDeviationInterval",set:function(Q){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",Q)}},{key:"definedInterval",set:function(Q){"defined-interval"===this.classificationMethod&&this._set("definedInterval",Q)}}]);return T}(aa.JSONSupport);f.__decorate([h.enumeration({classBreaksDef:"class-breaks-definition"})],
aa.prototype,"type",void 0);f.__decorate([S.property({json:{write:!0}})],aa.prototype,"breakCount",void 0);f.__decorate([S.property({json:{write:!0}})],aa.prototype,"classificationField",void 0);f.__decorate([S.property({type:String,json:{read:P.read,write:P.write}})],aa.prototype,"classificationMethod",void 0);f.__decorate([S.property({json:{write:!0}})],aa.prototype,"normalizationField",void 0);f.__decorate([S.property({json:{read:ia.read,write:ia.write}})],aa.prototype,"normalizationType",void 0);
f.__decorate([S.property({value:null,json:{write:!0}})],aa.prototype,"standardDeviationInterval",null);f.__decorate([S.property({value:null,json:{write:!0}})],aa.prototype,"definedInterval",null);return aa=f.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],aa)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,f,ia){l.enumeration=function(aa,S={}){aa=aa instanceof f.JSONMap?aa:new f.JSONMap(aa,S);aa={type:S?.ignoreUnknown??
!0?aa.apiValues:String,json:{type:aa.jsonValues,read:S?.readOnly?!1:{reader:aa.read},write:{writer:aa.write}}};void 0!==S?.readOnly&&(aa.readOnly=!!S.readOnly);void 0!==S?.default&&(aa.json.default=S.default);void 0!==S?.name&&(aa.json.name=S.name);void 0!==S?.nonNullable&&(aa.nonNullable=S.nonNullable);return ia.property(aa)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(l,f){function ia(N){var Q=
N.definition;const {classificationMethod:B,normalizationType:e,definedInterval:u}=Q;Q=Q.breakCount??1;const M=[];var L=N.values;if(0===L.length)return[];L=L.sort((w,D)=>w-D);var v=L[0],K=L[L.length-1];if("equal-interval"===B)if(L.length>=Q){L=(K-v)/Q;N=v;for(var F=1;F<Q;F++){var n=Number((v+F*L).toFixed(6));M.push({minValue:N,maxValue:n,label:aa(N,n,e)});N=n}M.push({minValue:N,maxValue:K,label:aa(N,K,e)})}else L.forEach(w=>{M.push({minValue:w,maxValue:w,label:aa(w,w,e)})});else if("natural-breaks"===
B){L=S(L);N=P(L.uniqueValues,N.valueFrequency||L.valueFrequency,Q);for(F=1;F<Q;F++)L.uniqueValues.length>F&&(n=Number(L.uniqueValues[N[F]].toFixed(6)),M.push({minValue:v,maxValue:n,label:aa(v,n,e)}),v=n);M.push({minValue:v,maxValue:K,label:aa(v,K,e)})}else if("quantile"===B)if(L.length>=Q&&v!==K){N=Math.ceil(L.length/Q);F=0;for(n=1;n<Q;n++){var C=N+F-1;C>L.length&&(C=L.length-1);0>C&&(C=0);M.push({minValue:v,maxValue:L[C],label:aa(v,L[C],e)});v=L[C];F+=N;N=Math.ceil((L.length-F)/(Q-n))}M.push({minValue:v,
maxValue:K,label:aa(v,K,e)})}else for(Q=-1,K=0;K<L.length;K++)v=L[K],v!==Q&&(Q=v,M.push({minValue:Q,maxValue:v,label:aa(Q,v,e)}),Q=v);else if("standard-deviation"===B)if(N=h(L),F=k(L,N),0===F)M.push({minValue:L[0],maxValue:L[0],label:aa(L[0],L[0],e)});else{L=H(v,K,Q,N,F)*F;F=0;for(n=Q;1<=n;n--)C=Number((N-(n-.5)*L).toFixed(6)),M.push({minValue:v,maxValue:C,label:aa(v,C,e)}),v=C,F++;n=Number((N+.5*L).toFixed(6));M.push({minValue:v,maxValue:n,label:aa(v,n,e)});v=n;F++;for(C=1;C<=Q;C++)n=F===2*Q?K:Number((N+
(C+.5)*L).toFixed(6)),M.push({minValue:v,maxValue:n,label:aa(v,n,e)}),v=n,F++}else if("defined-interval"===B){if(!u)return M;Q=L[0];K=L[L.length-1];L=Math.ceil((K-Q)/u);v=Q;for(N=1;N<L;N++)F=Number((Q+N*u).toFixed(6)),M.push({minValue:v,maxValue:F,label:aa(v,F,e)}),v=F;M.push({minValue:v,maxValue:K,label:aa(v,K,e)})}return M}function aa(N,Q,B){let e=null;return e=N===Q?B&&"percent-of-total"===B?N+"%":N.toString():B&&"percent-of-total"===B?N+"% - "+Q+"%":N+" - "+Q}function S(N){const Q=[],B=[];let e=
Number.MIN_VALUE,u=1,M=-1;for(let L=0;L<N.length;L++){const v=N[L];v===e?(u++,B[M]=u):null!==v&&(Q.push(v),e=v,u=1,B.push(u),M++)}return{uniqueValues:Q,valueFrequency:B}}function P(N,Q,B){var e=N.length;const u=[];B>e&&(B=e);for(var M=0;M<B;M++)u.push(Math.round(M*e/B-1));u.push(e-1);M=R(u,N,Q,B);e=M.mean;M=M.sdcm;var L=B,v=0,K=0;let F=0,n=0,C=!0;for(let D=0;2>D&&C;D++){0===D&&(C=!1);for(var w=0;w<L-1;w++)for(;u[w+1]+1!==u[w+2];)if(u[w+1]+=1,v=q(w,u,N,Q),F=v.sbMean,v=v.sbSdcm,K=q(w+1,u,N,Q),n=K.sbMean,
K=K.sbSdcm,v+K<M[w]+M[w+1])M[w]=v,M[w+1]=K,e[w]=F,e[w+1]=n,C=!0;else{--u[w+1];break}for(w=L-1;0<w;w--)for(;u[w]!==u[w-1]+1;)if(--u[w],v=q(w-1,u,N,Q),F=v.sbMean,v=v.sbSdcm,K=q(w,u,N,Q),n=K.sbMean,K=K.sbSdcm,v+K<M[w-1]+M[w])M[w-1]=v,M[w]=K,e[w-1]=F,e[w]=n,C=!0;else{u[w]+=1;break}}C&&(M=R(u,N,Q,B));return u}function R(N,Q,B,e){let u=[];var M=[],L=[];let v=0;const K=[],F=[];for(var n=0;n<e;n++){var C=q(n,N,Q,B);K.push(C.sbMean);F.push(C.sbSdcm);v+=F[n]}C=v;for(n=!0;n||v<C;){n=!1;u=[];for(M=0;M<e;M++)u.push(N[M]);
for(L=0;L<e;L++)for(C=N[L]+1;C<=N[L+1];C++)if(M=Q[C],0<L&&C!==N[L+1]&&Math.abs(M-K[L])>Math.abs(M-K[L-1]))N[L]=C;else if(L<e-1&&N[L]!==C-1&&Math.abs(M-K[L])>Math.abs(M-K[L+1])){N[L+1]=C-1;break}C=v;v=0;M=[];L=[];for(let w=0;w<e;w++){M.push(K[w]);L.push(F[w]);const D=q(w,N,Q,B);K[w]=D.sbMean;F[w]=D.sbSdcm;v+=F[w]}}if(v>C){for(Q=0;Q<e;Q++)N[Q]=u[Q],K[Q]=M[Q],F[Q]=L[Q];v=C}return{mean:K,sdcm:F}}function H(N,Q,B,e,u){N=Math.max(e-N,Q-e)/u/B;return 1<=N?1:.5<=N?.5:.25}function h(N){let Q=0;for(let B=0;B<
N.length;B++)Q+=N[B];return Q/=N.length}function k(N,Q){let B=0;for(let e=0;e<N.length;e++){const u=N[e];B+=(u-Q)*(u-Q)}B/=N.length;return Math.sqrt(B)}function q(N,Q,B,e){var u=0,M=0;for(var L=Q[N]+1;L<=Q[N+1];L++){const v=e[L];u+=B[L]*v;M+=v}0>=M&&T.warn("Exception in Natural Breaks calculation");u/=M;M=0;for(L=Q[N]+1;L<=Q[N+1];L++)M+=e[L]*(B[L]-u)**2;return{sbMean:u,sbSdcm:M}}const T=f.getLogger("esri.rest.support.generateRendererUtils");l.createGenerateRendererClassBreaks=function(N){const {normalizationTotal:Q}=
N;return{classBreaks:ia(N),normalizationTotal:Q}};l.createGenerateRendererUniqueValues=function(N){N=S(N);const Q=[],B=N.uniqueValues.length;for(let e=0;e<B;e++){const u=N.uniqueValues[e];Q.push({value:u,count:N.valueFrequency[e],label:u.toString()})}return{uniqueValues:Q}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(l){l.makeEdgeCandidate=function(f,ia,aa,S,P,R=!1){return{objectId:f,target:ia,
distance:aa,type:"edge",start:S,end:P,draped:R}};l.makeVertexCandidate=function(f,ia,aa){return{objectId:f,target:ia,distance:aa,type:"vertex"}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,f,ia,aa,S,P,R){function H(na,ra,Aa){if(na)for(const c of na)(na=(na=S.getDeepValue(c,ra))&&"function"!==typeof na&&
Aa.get(na))&&S.setDeepValue(c,na.name,ra)}function h(na,ra){if(!na||!ra)return[];Ha.clear();k(Ha,na,ra);return Array.from(Ha).sort()}function k(na,ra,Aa){if(Aa)if(ra?.fields?.length)if(Aa.includes("*"))for(const {name:c}of ra.fields)na.add(c);else for(const c of Aa)q(na,ra,c);else if(Aa.includes("*"))na.clear(),na.add("*");else for(const c of Aa)null!=c&&na.add(c)}function q(na,ra,Aa){"string"===typeof Aa&&(ra?(ra=ra.get(Aa))&&na.add(ra.name):na.add(Aa))}async function T(na,ra,Aa){if(Aa){var {arcadeUtils:c}=
await R.loadArcade();Aa=c.extractFieldNames(Aa,ra?.fields?.map(m=>m.name));for(const m of Aa)q(na,ra,m)}}async function N(na,ra,Aa){if(Aa&&"1\x3d1"!==Aa){const c=(await new Promise((m,da)=>l(["../../core/sql/WhereClause"],m,da))).WhereClause.create(Aa,ra);if(!c.isStandardized)throw new ia("fieldUtils:collectFilterFields","Where clause is not standardized",{where:Aa});k(na,ra,c.fieldNames)}}function Q(na,ra){for(const Aa of na)if(Aa&&Aa.valueType&&Aa.valueType===ra)return Aa.name;return null}async function B(na,
ra){if(ra){var Aa=ra.elevationInfo?.featureExpressionInfo;if(Aa)return Aa.collectRequiredFields(na,ra.fieldsIndex)}}async function e(na,ra,Aa){const c=[];Aa?.expressionInfos&&c.push(...Aa.expressionInfos.map(m=>T(na,ra.fieldsIndex,m.expression)));Aa=Aa?.content;if(Array.isArray(Aa))for(const m of Aa)"expression"===m.type&&m.expressionInfo&&c.push(T(na,ra.fieldsIndex,m.expressionInfo.expression));await Promise.all(c)}async function u(na,ra,Aa){ra&&Aa&&(Aa.valueExpression?await T(na,ra.fieldsIndex,
Aa.valueExpression):Aa.field&&q(na,ra.fieldsIndex,Aa.field))}async function M(na,ra){const {labelingInfo:Aa,fieldsIndex:c}=ra;Aa&&Aa.length&&await Promise.all(Aa.map(m=>L(na,c,m)))}async function L(na,ra,Aa){if(Aa){var c=Aa.getLabelExpression();Aa=Aa.where;"arcade"===c.type?await T(na,ra,c.expression):(c=c.expression.match(/{[^}]*}/g))&&c.forEach(m=>{q(na,ra,m.slice(1,-1))});await N(na,ra,Aa)}}function v(na){return"number"===typeof na&&!isNaN(na)&&isFinite(na)}function K(na){return null===na||v(na)}
function F(na){return null===na||Ia(na)}function n(na){return null!=na&&"string"===typeof na}function C(na){return null===na||n(na)}function w(){return!0}function D(na,ra){let Aa;switch(na.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Aa=na.nullable?F:Ia;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Aa=na.nullable?K:v;break;case "string":case "esriFieldTypeString":Aa=
na.nullable?C:n;break;default:Aa=w}return 1===arguments.length?Aa:Aa(ra)}function z(na){return null!=na&&Ma.has(na.type)}function x(na,ra){return null==na||na.nullable&&null===ra?null:z(na)&&!E(na.type,Number(ra))?f.NumericRangeValidationError.OUT_OF_RANGE:D(na,ra)?na.domain?P.validateDomainValue(na.domain,ra):null:f.TypeValidationError.INVALID_TYPE}function E(na,ra){na="string"===typeof na?ca(na):na;if(!na)return!1;const Aa=na.min,c=na.max;return na.isInteger?Ia(ra)&&ra>=Aa&&ra<=c:ra>=Aa&&ra<=c}
function ca(na){switch(na){case "esriFieldTypeSmallInteger":case "small-integer":return Wa;case "esriFieldTypeInteger":case "integer":return Ya;case "esriFieldTypeSingle":case "single":return Ua;case "esriFieldTypeDouble":case "double":return gb}}function J(na,ra,Aa){if(!ra||!ra.attributes||!na){if(aa.isSome(Aa))for(var c of na??[])Aa.add(c);return!0}ra=ra.attributes;c=!1;for(const m of na)if(!(m in ra))if(c=!0,aa.isSome(Aa))Aa.add(m);else break;return c}const G=/^([0-9])/,p=/[^a-z0-9_\u0080-\uffff]/gi,
t=/_{2,}/g,X=/^_/,ha=/_$/,va="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),Da=["field","normalizationField"],Ha=new Set,Ia=(()=>"isInteger"in Number?Number.isInteger:na=>"number"===typeof na&&isFinite(na)&&Math.floor(na)===na)(),Ja=["integer","small-integer","single","double"],Ma=new Set([...Ja,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=void 0;(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Wa={min:-32768,max:32767,isInteger:!0},Ya={min:-2147483648,max:2147483647,isInteger:!0},Ua={min:-3.4E38,max:1.2E38,isInteger:!1},gb={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,
isInteger:!1};f.collectArcadeFieldNames=T;f.collectElevationFields=B;f.collectFeatureReductionFields=async function(na,ra,Aa){if(ra&&Aa&&"fields"in Aa){var c=[];c.push(e(na,ra,Aa.popupTemplate));Aa.fields&&c.push(...Aa.fields.map(async m=>{m.onStatisticExpression?T(na,ra.fieldsIndex,m.onStatisticExpression.expression):na.add(m.onStatisticField)}));await Promise.all(c)}};f.collectField=q;f.collectFields=k;f.collectFilterFields=async function(na,ra,Aa){ra&&(ra.timeInfo&&aa.isSome(Aa)&&Aa.timeExtent&&
k(na,ra.fieldsIndex,[ra.timeInfo.startField,ra.timeInfo.endField]),ra.floorInfo&&k(na,ra.fieldsIndex,[ra.floorInfo.floorField]),aa.isSome(Aa)&&aa.isSome(Aa.where)&&await N(na,ra.fieldsIndex,Aa.where))};f.collectLabelingFields=M;f.collectOrderByInfos=async function(na,ra,Aa){ra&&Aa&&await Promise.all(Aa.map(c=>u(na,ra,c)))};f.collectPopupTemplateFields=e;f.doubleRange=gb;f.featureHasFields=function(na,ra){return!J(na,ra,null)};f.fixFields=h;f.fixRendererFields=function(na,ra){if(null!=na&&null!=ra)for(const Aa of Array.isArray(na)?
na:[na])if(H(va,Aa,ra),"visualVariables"in Aa&&Aa.visualVariables)for(const c of Aa.visualVariables)H(Da,c,ra)};f.fixTimeInfoFields=function(na,ra){if(null!=na&&ra?.fields?.length)if("startField"in na){var Aa=ra.get(na.startField);ra=ra.get(na.endField);na.startField=Aa?.name??null;na.endField=ra?.name??null}else Aa=ra.get(na.startTimeField),ra=ra.get(na.endTimeField),na.startTimeField=Aa?.name??null,na.endTimeField=ra?.name??null};f.getDisplayFieldName=function({displayField:na,fields:ra}){if(na)return na;
if(!ra||!ra.length)return null;if(!(na=Q(ra,"name-or-title")||Q(ra,"unique-identifier")||Q(ra,"type-or-category")))a:{for(const Aa of ra)if(Aa&&Aa.name&&(ra=Aa.name.toLowerCase(),ra.includes("name")||ra.includes("title"))){na=Aa.name;break a}na=null}return na};f.getElevationFields=async function(na){if(!na)return[];const ra=new Set;await B(ra,na);return Array.from(ra).sort()};f.getExpressionFields=async function(na,ra){const Aa=new Set;for(const c of ra)await T(Aa,na.fieldsIndex,c);return Array.from(Aa).sort()};
f.getFeatureEditFields=function(na){if(!na)return[];const ra="editFieldsInfo"in na&&na.editFieldsInfo;return ra?h(na.fieldsIndex,[ra&&ra.creatorField,ra&&ra.creationDateField,ra&&ra.editorField,ra&&ra.editDateField]):[]};f.getFeatureGeometryFields=function(na){if(!na)return[];const ra=na.geometryFieldsInfo;return ra?h(na.fieldsIndex,[ra.shapeAreaField,ra.shapeLengthField]):[]};f.getFieldDefaultValue=function(na){const ra=na.defaultValue;if(void 0!==ra&&D(na,ra))return ra;if(na.nullable)return null};
f.getFieldRange=function(na){const ra=P.getDomainRange(na.domain);if(ra)return ra;if(z(na))return ca(na.type)};f.getLabelingFields=async function(na){if(!na)return[];const ra=new Set;await M(ra,na);return Array.from(ra).sort()};f.getNumericTypeForValue=function(na){if(!v(na))return null;if(Ia(na)){if(na>=Wa.min&&na<=Wa.max)return"esriFieldTypeSmallInteger";if(na>=Ya.min&&na<=Ya.max)return"esriFieldTypeInteger"}return na>=Ua.min&&na<=Ua.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=
async function(na){if(!na)return[];const ra="timeInfo"in na&&na.timeInfo;return ra?h(na.fieldsIndex,[na.trackIdField,ra.startField,ra.endField]):[]};f.integerRange=Ya;f.isDateField=function(na){return null!=na&&("date"===na.type||"esriFieldTypeDate"===na.type)};f.isNumberInRange=E;f.isNumericField=z;f.isRasterPixelValueField=function(na){return na?["raster.itempixelvalue","raster.servicepixelvalue"].some(ra=>na.toLowerCase().startsWith(ra)):!1};f.isStringField=function(na){return null!=na&&("string"===
na.type||"esriFieldTypeString"===na.type)};f.isValidFieldValue=function(na,ra){return null===x(na,ra)};f.isValueMatchingFieldType=D;f.normalizeFieldName=function(na){return null==na?null:na.trim().replace(p,"_").replace(t,"_").replace(X,"").replace(ha,"").replace(G,"F$1")||null};f.numericTypes=Ja;f.packFields=function(na,ra,Aa=1){if(!ra||!na)return[];if(ra.includes("*"))return["*"];ra=h(na,ra);return ra.length/na.fields.length>=Aa?["*"]:ra};f.populateMissingFields=J;f.rendererFields=va;f.sanitizeNullFieldValue=
function(na){return null==na||"number"===typeof na&&isNaN(na)?null:na};f.singleRange=Ua;f.smallIntegerRange=Wa;f.unpackFieldNames=function(na,ra){return aa.isNone(ra)||aa.isNone(na)?[]:ra.includes("*")?(na.fields??[]).map(Aa=>Aa.name):ra};f.validateFieldValue=x;f.validationErrorToString=function(na,ra,Aa){switch(na){case P.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Aa} is not in the coded domain - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;case P.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Aa} is out of the range of valid values - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;
case f.TypeValidationError.INVALID_TYPE:return`Value ${Aa} is not a valid value for the field type - field: ${ra.name}, type: ${ra.type}, nullable: ${ra.nullable}`;case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:c,max:m}=ca(ra.type);return`Value ${Aa} is out of range for the number type - field: ${ra.name}, type: ${ra.type}, value range is ${c} to ${m}`}};f.visualVariableFields=Da;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(l){l.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};l.validateDomainValue=function(f,ia){switch(f.type){case "range":const aa="range"in f?f.range[0]:f.minValue;f="range"in
f?f.range[1]:f.maxValue;if(null!=aa&&+ia<aa||null!=f&&+ia>f)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==f.codedValues||f.codedValues.every(S=>null==S||S.code!==ia))return l.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(S=>null==S||S.code!==ia))return l.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(l,f,ia,aa,S,P,R,H){function h(){q||(q=(async()=>{const N=await new Promise((Q,B)=>l(["./arcadeUtils"],Q,B));return{arcade:N.arcade,arcadeUtils:N,Dictionary:N.Dictionary,Feature:N.arcadeFeature}})());return q}const k=P.getLogger("esri.support.arcadeOnDemand");let q;aa=(N,Q,B)=>T.create(N,Q,B,null,["$feature","$view"]);let T=function(){function N(B,e,u,M,L,v,K){this.script=B;this.evaluate=M;this.fields=Array.isArray(v)?v:v.fields;this._syntaxTree=u;this._arcade=e;this._arcadeFeature=L;this._spatialReference=
K;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}N.create=async function(B,e,u,M,L,v){const {arcade:K,Feature:F,Dictionary:n}=await h(),C=H.fromJSON(e);let w;try{w=K.parseScript(B,v)}catch(J){return k.error(new S("arcade-bad-expression","Failed to parse arcade script",{script:B,error:J})),null}L=L.reduce((J,G)=>({...J,[G]:null}),{});let D=null;R.isSome(M)&&(D=new n(M),D.immutable=!0,L.$config=null);v=
(M=K.scriptUsesGeometryEngine(w))&&K.enableGeometrySupport();const z=K.scriptUsesFeatureSet(w)&&K.enableFeatureSetSupport(),x=(e=K.scriptIsAsync(w))&&K.enableAsyncSupport();L={vars:L,spatialReference:C,useAsync:!!x};await Promise.all([v,z,x]);v=new Set;await K.loadDependentModules(v,w,null,e,M);const E=new n;E.immutable=!1;E.setField("scale",0);const ca=K.compileScript(w,L);return new N(B,K,w,J=>{"$view"in J&&J.$view&&(E.setField("scale","object"===typeof J.$view?J.$view.scale:void 0),J.$view=E);
D&&(J.$config=D);return ca({vars:J,spatialReference:C})},new F,u,C)};var Q=N.prototype;Q.repurposeFeature=function(B){B.geometry&&!B.geometry.spatialReference&&(B.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(B.geometry,B.attributes,{fields:this.fields});return this._arcadeFeature};Q.referencesGeometry=function(){return this._referencesGeometry};Q.referencesScale=function(){return this._referencesScale};return ia._createClass(N)}();f.ArcadeExpression=
T;f.createDictionaryExpression=(N,Q,B,e)=>T.create(N,Q,B,e,["$feature","$view"]);f.createLabelExpression=(N,Q,B)=>T.create(N,Q,B,null,["$feature"]);f.createRendererExpression=aa;f.createVVExpression=aa;f.loadArcade=h;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(l,f,ia,aa,S,P,R,H,h,k,q,T){function N(){return new Promise((M,L)=>l(["../../../geometry/geometryEngineJSON"],M,L))}const Q={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var B={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},e={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},u={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=
function(M){if(P.isExtent(M))return!0;if(P.isPolygon(M)){for(const L of M.rings)if(5!==L.length||L[0][0]!==L[1][0]||L[0][0]!==L[4][0]||L[2][0]!==L[3][0]||L[0][1]!==L[3][1]||L[0][1]!==L[4][1]||L[1][1]!==L[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(M,L,v){const {spatialRel:K,geometry:F}=M;if(F){if(null==K||!0!==B[K])throw new ia("feature-store:unsupported-query","Unsupported query spatial relationship",{query:M});if(R.isValid(F.spatialReference)&&R.isValid(v)){if(null==
F||!0!==e[P.getJsonType(F)])throw new ia("feature-store:unsupported-query","Unsupported query geometry type",{query:M});if(null==L||!0!==u[L])throw new ia("feature-store:unsupported-query","Unsupported layer geometry type",{query:M});if(M.outSR)return q.checkProjectionSupport(M.geometry&&M.geometry.spatialReference,M.outSR)}}};f.getSpatialQueryOperator=function(M,L,v,K,F){if(P.isPolygon(L)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M)){const n=h.convertFromPolygon(new k,
L,!1,!1);return Promise.resolve(C=>H.polygonContainsPoint(n,!1,!1,C))}if(P.isPolygon(L)&&"esriGeometryMultipoint"===v){const n=h.convertFromPolygon(new k,L,!1,!1);if("esriSpatialRelContains"===M)return Promise.resolve(C=>H.polygonContainsMultipoint(n,!1,!1,C,K,F))}if(P.isExtent(L)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M))return Promise.resolve(n=>aa.extentContainsPoint(L,T.getGeometry(v,K,F,n)));if(P.isExtent(L)&&"esriGeometryMultipoint"===v&&"esriSpatialRelContains"===
M)return Promise.resolve(n=>aa.extentContainsMultipoint(L,T.getGeometry(v,K,F,n)));if(P.isExtent(L)&&"esriSpatialRelIntersects"===M){const n=S.getExtentIntersector(v);return Promise.resolve(C=>n(L,T.getGeometry(v,K,F,C)))}return N().then(n=>{const C=n[Q[M]].bind(null,L.spatialReference,L);return w=>C(T.getGeometry(v,K,F,w))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(l,f){l.extentIntersectsExtent=
f.extentIntersectsExtent;l.extentIntersectsMultipoint=f.extentIntersectsMultipoint;l.extentIntersectsPoint=f.extentIntersectsPoint;l.extentIntersectsPolygon=f.extentIntersectsPolygon;l.extentIntersectsPolyline=f.extentIntersectsPolyline;l.extentIntersectsRings=f.extentIntersectsRings;l.getFeatureExtentIntersector=f.getFeatureExtentIntersector;l.isSelfIntersecting=f.isSelfIntersecting;l.segmentIntersects=f.segmentIntersects;l.getExtentIntersector=function(ia){return"mesh"===ia?f.extentIntersectsExtent:
f.getFeatureExtentIntersector(ia)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function f(ia,aa,S,P,R){if(!ia)return!1;aa=aa?S?4:3:S?3:2;const {coords:H,lengths:h}=ia;S=!1;ia=0;for(const q of h){var k=ia;for(let T=ia,N=ia+q*aa;T<N;T+=aa){k=T+aa;k===N&&(k=ia);const Q=H[T],B=H[T+1],e=H[k];k=H[k+1];(B<R&&k>=R||k<R&&B>=R)&&Q+(R-B)/(k-B)*(e-Q)<P&&(S=!S)}ia+=q*aa}return S}l.polygonContainsCoords=f;l.polygonContainsMultipoint=
function(ia,aa,S,P,R,H){R=R?H?4:3:H?3:2;const {coords:h,lengths:k}=P;if(!k)return!1;for(let q=0,T=0;q<k.length;q++,T+=R)if(!f(ia,aa,S,h[T],h[T+1]))return!1;return!0};l.polygonContainsPoint=function(ia,aa,S,P){return f(ia,aa,S,P.coords[0],P.coords[1])};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function f(S,P,R,H,h){if(null!=H&&null!=h)return k=>{const q=S.getAttribute(k,P);k=S.getAttribute(k,R);
return(null==q||q<=h)&&(null==k||k>=H)};if(null!=H)return k=>{k=S.getAttribute(k,R);return null==k||k>=H};if(null!=h)return k=>{k=S.getAttribute(k,P);return null==k||k<=h}}function ia(S,P,R,H){if(null!=R&&null!=H&&R===H)return h=>S.getAttribute(h,P)===R;if(null!=R&&null!=H)return h=>{h=S.getAttribute(h,P);return h>=R&&h<=H};if(null!=R)return h=>S.getAttribute(h,P)>=R;if(null!=H)return h=>S.getAttribute(h,P)<=H}function aa(){return()=>!1}l.getTimeExtent=async function(S,P){if(!S)return null;const R=
P.featureAdapter,{startTimeField:H,endTimeField:h}=S;let k=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY;if(H&&h)await P.forEach(T=>{const N=R.getAttribute(T,H);T=R.getAttribute(T,h);null==N||isNaN(N)||(k=Math.min(k,N));null==T||isNaN(T)||(q=Math.max(q,T))});else{const T=H||h;await P.forEach(N=>{N=R.getAttribute(N,T);null==N||isNaN(N)||(k=Math.min(k,N),q=Math.max(q,N))})}return{start:k,end:q}};l.getTimeOperator=function(S,P,R){if(!P||!S)return null;const {startTimeField:H,endTimeField:h}=S;
if(!H&&!h)return null;const {start:k,end:q}=P;return null===k&&null===q?null:void 0===k&&void 0===q?aa():H&&h?f(R,H,h,k,q):ia(R,H||h,k,q)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,f){function ia(S){return"oid"===S.type||"esriFieldTypeOID"===S.type}function aa(S){return"global-id"===S.type||"esriFieldTypeGlobalID"===S.type}return function(){function S(R=[]){this.fields=
[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(R){this.fields=R;var H=[];for(const h of R){R=h?.name;const k=f.normalizeFieldName(h?.name)?.toLowerCase()??"";if(R&&k){const q=R.trim().toLowerCase();this._fieldsMap.set(R,h);this._fieldsMap.set(q,h);this._normalizedFieldsMap.set(k,h);H.push(q);"date"===h.type||"esriFieldTypeDate"===h.type?(this.dateFields.push(h),
this._dateFieldsSet.add(h)):f.isNumericField(h)&&(this._numericFieldsSet.add(h),this.numericFields.push(h));ia(h)||aa(h)||(h.editable=null==h.editable||!!h.editable,h.nullable=null==h.nullable||!!h.nullable)}}H.sort();this.uid=H.join(",")}}var P=S.prototype;P.destroy=function(){this._fieldsMap.clear()};P.has=function(R){return null!=this.get(R)};P.get=function(R){if(R){var H=this._fieldsMap.get(R);if(H)return H;(H=this._fieldsMap.get(R.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(R)?.toLowerCase()??
""))&&this._fieldsMap.set(R,H);return H}};P.isDateField=function(R){return this._dateFieldsSet.has(this.get(R))};P.isNumericField=function(R){return this._numericFieldsSet.has(this.get(R))};P.normalizeFieldName=function(R){if(R=this.get(R))return R.name??void 0};l._createClass(S,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const R of this.fields)ia(R)||aa(R)||R.nullable||void 0!==f.getFieldDefaultValue(R)||this._requiredFields.push(R)}return this._requiredFields}}]);
return S}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),function(l,f,ia,aa,S,P,R,H,h,k,q,T,N,Q,B){function e(D){return u.has(D)?u.get(D):
"number"===typeof D?D:1}l.Task=void 0;(function(D){D[D.YIELD=1]="YIELD"})(l.Task||(l.Task={}));l.TaskPriority=void 0;(function(D){D.RESOURCE_CONTROLLER_IMMEDIATE="immediate";D.RESOURCE_CONTROLLER="schedule";D.SLIDE="slide";D.STREAM_DATA_LOADER="stream loader";D.ELEVATION_QUERY="elevation query";D.TERRAIN_SURFACE="terrain";D.SURFACE_GEOMETRY_UPDATES="surface geometry updates";D.LOD_RENDERER="LoD renderer";D.GRAPHICS_CORE="Graphics3D";D.I3S_CONTROLLER="I3S";D.POINT_CLOUD_LAYER="point cloud";D.FEATURE_TILE_FETCHER=
"feature fetcher";D.OVERLAY="overlay";D.STAGE="stage";D.GRAPHICS_DECONFLICTOR="graphics deconflictor";D.FILTER_VISIBILITY="Graphics3D filter visibility";D.SCALE_VISIBILITY="Graphics3D scale visibility";D.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";D.POINT_OF_INTEREST_FREQUENT="POI frequent";D.POINT_OF_INTEREST_INFREQUENT="POI infrequent";D.LABELER="labeler";D.FEATURE_QUERY_ENGINE="feature query";D.FEATURE_TILE_TREE="feature tile tree";D.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";D.ELEVATION_ALIGNMENT=
"elevation alignment";D.TEXT_TEXTURE_ATLAS="text texture atlas";D.TEXTURE_UNLOAD="texture unload";D.LINE_OF_SIGHT_TOOL="line of sight tool";D.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";D.ELEVATION_PROFILE="elevation profile";D.SNAPPING="snapping";D.SHADOW_ACCUMULATOR="shadow accumulator";D.CLOUDS_GENERATOR="clouds generator";D[D.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||(l.TaskPriority={}));const u=new Map([[l.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[l.TaskPriority.RESOURCE_CONTROLLER,
4],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.LOD_RENDERER,2],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,4],[l.TaskPriority.STAGE,4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,
4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.CLOUDS_GENERATOR,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,
0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,30]]),M=q.Milliseconds(6.5),L=q.Milliseconds(1),v=q.Milliseconds(30),K=q.Milliseconds(1E3/30),F=q.Milliseconds(100);var n;(function(D){let z=function(){function ca(){this._updating=new T.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new R("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new E;this._state=B.RenderState.INTERACTING;this._tasks=new H;this._runQueue=new H;
this._load=0;this._idleStateCallbacks=new H;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=k.watch(()=>Q.SCHEDULER_LOG_SLOW_TASKS,p=>this._debug=p,k.initial);for(const p of Object.keys(l.TaskPriority))this.performanceInfo.tasks.set(l.TaskPriority[p],new R(l.TaskPriority[p]));const G=this;this._test={FRAME_SAFETY_BUDGET:M,INTERACTING_BUDGET:K,IDLE_BUDGET:F,get availableBudget(){return G._budget.budget},usedBudget:0,getBudget:()=>G._budget,setBudget:p=>G._budget=p,updateTask:p=>
this._updateTask(p),getState:p=>this._getState(p),getRuntime:p=>this._getRuntime(p),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var J=ca.prototype;J._updatingChanged=function(){this._updating.set(this._tasks.some(G=>G.needsUpdate))};J.destroy=function(){this._tasks.toArray().forEach(G=>G.remove());this._tasks.clear();P.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};J.taskRunningChanged=function(G){this._updatingChanged();
G&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};J.registerTask=function(G,p){const t=e(G);p=new x(this,G,p,t);this._tasks.push(p);this._updatingChanged();this.performanceInfo.tasks.has(G)||this.performanceInfo.tasks.set(G,new R(G));return p};J.registerIdleStateCallbacks=function(G,p){const t={idleBegin:G,idleEnd:p};this._idleStateCallbacks.push(t);
this.state===B.RenderState.IDLE&&this._idleUpdatesStartFired&&t.idleBegin();const X=this;return{remove:()=>this._removeIdleStateCallbacks(t),set idleBegin(ha){X._idleUpdatesStartFired&&(t.idleEnd(),X._state===B.RenderState.IDLE&&ha());t.idleBegin=ha},set idleEnd(ha){t.idleEnd=ha}}};J.updateBudget=function(G){this._test.usedBudget=0;++this._frameNumber;let p=M,t=G.frameDuration,X=L;switch(this.state){case B.RenderState.IDLE:p=q.Milliseconds(0);t=q.Milliseconds(Math.max(F,G.frameDuration));X=v;break;
case B.RenderState.INTERACTING:t=q.Milliseconds(Math.max(K,G.frameDuration))}t=q.Milliseconds(t-G.elapsedFrameTime-p);if(this.state!==B.RenderState.IDLE&&t<L&&!this._forceTask)return this._forceTask=!0,!1;t=q.Milliseconds(Math.max(t,X));this._budget.reset(t,this.state);this._updateLoad();return this._schedule()};J.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case B.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(G=>
G.idleBegin()));this._runIdle();break;case B.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};J.stopFrame=function(){this._budget.reset(q.Milliseconds(0),this._state);this._budget.madeProgress()};J._removeIdleStateCallbacks=function(G){this._idleUpdatesStartFired&&G.idleEnd();this._idleStateCallbacks.removeUnordered(G)};J.removeTask=function(G){this._tasks.removeUnordered(G);this._runQueue.removeUnordered(G);this._updatingChanged()};
J._updateTask=function(G){this._tasks.forAll(p=>{p.name===G&&p.setPriority(G)})};J._getState=function(G){if(this._runQueue.some(t=>t.name===G))return l.TaskState.SCHEDULED;let p=l.TaskState.IDLE;this._tasks.forAll(t=>{t.name===G&&t.needsUpdate&&(1>=t.schedulePriority?p=l.TaskState.READY:p!==l.TaskState.READY&&(p=l.TaskState.WAITING))});return p};J._getRuntime=function(G){let p=0;this._tasks.forAll(t=>{t.name===G&&(p+=t.runtime)});return p};J._resetRuntimes=function(){this._tasks.forAll(G=>G.runtime=
0)};J._getRunning=function(){const G=new Map;this._tasks.forAll(t=>{t.needsUpdate&&G.set(t.name,(G.get(t.name)||0)+1)});if(0===G.size)return null;let p="";G.forEach((t,X)=>{p=1<t?p+` ${t}x ${X}`:p+` ${X}`});return p};J._runIdle=function(){this._run()};J._runInteracting=function(){this._run()};J._runAnimating=function(){this._run()};J._updateLoad=function(){const G=this._tasks.reduce((p,t)=>t.needsUpdate?++p:p,0);this._load=.9*this._load+G*(1-.9)};J._schedule=function(){this._runQueue.filterInPlace(G=>
{if(G.needsUpdate)return!0;G.schedulePriority=G.basePriority;return!1});for(this._tasks.forAll(G=>{0===G.basePriority&&G.needsUpdate&&!this._runQueue.includes(G)&&G.blockFrame!==this._frameNumber&&this._runQueue.unshift(G)});0===this._runQueue.length;){let G=!1;this._tasks.forAll(p=>{if(p.needsUpdate&&0!==p.schedulePriority&&0!==p.basePriority&&p.blockFrame!==this._frameNumber)switch(G=!0,p.schedulePriority){case 1:p.schedulePriority=0;this._runQueue.push(p);break;default:--p.schedulePriority}});
if(!G)return this._updatingChanged(),!1}this._updatingChanged();return!0};J._run=function(){const G=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var p=this._budget.now();const t=this._runQueue.pop();this._budget.resetProgress();try{t.task.runTask(this._budget)===l.Task.YIELD&&(t.blockFrame=this._frameNumber)}catch(X){S.getLogger("esri.views.support.Scheduler").error(`Exception in task "${t.name}"`,X)}!this._budget.hasProgressed&&t.blockFrame!==this._frameNumber&&
t.needsUpdate&&(t.blockFrame=this._frameNumber);t.schedulePriority=t.basePriority;p=this._budget.now()-p;t.runtime+=p;this._frameTaskTimes.set(t.priority,this._frameTaskTimes.get(t.priority)+p);this._debug&&p>2*this._budget.budget&&console.log("Task",t.name,"used",p,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-G);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
G)};J._startFrameTaskTimes=function(){for(const G of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[G],0)};J._recordFrameTaskTimes=function(G){this._frameTaskTimes.forEach((p,t)=>this.performanceInfo.tasks.get(t).record(p));this.performanceInfo.total.record(G)};f._createClass(ca,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(G){this._state!==G&&(this._state=
G,this.state!==B.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(p=>p.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ca}();D.Scheduler=z;let x=function(){function ca(G,p,t,X){this._scheduler=G;this.name=p;this._basePriority=X;this.runtime=this.blockFrame=0;this._queue=new N.PromiseQueue;this._handles=new ia;this.schedulePriority=this._basePriority;this._task=new T.ObservableValue(P.isSome(t)?t:this._queue);this._handles.add(k.when(()=>
this.task.running,ha=>G.taskRunningChanged(ha)))}var J=ca.prototype;J.remove=function(){this.processQueue(C);this._scheduler.removeTask(this);this.schedule=w.schedule;this.reschedule=w.reschedule;this._handles.destroy()};J.setPriority=function(G){this.name=G;G=e(G);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=G;this._basePriority=G};J.schedule=function(G,p,t){return this._queue.push(G,p,t)};J.reschedule=function(G,p,t){return this._queue.unshift(G,p,t)};J.processQueue=
function(G){this._queue.runTask(G)};f._createClass(ca,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(G){this.setPriority(G)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ca}(),E=function(){function ca(){this._begin="undefined"!==typeof performance?performance.now():0;
this._budget=0;this._state=B.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var J=ca.prototype;J.run=function(G){if(this.done)return!1;!0===G()&&this.madeProgress();return!0};J.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};J.reset=function(G,p){this._begin=this.now();this._budget=G;this._state=p;this.resetProgress()};J.now=function(){return performance.now()};J.resetProgress=function(){this._done=this._progressed=!1};f._createClass(ca,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(G){this._enabled=G}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return ca}();D.Budget=E})(n||(n={}));l.TaskState=void 0;
(function(D){D.SCHEDULED="s";D.READY="r";D.WAITING="w";D.IDLE="i"})(l.TaskState||(l.TaskState={}));const C=(()=>{const D=new n.Budget;D.enabled=!1;return D})(),w=new (function(){function D(){}var z=D.prototype;z.remove=function(){};z.processQueue=function(){};z.schedule=function(x,E,ca){try{if(h.isAborted(E)){const J=h.createAbortError();return ca?Promise.resolve(ca(J)):Promise.reject(J)}return h.when(x(C))}catch(J){return Promise.reject(J)}};z.reschedule=function(x,E,ca){return this.schedule(x,E,
ca)};return f._createClass(D)}());l.ImmediateTask=w;l.getTaskPriority=e;l.newScheduler=function(){return new n.Scheduler};l.noBudget=C;l.taskPriorities=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,f,ia,aa,S,P,R){function H(N,Q,B={}){return h(N,Q,B,q)}function h(N,Q,B={},e){let u=null;const M=B.once?(L,
v)=>{e(L)&&(aa.removeMaybe(u),Q(L,v))}:(L,v)=>{e(L)&&Q(L,v)};u=P.watchTracked(N,M,B.sync,B.equals);B.initial&&(N=N(),M(N,N));return u}function k(N,Q,B){if(S.isAborted(B))return Promise.reject(S.createAbortError());const e=N();if(Q?.(e))return Promise.resolve(e);let u=null;return new Promise((M,L)=>{u=ia.handlesGroup([S.onAbort(B,()=>{u=aa.removeMaybe(u);L(S.createAbortError())}),h(N,v=>{u=aa.removeMaybe(u);M(v)},{sync:!1,once:!0},Q??q)])})}function q(N){return!0}function T(N){return!!N}l.autorun=
R.autorun;l.initial={initial:!0};l.on=function(N,Q,B,e={}){function u(){L&&v&&(v.remove(),e.onListenerRemove?.(L),v=L=null)}function M(n){e.once&&e.once&&aa.removeMaybe(K);B(n)}let L=null,v=null,K=null;const F=H(N,(n,C)=>{u();f.isEventTarget(n)&&(L=n,v=f.on(n,Q,M),e.onListenerAdd?.(n))},{sync:e.sync,initial:!0});return K=ia.makeHandle(()=>{F.remove();u()})};l.once=function(N,Q){return k(N,null,Q)};l.pausable=function(N,Q,B={}){let e=!1;const u=H(N,(M,L)=>{e||Q(M,L)},B);return{remove(){u.remove()},
pause(){e=!0},resume(){e=!1}}};l.sync={sync:!0};l.syncAndInitial={sync:!0,initial:!0};l.watch=H;l.when=function(N,Q,B={}){return h(N,Q,B,T)};l.whenOnce=function(N,Q){return k(N,T,Q)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../tracking","./SimpleObservable"],function(l,f,ia,aa){let S=function(){function P(H){this._observable=new aa.SimpleObservable;
this._value=H}var R=P.prototype;R.get=function(){ia.trackAccess(this._observable);return this._value};R.set=function(H){H!==this._value&&(this._value=H,this._observable.notify())};return f._createClass(P)}();l.ObservableValue=S;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(l,f,ia,aa){let S=
function(){function R(){this._tasks=[];this._running=new aa.ObservableValue(!1)}var H=R.prototype;H.destroy=function(){this.cancelAll()};H.runTask=function(h){for(;!h.done&&this._process(h);)h.madeProgress()};H.push=function(h,k,q){this._running.set(!0);return new Promise((T,N)=>this._tasks.push(new P(T,N,h,k,q)))};H.unshift=function(h,k,q){this._running.set(!0);return new Promise((T,N)=>this._tasks.unshift(new P(T,N,h,k,q)))};H._process=function(h){if(0===this._tasks.length)return!1;const k=this._tasks.shift();
try{const q=ia.isAborted(k.signal);if(q&&!k.abortCallback)k.reject(ia.createAbortError());else{const T=q?k.abortCallback?.(ia.createAbortError()):k.callback(h);ia.isPromiseLike(T)?T.then(k.resolve,k.reject):k.resolve(T)}}catch(q){k.reject(q)}this._running.set(0<this._tasks.length);return!0};H.cancelAll=function(){const h=ia.createAbortError();for(const k of this._tasks)if(k.abortCallback){const q=k.abortCallback(h);k.resolve(q)}else k.reject(h);this._tasks.length=0;this._running.set(!1)};f._createClass(R,
[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return R}(),P=f._createClass(function(R,H,h,k,q){this.resolve=R;this.reject=H;this.callback=h;this.signal=k;this.abortCallback=q});l.PromiseQueue=S;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,ia,aa,S,P,R,H){ia=function(h){function k(){var T=q.apply(this,arguments);T.SCHEDULER_LOG_SLOW_TASKS=!1;T.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return T}l._inherits(k,h);var q=l._createSuper(k);return l._createClass(k)}(ia);f.__decorate([aa.property()],ia.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([aa.property()],ia.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ia=f.__decorate([H.subclass("esri.views.support.DebugFlags")],ia);
return new ia})},"esri/views/support/RenderState":function(){define(["exports"],function(l){l.RenderState=void 0;var f=l.RenderState||(l.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(l,f,ia,aa,S){function*P(L){switch(L.type){case "Feature":yield L;
break;case "FeatureCollection":for(const v of L.features)v&&(yield v)}}function*R(L){if(L)switch(L.type){case "Point":yield L.coordinates;break;case "LineString":case "MultiPoint":yield*L.coordinates;break;case "MultiLineString":case "Polygon":for(const v of L.coordinates)yield*v;break;case "MultiPolygon":for(const v of L.coordinates)for(const K of v)yield*K}}function*H(L,v={}){const {geometryType:K,objectIdField:F}=v;for(const n of L){const {geometry:C,properties:w,id:D}=n;if(C&&M[C.type]!==K)continue;
L=w||{};let z=void 0;F&&(z=L[F],null==D||z||(L[F]=z=D));yield new ia.OptimizedFeature(C?T(new aa,C,v):null,L,null,z??void 0)}}function h(L){for(const v of L)if(2<v.length)return!0;return!1}function k(L){let v=0;for(let K=0;K<L.length;K++){const F=L[K],n=L[(K+1)%L.length];v+=F[0]*n[1]-n[0]*F[1]}return 0>=v}function q(L){const v=L[0],K=L[L.length-1];v[0]===K[0]&&v[1]===K[1]&&v[2]===K[2]||L.push(v);return L}function T(L,v,K){switch(v.type){case "LineString":return B(L,v.coordinates,K),L;case "MultiLineString":for(const n of v.coordinates)B(L,
n,K);return L;case "MultiPoint":return B(L,v.coordinates,K),L;case "MultiPolygon":for(var F of v.coordinates)for(N(L,F[0],K),v=1;v<F.length;v++)Q(L,F[v],K);return L;case "Point":return u(L,v.coordinates,K),L;case "Polygon":F=v.coordinates;N(L,F[0],K);for(v=1;v<F.length;v++)Q(L,F[v],K);return L}}function N(L,v,K){v=q(v);k(v)?B(L,v,K):e(L,v,K)}function Q(L,v,K){v=q(v);k(v)?e(L,v,K):B(L,v,K)}function B(L,v,K){for(const F of v)u(L,F,K);L.lengths.push(v.length)}function e(L,v,K){for(let F=v.length-1;0<=
F;F--)u(L,v[F],K);L.lengths.push(v.length)}function u(L,v,K){const [F,n,C]=v;L.coords.push(F,n);K.hasZ&&L.coords.push(C||0)}const M={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};l.createOptimizedFeatures=function(L,v){return Array.from(H(P(L),v))};l.getGeometryType=function(L){return M[L]};l.inferLayerProperties=function(L,v={}){const K=[];var F=
new Set;const n=new Set;var C=!1;let w=null,D=!1,z=void 0;({geometryType:v=null}=v);var x=!1;for(const E of P(L)){const {geometry:ca,properties:J,id:G}=E;if(ca&&(v||(v=M[ca.type]),M[ca.type]!==v))continue;C||(C=R(ca),C=h(C));!D&&(D=null!=G)&&(z=typeof G,J&&(w=Object.keys(J).filter(p=>J[p]===G)));J&&w&&D&&null!=G&&(1<w.length?w=w.filter(p=>J[p]===G):1===w.length&&(w=J[w[0]]===G?w:[]));if(!x&&J){L=!0;for(const p in J){if(F.has(p))continue;x=J[p];if(null==x){L=!1;n.add(p);continue}a:switch(typeof x){case "string":x=
"esriFieldTypeString";break a;case "number":x="esriFieldTypeDouble";break a;default:x="unknown"}if("unknown"===x){n.add(p);continue}n.delete(p);F.add(p);const t=S.normalizeFieldName(p);t&&K.push({name:t,alias:p,type:x})}x=L}}if(F=S.normalizeFieldName(1===w?.length&&w[0]||null)??void 0)for(const E of K)if(E.name===F&&S.isNumericField(E)){E.type="esriFieldTypeOID";break}return{fields:K,geometryType:v,hasZ:C,objectIdFieldName:F,objectIdFieldType:z,unknownFields:Array.from(n)}};l.validateGeoJSON=function(L){if(!L)throw new f("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==L.type&&"FeatureCollection"!==L.type)throw new f("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:L});({crs:L}=L);if(L){var v="string"===typeof L?L:"name"===L.type?L.properties.name:"EPSG"===L.type?L.properties.code:null,K=RegExp(".*(CRS84H?|4326)$","i");if(!v||!K.test(v))throw new f("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:L});}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(l,f,ia,aa,S){const P=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let R=1;l.createCapabilities=function(H,h){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:H},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,
supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0},query:aa.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:h,
supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};l.createDefaultAttributesFunction=function(H,h){if(f("esri-csp-restrictions"))return()=>({[h]:null,...H});try{let k=`this.${h} = null;`;for(const T in H){const N=P.test(T)?`.${T}`:`["${T}"]`;k+=`this${N} = ${JSON.stringify(H[T])};`}const q=
(new Function(`\n      return class AttributesClass$${R++} {\n        constructor() {\n          ${k};\n        }\n      }\n    `))();return()=>new q}catch(k){return()=>({[h]:null,...H})}};l.createDefaultTemplate=function(H={}){return[{name:"New Feature",description:"",prototype:{attributes:ia.clone(H)}}]};l.createDrawingInfo=function(H){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===H||"esriGeometryMultipoint"===H?S.defaultPointSymbolJSON:"esriGeometryPolyline"===H?S.defaultPolylineSymbolJSON:
S.defaultPolygonSymbolJSON}}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(l){const f=[252,146,31,255],ia={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},aa={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};l.defaultColor=f;l.defaultOutlineColor=[153,153,153,255];l.defaultPointSymbolJSON=ia;l.defaultPolygonSymbolJSON=
{type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};l.defaultPolylineSymbolJSON=aa;l.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};l.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,
size:10.5};l.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};l.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),
function(l,f,ia,aa,S,P){function R(Q){return new k(Q)}async function H(){aa.isNone(N)&&(N=await new Promise((Q,B)=>l(["../../../../geometry/geometryEngineJSON"],Q,B)));return N}let h=ia._createClass(function(){this.description=this.code=null}),k=ia._createClass(function(Q){this.error=new h;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=Q}),q=ia._createClass(function(Q){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=Q});const T=new Set;let N;
f.createFeatureEditErrorResult=R;f.createFeatureEditSuccessResult=function(Q){return new q(Q)};f.loadGeometryEngineForSimplify=async function(Q,B){!S.isValid(Q)||"esriGeometryPolygon"!==B&&"esriGeometryPolyline"!==B||await H()};f.mixAttributes=function(Q,B,e,u=!1,M){T.clear();for(const F in e){const n=Q.get(F);if(!n)continue;var L=e[F],v=n,K=L;let C=K;"string"===typeof K&&P.isNumericField(v)?C=parseFloat(K):null!=K&&P.isStringField(v)&&"string"!==typeof K&&(C=String(K));v=P.sanitizeNullFieldValue(C);
v!==L&&M&&M.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:n,originalValue:L,sanitizedValue:v}});T.add(n.name);if(n&&(u||n.editable)){if(L=P.validateFieldValue(n,v))return R(P.validationErrorToString(L,n,v));B[n.name]=v}}for(const F of Q?.requiredFields??[])if(!T.has(F.name))return R(`missing required field "${F.name}"`);return null};f.simplify=function(Q,B){if(!Q||!S.isValid(B))return Q;if("rings"in Q||"paths"in Q){if(aa.isNone(N))throw new TypeError("geometry engine not loaded");
return N.simplify(B,Q)}return Q};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(l,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",
esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});l.kebabDict=f;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(l,
f,ia,aa,S,P,R,H,h,k,q,T,N,Q,B,e,u,M,L){const v={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function K(){this._queryEngine=null;this._snapshotFeatures=async n=>{n=await this._fetch(n);return this._createFeatures(n)}}var F=K.prototype;F.destroy=function(){this._queryEngine?.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};F.load=async function(n,C={}){this._loadOptions={url:n.url,customParameters:n.customParameters};
var w=[];await this._checkProjection(n.spatialReference);var D=null;n.url&&(D=await this._fetch(C?.signal));var z=Q.inferLayerProperties(D,{geometryType:n.geometryType});C=n.fields||z.fields||[];const x=null!=n.hasZ?n.hasZ:z.hasZ,E=z.geometryType;let ca=n.objectIdField||z.objectIdFieldName||"__OBJECTID";const J=n.spatialReference||h.WGS84;n=n.timeInfo;C===z.fields&&0<z.unknownFields.length&&w.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",
details:{unknownFields:z.unknownFields}});let G=(new u(C)).get(ca);G?("esriFieldTypeString"!==G.type&&(G.type="esriFieldTypeOID"),G.editable=!1,G.nullable=!1,ca=G.name):(G={alias:ca,name:ca,type:"string"===z.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},C.unshift(G));z={};for(var p of C){null==p.name&&(p.name=p.alias);null==p.alias&&(p.alias=p.name);if(!p.name)throw new aa("geojson-layer:invalid-field-name","field name is missing",{field:p});if(!M.kebabDict.jsonValues.includes(p.type))throw new aa("geojson-layer:invalid-field-type",
`invalid type for field "${p.name}"`,{field:p});if(p.name!==G.name){const ha=L.getFieldDefaultValue(p);void 0!==ha&&(z[p.name]=ha)}}this._fieldsIndex=new u(C);p=this._fieldsIndex.requiredFields.indexOf(G);-1<p&&this._fieldsIndex.requiredFields.splice(p,1);n&&(n.startTimeField&&((p=this._fieldsIndex.get(n.startTimeField))?(n.startTimeField=p.name,p.type="esriFieldTypeDate"):n.startTimeField=null),n.endTimeField&&((p=this._fieldsIndex.get(n.endTimeField))?(n.endTimeField=p.name,p.type="esriFieldTypeDate"):
n.endTimeField=null),n.trackIdField&&((p=this._fieldsIndex.get(n.trackIdField))?n.trackIdField=p.name:(n.trackIdField=null,w.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:n}}))),n.startTimeField||n.endTimeField||(w.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:n}}),n=null));p=E?B.createDrawingInfo(E):void 0;w={warnings:w,featureErrors:[],layerDefinition:{...v,drawingInfo:p??
void 0,templates:B.createDefaultTemplate(z),extent:void 0,geometryType:E,objectIdField:ca,fields:C,hasZ:!!x,timeInfo:n}};this._queryEngine=new N.QueryEngine({fields:C,geometryType:E,hasM:!1,hasZ:x,objectIdField:ca,spatialReference:J,timeInfo:n,featureStore:new q({geometryType:E,hasM:!1,hasZ:x}),cacheSpatialQueries:!0});this._createDefaultAttributes=B.createDefaultAttributesFunction(z,ca);D=await this._createFeatures(D);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,D);D=this._normalizeFeatures(D,
w.warnings,w.featureErrors);this._queryEngine.featureStore.addMany(D);const {fullExtent:t,timeExtent:X}=await this._queryEngine.fetchRecomputedExtents();w.layerDefinition.extent=t;if(X){const {start:ha,end:va}=X;w.layerDefinition.timeInfo.timeExtent=[ha,va]}return w};F.applyEdits=async function(n){const {spatialReference:C,geometryType:w}=this._queryEngine;await Promise.all([e.loadGeometryEngineForSimplify(C,w),T.checkProjectionSupport(n.adds,C),T.checkProjectionSupport(n.updates,C)]);await this._waitSnapshotComplete();
return this._applyEdits(n)};F.queryFeatures=async function(n={},C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(n,C.signal)};F.queryFeatureCount=async function(n={},C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(n,C.signal)};F.queryObjectIds=async function(n={},C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(n,C.signal)};F.queryExtent=async function(n={},C={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQueryForExtent(n,C.signal)};F.querySnapping=async function(n,C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(n,C.signal)};F.refresh=async function(n){this._loadOptions.customParameters=n;this._snapshotTask?.abort();this._snapshotTask=ia.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(D=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,D);(D=this._normalizeFeatures(D))&&
this._queryEngine.featureStore.addMany(D)},D=>{this._queryEngine.featureStore.clear();R.isAbortError(D)||S.getLogger("esri.layers.GeoJSONLayer").error(new aa("geojson-layer:refresh","An error occurred during refresh",{error:D}))});await this._waitSnapshotComplete();const {fullExtent:C,timeExtent:w}=await this._queryEngine.fetchRecomputedExtents();return{extent:C,timeExtent:w}};F._createFeatures=async function(n){if(null==n)return[];const {geometryType:C,hasZ:w,objectIdField:D}=this._queryEngine;n=
Q.createOptimizedFeatures(n,{geometryType:C,hasZ:w,objectIdField:D});if(!h.equals(this._queryEngine.spatialReference,h.WGS84))for(const z of n)P.isSome(z.geometry)&&(z.geometry=k.convertFromGeometry(T.project(k.convertToGeometry(z.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),h.WGS84,this._queryEngine.spatialReference)));return n};F._waitSnapshotComplete=async function(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}};
F._fetch=async function(n){const {url:C,customParameters:w}=this._loadOptions;n=(await f(C,{responseType:"json",query:{...w},signal:n})).data;await Q.validateGeoJSON(n);return n};F._normalizeFeatures=function(n,C,w){const {objectIdField:D}=this._queryEngine,z=[];for(const x of n){n=this._createDefaultAttributes();const E=e.mixAttributes(this._fieldsIndex,n,x.attributes,!0,C);E?w?.push(E):(this._assignObjectId(n,x.attributes,!0),x.attributes=n,x.objectId=n[D],z.push(x))}return z};F._applyEdits=async function(n){const {adds:C,
updates:w,deletes:D}=n;n={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};C&&C.length&&this._applyAddEdits(n,C);w&&w.length&&this._applyUpdateEdits(n,w);if(D&&D.length){for(const E of D)n.deleteResults.push(e.createFeatureEditSuccessResult(E));this._queryEngine.featureStore.removeManyById(D)}const {fullExtent:z,timeExtent:x}=await this._queryEngine.fetchRecomputedExtents();return{extent:z,timeExtent:x,featureEditResults:n}};F._applyAddEdits=function(n,C){const {addResults:w}=n,{geometryType:D,
hasM:z,hasZ:x,objectIdField:E,spatialReference:ca,featureStore:J}=this._queryEngine,G=[];for(const p of C){if(p.geometry&&D!==H.getJsonType(p.geometry)){w.push(e.createFeatureEditErrorResult("Incorrect geometry type."));continue}C=this._createDefaultAttributes();const t=e.mixAttributes(this._fieldsIndex,C,p.attributes);t?w.push(t):(this._assignObjectId(C,p.attributes),p.attributes=C,null!=p.uid&&(n.uidToObjectId[p.uid]=p.attributes[E]),P.isSome(p.geometry)&&(C=p.geometry.spatialReference??ca,p.geometry=
T.project(e.simplify(p.geometry,C),C,ca)),G.push(p),w.push(e.createFeatureEditSuccessResult(p.attributes[E])))}J.addMany(k.convertFromFeatures([],G,D,x,z,E))};F._applyUpdateEdits=function({updateResults:n},C){const {geometryType:w,hasM:D,hasZ:z,objectIdField:x,spatialReference:E,featureStore:ca}=this._queryEngine;for(const G of C){const {attributes:p,geometry:t}=G;C=p&&p[x];if(null==C){n.push(e.createFeatureEditErrorResult(`Identifier field ${x} missing`));continue}if(!ca.has(C)){n.push(e.createFeatureEditErrorResult(`Feature with object id ${C} missing`));
continue}const X=k.convertToFeature(ca.getFeature(C),w,z,D);if(P.isSome(t)){if(w!==H.getJsonType(t)){n.push(e.createFeatureEditErrorResult("Incorrect geometry type."));continue}var J=t.spatialReference??E;X.geometry=T.project(e.simplify(t,J),J,E)}if(p&&(J=e.mixAttributes(this._fieldsIndex,X.attributes,p))){n.push(J);continue}ca.add(k.convertFromFeature(X,w,z,D,x));n.push(e.createFeatureEditSuccessResult(C))}};F._createObjectIdGenerator=function(n,C){const w=n.fieldsIndex.get(n.objectIdField);if("esriFieldTypeString"===
w.type)return()=>w.name+"-"+Date.now().toString(16);let D=Number.NEGATIVE_INFINITY;for(const z of C)z.objectId&&(D=Math.max(D,z.objectId));D=Math.max(0,D)+1;return()=>D++};F._assignObjectId=function(n,C,w=!1){const D=this._queryEngine.objectIdField;n[D]=w&&D in C?C[D]:this._objectIdGenerator()};F._checkProjection=async function(n){try{await T.checkProjectionSupport(h.WGS84,n)}catch{throw new aa("geojson-layer","Projection not supported");}};return l._createClass(K)}()});