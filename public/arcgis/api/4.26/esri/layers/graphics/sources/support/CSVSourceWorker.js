// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(l,f,ia,ba,R,P,Q,H){function k(M){return{ok:!0,value:M}}function m(M){return{ok:!1,error:M}}function h(M){return R.isSome(M)&&!0===M.ok?M.value:null}function L(M){return R.isSome(M)&&!1===M.ok?M.error:null}let J=function(M){function x(p,F){var V=e.call(this,
{});V._result=null;V._abortHandle=null;V.abort=()=>{V._abortController=R.abortMaybe(V._abortController)};V.remove=V.abort;V._abortController=new AbortController;const {signal:K}=V._abortController;V.promise=p(K);V.promise.then(S=>{V._result=k(S);V._cleanup()},S=>{V._result=m(S);V._cleanup()});V._abortHandle=P.onAbort(F,V.abort);return V}f._inherits(x,M);var e=f._createSuper(x);M=x.prototype;M.normalizeCtorArgs=function(){return{}};M.destroy=function(){this.abort()};M._cleanup=function(){this._abortHandle=
R.removeMaybe(this._abortHandle);this._abortController=null};f._createClass(x,[{key:"value",get:function(){return h(this._result)}},{key:"error",get:function(){return L(this._result)}},{key:"finished",get:function(){return R.isSome(this._result)}}]);return x}(ba);ia.__decorate([Q.property()],J.prototype,"value",null);ia.__decorate([Q.property()],J.prototype,"error",null);ia.__decorate([Q.property()],J.prototype,"finished",null);ia.__decorate([Q.property()],J.prototype,"promise",void 0);ia.__decorate([Q.property()],
J.prototype,"_result",void 0);J=ia.__decorate([H.subclass("esri.core.asyncUtils.ReactiveTask")],J);l.assertResult=function(M){if(!0===M.ok)return M.value;throw M.error;};l.createTask=function(M,x){return new J(M,x)};l.forEach=function(M,x,e){return P.eachAlways(M.map((p,F)=>x.apply(e,[p,F])))};l.makeResultError=m;l.makeResultOk=k;l.map=async function(M,x,e){return(await P.eachAlways(M.map((p,F)=>x.apply(e,[p,F])))).map(p=>p.value)};l.result=async function(M){if(R.isNone(M))return{ok:!1,error:Error("no promise provided")};
try{return k(await M)}catch(x){return m(x)}};l.resultError=L;l.resultOrAbort=async function(M){try{return k(await M)}catch(x){return P.throwIfAbortError(x),m(x)}};l.resultValue=h;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(l,f,ia,ba,R,P,Q,H,k,m,h,L,J,M,x,e,p,F,V,K,S,D,r,E,v,G,z){function w(){return!!ib&&p.isLoaded()}function B(U){P.isNone(hb)&&(hb=Promise.all([p.load(),(new Promise((ea,W)=>l(["../chunks/geometryEngineBase"],ea,W))).then(ea=>ea.geometryEngineBase),new Promise((ea,W)=>l(["./geometryAdapters/hydrated"],ea,W))]));return hb.then(([,ea,{hydratedAdapter:W}])=>{Q.throwIfAborted(U);b=W;ib=ea.default;ib._enableProjection(p.pe);Rb.notify()})}function T(U,ea,W=null,pa=null){return Array.isArray(U)?0===
U.length?[]:C(b,U,U[0].spatialReference,ea,W,pa):C(b,[U],U.spatialReference,ea,W,pa)[0]}function C(U,ea,W,pa,Da=null,Ga=null){if(P.isNone(W)||P.isNone(pa))return ea;if(Y(W,pa,Da))return ea.map(Pa=>P.unwrap(ha(Pa,W,pa)));if(P.isNone(Da)){const Pa=E.cacheKey(W,pa);void 0!==Ib[Pa]?Da=Ib[Pa]:(Da=t(W,pa,void 0),P.isNone(Da)&&(Da=new E),Ib[Pa]=Da)}if(P.isNone(ib)||P.isNone(U))throw new nb;return P.isSome(Ga)?ib._project(U,ea,W,pa,Da,Ga):ib._project(U,ea,W,pa,Da)}function I(U,ea){if(!w())for(const W of U)if(P.isSome(W)&&
!v.equals(W.spatialReference,ea)&&v.isValid(W.spatialReference)&&v.isValid(ea)&&!Y(W.spatialReference,ea))return k.trackAccess(Rb),{pending:B(),geometries:null};return{pending:null,geometries:U.map(W=>P.isNone(W)?null:v.equals(W.spatialReference,ea)?W:v.isValid(W.spatialReference)&&v.isValid(ea)?u(W,ea):null)}}function t(U,ea,W=null){if(P.isNone(U)||P.isNone(ea))return null;if(P.isNone(ib)||P.isNone(b))throw new nb;U=ib._getTransformation(b,U,ea,W,W?.spatialReference);return null!==U?E.fromGE(U):
null}function u(U,ea){try{const W=T(U,ea);if(null==W)return null;"xmin"in U&&"xmin"in W&&(W.zmin=U.zmin,W.zmax=U.zmax);const pa=z.getGeometryZScaler(W.type,U.spatialReference,ea);P.isSome(pa)&&pa(W);return W}catch(W){if(!(W instanceof nb))throw W;return null}}function Y(U,ea,W){return W?!1:v.equals(U,ea)?!0:v.isValid(U)&&v.isValid(ea)&&!!xa(U,ea,Yb)}function ha(U,ea,W){return U?"x"in U?va(U,ea,new F,W,0):"xmin"in U?Ia(U,ea,new x,W,0):"rings"in U?Ja(U,ea,new V,W,0):"paths"in U?Ha(U,ea,new K,W,0):"points"in
U?za(U,ea,new e,W,0):null:null}function va(U,ea,W,pa,Da){Za[0]=U.x;Za[1]=U.y;const Ga=U.z;Za[2]=void 0!==Ga?Ga:Da;if(!Va(Za,ea,0,Za,pa,0,1))return null;W.x=Za[0];W.y=Za[1];W.spatialReference=pa;void 0===Ga?(W.z=void 0,W.hasZ=!1):(W.z=Za[2],W.hasZ=!0);void 0===U.m?(W.m=void 0,W.hasM=!1):(W.m=U.m,W.hasM=!0);return W}function za(U,ea,W,pa,Da){const {points:Ga,hasZ:Pa,hasM:Ya}=U;U=[];const ob=Ga.length,mb=[];for(var lb of Ga)mb.push(lb[0],lb[1],Pa?lb[2]:Da);if(!Va(mb,ea,0,mb,pa,0,ob))return null;for(ea=
0;ea<ob;++ea){Da=3*ea;lb=mb[Da];const xb=mb[Da+1];Pa&&Ya?U.push([lb,xb,mb[Da+2],Ga[ea][3]]):Pa?U.push([lb,xb,mb[Da+2]]):Ya?U.push([lb,xb,Ga[ea][2]]):U.push([lb,xb])}W.points=U;W.spatialReference=pa;W.hasZ=Pa;W.hasM=Ya;return W}function Ha(U,ea,W,pa,Da){const {paths:Ga,hasZ:Pa,hasM:Ya}=U;U=[];if(!gb(Ga,Pa??!1,Ya??!1,ea,U,pa,Da))return null;W.paths=U;W.spatialReference=pa;W.hasZ=Pa;W.hasM=Ya;return W}function Ja(U,ea,W,pa,Da){const {rings:Ga,hasZ:Pa,hasM:Ya}=U;U=[];if(!gb(Ga,Pa??!1,Ya??!1,ea,U,pa,Da))return null;
W.rings=U;W.spatialReference=pa;W.hasZ=Pa;W.hasM=Ya;return W}function Ia(U,ea,W,pa,Da){const {xmin:Ga,ymin:Pa,xmax:Ya,ymax:ob,hasZ:mb,hasM:lb}=U;if(!Ka(Ga,Pa,mb?U.zmin:Da,ea,Za,pa))return null;W.xmin=Za[0];W.ymin=Za[1];mb&&(W.zmin=Za[2]);if(!Ka(Ya,ob,mb?U.zmax:Da,ea,Za,pa))return null;W.xmax=Za[0];W.ymax=Za[1];mb&&(W.zmax=Za[2]);lb&&(W.mmin=U.mmin,W.mmax=U.mmax);W.spatialReference=pa;return W}function Ka(U,ea,W,pa,Da,Ga){kb[0]=U;kb[1]=ea;kb[2]=W;return Va(kb,pa,0,Da,Ga,0,1)}function Qa(U,ea,W,pa){if(P.isNone(ea)||
P.isNone(pa)||2>U.length)return!1;2===U.length&&(kb[0]=U[0],kb[1]=U[1],kb[2]=0,U=kb);return Va(U,ea,0,W,pa,0,1)}function Wa(U,ea,W){if(P.isNone(ea))return!1;ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(P.isNone(ea))return!1;ea(U,0,kb,0);W!==kb&&(W[0]=kb[0],W[1]=kb[1],2<W.length&&(W[2]=kb[2]));return!0}function Va(U,ea,W,pa,Da,Ga,Pa=1){ea=xa(ea,Da,Yb);if(P.isNone(ea))return!1;if(ea===n){if(U===pa&&W===Ga)return!0;Pa=W+3*Pa;for(let Ya=W,ob=Ga;Ya<Pa;Ya++,ob++)pa[ob]=U[Ya];return!0}Pa=W+3*Pa;
for(let Ya=W,ob=Ga;Ya<Pa;Ya+=3,ob+=3)ea(U,Ya,pa,ob);return!0}function gb(U,ea,W,pa,Da,Ga,Pa=0){const Ya=[];for(const ob of U)for(const mb of ob)Ya.push(mb[0],mb[1],ea?mb[2]:Pa);if(!Va(Ya,pa,0,Ya,Ga,0,Ya.length/3))return!1;pa=0;Da.length=0;for(const ob of U){U=[];for(const mb of ob)ea&&W?U.push([Ya[pa++],Ya[pa++],Ya[pa++],mb[3]]):ea?U.push([Ya[pa++],Ya[pa++],Ya[pa++]]):(W?U.push([Ya[pa++],Ya[pa++],mb[2]]):U.push([Ya[pa++],Ya[pa++]]),pa++);Da.push(U)}return!0}function na(U,ea,W,pa){ea=pa+ea;if(ea<pa/
2||W>ea)return Number.MAX_VALUE;U=Math.abs(Eb*U)+Math.asin(W/ea);return U>=Math.PI/2?Number.MAX_VALUE:W/Math.cos(U)}function ra(U,ea,W){const pa=Math.sin(U);U=Math.cos(U);const Da=Math.sin(ea);ea=Math.cos(ea);W[0]=-pa;W[4]=-Da*U;W[8]=ea*U;W[12]=0;W[1]=U;W[5]=-Da*pa;W[9]=ea*pa;W[13]=0;W[2]=0;W[6]=ea;W[10]=Da;W[14]=0;W[3]=0;W[7]=0;W[11]=0;W[15]=1;return W}function Ba(U,ea,W){ra(U,ea,W);h.transpose(W,W);return W}function c(U,ea){if(!U)return la.UNKNOWN;if(ea.spatialReference===U)return ea.spatialReferenceId;
ea.spatialReference=U;"metersPerUnit"in ea&&(ea.metersPerUnit=H.getMetersPerUnitForSR(U,1));return U.wkt===M.SphericalECEFSpatialReferenceLike.wkt?ea.spatialReferenceId=la.SPHERICAL_ECEF:v.isWGS84(U)?ea.spatialReferenceId=la.WGS84:v.isWebMercator(U)?ea.spatialReferenceId=la.WEB_MERCATOR:v.isPlateCarree(U)?ea.spatialReferenceId=la.PLATE_CARREE:U.wkt===M.WGS84ECEFSpatialReferenceLike.wkt?ea.spatialReferenceId=la.WGS84_ECEF:U.wkid===G.SupportedGCSWkids.CGCS2000?ea.spatialReferenceId=la.CGCS2000:U.wkt===
M.SphericalPCPFMarsLike.wkt?ea.spatialReferenceId=la.SPHERICAL_MARS_PCPF:U.wkt===M.SphericalPCPFMoonLike.wkt?ea.spatialReferenceId=la.SPHERICAL_MOON_PCPF:v.isMars(U)?ea.spatialReferenceId=la.GCSMARS2000:v.isMoon(U)?ea.spatialReferenceId=la.GCSMOON2000:ea.spatialReferenceId=la.UNKNOWN}function n(U,ea,W,pa){U!==W&&(W[pa++]=U[ea++],W[pa++]=U[ea++],W[pa]=U[ea])}function da(U,ea,W,pa){W[pa++]=Sb*(U[ea++]/D.earth.radius);W[pa++]=Sb*(Math.PI/2-2*Math.atan(Math.exp(-U[ea++]/D.earth.radius)));W[pa]=U[ea]}
function ka(U,ea,W,pa){da(U,ea,W,pa);ua(W,pa,W,pa)}function sa(U,ea,W,pa){da(U,ea,W,pa);Ta(W,pa,W,pa)}function y(U,ea,W,pa,Da){var Ga=.4999999*Math.PI;Ga=R.clamp(Eb*U[ea+1],-Ga,Ga);Ga=Math.sin(Ga);W[pa++]=Eb*U[ea]*Da.radius;W[pa++]=Da.halfSemiMajorAxis*Math.log((1+Ga)/(1-Ga));W[pa]=U[ea+2]}function O(U,ea,W,pa){y(U,ea,W,pa,D.earth)}function aa(U,ea,W,pa){W[pa]=U[ea]*hc;W[pa+1]=U[ea+1]*hc;W[pa+2]=U[ea+2]}function X(U,ea,W,pa){W[pa]=U[ea]*Tb;W[pa+1]=U[ea+1]*Tb;W[pa+2]=U[ea+2]}function fa(U,ea,W,pa){da(U,
ea,W,pa);aa(W,pa,W,pa)}function ma(U,ea,W,pa,Da){Da+=U[ea+2];const Ga=Eb*U[ea+1];U=Eb*U[ea];ea=Math.cos(Ga);W[pa++]=Math.cos(U)*ea*Da;W[pa++]=Math.sin(U)*ea*Da;W[pa]=Math.sin(Ga)*Da}function oa(U,ea,W,pa){ma(U,ea,W,pa,D.moon.radius)}function wa(U,ea,W,pa){ma(U,ea,W,pa,D.mars.radius)}function ua(U,ea,W,pa){ma(U,ea,W,pa,D.earth.radius)}function Ea(U,ea,W,pa,Da){var Ga=U[ea];const Pa=U[ea+1];ea=U[ea+2];U=Math.sqrt(Ga*Ga+Pa*Pa+ea*ea);ea=R.asinClamped(ea/(0===U?1:U));Ga=Math.atan2(Pa,Ga);W[pa++]=Sb*Ga;
W[pa++]=Sb*ea;W[pa]=U-Da}function Ca(U,ea,W,pa){Ea(U,ea,W,pa,D.moon.radius)}function Fa(U,ea,W,pa){Ea(U,ea,W,pa,D.mars.radius)}function Sa(U,ea,W,pa){Ea(U,ea,W,pa,D.earth.radius)}function Oa(U,ea,W,pa){Sa(U,ea,W,pa);O(W,pa,W,pa)}function Ua(U,ea,W,pa){Sa(U,ea,W,pa);Ta(W,pa,W,pa)}function Ta(U,ea,W,pa){var Da=D.earth;const Ga=Eb*U[ea];var Pa=Eb*U[ea+1];U=U[ea+2];ea=Math.sin(Pa);Pa=Math.cos(Pa);const Ya=Da.radius/Math.sqrt(1-Da.eccentricitySquared*ea*ea);W[pa++]=(Ya+U)*Pa*Math.cos(Ga);W[pa++]=(Ya+U)*
Pa*Math.sin(Ga);W[pa++]=(Ya*(1-Da.eccentricitySquared)+U)*ea}function Ma(U,ea,W,pa){var Da=r.earthEllipsoidConstants,Ga=U[ea],Pa=U[ea+1];U=U[ea+2];let Ya;ea=Math.abs(U);var ob=Ga*Ga+Pa*Pa;var mb=Math.sqrt(ob);var lb=ob+U*U;var xb=Math.sqrt(lb);Ga=Math.atan2(Pa,Ga);var Kb=U*U/lb;lb=ob/lb;Pa=Da.a2/xb;ob=Da.a3-Da.a4/xb;.3<lb?(Kb=ea/xb*(1+lb*(Da.a1+Pa+Kb*ob)/xb),xb=Math.asin(Kb),Pa=Kb*Kb,lb=Math.sqrt(1-Pa)):(lb=mb/xb*(1-Kb*(Da.a5-Pa-lb*ob)/xb),xb=Math.acos(lb),Pa=1-lb*lb,Kb=Math.sqrt(Pa));Ya=1-D.earth.eccentricitySquared*
Pa;Pa=D.earth.radius/Math.sqrt(Ya);Da=Da.a6*Pa;Pa=mb-Pa*lb;ob=ea-Da*Kb;ea=lb*Pa+Kb*ob;mb=lb*ob-Kb*Pa;Da=mb/(Da/Ya+ea);xb+=Da;0>U&&(xb=-xb);W[pa++]=Sb*Ga;W[pa++]=Sb*xb;W[pa]=ea+mb*Da/2}function Xa(U,ea,W,pa){Ma(U,ea,W,pa);ua(W,pa,W,pa)}function ab(U,ea,W,pa){Ma(U,ea,W,pa);O(W,pa,W,pa)}function xa(U,ea,W=sb()){return P.isNone(U)||P.isNone(ea)?null:wb(U,ea,W).projector}function wb(U,ea,W){if(P.isNone(U)||P.isNone(ea)||W.source.spatialReference===U&&W.dest.spatialReference===ea)return W;const pa=c(U,
W.source),Da=c(ea,W.dest);pa===la.UNKNOWN&&Da===la.UNKNOWN?v.equals(U,ea)?W.projector=n:W.projector=null:W.projector=Db[pa][Da];return W}function sb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:n}}let ib=null,b=null,hb=null,Ib={};const Rb=new m.SimpleObservable;let nb=function(U){function ea(){return W.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}
ia._inherits(ea,U);var W=ia._createSuper(ea);return ia._createClass(ea)}(ba);var la;(function(U){U[U.UNKNOWN=0]="UNKNOWN";U[U.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";U[U.WGS84=2]="WGS84";U[U.WEB_MERCATOR=3]="WEB_MERCATOR";U[U.WGS84_ECEF=4]="WGS84_ECEF";U[U.CGCS2000=5]="CGCS2000";U[U.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";U[U.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";U[U.GCSMARS2000=8]="GCSMARS2000";U[U.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";U[U.GCSMOON2000=10]="GCSMOON2000";U[U.LON_LAT=
11]="LON_LAT";U[U.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const hc=D.earth.radius*Math.PI/180,Tb=180/(D.earth.radius*Math.PI),Db={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:n,[la.WGS84_COMPARABLE_LON_LAT]:n,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:O,[la.PLATE_CARREE]:aa,[la.WGS84]:n,[la.WGS84_ECEF]:Ta},[la.CGCS2000]:{[la.CGCS2000]:n,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:n,[la.WGS84_COMPARABLE_LON_LAT]:n,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:aa,[la.WGS84]:null,[la.WGS84_ECEF]:Ta},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:n,[la.GCSMOON2000]:null,[la.LON_LAT]:n,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:n,[la.LON_LAT]:n,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:da,[la.WGS84_COMPARABLE_LON_LAT]:da,[la.SPHERICAL_ECEF]:ka,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:n,[la.PLATE_CARREE]:fa,[la.WGS84]:da,[la.WGS84_ECEF]:sa},[la.WGS84_ECEF]:{[la.CGCS2000]:Ma,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ma,[la.WGS84_COMPARABLE_LON_LAT]:Ma,[la.SPHERICAL_ECEF]:Xa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(U,ea,W,pa){Ma(U,ea,W,pa);aa(W,pa,W,pa)},[la.WGS84]:Ma,[la.WGS84_ECEF]:n},
[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Sa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Sa,[la.WGS84_COMPARABLE_LON_LAT]:Sa,[la.SPHERICAL_ECEF]:n,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Oa,[la.PLATE_CARREE]:function(U,ea,W,pa){Sa(U,ea,W,pa);aa(W,pa,W,pa)},[la.WGS84]:Sa,[la.WGS84_ECEF]:Ua},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Fa,[la.GCSMOON2000]:null,[la.LON_LAT]:Fa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:n,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ca,[la.LON_LAT]:Ca,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:n,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:n,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:n,[la.GCSMARS2000]:n,[la.GCSMOON2000]:n,[la.LON_LAT]:n,[la.WGS84_COMPARABLE_LON_LAT]:n,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:O,
[la.PLATE_CARREE]:aa,[la.WGS84]:n,[la.WGS84_ECEF]:Ta},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:n,[la.WGS84_COMPARABLE_LON_LAT]:n,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:aa,[la.WGS84]:n,[la.WGS84_ECEF]:Ta},[la.PLATE_CARREE]:{[la.CGCS2000]:X,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:X,[la.WGS84_COMPARABLE_LON_LAT]:X,[la.SPHERICAL_ECEF]:function(U,
ea,W,pa){X(U,ea,W,pa);ua(W,pa,W,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(U,ea,W,pa){X(U,ea,W,pa);O(W,pa,W,pa)},[la.PLATE_CARREE]:n,[la.WGS84]:X,[la.WGS84_ECEF]:function(U,ea,W,pa){X(U,ea,W,pa);Ta(W,pa,W,pa)}}},Jb={spatialReference:null,spatialReferenceId:la.UNKNOWN},ac={spatialReference:null,spatialReferenceId:la.UNKNOWN},Yb=sb(),ic=sb(),Eb=R.deg2rad(1),Sb=R.rad2deg(1),kb=J.create(),Gb=J.create(),Hb=J.create(),Za=J.create(),bc=J.create();
f.canProjectToWGS84ComparableLonLat=function(U){if(P.isNone(U))return!1;U=c(U,Jb);return!!Db[U][la.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=Y;f.computeENUToSphericalPCPFLocalRotation=ra;f.computeSphericalPCPFToENULocalRotation=Ba;f.computeTranslationToOriginAndRotation=function(U,ea,W,pa){if(P.isNone(U)||P.isNone(pa))return!1;var Da=c(U,Jb),Ga=c(pa,ac);if(Da===Ga&&Ga!==la.SPHERICAL_ECEF&&Ga!==la.SPHERICAL_MARS_PCPF&&Ga!==la.SPHERICAL_MOON_PCPF&&(Da!==la.UNKNOWN||v.equals(U,pa)))return h.fromTranslation(W,
ea),!0;if(Ga===la.SPHERICAL_ECEF||Ga===la.SPHERICAL_MARS_PCPF||Ga===la.SPHERICAL_MOON_PCPF){Da=Db[Da][la.LON_LAT];Ga=Db[la.LON_LAT][Ga];if(P.isNone(Da)||P.isNone(Ga))return!1;Da(ea,0,Gb,0);Ga(Gb,0,Hb,0);ra(Eb*Gb[0],Eb*Gb[1],W);W[12]=Hb[0];W[13]=Hb[1];W[14]=Hb[2];return!0}if((Ga===la.WEB_MERCATOR||Ga===la.PLATE_CARREE)&&(Da===la.WGS84||Da===la.CGCS2000&&Ga===la.PLATE_CARREE||Da===la.SPHERICAL_ECEF||Da===la.WEB_MERCATOR)){U=Db[Da][la.LON_LAT];Ga=Db[la.LON_LAT][Ga];if(P.isNone(U)||P.isNone(Ga))return!1;
U(ea,0,Gb,0);Ga(Gb,0,Hb,0);Da===la.SPHERICAL_ECEF?Ba(Eb*Gb[0],Eb*Gb[1],W):h.identity(W);W[12]=Hb[0];W[13]=Hb[1];W[14]=Hb[2];return!0}return!1};f.getProjectorName=function(U,ea){switch(xa(U,ea,Yb)){case n:return"copy3";case ua:return"wgs84ToSphericalECEF";case O:return"wgs84ToWebMercator";case aa:return"wgs84ToPlateCarree";case Ta:return"wgs84ToWGS84ECEF";case da:return"webMercatorToWGS84";case ka:return"webMercatorToSphericalECEF";case sa:return"webMercatorToWGS84ECEF";case fa:return"webMercatorToPlateCarree";
case Ma:return"wgs84ECEFToWGS84";case Xa:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Sa:return"sphericalECEFToWGS84";case Oa:return"sphericalECEFToWebMercator";case Fa:return"sphericalMarsPCPFToMars2000";case Ca:return"sphericalMoonPCPFToMoon2000";case Ua:return"sphericalECEFToWGS84ECEF";case wa:return"mars2000ToSphericalPCPF";case oa:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=t;f.getTransformations=function(U,ea,W=null){if(P.isNone(ib)||
P.isNone(b))throw new nb;U=ib._getTransformationBySuitability(b,U,ea,W,W?.spatialReference);if(null!==U){ea=[];for(const pa of U)ea.push(E.fromGE(pa));return ea}return[]};f.initializeProjection=async function(U,ea,W,pa){if(w())return Q.waitTick(pa);if(Array.isArray(U))for(const {source:Da,dest:Ga,geographicTransformation:Pa}of U){if(!Y(Da,Ga,Pa))return B(pa)}else if(!Y(U,ea,W))return B(pa);return Q.waitTick(pa)};f.isLoaded=w;f.load=B;f.localLinearScaleFactors=function(U,ea,W,pa){if(P.isNone(ea)||
P.isNone(pa))return!1;const Da=c(ea,Jb);var Ga=c(pa,ac);if(Da===Ga&&Da!==la.UNKNOWN||v.equals(ea,pa))return W[0]=1,W[1]=1,W[2]=1,!0;if(Da===la.SPHERICAL_ECEF){ea=L.length(U);U=ea/Math.sqrt(U[0]*U[0]+U[1]*U[1]);ea/=D.earth.radius;if(Ga===la.WEB_MERCATOR)return W[0]=U*ea,W[1]=U*ea,W[2]=1,!0;if(Ga===la.WGS84||Ga===la.CGCS2000)return Ga=Tb,W[0]=Ga*U*ea,W[1]=Ga*ea,W[2]=1,!0}else if(Da===la.PLATE_CARREE){if(Ga===la.WGS84||Ga===la.CGCS2000)return W[0]=Tb,W[1]=Tb,W[2]=1,!0;if(Ga===la.WEB_MERCATOR)return Ga=
U[1]/D.earth.radius,W[0]=1,W[1]=1/Math.cos(Ga),W[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(U,ea,W,pa){const Da=Math.cos(W);U[0]=Math.cos(ea)*Da*pa;U[1]=Math.sin(ea)*Da*pa;U[2]=Math.sin(W)*pa};f.lonLatToWebMercatorComparable=y;f.project=T;f.projectBoundingRect=function(U,ea,W,pa){if(null==U)return!1;if(v.equals(ea,pa))return S.copy(W,U),!0;kb[0]=U[0];kb[1]=U[1];kb[2]=0;if(!Va(kb,ea,0,kb,pa,0,1))return!1;W[0]=kb[0];W[1]=kb[1];kb[0]=U[2];kb[1]=U[3];kb[2]=0;if(!Va(kb,ea,0,kb,pa,0,1))return!1;
W[2]=kb[0];W[3]=kb[1];return!0};f.projectBoundingSphere=function(U,ea,W,pa){if(P.isNone(ea)||P.isNone(pa))return!1;ea=wb(ea,pa,ic);if(ea.projector===n)return W[0]=U[0],W[1]=U[1],W[2]=U[2],W[3]=U[3],!0;if(P.isNone(ea.projector))return!1;const {source:Da,dest:Ga}=ea;if(Ga.spatialReferenceId===la.WEB_MERCATOR){ea=Db[Da.spatialReferenceId][la.WGS84];if(P.isNone(ea))return!1;ea(U,0,Gb,0);O(Gb,0,W,0);W[3]=na(Gb[1],U[2],U[3],D.earth.radius);return!0}if(Da.spatialReferenceId!==la.WGS84&&Da.spatialReferenceId!==
la.CGCS2000||Ga.spatialReferenceId!==la.PLATE_CARREE)ea.projector(U,0,W,0),W[3]=U[3]*(Da.metersPerUnit??1)/(Ga.metersPerUnit??1);else{pa=Db[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Pa=U[3];P.isSome(Db[Da.spatialReferenceId][la.SPHERICAL_ECEF])&&P.isSome(pa)&&(Pa=na(U[1],U[2],U[3],D.earth.radius));ea.projector(U,0,W,0);W[3]=Pa}return!0};f.projectBuffer=Va;f.projectDirection=function(U,ea,W,pa,Da){L.copy(Za,U);L.add(bc,U,ea);Qa(Za,W,Za,Da);Qa(bc,W,bc,Da);L.subtract(pa,bc,Za);L.normalize(pa,pa)};f.projectExtent=
function(U,ea,W=ea.spatialReference,pa=0){return P.isSome(U.spatialReference)&&P.isSome(W)&&P.isSome(Ia(U,U.spatialReference,ea,W,pa))};f.projectMany=C;f.projectMultipoint=function(U,ea,W=ea.spatialReference,pa=0){return P.isSome(U.spatialReference)&&P.isSome(W)&&P.isSome(za(U,U.spatialReference,ea,W,pa))};f.projectOrLoad=function(U,ea){U=I([U],ea);return P.isSome(U.pending)?{pending:U.pending,geometry:null}:P.isSome(U.geometries)?{pending:null,geometry:U.geometries[0]}:{pending:null,geometry:null}};
f.projectOrLoadMany=I;f.projectPoint=function(U,ea,W=ea.spatialReference,pa=0){return P.isSome(W)&&P.isSome(U.spatialReference)&&P.isSome(va(U,U.spatialReference,ea,W,pa))};f.projectPointToVector=function(U,ea,W,pa=0){Za[0]=U.x;Za[1]=U.y;const Da=U.z;Za[2]=void 0!==Da?Da:pa;return Va(Za,U.spatialReference,0,ea,W,0,1)};f.projectPointToWGS84ComparableLonLat=function(U,ea){Za[0]=U.x;Za[1]=U.y;const W=U.z;Za[2]=void 0!==W?W:0;return Wa(Za,U.spatialReference,ea)};f.projectPolygon=function(U,ea,W=ea.spatialReference,
pa=0){return P.isSome(U.spatialReference)&&P.isSome(W)&&P.isSome(Ja(U,U.spatialReference,ea,W,pa))};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:U,spatialReference:ea,rings:W},pa,Da=0){ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(P.isNone(ea))return!1;U=U?Ga=>Ga:Ga=>L.set(Za,Ga[0],Ga[1],Da);for(const Ga of W){W=[];for(const Pa of Ga){const Ya=[0,0,Da];ea(U(Pa),0,Ya,0);W.push(Ya)}pa.push(W)}return!0};f.projectPolyline=function(U,ea,W=ea.spatialReference,pa=0){return P.isSome(U.spatialReference)&&
P.isSome(W)&&P.isSome(Ha(U,U.spatialReference,ea,W,pa))};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:U,spatialReference:ea,paths:W},pa,Da=0){ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(P.isNone(ea))return!1;U=U?Ga=>Ga:Ga=>L.set(Za,Ga[0],Ga[1],Da);for(const Ga of W){W=[];for(const Pa of Ga){const Ya=[0,0,Da];ea(U(Pa),0,Ya,0);W.push(Ya)}pa.push(W)}return!0};f.projectVectorToDehydratedPoint=function(U,ea,W){return Va(U,ea,0,Za,W.spatialReference,0,1)?(W.x=Za[0],W.y=Za[1],W.z=Za[2],
W):null};f.projectVectorToPoint=function(U,ea,W){if(P.isNone(ea)||P.isNone(W))return null;const pa=new F({spatialReference:W});return Va(U,ea,0,Za,W,0,1)?(pa.x=Za[0],pa.y=Za[1],pa.z=Za[2],pa):null};f.projectVectorToVector=Qa;f.projectVectorToWGS84ComparableLonLat=function(U,ea,W){return Wa(U,ea,W)};f.projectWithoutEngine=ha;f.projectXYZToVector=Ka;f.sphericalPCPFtoLonLatElevation=Ea;f.test={get loadPromise(){return hb}};f.tryProjectWithZConversion=u;f.unload=function(){hb=b=ib=null;Ib={}};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(l,f,ia){ia=function(ba){function R(){return P.apply(this,arguments)}f._inherits(R,ba);var P=f._createSuper(R);R.prototype.notify=function(){var Q=this._observers;if(Q&&0<Q.length){Q=Q.slice();for(const H of Q)H.onInvalidated(),H.onCommitted()}};return f._createClass(R)}(ia.ObservableBase);l.SimpleObservable=
ia;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,f,ia){function ba(c,n){c[0]=n[0];c[1]=n[1];c[2]=n[2];c[3]=n[3];c[4]=n[4];c[5]=n[5];c[6]=n[6];c[7]=n[7];c[8]=n[8];c[9]=n[9];c[10]=n[10];c[11]=n[11];c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15];return c}function R(c,n,da,ka,sa,y,O,aa,X,fa,ma,oa,wa,ua,Ea,Ca,Fa){c[0]=n;c[1]=da;c[2]=ka;c[3]=sa;c[4]=y;c[5]=O;c[6]=aa;c[7]=X;c[8]=fa;c[9]=ma;c[10]=oa;c[11]=
wa;c[12]=ua;c[13]=Ea;c[14]=Ca;c[15]=Fa;return c}function P(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Q(c,n){if(c===n){const da=n[1],ka=n[2],sa=n[3],y=n[6],O=n[7],aa=n[11];c[1]=n[4];c[2]=n[8];c[3]=n[12];c[4]=da;c[6]=n[9];c[7]=n[13];c[8]=ka;c[9]=y;c[11]=n[14];c[12]=sa;c[13]=O;c[14]=aa}else c[0]=n[0],c[1]=n[4],c[2]=n[8],c[3]=n[12],c[4]=n[1],c[5]=n[5],c[6]=n[9],c[7]=n[13],c[8]=n[2],c[9]=n[6],c[10]=n[10],c[11]=
n[14],c[12]=n[3],c[13]=n[7],c[14]=n[11],c[15]=n[15];return c}function H(c,n){k(c,n)||P(c);return c}function k(c,n){const da=n[0],ka=n[1],sa=n[2],y=n[3],O=n[4],aa=n[5],X=n[6],fa=n[7],ma=n[8],oa=n[9],wa=n[10],ua=n[11],Ea=n[12],Ca=n[13],Fa=n[14];n=n[15];const Sa=da*aa-ka*O,Oa=da*X-sa*O,Ua=da*fa-y*O,Ta=ka*X-sa*aa,Ma=ka*fa-y*aa,Xa=sa*fa-y*X,ab=ma*Ca-oa*Ea,xa=ma*Fa-wa*Ea,wb=ma*n-ua*Ea,sb=oa*Fa-wa*Ca,ib=oa*n-ua*Ca,b=wa*n-ua*Fa;let hb=Sa*b-Oa*ib+Ua*sb+Ta*wb-Ma*xa+Xa*ab;if(!hb)return null;hb=1/hb;c[0]=(aa*
b-X*ib+fa*sb)*hb;c[1]=(sa*ib-ka*b-y*sb)*hb;c[2]=(Ca*Xa-Fa*Ma+n*Ta)*hb;c[3]=(wa*Ma-oa*Xa-ua*Ta)*hb;c[4]=(X*wb-O*b-fa*xa)*hb;c[5]=(da*b-sa*wb+y*xa)*hb;c[6]=(Fa*Ua-Ea*Xa-n*Oa)*hb;c[7]=(ma*Xa-wa*Ua+ua*Oa)*hb;c[8]=(O*ib-aa*wb+fa*ab)*hb;c[9]=(ka*wb-da*ib-y*ab)*hb;c[10]=(Ea*Ma-Ca*Ua+n*Sa)*hb;c[11]=(oa*Ua-ma*Ma-ua*Sa)*hb;c[12]=(aa*xa-O*sb-X*ab)*hb;c[13]=(da*sb-ka*xa+sa*ab)*hb;c[14]=(Ca*Oa-Ea*Ta-Fa*Sa)*hb;c[15]=(ma*Ta-oa*Oa+wa*Sa)*hb;return c}function m(c,n){const da=n[0],ka=n[1],sa=n[2],y=n[3],O=n[4],aa=
n[5],X=n[6],fa=n[7],ma=n[8],oa=n[9],wa=n[10],ua=n[11],Ea=n[12],Ca=n[13],Fa=n[14];n=n[15];c[0]=aa*(wa*n-ua*Fa)-oa*(X*n-fa*Fa)+Ca*(X*ua-fa*wa);c[1]=-(ka*(wa*n-ua*Fa)-oa*(sa*n-y*Fa)+Ca*(sa*ua-y*wa));c[2]=ka*(X*n-fa*Fa)-aa*(sa*n-y*Fa)+Ca*(sa*fa-y*X);c[3]=-(ka*(X*ua-fa*wa)-aa*(sa*ua-y*wa)+oa*(sa*fa-y*X));c[4]=-(O*(wa*n-ua*Fa)-ma*(X*n-fa*Fa)+Ea*(X*ua-fa*wa));c[5]=da*(wa*n-ua*Fa)-ma*(sa*n-y*Fa)+Ea*(sa*ua-y*wa);c[6]=-(da*(X*n-fa*Fa)-O*(sa*n-y*Fa)+Ea*(sa*fa-y*X));c[7]=da*(X*ua-fa*wa)-O*(sa*ua-y*wa)+ma*(sa*
fa-y*X);c[8]=O*(oa*n-ua*Ca)-ma*(aa*n-fa*Ca)+Ea*(aa*ua-fa*oa);c[9]=-(da*(oa*n-ua*Ca)-ma*(ka*n-y*Ca)+Ea*(ka*ua-y*oa));c[10]=da*(aa*n-fa*Ca)-O*(ka*n-y*Ca)+Ea*(ka*fa-y*aa);c[11]=-(da*(aa*ua-fa*oa)-O*(ka*ua-y*oa)+ma*(ka*fa-y*aa));c[12]=-(O*(oa*Fa-wa*Ca)-ma*(aa*Fa-X*Ca)+Ea*(aa*wa-X*oa));c[13]=da*(oa*Fa-wa*Ca)-ma*(ka*Fa-sa*Ca)+Ea*(ka*wa-sa*oa);c[14]=-(da*(aa*Fa-X*Ca)-O*(ka*Fa-sa*Ca)+Ea*(ka*X-sa*aa));c[15]=da*(aa*wa-X*oa)-O*(ka*wa-sa*oa)+ma*(ka*X-sa*aa);return c}function h(c){const n=c[0],da=c[1],ka=c[2],
sa=c[3],y=c[4],O=c[5],aa=c[6],X=c[7],fa=c[8],ma=c[9],oa=c[10],wa=c[11],ua=c[12],Ea=c[13],Ca=c[14];c=c[15];return(n*O-da*y)*(oa*c-wa*Ca)-(n*aa-ka*y)*(ma*c-wa*Ea)+(n*X-sa*y)*(ma*Ca-oa*Ea)+(da*aa-ka*O)*(fa*c-wa*ua)-(da*X-sa*O)*(fa*Ca-oa*ua)+(ka*X-sa*aa)*(fa*Ea-ma*ua)}function L(c,n,da){const ka=n[0],sa=n[1],y=n[2],O=n[3],aa=n[4],X=n[5],fa=n[6],ma=n[7],oa=n[8],wa=n[9],ua=n[10],Ea=n[11],Ca=n[12],Fa=n[13],Sa=n[14];n=n[15];let Oa=da[0],Ua=da[1],Ta=da[2],Ma=da[3];c[0]=Oa*ka+Ua*aa+Ta*oa+Ma*Ca;c[1]=Oa*sa+Ua*
X+Ta*wa+Ma*Fa;c[2]=Oa*y+Ua*fa+Ta*ua+Ma*Sa;c[3]=Oa*O+Ua*ma+Ta*Ea+Ma*n;Oa=da[4];Ua=da[5];Ta=da[6];Ma=da[7];c[4]=Oa*ka+Ua*aa+Ta*oa+Ma*Ca;c[5]=Oa*sa+Ua*X+Ta*wa+Ma*Fa;c[6]=Oa*y+Ua*fa+Ta*ua+Ma*Sa;c[7]=Oa*O+Ua*ma+Ta*Ea+Ma*n;Oa=da[8];Ua=da[9];Ta=da[10];Ma=da[11];c[8]=Oa*ka+Ua*aa+Ta*oa+Ma*Ca;c[9]=Oa*sa+Ua*X+Ta*wa+Ma*Fa;c[10]=Oa*y+Ua*fa+Ta*ua+Ma*Sa;c[11]=Oa*O+Ua*ma+Ta*Ea+Ma*n;Oa=da[12];Ua=da[13];Ta=da[14];Ma=da[15];c[12]=Oa*ka+Ua*aa+Ta*oa+Ma*Ca;c[13]=Oa*sa+Ua*X+Ta*wa+Ma*Fa;c[14]=Oa*y+Ua*fa+Ta*ua+Ma*Sa;c[15]=
Oa*O+Ua*ma+Ta*Ea+Ma*n;return c}function J(c,n,da){const ka=da[0],sa=da[1];da=da[2];if(n===c)c[12]=n[0]*ka+n[4]*sa+n[8]*da+n[12],c[13]=n[1]*ka+n[5]*sa+n[9]*da+n[13],c[14]=n[2]*ka+n[6]*sa+n[10]*da+n[14],c[15]=n[3]*ka+n[7]*sa+n[11]*da+n[15];else{const y=n[0],O=n[1],aa=n[2],X=n[3],fa=n[4],ma=n[5],oa=n[6],wa=n[7],ua=n[8],Ea=n[9],Ca=n[10],Fa=n[11];c[0]=y;c[1]=O;c[2]=aa;c[3]=X;c[4]=fa;c[5]=ma;c[6]=oa;c[7]=wa;c[8]=ua;c[9]=Ea;c[10]=Ca;c[11]=Fa;c[12]=y*ka+fa*sa+ua*da+n[12];c[13]=O*ka+ma*sa+Ea*da+n[13];c[14]=
aa*ka+oa*sa+Ca*da+n[14];c[15]=X*ka+wa*sa+Fa*da+n[15]}return c}function M(c,n,da){const ka=da[0],sa=da[1];da=da[2];c[0]=n[0]*ka;c[1]=n[1]*ka;c[2]=n[2]*ka;c[3]=n[3]*ka;c[4]=n[4]*sa;c[5]=n[5]*sa;c[6]=n[6]*sa;c[7]=n[7]*sa;c[8]=n[8]*da;c[9]=n[9]*da;c[10]=n[10]*da;c[11]=n[11]*da;c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15];return c}function x(c,n,da,ka){let sa=ka[0],y=ka[1];ka=ka[2];let O=Math.sqrt(sa*sa+y*y+ka*ka);var aa=void 0,X=void 0;let fa=void 0,ma=void 0,oa=void 0,wa=void 0,ua=void 0,Ea=void 0,
Ca=void 0,Fa=void 0,Sa=void 0,Oa=void 0,Ua=void 0,Ta=void 0,Ma=void 0,Xa=void 0,ab=void 0,xa=void 0,wb=void 0,sb=void 0,ib=void 0,b=void 0;X=aa=void 0;if(O<ia.getEpsilon())return null;O=1/O;sa*=O;y*=O;ka*=O;aa=Math.sin(da);X=Math.cos(da);fa=1-X;ma=n[0];oa=n[1];wa=n[2];ua=n[3];Ea=n[4];Ca=n[5];Fa=n[6];Sa=n[7];Oa=n[8];Ua=n[9];Ta=n[10];Ma=n[11];Xa=sa*sa*fa+X;ab=y*sa*fa+ka*aa;xa=ka*sa*fa-y*aa;wb=sa*y*fa-ka*aa;sb=y*y*fa+X;ib=ka*y*fa+sa*aa;b=sa*ka*fa+y*aa;aa=y*ka*fa-sa*aa;X=ka*ka*fa+X;c[0]=ma*Xa+Ea*ab+Oa*
xa;c[1]=oa*Xa+Ca*ab+Ua*xa;c[2]=wa*Xa+Fa*ab+Ta*xa;c[3]=ua*Xa+Sa*ab+Ma*xa;c[4]=ma*wb+Ea*sb+Oa*ib;c[5]=oa*wb+Ca*sb+Ua*ib;c[6]=wa*wb+Fa*sb+Ta*ib;c[7]=ua*wb+Sa*sb+Ma*ib;c[8]=ma*b+Ea*aa+Oa*X;c[9]=oa*b+Ca*aa+Ua*X;c[10]=wa*b+Fa*aa+Ta*X;c[11]=ua*b+Sa*aa+Ma*X;n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);return c}function e(c,n,da){const ka=Math.sin(da);da=Math.cos(da);const sa=n[4],y=n[5],O=n[6],aa=n[7],X=n[8],fa=n[9],ma=n[10],oa=n[11];n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],
c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[4]=sa*da+X*ka;c[5]=y*da+fa*ka;c[6]=O*da+ma*ka;c[7]=aa*da+oa*ka;c[8]=X*da-sa*ka;c[9]=fa*da-y*ka;c[10]=ma*da-O*ka;c[11]=oa*da-aa*ka;return c}function p(c,n,da){const ka=Math.sin(da);da=Math.cos(da);const sa=n[0],y=n[1],O=n[2],aa=n[3],X=n[8],fa=n[9],ma=n[10],oa=n[11];n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=sa*da-X*ka;c[1]=y*da-fa*ka;c[2]=O*da-ma*ka;c[3]=aa*da-oa*ka;c[8]=sa*ka+X*da;c[9]=y*ka+fa*da;c[10]=
O*ka+ma*da;c[11]=aa*ka+oa*da;return c}function F(c,n,da){const ka=Math.sin(da);da=Math.cos(da);const sa=n[0],y=n[1],O=n[2],aa=n[3],X=n[4],fa=n[5],ma=n[6],oa=n[7];n!==c&&(c[8]=n[8],c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=sa*da+X*ka;c[1]=y*da+fa*ka;c[2]=O*da+ma*ka;c[3]=aa*da+oa*ka;c[4]=X*da-sa*ka;c[5]=fa*da-y*ka;c[6]=ma*da-O*ka;c[7]=oa*da-aa*ka;return c}function V(c,n){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=
0;c[12]=n[0];c[13]=n[1];c[14]=n[2];c[15]=1;return c}function K(c,n){c[0]=n[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=n[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function S(c,n,da){if(0===n)return P(c);let ka=da[0],sa=da[1];da=da[2];let y=Math.sqrt(ka*ka+sa*sa+da*da),O=void 0,aa=void 0,X=void 0;if(y<ia.getEpsilon())return null;y=1/y;ka*=y;sa*=y;da*=y;O=Math.sin(n);aa=Math.cos(n);X=1-aa;c[0]=ka*ka*X+aa;c[1]=sa*ka*X+da*O;c[2]=da*ka*X-sa*O;c[3]=0;c[4]=ka*sa*
X-da*O;c[5]=sa*sa*X+aa;c[6]=da*sa*X+ka*O;c[7]=0;c[8]=ka*da*X+sa*O;c[9]=sa*da*X-ka*O;c[10]=da*da*X+aa;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function D(c,n){const da=Math.sin(n);n=Math.cos(n);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n;c[6]=da;c[7]=0;c[8]=0;c[9]=-da;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function r(c,n){const da=Math.sin(n);n=Math.cos(n);c[0]=n;c[1]=0;c[2]=-da;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=da;c[9]=0;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function E(c,n){const da=Math.sin(n);n=Math.cos(n);c[0]=n;c[1]=da;c[2]=0;c[3]=0;c[4]=-da;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function v(c,n,da){var ka=n[0],sa=n[1],y=n[2],O=n[3],aa=ka+ka,X=sa+sa;const fa=y+y;n=ka*aa;const ma=ka*X;ka*=fa;const oa=sa*X;sa*=fa;y*=fa;aa*=O;X*=O;O*=fa;c[0]=1-(oa+y);c[1]=ma+O;c[2]=ka-X;c[3]=0;c[4]=ma-O;c[5]=1-(n+y);c[6]=sa+aa;c[7]=0;c[8]=ka+X;c[9]=sa-aa;c[10]=1-(n+oa);c[11]=0;c[12]=da[0];c[13]=da[1];c[14]=
da[2];c[15]=1;return c}function G(c,n){const da=Ba,ka=-n[0],sa=-n[1],y=-n[2],O=n[3],aa=n[4],X=n[5],fa=n[6],ma=n[7],oa=ka*ka+sa*sa+y*y+O*O;0<oa?(da[0]=2*(aa*O+ma*ka+X*y-fa*sa)/oa,da[1]=2*(X*O+ma*sa+fa*ka-aa*y)/oa,da[2]=2*(fa*O+ma*y+aa*sa-X*ka)/oa):(da[0]=2*(aa*O+ma*ka+X*y-fa*sa),da[1]=2*(X*O+ma*sa+fa*ka-aa*y),da[2]=2*(fa*O+ma*y+aa*sa-X*ka));v(c,n,da);return c}function z(c,n){c[0]=n[12];c[1]=n[13];c[2]=n[14];return c}function w(c,n){const da=n[0],ka=n[1],sa=n[2],y=n[4],O=n[5],aa=n[6],X=n[8],fa=n[9];
n=n[10];c[0]=Math.sqrt(da*da+ka*ka+sa*sa);c[1]=Math.sqrt(y*y+O*O+aa*aa);c[2]=Math.sqrt(X*X+fa*fa+n*n);return c}function B(c,n){const da=n[0]+n[5]+n[10];let ka=0;0<da?(ka=2*Math.sqrt(da+1),c[3]=.25*ka,c[0]=(n[6]-n[9])/ka,c[1]=(n[8]-n[2])/ka,c[2]=(n[1]-n[4])/ka):n[0]>n[5]&&n[0]>n[10]?(ka=2*Math.sqrt(1+n[0]-n[5]-n[10]),c[3]=(n[6]-n[9])/ka,c[0]=.25*ka,c[1]=(n[1]+n[4])/ka,c[2]=(n[8]+n[2])/ka):n[5]>n[10]?(ka=2*Math.sqrt(1+n[5]-n[0]-n[10]),c[3]=(n[8]-n[2])/ka,c[0]=(n[1]+n[4])/ka,c[1]=.25*ka,c[2]=(n[6]+n[9])/
ka):(ka=2*Math.sqrt(1+n[10]-n[0]-n[5]),c[3]=(n[1]-n[4])/ka,c[0]=(n[8]+n[2])/ka,c[1]=(n[6]+n[9])/ka,c[2]=.25*ka);return c}function T(c,n,da,ka){var sa=n[0],y=n[1],O=n[2],aa=n[3],X=sa+sa,fa=y+y,ma=O+O;n=sa*X;const oa=sa*fa;sa*=ma;const wa=y*fa;y*=ma;O*=ma;X*=aa;fa*=aa;aa*=ma;ma=ka[0];const ua=ka[1];ka=ka[2];c[0]=(1-(wa+O))*ma;c[1]=(oa+aa)*ma;c[2]=(sa-fa)*ma;c[3]=0;c[4]=(oa-aa)*ua;c[5]=(1-(n+O))*ua;c[6]=(y+X)*ua;c[7]=0;c[8]=(sa+fa)*ka;c[9]=(y-X)*ka;c[10]=(1-(n+wa))*ka;c[11]=0;c[12]=da[0];c[13]=da[1];
c[14]=da[2];c[15]=1;return c}function C(c,n,da,ka,sa){var y=n[0],O=n[1],aa=n[2],X=n[3],fa=y+y,ma=O+O,oa=aa+aa;n=y*fa;var wa=y*ma,ua=y*oa;y=O*ma;O*=oa;var Ea=aa*oa;aa=X*fa;ma*=X;const Ca=X*oa;var Fa=ka[0],Sa=ka[1];oa=ka[2];ka=sa[0];X=sa[1];sa=sa[2];fa=(1-(y+Ea))*Fa;const Oa=(wa+Ca)*Fa;Fa*=ua-ma;wa=(wa-Ca)*Sa;Ea=(1-(n+Ea))*Sa;Sa*=O+aa;ua=(ua+ma)*oa;O=(O-aa)*oa;n=(1-(n+y))*oa;c[0]=fa;c[1]=Oa;c[2]=Fa;c[3]=0;c[4]=wa;c[5]=Ea;c[6]=Sa;c[7]=0;c[8]=ua;c[9]=O;c[10]=n;c[11]=0;c[12]=da[0]+ka-(fa*ka+wa*X+ua*sa);
c[13]=da[1]+X-(Oa*ka+Ea*X+O*sa);c[14]=da[2]+sa-(Fa*ka+Sa*X+n*sa);c[15]=1;return c}function I(c,n){var da=n[0],ka=n[1],sa=n[2];n=n[3];var y=da+da,O=ka+ka;const aa=sa+sa;da*=y;const X=ka*y;ka*=O;const fa=sa*y,ma=sa*O;sa*=aa;y*=n;O*=n;n*=aa;c[0]=1-ka-sa;c[1]=X+n;c[2]=fa-O;c[3]=0;c[4]=X-n;c[5]=1-da-sa;c[6]=ma+y;c[7]=0;c[8]=fa+O;c[9]=ma-y;c[10]=1-da-ka;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function t(c,n,da,ka,sa,y,O){const aa=1/(da-n),X=1/(sa-ka),fa=1/(y-O);c[0]=2*y*aa;c[1]=0;c[2]=0;c[3]=0;
c[4]=0;c[5]=2*y*X;c[6]=0;c[7]=0;c[8]=(da+n)*aa;c[9]=(sa+ka)*X;c[10]=(O+y)*fa;c[11]=-1;c[12]=0;c[13]=0;c[14]=O*y*2*fa;c[15]=0;return c}function u(c,n,da,ka,sa){n=1/Math.tan(n/2);let y=void 0;c[0]=n/da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=sa&&Infinity!==sa?(y=1/(ka-sa),c[10]=(sa+ka)*y,c[14]=2*sa*ka*y):(c[10]=-1,c[14]=-2*ka);return c}function Y(c,n,da,ka){const sa=Math.tan(n.upDegrees*Math.PI/180),y=Math.tan(n.downDegrees*Math.PI/180),
O=Math.tan(n.leftDegrees*Math.PI/180);n=Math.tan(n.rightDegrees*Math.PI/180);const aa=2/(O+n),X=2/(sa+y);c[0]=aa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=X;c[6]=0;c[7]=0;c[8]=-((O-n)*aa*.5);c[9]=(sa-y)*X*.5;c[10]=ka/(da-ka);c[11]=-1;c[12]=0;c[13]=0;c[14]=ka*da/(da-ka);c[15]=0;return c}function ha(c,n,da,ka,sa,y,O){const aa=1/(n-da),X=1/(ka-sa),fa=1/(y-O);c[0]=-2*aa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*X;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*fa;c[11]=0;c[12]=(n+da)*aa;c[13]=(sa+ka)*X;c[14]=(O+y)*fa;c[15]=1;return c}
function va(c,n,da,ka){var sa=void 0;let y=void 0;var O=void 0,aa=void 0;let X=void 0,fa=void 0;var ma=void 0,oa=void 0;let wa=void 0,ua=void 0;const Ea=n[0],Ca=n[1];n=n[2];O=ka[0];aa=ka[1];ka=ka[2];ma=da[0];oa=da[1];da=da[2];sa=ia.getEpsilon();if(Math.abs(Ea-ma)<sa&&Math.abs(Ca-oa)<sa&&Math.abs(n-da)<sa)return P(c);ma=Ea-ma;oa=Ca-oa;wa=n-da;ua=1/Math.sqrt(ma*ma+oa*oa+wa*wa);ma*=ua;oa*=ua;wa*=ua;sa=aa*wa-ka*oa;y=ka*ma-O*wa;O=O*oa-aa*ma;(ua=Math.sqrt(sa*sa+y*y+O*O))?(ua=1/ua,sa*=ua,y*=ua,O*=ua):O=
y=sa=0;aa=oa*O-wa*y;X=wa*sa-ma*O;fa=ma*y-oa*sa;(ua=Math.sqrt(aa*aa+X*X+fa*fa))?(ua=1/ua,aa*=ua,X*=ua,fa*=ua):fa=X=aa=0;c[0]=sa;c[1]=aa;c[2]=ma;c[3]=0;c[4]=y;c[5]=X;c[6]=oa;c[7]=0;c[8]=O;c[9]=fa;c[10]=wa;c[11]=0;c[12]=-(sa*Ea+y*Ca+O*n);c[13]=-(aa*Ea+X*Ca+fa*n);c[14]=-(ma*Ea+oa*Ca+wa*n);c[15]=1;return c}function za(c,n,da,ka){const sa=n[0],y=n[1];n=n[2];var O=ka[0];const aa=ka[1];var X=ka[2];ka=sa-da[0];let fa=y-da[1];da=n-da[2];let ma=ka*ka+fa*fa+da*da;0<ma&&(ma=1/Math.sqrt(ma),ka*=ma,fa*=ma,da*=ma);
let oa=aa*da-X*fa;X=X*ka-O*da;O=O*fa-aa*ka;ma=oa*oa+X*X+O*O;0<ma&&(ma=1/Math.sqrt(ma),oa*=ma,X*=ma,O*=ma);c[0]=oa;c[1]=X;c[2]=O;c[3]=0;c[4]=fa*O-da*X;c[5]=da*oa-ka*O;c[6]=ka*X-fa*oa;c[7]=0;c[8]=ka;c[9]=fa;c[10]=da;c[11]=0;c[12]=sa;c[13]=y;c[14]=n;c[15]=1;return c}function Ha(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ja(c){return Math.sqrt(c[0]**2+c[1]**
2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Ia(c,n,da){c[0]=n[0]+da[0];c[1]=n[1]+da[1];c[2]=n[2]+da[2];c[3]=n[3]+da[3];c[4]=n[4]+da[4];c[5]=n[5]+da[5];c[6]=n[6]+da[6];c[7]=n[7]+da[7];c[8]=n[8]+da[8];c[9]=n[9]+da[9];c[10]=n[10]+da[10];c[11]=n[11]+da[11];c[12]=n[12]+da[12];c[13]=n[13]+da[13];c[14]=n[14]+da[14];c[15]=n[15]+da[15];return c}function Ka(c,n,da){c[0]=n[0]-da[0];c[1]=n[1]-da[1];c[2]=n[2]-da[2];c[3]=n[3]-
da[3];c[4]=n[4]-da[4];c[5]=n[5]-da[5];c[6]=n[6]-da[6];c[7]=n[7]-da[7];c[8]=n[8]-da[8];c[9]=n[9]-da[9];c[10]=n[10]-da[10];c[11]=n[11]-da[11];c[12]=n[12]-da[12];c[13]=n[13]-da[13];c[14]=n[14]-da[14];c[15]=n[15]-da[15];return c}function Qa(c,n,da){c[0]=n[0]*da;c[1]=n[1]*da;c[2]=n[2]*da;c[3]=n[3]*da;c[4]=n[4]*da;c[5]=n[5]*da;c[6]=n[6]*da;c[7]=n[7]*da;c[8]=n[8]*da;c[9]=n[9]*da;c[10]=n[10]*da;c[11]=n[11]*da;c[12]=n[12]*da;c[13]=n[13]*da;c[14]=n[14]*da;c[15]=n[15]*da;return c}function Wa(c,n,da,ka){c[0]=
n[0]+da[0]*ka;c[1]=n[1]+da[1]*ka;c[2]=n[2]+da[2]*ka;c[3]=n[3]+da[3]*ka;c[4]=n[4]+da[4]*ka;c[5]=n[5]+da[5]*ka;c[6]=n[6]+da[6]*ka;c[7]=n[7]+da[7]*ka;c[8]=n[8]+da[8]*ka;c[9]=n[9]+da[9]*ka;c[10]=n[10]+da[10]*ka;c[11]=n[11]+da[11]*ka;c[12]=n[12]+da[12]*ka;c[13]=n[13]+da[13]*ka;c[14]=n[14]+da[14]*ka;c[15]=n[15]+da[15]*ka;return c}function Va(c,n){return c[0]===n[0]&&c[1]===n[1]&&c[2]===n[2]&&c[3]===n[3]&&c[4]===n[4]&&c[5]===n[5]&&c[6]===n[6]&&c[7]===n[7]&&c[8]===n[8]&&c[9]===n[9]&&c[10]===n[10]&&c[11]===
n[11]&&c[12]===n[12]&&c[13]===n[13]&&c[14]===n[14]&&c[15]===n[15]}function gb(c,n){if(c===n)return!0;const da=c[0],ka=c[1],sa=c[2],y=c[3],O=c[4],aa=c[5],X=c[6],fa=c[7],ma=c[8],oa=c[9],wa=c[10],ua=c[11],Ea=c[12],Ca=c[13],Fa=c[14];c=c[15];const Sa=n[0],Oa=n[1],Ua=n[2],Ta=n[3],Ma=n[4],Xa=n[5],ab=n[6],xa=n[7],wb=n[8],sb=n[9],ib=n[10],b=n[11],hb=n[12],Ib=n[13],Rb=n[14];n=n[15];const nb=ia.getEpsilon();return Math.abs(da-Sa)<=nb*Math.max(1,Math.abs(da),Math.abs(Sa))&&Math.abs(ka-Oa)<=nb*Math.max(1,Math.abs(ka),
Math.abs(Oa))&&Math.abs(sa-Ua)<=nb*Math.max(1,Math.abs(sa),Math.abs(Ua))&&Math.abs(y-Ta)<=nb*Math.max(1,Math.abs(y),Math.abs(Ta))&&Math.abs(O-Ma)<=nb*Math.max(1,Math.abs(O),Math.abs(Ma))&&Math.abs(aa-Xa)<=nb*Math.max(1,Math.abs(aa),Math.abs(Xa))&&Math.abs(X-ab)<=nb*Math.max(1,Math.abs(X),Math.abs(ab))&&Math.abs(fa-xa)<=nb*Math.max(1,Math.abs(fa),Math.abs(xa))&&Math.abs(ma-wb)<=nb*Math.max(1,Math.abs(ma),Math.abs(wb))&&Math.abs(oa-sb)<=nb*Math.max(1,Math.abs(oa),Math.abs(sb))&&Math.abs(wa-ib)<=nb*
Math.max(1,Math.abs(wa),Math.abs(ib))&&Math.abs(ua-b)<=nb*Math.max(1,Math.abs(ua),Math.abs(b))&&Math.abs(Ea-hb)<=nb*Math.max(1,Math.abs(Ea),Math.abs(hb))&&Math.abs(Ca-Ib)<=nb*Math.max(1,Math.abs(Ca),Math.abs(Ib))&&Math.abs(Fa-Rb)<=nb*Math.max(1,Math.abs(Fa),Math.abs(Rb))&&Math.abs(c-n)<=nb*Math.max(1,Math.abs(c),Math.abs(n))}function na(c){const n=ia.getEpsilon(),da=c[0],ka=c[1],sa=c[2],y=c[4],O=c[5],aa=c[6],X=c[8],fa=c[9];c=c[10];return Math.abs(1-(da*da+y*y+X*X))<=n&&Math.abs(1-(ka*ka+O*O+fa*fa))<=
n&&Math.abs(1-(sa*sa+aa*aa+c*c))<=n}function ra(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const Ba=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Ia,adjoint:m,copy:ba,determinant:h,equals:gb,exactEquals:Va,frob:Ja,fromQuat:I,fromQuat2:G,fromRotation:S,fromRotationTranslation:v,fromRotationTranslationScale:T,fromRotationTranslationScaleOrigin:C,fromScaling:K,fromTranslation:V,fromXRotation:D,fromYRotation:r,fromZRotation:E,
frustum:t,getRotation:B,getScaling:w,getTranslation:z,hasIdentityRotation:ra,identity:P,invert:k,invertOrIdentity:H,isOrthoNormal:na,lookAt:va,mul:L,multiply:L,multiplyScalar:Qa,multiplyScalarAndAdd:Wa,ortho:ha,perspective:u,perspectiveFromFieldOfView:Y,rotate:x,rotateX:e,rotateY:p,rotateZ:F,scale:M,set:R,str:Ha,sub:Ka,subtract:Ka,targetTo:za,translate:J,transpose:Q},Symbol.toStringTag,{value:"Module"}));l.add=Ia;l.adjoint=m;l.copy=ba;l.determinant=h;l.equals=gb;l.exactEquals=Va;l.frob=Ja;l.fromQuat=
I;l.fromQuat2=G;l.fromRotation=S;l.fromRotationTranslation=v;l.fromRotationTranslationScale=T;l.fromRotationTranslationScaleOrigin=C;l.fromScaling=K;l.fromTranslation=V;l.fromXRotation=D;l.fromYRotation=r;l.fromZRotation=E;l.frustum=t;l.getRotation=B;l.getScaling=w;l.getTranslation=z;l.hasIdentityRotation=ra;l.identity=P;l.invert=k;l.invertOrIdentity=H;l.isOrthoNormal=na;l.lookAt=va;l.mat4=f;l.mul=L;l.multiply=L;l.multiplyScalar=Qa;l.multiplyScalarAndAdd=Wa;l.ortho=ha;l.perspective=u;l.perspectiveFromFieldOfView=
Y;l.rotate=x;l.rotateX=e;l.rotateY=p;l.rotateZ=F;l.scale=M;l.set=R;l.str=Ha;l.sub=Ka;l.subtract=Ka;l.targetTo=za;l.translate=J;l.transpose=Q})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,f,ia,ba,R){function P(){return!!f._pe}function Q(){return!!R("esri-wasm")}function H(){return M?M:M=(new Promise((e,p)=>l(["./pe-wasm"],e,p))).then(e=>e.peWasm).then(({default:e})=>e({locateFile:p=>ba.getAssetUrl(`esri/geometry/support/${p}`)})).then(e=>
{k(e)})}function k(e){function p(K,S,D){K[S]=D(K[S])}f._pe=e;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(K){function S(){return D.apply(this,arguments)}ia._inherits(S,K);var D=ia._createSuper(S);S.prototype.destroy=function(){f._pe.destroy(this)};return ia._createClass(S)}(f._pe.PeGCSExtent);e=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,
f._pe.PeUnit];for(var F of e)p(F.prototype,"getName",K=>function(){return K.call(this,Array(f.PeDefs.PE_NAME_MAX))});for(const K of[f._pe.PeGeogtran,f._pe.PeProjcs])p(K.prototype,"getParameters",S=>function(){const D=Array(f.PeDefs.PE_PARM_MAX);let r=S.call(this);for(let E=0;E<D.length;E++){const v=f._pe.getValue(r,"*");D[E]=v?f._pe.wrapPointer(v,f._pe.PeParameter):null;r+=Int32Array.BYTES_PER_ELEMENT}return D});p(f._pe.PeHorizon.prototype,"getCoord",K=>function(){const S=this.getSize();if(!S)return null;
const D=[],r=K.call(this);J(D,S,r);return D});p(f._pe.PeGTlistExtendedEntry.prototype,"getEntries",K=>{const S=f._pe._pe_getPeGTlistExtendedGTsSize();return function(){let D=null;var r=K.call(this);if(!f._pe.compare(r,f._pe.NULL)){D=[r];const E=this.getSteps();if(1<E){r=f._pe.getPointer(r);for(let v=1;v<E;v++)D.push(f._pe.wrapPointer(r+S*v,f._pe.PeGTlistExtendedGTs))}}return D}});const V=f._pe._pe_getPeHorizonSize();F=K=>function(){let S=this._cache;S||(this._cache=S=new Map);if(S.has(K))return S.get(K);
let D=null;var r=K.call(this);if(!f._pe.compare(r,f._pe.NULL)){D=[r];const E=r.getNump();if(1<E){r=f._pe.getPointer(r);for(let v=1;v<E;v++)D.push(f._pe.wrapPointer(r+V*v,f._pe.PeHorizon))}}S.set(K,D);return D};p(f._pe.PeProjcs.prototype,"horizonGcsGenerate",F);p(f._pe.PeProjcs.prototype,"horizonPcsGenerate",F);f._pe.PeObject.prototype.toString=function(K=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();const S=f._pe.getPointer(this),D=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(S,
K,D))}}function m(e){if(e){var p=f._pe.getClass(e);p&&(p=f._pe.getCache(p))&&(e=f._pe.getPointer(e))&&delete p[e]}}function h(e,p){const F=[];p=Array(p);for(let V=0;V<e;V++)F.push(f._pe.ensureInt8(p));return F}function L(e){let p;Array.isArray(e[0])?(p=[],e.forEach(F=>{p.push(F[0],F[1])})):p=e;return p}function J(e,p,F,V=!1){if(V)for(V=0;V<2*p;V++)e[V]=f._pe.getValue(F+V*Float64Array.BYTES_PER_ELEMENT,"double");else{V=0===e.length;for(let K=0;K<p;K++)V&&(e[K]=Array(2)),e[K][0]=f._pe.getValue(F,"double"),
e[K][1]=f._pe.getValue(F+Float64Array.BYTES_PER_ELEMENT,"double"),F+=2*Float64Array.BYTES_PER_ELEMENT}}let M;f._pe=null;f.PeCSTransformations=void 0;(function(e){function p(K,S,D){f._pe.ensureCache.prepare();var r=L(D);const E=D===r;r=f._pe.ensureFloat64(r);(K=f._pe._pe_geog_to_proj(f._pe.getPointer(K),S,r))&&J(D,S,r,E);return K}function F(K,S,D){return V(K,S,D,0)}function V(K,S,D,r){f._pe.ensureCache.prepare();var E=L(D);const v=D===E;E=f._pe.ensureFloat64(E);(K=f._pe._pe_proj_to_geog_center(f._pe.getPointer(K),
S,E,r))&&J(D,S,E,v);return K}e.geogToProj=p;e.projGeog=function(K,S,D,r){switch(r){case f.PeDefs.PE_TRANSFORM_P_TO_G:return F(K,S,D);case f.PeDefs.PE_TRANSFORM_G_TO_P:return p(K,S,D)}return 0};e.projToGeog=F;e.projToGeogCenter=V})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;
e.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=f._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=f._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
e.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;e.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=f._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
e.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;e.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(e){function p(S,D){let r=
null,E=F[S];E||(E={},F[S]=E);E.hasOwnProperty(String(D))?r=E[D]:(S=f._pe.PeFactory.prototype.factoryByType(S,D),f._pe.compare(S,f._pe.NULL)||(r=S,E[D]=r));return r=K(r)}const F={},V={},K=S=>{if(S){const D=S.getType();switch(D){case f.PeDefs.PE_TYPE_GEOGCS:S=f._pe.castObject(S,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:S=f._pe.castObject(S,f._pe.PeProjcs);break;case f.PeDefs.PE_TYPE_GEOGTRAN:S=f._pe.castObject(S,f._pe.PeGeogtran);break;default:D&f.PeDefs.PE_TYPE_UNIT&&(S=f._pe.castObject(S,
f._pe.PeUnit))}}return S};e.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(S){return p(f.PeDefs.PE_TYPE_COORDSYS,S)};e.factoryByType=p;e.fromString=function(S,D){let r=null,E=V[S];E||(E={},V[S]=E);E.hasOwnProperty(D)?r=E[D]:(S=f._pe.PeFactory.prototype.fromString(S,D),f._pe.compare(S,f._pe.NULL)||(r=S,E[D]=r));return r=K(r)};e.geogcs=function(S){return p(f.PeDefs.PE_TYPE_GEOGCS,S)};e.geogtran=function(S){return p(f.PeDefs.PE_TYPE_GEOGTRAN,S)};e.getCode=function(S){return f._pe.PeFactory.prototype.getCode(S)};
e.projcs=function(S){return p(f.PeDefs.PE_TYPE_PROJCS,S)};e.unit=function(S){return p(f.PeDefs.PE_TYPE_UNIT,S)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=null;f.PeGTlistExtended=void 0;(function(e){let p;e.init=function(){e.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;p=f._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(F,V,K,S,D,r){let E=null;const v=new f._pe.PeInteger(r);try{const G=f._pe.PeGTlistExtended.prototype.getGTlist(F,V,K,S,D,v);if(r=v.val)if(E=
[G],1<r){const z=f._pe.getPointer(G);for(F=1;F<r;F++)E.push(f._pe.wrapPointer(z+p*F,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(v)}return E}})(f.PeGTlistExtended||(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(p){if(p&&p.length){for(const F of p)m(F),F.getEntries().forEach(V=>{m(V);V=V.getGeogtran();m(V);V.getParameters().forEach(m);[V.getGeogcs1(),V.getGeogcs2()].forEach(K=>{m(K);const S=K.getDatum();m(S);m(S.getSpheroid());m(K.getPrimem());m(K.getUnit())})});
f._pe.PeGTlistExtendedEntry.prototype.Delete(p[0])}}})(f.PeGTlistExtendedEntry||(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(e){e.geogToGeog=function(p,F,V,K,S){f._pe.ensureCache.prepare();var D=L(V);const r=V===D;D=f._pe.ensureFloat64(D);let E=0;K&&(E=f._pe.ensureFloat64(K));(p=f._pe._pe_geog_to_geog(f._pe.getPointer(p),F,D,E,S))&&J(V,F,D,r);return p}})(f.PeGTTransformations||(f.PeGTTransformations={}));f.PeNotationDms=void 0;(function(e){const p=(V,K,S,D,r,E)=>{f._pe.ensureCache.prepare();
switch(V){case "dd":var v=f._pe._pe_geog_to_dd;var G=f.PeDefs.PE_DD_MAX;break;case "ddm":v=f._pe._pe_geog_to_ddm;G=f.PeDefs.PE_DDM_MAX;break;case "dms":v=f._pe._pe_geog_to_dms,G=f.PeDefs.PE_DMS_MAX}V=0;K&&(V=f._pe.getPointer(K));K=L(D);K=f._pe.ensureFloat64(K);G=h(S,G);D=f._pe.ensureInt32(G);if(r=v(V,S,K,r,D))for(v=0;v<S;v++)E[v]=f._pe.UTF8ToString(G[v]);return r},F=(V,K,S,D,r)=>{f._pe.ensureCache.prepare();switch(V){case "dd":var E=f._pe._pe_dd_to_geog;break;case "ddm":E=f._pe._pe_ddm_to_geog;break;
case "dms":E=f._pe._pe_dms_to_geog}V=0;K&&(V=f._pe.getPointer(K));K=D.map(v=>f._pe.ensureString(v));D=f._pe.ensureInt32(K);K=f._pe.ensureFloat64(Array(2*S));(E=E(V,S,D,K))&&J(r,S,K);return E};e.geogToDms=function(V,K,S,D,r){return p("dms",V,K,S,D,r)};e.dmsToGeog=function(V,K,S,D){return F("dms",V,K,S,D)};e.geogToDdm=function(V,K,S,D,r){return p("ddm",V,K,S,D,r)};e.ddmToGeog=function(V,K,S,D){return F("ddm",V,K,S,D)};e.geogToDd=function(V,K,S,D,r){return p("dd",V,K,S,D,r)};e.ddToGeog=function(V,K,
S,D){return F("dd",V,K,S,D)}})(f.PeNotationDms||(f.PeNotationDms={}));f.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geogToMgrsExtended=
function(p,F,V,K,S,D,r){f._pe.ensureCache.prepare();let E=0;p&&(E=f._pe.getPointer(p));p=L(V);V=f._pe.ensureFloat64(p);p=h(F,f.PeDefs.PE_MGRS_MAX);const v=f._pe.ensureInt32(p);if(K=f._pe._pe_geog_to_mgrs_extended(E,F,V,K,S,D,v))for(S=0;S<F;S++)r[S]=f._pe.UTF8ToString(p[S]);return K};e.mgrsToGeogExtended=function(p,F,V,K,S){f._pe.ensureCache.prepare();let D=0;p&&(D=f._pe.getPointer(p));p=V.map(r=>f._pe.ensureString(r));V=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*F));(K=f._pe._pe_mgrs_to_geog_extended(D,
F,V,K,p))&&J(S,F,p);return K}})(f.PeNotationMgrs||(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(e){e.geogToUsng=function(p,F,V,K,S,D,r){f._pe.ensureCache.prepare();let E=0;p&&(E=f._pe.getPointer(p));p=L(V);V=f._pe.ensureFloat64(p);p=h(F,f.PeDefs.PE_MGRS_MAX);const v=f._pe.ensureInt32(p);if(K=f._pe._pe_geog_to_usng(E,F,V,K,S,D,v))for(S=0;S<F;S++)r[S]=f._pe.UTF8ToString(p[S]);return K};e.usngToGeog=function(p,F,V,K){f._pe.ensureCache.prepare();var S=0;p&&(S=f._pe.getPointer(p));p=V.map(D=>
f._pe.ensureString(D));V=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*F));(S=f._pe._pe_usng_to_geog(S,F,V,p))&&J(K,F,p);return S}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geogToUtm=function(p,F,V,K,S){f._pe.ensureCache.prepare();var D=
0;p&&(D=f._pe.getPointer(p));p=L(V);V=f._pe.ensureFloat64(p);p=h(F,f.PeDefs.PE_UTM_MAX);const r=f._pe.ensureInt32(p);if(K=f._pe._pe_geog_to_utm(D,F,V,K,r))for(D=0;D<F;D++)S[D]=f._pe.UTF8ToString(p[D]);return K};e.utmToGeog=function(p,F,V,K,S){f._pe.ensureCache.prepare();let D=0;p&&(D=f._pe.getPointer(p));p=V.map(r=>f._pe.ensureString(r));V=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*F));(K=f._pe._pe_utm_to_geog(D,F,V,K,p))&&J(S,F,p);return K}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=
void 0;(function(e){const p=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(F,V=e.PE_PCSINFO_OPTION_DOMAIN){let K=null,S=null;p.has(F)&&(S=p.get(F),S[V]&&(K=S[V]));K||(K=f._pe.PePCSInfo.prototype.generate(F,V),S||(S=
[],p.set(F,S)),S[V]=K);return K}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;(function(e){e.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const x=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},get PeGCSExtent(){return f.PeGCSExtent},get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},
get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:k,get _pe(){return f._pe},isLoaded:P,isSupported:Q,load:H},Symbol.toStringTag,{value:"Module"}));f._init=k;f.isLoaded=P;f.isSupported=Q;f.load=H;f.pe=x})},"esri/geometry/support/geodesicConstants":function(){define(["exports",
"./Ellipsoid"],function(l,f){const ia=Math.PI/180;var ba=f.earth.radius;const R=f.earth.eccentricitySquared;ba={a1:ba*R,a2:ba*R*ba*R,a3:ba*R*R/2,a4:ba*R*ba*R*2.5,a5:ba*R+ba*R*R/2,a6:1-R};f={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},
104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,
f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},
104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},
104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=ba;l.spheroids=f;l.toRadians=ia;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(l,f){return function(){function ia(R){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(R&&R.steps)for(const P of R.steps)P instanceof
f?this.steps.push(P):this.steps.push(new f({wkid:P.wkid,wkt:P.wkt,isInverse:P.isInverse}))}ia.cacheKey=function(R,P){return[void 0!==R.wkid&&null!==R.wkid?R.wkid.toString():"-1",void 0!==R.wkt&&null!==R.wkt?R.wkt.toString():"",void 0!==P.wkid&&null!==P.wkid?P.wkid.toString():"-1",void 0!==P.wkt&&null!==P.wkt?P.wkt.toString():""].join()};ia.fromGE=function(R){const P=new ia;let Q="";for(const H of R.steps)R=f.fromGE(H),P.steps.push(R),Q+=R.uid.toString()+",";P._cachedProjection={};P._gtlistentry=null;
P._chain=Q;return P};var ba=ia.prototype;ba.getInverse=function(){const R=new ia;R.steps=[];for(let P=this.steps.length-1;0<=P;P--)R.steps.push(this.steps[P].getInverse());return R};ba.getGTListEntry=function(){let R="";for(const P of this.steps)R+=P.uid.toString()+",";R!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=R);return this._gtlistentry};ba.assignCachedGe=function(R,P,Q){this._cachedProjection[ia.cacheKey(R,P)]=Q};ba.getCachedGeTransformation=function(R,P){let Q=
"";for(const H of this.steps)Q+=H.uid.toString()+",";Q!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=Q);R=this._cachedProjection[ia.cacheKey(R,P)];return void 0===R?null:R};return l._createClass(ia)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let f=0;return function(){function ia(ba){this.uid=f++;ba?(this._wkt=null!=ba.wkt?ba.wkt:null,this._wkid=null!=ba.wkid?ba.wkid:-1,this._isInverse=
null!=ba.isInverse?!0===ba.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ia.fromGE=function(ba){const R=new ia;R._wkt=ba.wkt;R._wkid=ba.wkid;R._isInverse=ba.isInverse;return R};ia.prototype.getInverse=function(){const ba=new ia;ba._wkt=this.wkt;ba._wkid=this._wkid;ba._isInverse=!this.isInverse;return ba};l._createClass(ia,[{key:"wkt",get:function(){return this._wkt},set:function(ba){this._wkt=ba;this.uid=f++}},{key:"wkid",get:function(){return this._wkid},set:function(ba){this._wkid=
ba;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ba){this._isInverse=ba;this.uid=f++}}]);return ia}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(l,f,ia,ba){l.getGeometryZScaler=function(R,P,Q){if(f.isNone(P)||f.isNone(Q)||Q.vcsWkid||ba.equals(P,Q))return null;P=ia.getMetersPerVerticalUnitForSR(P);Q=ia.getMetersPerVerticalUnitForSR(Q);const H=P/Q;if(1===H)return null;
switch(R){case "point":case "esriGeometryPoint":return k=>{k&&null!=k.z&&(k.z*=H)};case "polyline":case "esriGeometryPolyline":return k=>{if(k)for(const m of k.paths)for(const h of m)2<h.length&&(h[2]*=H)};case "polygon":case "esriGeometryPolygon":return k=>{if(k)for(const m of k.rings)for(const h of m)2<h.length&&(h[2]*=H)};case "multipoint":case "esriGeometryMultipoint":return k=>{if(k)for(const m of k.points)2<m.length&&(m[2]*=H)};case "extent":case "esriGeometryExtent":return k=>{k&&null!=k.zmin&&
null!=k.zmax&&(k.zmin*=H,k.zmax*=H)};default:return null}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(l,f){let ia=f._createClass(function(H,k,m){this.x=H;this.y=k;this.spatialReference=m;this.m=this.z=void 0}),ba=f._createClass(function(H,k,m,h){this.rings=H;this.spatialReference=k;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);h&&(this.hasM=h)}),R=f._createClass(function(H,
k,m,h){this.paths=H;this.spatialReference=k;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);h&&(this.hasM=h)}),P=f._createClass(function(H,k,m,h){this.points=H;this.spatialReference=k;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);h&&(this.hasM=h)}),Q=f._createClass(function(H,k,m,h,L){this.xmin=H;this.ymin=k;this.xmax=m;this.ymax=h;this.spatialReference=L;this.mmax=this.mmin=this.zmax=this.zmin=void 0});l.jsonAdapter={convertToGEGeometry:function(H,k){return null==k?null:H.convertJSONToGeometry(k)},exportPoint:function(H,
k,m){m=new ia(H.getPointX(k),H.getPointY(k),m);const h=H.hasZ(k),L=H.hasM(k);h&&(m.z=H.getPointZ(k));L&&(m.m=H.getPointM(k));return m},exportPolygon:function(H,k,m){return new ba(H.exportPaths(k),m,H.hasZ(k),H.hasM(k))},exportPolyline:function(H,k,m){return new R(H.exportPaths(k),m,H.hasZ(k),H.hasM(k))},exportMultipoint:function(H,k,m){return new P(H.exportPoints(k),m,H.hasZ(k),H.hasM(k))},exportExtent:function(H,k,m){var h=H.hasZ(k);const L=H.hasM(k);m=new Q(H.getXMin(k),H.getYMin(k),H.getXMax(k),
H.getYMax(k),m);h&&(h=H.getZExtent(k),m.zmin=h.vmin,m.zmax=h.vmax);L&&(H=H.getMExtent(k),m.mmin=H.vmin,m.mmax=H.vmax);return m}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(l,f,ia){let ba=function(){function P(Q=null,H={},k,m){this.geometry=Q;this.attributes=H;this.centroid=k;this.objectId=m;this.geohashY=this.geohashX=this.displayId=0}P.prototype.weakClone=
function(){const Q=new P(this.geometry,this.attributes,this.centroid,this.objectId);Q.displayId=this.displayId;Q.geohashX=this.geohashX;Q.geohashY=this.geohashY;return Q};return f._createClass(P)}(),R=function(P){function Q(){return H.apply(this,arguments)}f._inherits(Q,P);var H=f._createSuper(Q);return f._createClass(Q)}(ba);l.OptimizedFeature=ba;l.OptimizedFeatureWithGeometry=R;l.hasGeometry=function(P){return!(ia.isNone(P.geometry)||!P.geometry.coords||!P.geometry.coords.length)};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(ba=[],R=[],P=!1){this.lengths=ba??[];this.coords=R??[];this.hasIndeterminateRingOrder=P}f.fromRect=function(ba){const [R,P,Q,H]=ba;ba=Q-R;const k=H-P;return new f([5],[R,P,ba,0,0,k,-ba,0,0,-k])};var ia=f.prototype;ia.forEachVertex=function(ba){let R=0;this.lengths.length||ba(this.coords[0],this.coords[1]);for(let P=0;P<
this.lengths.length;P++){const Q=this.lengths[P];for(let H=0;H<Q;H++)ba(this.coords[2*(H+R)],this.coords[2*(H+R)+1]);R+=Q}};ia.clone=function(ba){return ba?(ba.set(this.coords),new f(this.lengths.slice(),ba,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};l._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((ba,
R)=>ba+R)}}]);return f}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(l,f,ia,ba,R,P,Q,H,k,m,h){const L=P.create();return function(){function J(x){this.geometryInfo=x;this._boundsStore=
new k.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ia;this.featureAdapter=m.optimizedFeatureQueryEngineAdapter}var M=J.prototype;M.getFullExtent=function(x){if(R.isNone(this.fullBounds))return null;const [e,p,F,V]=this.fullBounds;return{xmin:e,ymin:p,xmax:F,ymax:V,spatialReference:h.cleanFromGeometryEngine(x)}};M.add=function(x){this._add(x);this._emitChanged()};M.addMany=function(x){for(const e of x)this._add(e);this._emitChanged()};M.clear=function(){this._featuresById.clear();
this._boundsStore.clear();this._emitChanged()};M.removeById=function(x){x=this._featuresById.get(x);if(!x)return null;this._remove(x);this._emitChanged();return x};M.removeManyById=function(x){this._boundsStore.invalidateIndex();for(const e of x)(x=this._featuresById.get(e))&&this._remove(x);this._emitChanged()};M.forEachBounds=function(x,e){for(const p of x)(x=this._boundsStore.get(p.objectId))&&e(P.fromRect(L,x))};M.getFeature=function(x){return this._featuresById.get(x)};M.has=function(x){return this._featuresById.has(x)};
M.forEach=function(x){this._featuresById.forEach(e=>x(e))};M.forEachInBounds=function(x,e){this._boundsStore.forEachInBounds(x,p=>{e(this._featuresById.get(p))})};M.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};M.sweep=function(){let x=!1;this._featuresById.forEach((e,p)=>{this._markedIds.has(p)||(x=!0,this._remove(e))});this._markedIds.clear();x&&this._emitChanged()};M._emitChanged=function(){this.events.emit("changed",void 0)};M._add=function(x){if(x){var e=
x.objectId;if(null==e)ba.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:x}));else{var p=this._featuresById.get(e);this._markedIds.add(e);if(p){x.displayId=p.displayId;var F=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(R.isSome(this.onFeatureAdd))this.onFeatureAdd(x);!R.isNone(x.geometry)&&x.geometry.coords&&x.geometry.coords.length?(F=H.getBoundsOptimizedGeometry(R.isSome(F)?F:Q.create(),x.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),R.isSome(F)&&this._boundsStore.set(e,F)):this._boundsStore.set(e,null);this._featuresById.set(e,x)}}};M._remove=function(x){if(R.isSome(this.onFeatureRemove))this.onFeatureRemove(x);const e=x.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return x};l._createClass(J,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let x=0;this._featuresById.forEach(e=>{R.isSome(e.geometry)&&e.geometry.coords&&(x+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:x/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return J}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,f,ia,ba,R){let P=function(){function Q(){this._emitter=new Q.EventEmitter(this)}var H=Q.prototype;H.emit=function(k,m){return this._emitter.emit(k,m)};H.on=function(k,m){return this._emitter.on(k,m)};H.once=function(k,m){return this._emitter.once(k,m)};H.hasEventListener=function(k){return this._emitter.hasEventListener(k)};return l._createClass(Q)}();(function(Q){let H=function(){function m(L=null){this._target=L;this._listenersMap=
null}var h=m.prototype;h.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};h.emit=function(L,J){L=this._listenersMap&&this._listenersMap.get(L);if(!L)return!1;const M=this._target||this;[...L].forEach(x=>{x.call(M,J)});return 0<L.length};h.on=function(L,J){if(Array.isArray(L)){var M=L.map(x=>this.on(x,J));return ba.handlesGroup(M)}if(L.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);M=this._listenersMap.get(L)||[];M.push(J);this._listenersMap.set(L,M);return{remove:()=>{const x=this._listenersMap&&this._listenersMap.get(L)||[],e=x.indexOf(J);0<=e&&x.splice(e,1)}}};h.once=function(L,J){const M=this.on(L,x=>{M.remove();J.call(null,x)});return M};h.hasEventListener=function(L){L=this._listenersMap&&this._listenersMap.get(L);return null!=L&&0<L.length};return l._createClass(m)}();Q.EventEmitter=H;Q.EventedMixin=m=>{m=function(h){function L(){var M=J.apply(this,
arguments);M._emitter=new H;return M}l._inherits(L,h);var J=l._createSuper(L);h=L.prototype;h.destroy=function(){this._emitter.clear()};h.emit=function(M,x){return this._emitter.emit(M,x)};h.on=function(M,x){return this._emitter.on(M,x)};h.once=function(M,x){return this._emitter.once(M,x)};h.hasEventListener=function(M){return this._emitter.hasEventListener(M)};return l._createClass(L)}(m);return m=f.__decorate([R.subclass("esri.core.Evented")],m)};let k=function(m){function h(){var J=L.apply(this,
arguments);J._emitter=new P.EventEmitter(l._assertThisInitialized(J));return J}l._inherits(h,m);var L=l._createSuper(h);m=h.prototype;m.destroy=function(){this._emitter.clear()};m.emit=function(J,M){return this._emitter.emit(J,M)};m.on=function(J,M){return this._emitter.on(J,M)};m.once=function(J,M){return this._emitter.once(J,M)};m.hasEventListener=function(J){return this._emitter.hasEventListener(J)};return l._createClass(h)}(ia);k=f.__decorate([R.subclass("esri.core.Evented")],k);Q.EventedAccessor=
k})(P||(P={}));return P})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(l,f,ia,ba){function R(e=M){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function P(e,p,F,V,K,S,D=R()){D[0]=e;D[1]=p;D[2]=F;D[3]=V;D[4]=K;D[5]=S;return D}function Q(e){return e[0]>=e[3]?0:e[3]-e[0]}function H(e){return e[1]>=e[4]?0:e[4]-e[1]}function k(e){return e[2]>=e[5]?0:e[5]-e[2]}function m(e,p){return Math.max(p[0],e[0])<=Math.min(p[3],e[3])&&Math.max(p[1],
e[1])<=Math.min(p[4],e[4])&&Math.max(p[2],e[2])<=Math.min(p[5],e[5])}function h(e,p){e[0]=p[0];e[1]=p[1];e[2]=p[2];e[3]=p[3];e[4]=p[4];e[5]=p[5];return e}function L(e){return 6===e.length}const J=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],M=[0,0,0,0,0,0],x=R();l.NEGATIVE_INFINITY=J;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=M;l.allFinite=function(e){for(let p=0;6>p;p++)if(!isFinite(e[p]))return!1;return!0};l.center=function(e,p=[0,0,0]){p[0]=
e[0]+Q(e)/2;p[1]=e[1]+H(e)/2;p[2]=e[2]+k(e)/2;return p};l.contains=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[3]<=e[3]&&p[4]<=e[4]&&p[5]<=e[5]};l.containsPoint=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[0]<=e[3]&&p[1]<=e[4]&&p[2]<=e[5]};l.containsPointWithMargin=function(e,p,F){return p[0]>=e[0]-F&&p[1]>=e[1]-F&&p[2]>=e[2]-F&&p[0]<=e[3]+F&&p[1]<=e[4]+F&&p[2]<=e[5]+F};l.create=R;l.depth=H;l.diameter=function(e){const p=Q(e),F=k(e);e=H(e);return Math.sqrt(p*p+F*F+e*e)};
l.empty=function(e){return e?h(e,J):R(J)};l.equals=function(e,p,F){if(f.isNone(e)||f.isNone(p))return e===p;if(!L(e)||!L(p))return!1;if(F)for(let V=0;V<e.length;V++){if(!F(e[V],p[V]))return!1}else for(F=0;F<e.length;F++)if(e[F]!==p[F])return!1;return!0};l.expandWithAABB=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[3]);e[4]=Math.max(e[4],p[4]);e[5]=Math.max(e[5],p[5])};l.expandWithBuffer=function(e,p,F=0,V=p.length/3){let K=e[0],S=e[1],
D=e[2],r=e[3],E=e[4],v=e[5];for(let G=0;G<V;G++)K=Math.min(K,p[F+3*G]),S=Math.min(S,p[F+3*G+1]),D=Math.min(D,p[F+3*G+2]),r=Math.max(r,p[F+3*G]),E=Math.max(E,p[F+3*G+1]),v=Math.max(v,p[F+3*G+2]);e[0]=K;e[1]=S;e[2]=D;e[3]=r;e[4]=E;e[5]=v};l.expandWithNestedArray=function(e,p,F){const V=p.length;let K=e[0],S=e[1],D=e[2],r=e[3],E=e[4],v=e[5];if(F)for(F=0;F<V;F++){var G=p[F];K=Math.min(K,G[0]);S=Math.min(S,G[1]);D=Math.min(D,G[2]);r=Math.max(r,G[0]);E=Math.max(E,G[1]);v=Math.max(v,G[2])}else for(F=0;F<
V;F++)G=p[F],K=Math.min(K,G[0]),S=Math.min(S,G[1]),r=Math.max(r,G[0]),E=Math.max(E,G[1]);e[0]=K;e[1]=S;e[2]=D;e[3]=r;e[4]=E;e[5]=v};l.expandWithOffset=function(e,p,F,V){e[0]=Math.min(e[0],e[0]+p);e[3]=Math.max(e[3],e[3]+p);e[1]=Math.min(e[1],e[1]+F);e[4]=Math.max(e[4],e[4]+F);e[2]=Math.min(e[2],e[2]+V);e[5]=Math.max(e[5],e[5]+V)};l.expandWithRect=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[3]=Math.max(e[3],p[2]);e[4]=Math.max(e[4],p[3])};l.expandWithVec3=function(e,p){e[0]=Math.min(e[0],
p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[0]);e[4]=Math.max(e[4],p[1]);e[5]=Math.max(e[5],p[2])};l.fromExtent=function(e,p=R()){p[0]=e.xmin;p[1]=e.ymin;p[2]=e.hasZ?e.zmin:-Infinity;p[3]=e.xmax;p[4]=e.ymax;p[5]=e.hasZ?e.zmax:Infinity;return p};l.fromMinMax=function(e,p,F=R()){F[0]=e[0];F[1]=e[1];F[2]=e[2];F[3]=p[0];F[4]=p[1];F[5]=p[2];return F};l.fromRect=function(e,p){e[0]=p[0];e[1]=p[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=p[2];e[4]=p[3];e[5]=Number.POSITIVE_INFINITY;
return e};l.fromRectValues=function(e,p,F,V,K){e[0]=p;e[1]=F;e[2]=Number.NEGATIVE_INFINITY;e[3]=V;e[4]=K;e[5]=Number.POSITIVE_INFINITY;return e};l.fromValues=P;l.getMax=function(e,p){p[0]=e[3];p[1]=e[4];p[2]=e[5];return p};l.getMin=function(e,p){p[0]=e[0];p[1]=e[1];p[2]=e[2];return p};l.height=k;l.intersects=m;l.intersectsClippingArea=function(e,p){return f.isNone(p)?!0:m(e,p)};l.is=L;l.isPoint=function(e){return 0===Q(e)&&0===H(e)&&0===k(e)};l.maximumDimension=function(e){return Math.max(Q(e),k(e),
H(e))};l.offset=function(e,p,F,V,K=e){K[0]=e[0]+p;K[1]=e[1]+F;K[2]=e[2]+V;K[3]=e[3]+p;K[4]=e[4]+F;K[5]=e[5]+V;return K};l.scale=function(e,p,F=e){const V=e[0]+Q(e)/2,K=e[1]+H(e)/2,S=e[2]+k(e)/2;F[0]=V+(e[0]-V)*p;F[1]=K+(e[1]-K)*p;F[2]=S+(e[2]-S)*p;F[3]=V+(e[3]-V)*p;F[4]=K+(e[4]-K)*p;F[5]=S+(e[5]-S)*p;return F};l.set=h;l.setMax=function(e,p,F=e){F[3]=p[0];F[4]=p[1];F[5]=p[2];F!==e&&(F[0]=e[0],F[1]=e[1],F[2]=e[2]);return e};l.setMin=function(e,p,F=e){F[0]=p[0];F[1]=p[1];F[2]=p[2];F!==e&&(F[3]=e[3],
F[4]=e[4],F[5]=e[5]);return F};l.size=function(e,p=[0,0,0]){p[0]=Q(e);p[1]=H(e);p[2]=k(e);return p};l.toExtent=function(e,p){return isFinite(e[2])||isFinite(e[5])?new ia({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:p}):new ia({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:p})};l.toRect=function(e,p){p||(p=ba.create());p[0]=e[0];p[1]=e[1];p[2]=e[3];p[3]=e[4];return p};l.width=Q;l.wrap=function(e,p,F,V,K,S){return P(e,p,F,V,K,S,x)};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(l,f,ia,ba,R,P,Q,H,k,m){function h(y,O){return y?O?4:3:O?3:2}function L(y,O,aa,X){if(y){if(aa)return O&&X?n:Ba;if(O&&X)return c}else if(O&&X)return Ba;
return ra}function J({scale:y,translate:O},aa){return Math.round((aa-O[0])/y[0])}function M({scale:y,translate:O},aa){return Math.round((O[1]-aa)/y[1])}function x({scale:y,translate:O},aa,X){return aa*y[X]+O[X]}function e(y){y=y.coords;return{x:y[0],y:y[1]}}function p(y,O){y.coords[0]=O.x;y.coords[1]=O.y;return y}function F(y){y=y.coords;return{x:y[0],y:y[1],z:y[2]}}function V(y,O){y.coords[0]=O.x;y.coords[1]=O.y;y.coords[2]=O.z;return y}function K(y){y=y.coords;return{x:y[0],y:y[1],m:y[2]}}function S(y,
O){y.coords[0]=O.x;y.coords[1]=O.y;y.coords[2]=O.m;return y}function D(y){y=y.coords;return{x:y[0],y:y[1],z:y[2],m:y[3]}}function r(y,O){y.coords[0]=O.x;y.coords[1]=O.y;y.coords[2]=O.z;y.coords[3]=O.m;return y}function E(y,O){return y&&O?r:y?V:O?S:p}function v(y,O,aa,X,fa){aa=E(aa,X);for(const {geometry:ma,attributes:oa}of O)O=ba.isSome(ma)?aa(new m,ma):null,y.push(new H.OptimizedFeature(O,oa,null,fa?oa[fa]:void 0));return y}function G(y,O,aa,X){for(const {geometry:fa,attributes:ma}of O)y.push({attributes:ma,
geometry:ba.isSome(fa)?z(fa,aa,X):null});return y}function z(y,O,aa){if(ba.isNone(y))return null;const X=h(O,aa),fa=[];for(let ma=0;ma<y.coords.length;ma+=X){const oa=[];for(let wa=0;wa<X;wa++)oa.push(y.coords[ma+wa]);fa.push(oa)}return O?aa?{points:fa,hasZ:O,hasM:aa}:{points:fa,hasZ:O}:aa?{points:fa,hasM:aa}:{points:fa}}function w(y,O,aa,X,fa){aa=h(aa,X);for(const {geometry:ma,attributes:oa}of O)O=ba.isSome(ma)?B(new m,ma,aa):null,y.push(new H.OptimizedFeature(O,oa,null,fa?oa[fa]:void 0));return y}
function B(y,O,aa=h(O.hasZ,O.hasM)){y.lengths[0]=O.points.length;const X=y.coords;let fa=0;for(const ma of O.points)for(O=0;O<aa;O++)X[fa++]=ma[O];return y}function T(y,O,aa){if(!y)return null;const X=h(O,aa),{coords:fa,lengths:ma}=y;y=[];let oa=0;for(const wa of ma){const ua=[];for(let Ea=0;Ea<wa;Ea++){const Ca=[];for(let Fa=0;Fa<X;Fa++)Ca.push(fa[oa++]);ua.push(Ca)}y.push(ua)}return O?aa?{paths:y,hasZ:O,hasM:aa}:{paths:y,hasZ:O}:aa?{paths:y,hasM:aa}:{paths:y}}function C(y,O,aa,X,fa){aa=h(aa,X);
for(const {geometry:ma,attributes:oa}of O)O=ba.isSome(ma)?I(new m,ma,aa):null,y.push(new H.OptimizedFeature(O,oa,null,fa?oa[fa]:void 0));return y}function I(y,O,aa=h(O.hasZ,O.hasM)){const {lengths:X,coords:fa}=y;let ma=0;for(const oa of O.paths){for(const wa of oa)for(O=0;O<aa;O++)fa[ma++]=wa[O];X.push(oa.length)}return y}function t(y,O,aa){if(!y)return null;const X=h(O,aa),{coords:fa,lengths:ma}=y;y=[];let oa=0;for(const wa of ma){const ua=[];for(let Ea=0;Ea<wa;Ea++){const Ca=[];for(let Fa=0;Fa<
X;Fa++)Ca.push(fa[oa++]);ua.push(Ca)}y.push(ua)}return O?aa?{rings:y,hasZ:O,hasM:aa}:{rings:y,hasZ:O}:aa?{rings:y,hasM:aa}:{rings:y}}function u(y,O,aa,X,fa){for(const {geometry:ma,centroid:oa,attributes:wa}of O){O=ba.isSome(ma)?Y(new m,ma,aa,X):null;const ua=fa?wa[fa]:void 0;ba.isSome(oa)?y.push(new H.OptimizedFeature(O,wa,p(new m,oa),ua)):y.push(new H.OptimizedFeature(O,wa,null,ua))}return y}function Y(y,O,aa=O.hasZ,X=O.hasM){ha(y,O.rings,aa,X);return y}function ha(y,O,aa,X){aa=h(aa,X);const {lengths:fa,
coords:ma}=y;X=0;Wa(y);for(const oa of O){for(const wa of oa)for(O=0;O<aa;O++)ma[X++]=wa[O];fa.push(oa.length)}return y}function va(y,O,aa,X,fa,ma){Va(y);if(!aa){for(const oa of O)y.push(new H.OptimizedFeature(null,oa.attributes,null,ma?oa.attributes[ma]:void 0));return y}switch(aa){case "esriGeometryPoint":return v(y,O,X,fa,ma);case "esriGeometryMultipoint":return w(y,O,X,fa,ma);case "esriGeometryPolyline":return C(y,O,X,fa,ma);case "esriGeometryPolygon":return u(y,O,X,fa,ma);default:gb.error("convertToFeatureSet:unknown-geometry",
new f(`Unable to parse unknown geometry type '${aa}'`)),Va(y)}return y}function za(y,O,aa,X){y=y&&("coords"in y?y:y.geometry);if(ba.isNone(y))return null;switch(O){case "esriGeometryPoint":return O=e,aa&&X?O=D:aa?O=F:X&&(O=K),O(y);case "esriGeometryMultipoint":return z(y,aa,X);case "esriGeometryPolyline":return T(y,aa,X);case "esriGeometryPolygon":return t(y,aa,X);default:return gb.error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${O}'`)),null}}function Ha(y,
O,aa,X,fa){Va(y);if(ba.isNone(aa)){for(const oa of O)y.push({attributes:oa.attributes});return y}switch(aa){case "esriGeometryPoint":aa=e;X&&fa?aa=D:X?aa=F:fa&&(aa=K);for(var ma of O){const {geometry:oa,attributes:wa}=ma;X=ba.isSome(oa)?aa(oa):null;y.push({attributes:wa,geometry:X})}break;case "esriGeometryMultipoint":return G(y,O,X,fa);case "esriGeometryPolyline":for(const {geometry:oa,attributes:wa}of O)y.push({attributes:wa,geometry:ba.isSome(oa)?T(oa,X,fa):null});break;case "esriGeometryPolygon":for(const {geometry:oa,
attributes:wa,centroid:ua}of O)ma=ba.isSome(oa)?t(oa,X,fa):null,ba.isSome(ua)?(O=e(ua),y.push({attributes:wa,centroid:O,geometry:ma})):y.push({attributes:wa,geometry:ma});break;default:gb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${aa}'`))}return y}function Ja(y,O,aa,X,fa,ma,oa=aa,wa=X){Wa(y);if(ba.isNone(O)||!O.coords.length)return null;fa=na[fa];const {coords:ua,lengths:Ea}=O;O=h(aa,X);const Ca=h(aa&&oa,X&&wa);aa=L(aa,X,oa,wa);if(!Ea.length)return aa(y.coords,
ua,0,0,J(ma,ua[0]),M(ma,ua[1])),Wa(y,O,0),y;let Fa,Sa=0,Oa,Ua=0;for(const Ta of Ea){if(Ta<fa)continue;let Ma=0;Oa=Ua;wa=X=J(ma,ua[Sa]);Fa=oa=M(ma,ua[Sa+1]);aa(y.coords,ua,Oa,Sa,wa,Fa);Ma++;Sa+=O;Oa+=Ca;for(let Xa=1;Xa<Ta;Xa++,Sa+=O)if(wa=J(ma,ua[Sa]),Fa=M(ma,ua[Sa+1]),wa!==X||Fa!==oa)aa(y.coords,ua,Oa,Sa,wa-X,Fa-oa),Oa+=Ca,Ma++,X=wa,oa=Fa;Ma>=fa&&(y.lengths.push(Ma),Ua=Oa)}Va(y.coords,Ua);return y.coords.length?y:null}function Ia(y,O,aa,X,fa,ma,oa){let wa=X,ua=0;for(let Ca=ma+aa;Ca<oa;Ca+=aa){var Ea=
O[Ca];const Fa=O[Ca+1],Sa=O[oa],Oa=O[oa+1];let Ua=O[ma],Ta=O[ma+1],Ma=Sa-Ua,Xa=Oa-Ta;if(0!==Ma||0!==Xa){const ab=((Ea-Ua)*Ma+(Fa-Ta)*Xa)/(Ma*Ma+Xa*Xa);1<ab?(Ua=Sa,Ta=Oa):0<ab&&(Ua+=Ma*ab,Ta+=Xa*ab)}Ma=Ea-Ua;Xa=Fa-Ta;Ea=Ma*Ma+Xa*Xa;Ea>wa&&(ua=Ca,wa=Ea)}wa>X&&(ua-ma>aa&&Ia(y,O,aa,X,fa,ma,ua),fa(y,O,y.length,ua,O[ua],O[ua+1]),oa-ua>aa&&Ia(y,O,aa,X,fa,ua,oa))}function Ka(y,O,aa,X,fa){const {coords:ma,lengths:oa}=O;aa=h(aa,X);if(!ma.length)return y!==O&&Wa(y),y;ba.assertIsSome(fa);const {originPosition:wa,
scale:ua,translate:Ea}=fa;fa=sa;fa.originPosition=wa;X=fa.scale;X[0]=ua[0]??1;X[1]=-(ua[1]??1);X[2]=ua[2]??1;X[3]=ua[3]??1;var Ca=fa.translate;Ca[0]=Ea[0]??0;Ca[1]=Ea[1]??0;Ca[2]=Ea[2]??0;Ca[3]=Ea[3]??0;if(!oa.length){for(X=0;X<aa;++X)y.coords[X]=x(fa,ma[X],X);y!==O&&Wa(y,aa,0);return y}Ca=0;for(let Sa=0;Sa<oa.length;Sa++){const Oa=oa[Sa];y.lengths[Sa]=Oa;for(var Fa=0;Fa<aa;++Fa)y.coords[Ca+Fa]=x(fa,ma[Ca+Fa],Fa);Fa=y.coords[Ca];let Ua=y.coords[Ca+1];Ca+=aa;for(let Ta=1;Ta<Oa;Ta++,Ca+=aa){Fa+=ma[Ca]*
X[0];Ua+=ma[Ca+1]*X[1];y.coords[Ca]=Fa;y.coords[Ca+1]=Ua;for(let Ma=2;Ma<aa;++Ma)y.coords[Ca+Ma]=x(fa,ma[Ca+Ma],Ma)}}y!==O&&Wa(y,ma.length,oa.length);return y}function Qa(y,O,aa,X){let fa=0,ma=y[X*O],oa=y[X*(O+1)];for(let wa=1;wa<aa;wa++){const ua=ma+y[X*(O+wa)],Ea=oa+y[X*(O+wa)+1],Ca=(ua-ma)*(Ea+oa);ma=ua;oa=Ea;fa+=Ca}return.5*fa}function Wa(y,O=0,aa=0){Va(y.lengths,aa);Va(y.coords,O)}function Va(y,O=0){y.length!==O&&(y.length=O)}const gb=ia.getLogger("esri.layers.graphics.featureConversionUtils"),
na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ra=(y,O,aa,X,fa,ma)=>{y[aa]=fa;y[aa+1]=ma},Ba=(y,O,aa,X,fa,ma)=>{y[aa]=fa;y[aa+1]=ma;y[aa+2]=O[X+2]},c=(y,O,aa,X,fa,ma)=>{y[aa]=fa;y[aa+1]=ma;y[aa+2]=O[X+3]},n=(y,O,aa,X,fa,ma)=>{y[aa]=fa;y[aa+1]=ma;y[aa+2]=O[X+2];y[aa+3]=O[X+3]},da=[],ka=[],sa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};l.convertFromFeature=function(y,O,aa,X,fa){da[0]=y;[y]=va(ka,da,O,aa,X,fa);Va(da);Va(ka);return y};
l.convertFromFeatureSet=function(y,O){const aa=new k,{hasM:X,hasZ:fa,features:ma,objectIdFieldName:oa,spatialReference:wa,geometryType:ua,exceededTransferLimit:Ea,transform:Ca,fields:Fa}=y;Fa&&(aa.fields=Fa);aa.geometryType=ua??null;aa.objectIdFieldName=oa??O??null;aa.spatialReference=wa??null;if(!aa.objectIdFieldName)return gb.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),aa;ma&&va(aa.features,ma,ua,fa,X,aa.objectIdFieldName);Ea&&(aa.exceededTransferLimit=
Ea);X&&(aa.hasM=X);fa&&(aa.hasZ=fa);Ca&&(aa.transform=Ca);return aa};l.convertFromFeatures=va;l.convertFromGeometry=function(y,O,aa){if(ba.isNone(y))return null;const X=new m;"hasZ"in y&&null==O&&(O=y.hasZ);"hasM"in y&&null==aa&&(aa=y.hasM);if(Q.isPoint(y))return E(null!=O?O:null!=y.z,null!=aa?aa:null!=y.m)(X,y);if(Q.isPolygon(y))return Y(X,y,O,aa);if(Q.isPolyline(y))return I(X,y,h(O,aa));if(Q.isMultipoint(y))return B(X,y,h(O,aa));gb.error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${y}'`))};
l.convertFromGraphics=function(y,O,aa,X,fa,ma){const oa=y.length;switch(aa){case "esriGeometryPoint":v(y,O,X,fa,ma);break;case "esriGeometryMultipoint":w(y,O,X,fa,ma);break;case "esriGeometryPolyline":C(y,O,X,fa,ma);break;case "esriGeometryPolygon":u(y,O,X,fa,ma);break;default:gb.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${aa}'`))}for(X=0;X<O.length;X++)y[X+oa].geometryType=aa,y[X+oa].insertAfter=O[X].insertAfter,y[X+oa].groupId=O[X].groupId;return y};
l.convertFromMultipoint=B;l.convertFromMultipointFeatures=w;l.convertFromNestedArray=ha;l.convertFromPoint=function(y,O,aa=E(null!=O.z,null!=O.m)){return aa(y,O)};l.convertFromPointFeatures=v;l.convertFromPolygon=Y;l.convertFromPolyline=I;l.convertFromPolylineFeatures=C;l.convertToFeature=function(y,O,aa,X){ka[0]=y;Ha(da,ka,O,aa,X);y=da[0];Va(da);Va(ka);return y};l.convertToFeatureSet=function(y){const {objectIdFieldName:O,spatialReference:aa,transform:X,fields:fa,hasM:ma,hasZ:oa,features:wa,geometryType:ua,
exceededTransferLimit:Ea,uniqueIdField:Ca,queryGeometry:Fa,queryGeometryType:Sa}=y;y=Ha([],wa,ua,oa,ma);const Oa=za(Fa,Sa,!1,!1);y={features:y,fields:fa,geometryType:ua,objectIdFieldName:O,spatialReference:aa,uniqueIdField:Ca,queryGeometry:Oa};X&&(y.transform=X);Ea&&(y.exceededTransferLimit=Ea);ma&&(y.hasM=ma);oa&&(y.hasZ=oa);return y};l.convertToFeatures=Ha;l.convertToGeometry=za;l.convertToMultipoint=z;l.convertToMultipointFeatures=G;l.convertToPoint=function(y,O,aa){return y?O?aa?D(y):F(y):aa?
K(y):e(y):null};l.convertToPolygon=t;l.convertToPolyline=T;l.deltaDecodeGeometry=function(y,O){if(ba.isNone(y))return null;const aa=y.clone(),X=y.coords;y=y.lengths;let fa=0;for(let wa=0;wa<y.length;wa++){const ua=y[wa];var ma=X[O*fa],oa=X[O*fa+1];for(let Ea=1;Ea<ua;Ea++)ma+=X[O*(fa+Ea)],oa+=X[O*(fa+Ea)+1],aa.coords[O*(fa+Ea)]=ma,aa.coords[O*(fa+Ea)+1]=oa;fa+=ua}return aa};l.deltaEncodeGeometry=function(y,O){const aa=y.clone(),X=y.coords;y=y.lengths;let fa=0;for(let oa=0;oa<y.length;oa++){const wa=
y[oa];let ua=X[O*fa];var ma=X[O*fa+1];for(let Ea=1;Ea<wa;Ea++){const Ca=X[O*(fa+Ea)],Fa=X[O*(fa+Ea)+1];ma=Fa-ma;aa.coords[O*(fa+Ea)]=Ca-ua;aa.coords[O*(fa+Ea)+1]=ma;ua=Ca;ma=Fa}fa+=wa}return aa};l.generalizeOptimizedGeometry=function(y,O,aa,X,fa,ma,oa=aa,wa=X){Wa(y);if(!O||!O.coords.length)return null;fa=na[fa];const {coords:ua,lengths:Ea}=O;O=h(aa,X);const Ca=h(aa&&oa,X&&wa);aa=L(aa,X,oa,wa);if(!Ea.length)return aa(y.coords,ua,0,0,ua[0],ua[1]),Wa(y,O,0),y;X=0;ma*=ma;for(const Fa of Ea){if(Fa<fa){X+=
Fa*O;continue}oa=y.coords.length/Ca;wa=X;const Sa=X+(Fa-1)*O;aa(y.coords,ua,y.coords.length,wa,ua[wa],ua[wa+1]);Ia(y.coords,ua,O,ma,aa,wa,Sa);aa(y.coords,ua,y.coords.length,Sa,ua[Sa],ua[Sa+1]);wa=y.coords.length/Ca-oa;wa>=fa?y.lengths.push(wa):Va(y.coords,oa*Ca);X+=Fa*O}return y.coords.length?y:null};l.getBoundsOptimizedGeometry=function(y,O,aa,X){if(ba.isNone(O)||!O.coords||!O.coords.length)return null;aa=h(aa,X);let fa=X=Number.POSITIVE_INFINITY,ma=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY;
if(O&&O.coords){O=O.coords;for(let wa=0;wa<O.length;wa+=aa){const ua=O[wa],Ea=O[wa+1];X=Math.min(X,ua);ma=Math.max(ma,ua);fa=Math.min(fa,Ea);oa=Math.max(oa,Ea)}}R.is(y)?R.fromRectValues(y,X,fa,ma,oa):P.fromValues(X,fa,ma,oa,y);return y};l.getQuantizedArea=function(y,O){const {coords:aa,lengths:X}=y;let fa=y=0;for(let ma=0;ma<X.length;ma++){const oa=X[ma];fa+=Qa(aa,y,oa,O);y+=oa}return Math.abs(fa)};l.getQuantizedBoundsOptimizedGeometry=function(y,O,aa,X){aa=h(aa,X);const {lengths:fa,coords:ma}=O;
X=O=Number.POSITIVE_INFINITY;let oa=Number.NEGATIVE_INFINITY,wa=Number.NEGATIVE_INFINITY,ua=0;for(const Ea of fa){let Ca=ma[ua],Fa=ma[ua+1];O=Math.min(Ca,O);X=Math.min(Fa,X);oa=Math.max(Ca,oa);wa=Math.max(Fa,wa);ua+=aa;for(let Sa=1;Sa<Ea;Sa++,ua+=aa){const Oa=ma[ua],Ua=ma[ua+1];Ca+=Oa;Fa+=Ua;0>Oa&&(O=Math.min(O,Ca));0<Oa&&(oa=Math.max(oa,Ca));0>Ua?X=Math.min(X,Fa):0<Ua&&(wa=Math.max(wa,Fa))}}y[0]=O;y[1]=X;y[2]=oa;y[3]=wa;return y};l.getSignedQuantizedRingArea=Qa;l.quantizeOptimizedFeatureSet=function(y,
O){const {geometryType:aa,features:X,hasM:fa,hasZ:ma}=O;if(!y)return O;for(let oa=0;oa<X.length;oa++){const wa=X[oa],ua=wa.weakClone();ua.geometry=new m;Ja(ua.geometry,wa.geometry,fa,ma,aa,y);wa.centroid&&(ua.centroid=new m,Ja(ua.centroid,wa.centroid,fa,ma,"esriGeometryPoint",y));X[oa]=ua}O.transform=y;return O};l.quantizeOptimizedGeometry=Ja;l.quantizeX=J;l.quantizeY=M;l.removeCollinearVectices=function(y,O,aa,X,fa){if(!O||!O.coords||!O.coords.length)return null;aa=na[aa];const {coords:ma,lengths:oa}=
O;O=L(X,fa,X,fa);X=h(X,fa);let wa=fa=0,ua=0,Ea=0;for(const Sa of oa){wa=Ea;O(y.coords,ma,wa,fa,ma[fa],ma[fa+1]);fa+=X;var Ca=ma[fa];let Oa=ma[fa+1],Ua=Ca,Ta=Oa;var Fa=Oa/Ca;wa+=X;O(y.coords,ma,wa,fa,Ua,Ta);fa+=X;for(let Ma=2;Ma<Sa;Ma++){Ca=ma[fa];Oa=ma[fa+1];const Xa=Oa/Ca,ab=Fa===Xa||!isFinite(Fa)&&!isFinite(Xa);Fa=ab&&isFinite(Xa)?0<=Fa&&0<=Xa||0>=Fa&&0>=Xa:0<=Ta&&0<=Oa||0>=Ta&&0>=Oa;ab&&Fa?(Ua+=Ca,Ta+=Oa):(Ua=Ca,Ta=Oa,wa+=X);O(y.coords,ma,wa,fa,Ua,Ta);fa+=X;Fa=Xa}wa+=X;Ca=(wa-Ea)/X;Ca>=aa&&(y.lengths[ua]=
Ca,Ea=wa,ua++)}y.coords.length>Ea&&(y.coords.length=Ea);y.lengths.length>ua&&(y.lengths.length=ua);return y.coords.length&&y.lengths.length?y:null};l.removeZMValues=function(y,O,aa,X,fa,ma){Wa(y);y.lengths.push(...O.lengths);if(aa===fa&&X===ma)for(var oa=0;oa<O.coords.length;oa++)y.coords.push(O.coords[oa]);else for(oa=h(aa,X),aa=L(aa,X,fa,ma),O=O.coords,X=0;X<O.length;X+=oa)aa(y.coords,O,y.coords.length,X,O[X],O[X+1]);return y};l.unquantizeOptimizedFeatureSet=function(y){const {transform:O,features:aa,
hasM:X,hasZ:fa}=y;if(!O)return y;for(const ma of aa)ba.isSome(ma.geometry)&&Ka(ma.geometry,ma.geometry,X,fa,O),ba.isSome(ma.centroid)&&Ka(ma.centroid,ma.centroid,X,fa,O);y.transform=null;return y};l.unquantizeOptimizedGeometry=Ka;l.unquantizeValue=x;l.unquantizeX=function(y,O){return x(y,O,0)};l.unquantizeY=function(y,O){return x(y,-O,1)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(l){return function(){function f(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}f.prototype.weakClone=function(){const ia=new f;ia.objectIdFieldName=this.objectIdFieldName;ia.globalIdFieldName=this.globalIdFieldName;ia.geohashFieldName=
this.geohashFieldName;ia.geometryProperties=this.geometryProperties;ia.geometryType=this.geometryType;ia.spatialReference=this.spatialReference;ia.hasZ=this.hasZ;ia.hasM=this.hasM;ia.features=this.features;ia.fields=this.fields;ia.transform=this.transform;ia.exceededTransferLimit=this.exceededTransferLimit;ia.uniqueIdField=this.uniqueIdField;ia.queryGeometry=this.queryGeometry;ia.queryGeometryType=this.queryGeometryType;return ia};return l._createClass(f)}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(l,f,ia,ba,R){function P(k,m,h){Q.minX=m[0];Q.minY=m[1];Q.maxX=m[2];Q.maxY=m[3];k.search(Q,h)}const Q={minX:0,minY:0,maxX:0,maxY:0};let H=function(){function k(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new ba.PooledRBush(9,ia("esri-csp-restrictions")?h=>({minX:h[0],minY:h[1],maxX:h[2],
maxY:h[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const h=Array(this._idByBounds.size);let L=0;this._idByBounds.forEach((J,M)=>{h[L++]=M});this._indexInvalid=!1;this._index.clear();this._index.load(h)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(h=>this._idByBounds.has(h))))),this._boundsToLoad.length=0)}}var m=k.prototype;m.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();
this._idByBounds.clear();this._index.clear()};m.delete=function(h){const L=this._boundsById.get(h);this._boundsById.delete(h);L&&(this._idByBounds.delete(L),this._indexInvalid||this._index.remove(L))};m.forEachInBounds=function(h,L){this._loadIndex();P(this._index,h,J=>L(this._idByBounds.get(J)))};m.get=function(h){return this._boundsById.get(h)};m.has=function(h){return this._boundsById.has(h)};m.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};
m.set=function(h,L){if(!this._indexInvalid){const J=this._boundsById.get(h);J&&(this._index.remove(J),this._idByBounds.delete(J))}this._boundsById.set(h,L);L&&(this._idByBounds.set(L,h),this._indexInvalid||(this._boundsToLoad.push(L),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(k,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const h=R.empty();for(const L of this._boundsById.values())L&&(h[0]=Math.min(L[0],h[0]),h[1]=Math.min(L[1],h[1]),h[2]=Math.max(L[2],
h[2]),h[3]=Math.max(L[3],h[3]));return h}},{key:"valid",get:function(){return!this._indexInvalid}}]);return k}();l.BoundsStore=H;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(l,f,ia,ba,R,P){function Q(v,G){H(v,0,v.children.length,G,v)}function H(v,G,z,w,B){B||(B=new r([]));B.minX=Infinity;
B.minY=Infinity;B.maxX=-Infinity;B.maxY=-Infinity;for(let T=G,C;T<z;T++)C=v.children[T],k(B,v.leaf?w(C):C);return B}function k(v,G){v.minX=Math.min(v.minX,G.minX);v.minY=Math.min(v.minY,G.minY);v.maxX=Math.max(v.maxX,G.maxX);v.maxY=Math.max(v.maxY,G.maxY)}function m(v,G){return v.minX-G.minX}function h(v,G){return v.minY-G.minY}function L(v){return(v.maxX-v.minX)*(v.maxY-v.minY)}function J(v){return v.maxX-v.minX+(v.maxY-v.minY)}function M(v,G){return v.minX<=G.minX&&v.minY<=G.minY&&G.maxX<=v.maxX&&
G.maxY<=v.maxY}function x(v,G){return G.minX<=v.maxX&&G.minY<=v.maxY&&G.maxX>=v.minX&&G.maxY>=v.minY}function e(v,G,z,w,B){for(G=[G,z];G.length;){z=ba.assumeNonNull(G.pop());const T=ba.assumeNonNull(G.pop());if(z-T<=w)continue;const C=T+Math.ceil((z-T)/w/2)*w;P.quickselect(v,C,T,z,B);G.push(T,C,C,z)}}let p=function(){function v(z=9,w){this._compareMinX=m;this._compareMinY=h;this._toBBox=B=>B;this._maxEntries=Math.max(4,z||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));w&&("function"===
typeof w?this._toBBox=w:this._initFormat(w));this.clear()}var G=v.prototype;G.destroy=function(){this.clear();F.prune();V.prune();K.prune();S.prune()};G.all=function(z){this._all(this._data,z)};G.search=function(z,w){let B=this._data;const T=this._toBBox;if(x(z,B))for(F.clear();B;){for(let C=0,I=B.children.length;C<I;C++){const t=B.children[C],u=B.leaf?T(t):t;x(z,u)&&(B.leaf?w(t):M(z,u)?this._all(t,w):F.push(t))}B=F.pop()}};G.collides=function(z){let w=this._data;const B=this._toBBox;if(!x(z,w))return!1;
for(F.clear();w;){for(let T=0,C=w.children.length;T<C;T++){const I=w.children[T],t=w.leaf?B(I):I;if(x(z,t)){if(w.leaf||M(z,t))return!0;F.push(I)}}w=F.pop()}return!1};G.load=function(z){if(!z.length)return this;if(z.length<this._minEntries){for(let w=0,B=z.length;w<B;w++)this.insert(z[w]);return this}z=this._build(z.slice(0,z.length),0,z.length-1,0);if(this._data.children.length)if(this._data.height===z.height)this._splitRoot(this._data,z);else{if(this._data.height<z.height){const w=this._data;this._data=
z;z=w}this._insert(z,this._data.height-z.height-1,!0)}else this._data=z;return this};G.insert=function(z){z&&this._insert(z,this._data.height-1);return this};G.clear=function(){this._data=new r([]);return this};G.remove=function(z){if(!z)return this;let w=this._data,B=null,T=0,C=!1,I;const t=this._toBBox(z);K.clear();for(S.clear();w||0<K.length;){w||(w=ba.assumeNonNull(K.pop()),B=K.data[K.length-1],T=S.pop()??0,C=!0);if(w.leaf&&(I=ia.indexOf(w.children,z,w.children.length,w.indexHint),-1!==I)){w.children.splice(I,
1);K.push(w);this._condense(K);break}C||w.leaf||!M(w,t)?B?(T++,w=B.children[T],C=!1):w=null:(K.push(w),S.push(T),T=0,B=w,w=w.children[0])}return this};G.toJSON=function(){return this._data};G.fromJSON=function(z){this._data=z;return this};G._all=function(z,w){for(V.clear();z;){if(!0===z.leaf)for(const B of z.children)w(B);else V.pushArray(z.children);z=V.pop()??null}};G._build=function(z,w,B,T){var C=B-w+1,I=this._maxEntries;if(C<=I)return z=new r(z.slice(w,B+1)),Q(z,this._toBBox),z;T||(T=Math.ceil(Math.log(C)/
Math.log(I)),I=Math.ceil(C/I**(T-1)));const t=new E([]);t.height=T;C=Math.ceil(C/I);I=C*Math.ceil(Math.sqrt(I));for(e(z,w,B,I,this._compareMinX);w<=B;w+=I){const u=Math.min(w+I-1,B);e(z,w,u,C,this._compareMinY);for(let Y=w;Y<=u;Y+=C)t.children.push(this._build(z,Y,Math.min(Y+C-1,u),T-1))}Q(t,this._toBBox);return t};G._chooseSubtree=function(z,w,B,T){for(;;){T.push(w);if(!0===w.leaf||T.length-1===B)break;let C=Infinity,I=Infinity,t=void 0;for(let u=0,Y=w.children.length;u<Y;u++){const ha=w.children[u],
va=L(ha),za=(Math.max(ha.maxX,z.maxX)-Math.min(ha.minX,z.minX))*(Math.max(ha.maxY,z.maxY)-Math.min(ha.minY,z.minY))-va;za<I?(I=za,C=va<C?va:C,t=ha):za===I&&va<C&&(C=va,t=ha)}w=t||w.children[0]}return w};G._insert=function(z,w,B){var T=this._toBBox;B=B?z:T(z);K.clear();T=this._chooseSubtree(B,this._data,w,K);T.children.push(z);for(k(T,B);0<=w;)if(K.data[w].children.length>this._maxEntries)this._split(K,w),w--;else break;this._adjustParentBBoxes(B,K,w)};G._split=function(z,w){const B=z.data[w];var T=
B.children.length;const C=this._minEntries;this._chooseSplitAxis(B,C,T);(T=this._chooseSplitIndex(B,C,T))?(T=B.children.splice(T,B.children.length-T),T=B.leaf?new r(T):new E(T),T.height=B.height,Q(B,this._toBBox),Q(T,this._toBBox),w?z.data[w-1].children.push(T):this._splitRoot(B,T)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};G._splitRoot=function(z,w){this._data=new E([z,w]);this._data.height=z.height+1;Q(this._data,this._toBBox)};G._chooseSplitIndex=function(z,
w,B){let T,C,I=void 0;T=C=Infinity;for(let u=w;u<=B-w;u++){var t=H(z,0,u,this._toBBox);const Y=H(z,u,B,this._toBBox),ha=Math.max(0,Math.min(t.maxX,Y.maxX)-Math.max(t.minX,Y.minX))*Math.max(0,Math.min(t.maxY,Y.maxY)-Math.max(t.minY,Y.minY));t=L(t)+L(Y);ha<T?(T=ha,I=u,C=t<C?t:C):ha===T&&t<C&&(C=t,I=u)}return I};G._chooseSplitAxis=function(z,w,B){const T=z.leaf?this._compareMinX:m,C=z.leaf?this._compareMinY:h,I=this._allDistMargin(z,w,B,T);w=this._allDistMargin(z,w,B,C);I<w&&z.children.sort(T)};G._allDistMargin=
function(z,w,B,T){z.children.sort(T);T=this._toBBox;var C=H(z,0,w,T);const I=H(z,B-w,B,T);let t=J(C)+J(I);for(let u=w;u<B-w;u++){const Y=z.children[u];k(C,z.leaf?T(Y):Y);t+=J(C)}for(B=B-w-1;B>=w;B--)C=z.children[B],k(I,z.leaf?T(C):C),t+=J(I);return t};G._adjustParentBBoxes=function(z,w,B){for(;0<=B;B--)k(w.data[B],z)};G._condense=function(z){for(let w=z.length-1;0<=w;w--){const B=z.data[w];if(0===B.children.length)if(0<w){const T=z.data[w-1],C=T.children;C.splice(ia.indexOf(C,B,C.length,T.indexHint),
1)}else this.clear();else Q(B,this._toBBox)}};G._initFormat=function(z){const w=["return a"," - b",";"];this._compareMinX=new Function("a","b",w.join(z[0]));this._compareMinY=new Function("a","b",w.join(z[1]));this._toBBox=new Function("a","return {minX: a"+z[0]+", minY: a"+z[1]+", maxX: a"+z[2]+", maxY: a"+z[3]+"};")};return f._createClass(v)}();const F=new R,V=new R,K=new R,S=new R({deallocator:void 0});R=f._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let D=
function(v){function G(){var w=z.apply(this,arguments);w.height=1;w.indexHint=new ia.PositionHint;return w}f._inherits(G,v);var z=f._createSuper(G);return f._createClass(G)}(R),r=function(v){function G(w){var B=z.call(this);B.children=w;B.leaf=!0;return B}f._inherits(G,v);var z=f._createSuper(G);return f._createClass(G)}(D),E=function(v){function G(w){var B=z.call(this);B.children=w;B.leaf=!1;return B}f._inherits(G,v);var z=f._createSuper(G);return f._createClass(G)}(D);l.BBox=R;l.PooledRBush=p;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(l){var f={};(function(ia){(function(ba){ba=ba();void 0!==ba&&(ia.exports=ba)})(function(){function ba(Q,H,k,m,h){for(;m>k;){if(600<m-k){var L=m-k+1,J=H-k+1,M=Math.log(L),x=.5*Math.exp(2*M/3);M=.5*Math.sqrt(M*x*(L-x)/L)*(0>J-L/2?-1:1);ba(Q,H,Math.max(k,Math.floor(H-J*x/L+M)),Math.min(m,Math.floor(H+(L-J)*x/L+M)),h)}L=Q[H];J=k;x=m;R(Q,k,H);for(0<h(Q[m],L)&&R(Q,k,m);J<x;){R(Q,J,x);J++;for(x--;0>h(Q[J],
L);)J++;for(;0<h(Q[x],L);)x--}0===h(Q[k],L)?R(Q,k,x):(x++,R(Q,x,m));x<=H&&(k=x+1);H<=x&&(m=x-1)}}function R(Q,H,k){var m=Q[H];Q[H]=Q[k];Q[k]=m}function P(Q,H){return Q<H?-1:Q>H?1:0}return function(Q,H,k,m,h){ba(Q,H,k||0,m||Q.length-1,h||P)}})})({get exports(){return f},set exports(ia){f=ia}});l.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,f,ia,
ba,R){l.optimizedFeatureQueryEngineAdapter={getObjectId(P){return P.objectId},getAttributes(P){return P.attributes},getAttribute(P,Q){return P.attributes[Q]},cloneWithGeometry(P,Q){return new ba.OptimizedFeature(Q,P.attributes,null,P.objectId)},getGeometry(P){return P.geometry},getCentroid(P,Q){f.isNone(P.centroid)&&(P.centroid=ia.getCentroidOptimizedGeometry(new R,P.geometry,Q.hasZ,Q.hasM));return P.centroid}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports",
"../../core/maybe"],function(l,f){function ia(R,P,Q,H,k,m,h=1){m=k?m?4:3:m?3:2;let L=Q,J=Q+m,M=0,x=0,e=Q=0,p=0;for(let F=0,V=H-1;F<V;F++,L+=m,J+=m){H=P[L];const K=P[L+1],S=P[L+2],D=P[J],r=P[J+1],E=P[J+2];let v=H*r-D*K;e+=v;M+=(H+D)*v;x+=(K+r)*v;k&&(v=H*E-D*S,Q+=(S+E)*v,p+=v);H<R[0]&&(R[0]=H);H>R[1]&&(R[1]=H);K<R[2]&&(R[2]=K);K>R[3]&&(R[3]=K);k&&(S<R[4]&&(R[4]=S),S>R[5]&&(R[5]=S))}0<e*h&&(e*=-1);0<p*h&&(p*=-1);if(!e)return null;R=[M,x,.5*e];k&&(R[3]=Q,R[4]=.5*p);return R}function ba(R,P,Q,H,k){k=H?
k?4:3:k?3:2;let m=P,h=P+k,L=0,J=0,M=0,x=0;for(let V=0,K=Q-1;V<K;V++,m+=k,h+=k){var e=R[m];const S=R[m+1],D=R[m+2],r=R[h],E=R[h+1],v=R[h+2];if(H){var p=r-e;var F=E-S;const G=v-D;p=Math.sqrt(p*p+F*F+G*G)}else p=r-e,F=E-S,p=Math.sqrt(p*p+F*F);p&&(L+=p,H?(e=[e+.5*(r-e),S+.5*(E-S),D+.5*(v-D)],J+=p*e[0],M+=p*e[1],x+=p*e[2]):(e=[e+.5*(r-e),S+.5*(E-S)],J+=p*e[0],M+=p*e[1]))}return 0<L?H?[J/L,M/L,x/L]:[J/L,M/L]:0<Q?H?[R[P],R[P+1],R[P+2]]:[R[P],R[P+1]]:null}l.getCentroidOptimizedGeometry=function(R,P,Q,H,k){if(f.isNone(P)||
!P.lengths.length)return null;const m="upperLeft"===k?.originPosition?-1:1;R.lengths.length&&(R.lengths.length=0);R.coords.length&&(R.coords.length=0);k=R.coords;const h=[],L=Q?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:J,coords:M}=P,x=Q?H?4:3:H?3:2;let e=0;for(var p of J){const F=
ia(L,M,e,p,Q,H,m);F&&h.push(F);e+=p*x}h.sort((F,V)=>{let K=m*F[2]-m*V[2];0===K&&Q&&(K=F[4]-V[4]);return K});h.length&&(p=6*h[0][2],k[0]=h[0][0]/p,k[1]=h[0][1]/p,Q&&(p=6*h[0][4],k[2]=0!==p?h[0][3]/p:0),k[0]<L[0]||k[0]>L[1]||k[1]<L[2]||k[1]>L[3]||Q&&(k[2]<L[4]||k[2]>L[5]))&&(k.length=0);if(!k.length)if(P=P.lengths[0]?ba(M,0,J[0],Q,H):null)k[0]=P[0],k[1]=P[1],Q&&2<P.length&&(k[2]=P[2]);else return null;return R};l.lineCentroid=ba;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,f,ia,ba,R,P,Q,H,k,m,h,L,J){async function M(v,G,z){if(!v)return null;var {where:w}=v;v.where=w=w&&w.trim();if(!w||/^1 *= *1$/.test(w)||G&&G===w)v.where=null;if(!v.geometry)return v;G=await e(v);v.distance=0;v.units=null;"esriSpatialRelEnvelopeIntersects"===v.spatialRel&&({spatialReference:w}=v.geometry,G=Q.getGeometryExtent(G),G.spatialReference=w);if(G){await J.checkProjectionSupport(G.spatialReference,z);w=G.spatialReference;G=x(G,z)&&H.isExtent(G)?{spatialReference:w,rings:[[[G.xmin,
G.ymin],[G.xmin,G.ymax],[G.xmax,G.ymax],[G.xmax,G.ymin],[G.xmin,G.ymin]]]}:G;w=(await k.normalizeCentralMeridian(H.fromJSON(G)))[0];if(ba.isNone(w))throw V;const B="quantizationParameters"in v&&v.quantizationParameters?.tolerance||"maxAllowableOffset"in v&&v.maxAllowableOffset||0;G=B&&x(G,z)?{densificationStep:8*B}:void 0;w=w.toJSON();G=await J.project(w,w.spatialReference,z,G);if(!G)throw V;G.spatialReference=z;v.geometry=G}return v}function x(v,G){if(!v)return!1;const z=v.spatialReference;return(H.isExtent(v)||
H.isPolygon(v)||H.isPolyline(v))&&!m.equals(z,G)&&!P.canProjectWithoutEngine(z,G)}async function e(v){const {distance:G,units:z}=v,w=v.geometry;if(null==G||"vertexAttributes"in w)return w;var B=w.spatialReference;v=z?F.fromJSON(z):R.getUnitString(B);B=B&&(m.isGeographic(B)||m.isWebMercator(B))?w:await J.checkProjectionSupport(B,m.WGS84).then(()=>J.project(w,m.WGS84));return(await p())(B.spatialReference,B,G,v)}async function p(){return(await new Promise((v,G)=>l(["../../../geometry/geometryEngineJSON"],
v,G))).geodesicBuffer}const F=new ia.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),V=Object.freeze({}),K=new L,S=new L,D=new L,r={esriGeometryPoint:h.convertToPoint,esriGeometryPolyline:h.convertToPolyline,esriGeometryPolygon:h.convertToPolygon,esriGeometryMultipoint:h.convertToMultipoint},E=(v,G)=>"_geVersion"!==v?G:void 0;f.QUERY_ENGINE_EMPTY_RESULT=
V;f.cleanFromGeometryEngine=function(v){return v&&"_geVersion"in v?JSON.parse(JSON.stringify(v,E)):v};f.getGeometry=function(v,G,z,w,B,T,C=G,I=z){const t=G&&C,u=z&&I;w=ba.isSome(w)?"coords"in w?w:w.geometry:null;if(ba.isNone(w))return null;if(B)return G=h.generalizeOptimizedGeometry(S,w,G,z,v,B,C,I),T&&(G=h.quantizeOptimizedGeometry(D,G,t,u,v,T)),r[v]?.(G,t,u)??null;if(T)return T=h.quantizeOptimizedGeometry(D,w,G,z,v,T,C,I),r[v]?.(T,t,u)??null;h.removeZMValues(K,w,G,z,C,I);return r[v]?.(K,t,u)??null};
f.normalizeQuery=async function(v,G,z){const {outFields:w,orderByFields:B,groupByFieldsForStatistics:T,outStatistics:C}=v;if(w)for(var I=0;I<w.length;I++)w[I]=w[I].trim();if(B)for(I=0;I<B.length;I++)B[I]=B[I].trim();if(T)for(I=0;I<T.length;I++)T[I]=T[I].trim();if(C)for(I=0;I<C.length;I++)C[I].onStatisticField&&(C[I].onStatisticField=C[I].onStatisticField.trim());v.geometry&&!v.outSR&&(v.outSR=v.geometry.spatialReference);return M(v,G,z)};f.normalizeQueryLike=M;f.transformCentroid=function(v,G,z,w=
v.hasZ,B=v.hasM){if(ba.isNone(G))return null;const T=v.hasZ&&w,C=v.hasM&&B;return z?(v=h.quantizeOptimizedGeometry(D,G,v.hasZ,v.hasM,"esriGeometryPoint",z,w,B),h.convertToPoint(v,T,C)):h.convertToPoint(G,T,C)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(l,f,ia,ba,R,P,Q,H,k,m,h,L){function J(K){const S=[];let D=0,r=0;for(let E=0;E<K.length;E++){const v=K[E];let G=null;for(let z=0;z<v.length;z++)G=v[z],S.push(G),0===z?r=D=G[0]:(D=Math.min(D,G[0]),r=Math.max(r,G[0]));G&&S.push([(D+r)/2,0])}return S}function M(K,S){if(!(K instanceof Q||K instanceof P))throw V.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ia("straightLineDensify: the input geometry is neither polyline nor polygon");var D=H.getGeometryParts(K);
const r=[];for(const v of D){D=[];r.push(D);D.push([v[0][0],v[0][1]]);for(let G=0;G<v.length-1;G++){const z=v[G][0],w=v[G][1],B=v[G+1][0],T=v[G+1][1];var E=Math.sqrt((B-z)*(B-z)+(T-w)*(T-w));const C=(T-w)/E,I=(B-z)/E,t=E/S;if(1<t){for(let u=1;u<=t-1;u++){const Y=u*S;D.push([I*Y+z,C*Y+w])}E=(E+Math.floor(t-1)*S)/2;D.push([I*E+z,C*E+w])}D.push([B,T])}}return"polygon"===K.type?new P({rings:r,spatialReference:K.spatialReference}):new Q({paths:r,spatialReference:K.spatialReference})}function x(K,S,D){S&&
(K=M(K,1E6),K=m.webMercatorToGeographic(K,!0));D&&(K=H.updatePolyGeometry(K,D));return K}function e(K,S,D){if(Array.isArray(K)){var r=K[0];r>S?(D=H.offsetMagnitude(r,S),K[0]=r+-2*D*S):r<D&&(S=H.offsetMagnitude(r,D),K[0]=r+-2*S*D)}else r=K.x,r>S?(D=H.offsetMagnitude(r,S),K=K.clone().offset(-2*D*S,0)):r<D&&(S=H.offsetMagnitude(r,D),K=K.clone().offset(-2*S*D,0));return K}function p(K,S){let D=-1;for(let r=0;r<S.cutIndexes.length;r++){const E=S.cutIndexes[r],v=S.geometries[r],G=H.getGeometryParts(v);
for(let z=0;z<G.length;z++){const w=G[z];w.some(B=>{if(180>B[0])return!0;B=0;for(var T=0;T<w.length;T++){var C=w[T][0];B=C>B?C:B}B=Number(B.toFixed(9));B=-360*H.offsetMagnitude(B,180);for(T=0;T<w.length;T++)C=v.getPoint(z,T),v.setPoint(z,T,C.clone().offset(B,0));return!0})}if(E===D)if("polygon"===K[0].type)for(const z of H.getGeometryParts(v))K[E]=K[E].addRing(z);else{if("polyline"===K[0].type)for(const z of H.getGeometryParts(v))K[E]=K[E].addPath(z)}else D=E,K[E]=v}return K}async function F(K,S,
D){if(!Array.isArray(K))return F([K],S);S&&"string"!==typeof S&&V.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var r="string"===typeof S?S:S?.url??f.geometryServiceUrl;let E,v,G;let z=0;var w=[];S=[];for(var B of K)if(R.isNone(B))S.push(B);else{if(!T){var T=B.spatialReference;var C=k.getInfo(T);var I=(E=T.isWebMercator)?102100:4326;v=H.cutParams[I].maxX;G=H.cutParams[I].minX;var t=H.cutParams[I].plus180Line;I=H.cutParams[I].minus180Line}if(C)if("mesh"===
B.type)S.push(B);else if("point"===B.type)S.push(e(B.clone(),v,G));else if("multipoint"===B.type){var u=B.clone();u.points=u.points.map(Y=>e(Y,v,G));S.push(u)}else if("extent"===B.type)u=B.clone()._normalize(!1,!1,C),S.push(u.rings?new P(u):u);else if(B.extent){u=B.extent;const Y=2*H.offsetMagnitude(u.xmin,G)*v;let ha=0===Y?B.clone():H.updatePolyGeometry(B.clone(),Y);u.offset(Y,0);u.intersects(t)&&u.xmax!==v?(z=u.xmax>z?u.xmax:z,ha=x(ha,E),w.push(ha),S.push("cut")):u.intersects(I)&&u.xmin!==G?(z=
2*u.xmax*v>z?2*u.xmax*v:z,ha=x(ha,E,360),w.push(ha),S.push("cut")):S.push(ha)}else S.push(B.clone());else S.push(B)}T=H.offsetMagnitude(z,v);C=-90;t=T;for(B=new Q;0<T;)I=-180+360*T,B.addPath([[I,C],[I,-1*C]]),C*=-1,T--;if(0<w.length&&0<t){T=await h.cut(r,w,B,D);T=p(w,T);C=[];w=[];for(t=0;t<S.length;t++)B=S[t],"cut"!==B?w.push(B):(B=T.shift(),I=K[t],R.isSome(I)&&"polygon"===I.type&&I.rings&&1<I.rings.length&&B.rings.length>=I.rings.length?(C.push(B),w.push("simplify")):w.push(E?m.geographicToWebMercator(B):
B));if(!C.length)return w;S=await L.simplify(r,C,D);K=[];for(D=0;D<w.length;D++)r=w[D],"simplify"!==r?K.push(r):K.push(E?m.geographicToWebMercator(S.shift()):S.shift());return K}K=[];for(D=0;D<S.length;D++)r=S[D],"cut"!==r?K.push(r):(r=w.shift(),K.push(!0===E?m.geographicToWebMercator(r):r));return K}const V=ba.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(K){if(!K)return null;const S=K.extent;if(!S)return null;var D=K.spatialReference&&k.getInfo(K.spatialReference);
if(!D)return S;const [r,E]=D.valid;({width:D}=S);let {xmin:v,xmax:G}=S;[v,G]=[G,v];if("extent"===K.type||0===D||D<=E||D>2*E||v<r||G>E)return S;let z;switch(K.type){case "polygon":if(1<K.rings.length)z=J(K.rings);else return S;break;case "polyline":if(1<K.paths.length)z=J(K.paths);else return S;break;case "multipoint":z=K.points}K=S.clone();for(let w=0;w<z.length;w++){let B=z[w][0];0>B?(B+=E,G=Math.max(B,G)):(B-=E,v=Math.min(B,v))}K.xmin=v;K.xmax=G;return K.width<D?(K.xmin-=E,K.xmax-=E,K):S};l.normalizeCentralMeridian=
F;l.normalizeMapX=function(K,S){if(S=k.getInfo(S)){const [D,r]=S.valid;S=r-D;if(K<D)for(;K<D;)K+=S;if(K>r)for(;K>r;)K-=S}return K};l.straightLineDensify=M;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,f,ia,ba){function R(P){return ba.isPolygon(P)?P.rings:P.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:ia.WGS84}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:ia.WGS84})}};l.cutParams=f;l.getGeometryParts=R;l.offsetMagnitude=function(P,
Q){return Math.ceil((P-Q)/(2*Q))};l.updatePolyGeometry=function(P,Q){const H=R(P);for(const k of H)for(const m of k)m[0]+=Q;return P};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(l,f,ia,ba,R){l.cut=async function(P,Q,H,k){P=R.parseUrl(P);const m=Q[0].spatialReference;Q={...k,query:{...P.query,f:"json",sr:JSON.stringify(m),target:JSON.stringify({geometryType:ba.getJsonType(Q[0]),
geometries:Q}),cutter:JSON.stringify(H)}};Q=await ia(P.path+"/cut",Q);const {cutIndexes:h,geometries:L=[]}=Q.data;return{cutIndexes:h,geometries:L.map(J=>{J=ba.fromJSON(J);J.spatialReference=m;return J})}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(l,f,ia,ba,R,P){function Q(H,k,m){const h={};for(const J in H)if("declaredClass"!==J){var L=H[J];
if(null!=L&&"function"!==typeof L)if(Array.isArray(L)){h[J]=[];for(let M=0;M<L.length;M++)h[J][M]=Q(L[M])}else"object"===typeof L?L.toJSON?(L=L.toJSON(m&&m[J]),h[J]=k?L:JSON.stringify(L)):h[J]=k?L:JSON.stringify(L):h[J]=L}return h}l.asValidOptions=function(H,k){return k?{...k,query:{...(H??{}),...k.query}}:{query:H}};l.encode=Q;l.getToken=function(H,k){return H?P.supportsApiKey(H)&&(k||f.apiKey)?k||f.apiKey:ia.id?.findCredential(H)?.token:null};l.parseUrl=function(H){return"string"===typeof H?R.urlToObject(H):
ba.clone(H)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(l,f,ia,ba,R){l.simplify=async function(P,Q,H){const k="string"===typeof P?ia.urlToObject(P):P;P=Q[0].spatialReference;const m=ba.getJsonType(Q[0]);Q={...H,query:{...k.query,f:"json",sr:P.wkid??JSON.stringify(P),geometries:JSON.stringify(R.encodeGeometries(Q))}};({data:Q}=
await f(k.path+"/simplify",Q));return R.decodeGeometries(Q.geometries,m,P)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(l,f){l.decodeGeometries=function(ia,ba,R){const P=f.getGeometryType(ba);return ia.map(Q=>{Q=P.fromJSON(Q);Q.spatialReference=R;return Q})};l.encodeGeometries=function(ia){return{geometryType:f.getJsonType(ia[0]),geometries:ia.map(ba=>ba.toJSON())}};Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(l,f,ia,ba,R,P,Q){function H(x,e){if(!e)return null;if("x"in e){var p={x:0,y:0};[p.x,p.y]=x(e.x,e.y,h);null!=e.z&&(p.z=e.z);null!=e.m&&(p.m=e.m);return p}return"xmin"in
e?(p={xmin:0,ymin:0,xmax:0,ymax:0},[p.xmin,p.ymin]=x(e.xmin,e.ymin,h),[p.xmax,p.ymax]=x(e.xmax,e.ymax,h),e.hasZ&&(p.zmin=e.zmin,p.zmax=e.zmax,p.hasZ=!0),e.hasM&&(p.mmin=e.mmin,p.mmax=e.mmax,p.hasM=!0),p):"rings"in e?{rings:k(e.rings,x),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:k(e.paths,x),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:m(e.points,x),hasM:e.hasM,hasZ:e.hasZ}:null}function k(x,e){const p=[];for(const F of x)p.push(m(F,e));return p}function m(x,e){const p=[];for(const F of x)x=e(F[0],
F[1],[0,0]),p.push(x),2<F.length&&x.push(F[2]),3<F.length&&x.push(F[3]);return p}const h=[0,0],L=H.bind(null,Q.lngLatToXY),J=H.bind(null,Q.xyToLngLat),M=new (function(){function x(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var e=x.prototype;e.push=async function(p,F,V){if(!(p&&p.length&&F&&V)||P.equals(F,V))return p;const K={geometries:p,inSpatialReference:F,outSpatialReference:V,resolve:null};this._jobs.push(K);return new Promise(S=>{K.resolve=S;null===this._timer&&(this._timer=
setTimeout(this._process,10))})};e._process=function(){this._timer=null;const p=this._jobs.shift();if(p){var {geometries:F,inSpatialReference:V,outSpatialReference:K,resolve:S}=p;Q.canProject(V,K)?P.isWebMercator(K)?S(F.map(L)):S(F.map(J)):S(ba.projectMany(R.jsonAdapter,F,V,K,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return f._createClass(x)}());l.checkProjectionSupport=async function(x,e){x&&e&&(x=Array.isArray(x)?x.map(p=>ia.isSome(p.geometry)?p.geometry.spatialReference:
null).filter(ia.isSome):[x],await ba.initializeProjection(x.map(p=>({source:p,dest:e}))))};l.project=function(x,e,p,F){if(!x)return x;p||(p=e,e=x.spatialReference);return P.isValid(e)&&P.isValid(p)&&!P.equals(e,p)?Q.canProject(e,p)?(x=P.isWebMercator(p)?L(x):J(x),x.spatialReference=p,x):ba.projectMany(R.jsonAdapter,[x],e,p,null,F)[0]:x};l.projectMany=function(x,e,p){return M.push(x,e,p)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,f,ia,ba,R,P,Q,H,k,m,h,L,J,M,x,e,p,F,V,K,S,D,r,E,v,G){function z(I){return null!=I&&I.every(t=>"exceedslimit"!==t.statisticType)}let w=f._createClass(function(I,t=null,u,Y,ha){this.attributes=I;this.geometry=u;this.centroid=Y;this.filterFlags=ha;this.groupId=-1;this.displayId=t});const B=new Q.MemCacheStorage(2E6);let T=0,C=function(){function I(u){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:V.queryCapabilities};this.geometryType=u.geometryType;this.hasM=!!u.hasM;
this.hasZ=!!u.hasZ;this.objectIdField=u.objectIdField;this.spatialReference=u.spatialReference;this.definitionExpression=u.definitionExpression;this.featureStore=u.featureStore;this.aggregateAdapter=u.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=u.timeInfo;u.cacheSpatialQueries&&(this._geometryQueryCache=new Q.MemCache(T++ +"$$",B));this.fieldsIndex=new E(u.fields);u.scheduler&&u.priority&&(this._frameTask=u.scheduler.registerTask(u.priority))}
var t=I.prototype;t.destroy=function(){this._frameTask=P.removeMaybe(this._frameTask);this.clearCache();P.destroyMaybe(this._geometryQueryCache);this._changeHandle=P.removeMaybe(this._changeHandle);P.destroyMaybe(this.fieldsIndex)};t.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};t.executeQuery=async function(u,Y){try{return(await this._executeQuery(u,{},Y)).createQueryResponse()}catch(ha){if(ha!==r.QUERY_ENGINE_EMPTY_RESULT)throw ha;
return(new K.QueryEngineResult([],u,this)).createQueryResponse()}};t.executeQueryForCount=async function(u={},Y){try{return(await this._executeQuery(u,{returnGeometry:!1,returnCentroid:!1,outSR:null},Y)).createQueryResponseForCount()}catch(ha){if(ha!==r.QUERY_ENGINE_EMPTY_RESULT)throw ha;return 0}};t.executeQueryForExtent=async function(u,Y){const ha=u.outSR;try{const va=await this._executeQuery(u,{returnGeometry:!0,returnCentroid:!1,outSR:null},Y),za=va.size;if(!za)return{count:0,extent:null};const Ha=
await this._getBounds(va.items,va.spatialReference,ha||this.spatialReference);return{count:za,extent:Ha}}catch(va){if(va===r.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw va;}};t.executeQueryForIds=async function(u,Y){return this.executeQueryForIdSet(u,Y).then(ha=>Array.from(ha))};t.executeQueryForIdSet=async function(u,Y){try{const ha=await this._executeQuery(u,{returnGeometry:!0,returnCentroid:!1,outSR:null},Y),va=ha.items,za=new Set;await this._reschedule(()=>{for(const Ha of va)za.add(ha.featureAdapter.getObjectId(Ha))},
Y);return za}catch(ha){if(ha===r.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ha;}};t.executeQueryForSnapping=async function(u,Y){const {point:ha,distance:va,types:za}=u;if(za===K.SnappingTypes.NONE)return{candidates:[]};const Ha=await this._reschedule(()=>this._checkQuerySupport(u.query),Y),Ja=!x.equals(ha.spatialReference,this.spatialReference);Ja&&await F.checkProjectionSupport(ha.spatialReference,this.spatialReference);var Ia="number"===typeof va?va:va.x,Ka="number"===typeof va?va:va.y;Ia={xmin:ha.x-
Ia,xmax:ha.x+Ia,ymin:ha.y-Ka,ymax:ha.y+Ka,spatialReference:ha.spatialReference};Ia=Ja?F.project(Ia,this.spatialReference):Ia;if(!Ia)return{candidates:[]};Ka=(await M.normalizeCentralMeridian(J.fromJSON(ha),null,{signal:Y}))[0];const Qa=(await M.normalizeCentralMeridian(J.fromJSON(Ia),null,{signal:Y}))[0];if(P.isNone(Ka)||P.isNone(Qa))return{candidates:[]};const Wa=new K.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Qa.toJSON())),Y),Ha,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Wa),Y);await this._reschedule(()=>this._executeTimeQuery(Wa),Y);await this._reschedule(()=>this._executeAttributesQuery(Wa),Y);Y=Ka.toJSON();Y=Ja?F.project(Y,this.spatialReference):Y;return Wa.createSnappingResponse({...u,point:Y,distance:Ja?Math.max(Ia.xmax-Ia.xmin,Ia.ymax-Ia.ymin)/2:va},ha.spatialReference)};t.executeQueryForLatestObservations=async function(u,Y){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ba("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:u,timeInfo:this.timeInfo});try{const ha=await this._executeQuery(u,{},Y);await this._reschedule(()=>this._filterLatest(ha),Y);return ha.createQueryResponse()}catch(ha){if(ha!==r.QUERY_ENGINE_EMPTY_RESULT)throw ha;return(new K.QueryEngineResult([],u,this)).createQueryResponse()}};t.executeQueryForSummaryStatistics=async function(u={},Y,ha){const {field:va,normalizationField:za,valueExpression:Ha}=Y;return(await this._getQueryEngineResultForStats(u,{field:va,normalizationField:za,valueExpression:Ha},
ha)).createSummaryStatisticsResponse(Y)};t.executeQueryForUniqueValues=async function(u={},Y,ha){const {field:va,field2:za,field3:Ha,valueExpression:Ja}=Y;return(await this._getQueryEngineResultForStats(u,{field:va,field2:za,field3:Ha,valueExpression:Ja},ha)).createUniqueValuesResponse(Y)};t.executeQueryForClassBreaks=async function(u={},Y,ha){const {field:va,normalizationField:za,valueExpression:Ha}=Y;return(await this._getQueryEngineResultForStats(u,{field:va,normalizationField:za,valueExpression:Ha},
ha)).createClassBreaksResponse(Y)};t.executeQueryForHistogram=async function(u={},Y,ha){const {field:va,normalizationField:za,valueExpression:Ha}=Y;return(await this._getQueryEngineResultForStats(u,{field:va,normalizationField:za,valueExpression:Ha},ha)).createHistogramResponse(Y)};t.fetchRecomputedExtents=async function(u){const [Y,ha]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),P.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=D.getTimeExtent(this.timeInfo,this.featureStore)]);H.throwIfAborted(u);return{fullExtent:Y,timeExtent:ha}};t._getBounds=async function(u,Y,ha){const va=m.set(m.create(),m.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(u,za=>m.expandWithAABB(va,za));u={xmin:va[0],ymin:va[1],xmax:va[3],ymax:va[4],spatialReference:r.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(va[2])&&isFinite(va[5])&&(u.zmin=va[2],u.zmax=va[5]);Y=F.project(u,Y,ha);Y.spatialReference=r.cleanFromGeometryEngine(ha);0===Y.xmax-Y.xmin&&(ha=k.getMetersPerUnitForSR(Y.spatialReference),Y.xmin-=ha,Y.xmax+=ha);0===Y.ymax-Y.ymin&&(ha=k.getMetersPerUnitForSR(Y.spatialReference),Y.ymin-=ha,Y.ymax+=ha);this.hasZ&&null!=Y.zmin&&null!=Y.zmax&&0===Y.zmax-Y.zmin&&(ha=k.getMetersPerUnitForSR(Y.spatialReference),Y.zmin-=ha,Y.zmax+=ha);return Y};t._schedule=async function(u,Y){return P.isSome(this._frameTask)?
this._frameTask.schedule(u,Y):u(G.noBudget)};t._reschedule=async function(u,Y){return P.isSome(this._frameTask)?this._frameTask.reschedule(u,Y):u(G.noBudget)};t._getAllFeaturesQueryEngineResult=async function(u){return new K.QueryEngineResult(await this._getAllFeatures(),u,this)};t._getAllFeatures=async function(){if(P.isNone(this._allFeaturesPromise)){const ha=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(va=>ha.push(va))})().then(()=>ha)}const u=this._allFeaturesPromise,
Y=await u;return u===this._allFeaturesPromise?Y.slice():this._getAllFeatures()};t._executeQuery=async function(u,Y,ha){u=R.clone(u);u=await this._schedule(()=>r.normalizeQuery(u,this.definitionExpression,this.spatialReference),ha);u=await this._reschedule(()=>this._checkQuerySupport(u),ha);u={...u,...Y};const va=await this._reschedule(()=>this._executeSceneFilterQuery(u,ha),ha),za=await this._reschedule(()=>this._executeGeometryQuery(u,va,ha),ha);await this._reschedule(()=>this._executeAggregateIdsQuery(za),
ha);await this._reschedule(()=>this._executeObjectIdsQuery(za),ha);await this._reschedule(()=>this._executeTimeQuery(za),ha);await this._reschedule(()=>this._executeAttributesQuery(za),ha);return za};t._executeSceneFilterQuery=async function(u,Y){if(P.isNone(u.sceneFilter))return null;const {outSR:ha,returnGeometry:va,returnCentroid:za}=u;var Ha=this.featureStore.featureSpatialReference,Ja=u.sceneFilter.geometry;const Ia=P.isNone(Ha)||x.equals(Ha,Ja.spatialReference)?Ja:F.project(Ja,Ha);if(!Ia)return null;
Ha=va||za;Ha=x.isValid(ha)&&!x.equals(this.spatialReference,ha)&&Ha?async Va=>this._project(Va,ha):Va=>Va;const Ka=this.featureAdapter;Ja=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ia)),Y);if("disjoint"===u.sceneFilter.spatialRelationship){if(!Ja.length)return null;const Va=new Set;for(var Qa of Ja)Va.add(Ka.getObjectId(Qa));const gb=await this._reschedule(()=>this._getAllFeatures(),Y);Qa=await this._reschedule(async()=>{const na=await S.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ia,this.geometryType,this.hasZ,this.hasM),ra=await this._runSpatialFilter(gb,Ba=>!Va.has(Ka.getObjectId(Ba))||na(Ka.getGeometry(Ba)),Y);return new K.QueryEngineResult(ra,u,this)},Y);return Ha(Qa)}if(!Ja.length)return new K.QueryEngineResult([],u,this);if(this._canExecuteSinglePass(Ia,u))return Ha(new K.QueryEngineResult(Ja,u,this));const Wa=await S.getSpatialQueryOperator("esriSpatialRelContains",Ia,this.geometryType,this.hasZ,this.hasM);Qa=await this._runSpatialFilter(Ja,Va=>Wa(Ka.getGeometry(Va)),
Y);return Ha(new K.QueryEngineResult(Qa,u,this))};t._executeGeometryQuery=async function(u,Y,ha){if(P.isSome(Y)&&0===Y.items.length)return Y;u=P.isSome(Y)?Y.query:u;const {geometry:va,outSR:za,spatialRel:Ha,returnGeometry:Ja,returnCentroid:Ia}=u;var Ka=this.featureStore.featureSpatialReference;const Qa=!va||P.isNone(Ka)||x.equals(Ka,va.spatialReference)?va:F.project(va,Ka),Wa=Ja||Ia,Va=x.isValid(za)&&!x.equals(this.spatialReference,za),gb=this._geometryQueryCache&&P.isNone(Y)?Va&&Wa?JSON.stringify({originalFilterGeometry:va,
spatialRelationship:Ha,outSpatialReference:za}):JSON.stringify({originalFilterGeometry:va,spatialRelationship:Ha}):null;Ka=gb?this._geometryQueryCache.get(gb):null;if(P.isSome(Ka))return new K.QueryEngineResult(Ka,u,this);Ka=async n=>{Va&&Wa&&await this._project(n,za);gb&&this._geometryQueryCache.put(gb,n.items,n.items.length+1);return n};if(!Qa)return Ka(P.isSome(Y)?Y:await this._getAllFeaturesQueryEngineResult(u));const na=this.featureAdapter;let ra=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(va)),
ha);if("esriSpatialRelDisjoint"===Ha){if(!ra.length)return Ka(P.isSome(Y)?Y:await this._getAllFeaturesQueryEngineResult(u));const n=new Set;for(var Ba of ra)n.add(na.getObjectId(Ba));const da=P.isSome(Y)?Y.items:await this._reschedule(()=>this._getAllFeatures(),ha);Ba=await this._reschedule(async()=>{const ka=await S.getSpatialQueryOperator(Ha,Qa,this.geometryType,this.hasZ,this.hasM),sa=await this._runSpatialFilter(da,y=>!n.has(na.getObjectId(y))||ka(na.getGeometry(y)),ha);return new K.QueryEngineResult(sa,
u,this)},ha);return Ka(Ba)}if(P.isSome(Y)){const n=new ia.PositionHint;ra=ra.filter(da=>0<=ia.indexOf(Y.items,da,Y.items.length,n))}if(!ra.length)return Ka=new K.QueryEngineResult([],u,this),gb&&this._geometryQueryCache.put(gb,Ka.items,1),Ka;if(this._canExecuteSinglePass(Qa,u))return Ka(new K.QueryEngineResult(ra,u,this));const c=await S.getSpatialQueryOperator(Ha,Qa,this.geometryType,this.hasZ,this.hasM);Ba=await this._runSpatialFilter(ra,n=>c(na.getGeometry(n)),ha);return Ka(new K.QueryEngineResult(Ba,
u,this))};t._executeAggregateIdsQuery=function(u){if(0!==u.items.length&&u.query.aggregateIds&&u.query.aggregateIds.length&&!P.isNone(this.aggregateAdapter)){var Y=new Set;for(const va of u.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(va).forEach(za=>Y.add(za));var ha=this.featureAdapter.getObjectId;u.items=u.items.filter(va=>Y.has(ha(va)))}};t._executeObjectIdsQuery=function(u){if(0!==u.items.length&&u.query.objectIds&&u.query.objectIds.length){var Y=new Set(u.query.objectIds),ha=
this.featureAdapter.getObjectId;u.items=u.items.filter(va=>Y.has(ha(va)))}};t._executeTimeQuery=function(u){if(0!==u.items.length){var Y=D.getTimeOperator(this.timeInfo,u.query.timeExtent,this.featureAdapter);P.isNone(Y)||(u.items=u.items.filter(Y))}};t._executeAttributesQuery=function(u){if(0!==u.items.length){var Y=p.getWhereClause(u.query.where,this.fieldsIndex);if(Y){if(!Y.isStandardized)throw new TypeError("Where clause is not standardized");u.items=u.items.filter(ha=>Y.testFeature(ha,this.featureAdapter))}}};
t._runSpatialFilter=async function(u,Y,ha){if(!Y)return u;if(P.isNone(this._frameTask))return u.filter(Ja=>Y(Ja));let va=0;const za=[],Ha=async Ja=>{for(;va<u.length;){const Ia=u[va++];Y(Ia)&&(za.push(Ia),Ja.madeProgress());Ja.done&&await this._reschedule(Ka=>Ha(Ka),ha)}};return this._reschedule(Ja=>Ha(Ja),ha).then(()=>za)};t._filterLatest=function(u){const {trackIdField:Y,startTimeField:ha,endTimeField:va}=this.timeInfo,za=va||ha,Ha=new Map,Ja=this.featureAdapter.getAttribute;for(const Ia of u.items){const Ka=
Ja(Ia,Y),Qa=Ja(Ia,za),Wa=Ha.get(Ka);(!Wa||Qa>Ja(Wa,za))&&Ha.set(Ka,Ia)}u.items=Array.from(Ha.values())};t._canExecuteSinglePass=function(u,Y){({spatialRel:Y}=Y);return S.canQueryWithRBush(u)&&("esriSpatialRelEnvelopeIntersects"===Y||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===Y||"esriSpatialRelContains"===Y||"esriSpatialRelWithin"===Y))};t._project=async function(u,Y){if(!Y||x.equals(this.spatialReference,Y))return u;const ha=this.featureAdapter;Y=await F.projectMany(u.items.map(va=>
r.getGeometry(this.geometryType,this.hasZ,this.hasM,ha.getGeometry(va))),this.spatialReference,Y);u.items=Y.map((va,za)=>ha.cloneWithGeometry(u.items[za],e.convertFromGeometry(va,this.hasZ,this.hasM)));return u};t._getQueryBBoxes=function(u){if(S.canQueryWithRBush(u)){if(J.isExtent(u))return[h.fromValues(u.xmin,u.ymin,u.xmax,u.ymax)];if(J.isPolygon(u))return u.rings.map(Y=>h.fromValues(Math.min(Y[0][0],Y[2][0]),Math.min(Y[0][1],Y[2][1]),Math.max(Y[0][0],Y[2][0]),Math.max(Y[0][1],Y[2][1])))}return[L.getBoundsXY(h.create(),
u)]};t._searchFeatures=async function(u){const Y=new Set;await Promise.all(u.map(ha=>this.featureStore.forEachInBounds(ha,va=>Y.add(va))));u=Array.from(Y.values());Y.clear();return u};t._checkStatisticsSupport=async function(u,Y){if(0>(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption||u.pixelSize||u.relationParam||u.text||u.outStatistics||u.groupByFieldsForStatistics||u.having||u.orderByFields)throw new ba("feature-store:unsupported-query","Unsupported query options",{query:u});this._checkAttributesQuerySupport(u);
return Promise.all([this._checkStatisticsParamsSupport(Y),S.checkSpatialQuerySupport(u,this.geometryType,this.spatialReference),F.checkProjectionSupport(this.spatialReference,u.outSR)]).then(()=>u)};t._checkStatisticsParamsSupport=async function(u){var Y=[];u.valueExpression&&({arcadeUtils:Y}=await v.loadArcade(),Y=Y.extractFieldNames(u.valueExpression));u.field&&Y.push(u.field);u.field2&&Y.push(u.field2);u.field3&&Y.push(u.field3);u.normalizationField&&Y.push(u.normalizationField);if(!Y.length)throw new ba("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:u});p.validateFields(this.fieldsIndex,Y,"params contains missing fields")};t._checkQuerySupport=async function(u){if(0>(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption||u.pixelSize||u.relationParam||u.text)throw new ba("feature-store:unsupported-query","Unsupported query options",{query:u});this._checkAttributesQuerySupport(u);this._checkStatisticsQuerySupport(u);return Promise.all([S.checkSpatialQuerySupport(u,this.geometryType,
this.spatialReference),F.checkProjectionSupport(this.spatialReference,u.outSR)]).then(()=>u)};t._checkAttributesQuerySupport=function(u){const {outFields:Y,orderByFields:ha,returnDistinctValues:va,outStatistics:za}=u,Ha=za?za.map(Ja=>Ja.outStatisticFieldName&&Ja.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ha&&0<ha.length){const Ja=ha.map(Ia=>{const Ka=Ia.toLowerCase();return Ka.includes(" asc")?Ka.split(" asc")[0]:Ka.includes(" desc")?Ka.split(" desc")[0]:Ia}).filter(Ia=>!Ha.includes(Ia));
p.validateFields(this.fieldsIndex,Ja,"orderByFields contains missing fields")}if(Y&&0<Y.length)p.validateFields(this.fieldsIndex,Y,"outFields contains missing fields");else if(va)throw new ba("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:u});p.validateWhere(this.fieldsIndex,u.where)};t._checkStatisticsQuerySupport=function(u){const {outStatistics:Y,groupByFieldsForStatistics:ha,having:va}=u;var za=ha&&ha.length,Ha=Y&&Y.length;if(va){if(!za||!Ha)throw new ba("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:u});p.validateHaving(this.fieldsIndex,va,Y)}if(Ha&&z(Y)){Ha=Y.map(Ja=>Ja.onStatisticField).filter(Boolean);p.validateFields(this.fieldsIndex,Ha,"onStatisticFields contains missing fields");za&&p.validateFields(this.fieldsIndex,ha,"groupByFieldsForStatistics contains missing fields");for(const Ja of Y){const {onStatisticField:Ia,statisticType:Ka}=Ja;if(("percentile_disc"===Ka||"percentile_cont"===Ka)&&"statisticParameters"in
Ja){if({statisticParameters:za}=Ja,!za)throw new ba("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ja,query:u});}else if("count"!==Ka&&Ia&&p.hasInvalidFieldType(Ia,this.fieldsIndex))throw new ba("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ja,query:u});}}};t._getQueryEngineResultForStats=async function(u,Y,ha){u=R.clone(u);try{u=await this._schedule(()=>r.normalizeQuery(u,this.definitionExpression,this.spatialReference),
ha);u=await this._reschedule(()=>this._checkStatisticsSupport(u,Y),ha);const va=await this._reschedule(()=>this._executeSceneFilterQuery(u,ha),ha),za=await this._reschedule(()=>this._executeGeometryQuery(u,va,ha),ha);await this._reschedule(()=>this._executeAggregateIdsQuery(za),ha);await this._reschedule(()=>this._executeObjectIdsQuery(za),ha);await this._reschedule(()=>this._executeTimeQuery(za),ha);await this._reschedule(()=>this._executeAttributesQuery(za),ha);return za}catch(va){if(va!==r.QUERY_ENGINE_EMPTY_RESULT)throw va;
return new K.QueryEngineResult([],u,this)}};f._createClass(I,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return I}();l.Feature=w;l.QueryEngine=C;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(l,f,ia,ba){l.RemoveMode=void 0;(function(Q){Q[Q.ALL=0]="ALL";Q[Q.SOME=1]="SOME"})(l.RemoveMode||(l.RemoveMode={}));let R=function(){function Q(k,
m,h){this._namespace=k;this._storage=m;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";h&&(this._storage.registerRemoveFunc(this._namespace,h),this._removeFunc=!0)}var H=Q.prototype;H.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};H.resetHitRate=function(){this._hit=this._miss=0};H.put=function(k,m,h,L=0){this._storage.put(this._namespace+
k,m,h,L)};H.get=function(k){k=this._storage.get(this._namespace+k);void 0===k?++this._miss:++this._hit;return k};H.pop=function(k){k=this._storage.pop(this._namespace+k);void 0===k?++this._miss:++this._hit;return k};H.updateSize=function(k,m,h){this._storage.updateSize(this._namespace+k,m,h)};H.clear=function(){this._storage.clear(this._namespace)};H.clearAll=function(){this._storage.clearAll()};H.getStats=function(){return this._storage.getStats()};H.resetStats=function(){this._storage.resetStats()};
f._createClass(Q,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return Q}(),P=function(){function Q(k=10485760){this._maxSize=k;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ba;this._users=new ba}var H=Q.prototype;H.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};H.register=function(k){this._users.push(k)};H.deregister=function(k){this._users.removeUnordered(k)};H.registerRemoveFunc=function(k,m){this._removeFuncs.push([k,m])};H.deregisterRemoveFunc=function(k){this._removeFuncs.filterInPlace(m=>m[0]!==k)};H.put=function(k,m,h,L){const J=this._db.get(k);J&&(this._size-=J.size,this._db.delete(k),J.entry!==m&&this._notifyRemove(k,J.entry,l.RemoveMode.ALL));h>this._maxSize?this._notifyRemove(k,m,l.RemoveMode.ALL):void 0===m?
console.warn("Refusing to cache undefined entry "):!h||0>h?console.warn("Refusing to cache entry with invalid size "+h):(L=1+Math.max(L,-3)- -3,this._db.set(k,{entry:m,size:h,lifetime:L,lives:L}),this._size+=h,this._checkSizeLimit())};H.updateSize=function(k,m,h){const L=this._db.get(k);if(L&&L.entry===m){for(this._size-=L.size;h>this._maxSize;)if(h=this._notifyRemove(k,m,l.RemoveMode.SOME),!(ia.isSome(h)&&0<h)){this._db.delete(k);return}L.size=h;this._size+=h;this._checkSizeLimit()}};H.pop=function(k){const m=
this._db.get(k);if(m)return this._size-=m.size,this._db.delete(k),++this._hit,m.entry;++this._miss};H.get=function(k){const m=this._db.get(k);if(void 0===m)++this._miss;else return this._db.delete(k),m.lives=m.lifetime,this._db.set(k,m),++this._hit,m.entry};H.getStats=function(){const k={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},h=[];this._db.forEach((M,x)=>{const e=M.lifetime;
h[e]=(h[e]||0)+M.size;this._users.forAll(p=>{p=p.namespace;x.startsWith(p)&&(m[p]=(m[p]||0)+M.size)})});const L={};this._users.forAll(M=>{const x=M.namespace;!isNaN(M.hitRate)&&0<M.hitRate?(m[x]=m[x]||0,L[x]=Math.round(100*M.hitRate)+"%"):L[x]="0%"});var J=Object.keys(m);J.sort((M,x)=>m[x]-m[M]);J.forEach(M=>k[M]=Math.round(m[M]/2**20)+"MB / "+L[M]);for(J=h.length-1;0<=J;--J){const M=h[J];M&&(k["Priority "+(J+-3-1)]=Math.round(M/this.size*100)+"%")}return k};H.resetStats=function(){this._hit=this._miss=
0;this._users.forAll(k=>k.resetHitRate())};H.clear=function(k){this._db.forEach((m,h)=>{h.startsWith(k)&&(this._size-=m.size,this._db.delete(h),this._notifyRemove(h,m.entry,l.RemoveMode.ALL))})};H.clearAll=function(){this._db.forEach((k,m)=>this._notifyRemove(m,k.entry,l.RemoveMode.ALL));this._size=0;this._db.clear()};H._getHitRate=function(){return this._hit/(this._hit+this._miss)};H._notifyRemove=function(k,m,h){let L;this._removeFuncs.some(J=>k.startsWith(J[0])?(J=J[1](m,h),"number"===typeof J&&
(L=J),!0):!1);return L};H._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [k,m]of this._db){this._db.delete(k);if(1>=m.lives){this._size-=m.size;const h=this._notifyRemove(k,m.entry,l.RemoveMode.SOME);ia.isSome(h)&&0<h&&(this._size+=h,m.lives=m.lifetime,m.size=h,this._db.set(k,m))}else--m.lives,this._db.set(k,m);if(this._size<=.9*this.maxSize)break}};f._createClass(Q,[{key:"size",get:function(){return this._size}},{key:"sizeMB",get:function(){return this._size/1024/1024}},{key:"maxSize",
get:function(){return this._maxSize},set:function(k){this._maxSize=Math.max(k,0);this._checkSizeLimit()}}]);return Q}();l.MIN_PRIORITY=-3;l.MemCache=R;l.MemCacheStorage=P;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(l,f,ia){function ba(k,m){return k?Q.get(k,m):null}function R(k,m,h,L=!0){const J=[];for(const M of m)if("*"!==M&&!k.has(M))if(L){m=
P(M);try{const x=ba(m,k);if(!x)throw new f("feature-store:unsupported-query","invalid SQL expression",{where:m});if(!x.isStandardized)throw new f("feature-store:unsupported-query","expression is not standard",{clause:x});R(k,x.fieldNames,"expression contains missing fields")}catch(x){if((m=x&&x.details)&&(m.clause||m.where))throw x;m&&m.missingFields?J.push(...m.missingFields):J.push(M)}}else J.push(M);if(J.length)throw new f("feature-store:unsupported-query",h,{missingFields:J});}function P(k){return k.split(" as ")[0]}
const Q=new ia.WhereClauseCache(50,500),H=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));l.getAliasFromFieldName=function(k){return k.split(" as ")[1]};l.getExpressionFromFieldName=P;l.getWhereClause=ba;l.hasInvalidFieldType=function(k,m){return(k=m.get(k))?!H.has(k.type):!1};l.validateFields=R;l.validateHaving=function(k,m,h){if(!m)return!0;const L=Q.get(m,k);if(!L)throw new f("feature-store:unsupported-query",
"invalid SQL expression",{having:m});if(!L.isAggregate)throw new f("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:m});R(k,L.fieldNames,"having contains missing fields");if(!L.getExpressions().every(J=>{const {aggregateType:M,field:x}=J,e=k.get(x)?.name;return h.some(p=>{const {onStatisticField:F,statisticType:V}=p;return k.get(F)?.name===e&&V.toLowerCase().trim()===M})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",
{having:m});return!0};l.validateWhere=function(k,m){if(!m)return!0;const h=Q.get(m,k);if(!h)throw new f("feature-store:unsupported-query","invalid SQL expression",{where:m});if(!h.isStandardized)throw new f("feature-store:unsupported-query","where clause is not standard",{where:m});R(k,h.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../ItemCache","./WhereClause"],function(l,f,ia,ba){let R=function(){function P(Q,H){this._cache=new ia(Q);this._invalidCache=new ia(H)}P.prototype.get=function(Q,H){const k=`${H.uid}:${Q}`,m=this._cache.get(k);if(m)return m;if(void 0!==this._invalidCache.get(k))return null;try{const h=ba.WhereClause.create(Q,H);this._cache.put(k,h);return h}catch{return this._invalidCache.put(k,null),null}};return f._createClass(P)}();l.WhereClauseCache=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},
"esri/core/ItemCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(l,f){return function(){function ia(R,P){this._storage=new f.MemCacheStorage;this._storage.maxSize=R;P&&this._storage.registerRemoveFunc("",P)}var ba=ia.prototype;ba.put=function(R,P){this._storage.put(R,P,1,1)};ba.pop=function(R){return this._storage.pop(R)};ba.get=function(R){return this._storage.get(R)};ba.clear=function(){this._storage.clearAll()};ba.destroy=function(){this._storage.destroy()};
return l._createClass(ia)}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,f,ia,ba,R,P){function Q(C,I){C+="";return C.length>=I?C:Array(I-C.length+1).join("0")+C}function H(C,I,t="0",u="0",Y="0",ha="0",va="",za="0",Ha="0"){return"+"===va||"-"===va?(C=`${Q(parseInt(C,10),4)}-${Q(parseInt(I,10),2)}-${Q(parseInt(t,10),2)}`,I="",10>parseFloat(ha)&&(I="0"),u=`${Q(parseInt(u,
10),2)}:${Q(parseInt(Y,10),2)}:${I+parseFloat(ha).toString()}`,va=`${va}${Q(parseInt(za,10),2)}:${Q(parseInt(Ha,10),2)}`,new Date(C+"T"+u+va)):new Date(parseInt(C,10),parseInt(I,10)-1,parseInt(t,10),parseInt(u,10),parseInt(Y,10),parseFloat(ha))}function k(C){let I=D.exec(C);if(null!==I){const [,t,u,Y,ha,va,za]=I;return H(t,u,Y,ha,va,za)}I=r.exec(C);if(null!==I){const [,t,u,Y,ha,va,za,Ha,Ja,Ia]=I;return H(t,u,Y,ha,va,za,Ha,Ja,Ia)}I=E.exec(C);if(null!==I){const [,t,u,Y,ha,va,za,Ha,Ja]=I;return H(t,
u,Y,ha,va,"0",za,Ha,Ja)}I=v.exec(C);if(null!==I){const [,t,u,Y,ha,va]=I;return H(t,u,Y,ha,va)}I=S.exec(C);if(null!==I){const [,t,u,Y]=I;return H(t,u,Y)}throw Error("SQL Invalid Timestamp");}function m(C){const I=S.exec(C);if(null===I)try{return k(C)}catch{throw Error("SQL Invalid Date");}const [,t,u,Y]=I;return new Date(parseInt(t,10),parseInt(u,10)-1,parseInt(Y,10))}function h(C){return Array.isArray(C)?C:[C]}function L(C){return null!==C?!0!==C:null}function J(C,I){return null!=C&&null!=I?!0===
C&&!0===I:!1===C||!1===I?!1:null}function M(C,I){return null!=C&&null!=I?!0===C||!0===I:!0===C||!0===I?!0:null}function x(C,I){if(null==C)return null;let t=!1;for(const u of I)if(null==u)t=null;else if(C===u){t=!0;break}return t}function e(C,I,t){if(null==C)return null;let u="",Y=B.Normal;for(let ha=0;ha<I.length;ha++){const va=I.charAt(ha);switch(Y){case B.Normal:va===t?Y=B.Escaped:u="-[]/{}()*+?.\\^$|".includes(va)?u+("\\"+va):"%"===va?u+".*":"_"===va?u+".":u+va;break;case B.Escaped:u="-[]/{}()*+?.\\^$|".includes(va)?
u+("\\"+va):u+va,Y=B.Normal}}return(new RegExp("^"+u+"$","m")).test(C)}function p(C){return C instanceof Date?C.valueOf():C}function F(C,I,t){if(null==I||null==t)return null;I=p(I);t=p(t);switch(C){case "\x3c\x3e":return I!==t;case "\x3d":return I===t;case "\x3e":return I>t;case "\x3c":return I<t;case "\x3e\x3d":return I>=t;case "\x3c\x3d":return I<=t}}function V(C,I,t){if("||"===C)return R.evaluateFunction("concat",[I,t]);if(I instanceof R.SqlInterval)if(t instanceof Date)switch(C){case "+":return new Date(I.valueInMilliseconds()+
t.getTime());case "-":return I.valueInMilliseconds()-t.getTime();case "*":return I.valueInMilliseconds()*t.getTime();case "/":return I.valueInMilliseconds()/t.getTime()}else if(t instanceof R.SqlInterval)switch(C){case "+":return R.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()+t.valueInMilliseconds());case "-":return R.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()-t.valueInMilliseconds());case "*":return I.valueInMilliseconds()*t.valueInMilliseconds();case "/":return I.valueInMilliseconds()/
t.valueInMilliseconds()}else I=I.valueInMilliseconds();else if(t instanceof R.SqlInterval)if(I instanceof Date)switch(C){case "+":return new Date(t.valueInMilliseconds()+I.getTime());case "-":return new Date(I.getTime()-t.valueInMilliseconds());case "*":return I.getTime()*t.valueInMilliseconds();case "/":return I.getTime()/t.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(I instanceof Date&&"number"===typeof t)switch(t*=864E5,I=I.getTime(),C){case "+":return new Date(I+t);case "-":return new Date(I-
t);case "*":return new Date(I*t);case "/":return new Date(I/t)}else if(t instanceof Date&&"number"===typeof I)switch(I*=864E5,t=t.getTime(),C){case "+":return new Date(I+t);case "-":return new Date(I-t);case "*":return new Date(I*t);case "/":return new Date(I/t)}switch(C){case "+":return I+t;case "-":return I-t;case "*":return I*t;case "/":return I/t}}function K(C,I,t,u){C=u.getAttribute(C,I);return null!=C&&1===t[I]?new Date(C):C}const S=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,G=new Set(["current_timestamp","current_date","current_time"]);let z=function(){function C(){}C.makeBool=function(I){return!0===I};C.featureValue=function(I,t,u,Y){return K(I,t,u,Y)};C.equalsNull=function(I){return null===I};C.applyLike=function(I,t,u){return e(I,t,
u)};C.ensureArray=function(I){return h(I)};C.applyIn=function(I,t){return x(I,t)};C.currentDate=function(){const I=new Date;I.setHours(0,0,0,0);return I};C.makeSqlInterval=function(I,t,u){return R.SqlInterval.createFromValueAndQualifer(I,t,u)};C.convertInterval=function(I){return I instanceof R.SqlInterval?I.valueInMilliseconds():I};C.currentTimestamp=function(){return new Date};C.compare=function(I,t,u){return F(I,t,u)};C.calculate=function(I,t,u){return V(I,t,u)};C.makeComparable=function(I){return p(I)};
C.evaluateFunction=function(I,t){return R.evaluateFunction(I,t)};C.lookup=function(I,t){I=t[I];return void 0===I?null:I};C.between=function(I,t){return null==I||null==t[0]||null==t[1]?null:I>=t[0]&&I<=t[1]};C.notbetween=function(I,t){return null==I||null==t[0]||null==t[1]?null:I<t[0]||I>t[1]};C.ternaryNot=function(I){return L(I)};C.ternaryAnd=function(I,t){return J(I,t)};C.ternaryOr=function(I,t){return M(I,t)};return f._createClass(C)}(),w=function(){function C(t,u){this.fieldsIndex=u;this._datefields=
{};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=P.WhereGrammar.parse(t);const {isStandardized:Y,isAggregate:ha,referencedFieldNames:va}=this._extractExpressionInfo(u);this._referencedFieldNames=va;this.isStandardized=Y;this.isAggregate=ha}C.create=function(t,u){return new C(t,u)};var I=C.prototype;I.testSet=function(t,u=T){const Y={};for(const ha of this.fieldNames)Y[ha]=t.map(va=>u.getAttribute(va,ha));return!!this._evaluateNode(this.parseTree,{attributes:Y},T)};I.calculateValue=
function(t,u=T){t=this._evaluateNode(this.parseTree,t,u);return t instanceof R.SqlInterval?t.valueInMilliseconds()/864E5:t};I.calculateValueCompiled=function(t,u=T){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(t,this.parameters,u,this._datefields);if(ia("esri-csp-restrictions"))return this.calculateValue(t,u);this._compileMe();return this.parseTree._compiledVersion(t,this.parameters,u,this._datefields)};I.testFeature=function(t,u=T){return!!this._evaluateNode(this.parseTree,
t,u)};I.testFeatureCompiled=function(t,u=T){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(t,this.parameters,u,this._datefields);if(ia("esri-csp-restrictions"))return this.testFeature(t,u);this._compileMe();return!!this.parseTree._compiledVersion(t,this.parameters,u,this._datefields)};I.getFunctions=function(){const t=new Set;this._visitAll(this.parseTree,u=>{"function"===u.type&&t.add(u.name.toLowerCase())});return Array.from(t)};I.getExpressions=function(){const t=
new Map;this._visitAll(this.parseTree,u=>{if("function"===u.type){const Y=u.name.toLowerCase();u=u.args.value[0];if("column-reference"===u.type){u=u.column;const ha=`${Y}-${u}`;t.has(ha)||t.set(ha,{aggregateType:Y,field:u})}}});return[...t.values()]};I.getVariables=function(){const t=new Set;this._visitAll(this.parseTree,u=>{"parameter"===u.type&&t.add(u.value.toLowerCase())});return Array.from(t)};I._compileMe=function(){const t="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",t)).bind(z)};I._extractExpressionInfo=function(t){const u=[],Y=new Set;let ha=!0,va=!0;this._visitAll(this.parseTree,za=>{switch(za.type){case "column-reference":const Ha=t?.get(za.column);let Ja,Ia;Ha?Ja=Ia=Ha.name??"":(Ia=za.column,Ja=Ia.toLowerCase());Ha&&Ha.name&&("date"===Ha.type||"esriFieldTypeDate"===Ha.type)&&(this._datefields[Ha.name]=1);Y.has(Ja)||(Y.add(Ja),u.push(Ia));za.column=Ia;break;
case "function":const {name:Ka,args:Qa}=za;za=Qa.value.length;ha&&(ha=R.isStandardized(Ka,za));va&&(va=ba.isAggregate(Ka,za))}});return{referencedFieldNames:Array.from(u),isStandardized:ha,isAggregate:va}};I._visitAll=function(t,u){if(null!=t)switch(u(t),t.type){case "when-clause":this._visitAll(t.operand,u);this._visitAll(t.value,u);break;case "case-expression":for(const Y of t.clauses)this._visitAll(Y,u);"simple"===t.format&&this._visitAll(t.operand,u);null!==t.else&&this._visitAll(t.else,u);break;
case "expression-list":for(const Y of t.value)this._visitAll(Y,u);break;case "unary-expression":this._visitAll(t.expr,u);break;case "binary-expression":this._visitAll(t.left,u);this._visitAll(t.right,u);break;case "function":this._visitAll(t.args,u)}};I.evaluateNodeToJavaScript=function(t){switch(t.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(t.value)+", "+JSON.stringify(t.qualifier)+","+JSON.stringify(t.op)+")";case "case-expression":var u="";if("simple"===t.format){var Y=
"this.makeComparable("+this.evaluateNodeToJavaScript(t.operand)+")";u="( ";for(let ha=0;ha<t.clauses.length;ha++)u+=" ("+Y+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(t.clauses[ha].operand)+")) ? ("+this.evaluateNodeToJavaScript(t.clauses[ha].value)+") : "}else for(u="( ",Y=0;Y<t.clauses.length;Y++)u+=" this.makeBool("+this.evaluateNodeToJavaScript(t.clauses[Y].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(t.clauses[Y].value)+") : ";u=null!==t.else?u+this.evaluateNodeToJavaScript(t.else):
u+"null";return u+" )";case "parameter":return"this.lookup("+JSON.stringify(t.value.toLowerCase())+",lookups)";case "expression-list":u="[";for(Y of t.value)"["!==u&&(u+=","),u+=this.evaluateNodeToJavaScript(Y);return u+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(t.expr)+")";case "binary-expression":switch(t.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case "OR":return"this.ternaryOr("+
this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case "IS":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")";case "ISNOT":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+
"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+
","+JSON.stringify(t.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(t.operator)+
","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")"}throw Error("Not Supported Operator "+t.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(t.value);case "date":return"(new Date("+m(t.value).getTime().toString()+"))";case "timestamp":return"(new Date("+k(t.value).getTime().toString()+"))";case "current-time":return"date"===t.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+
JSON.stringify(t.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(t.name)+","+this.evaluateNodeToJavaScript(t.args)+")"}throw Error("Unsupported sql syntax "+t.type);};I._evaluateNode=function(t,u,Y){switch(t.type){case "interval":return u=this._evaluateNode(t.value,u,Y),R.SqlInterval.createFromValueAndQualifer(u,t.qualifier,t.op);case "case-expression":if("simple"===t.format){var ha=p(this._evaluateNode(t.operand,u,Y));for(var va=0;va<t.clauses.length;va++)if(ha===
p(this._evaluateNode(t.clauses[va].operand,u,Y)))return this._evaluateNode(t.clauses[va].value,u,Y)}else for(ha=0;ha<t.clauses.length;ha++)if(!0===this._evaluateNode(t.clauses[ha].operand,u,Y))return this._evaluateNode(t.clauses[ha].value,u,Y);return null!==t.else?this._evaluateNode(t.else,u,Y):null;case "parameter":return this.parameters[t.value.toLowerCase()];case "expression-list":ha=[];for(va of t.value)ha.push(this._evaluateNode(va,u,Y));return ha;case "unary-expression":return L(this._evaluateNode(t.expr,
u,Y));case "binary-expression":switch(t.operator){case "AND":return J(this._evaluateNode(t.left,u,Y),this._evaluateNode(t.right,u,Y));case "OR":return M(this._evaluateNode(t.left,u,Y),this._evaluateNode(t.right,u,Y));case "IS":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(t.left,u,Y);case "ISNOT":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(t.left,u,Y);case "IN":return ha=h(this._evaluateNode(t.right,
u,Y)),x(this._evaluateNode(t.left,u,Y),ha);case "NOT IN":return ha=h(this._evaluateNode(t.right,u,Y)),L(x(this._evaluateNode(t.left,u,Y),ha));case "BETWEEN":return ha=this._evaluateNode(t.left,u,Y),t=this._evaluateNode(t.right,u,Y),null==ha||null==t[0]||null==t[1]?null:ha>=p(t[0])&&ha<=p(t[1]);case "NOTBETWEEN":return ha=this._evaluateNode(t.left,u,Y),t=this._evaluateNode(t.right,u,Y),null==ha||null==t[0]||null==t[1]?null:ha<p(t[0])||ha>p(t[1]);case "LIKE":return e(this._evaluateNode(t.left,u,Y),
this._evaluateNode(t.right,u,Y),t.escape);case "NOT LIKE":return L(e(this._evaluateNode(t.left,u,Y),this._evaluateNode(t.right,u,Y),t.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return F(t.operator,this._evaluateNode(t.left,u,Y),this._evaluateNode(t.right,u,Y));case "-":case "+":case "*":case "/":case "||":return V(t.operator,this._evaluateNode(t.left,u,Y),this._evaluateNode(t.right,u,Y))}case "null":case "boolean":case "string":case "number":return t.value;
case "date":return m(t.value);case "timestamp":return k(t.value);case "current-time":return u=new Date,"date"===t.mode&&u.setHours(0,0,0,0),u;case "column-reference":return K(u,t.column,this._datefields,Y);case "data-type":return t.value;case "function":return u=this._evaluateNode(t.args,u,Y),this.isAggregate?ba.aggregateFunction(t.name,u):R.evaluateFunction(t.name,u)}throw Error("Unsupported sql syntax "+t.type);};f._createClass(C,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,t=>{"current-time"===t.type?this._hasDateFunctions=!0:"function"===t.type&&(this._hasDateFunctions=this._hasDateFunctions||G.has(t.name.toLowerCase()))});return this._hasDateFunctions}}]);return C}();var B;(function(C){C[C.Normal=0]="Normal";C[C.Escaped=1]="Escaped"})(B||(B={}));const T={getAttribute(C,I){return(C&&"object"===typeof C.attributes?
C.attributes:C)[I]}};l.WhereClause=w;l.defaultAttributeAdapter=T;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function f(R){let P=0;for(let Q=0;Q<R.length;Q++)P+=R[Q];return P/R.length}function ia(R){const P=f(R),Q=R.length;let H=0;for(const k of R)H+=(k-P)**2;return 1<Q?H/(Q-1):0}const ba={min:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.min.apply(Math,R[0])},max:{minParams:1,maxParams:1,
evaluate:R=>null==R[0]?null:Math.max.apply(Math,R[0])},avg:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:f(R[0])},sum:{minParams:1,maxParams:1,evaluate:R=>{if(null==R[0])R=null;else{R=R[0];let P=0;for(let Q=0;Q<R.length;Q++)P+=R[Q];R=P}return R}},stddev:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.sqrt(ia(R[0]))},count:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:R[0].length},var:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:ia(R[0])}};l.aggregateFunction=function(R,
P){const Q=ba[R.toLowerCase()];if(null==Q)throw Error("Function Not Recognised");if(P.length<Q.minParams||P.length>Q.maxParams)throw Error(`Invalid Parameter count for call to ${R.toUpperCase()}`);return Q.evaluate(P)};l.isAggregate=function(R,P){R=ba[R.toLowerCase()];return null!=R&&P>=R.minParams&&P<=R.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport",
"../string","../../chunks/datetime"],function(l,f,ia,ba,R){function P(m){m=new Date(m.getTime());m.setHours(0,0,0,0);return m}function Q(m,h){if(m instanceof Date)return h?P(m):m;if("string"===typeof m||m instanceof String)if(m=R.DateTime.fromSQL(m),m.isValid)return h?P(m.toJSDate()):m.toJSDate();throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);}let H=function(){function m(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}m._fixDefaults=function(h){if(null!==
h.precision||null!==h.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};m._parseSecondsComponent=function(h,L){L.includes(".")?(L=L.split("."),h.second=parseFloat(L[0]),h.millis=parseInt(L[1],10)):h.second=parseFloat(L)};m.createFromMilliseconds=function(h){const L=new m;L.second=h/1E3;return L};m.createFromValueAndQualifer=function(h,L,J){let M=null;const x=new m;x.op="-"===J?"-":"+";if("interval-period"===L.type){m._fixDefaults(L);J=RegExp("^[0-9]{1,}$");if("year"===
L.period||"month"===L.period)throw Error("Year-Month Intervals not supported");if("second"===L.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(h))m._parseSecondsComponent(x,h);else throw Error("Illegal Interval");else if(J.test(h))x[L.period]=parseFloat(h);else throw Error("Illegal Interval");}else{m._fixDefaults(L.start);m._fixDefaults(L.end);if("year"===L.start.period||"month"===L.start.period)throw Error("Year-Month Intervals not supported");if("year"===L.end.period||"month"===L.end.period)throw Error("Year-Month Intervals not supported");
switch(L.start.period){case "day":switch(L.end.period){case "hour":M=RegExp("^[0-9]{1,} [0-9]{1,}$");if(M.test(h))x[L.start.period]=parseFloat(h.split(" ")[0]),x[L.end.period]=parseFloat(h.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":M=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(M.test(h))x[L.start.period]=parseFloat(h.split(" ")[0]),h=h.split(" ")[1].split(":"),x.hour=parseFloat(h[0]),x.minute=parseFloat(h[1]);else throw Error("Illegal Interval");break;case "second":M=
RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(M.test(h))x[L.start.period]=parseFloat(h.split(" ")[0]),h=h.split(" ")[1].split(":"),x.hour=parseFloat(h[0]),x.minute=parseFloat(h[1]),m._parseSecondsComponent(x,h[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(L.end.period){case "minute":M=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(M.test(h))x.hour=parseFloat(h.split(":")[0]),x.minute=parseFloat(h.split(":")[1]);
else throw Error("Illegal Interval");break;case "second":M=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(M.test(h))h=h.split(":"),x.hour=parseFloat(h[0]),x.minute=parseFloat(h[1]),m._parseSecondsComponent(x,h[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(L.end.period){case "second":M=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(M.test(h))h=h.split(":"),x.minute=parseFloat(h[0]),m._parseSecondsComponent(x,
h[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return x};m.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return f._createClass(m)}();const k={extract:{minParams:2,maxParams:2,evaluate:([m,h])=>{if(null==h)return null;if(h instanceof Date)switch(m.toUpperCase()){case "SECOND":return h.getSeconds();
case "MINUTE":return h.getMinutes();case "HOUR":return h.getHours();case "DAY":return h.getDate();case "MONTH":return h.getMonth()+1;case "YEAR":return h.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:m=>{if(2===m.length){const [h,L]=m;return null==h||null==L?null:h.toString().substring(L-1)}if(3===m.length){const [h,L,J]=m;return null==h||null==L||null==J?null:0>=J?"":h.toString().substring(L-1,L+J-1)}}},position:{minParams:2,maxParams:2,
evaluate:([m,h])=>null==m||null==h?null:h.indexOf(m)+1},trim:{minParams:2,maxParams:3,evaluate:m=>{var h=3===m.length,L=h?m[1]:" ";h=h?m[2]:m[1];if(null==L||null==h)return null;L=`(${ba.escapeRegExpString(L)})`;switch(m[0]){case "BOTH":return h.replace(new RegExp(`^${L}*|${L}*$`,"g"),"");case "LEADING":return h.replace(new RegExp(`^${L}*`,"g"),"");case "TRAILING":return h.replace(new RegExp(`${L}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:m=>
null==m[0]?null:Math.abs(m[0])},ceiling:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.ceil(m[0])},floor:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.floor(m[0])},log:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])},log10:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.sin(m[0])},cos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cos(m[0])},tan:{minParams:1,
maxParams:1,evaluate:m=>null==m[0]?null:Math.tan(m[0])},asin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.asin(m[0])},acos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.acos(m[0])},atan:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.atan(m[0])},sign:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:0<m[0]?1:0>m[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:m=>null==m[0]||null==m[1]?null:m[0]**m[1]},mod:{minParams:2,maxParams:2,evaluate:m=>null==m[0]||null==
m[1]?null:m[0]%m[1]},round:{minParams:1,maxParams:2,evaluate:m=>{const h=m[0];m=2===m.length?10**m[1]:1;return null==h?null:Math.round(h*m)/m}},truncate:{minParams:1,maxParams:2,evaluate:m=>null==m[0]?null:1===m.length?parseInt(m[0].toFixed(0),10):parseFloat(m[0].toFixed(m[1]))},char_length:{minParams:1,maxParams:1,evaluate:m=>"string"===typeof m[0]||m[0]instanceof String?m[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:m=>{let h="";for(let L=0;L<m.length;L++){if(null==m[L])return null;
h+=m[L].toString()}return h}},lower:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:m=>{for(const h of m)if(null!==h)return h;return null}},cosh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cosh(m[0])},sinh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.sinh(m[0])},tanh:{minParams:1,maxParams:1,evaluate:m=>
null==m[0]?null:Math.tanh(m[0])},nullif:{minParams:2,maxParams:2,evaluate:m=>{const h=m[0];m=m[1];return(h instanceof Date?h.valueOf():h)===(m instanceof Date?m.valueOf():m)?null:h}},cast:{minParams:2,maxParams:2,evaluate:m=>{var h=m[0];m=m[1];if(null===h)return null;switch(m.type){case "integer":h=parseInt(h,10);if(isNaN(h))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return h;case "smallint":h=parseInt(h,10);if(isNaN(h))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);if(32767<
h||-32767>h)throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return h;case "float":case "real":h=parseFloat(h);if(isNaN(h))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return h;case "date":return Q(h,!0);case "timestamp":return Q(h,!1);case "varchar":h=h.toString();if(h.length>m.size)throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return h;default:throw new ia.SqlError(ia.SqlErrorCodes.InvalidDataType);}}}};l.SqlInterval=H;l.evaluateFunction=function(m,h){const L=k[m.toLowerCase()];
if(null==L)throw Error("Function Not Recognised");if(h.length<L.minParams||h.length>L.maxParams)throw Error(`Invalid Parameter count for call to ${m.toUpperCase()}`);return L.evaluate(h)};l.isStandardized=function(m,h){m=k[m.toLowerCase()];return null!=m&&h>=m.minParams&&h<=m.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(l,
f,ia){l.SqlErrorCodes=void 0;(function(H){H.InvalidFunctionParameters="InvalidFunctionParameters";H.UnsupportedSqlFunction="UnsupportedSqlFunction";H.UnsupportedOperator="UnsupportedOperator";H.UnsupportedSyntax="UnsupportedSyntax";H.UnsupportedIsRhs="UnsupportedIsRhs";H.UnsupportedIsLhs="UnsupportedIsLhs";H.InvalidDataType="InvalidDataType";H.CannotCastValue="CannotCastValue";H.MissingStatisticParameters="MissingStatisticParameters"})(l.SqlErrorCodes||(l.SqlErrorCodes={}));const ba={[l.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",
[l.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[l.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[l.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[l.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[l.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[l.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[l.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",
[l.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let R=function(H){function k(h,L){h=m.call(this,ia.doSubstitutions(ba[h],L));h.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(h),k);return h}f._inherits(k,H);var m=f._createSuper(k);return f._createClass(k)}(f._wrapNativeSuper(Error));l.FeatureSetErrorCodes=void 0;(function(H){H.NeverReach="NeverReach";H.NotImplemented="NotImplemented";
H.Cancelled="Cancelled";H.InvalidStatResponse="InvalidStatResponse";H.InvalidRequest="InvalidRequest";H.RequestFailed="RequestFailed";H.MissingFeatures="MissingFeatures";H.AggregationFieldNotFound="AggregationFieldNotFound";H.DataElementsNotFound="DataElementsNotFound"})(l.FeatureSetErrorCodes||(l.FeatureSetErrorCodes={}));const P={[l.FeatureSetErrorCodes.Cancelled]:"Cancelled",[l.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[l.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",
[l.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[l.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[l.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[l.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[l.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[l.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let Q=function(H){function k(h,L){h=m.call(this,ia.doSubstitutions(P[h],L));h.declaredRootClass=
"esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(h),k);return h}f._inherits(k,H);var m=f._createSuper(k);return f._createClass(k)}(f._wrapNativeSuper(Error));l.FeatureSetError=Q;l.FeatureSetErrorMessages=P;l.SqlError=R;l.SqlErrorMessages=ba;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(l,f){function ia(J){return J&&
J.loc?`Line : ${J.loc.start?.line}, ${J.loc.start?.column}: `:""}function ba(J,M){try{if(!M)return J;for(const x in M){let e=M[x];e||(e="");J=J.replace("{"+x+"}",M[x])}}catch(x){}return J}l.ExecutionErrorCodes=void 0;(function(J){J.AsyncNotEnabled="AsyncNotEnabled";J.ModulesNotSupported="ModulesNotSupported";J.CircularModules="CircularModules";J.NeverReach="NeverReach";J.UnsupportedHashType="UnsupportedHashType";J.InvalidParameter="InvalidParameter";J.UnexpectedToken="UnexpectedToken";J.Unrecognised=
"Unrecognised";J.UnrecognisedType="UnrecognisedType";J.MaximumCallDepth="MaximumCallDepth";J.BooleanConditionRequired="BooleanConditionRequired";J.TypeNotAllowedInFeature="TypeNotAllowedInFeature";J.KeyMustBeString="KeyMustBeString";J.WrongNumberOfParameters="WrongNumberOfParameters";J.CallNonFunction="CallNonFunction";J.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";J.NoFunctionInDictionary="NoFunctionInDictionary";J.NoFunctionInArray="NoFunctionInArray";J.AssignModuleFunction="AssignModuleFunction";
J.LogicExpressionOrAnd="LogicExpressionOrAnd";J.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";J.FuncionNotFound="FunctionNotFound";J.InvalidMemberAccessKey="InvalidMemberAccessKey";J.UnsupportedUnaryOperator="UnsupportUnaryOperator";J.InvalidIdentifier="InvalidIdentifier";J.MemberOfNull="MemberOfNull";J.UnsupportedOperator="UnsupportedOperator";J.Cancelled="Cancelled";J.ModuleAccessorMustBeString="ModuleAccessorMustBeString";J.ModuleExportNotFound="ModuleExportNotFound";J.Immutable=
"Immutable";J.OutOfBounds="OutOfBounds";J.IllegalResult="IllegalResult";J.FieldNotFound="FieldNotFound";J.PortalRequired="PortalRequired";J.LogicError="LogicError";J.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";J.KeyAccessorMustBeString="KeyAccessorMustBeString";J.WrongSpatialReference="WrongSpatialReference"})(l.ExecutionErrorCodes||(l.ExecutionErrorCodes={}));const R={[l.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[l.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",
[l.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[l.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[l.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[l.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[l.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[l.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[l.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[l.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[l.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[l.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[l.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[l.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[l.ExecutionErrorCodes.PortalRequired]:"Portal is required",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[l.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[l.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[l.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[l.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[l.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[l.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[l.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[l.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[l.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[l.ExecutionErrorCodes.Immutable]:"Object is immutable",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[l.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[l.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[l.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[l.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[l.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[l.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[l.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[l.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[l.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[l.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[l.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[l.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[l.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let P=function(J){function M(...e){return x.call(this,...e)}f._inherits(M,J);var x=f._createSuper(M);return f._createClass(M)}(f._wrapNativeSuper(Error)),Q=function(J){function M(e,
p){e=x.call(this,ia(p)+e.message,{cause:e});e.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),M);p&&p.loc&&(e.loc=p.loc);return e}f._inherits(M,J);var x=f._createSuper(M);return f._createClass(M)}(P),H=function(J){function M(e,p,F,V){e=x.call(this,"Execution error - "+ia(F)+ba(R[p],V));e.loc=null;e.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),M);F&&F.loc&&(e.loc=F.loc);return e}
f._inherits(M,J);var x=f._createSuper(M);return f._createClass(M)}(f._wrapNativeSuper(Error)),k=function(J){function M(e,p,F,V){e=x.call(this,"Compilation error - "+ia(F)+ba(R[p],V));e.loc=null;e.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),M);F&&F.loc&&(e.loc=F.loc);return e}f._inherits(M,J);var x=f._createSuper(M);return f._createClass(M)}(f._wrapNativeSuper(Error)),m=function(J){function M(){var e=x.call(this,
"Uncompilable code structures");e.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),M);return e}f._inherits(M,J);var x=f._createSuper(M);return f._createClass(M)}(f._wrapNativeSuper(Error));l.ModuleErrorCodes=void 0;(function(J){J.UnrecognisedUri="UnrecognisedUri";J.UnsupportedUriProtocol="UnsupportedUriProtocol"})(l.ModuleErrorCodes||(l.ModuleErrorCodes={}));const h={[l.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[l.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let L=function(J){function M(e,p){e=x.call(this,ba(h[e],p));e.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(e),M);return e}f._inherits(M,J);var x=f._createSuper(M);return f._createClass(M)}(f._wrapNativeSuper(Error));l.ArcadeCompilationError=k;l.ArcadeExecutionError=H;l.ArcadeUncompilableError=m;l.ErrorWithCause=P;l.ExecutionErrorMessages=R;l.LocatableArcadeExecutionError=
Q;l.ModuleError=L;l.ModuleErrorMessages=h;l.doSubstitutions=ba;l.ensureArcadeExecutionError=function(J,M,x){return"esri.arcade.arcadeexecutionerror"===x.declaredRootClass||"esri.arcade.arcadecompilationerror"===x.declaredRootClass?null===x.loc&&M&&M.loc?new Q(x,{cause:x}):x:M&&M.loc?new Q(x,{cause:x}):x};l.parsingValidationMessage=function(J,M,x){return"Parsing error - "+ia(J)+ba(R[M],x)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],
function(l){function f(a,g={}){const N=JSON.stringify([a,g]);let ca=hd[N];ca||(ca=new Intl.ListFormat(a,g),hd[N]=ca);return ca}function ia(a,g={}){const N=JSON.stringify([a,g]);let ca=Hc[N];ca||(ca=new Intl.DateTimeFormat(a,g),Hc[N]=ca);return ca}function ba(a,g={}){const N=JSON.stringify([a,g]);let ca=Ic[N];ca||(ca=new Intl.NumberFormat(a,g),Ic[N]=ca);return ca}function R(a,g={}){const {base:N,...ca}=g,ja=JSON.stringify([a,ca]);let qa=Jc[ja];qa||(qa=new Intl.RelativeTimeFormat(a,g),Jc[ja]=qa);return qa}
function P(a){const g=[];for(let N=1;12>=N;N++){const ca=bb.utc(2016,N,1);g.push(a(ca))}return g}function Q(a){const g=[];for(let N=1;7>=N;N++){const ca=bb.utc(2016,11,13+N);g.push(a(ca))}return g}function H(a,g,N,ca,ja){a=a.listingMode(N);return"error"===a?null:"en"===a?ca(g):ja(g)}function k(a,g){if(m(a)||null===a)return g;if(a instanceof jc)return a;if("string"===typeof a){const N=a.toLowerCase();return"default"===N?g:"local"===N||"system"===N?nc.instance:"utc"===N||"gmt"===N?Fb.utcInstance:Fb.parseSpecifier(N)||
Ub.create(a)}return h(a)?Fb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new me(a)}function m(a){return"undefined"===typeof a}function h(a){return"number"===typeof a}function L(a){return"number"===typeof a&&0===a%1}function J(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function M(a,g,N){if(0!==a.length)return a.reduce((ca,ja)=>{ja=[g(ja),ja];return ca?N(ca[0],ja[0])===ca[0]?ca:ja:ja},null)[1]}function x(a,g){return g.reduce((N,ca)=>
{N[ca]=a[ca];return N},{})}function e(a,g){return Object.prototype.hasOwnProperty.call(a,g)}function p(a,g,N){return L(a)&&a>=g&&a<=N}function F(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function V(a){if(!m(a)&&null!==a&&""!==a)return parseInt(a,10)}function K(a){if(!m(a)&&null!==a&&""!==a)return parseFloat(a)}function S(a){if(!m(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function D(a,g,N=!1){g=10**g;return(N?Math.trunc:Math.round)(a*g)/g}function r(a){return 0===
a%4&&(0!==a%100||0===a%400)}function E(a,g){var N=g-1;N=N-12*Math.floor(N/12)+1;return 2===N?r(a+(g-N)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][N-1]}function v(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function G(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:
52}function z(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function w(a,g,N,ca=null){a=new Date(a);const ja={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ca&&(ja.timeZone=ca);return(g=(new Intl.DateTimeFormat(N,{timeZoneName:g,...ja})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?g.value:null}function B(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function T(a){const g=
Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Da(`Invalid unit value ${a}`);return g}function C(a,g){const N={};for(const ca in a)if(e(a,ca)){const ja=a[ca];void 0!==ja&&null!==ja&&(N[g(ca)]=T(ja))}return N}function I(a,g){const N=Math.trunc(Math.abs(a/60)),ca=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${F(N,2)}:${F(ca,2)}`;case "narrow":return`${a}${N}${0<ca?`:${ca}`:""}`;case "techie":return`${a}${F(N,2)}${F(ca,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);
}}function t(a){return x(a,["hour","minute","second","millisecond"])}function u(a){switch(a){case "narrow":return[...ne];case "short":return[...Kc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Y(a){switch(a){case "narrow":return[...pe];case "short":return[...id];case "long":return[...Lc];case "numeric":return"1234567".split("");default:return null}}function ha(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function va(a,g,N="always",ca=!1){const ja={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===N&&qa)switch(N="days"===a,g){case 1:return N?"tomorrow":`next ${ja[a][0]}`;case -1:return N?"yesterday":`last ${ja[a][0]}`;case 0:return N?
"today":`this ${ja[a][0]}`}N=Object.is(g,-0)||0>g;g=Math.abs(g);qa=1===g;const Aa=ja[a];a=ca?qa?Aa[1]:Aa[2]||Aa[1]:qa?ja[a][0]:a;return N?`${g} ${a} ago`:`in ${g} ${a}`}function za(a,g){let N="";for(const ca of a)N=ca.literal?N+ca.val:N+g(ca.val);return N}function Ha(...a){a=a.reduce((g,N)=>g+N.source,"");return RegExp(`^${a}$`)}function Ja(...a){return g=>a.reduce(([N,ca,ja],qa)=>{const [Aa,La,Ra]=qa(g,ja);return[{...N,...Aa},La||ca,Ra]},[{},null,1]).slice(0,2)}function Ia(a,...g){if(null==a)return[null,
null];for(const [N,ca]of g)if(g=N.exec(a))return ca(g);return[null,null]}function Ka(...a){return(g,N)=>{const ca={};let ja;for(ja=0;ja<a.length;ja++)ca[a[ja]]=V(g[N+ja]);return[ca,null,N+ja]}}function Qa(a,g,N){a=a[g];return m(a)?N:V(a)}function Wa(a,g){return[{hours:Qa(a,g,0),minutes:Qa(a,g+1,0),seconds:Qa(a,g+2,0),milliseconds:S(a[g+3])},null,g+4]}function Va(a,g){const N=!a[g]&&!a[g+1];a=B(a[g+1],a[g+2]);return[{},N?null:Fb.instance(a),g+3]}function gb(a,g){return[{},a[g]?Ub.create(a[g]):null,
g+1]}function na(a){const [g,N,ca,ja,qa,Aa,La,Ra,cb]=a,d="-"===g[0];a=Ra&&"-"===Ra[0];const db=($a,zb=!1)=>void 0!==$a&&(zb||$a&&d)?-$a:$a;return[{years:db(K(N)),months:db(K(ca)),weeks:db(K(ja)),days:db(K(qa)),hours:db(K(Aa)),minutes:db(K(La)),seconds:db(K(Ra),"-0"===Ra),milliseconds:db(S(cb),a)}]}function ra(a,g,N,ca,ja,qa,Aa){g={year:2===g.length?z(V(g)):V(g),month:Kc.indexOf(N)+1,day:V(ca),hour:V(ja),minute:V(qa)};Aa&&(g.second=V(Aa));a&&(g.weekday=3<a.length?Lc.indexOf(a)+1:id.indexOf(a)+1);return g}
function Ba(a){const [,g,N,ca,ja,qa,Aa,La,Ra,cb,d,db]=a;a=ra(g,ja,ca,N,qa,Aa,La);let $a;$a=Ra?te[Ra]:cb?0:B(d,db);return[a,new Fb($a)]}function c(a){const [,g,N,ca,ja,qa,Aa,La]=a;return[ra(g,ja,ca,N,qa,Aa,La),Fb.utcInstance]}function n(a){const [,g,N,ca,ja,qa,Aa,La]=a;return[ra(g,La,N,ca,ja,qa,Aa),Fb.utcInstance]}function da(a,g,N=!1){a={values:N?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};
return new jb(a)}function ka(a,g,N,ca,ja){a=a[ja][N];var qa=g[N]/a;qa=Math.sign(qa)!==Math.sign(ca[ja])&&0!==ca[ja]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);ca[ja]+=qa;g[N]-=qa*a}function sa(a,g){ue.reduce((N,ca)=>{if(m(g[ca]))return N;N&&ka(a,g,N,g,ca);return ca},null)}function y(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(jb.fromMillis(a).as("days"))}function O(a,g,N){const ca=[["years",
(Ra,cb)=>cb.year-Ra.year],["quarters",(Ra,cb)=>cb.quarter-Ra.quarter+4*(cb.year-Ra.year)],["months",(Ra,cb)=>cb.month-Ra.month+12*(cb.year-Ra.year)],["weeks",(Ra,cb)=>{Ra=y(Ra,cb);return(Ra-Ra%7)/7}],["days",y]],ja={},qa=a;let Aa,La;for(const [Ra,cb]of ca)0<=N.indexOf(Ra)&&(Aa=Ra,ja[Ra]=cb(a,g),La=qa.plus(ja),La>g?(ja[Ra]--,a=qa.plus(ja)):a=La);return[a,ja,La,Aa]}function aa(a,g,N,ca){let [ja,qa,Aa,La]=O(a,g,N);a=g-ja;N=N.filter(Ra=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ra));0===
N.length&&(Aa<g&&(Aa=ja.plus({[La]:1})),Aa!==ja&&(qa[La]=(qa[La]||0)+a/(Aa-ja)));g=jb.fromObject(qa,ca);return 0<N.length?jb.fromMillis(a,ca).shiftTo(...N).plus(g):g}function X({numberingSystem:a},g=""){return new RegExp(`${Mc[a||"latn"]}${g}`)}function fa(a,g=N=>N){return{regex:a,deser:([N])=>{{let ca=parseInt(N,10);if(isNaN(ca)){ca="";for(let ja=0;ja<N.length;ja++){const qa=N.charCodeAt(ja);if(-1!==N[ja].search(Mc.hanidec))ca+=ve.indexOf(N[ja]);else for(const Aa in jd){const [La,Ra]=jd[Aa];qa>=
La&&qa<=Ra&&(ca+=qa-La)}}N=parseInt(ca,10)}else N=ca}return g(N)}}}function ma(a){return a.replace(/\./g,"\\.?").replace(Nc,kd)}function oa(a,g){return null===a?null:{regex:RegExp(a.map(ma).join("|")),deser:([N])=>a.findIndex(ca=>N.replace(/\./g,"").replace(Nc," ").toLowerCase()===ca.replace(/\./g,"").replace(Nc," ").toLowerCase())+g}}function wa(a,g){return{regex:a,deser:([,N,ca])=>B(N,ca),groups:g}}function ua(a){return{regex:a,deser:([g])=>g}}function Ea(a,g){const N=X(g),ca=X(g,"{2}"),ja=X(g,
"{3}"),qa=X(g,"{4}"),Aa=X(g,"{6}"),La=X(g,"{1,2}"),Ra=X(g,"{1,3}"),cb=X(g,"{1,6}"),d=X(g,"{1,9}"),db=X(g,"{2,4}"),$a=X(g,"{4,6}"),zb=Vb=>({regex:RegExp(Vb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([q])=>q,literal:!0}),ta=(Vb=>{if(a.literal)return zb(Vb);switch(Vb.val){case "G":return oa(g.eras("short",!1),0);case "GG":return oa(g.eras("long",!1),0);case "y":return fa(cb);case "yy":return fa(db,z);case "yyyy":return fa(qa);case "yyyyy":return fa($a);case "yyyyyy":return fa(Aa);case "M":return fa(La);
case "MM":return fa(ca);case "MMM":return oa(g.months("short",!0,!1),1);case "MMMM":return oa(g.months("long",!0,!1),1);case "L":return fa(La);case "LL":return fa(ca);case "LLL":return oa(g.months("short",!1,!1),1);case "LLLL":return oa(g.months("long",!1,!1),1);case "d":return fa(La);case "dd":return fa(ca);case "o":return fa(Ra);case "ooo":return fa(ja);case "HH":return fa(ca);case "H":return fa(La);case "hh":return fa(ca);case "h":return fa(La);case "mm":return fa(ca);case "m":return fa(La);case "q":return fa(La);
case "qq":return fa(ca);case "s":return fa(La);case "ss":return fa(ca);case "S":return fa(Ra);case "SSS":return fa(ja);case "u":return ua(d);case "uu":return ua(La);case "uuu":return fa(N);case "a":return oa(g.meridiems(),0);case "kkkk":return fa(qa);case "kk":return fa(db,z);case "W":return fa(La);case "WW":return fa(ca);case "E":case "c":return fa(N);case "EEE":return oa(g.weekdays("short",!1,!1),1);case "EEEE":return oa(g.weekdays("long",!1,!1),1);case "ccc":return oa(g.weekdays("short",!0,!1),
1);case "cccc":return oa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return wa(new RegExp(`([+-]${La.source})(?::(${ca.source}))?`),2);case "ZZZ":return wa(new RegExp(`([+-]${La.source})(${ca.source})?`),2);case "z":return ua(/[a-z_+-/]{1,256}?/i);case " ":return ua(/[^\S\n\r]/);default:return zb(Vb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ta.token=a;return ta}function Ca(a){return[`^${a.map(g=>g.regex).reduce((g,N)=>`${g}(${N.source})`,"")}$`,a]}function Fa(a,
g,N){if(a=a.match(g)){g={};let ca=1;for(const ja in N)if(e(N,ja)){const qa=N[ja],Aa=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(g[qa.token.val[0]]=qa.deser(a.slice(ca,ca+Aa)));ca+=Aa}return[a,g]}return[a,{}]}function Sa(a){const g=ja=>{switch(ja){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let N=null,ca;m(a.z)||(N=Ub.create(a.z));m(a.Z)||(N||(N=new Fb(a.Z)),ca=a.Z);m(a.q)||(a.M=3*(a.q-1)+1);m(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);m(a.u)||(a.S=S(a.u));return[Object.keys(a).reduce((ja,qa)=>{const Aa=g(qa);Aa&&(ja[Aa]=a[qa]);return ja},{}),N,ca]}function Oa(a,g){return Array.prototype.concat(...a.map(N=>{if(!N.literal){var ca=Ab.macroTokenToFormatOpts(N.val);ca=Ta(ca,
g);N=null==ca||ca.includes(void 0)?N:ca}return N}))}function Ua(a,g,N){N=Oa(Ab.parseFormat(N),a);var ca=N.map($a=>Ea($a,a));const ja=ca.find($a=>$a.invalidReason);if(ja)return{input:g,tokens:N,invalidReason:ja.invalidReason};const [qa,Aa]=Ca(ca);ca=RegExp(qa,"i");const [La,Ra]=Fa(g,ca,Aa),[cb,d,db]=Ra?Sa(Ra):[null,null,void 0];if(e(Ra,"a")&&e(Ra,"H"))throw new W("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:N,regex:ca,rawMatches:La,matches:Ra,result:cb,zone:d,specificOffset:db}}
function Ta(a,g){if(!a)return null;g=Ab.create(g,a);var N=g.formatDateTimeParts;Oc||(Oc=bb.fromMillis(1555555555555));return N.call(g,Oc).map(ca=>{{const {type:qa,value:Aa}=ca;if("literal"===qa)ca=/^\s+$/.test(Aa),ca={literal:!ca,val:ca?" ":Aa};else{ca=a[qa];var ja=we[qa];"object"===typeof ja&&(ja=ja[ca]);ca=ja?{literal:!1,val:ja}:void 0}}return ca})}function Ma(a,g){return new Qb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Xa(a,g,N){g=new Date(Date.UTC(a,
g-1,N));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function ab(a,g){a=r(a)?Pc:Qc;const N=a.findIndex(ca=>ca<g);return{month:N+1,day:g-a[N]}}function xa(a){const {year:g,month:N,day:ca}=a;var ja=ca+(r(g)?Pc:Qc)[N-1];const qa=Xa(g,N,ca);ja=Math.floor((ja-qa+10)/7);let Aa;1>ja?(Aa=g-1,ja=G(Aa)):ja>G(g)?(Aa=g+1,ja=1):Aa=g;return{weekYear:Aa,weekNumber:ja,weekday:qa,...t(a)}}function wb(a){const {weekYear:g,weekNumber:N,weekday:ca}=a;var ja=Xa(g,1,4),qa=r(g)?
366:365;ja=7*N+ca-ja-3;1>ja?(qa=g-1,ja+=r(qa)?366:365):ja>qa?(qa=g+1,ja-=r(g)?366:365):qa=g;const {month:Aa,day:La}=ab(qa,ja);return{year:qa,month:Aa,day:La,...t(a)}}function sb(a){const {year:g,month:N,day:ca}=a;var ja=ca+(r(g)?Pc:Qc)[N-1];return{year:g,ordinal:ja,...t(a)}}function ib(a){const {year:g,ordinal:N}=a,{month:ca,day:ja}=ab(g,N);return{year:g,month:ca,day:ja,...t(a)}}function b(a){const g=L(a.year),N=p(a.month,1,12),ca=p(a.day,1,E(a.year,a.month));return g?N?ca?!1:Ma("day",a.day):Ma("month",
a.month):Ma("year",a.year)}function hb(a){const {hour:g,minute:N,second:ca,millisecond:ja}=a;a=p(g,0,23)||24===g&&0===N&&0===ca&&0===ja;const qa=p(N,0,59),Aa=p(ca,0,59),La=p(ja,0,999);return a?qa?Aa?La?!1:Ma("millisecond",ja):Ma("second",ca):Ma("minute",N):Ma("hour",g)}function Ib(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Rb(a){null===a.weekData&&(a.weekData=xa(a.c));return a.weekData}function nb(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new bb({...a,...g,old:a})}function la(a,g,N){let ca=a-6E4*g;const ja=N.offset(ca);if(g===ja)return[ca,g];ca-=6E4*(ja-g);g=N.offset(ca);return ja===g?[ca,ja]:[a-6E4*Math.min(ja,g),Math.max(ja,g)]}function hc(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Tb(a,g,N){return la(v(a),g,N)}function Db(a,g){const N=a.o;var ca=a.c.year+
Math.trunc(g.years);const ja=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);ca={...a.c,year:ca,month:ja,day:Math.min(a.c.day,E(ca,ja))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=jb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");ca=v(ca);let [qa,Aa]=
la(ca,N,a.zone);0!==g&&(qa+=g,Aa=a.zone.offset(qa));return{ts:qa,o:Aa}}function Jb(a,g,N,ca,ja,qa){const {setZone:Aa,zone:La}=N;return a&&0!==Object.keys(a).length||g?(a=bb.fromObject(a,{...N,zone:g||La,specificOffset:qa}),Aa?a:a.setZone(La)):bb.invalid(new Qb("unparsable",`the input "${ja}" can't be parsed as ${ca}`))}function ac(a,g,N=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:N,forceSimple:!0}).formatDateTimeFromString(a,g):null}function Yb(a,g){const N=9999<a.c.year||0>a.c.year;
let ca="";N&&0<=a.c.year&&(ca+="+");ca+=F(a.c.year,N?6:4);g?(ca=ca+"-"+F(a.c.month),ca=ca+"-"+F(a.c.day)):(ca+=F(a.c.month),ca+=F(a.c.day));return ca}function ic(a,g,N,ca,ja,qa){let Aa=F(a.c.hour);g?(Aa=Aa+":"+F(a.c.minute),0===a.c.second&&N||(Aa+=":")):Aa+=F(a.c.minute);0===a.c.second&&N||(Aa+=F(a.c.second),0===a.c.millisecond&&ca||(Aa=Aa+"."+F(a.c.millisecond,3)));ja&&(a.isOffsetFixed&&0===a.offset&&!qa?Aa+="Z":0>a.o?(Aa=Aa+"-"+F(Math.trunc(-a.o/60)),Aa=Aa+":"+F(Math.trunc(-a.o%60))):(Aa=Aa+"+"+
F(Math.trunc(a.o/60)),Aa=Aa+":"+F(Math.trunc(a.o%60))));qa&&(Aa+="["+a.zone.ianaName+"]");return Aa}function Eb(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new pa(a);return g}function Sb(a,g){const N=k(g.zone,yb.defaultZone);g=rb.fromObject(g);const ca=yb.now();var ja;if(m(a.year))a=ca;else{for(const qa of ld)m(a[qa])&&(a[qa]=md[qa]);if(ja=b(a)||hb(a))return bb.invalid(ja);ja=N.offset(ca);[a,ja]=Tb(a,ja,N)}return new bb({ts:a,zone:N,loc:g,o:ja})}function kb(a,g,N){const ca=m(N.round)?!0:N.round,ja=(Aa,La)=>{Aa=D(Aa,ca||N.calendary?0:2,!0);return g.loc.clone(N).relFormatter(N).format(Aa,
La)},qa=Aa=>N.calendary?g.hasSame(a,Aa)?0:g.startOf(Aa).diff(a.startOf(Aa),Aa).get(Aa):g.diff(a,Aa).get(Aa);if(N.unit)return ja(qa(N.unit),N.unit);for(const Aa of N.units){const La=qa(Aa);if(1<=Math.abs(La))return ja(La,Aa)}return ja(a>g?-0:0,N.units[N.units.length-1])}function Gb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Hb(a){if(bb.isDateTime(a))return a;if(a&&a.valueOf&&h(a.valueOf()))return bb.fromJSDate(a);
if(a&&"object"===typeof a)return bb.fromObject(a);throw new Da(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Za extends Error{}class bc extends Za{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class U extends Za{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class ea extends Za{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class W extends Za{}class pa extends Za{constructor(a){super(`Invalid unit ${a}`)}}class Da extends Za{}class Ga extends Za{constructor(){super("Zone is an abstract class")}}
const Pa={year:"numeric",month:"numeric",day:"numeric"},Ya={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},lb={year:"numeric",month:"long",day:"numeric",weekday:"long"},xb={hour:"numeric",minute:"numeric"},Kb={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class jc{get type(){throw new Ga;}get name(){throw new Ga;}get ianaName(){return this.name}get isUniversal(){throw new Ga;}offsetName(a,g){throw new Ga;}formatOffset(a,g){throw new Ga;}offset(a){throw new Ga;}equals(a){throw new Ga;}get isValid(){throw new Ga;}}let Rc=null;class nc extends jc{static get instance(){null===
Rc&&(Rc=new nc);return Rc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:g,locale:N}){return w(a,g,N)}formatOffset(a,g){return I(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Ub extends jc{static create(a){pc[a]||(pc[a]=new Ub(a));return pc[a]}static resetCache(){pc=
{};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Ub.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:N}){return w(a,g,N,this.name)}formatOffset(a,g){return I(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;
oc[g]||(oc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));g=oc[g];if(g.formatToParts){g=g.formatToParts(a);var N=[];for(let d=0;d<g.length;d++){const {type:db,value:$a}=g[d],zb=ye[db];"era"===db?N[zb]=$a:m(zb)||(N[zb]=parseInt($a,10))}g=N}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,db,$a,zb,ta,Vb,q]=g;g=[$a,d,db,zb,
ta,Vb,q]}let [ca,ja,qa,Aa,La,Ra,cb]=g;"BC"===Aa&&(ca=-Math.abs(ca)+1);g=v({year:ca,month:ja,day:qa,hour:24===La?0:La,minute:Ra,second:cb,millisecond:0});a=+a;N=a%1E3;return(g-(a-(0<=N?N:1E3+N)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let hd={},Hc={},Ic={},Jc={},qc=null;class ze{constructor(a,g,N){this.padTo=N.padTo||0;this.floor=N.floor||!1;const {padTo:ca,floor:ja,...qa}=N;if(!g||0<Object.keys(qa).length)g={useGrouping:!1,...N},0<N.padTo&&(g.minimumIntegerDigits=
N.padTo),this.inf=ba(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):D(a,3);return F(a,this.padTo)}}class Ae{constructor(a,g,N){this.opts=N;N=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(N=a.offset/60*-1,N=0<=N?`Etc/GMT+${N}`:`Etc/GMT${N}`,0!==a.offset&&Ub.create(N).valid?this.dt=a:(N="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,N=a.zone.name):(N="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||N;this.dtf=ia(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const N=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...g,value:N}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,g,N){this.opts={style:"long",...N};!g&&J()&&(this.rtf=R(a,N))}format(a,g){return this.rtf?this.rtf.format(a,g):va(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,N,ca=!1){a=
a||yb.defaultLocale;var ja;(ja=a)||(ca?ca="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),ca=qc),ja=ca);return new rb(ja,g||yb.defaultNumberingSystem,N||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:N}={}){return rb.create(a,g,N)}constructor(a,g,N,ca){var ja=a.indexOf("-x-");-1!==ja&&(a=a.substring(0,ja));ja=a.indexOf("-u-");if(-1===ja)var qa=[a];else{try{qa=ia(a).resolvedOptions();var Aa=
a}catch($a){Aa=a.substring(0,ja),qa=ia(Aa).resolvedOptions()}const {numberingSystem:d,calendar:db}=qa;qa=[Aa,d,db]}const [La,Ra,cb]=qa;this.locale=La;this.numberingSystem=g||Ra||null;this.outputCalendar=N||cb||null;g=this.locale;N=this.numberingSystem;if((qa=this.outputCalendar)||N)g.includes("-u-")||(g+="-u"),qa&&(g+=`-ca-${qa}`),N&&(g+=`-nu-${N}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
ca;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,N=!0){return H(this,a,N,u,()=>{const ca=g?{month:a,day:"numeric"}:{month:a},ja=g?"format":"standalone";this.monthsCache[ja][a]||(this.monthsCache[ja][a]=
P(qa=>this.extract(qa,ca,"month")));return this.monthsCache[ja][a]})}weekdays(a,g=!1,N=!0){return H(this,a,N,Y,()=>{const ca=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ja=g?"format":"standalone";this.weekdaysCache[ja][a]||(this.weekdaysCache[ja][a]=Q(qa=>this.extract(qa,ca,"weekday")));return this.weekdaysCache[ja][a]})}meridiems(a=!0){return H(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[bb.utc(2016,11,13,
9),bb.utc(2016,11,13,19)].map(N=>this.extract(N,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return H(this,a,g,ha,()=>{const N={era:a};this.eraCache[a]||(this.eraCache[a]=[bb.utc(-40,1,1),bb.utc(2017,1,1)].map(ca=>this.extract(ca,N,"era")));return this.eraCache[a]})}extract(a,g,N){return(a=this.dtFormatter(a,g).formatToParts().find(ca=>ca.type.toLowerCase()===N))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,
this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Sc=null;class Fb extends jc{static get utcInstance(){null===Sc&&(Sc=new Fb(0));return Sc}static instance(a){return 0===
a?Fb.utcInstance:new Fb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Fb(B(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${I(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${I(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return I(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends jc{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Tc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Uc=null,Fd=60,Gd;class yb{static get now(){return Tc}static set now(a){Tc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return k(Cd,
nc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Uc}static set defaultOutputCalendar(a){Uc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Ub.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Kc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Lc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),id="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Vc={D:Pa,DD:Ya,DDD:mb,DDDD:lb,t:xb,tt:Kb,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=
null,N="",ca=!1;const ja=[];for(let qa=0;qa<a.length;qa++){const Aa=a.charAt(qa);"'"===Aa?(0<N.length&&ja.push({literal:ca||/^\s+$/.test(N),val:N}),g=null,N="",ca=!ca):ca?N+=Aa:Aa===g?N+=Aa:(0<N.length&&ja.push({literal:/^\s+$/.test(N),val:N}),g=N=Aa)}0<N.length&&ja.push({literal:ca||/^\s+$/.test(N),val:N});return ja}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return F(a,
g);const N={...this.opts};0<g&&(N.padTo=g);return this.loc.numberFormatter(N).format(a)}formatDateTimeFromString(a,g){const N="en"===this.loc.listingMode(),ca=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ja=(d,db)=>this.loc.extract(a,d,db),qa=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",Aa=(d,db)=>N?u(d)[a.month-1]:ja(db?{month:d}:{month:d,day:"numeric"},"month"),La=(d,db)=>N?Y(d)[a.weekday-1]:ja(db?{weekday:d}:{weekday:d,month:"long",
day:"numeric"},"weekday"),Ra=d=>{const db=Ab.macroTokenToFormatOpts(d);return db?this.formatWithSystemDefault(a,db):d},cb=d=>N?ha(d)[0>a.year?0:1]:ja({era:d},"era");return za(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return N?Bd[12>a.hour?0:1]:ja({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ca?ja({day:"numeric"},"day"):this.num(a.day);case "dd":return ca?ja({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return La("short",!0);case "cccc":return La("long",!0);case "ccccc":return La("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return La("short",!1);case "EEEE":return La("long",
!1);case "EEEEE":return La("narrow",!1);case "L":return ca?ja({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ca?ja({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Aa("short",!0);case "LLLL":return Aa("long",!0);case "LLLLL":return Aa("narrow",!0);case "M":return ca?ja({month:"numeric"},"month"):this.num(a.month);case "MM":return ca?ja({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Aa("short",!1);case "MMMM":return Aa("long",
!1);case "MMMMM":return Aa("narrow",!1);case "y":return ca?ja({year:"numeric"},"year"):this.num(a.year);case "yy":return ca?ja({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ca?ja({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ca?ja({year:"numeric"},"year"):this.num(a.year,6);case "G":return cb("short");case "GG":return cb("long");case "GGGGG":return cb("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ra(d)}})}formatDurationFromString(a,g){const N=ja=>{switch(ja[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};g=Ab.parseFormat(g);const ca=g.reduce((ja,{literal:qa,val:Aa})=>qa?ja:ja.concat(Aa),[]);a=a.shiftTo(...ca.map(N).filter(ja=>ja));return za(g,(ja=>qa=>{const Aa=N(qa);return Aa?this.num(ja.get(Aa),qa.length):qa})(a))}}class Qb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Wc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Wc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Xc=RegExp(`(?:T${Jd.source})?`),Ce=Ka("weekYear","weekNumber","weekDay"),Kd=Ka("year","ordinal"),Ld=RegExp(`${Wc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Wc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ha(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Xc),Je=Ha(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Xc),Ke=Ha(/(\d{4})-?(\d{3})/,Xc),Le=Ha(Jd),Od=Ja(function(a,g){return[{year:Qa(a,g),month:Qa(a,g+1,1),day:Qa(a,g+2,1)},null,g+3]},Wa,Va,gb),Me=Ja(Ce,Wa,Va,gb),Ne=Ja(Kd,Wa,Va,gb),Oe=Ja(Wa,Va,gb),Pe=Ja(Wa),Qe=Ha(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ha(Ld),Se=Ja(Wa,Va,gb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=cc.slice(0).reverse();
class jb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let N=g?Ue:Te;a.matrix&&(N=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=N;this.isLuxonDuration=!0}static fromMillis(a,g){return jb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Da(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new jb({values:C(a,
jb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(h(a))return jb.fromMillis(a);if(jb.isDuration(a))return a;if("object"===typeof a)return jb.fromObject(a);throw new Da(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [N]=Ia(a,[De,na]);return N?jb.fromObject(N,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [N]=Ia(a,[Nd,Pe]);return N?
jb.fromObject(N,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Da("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new ea(a);return new jb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new pa(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=cc.map(N=>{const ca=this.values[N];return m(ca)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:N.slice(0,-1)}).format(ca)}).filter(N=>N);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=D(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let N="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(N+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(N+=".SSS"));g=g.toFormat(N);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);const g=
{};for(const N of cc)if(e(a.values,N)||e(this.values,N))g[N]=a.get(N)+this.get(N);return da(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const N of Object.keys(this.values))g[N]=T(a(this.values[N],N));return da(this,{values:g},!0)}get(a){return this[jb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...C(a,jb.normalizeUnit)};return da(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:N,matrix:ca}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:ca,conversionAccuracy:N};return da(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();sa(this.matrix,a);return da(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [N,ca]of Object.entries(a))0!==ca&&(g[N]=ca);return da(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>jb.normalizeUnit(qa));const g={},N={},ca=this.toObject();let ja;for(const qa of cc)if(0<=a.indexOf(qa)){ja=qa;let Aa=0;for(const Ra in N)Aa+=this.matrix[Ra][qa]*N[Ra],N[Ra]=0;h(ca[qa])&&(Aa+=ca[qa]);const La=Math.trunc(Aa);g[qa]=La;N[qa]=(1E3*Aa-1E3*La)/1E3;for(const Ra in ca)cc.indexOf(Ra)>cc.indexOf(qa)&&ka(this.matrix,ca,Ra,g,qa)}else h(ca[qa])&&(N[qa]=ca[qa]);for(const qa in N)0!==N[qa]&&(g[ja]+=qa===ja?N[qa]:N[qa]/this.matrix[ja][qa]);return da(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return da(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ca of cc){var g=this.values[ca];var N=a.values[ca];g=void 0===g||0===g?void 0===N||0===N:g===N;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Da("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new U(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Hb(a);g=Hb(g);var N=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==N?new vb({start:a,end:g}):N}static after(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [N,ca]=(a||"").split("/",2);if(N&&ca){let Aa;try{var ja=bb.fromISO(N,g);Aa=ja.isValid}catch(Ra){Aa=!1}let La;try{var qa=bb.fromISO(ca,g);La=qa.isValid}catch(Ra){La=!1}if(Aa&&La)return vb.fromDateTimes(ja,qa);if(Aa){if(qa=jb.fromISO(ca,g),qa.isValid)return vb.after(ja,qa)}else if(La&&(ja=jb.fromISO(N,g),ja.isValid))return vb.before(qa,ja)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),N=this.end.startOf(a);return Math.floor(N.diff(g,a).get(a))+(N.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Hb).filter(qa=>this.contains(qa)).sort();const g=[];let {s:N}=this,ca=0;for(;N<this.e;){var ja=a[ca]||this.e;ja=+ja>+this.e?
this.e:ja;g.push(vb.fromDateTimes(N,ja));N=ja;ca+=1}return g}splitBy(a){a=jb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,N=1;const ca=[];for(;g<this.e;){var ja=this.start.plus(a.mapUnits(qa=>qa*N));ja=+ja>+this.e?this.e:ja;ca.push(vb.fromDateTimes(g,ja));g=ja;N+=1}return ca}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,N]=a.sort((ca,ja)=>ca.s-ja.s).reduce(([ca,ja],qa)=>
ja?ja.overlaps(qa)||ja.abutsStart(qa)?[ca,ja.union(qa)]:[ca.concat([ja]),qa]:[ca,qa],[[],null]);N&&g.push(N);return g}static xor(a){let g=null,N=0;const ca=[];a=a.map(ja=>[{time:ja.s,type:"s"},{time:ja.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ja,qa)=>ja.time-qa.time);for(const ja of a)N+="s"===ja.type?1:-1,1===N?g=ja.time:(g&&+g!==+ja.time&&ca.push(vb.fromDateTimes(g,ja.time)),g=null);return vb.merge(ca)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Pa,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):jb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const g=bb.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Ub.isValidZone(a)}static normalizeZone(a){return k(a,yb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:N=null,locObj:ca=null,outputCalendar:ja="gregory"}={}){return(ca||rb.create(g,N,ja)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:N=null,locObj:ca=null,outputCalendar:ja="gregory"}={}){return(ca||rb.create(g,N,ja)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:N=null,locObj:ca=null}={}){return(ca||rb.create(g,N,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:N=null,locObj:ca=null}=
{}){return(ca||rb.create(g,N,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:J()}}}const Mc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},jd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Mc.hanidec.replace(/[\[|\]]/g,"").split(""),kd=`[ ${String.fromCharCode(160)}]`,Nc=new RegExp(kd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Oc=null;const Qc=[0,31,59,90,120,151,181,212,243,273,304,334],Pc=[0,31,60,91,121,152,182,213,244,274,305,335],md={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ld="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class bb{constructor(a){const g=a.zone||yb.defaultZone;let N=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(g.isValid?null:Ib(g));this.ts=m(a.ts)?yb.now():a.ts;let ca=null;var ja=null;N||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[ca,ja]=[a.old.c,a.old.o]:(ja=g.offset(this.ts),ca=hc(this.ts,ja),ca=(N=Number.isNaN(ca.year)?new Qb("invalid input"):null)?null:ca,ja=N?null:ja));this._zone=g;this.loc=a.loc||rb.create();this.invalid=N;this.weekData=null;this.c=ca;this.o=ja;this.isLuxonDateTime=
!0}static now(){return new bb({})}static local(){const [a,g]=Gb(arguments),[N,ca,ja,qa,Aa,La,Ra]=g;return Sb({year:N,month:ca,day:ja,hour:qa,minute:Aa,second:La,millisecond:Ra},a)}static utc(){const [a,g]=Gb(arguments),[N,ca,ja,qa,Aa,La,Ra]=g;a.zone=Fb.utcInstance;return Sb({year:N,month:ca,day:ja,hour:qa,minute:Aa,second:La,millisecond:Ra},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return bb.invalid("invalid input");const N=
k(g.zone,yb.defaultZone);return N.isValid?new bb({ts:a,zone:N,loc:rb.fromObject(g)}):bb.invalid(Ib(N))}static fromMillis(a,g={}){if(h(a))return-864E13>a||864E13<a?bb.invalid("Timestamp out of range"):new bb({ts:a,zone:k(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Da(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(h(a))return new bb({ts:1E3*a,zone:k(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Da("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var N=k(g.zone,yb.defaultZone);if(!N.isValid)return bb.invalid(Ib(N));var ca=yb.now();const ja=m(g.specificOffset)?N.offset(ca):g.specificOffset,qa=C(a,Eb);var Aa=!m(qa.ordinal),La=!m(qa.year),Ra=!m(qa.month)||!m(qa.day);La=La||Ra;var cb=qa.weekYear||qa.weekNumber;g=rb.fromObject(g);if((La||Aa)&&cb)throw new W("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ra&&Aa)throw new W("Can't mix ordinal dates with month/day");Ra=cb||qa.weekday&&
!La;let d=hc(ca,ja);Ra?(ca=Xe,cb=Ve,d=xa(d)):Aa?(ca=Ye,cb=We,d=sb(d)):(ca=ld,cb=md);let db=!1;for(var $a of ca)m(qa[$a])?qa[$a]=db?cb[$a]:d[$a]:db=!0;Ra?($a=L(qa.weekYear),ca=p(qa.weekNumber,1,G(qa.weekYear)),cb=p(qa.weekday,1,7),$a=$a?ca?cb?!1:Ma("weekday",qa.weekday):Ma("week",qa.week):Ma("weekYear",qa.weekYear)):Aa?($a=L(qa.year),ca=p(qa.ordinal,1,r(qa.year)?366:365),$a=$a?ca?!1:Ma("ordinal",qa.ordinal):Ma("year",qa.year)):$a=b(qa);if($a=$a||hb(qa))return bb.invalid($a);Aa=Ra?wb(qa):Aa?ib(qa):
qa;const [zb,ta]=Tb(Aa,ja,N);N=new bb({ts:zb,zone:N,o:ta,loc:g});return qa.weekday&&La&&a.weekday!==N.weekday?bb.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${N.toISO()}`):N}static fromISO(a,g={}){const [N,ca]=Ia(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Jb(N,ca,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [N,ca]=Ia(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,Ba]);return Jb(N,ca,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [N,
ca]=Ia(a,[Fe,c],[Ge,c],[He,n]);return Jb(N,ca,g,"HTTP",g)}static fromFormat(a,g,N={}){if(m(a)||m(g))throw new Da("fromFormat requires an input string and a format");const {locale:ca=null,numberingSystem:ja=null}=N,qa=rb.fromOpts({locale:ca,numberingSystem:ja,defaultToEN:!0}),{result:Aa,zone:La,specificOffset:Ra,invalidReason:cb}=Ua(qa,a,g),[d,db,$a,zb]=[Aa,La,Ra,cb];return zb?bb.invalid(zb):Jb(d,db,N,`format ${g}`,a,$a)}static fromString(a,g,N={}){return bb.fromFormat(a,g,N)}static fromSQL(a,g={}){const [N,
ca]=Ia(a,[Qe,Od],[Re,Se]);return Jb(N,ca,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Da("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new bc(a);return new bb({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Ta(a,rb.fromObject(g)))?a.map(N=>N?N.val:null).join(""):null}static expandFormat(a,g={}){return Oa(Ab.parseFormat(a),rb.fromObject(g)).map(N=>N.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rb(this).weekYear:NaN}get weekNumber(){return this.isValid?Rb(this).weekNumber:NaN}get weekday(){return this.isValid?Rb(this).weekday:
NaN}get ordinal(){return this.isValid?sb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return r(this.year)}get daysInMonth(){return E(this.year,this.month)}get daysInYear(){return this.isValid?
r(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?G(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:N,calendar:ca}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:N,outputCalendar:ca}}toUTC(a=0,g={}){return this.setZone(Fb.instance(a),g)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:N=!1}={}){a=k(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ca=
this.ts;if(g||N)g=a.offset(this.ts),N=this.toObject(),[ca]=Tb(N,g,a);return nb(this,{ts:ca,zone:a})}return bb.invalid(Ib(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:N}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:N});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=C(a,Eb);var g=!m(a.weekYear)||!m(a.weekNumber)||!m(a.weekday);const N=!m(a.ordinal),ca=!m(a.year),ja=!m(a.month)||!m(a.day),qa=a.weekYear||
a.weekNumber;if((ca||ja||N)&&qa)throw new W("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ja&&N)throw new W("Can't mix ordinal dates with month/day");g?g=wb({...xa(this.c),...a}):m(a.ordinal)?(g={...this.toObject(),...a},m(a.day)&&(g.day=Math.min(E(g.year,g.month),g.day))):g=ib({...sb(this.c),...a});const [Aa,La]=Tb(g,this.o,this.zone);return nb(this,{ts:Aa,o:La})}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return nb(this,Db(this,a))}minus(a){if(!this.isValid)return this;
a=jb.fromDurationLike(a).negate();return nb(this,Db(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=jb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Pa,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:N=!1,includeOffset:ca=!0,extendedZone:ja=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
Yb(this,a);return qa=qa+"T"+ic(this,a,g,N,ca,ja)}toISODate({format:a="extended"}={}){return this.isValid?Yb(this,"extended"===a):null}toISOWeekDate(){return ac(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:N=!0,includePrefix:ca=!1,extendedZone:ja=!1,format:qa="extended"}={}){return this.isValid?(ca?"T":"")+ic(this,"extended"===qa,g,a,N,ja):null}toRFC2822(){return ac(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ac(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Yb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:N=!0}={}){let ca="HH:mm:ss.SSS";if(g||a)N&&(ca+=" "),g?ca+="z":a&&(ca+="ZZ");return ac(this,ca,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",N={}){if(!this.isValid||!a.isValid)return jb.invalid("created by diffing an invalid DateTime");N={locale:this.locale,numberingSystem:this.numberingSystem,...N};
const ca=(Array.isArray(g)?g:[g]).map(jb.normalizeUnit);g=a.valueOf()>this.valueOf();a=aa(g?this:a,g?a:this,ca,N);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(bb.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const N=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=N&&N<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||bb.fromObject({},{zone:this.zone}),N=a.padding?this<g?-a.padding:a.padding:0;let ca="years months days hours minutes seconds".split(" "),ja=a.unit;Array.isArray(a.unit)&&(ca=a.unit,ja=void 0);return kb(g,this.plus(N),{...a,numeric:"always",units:ca,unit:ja})}toRelativeCalendar(a={}){return this.isValid?kb(a.base||bb.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(bb.isDateTime))throw new Da("min requires all arguments be DateTimes");
return M(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(bb.isDateTime))throw new Da("max requires all arguments be DateTimes");return M(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,N={}){const {locale:ca=null,numberingSystem:ja=null}=N;N=rb.fromOpts({locale:ca,numberingSystem:ja,defaultToEN:!0});return Ua(N,a,g)}static fromStringExplain(a,g,N={}){return bb.fromFormatExplain(a,g,N)}static get DATE_SHORT(){return Pa}static get DATE_MED(){return Ya}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return lb}static get TIME_SIMPLE(){return xb}static get TIME_WITH_SECONDS(){return Kb}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
l.DateTime=bb;l.Duration=jb;l.FixedOffsetZone=Fb;l.IANAZone=Ub;l.Info=lc;l.Interval=vb;l.SystemZone=nc;l.Zone=jc})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(l,f,ia){var ba={};(function(P){(function(Q,H){P.exports&&(P.exports=H())})(ia.commonjsGlobal,function(){function Q(k,m,h,L){k=Error.call(this,k);Object.setPrototypeOf&&Object.setPrototypeOf(k,Q.prototype);k.expected=m;k.found=h;k.location=L;k.name=
"SyntaxError";return k}function H(k,m,h){h=h||" ";if(k.length>m)return k;m-=k.length;h+=h.repeat(m);return k+h.slice(0,m)}(function(k,m){function h(){this.constructor=k}h.prototype=m.prototype;k.prototype=new h})(Q,Error);Q.prototype.format=function(k){var m="Error: "+this.message;if(this.location){var h=null,L;for(L=0;L<k.length;L++)if(k[L].source===this.location.source){h=k[L].text.split(/\r\n|\n|\r/g);break}k=this.location.start;L=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(k):k;var J=this.location.source+":"+L.line+":"+L.column;if(h){var M=this.location.end,x=H("",L.line.toString().length," ");h=h[k.line-1];M=(k.line===M.line?M.column:h.length+1)-k.column||1;m+="\n --\x3e "+J+"\n"+x+" |\n"+L.line+" | "+h+"\n"+x+" | "+H("",k.column-1," ")+H("",M,"^")}else m+="\n at "+J}return m};Q.buildMessage=function(k,m){function h(e){return e.charCodeAt(0).toString(16).toUpperCase()}function L(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+h(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+h(p)})}function J(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+h(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+h(p)})}function M(e){return x[e.type](e)}
var x={literal:function(e){return'"'+L(e.text)+'"'},class:function(e){var p=e.parts.map(function(F){return Array.isArray(F)?J(F[0])+"-"+J(F[1]):J(F)});return"["+(e.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){e=e.map(M);var p,F;e.sort();if(0<e.length){for(F=p=1;p<e.length;p++)e[p-1]!==e[p]&&(e[F]=e[p],F++);e.length=F}switch(e.length){case 1:return e[0];case 2:return e[0]+
" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(k)+" but "+(m?'"'+L(m)+'"':"end of input")+" found."};return{SyntaxError:Q,parse:function(k,m){function h(q,A){return{type:"literal",text:q,ignoreCase:A}}function L(q,A,Z){return{type:"class",parts:q,inverted:A,ignoreCase:Z}}function J(q){var A=db[q],Z;if(!A){for(Z=q-1;!db[Z];)Z--;A=db[Z];for(A={line:A.line,column:A.column};Z<q;)10===k.charCodeAt(Z)?(A.line++,A.column=1):A.column++,Z++;db[q]=A}return A}function M(q,A,Z){var ya=
J(q),Na=J(A);q={source:hb,start:{offset:q,line:ya.line,column:ya.column},end:{offset:A,line:Na.line,column:Na.column}};Z&&hb&&"function"===typeof hb.offset&&(q.start=hb.offset(q.start),q.end=hb.offset(q.end));return q}function x(q){d<$a||(d>$a&&($a=d,zb=[]),zb.push(q))}function e(){var q=d;xa();var A=F();A!==b?(xa(),q=A):(d=q,q=b);return q}function p(){var q=d;var A=F();if(A!==b){q=[];var Z=d;var ya=xa();var Na=Ma();if(Na!==b){var eb=xa();var fb=F();fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)}else d=Z,Z=
b;for(;Z!==b;)q.push(Z),Z=d,ya=xa(),Na=Ma(),Na!==b?(eb=xa(),fb=F(),fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)):(d=Z,Z=b);Z={type:"expression-list"};A=[A];for(ya=0;ya<q.length;ya++)A.push(q[ya][3]);Z.value=A;q=Z}else d=q,q=b;return q}function F(){var q=d;var A=V();if(A!==b){q=[];var Z=d;var ya=xa();var Na=sa();if(Na!==b){var eb=xa();var fb=V();fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),Z=d,ya=xa(),Na=sa(),Na!==b?(eb=xa(),fb=V(),fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)):(d=Z,Z=b);q=
ib(A,q)}else d=q,q=b;return q}function V(){var q=d;var A=K();if(A!==b){q=[];var Z=d;var ya=xa();var Na=ka();if(Na!==b){var eb=xa();var fb=K();fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),Z=d,ya=xa(),Na=ka(),Na!==b?(eb=xa(),fb=K(),fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)):(d=Z,Z=b);q=ib(A,q)}else d=q,q=b;return q}function K(){var q=d;var A=da();if(A===b){A=d;if(33===k.charCodeAt(d)){var Z=nb;d++}else Z=b,0===ta&&x(ne);if(Z!==b){var ya=d;ta++;if(61===k.charCodeAt(d)){var Na=la;
d++}else Na=b,0===ta&&x(Lc);ta--;Na===b?ya=void 0:(d=ya,ya=b);ya!==b?A=Z=[Z,ya]:(d=A,A=b)}else d=A,A=b}A!==b?(Z=xa(),ya=K(),ya!==b?q={type:"unary-expression",operator:"NOT",expr:ya}:(d=q,q=b)):(d=q,q=b);if(q===b){A=d;q=E();if(q!==b){xa();A=[];Z=d;ya=xa();Na=S();if(Na!==b){var eb=xa();var fb=E();fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)}else d=Z,Z=b;if(Z!==b)for(;Z!==b;)A.push(Z),Z=d,ya=xa(),Na=S(),Na!==b?(eb=xa(),fb=E(),fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)):(d=Z,Z=b);else A=b;A!==b&&(A={type:"arithmetic",
tail:A});A===b&&(A=d,Z=r(),Z!==b?(xa(),ya=Xa(),ya!==b?(xa(),ya=p(),ya!==b?(xa(),Na=ab(),Na!==b?A={op:Z,right:ya}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=r(),Z!==b?(xa(),ya=Xa(),ya!==b?(xa(),ya=ab(),ya!==b?A={op:Z,right:{type:"expression-list",value:[]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=r(),Z!==b?(xa(),ya=t(),ya!==b?A={op:Z,right:ya}:(d=A,A=b)):(d=A,A=b))),A===b&&(A=d,Na=da(),Na!==b?(xa(),Z=y(),Z!==b?(xa(),ya=E(),ya!==b?(xa(),eb=ka(),eb!==b?(xa(),Na=E(),Na!==b?A={op:"NOT"+
Z,right:{type:"expression-list",value:[ya,Na]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Na=y(),Na!==b?(xa(),Z=E(),Z!==b?(xa(),ya=ka(),ya!==b?(xa(),eb=E(),eb!==b?A={op:Na,right:{type:"expression-list",value:[Z,eb]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,Z=c(),Z!==b?(xa(),ya=da(),ya!==b?(xa(),ya=E(),ya!==b?A={op:Z+"NOT",right:ya}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=c(),Z!==b?(xa(),ya=E(),ya!==b?A={op:Z,right:ya}:(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,
Z=D(),Z!==b?(xa(),ya=Ha(),ya!==b?(xa(),Na=d,k.substr(d,6).toLowerCase()===ob?(eb=k.substr(d,6),d+=6):(eb=b,0===ta&&x(Od)),eb!==b?(eb=d,ta++,fb=C(),ta--,fb===b?eb=void 0:(d=eb,eb=b),eb!==b?Na="ESCAPE":(d=Na,Na=b)):(d=Na,Na=b),Na!==b?(xa(),Na=Ja(),Na!==b?A={op:Z,right:ya,escape:Na.value}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=D(),Z!==b?(xa(),ya=Ha(),ya!==b?A={op:Z,right:ya,escape:""}:(d=A,A=b)):(d=A,A=b))))));A===b&&(A=null);""==A||void 0==A||null==A?A=q:(Z=null,A=Z="arithmetic"==
A.type?ib(q,A.tail):sb(A.op,q,A.right,A.escape))}else d=A,A=b;q=A}return q}function S(){if(k.substr(d,2)===hc){var q=hc;d+=2}else q=b,0===ta&&x(id);q===b&&(62===k.charCodeAt(d)?(q=Tb,d++):(q=b,0===ta&&x(pe)),q===b&&(k.substr(d,2)===Db?(q=Db,d+=2):(q=b,0===ta&&x(Bd)),q===b&&(k.substr(d,2)===Jb?(q=Jb,d+=2):(q=b,0===ta&&x(se)),q===b&&(60===k.charCodeAt(d)?(q=ac,d++):(q=b,0===ta&&x(re)),q===b&&(61===k.charCodeAt(d)?(q=la,d++):(q=b,0===ta&&x(Lc)),q===b&&(k.substr(d,2)===Yb?(q=Yb,d+=2):(q=b,0===ta&&x(qe))))))));
return q}function D(){var q=q=d;var A=da();if(A!==b){var Z=xa();var ya=n();ya!==b?q=A=[A,Z,ya]:(d=q,q=b)}else d=q,q=b;q!==b&&(q=q[0]+" "+q[2]);q===b&&(q=n());return q}function r(){var q=q=d;var A=da();if(A!==b){var Z=xa();var ya=Ba();ya!==b?q=A=[A,Z,ya]:(d=q,q=b)}else d=q,q=b;q!==b&&(q=q[0]+" "+q[2]);q===b&&(q=Ba());return q}function E(){var q=d;var A=G();if(A!==b){q=[];var Z=d;var ya=xa();var Na=v();if(Na!==b){var eb=xa();var fb=G();fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),
Z=d,ya=xa(),Na=v(),Na!==b?(eb=xa(),fb=G(),fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)):(d=Z,Z=b);q=ib(A,q)}else d=q,q=b;return q}function v(){if(43===k.charCodeAt(d)){var q=ic;d++}else q=b,0===ta&&x(Vc);q===b&&(45===k.charCodeAt(d)?(q=Eb,d++):(q=b,0===ta&&x(Ab)),q===b&&(k.substr(d,2)===Sb?(q=Sb,d+=2):(q=b,0===ta&&x(Qb))));return q}function G(){var q=d;var A=w();if(A!==b){q=[];var Z=d;var ya=xa();var Na=z();if(Na!==b){var eb=xa();var fb=w();fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),
Z=d,ya=xa(),Na=z(),Na!==b?(eb=xa(),fb=w(),fb!==b?Z=ya=[ya,Na,eb,fb]:(d=Z,Z=b)):(d=Z,Z=b);q=ib(A,q)}else d=q,q=b;return q}function z(){if(42===k.charCodeAt(d)){var q=kb;d++}else q=b,0===ta&&x(Hd);q===b&&(47===k.charCodeAt(d)?(q=Gb,d++):(q=b,0===ta&&x(Id)));return q}function w(){var q=Ja();if(q===b){var A=d;var Z=d;var ya=Wa();if(ya!==b){var Na=Va();if(Na!==b){var eb=gb();eb!==b?Z=parseFloat(ya+Na+eb):(d=Z,Z=b)}else d=Z,Z=b}else d=Z,Z=b;Z===b&&(Z=d,ya=Wa(),ya!==b?(Na=Va(),Na!==b?Z=parseFloat(ya+Na):
(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,ya=Wa(),ya!==b?(Na=gb(),Na!==b?Z=parseFloat(ya+Na):(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,ya=Wa(),ya!==b&&(ya=parseFloat(ya)),Z=ya)));var fb=Z;if(fb!==b){var Qd=d;ta++;var Lf=T();ta--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?A={type:"number",value:fb}:(d=A,A=b)}else d=A,A=b;q=A;if(q===b){var Yc=d;var rc=d;if(k.substr(d,4).toLowerCase()===pa){var Rd=k.substr(d,4);d+=4}else Rd=b,0===ta&&x(He);if(Rd!==b){var Zc=d;ta++;var Mf=C();ta--;Mf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Rd=[Rd,
Zc]:(d=rc,rc=b)}else d=rc,rc=b;var mc=rc;mc!==b&&(mc={type:"boolean",value:!0});Yc=mc;if(Yc===b){Yc=d;var sc=d;if(k.substr(d,5).toLowerCase()===Da){var Sd=k.substr(d,5);d+=5}else Sd=b,0===ta&&x(Ie);if(Sd!==b){var $c=d;ta++;var Nf=C();ta--;Nf===b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Sd=[Sd,$c]:(d=sc,sc=b)}else d=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Yc=mc}q=Yc;if(q===b){var tc=d;if(k.substr(d,4).toLowerCase()===W){var Td=k.substr(d,4);d+=4}else Td=b,0===ta&&x(Ge);if(Td!==b){var ad=d;ta++;
var Of=C();ta--;Of===b?ad=void 0:(d=ad,ad=b);ad!==b?tc=Td=[Td,ad]:(d=tc,tc=b)}else d=tc,tc=b;var Ze=tc;Ze!==b&&(Ze={type:"null",value:null});q=Ze;if(q===b){var uc=d;if(fa()!==b){xa();var lf=Ha();lf!==b?uc={type:"date",value:lf.value}:(d=uc,uc=b)}else d=uc,uc=b;q=uc;if(q===b){var vc=d;if(X()!==b){xa();var mf=Ha();mf!==b?vc={type:"timestamp",value:mf.value}:(d=vc,vc=b)}else d=vc,vc=b;q=vc;if(q===b){var Bb=d;var $e=ma();if($e!==b){xa();if(45===k.charCodeAt(d)){var dc=Eb;d++}else dc=b,0===ta&&x(Ab);dc===
b&&(43===k.charCodeAt(d)?(dc=ic,d++):(dc=b,0===ta&&x(Vc)));if(dc!==b){xa();var bd=Ha();if(bd!==b){xa();var nf=Y();nf!==b?Bb={type:"interval",value:bd,qualifier:nf,op:dc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=ma(),$e!==b?(xa(),dc=Ha(),dc!==b?(xa(),bd=Y(),bd!==b?Bb={type:"interval",value:dc,qualifier:bd,op:""}:(d=Bb,Bb=b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));q=Bb}}}}}}var pb=q;if(pb===b){var Mb=d;var wc=d;if(k.substr(d,7).toLowerCase()===qd){var of=k.substr(d,7);d+=7}else of=
b,0===ta&&x(Pd);if(of!==b){var Ud=d;ta++;var Pf=C();ta--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?wc="EXTRACT":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){xa();var Qf=Xa();if(Qf!==b){xa();var Wb=oa();Wb===b&&(Wb=wa(),Wb===b&&(Wb=ua(),Wb===b&&(Wb=Ea(),Wb===b&&(Wb=Ca(),Wb===b&&(Wb=Fa())))));var pf=Wb;if(pf!==b){xa();var Rf=O();if(Rf!==b){xa();var qf=F();if(qf!==b){xa();var Sf=ab();Sf!==b?Mb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Mb,Mb=b)}else d=Mb,
Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var xc=d;if(k.substr(d,9).toLowerCase()===pd){var rf=k.substr(d,9);d+=9}else rf=b,0===ta&&x(Se);if(rf!==b){var Vd=d;ta++;var Tf=C();ta--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?xc="SUBSTRING":(d=xc,xc=b)}else d=xc,xc=b;if(xc!==b){xa();var Uf=Xa();if(Uf!==b){xa();var af=F();if(af!==b){xa();var Vf=O();if(Vf!==b){xa();var bf=F();if(bf!==b){xa();var ec=d;var yc=d;if(k.substr(d,3).toLowerCase()===od){var sf=k.substr(d,
3);d+=3}else sf=b,0===ta&&x(Re);if(sf!==b){var Wd=d;ta++;var Wf=C();ta--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?yc="FOR":(d=yc,yc=b)}else d=yc,yc=b;var cd=yc;if(cd!==b){var Xf=xa();var tf=F();if(tf!==b){var Yf=xa();ec=cd=[cd,Xf,tf,Yf]}else d=ec,ec=b}else d=ec,ec=b;ec===b&&(ec=null);cd=ab();cd!==b?Nb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[af,bf,ec[2]]:[af,bf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var tb=
d;var cf=aa();if(cf!==b){xa();var df=Xa();if(df!==b){xa();var fc=u();fc===b&&(fc=null);xa();var dd=F();if(dd!==b){xa();var ef=O();if(ef!==b){xa();var uf=F();if(uf!==b){xa();var Zf=ab();Zf!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd,uf]}}:(d=tb,tb=b)}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b;tb===b&&(tb=d,cf=aa(),cf!==b?(xa(),df=Xa(),df!==b?(xa(),fc=u(),fc===b&&(fc=null),xa(),dd=F(),dd!==b?(xa(),
ef=ab(),ef!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd]}}:(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b));pb=tb;if(pb===b){var Ob=d;var zc=d;if(k.substr(d,8).toLowerCase()===sd){var vf=k.substr(d,8);d+=8}else vf=b,0===ta&&x(Ue);if(vf!==b){var Xd=d;ta++;var $f=C();ta--;$f===b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?zc="POSITION":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){xa();var ag=Xa();if(ag!==b){xa();var wf=F();if(wf!==b){xa();var bg=Ba();
if(bg!==b){xa();var xf=F();if(xf!==b){xa();var cg=ab();cg!==b?Ob={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Ob,Ob=b)}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b;pb=Ob;if(pb===b){var Pb=d;var Ac=d;if(k.substr(d,4).toLowerCase()===xd){var yf=k.substr(d,4);d+=4}else yf=b,0===ta&&x(Mc);if(yf!==b){var Yd=d;ta++;var dg=C();ta--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?Ac="CAST":(d=Ac,Ac=b)}else d=Ac,Ac=b;if(Ac!==b){xa();var eg=Xa();if(eg!==
b){xa();var zf=F();if(zf!==b){xa();var Bc=d;if(k.substr(d,2).toLowerCase()===yd){var Af=k.substr(d,2);d+=2}else Af=b,0===ta&&x(jd);if(Af!==b){var Zd=d;ta++;var fg=C();ta--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Bc="AS":(d=Bc,Bc=b)}else d=Bc,Bc=b;var gg=Bc;if(gg!==b){xa();var qb=d;var Cc=d;if(k.substr(d,7).toLowerCase()===zd){var Bf=k.substr(d,7);d+=7}else Bf=b,0===ta&&x(ve);if(Bf!==b){var $d=d;ta++;var hg=C();ta--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Cc="INTEGER":(d=Cc,Cc=b)}else d=Cc,Cc=b;var ub=Cc;
ub!==b&&(ub={type:"data-type",value:{type:"integer"}});qb=ub;if(qb===b){qb=d;var Dc=d;if(k.substr(d,8).toLowerCase()===Ad){var Cf=k.substr(d,8);d+=8}else Cf=b,0===ta&&x(kd);if(Cf!==b){var ae=d;ta++;var ig=C();ta--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Dc="SMALLINT":(d=Dc,Dc=b)}else d=Dc,Dc=b;ub=Dc;ub!==b&&(ub={type:"data-type",value:{type:"smallint"}});qb=ub;if(qb===b){qb=d;var Ec=d;if(k.substr(d,5).toLowerCase()===jc){var Df=k.substr(d,5);d+=5}else Df=b,0===ta&&x(Nc);if(Df!==b){var be=d;ta++;var jg=
C();ta--;jg===b?be=void 0:(d=be,be=b);be!==b?Ec="FLOAT":(d=Ec,Ec=b)}else d=Ec,Ec=b;ub=Ec;ub!==b&&(ub={type:"data-type",value:{type:"float"}});qb=ub;if(qb===b){qb=d;var Fc=d;if(k.substr(d,4).toLowerCase()===Rc){var Ef=k.substr(d,4);d+=4}else Ef=b,0===ta&&x(we);if(Ef!==b){var ce=d;ta++;var kg=C();ta--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Fc="REAL":(d=Fc,Fc=b)}else d=Fc,Fc=b;ub=Fc;ub!==b&&(ub={type:"data-type",value:{type:"real"}});qb=ub;if(qb===b&&(qb=d,ub=fa(),ub!==b&&(ub={type:"data-type",value:{type:"date"}}),
qb=ub,qb===b&&(qb=d,ub=X(),ub!==b&&(ub={type:"data-type",value:{type:"timestamp"}}),qb=ub,qb===b))){qb=d;var Gc=d;if(k.substr(d,7).toLowerCase()===nc){var Ff=k.substr(d,7);d+=7}else Ff=b,0===ta&&x(Oc);if(Ff!==b){var de=d;ta++;var lg=C();ta--;lg===b?de=void 0:(d=de,de=b);de!==b?Gc="VARCHAR":(d=Gc,Gc=b)}else d=Gc,Gc=b;ub=Gc;if(ub!==b){xa();var mg=Xa();if(mg!==b){xa();var Gf=na();if(Gf!==b){xa();var ng=ab();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=
b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){xa();var og=ab();og!==b?Pb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Pb,Pb=b)}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b;pb=Pb;if(pb===b){var kc=d;var ee;var Xb=d;Xb=ee=B();if(Xb===b)if(Xb=d,96===k.charCodeAt(d)?(ee=Tc,d++):(ee=b,0===ta&&x(Ra)),ee!==b){var fe=[];if(Kc.test(k.charAt(d))){var gc=k.charAt(d);d++}else gc=b,0===ta&&x(cb);if(gc!==b)for(;gc!==b;)fe.push(gc),Kc.test(k.charAt(d))?
(gc=k.charAt(d),d++):(gc=b,0===ta&&x(cb));else fe=b;fe!==b?(96===k.charCodeAt(d)?(gc=Tc,d++):(gc=b,0===ta&&x(Ra)),gc!==b?Xb=fe.join(""):(d=Xb,Xb=b)):(d=Xb,Xb=b)}else d=Xb,Xb=b;var If=Xb;if(If!==b){xa();var pg=Xa();if(pg!==b){xa();var ge=p();ge===b&&(ge=null);xa();var qg=ab();qg!==b?kc={type:"function",name:If,args:ge?ge:{type:"expression-list",value:[]}}:(d=kc,kc=b)}else d=kc,kc=b}else d=kc,kc=b;pb=kc;if(pb===b){var Zb;var Cb=d;var ff=Sa();if(ff!==b){xa();var ed=F();if(ed!==b){xa();var fd=[];for(Zb=
Ka();Zb!==b;)fd.push(Zb),Zb=Ka();Zb=xa();var he=Oa();he!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Sa(),ff!==b)if(xa(),ed=F(),ed!==b){xa();fd=[];for(Zb=Ka();Zb!==b;)fd.push(Zb),Zb=Ka();Zb=xa();he=Qa();if(he!==b){xa();var rg=Oa();rg!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var $b;
var Lb=d;var hf=Sa();if(hf!==b){xa();var gd=[];for($b=Ia();$b!==b;)gd.push($b),$b=Ia();$b=xa();var ie=Oa();ie!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:null}:(d=Lb,Lb=b)}else d=Lb,Lb=b;if(Lb===b)if(Lb=d,hf=Sa(),hf!==b){xa();gd=[];for($b=Ia();$b!==b;)gd.push($b),$b=Ia();$b=xa();ie=Qa();if(ie!==b){xa();var sg=Oa();sg!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:ie.value}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b;gf=Lb}pb=gf;if(pb===b){var je;var ke=d;var Jf=
T();if(Jf!==b){var Kf=[];for(je=I();je!==b;)Kf.push(je),je=I();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=t(),pb===b)){pb=d;var tg=Xa();if(tg!==b){xa();var kf=F();if(kf!==b){xa();var ug=ab();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}function B(){var q;
var A=d;var Z=T();if(Z!==b){A=[];for(q=C();q!==b;)A.push(q),q=C();A=Z+A.join("")}else d=A,A=b;return A}function T(){if(Cd.test(k.charAt(d))){var q=k.charAt(d);d++}else q=b,0===ta&&x(Wc);return q}function C(){if(Dd.test(k.charAt(d))){var q=k.charAt(d);d++}else q=b,0===ta&&x(Jd);return q}function I(){if(Ed.test(k.charAt(d))){var q=k.charAt(d);d++}else q=b,0===ta&&x(Xc);return q}function t(){var q=d;if(64===k.charCodeAt(d)){var A=Hb;d++}else A=b,0===ta&&x(Ce);if(A!==b){var Z=B();Z!==b?q=A=[A,Z]:(d=q,
q=b)}else d=q,q=b;q!==b&&(q={type:"parameter",value:q[1]});return q}function u(){var q=d;if(k.substr(d,7).toLowerCase()===vd){var A=k.substr(d,7);d+=7}else A=b,0===ta&&x(jb);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="LEADING":(d=q,q=b)}else d=q,q=b;q===b&&(q=d,k.substr(d,8).toLowerCase()===wd?(A=k.substr(d,8),d+=8):(A=b,0===ta&&x(vb)),A!==b?(A=d,ta++,Z=C(),ta--,Z===b?A=void 0:(d=A,A=b),A!==b?q="TRAILING":(d=q,q=b)):(d=q,q=b),q===b&&(q=d,k.substr(d,4).toLowerCase()===xe?(A=
k.substr(d,4),d+=4):(A=b,0===ta&&x(lc)),A!==b?(A=d,ta++,Z=C(),ta--,Z===b?A=void 0:(d=A,A=b),A!==b?q="BOTH":(d=q,q=b)):(d=q,q=b)));return q}function Y(){var q=d;var A=d;var Z=ha();if(Z!==b){xa();var ya=Xa();if(ya!==b)if(xa(),ya=za(),ya!==b){xa();var Na=ab();Na!==b?A={type:"interval-period",period:Z.value,precision:ya,secondary:null}:(d=A,A=b)}else d=A,A=b;else d=A,A=b}else d=A,A=b;A===b&&(A=d,Z=ha(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),A=Z);if(A!==b)if(xa(),
Z=d,k.substr(d,2).toLowerCase()===oc?(ya=k.substr(d,2),d+=2):(ya=b,0===ta&&x(Qc)),ya!==b?(ya=d,ta++,Na=C(),ta--,Na===b?ya=void 0:(d=ya,ya=b),ya!==b?Z="TO":(d=Z,Z=b)):(d=Z,Z=b),Z!==b){xa();Z=d;ya=ha();ya!==b&&(ya={type:"interval-period",period:ya.value,precision:null,secondary:null});Z=ya;if(Z===b){Z=d;ya=Fa();if(ya!==b)if(xa(),ya=Xa(),ya!==b)if(xa(),ya=za(),ya!==b)if(xa(),Na=Ma(),Na!==b)if(xa(),Na=va(),Na!==b){xa();var eb=ab();eb!==b?Z={type:"interval-period",period:"second",precision:ya,secondary:Na}:
(d=Z,Z=b)}else d=Z,Z=b;else d=Z,Z=b;else d=Z,Z=b;else d=Z,Z=b;else d=Z,Z=b;Z===b&&(Z=d,ya=Fa(),ya!==b?(xa(),ya=Xa(),ya!==b?(xa(),ya=za(),ya!==b?(xa(),Na=ab(),Na!==b?Z={type:"interval-period",period:"second",precision:ya,secondary:null}:(d=Z,Z=b)):(d=Z,Z=b)):(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,ya=Fa(),ya!==b&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),Z=ya))}Z!==b?q={type:"interval-qualifier",start:A,end:Z}:(d=q,q=b)}else d=q,q=b;else d=q,q=b;q===b&&(q=d,Z=ha(),Z!==b?
(xa(),A=Xa(),A!==b?(xa(),A=va(),A!==b?(xa(),ya=ab(),ya!==b?q={type:"interval-period",period:Z.value,precision:A,secondary:null}:(d=q,q=b)):(d=q,q=b)):(d=q,q=b)):(d=q,q=b),q===b&&(q=d,Z=ha(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),q=Z,q===b&&(q=d,Z=Fa(),Z!==b?(xa(),A=Xa(),A!==b?(xa(),A=za(),A!==b?(xa(),ya=Ma(),ya!==b?(xa(),Z=va(),Z!==b?(xa(),ya=ab(),ya!==b?q={type:"interval-period",period:"second",precision:A,secondary:Z}:(d=q,q=b)):(d=q,q=b)):(d=q,q=b)):(d=
q,q=b)):(d=q,q=b)):(d=q,q=b),q===b&&(q=d,Z=Fa(),Z!==b?(xa(),A=Xa(),A!==b?(xa(),A=va(),A!==b?(xa(),ya=ab(),ya!==b?q={type:"interval-period",period:"second",precision:A,secondary:null}:(d=q,q=b)):(d=q,q=b)):(d=q,q=b)):(d=q,q=b),q===b&&(q=d,Z=Fa(),Z!==b&&(Z={type:"interval-period",period:"second",precision:null,secondary:null}),q=Z)))));return q}function ha(){var q=d;q=ua();q!==b&&(q={type:"string",value:"day"});q===b&&(q=d,q=Ea(),q!==b&&(q={type:"string",value:"hour"}),q===b&&(q=d,q=Ca(),q!==b&&(q=
{type:"string",value:"minute"}),q===b&&(q=d,q=wa(),q!==b&&(q={type:"string",value:"month"}),q===b&&(q=d,q=oa(),q!==b&&(q={type:"string",value:"year"})))));return q}function va(){var q=na();q!==b&&(q=parseFloat(q));return q}function za(){var q=na();q!==b&&(q=parseFloat(q));return q}function Ha(){var q=Ja();q===b&&(q=t());return q}function Ja(){var q=d;if(39===k.charCodeAt(d)){var A=Za;d++}else A=b,0===ta&&x(Kd);A===b&&(k.substr(d,2)===bc?(A=bc,d+=2):(A=b,0===ta&&x(Ld)));if(A!==b){A=[];var Z=d;k.substr(d,
2)===U?(Z=U,d+=2):(Z=b,0===ta&&x(Md));Z!==b&&(Z="'");Z===b&&(Uc.test(k.charAt(d))?(Z=k.charAt(d),d++):(Z=b,0===ta&&x(Nd)));for(;Z!==b;)A.push(Z),Z=d,k.substr(d,2)===U?(Z=U,d+=2):(Z=b,0===ta&&x(Md)),Z!==b&&(Z="'"),Z===b&&(Uc.test(k.charAt(d))?(Z=k.charAt(d),d++):(Z=b,0===ta&&x(Nd)));39===k.charCodeAt(d)?(Z=Za,d++):(Z=b,0===ta&&x(Kd));Z!==b?q={type:"string",value:A.join("")}:(d=q,q=b)}else d=q,q=b;return q}function Ia(){var q=d;if(Ua()!==b){xa();var A=F();if(A!==b){xa();var Z=Ta();Z!==b?(xa(),Z=F(),
Z!==b?q={type:"when-clause",operand:A,value:Z}:(d=q,q=b)):(d=q,q=b)}else d=q,q=b}else d=q,q=b;return q}function Ka(){var q=d;if(Ua()!==b){xa();var A=F();if(A!==b){xa();var Z=Ta();Z!==b?(xa(),Z=F(),Z!==b?q={type:"when-clause",operand:A,value:Z}:(d=q,q=b)):(d=q,q=b)}else d=q,q=b}else d=q,q=b;return q}function Qa(){var q=d;var A=d;if(k.substr(d,4).toLowerCase()===rb){var Z=k.substr(d,4);d+=4}else Z=b,0===ta&&x(ca);if(Z!==b){Z=d;ta++;var ya=C();ta--;ya===b?Z=void 0:(d=Z,Z=b);Z!==b?A="ELSE":(d=A,A=b)}else d=
A,A=b;A!==b?(xa(),A=F(),A!==b?q={type:"else-clause",value:A}:(d=q,q=b)):(d=q,q=b);return q}function Wa(){var q=na();if(q===b){q=d;if(45===k.charCodeAt(d)){var A=Eb;d++}else A=b,0===ta&&x(Ab);A===b&&(43===k.charCodeAt(d)?(A=ic,d++):(A=b,0===ta&&x(Vc)));if(A!==b){var Z=na();Z!==b?q=A[0]+Z:(d=q,q=b)}else d=q,q=b}return q}function Va(){var q=d;if(46===k.charCodeAt(d)){var A=ea;d++}else A=b,0===ta&&x(De);A!==b?(q=na(),q===b&&(q=null),q="."+(null!=q?q:"")):(d=q,q=b);return q}function gb(){var q;var A=q=
d;if(Gd.test(k.charAt(d))){var Z=k.charAt(d);d++}else Z=b,0===ta&&x(Ee);Z!==b?(yb.test(k.charAt(d))?(A=k.charAt(d),d++):(A=b,0===ta&&x(Fe)),A===b&&(A=null),A="e"+(null===A?"":A)):(d=A,A=b);A!==b?(Z=na(),Z!==b?q=A+Z:(d=q,q=b)):(d=q,q=b);return q}function na(){var q=[];var A=ra();if(A!==b)for(;A!==b;)q.push(A),A=ra();else q=b;q!==b&&(q=q.join(""));return q}function ra(){if(Fd.test(k.charAt(d))){var q=k.charAt(d);d++}else q=b,0===ta&&x(te);return q}function Ba(){var q=d;if(k.substr(d,2).toLowerCase()===
Ga){var A=k.substr(d,2);d+=2}else A=b,0===ta&&x(Je);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="IN":(d=q,q=b)}else d=q,q=b;return q}function c(){var q=d;if(k.substr(d,2).toLowerCase()===Pa){var A=k.substr(d,2);d+=2}else A=b,0===ta&&x(Ke);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="IS":(d=q,q=b)}else d=q,q=b;return q}function n(){var q=d;if(k.substr(d,4).toLowerCase()===Ya){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(Le);if(A!==b){A=d;ta++;var Z=C();
ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="LIKE":(d=q,q=b)}else d=q,q=b;return q}function da(){var q=d;if(k.substr(d,3).toLowerCase()===mb){var A=k.substr(d,3);d+=3}else A=b,0===ta&&x(Me);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="NOT":(d=q,q=b)}else d=q,q=b;return q}function ka(){var q=d;if(k.substr(d,3).toLowerCase()===lb){var A=k.substr(d,3);d+=3}else A=b,0===ta&&x(Ne);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="AND":(d=q,q=b)}else d=q,q=b;return q}
function sa(){var q=d;if(k.substr(d,2).toLowerCase()===xb){var A=k.substr(d,2);d+=2}else A=b,0===ta&&x(Oe);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="OR":(d=q,q=b)}else d=q,q=b;return q}function y(){var q=d;if(k.substr(d,7).toLowerCase()===Kb){var A=k.substr(d,7);d+=7}else A=b,0===ta&&x(Pe);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="BETWEEN":(d=q,q=b)}else d=q,q=b;return q}function O(){var q=d;if(k.substr(d,4).toLowerCase()===nd){var A=k.substr(d,
4);d+=4}else A=b,0===ta&&x(Qe);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="FROM":(d=q,q=b)}else d=q,q=b;return q}function aa(){var q=d;if(k.substr(d,4).toLowerCase()===rd){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(Te);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="TRIM":(d=q,q=b)}else d=q,q=b;return q}function X(){var q=d;if(k.substr(d,9).toLowerCase()===td){var A=k.substr(d,9);d+=9}else A=b,0===ta&&x(cc);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:
(d=A,A=b);A!==b?q="TIMESTAMP":(d=q,q=b)}else d=q,q=b;return q}function fa(){var q=d;if(k.substr(d,4).toLowerCase()===ud){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(ue);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="DATE":(d=q,q=b)}else d=q,q=b;return q}function ma(){var q=d;if(k.substr(d,8).toLowerCase()===ye){var A=k.substr(d,8);d+=8}else A=b,0===ta&&x(Pc);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="INTERVAL":(d=q,q=b)}else d=q,q=b;return q}function oa(){var q=
d;if(k.substr(d,4).toLowerCase()===pc){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(md);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="YEAR":(d=q,q=b)}else d=q,q=b;return q}function wa(){var q=d;if(k.substr(d,5).toLowerCase()===Ub){var A=k.substr(d,5);d+=5}else A=b,0===ta&&x(Ve);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="MONTH":(d=q,q=b)}else d=q,q=b;return q}function ua(){var q=d;if(k.substr(d,3).toLowerCase()===hd){var A=k.substr(d,3);d+=3}else A=b,0===
ta&&x(We);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="DAY":(d=q,q=b)}else d=q,q=b;return q}function Ea(){var q=d;if(k.substr(d,4).toLowerCase()===Hc){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(ld);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="HOUR":(d=q,q=b)}else d=q,q=b;return q}function Ca(){var q=d;if(k.substr(d,6).toLowerCase()===Ic){var A=k.substr(d,6);d+=6}else A=b,0===ta&&x(Xe);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q=
"MINUTE":(d=q,q=b)}else d=q,q=b;return q}function Fa(){var q=d;if(k.substr(d,6).toLowerCase()===Jc){var A=k.substr(d,6);d+=6}else A=b,0===ta&&x(Ye);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="SECOND":(d=q,q=b)}else d=q,q=b;return q}function Sa(){var q=d;if(k.substr(d,4).toLowerCase()===qc){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(bb);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="CASE":(d=q,q=b)}else d=q,q=b;return q}function Oa(){var q=d;if(k.substr(d,
3).toLowerCase()===ze){var A=k.substr(d,3);d+=3}else A=b,0===ta&&x(a);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="END":(d=q,q=b)}else d=q,q=b;return q}function Ua(){var q=d;if(k.substr(d,4).toLowerCase()===Ae){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(g);if(A!==b){A=d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="WHEN":(d=q,q=b)}else d=q,q=b;return q}function Ta(){var q=d;if(k.substr(d,4).toLowerCase()===Be){var A=k.substr(d,4);d+=4}else A=b,0===ta&&x(N);if(A!==b){A=
d;ta++;var Z=C();ta--;Z===b?A=void 0:(d=A,A=b);A!==b?q="THEN":(d=q,q=b)}else d=q,q=b;return q}function Ma(){if(44===k.charCodeAt(d)){var q=Sc;d++}else q=b,0===ta&&x(ja);return q}function Xa(){if(40===k.charCodeAt(d)){var q=Fb;d++}else q=b,0===ta&&x(qa);return q}function ab(){if(41===k.charCodeAt(d)){var q=me;d++}else q=b,0===ta&&x(Aa);return q}function xa(){var q;var A=[];for(q=wb();q!==b;)A.push(q),q=wb();return A}function wb(){if(oe.test(k.charAt(d))){var q=k.charAt(d);d++}else q=b,0===ta&&x(La);
return q}function sb(q,A,Z,ya){q={type:"binary-expression",operator:q,left:A,right:Z};void 0!==ya&&(q.escape=ya);return q}function ib(q,A){for(var Z=0;Z<A.length;Z++)q=sb(A[Z][1],q,A[Z][3]);return q}m=void 0!==m?m:{};var b={},hb=m.grammarSource,Ib={start:e},Rb=e,nb="!",la="\x3d",hc="\x3e\x3d",Tb="\x3e",Db="\x3c\x3d",Jb="\x3c\x3e",ac="\x3c",Yb="!\x3d",ic="+",Eb="-",Sb="||",kb="*",Gb="/",Hb="@",Za="'",bc="N'",U="''",ea=".",W="null",pa="true",Da="false",Ga="in",Pa="is",Ya="like",ob="escape",mb="not",
lb="and",xb="or",Kb="between",nd="from",od="for",pd="substring",qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",jc="float",Rc="real",nc="varchar",oc="to",ye="interval",pc="year",Ub="month",hd="day",Hc="hour",Ic="minute",Jc="second",qc="case",ze="end",Ae="when",Be="then",rb="else",Sc=",",Fb="(",me=")",Tc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Uc=/^[^']/,Fd=/^[0-9]/,
Gd=/^[eE]/,yb=/^[+\-]/,oe=/^[ \t\n\r]/,Kc=/^[^`]/,ne=h("!",!1),Lc=h("\x3d",!1),id=h("\x3e\x3d",!1),pe=h("\x3e",!1),Bd=h("\x3c\x3d",!1),se=h("\x3c\x3e",!1),re=h("\x3c",!1),qe=h("!\x3d",!1),Vc=h("+",!1),Ab=h("-",!1),Qb=h("||",!1),Hd=h("*",!1),Id=h("/",!1),Wc=L([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=L([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Xc=L([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=h("@",!1),Kd=h("'",!1),Ld=h("N'",!1),Md=h("''",!1),Nd=L(["'"],!0,!1),
De=h(".",!1),te=L([["0","9"]],!1,!1),Ee=L(["e","E"],!1,!1),Fe=L(["+","-"],!1,!1),Ge=h("NULL",!0),He=h("TRUE",!0),Ie=h("FALSE",!0),Je=h("IN",!0),Ke=h("IS",!0),Le=h("LIKE",!0),Od=h("ESCAPE",!0),Me=h("NOT",!0),Ne=h("AND",!0),Oe=h("OR",!0),Pe=h("BETWEEN",!0),Qe=h("FROM",!0),Re=h("FOR",!0),Se=h("SUBSTRING",!0),Pd=h("EXTRACT",!0),Te=h("TRIM",!0),Ue=h("POSITION",!0),cc=h("TIMESTAMP",!0),ue=h("DATE",!0),jb=h("LEADING",!0),vb=h("TRAILING",!0),lc=h("BOTH",!0),Mc=h("CAST",!0),jd=h("AS",!0),ve=h("INTEGER",!0),
kd=h("SMALLINT",!0),Nc=h("FLOAT",!0),we=h("REAL",!0),Oc=h("VARCHAR",!0),Qc=h("TO",!0),Pc=h("INTERVAL",!0),md=h("YEAR",!0),Ve=h("MONTH",!0),We=h("DAY",!0),ld=h("HOUR",!0),Xe=h("MINUTE",!0),Ye=h("SECOND",!0),bb=h("CASE",!0),a=h("END",!0),g=h("WHEN",!0),N=h("THEN",!0),ca=h("ELSE",!0),ja=h(",",!1),qa=h("(",!1),Aa=h(")",!1),La=L([" ","\t","\n","\r"],!1,!1),Ra=h("`",!1),cb=L(["`"],!0,!1),d=0,db=[{line:1,column:1}],$a=0,zb=[],ta=0;if("startRule"in m){if(!(m.startRule in Ib))throw Error("Can't start parsing from rule \""+
m.startRule+'".');Rb=Ib[m.startRule]}var Vb=Rb();if(Vb!==b&&d===k.length)return Vb;Vb!==b&&d<k.length&&x({type:"end"});throw function(q,A,Z){return new Q(Q.buildMessage(q,A),q,A,Z)}(zb,$a<k.length?k.charAt($a):null,$a<k.length?M($a,$a+1):M($a,$a));}}})})({get exports(){return ba},set exports(P){ba=P}});let R=function(){function P(){}P.parse=function(Q){return ba.parse(Q)};return f._createClass(P)}();l.WhereGrammar=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],
function(l){l.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};l.getDefaultExportFromCjs=function(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f["default"]:f}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,
supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(l,f,ia,ba,R,P,Q,H,k,m,h,L,J,M,x){function e(K,S,D,r){const E=r.x-D.x;r=r.y-D.y;S=Math.min(1,Math.max(0,((S.x-D.x)*E+(S.y-D.y)*r)/(E*E+r*r)));K.x=D.x+E*S;K.y=D.y+r*S}function p(K,S){return K?S?4:3:S?3:2}let F=function(){function K(D,r,E){this.items=D;this.query=r;this.geometryType=E.geometryType;this.hasM=E.hasM;this.hasZ=E.hasZ;this.fieldsIndex=E.fieldsIndex;this.objectIdField=E.objectIdField;this.spatialReference=E.spatialReference;this.featureAdapter=E.featureAdapter}var S=K.prototype;
S.createQueryResponseForCount=function(){const D=new k(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return D.countDistinctValues(this.items);const {groupByFieldsForStatistics:r,having:E,outStatistics:v}=this.query;if(!r?.length)return 1;const G=new Map,z=new Map,w=new Set;for(const C of v){var {statisticType:B}=C;B="exceedslimit"!==B?C.onStatisticField:void 0;if(!z.has(B)){var T=[];for(const I of r){const t=this._getAttributeValues(D,I,G);T.push(t)}z.set(B,this._calculateUniqueValues(T,
D.returnDistinctValues))}B=z.get(B);for(const I in B){const {data:t,items:u}=B[I];T=t.join(",");E&&!D.validateItems(u,E)||w.add(T)}}return w.size};S.createQueryResponse=async function(){let D;D=this.query.outStatistics?this.query.outStatistics.some(r=>"exceedslimit"===r.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const r=this.query.geometry;H.isValid(this.query.outSR)&&
!H.equals(r.spatialReference,this.query.outSR)?D.queryGeometry=L.cleanFromGeometryEngine({spatialReference:this.query.outSR,...m.project(r,r.spatialReference,this.query.outSR)}):D.queryGeometry=L.cleanFromGeometryEngine({spatialReference:this.query.outSR,...r})}return D};S.createSnappingResponse=function(D,r){const E=this.featureAdapter,v=p(this.hasZ,this.hasM),{point:G,mode:z}=D,w="number"===typeof D.distance?D.distance:D.distance.x,B="number"===typeof D.distance?D.distance:D.distance.y,T={candidates:[]},
C="esriGeometryPolygon"===this.geometryType;r=this._getPointCreator(z,this.spatialReference,r);const I=new V(null,0),t=new V(null,0),u={x:0,y:0,z:0};for(const Ia of this.items){var Y=E.getGeometry(Ia);if(ba.isNone(Y))continue;const {coords:Ka,lengths:Qa}=Y;I.coords=Ka;t.coords=Ka;if(D.types&f.SnappingTypes.EDGE){Y=0;for(var ha=0;ha<Qa.length;ha++){var va=Qa[ha];for(var za=0;za<va;za++,Y+=v){var Ha=I;Ha.coordsIndex=Y;if(za!==va-1){const Wa=t;Wa.coordsIndex=Y+v;const Va=u;e(u,G,Ha,Wa);var Ja=(G.x-Va.x)/
w;const gb=(G.y-Va.y)/B;Ja=Ja*Ja+gb*gb;1>=Ja&&T.candidates.push(h.makeEdgeCandidate(E.getObjectId(Ia),r(Va),Math.sqrt(Ja),r(Ha),r(Wa)))}}}}if(D.types&f.SnappingTypes.VERTEX)for(Y=C?Ka.length-v:Ka.length,ha=0;ha<Y;ha+=v)va=I,va.coordsIndex=ha,za=(G.x-va.x)/w,Ha=(G.y-va.y)/B,za=za*za+Ha*Ha,1>=za&&T.candidates.push(h.makeVertexCandidate(E.getObjectId(Ia),r(va),Math.sqrt(za)))}T.candidates.sort((Ia,Ka)=>Ia.distance-Ka.distance);return T};S._getPointCreator=function(D,r,E){const v=ba.isSome(E)&&!H.equals(r,
E)?z=>m.project(z,r,E):z=>z,{hasZ:G}=this;return"3d"===D?G?({x:z,y:w,z:B})=>v({x:z,y:w,z:B}):({x:z,y:w})=>v({x:z,y:w,z:0}):({x:z,y:w})=>v({x:z,y:w})};S.createSummaryStatisticsResponse=async function(D){const {field:r,valueExpression:E,normalizationField:v,normalizationType:G,normalizationTotal:z,minValue:w,maxValue:B,scale:T}=D;D=this.fieldsIndex.isDateField(r);var C=await this._getDataValues({field:r,valueExpression:E,normalizationField:v,normalizationType:G,normalizationTotal:z,scale:T});const I=
M.isNullCountSupported({normalizationType:G,normalizationField:v,minValue:w,maxValue:B}),t=this.fieldsIndex.get(r),u={value:.5,fieldType:t?.type};C=J.isStringField(t)?M.calculateStringStatistics({values:C,supportsNullCount:I,percentileParams:u}):M.calculateStatistics({values:C,minValue:w,maxValue:B,useSampleStdDev:!G,supportsNullCount:I,percentileParams:u});return M.processSummaryStatisticsResult(C,D)};S.createUniqueValuesResponse=async function(D){const {field:r,valueExpression:E,domains:v,returnAllCodedValues:G,
scale:z}=D;var w=await this._getDataValues({field:r,field2:D.field2,field3:D.field3,fieldDelimiter:D.fieldDelimiter,valueExpression:E,scale:z});w=M.calculateUniqueValuesCount(w);return M.createUVResult(w,v,G,D.fieldDelimiter)};S.createClassBreaksResponse=async function(D){const {field:r,valueExpression:E,normalizationField:v,normalizationType:G,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:B,minValue:T,maxValue:C,numClasses:I,scale:t}=D;D=await this._getDataValues({field:r,
valueExpression:E,normalizationField:v,normalizationType:G,normalizationTotal:z,scale:t});D=M.calculateClassBreaks(D,{field:r,normalizationField:v,normalizationType:G,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:B,minValue:T,maxValue:C,numClasses:I});return M.resolveCBResult(D,w)};S.createHistogramResponse=async function(D){const {field:r,valueExpression:E,normalizationField:v,normalizationType:G,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:B,minValue:T,
maxValue:C,numBins:I,scale:t}=D;D=await this._getDataValues({field:r,valueExpression:E,normalizationField:v,normalizationType:G,normalizationTotal:z,scale:t});return M.calculateHistogram(D,{field:r,normalizationField:v,normalizationType:G,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:B,minValue:T,maxValue:C,numBins:I})};S._sortFeatures=function(D,r,E){if(1<D.length&&r&&r.length)for(const v of r.reverse()){r=v.split(" ");const G=r[0],z=this.fieldsIndex.get(G);r=r[1]?"desc"===
r[1].toLowerCase():!1;const w=M.getAttributeComparator(z?.type,r);D.sort((B,T)=>{B=E(B,G,z);T=E(T,G,z);return w(B,T)})}};S._createFeatureQueryResponse=function(D){const r=this.items,{geometryType:E,hasM:v,hasZ:G,objectIdField:z,spatialReference:w}=this,{outFields:B,outSR:T,quantizationParameters:C,resultRecordCount:I,resultOffset:t,returnZ:u,returnM:Y}=D,ha=null!=I?r.length>(t||0)+I:!1,va=B&&(B.includes("*")?[...this.fieldsIndex.fields]:B.map(za=>this.fieldsIndex.get(za)));return{exceededTransferLimit:ha,
features:this._createFeatures(D,r),fields:va,geometryType:E,hasM:v&&Y,hasZ:G&&u,objectIdFieldName:z,spatialReference:L.cleanFromGeometryEngine(T||w),transform:C&&Q.toQuantizationTransform(C)||null}};S._createFeatures=function(D,r){const E=new k(D,this.featureAdapter,this.fieldsIndex),{hasM:v,hasZ:G}=this,{orderByFields:z,quantizationParameters:w,returnGeometry:B,returnCentroid:T,maxAllowableOffset:C,resultOffset:I,resultRecordCount:t,returnZ:u=!1,returnM:Y=!1}=D,ha=G&&u,va=v&&Y;D=[];var za=0;r=[...r];
this._sortFeatures(r,z,(Ia,Ka,Qa)=>E.getFieldValue(Ia,Ka,Qa));if(B||T){var Ha=Q.toQuantizationTransform(w)??void 0;if(B&&!T)for(var Ja of r)D[za++]={attributes:E.getAttributes(Ja),geometry:L.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ja),C,Ha,ha,va)};else if(!B&&T)for(const Ia of r)D[za++]={attributes:E.getAttributes(Ia),centroid:L.transformCentroid(this,this.featureAdapter.getCentroid(Ia,this),Ha)};else for(const Ia of r)D[za++]={attributes:E.getAttributes(Ia),
centroid:L.transformCentroid(this,this.featureAdapter.getCentroid(Ia,this),Ha),geometry:L.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ia),C,Ha,ha,va)}}else for(Ha of r)(Ja=E.getAttributes(Ha))&&(D[za++]={attributes:Ja});za=I||0;null!=t&&(D=D.slice(za,Math.min(D.length,za+t)));return D};S._createExceedsLimitQueryResponse=function(D){var r=!1;let E=Number.POSITIVE_INFINITY,v=Number.POSITIVE_INFINITY;r=Number.POSITIVE_INFINITY;for(const G of D.outStatistics??[])if("exceedslimit"===
G.statisticType){E=null!=G.maxPointCount?G.maxPointCount:Number.POSITIVE_INFINITY;v=null!=G.maxRecordCount?G.maxRecordCount:Number.POSITIVE_INFINITY;r=null!=G.maxVertexCount?G.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)r=this.items.length>E;else if(this.items.length>v)r=!0;else{D=p(this.hasZ,this.hasM);const G=this.featureAdapter;r=this.items.reduce((z,w)=>{w=G.getGeometry(w);return z+(ba.isSome(w)&&w.coords.length||0)},0)/D>r}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(r)}}]}};S._createStatisticsQueryResponse=async function(D){var r={attributes:{}};const E=[],v=new Map,G=new Map,z=new Map,w=new Map,B=new k(D,this.featureAdapter,this.fieldsIndex);var T=D.outStatistics;const {groupByFieldsForStatistics:C,having:I,orderByFields:t}=D;D=C&&C.length;const u=!!D,Y=u?C[0]:null,ha=u&&!this.fieldsIndex.get(Y);for(const Ia of T??
[]){const {outStatisticFieldName:Ka,statisticType:Qa}=Ia;T=Ia;var va="exceedslimit"!==Qa?Ia.onStatisticField:void 0;const Wa="percentile_disc"===Qa||"percentile_cont"===Qa,Va="EnvelopeAggregate"===Qa||"CentroidAggregate"===Qa||"ConvexHullAggregate"===Qa,gb=u&&1===D&&(va===Y||ha)&&"count"===Qa;if(u){if(!z.has(va)){var za=[];for(const na of C){var Ha=this._getAttributeValues(B,na,v);za.push(Ha)}z.set(va,this._calculateUniqueValues(za,Va?!1:B.returnDistinctValues))}za=z.get(va);for(const na in za){const {count:ra,
data:Ba,items:c,itemPositions:n}=za[na];Ha=Ba.join(",");if(!I||B.validateItems(c,I)){const da=w.get(Ha)||{attributes:{}};if(Va){da.aggregateGeometries||(da.aggregateGeometries={});const {aggregateGeometries:sa,outStatisticFieldName:y}=await this._getAggregateGeometry(T,c);da.aggregateGeometries[y]=sa}else{var Ja=null;if(gb)Ja=ra;else{const sa=this._getAttributeValues(B,va,v);Ja=n.map(y=>sa[y]);Ja=Wa&&"statisticParameters"in T?this._getPercentileValue(T,Ja):this._getStatisticValue(T,Ja,null,B.returnDistinctValues)}da.attributes[Ka]=
Ja}let ka=0;C.forEach((sa,y)=>da.attributes[this.fieldsIndex.get(sa)?sa:`EXPR_${++ka}`]=Ba[y]);w.set(Ha,da)}}}else if(Va){r.aggregateGeometries||(r.aggregateGeometries={});const {aggregateGeometries:na,outStatisticFieldName:ra}=await this._getAggregateGeometry(T,this.items);r.aggregateGeometries[ra]=na}else va=this._getAttributeValues(B,va,v),r.attributes[Ka]=Wa&&"statisticParameters"in T?this._getPercentileValue(T,va):this._getStatisticValue(T,va,G,B.returnDistinctValues);E.push({name:Ka,alias:Ka,
type:"esriFieldTypeDouble"})}r=u?Array.from(w.values()):[r];this._sortFeatures(r,t,(Ia,Ka)=>Ia.attributes[Ka]);return{fields:E,features:r}};S._getAggregateGeometry=async function(D,r){var E=await new Promise((t,u)=>l(["../../../geometry/geometryEngineJSON"],t,u));const {statisticType:v,outStatisticFieldName:G}=D,{featureAdapter:z,spatialReference:w,geometryType:B,hasZ:T,hasM:C}=this;r=r.map(t=>L.getGeometry(B,T,C,z.getGeometry(t)));const I=E.convexHull(w,r,!0)[0];D={aggregateGeometries:null,outStatisticFieldName:null};
"EnvelopeAggregate"===v?(E=I?P.getPolygonExtent(I):P.getGeometryExtent(E.union(w,r)),D.aggregateGeometries={...E,spatialReference:w},D.outStatisticFieldName=G||"extent"):"CentroidAggregate"===v?(E=I?R.polygonCentroid(I):R.extentCentroid(P.getGeometryExtent(E.union(w,r))),D.aggregateGeometries={x:E[0],y:E[1],spatialReference:w},D.outStatisticFieldName=G||"centroid"):"ConvexHullAggregate"===v&&(D.aggregateGeometries=I,D.outStatisticFieldName=G||"convexHull");return D};S._getStatisticValue=function(D,
r,E,v){const {onStatisticField:G,statisticType:z}=D;D=null;D=E?.has(G)?E.get(G):J.isStringField(this.fieldsIndex.get(G))?M.calculateStringStatistics({values:r,returnDistinct:v}):M.calculateStatistics({values:v?[...(new Set(r))]:r,minValue:null,maxValue:null,useSampleStdDev:!0});E&&E.set(G,D);return D["var"===z?"variance":z]};S._getPercentileValue=function(D,r){const {onStatisticField:E,statisticParameters:v,statisticType:G}=D,{value:z,orderBy:w}=v;D=this.fieldsIndex.get(E);return M.calculatePercentile(r,
{value:z,orderBy:w,fieldType:D?.type,isDiscrete:"percentile_disc"===G})};S._getAttributeValues=function(D,r,E){if(E.has(r))return E.get(r);const v=this.fieldsIndex.get(r),G=this.items.map(z=>D.getFieldValue(z,r,v));E.set(r,G);return G};S._getAttributeDataValues=function(D,r){return this.items.map(E=>D.getDataValue(E,{field:r.field,field2:r.field2,field3:r.field3,fieldDelimiter:r.fieldDelimiter,normalizationField:r.normalizationField,normalizationType:r.normalizationType,normalizationTotal:r.normalizationTotal}))};
S._getAttributeExpressionValues=async function(D,r,E){const {arcadeUtils:v}=await x.loadArcade();r=v.createFunction(r);E=E&&v.getViewInfo(E);return D.getExpressionValues(this.items,r,E,v)};S._calculateUniqueValues=function(D,r){const E={},v=this.items,G=v.length;for(let z=0;z<G;z++){const w=v[z],B=[];for(const C of D)B.push(C[z]);const T=B.join(",");null==E[T]?E[T]={count:1,data:B,items:[w],itemPositions:[z]}:(r||E[T].count++,E[T].items.push(w),E[T].itemPositions.push(z))}return E};S._getDataValues=
async function(D){const r=new k(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:E,field:v,normalizationField:G,normalizationType:z,normalizationTotal:w,scale:B}=D,T=E?{viewingMode:"map",scale:B,spatialReference:this.query.outSR||this.spatialReference}:null;return E?this._getAttributeExpressionValues(r,E,T):this._getAttributeDataValues(r,{field:v,field2:D.field2,field3:D.field3,fieldDelimiter:D.fieldDelimiter,normalizationField:G,normalizationType:z,normalizationTotal:w})};ia._createClass(K,
[{key:"size",get:function(){return this.items.length}}]);return K}();f.SnappingTypes=void 0;(function(K){K[K.NONE=0]="NONE";K[K.EDGE=1]="EDGE";K[K.VERTEX=2]="VERTEX"})(f.SnappingTypes||(f.SnappingTypes={}));let V=function(){function K(S,D){this.coords=S;this.coordsIndex=D}ia._createClass(K,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return K}();f.QueryEngineResult=
F;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(l,f,ia){function ba({scale:z,translate:w},B){return Math.round((B-w[0])/z[0])}function R({scale:z,translate:w},B){return Math.round((w[1]-B)/z[1])}function P(z,w,B){const T=[];let C,I,t,u;for(let Y=0;Y<B.length;Y++){const ha=B[Y];if(0<Y){if(t=ba(z,ha[0]),u=R(z,ha[1]),t!==C||u!==I)T.push(w(ha,t-C,u-I)),C=t,I=u}else C=ba(z,
ha[0]),I=R(z,ha[1]),T.push(w(ha,C,I))}return 0<T.length?T:null}function Q(z,w,B,T){return P(z,B?T?G:v:T?v:E,w)}function H(z,w,B,T){const C=[];B=B?T?G:v:T?v:E;for(T=0;T<w.length;T++){const I=P(z,B,w[T]);I&&3<=I.length&&C.push(I)}return C.length?C:null}function k(z,w,B,T){const C=[];B=B?T?G:v:T?v:E;for(T=0;T<w.length;T++){const I=P(z,B,w[T]);I&&2<=I.length&&C.push(I)}return C.length?C:null}function m({scale:z,translate:w},B){return B*z[0]+w[0]}function h({scale:z,translate:w},B){return w[1]-B*z[1]}
function L(z,w,B){const T=Array(B.length);if(!B.length)return T;const [C,I]=z.scale;let t=m(z,B[0][0]);z=h(z,B[0][1]);T[0]=w(B[0],t,z);for(let u=1;u<B.length;u++){const Y=B[u];t+=Y[0]*C;z-=Y[1]*I;T[u]=w(Y,t,z)}return T}function J(z,w,B){const T=Array(B.length);for(let C=0;C<B.length;C++)T[C]=L(z,w,B[C]);return T}function M(z,w,B,T){return L(z,B?T?G:v:T?v:E,w)}function x(z,w,B,T){return J(z,B?T?G:v:T?v:E,w)}function e(z,w,B,T){return J(z,B?T?G:v:T?v:E,w)}function p(z,w,B){let [T,C]=B[0],I=Math.min(T,
w[0]),t=Math.min(C,w[1]),u=Math.max(T,w[2]);w=Math.max(C,w[3]);for(let Y=1;Y<B.length;Y++){const [ha,va]=B[Y];T+=ha;C+=va;0>ha&&(I=Math.min(I,T));0<ha&&(u=Math.max(u,T));0>va?t=Math.min(t,C):0<va&&(w=Math.max(w,C))}z[0]=I;z[1]=t;z[2]=u;z[3]=w;return z}function F(z,w){if(!w.length)return null;z[0]=z[1]=Number.POSITIVE_INFINITY;z[2]=z[3]=Number.NEGATIVE_INFINITY;for(let B=0;B<w.length;B++)p(z,z,w[B]);return z}function V(z,w,B,T,C){w.xmin=ba(z,B.xmin);w.ymin=R(z,B.ymin);w.xmax=ba(z,B.xmax);w.ymax=R(z,
B.ymax);w!==B&&(T&&(w.zmin=B.zmin,w.zmax=B.zmax),C&&(w.mmin=B.mmin,w.mmax=B.mmax));return w}function K(z,w,B,T,C){w.points=Q(z,B.points,T,C)??[];return w}function S(z,w,B,T,C){w.x=ba(z,B.x);w.y=R(z,B.y);w!==B&&(T&&(w.z=B.z),C&&(w.m=B.m));return w}function D(z,w,B,T,C){z=H(z,B.rings,T,C);if(!z)return null;w.rings=z;return w}function r(z,w,B,T,C){z=k(z,B.paths,T,C);if(!z)return null;w.paths=z;return w}const E=(z,w,B)=>[w,B],v=(z,w,B)=>[w,B,z[2]],G=(z,w,B)=>[w,B,z[2],z[3]];l.equals=function(z,w){if(z===
w||null==z&&null==w)return!0;if(null==z||null==w)return!1;let B,T,C,I;z&&"upperLeft"===z.originPosition?(B=z.translate[0],T=z.translate[1],z=z.scale[0]):(B=f.isSome(z.extent)?z.extent.xmin:0,T=f.isSome(z.extent)?z.extent.ymax:0,z=z.tolerance);w&&"upperLeft"===w.originPosition?(C=w.translate[0],I=w.translate[1],w=w.scale[0]):(C=f.isSome(w.extent)?w.extent.xmin:0,I=f.isSome(w.extent)?w.extent.ymax:0,w=w.tolerance);return B===C&&T===I&&z===w};l.getQuantizedBoundsCoordsArray=p;l.getQuantizedBoundsCoordsArrayArray=
F;l.getQuantizedBoundsPaths=function(z){return F([0,0,0,0],z)};l.getQuantizedBoundsPoints=function(z){const w=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(w,w,z)};l.getQuantizedBoundsRings=function(z){return F([0,0,0,0],z)};l.quantizeBounds=function(z,w,B){w[0]=ba(z,B[0]);w[3]=R(z,B[1]);w[2]=ba(z,B[2]);w[1]=R(z,B[3]);return w};l.quantizeExtent=V;l.quantizeGeometry=function(z,w){return z&&w?ia.isPoint(w)?S(z,{},w,!1,!1):ia.isPolyline(w)?
r(z,{},w,!1,!1):ia.isPolygon(w)?D(z,{},w,!1,!1):ia.isMultipoint(w)?K(z,{},w,!1,!1):ia.isExtent(w)?V(z,{},w,!1,!1):null:null};l.quantizeMultipoint=K;l.quantizePaths=k;l.quantizePoint=S;l.quantizePoints=Q;l.quantizePolygon=D;l.quantizePolyline=r;l.quantizeRings=H;l.quantizeX=ba;l.quantizeY=R;l.toQuantizationTransform=function(z){return z?{originPosition:"upper-left"===z.originPosition?"upperLeft":"lower-left"===z.originPosition?"lowerLeft":z.originPosition,scale:z.tolerance?[z.tolerance,z.tolerance]:
[1,1],translate:f.isSome(z.extent)?[z.extent.xmin,z.extent.ymax]:[0,0]}:null};l.unquantizeBounds=function(z,w,B){return B?(w[0]=m(z,B[0]),w[1]=h(z,B[3]),w[2]=m(z,B[2]),w[3]=h(z,B[1]),w):[m(z,w[0]),h(z,w[3]),m(z,w[2]),h(z,w[1])]};l.unquantizeCoordsArray=L;l.unquantizeCoordsArrayArray=J;l.unquantizeExtent=function(z,w,B,T,C){w.xmin=m(z,B.xmin);w.ymin=h(z,B.ymin);w.xmax=m(z,B.xmax);w.ymax=h(z,B.ymax);w!==B&&(T&&(w.zmin=B.zmin,w.zmax=B.zmax),C&&(w.mmin=B.mmin,w.mmax=B.mmax));return w};l.unquantizeMultipoint=
function(z,w,B,T,C){f.isSome(B)&&(w.points=M(z,B.points,T,C));return w};l.unquantizePaths=x;l.unquantizePoint=function(z,w,B,T,C){if(f.isNone(B))return w;w.x=m(z,B.x);w.y=h(z,B.y);w!==B&&(T&&(w.z=B.z),C&&(w.m=B.m));return w};l.unquantizePoints=M;l.unquantizePolygon=function(z,w,B,T,C){f.isSome(B)&&(w.rings=e(z,B.rings,T,C));return w};l.unquantizePolyline=function(z,w,B,T,C){f.isSome(B)&&(w.paths=x(z,B.paths,T,C));return w};l.unquantizeRings=e;l.unquantizeX=m;l.unquantizeY=h;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(l,f,ia,ba){return function(){function R(Q,H,k){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=Q.returnDistinctValues??!1;this.fieldsIndex=k;this.featureAdapter=H;if((H=Q.outFields)&&!H.includes("*")){this.outFields=H;Q=0;for(const h of H){var m=
ia.getExpressionFromFieldName(h);m=(H=this.fieldsIndex.get(m))?null:ia.getWhereClause(m,k);H=H?H.name:ia.getAliasFromFieldName(h)||`FIELD_EXP_${Q++}`;this._fieldDataCache.set(h,{alias:H,clause:m})}}}var P=R.prototype;P.countDistinctValues=function(Q){if(!this.returnDistinctValues)return Q.length;Q.forEach(H=>this.getAttributes(H));return this._returnDistinctMap.size};P.getAttributes=function(Q){Q=this._processAttributesForOutFields(Q);return this._processAttributesForDistinctValues(Q)};P.getFieldValue=
function(Q,H,k){const m=k?k.name:H;let h=null;this._fieldDataCache.has(m)?h=this._fieldDataCache.get(m)?.clause:k||(h=ia.getWhereClause(H,this.fieldsIndex),this._fieldDataCache.set(m,{alias:m,clause:h}));return k?this.featureAdapter.getAttribute(Q,m):h?.calculateValue(Q,this.featureAdapter)};P.getDataValue=function(Q,H){const k=H.normalizationType,m=H.normalizationTotal;let h=H.field&&this.getFieldValue(Q,H.field,this.fieldsIndex.get(H.field));H.field2&&(h=`${ba.processNullValue(h)}${H.fieldDelimiter}${ba.processNullValue(this.getFieldValue(Q,
H.field2,this.fieldsIndex.get(H.field2)))}`,H.field3&&(h=`${h}${H.fieldDelimiter}${ba.processNullValue(this.getFieldValue(Q,H.field3,this.fieldsIndex.get(H.field3)))}`));k&&Number.isFinite(h)&&(Q="field"===k&&H.normalizationField?this.getFieldValue(Q,H.normalizationField,this.fieldsIndex.get(H.normalizationField)):null,h=ba.getNormalizedValue(h,k,Q,m));return h};P.getExpressionValue=function(Q,H,k,m){Q={attributes:this.featureAdapter.getAttributes(Q),layer:{fields:this.fieldsIndex.fields}};k=m.createExecContext(Q,
k);return m.executeFunction(H,k)};P.getExpressionValues=function(Q,H,k,m){const h={fields:this.fieldsIndex.fields};return Q.map(L=>{L={attributes:this.featureAdapter.getAttributes(L),layer:h};L=m.createExecContext(L,k);return m.executeFunction(H,L)})};P.validateItem=function(Q,H){this._fieldDataCache.has(H)||this._fieldDataCache.set(H,{alias:H,clause:ia.getWhereClause(H,this.fieldsIndex)});return this._fieldDataCache.get(H)?.clause?.testFeature(Q,this.featureAdapter)??!1};P.validateItems=function(Q,
H){this._fieldDataCache.has(H)||this._fieldDataCache.set(H,{alias:H,clause:ia.getWhereClause(H,this.fieldsIndex)});return this._fieldDataCache.get(H)?.clause?.testSet(Q,this.featureAdapter)??!1};P._processAttributesForOutFields=function(Q){const H=this.outFields;if(!H||!H.length)return this.featureAdapter.getAttributes(Q);const k={};for(const m of H){const {alias:h,clause:L}=this._fieldDataCache.get(m);k[h]=L?L.calculateValue(Q,this.featureAdapter):this.featureAdapter.getAttribute(Q,h)}return k};
P._processAttributesForDistinctValues=function(Q){if(f.isNone(Q)||!this.returnDistinctValues)return Q;var H=this.outFields,k=[];if(H)for(const h of H){var {alias:m}=this._fieldDataCache.get(h);k.push(Q[m])}else for(m in Q)k.push(Q[m]);H=`${(H||["*"]).join(",")}=${k.join(",")}`;k=this._returnDistinctMap.get(H)||0;this._returnDistinctMap.set(H,++k);return 1<k?null:Q};return l._createClass(R)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(l,f,ia){function ba(r){return null==r||"string"===typeof r&&!r?"\x3cNull\x3e":r}function R(r){const E=null!=r.minValue||null!=r.maxValue,v=!!r.sqlExpression&&r.supportsSQLExpression;return!(null!=r.normalizationField||null!=r.normalizationType)&&!E&&!v}function P(r){const {values:E,useSampleStdDev:v,supportsNullCount:G}=r;var z=Number.POSITIVE_INFINITY;let w=Number.NEGATIVE_INFINITY,B=null,T=null;var C=null;let I=null,t=0;const u=null==r.minValue?-Infinity:r.minValue,Y=null==r.maxValue?Infinity:
r.maxValue;for(const ha of E)Number.isFinite(ha)?ha>=u&&ha<=Y&&(B=null===B?ha:B+ha,z=Math.min(z,ha),w=Math.max(w,ha),t++):"string"===typeof ha&&t++;if(t&&null!=B){T=B/t;C=0;for(const ha of E)Number.isFinite(ha)&&ha>=u&&ha<=Y&&(C+=(ha-T)**2);I=v?1<t?C/(t-1):0:0<t?C/t:0;C=Math.sqrt(I)}else w=z=null;z={avg:T,count:t,max:w,min:z,stddev:C,sum:B,variance:I};G&&(z.nullcount=E.length-t);r.percentileParams&&(z.median=Q(E,r.percentileParams));return z}function Q(r,E){const {fieldType:v,value:G,orderBy:z,isDiscrete:w}=
E,B=H(v,"desc"===z);r=[...r].filter(t=>null!=t).sort((t,u)=>B(t,u));if(0===r.length)return null;if(0>=G)return r[0];if(1<=G)return r[r.length-1];var T=(r.length-1)*G,C=Math.floor(T);E=C+1;T%=1;C=r[C];const I=r[E];return E>=r.length||w||"string"===typeof C||"string"===typeof I?C:C*(1-T)+I*T}function H(r,E){const v=E?1:-1,G=h(E),z=m(E);if(!r||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...S].includes(r))return(w,B)=>"number"===typeof w&&"number"===typeof B?
G(w,B):"string"===typeof w&&"string"===typeof B?z(w,B):v;if("esriFieldTypeDate"===r)return(w,B)=>{w=(new Date(w)).getTime();B=(new Date(B)).getTime();return isNaN(w)||isNaN(B)?v:G(w,B)};if(S.has(r))return(w,B)=>G(w,B);if("esriFieldTypeString"===r)return(w,B)=>z(w,B);if("esriFieldTypeGUID"===r||"esriFieldTypeGlobalID"===r){const w=m(E);return(B,T)=>w(L(B),L(T))}return E?(w,B)=>1:(w,B)=>-1}function k(r,E,v){if(v){if(null==r)return null==E?0:1;if(null==E)return-1}else{if(null==r)return null==E?0:-1;
if(null==E)return 1}return null}function m(r){return r?(E,v)=>{const G=k(E,v,!0);if(null!=G)return G;E=E.toUpperCase();v=v.toUpperCase();return E>v?-1:E<v?1:0}:(E,v)=>{const G=k(E,v,!1);if(null!=G)return G;E=E.toUpperCase();v=v.toUpperCase();return E<v?-1:E>v?1:0}}function h(r){return r?(E,v)=>{const G=k(E,v,!0);return null!=G?G:v-E}:(E,v)=>{const G=k(E,v,!1);return null!=G?G:E-v}}function L(r){return r.substr(24,12)+r.substr(19,4)+r.substr(16,2)+r.substr(14,2)+r.substr(11,2)+r.substr(9,2)+r.substr(6,
2)+r.substr(4,2)+r.substr(2,2)+r.substr(0,2)}function J(r){return"coded-value"!==r?.type?[]:r.codedValues.map(E=>E.code)}function M(r,E){const v=e({field:E.field,normalizationType:E.normalizationType,normalizationField:E.normalizationField,classificationMethod:E.classificationMethod,standardDeviationInterval:E.standardDeviationInterval,breakCount:E.numClasses||5});r=x(r,E.minValue,E.maxValue);return ia.createGenerateRendererClassBreaks({definition:v,values:r,normalizationTotal:E.normalizationTotal})}
function x(r,E,v){const G=null==E?-Infinity:E,z=null==v?Infinity:v;return r.filter(w=>Number.isFinite(w)&&w>=G&&w<=z)}function e(r){const {breakCount:E,field:v,normalizationField:G,normalizationType:z}=r,w=r.classificationMethod||"equal-interval";return new f({breakCount:E,classificationField:v,classificationMethod:w,normalizationField:"field"===z?G:void 0,normalizationType:z,standardDeviationInterval:"standard-deviation"===w?r.standardDeviationInterval||1:void 0})}function p(r,E){const {field:v,
classificationMethod:G,standardDeviationInterval:z,normalizationType:w,normalizationField:B,normalizationTotal:T,minValue:C,maxValue:I}=E,t=E.numBins||10;let u=E=null,Y=null;G&&"equal-interval"!==G||w?({classBreaks:r}=M(r,{field:v,normalizationType:w,normalizationField:B,normalizationTotal:T,classificationMethod:G,standardDeviationInterval:z,minValue:C,maxValue:I,numClasses:t}),E=r[0].minValue,u=r[r.length-1].maxValue,Y=r.map(ha=>[ha.minValue,ha.maxValue])):(null!=C&&null!=I?(E=C,u=I):(r=P({values:r,
minValue:C,maxValue:I,useSampleStdDev:!w,supportsNullCount:R({normalizationType:w,normalizationField:B,minValue:C,maxValue:I})}),E=r.min??null,u=r.max??null),Y=V(E??0,u??0,t));return{min:E,max:u,intervals:Y}}function F(r,E){let v=-1;for(let G=r.length-1;0<=G;G--)if(E>=r[G][0]){v=G;break}return v}function V(r,E,v){const G=(E-r)/v,z=[];let w;for(let B=1;B<=v;B++)w=r+G,w=Number(w.toFixed(16)),z.push([r,B===v?E:w]),r=w;return z}const K=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,S=new Set(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),D="min max avg stddev count sum variance nullcount median".split(" ");l.calculateClassBreaks=M;l.calculateHistogram=function(r,E){var v=p(r,E);const G=v.intervals,z=v.min??0;v=v.max??0;const w=G.map((B,T)=>({minValue:G[T][0],maxValue:G[T][1],count:0}));for(const B of r)null!=B&&B>=z&&B<=v&&(r=F(G,B),-1<r&&w[r].count++);return{bins:w,minValue:z,maxValue:v,normalizationTotal:E.normalizationTotal}};l.calculatePercentile=Q;l.calculateStatistics=
P;l.calculateStringStatistics=function(r){const E=r.returnDistinct?[...(new Set(r.values))]:r.values,v=E.filter(z=>null!=z).length,G={count:v};r.supportsNullCount&&(G.nullcount=E.length-v);r.percentileParams&&(G.median=Q(E,r.percentileParams));return G};l.calculateUniqueValuesCount=function(r){const E={};for(let v of r){if(null==v||"string"===typeof v&&""===v.trim())v=null;null==E[v]?E[v]={count:1,data:v}:E[v].count++}return{count:E}};l.createClassBreaksDefinition=e;l.createUVResult=function(r,E,
v,G){r=r.count;const z=[];if(v&&E){v=[];var w=J(E[0]);for(const B of w)if(E[1]){w=J(E[1]);for(const T of w)if(E[2]){w=J(E[2]);for(const C of w)v.push(`${ba(B)}${G}${ba(T)}${G}${ba(C)}`)}else v.push(`${ba(B)}${G}${ba(T)}`)}else v.push(B);for(const B of v)r.hasOwnProperty(B)||(r[B]={data:B,count:0})}for(const B in r)E=r[B],z.push({value:E.data,count:E.count,label:E.label});return{uniqueValueInfos:z}};l.getAttributeComparator=H;l.getEqualIntervalBins=V;l.getNormalizedValue=function(r,E,v,G){let z=null;
switch(E){case "log":0!==r&&(z=Math.log(r)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(G)&&0!==G&&(z=r/G*100);break;case "field":Number.isFinite(v)&&0!==v&&(z=r/v);break;case "natural-log":0<r&&(z=Math.log(r));break;case "square-root":0<r&&(z=r**.5)}return z};l.isNullCountSupported=R;l.processNullValue=ba;l.processSummaryStatisticsResult=function(r,E){let v;for(v in r)D.includes(v)&&(Number.isFinite(r[v])||(r[v]=null));if(!E)return r;["avg","stddev","variance"].forEach(G=>{null!=r[G]&&
(r[G]=Math.ceil(r[G]))});return r};l.resolveCBResult=function(r,E){let v=r.classBreaks;const G=v[0].minValue,z=v[v.length-1].maxValue,w="standard-deviation"===E;v=v.map(B=>{const T=B.label;B={minValue:B.minValue,maxValue:B.maxValue,label:T};if(w&&T){const C=T.match(K)?.map(I=>+I.trim())??[];2===C.length?(B.minStdDev=C[0],B.maxStdDev=C[1],0>C[0]&&0<C[1]&&(B.hasAvg=!0)):1===C.length&&(T.includes("\x3c")?(B.minStdDev=null,B.maxStdDev=C[0]):T.includes("\x3e")&&(B.minStdDev=C[0],B.maxStdDev=null))}return B});
return{minValue:G,maxValue:z,classBreakInfos:v,normalizationTotal:r.normalizationTotal}};l.statisticTypes=D;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,ia,ba,R,P,Q,H,k,m){P=new ia.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ia=new ia.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});ba=function(h){function L(M){M=J.call(this,M);M.type="class-breaks-definition";M.breakCount=
null;M.classificationField=null;M.classificationMethod=null;M.normalizationField=null;M.normalizationType=null;return M}l._inherits(L,h);var J=l._createSuper(L);l._createClass(L,[{key:"standardDeviationInterval",set:function(M){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",M)}},{key:"definedInterval",set:function(M){"defined-interval"===this.classificationMethod&&this._set("definedInterval",M)}}]);return L}(ba.JSONSupport);f.__decorate([k.enumeration({classBreaksDef:"class-breaks-definition"})],
ba.prototype,"type",void 0);f.__decorate([R.property({json:{write:!0}})],ba.prototype,"breakCount",void 0);f.__decorate([R.property({json:{write:!0}})],ba.prototype,"classificationField",void 0);f.__decorate([R.property({type:String,json:{read:P.read,write:P.write}})],ba.prototype,"classificationMethod",void 0);f.__decorate([R.property({json:{write:!0}})],ba.prototype,"normalizationField",void 0);f.__decorate([R.property({json:{read:ia.read,write:ia.write}})],ba.prototype,"normalizationType",void 0);
f.__decorate([R.property({value:null,json:{write:!0}})],ba.prototype,"standardDeviationInterval",null);f.__decorate([R.property({value:null,json:{write:!0}})],ba.prototype,"definedInterval",null);return ba=f.__decorate([m.subclass("esri.rest.support.ClassBreaksDefinition")],ba)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,f,ia){l.enumeration=function(ba,R={}){ba=ba instanceof f.JSONMap?ba:new f.JSONMap(ba,R);ba={type:R?.ignoreUnknown??
!0?ba.apiValues:String,json:{type:ba.jsonValues,read:R?.readOnly?!1:{reader:ba.read},write:{writer:ba.write}}};void 0!==R?.readOnly&&(ba.readOnly=!!R.readOnly);void 0!==R?.default&&(ba.json.default=R.default);void 0!==R?.name&&(ba.json.name=R.name);void 0!==R?.nonNullable&&(ba.nonNullable=R.nonNullable);return ia.property(ba)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(l,f){function ia(J){var M=
J.definition;const {classificationMethod:x,normalizationType:e,definedInterval:p}=M;M=M.breakCount??1;const F=[];var V=J.values;if(0===V.length)return[];V=V.sort((v,G)=>v-G);var K=V[0],S=V[V.length-1];if("equal-interval"===x)if(V.length>=M){V=(S-K)/M;J=K;for(var D=1;D<M;D++){var r=Number((K+D*V).toFixed(6));F.push({minValue:J,maxValue:r,label:ba(J,r,e)});J=r}F.push({minValue:J,maxValue:S,label:ba(J,S,e)})}else V.forEach(v=>{F.push({minValue:v,maxValue:v,label:ba(v,v,e)})});else if("natural-breaks"===
x){V=R(V);J=P(V.uniqueValues,J.valueFrequency||V.valueFrequency,M);for(D=1;D<M;D++)V.uniqueValues.length>D&&(r=Number(V.uniqueValues[J[D]].toFixed(6)),F.push({minValue:K,maxValue:r,label:ba(K,r,e)}),K=r);F.push({minValue:K,maxValue:S,label:ba(K,S,e)})}else if("quantile"===x)if(V.length>=M&&K!==S){J=Math.ceil(V.length/M);D=0;for(r=1;r<M;r++){var E=J+D-1;E>V.length&&(E=V.length-1);0>E&&(E=0);F.push({minValue:K,maxValue:V[E],label:ba(K,V[E],e)});K=V[E];D+=J;J=Math.ceil((V.length-D)/(M-r))}F.push({minValue:K,
maxValue:S,label:ba(K,S,e)})}else for(M=-1,S=0;S<V.length;S++)K=V[S],K!==M&&(M=K,F.push({minValue:M,maxValue:K,label:ba(M,K,e)}),M=K);else if("standard-deviation"===x)if(J=k(V),D=m(V,J),0===D)F.push({minValue:V[0],maxValue:V[0],label:ba(V[0],V[0],e)});else{V=H(K,S,M,J,D)*D;D=0;for(r=M;1<=r;r--)E=Number((J-(r-.5)*V).toFixed(6)),F.push({minValue:K,maxValue:E,label:ba(K,E,e)}),K=E,D++;r=Number((J+.5*V).toFixed(6));F.push({minValue:K,maxValue:r,label:ba(K,r,e)});K=r;D++;for(E=1;E<=M;E++)r=D===2*M?S:Number((J+
(E+.5)*V).toFixed(6)),F.push({minValue:K,maxValue:r,label:ba(K,r,e)}),K=r,D++}else if("defined-interval"===x){if(!p)return F;M=V[0];S=V[V.length-1];V=Math.ceil((S-M)/p);K=M;for(J=1;J<V;J++)D=Number((M+J*p).toFixed(6)),F.push({minValue:K,maxValue:D,label:ba(K,D,e)}),K=D;F.push({minValue:K,maxValue:S,label:ba(K,S,e)})}return F}function ba(J,M,x){let e=null;return e=J===M?x&&"percent-of-total"===x?J+"%":J.toString():x&&"percent-of-total"===x?J+"% - "+M+"%":J+" - "+M}function R(J){const M=[],x=[];let e=
Number.MIN_VALUE,p=1,F=-1;for(let V=0;V<J.length;V++){const K=J[V];K===e?(p++,x[F]=p):null!==K&&(M.push(K),e=K,p=1,x.push(p),F++)}return{uniqueValues:M,valueFrequency:x}}function P(J,M,x){var e=J.length;const p=[];x>e&&(x=e);for(var F=0;F<x;F++)p.push(Math.round(F*e/x-1));p.push(e-1);F=Q(p,J,M,x);e=F.mean;F=F.sdcm;var V=x,K=0,S=0;let D=0,r=0,E=!0;for(let G=0;2>G&&E;G++){0===G&&(E=!1);for(var v=0;v<V-1;v++)for(;p[v+1]+1!==p[v+2];)if(p[v+1]+=1,K=h(v,p,J,M),D=K.sbMean,K=K.sbSdcm,S=h(v+1,p,J,M),r=S.sbMean,
S=S.sbSdcm,K+S<F[v]+F[v+1])F[v]=K,F[v+1]=S,e[v]=D,e[v+1]=r,E=!0;else{--p[v+1];break}for(v=V-1;0<v;v--)for(;p[v]!==p[v-1]+1;)if(--p[v],K=h(v-1,p,J,M),D=K.sbMean,K=K.sbSdcm,S=h(v,p,J,M),r=S.sbMean,S=S.sbSdcm,K+S<F[v-1]+F[v])F[v-1]=K,F[v]=S,e[v-1]=D,e[v]=r,E=!0;else{p[v]+=1;break}}E&&(F=Q(p,J,M,x));return p}function Q(J,M,x,e){let p=[];var F=[],V=[];let K=0;const S=[],D=[];for(var r=0;r<e;r++){var E=h(r,J,M,x);S.push(E.sbMean);D.push(E.sbSdcm);K+=D[r]}E=K;for(r=!0;r||K<E;){r=!1;p=[];for(F=0;F<e;F++)p.push(J[F]);
for(V=0;V<e;V++)for(E=J[V]+1;E<=J[V+1];E++)if(F=M[E],0<V&&E!==J[V+1]&&Math.abs(F-S[V])>Math.abs(F-S[V-1]))J[V]=E;else if(V<e-1&&J[V]!==E-1&&Math.abs(F-S[V])>Math.abs(F-S[V+1])){J[V+1]=E-1;break}E=K;K=0;F=[];V=[];for(let v=0;v<e;v++){F.push(S[v]);V.push(D[v]);const G=h(v,J,M,x);S[v]=G.sbMean;D[v]=G.sbSdcm;K+=D[v]}}if(K>E){for(M=0;M<e;M++)J[M]=p[M],S[M]=F[M],D[M]=V[M];K=E}return{mean:S,sdcm:D}}function H(J,M,x,e,p){J=Math.max(e-J,M-e)/p/x;return 1<=J?1:.5<=J?.5:.25}function k(J){let M=0;for(let x=0;x<
J.length;x++)M+=J[x];return M/=J.length}function m(J,M){let x=0;for(let e=0;e<J.length;e++){const p=J[e];x+=(p-M)*(p-M)}x/=J.length;return Math.sqrt(x)}function h(J,M,x,e){var p=0,F=0;for(var V=M[J]+1;V<=M[J+1];V++){const K=e[V];p+=x[V]*K;F+=K}0>=F&&L.warn("Exception in Natural Breaks calculation");p/=F;F=0;for(V=M[J]+1;V<=M[J+1];V++)F+=e[V]*(x[V]-p)**2;return{sbMean:p,sbSdcm:F}}const L=f.getLogger("esri.rest.support.generateRendererUtils");l.createGenerateRendererClassBreaks=function(J){const {normalizationTotal:M}=
J;return{classBreaks:ia(J),normalizationTotal:M}};l.createGenerateRendererUniqueValues=function(J){J=R(J);const M=[],x=J.uniqueValues.length;for(let e=0;e<x;e++){const p=J.uniqueValues[e];M.push({value:p,count:J.valueFrequency[e],label:p.toString()})}return{uniqueValues:M}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(l){l.makeEdgeCandidate=function(f,ia,ba,R,P,Q=!1){return{objectId:f,target:ia,
distance:ba,type:"edge",start:R,end:P,draped:Q}};l.makeVertexCandidate=function(f,ia,ba){return{objectId:f,target:ia,distance:ba,type:"vertex"}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,f,ia,ba,R,P,Q){function H(na,ra,Ba){if(na)for(const c of na)(na=(na=R.getDeepValue(c,ra))&&"function"!==typeof na&&
Ba.get(na))&&R.setDeepValue(c,na.name,ra)}function k(na,ra){if(!na||!ra)return[];Ha.clear();m(Ha,na,ra);return Array.from(Ha).sort()}function m(na,ra,Ba){if(Ba)if(ra?.fields?.length)if(Ba.includes("*"))for(const {name:c}of ra.fields)na.add(c);else for(const c of Ba)h(na,ra,c);else if(Ba.includes("*"))na.clear(),na.add("*");else for(const c of Ba)null!=c&&na.add(c)}function h(na,ra,Ba){"string"===typeof Ba&&(ra?(ra=ra.get(Ba))&&na.add(ra.name):na.add(Ba))}async function L(na,ra,Ba){if(Ba){var {arcadeUtils:c}=
await Q.loadArcade();Ba=c.extractFieldNames(Ba,ra?.fields?.map(n=>n.name));for(const n of Ba)h(na,ra,n)}}async function J(na,ra,Ba){if(Ba&&"1\x3d1"!==Ba){const c=(await new Promise((n,da)=>l(["../../core/sql/WhereClause"],n,da))).WhereClause.create(Ba,ra);if(!c.isStandardized)throw new ia("fieldUtils:collectFilterFields","Where clause is not standardized",{where:Ba});m(na,ra,c.fieldNames)}}function M(na,ra){for(const Ba of na)if(Ba&&Ba.valueType&&Ba.valueType===ra)return Ba.name;return null}async function x(na,
ra){if(ra){var Ba=ra.elevationInfo?.featureExpressionInfo;if(Ba)return Ba.collectRequiredFields(na,ra.fieldsIndex)}}async function e(na,ra,Ba){const c=[];Ba?.expressionInfos&&c.push(...Ba.expressionInfos.map(n=>L(na,ra.fieldsIndex,n.expression)));Ba=Ba?.content;if(Array.isArray(Ba))for(const n of Ba)"expression"===n.type&&n.expressionInfo&&c.push(L(na,ra.fieldsIndex,n.expressionInfo.expression));await Promise.all(c)}async function p(na,ra,Ba){ra&&Ba&&(Ba.valueExpression?await L(na,ra.fieldsIndex,
Ba.valueExpression):Ba.field&&h(na,ra.fieldsIndex,Ba.field))}async function F(na,ra){const {labelingInfo:Ba,fieldsIndex:c}=ra;Ba&&Ba.length&&await Promise.all(Ba.map(n=>V(na,c,n)))}async function V(na,ra,Ba){if(Ba){var c=Ba.getLabelExpression();Ba=Ba.where;"arcade"===c.type?await L(na,ra,c.expression):(c=c.expression.match(/{[^}]*}/g))&&c.forEach(n=>{h(na,ra,n.slice(1,-1))});await J(na,ra,Ba)}}function K(na){return"number"===typeof na&&!isNaN(na)&&isFinite(na)}function S(na){return null===na||K(na)}
function D(na){return null===na||Ja(na)}function r(na){return null!=na&&"string"===typeof na}function E(na){return null===na||r(na)}function v(){return!0}function G(na,ra){let Ba;switch(na.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Ba=na.nullable?D:Ja;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Ba=na.nullable?S:K;break;case "string":case "esriFieldTypeString":Ba=
na.nullable?E:r;break;default:Ba=v}return 1===arguments.length?Ba:Ba(ra)}function z(na){return null!=na&&Ka.has(na.type)}function w(na,ra){return null==na||na.nullable&&null===ra?null:z(na)&&!B(na.type,Number(ra))?f.NumericRangeValidationError.OUT_OF_RANGE:G(na,ra)?na.domain?P.validateDomainValue(na.domain,ra):null:f.TypeValidationError.INVALID_TYPE}function B(na,ra){na="string"===typeof na?T(na):na;if(!na)return!1;const Ba=na.min,c=na.max;return na.isInteger?Ja(ra)&&ra>=Ba&&ra<=c:ra>=Ba&&ra<=c}function T(na){switch(na){case "esriFieldTypeSmallInteger":case "small-integer":return Qa;
case "esriFieldTypeInteger":case "integer":return Wa;case "esriFieldTypeSingle":case "single":return Va;case "esriFieldTypeDouble":case "double":return gb}}function C(na,ra,Ba){if(!ra||!ra.attributes||!na){if(ba.isSome(Ba))for(var c of na??[])Ba.add(c);return!0}ra=ra.attributes;c=!1;for(const n of na)if(!(n in ra))if(c=!0,ba.isSome(Ba))Ba.add(n);else break;return c}const I=/^([0-9])/,t=/[^a-z0-9_\u0080-\uffff]/gi,u=/_{2,}/g,Y=/^_/,ha=/_$/,va="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
za=["field","normalizationField"],Ha=new Set,Ja=(()=>"isInteger"in Number?Number.isInteger:na=>"number"===typeof na&&isFinite(na)&&Math.floor(na)===na)(),Ia=["integer","small-integer","single","double"],Ka=new Set([...Ia,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=
void 0;(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Qa={min:-32768,max:32767,isInteger:!0},Wa={min:-2147483648,max:2147483647,isInteger:!0},Va={min:-3.4E38,max:1.2E38,isInteger:!1},gb={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};f.collectArcadeFieldNames=L;f.collectElevationFields=x;f.collectFeatureReductionFields=async function(na,ra,Ba){if(ra&&Ba&&"fields"in Ba){var c=[];c.push(e(na,ra,Ba.popupTemplate));Ba.fields&&c.push(...Ba.fields.map(async n=>
{n.onStatisticExpression?L(na,ra.fieldsIndex,n.onStatisticExpression.expression):na.add(n.onStatisticField)}));await Promise.all(c)}};f.collectField=h;f.collectFields=m;f.collectFilterFields=async function(na,ra,Ba){ra&&(ra.timeInfo&&ba.isSome(Ba)&&Ba.timeExtent&&m(na,ra.fieldsIndex,[ra.timeInfo.startField,ra.timeInfo.endField]),ra.floorInfo&&m(na,ra.fieldsIndex,[ra.floorInfo.floorField]),ba.isSome(Ba)&&ba.isSome(Ba.where)&&await J(na,ra.fieldsIndex,Ba.where))};f.collectLabelingFields=F;f.collectOrderByInfos=
async function(na,ra,Ba){ra&&Ba&&await Promise.all(Ba.map(c=>p(na,ra,c)))};f.collectPopupTemplateFields=e;f.doubleRange=gb;f.featureHasFields=function(na,ra){return!C(na,ra,null)};f.fixFields=k;f.fixRendererFields=function(na,ra){if(null!=na&&null!=ra)for(const Ba of Array.isArray(na)?na:[na])if(H(va,Ba,ra),"visualVariables"in Ba&&Ba.visualVariables)for(const c of Ba.visualVariables)H(za,c,ra)};f.fixTimeInfoFields=function(na,ra){if(null!=na&&ra?.fields?.length)if("startField"in na){var Ba=ra.get(na.startField);
ra=ra.get(na.endField);na.startField=Ba?.name??null;na.endField=ra?.name??null}else Ba=ra.get(na.startTimeField),ra=ra.get(na.endTimeField),na.startTimeField=Ba?.name??null,na.endTimeField=ra?.name??null};f.getDisplayFieldName=function({displayField:na,fields:ra}){if(na)return na;if(!ra||!ra.length)return null;if(!(na=M(ra,"name-or-title")||M(ra,"unique-identifier")||M(ra,"type-or-category")))a:{for(const Ba of ra)if(Ba&&Ba.name&&(ra=Ba.name.toLowerCase(),ra.includes("name")||ra.includes("title"))){na=
Ba.name;break a}na=null}return na};f.getElevationFields=async function(na){if(!na)return[];const ra=new Set;await x(ra,na);return Array.from(ra).sort()};f.getExpressionFields=async function(na,ra){const Ba=new Set;for(const c of ra)await L(Ba,na.fieldsIndex,c);return Array.from(Ba).sort()};f.getFeatureEditFields=function(na){if(!na)return[];const ra="editFieldsInfo"in na&&na.editFieldsInfo;return ra?k(na.fieldsIndex,[ra&&ra.creatorField,ra&&ra.creationDateField,ra&&ra.editorField,ra&&ra.editDateField]):
[]};f.getFeatureGeometryFields=function(na){if(!na)return[];const ra=na.geometryFieldsInfo;return ra?k(na.fieldsIndex,[ra.shapeAreaField,ra.shapeLengthField]):[]};f.getFieldDefaultValue=function(na){const ra=na.defaultValue;if(void 0!==ra&&G(na,ra))return ra;if(na.nullable)return null};f.getFieldRange=function(na){const ra=P.getDomainRange(na.domain);if(ra)return ra;if(z(na))return T(na.type)};f.getLabelingFields=async function(na){if(!na)return[];const ra=new Set;await F(ra,na);return Array.from(ra).sort()};
f.getNumericTypeForValue=function(na){if(!K(na))return null;if(Ja(na)){if(na>=Qa.min&&na<=Qa.max)return"esriFieldTypeSmallInteger";if(na>=Wa.min&&na<=Wa.max)return"esriFieldTypeInteger"}return na>=Va.min&&na<=Va.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=async function(na){if(!na)return[];const ra="timeInfo"in na&&na.timeInfo;return ra?k(na.fieldsIndex,[na.trackIdField,ra.startField,ra.endField]):[]};f.integerRange=Wa;f.isDateField=function(na){return null!=na&&("date"===na.type||
"esriFieldTypeDate"===na.type)};f.isNumberInRange=B;f.isNumericField=z;f.isRasterPixelValueField=function(na){return na?["raster.itempixelvalue","raster.servicepixelvalue"].some(ra=>na.toLowerCase().startsWith(ra)):!1};f.isStringField=function(na){return null!=na&&("string"===na.type||"esriFieldTypeString"===na.type)};f.isValidFieldValue=function(na,ra){return null===w(na,ra)};f.isValueMatchingFieldType=G;f.normalizeFieldName=function(na){return null==na?null:na.trim().replace(t,"_").replace(u,"_").replace(Y,
"").replace(ha,"").replace(I,"F$1")||null};f.numericTypes=Ia;f.packFields=function(na,ra,Ba=1){if(!ra||!na)return[];if(ra.includes("*"))return["*"];ra=k(na,ra);return ra.length/na.fields.length>=Ba?["*"]:ra};f.populateMissingFields=C;f.rendererFields=va;f.sanitizeNullFieldValue=function(na){return null==na||"number"===typeof na&&isNaN(na)?null:na};f.singleRange=Va;f.smallIntegerRange=Qa;f.unpackFieldNames=function(na,ra){return ba.isNone(ra)||ba.isNone(na)?[]:ra.includes("*")?(na.fields??[]).map(Ba=>
Ba.name):ra};f.validateFieldValue=w;f.validationErrorToString=function(na,ra,Ba){switch(na){case P.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Ba} is not in the coded domain - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;case P.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Ba} is out of the range of valid values - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;case f.TypeValidationError.INVALID_TYPE:return`Value ${Ba} is not a valid value for the field type - field: ${ra.name}, type: ${ra.type}, nullable: ${ra.nullable}`;
case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:c,max:n}=T(ra.type);return`Value ${Ba} is out of range for the number type - field: ${ra.name}, type: ${ra.type}, value range is ${c} to ${n}`}};f.visualVariableFields=za;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(l){l.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};l.validateDomainValue=function(f,ia){switch(f.type){case "range":const ba="range"in f?f.range[0]:f.minValue;f="range"in f?f.range[1]:f.maxValue;if(null!=ba&&+ia<ba||null!=f&&+ia>f)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==
f.codedValues||f.codedValues.every(R=>null==R||R.code!==ia))return l.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(R=>null==R||R.code!==ia))return l.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(l,f,ia,ba,R,P,Q,H){function k(){h||(h=(async()=>{const J=await new Promise((M,x)=>l(["./arcadeUtils"],M,x));return{arcade:J.arcade,arcadeUtils:J,Dictionary:J.Dictionary,Feature:J.arcadeFeature}})());return h}const m=P.getLogger("esri.support.arcadeOnDemand");let h;ba=(J,M,x)=>L.create(J,M,x,null,["$feature","$view"]);let L=function(){function J(x,e,p,F,V,K,S){this.script=x;this.evaluate=F;this.fields=Array.isArray(K)?K:K.fields;this._syntaxTree=p;this._arcade=e;this._arcadeFeature=V;this._spatialReference=
S;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}J.create=async function(x,e,p,F,V,K){const {arcade:S,Feature:D,Dictionary:r}=await k(),E=H.fromJSON(e);let v;try{v=S.parseScript(x,K)}catch(C){return m.error(new R("arcade-bad-expression","Failed to parse arcade script",{script:x,error:C})),null}V=V.reduce((C,I)=>({...C,[I]:null}),{});let G=null;Q.isSome(F)&&(G=new r(F),G.immutable=!0,V.$config=null);K=
(F=S.scriptUsesGeometryEngine(v))&&S.enableGeometrySupport();const z=S.scriptUsesFeatureSet(v)&&S.enableFeatureSetSupport(),w=(e=S.scriptIsAsync(v))&&S.enableAsyncSupport();V={vars:V,spatialReference:E,useAsync:!!w};await Promise.all([K,z,w]);K=new Set;await S.loadDependentModules(K,v,null,e,F);const B=new r;B.immutable=!1;B.setField("scale",0);const T=S.compileScript(v,V);return new J(x,S,v,C=>{"$view"in C&&C.$view&&(B.setField("scale","object"===typeof C.$view?C.$view.scale:void 0),C.$view=B);G&&
(C.$config=G);return T({vars:C,spatialReference:E})},new D,p,E)};var M=J.prototype;M.repurposeFeature=function(x){x.geometry&&!x.geometry.spatialReference&&(x.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(x.geometry,x.attributes,{fields:this.fields});return this._arcadeFeature};M.referencesGeometry=function(){return this._referencesGeometry};M.referencesScale=function(){return this._referencesScale};return ia._createClass(J)}();f.ArcadeExpression=
L;f.createDictionaryExpression=(J,M,x,e)=>L.create(J,M,x,e,["$feature","$view"]);f.createLabelExpression=(J,M,x)=>L.create(J,M,x,null,["$feature"]);f.createRendererExpression=ba;f.createVVExpression=ba;f.loadArcade=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(l,f,ia,ba,R,P,Q,H,k,m,h,L){function J(){return new Promise((F,V)=>l(["../../../geometry/geometryEngineJSON"],F,V))}const M={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var x={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},e={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},p={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=
function(F){if(P.isExtent(F))return!0;if(P.isPolygon(F)){for(const V of F.rings)if(5!==V.length||V[0][0]!==V[1][0]||V[0][0]!==V[4][0]||V[2][0]!==V[3][0]||V[0][1]!==V[3][1]||V[0][1]!==V[4][1]||V[1][1]!==V[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(F,V,K){const {spatialRel:S,geometry:D}=F;if(D){if(null==S||!0!==x[S])throw new ia("feature-store:unsupported-query","Unsupported query spatial relationship",{query:F});if(Q.isValid(D.spatialReference)&&Q.isValid(K)){if(null==
D||!0!==e[P.getJsonType(D)])throw new ia("feature-store:unsupported-query","Unsupported query geometry type",{query:F});if(null==V||!0!==p[V])throw new ia("feature-store:unsupported-query","Unsupported layer geometry type",{query:F});if(F.outSR)return h.checkProjectionSupport(F.geometry&&F.geometry.spatialReference,F.outSR)}}};f.getSpatialQueryOperator=function(F,V,K,S,D){if(P.isPolygon(V)&&"esriGeometryPoint"===K&&("esriSpatialRelIntersects"===F||"esriSpatialRelContains"===F)){const r=k.convertFromPolygon(new m,
V,!1,!1);return Promise.resolve(E=>H.polygonContainsPoint(r,!1,!1,E))}if(P.isPolygon(V)&&"esriGeometryMultipoint"===K){const r=k.convertFromPolygon(new m,V,!1,!1);if("esriSpatialRelContains"===F)return Promise.resolve(E=>H.polygonContainsMultipoint(r,!1,!1,E,S,D))}if(P.isExtent(V)&&"esriGeometryPoint"===K&&("esriSpatialRelIntersects"===F||"esriSpatialRelContains"===F))return Promise.resolve(r=>ba.extentContainsPoint(V,L.getGeometry(K,S,D,r)));if(P.isExtent(V)&&"esriGeometryMultipoint"===K&&"esriSpatialRelContains"===
F)return Promise.resolve(r=>ba.extentContainsMultipoint(V,L.getGeometry(K,S,D,r)));if(P.isExtent(V)&&"esriSpatialRelIntersects"===F){const r=R.getExtentIntersector(K);return Promise.resolve(E=>r(V,L.getGeometry(K,S,D,E)))}return J().then(r=>{const E=r[M[F]].bind(null,V.spatialReference,V);return v=>E(L.getGeometry(K,S,D,v))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(l,f){l.extentIntersectsExtent=
f.extentIntersectsExtent;l.extentIntersectsMultipoint=f.extentIntersectsMultipoint;l.extentIntersectsPoint=f.extentIntersectsPoint;l.extentIntersectsPolygon=f.extentIntersectsPolygon;l.extentIntersectsPolyline=f.extentIntersectsPolyline;l.extentIntersectsRings=f.extentIntersectsRings;l.getFeatureExtentIntersector=f.getFeatureExtentIntersector;l.isSelfIntersecting=f.isSelfIntersecting;l.segmentIntersects=f.segmentIntersects;l.getExtentIntersector=function(ia){return"mesh"===ia?f.extentIntersectsExtent:
f.getFeatureExtentIntersector(ia)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function f(ia,ba,R,P,Q){if(!ia)return!1;ba=ba?R?4:3:R?3:2;const {coords:H,lengths:k}=ia;R=!1;ia=0;for(const h of k){var m=ia;for(let L=ia,J=ia+h*ba;L<J;L+=ba){m=L+ba;m===J&&(m=ia);const M=H[L],x=H[L+1],e=H[m];m=H[m+1];(x<Q&&m>=Q||m<Q&&x>=Q)&&M+(Q-x)/(m-x)*(e-M)<P&&(R=!R)}ia+=h*ba}return R}l.polygonContainsCoords=f;l.polygonContainsMultipoint=
function(ia,ba,R,P,Q,H){Q=Q?H?4:3:H?3:2;const {coords:k,lengths:m}=P;if(!m)return!1;for(let h=0,L=0;h<m.length;h++,L+=Q)if(!f(ia,ba,R,k[L],k[L+1]))return!1;return!0};l.polygonContainsPoint=function(ia,ba,R,P){return f(ia,ba,R,P.coords[0],P.coords[1])};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function f(R,P,Q,H,k){if(null!=H&&null!=k)return m=>{const h=R.getAttribute(m,P);m=R.getAttribute(m,Q);
return(null==h||h<=k)&&(null==m||m>=H)};if(null!=H)return m=>{m=R.getAttribute(m,Q);return null==m||m>=H};if(null!=k)return m=>{m=R.getAttribute(m,P);return null==m||m<=k}}function ia(R,P,Q,H){if(null!=Q&&null!=H&&Q===H)return k=>R.getAttribute(k,P)===Q;if(null!=Q&&null!=H)return k=>{k=R.getAttribute(k,P);return k>=Q&&k<=H};if(null!=Q)return k=>R.getAttribute(k,P)>=Q;if(null!=H)return k=>R.getAttribute(k,P)<=H}function ba(){return()=>!1}l.getTimeExtent=async function(R,P){if(!R)return null;const Q=
P.featureAdapter,{startTimeField:H,endTimeField:k}=R;let m=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;if(H&&k)await P.forEach(L=>{const J=Q.getAttribute(L,H);L=Q.getAttribute(L,k);null==J||isNaN(J)||(m=Math.min(m,J));null==L||isNaN(L)||(h=Math.max(h,L))});else{const L=H||k;await P.forEach(J=>{J=Q.getAttribute(J,L);null==J||isNaN(J)||(m=Math.min(m,J),h=Math.max(h,J))})}return{start:m,end:h}};l.getTimeOperator=function(R,P,Q){if(!P||!R)return null;const {startTimeField:H,endTimeField:k}=R;
if(!H&&!k)return null;const {start:m,end:h}=P;return null===m&&null===h?null:void 0===m&&void 0===h?ba():H&&k?f(Q,H,k,m,h):ia(Q,H||k,m,h)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,f){function ia(R){return"oid"===R.type||"esriFieldTypeOID"===R.type}function ba(R){return"global-id"===R.type||"esriFieldTypeGlobalID"===R.type}return function(){function R(Q=[]){this.fields=
[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(Q){this.fields=Q;var H=[];for(const k of Q){Q=k?.name;const m=f.normalizeFieldName(k?.name)?.toLowerCase()??"";if(Q&&m){const h=Q.trim().toLowerCase();this._fieldsMap.set(Q,k);this._fieldsMap.set(h,k);this._normalizedFieldsMap.set(m,k);H.push(h);"date"===k.type||"esriFieldTypeDate"===k.type?(this.dateFields.push(k),
this._dateFieldsSet.add(k)):f.isNumericField(k)&&(this._numericFieldsSet.add(k),this.numericFields.push(k));ia(k)||ba(k)||(k.editable=null==k.editable||!!k.editable,k.nullable=null==k.nullable||!!k.nullable)}}H.sort();this.uid=H.join(",")}}var P=R.prototype;P.destroy=function(){this._fieldsMap.clear()};P.has=function(Q){return null!=this.get(Q)};P.get=function(Q){if(Q){var H=this._fieldsMap.get(Q);if(H)return H;(H=this._fieldsMap.get(Q.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(Q)?.toLowerCase()??
""))&&this._fieldsMap.set(Q,H);return H}};P.isDateField=function(Q){return this._dateFieldsSet.has(this.get(Q))};P.isNumericField=function(Q){return this._numericFieldsSet.has(this.get(Q))};P.normalizeFieldName=function(Q){if(Q=this.get(Q))return Q.name??void 0};l._createClass(R,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const Q of this.fields)ia(Q)||ba(Q)||Q.nullable||void 0!==f.getFieldDefaultValue(Q)||this._requiredFields.push(Q)}return this._requiredFields}}]);
return R}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),function(l,f,ia,ba,R,P,Q,H,k,m,h,L,J,M,x){function e(G){return p.has(G)?p.get(G):
"number"===typeof G?G:1}l.Task=void 0;(function(G){G[G.YIELD=1]="YIELD"})(l.Task||(l.Task={}));l.TaskPriority=void 0;(function(G){G.RESOURCE_CONTROLLER_IMMEDIATE="immediate";G.RESOURCE_CONTROLLER="schedule";G.SLIDE="slide";G.STREAM_DATA_LOADER="stream loader";G.ELEVATION_QUERY="elevation query";G.TERRAIN_SURFACE="terrain";G.SURFACE_GEOMETRY_UPDATES="surface geometry updates";G.LOD_RENDERER="LoD renderer";G.GRAPHICS_CORE="Graphics3D";G.I3S_CONTROLLER="I3S";G.POINT_CLOUD_LAYER="point cloud";G.FEATURE_TILE_FETCHER=
"feature fetcher";G.OVERLAY="overlay";G.STAGE="stage";G.GRAPHICS_DECONFLICTOR="graphics deconflictor";G.FILTER_VISIBILITY="Graphics3D filter visibility";G.SCALE_VISIBILITY="Graphics3D scale visibility";G.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";G.POINT_OF_INTEREST_FREQUENT="POI frequent";G.POINT_OF_INTEREST_INFREQUENT="POI infrequent";G.LABELER="labeler";G.FEATURE_QUERY_ENGINE="feature query";G.FEATURE_TILE_TREE="feature tile tree";G.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";G.ELEVATION_ALIGNMENT=
"elevation alignment";G.TEXT_TEXTURE_ATLAS="text texture atlas";G.TEXTURE_UNLOAD="texture unload";G.LINE_OF_SIGHT_TOOL="line of sight tool";G.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";G.ELEVATION_PROFILE="elevation profile";G.SNAPPING="snapping";G.SHADOW_ACCUMULATOR="shadow accumulator";G.CLOUDS_GENERATOR="clouds generator";G[G.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||(l.TaskPriority={}));const p=new Map([[l.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[l.TaskPriority.RESOURCE_CONTROLLER,
4],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.LOD_RENDERER,2],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,4],[l.TaskPriority.STAGE,4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,
4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.CLOUDS_GENERATOR,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,
0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,30]]),F=h.Milliseconds(6.5),V=h.Milliseconds(1),K=h.Milliseconds(30),S=h.Milliseconds(1E3/30),D=h.Milliseconds(100);var r;(function(G){let z=function(){function T(){this._updating=new L.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new Q("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new B;this._state=x.RenderState.INTERACTING;this._tasks=new H;this._runQueue=new H;this._load=
0;this._idleStateCallbacks=new H;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=m.watch(()=>M.SCHEDULER_LOG_SLOW_TASKS,t=>this._debug=t,m.initial);for(const t of Object.keys(l.TaskPriority))this.performanceInfo.tasks.set(l.TaskPriority[t],new Q(l.TaskPriority[t]));const I=this;this._test={FRAME_SAFETY_BUDGET:F,INTERACTING_BUDGET:S,IDLE_BUDGET:D,get availableBudget(){return I._budget.budget},usedBudget:0,getBudget:()=>I._budget,setBudget:t=>I._budget=t,updateTask:t=>this._updateTask(t),
getState:t=>this._getState(t),getRuntime:t=>this._getRuntime(t),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var C=T.prototype;C._updatingChanged=function(){this._updating.set(this._tasks.some(I=>I.needsUpdate))};C.destroy=function(){this._tasks.toArray().forEach(I=>I.remove());this._tasks.clear();P.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};C.taskRunningChanged=function(I){this._updatingChanged();
I&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};C.registerTask=function(I,t){const u=e(I);t=new w(this,I,t,u);this._tasks.push(t);this._updatingChanged();this.performanceInfo.tasks.has(I)||this.performanceInfo.tasks.set(I,new Q(I));return t};C.registerIdleStateCallbacks=function(I,t){const u={idleBegin:I,idleEnd:t};this._idleStateCallbacks.push(u);
this.state===x.RenderState.IDLE&&this._idleUpdatesStartFired&&u.idleBegin();const Y=this;return{remove:()=>this._removeIdleStateCallbacks(u),set idleBegin(ha){Y._idleUpdatesStartFired&&(u.idleEnd(),Y._state===x.RenderState.IDLE&&ha());u.idleBegin=ha},set idleEnd(ha){u.idleEnd=ha}}};C.updateBudget=function(I){this._test.usedBudget=0;++this._frameNumber;let t=F,u=I.frameDuration,Y=V;switch(this.state){case x.RenderState.IDLE:t=h.Milliseconds(0);u=h.Milliseconds(Math.max(D,I.frameDuration));Y=K;break;
case x.RenderState.INTERACTING:u=h.Milliseconds(Math.max(S,I.frameDuration))}u=h.Milliseconds(u-I.elapsedFrameTime-t);if(this.state!==x.RenderState.IDLE&&u<V&&!this._forceTask)return this._forceTask=!0,!1;u=h.Milliseconds(Math.max(u,Y));this._budget.reset(u,this.state);this._updateLoad();return this._schedule()};C.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case x.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(I=>
I.idleBegin()));this._runIdle();break;case x.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};C.stopFrame=function(){this._budget.reset(h.Milliseconds(0),this._state);this._budget.madeProgress()};C._removeIdleStateCallbacks=function(I){this._idleUpdatesStartFired&&I.idleEnd();this._idleStateCallbacks.removeUnordered(I)};C.removeTask=function(I){this._tasks.removeUnordered(I);this._runQueue.removeUnordered(I);this._updatingChanged()};
C._updateTask=function(I){this._tasks.forAll(t=>{t.name===I&&t.setPriority(I)})};C._getState=function(I){if(this._runQueue.some(u=>u.name===I))return l.TaskState.SCHEDULED;let t=l.TaskState.IDLE;this._tasks.forAll(u=>{u.name===I&&u.needsUpdate&&(1>=u.schedulePriority?t=l.TaskState.READY:t!==l.TaskState.READY&&(t=l.TaskState.WAITING))});return t};C._getRuntime=function(I){let t=0;this._tasks.forAll(u=>{u.name===I&&(t+=u.runtime)});return t};C._resetRuntimes=function(){this._tasks.forAll(I=>I.runtime=
0)};C._getRunning=function(){const I=new Map;this._tasks.forAll(u=>{u.needsUpdate&&I.set(u.name,(I.get(u.name)||0)+1)});if(0===I.size)return null;let t="";I.forEach((u,Y)=>{t=1<u?t+` ${u}x ${Y}`:t+` ${Y}`});return t};C._runIdle=function(){this._run()};C._runInteracting=function(){this._run()};C._runAnimating=function(){this._run()};C._updateLoad=function(){const I=this._tasks.reduce((t,u)=>u.needsUpdate?++t:t,0);this._load=.9*this._load+I*(1-.9)};C._schedule=function(){this._runQueue.filterInPlace(I=>
{if(I.needsUpdate)return!0;I.schedulePriority=I.basePriority;return!1});for(this._tasks.forAll(I=>{0===I.basePriority&&I.needsUpdate&&!this._runQueue.includes(I)&&I.blockFrame!==this._frameNumber&&this._runQueue.unshift(I)});0===this._runQueue.length;){let I=!1;this._tasks.forAll(t=>{if(t.needsUpdate&&0!==t.schedulePriority&&0!==t.basePriority&&t.blockFrame!==this._frameNumber)switch(I=!0,t.schedulePriority){case 1:t.schedulePriority=0;this._runQueue.push(t);break;default:--t.schedulePriority}});
if(!I)return this._updatingChanged(),!1}this._updatingChanged();return!0};C._run=function(){const I=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var t=this._budget.now();const u=this._runQueue.pop();this._budget.resetProgress();try{u.task.runTask(this._budget)===l.Task.YIELD&&(u.blockFrame=this._frameNumber)}catch(Y){R.getLogger("esri.views.support.Scheduler").error(`Exception in task "${u.name}"`,Y)}!this._budget.hasProgressed&&u.blockFrame!==this._frameNumber&&
u.needsUpdate&&(u.blockFrame=this._frameNumber);u.schedulePriority=u.basePriority;t=this._budget.now()-t;u.runtime+=t;this._frameTaskTimes.set(u.priority,this._frameTaskTimes.get(u.priority)+t);this._debug&&t>2*this._budget.budget&&console.log("Task",u.name,"used",t,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-I);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
I)};C._startFrameTaskTimes=function(){for(const I of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[I],0)};C._recordFrameTaskTimes=function(I){this._frameTaskTimes.forEach((t,u)=>this.performanceInfo.tasks.get(u).record(t));this.performanceInfo.total.record(I)};f._createClass(T,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(I){this._state!==I&&(this._state=
I,this.state!==x.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(t=>t.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return T}();G.Scheduler=z;let w=function(){function T(I,t,u,Y){this._scheduler=I;this.name=t;this._basePriority=Y;this.runtime=this.blockFrame=0;this._queue=new J.PromiseQueue;this._handles=new ia;this.schedulePriority=this._basePriority;this._task=new L.ObservableValue(P.isSome(u)?u:this._queue);this._handles.add(m.when(()=>
this.task.running,ha=>I.taskRunningChanged(ha)))}var C=T.prototype;C.remove=function(){this.processQueue(E);this._scheduler.removeTask(this);this.schedule=v.schedule;this.reschedule=v.reschedule;this._handles.destroy()};C.setPriority=function(I){this.name=I;I=e(I);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=I;this._basePriority=I};C.schedule=function(I,t,u){return this._queue.push(I,t,u)};C.reschedule=function(I,t,u){return this._queue.unshift(I,t,u)};C.processQueue=
function(I){this._queue.runTask(I)};f._createClass(T,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(I){this.setPriority(I)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return T}(),B=function(){function T(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=x.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var C=T.prototype;C.run=function(I){if(this.done)return!1;!0===I()&&this.madeProgress();return!0};C.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};C.reset=function(I,t){this._begin=this.now();this._budget=I;this._state=t;this.resetProgress()};C.now=function(){return performance.now()};C.resetProgress=function(){this._done=this._progressed=!1};f._createClass(T,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(I){this._enabled=I}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return T}();G.Budget=B})(r||(r={}));l.TaskState=void 0;
(function(G){G.SCHEDULED="s";G.READY="r";G.WAITING="w";G.IDLE="i"})(l.TaskState||(l.TaskState={}));const E=(()=>{const G=new r.Budget;G.enabled=!1;return G})(),v=new (function(){function G(){}var z=G.prototype;z.remove=function(){};z.processQueue=function(){};z.schedule=function(w,B,T){try{if(k.isAborted(B)){const C=k.createAbortError();return T?Promise.resolve(T(C)):Promise.reject(C)}return k.when(w(E))}catch(C){return Promise.reject(C)}};z.reschedule=function(w,B,T){return this.schedule(w,B,T)};
return f._createClass(G)}());l.ImmediateTask=v;l.getTaskPriority=e;l.newScheduler=function(){return new r.Scheduler};l.noBudget=E;l.taskPriorities=p;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,f,ia,ba,R,P,Q){function H(J,M,x={}){return k(J,M,x,h)}function k(J,M,x={},e){let p=null;const F=x.once?(V,K)=>
{e(V)&&(ba.removeMaybe(p),M(V,K))}:(V,K)=>{e(V)&&M(V,K)};p=P.watchTracked(J,F,x.sync,x.equals);x.initial&&(J=J(),F(J,J));return p}function m(J,M,x){if(R.isAborted(x))return Promise.reject(R.createAbortError());const e=J();if(M?.(e))return Promise.resolve(e);let p=null;return new Promise((F,V)=>{p=ia.handlesGroup([R.onAbort(x,()=>{p=ba.removeMaybe(p);V(R.createAbortError())}),k(J,K=>{p=ba.removeMaybe(p);F(K)},{sync:!1,once:!0},M??h)])})}function h(J){return!0}function L(J){return!!J}l.autorun=Q.autorun;
l.initial={initial:!0};l.on=function(J,M,x,e={}){function p(){V&&K&&(K.remove(),e.onListenerRemove?.(V),K=V=null)}function F(r){e.once&&e.once&&ba.removeMaybe(S);x(r)}let V=null,K=null,S=null;const D=H(J,(r,E)=>{p();f.isEventTarget(r)&&(V=r,K=f.on(r,M,F),e.onListenerAdd?.(r))},{sync:e.sync,initial:!0});return S=ia.makeHandle(()=>{D.remove();p()})};l.once=function(J,M){return m(J,null,M)};l.pausable=function(J,M,x={}){let e=!1;const p=H(J,(F,V)=>{e||M(F,V)},x);return{remove(){p.remove()},pause(){e=
!0},resume(){e=!1}}};l.sync={sync:!0};l.syncAndInitial={sync:!0,initial:!0};l.watch=H;l.when=function(J,M,x={}){return k(J,M,x,L)};l.whenOnce=function(J,M){return m(J,L,M)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../tracking","./SimpleObservable"],function(l,f,ia,ba){let R=function(){function P(H){this._observable=new ba.SimpleObservable;this._value=
H}var Q=P.prototype;Q.get=function(){ia.trackAccess(this._observable);return this._value};Q.set=function(H){H!==this._value&&(this._value=H,this._observable.notify())};return f._createClass(P)}();l.ObservableValue=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(l,f,ia,ba){let R=function(){function Q(){this._tasks=
[];this._running=new ba.ObservableValue(!1)}var H=Q.prototype;H.destroy=function(){this.cancelAll()};H.runTask=function(k){for(;!k.done&&this._process(k);)k.madeProgress()};H.push=function(k,m,h){this._running.set(!0);return new Promise((L,J)=>this._tasks.push(new P(L,J,k,m,h)))};H.unshift=function(k,m,h){this._running.set(!0);return new Promise((L,J)=>this._tasks.unshift(new P(L,J,k,m,h)))};H._process=function(k){if(0===this._tasks.length)return!1;const m=this._tasks.shift();try{const h=ia.isAborted(m.signal);
if(h&&!m.abortCallback)m.reject(ia.createAbortError());else{const L=h?m.abortCallback?.(ia.createAbortError()):m.callback(k);ia.isPromiseLike(L)?L.then(m.resolve,m.reject):m.resolve(L)}}catch(h){m.reject(h)}this._running.set(0<this._tasks.length);return!0};H.cancelAll=function(){const k=ia.createAbortError();for(const m of this._tasks)if(m.abortCallback){const h=m.abortCallback(k);m.resolve(h)}else m.reject(k);this._tasks.length=0;this._running.set(!1)};f._createClass(Q,[{key:"length",get:function(){return this._tasks.length}},
{key:"running",get:function(){return this._running.get()}}]);return Q}(),P=f._createClass(function(Q,H,k,m,h){this.resolve=Q;this.reject=H;this.callback=k;this.signal=m;this.abortCallback=h});l.PromiseQueue=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,ia,ba,R,P,Q,H){ia=function(k){function m(){var L=h.apply(this,arguments);L.SCHEDULER_LOG_SLOW_TASKS=!1;L.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return L}l._inherits(m,k);var h=l._createSuper(m);return l._createClass(m)}(ia);f.__decorate([ba.property()],ia.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([ba.property()],ia.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ia=f.__decorate([H.subclass("esri.views.support.DebugFlags")],ia);
return new ia})},"esri/views/support/RenderState":function(){define(["exports"],function(l){l.RenderState=void 0;var f=l.RenderState||(l.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/number","../../../support/fieldUtils"],function(l,f,ia){function*ba(D,r,E){let v=0;for(;v<=D.length;){var G=D.indexOf(r,
v);G=D.substring(v,-1<G?G:void 0);v+=G.length+r.length;if(!E||G.trim())yield G}}function R(D){const r=D.includes("\r\n")?"\r\n":"\n";return ba(D,r,!0)}function P(D,r){return ba(D,r,!1)}function*Q(D,r,E,v=()=>Object.create(null)){var G=R(D);G.next();var z="";D="";let w=0,B=v(),T=0;a:for(const C of G){G=P(C,E);for(const I of G)if(z+=D+I,D="",w+=m(I),0===w%2){if(0<w)if(z=M.exec(z))B[r[T]]=z[1].replace(x,'"'),T++;else{B=v();T=0;z="";w=0;continue a}else B[r[T]]=z,T++;z="";w=0}else D=E;0===w?(yield B,B=
v(),T=0):D="\n"}}function H(D,r){D=k(D,r).filter(E=>null!=E);r=D.map(E=>ia.normalizeFieldName(E));for(let E=r.length-1;0<=E;E--)r[E]||(r.splice(E,1),D.splice(E,1));return{names:r,aliases:D}}function k(D,r){if(!D?.length)return[];const E=[];var v="";let G="",z=0;D=P(D,r);for(const w of D)v+=G+w,G="",z+=m(w),0===z%2?(0<z?(v=M.exec(v))&&E.push(v[1].replace(x,'"')):E.push(v),v="",z=0):G=r;return E}function m(D){let r=0,E;for(E=D.indexOf('"',0);0<=E;)r++,E=D.indexOf('"',E+1);return r}function h(D,r,E){r=
ia.normalizeFieldName(r)?.toLowerCase();E=ia.normalizeFieldName(E)?.toLowerCase();const v=D.map(G=>G.toLowerCase());r=r?D[v.indexOf(r)]:null;E=E?D[v.indexOf(E)]:null;return{longitudeFieldName:r||D[v.indexOf(S.find(G=>v.includes(G)))],latitudeFieldName:E||D[v.indexOf(K.find(G=>v.includes(G)))]}}function L(D){if(!D.length)return"string";const r=/[^+-.,0-9]/;return D.map(E=>{var v=!1;if(""!==E){if(r.test(E))v=!0;else{v=p(E);if(!isNaN(v))return/[.,]/.test(E)||!Number.isInteger(v)||214783647<v||-214783648>
v?"double":"integer";if(E.includes("E"))if(v=Number(E),isNaN(v))if(E.includes(","))if(E=E.replace(",","."),v=Number(E),isNaN(v))v=!0;else return"double";else v=!0;else return"double";else v=!0}return v&&!/^[-]?\d*[.,]?\d*$/.test(E)&&J(new Date(E),E)?"date":"string"}}).reduce((E,v)=>{if(void 0===E)return v;if(void 0===v)return E;if(E===v)return v;if("string"===E||"string"===v)return"string";if("double"===E||"double"===v)return"double"})}function J(D,r){if(!D||"[object Date]"!==Object.prototype.toString.call(D)||
isNaN(D.getTime()))return!1;D=!0;if(!V&&/\d+\W*$/.test(r)&&(r=r.match(/[a-zA-Z]{2,}/))){D=!1;let E=0;for(;!D&&E<=r.length;)D=!F.test(r[E]),E++;D=!D}return D}const M=/^\s*"([\S\s]*)"\s*$/,x=/""/g,e=[","," ",";","|","\t"],p=function(){const D=f._parseInfo(),r=new RegExp("^"+D.regexp+"$"),E=new RegExp("["+D.group+"\\s\\xa0]","g"),v=D.factor;return G=>{G=r.exec(G);D.factor=v;if(!G)return NaN;let z=G[1];if(!G[1]){if(!G[2])return NaN;z=G[2];D.factor*=-1}z=z.replace(E,"").replace(D.decimal,".");return+z*
D.factor}}(),F=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,V=Number.isNaN((new Date("technology 10")).getTime()),K="lat latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),S="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" ");l.extractFieldNamesAndAliasesFromRow=H;l.inferDelimiterAndLocationInfo=function(D,r,E){D=D.trim();r=
r?.trim();var v=[],G=Array.from(new Set([E?.delimiter,...e])).filter(z=>null!=z);for(const z of G){G=k(D,z).length;const w=k(r,z).length??G;1<G&&v.push({weight:Math.min(G,w),delimiter:z})}r=v.sort(({weight:z},{weight:w})=>w-z).map(({delimiter:z})=>z);for(const z of r)if(v=H(D,z).names,v=h(v,E?.longitudeField,E?.latitudeField),v.longitudeFieldName&&v.latitudeFieldName)return{delimiter:z,locationInfo:v};return{delimiter:r[0],locationInfo:null}};l.inferFieldType=L;l.inferFields=function(D,r,E,v,G){const z=
[];r=Q(D,E,r);D=[];for(var w of r){if(10===D.length)break;D.push(w)}for(w=0;w<E.length;w++){const T=E[w];r=v[w];if(T===G.longitudeFieldName||T===G.latitudeFieldName)z.push({name:T,type:"esriFieldTypeDouble",alias:r});else{var B=D.map(I=>I[T]);let C=void 0;switch(L(B)){case "integer":B="esriFieldTypeInteger";break;case "double":B="esriFieldTypeDouble";break;case "date":B="esriFieldTypeDate";C=36;break;default:B="esriFieldTypeString",C=255}z.push({name:T,type:B,alias:r,length:C})}}return z};l.isValidDate=
J;l.parseNumber=p;l.parseRows=Q;l.readRowParts=P;l.readRows=R;l.splitSingleRow=k;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(l,f,ia){function ba(h=ia.getLocale()){h=h.toLowerCase();let L=h in H;if(!L){const e=h.split("-");1<e.length&&e[0]in H&&(h=e[0],L=!0);L||(h="en")}const [J,M,x="#,##0.###"]=H[h];return{decimal:J,group:M,pattern:x}}function R(h){h=h||{};var L=ba(h.locale);const J=h.pattern||
L.pattern,M=L.group,x=L.decimal;let e=1;if(J.includes("%"))e/=100;else if(J.includes("\u2030"))e/=1E3;else if(J.includes("\u00a4"))throw Error("currency notation not supported");L=J.split(";");1===L.length&&L.push("-"+L[0]);return{regexp:m(L,p=>{p="(?:"+f.escapeRegExpString(p,".")+")";return p.replace(k,F=>{const V={signed:!1,separator:h.strict?M:[M,""],fractional:h.fractional,decimal:x,exponent:!1};F=F.split(".");let K=h.places;1===F.length&&1!==e&&(F[1]="###");1===F.length||0===K?V.fractional=!1:
(void 0===K&&(K=h.pattern?F[1].lastIndexOf("0")+1:Infinity),K&&null==h.fractional&&(V.fractional=!0),!h.places&&K<F[1].length&&(K+=","+F[1].length),V.places=K);F=F[0].split(",");1<F.length&&(V.groupSize=F.pop().length,1<F.length&&(V.groupSize2=F.pop().length));return"("+P(V)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:M,decimal:x,factor:e}}function P(h){h=h||{};"places"in h||(h.places=Infinity);"string"!==typeof h.decimal&&(h.decimal=".");"fractional"in h&&!/^0/.test(String(h.places))||(h.fractional=
[!0,!1]);"exponent"in h||(h.exponent=[!0,!1]);"eSigned"in h||(h.eSigned=[!0,!1]);var L=Q(h);const J=m(h.fractional,x=>{let e="";x&&0!==h.places&&(e="\\"+h.decimal,e=Infinity===h.places?"(?:"+e+"\\d+)?":e+("\\d{"+h.places+"}"));return e},!0),M=m(h.exponent,x=>x?"([eE]"+Q({signed:h.eSigned})+")":"");L+=J;J&&(L="(?:(?:"+L+")|(?:"+J+"))");return L+M}function Q(h){h=h||{};"signed"in h||(h.signed=[!0,!1]);"separator"in h?"groupSize"in h||(h.groupSize=3):h.separator="";const L=m(h.signed,M=>M?"[-+]":"",
!0),J=m(h.separator,M=>{if(!M)return"(?:\\d+)";M=f.escapeRegExpString(M);" "===M?M="\\s":"\u00a0"===M&&(M="\\s\\xa0");const x=h.groupSize,e=h.groupSize2;return e?(M="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+M+"]\\d{"+e+"})*["+M+"]\\d{"+x+"})",0<x-e?"(?:"+M+"|(?:0|[1-9]\\d{0,"+(x-1)+"}))":M):"(?:0|[1-9]\\d{0,"+(x-1)+"}(?:["+M+"]\\d{"+x+"})*)"},!0);return L+J}const H={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",
","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],
th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},k=/[#0,]*[#0](?:\.0*#*)?/,m=(h,L,J)=>{if(!(h instanceof Array))return L(h);const M=[];for(let x=0;x<h.length;x++)M.push(L(h[x]));h=M.join("|");return"("+(J?"?:":"")+h+")"};l._parseInfo=R;l.format=function(h,L){L={...L};var J=ba(L.locale);L.customs=J;J=L.pattern||J.pattern;if(isNaN(h)||Infinity===Math.abs(h))return null;var M=h;var x=L||{};var e=x.customs.group,p=x.customs.decimal;J=J.split(";");h=J[0];L=J[0>M?1:0]||"-"+h;if(L.includes("%"))M*=
100;else if(L.includes("\u2030"))M*=1E3;else{if(L.includes("\u00a4"))throw Error("currency notation not supported");if(L.includes("E"))throw Error("exponential notation not supported");}J=k;var F=h.match(J);if(!F)throw Error("unable to find a number expression in pattern: "+L);!1===x.fractional&&(x.places=0);h=L.replace;F=F[0];x=x={decimal:p,group:e,places:x.places,round:x.round};!0===x.places&&(x.places=0);Infinity===x.places&&(x.places=6);p=F.split(".");var V="string"===typeof x.places&&x.places.indexOf(",");
F=x.places;V?F=x.places.substring(V+1):0<=F||(F=(p[1]||[]).length);0>x.round||(M=Number(M.toFixed(Number(F))));e=String(Math.abs(M)).split(".");M=e[1]||"";p[1]||x.places?(V&&(x.places=x.places.substring(0,V)),V=void 0!==x.places?x.places:p[1]&&p[1].lastIndexOf("0")+1,V>M.length&&(e[1]=M.padEnd(Number(V),"0")),F<M.length&&(e[1]=M.substr(0,Number(F)))):e[1]&&e.pop();M=p[0].replace(",","");F=M.indexOf("0");-1!==F&&(F=M.length-F,F>e[0].length&&(e[0]=e[0].padStart(F,"0")),M.includes("#")||(e[0]=e[0].substr(e[0].length-
F)));M=p[0].lastIndexOf(",");let K;if(-1!==M){var S=p[0].length-M-1;p=p[0].substr(0,M);M=p.lastIndexOf(",");-1!==M&&(K=p.length-M-1)}p=[];for(M=e[0];M;)F=M.length-S,p.push(0<F?M.substr(F):M),M=0<F?M.slice(0,F):"",K&&(S=K,K=void 0);e[0]=p.reverse().join(x.group||",");S=e.join(x.decimal||".");return h.call(L,J,S)};l.getCustoms=ba;l.parse=function(h,L){L=R(L);h=(new RegExp("^"+L.regexp+"$")).exec(h);if(!h)return NaN;let J=h[1];if(!h[1]){if(!h[2])return NaN;J=h[2];L.factor*=-1}J=J.replace(new RegExp("["+
L.group+"\\s\\xa0]","g"),"").replace(L.decimal,".");return Number(J)*L.factor};l.regexp=function(h){return R(h).regexp};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/intl/locale":function(){define(["exports"],function(l){function f(){return H??globalThis.navigator?.language??"en"}function ia(){void 0===Q&&(Q=f());return Q}function ba(L=ia()){return/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(L)?.[1].toLowerCase()}function R(){const L=P??f();Q!==L&&(Q=L,[...h].forEach(J=>{J.call(null,
L)}),[...m].forEach(J=>{J.call(null,L)}))}let P=void 0,Q=void 0;const H=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,k={he:!0,ar:!0},m=[],h=[];globalThis.addEventListener?.("languagechange",R);l.beforeLocaleChange=function(L){h.push(L);return{remove(){m.splice(h.indexOf(L),1)}}};l.getDefaultLocale=f;l.getLanguage=ba;l.getLocale=ia;l.onLocaleChange=function(L){m.push(L);return{remove(){m.splice(m.indexOf(L),1)}}};l.prefersRTL=function(L=ia()){L=ba(L);return void 0!==L&&(k[L]||!1)};
l.setLocale=function(L){P=L||void 0;R()};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(l,f,ia,ba,R){const P=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let Q=1;l.createCapabilities=function(H,k){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,
supportsM:!1,supportsZ:H},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:k,supportsDelete:k,supportsEditing:k,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:k,supportsExceedsLimitStatistics:!0},query:ba.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,
supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:k,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};l.createDefaultAttributesFunction=function(H,k){if(f("esri-csp-restrictions"))return()=>({[k]:null,...H});try{let m=`this.${k} = null;`;
for(const L in H){const J=P.test(L)?`.${L}`:`["${L}"]`;m+=`this${J} = ${JSON.stringify(H[L])};`}const h=(new Function(`\n      return class AttributesClass$${Q++} {\n        constructor() {\n          ${m};\n        }\n      }\n    `))();return()=>new h}catch(m){return()=>({[k]:null,...H})}};l.createDefaultTemplate=function(H={}){return[{name:"New Feature",description:"",prototype:{attributes:ia.clone(H)}}]};l.createDrawingInfo=function(H){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===
H||"esriGeometryMultipoint"===H?R.defaultPointSymbolJSON:"esriGeometryPolyline"===H?R.defaultPolylineSymbolJSON:R.defaultPolygonSymbolJSON}}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(l){const f=[252,146,31,255],ia={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ba={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};
l.defaultColor=f;l.defaultOutlineColor=[153,153,153,255];l.defaultPointSymbolJSON=ia;l.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};l.defaultPolylineSymbolJSON=ba;l.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,
yoffset:0,angle:0};l.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};l.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};l.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../geometry/SpatialReference".split(" "),function(l,
f,ia,ba,R,P,Q,H,k,m,h,L,J,M,x,e,p,F,V,K,S,D){function r(w,B){var T=B.parsingOptions||{};const C={delimiter:T.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:T.latitudeField,longitudeFieldName:T.longitudeField}},I=C.layerDefinition={name:H.getFilename(B.url,v)||"csv",drawingInfo:E,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:T.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,
spatialReference:T.spatialReference||{wkid:4326}}};var t=F.readRows(w);B=t.next().value?.trim();t=t.next().value?.trim();if(!B)throw new R("csv-layer:empty-csv","CSV is empty",{csv:w});const {delimiter:u,locationInfo:Y}=F.inferDelimiterAndLocationInfo(B,t,T);if(!u)throw new R("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:B,secondLine:t,parsingOptions:T});if(!Y)throw new R("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:B,secondLine:t,parsingOptions:T});C.locationInfo=Y;C.delimiter=u;const {names:ha,aliases:va}=F.extractFieldNamesAndAliasesFromRow(B,u);w=F.inferFields(w,C.delimiter,ha,va,C.locationInfo);if(T.fields?.length){T=new K(T.fields);for(var za of w)(B=T.get(za.name))&&Object.assign(za,B)}w.some(Ha=>"esriFieldTypeOID"===Ha.type?(I.objectIdField=Ha.name,!0):!1)||(za={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},I.objectIdField=za.name,w.unshift(za));I.fields=
w;T=new K(I.fields);C.locationInfo&&(C.locationInfo.latitudeFieldName=T.get(C.locationInfo.latitudeFieldName).name,C.locationInfo.longitudeFieldName=T.get(C.locationInfo.longitudeFieldName).name);I.timeInfo&&(za=I.timeInfo,za.startTimeField&&((w=T.get(za.startTimeField))?(za.startTimeField=w.name,w.type="esriFieldTypeDate"):za.startTimeField=null),za.endTimeField&&((w=T.get(za.endTimeField))?(za.endTimeField=w.name,w.type="esriFieldTypeDate"):za.endTimeField=null),za.trackIdField&&(T=T.get(za.trackIdField),
za.trackIdField=T?T.name:null),za.startTimeField||za.endTimeField||(I.timeInfo=null));return C}const E=V.createDrawingInfo("esriGeometryPoint"),v=["csv"],G=[0,0];let z=l._createClass(function(w,B){this.x=w;this.y=B});return function(){function w(){this._queryEngine=null;this._snapshotFeatures=async T=>{T=await this._fetch(T);return this._createFeatures(T)}}var B=w.prototype;B.destroy=function(){this._queryEngine?.destroy();this._queryEngine=null};B.load=async function(T,C={}){this._loadOptions=T;
[C]=await Promise.all([this._fetch(C.signal),this._checkProjection(T?.parsingOptions?.spatialReference)]);T=r(C,T);this._locationInfo=T.locationInfo;this._delimiter=T.delimiter;this._queryEngine=this._createQueryEngine(T);C=await this._createFeatures(C);this._queryEngine.featureStore.addMany(C);const {fullExtent:I,timeExtent:t}=await this._queryEngine.fetchRecomputedExtents();T.layerDefinition.extent=I;if(t){const {start:u,end:Y}=t;T.layerDefinition.timeInfo.timeExtent=[u,Y]}return T};B.applyEdits=
async function(){throw new R("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");};B.queryFeatures=async function(T={},C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(T,C.signal)};B.queryFeatureCount=async function(T={},C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(T,C.signal)};B.queryObjectIds=async function(T={},C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(T,
C.signal)};B.queryExtent=async function(T={},C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(T,C.signal)};B.querySnapping=async function(T,C={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(T,C.signal)};B.refresh=async function(T){this._loadOptions.customParameters=T;this._snapshotTask?.abort();this._snapshotTask=ba.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(t=>{this._queryEngine.featureStore.clear();
t&&this._queryEngine.featureStore.addMany(t)},t=>{this._queryEngine.featureStore.clear();Q.isAbortError(t)||P.getLogger("esri.layers.CSVLayer").error(new R("csv-layer:refresh","An error occurred during refresh",{error:t}))});await this._waitSnapshotComplete();const {fullExtent:C,timeExtent:I}=await this._queryEngine.fetchRecomputedExtents();return{extent:C,timeExtent:I}};B._waitSnapshotComplete=async function(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}};
B._fetch=async function(T){const {url:C,customParameters:I}=this._loadOptions;if(!C)throw new R("csv-layer:invalid-source","url not defined");const t=H.urlToObject(C);return(await ia(t.path,{query:{...t.query,...I},responseType:"text",signal:T})).data};B._createQueryEngine=function(T){const {objectIdField:C,fields:I,extent:t,timeInfo:u}=T.layerDefinition;T=new x({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new p.QueryEngine({fields:I,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,
timeInfo:u,objectIdField:C,spatialReference:t.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:T})};B._createFeatures=async function(T){const {latitudeFieldName:C,longitudeFieldName:I}=this._locationInfo,{objectIdField:t,fieldsIndex:u,spatialReference:Y}=this._queryEngine;let ha=[];const va=[];var za=u.fields.filter(Qa=>Qa.name!==t).map(Qa=>Qa.name),Ha=0,Ja={};for(const Qa of u.fields)if("esriFieldTypeOID"!==Qa.type&&"esriFieldTypeGlobalID"!==Qa.type){const Wa=S.getFieldDefaultValue(Qa);
void 0!==Wa&&(Ja[Qa.name]=Wa)}T=F.parseRows(T,za,this._delimiter,V.createDefaultAttributesFunction(Ja,t));for(var Ia of T)if(T=this._parseCoordinateValue(Ia[C]),za=this._parseCoordinateValue(Ia[I]),null!=za&&null!=T&&!isNaN(T)&&!isNaN(za)){Ia[C]=T;Ia[I]=za;for(var Ka in Ia)Ka!==C&&Ka!==I&&(u.isDateField(Ka)?(Ja=new Date(Ia[Ka]),Ia[Ka]=F.isValidDate(Ja,Ia[Ka])?Ja.getTime():null):u.isNumericField(Ka)&&(Ja=F.parseNumber(Ia[Ka]),isNaN(Ja)?Ia[Ka]=null:Ia[Ka]=Ja));Ia[t]=Ha;Ha++;ha.push(new z(za,T));va.push(Ia)}if(!h.equals({wkid:4326},
Y))if(h.isWebMercator(Y))for(const Qa of ha)[Qa.x,Qa.y]=L.lngLatToXY(Qa.x,Qa.y,G);else ha=k.projectMany(m.jsonAdapter,ha,D.WGS84,Y,null,null);Ha=[];for(Ia=0;Ia<ha.length;Ia++){const {x:Qa,y:Wa}=ha[Ia];Ka=va[Ia];Ka[t]=Ia+1;Ha.push(new J.OptimizedFeature(new M([],[Qa,Wa]),Ka,null,Ka[t]))}return Ha};B._parseCoordinateValue=function(T){if(null==T||""===T)return null;let C=F.parseNumber(T);if(isNaN(C)||181<Math.abs(C))C=parseFloat(T);return C};B._checkProjection=async function(T){try{await e.checkProjectionSupport(h.WGS84,
T)}catch{throw new R("csv-layer:projection-not-supported","Projection not supported");}};return l._createClass(w)}()});