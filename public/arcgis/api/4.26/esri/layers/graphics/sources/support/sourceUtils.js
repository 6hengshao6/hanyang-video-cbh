// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(w,e,m,r,t,g){function n(a){return new x(a)}async function y(){r.isNone(h)&&(h=await new Promise((a,b)=>w(["../../../../geometry/geometryEngineJSON"],a,b)));return h}let z=m._createClass(function(){this.description=this.code=null}),x=m._createClass(function(a){this.error=new z;this.objectId=this.globalId=null;
this.success=!1;this.uniqueId=null;this.error.description=a}),A=m._createClass(function(a){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=a});const p=new Set;let h;e.createFeatureEditErrorResult=n;e.createFeatureEditSuccessResult=function(a){return new A(a)};e.loadGeometryEngineForSimplify=async function(a,b){!t.isValid(a)||"esriGeometryPolygon"!==b&&"esriGeometryPolyline"!==b||await y()};e.mixAttributes=function(a,b,u,B=!1,v){p.clear();for(const k in u){const c=a.get(k);if(!c)continue;
var l=u[k],d=c,f=l;let q=f;"string"===typeof f&&g.isNumericField(d)?q=parseFloat(f):null!=f&&g.isStringField(d)&&"string"!==typeof f&&(q=String(f));d=g.sanitizeNullFieldValue(q);d!==l&&v&&v.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:c,originalValue:l,sanitizedValue:d}});p.add(c.name);if(c&&(B||c.editable)){if(l=g.validateFieldValue(c,d))return n(g.validationErrorToString(l,c,d));b[c.name]=d}}for(const k of a?.requiredFields??[])if(!p.has(k.name))return n(`missing required field "${k.name}"`);
return null};e.simplify=function(a,b){if(!a||!t.isValid(b))return a;if("rings"in a||"paths"in a){if(r.isNone(h))throw new TypeError("geometry engine not loaded");return h.simplify(b,a)}return a};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});