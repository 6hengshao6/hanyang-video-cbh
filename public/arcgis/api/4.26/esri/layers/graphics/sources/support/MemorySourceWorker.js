// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(m,e,ia,aa,R,N,P,E,h,l){function p(v,K){return v?K?4:3:K?3:2}function Q(v,K,Y,W){if(v){if(Y)return K&&W?k:Aa;if(K&&W)return c}else if(K&&W)return Aa;return ra}function M({scale:v,
translate:K},Y){return Math.round((Y-K[0])/v[0])}function T({scale:v,translate:K},Y){return Math.round((K[1]-Y)/v[1])}function D({scale:v,translate:K},Y,W){return Y*v[W]+K[W]}function f(v){v=v.coords;return{x:v[0],y:v[1]}}function u(v,K){v.coords[0]=K.x;v.coords[1]=K.y;return v}function L(v){v=v.coords;return{x:v[0],y:v[1],z:v[2]}}function Z(v,K){v.coords[0]=K.x;v.coords[1]=K.y;v.coords[2]=K.z;return v}function I(v){v=v.coords;return{x:v[0],y:v[1],m:v[2]}}function O(v,K){v.coords[0]=K.x;v.coords[1]=
K.y;v.coords[2]=K.m;return v}function J(v){v=v.coords;return{x:v[0],y:v[1],z:v[2],m:v[3]}}function n(v,K){v.coords[0]=K.x;v.coords[1]=K.y;v.coords[2]=K.z;v.coords[3]=K.m;return v}function A(v,K){return v&&K?n:v?Z:K?O:u}function x(v,K,Y,W,fa){Y=A(Y,W);for(const {geometry:ma,attributes:oa}of K)K=aa.isSome(ma)?Y(new l,ma):null,v.push(new E.OptimizedFeature(K,oa,null,fa?oa[fa]:void 0));return v}function B(v,K,Y,W){for(const {geometry:fa,attributes:ma}of K)v.push({attributes:ma,geometry:aa.isSome(fa)?
z(fa,Y,W):null});return v}function z(v,K,Y){if(aa.isNone(v))return null;const W=p(K,Y),fa=[];for(let ma=0;ma<v.coords.length;ma+=W){const oa=[];for(let wa=0;wa<W;wa++)oa.push(v.coords[ma+wa]);fa.push(oa)}return K?Y?{points:fa,hasZ:K,hasM:Y}:{points:fa,hasZ:K}:Y?{points:fa,hasM:Y}:{points:fa}}function w(v,K,Y,W,fa){Y=p(Y,W);for(const {geometry:ma,attributes:oa}of K)K=aa.isSome(ma)?C(new l,ma,Y):null,v.push(new E.OptimizedFeature(K,oa,null,fa?oa[fa]:void 0));return v}function C(v,K,Y=p(K.hasZ,K.hasM)){v.lengths[0]=
K.points.length;const W=v.coords;let fa=0;for(const ma of K.points)for(K=0;K<Y;K++)W[fa++]=ma[K];return v}function ba(v,K,Y){if(!v)return null;const W=p(K,Y),{coords:fa,lengths:ma}=v;v=[];let oa=0;for(const wa of ma){const ua=[];for(let Ea=0;Ea<wa;Ea++){const Ba=[];for(let Fa=0;Fa<W;Fa++)Ba.push(fa[oa++]);ua.push(Ba)}v.push(ua)}return K?Y?{paths:v,hasZ:K,hasM:Y}:{paths:v,hasZ:K}:Y?{paths:v,hasM:Y}:{paths:v}}function G(v,K,Y,W,fa){Y=p(Y,W);for(const {geometry:ma,attributes:oa}of K)K=aa.isSome(ma)?
H(new l,ma,Y):null,v.push(new E.OptimizedFeature(K,oa,null,fa?oa[fa]:void 0));return v}function H(v,K,Y=p(K.hasZ,K.hasM)){const {lengths:W,coords:fa}=v;let ma=0;for(const oa of K.paths){for(const wa of oa)for(K=0;K<Y;K++)fa[ma++]=wa[K];W.push(oa.length)}return v}function t(v,K,Y){if(!v)return null;const W=p(K,Y),{coords:fa,lengths:ma}=v;v=[];let oa=0;for(const wa of ma){const ua=[];for(let Ea=0;Ea<wa;Ea++){const Ba=[];for(let Fa=0;Fa<W;Fa++)Ba.push(fa[oa++]);ua.push(Ba)}v.push(ua)}return K?Y?{rings:v,
hasZ:K,hasM:Y}:{rings:v,hasZ:K}:Y?{rings:v,hasM:Y}:{rings:v}}function q(v,K,Y,W,fa){for(const {geometry:ma,centroid:oa,attributes:wa}of K){K=aa.isSome(ma)?U(new l,ma,Y,W):null;const ua=fa?wa[fa]:void 0;aa.isSome(oa)?v.push(new E.OptimizedFeature(K,wa,u(new l,oa),ua)):v.push(new E.OptimizedFeature(K,wa,null,ua))}return v}function U(v,K,Y=K.hasZ,W=K.hasM){ha(v,K.rings,Y,W);return v}function ha(v,K,Y,W){Y=p(Y,W);const {lengths:fa,coords:ma}=v;W=0;Ya(v);for(const oa of K){for(const wa of oa)for(K=0;K<
Y;K++)ma[W++]=wa[K];fa.push(oa.length)}return v}function va(v,K,Y,W,fa,ma){Ua(v);if(!Y){for(const oa of K)v.push(new E.OptimizedFeature(null,oa.attributes,null,ma?oa.attributes[ma]:void 0));return v}switch(Y){case "esriGeometryPoint":return x(v,K,W,fa,ma);case "esriGeometryMultipoint":return w(v,K,W,fa,ma);case "esriGeometryPolyline":return G(v,K,W,fa,ma);case "esriGeometryPolygon":return q(v,K,W,fa,ma);default:gb.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${Y}'`)),
Ua(v)}return v}function Da(v,K,Y,W){v=v&&("coords"in v?v:v.geometry);if(aa.isNone(v))return null;switch(K){case "esriGeometryPoint":return K=f,Y&&W?K=J:Y?K=L:W&&(K=I),K(v);case "esriGeometryMultipoint":return z(v,Y,W);case "esriGeometryPolyline":return ba(v,Y,W);case "esriGeometryPolygon":return t(v,Y,W);default:return gb.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${K}'`)),null}}function Ha(v,K,Y,W,fa){Ua(v);if(aa.isNone(Y)){for(const oa of K)v.push({attributes:oa.attributes});
return v}switch(Y){case "esriGeometryPoint":Y=f;W&&fa?Y=J:W?Y=L:fa&&(Y=I);for(var ma of K){const {geometry:oa,attributes:wa}=ma;W=aa.isSome(oa)?Y(oa):null;v.push({attributes:wa,geometry:W})}break;case "esriGeometryMultipoint":return B(v,K,W,fa);case "esriGeometryPolyline":for(const {geometry:oa,attributes:wa}of K)v.push({attributes:wa,geometry:aa.isSome(oa)?ba(oa,W,fa):null});break;case "esriGeometryPolygon":for(const {geometry:oa,attributes:wa,centroid:ua}of K)ma=aa.isSome(oa)?t(oa,W,fa):null,aa.isSome(ua)?
(K=f(ua),v.push({attributes:wa,centroid:K,geometry:ma})):v.push({attributes:wa,geometry:ma});break;default:gb.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${Y}'`))}return v}function Ia(v,K,Y,W,fa,ma,oa=Y,wa=W){Ya(v);if(aa.isNone(K)||!K.coords.length)return null;fa=na[fa];const {coords:ua,lengths:Ea}=K;K=p(Y,W);const Ba=p(Y&&oa,W&&wa);Y=Q(Y,W,oa,wa);if(!Ea.length)return Y(v.coords,ua,0,0,M(ma,ua[0]),T(ma,ua[1])),Ya(v,K,0),v;let Fa,Ra=0,Oa,Ta=0;for(const Sa of Ea){if(Sa<
fa)continue;let La=0;Oa=Ta;wa=W=M(ma,ua[Ra]);Fa=oa=T(ma,ua[Ra+1]);Y(v.coords,ua,Oa,Ra,wa,Fa);La++;Ra+=K;Oa+=Ba;for(let Va=1;Va<Sa;Va++,Ra+=K)if(wa=M(ma,ua[Ra]),Fa=T(ma,ua[Ra+1]),wa!==W||Fa!==oa)Y(v.coords,ua,Oa,Ra,wa-W,Fa-oa),Oa+=Ba,La++,W=wa,oa=Fa;La>=fa&&(v.lengths.push(La),Ta=Oa)}Ua(v.coords,Ta);return v.coords.length?v:null}function Ja(v,K,Y,W,fa,ma,oa){let wa=W,ua=0;for(let Ba=ma+Y;Ba<oa;Ba+=Y){var Ea=K[Ba];const Fa=K[Ba+1],Ra=K[oa],Oa=K[oa+1];let Ta=K[ma],Sa=K[ma+1],La=Ra-Ta,Va=Oa-Sa;if(0!==
La||0!==Va){const ab=((Ea-Ta)*La+(Fa-Sa)*Va)/(La*La+Va*Va);1<ab?(Ta=Ra,Sa=Oa):0<ab&&(Ta+=La*ab,Sa+=Va*ab)}La=Ea-Ta;Va=Fa-Sa;Ea=La*La+Va*Va;Ea>wa&&(ua=Ba,wa=Ea)}wa>W&&(ua-ma>Y&&Ja(v,K,Y,W,fa,ma,ua),fa(v,K,v.length,ua,K[ua],K[ua+1]),oa-ua>Y&&Ja(v,K,Y,W,fa,ua,oa))}function Ma(v,K,Y,W,fa){const {coords:ma,lengths:oa}=K;Y=p(Y,W);if(!ma.length)return v!==K&&Ya(v),v;aa.assertIsSome(fa);const {originPosition:wa,scale:ua,translate:Ea}=fa;fa=sa;fa.originPosition=wa;W=fa.scale;W[0]=ua[0]??1;W[1]=-(ua[1]??1);
W[2]=ua[2]??1;W[3]=ua[3]??1;var Ba=fa.translate;Ba[0]=Ea[0]??0;Ba[1]=Ea[1]??0;Ba[2]=Ea[2]??0;Ba[3]=Ea[3]??0;if(!oa.length){for(W=0;W<Y;++W)v.coords[W]=D(fa,ma[W],W);v!==K&&Ya(v,Y,0);return v}Ba=0;for(let Ra=0;Ra<oa.length;Ra++){const Oa=oa[Ra];v.lengths[Ra]=Oa;for(var Fa=0;Fa<Y;++Fa)v.coords[Ba+Fa]=D(fa,ma[Ba+Fa],Fa);Fa=v.coords[Ba];let Ta=v.coords[Ba+1];Ba+=Y;for(let Sa=1;Sa<Oa;Sa++,Ba+=Y){Fa+=ma[Ba]*W[0];Ta+=ma[Ba+1]*W[1];v.coords[Ba]=Fa;v.coords[Ba+1]=Ta;for(let La=2;La<Y;++La)v.coords[Ba+La]=
D(fa,ma[Ba+La],La)}}v!==K&&Ya(v,ma.length,oa.length);return v}function Wa(v,K,Y,W){let fa=0,ma=v[W*K],oa=v[W*(K+1)];for(let wa=1;wa<Y;wa++){const ua=ma+v[W*(K+wa)],Ea=oa+v[W*(K+wa)+1],Ba=(ua-ma)*(Ea+oa);ma=ua;oa=Ea;fa+=Ba}return.5*fa}function Ya(v,K=0,Y=0){Ua(v.lengths,Y);Ua(v.coords,K)}function Ua(v,K=0){v.length!==K&&(v.length=K)}const gb=ia.getLogger("esri.layers.graphics.featureConversionUtils"),na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ra=
(v,K,Y,W,fa,ma)=>{v[Y]=fa;v[Y+1]=ma},Aa=(v,K,Y,W,fa,ma)=>{v[Y]=fa;v[Y+1]=ma;v[Y+2]=K[W+2]},c=(v,K,Y,W,fa,ma)=>{v[Y]=fa;v[Y+1]=ma;v[Y+2]=K[W+3]},k=(v,K,Y,W,fa,ma)=>{v[Y]=fa;v[Y+1]=ma;v[Y+2]=K[W+2];v[Y+3]=K[W+3]},da=[],ka=[],sa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};m.convertFromFeature=function(v,K,Y,W,fa){da[0]=v;[v]=va(ka,da,K,Y,W,fa);Ua(da);Ua(ka);return v};m.convertFromFeatureSet=function(v,K){const Y=new h,{hasM:W,hasZ:fa,features:ma,objectIdFieldName:oa,spatialReference:wa,
geometryType:ua,exceededTransferLimit:Ea,transform:Ba,fields:Fa}=v;Fa&&(Y.fields=Fa);Y.geometryType=ua??null;Y.objectIdFieldName=oa??K??null;Y.spatialReference=wa??null;if(!Y.objectIdFieldName)return gb.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Y;ma&&va(Y.features,ma,ua,fa,W,Y.objectIdFieldName);Ea&&(Y.exceededTransferLimit=Ea);W&&(Y.hasM=W);fa&&(Y.hasZ=fa);Ba&&(Y.transform=Ba);return Y};m.convertFromFeatures=va;m.convertFromGeometry=function(v,K,
Y){if(aa.isNone(v))return null;const W=new l;"hasZ"in v&&null==K&&(K=v.hasZ);"hasM"in v&&null==Y&&(Y=v.hasM);if(P.isPoint(v))return A(null!=K?K:null!=v.z,null!=Y?Y:null!=v.m)(W,v);if(P.isPolygon(v))return U(W,v,K,Y);if(P.isPolyline(v))return H(W,v,p(K,Y));if(P.isMultipoint(v))return C(W,v,p(K,Y));gb.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${v}'`))};m.convertFromGraphics=function(v,K,Y,W,fa,ma){const oa=v.length;switch(Y){case "esriGeometryPoint":x(v,
K,W,fa,ma);break;case "esriGeometryMultipoint":w(v,K,W,fa,ma);break;case "esriGeometryPolyline":G(v,K,W,fa,ma);break;case "esriGeometryPolygon":q(v,K,W,fa,ma);break;default:gb.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${Y}'`))}for(W=0;W<K.length;W++)v[W+oa].geometryType=Y,v[W+oa].insertAfter=K[W].insertAfter,v[W+oa].groupId=K[W].groupId;return v};m.convertFromMultipoint=C;m.convertFromMultipointFeatures=w;m.convertFromNestedArray=ha;m.convertFromPoint=
function(v,K,Y=A(null!=K.z,null!=K.m)){return Y(v,K)};m.convertFromPointFeatures=x;m.convertFromPolygon=U;m.convertFromPolyline=H;m.convertFromPolylineFeatures=G;m.convertToFeature=function(v,K,Y,W){ka[0]=v;Ha(da,ka,K,Y,W);v=da[0];Ua(da);Ua(ka);return v};m.convertToFeatureSet=function(v){const {objectIdFieldName:K,spatialReference:Y,transform:W,fields:fa,hasM:ma,hasZ:oa,features:wa,geometryType:ua,exceededTransferLimit:Ea,uniqueIdField:Ba,queryGeometry:Fa,queryGeometryType:Ra}=v;v=Ha([],wa,ua,oa,
ma);const Oa=Da(Fa,Ra,!1,!1);v={features:v,fields:fa,geometryType:ua,objectIdFieldName:K,spatialReference:Y,uniqueIdField:Ba,queryGeometry:Oa};W&&(v.transform=W);Ea&&(v.exceededTransferLimit=Ea);ma&&(v.hasM=ma);oa&&(v.hasZ=oa);return v};m.convertToFeatures=Ha;m.convertToGeometry=Da;m.convertToMultipoint=z;m.convertToMultipointFeatures=B;m.convertToPoint=function(v,K,Y){return v?K?Y?J(v):L(v):Y?I(v):f(v):null};m.convertToPolygon=t;m.convertToPolyline=ba;m.deltaDecodeGeometry=function(v,K){if(aa.isNone(v))return null;
const Y=v.clone(),W=v.coords;v=v.lengths;let fa=0;for(let wa=0;wa<v.length;wa++){const ua=v[wa];var ma=W[K*fa],oa=W[K*fa+1];for(let Ea=1;Ea<ua;Ea++)ma+=W[K*(fa+Ea)],oa+=W[K*(fa+Ea)+1],Y.coords[K*(fa+Ea)]=ma,Y.coords[K*(fa+Ea)+1]=oa;fa+=ua}return Y};m.deltaEncodeGeometry=function(v,K){const Y=v.clone(),W=v.coords;v=v.lengths;let fa=0;for(let oa=0;oa<v.length;oa++){const wa=v[oa];let ua=W[K*fa];var ma=W[K*fa+1];for(let Ea=1;Ea<wa;Ea++){const Ba=W[K*(fa+Ea)],Fa=W[K*(fa+Ea)+1];ma=Fa-ma;Y.coords[K*(fa+
Ea)]=Ba-ua;Y.coords[K*(fa+Ea)+1]=ma;ua=Ba;ma=Fa}fa+=wa}return Y};m.generalizeOptimizedGeometry=function(v,K,Y,W,fa,ma,oa=Y,wa=W){Ya(v);if(!K||!K.coords.length)return null;fa=na[fa];const {coords:ua,lengths:Ea}=K;K=p(Y,W);const Ba=p(Y&&oa,W&&wa);Y=Q(Y,W,oa,wa);if(!Ea.length)return Y(v.coords,ua,0,0,ua[0],ua[1]),Ya(v,K,0),v;W=0;ma*=ma;for(const Fa of Ea){if(Fa<fa){W+=Fa*K;continue}oa=v.coords.length/Ba;wa=W;const Ra=W+(Fa-1)*K;Y(v.coords,ua,v.coords.length,wa,ua[wa],ua[wa+1]);Ja(v.coords,ua,K,ma,Y,
wa,Ra);Y(v.coords,ua,v.coords.length,Ra,ua[Ra],ua[Ra+1]);wa=v.coords.length/Ba-oa;wa>=fa?v.lengths.push(wa):Ua(v.coords,oa*Ba);W+=Fa*K}return v.coords.length?v:null};m.getBoundsOptimizedGeometry=function(v,K,Y,W){if(aa.isNone(K)||!K.coords||!K.coords.length)return null;Y=p(Y,W);let fa=W=Number.POSITIVE_INFINITY,ma=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY;if(K&&K.coords){K=K.coords;for(let wa=0;wa<K.length;wa+=Y){const ua=K[wa],Ea=K[wa+1];W=Math.min(W,ua);ma=Math.max(ma,ua);fa=Math.min(fa,
Ea);oa=Math.max(oa,Ea)}}R.is(v)?R.fromRectValues(v,W,fa,ma,oa):N.fromValues(W,fa,ma,oa,v);return v};m.getQuantizedArea=function(v,K){const {coords:Y,lengths:W}=v;let fa=v=0;for(let ma=0;ma<W.length;ma++){const oa=W[ma];fa+=Wa(Y,v,oa,K);v+=oa}return Math.abs(fa)};m.getQuantizedBoundsOptimizedGeometry=function(v,K,Y,W){Y=p(Y,W);const {lengths:fa,coords:ma}=K;W=K=Number.POSITIVE_INFINITY;let oa=Number.NEGATIVE_INFINITY,wa=Number.NEGATIVE_INFINITY,ua=0;for(const Ea of fa){let Ba=ma[ua],Fa=ma[ua+1];K=
Math.min(Ba,K);W=Math.min(Fa,W);oa=Math.max(Ba,oa);wa=Math.max(Fa,wa);ua+=Y;for(let Ra=1;Ra<Ea;Ra++,ua+=Y){const Oa=ma[ua],Ta=ma[ua+1];Ba+=Oa;Fa+=Ta;0>Oa&&(K=Math.min(K,Ba));0<Oa&&(oa=Math.max(oa,Ba));0>Ta?W=Math.min(W,Fa):0<Ta&&(wa=Math.max(wa,Fa))}}v[0]=K;v[1]=W;v[2]=oa;v[3]=wa;return v};m.getSignedQuantizedRingArea=Wa;m.quantizeOptimizedFeatureSet=function(v,K){const {geometryType:Y,features:W,hasM:fa,hasZ:ma}=K;if(!v)return K;for(let oa=0;oa<W.length;oa++){const wa=W[oa],ua=wa.weakClone();ua.geometry=
new l;Ia(ua.geometry,wa.geometry,fa,ma,Y,v);wa.centroid&&(ua.centroid=new l,Ia(ua.centroid,wa.centroid,fa,ma,"esriGeometryPoint",v));W[oa]=ua}K.transform=v;return K};m.quantizeOptimizedGeometry=Ia;m.quantizeX=M;m.quantizeY=T;m.removeCollinearVectices=function(v,K,Y,W,fa){if(!K||!K.coords||!K.coords.length)return null;Y=na[Y];const {coords:ma,lengths:oa}=K;K=Q(W,fa,W,fa);W=p(W,fa);let wa=fa=0,ua=0,Ea=0;for(const Ra of oa){wa=Ea;K(v.coords,ma,wa,fa,ma[fa],ma[fa+1]);fa+=W;var Ba=ma[fa];let Oa=ma[fa+
1],Ta=Ba,Sa=Oa;var Fa=Oa/Ba;wa+=W;K(v.coords,ma,wa,fa,Ta,Sa);fa+=W;for(let La=2;La<Ra;La++){Ba=ma[fa];Oa=ma[fa+1];const Va=Oa/Ba,ab=Fa===Va||!isFinite(Fa)&&!isFinite(Va);Fa=ab&&isFinite(Va)?0<=Fa&&0<=Va||0>=Fa&&0>=Va:0<=Sa&&0<=Oa||0>=Sa&&0>=Oa;ab&&Fa?(Ta+=Ba,Sa+=Oa):(Ta=Ba,Sa=Oa,wa+=W);K(v.coords,ma,wa,fa,Ta,Sa);fa+=W;Fa=Va}wa+=W;Ba=(wa-Ea)/W;Ba>=Y&&(v.lengths[ua]=Ba,Ea=wa,ua++)}v.coords.length>Ea&&(v.coords.length=Ea);v.lengths.length>ua&&(v.lengths.length=ua);return v.coords.length&&v.lengths.length?
v:null};m.removeZMValues=function(v,K,Y,W,fa,ma){Ya(v);v.lengths.push(...K.lengths);if(Y===fa&&W===ma)for(var oa=0;oa<K.coords.length;oa++)v.coords.push(K.coords[oa]);else for(oa=p(Y,W),Y=Q(Y,W,fa,ma),K=K.coords,W=0;W<K.length;W+=oa)Y(v.coords,K,v.coords.length,W,K[W],K[W+1]);return v};m.unquantizeOptimizedFeatureSet=function(v){const {transform:K,features:Y,hasM:W,hasZ:fa}=v;if(!K)return v;for(const ma of Y)aa.isSome(ma.geometry)&&Ma(ma.geometry,ma.geometry,W,fa,K),aa.isSome(ma.centroid)&&Ma(ma.centroid,
ma.centroid,W,fa,K);v.transform=null;return v};m.unquantizeOptimizedGeometry=Ma;m.unquantizeValue=D;m.unquantizeX=function(v,K){return D(v,K,0)};m.unquantizeY=function(v,K){return D(v,-K,1)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(m,e,ia,aa){function R(f=T){return[f[0],f[1],f[2],f[3],f[4],f[5]]}function N(f,u,L,Z,I,O,J=R()){J[0]=f;J[1]=u;J[2]=L;J[3]=
Z;J[4]=I;J[5]=O;return J}function P(f){return f[0]>=f[3]?0:f[3]-f[0]}function E(f){return f[1]>=f[4]?0:f[4]-f[1]}function h(f){return f[2]>=f[5]?0:f[5]-f[2]}function l(f,u){return Math.max(u[0],f[0])<=Math.min(u[3],f[3])&&Math.max(u[1],f[1])<=Math.min(u[4],f[4])&&Math.max(u[2],f[2])<=Math.min(u[5],f[5])}function p(f,u){f[0]=u[0];f[1]=u[1];f[2]=u[2];f[3]=u[3];f[4]=u[4];f[5]=u[5];return f}function Q(f){return 6===f.length}const M=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],T=[0,0,0,0,
0,0],D=R();m.NEGATIVE_INFINITY=M;m.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];m.ZERO=T;m.allFinite=function(f){for(let u=0;6>u;u++)if(!isFinite(f[u]))return!1;return!0};m.center=function(f,u=[0,0,0]){u[0]=f[0]+P(f)/2;u[1]=f[1]+E(f)/2;u[2]=f[2]+h(f)/2;return u};m.contains=function(f,u){return u[0]>=f[0]&&u[1]>=f[1]&&u[2]>=f[2]&&u[3]<=f[3]&&u[4]<=f[4]&&u[5]<=f[5]};m.containsPoint=function(f,u){return u[0]>=f[0]&&u[1]>=f[1]&&u[2]>=f[2]&&u[0]<=f[3]&&u[1]<=f[4]&&u[2]<=
f[5]};m.containsPointWithMargin=function(f,u,L){return u[0]>=f[0]-L&&u[1]>=f[1]-L&&u[2]>=f[2]-L&&u[0]<=f[3]+L&&u[1]<=f[4]+L&&u[2]<=f[5]+L};m.create=R;m.depth=E;m.diameter=function(f){const u=P(f),L=h(f);f=E(f);return Math.sqrt(u*u+L*L+f*f)};m.empty=function(f){return f?p(f,M):R(M)};m.equals=function(f,u,L){if(e.isNone(f)||e.isNone(u))return f===u;if(!Q(f)||!Q(u))return!1;if(L)for(let Z=0;Z<f.length;Z++){if(!L(f[Z],u[Z]))return!1}else for(L=0;L<f.length;L++)if(f[L]!==u[L])return!1;return!0};m.expandWithAABB=
function(f,u){f[0]=Math.min(f[0],u[0]);f[1]=Math.min(f[1],u[1]);f[2]=Math.min(f[2],u[2]);f[3]=Math.max(f[3],u[3]);f[4]=Math.max(f[4],u[4]);f[5]=Math.max(f[5],u[5])};m.expandWithBuffer=function(f,u,L=0,Z=u.length/3){let I=f[0],O=f[1],J=f[2],n=f[3],A=f[4],x=f[5];for(let B=0;B<Z;B++)I=Math.min(I,u[L+3*B]),O=Math.min(O,u[L+3*B+1]),J=Math.min(J,u[L+3*B+2]),n=Math.max(n,u[L+3*B]),A=Math.max(A,u[L+3*B+1]),x=Math.max(x,u[L+3*B+2]);f[0]=I;f[1]=O;f[2]=J;f[3]=n;f[4]=A;f[5]=x};m.expandWithNestedArray=function(f,
u,L){const Z=u.length;let I=f[0],O=f[1],J=f[2],n=f[3],A=f[4],x=f[5];if(L)for(L=0;L<Z;L++){var B=u[L];I=Math.min(I,B[0]);O=Math.min(O,B[1]);J=Math.min(J,B[2]);n=Math.max(n,B[0]);A=Math.max(A,B[1]);x=Math.max(x,B[2])}else for(L=0;L<Z;L++)B=u[L],I=Math.min(I,B[0]),O=Math.min(O,B[1]),n=Math.max(n,B[0]),A=Math.max(A,B[1]);f[0]=I;f[1]=O;f[2]=J;f[3]=n;f[4]=A;f[5]=x};m.expandWithOffset=function(f,u,L,Z){f[0]=Math.min(f[0],f[0]+u);f[3]=Math.max(f[3],f[3]+u);f[1]=Math.min(f[1],f[1]+L);f[4]=Math.max(f[4],f[4]+
L);f[2]=Math.min(f[2],f[2]+Z);f[5]=Math.max(f[5],f[5]+Z)};m.expandWithRect=function(f,u){f[0]=Math.min(f[0],u[0]);f[1]=Math.min(f[1],u[1]);f[3]=Math.max(f[3],u[2]);f[4]=Math.max(f[4],u[3])};m.expandWithVec3=function(f,u){f[0]=Math.min(f[0],u[0]);f[1]=Math.min(f[1],u[1]);f[2]=Math.min(f[2],u[2]);f[3]=Math.max(f[3],u[0]);f[4]=Math.max(f[4],u[1]);f[5]=Math.max(f[5],u[2])};m.fromExtent=function(f,u=R()){u[0]=f.xmin;u[1]=f.ymin;u[2]=f.hasZ?f.zmin:-Infinity;u[3]=f.xmax;u[4]=f.ymax;u[5]=f.hasZ?f.zmax:Infinity;
return u};m.fromMinMax=function(f,u,L=R()){L[0]=f[0];L[1]=f[1];L[2]=f[2];L[3]=u[0];L[4]=u[1];L[5]=u[2];return L};m.fromRect=function(f,u){f[0]=u[0];f[1]=u[1];f[2]=Number.NEGATIVE_INFINITY;f[3]=u[2];f[4]=u[3];f[5]=Number.POSITIVE_INFINITY;return f};m.fromRectValues=function(f,u,L,Z,I){f[0]=u;f[1]=L;f[2]=Number.NEGATIVE_INFINITY;f[3]=Z;f[4]=I;f[5]=Number.POSITIVE_INFINITY;return f};m.fromValues=N;m.getMax=function(f,u){u[0]=f[3];u[1]=f[4];u[2]=f[5];return u};m.getMin=function(f,u){u[0]=f[0];u[1]=f[1];
u[2]=f[2];return u};m.height=h;m.intersects=l;m.intersectsClippingArea=function(f,u){return e.isNone(u)?!0:l(f,u)};m.is=Q;m.isPoint=function(f){return 0===P(f)&&0===E(f)&&0===h(f)};m.maximumDimension=function(f){return Math.max(P(f),h(f),E(f))};m.offset=function(f,u,L,Z,I=f){I[0]=f[0]+u;I[1]=f[1]+L;I[2]=f[2]+Z;I[3]=f[3]+u;I[4]=f[4]+L;I[5]=f[5]+Z;return I};m.scale=function(f,u,L=f){const Z=f[0]+P(f)/2,I=f[1]+E(f)/2,O=f[2]+h(f)/2;L[0]=Z+(f[0]-Z)*u;L[1]=I+(f[1]-I)*u;L[2]=O+(f[2]-O)*u;L[3]=Z+(f[3]-Z)*
u;L[4]=I+(f[4]-I)*u;L[5]=O+(f[5]-O)*u;return L};m.set=p;m.setMax=function(f,u,L=f){L[3]=u[0];L[4]=u[1];L[5]=u[2];L!==f&&(L[0]=f[0],L[1]=f[1],L[2]=f[2]);return f};m.setMin=function(f,u,L=f){L[0]=u[0];L[1]=u[1];L[2]=u[2];L!==f&&(L[3]=f[3],L[4]=f[4],L[5]=f[5]);return L};m.size=function(f,u=[0,0,0]){u[0]=P(f);u[1]=E(f);u[2]=h(f);return u};m.toExtent=function(f,u){return isFinite(f[2])||isFinite(f[5])?new ia({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],zmin:f[2],zmax:f[5],spatialReference:u}):new ia({xmin:f[0],
xmax:f[3],ymin:f[1],ymax:f[4],spatialReference:u})};m.toRect=function(f,u){u||(u=aa.create());u[0]=f[0];u[1]=f[1];u[2]=f[3];u[3]=f[4];return u};m.width=P;m.wrap=function(f,u,L,Z,I,O){return N(f,u,L,Z,I,O,D)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(m,e,ia){let aa=function(){function N(P=null,E={},h,l){this.geometry=P;this.attributes=E;this.centroid=
h;this.objectId=l;this.geohashY=this.geohashX=this.displayId=0}N.prototype.weakClone=function(){const P=new N(this.geometry,this.attributes,this.centroid,this.objectId);P.displayId=this.displayId;P.geohashX=this.geohashX;P.geohashY=this.geohashY;return P};return e._createClass(N)}(),R=function(N){function P(){return E.apply(this,arguments)}e._inherits(P,N);var E=e._createSuper(P);return e._createClass(P)}(aa);m.OptimizedFeature=aa;m.OptimizedFeatureWithGeometry=R;m.hasGeometry=function(N){return!(ia.isNone(N.geometry)||
!N.geometry.coords||!N.geometry.coords.length)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(m){return function(){function e(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;
this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}e.prototype.weakClone=function(){const ia=new e;ia.objectIdFieldName=this.objectIdFieldName;ia.globalIdFieldName=this.globalIdFieldName;ia.geohashFieldName=this.geohashFieldName;ia.geometryProperties=this.geometryProperties;ia.geometryType=this.geometryType;ia.spatialReference=this.spatialReference;ia.hasZ=this.hasZ;ia.hasM=this.hasM;ia.features=this.features;ia.fields=this.fields;ia.transform=this.transform;ia.exceededTransferLimit=
this.exceededTransferLimit;ia.uniqueIdField=this.uniqueIdField;ia.queryGeometry=this.queryGeometry;ia.queryGeometryType=this.queryGeometryType;return ia};return m._createClass(e)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(m){return function(){function e(aa=[],R=[],N=!1){this.lengths=aa??[];this.coords=R??[];this.hasIndeterminateRingOrder=N}e.fromRect=function(aa){const [R,N,P,E]=aa;aa=P-R;const h=E-N;return new e([5],[R,N,aa,
0,0,h,-aa,0,0,-h])};var ia=e.prototype;ia.forEachVertex=function(aa){let R=0;this.lengths.length||aa(this.coords[0],this.coords[1]);for(let N=0;N<this.lengths.length;N++){const P=this.lengths[N];for(let E=0;E<P;E++)aa(this.coords[2*(E+R)],this.coords[2*(E+R)+1]);R+=P}};ia.clone=function(aa){return aa?(aa.set(this.coords),new e(this.lengths.slice(),aa,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};m._createClass(e,[{key:"isPoint",get:function(){return 0===
this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((aa,R)=>aa+R)}}]);return e}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(m){m.findLastObjectIdFromFeatures=function(e,ia){let aa=0;for(const R of ia)ia=R.attributes?.[e],"number"===typeof ia&&isFinite(ia)&&(aa=Math.max(aa,ia));return aa};m.initialObjectId=1;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(m,e,ia,aa,R,N,P,E,h,l,p){const Q=N.create();return function(){function M(D){this.geometryInfo=D;this._boundsStore=new h.BoundsStore;
this._featuresById=new Map;this._markedIds=new Set;this.events=new ia;this.featureAdapter=l.optimizedFeatureQueryEngineAdapter}var T=M.prototype;T.getFullExtent=function(D){if(R.isNone(this.fullBounds))return null;const [f,u,L,Z]=this.fullBounds;return{xmin:f,ymin:u,xmax:L,ymax:Z,spatialReference:p.cleanFromGeometryEngine(D)}};T.add=function(D){this._add(D);this._emitChanged()};T.addMany=function(D){for(const f of D)this._add(f);this._emitChanged()};T.clear=function(){this._featuresById.clear();this._boundsStore.clear();
this._emitChanged()};T.removeById=function(D){D=this._featuresById.get(D);if(!D)return null;this._remove(D);this._emitChanged();return D};T.removeManyById=function(D){this._boundsStore.invalidateIndex();for(const f of D)(D=this._featuresById.get(f))&&this._remove(D);this._emitChanged()};T.forEachBounds=function(D,f){for(const u of D)(D=this._boundsStore.get(u.objectId))&&f(N.fromRect(Q,D))};T.getFeature=function(D){return this._featuresById.get(D)};T.has=function(D){return this._featuresById.has(D)};
T.forEach=function(D){this._featuresById.forEach(f=>D(f))};T.forEachInBounds=function(D,f){this._boundsStore.forEachInBounds(D,u=>{f(this._featuresById.get(u))})};T.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};T.sweep=function(){let D=!1;this._featuresById.forEach((f,u)=>{this._markedIds.has(u)||(D=!0,this._remove(f))});this._markedIds.clear();D&&this._emitChanged()};T._emitChanged=function(){this.events.emit("changed",void 0)};T._add=function(D){if(D){var f=
D.objectId;if(null==f)aa.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature","feature id is missing",{feature:D}));else{var u=this._featuresById.get(f);this._markedIds.add(f);if(u){D.displayId=u.displayId;var L=this._boundsStore.get(f);this._boundsStore.delete(f)}else if(R.isSome(this.onFeatureAdd))this.onFeatureAdd(D);!R.isNone(D.geometry)&&D.geometry.coords&&D.geometry.coords.length?(L=E.getBoundsOptimizedGeometry(R.isSome(L)?L:P.create(),D.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),R.isSome(L)&&this._boundsStore.set(f,L)):this._boundsStore.set(f,null);this._featuresById.set(f,D)}}};T._remove=function(D){if(R.isSome(this.onFeatureRemove))this.onFeatureRemove(D);const f=D.objectId;this._markedIds.delete(f);this._boundsStore.delete(f);this._featuresById.delete(f);return D};m._createClass(M,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let D=0;this._featuresById.forEach(f=>{R.isSome(f.geometry)&&f.geometry.coords&&(D+=f.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:D/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return M}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(m,e,ia,aa,R){let N=function(){function P(){this._emitter=new P.EventEmitter(this)}var E=P.prototype;E.emit=function(h,l){return this._emitter.emit(h,l)};E.on=function(h,l){return this._emitter.on(h,l)};E.once=function(h,l){return this._emitter.once(h,l)};E.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return m._createClass(P)}();(function(P){let E=function(){function l(Q=null){this._target=Q;this._listenersMap=
null}var p=l.prototype;p.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};p.emit=function(Q,M){Q=this._listenersMap&&this._listenersMap.get(Q);if(!Q)return!1;const T=this._target||this;[...Q].forEach(D=>{D.call(T,M)});return 0<Q.length};p.on=function(Q,M){if(Array.isArray(Q)){var T=Q.map(D=>this.on(D,M));return aa.handlesGroup(T)}if(Q.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);T=this._listenersMap.get(Q)||[];T.push(M);this._listenersMap.set(Q,T);return{remove:()=>{const D=this._listenersMap&&this._listenersMap.get(Q)||[],f=D.indexOf(M);0<=f&&D.splice(f,1)}}};p.once=function(Q,M){const T=this.on(Q,D=>{T.remove();M.call(null,D)});return T};p.hasEventListener=function(Q){Q=this._listenersMap&&this._listenersMap.get(Q);return null!=Q&&0<Q.length};return m._createClass(l)}();P.EventEmitter=E;P.EventedMixin=l=>{l=function(p){function Q(){var T=M.apply(this,
arguments);T._emitter=new E;return T}m._inherits(Q,p);var M=m._createSuper(Q);p=Q.prototype;p.destroy=function(){this._emitter.clear()};p.emit=function(T,D){return this._emitter.emit(T,D)};p.on=function(T,D){return this._emitter.on(T,D)};p.once=function(T,D){return this._emitter.once(T,D)};p.hasEventListener=function(T){return this._emitter.hasEventListener(T)};return m._createClass(Q)}(l);return l=e.__decorate([R.subclass("esri.core.Evented")],l)};let h=function(l){function p(){var M=Q.apply(this,
arguments);M._emitter=new N.EventEmitter(m._assertThisInitialized(M));return M}m._inherits(p,l);var Q=m._createSuper(p);l=p.prototype;l.destroy=function(){this._emitter.clear()};l.emit=function(M,T){return this._emitter.emit(M,T)};l.on=function(M,T){return this._emitter.on(M,T)};l.once=function(M,T){return this._emitter.once(M,T)};l.hasEventListener=function(M){return this._emitter.hasEventListener(M)};return m._createClass(p)}(ia);h=e.__decorate([R.subclass("esri.core.Evented")],h);P.EventedAccessor=
h})(N||(N={}));return N})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(m,e,ia,aa,R){function N(h,l,p){P.minX=l[0];P.minY=l[1];P.maxX=l[2];P.maxY=l[3];h.search(P,p)}const P={minX:0,minY:0,maxX:0,maxY:0};let E=function(){function h(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;
this._index=new aa.PooledRBush(9,ia("esri-csp-restrictions")?p=>({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const p=Array(this._idByBounds.size);let Q=0;this._idByBounds.forEach((M,T)=>{p[Q++]=T});this._indexInvalid=!1;this._index.clear();this._index.load(p)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(p=>this._idByBounds.has(p))))),this._boundsToLoad.length=0)}}var l=h.prototype;
l.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};l.delete=function(p){const Q=this._boundsById.get(p);this._boundsById.delete(p);Q&&(this._idByBounds.delete(Q),this._indexInvalid||this._index.remove(Q))};l.forEachInBounds=function(p,Q){this._loadIndex();N(this._index,p,M=>Q(this._idByBounds.get(M)))};l.get=function(p){return this._boundsById.get(p)};l.has=function(p){return this._boundsById.has(p)};l.invalidateIndex=
function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};l.set=function(p,Q){if(!this._indexInvalid){const M=this._boundsById.get(p);M&&(this._index.remove(M),this._idByBounds.delete(M))}this._boundsById.set(p,Q);Q&&(this._idByBounds.set(Q,p),this._indexInvalid||(this._boundsToLoad.push(Q),5E4<this._boundsToLoad.length&&this._loadIndex()))};e._createClass(h,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const p=R.empty();for(const Q of this._boundsById.values())Q&&
(p[0]=Math.min(Q[0],p[0]),p[1]=Math.min(Q[1],p[1]),p[2]=Math.max(Q[2],p[2]),p[3]=Math.max(Q[3],p[3]));return p}},{key:"valid",get:function(){return!this._indexInvalid}}]);return h}();m.BoundsStore=E;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(m,e,ia,aa,R,N){function P(x,B){E(x,0,x.children.length,
B,x)}function E(x,B,z,w,C){C||(C=new n([]));C.minX=Infinity;C.minY=Infinity;C.maxX=-Infinity;C.maxY=-Infinity;for(let ba=B,G;ba<z;ba++)G=x.children[ba],h(C,x.leaf?w(G):G);return C}function h(x,B){x.minX=Math.min(x.minX,B.minX);x.minY=Math.min(x.minY,B.minY);x.maxX=Math.max(x.maxX,B.maxX);x.maxY=Math.max(x.maxY,B.maxY)}function l(x,B){return x.minX-B.minX}function p(x,B){return x.minY-B.minY}function Q(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function M(x){return x.maxX-x.minX+(x.maxY-x.minY)}function T(x,
B){return x.minX<=B.minX&&x.minY<=B.minY&&B.maxX<=x.maxX&&B.maxY<=x.maxY}function D(x,B){return B.minX<=x.maxX&&B.minY<=x.maxY&&B.maxX>=x.minX&&B.maxY>=x.minY}function f(x,B,z,w,C){for(B=[B,z];B.length;){z=aa.assumeNonNull(B.pop());const ba=aa.assumeNonNull(B.pop());if(z-ba<=w)continue;const G=ba+Math.ceil((z-ba)/w/2)*w;N.quickselect(x,G,ba,z,C);B.push(ba,G,G,z)}}let u=function(){function x(z=9,w){this._compareMinX=l;this._compareMinY=p;this._toBBox=C=>C;this._maxEntries=Math.max(4,z||9);this._minEntries=
Math.max(2,Math.ceil(.4*this._maxEntries));w&&("function"===typeof w?this._toBBox=w:this._initFormat(w));this.clear()}var B=x.prototype;B.destroy=function(){this.clear();L.prune();Z.prune();I.prune();O.prune()};B.all=function(z){this._all(this._data,z)};B.search=function(z,w){let C=this._data;const ba=this._toBBox;if(D(z,C))for(L.clear();C;){for(let G=0,H=C.children.length;G<H;G++){const t=C.children[G],q=C.leaf?ba(t):t;D(z,q)&&(C.leaf?w(t):T(z,q)?this._all(t,w):L.push(t))}C=L.pop()}};B.collides=
function(z){let w=this._data;const C=this._toBBox;if(!D(z,w))return!1;for(L.clear();w;){for(let ba=0,G=w.children.length;ba<G;ba++){const H=w.children[ba],t=w.leaf?C(H):H;if(D(z,t)){if(w.leaf||T(z,t))return!0;L.push(H)}}w=L.pop()}return!1};B.load=function(z){if(!z.length)return this;if(z.length<this._minEntries){for(let w=0,C=z.length;w<C;w++)this.insert(z[w]);return this}z=this._build(z.slice(0,z.length),0,z.length-1,0);if(this._data.children.length)if(this._data.height===z.height)this._splitRoot(this._data,
z);else{if(this._data.height<z.height){const w=this._data;this._data=z;z=w}this._insert(z,this._data.height-z.height-1,!0)}else this._data=z;return this};B.insert=function(z){z&&this._insert(z,this._data.height-1);return this};B.clear=function(){this._data=new n([]);return this};B.remove=function(z){if(!z)return this;let w=this._data,C=null,ba=0,G=!1,H;const t=this._toBBox(z);I.clear();for(O.clear();w||0<I.length;){w||(w=aa.assumeNonNull(I.pop()),C=I.data[I.length-1],ba=O.pop()??0,G=!0);if(w.leaf&&
(H=ia.indexOf(w.children,z,w.children.length,w.indexHint),-1!==H)){w.children.splice(H,1);I.push(w);this._condense(I);break}G||w.leaf||!T(w,t)?C?(ba++,w=C.children[ba],G=!1):w=null:(I.push(w),O.push(ba),ba=0,C=w,w=w.children[0])}return this};B.toJSON=function(){return this._data};B.fromJSON=function(z){this._data=z;return this};B._all=function(z,w){for(Z.clear();z;){if(!0===z.leaf)for(const C of z.children)w(C);else Z.pushArray(z.children);z=Z.pop()??null}};B._build=function(z,w,C,ba){var G=C-w+1,
H=this._maxEntries;if(G<=H)return z=new n(z.slice(w,C+1)),P(z,this._toBBox),z;ba||(ba=Math.ceil(Math.log(G)/Math.log(H)),H=Math.ceil(G/H**(ba-1)));const t=new A([]);t.height=ba;G=Math.ceil(G/H);H=G*Math.ceil(Math.sqrt(H));for(f(z,w,C,H,this._compareMinX);w<=C;w+=H){const q=Math.min(w+H-1,C);f(z,w,q,G,this._compareMinY);for(let U=w;U<=q;U+=G)t.children.push(this._build(z,U,Math.min(U+G-1,q),ba-1))}P(t,this._toBBox);return t};B._chooseSubtree=function(z,w,C,ba){for(;;){ba.push(w);if(!0===w.leaf||ba.length-
1===C)break;let G=Infinity,H=Infinity,t=void 0;for(let q=0,U=w.children.length;q<U;q++){const ha=w.children[q],va=Q(ha),Da=(Math.max(ha.maxX,z.maxX)-Math.min(ha.minX,z.minX))*(Math.max(ha.maxY,z.maxY)-Math.min(ha.minY,z.minY))-va;Da<H?(H=Da,G=va<G?va:G,t=ha):Da===H&&va<G&&(G=va,t=ha)}w=t||w.children[0]}return w};B._insert=function(z,w,C){var ba=this._toBBox;C=C?z:ba(z);I.clear();ba=this._chooseSubtree(C,this._data,w,I);ba.children.push(z);for(h(ba,C);0<=w;)if(I.data[w].children.length>this._maxEntries)this._split(I,
w),w--;else break;this._adjustParentBBoxes(C,I,w)};B._split=function(z,w){const C=z.data[w];var ba=C.children.length;const G=this._minEntries;this._chooseSplitAxis(C,G,ba);(ba=this._chooseSplitIndex(C,G,ba))?(ba=C.children.splice(ba,C.children.length-ba),ba=C.leaf?new n(ba):new A(ba),ba.height=C.height,P(C,this._toBBox),P(ba,this._toBBox),w?z.data[w-1].children.push(ba):this._splitRoot(C,ba)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};B._splitRoot=function(z,
w){this._data=new A([z,w]);this._data.height=z.height+1;P(this._data,this._toBBox)};B._chooseSplitIndex=function(z,w,C){let ba,G,H=void 0;ba=G=Infinity;for(let q=w;q<=C-w;q++){var t=E(z,0,q,this._toBBox);const U=E(z,q,C,this._toBBox),ha=Math.max(0,Math.min(t.maxX,U.maxX)-Math.max(t.minX,U.minX))*Math.max(0,Math.min(t.maxY,U.maxY)-Math.max(t.minY,U.minY));t=Q(t)+Q(U);ha<ba?(ba=ha,H=q,G=t<G?t:G):ha===ba&&t<G&&(G=t,H=q)}return H};B._chooseSplitAxis=function(z,w,C){const ba=z.leaf?this._compareMinX:l,
G=z.leaf?this._compareMinY:p,H=this._allDistMargin(z,w,C,ba);w=this._allDistMargin(z,w,C,G);H<w&&z.children.sort(ba)};B._allDistMargin=function(z,w,C,ba){z.children.sort(ba);ba=this._toBBox;var G=E(z,0,w,ba);const H=E(z,C-w,C,ba);let t=M(G)+M(H);for(let q=w;q<C-w;q++){const U=z.children[q];h(G,z.leaf?ba(U):U);t+=M(G)}for(C=C-w-1;C>=w;C--)G=z.children[C],h(H,z.leaf?ba(G):G),t+=M(H);return t};B._adjustParentBBoxes=function(z,w,C){for(;0<=C;C--)h(w.data[C],z)};B._condense=function(z){for(let w=z.length-
1;0<=w;w--){const C=z.data[w];if(0===C.children.length)if(0<w){const ba=z.data[w-1],G=ba.children;G.splice(ia.indexOf(G,C,G.length,ba.indexHint),1)}else this.clear();else P(C,this._toBBox)}};B._initFormat=function(z){const w=["return a"," - b",";"];this._compareMinX=new Function("a","b",w.join(z[0]));this._compareMinY=new Function("a","b",w.join(z[1]));this._toBBox=new Function("a","return {minX: a"+z[0]+", minY: a"+z[1]+", maxX: a"+z[2]+", maxY: a"+z[3]+"};")};return e._createClass(x)}();const L=
new R,Z=new R,I=new R,O=new R({deallocator:void 0});R=e._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let J=function(x){function B(){var w=z.apply(this,arguments);w.height=1;w.indexHint=new ia.PositionHint;return w}e._inherits(B,x);var z=e._createSuper(B);return e._createClass(B)}(R),n=function(x){function B(w){var C=z.call(this);C.children=w;C.leaf=!0;return C}e._inherits(B,x);var z=e._createSuper(B);return e._createClass(B)}(J),A=function(x){function B(w){var C=
z.call(this);C.children=w;C.leaf=!1;return C}e._inherits(B,x);var z=e._createSuper(B);return e._createClass(B)}(J);m.BBox=R;m.PooledRBush=u;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(m){var e={};(function(ia){(function(aa){aa=aa();void 0!==aa&&(ia.exports=aa)})(function(){function aa(P,E,h,l,p){for(;l>h;){if(600<l-h){var Q=l-h+1,M=E-h+1,T=Math.log(Q),D=.5*Math.exp(2*T/3);T=.5*Math.sqrt(T*D*(Q-D)/Q)*(0>M-Q/2?-1:1);
aa(P,E,Math.max(h,Math.floor(E-M*D/Q+T)),Math.min(l,Math.floor(E+(Q-M)*D/Q+T)),p)}Q=P[E];M=h;D=l;R(P,h,E);for(0<p(P[l],Q)&&R(P,h,l);M<D;){R(P,M,D);M++;for(D--;0>p(P[M],Q);)M++;for(;0<p(P[D],Q);)D--}0===p(P[h],Q)?R(P,h,D):(D++,R(P,D,l));D<=E&&(h=D+1);E<=D&&(l=D-1)}}function R(P,E,h){var l=P[E];P[E]=P[h];P[h]=l}function N(P,E){return P<E?-1:P>E?1:0}return function(P,E,h,l,p){aa(P,E,h||0,l||P.length-1,p||N)}})})({get exports(){return e},set exports(ia){e=ia}});m.quickselect=e})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(m,e,ia,aa,R){m.optimizedFeatureQueryEngineAdapter={getObjectId(N){return N.objectId},getAttributes(N){return N.attributes},getAttribute(N,P){return N.attributes[P]},cloneWithGeometry(N,P){return new aa.OptimizedFeature(P,N.attributes,null,N.objectId)},getGeometry(N){return N.geometry},getCentroid(N,P){e.isNone(N.centroid)&&(N.centroid=ia.getCentroidOptimizedGeometry(new R,N.geometry,P.hasZ,P.hasM));return N.centroid}};
Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(m,e){function ia(R,N,P,E,h,l,p=1){l=h?l?4:3:l?3:2;let Q=P,M=P+l,T=0,D=0,f=P=0,u=0;for(let L=0,Z=E-1;L<Z;L++,Q+=l,M+=l){E=N[Q];const I=N[Q+1],O=N[Q+2],J=N[M],n=N[M+1],A=N[M+2];let x=E*n-J*I;f+=x;T+=(E+J)*x;D+=(I+n)*x;h&&(x=E*A-J*O,P+=(O+A)*x,u+=x);E<R[0]&&(R[0]=E);E>R[1]&&(R[1]=E);I<R[2]&&(R[2]=I);I>R[3]&&(R[3]=I);h&&(O<R[4]&&(R[4]=O),O>R[5]&&(R[5]=
O))}0<f*p&&(f*=-1);0<u*p&&(u*=-1);if(!f)return null;R=[T,D,.5*f];h&&(R[3]=P,R[4]=.5*u);return R}function aa(R,N,P,E,h){h=E?h?4:3:h?3:2;let l=N,p=N+h,Q=0,M=0,T=0,D=0;for(let Z=0,I=P-1;Z<I;Z++,l+=h,p+=h){var f=R[l];const O=R[l+1],J=R[l+2],n=R[p],A=R[p+1],x=R[p+2];if(E){var u=n-f;var L=A-O;const B=x-J;u=Math.sqrt(u*u+L*L+B*B)}else u=n-f,L=A-O,u=Math.sqrt(u*u+L*L);u&&(Q+=u,E?(f=[f+.5*(n-f),O+.5*(A-O),J+.5*(x-J)],M+=u*f[0],T+=u*f[1],D+=u*f[2]):(f=[f+.5*(n-f),O+.5*(A-O)],M+=u*f[0],T+=u*f[1]))}return 0<
Q?E?[M/Q,T/Q,D/Q]:[M/Q,T/Q]:0<P?E?[R[N],R[N+1],R[N+2]]:[R[N],R[N+1]]:null}m.getCentroidOptimizedGeometry=function(R,N,P,E,h){if(e.isNone(N)||!N.lengths.length)return null;const l="upperLeft"===h?.originPosition?-1:1;R.lengths.length&&(R.lengths.length=0);R.coords.length&&(R.coords.length=0);h=R.coords;const p=[],Q=P?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:M,coords:T}=N,D=P?E?4:3:E?3:2;let f=0;for(var u of M){const L=ia(Q,T,f,u,P,E,l);L&&p.push(L);f+=u*D}p.sort((L,Z)=>{let I=l*L[2]-l*Z[2];0===I&&P&&(I=L[4]-Z[4]);return I});p.length&&(u=6*p[0][2],h[0]=p[0][0]/u,h[1]=p[0][1]/u,P&&(u=6*p[0][4],h[2]=0!==u?p[0][3]/u:0),h[0]<Q[0]||h[0]>Q[1]||h[1]<Q[2]||h[1]>Q[3]||P&&(h[2]<Q[4]||h[2]>Q[5]))&&(h.length=0);if(!h.length)if(N=N.lengths[0]?aa(T,0,M[0],P,E):null)h[0]=N[0],h[1]=N[1],P&&2<N.length&&(h[2]=
N[2]);else return null;return R};m.lineCentroid=aa;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(m,e,ia,aa,R,N,P,E,h,l,p,Q,M){async function T(x,B,z){if(!x)return null;var {where:w}=x;x.where=w=w&&w.trim();if(!w||/^1 *= *1$/.test(w)||B&&B===w)x.where=null;if(!x.geometry)return x;B=await f(x);x.distance=0;x.units=null;"esriSpatialRelEnvelopeIntersects"===x.spatialRel&&({spatialReference:w}=x.geometry,B=P.getGeometryExtent(B),B.spatialReference=w);if(B){await M.checkProjectionSupport(B.spatialReference,z);w=B.spatialReference;B=D(B,z)&&E.isExtent(B)?{spatialReference:w,rings:[[[B.xmin,
B.ymin],[B.xmin,B.ymax],[B.xmax,B.ymax],[B.xmax,B.ymin],[B.xmin,B.ymin]]]}:B;w=(await h.normalizeCentralMeridian(E.fromJSON(B)))[0];if(aa.isNone(w))throw Z;const C="quantizationParameters"in x&&x.quantizationParameters?.tolerance||"maxAllowableOffset"in x&&x.maxAllowableOffset||0;B=C&&D(B,z)?{densificationStep:8*C}:void 0;w=w.toJSON();B=await M.project(w,w.spatialReference,z,B);if(!B)throw Z;B.spatialReference=z;x.geometry=B}return x}function D(x,B){if(!x)return!1;const z=x.spatialReference;return(E.isExtent(x)||
E.isPolygon(x)||E.isPolyline(x))&&!l.equals(z,B)&&!N.canProjectWithoutEngine(z,B)}async function f(x){const {distance:B,units:z}=x,w=x.geometry;if(null==B||"vertexAttributes"in w)return w;var C=w.spatialReference;x=z?L.fromJSON(z):R.getUnitString(C);C=C&&(l.isGeographic(C)||l.isWebMercator(C))?w:await M.checkProjectionSupport(C,l.WGS84).then(()=>M.project(w,l.WGS84));return(await u())(C.spatialReference,C,B,x)}async function u(){return(await new Promise((x,B)=>m(["../../../geometry/geometryEngineJSON"],
x,B))).geodesicBuffer}const L=new ia.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),Z=Object.freeze({}),I=new Q,O=new Q,J=new Q,n={esriGeometryPoint:p.convertToPoint,esriGeometryPolyline:p.convertToPolyline,esriGeometryPolygon:p.convertToPolygon,esriGeometryMultipoint:p.convertToMultipoint},A=(x,B)=>"_geVersion"!==x?B:void 0;e.QUERY_ENGINE_EMPTY_RESULT=
Z;e.cleanFromGeometryEngine=function(x){return x&&"_geVersion"in x?JSON.parse(JSON.stringify(x,A)):x};e.getGeometry=function(x,B,z,w,C,ba,G=B,H=z){const t=B&&G,q=z&&H;w=aa.isSome(w)?"coords"in w?w:w.geometry:null;if(aa.isNone(w))return null;if(C)return B=p.generalizeOptimizedGeometry(O,w,B,z,x,C,G,H),ba&&(B=p.quantizeOptimizedGeometry(J,B,t,q,x,ba)),n[x]?.(B,t,q)??null;if(ba)return ba=p.quantizeOptimizedGeometry(J,w,B,z,x,ba,G,H),n[x]?.(ba,t,q)??null;p.removeZMValues(I,w,B,z,G,H);return n[x]?.(I,
t,q)??null};e.normalizeQuery=async function(x,B,z){const {outFields:w,orderByFields:C,groupByFieldsForStatistics:ba,outStatistics:G}=x;if(w)for(var H=0;H<w.length;H++)w[H]=w[H].trim();if(C)for(H=0;H<C.length;H++)C[H]=C[H].trim();if(ba)for(H=0;H<ba.length;H++)ba[H]=ba[H].trim();if(G)for(H=0;H<G.length;H++)G[H].onStatisticField&&(G[H].onStatisticField=G[H].onStatisticField.trim());x.geometry&&!x.outSR&&(x.outSR=x.geometry.spatialReference);return T(x,B,z)};e.normalizeQueryLike=T;e.transformCentroid=
function(x,B,z,w=x.hasZ,C=x.hasM){if(aa.isNone(B))return null;const ba=x.hasZ&&w,G=x.hasM&&C;return z?(x=p.quantizeOptimizedGeometry(J,B,x.hasZ,x.hasM,"esriGeometryPoint",z,w,C),p.convertToPoint(x,ba,G)):p.convertToPoint(B,ba,G)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(m,e,ia,aa,R,N,P,E,h,l,p,Q,M,T,D,f,u,L,Z,I,O,J,n,A,x,B,z){function w(){return!!ib&&u.isLoaded()}function C(S){N.isNone(hb)&&(hb=Promise.all([u.load(),(new Promise((ea,V)=>m(["../chunks/geometryEngineBase"],ea,V))).then(ea=>ea.geometryEngineBase),new Promise((ea,V)=>m(["./geometryAdapters/hydrated"],ea,V))]));return hb.then(([,ea,{hydratedAdapter:V}])=>{P.throwIfAborted(S);b=V;ib=ea.default;ib._enableProjection(u.pe);Rb.notify()})}function ba(S,ea,V=null,pa=null){return Array.isArray(S)?0===
S.length?[]:G(b,S,S[0].spatialReference,ea,V,pa):G(b,[S],S.spatialReference,ea,V,pa)[0]}function G(S,ea,V,pa,Ca=null,Ga=null){if(N.isNone(V)||N.isNone(pa))return ea;if(U(V,pa,Ca))return ea.map(Pa=>N.unwrap(ha(Pa,V,pa)));if(N.isNone(Ca)){const Pa=A.cacheKey(V,pa);void 0!==Ib[Pa]?Ca=Ib[Pa]:(Ca=t(V,pa,void 0),N.isNone(Ca)&&(Ca=new A),Ib[Pa]=Ca)}if(N.isNone(ib)||N.isNone(S))throw new nb;return N.isSome(Ga)?ib._project(S,ea,V,pa,Ca,Ga):ib._project(S,ea,V,pa,Ca)}function H(S,ea){if(!w())for(const V of S)if(N.isSome(V)&&
!x.equals(V.spatialReference,ea)&&x.isValid(V.spatialReference)&&x.isValid(ea)&&!U(V.spatialReference,ea))return h.trackAccess(Rb),{pending:C(),geometries:null};return{pending:null,geometries:S.map(V=>N.isNone(V)?null:x.equals(V.spatialReference,ea)?V:x.isValid(V.spatialReference)&&x.isValid(ea)?q(V,ea):null)}}function t(S,ea,V=null){if(N.isNone(S)||N.isNone(ea))return null;if(N.isNone(ib)||N.isNone(b))throw new nb;S=ib._getTransformation(b,S,ea,V,V?.spatialReference);return null!==S?A.fromGE(S):
null}function q(S,ea){try{const V=ba(S,ea);if(null==V)return null;"xmin"in S&&"xmin"in V&&(V.zmin=S.zmin,V.zmax=S.zmax);const pa=z.getGeometryZScaler(V.type,S.spatialReference,ea);N.isSome(pa)&&pa(V);return V}catch(V){if(!(V instanceof nb))throw V;return null}}function U(S,ea,V){return V?!1:x.equals(S,ea)?!0:x.isValid(S)&&x.isValid(ea)&&!!xa(S,ea,Yb)}function ha(S,ea,V){return S?"x"in S?va(S,ea,new L,V,0):"xmin"in S?Ja(S,ea,new D,V,0):"rings"in S?Ia(S,ea,new Z,V,0):"paths"in S?Ha(S,ea,new I,V,0):
"points"in S?Da(S,ea,new f,V,0):null:null}function va(S,ea,V,pa,Ca){Za[0]=S.x;Za[1]=S.y;const Ga=S.z;Za[2]=void 0!==Ga?Ga:Ca;if(!Ua(Za,ea,0,Za,pa,0,1))return null;V.x=Za[0];V.y=Za[1];V.spatialReference=pa;void 0===Ga?(V.z=void 0,V.hasZ=!1):(V.z=Za[2],V.hasZ=!0);void 0===S.m?(V.m=void 0,V.hasM=!1):(V.m=S.m,V.hasM=!0);return V}function Da(S,ea,V,pa,Ca){const {points:Ga,hasZ:Pa,hasM:Xa}=S;S=[];const ob=Ga.length,mb=[];for(var lb of Ga)mb.push(lb[0],lb[1],Pa?lb[2]:Ca);if(!Ua(mb,ea,0,mb,pa,0,ob))return null;
for(ea=0;ea<ob;++ea){Ca=3*ea;lb=mb[Ca];const xb=mb[Ca+1];Pa&&Xa?S.push([lb,xb,mb[Ca+2],Ga[ea][3]]):Pa?S.push([lb,xb,mb[Ca+2]]):Xa?S.push([lb,xb,Ga[ea][2]]):S.push([lb,xb])}V.points=S;V.spatialReference=pa;V.hasZ=Pa;V.hasM=Xa;return V}function Ha(S,ea,V,pa,Ca){const {paths:Ga,hasZ:Pa,hasM:Xa}=S;S=[];if(!gb(Ga,Pa??!1,Xa??!1,ea,S,pa,Ca))return null;V.paths=S;V.spatialReference=pa;V.hasZ=Pa;V.hasM=Xa;return V}function Ia(S,ea,V,pa,Ca){const {rings:Ga,hasZ:Pa,hasM:Xa}=S;S=[];if(!gb(Ga,Pa??!1,Xa??!1,ea,
S,pa,Ca))return null;V.rings=S;V.spatialReference=pa;V.hasZ=Pa;V.hasM=Xa;return V}function Ja(S,ea,V,pa,Ca){const {xmin:Ga,ymin:Pa,xmax:Xa,ymax:ob,hasZ:mb,hasM:lb}=S;if(!Ma(Ga,Pa,mb?S.zmin:Ca,ea,Za,pa))return null;V.xmin=Za[0];V.ymin=Za[1];mb&&(V.zmin=Za[2]);if(!Ma(Xa,ob,mb?S.zmax:Ca,ea,Za,pa))return null;V.xmax=Za[0];V.ymax=Za[1];mb&&(V.zmax=Za[2]);lb&&(V.mmin=S.mmin,V.mmax=S.mmax);V.spatialReference=pa;return V}function Ma(S,ea,V,pa,Ca,Ga){kb[0]=S;kb[1]=ea;kb[2]=V;return Ua(kb,pa,0,Ca,Ga,0,1)}function Wa(S,
ea,V,pa){if(N.isNone(ea)||N.isNone(pa)||2>S.length)return!1;2===S.length&&(kb[0]=S[0],kb[1]=S[1],kb[2]=0,S=kb);return Ua(S,ea,0,V,pa,0,1)}function Ya(S,ea,V){if(N.isNone(ea))return!1;ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ea))return!1;ea(S,0,kb,0);V!==kb&&(V[0]=kb[0],V[1]=kb[1],2<V.length&&(V[2]=kb[2]));return!0}function Ua(S,ea,V,pa,Ca,Ga,Pa=1){ea=xa(ea,Ca,Yb);if(N.isNone(ea))return!1;if(ea===k){if(S===pa&&V===Ga)return!0;Pa=V+3*Pa;for(let Xa=V,ob=Ga;Xa<Pa;Xa++,ob++)pa[ob]=
S[Xa];return!0}Pa=V+3*Pa;for(let Xa=V,ob=Ga;Xa<Pa;Xa+=3,ob+=3)ea(S,Xa,pa,ob);return!0}function gb(S,ea,V,pa,Ca,Ga,Pa=0){const Xa=[];for(const ob of S)for(const mb of ob)Xa.push(mb[0],mb[1],ea?mb[2]:Pa);if(!Ua(Xa,pa,0,Xa,Ga,0,Xa.length/3))return!1;pa=0;Ca.length=0;for(const ob of S){S=[];for(const mb of ob)ea&&V?S.push([Xa[pa++],Xa[pa++],Xa[pa++],mb[3]]):ea?S.push([Xa[pa++],Xa[pa++],Xa[pa++]]):(V?S.push([Xa[pa++],Xa[pa++],mb[2]]):S.push([Xa[pa++],Xa[pa++]]),pa++);Ca.push(S)}return!0}function na(S,
ea,V,pa){ea=pa+ea;if(ea<pa/2||V>ea)return Number.MAX_VALUE;S=Math.abs(Eb*S)+Math.asin(V/ea);return S>=Math.PI/2?Number.MAX_VALUE:V/Math.cos(S)}function ra(S,ea,V){const pa=Math.sin(S);S=Math.cos(S);const Ca=Math.sin(ea);ea=Math.cos(ea);V[0]=-pa;V[4]=-Ca*S;V[8]=ea*S;V[12]=0;V[1]=S;V[5]=-Ca*pa;V[9]=ea*pa;V[13]=0;V[2]=0;V[6]=ea;V[10]=Ca;V[14]=0;V[3]=0;V[7]=0;V[11]=0;V[15]=1;return V}function Aa(S,ea,V){ra(S,ea,V);p.transpose(V,V);return V}function c(S,ea){if(!S)return la.UNKNOWN;if(ea.spatialReference===
S)return ea.spatialReferenceId;ea.spatialReference=S;"metersPerUnit"in ea&&(ea.metersPerUnit=E.getMetersPerUnitForSR(S,1));return S.wkt===T.SphericalECEFSpatialReferenceLike.wkt?ea.spatialReferenceId=la.SPHERICAL_ECEF:x.isWGS84(S)?ea.spatialReferenceId=la.WGS84:x.isWebMercator(S)?ea.spatialReferenceId=la.WEB_MERCATOR:x.isPlateCarree(S)?ea.spatialReferenceId=la.PLATE_CARREE:S.wkt===T.WGS84ECEFSpatialReferenceLike.wkt?ea.spatialReferenceId=la.WGS84_ECEF:S.wkid===B.SupportedGCSWkids.CGCS2000?ea.spatialReferenceId=
la.CGCS2000:S.wkt===T.SphericalPCPFMarsLike.wkt?ea.spatialReferenceId=la.SPHERICAL_MARS_PCPF:S.wkt===T.SphericalPCPFMoonLike.wkt?ea.spatialReferenceId=la.SPHERICAL_MOON_PCPF:x.isMars(S)?ea.spatialReferenceId=la.GCSMARS2000:x.isMoon(S)?ea.spatialReferenceId=la.GCSMOON2000:ea.spatialReferenceId=la.UNKNOWN}function k(S,ea,V,pa){S!==V&&(V[pa++]=S[ea++],V[pa++]=S[ea++],V[pa]=S[ea])}function da(S,ea,V,pa){V[pa++]=Sb*(S[ea++]/J.earth.radius);V[pa++]=Sb*(Math.PI/2-2*Math.atan(Math.exp(-S[ea++]/J.earth.radius)));
V[pa]=S[ea]}function ka(S,ea,V,pa){da(S,ea,V,pa);ua(V,pa,V,pa)}function sa(S,ea,V,pa){da(S,ea,V,pa);Sa(V,pa,V,pa)}function v(S,ea,V,pa,Ca){var Ga=.4999999*Math.PI;Ga=R.clamp(Eb*S[ea+1],-Ga,Ga);Ga=Math.sin(Ga);V[pa++]=Eb*S[ea]*Ca.radius;V[pa++]=Ca.halfSemiMajorAxis*Math.log((1+Ga)/(1-Ga));V[pa]=S[ea+2]}function K(S,ea,V,pa){v(S,ea,V,pa,J.earth)}function Y(S,ea,V,pa){V[pa]=S[ea]*hc;V[pa+1]=S[ea+1]*hc;V[pa+2]=S[ea+2]}function W(S,ea,V,pa){V[pa]=S[ea]*Tb;V[pa+1]=S[ea+1]*Tb;V[pa+2]=S[ea+2]}function fa(S,
ea,V,pa){da(S,ea,V,pa);Y(V,pa,V,pa)}function ma(S,ea,V,pa,Ca){Ca+=S[ea+2];const Ga=Eb*S[ea+1];S=Eb*S[ea];ea=Math.cos(Ga);V[pa++]=Math.cos(S)*ea*Ca;V[pa++]=Math.sin(S)*ea*Ca;V[pa]=Math.sin(Ga)*Ca}function oa(S,ea,V,pa){ma(S,ea,V,pa,J.moon.radius)}function wa(S,ea,V,pa){ma(S,ea,V,pa,J.mars.radius)}function ua(S,ea,V,pa){ma(S,ea,V,pa,J.earth.radius)}function Ea(S,ea,V,pa,Ca){var Ga=S[ea];const Pa=S[ea+1];ea=S[ea+2];S=Math.sqrt(Ga*Ga+Pa*Pa+ea*ea);ea=R.asinClamped(ea/(0===S?1:S));Ga=Math.atan2(Pa,Ga);
V[pa++]=Sb*Ga;V[pa++]=Sb*ea;V[pa]=S-Ca}function Ba(S,ea,V,pa){Ea(S,ea,V,pa,J.moon.radius)}function Fa(S,ea,V,pa){Ea(S,ea,V,pa,J.mars.radius)}function Ra(S,ea,V,pa){Ea(S,ea,V,pa,J.earth.radius)}function Oa(S,ea,V,pa){Ra(S,ea,V,pa);K(V,pa,V,pa)}function Ta(S,ea,V,pa){Ra(S,ea,V,pa);Sa(V,pa,V,pa)}function Sa(S,ea,V,pa){var Ca=J.earth;const Ga=Eb*S[ea];var Pa=Eb*S[ea+1];S=S[ea+2];ea=Math.sin(Pa);Pa=Math.cos(Pa);const Xa=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ea*ea);V[pa++]=(Xa+S)*Pa*Math.cos(Ga);
V[pa++]=(Xa+S)*Pa*Math.sin(Ga);V[pa++]=(Xa*(1-Ca.eccentricitySquared)+S)*ea}function La(S,ea,V,pa){var Ca=n.earthEllipsoidConstants,Ga=S[ea],Pa=S[ea+1];S=S[ea+2];let Xa;ea=Math.abs(S);var ob=Ga*Ga+Pa*Pa;var mb=Math.sqrt(ob);var lb=ob+S*S;var xb=Math.sqrt(lb);Ga=Math.atan2(Pa,Ga);var Kb=S*S/lb;lb=ob/lb;Pa=Ca.a2/xb;ob=Ca.a3-Ca.a4/xb;.3<lb?(Kb=ea/xb*(1+lb*(Ca.a1+Pa+Kb*ob)/xb),xb=Math.asin(Kb),Pa=Kb*Kb,lb=Math.sqrt(1-Pa)):(lb=mb/xb*(1-Kb*(Ca.a5-Pa-lb*ob)/xb),xb=Math.acos(lb),Pa=1-lb*lb,Kb=Math.sqrt(Pa));
Xa=1-J.earth.eccentricitySquared*Pa;Pa=J.earth.radius/Math.sqrt(Xa);Ca=Ca.a6*Pa;Pa=mb-Pa*lb;ob=ea-Ca*Kb;ea=lb*Pa+Kb*ob;mb=lb*ob-Kb*Pa;Ca=mb/(Ca/Xa+ea);xb+=Ca;0>S&&(xb=-xb);V[pa++]=Sb*Ga;V[pa++]=Sb*xb;V[pa]=ea+mb*Ca/2}function Va(S,ea,V,pa){La(S,ea,V,pa);ua(V,pa,V,pa)}function ab(S,ea,V,pa){La(S,ea,V,pa);K(V,pa,V,pa)}function xa(S,ea,V=sb()){return N.isNone(S)||N.isNone(ea)?null:wb(S,ea,V).projector}function wb(S,ea,V){if(N.isNone(S)||N.isNone(ea)||V.source.spatialReference===S&&V.dest.spatialReference===
ea)return V;const pa=c(S,V.source),Ca=c(ea,V.dest);pa===la.UNKNOWN&&Ca===la.UNKNOWN?x.equals(S,ea)?V.projector=k:V.projector=null:V.projector=Db[pa][Ca];return V}function sb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:k}}let ib=null,b=null,hb=null,Ib={};const Rb=new l.SimpleObservable;let nb=function(S){function ea(){return V.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}
ia._inherits(ea,S);var V=ia._createSuper(ea);return ia._createClass(ea)}(aa);var la;(function(S){S[S.UNKNOWN=0]="UNKNOWN";S[S.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";S[S.WGS84=2]="WGS84";S[S.WEB_MERCATOR=3]="WEB_MERCATOR";S[S.WGS84_ECEF=4]="WGS84_ECEF";S[S.CGCS2000=5]="CGCS2000";S[S.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";S[S.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";S[S.GCSMARS2000=8]="GCSMARS2000";S[S.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";S[S.GCSMOON2000=10]="GCSMOON2000";S[S.LON_LAT=
11]="LON_LAT";S[S.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const hc=J.earth.radius*Math.PI/180,Tb=180/(J.earth.radius*Math.PI),Db={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:k,[la.WGS84_COMPARABLE_LON_LAT]:k,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:K,[la.PLATE_CARREE]:Y,[la.WGS84]:k,[la.WGS84_ECEF]:Sa},[la.CGCS2000]:{[la.CGCS2000]:k,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:k,[la.WGS84_COMPARABLE_LON_LAT]:k,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:Y,[la.WGS84]:null,[la.WGS84_ECEF]:Sa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:k,[la.GCSMOON2000]:null,[la.LON_LAT]:k,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:k,[la.LON_LAT]:k,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:da,[la.WGS84_COMPARABLE_LON_LAT]:da,[la.SPHERICAL_ECEF]:ka,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:k,[la.PLATE_CARREE]:fa,[la.WGS84]:da,[la.WGS84_ECEF]:sa},[la.WGS84_ECEF]:{[la.CGCS2000]:La,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:La,[la.WGS84_COMPARABLE_LON_LAT]:La,[la.SPHERICAL_ECEF]:Va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(S,ea,V,pa){La(S,ea,V,pa);Y(V,pa,V,pa)},[la.WGS84]:La,[la.WGS84_ECEF]:k},
[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ra,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ra,[la.WGS84_COMPARABLE_LON_LAT]:Ra,[la.SPHERICAL_ECEF]:k,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Oa,[la.PLATE_CARREE]:function(S,ea,V,pa){Ra(S,ea,V,pa);Y(V,pa,V,pa)},[la.WGS84]:Ra,[la.WGS84_ECEF]:Ta},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Fa,[la.GCSMOON2000]:null,[la.LON_LAT]:Fa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:k,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ba,[la.LON_LAT]:Ba,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:k,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:k,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:k,[la.GCSMARS2000]:k,[la.GCSMOON2000]:k,[la.LON_LAT]:k,[la.WGS84_COMPARABLE_LON_LAT]:k,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:K,
[la.PLATE_CARREE]:Y,[la.WGS84]:k,[la.WGS84_ECEF]:Sa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:k,[la.WGS84_COMPARABLE_LON_LAT]:k,[la.SPHERICAL_ECEF]:ua,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:Y,[la.WGS84]:k,[la.WGS84_ECEF]:Sa},[la.PLATE_CARREE]:{[la.CGCS2000]:W,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:W,[la.WGS84_COMPARABLE_LON_LAT]:W,[la.SPHERICAL_ECEF]:function(S,
ea,V,pa){W(S,ea,V,pa);ua(V,pa,V,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(S,ea,V,pa){W(S,ea,V,pa);K(V,pa,V,pa)},[la.PLATE_CARREE]:k,[la.WGS84]:W,[la.WGS84_ECEF]:function(S,ea,V,pa){W(S,ea,V,pa);Sa(V,pa,V,pa)}}},Jb={spatialReference:null,spatialReferenceId:la.UNKNOWN},ac={spatialReference:null,spatialReferenceId:la.UNKNOWN},Yb=sb(),ic=sb(),Eb=R.deg2rad(1),Sb=R.rad2deg(1),kb=M.create(),Gb=M.create(),Hb=M.create(),Za=M.create(),bc=M.create();
e.canProjectToWGS84ComparableLonLat=function(S){if(N.isNone(S))return!1;S=c(S,Jb);return!!Db[S][la.WGS84_COMPARABLE_LON_LAT]};e.canProjectWithoutEngine=U;e.computeENUToSphericalPCPFLocalRotation=ra;e.computeSphericalPCPFToENULocalRotation=Aa;e.computeTranslationToOriginAndRotation=function(S,ea,V,pa){if(N.isNone(S)||N.isNone(pa))return!1;var Ca=c(S,Jb),Ga=c(pa,ac);if(Ca===Ga&&Ga!==la.SPHERICAL_ECEF&&Ga!==la.SPHERICAL_MARS_PCPF&&Ga!==la.SPHERICAL_MOON_PCPF&&(Ca!==la.UNKNOWN||x.equals(S,pa)))return p.fromTranslation(V,
ea),!0;if(Ga===la.SPHERICAL_ECEF||Ga===la.SPHERICAL_MARS_PCPF||Ga===la.SPHERICAL_MOON_PCPF){Ca=Db[Ca][la.LON_LAT];Ga=Db[la.LON_LAT][Ga];if(N.isNone(Ca)||N.isNone(Ga))return!1;Ca(ea,0,Gb,0);Ga(Gb,0,Hb,0);ra(Eb*Gb[0],Eb*Gb[1],V);V[12]=Hb[0];V[13]=Hb[1];V[14]=Hb[2];return!0}if((Ga===la.WEB_MERCATOR||Ga===la.PLATE_CARREE)&&(Ca===la.WGS84||Ca===la.CGCS2000&&Ga===la.PLATE_CARREE||Ca===la.SPHERICAL_ECEF||Ca===la.WEB_MERCATOR)){S=Db[Ca][la.LON_LAT];Ga=Db[la.LON_LAT][Ga];if(N.isNone(S)||N.isNone(Ga))return!1;
S(ea,0,Gb,0);Ga(Gb,0,Hb,0);Ca===la.SPHERICAL_ECEF?Aa(Eb*Gb[0],Eb*Gb[1],V):p.identity(V);V[12]=Hb[0];V[13]=Hb[1];V[14]=Hb[2];return!0}return!1};e.getProjectorName=function(S,ea){switch(xa(S,ea,Yb)){case k:return"copy3";case ua:return"wgs84ToSphericalECEF";case K:return"wgs84ToWebMercator";case Y:return"wgs84ToPlateCarree";case Sa:return"wgs84ToWGS84ECEF";case da:return"webMercatorToWGS84";case ka:return"webMercatorToSphericalECEF";case sa:return"webMercatorToWGS84ECEF";case fa:return"webMercatorToPlateCarree";
case La:return"wgs84ECEFToWGS84";case Va:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ra:return"sphericalECEFToWGS84";case Oa:return"sphericalECEFToWebMercator";case Fa:return"sphericalMarsPCPFToMars2000";case Ba:return"sphericalMoonPCPFToMoon2000";case Ta:return"sphericalECEFToWGS84ECEF";case wa:return"mars2000ToSphericalPCPF";case oa:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=t;e.getTransformations=function(S,ea,V=null){if(N.isNone(ib)||
N.isNone(b))throw new nb;S=ib._getTransformationBySuitability(b,S,ea,V,V?.spatialReference);if(null!==S){ea=[];for(const pa of S)ea.push(A.fromGE(pa));return ea}return[]};e.initializeProjection=async function(S,ea,V,pa){if(w())return P.waitTick(pa);if(Array.isArray(S))for(const {source:Ca,dest:Ga,geographicTransformation:Pa}of S){if(!U(Ca,Ga,Pa))return C(pa)}else if(!U(S,ea,V))return C(pa);return P.waitTick(pa)};e.isLoaded=w;e.load=C;e.localLinearScaleFactors=function(S,ea,V,pa){if(N.isNone(ea)||
N.isNone(pa))return!1;const Ca=c(ea,Jb);var Ga=c(pa,ac);if(Ca===Ga&&Ca!==la.UNKNOWN||x.equals(ea,pa))return V[0]=1,V[1]=1,V[2]=1,!0;if(Ca===la.SPHERICAL_ECEF){ea=Q.length(S);S=ea/Math.sqrt(S[0]*S[0]+S[1]*S[1]);ea/=J.earth.radius;if(Ga===la.WEB_MERCATOR)return V[0]=S*ea,V[1]=S*ea,V[2]=1,!0;if(Ga===la.WGS84||Ga===la.CGCS2000)return Ga=Tb,V[0]=Ga*S*ea,V[1]=Ga*ea,V[2]=1,!0}else if(Ca===la.PLATE_CARREE){if(Ga===la.WGS84||Ga===la.CGCS2000)return V[0]=Tb,V[1]=Tb,V[2]=1,!0;if(Ga===la.WEB_MERCATOR)return Ga=
S[1]/J.earth.radius,V[0]=1,V[1]=1/Math.cos(Ga),V[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(S,ea,V,pa){const Ca=Math.cos(V);S[0]=Math.cos(ea)*Ca*pa;S[1]=Math.sin(ea)*Ca*pa;S[2]=Math.sin(V)*pa};e.lonLatToWebMercatorComparable=v;e.project=ba;e.projectBoundingRect=function(S,ea,V,pa){if(null==S)return!1;if(x.equals(ea,pa))return O.copy(V,S),!0;kb[0]=S[0];kb[1]=S[1];kb[2]=0;if(!Ua(kb,ea,0,kb,pa,0,1))return!1;V[0]=kb[0];V[1]=kb[1];kb[0]=S[2];kb[1]=S[3];kb[2]=0;if(!Ua(kb,ea,0,kb,pa,0,1))return!1;
V[2]=kb[0];V[3]=kb[1];return!0};e.projectBoundingSphere=function(S,ea,V,pa){if(N.isNone(ea)||N.isNone(pa))return!1;ea=wb(ea,pa,ic);if(ea.projector===k)return V[0]=S[0],V[1]=S[1],V[2]=S[2],V[3]=S[3],!0;if(N.isNone(ea.projector))return!1;const {source:Ca,dest:Ga}=ea;if(Ga.spatialReferenceId===la.WEB_MERCATOR){ea=Db[Ca.spatialReferenceId][la.WGS84];if(N.isNone(ea))return!1;ea(S,0,Gb,0);K(Gb,0,V,0);V[3]=na(Gb[1],S[2],S[3],J.earth.radius);return!0}if(Ca.spatialReferenceId!==la.WGS84&&Ca.spatialReferenceId!==
la.CGCS2000||Ga.spatialReferenceId!==la.PLATE_CARREE)ea.projector(S,0,V,0),V[3]=S[3]*(Ca.metersPerUnit??1)/(Ga.metersPerUnit??1);else{pa=Db[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Pa=S[3];N.isSome(Db[Ca.spatialReferenceId][la.SPHERICAL_ECEF])&&N.isSome(pa)&&(Pa=na(S[1],S[2],S[3],J.earth.radius));ea.projector(S,0,V,0);V[3]=Pa}return!0};e.projectBuffer=Ua;e.projectDirection=function(S,ea,V,pa,Ca){Q.copy(Za,S);Q.add(bc,S,ea);Wa(Za,V,Za,Ca);Wa(bc,V,bc,Ca);Q.subtract(pa,bc,Za);Q.normalize(pa,pa)};e.projectExtent=
function(S,ea,V=ea.spatialReference,pa=0){return N.isSome(S.spatialReference)&&N.isSome(V)&&N.isSome(Ja(S,S.spatialReference,ea,V,pa))};e.projectMany=G;e.projectMultipoint=function(S,ea,V=ea.spatialReference,pa=0){return N.isSome(S.spatialReference)&&N.isSome(V)&&N.isSome(Da(S,S.spatialReference,ea,V,pa))};e.projectOrLoad=function(S,ea){S=H([S],ea);return N.isSome(S.pending)?{pending:S.pending,geometry:null}:N.isSome(S.geometries)?{pending:null,geometry:S.geometries[0]}:{pending:null,geometry:null}};
e.projectOrLoadMany=H;e.projectPoint=function(S,ea,V=ea.spatialReference,pa=0){return N.isSome(V)&&N.isSome(S.spatialReference)&&N.isSome(va(S,S.spatialReference,ea,V,pa))};e.projectPointToVector=function(S,ea,V,pa=0){Za[0]=S.x;Za[1]=S.y;const Ca=S.z;Za[2]=void 0!==Ca?Ca:pa;return Ua(Za,S.spatialReference,0,ea,V,0,1)};e.projectPointToWGS84ComparableLonLat=function(S,ea){Za[0]=S.x;Za[1]=S.y;const V=S.z;Za[2]=void 0!==V?V:0;return Ya(Za,S.spatialReference,ea)};e.projectPolygon=function(S,ea,V=ea.spatialReference,
pa=0){return N.isSome(S.spatialReference)&&N.isSome(V)&&N.isSome(Ia(S,S.spatialReference,ea,V,pa))};e.projectPolygonToWGS84ComparableLonLat=function({hasZ:S,spatialReference:ea,rings:V},pa,Ca=0){ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ea))return!1;S=S?Ga=>Ga:Ga=>Q.set(Za,Ga[0],Ga[1],Ca);for(const Ga of V){V=[];for(const Pa of Ga){const Xa=[0,0,Ca];ea(S(Pa),0,Xa,0);V.push(Xa)}pa.push(V)}return!0};e.projectPolyline=function(S,ea,V=ea.spatialReference,pa=0){return N.isSome(S.spatialReference)&&
N.isSome(V)&&N.isSome(Ha(S,S.spatialReference,ea,V,pa))};e.projectPolylineToWGS84ComparableLonLat=function({hasZ:S,spatialReference:ea,paths:V},pa,Ca=0){ea=c(ea,Jb);ea=Db[ea][la.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ea))return!1;S=S?Ga=>Ga:Ga=>Q.set(Za,Ga[0],Ga[1],Ca);for(const Ga of V){V=[];for(const Pa of Ga){const Xa=[0,0,Ca];ea(S(Pa),0,Xa,0);V.push(Xa)}pa.push(V)}return!0};e.projectVectorToDehydratedPoint=function(S,ea,V){return Ua(S,ea,0,Za,V.spatialReference,0,1)?(V.x=Za[0],V.y=Za[1],V.z=Za[2],
V):null};e.projectVectorToPoint=function(S,ea,V){if(N.isNone(ea)||N.isNone(V))return null;const pa=new L({spatialReference:V});return Ua(S,ea,0,Za,V,0,1)?(pa.x=Za[0],pa.y=Za[1],pa.z=Za[2],pa):null};e.projectVectorToVector=Wa;e.projectVectorToWGS84ComparableLonLat=function(S,ea,V){return Ya(S,ea,V)};e.projectWithoutEngine=ha;e.projectXYZToVector=Ma;e.sphericalPCPFtoLonLatElevation=Ea;e.test={get loadPromise(){return hb}};e.tryProjectWithZConversion=q;e.unload=function(){hb=b=ib=null;Ib={}};Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(m,e,ia){ia=function(aa){function R(){return N.apply(this,arguments)}e._inherits(R,aa);var N=e._createSuper(R);R.prototype.notify=function(){var P=this._observers;if(P&&0<P.length){P=P.slice();for(const E of P)E.onInvalidated(),E.onCommitted()}};return e._createClass(R)}(ia.ObservableBase);m.SimpleObservable=
ia;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(m,e,ia){function aa(c,k){c[0]=k[0];c[1]=k[1];c[2]=k[2];c[3]=k[3];c[4]=k[4];c[5]=k[5];c[6]=k[6];c[7]=k[7];c[8]=k[8];c[9]=k[9];c[10]=k[10];c[11]=k[11];c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function R(c,k,da,ka,sa,v,K,Y,W,fa,ma,oa,wa,ua,Ea,Ba,Fa){c[0]=k;c[1]=da;c[2]=ka;c[3]=sa;c[4]=v;c[5]=K;c[6]=Y;c[7]=W;c[8]=fa;c[9]=ma;c[10]=oa;c[11]=
wa;c[12]=ua;c[13]=Ea;c[14]=Ba;c[15]=Fa;return c}function N(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function P(c,k){if(c===k){const da=k[1],ka=k[2],sa=k[3],v=k[6],K=k[7],Y=k[11];c[1]=k[4];c[2]=k[8];c[3]=k[12];c[4]=da;c[6]=k[9];c[7]=k[13];c[8]=ka;c[9]=v;c[11]=k[14];c[12]=sa;c[13]=K;c[14]=Y}else c[0]=k[0],c[1]=k[4],c[2]=k[8],c[3]=k[12],c[4]=k[1],c[5]=k[5],c[6]=k[9],c[7]=k[13],c[8]=k[2],c[9]=k[6],c[10]=k[10],c[11]=
k[14],c[12]=k[3],c[13]=k[7],c[14]=k[11],c[15]=k[15];return c}function E(c,k){h(c,k)||N(c);return c}function h(c,k){const da=k[0],ka=k[1],sa=k[2],v=k[3],K=k[4],Y=k[5],W=k[6],fa=k[7],ma=k[8],oa=k[9],wa=k[10],ua=k[11],Ea=k[12],Ba=k[13],Fa=k[14];k=k[15];const Ra=da*Y-ka*K,Oa=da*W-sa*K,Ta=da*fa-v*K,Sa=ka*W-sa*Y,La=ka*fa-v*Y,Va=sa*fa-v*W,ab=ma*Ba-oa*Ea,xa=ma*Fa-wa*Ea,wb=ma*k-ua*Ea,sb=oa*Fa-wa*Ba,ib=oa*k-ua*Ba,b=wa*k-ua*Fa;let hb=Ra*b-Oa*ib+Ta*sb+Sa*wb-La*xa+Va*ab;if(!hb)return null;hb=1/hb;c[0]=(Y*b-W*
ib+fa*sb)*hb;c[1]=(sa*ib-ka*b-v*sb)*hb;c[2]=(Ba*Va-Fa*La+k*Sa)*hb;c[3]=(wa*La-oa*Va-ua*Sa)*hb;c[4]=(W*wb-K*b-fa*xa)*hb;c[5]=(da*b-sa*wb+v*xa)*hb;c[6]=(Fa*Ta-Ea*Va-k*Oa)*hb;c[7]=(ma*Va-wa*Ta+ua*Oa)*hb;c[8]=(K*ib-Y*wb+fa*ab)*hb;c[9]=(ka*wb-da*ib-v*ab)*hb;c[10]=(Ea*La-Ba*Ta+k*Ra)*hb;c[11]=(oa*Ta-ma*La-ua*Ra)*hb;c[12]=(Y*xa-K*sb-W*ab)*hb;c[13]=(da*sb-ka*xa+sa*ab)*hb;c[14]=(Ba*Oa-Ea*Sa-Fa*Ra)*hb;c[15]=(ma*Sa-oa*Oa+wa*Ra)*hb;return c}function l(c,k){const da=k[0],ka=k[1],sa=k[2],v=k[3],K=k[4],Y=k[5],W=
k[6],fa=k[7],ma=k[8],oa=k[9],wa=k[10],ua=k[11],Ea=k[12],Ba=k[13],Fa=k[14];k=k[15];c[0]=Y*(wa*k-ua*Fa)-oa*(W*k-fa*Fa)+Ba*(W*ua-fa*wa);c[1]=-(ka*(wa*k-ua*Fa)-oa*(sa*k-v*Fa)+Ba*(sa*ua-v*wa));c[2]=ka*(W*k-fa*Fa)-Y*(sa*k-v*Fa)+Ba*(sa*fa-v*W);c[3]=-(ka*(W*ua-fa*wa)-Y*(sa*ua-v*wa)+oa*(sa*fa-v*W));c[4]=-(K*(wa*k-ua*Fa)-ma*(W*k-fa*Fa)+Ea*(W*ua-fa*wa));c[5]=da*(wa*k-ua*Fa)-ma*(sa*k-v*Fa)+Ea*(sa*ua-v*wa);c[6]=-(da*(W*k-fa*Fa)-K*(sa*k-v*Fa)+Ea*(sa*fa-v*W));c[7]=da*(W*ua-fa*wa)-K*(sa*ua-v*wa)+ma*(sa*fa-v*W);c[8]=
K*(oa*k-ua*Ba)-ma*(Y*k-fa*Ba)+Ea*(Y*ua-fa*oa);c[9]=-(da*(oa*k-ua*Ba)-ma*(ka*k-v*Ba)+Ea*(ka*ua-v*oa));c[10]=da*(Y*k-fa*Ba)-K*(ka*k-v*Ba)+Ea*(ka*fa-v*Y);c[11]=-(da*(Y*ua-fa*oa)-K*(ka*ua-v*oa)+ma*(ka*fa-v*Y));c[12]=-(K*(oa*Fa-wa*Ba)-ma*(Y*Fa-W*Ba)+Ea*(Y*wa-W*oa));c[13]=da*(oa*Fa-wa*Ba)-ma*(ka*Fa-sa*Ba)+Ea*(ka*wa-sa*oa);c[14]=-(da*(Y*Fa-W*Ba)-K*(ka*Fa-sa*Ba)+Ea*(ka*W-sa*Y));c[15]=da*(Y*wa-W*oa)-K*(ka*wa-sa*oa)+ma*(ka*W-sa*Y);return c}function p(c){const k=c[0],da=c[1],ka=c[2],sa=c[3],v=c[4],K=c[5],Y=
c[6],W=c[7],fa=c[8],ma=c[9],oa=c[10],wa=c[11],ua=c[12],Ea=c[13],Ba=c[14];c=c[15];return(k*K-da*v)*(oa*c-wa*Ba)-(k*Y-ka*v)*(ma*c-wa*Ea)+(k*W-sa*v)*(ma*Ba-oa*Ea)+(da*Y-ka*K)*(fa*c-wa*ua)-(da*W-sa*K)*(fa*Ba-oa*ua)+(ka*W-sa*Y)*(fa*Ea-ma*ua)}function Q(c,k,da){const ka=k[0],sa=k[1],v=k[2],K=k[3],Y=k[4],W=k[5],fa=k[6],ma=k[7],oa=k[8],wa=k[9],ua=k[10],Ea=k[11],Ba=k[12],Fa=k[13],Ra=k[14];k=k[15];let Oa=da[0],Ta=da[1],Sa=da[2],La=da[3];c[0]=Oa*ka+Ta*Y+Sa*oa+La*Ba;c[1]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[2]=Oa*v+Ta*fa+
Sa*ua+La*Ra;c[3]=Oa*K+Ta*ma+Sa*Ea+La*k;Oa=da[4];Ta=da[5];Sa=da[6];La=da[7];c[4]=Oa*ka+Ta*Y+Sa*oa+La*Ba;c[5]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[6]=Oa*v+Ta*fa+Sa*ua+La*Ra;c[7]=Oa*K+Ta*ma+Sa*Ea+La*k;Oa=da[8];Ta=da[9];Sa=da[10];La=da[11];c[8]=Oa*ka+Ta*Y+Sa*oa+La*Ba;c[9]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[10]=Oa*v+Ta*fa+Sa*ua+La*Ra;c[11]=Oa*K+Ta*ma+Sa*Ea+La*k;Oa=da[12];Ta=da[13];Sa=da[14];La=da[15];c[12]=Oa*ka+Ta*Y+Sa*oa+La*Ba;c[13]=Oa*sa+Ta*W+Sa*wa+La*Fa;c[14]=Oa*v+Ta*fa+Sa*ua+La*Ra;c[15]=Oa*K+Ta*ma+Sa*Ea+La*k;return c}
function M(c,k,da){const ka=da[0],sa=da[1];da=da[2];if(k===c)c[12]=k[0]*ka+k[4]*sa+k[8]*da+k[12],c[13]=k[1]*ka+k[5]*sa+k[9]*da+k[13],c[14]=k[2]*ka+k[6]*sa+k[10]*da+k[14],c[15]=k[3]*ka+k[7]*sa+k[11]*da+k[15];else{const v=k[0],K=k[1],Y=k[2],W=k[3],fa=k[4],ma=k[5],oa=k[6],wa=k[7],ua=k[8],Ea=k[9],Ba=k[10],Fa=k[11];c[0]=v;c[1]=K;c[2]=Y;c[3]=W;c[4]=fa;c[5]=ma;c[6]=oa;c[7]=wa;c[8]=ua;c[9]=Ea;c[10]=Ba;c[11]=Fa;c[12]=v*ka+fa*sa+ua*da+k[12];c[13]=K*ka+ma*sa+Ea*da+k[13];c[14]=Y*ka+oa*sa+Ba*da+k[14];c[15]=W*
ka+wa*sa+Fa*da+k[15]}return c}function T(c,k,da){const ka=da[0],sa=da[1];da=da[2];c[0]=k[0]*ka;c[1]=k[1]*ka;c[2]=k[2]*ka;c[3]=k[3]*ka;c[4]=k[4]*sa;c[5]=k[5]*sa;c[6]=k[6]*sa;c[7]=k[7]*sa;c[8]=k[8]*da;c[9]=k[9]*da;c[10]=k[10]*da;c[11]=k[11]*da;c[12]=k[12];c[13]=k[13];c[14]=k[14];c[15]=k[15];return c}function D(c,k,da,ka){let sa=ka[0],v=ka[1];ka=ka[2];let K=Math.sqrt(sa*sa+v*v+ka*ka);var Y=void 0,W=void 0;let fa=void 0,ma=void 0,oa=void 0,wa=void 0,ua=void 0,Ea=void 0,Ba=void 0,Fa=void 0,Ra=void 0,Oa=
void 0,Ta=void 0,Sa=void 0,La=void 0,Va=void 0,ab=void 0,xa=void 0,wb=void 0,sb=void 0,ib=void 0,b=void 0;W=Y=void 0;if(K<ia.getEpsilon())return null;K=1/K;sa*=K;v*=K;ka*=K;Y=Math.sin(da);W=Math.cos(da);fa=1-W;ma=k[0];oa=k[1];wa=k[2];ua=k[3];Ea=k[4];Ba=k[5];Fa=k[6];Ra=k[7];Oa=k[8];Ta=k[9];Sa=k[10];La=k[11];Va=sa*sa*fa+W;ab=v*sa*fa+ka*Y;xa=ka*sa*fa-v*Y;wb=sa*v*fa-ka*Y;sb=v*v*fa+W;ib=ka*v*fa+sa*Y;b=sa*ka*fa+v*Y;Y=v*ka*fa-sa*Y;W=ka*ka*fa+W;c[0]=ma*Va+Ea*ab+Oa*xa;c[1]=oa*Va+Ba*ab+Ta*xa;c[2]=wa*Va+Fa*
ab+Sa*xa;c[3]=ua*Va+Ra*ab+La*xa;c[4]=ma*wb+Ea*sb+Oa*ib;c[5]=oa*wb+Ba*sb+Ta*ib;c[6]=wa*wb+Fa*sb+Sa*ib;c[7]=ua*wb+Ra*sb+La*ib;c[8]=ma*b+Ea*Y+Oa*W;c[9]=oa*b+Ba*Y+Ta*W;c[10]=wa*b+Fa*Y+Sa*W;c[11]=ua*b+Ra*Y+La*W;k!==c&&(c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);return c}function f(c,k,da){const ka=Math.sin(da);da=Math.cos(da);const sa=k[4],v=k[5],K=k[6],Y=k[7],W=k[8],fa=k[9],ma=k[10],oa=k[11];k!==c&&(c[0]=k[0],c[1]=k[1],c[2]=k[2],c[3]=k[3],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[4]=sa*
da+W*ka;c[5]=v*da+fa*ka;c[6]=K*da+ma*ka;c[7]=Y*da+oa*ka;c[8]=W*da-sa*ka;c[9]=fa*da-v*ka;c[10]=ma*da-K*ka;c[11]=oa*da-Y*ka;return c}function u(c,k,da){const ka=Math.sin(da);da=Math.cos(da);const sa=k[0],v=k[1],K=k[2],Y=k[3],W=k[8],fa=k[9],ma=k[10],oa=k[11];k!==c&&(c[4]=k[4],c[5]=k[5],c[6]=k[6],c[7]=k[7],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[0]=sa*da-W*ka;c[1]=v*da-fa*ka;c[2]=K*da-ma*ka;c[3]=Y*da-oa*ka;c[8]=sa*ka+W*da;c[9]=v*ka+fa*da;c[10]=K*ka+ma*da;c[11]=Y*ka+oa*da;return c}function L(c,
k,da){const ka=Math.sin(da);da=Math.cos(da);const sa=k[0],v=k[1],K=k[2],Y=k[3],W=k[4],fa=k[5],ma=k[6],oa=k[7];k!==c&&(c[8]=k[8],c[9]=k[9],c[10]=k[10],c[11]=k[11],c[12]=k[12],c[13]=k[13],c[14]=k[14],c[15]=k[15]);c[0]=sa*da+W*ka;c[1]=v*da+fa*ka;c[2]=K*da+ma*ka;c[3]=Y*da+oa*ka;c[4]=W*da-sa*ka;c[5]=fa*da-v*ka;c[6]=ma*da-K*ka;c[7]=oa*da-Y*ka;return c}function Z(c,k){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=k[0];c[13]=k[1];c[14]=k[2];c[15]=1;return c}function I(c,
k){c[0]=k[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=k[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function O(c,k,da){if(0===k)return N(c);let ka=da[0],sa=da[1];da=da[2];let v=Math.sqrt(ka*ka+sa*sa+da*da),K=void 0,Y=void 0,W=void 0;if(v<ia.getEpsilon())return null;v=1/v;ka*=v;sa*=v;da*=v;K=Math.sin(k);Y=Math.cos(k);W=1-Y;c[0]=ka*ka*W+Y;c[1]=sa*ka*W+da*K;c[2]=da*ka*W-sa*K;c[3]=0;c[4]=ka*sa*W-da*K;c[5]=sa*sa*W+Y;c[6]=da*sa*W+ka*K;c[7]=0;c[8]=ka*da*W+sa*K;c[9]=
sa*da*W-ka*K;c[10]=da*da*W+Y;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function J(c,k){const da=Math.sin(k);k=Math.cos(k);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=da;c[7]=0;c[8]=0;c[9]=-da;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function n(c,k){const da=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=0;c[2]=-da;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=da;c[9]=0;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function A(c,k){const da=Math.sin(k);k=Math.cos(k);c[0]=k;c[1]=
da;c[2]=0;c[3]=0;c[4]=-da;c[5]=k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function x(c,k,da){var ka=k[0],sa=k[1],v=k[2],K=k[3],Y=ka+ka,W=sa+sa;const fa=v+v;k=ka*Y;const ma=ka*W;ka*=fa;const oa=sa*W;sa*=fa;v*=fa;Y*=K;W*=K;K*=fa;c[0]=1-(oa+v);c[1]=ma+K;c[2]=ka-W;c[3]=0;c[4]=ma-K;c[5]=1-(k+v);c[6]=sa+Y;c[7]=0;c[8]=ka+W;c[9]=sa-Y;c[10]=1-(k+oa);c[11]=0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function B(c,k){const da=Aa,ka=-k[0],sa=-k[1],v=-k[2],
K=k[3],Y=k[4],W=k[5],fa=k[6],ma=k[7],oa=ka*ka+sa*sa+v*v+K*K;0<oa?(da[0]=2*(Y*K+ma*ka+W*v-fa*sa)/oa,da[1]=2*(W*K+ma*sa+fa*ka-Y*v)/oa,da[2]=2*(fa*K+ma*v+Y*sa-W*ka)/oa):(da[0]=2*(Y*K+ma*ka+W*v-fa*sa),da[1]=2*(W*K+ma*sa+fa*ka-Y*v),da[2]=2*(fa*K+ma*v+Y*sa-W*ka));x(c,k,da);return c}function z(c,k){c[0]=k[12];c[1]=k[13];c[2]=k[14];return c}function w(c,k){const da=k[0],ka=k[1],sa=k[2],v=k[4],K=k[5],Y=k[6],W=k[8],fa=k[9];k=k[10];c[0]=Math.sqrt(da*da+ka*ka+sa*sa);c[1]=Math.sqrt(v*v+K*K+Y*Y);c[2]=Math.sqrt(W*
W+fa*fa+k*k);return c}function C(c,k){const da=k[0]+k[5]+k[10];let ka=0;0<da?(ka=2*Math.sqrt(da+1),c[3]=.25*ka,c[0]=(k[6]-k[9])/ka,c[1]=(k[8]-k[2])/ka,c[2]=(k[1]-k[4])/ka):k[0]>k[5]&&k[0]>k[10]?(ka=2*Math.sqrt(1+k[0]-k[5]-k[10]),c[3]=(k[6]-k[9])/ka,c[0]=.25*ka,c[1]=(k[1]+k[4])/ka,c[2]=(k[8]+k[2])/ka):k[5]>k[10]?(ka=2*Math.sqrt(1+k[5]-k[0]-k[10]),c[3]=(k[8]-k[2])/ka,c[0]=(k[1]+k[4])/ka,c[1]=.25*ka,c[2]=(k[6]+k[9])/ka):(ka=2*Math.sqrt(1+k[10]-k[0]-k[5]),c[3]=(k[1]-k[4])/ka,c[0]=(k[8]+k[2])/ka,c[1]=
(k[6]+k[9])/ka,c[2]=.25*ka);return c}function ba(c,k,da,ka){var sa=k[0],v=k[1],K=k[2],Y=k[3],W=sa+sa,fa=v+v,ma=K+K;k=sa*W;const oa=sa*fa;sa*=ma;const wa=v*fa;v*=ma;K*=ma;W*=Y;fa*=Y;Y*=ma;ma=ka[0];const ua=ka[1];ka=ka[2];c[0]=(1-(wa+K))*ma;c[1]=(oa+Y)*ma;c[2]=(sa-fa)*ma;c[3]=0;c[4]=(oa-Y)*ua;c[5]=(1-(k+K))*ua;c[6]=(v+W)*ua;c[7]=0;c[8]=(sa+fa)*ka;c[9]=(v-W)*ka;c[10]=(1-(k+wa))*ka;c[11]=0;c[12]=da[0];c[13]=da[1];c[14]=da[2];c[15]=1;return c}function G(c,k,da,ka,sa){var v=k[0],K=k[1],Y=k[2],W=k[3],fa=
v+v,ma=K+K,oa=Y+Y;k=v*fa;var wa=v*ma,ua=v*oa;v=K*ma;K*=oa;var Ea=Y*oa;Y=W*fa;ma*=W;const Ba=W*oa;var Fa=ka[0],Ra=ka[1];oa=ka[2];ka=sa[0];W=sa[1];sa=sa[2];fa=(1-(v+Ea))*Fa;const Oa=(wa+Ba)*Fa;Fa*=ua-ma;wa=(wa-Ba)*Ra;Ea=(1-(k+Ea))*Ra;Ra*=K+Y;ua=(ua+ma)*oa;K=(K-Y)*oa;k=(1-(k+v))*oa;c[0]=fa;c[1]=Oa;c[2]=Fa;c[3]=0;c[4]=wa;c[5]=Ea;c[6]=Ra;c[7]=0;c[8]=ua;c[9]=K;c[10]=k;c[11]=0;c[12]=da[0]+ka-(fa*ka+wa*W+ua*sa);c[13]=da[1]+W-(Oa*ka+Ea*W+K*sa);c[14]=da[2]+sa-(Fa*ka+Ra*W+k*sa);c[15]=1;return c}function H(c,
k){var da=k[0],ka=k[1],sa=k[2];k=k[3];var v=da+da,K=ka+ka;const Y=sa+sa;da*=v;const W=ka*v;ka*=K;const fa=sa*v,ma=sa*K;sa*=Y;v*=k;K*=k;k*=Y;c[0]=1-ka-sa;c[1]=W+k;c[2]=fa-K;c[3]=0;c[4]=W-k;c[5]=1-da-sa;c[6]=ma+v;c[7]=0;c[8]=fa+K;c[9]=ma-v;c[10]=1-da-ka;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function t(c,k,da,ka,sa,v,K){const Y=1/(da-k),W=1/(sa-ka),fa=1/(v-K);c[0]=2*v*Y;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*v*W;c[6]=0;c[7]=0;c[8]=(da+k)*Y;c[9]=(sa+ka)*W;c[10]=(K+v)*fa;c[11]=-1;c[12]=0;c[13]=
0;c[14]=K*v*2*fa;c[15]=0;return c}function q(c,k,da,ka,sa){k=1/Math.tan(k/2);let v=void 0;c[0]=k/da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=sa&&Infinity!==sa?(v=1/(ka-sa),c[10]=(sa+ka)*v,c[14]=2*sa*ka*v):(c[10]=-1,c[14]=-2*ka);return c}function U(c,k,da,ka){const sa=Math.tan(k.upDegrees*Math.PI/180),v=Math.tan(k.downDegrees*Math.PI/180),K=Math.tan(k.leftDegrees*Math.PI/180);k=Math.tan(k.rightDegrees*Math.PI/180);const Y=2/(K+k),W=2/(sa+
v);c[0]=Y;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=W;c[6]=0;c[7]=0;c[8]=-((K-k)*Y*.5);c[9]=(sa-v)*W*.5;c[10]=ka/(da-ka);c[11]=-1;c[12]=0;c[13]=0;c[14]=ka*da/(da-ka);c[15]=0;return c}function ha(c,k,da,ka,sa,v,K){const Y=1/(k-da),W=1/(ka-sa),fa=1/(v-K);c[0]=-2*Y;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*W;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*fa;c[11]=0;c[12]=(k+da)*Y;c[13]=(sa+ka)*W;c[14]=(K+v)*fa;c[15]=1;return c}function va(c,k,da,ka){var sa=void 0;let v=void 0;var K=void 0,Y=void 0;let W=void 0,fa=void 0;var ma=
void 0,oa=void 0;let wa=void 0,ua=void 0;const Ea=k[0],Ba=k[1];k=k[2];K=ka[0];Y=ka[1];ka=ka[2];ma=da[0];oa=da[1];da=da[2];sa=ia.getEpsilon();if(Math.abs(Ea-ma)<sa&&Math.abs(Ba-oa)<sa&&Math.abs(k-da)<sa)return N(c);ma=Ea-ma;oa=Ba-oa;wa=k-da;ua=1/Math.sqrt(ma*ma+oa*oa+wa*wa);ma*=ua;oa*=ua;wa*=ua;sa=Y*wa-ka*oa;v=ka*ma-K*wa;K=K*oa-Y*ma;(ua=Math.sqrt(sa*sa+v*v+K*K))?(ua=1/ua,sa*=ua,v*=ua,K*=ua):K=v=sa=0;Y=oa*K-wa*v;W=wa*sa-ma*K;fa=ma*v-oa*sa;(ua=Math.sqrt(Y*Y+W*W+fa*fa))?(ua=1/ua,Y*=ua,W*=ua,fa*=ua):fa=
W=Y=0;c[0]=sa;c[1]=Y;c[2]=ma;c[3]=0;c[4]=v;c[5]=W;c[6]=oa;c[7]=0;c[8]=K;c[9]=fa;c[10]=wa;c[11]=0;c[12]=-(sa*Ea+v*Ba+K*k);c[13]=-(Y*Ea+W*Ba+fa*k);c[14]=-(ma*Ea+oa*Ba+wa*k);c[15]=1;return c}function Da(c,k,da,ka){const sa=k[0],v=k[1];k=k[2];var K=ka[0];const Y=ka[1];var W=ka[2];ka=sa-da[0];let fa=v-da[1];da=k-da[2];let ma=ka*ka+fa*fa+da*da;0<ma&&(ma=1/Math.sqrt(ma),ka*=ma,fa*=ma,da*=ma);let oa=Y*da-W*fa;W=W*ka-K*da;K=K*fa-Y*ka;ma=oa*oa+W*W+K*K;0<ma&&(ma=1/Math.sqrt(ma),oa*=ma,W*=ma,K*=ma);c[0]=oa;c[1]=
W;c[2]=K;c[3]=0;c[4]=fa*K-da*W;c[5]=da*oa-ka*K;c[6]=ka*W-fa*oa;c[7]=0;c[8]=ka;c[9]=fa;c[10]=da;c[11]=0;c[12]=sa;c[13]=v;c[14]=k;c[15]=1;return c}function Ha(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ia(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**
2)}function Ja(c,k,da){c[0]=k[0]+da[0];c[1]=k[1]+da[1];c[2]=k[2]+da[2];c[3]=k[3]+da[3];c[4]=k[4]+da[4];c[5]=k[5]+da[5];c[6]=k[6]+da[6];c[7]=k[7]+da[7];c[8]=k[8]+da[8];c[9]=k[9]+da[9];c[10]=k[10]+da[10];c[11]=k[11]+da[11];c[12]=k[12]+da[12];c[13]=k[13]+da[13];c[14]=k[14]+da[14];c[15]=k[15]+da[15];return c}function Ma(c,k,da){c[0]=k[0]-da[0];c[1]=k[1]-da[1];c[2]=k[2]-da[2];c[3]=k[3]-da[3];c[4]=k[4]-da[4];c[5]=k[5]-da[5];c[6]=k[6]-da[6];c[7]=k[7]-da[7];c[8]=k[8]-da[8];c[9]=k[9]-da[9];c[10]=k[10]-da[10];
c[11]=k[11]-da[11];c[12]=k[12]-da[12];c[13]=k[13]-da[13];c[14]=k[14]-da[14];c[15]=k[15]-da[15];return c}function Wa(c,k,da){c[0]=k[0]*da;c[1]=k[1]*da;c[2]=k[2]*da;c[3]=k[3]*da;c[4]=k[4]*da;c[5]=k[5]*da;c[6]=k[6]*da;c[7]=k[7]*da;c[8]=k[8]*da;c[9]=k[9]*da;c[10]=k[10]*da;c[11]=k[11]*da;c[12]=k[12]*da;c[13]=k[13]*da;c[14]=k[14]*da;c[15]=k[15]*da;return c}function Ya(c,k,da,ka){c[0]=k[0]+da[0]*ka;c[1]=k[1]+da[1]*ka;c[2]=k[2]+da[2]*ka;c[3]=k[3]+da[3]*ka;c[4]=k[4]+da[4]*ka;c[5]=k[5]+da[5]*ka;c[6]=k[6]+da[6]*
ka;c[7]=k[7]+da[7]*ka;c[8]=k[8]+da[8]*ka;c[9]=k[9]+da[9]*ka;c[10]=k[10]+da[10]*ka;c[11]=k[11]+da[11]*ka;c[12]=k[12]+da[12]*ka;c[13]=k[13]+da[13]*ka;c[14]=k[14]+da[14]*ka;c[15]=k[15]+da[15]*ka;return c}function Ua(c,k){return c[0]===k[0]&&c[1]===k[1]&&c[2]===k[2]&&c[3]===k[3]&&c[4]===k[4]&&c[5]===k[5]&&c[6]===k[6]&&c[7]===k[7]&&c[8]===k[8]&&c[9]===k[9]&&c[10]===k[10]&&c[11]===k[11]&&c[12]===k[12]&&c[13]===k[13]&&c[14]===k[14]&&c[15]===k[15]}function gb(c,k){if(c===k)return!0;const da=c[0],ka=c[1],
sa=c[2],v=c[3],K=c[4],Y=c[5],W=c[6],fa=c[7],ma=c[8],oa=c[9],wa=c[10],ua=c[11],Ea=c[12],Ba=c[13],Fa=c[14];c=c[15];const Ra=k[0],Oa=k[1],Ta=k[2],Sa=k[3],La=k[4],Va=k[5],ab=k[6],xa=k[7],wb=k[8],sb=k[9],ib=k[10],b=k[11],hb=k[12],Ib=k[13],Rb=k[14];k=k[15];const nb=ia.getEpsilon();return Math.abs(da-Ra)<=nb*Math.max(1,Math.abs(da),Math.abs(Ra))&&Math.abs(ka-Oa)<=nb*Math.max(1,Math.abs(ka),Math.abs(Oa))&&Math.abs(sa-Ta)<=nb*Math.max(1,Math.abs(sa),Math.abs(Ta))&&Math.abs(v-Sa)<=nb*Math.max(1,Math.abs(v),
Math.abs(Sa))&&Math.abs(K-La)<=nb*Math.max(1,Math.abs(K),Math.abs(La))&&Math.abs(Y-Va)<=nb*Math.max(1,Math.abs(Y),Math.abs(Va))&&Math.abs(W-ab)<=nb*Math.max(1,Math.abs(W),Math.abs(ab))&&Math.abs(fa-xa)<=nb*Math.max(1,Math.abs(fa),Math.abs(xa))&&Math.abs(ma-wb)<=nb*Math.max(1,Math.abs(ma),Math.abs(wb))&&Math.abs(oa-sb)<=nb*Math.max(1,Math.abs(oa),Math.abs(sb))&&Math.abs(wa-ib)<=nb*Math.max(1,Math.abs(wa),Math.abs(ib))&&Math.abs(ua-b)<=nb*Math.max(1,Math.abs(ua),Math.abs(b))&&Math.abs(Ea-hb)<=nb*Math.max(1,
Math.abs(Ea),Math.abs(hb))&&Math.abs(Ba-Ib)<=nb*Math.max(1,Math.abs(Ba),Math.abs(Ib))&&Math.abs(Fa-Rb)<=nb*Math.max(1,Math.abs(Fa),Math.abs(Rb))&&Math.abs(c-k)<=nb*Math.max(1,Math.abs(c),Math.abs(k))}function na(c){const k=ia.getEpsilon(),da=c[0],ka=c[1],sa=c[2],v=c[4],K=c[5],Y=c[6],W=c[8],fa=c[9];c=c[10];return Math.abs(1-(da*da+v*v+W*W))<=k&&Math.abs(1-(ka*ka+K*K+fa*fa))<=k&&Math.abs(1-(sa*sa+Y*Y+c*c))<=k}function ra(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&
0===c[9]&&1===c[10]}const Aa=e.create();e=Object.freeze(Object.defineProperty({__proto__:null,add:Ja,adjoint:l,copy:aa,determinant:p,equals:gb,exactEquals:Ua,frob:Ia,fromQuat:H,fromQuat2:B,fromRotation:O,fromRotationTranslation:x,fromRotationTranslationScale:ba,fromRotationTranslationScaleOrigin:G,fromScaling:I,fromTranslation:Z,fromXRotation:J,fromYRotation:n,fromZRotation:A,frustum:t,getRotation:C,getScaling:w,getTranslation:z,hasIdentityRotation:ra,identity:N,invert:h,invertOrIdentity:E,isOrthoNormal:na,
lookAt:va,mul:Q,multiply:Q,multiplyScalar:Wa,multiplyScalarAndAdd:Ya,ortho:ha,perspective:q,perspectiveFromFieldOfView:U,rotate:D,rotateX:f,rotateY:u,rotateZ:L,scale:T,set:R,str:Ha,sub:Ma,subtract:Ma,targetTo:Da,translate:M,transpose:P},Symbol.toStringTag,{value:"Module"}));m.add=Ja;m.adjoint=l;m.copy=aa;m.determinant=p;m.equals=gb;m.exactEquals=Ua;m.frob=Ia;m.fromQuat=H;m.fromQuat2=B;m.fromRotation=O;m.fromRotationTranslation=x;m.fromRotationTranslationScale=ba;m.fromRotationTranslationScaleOrigin=
G;m.fromScaling=I;m.fromTranslation=Z;m.fromXRotation=J;m.fromYRotation=n;m.fromZRotation=A;m.frustum=t;m.getRotation=C;m.getScaling=w;m.getTranslation=z;m.hasIdentityRotation=ra;m.identity=N;m.invert=h;m.invertOrIdentity=E;m.isOrthoNormal=na;m.lookAt=va;m.mat4=e;m.mul=Q;m.multiply=Q;m.multiplyScalar=Wa;m.multiplyScalarAndAdd=Ya;m.ortho=ha;m.perspective=q;m.perspectiveFromFieldOfView=U;m.rotate=D;m.rotateX=f;m.rotateY=u;m.rotateZ=L;m.scale=T;m.set=R;m.str=Ha;m.sub=Ma;m.subtract=Ma;m.targetTo=Da;m.translate=
M;m.transpose=P})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(m,e,ia,aa,R){function N(){return!!e._pe}function P(){return!!R("esri-wasm")}function E(){return T?T:T=(new Promise((f,u)=>m(["./pe-wasm"],f,u))).then(f=>f.peWasm).then(({default:f})=>f({locateFile:u=>aa.getAssetUrl(`esri/geometry/support/${u}`)})).then(f=>{h(f)})}function h(f){function u(I,O,J){I[O]=J(I[O])}e._pe=f;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();
e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(I){function O(){return J.apply(this,arguments)}ia._inherits(O,I);var J=ia._createSuper(O);O.prototype.destroy=function(){e._pe.destroy(this)};return ia._createClass(O)}(e._pe.PeGCSExtent);f=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var L of f)u(L.prototype,"getName",I=>function(){return I.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const I of[e._pe.PeGeogtran,
e._pe.PeProjcs])u(I.prototype,"getParameters",O=>function(){const J=Array(e.PeDefs.PE_PARM_MAX);let n=O.call(this);for(let A=0;A<J.length;A++){const x=e._pe.getValue(n,"*");J[A]=x?e._pe.wrapPointer(x,e._pe.PeParameter):null;n+=Int32Array.BYTES_PER_ELEMENT}return J});u(e._pe.PeHorizon.prototype,"getCoord",I=>function(){const O=this.getSize();if(!O)return null;const J=[],n=I.call(this);M(J,O,n);return J});u(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",I=>{const O=e._pe._pe_getPeGTlistExtendedGTsSize();
return function(){let J=null;var n=I.call(this);if(!e._pe.compare(n,e._pe.NULL)){J=[n];const A=this.getSteps();if(1<A){n=e._pe.getPointer(n);for(let x=1;x<A;x++)J.push(e._pe.wrapPointer(n+O*x,e._pe.PeGTlistExtendedGTs))}}return J}});const Z=e._pe._pe_getPeHorizonSize();L=I=>function(){let O=this._cache;O||(this._cache=O=new Map);if(O.has(I))return O.get(I);let J=null;var n=I.call(this);if(!e._pe.compare(n,e._pe.NULL)){J=[n];const A=n.getNump();if(1<A){n=e._pe.getPointer(n);for(let x=1;x<A;x++)J.push(e._pe.wrapPointer(n+
Z*x,e._pe.PeHorizon))}}O.set(I,J);return J};u(e._pe.PeProjcs.prototype,"horizonGcsGenerate",L);u(e._pe.PeProjcs.prototype,"horizonPcsGenerate",L);e._pe.PeObject.prototype.toString=function(I=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const O=e._pe.getPointer(this),J=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(O,I,J))}}function l(f){if(f){var u=e._pe.getClass(f);u&&(u=e._pe.getCache(u))&&(f=e._pe.getPointer(f))&&delete u[f]}}
function p(f,u){const L=[];u=Array(u);for(let Z=0;Z<f;Z++)L.push(e._pe.ensureInt8(u));return L}function Q(f){let u;Array.isArray(f[0])?(u=[],f.forEach(L=>{u.push(L[0],L[1])})):u=f;return u}function M(f,u,L,Z=!1){if(Z)for(Z=0;Z<2*u;Z++)f[Z]=e._pe.getValue(L+Z*Float64Array.BYTES_PER_ELEMENT,"double");else{Z=0===f.length;for(let I=0;I<u;I++)Z&&(f[I]=Array(2)),f[I][0]=e._pe.getValue(L,"double"),f[I][1]=e._pe.getValue(L+Float64Array.BYTES_PER_ELEMENT,"double"),L+=2*Float64Array.BYTES_PER_ELEMENT}}let T;
e._pe=null;e.PeCSTransformations=void 0;(function(f){function u(I,O,J){e._pe.ensureCache.prepare();var n=Q(J);const A=J===n;n=e._pe.ensureFloat64(n);(I=e._pe._pe_geog_to_proj(e._pe.getPointer(I),O,n))&&M(J,O,n,A);return I}function L(I,O,J){return Z(I,O,J,0)}function Z(I,O,J,n){e._pe.ensureCache.prepare();var A=Q(J);const x=J===A;A=e._pe.ensureFloat64(A);(I=e._pe._pe_proj_to_geog_center(e._pe.getPointer(I),O,A,n))&&M(J,O,A,x);return I}f.geogToProj=u;f.projGeog=function(I,O,J,n){switch(n){case e.PeDefs.PE_TRANSFORM_P_TO_G:return L(I,
O,J);case e.PeDefs.PE_TRANSFORM_G_TO_P:return u(I,O,J)}return 0};f.projToGeog=L;f.projToGeogCenter=Z})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(f){f.init=function(){f.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;f.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=
e._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;f.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;f.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
f.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;f.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;f.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
f.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));e.PeFactory=void 0;(function(f){function u(O,J){let n=null,A=L[O];A||(A={},L[O]=A);A.hasOwnProperty(String(J))?n=A[J]:(O=e._pe.PeFactory.prototype.factoryByType(O,J),e._pe.compare(O,
e._pe.NULL)||(n=O,A[J]=n));return n=I(n)}const L={},Z={},I=O=>{if(O){const J=O.getType();switch(J){case e.PeDefs.PE_TYPE_GEOGCS:O=e._pe.castObject(O,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:O=e._pe.castObject(O,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:O=e._pe.castObject(O,e._pe.PeGeogtran);break;default:J&e.PeDefs.PE_TYPE_UNIT&&(O=e._pe.castObject(O,e._pe.PeUnit))}}return O};f.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(O){return u(e.PeDefs.PE_TYPE_COORDSYS,
O)};f.factoryByType=u;f.fromString=function(O,J){let n=null,A=Z[O];A||(A={},Z[O]=A);A.hasOwnProperty(J)?n=A[J]:(O=e._pe.PeFactory.prototype.fromString(O,J),e._pe.compare(O,e._pe.NULL)||(n=O,A[J]=n));return n=I(n)};f.geogcs=function(O){return u(e.PeDefs.PE_TYPE_GEOGCS,O)};f.geogtran=function(O){return u(e.PeDefs.PE_TYPE_GEOGTRAN,O)};f.getCode=function(O){return e._pe.PeFactory.prototype.getCode(O)};f.projcs=function(O){return u(e.PeDefs.PE_TYPE_PROJCS,O)};f.unit=function(O){return u(e.PeDefs.PE_TYPE_UNIT,
O)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(f){let u;f.init=function(){f.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;u=e._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(L,Z,I,O,J,n){let A=null;const x=new e._pe.PeInteger(n);try{const B=e._pe.PeGTlistExtended.prototype.getGTlist(L,Z,I,O,J,x);if(n=x.val)if(A=[B],1<n){const z=e._pe.getPointer(B);for(L=1;L<n;L++)A.push(e._pe.wrapPointer(z+u*L,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(x)}return A}})(e.PeGTlistExtended||
(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(f){f.destroy=function(u){if(u&&u.length){for(const L of u)l(L),L.getEntries().forEach(Z=>{l(Z);Z=Z.getGeogtran();l(Z);Z.getParameters().forEach(l);[Z.getGeogcs1(),Z.getGeogcs2()].forEach(I=>{l(I);const O=I.getDatum();l(O);l(O.getSpheroid());l(I.getPrimem());l(I.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(u[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(f){f.geogToGeog=
function(u,L,Z,I,O){e._pe.ensureCache.prepare();var J=Q(Z);const n=Z===J;J=e._pe.ensureFloat64(J);let A=0;I&&(A=e._pe.ensureFloat64(I));(u=e._pe._pe_geog_to_geog(e._pe.getPointer(u),L,J,A,O))&&M(Z,L,J,n);return u}})(e.PeGTTransformations||(e.PeGTTransformations={}));e.PeNotationDms=void 0;(function(f){const u=(Z,I,O,J,n,A)=>{e._pe.ensureCache.prepare();switch(Z){case "dd":var x=e._pe._pe_geog_to_dd;var B=e.PeDefs.PE_DD_MAX;break;case "ddm":x=e._pe._pe_geog_to_ddm;B=e.PeDefs.PE_DDM_MAX;break;case "dms":x=
e._pe._pe_geog_to_dms,B=e.PeDefs.PE_DMS_MAX}Z=0;I&&(Z=e._pe.getPointer(I));I=Q(J);I=e._pe.ensureFloat64(I);B=p(O,B);J=e._pe.ensureInt32(B);if(n=x(Z,O,I,n,J))for(x=0;x<O;x++)A[x]=e._pe.UTF8ToString(B[x]);return n},L=(Z,I,O,J,n)=>{e._pe.ensureCache.prepare();switch(Z){case "dd":var A=e._pe._pe_dd_to_geog;break;case "ddm":A=e._pe._pe_ddm_to_geog;break;case "dms":A=e._pe._pe_dms_to_geog}Z=0;I&&(Z=e._pe.getPointer(I));I=J.map(x=>e._pe.ensureString(x));J=e._pe.ensureInt32(I);I=e._pe.ensureFloat64(Array(2*
O));(A=A(Z,O,J,I))&&M(n,O,I);return A};f.geogToDms=function(Z,I,O,J,n){return u("dms",Z,I,O,J,n)};f.dmsToGeog=function(Z,I,O,J){return L("dms",Z,I,O,J)};f.geogToDdm=function(Z,I,O,J,n){return u("ddm",Z,I,O,J,n)};f.ddmToGeog=function(Z,I,O,J){return L("ddm",Z,I,O,J)};f.geogToDd=function(Z,I,O,J,n){return u("dd",Z,I,O,J,n)};f.ddToGeog=function(Z,I,O,J){return L("dd",Z,I,O,J)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
f.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;f.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;f.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geogToMgrsExtended=function(u,L,Z,I,O,J,n){e._pe.ensureCache.prepare();let A=0;u&&(A=e._pe.getPointer(u));u=Q(Z);Z=e._pe.ensureFloat64(u);u=p(L,e.PeDefs.PE_MGRS_MAX);const x=e._pe.ensureInt32(u);if(I=e._pe._pe_geog_to_mgrs_extended(A,
L,Z,I,O,J,x))for(O=0;O<L;O++)n[O]=e._pe.UTF8ToString(u[O]);return I};f.mgrsToGeogExtended=function(u,L,Z,I,O){e._pe.ensureCache.prepare();let J=0;u&&(J=e._pe.getPointer(u));u=Z.map(n=>e._pe.ensureString(n));Z=e._pe.ensureInt32(u);u=e._pe.ensureFloat64(Array(2*L));(I=e._pe._pe_mgrs_to_geog_extended(J,L,Z,I,u))&&M(O,L,u);return I}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(f){f.geogToUsng=function(u,L,Z,I,O,J,n){e._pe.ensureCache.prepare();let A=0;u&&(A=e._pe.getPointer(u));
u=Q(Z);Z=e._pe.ensureFloat64(u);u=p(L,e.PeDefs.PE_MGRS_MAX);const x=e._pe.ensureInt32(u);if(I=e._pe._pe_geog_to_usng(A,L,Z,I,O,J,x))for(O=0;O<L;O++)n[O]=e._pe.UTF8ToString(u[O]);return I};f.usngToGeog=function(u,L,Z,I){e._pe.ensureCache.prepare();var O=0;u&&(O=e._pe.getPointer(u));u=Z.map(J=>e._pe.ensureString(J));Z=e._pe.ensureInt32(u);u=e._pe.ensureFloat64(Array(2*L));(O=e._pe._pe_usng_to_geog(O,L,Z,u))&&M(I,L,u);return O}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(f){f.init=
function(){f.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;f.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};f.geogToUtm=function(u,L,Z,I,O){e._pe.ensureCache.prepare();var J=0;u&&(J=e._pe.getPointer(u));u=Q(Z);Z=e._pe.ensureFloat64(u);u=p(L,e.PeDefs.PE_UTM_MAX);const n=e._pe.ensureInt32(u);if(I=e._pe._pe_geog_to_utm(J,L,Z,I,n))for(J=0;J<L;J++)O[J]=e._pe.UTF8ToString(u[J]);return I};f.utmToGeog=
function(u,L,Z,I,O){e._pe.ensureCache.prepare();let J=0;u&&(J=e._pe.getPointer(u));u=Z.map(n=>e._pe.ensureString(n));Z=e._pe.ensureInt32(u);u=e._pe.ensureFloat64(Array(2*L));(I=e._pe._pe_utm_to_geog(J,L,Z,I,u))&&M(O,L,u);return I}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(f){const u=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=
e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(L,Z=f.PE_PCSINFO_OPTION_DOMAIN){let I=null,O=null;u.has(L)&&(O=u.get(L),O[Z]&&(I=O[Z]));I||(I=e._pe.PePCSInfo.prototype.generate(L,Z),O||(O=[],u.set(L,O)),O[Z]=I);return I}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(f){f.versionString=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));const D=Object.freeze(Object.defineProperty({__proto__:null,
get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTTransformations(){return e.PeGTTransformations},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},
get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:h,get _pe(){return e._pe},isLoaded:N,isSupported:P,load:E},Symbol.toStringTag,{value:"Module"}));e._init=h;e.isLoaded=N;e.isSupported=P;e.load=E;e.pe=D})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(m,e){const ia=Math.PI/180;var aa=e.earth.radius;const R=e.earth.eccentricitySquared;aa={a1:aa*R,a2:aa*R*aa*R,a3:aa*R*R/2,a4:aa*R*aa*R*2.5,a5:aa*R+aa*R*R/2,a6:1-R};e={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};m.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;m.earthEllipsoidConstants=aa;m.spheroids=e;m.toRadians=ia;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./GeographicTransformationStep"],function(m,e){return function(){function ia(R){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(R&&R.steps)for(const N of R.steps)N instanceof e?this.steps.push(N):this.steps.push(new e({wkid:N.wkid,wkt:N.wkt,isInverse:N.isInverse}))}ia.cacheKey=function(R,N){return[void 0!==R.wkid&&null!==R.wkid?R.wkid.toString():"-1",void 0!==R.wkt&&null!==R.wkt?R.wkt.toString():"",void 0!==N.wkid&&null!==N.wkid?N.wkid.toString():"-1",void 0!==N.wkt&&
null!==N.wkt?N.wkt.toString():""].join()};ia.fromGE=function(R){const N=new ia;let P="";for(const E of R.steps)R=e.fromGE(E),N.steps.push(R),P+=R.uid.toString()+",";N._cachedProjection={};N._gtlistentry=null;N._chain=P;return N};var aa=ia.prototype;aa.getInverse=function(){const R=new ia;R.steps=[];for(let N=this.steps.length-1;0<=N;N--)R.steps.push(this.steps[N].getInverse());return R};aa.getGTListEntry=function(){let R="";for(const N of this.steps)R+=N.uid.toString()+",";R!==this._chain&&(this._gtlistentry=
null,this._cachedProjection={},this._chain=R);return this._gtlistentry};aa.assignCachedGe=function(R,N,P){this._cachedProjection[ia.cacheKey(R,N)]=P};aa.getCachedGeTransformation=function(R,N){let P="";for(const E of this.steps)P+=E.uid.toString()+",";P!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=P);R=this._cachedProjection[ia.cacheKey(R,N)];return void 0===R?null:R};return m._createClass(ia)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(m){let e=0;return function(){function ia(aa){this.uid=e++;aa?(this._wkt=null!=aa.wkt?aa.wkt:null,this._wkid=null!=aa.wkid?aa.wkid:-1,this._isInverse=null!=aa.isInverse?!0===aa.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ia.fromGE=function(aa){const R=new ia;R._wkt=aa.wkt;R._wkid=aa.wkid;R._isInverse=aa.isInverse;return R};ia.prototype.getInverse=function(){const aa=new ia;aa._wkt=this.wkt;aa._wkid=this._wkid;aa._isInverse=!this.isInverse;return aa};m._createClass(ia,[{key:"wkt",
get:function(){return this._wkt},set:function(aa){this._wkt=aa;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(aa){this._wkid=aa;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(aa){this._isInverse=aa;this.uid=e++}}]);return ia}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(m,e,ia,aa){m.getGeometryZScaler=function(R,N,P){if(e.isNone(N)||e.isNone(P)||
P.vcsWkid||aa.equals(N,P))return null;N=ia.getMetersPerVerticalUnitForSR(N);P=ia.getMetersPerVerticalUnitForSR(P);const E=N/P;if(1===E)return null;switch(R){case "point":case "esriGeometryPoint":return h=>{h&&null!=h.z&&(h.z*=E)};case "polyline":case "esriGeometryPolyline":return h=>{if(h)for(const l of h.paths)for(const p of l)2<p.length&&(p[2]*=E)};case "polygon":case "esriGeometryPolygon":return h=>{if(h)for(const l of h.rings)for(const p of l)2<p.length&&(p[2]*=E)};case "multipoint":case "esriGeometryMultipoint":return h=>
{if(h)for(const l of h.points)2<l.length&&(l[2]*=E)};case "extent":case "esriGeometryExtent":return h=>{h&&null!=h.zmin&&null!=h.zmax&&(h.zmin*=E,h.zmax*=E)};default:return null}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(m,e,ia,aa,R,N,P,E,h,l,p,Q){function M(I){const O=[];let J=0,n=0;for(let A=0;A<I.length;A++){const x=I[A];let B=null;for(let z=0;z<x.length;z++)B=x[z],O.push(B),0===z?n=J=B[0]:(J=Math.min(J,B[0]),n=Math.max(n,B[0]));B&&O.push([(J+n)/2,0])}return O}function T(I,O){if(!(I instanceof P||I instanceof N))throw Z.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ia("straightLineDensify: the input geometry is neither polyline nor polygon");var J=E.getGeometryParts(I);
const n=[];for(const x of J){J=[];n.push(J);J.push([x[0][0],x[0][1]]);for(let B=0;B<x.length-1;B++){const z=x[B][0],w=x[B][1],C=x[B+1][0],ba=x[B+1][1];var A=Math.sqrt((C-z)*(C-z)+(ba-w)*(ba-w));const G=(ba-w)/A,H=(C-z)/A,t=A/O;if(1<t){for(let q=1;q<=t-1;q++){const U=q*O;J.push([H*U+z,G*U+w])}A=(A+Math.floor(t-1)*O)/2;J.push([H*A+z,G*A+w])}J.push([C,ba])}}return"polygon"===I.type?new N({rings:n,spatialReference:I.spatialReference}):new P({paths:n,spatialReference:I.spatialReference})}function D(I,
O,J){O&&(I=T(I,1E6),I=l.webMercatorToGeographic(I,!0));J&&(I=E.updatePolyGeometry(I,J));return I}function f(I,O,J){if(Array.isArray(I)){var n=I[0];n>O?(J=E.offsetMagnitude(n,O),I[0]=n+-2*J*O):n<J&&(O=E.offsetMagnitude(n,J),I[0]=n+-2*O*J)}else n=I.x,n>O?(J=E.offsetMagnitude(n,O),I=I.clone().offset(-2*J*O,0)):n<J&&(O=E.offsetMagnitude(n,J),I=I.clone().offset(-2*O*J,0));return I}function u(I,O){let J=-1;for(let n=0;n<O.cutIndexes.length;n++){const A=O.cutIndexes[n],x=O.geometries[n],B=E.getGeometryParts(x);
for(let z=0;z<B.length;z++){const w=B[z];w.some(C=>{if(180>C[0])return!0;C=0;for(var ba=0;ba<w.length;ba++){var G=w[ba][0];C=G>C?G:C}C=Number(C.toFixed(9));C=-360*E.offsetMagnitude(C,180);for(ba=0;ba<w.length;ba++)G=x.getPoint(z,ba),x.setPoint(z,ba,G.clone().offset(C,0));return!0})}if(A===J)if("polygon"===I[0].type)for(const z of E.getGeometryParts(x))I[A]=I[A].addRing(z);else{if("polyline"===I[0].type)for(const z of E.getGeometryParts(x))I[A]=I[A].addPath(z)}else J=A,I[A]=x}return I}async function L(I,
O,J){if(!Array.isArray(I))return L([I],O);O&&"string"!==typeof O&&Z.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var n="string"===typeof O?O:O?.url??e.geometryServiceUrl;let A,x,B;let z=0;var w=[];O=[];for(var C of I)if(R.isNone(C))O.push(C);else{if(!ba){var ba=C.spatialReference;var G=h.getInfo(ba);var H=(A=ba.isWebMercator)?102100:4326;x=E.cutParams[H].maxX;B=E.cutParams[H].minX;var t=E.cutParams[H].plus180Line;H=E.cutParams[H].minus180Line}if(G)if("mesh"===
C.type)O.push(C);else if("point"===C.type)O.push(f(C.clone(),x,B));else if("multipoint"===C.type){var q=C.clone();q.points=q.points.map(U=>f(U,x,B));O.push(q)}else if("extent"===C.type)q=C.clone()._normalize(!1,!1,G),O.push(q.rings?new N(q):q);else if(C.extent){q=C.extent;const U=2*E.offsetMagnitude(q.xmin,B)*x;let ha=0===U?C.clone():E.updatePolyGeometry(C.clone(),U);q.offset(U,0);q.intersects(t)&&q.xmax!==x?(z=q.xmax>z?q.xmax:z,ha=D(ha,A),w.push(ha),O.push("cut")):q.intersects(H)&&q.xmin!==B?(z=
2*q.xmax*x>z?2*q.xmax*x:z,ha=D(ha,A,360),w.push(ha),O.push("cut")):O.push(ha)}else O.push(C.clone());else O.push(C)}ba=E.offsetMagnitude(z,x);G=-90;t=ba;for(C=new P;0<ba;)H=-180+360*ba,C.addPath([[H,G],[H,-1*G]]),G*=-1,ba--;if(0<w.length&&0<t){ba=await p.cut(n,w,C,J);ba=u(w,ba);G=[];w=[];for(t=0;t<O.length;t++)C=O[t],"cut"!==C?w.push(C):(C=ba.shift(),H=I[t],R.isSome(H)&&"polygon"===H.type&&H.rings&&1<H.rings.length&&C.rings.length>=H.rings.length?(G.push(C),w.push("simplify")):w.push(A?l.geographicToWebMercator(C):
C));if(!G.length)return w;O=await Q.simplify(n,G,J);I=[];for(J=0;J<w.length;J++)n=w[J],"simplify"!==n?I.push(n):I.push(A?l.geographicToWebMercator(O.shift()):O.shift());return I}I=[];for(J=0;J<O.length;J++)n=O[J],"cut"!==n?I.push(n):(n=w.shift(),I.push(!0===A?l.geographicToWebMercator(n):n));return I}const Z=aa.getLogger("esri.geometry.support.normalizeUtils");m.getDenormalizedExtent=function(I){if(!I)return null;const O=I.extent;if(!O)return null;var J=I.spatialReference&&h.getInfo(I.spatialReference);
if(!J)return O;const [n,A]=J.valid;({width:J}=O);let {xmin:x,xmax:B}=O;[x,B]=[B,x];if("extent"===I.type||0===J||J<=A||J>2*A||x<n||B>A)return O;let z;switch(I.type){case "polygon":if(1<I.rings.length)z=M(I.rings);else return O;break;case "polyline":if(1<I.paths.length)z=M(I.paths);else return O;break;case "multipoint":z=I.points}I=O.clone();for(let w=0;w<z.length;w++){let C=z[w][0];0>C?(C+=A,B=Math.max(C,B)):(C-=A,x=Math.min(C,x))}I.xmin=x;I.xmax=B;return I.width<J?(I.xmin-=A,I.xmax-=A,I):O};m.normalizeCentralMeridian=
L;m.normalizeMapX=function(I,O){if(O=h.getInfo(O)){const [J,n]=O.valid;O=n-J;if(I<J)for(;I<J;)I+=O;if(I>n)for(;I>n;)I-=O}return I};m.straightLineDensify=T;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(m,e,ia,aa){function R(N){return aa.isPolygon(N)?N.rings:N.paths}e={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ia.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:ia.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:ia.WGS84})}};m.cutParams=e;m.getGeometryParts=R;m.offsetMagnitude=function(N,
P){return Math.ceil((N-P)/(2*P))};m.updatePolyGeometry=function(N,P){const E=R(N);for(const h of E)for(const l of h)l[0]+=P;return N};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(m,e,ia,aa,R){m.cut=async function(N,P,E,h){N=R.parseUrl(N);const l=P[0].spatialReference;P={...h,query:{...N.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:aa.getJsonType(P[0]),
geometries:P}),cutter:JSON.stringify(E)}};P=await ia(N.path+"/cut",P);const {cutIndexes:p,geometries:Q=[]}=P.data;return{cutIndexes:p,geometries:Q.map(M=>{M=aa.fromJSON(M);M.spatialReference=l;return M})}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(m,e,ia,aa,R,N){function P(E,h,l){const p={};for(const M in E)if("declaredClass"!==M){var Q=E[M];
if(null!=Q&&"function"!==typeof Q)if(Array.isArray(Q)){p[M]=[];for(let T=0;T<Q.length;T++)p[M][T]=P(Q[T])}else"object"===typeof Q?Q.toJSON?(Q=Q.toJSON(l&&l[M]),p[M]=h?Q:JSON.stringify(Q)):p[M]=h?Q:JSON.stringify(Q):p[M]=Q}return p}m.asValidOptions=function(E,h){return h?{...h,query:{...(E??{}),...h.query}}:{query:E}};m.encode=P;m.getToken=function(E,h){return E?N.supportsApiKey(E)&&(h||e.apiKey)?h||e.apiKey:ia.id?.findCredential(E)?.token:null};m.parseUrl=function(E){return"string"===typeof E?R.urlToObject(E):
aa.clone(E)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(m,e,ia,aa,R){m.simplify=async function(N,P,E){const h="string"===typeof N?ia.urlToObject(N):N;N=P[0].spatialReference;const l=aa.getJsonType(P[0]);P={...E,query:{...h.query,f:"json",sr:N.wkid??JSON.stringify(N),geometries:JSON.stringify(R.encodeGeometries(P))}};({data:P}=
await e(h.path+"/simplify",P));return R.decodeGeometries(P.geometries,l,N)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(m,e){m.decodeGeometries=function(ia,aa,R){const N=e.getGeometryType(aa);return ia.map(P=>{P=N.fromJSON(P);P.spatialReference=R;return P})};m.encodeGeometries=function(ia){return{geometryType:e.getJsonType(ia[0]),geometries:ia.map(aa=>aa.toJSON())}};Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(m,e,ia,aa,R,N,P){function E(D,f){if(!f)return null;if("x"in f){var u={x:0,y:0};[u.x,u.y]=D(f.x,f.y,p);null!=f.z&&(u.z=f.z);null!=f.m&&(u.m=f.m);return u}return"xmin"in
f?(u={xmin:0,ymin:0,xmax:0,ymax:0},[u.xmin,u.ymin]=D(f.xmin,f.ymin,p),[u.xmax,u.ymax]=D(f.xmax,f.ymax,p),f.hasZ&&(u.zmin=f.zmin,u.zmax=f.zmax,u.hasZ=!0),f.hasM&&(u.mmin=f.mmin,u.mmax=f.mmax,u.hasM=!0),u):"rings"in f?{rings:h(f.rings,D),hasM:f.hasM,hasZ:f.hasZ}:"paths"in f?{paths:h(f.paths,D),hasM:f.hasM,hasZ:f.hasZ}:"points"in f?{points:l(f.points,D),hasM:f.hasM,hasZ:f.hasZ}:null}function h(D,f){const u=[];for(const L of D)u.push(l(L,f));return u}function l(D,f){const u=[];for(const L of D)D=f(L[0],
L[1],[0,0]),u.push(D),2<L.length&&D.push(L[2]),3<L.length&&D.push(L[3]);return u}const p=[0,0],Q=E.bind(null,P.lngLatToXY),M=E.bind(null,P.xyToLngLat),T=new (function(){function D(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var f=D.prototype;f.push=async function(u,L,Z){if(!(u&&u.length&&L&&Z)||N.equals(L,Z))return u;const I={geometries:u,inSpatialReference:L,outSpatialReference:Z,resolve:null};this._jobs.push(I);return new Promise(O=>{I.resolve=O;null===this._timer&&(this._timer=
setTimeout(this._process,10))})};f._process=function(){this._timer=null;const u=this._jobs.shift();if(u){var {geometries:L,inSpatialReference:Z,outSpatialReference:I,resolve:O}=u;P.canProject(Z,I)?N.isWebMercator(I)?O(L.map(Q)):O(L.map(M)):O(aa.projectMany(R.jsonAdapter,L,Z,I,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return e._createClass(D)}());m.checkProjectionSupport=async function(D,f){D&&f&&(D=Array.isArray(D)?D.map(u=>ia.isSome(u.geometry)?u.geometry.spatialReference:
null).filter(ia.isSome):[D],await aa.initializeProjection(D.map(u=>({source:u,dest:f}))))};m.project=function(D,f,u,L){if(!D)return D;u||(u=f,f=D.spatialReference);return N.isValid(f)&&N.isValid(u)&&!N.equals(f,u)?P.canProject(f,u)?(D=N.isWebMercator(u)?Q(D):M(D),D.spatialReference=u,D):aa.projectMany(R.jsonAdapter,[D],f,u,null,L)[0]:D};m.projectMany=function(D,f,u){return T.push(D,f,u)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers"],function(m,e){let ia=e._createClass(function(E,h,l){this.x=E;this.y=h;this.spatialReference=l;this.m=this.z=void 0}),aa=e._createClass(function(E,h,l,p){this.rings=E;this.spatialReference=h;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);p&&(this.hasM=p)}),R=e._createClass(function(E,h,l,p){this.paths=E;this.spatialReference=h;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);p&&(this.hasM=p)}),N=e._createClass(function(E,h,l,p){this.points=E;this.spatialReference=
h;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);p&&(this.hasM=p)}),P=e._createClass(function(E,h,l,p,Q){this.xmin=E;this.ymin=h;this.xmax=l;this.ymax=p;this.spatialReference=Q;this.mmax=this.mmin=this.zmax=this.zmin=void 0});m.jsonAdapter={convertToGEGeometry:function(E,h){return null==h?null:E.convertJSONToGeometry(h)},exportPoint:function(E,h,l){l=new ia(E.getPointX(h),E.getPointY(h),l);const p=E.hasZ(h),Q=E.hasM(h);p&&(l.z=E.getPointZ(h));Q&&(l.m=E.getPointM(h));return l},exportPolygon:function(E,
h,l){return new aa(E.exportPaths(h),l,E.hasZ(h),E.hasM(h))},exportPolyline:function(E,h,l){return new R(E.exportPaths(h),l,E.hasZ(h),E.hasM(h))},exportMultipoint:function(E,h,l){return new N(E.exportPoints(h),l,E.hasZ(h),E.hasM(h))},exportExtent:function(E,h,l){var p=E.hasZ(h);const Q=E.hasM(h);l=new P(E.getXMin(h),E.getYMin(h),E.getXMax(h),E.getYMax(h),l);p&&(p=E.getZExtent(h),l.zmin=p.vmin,l.zmax=p.vmax);Q&&(E=E.getMExtent(h),l.mmin=E.vmin,l.mmax=E.vmax);return l}};Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(m,e,ia,aa,R,N,P,E,h,l,p,Q,M,T,D,f,u,L,Z,I,O,J,n,A,x,B){function z(H){return null!=H&&H.every(t=>"exceedslimit"!==t.statisticType)}let w=e._createClass(function(H,t=null,q,U,ha){this.attributes=H;this.geometry=q;this.centroid=U;this.filterFlags=ha;this.groupId=-1;this.displayId=t});const C=new P.MemCacheStorage(2E6);let ba=0,G=function(){function H(q){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:Z.queryCapabilities};this.geometryType=q.geometryType;this.hasM=!!q.hasM;
this.hasZ=!!q.hasZ;this.objectIdField=q.objectIdField;this.spatialReference=q.spatialReference;this.definitionExpression=q.definitionExpression;this.featureStore=q.featureStore;this.aggregateAdapter=q.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=q.timeInfo;q.cacheSpatialQueries&&(this._geometryQueryCache=new P.MemCache(ba++ +"$$",C));this.fieldsIndex=new A(q.fields);q.scheduler&&q.priority&&(this._frameTask=q.scheduler.registerTask(q.priority))}
var t=H.prototype;t.destroy=function(){this._frameTask=N.removeMaybe(this._frameTask);this.clearCache();N.destroyMaybe(this._geometryQueryCache);this._changeHandle=N.removeMaybe(this._changeHandle);N.destroyMaybe(this.fieldsIndex)};t.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};t.executeQuery=async function(q,U){try{return(await this._executeQuery(q,{},U)).createQueryResponse()}catch(ha){if(ha!==n.QUERY_ENGINE_EMPTY_RESULT)throw ha;
return(new I.QueryEngineResult([],q,this)).createQueryResponse()}};t.executeQueryForCount=async function(q={},U){try{return(await this._executeQuery(q,{returnGeometry:!1,returnCentroid:!1,outSR:null},U)).createQueryResponseForCount()}catch(ha){if(ha!==n.QUERY_ENGINE_EMPTY_RESULT)throw ha;return 0}};t.executeQueryForExtent=async function(q,U){const ha=q.outSR;try{const va=await this._executeQuery(q,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),Da=va.size;if(!Da)return{count:0,extent:null};const Ha=
await this._getBounds(va.items,va.spatialReference,ha||this.spatialReference);return{count:Da,extent:Ha}}catch(va){if(va===n.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw va;}};t.executeQueryForIds=async function(q,U){return this.executeQueryForIdSet(q,U).then(ha=>Array.from(ha))};t.executeQueryForIdSet=async function(q,U){try{const ha=await this._executeQuery(q,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),va=ha.items,Da=new Set;await this._reschedule(()=>{for(const Ha of va)Da.add(ha.featureAdapter.getObjectId(Ha))},
U);return Da}catch(ha){if(ha===n.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ha;}};t.executeQueryForSnapping=async function(q,U){const {point:ha,distance:va,types:Da}=q;if(Da===I.SnappingTypes.NONE)return{candidates:[]};const Ha=await this._reschedule(()=>this._checkQuerySupport(q.query),U),Ia=!D.equals(ha.spatialReference,this.spatialReference);Ia&&await L.checkProjectionSupport(ha.spatialReference,this.spatialReference);var Ja="number"===typeof va?va:va.x,Ma="number"===typeof va?va:va.y;Ja={xmin:ha.x-
Ja,xmax:ha.x+Ja,ymin:ha.y-Ma,ymax:ha.y+Ma,spatialReference:ha.spatialReference};Ja=Ia?L.project(Ja,this.spatialReference):Ja;if(!Ja)return{candidates:[]};Ma=(await T.normalizeCentralMeridian(M.fromJSON(ha),null,{signal:U}))[0];const Wa=(await T.normalizeCentralMeridian(M.fromJSON(Ja),null,{signal:U}))[0];if(N.isNone(Ma)||N.isNone(Wa))return{candidates:[]};const Ya=new I.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Wa.toJSON())),U),Ha,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Ya),U);await this._reschedule(()=>this._executeTimeQuery(Ya),U);await this._reschedule(()=>this._executeAttributesQuery(Ya),U);U=Ma.toJSON();U=Ia?L.project(U,this.spatialReference):U;return Ya.createSnappingResponse({...q,point:U,distance:Ia?Math.max(Ja.xmax-Ja.xmin,Ja.ymax-Ja.ymin)/2:va},ha.spatialReference)};t.executeQueryForLatestObservations=async function(q,U){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new aa("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:q,timeInfo:this.timeInfo});try{const ha=await this._executeQuery(q,{},U);await this._reschedule(()=>this._filterLatest(ha),U);return ha.createQueryResponse()}catch(ha){if(ha!==n.QUERY_ENGINE_EMPTY_RESULT)throw ha;return(new I.QueryEngineResult([],q,this)).createQueryResponse()}};t.executeQueryForSummaryStatistics=async function(q={},U,ha){const {field:va,normalizationField:Da,valueExpression:Ha}=U;return(await this._getQueryEngineResultForStats(q,{field:va,normalizationField:Da,valueExpression:Ha},
ha)).createSummaryStatisticsResponse(U)};t.executeQueryForUniqueValues=async function(q={},U,ha){const {field:va,field2:Da,field3:Ha,valueExpression:Ia}=U;return(await this._getQueryEngineResultForStats(q,{field:va,field2:Da,field3:Ha,valueExpression:Ia},ha)).createUniqueValuesResponse(U)};t.executeQueryForClassBreaks=async function(q={},U,ha){const {field:va,normalizationField:Da,valueExpression:Ha}=U;return(await this._getQueryEngineResultForStats(q,{field:va,normalizationField:Da,valueExpression:Ha},
ha)).createClassBreaksResponse(U)};t.executeQueryForHistogram=async function(q={},U,ha){const {field:va,normalizationField:Da,valueExpression:Ha}=U;return(await this._getQueryEngineResultForStats(q,{field:va,normalizationField:Da,valueExpression:Ha},ha)).createHistogramResponse(U)};t.fetchRecomputedExtents=async function(q){const [U,ha]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),N.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=J.getTimeExtent(this.timeInfo,this.featureStore)]);E.throwIfAborted(q);return{fullExtent:U,timeExtent:ha}};t._getBounds=async function(q,U,ha){const va=l.set(l.create(),l.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(q,Da=>l.expandWithAABB(va,Da));q={xmin:va[0],ymin:va[1],xmax:va[3],ymax:va[4],spatialReference:n.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(va[2])&&isFinite(va[5])&&(q.zmin=va[2],q.zmax=va[5]);U=L.project(q,U,ha);U.spatialReference=n.cleanFromGeometryEngine(ha);0===U.xmax-U.xmin&&(ha=h.getMetersPerUnitForSR(U.spatialReference),U.xmin-=ha,U.xmax+=ha);0===U.ymax-U.ymin&&(ha=h.getMetersPerUnitForSR(U.spatialReference),U.ymin-=ha,U.ymax+=ha);this.hasZ&&null!=U.zmin&&null!=U.zmax&&0===U.zmax-U.zmin&&(ha=h.getMetersPerUnitForSR(U.spatialReference),U.zmin-=ha,U.zmax+=ha);return U};t._schedule=async function(q,U){return N.isSome(this._frameTask)?
this._frameTask.schedule(q,U):q(B.noBudget)};t._reschedule=async function(q,U){return N.isSome(this._frameTask)?this._frameTask.reschedule(q,U):q(B.noBudget)};t._getAllFeaturesQueryEngineResult=async function(q){return new I.QueryEngineResult(await this._getAllFeatures(),q,this)};t._getAllFeatures=async function(){if(N.isNone(this._allFeaturesPromise)){const ha=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(va=>ha.push(va))})().then(()=>ha)}const q=this._allFeaturesPromise,
U=await q;return q===this._allFeaturesPromise?U.slice():this._getAllFeatures()};t._executeQuery=async function(q,U,ha){q=R.clone(q);q=await this._schedule(()=>n.normalizeQuery(q,this.definitionExpression,this.spatialReference),ha);q=await this._reschedule(()=>this._checkQuerySupport(q),ha);q={...q,...U};const va=await this._reschedule(()=>this._executeSceneFilterQuery(q,ha),ha),Da=await this._reschedule(()=>this._executeGeometryQuery(q,va,ha),ha);await this._reschedule(()=>this._executeAggregateIdsQuery(Da),
ha);await this._reschedule(()=>this._executeObjectIdsQuery(Da),ha);await this._reschedule(()=>this._executeTimeQuery(Da),ha);await this._reschedule(()=>this._executeAttributesQuery(Da),ha);return Da};t._executeSceneFilterQuery=async function(q,U){if(N.isNone(q.sceneFilter))return null;const {outSR:ha,returnGeometry:va,returnCentroid:Da}=q;var Ha=this.featureStore.featureSpatialReference,Ia=q.sceneFilter.geometry;const Ja=N.isNone(Ha)||D.equals(Ha,Ia.spatialReference)?Ia:L.project(Ia,Ha);if(!Ja)return null;
Ha=va||Da;Ha=D.isValid(ha)&&!D.equals(this.spatialReference,ha)&&Ha?async Ua=>this._project(Ua,ha):Ua=>Ua;const Ma=this.featureAdapter;Ia=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ja)),U);if("disjoint"===q.sceneFilter.spatialRelationship){if(!Ia.length)return null;const Ua=new Set;for(var Wa of Ia)Ua.add(Ma.getObjectId(Wa));const gb=await this._reschedule(()=>this._getAllFeatures(),U);Wa=await this._reschedule(async()=>{const na=await O.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ja,this.geometryType,this.hasZ,this.hasM),ra=await this._runSpatialFilter(gb,Aa=>!Ua.has(Ma.getObjectId(Aa))||na(Ma.getGeometry(Aa)),U);return new I.QueryEngineResult(ra,q,this)},U);return Ha(Wa)}if(!Ia.length)return new I.QueryEngineResult([],q,this);if(this._canExecuteSinglePass(Ja,q))return Ha(new I.QueryEngineResult(Ia,q,this));const Ya=await O.getSpatialQueryOperator("esriSpatialRelContains",Ja,this.geometryType,this.hasZ,this.hasM);Wa=await this._runSpatialFilter(Ia,Ua=>Ya(Ma.getGeometry(Ua)),
U);return Ha(new I.QueryEngineResult(Wa,q,this))};t._executeGeometryQuery=async function(q,U,ha){if(N.isSome(U)&&0===U.items.length)return U;q=N.isSome(U)?U.query:q;const {geometry:va,outSR:Da,spatialRel:Ha,returnGeometry:Ia,returnCentroid:Ja}=q;var Ma=this.featureStore.featureSpatialReference;const Wa=!va||N.isNone(Ma)||D.equals(Ma,va.spatialReference)?va:L.project(va,Ma),Ya=Ia||Ja,Ua=D.isValid(Da)&&!D.equals(this.spatialReference,Da),gb=this._geometryQueryCache&&N.isNone(U)?Ua&&Ya?JSON.stringify({originalFilterGeometry:va,
spatialRelationship:Ha,outSpatialReference:Da}):JSON.stringify({originalFilterGeometry:va,spatialRelationship:Ha}):null;Ma=gb?this._geometryQueryCache.get(gb):null;if(N.isSome(Ma))return new I.QueryEngineResult(Ma,q,this);Ma=async k=>{Ua&&Ya&&await this._project(k,Da);gb&&this._geometryQueryCache.put(gb,k.items,k.items.length+1);return k};if(!Wa)return Ma(N.isSome(U)?U:await this._getAllFeaturesQueryEngineResult(q));const na=this.featureAdapter;let ra=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(va)),
ha);if("esriSpatialRelDisjoint"===Ha){if(!ra.length)return Ma(N.isSome(U)?U:await this._getAllFeaturesQueryEngineResult(q));const k=new Set;for(var Aa of ra)k.add(na.getObjectId(Aa));const da=N.isSome(U)?U.items:await this._reschedule(()=>this._getAllFeatures(),ha);Aa=await this._reschedule(async()=>{const ka=await O.getSpatialQueryOperator(Ha,Wa,this.geometryType,this.hasZ,this.hasM),sa=await this._runSpatialFilter(da,v=>!k.has(na.getObjectId(v))||ka(na.getGeometry(v)),ha);return new I.QueryEngineResult(sa,
q,this)},ha);return Ma(Aa)}if(N.isSome(U)){const k=new ia.PositionHint;ra=ra.filter(da=>0<=ia.indexOf(U.items,da,U.items.length,k))}if(!ra.length)return Ma=new I.QueryEngineResult([],q,this),gb&&this._geometryQueryCache.put(gb,Ma.items,1),Ma;if(this._canExecuteSinglePass(Wa,q))return Ma(new I.QueryEngineResult(ra,q,this));const c=await O.getSpatialQueryOperator(Ha,Wa,this.geometryType,this.hasZ,this.hasM);Aa=await this._runSpatialFilter(ra,k=>c(na.getGeometry(k)),ha);return Ma(new I.QueryEngineResult(Aa,
q,this))};t._executeAggregateIdsQuery=function(q){if(0!==q.items.length&&q.query.aggregateIds&&q.query.aggregateIds.length&&!N.isNone(this.aggregateAdapter)){var U=new Set;for(const va of q.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(va).forEach(Da=>U.add(Da));var ha=this.featureAdapter.getObjectId;q.items=q.items.filter(va=>U.has(ha(va)))}};t._executeObjectIdsQuery=function(q){if(0!==q.items.length&&q.query.objectIds&&q.query.objectIds.length){var U=new Set(q.query.objectIds),ha=
this.featureAdapter.getObjectId;q.items=q.items.filter(va=>U.has(ha(va)))}};t._executeTimeQuery=function(q){if(0!==q.items.length){var U=J.getTimeOperator(this.timeInfo,q.query.timeExtent,this.featureAdapter);N.isNone(U)||(q.items=q.items.filter(U))}};t._executeAttributesQuery=function(q){if(0!==q.items.length){var U=u.getWhereClause(q.query.where,this.fieldsIndex);if(U){if(!U.isStandardized)throw new TypeError("Where clause is not standardized");q.items=q.items.filter(ha=>U.testFeature(ha,this.featureAdapter))}}};
t._runSpatialFilter=async function(q,U,ha){if(!U)return q;if(N.isNone(this._frameTask))return q.filter(Ia=>U(Ia));let va=0;const Da=[],Ha=async Ia=>{for(;va<q.length;){const Ja=q[va++];U(Ja)&&(Da.push(Ja),Ia.madeProgress());Ia.done&&await this._reschedule(Ma=>Ha(Ma),ha)}};return this._reschedule(Ia=>Ha(Ia),ha).then(()=>Da)};t._filterLatest=function(q){const {trackIdField:U,startTimeField:ha,endTimeField:va}=this.timeInfo,Da=va||ha,Ha=new Map,Ia=this.featureAdapter.getAttribute;for(const Ja of q.items){const Ma=
Ia(Ja,U),Wa=Ia(Ja,Da),Ya=Ha.get(Ma);(!Ya||Wa>Ia(Ya,Da))&&Ha.set(Ma,Ja)}q.items=Array.from(Ha.values())};t._canExecuteSinglePass=function(q,U){({spatialRel:U}=U);return O.canQueryWithRBush(q)&&("esriSpatialRelEnvelopeIntersects"===U||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===U||"esriSpatialRelContains"===U||"esriSpatialRelWithin"===U))};t._project=async function(q,U){if(!U||D.equals(this.spatialReference,U))return q;const ha=this.featureAdapter;U=await L.projectMany(q.items.map(va=>
n.getGeometry(this.geometryType,this.hasZ,this.hasM,ha.getGeometry(va))),this.spatialReference,U);q.items=U.map((va,Da)=>ha.cloneWithGeometry(q.items[Da],f.convertFromGeometry(va,this.hasZ,this.hasM)));return q};t._getQueryBBoxes=function(q){if(O.canQueryWithRBush(q)){if(M.isExtent(q))return[p.fromValues(q.xmin,q.ymin,q.xmax,q.ymax)];if(M.isPolygon(q))return q.rings.map(U=>p.fromValues(Math.min(U[0][0],U[2][0]),Math.min(U[0][1],U[2][1]),Math.max(U[0][0],U[2][0]),Math.max(U[0][1],U[2][1])))}return[Q.getBoundsXY(p.create(),
q)]};t._searchFeatures=async function(q){const U=new Set;await Promise.all(q.map(ha=>this.featureStore.forEachInBounds(ha,va=>U.add(va))));q=Array.from(U.values());U.clear();return q};t._checkStatisticsSupport=async function(q,U){if(0>(q.distance??0)||null!=q.geometryPrecision||q.multipatchOption||q.pixelSize||q.relationParam||q.text||q.outStatistics||q.groupByFieldsForStatistics||q.having||q.orderByFields)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:q});this._checkAttributesQuerySupport(q);
return Promise.all([this._checkStatisticsParamsSupport(U),O.checkSpatialQuerySupport(q,this.geometryType,this.spatialReference),L.checkProjectionSupport(this.spatialReference,q.outSR)]).then(()=>q)};t._checkStatisticsParamsSupport=async function(q){var U=[];q.valueExpression&&({arcadeUtils:U}=await x.loadArcade(),U=U.extractFieldNames(q.valueExpression));q.field&&U.push(q.field);q.field2&&U.push(q.field2);q.field3&&U.push(q.field3);q.normalizationField&&U.push(q.normalizationField);if(!U.length)throw new aa("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:q});u.validateFields(this.fieldsIndex,U,"params contains missing fields")};t._checkQuerySupport=async function(q){if(0>(q.distance??0)||null!=q.geometryPrecision||q.multipatchOption||q.pixelSize||q.relationParam||q.text)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:q});this._checkAttributesQuerySupport(q);this._checkStatisticsQuerySupport(q);return Promise.all([O.checkSpatialQuerySupport(q,this.geometryType,
this.spatialReference),L.checkProjectionSupport(this.spatialReference,q.outSR)]).then(()=>q)};t._checkAttributesQuerySupport=function(q){const {outFields:U,orderByFields:ha,returnDistinctValues:va,outStatistics:Da}=q,Ha=Da?Da.map(Ia=>Ia.outStatisticFieldName&&Ia.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ha&&0<ha.length){const Ia=ha.map(Ja=>{const Ma=Ja.toLowerCase();return Ma.includes(" asc")?Ma.split(" asc")[0]:Ma.includes(" desc")?Ma.split(" desc")[0]:Ja}).filter(Ja=>!Ha.includes(Ja));
u.validateFields(this.fieldsIndex,Ia,"orderByFields contains missing fields")}if(U&&0<U.length)u.validateFields(this.fieldsIndex,U,"outFields contains missing fields");else if(va)throw new aa("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:q});u.validateWhere(this.fieldsIndex,q.where)};t._checkStatisticsQuerySupport=function(q){const {outStatistics:U,groupByFieldsForStatistics:ha,having:va}=q;var Da=ha&&ha.length,Ha=U&&U.length;if(va){if(!Da||!Ha)throw new aa("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:q});u.validateHaving(this.fieldsIndex,va,U)}if(Ha&&z(U)){Ha=U.map(Ia=>Ia.onStatisticField).filter(Boolean);u.validateFields(this.fieldsIndex,Ha,"onStatisticFields contains missing fields");Da&&u.validateFields(this.fieldsIndex,ha,"groupByFieldsForStatistics contains missing fields");for(const Ia of U){const {onStatisticField:Ja,statisticType:Ma}=Ia;if(("percentile_disc"===Ma||"percentile_cont"===Ma)&&"statisticParameters"in
Ia){if({statisticParameters:Da}=Ia,!Da)throw new aa("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ia,query:q});}else if("count"!==Ma&&Ja&&u.hasInvalidFieldType(Ja,this.fieldsIndex))throw new aa("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ia,query:q});}}};t._getQueryEngineResultForStats=async function(q,U,ha){q=R.clone(q);try{q=await this._schedule(()=>n.normalizeQuery(q,this.definitionExpression,this.spatialReference),
ha);q=await this._reschedule(()=>this._checkStatisticsSupport(q,U),ha);const va=await this._reschedule(()=>this._executeSceneFilterQuery(q,ha),ha),Da=await this._reschedule(()=>this._executeGeometryQuery(q,va,ha),ha);await this._reschedule(()=>this._executeAggregateIdsQuery(Da),ha);await this._reschedule(()=>this._executeObjectIdsQuery(Da),ha);await this._reschedule(()=>this._executeTimeQuery(Da),ha);await this._reschedule(()=>this._executeAttributesQuery(Da),ha);return Da}catch(va){if(va!==n.QUERY_ENGINE_EMPTY_RESULT)throw va;
return new I.QueryEngineResult([],q,this)}};e._createClass(H,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return H}();m.Feature=w;m.QueryEngine=G;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(m,e,ia,aa){m.RemoveMode=void 0;(function(P){P[P.ALL=0]="ALL";P[P.SOME=1]="SOME"})(m.RemoveMode||(m.RemoveMode={}));let R=function(){function P(h,
l,p){this._namespace=h;this._storage=l;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";p&&(this._storage.registerRemoveFunc(this._namespace,p),this._removeFunc=!0)}var E=P.prototype;E.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};E.resetHitRate=function(){this._hit=this._miss=0};E.put=function(h,l,p,Q=0){this._storage.put(this._namespace+
h,l,p,Q)};E.get=function(h){h=this._storage.get(this._namespace+h);void 0===h?++this._miss:++this._hit;return h};E.pop=function(h){h=this._storage.pop(this._namespace+h);void 0===h?++this._miss:++this._hit;return h};E.updateSize=function(h,l,p){this._storage.updateSize(this._namespace+h,l,p)};E.clear=function(){this._storage.clear(this._namespace)};E.clearAll=function(){this._storage.clearAll()};E.getStats=function(){return this._storage.getStats()};E.resetStats=function(){this._storage.resetStats()};
e._createClass(P,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return P}(),N=function(){function P(h=10485760){this._maxSize=h;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new aa;this._users=new aa}var E=P.prototype;E.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};E.register=function(h){this._users.push(h)};E.deregister=function(h){this._users.removeUnordered(h)};E.registerRemoveFunc=function(h,l){this._removeFuncs.push([h,l])};E.deregisterRemoveFunc=function(h){this._removeFuncs.filterInPlace(l=>l[0]!==h)};E.put=function(h,l,p,Q){const M=this._db.get(h);M&&(this._size-=M.size,this._db.delete(h),M.entry!==l&&this._notifyRemove(h,M.entry,m.RemoveMode.ALL));p>this._maxSize?this._notifyRemove(h,l,m.RemoveMode.ALL):void 0===l?
console.warn("Refusing to cache undefined entry "):!p||0>p?console.warn("Refusing to cache entry with invalid size "+p):(Q=1+Math.max(Q,-3)- -3,this._db.set(h,{entry:l,size:p,lifetime:Q,lives:Q}),this._size+=p,this._checkSizeLimit())};E.updateSize=function(h,l,p){const Q=this._db.get(h);if(Q&&Q.entry===l){for(this._size-=Q.size;p>this._maxSize;)if(p=this._notifyRemove(h,l,m.RemoveMode.SOME),!(ia.isSome(p)&&0<p)){this._db.delete(h);return}Q.size=p;this._size+=p;this._checkSizeLimit()}};E.pop=function(h){const l=
this._db.get(h);if(l)return this._size-=l.size,this._db.delete(h),++this._hit,l.entry;++this._miss};E.get=function(h){const l=this._db.get(h);if(void 0===l)++this._miss;else return this._db.delete(h),l.lives=l.lifetime,this._db.set(h,l),++this._hit,l.entry};E.getStats=function(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},p=[];this._db.forEach((T,D)=>{const f=T.lifetime;
p[f]=(p[f]||0)+T.size;this._users.forAll(u=>{u=u.namespace;D.startsWith(u)&&(l[u]=(l[u]||0)+T.size)})});const Q={};this._users.forAll(T=>{const D=T.namespace;!isNaN(T.hitRate)&&0<T.hitRate?(l[D]=l[D]||0,Q[D]=Math.round(100*T.hitRate)+"%"):Q[D]="0%"});var M=Object.keys(l);M.sort((T,D)=>l[D]-l[T]);M.forEach(T=>h[T]=Math.round(l[T]/2**20)+"MB / "+Q[T]);for(M=p.length-1;0<=M;--M){const T=p[M];T&&(h["Priority "+(M+-3-1)]=Math.round(T/this.size*100)+"%")}return h};E.resetStats=function(){this._hit=this._miss=
0;this._users.forAll(h=>h.resetHitRate())};E.clear=function(h){this._db.forEach((l,p)=>{p.startsWith(h)&&(this._size-=l.size,this._db.delete(p),this._notifyRemove(p,l.entry,m.RemoveMode.ALL))})};E.clearAll=function(){this._db.forEach((h,l)=>this._notifyRemove(l,h.entry,m.RemoveMode.ALL));this._size=0;this._db.clear()};E._getHitRate=function(){return this._hit/(this._hit+this._miss)};E._notifyRemove=function(h,l,p){let Q;this._removeFuncs.some(M=>h.startsWith(M[0])?(M=M[1](l,p),"number"===typeof M&&
(Q=M),!0):!1);return Q};E._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [h,l]of this._db){this._db.delete(h);if(1>=l.lives){this._size-=l.size;const p=this._notifyRemove(h,l.entry,m.RemoveMode.SOME);ia.isSome(p)&&0<p&&(this._size+=p,l.lives=l.lifetime,l.size=p,this._db.set(h,l))}else--l.lives,this._db.set(h,l);if(this._size<=.9*this.maxSize)break}};e._createClass(P,[{key:"size",get:function(){return this._size}},{key:"sizeMB",get:function(){return this._size/1024/1024}},{key:"maxSize",
get:function(){return this._maxSize},set:function(h){this._maxSize=Math.max(h,0);this._checkSizeLimit()}}]);return P}();m.MIN_PRIORITY=-3;m.MemCache=R;m.MemCacheStorage=N;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(m,e,ia){function aa(h,l){return h?P.get(h,l):null}function R(h,l,p,Q=!0){const M=[];for(const T of l)if("*"!==T&&!h.has(T))if(Q){l=
N(T);try{const D=aa(l,h);if(!D)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:l});if(!D.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:D});R(h,D.fieldNames,"expression contains missing fields")}catch(D){if((l=D&&D.details)&&(l.clause||l.where))throw D;l&&l.missingFields?M.push(...l.missingFields):M.push(T)}}else M.push(T);if(M.length)throw new e("feature-store:unsupported-query",p,{missingFields:M});}function N(h){return h.split(" as ")[0]}
const P=new ia.WhereClauseCache(50,500),E=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));m.getAliasFromFieldName=function(h){return h.split(" as ")[1]};m.getExpressionFromFieldName=N;m.getWhereClause=aa;m.hasInvalidFieldType=function(h,l){return(h=l.get(h))?!E.has(h.type):!1};m.validateFields=R;m.validateHaving=function(h,l,p){if(!l)return!0;const Q=P.get(l,h);if(!Q)throw new e("feature-store:unsupported-query",
"invalid SQL expression",{having:l});if(!Q.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:l});R(h,Q.fieldNames,"having contains missing fields");if(!Q.getExpressions().every(M=>{const {aggregateType:T,field:D}=M,f=h.get(D)?.name;return p.some(u=>{const {onStatisticField:L,statisticType:Z}=u;return h.get(L)?.name===f&&Z.toLowerCase().trim()===T})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",
{having:l});return!0};m.validateWhere=function(h,l){if(!l)return!0;const p=P.get(l,h);if(!p)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:l});if(!p.isStandardized)throw new e("feature-store:unsupported-query","where clause is not standard",{where:l});R(h,p.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../ItemCache","./WhereClause"],function(m,e,ia,aa){let R=function(){function N(P,E){this._cache=new ia(P);this._invalidCache=new ia(E)}N.prototype.get=function(P,E){const h=`${E.uid}:${P}`,l=this._cache.get(h);if(l)return l;if(void 0!==this._invalidCache.get(h))return null;try{const p=aa.WhereClause.create(P,E);this._cache.put(h,p);return p}catch{return this._invalidCache.put(h,null),null}};return e._createClass(N)}();m.WhereClauseCache=R;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/core/ItemCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(m,e){return function(){function ia(R,N){this._storage=new e.MemCacheStorage;this._storage.maxSize=R;N&&this._storage.registerRemoveFunc("",N)}var aa=ia.prototype;aa.put=function(R,N){this._storage.put(R,N,1,1)};aa.pop=function(R){return this._storage.pop(R)};aa.get=function(R){return this._storage.get(R)};aa.clear=function(){this._storage.clearAll()};aa.destroy=function(){this._storage.destroy()};
return m._createClass(ia)}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(m,e,ia,aa,R,N){function P(G,H){G+="";return G.length>=H?G:Array(H-G.length+1).join("0")+G}function E(G,H,t="0",q="0",U="0",ha="0",va="",Da="0",Ha="0"){return"+"===va||"-"===va?(G=`${P(parseInt(G,10),4)}-${P(parseInt(H,10),2)}-${P(parseInt(t,10),2)}`,H="",10>parseFloat(ha)&&(H="0"),q=`${P(parseInt(q,
10),2)}:${P(parseInt(U,10),2)}:${H+parseFloat(ha).toString()}`,va=`${va}${P(parseInt(Da,10),2)}:${P(parseInt(Ha,10),2)}`,new Date(G+"T"+q+va)):new Date(parseInt(G,10),parseInt(H,10)-1,parseInt(t,10),parseInt(q,10),parseInt(U,10),parseFloat(ha))}function h(G){let H=J.exec(G);if(null!==H){const [,t,q,U,ha,va,Da]=H;return E(t,q,U,ha,va,Da)}H=n.exec(G);if(null!==H){const [,t,q,U,ha,va,Da,Ha,Ia,Ja]=H;return E(t,q,U,ha,va,Da,Ha,Ia,Ja)}H=A.exec(G);if(null!==H){const [,t,q,U,ha,va,Da,Ha,Ia]=H;return E(t,
q,U,ha,va,"0",Da,Ha,Ia)}H=x.exec(G);if(null!==H){const [,t,q,U,ha,va]=H;return E(t,q,U,ha,va)}H=O.exec(G);if(null!==H){const [,t,q,U]=H;return E(t,q,U)}throw Error("SQL Invalid Timestamp");}function l(G){const H=O.exec(G);if(null===H)try{return h(G)}catch{throw Error("SQL Invalid Date");}const [,t,q,U]=H;return new Date(parseInt(t,10),parseInt(q,10)-1,parseInt(U,10))}function p(G){return Array.isArray(G)?G:[G]}function Q(G){return null!==G?!0!==G:null}function M(G,H){return null!=G&&null!=H?!0===
G&&!0===H:!1===G||!1===H?!1:null}function T(G,H){return null!=G&&null!=H?!0===G||!0===H:!0===G||!0===H?!0:null}function D(G,H){if(null==G)return null;let t=!1;for(const q of H)if(null==q)t=null;else if(G===q){t=!0;break}return t}function f(G,H,t){if(null==G)return null;let q="",U=C.Normal;for(let ha=0;ha<H.length;ha++){const va=H.charAt(ha);switch(U){case C.Normal:va===t?U=C.Escaped:q="-[]/{}()*+?.\\^$|".includes(va)?q+("\\"+va):"%"===va?q+".*":"_"===va?q+".":q+va;break;case C.Escaped:q="-[]/{}()*+?.\\^$|".includes(va)?
q+("\\"+va):q+va,U=C.Normal}}return(new RegExp("^"+q+"$","m")).test(G)}function u(G){return G instanceof Date?G.valueOf():G}function L(G,H,t){if(null==H||null==t)return null;H=u(H);t=u(t);switch(G){case "\x3c\x3e":return H!==t;case "\x3d":return H===t;case "\x3e":return H>t;case "\x3c":return H<t;case "\x3e\x3d":return H>=t;case "\x3c\x3d":return H<=t}}function Z(G,H,t){if("||"===G)return R.evaluateFunction("concat",[H,t]);if(H instanceof R.SqlInterval)if(t instanceof Date)switch(G){case "+":return new Date(H.valueInMilliseconds()+
t.getTime());case "-":return H.valueInMilliseconds()-t.getTime();case "*":return H.valueInMilliseconds()*t.getTime();case "/":return H.valueInMilliseconds()/t.getTime()}else if(t instanceof R.SqlInterval)switch(G){case "+":return R.SqlInterval.createFromMilliseconds(H.valueInMilliseconds()+t.valueInMilliseconds());case "-":return R.SqlInterval.createFromMilliseconds(H.valueInMilliseconds()-t.valueInMilliseconds());case "*":return H.valueInMilliseconds()*t.valueInMilliseconds();case "/":return H.valueInMilliseconds()/
t.valueInMilliseconds()}else H=H.valueInMilliseconds();else if(t instanceof R.SqlInterval)if(H instanceof Date)switch(G){case "+":return new Date(t.valueInMilliseconds()+H.getTime());case "-":return new Date(H.getTime()-t.valueInMilliseconds());case "*":return H.getTime()*t.valueInMilliseconds();case "/":return H.getTime()/t.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(H instanceof Date&&"number"===typeof t)switch(t*=864E5,H=H.getTime(),G){case "+":return new Date(H+t);case "-":return new Date(H-
t);case "*":return new Date(H*t);case "/":return new Date(H/t)}else if(t instanceof Date&&"number"===typeof H)switch(H*=864E5,t=t.getTime(),G){case "+":return new Date(H+t);case "-":return new Date(H-t);case "*":return new Date(H*t);case "/":return new Date(H/t)}switch(G){case "+":return H+t;case "-":return H-t;case "*":return H*t;case "/":return H/t}}function I(G,H,t,q){G=q.getAttribute(G,H);return null!=G&&1===t[H]?new Date(G):G}const O=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
n=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,x=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,B=new Set(["current_timestamp","current_date","current_time"]);let z=function(){function G(){}G.makeBool=function(H){return!0===H};G.featureValue=function(H,t,q,U){return I(H,t,q,U)};G.equalsNull=function(H){return null===H};G.applyLike=function(H,t,q){return f(H,t,
q)};G.ensureArray=function(H){return p(H)};G.applyIn=function(H,t){return D(H,t)};G.currentDate=function(){const H=new Date;H.setHours(0,0,0,0);return H};G.makeSqlInterval=function(H,t,q){return R.SqlInterval.createFromValueAndQualifer(H,t,q)};G.convertInterval=function(H){return H instanceof R.SqlInterval?H.valueInMilliseconds():H};G.currentTimestamp=function(){return new Date};G.compare=function(H,t,q){return L(H,t,q)};G.calculate=function(H,t,q){return Z(H,t,q)};G.makeComparable=function(H){return u(H)};
G.evaluateFunction=function(H,t){return R.evaluateFunction(H,t)};G.lookup=function(H,t){H=t[H];return void 0===H?null:H};G.between=function(H,t){return null==H||null==t[0]||null==t[1]?null:H>=t[0]&&H<=t[1]};G.notbetween=function(H,t){return null==H||null==t[0]||null==t[1]?null:H<t[0]||H>t[1]};G.ternaryNot=function(H){return Q(H)};G.ternaryAnd=function(H,t){return M(H,t)};G.ternaryOr=function(H,t){return T(H,t)};return e._createClass(G)}(),w=function(){function G(t,q){this.fieldsIndex=q;this._datefields=
{};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=N.WhereGrammar.parse(t);const {isStandardized:U,isAggregate:ha,referencedFieldNames:va}=this._extractExpressionInfo(q);this._referencedFieldNames=va;this.isStandardized=U;this.isAggregate=ha}G.create=function(t,q){return new G(t,q)};var H=G.prototype;H.testSet=function(t,q=ba){const U={};for(const ha of this.fieldNames)U[ha]=t.map(va=>q.getAttribute(va,ha));return!!this._evaluateNode(this.parseTree,{attributes:U},ba)};H.calculateValue=
function(t,q=ba){t=this._evaluateNode(this.parseTree,t,q);return t instanceof R.SqlInterval?t.valueInMilliseconds()/864E5:t};H.calculateValueCompiled=function(t,q=ba){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(t,this.parameters,q,this._datefields);if(ia("esri-csp-restrictions"))return this.calculateValue(t,q);this._compileMe();return this.parseTree._compiledVersion(t,this.parameters,q,this._datefields)};H.testFeature=function(t,q=ba){return!!this._evaluateNode(this.parseTree,
t,q)};H.testFeatureCompiled=function(t,q=ba){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(t,this.parameters,q,this._datefields);if(ia("esri-csp-restrictions"))return this.testFeature(t,q);this._compileMe();return!!this.parseTree._compiledVersion(t,this.parameters,q,this._datefields)};H.getFunctions=function(){const t=new Set;this._visitAll(this.parseTree,q=>{"function"===q.type&&t.add(q.name.toLowerCase())});return Array.from(t)};H.getExpressions=function(){const t=
new Map;this._visitAll(this.parseTree,q=>{if("function"===q.type){const U=q.name.toLowerCase();q=q.args.value[0];if("column-reference"===q.type){q=q.column;const ha=`${U}-${q}`;t.has(ha)||t.set(ha,{aggregateType:U,field:q})}}});return[...t.values()]};H.getVariables=function(){const t=new Set;this._visitAll(this.parseTree,q=>{"parameter"===q.type&&t.add(q.value.toLowerCase())});return Array.from(t)};H._compileMe=function(){const t="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",t)).bind(z)};H._extractExpressionInfo=function(t){const q=[],U=new Set;let ha=!0,va=!0;this._visitAll(this.parseTree,Da=>{switch(Da.type){case "column-reference":const Ha=t?.get(Da.column);let Ia,Ja;Ha?Ia=Ja=Ha.name??"":(Ja=Da.column,Ia=Ja.toLowerCase());Ha&&Ha.name&&("date"===Ha.type||"esriFieldTypeDate"===Ha.type)&&(this._datefields[Ha.name]=1);U.has(Ia)||(U.add(Ia),q.push(Ja));Da.column=Ja;break;
case "function":const {name:Ma,args:Wa}=Da;Da=Wa.value.length;ha&&(ha=R.isStandardized(Ma,Da));va&&(va=aa.isAggregate(Ma,Da))}});return{referencedFieldNames:Array.from(q),isStandardized:ha,isAggregate:va}};H._visitAll=function(t,q){if(null!=t)switch(q(t),t.type){case "when-clause":this._visitAll(t.operand,q);this._visitAll(t.value,q);break;case "case-expression":for(const U of t.clauses)this._visitAll(U,q);"simple"===t.format&&this._visitAll(t.operand,q);null!==t.else&&this._visitAll(t.else,q);break;
case "expression-list":for(const U of t.value)this._visitAll(U,q);break;case "unary-expression":this._visitAll(t.expr,q);break;case "binary-expression":this._visitAll(t.left,q);this._visitAll(t.right,q);break;case "function":this._visitAll(t.args,q)}};H.evaluateNodeToJavaScript=function(t){switch(t.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(t.value)+", "+JSON.stringify(t.qualifier)+","+JSON.stringify(t.op)+")";case "case-expression":var q="";if("simple"===t.format){var U=
"this.makeComparable("+this.evaluateNodeToJavaScript(t.operand)+")";q="( ";for(let ha=0;ha<t.clauses.length;ha++)q+=" ("+U+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(t.clauses[ha].operand)+")) ? ("+this.evaluateNodeToJavaScript(t.clauses[ha].value)+") : "}else for(q="( ",U=0;U<t.clauses.length;U++)q+=" this.makeBool("+this.evaluateNodeToJavaScript(t.clauses[U].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(t.clauses[U].value)+") : ";q=null!==t.else?q+this.evaluateNodeToJavaScript(t.else):
q+"null";return q+" )";case "parameter":return"this.lookup("+JSON.stringify(t.value.toLowerCase())+",lookups)";case "expression-list":q="[";for(U of t.value)"["!==q&&(q+=","),q+=this.evaluateNodeToJavaScript(U);return q+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(t.expr)+")";case "binary-expression":switch(t.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case "OR":return"this.ternaryOr("+
this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case "IS":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")";case "ISNOT":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+
"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+
","+JSON.stringify(t.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(t.operator)+
","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")"}throw Error("Not Supported Operator "+t.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(t.value);case "date":return"(new Date("+l(t.value).getTime().toString()+"))";case "timestamp":return"(new Date("+h(t.value).getTime().toString()+"))";case "current-time":return"date"===t.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+
JSON.stringify(t.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(t.name)+","+this.evaluateNodeToJavaScript(t.args)+")"}throw Error("Unsupported sql syntax "+t.type);};H._evaluateNode=function(t,q,U){switch(t.type){case "interval":return q=this._evaluateNode(t.value,q,U),R.SqlInterval.createFromValueAndQualifer(q,t.qualifier,t.op);case "case-expression":if("simple"===t.format){var ha=u(this._evaluateNode(t.operand,q,U));for(var va=0;va<t.clauses.length;va++)if(ha===
u(this._evaluateNode(t.clauses[va].operand,q,U)))return this._evaluateNode(t.clauses[va].value,q,U)}else for(ha=0;ha<t.clauses.length;ha++)if(!0===this._evaluateNode(t.clauses[ha].operand,q,U))return this._evaluateNode(t.clauses[ha].value,q,U);return null!==t.else?this._evaluateNode(t.else,q,U):null;case "parameter":return this.parameters[t.value.toLowerCase()];case "expression-list":ha=[];for(va of t.value)ha.push(this._evaluateNode(va,q,U));return ha;case "unary-expression":return Q(this._evaluateNode(t.expr,
q,U));case "binary-expression":switch(t.operator){case "AND":return M(this._evaluateNode(t.left,q,U),this._evaluateNode(t.right,q,U));case "OR":return T(this._evaluateNode(t.left,q,U),this._evaluateNode(t.right,q,U));case "IS":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(t.left,q,U);case "ISNOT":if("null"!==t.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(t.left,q,U);case "IN":return ha=p(this._evaluateNode(t.right,
q,U)),D(this._evaluateNode(t.left,q,U),ha);case "NOT IN":return ha=p(this._evaluateNode(t.right,q,U)),Q(D(this._evaluateNode(t.left,q,U),ha));case "BETWEEN":return ha=this._evaluateNode(t.left,q,U),t=this._evaluateNode(t.right,q,U),null==ha||null==t[0]||null==t[1]?null:ha>=u(t[0])&&ha<=u(t[1]);case "NOTBETWEEN":return ha=this._evaluateNode(t.left,q,U),t=this._evaluateNode(t.right,q,U),null==ha||null==t[0]||null==t[1]?null:ha<u(t[0])||ha>u(t[1]);case "LIKE":return f(this._evaluateNode(t.left,q,U),
this._evaluateNode(t.right,q,U),t.escape);case "NOT LIKE":return Q(f(this._evaluateNode(t.left,q,U),this._evaluateNode(t.right,q,U),t.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return L(t.operator,this._evaluateNode(t.left,q,U),this._evaluateNode(t.right,q,U));case "-":case "+":case "*":case "/":case "||":return Z(t.operator,this._evaluateNode(t.left,q,U),this._evaluateNode(t.right,q,U))}case "null":case "boolean":case "string":case "number":return t.value;
case "date":return l(t.value);case "timestamp":return h(t.value);case "current-time":return q=new Date,"date"===t.mode&&q.setHours(0,0,0,0),q;case "column-reference":return I(q,t.column,this._datefields,U);case "data-type":return t.value;case "function":return q=this._evaluateNode(t.args,q,U),this.isAggregate?aa.aggregateFunction(t.name,q):R.evaluateFunction(t.name,q)}throw Error("Unsupported sql syntax "+t.type);};e._createClass(G,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,t=>{"current-time"===t.type?this._hasDateFunctions=!0:"function"===t.type&&(this._hasDateFunctions=this._hasDateFunctions||B.has(t.name.toLowerCase()))});return this._hasDateFunctions}}]);return G}();var C;(function(G){G[G.Normal=0]="Normal";G[G.Escaped=1]="Escaped"})(C||(C={}));const ba={getAttribute(G,H){return(G&&"object"===typeof G.attributes?
G.attributes:G)[H]}};m.WhereClause=w;m.defaultAttributeAdapter=ba;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(m){function e(R){let N=0;for(let P=0;P<R.length;P++)N+=R[P];return N/R.length}function ia(R){const N=e(R),P=R.length;let E=0;for(const h of R)E+=(h-N)**2;return 1<P?E/(P-1):0}const aa={min:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.min.apply(Math,R[0])},max:{minParams:1,maxParams:1,
evaluate:R=>null==R[0]?null:Math.max.apply(Math,R[0])},avg:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:e(R[0])},sum:{minParams:1,maxParams:1,evaluate:R=>{if(null==R[0])R=null;else{R=R[0];let N=0;for(let P=0;P<R.length;P++)N+=R[P];R=N}return R}},stddev:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.sqrt(ia(R[0]))},count:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:R[0].length},var:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:ia(R[0])}};m.aggregateFunction=function(R,
N){const P=aa[R.toLowerCase()];if(null==P)throw Error("Function Not Recognised");if(N.length<P.minParams||N.length>P.maxParams)throw Error(`Invalid Parameter count for call to ${R.toUpperCase()}`);return P.evaluate(N)};m.isAggregate=function(R,N){R=aa[R.toLowerCase()];return null!=R&&N>=R.minParams&&N<=R.maxParams};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport",
"../string","../../chunks/datetime"],function(m,e,ia,aa,R){function N(l){l=new Date(l.getTime());l.setHours(0,0,0,0);return l}function P(l,p){if(l instanceof Date)return p?N(l):l;if("string"===typeof l||l instanceof String)if(l=R.DateTime.fromSQL(l),l.isValid)return p?N(l.toJSDate()):l.toJSDate();throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);}let E=function(){function l(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}l._fixDefaults=function(p){if(null!==
p.precision||null!==p.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};l._parseSecondsComponent=function(p,Q){Q.includes(".")?(Q=Q.split("."),p.second=parseFloat(Q[0]),p.millis=parseInt(Q[1],10)):p.second=parseFloat(Q)};l.createFromMilliseconds=function(p){const Q=new l;Q.second=p/1E3;return Q};l.createFromValueAndQualifer=function(p,Q,M){let T=null;const D=new l;D.op="-"===M?"-":"+";if("interval-period"===Q.type){l._fixDefaults(Q);M=RegExp("^[0-9]{1,}$");if("year"===
Q.period||"month"===Q.period)throw Error("Year-Month Intervals not supported");if("second"===Q.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(p))l._parseSecondsComponent(D,p);else throw Error("Illegal Interval");else if(M.test(p))D[Q.period]=parseFloat(p);else throw Error("Illegal Interval");}else{l._fixDefaults(Q.start);l._fixDefaults(Q.end);if("year"===Q.start.period||"month"===Q.start.period)throw Error("Year-Month Intervals not supported");if("year"===Q.end.period||"month"===Q.end.period)throw Error("Year-Month Intervals not supported");
switch(Q.start.period){case "day":switch(Q.end.period){case "hour":T=RegExp("^[0-9]{1,} [0-9]{1,}$");if(T.test(p))D[Q.start.period]=parseFloat(p.split(" ")[0]),D[Q.end.period]=parseFloat(p.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":T=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(T.test(p))D[Q.start.period]=parseFloat(p.split(" ")[0]),p=p.split(" ")[1].split(":"),D.hour=parseFloat(p[0]),D.minute=parseFloat(p[1]);else throw Error("Illegal Interval");break;case "second":T=
RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(T.test(p))D[Q.start.period]=parseFloat(p.split(" ")[0]),p=p.split(" ")[1].split(":"),D.hour=parseFloat(p[0]),D.minute=parseFloat(p[1]),l._parseSecondsComponent(D,p[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(Q.end.period){case "minute":T=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(T.test(p))D.hour=parseFloat(p.split(":")[0]),D.minute=parseFloat(p.split(":")[1]);
else throw Error("Illegal Interval");break;case "second":T=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(T.test(p))p=p.split(":"),D.hour=parseFloat(p[0]),D.minute=parseFloat(p[1]),l._parseSecondsComponent(D,p[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(Q.end.period){case "second":T=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(T.test(p))p=p.split(":"),D.minute=parseFloat(p[0]),l._parseSecondsComponent(D,
p[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return D};l.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return e._createClass(l)}();const h={extract:{minParams:2,maxParams:2,evaluate:([l,p])=>{if(null==p)return null;if(p instanceof Date)switch(l.toUpperCase()){case "SECOND":return p.getSeconds();
case "MINUTE":return p.getMinutes();case "HOUR":return p.getHours();case "DAY":return p.getDate();case "MONTH":return p.getMonth()+1;case "YEAR":return p.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:l=>{if(2===l.length){const [p,Q]=l;return null==p||null==Q?null:p.toString().substring(Q-1)}if(3===l.length){const [p,Q,M]=l;return null==p||null==Q||null==M?null:0>=M?"":p.toString().substring(Q-1,Q+M-1)}}},position:{minParams:2,maxParams:2,
evaluate:([l,p])=>null==l||null==p?null:p.indexOf(l)+1},trim:{minParams:2,maxParams:3,evaluate:l=>{var p=3===l.length,Q=p?l[1]:" ";p=p?l[2]:l[1];if(null==Q||null==p)return null;Q=`(${aa.escapeRegExpString(Q)})`;switch(l[0]){case "BOTH":return p.replace(new RegExp(`^${Q}*|${Q}*$`,"g"),"");case "LEADING":return p.replace(new RegExp(`^${Q}*`,"g"),"");case "TRAILING":return p.replace(new RegExp(`${Q}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:l=>
null==l[0]?null:Math.abs(l[0])},ceiling:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.ceil(l[0])},floor:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.floor(l[0])},log:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])},log10:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.sin(l[0])},cos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.cos(l[0])},tan:{minParams:1,
maxParams:1,evaluate:l=>null==l[0]?null:Math.tan(l[0])},asin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.asin(l[0])},acos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.acos(l[0])},atan:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.atan(l[0])},sign:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:0<l[0]?1:0>l[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:l=>null==l[0]||null==l[1]?null:l[0]**l[1]},mod:{minParams:2,maxParams:2,evaluate:l=>null==l[0]||null==
l[1]?null:l[0]%l[1]},round:{minParams:1,maxParams:2,evaluate:l=>{const p=l[0];l=2===l.length?10**l[1]:1;return null==p?null:Math.round(p*l)/l}},truncate:{minParams:1,maxParams:2,evaluate:l=>null==l[0]?null:1===l.length?parseInt(l[0].toFixed(0),10):parseFloat(l[0].toFixed(l[1]))},char_length:{minParams:1,maxParams:1,evaluate:l=>"string"===typeof l[0]||l[0]instanceof String?l[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:l=>{let p="";for(let Q=0;Q<l.length;Q++){if(null==l[Q])return null;
p+=l[Q].toString()}return p}},lower:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:l=>{for(const p of l)if(null!==p)return p;return null}},cosh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.cosh(l[0])},sinh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.sinh(l[0])},tanh:{minParams:1,maxParams:1,evaluate:l=>
null==l[0]?null:Math.tanh(l[0])},nullif:{minParams:2,maxParams:2,evaluate:l=>{const p=l[0];l=l[1];return(p instanceof Date?p.valueOf():p)===(l instanceof Date?l.valueOf():l)?null:p}},cast:{minParams:2,maxParams:2,evaluate:l=>{var p=l[0];l=l[1];if(null===p)return null;switch(l.type){case "integer":p=parseInt(p,10);if(isNaN(p))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return p;case "smallint":p=parseInt(p,10);if(isNaN(p))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);if(32767<
p||-32767>p)throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return p;case "float":case "real":p=parseFloat(p);if(isNaN(p))throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return p;case "date":return P(p,!0);case "timestamp":return P(p,!1);case "varchar":p=p.toString();if(p.length>l.size)throw new ia.SqlError(ia.SqlErrorCodes.CannotCastValue);return p;default:throw new ia.SqlError(ia.SqlErrorCodes.InvalidDataType);}}}};m.SqlInterval=E;m.evaluateFunction=function(l,p){const Q=h[l.toLowerCase()];
if(null==Q)throw Error("Function Not Recognised");if(p.length<Q.minParams||p.length>Q.maxParams)throw Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return Q.evaluate(p)};m.isStandardized=function(l,p){l=h[l.toLowerCase()];return null!=l&&p>=l.minParams&&p<=l.maxParams};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(m,
e,ia){m.SqlErrorCodes=void 0;(function(E){E.InvalidFunctionParameters="InvalidFunctionParameters";E.UnsupportedSqlFunction="UnsupportedSqlFunction";E.UnsupportedOperator="UnsupportedOperator";E.UnsupportedSyntax="UnsupportedSyntax";E.UnsupportedIsRhs="UnsupportedIsRhs";E.UnsupportedIsLhs="UnsupportedIsLhs";E.InvalidDataType="InvalidDataType";E.CannotCastValue="CannotCastValue";E.MissingStatisticParameters="MissingStatisticParameters"})(m.SqlErrorCodes||(m.SqlErrorCodes={}));const aa={[m.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",
[m.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[m.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[m.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[m.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[m.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[m.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[m.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",
[m.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let R=function(E){function h(p,Q){p=l.call(this,ia.doSubstitutions(aa[p],Q));p.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(p),h);return p}e._inherits(h,E);var l=e._createSuper(h);return e._createClass(h)}(e._wrapNativeSuper(Error));m.FeatureSetErrorCodes=void 0;(function(E){E.NeverReach="NeverReach";E.NotImplemented="NotImplemented";
E.Cancelled="Cancelled";E.InvalidStatResponse="InvalidStatResponse";E.InvalidRequest="InvalidRequest";E.RequestFailed="RequestFailed";E.MissingFeatures="MissingFeatures";E.AggregationFieldNotFound="AggregationFieldNotFound";E.DataElementsNotFound="DataElementsNotFound"})(m.FeatureSetErrorCodes||(m.FeatureSetErrorCodes={}));const N={[m.FeatureSetErrorCodes.Cancelled]:"Cancelled",[m.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[m.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",
[m.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[m.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[m.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[m.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[m.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[m.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let P=function(E){function h(p,Q){p=l.call(this,ia.doSubstitutions(N[p],Q));p.declaredRootClass=
"esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(p),h);return p}e._inherits(h,E);var l=e._createSuper(h);return e._createClass(h)}(e._wrapNativeSuper(Error));m.FeatureSetError=P;m.FeatureSetErrorMessages=N;m.SqlError=R;m.SqlErrorMessages=aa;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(m,e){function ia(M){return M&&
M.loc?`Line : ${M.loc.start?.line}, ${M.loc.start?.column}: `:""}function aa(M,T){try{if(!T)return M;for(const D in T){let f=T[D];f||(f="");M=M.replace("{"+D+"}",T[D])}}catch(D){}return M}m.ExecutionErrorCodes=void 0;(function(M){M.AsyncNotEnabled="AsyncNotEnabled";M.ModulesNotSupported="ModulesNotSupported";M.CircularModules="CircularModules";M.NeverReach="NeverReach";M.UnsupportedHashType="UnsupportedHashType";M.InvalidParameter="InvalidParameter";M.UnexpectedToken="UnexpectedToken";M.Unrecognised=
"Unrecognised";M.UnrecognisedType="UnrecognisedType";M.MaximumCallDepth="MaximumCallDepth";M.BooleanConditionRequired="BooleanConditionRequired";M.TypeNotAllowedInFeature="TypeNotAllowedInFeature";M.KeyMustBeString="KeyMustBeString";M.WrongNumberOfParameters="WrongNumberOfParameters";M.CallNonFunction="CallNonFunction";M.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";M.NoFunctionInDictionary="NoFunctionInDictionary";M.NoFunctionInArray="NoFunctionInArray";M.AssignModuleFunction="AssignModuleFunction";
M.LogicExpressionOrAnd="LogicExpressionOrAnd";M.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";M.FuncionNotFound="FunctionNotFound";M.InvalidMemberAccessKey="InvalidMemberAccessKey";M.UnsupportedUnaryOperator="UnsupportUnaryOperator";M.InvalidIdentifier="InvalidIdentifier";M.MemberOfNull="MemberOfNull";M.UnsupportedOperator="UnsupportedOperator";M.Cancelled="Cancelled";M.ModuleAccessorMustBeString="ModuleAccessorMustBeString";M.ModuleExportNotFound="ModuleExportNotFound";M.Immutable=
"Immutable";M.OutOfBounds="OutOfBounds";M.IllegalResult="IllegalResult";M.FieldNotFound="FieldNotFound";M.PortalRequired="PortalRequired";M.LogicError="LogicError";M.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";M.KeyAccessorMustBeString="KeyAccessorMustBeString";M.WrongSpatialReference="WrongSpatialReference"})(m.ExecutionErrorCodes||(m.ExecutionErrorCodes={}));const R={[m.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[m.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",
[m.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[m.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[m.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[m.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[m.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[m.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[m.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[m.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[m.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[m.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[m.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[m.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[m.ExecutionErrorCodes.PortalRequired]:"Portal is required",[m.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[m.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[m.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[m.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[m.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[m.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[m.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[m.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[m.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[m.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[m.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[m.ExecutionErrorCodes.Immutable]:"Object is immutable",[m.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[m.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[m.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[m.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[m.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[m.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[m.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[m.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[m.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[m.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[m.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[m.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[m.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[m.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let N=function(M){function T(...f){return D.call(this,...f)}e._inherits(T,M);var D=e._createSuper(T);return e._createClass(T)}(e._wrapNativeSuper(Error)),P=function(M){function T(f,
u){f=D.call(this,ia(u)+f.message,{cause:f});f.loc=null;Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),T);u&&u.loc&&(f.loc=u.loc);return f}e._inherits(T,M);var D=e._createSuper(T);return e._createClass(T)}(N),E=function(M){function T(f,u,L,Z){f=D.call(this,"Execution error - "+ia(L)+aa(R[u],Z));f.loc=null;f.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),T);L&&L.loc&&(f.loc=L.loc);return f}
e._inherits(T,M);var D=e._createSuper(T);return e._createClass(T)}(e._wrapNativeSuper(Error)),h=function(M){function T(f,u,L,Z){f=D.call(this,"Compilation error - "+ia(L)+aa(R[u],Z));f.loc=null;f.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),T);L&&L.loc&&(f.loc=L.loc);return f}e._inherits(T,M);var D=e._createSuper(T);return e._createClass(T)}(e._wrapNativeSuper(Error)),l=function(M){function T(){var f=D.call(this,
"Uncompilable code structures");f.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),T);return f}e._inherits(T,M);var D=e._createSuper(T);return e._createClass(T)}(e._wrapNativeSuper(Error));m.ModuleErrorCodes=void 0;(function(M){M.UnrecognisedUri="UnrecognisedUri";M.UnsupportedUriProtocol="UnsupportedUriProtocol"})(m.ModuleErrorCodes||(m.ModuleErrorCodes={}));const p={[m.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[m.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let Q=function(M){function T(f,u){f=D.call(this,aa(p[f],u));f.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),T);return f}e._inherits(T,M);var D=e._createSuper(T);return e._createClass(T)}(e._wrapNativeSuper(Error));m.ArcadeCompilationError=h;m.ArcadeExecutionError=E;m.ArcadeUncompilableError=l;m.ErrorWithCause=N;m.ExecutionErrorMessages=R;m.LocatableArcadeExecutionError=
P;m.ModuleError=Q;m.ModuleErrorMessages=p;m.doSubstitutions=aa;m.ensureArcadeExecutionError=function(M,T,D){return"esri.arcade.arcadeexecutionerror"===D.declaredRootClass||"esri.arcade.arcadecompilationerror"===D.declaredRootClass?null===D.loc&&T&&T.loc?new P(D,{cause:D}):D:T&&T.loc?new P(D,{cause:D}):D};m.parsingValidationMessage=function(M,T,D){return"Parsing error - "+ia(M)+aa(R[T],D)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],
function(m){function e(a,g={}){const F=JSON.stringify([a,g]);let ca=hd[F];ca||(ca=new Intl.ListFormat(a,g),hd[F]=ca);return ca}function ia(a,g={}){const F=JSON.stringify([a,g]);let ca=Hc[F];ca||(ca=new Intl.DateTimeFormat(a,g),Hc[F]=ca);return ca}function aa(a,g={}){const F=JSON.stringify([a,g]);let ca=Ic[F];ca||(ca=new Intl.NumberFormat(a,g),Ic[F]=ca);return ca}function R(a,g={}){const {base:F,...ca}=g,ja=JSON.stringify([a,ca]);let qa=Jc[ja];qa||(qa=new Intl.RelativeTimeFormat(a,g),Jc[ja]=qa);return qa}
function N(a){const g=[];for(let F=1;12>=F;F++){const ca=bb.utc(2016,F,1);g.push(a(ca))}return g}function P(a){const g=[];for(let F=1;7>=F;F++){const ca=bb.utc(2016,11,13+F);g.push(a(ca))}return g}function E(a,g,F,ca,ja){a=a.listingMode(F);return"error"===a?null:"en"===a?ca(g):ja(g)}function h(a,g){if(l(a)||null===a)return g;if(a instanceof jc)return a;if("string"===typeof a){const F=a.toLowerCase();return"default"===F?g:"local"===F||"system"===F?nc.instance:"utc"===F||"gmt"===F?Fb.utcInstance:Fb.parseSpecifier(F)||
Ub.create(a)}return p(a)?Fb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new me(a)}function l(a){return"undefined"===typeof a}function p(a){return"number"===typeof a}function Q(a){return"number"===typeof a&&0===a%1}function M(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function T(a,g,F){if(0!==a.length)return a.reduce((ca,ja)=>{ja=[g(ja),ja];return ca?F(ca[0],ja[0])===ca[0]?ca:ja:ja},null)[1]}function D(a,g){return g.reduce((F,ca)=>
{F[ca]=a[ca];return F},{})}function f(a,g){return Object.prototype.hasOwnProperty.call(a,g)}function u(a,g,F){return Q(a)&&a>=g&&a<=F}function L(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function Z(a){if(!l(a)&&null!==a&&""!==a)return parseInt(a,10)}function I(a){if(!l(a)&&null!==a&&""!==a)return parseFloat(a)}function O(a){if(!l(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function J(a,g,F=!1){g=10**g;return(F?Math.trunc:Math.round)(a*g)/g}function n(a){return 0===
a%4&&(0!==a%100||0===a%400)}function A(a,g){var F=g-1;F=F-12*Math.floor(F/12)+1;return 2===F?n(a+(g-F)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][F-1]}function x(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function B(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:
52}function z(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function w(a,g,F,ca=null){a=new Date(a);const ja={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ca&&(ja.timeZone=ca);return(g=(new Intl.DateTimeFormat(F,{timeZoneName:g,...ja})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?g.value:null}function C(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function ba(a){const g=
Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Ca(`Invalid unit value ${a}`);return g}function G(a,g){const F={};for(const ca in a)if(f(a,ca)){const ja=a[ca];void 0!==ja&&null!==ja&&(F[g(ca)]=ba(ja))}return F}function H(a,g){const F=Math.trunc(Math.abs(a/60)),ca=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${L(F,2)}:${L(ca,2)}`;case "narrow":return`${a}${F}${0<ca?`:${ca}`:""}`;case "techie":return`${a}${L(F,2)}${L(ca,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);
}}function t(a){return D(a,["hour","minute","second","millisecond"])}function q(a){switch(a){case "narrow":return[...ne];case "short":return[...Kc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function U(a){switch(a){case "narrow":return[...pe];case "short":return[...id];case "long":return[...Lc];case "numeric":return"1234567".split("");default:return null}}function ha(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function va(a,g,F="always",ca=!1){const ja={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===F&&qa)switch(F="days"===a,g){case 1:return F?"tomorrow":`next ${ja[a][0]}`;case -1:return F?"yesterday":`last ${ja[a][0]}`;case 0:return F?
"today":`this ${ja[a][0]}`}F=Object.is(g,-0)||0>g;g=Math.abs(g);qa=1===g;const za=ja[a];a=ca?qa?za[1]:za[2]||za[1]:qa?ja[a][0]:a;return F?`${g} ${a} ago`:`in ${g} ${a}`}function Da(a,g){let F="";for(const ca of a)F=ca.literal?F+ca.val:F+g(ca.val);return F}function Ha(...a){a=a.reduce((g,F)=>g+F.source,"");return RegExp(`^${a}$`)}function Ia(...a){return g=>a.reduce(([F,ca,ja],qa)=>{const [za,Ka,Qa]=qa(g,ja);return[{...F,...za},Ka||ca,Qa]},[{},null,1]).slice(0,2)}function Ja(a,...g){if(null==a)return[null,
null];for(const [F,ca]of g)if(g=F.exec(a))return ca(g);return[null,null]}function Ma(...a){return(g,F)=>{const ca={};let ja;for(ja=0;ja<a.length;ja++)ca[a[ja]]=Z(g[F+ja]);return[ca,null,F+ja]}}function Wa(a,g,F){a=a[g];return l(a)?F:Z(a)}function Ya(a,g){return[{hours:Wa(a,g,0),minutes:Wa(a,g+1,0),seconds:Wa(a,g+2,0),milliseconds:O(a[g+3])},null,g+4]}function Ua(a,g){const F=!a[g]&&!a[g+1];a=C(a[g+1],a[g+2]);return[{},F?null:Fb.instance(a),g+3]}function gb(a,g){return[{},a[g]?Ub.create(a[g]):null,
g+1]}function na(a){const [g,F,ca,ja,qa,za,Ka,Qa,cb]=a,d="-"===g[0];a=Qa&&"-"===Qa[0];const db=($a,zb=!1)=>void 0!==$a&&(zb||$a&&d)?-$a:$a;return[{years:db(I(F)),months:db(I(ca)),weeks:db(I(ja)),days:db(I(qa)),hours:db(I(za)),minutes:db(I(Ka)),seconds:db(I(Qa),"-0"===Qa),milliseconds:db(O(cb),a)}]}function ra(a,g,F,ca,ja,qa,za){g={year:2===g.length?z(Z(g)):Z(g),month:Kc.indexOf(F)+1,day:Z(ca),hour:Z(ja),minute:Z(qa)};za&&(g.second=Z(za));a&&(g.weekday=3<a.length?Lc.indexOf(a)+1:id.indexOf(a)+1);return g}
function Aa(a){const [,g,F,ca,ja,qa,za,Ka,Qa,cb,d,db]=a;a=ra(g,ja,ca,F,qa,za,Ka);let $a;$a=Qa?te[Qa]:cb?0:C(d,db);return[a,new Fb($a)]}function c(a){const [,g,F,ca,ja,qa,za,Ka]=a;return[ra(g,ja,ca,F,qa,za,Ka),Fb.utcInstance]}function k(a){const [,g,F,ca,ja,qa,za,Ka]=a;return[ra(g,Ka,F,ca,ja,qa,za),Fb.utcInstance]}function da(a,g,F=!1){a={values:F?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};
return new jb(a)}function ka(a,g,F,ca,ja){a=a[ja][F];var qa=g[F]/a;qa=Math.sign(qa)!==Math.sign(ca[ja])&&0!==ca[ja]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);ca[ja]+=qa;g[F]-=qa*a}function sa(a,g){ue.reduce((F,ca)=>{if(l(g[ca]))return F;F&&ka(a,g,F,g,ca);return ca},null)}function v(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(jb.fromMillis(a).as("days"))}function K(a,g,F){const ca=[["years",
(Qa,cb)=>cb.year-Qa.year],["quarters",(Qa,cb)=>cb.quarter-Qa.quarter+4*(cb.year-Qa.year)],["months",(Qa,cb)=>cb.month-Qa.month+12*(cb.year-Qa.year)],["weeks",(Qa,cb)=>{Qa=v(Qa,cb);return(Qa-Qa%7)/7}],["days",v]],ja={},qa=a;let za,Ka;for(const [Qa,cb]of ca)0<=F.indexOf(Qa)&&(za=Qa,ja[Qa]=cb(a,g),Ka=qa.plus(ja),Ka>g?(ja[Qa]--,a=qa.plus(ja)):a=Ka);return[a,ja,Ka,za]}function Y(a,g,F,ca){let [ja,qa,za,Ka]=K(a,g,F);a=g-ja;F=F.filter(Qa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Qa));0===
F.length&&(za<g&&(za=ja.plus({[Ka]:1})),za!==ja&&(qa[Ka]=(qa[Ka]||0)+a/(za-ja)));g=jb.fromObject(qa,ca);return 0<F.length?jb.fromMillis(a,ca).shiftTo(...F).plus(g):g}function W({numberingSystem:a},g=""){return new RegExp(`${Mc[a||"latn"]}${g}`)}function fa(a,g=F=>F){return{regex:a,deser:([F])=>{{let ca=parseInt(F,10);if(isNaN(ca)){ca="";for(let ja=0;ja<F.length;ja++){const qa=F.charCodeAt(ja);if(-1!==F[ja].search(Mc.hanidec))ca+=ve.indexOf(F[ja]);else for(const za in jd){const [Ka,Qa]=jd[za];qa>=
Ka&&qa<=Qa&&(ca+=qa-Ka)}}F=parseInt(ca,10)}else F=ca}return g(F)}}}function ma(a){return a.replace(/\./g,"\\.?").replace(Nc,kd)}function oa(a,g){return null===a?null:{regex:RegExp(a.map(ma).join("|")),deser:([F])=>a.findIndex(ca=>F.replace(/\./g,"").replace(Nc," ").toLowerCase()===ca.replace(/\./g,"").replace(Nc," ").toLowerCase())+g}}function wa(a,g){return{regex:a,deser:([,F,ca])=>C(F,ca),groups:g}}function ua(a){return{regex:a,deser:([g])=>g}}function Ea(a,g){const F=W(g),ca=W(g,"{2}"),ja=W(g,
"{3}"),qa=W(g,"{4}"),za=W(g,"{6}"),Ka=W(g,"{1,2}"),Qa=W(g,"{1,3}"),cb=W(g,"{1,6}"),d=W(g,"{1,9}"),db=W(g,"{2,4}"),$a=W(g,"{4,6}"),zb=Vb=>({regex:RegExp(Vb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([r])=>r,literal:!0}),ta=(Vb=>{if(a.literal)return zb(Vb);switch(Vb.val){case "G":return oa(g.eras("short",!1),0);case "GG":return oa(g.eras("long",!1),0);case "y":return fa(cb);case "yy":return fa(db,z);case "yyyy":return fa(qa);case "yyyyy":return fa($a);case "yyyyyy":return fa(za);case "M":return fa(Ka);
case "MM":return fa(ca);case "MMM":return oa(g.months("short",!0,!1),1);case "MMMM":return oa(g.months("long",!0,!1),1);case "L":return fa(Ka);case "LL":return fa(ca);case "LLL":return oa(g.months("short",!1,!1),1);case "LLLL":return oa(g.months("long",!1,!1),1);case "d":return fa(Ka);case "dd":return fa(ca);case "o":return fa(Qa);case "ooo":return fa(ja);case "HH":return fa(ca);case "H":return fa(Ka);case "hh":return fa(ca);case "h":return fa(Ka);case "mm":return fa(ca);case "m":return fa(Ka);case "q":return fa(Ka);
case "qq":return fa(ca);case "s":return fa(Ka);case "ss":return fa(ca);case "S":return fa(Qa);case "SSS":return fa(ja);case "u":return ua(d);case "uu":return ua(Ka);case "uuu":return fa(F);case "a":return oa(g.meridiems(),0);case "kkkk":return fa(qa);case "kk":return fa(db,z);case "W":return fa(Ka);case "WW":return fa(ca);case "E":case "c":return fa(F);case "EEE":return oa(g.weekdays("short",!1,!1),1);case "EEEE":return oa(g.weekdays("long",!1,!1),1);case "ccc":return oa(g.weekdays("short",!0,!1),
1);case "cccc":return oa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return wa(new RegExp(`([+-]${Ka.source})(?::(${ca.source}))?`),2);case "ZZZ":return wa(new RegExp(`([+-]${Ka.source})(${ca.source})?`),2);case "z":return ua(/[a-z_+-/]{1,256}?/i);case " ":return ua(/[^\S\n\r]/);default:return zb(Vb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ta.token=a;return ta}function Ba(a){return[`^${a.map(g=>g.regex).reduce((g,F)=>`${g}(${F.source})`,"")}$`,a]}function Fa(a,
g,F){if(a=a.match(g)){g={};let ca=1;for(const ja in F)if(f(F,ja)){const qa=F[ja],za=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(g[qa.token.val[0]]=qa.deser(a.slice(ca,ca+za)));ca+=za}return[a,g]}return[a,{}]}function Ra(a){const g=ja=>{switch(ja){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let F=null,ca;l(a.z)||(F=Ub.create(a.z));l(a.Z)||(F||(F=new Fb(a.Z)),ca=a.Z);l(a.q)||(a.M=3*(a.q-1)+1);l(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);l(a.u)||(a.S=O(a.u));return[Object.keys(a).reduce((ja,qa)=>{const za=g(qa);za&&(ja[za]=a[qa]);return ja},{}),F,ca]}function Oa(a,g){return Array.prototype.concat(...a.map(F=>{if(!F.literal){var ca=Ab.macroTokenToFormatOpts(F.val);ca=Sa(ca,
g);F=null==ca||ca.includes(void 0)?F:ca}return F}))}function Ta(a,g,F){F=Oa(Ab.parseFormat(F),a);var ca=F.map($a=>Ea($a,a));const ja=ca.find($a=>$a.invalidReason);if(ja)return{input:g,tokens:F,invalidReason:ja.invalidReason};const [qa,za]=Ba(ca);ca=RegExp(qa,"i");const [Ka,Qa]=Fa(g,ca,za),[cb,d,db]=Qa?Ra(Qa):[null,null,void 0];if(f(Qa,"a")&&f(Qa,"H"))throw new V("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:F,regex:ca,rawMatches:Ka,matches:Qa,result:cb,zone:d,specificOffset:db}}
function Sa(a,g){if(!a)return null;g=Ab.create(g,a);var F=g.formatDateTimeParts;Oc||(Oc=bb.fromMillis(1555555555555));return F.call(g,Oc).map(ca=>{{const {type:qa,value:za}=ca;if("literal"===qa)ca=/^\s+$/.test(za),ca={literal:!ca,val:ca?" ":za};else{ca=a[qa];var ja=we[qa];"object"===typeof ja&&(ja=ja[ca]);ca=ja?{literal:!1,val:ja}:void 0}}return ca})}function La(a,g){return new Qb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Va(a,g,F){g=new Date(Date.UTC(a,
g-1,F));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function ab(a,g){a=n(a)?Pc:Qc;const F=a.findIndex(ca=>ca<g);return{month:F+1,day:g-a[F]}}function xa(a){const {year:g,month:F,day:ca}=a;var ja=ca+(n(g)?Pc:Qc)[F-1];const qa=Va(g,F,ca);ja=Math.floor((ja-qa+10)/7);let za;1>ja?(za=g-1,ja=B(za)):ja>B(g)?(za=g+1,ja=1):za=g;return{weekYear:za,weekNumber:ja,weekday:qa,...t(a)}}function wb(a){const {weekYear:g,weekNumber:F,weekday:ca}=a;var ja=Va(g,1,4),qa=n(g)?
366:365;ja=7*F+ca-ja-3;1>ja?(qa=g-1,ja+=n(qa)?366:365):ja>qa?(qa=g+1,ja-=n(g)?366:365):qa=g;const {month:za,day:Ka}=ab(qa,ja);return{year:qa,month:za,day:Ka,...t(a)}}function sb(a){const {year:g,month:F,day:ca}=a;var ja=ca+(n(g)?Pc:Qc)[F-1];return{year:g,ordinal:ja,...t(a)}}function ib(a){const {year:g,ordinal:F}=a,{month:ca,day:ja}=ab(g,F);return{year:g,month:ca,day:ja,...t(a)}}function b(a){const g=Q(a.year),F=u(a.month,1,12),ca=u(a.day,1,A(a.year,a.month));return g?F?ca?!1:La("day",a.day):La("month",
a.month):La("year",a.year)}function hb(a){const {hour:g,minute:F,second:ca,millisecond:ja}=a;a=u(g,0,23)||24===g&&0===F&&0===ca&&0===ja;const qa=u(F,0,59),za=u(ca,0,59),Ka=u(ja,0,999);return a?qa?za?Ka?!1:La("millisecond",ja):La("second",ca):La("minute",F):La("hour",g)}function Ib(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Rb(a){null===a.weekData&&(a.weekData=xa(a.c));return a.weekData}function nb(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new bb({...a,...g,old:a})}function la(a,g,F){let ca=a-6E4*g;const ja=F.offset(ca);if(g===ja)return[ca,g];ca-=6E4*(ja-g);g=F.offset(ca);return ja===g?[ca,ja]:[a-6E4*Math.min(ja,g),Math.max(ja,g)]}function hc(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Tb(a,g,F){return la(x(a),g,F)}function Db(a,g){const F=a.o;var ca=a.c.year+
Math.trunc(g.years);const ja=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);ca={...a.c,year:ca,month:ja,day:Math.min(a.c.day,A(ca,ja))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=jb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");ca=x(ca);let [qa,za]=
la(ca,F,a.zone);0!==g&&(qa+=g,za=a.zone.offset(qa));return{ts:qa,o:za}}function Jb(a,g,F,ca,ja,qa){const {setZone:za,zone:Ka}=F;return a&&0!==Object.keys(a).length||g?(a=bb.fromObject(a,{...F,zone:g||Ka,specificOffset:qa}),za?a:a.setZone(Ka)):bb.invalid(new Qb("unparsable",`the input "${ja}" can't be parsed as ${ca}`))}function ac(a,g,F=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:F,forceSimple:!0}).formatDateTimeFromString(a,g):null}function Yb(a,g){const F=9999<a.c.year||0>a.c.year;
let ca="";F&&0<=a.c.year&&(ca+="+");ca+=L(a.c.year,F?6:4);g?(ca=ca+"-"+L(a.c.month),ca=ca+"-"+L(a.c.day)):(ca+=L(a.c.month),ca+=L(a.c.day));return ca}function ic(a,g,F,ca,ja,qa){let za=L(a.c.hour);g?(za=za+":"+L(a.c.minute),0===a.c.second&&F||(za+=":")):za+=L(a.c.minute);0===a.c.second&&F||(za+=L(a.c.second),0===a.c.millisecond&&ca||(za=za+"."+L(a.c.millisecond,3)));ja&&(a.isOffsetFixed&&0===a.offset&&!qa?za+="Z":0>a.o?(za=za+"-"+L(Math.trunc(-a.o/60)),za=za+":"+L(Math.trunc(-a.o%60))):(za=za+"+"+
L(Math.trunc(a.o/60)),za=za+":"+L(Math.trunc(a.o%60))));qa&&(za+="["+a.zone.ianaName+"]");return za}function Eb(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new pa(a);return g}function Sb(a,g){const F=h(g.zone,yb.defaultZone);g=rb.fromObject(g);const ca=yb.now();var ja;if(l(a.year))a=ca;else{for(const qa of ld)l(a[qa])&&(a[qa]=md[qa]);if(ja=b(a)||hb(a))return bb.invalid(ja);ja=F.offset(ca);[a,ja]=Tb(a,ja,F)}return new bb({ts:a,zone:F,loc:g,o:ja})}function kb(a,g,F){const ca=l(F.round)?!0:F.round,ja=(za,Ka)=>{za=J(za,ca||F.calendary?0:2,!0);return g.loc.clone(F).relFormatter(F).format(za,
Ka)},qa=za=>F.calendary?g.hasSame(a,za)?0:g.startOf(za).diff(a.startOf(za),za).get(za):g.diff(a,za).get(za);if(F.unit)return ja(qa(F.unit),F.unit);for(const za of F.units){const Ka=qa(za);if(1<=Math.abs(Ka))return ja(Ka,za)}return ja(a>g?-0:0,F.units[F.units.length-1])}function Gb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Hb(a){if(bb.isDateTime(a))return a;if(a&&a.valueOf&&p(a.valueOf()))return bb.fromJSDate(a);
if(a&&"object"===typeof a)return bb.fromObject(a);throw new Ca(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Za extends Error{}class bc extends Za{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class S extends Za{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class ea extends Za{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class V extends Za{}class pa extends Za{constructor(a){super(`Invalid unit ${a}`)}}class Ca extends Za{}class Ga extends Za{constructor(){super("Zone is an abstract class")}}
const Pa={year:"numeric",month:"numeric",day:"numeric"},Xa={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},lb={year:"numeric",month:"long",day:"numeric",weekday:"long"},xb={hour:"numeric",minute:"numeric"},Kb={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class jc{get type(){throw new Ga;}get name(){throw new Ga;}get ianaName(){return this.name}get isUniversal(){throw new Ga;}offsetName(a,g){throw new Ga;}formatOffset(a,g){throw new Ga;}offset(a){throw new Ga;}equals(a){throw new Ga;}get isValid(){throw new Ga;}}let Rc=null;class nc extends jc{static get instance(){null===
Rc&&(Rc=new nc);return Rc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:g,locale:F}){return w(a,g,F)}formatOffset(a,g){return H(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Ub extends jc{static create(a){pc[a]||(pc[a]=new Ub(a));return pc[a]}static resetCache(){pc=
{};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Ub.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:F}){return w(a,g,F,this.name)}formatOffset(a,g){return H(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;
oc[g]||(oc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));g=oc[g];if(g.formatToParts){g=g.formatToParts(a);var F=[];for(let d=0;d<g.length;d++){const {type:db,value:$a}=g[d],zb=ye[db];"era"===db?F[zb]=$a:l(zb)||(F[zb]=parseInt($a,10))}g=F}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,db,$a,zb,ta,Vb,r]=g;g=[$a,d,db,zb,
ta,Vb,r]}let [ca,ja,qa,za,Ka,Qa,cb]=g;"BC"===za&&(ca=-Math.abs(ca)+1);g=x({year:ca,month:ja,day:qa,hour:24===Ka?0:Ka,minute:Qa,second:cb,millisecond:0});a=+a;F=a%1E3;return(g-(a-(0<=F?F:1E3+F)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let hd={},Hc={},Ic={},Jc={},qc=null;class ze{constructor(a,g,F){this.padTo=F.padTo||0;this.floor=F.floor||!1;const {padTo:ca,floor:ja,...qa}=F;if(!g||0<Object.keys(qa).length)g={useGrouping:!1,...F},0<F.padTo&&(g.minimumIntegerDigits=
F.padTo),this.inf=aa(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):J(a,3);return L(a,this.padTo)}}class Ae{constructor(a,g,F){this.opts=F;F=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(F=a.offset/60*-1,F=0<=F?`Etc/GMT+${F}`:`Etc/GMT${F}`,0!==a.offset&&Ub.create(F).valid?this.dt=a:(F="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,F=a.zone.name):(F="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||F;this.dtf=ia(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const F=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...g,value:F}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,g,F){this.opts={style:"long",...F};!g&&M()&&(this.rtf=R(a,F))}format(a,g){return this.rtf?this.rtf.format(a,g):va(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,F,ca=!1){a=
a||yb.defaultLocale;var ja;(ja=a)||(ca?ca="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),ca=qc),ja=ca);return new rb(ja,g||yb.defaultNumberingSystem,F||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:F}={}){return rb.create(a,g,F)}constructor(a,g,F,ca){var ja=a.indexOf("-x-");-1!==ja&&(a=a.substring(0,ja));ja=a.indexOf("-u-");if(-1===ja)var qa=[a];else{try{qa=ia(a).resolvedOptions();var za=
a}catch($a){za=a.substring(0,ja),qa=ia(za).resolvedOptions()}const {numberingSystem:d,calendar:db}=qa;qa=[za,d,db]}const [Ka,Qa,cb]=qa;this.locale=Ka;this.numberingSystem=g||Qa||null;this.outputCalendar=F||cb||null;g=this.locale;F=this.numberingSystem;if((qa=this.outputCalendar)||F)g.includes("-u-")||(g+="-u"),qa&&(g+=`-ca-${qa}`),F&&(g+=`-nu-${F}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
ca;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,F=!0){return E(this,a,F,q,()=>{const ca=g?{month:a,day:"numeric"}:{month:a},ja=g?"format":"standalone";this.monthsCache[ja][a]||(this.monthsCache[ja][a]=
N(qa=>this.extract(qa,ca,"month")));return this.monthsCache[ja][a]})}weekdays(a,g=!1,F=!0){return E(this,a,F,U,()=>{const ca=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ja=g?"format":"standalone";this.weekdaysCache[ja][a]||(this.weekdaysCache[ja][a]=P(qa=>this.extract(qa,ca,"weekday")));return this.weekdaysCache[ja][a]})}meridiems(a=!0){return E(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[bb.utc(2016,11,13,
9),bb.utc(2016,11,13,19)].map(F=>this.extract(F,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return E(this,a,g,ha,()=>{const F={era:a};this.eraCache[a]||(this.eraCache[a]=[bb.utc(-40,1,1),bb.utc(2017,1,1)].map(ca=>this.extract(ca,F,"era")));return this.eraCache[a]})}extract(a,g,F){return(a=this.dtFormatter(a,g).formatToParts().find(ca=>ca.type.toLowerCase()===F))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,
this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return e(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Sc=null;class Fb extends jc{static get utcInstance(){null===Sc&&(Sc=new Fb(0));return Sc}static instance(a){return 0===
a?Fb.utcInstance:new Fb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Fb(C(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${H(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${H(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return H(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends jc{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Tc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Uc=null,Fd=60,Gd;class yb{static get now(){return Tc}static set now(a){Tc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return h(Cd,
nc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Uc}static set defaultOutputCalendar(a){Uc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Ub.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Kc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Lc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),id="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Vc={D:Pa,DD:Xa,DDD:mb,DDDD:lb,t:xb,tt:Kb,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=
null,F="",ca=!1;const ja=[];for(let qa=0;qa<a.length;qa++){const za=a.charAt(qa);"'"===za?(0<F.length&&ja.push({literal:ca||/^\s+$/.test(F),val:F}),g=null,F="",ca=!ca):ca?F+=za:za===g?F+=za:(0<F.length&&ja.push({literal:/^\s+$/.test(F),val:F}),g=F=za)}0<F.length&&ja.push({literal:ca||/^\s+$/.test(F),val:F});return ja}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return L(a,
g);const F={...this.opts};0<g&&(F.padTo=g);return this.loc.numberFormatter(F).format(a)}formatDateTimeFromString(a,g){const F="en"===this.loc.listingMode(),ca=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ja=(d,db)=>this.loc.extract(a,d,db),qa=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",za=(d,db)=>F?q(d)[a.month-1]:ja(db?{month:d}:{month:d,day:"numeric"},"month"),Ka=(d,db)=>F?U(d)[a.weekday-1]:ja(db?{weekday:d}:{weekday:d,month:"long",
day:"numeric"},"weekday"),Qa=d=>{const db=Ab.macroTokenToFormatOpts(d);return db?this.formatWithSystemDefault(a,db):d},cb=d=>F?ha(d)[0>a.year?0:1]:ja({era:d},"era");return Da(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return F?Bd[12>a.hour?0:1]:ja({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ca?ja({day:"numeric"},"day"):this.num(a.day);case "dd":return ca?ja({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ka("short",!0);case "cccc":return Ka("long",!0);case "ccccc":return Ka("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ka("short",!1);case "EEEE":return Ka("long",
!1);case "EEEEE":return Ka("narrow",!1);case "L":return ca?ja({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ca?ja({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return za("short",!0);case "LLLL":return za("long",!0);case "LLLLL":return za("narrow",!0);case "M":return ca?ja({month:"numeric"},"month"):this.num(a.month);case "MM":return ca?ja({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return za("short",!1);case "MMMM":return za("long",
!1);case "MMMMM":return za("narrow",!1);case "y":return ca?ja({year:"numeric"},"year"):this.num(a.year);case "yy":return ca?ja({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ca?ja({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ca?ja({year:"numeric"},"year"):this.num(a.year,6);case "G":return cb("short");case "GG":return cb("long");case "GGGGG":return cb("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Qa(d)}})}formatDurationFromString(a,g){const F=ja=>{switch(ja[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};g=Ab.parseFormat(g);const ca=g.reduce((ja,{literal:qa,val:za})=>qa?ja:ja.concat(za),[]);a=a.shiftTo(...ca.map(F).filter(ja=>ja));return Da(g,(ja=>qa=>{const za=F(qa);return za?this.num(ja.get(za),qa.length):qa})(a))}}class Qb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Wc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Wc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Xc=RegExp(`(?:T${Jd.source})?`),Ce=Ma("weekYear","weekNumber","weekDay"),Kd=Ma("year","ordinal"),Ld=RegExp(`${Wc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Wc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ha(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Xc),Je=Ha(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Xc),Ke=Ha(/(\d{4})-?(\d{3})/,Xc),Le=Ha(Jd),Od=Ia(function(a,g){return[{year:Wa(a,g),month:Wa(a,g+1,1),day:Wa(a,g+2,1)},null,g+3]},Ya,Ua,gb),Me=Ia(Ce,Ya,Ua,gb),Ne=Ia(Kd,Ya,Ua,gb),Oe=Ia(Ya,Ua,gb),Pe=Ia(Ya),Qe=Ha(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ha(Ld),Se=Ia(Ya,Ua,gb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=cc.slice(0).reverse();
class jb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let F=g?Ue:Te;a.matrix&&(F=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=F;this.isLuxonDuration=!0}static fromMillis(a,g){return jb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Ca(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new jb({values:G(a,
jb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(p(a))return jb.fromMillis(a);if(jb.isDuration(a))return a;if("object"===typeof a)return jb.fromObject(a);throw new Ca(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [F]=Ja(a,[De,na]);return F?jb.fromObject(F,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [F]=Ja(a,[Nd,Pe]);return F?
jb.fromObject(F,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Ca("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new ea(a);return new jb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new pa(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=cc.map(F=>{const ca=this.values[F];return l(ca)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:F.slice(0,-1)}).format(ca)}).filter(F=>F);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=J(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let F="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(F+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(F+=".SSS"));g=g.toFormat(F);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);const g=
{};for(const F of cc)if(f(a.values,F)||f(this.values,F))g[F]=a.get(F)+this.get(F);return da(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const F of Object.keys(this.values))g[F]=ba(a(this.values[F],F));return da(this,{values:g},!0)}get(a){return this[jb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...G(a,jb.normalizeUnit)};return da(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:F,matrix:ca}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:ca,conversionAccuracy:F};return da(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();sa(this.matrix,a);return da(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [F,ca]of Object.entries(a))0!==ca&&(g[F]=ca);return da(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>jb.normalizeUnit(qa));const g={},F={},ca=this.toObject();let ja;for(const qa of cc)if(0<=a.indexOf(qa)){ja=qa;let za=0;for(const Qa in F)za+=this.matrix[Qa][qa]*F[Qa],F[Qa]=0;p(ca[qa])&&(za+=ca[qa]);const Ka=Math.trunc(za);g[qa]=Ka;F[qa]=(1E3*za-1E3*Ka)/1E3;for(const Qa in ca)cc.indexOf(Qa)>cc.indexOf(qa)&&ka(this.matrix,ca,Qa,g,qa)}else p(ca[qa])&&(F[qa]=ca[qa]);for(const qa in F)0!==F[qa]&&(g[ja]+=qa===ja?F[qa]:F[qa]/this.matrix[ja][qa]);return da(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return da(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ca of cc){var g=this.values[ca];var F=a.values[ca];g=void 0===g||0===g?void 0===F||0===F:g===F;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Ca("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new S(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Hb(a);g=Hb(g);var F=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==F?new vb({start:a,end:g}):F}static after(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [F,ca]=(a||"").split("/",2);if(F&&ca){let za;try{var ja=bb.fromISO(F,g);za=ja.isValid}catch(Qa){za=!1}let Ka;try{var qa=bb.fromISO(ca,g);Ka=qa.isValid}catch(Qa){Ka=!1}if(za&&Ka)return vb.fromDateTimes(ja,qa);if(za){if(qa=jb.fromISO(ca,g),qa.isValid)return vb.after(ja,qa)}else if(Ka&&(ja=jb.fromISO(F,g),ja.isValid))return vb.before(qa,ja)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),F=this.end.startOf(a);return Math.floor(F.diff(g,a).get(a))+(F.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Hb).filter(qa=>this.contains(qa)).sort();const g=[];let {s:F}=this,ca=0;for(;F<this.e;){var ja=a[ca]||this.e;ja=+ja>+this.e?
this.e:ja;g.push(vb.fromDateTimes(F,ja));F=ja;ca+=1}return g}splitBy(a){a=jb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,F=1;const ca=[];for(;g<this.e;){var ja=this.start.plus(a.mapUnits(qa=>qa*F));ja=+ja>+this.e?this.e:ja;ca.push(vb.fromDateTimes(g,ja));g=ja;F+=1}return ca}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,F]=a.sort((ca,ja)=>ca.s-ja.s).reduce(([ca,ja],qa)=>
ja?ja.overlaps(qa)||ja.abutsStart(qa)?[ca,ja.union(qa)]:[ca.concat([ja]),qa]:[ca,qa],[[],null]);F&&g.push(F);return g}static xor(a){let g=null,F=0;const ca=[];a=a.map(ja=>[{time:ja.s,type:"s"},{time:ja.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ja,qa)=>ja.time-qa.time);for(const ja of a)F+="s"===ja.type?1:-1,1===F?g=ja.time:(g&&+g!==+ja.time&&ca.push(vb.fromDateTimes(g,ja.time)),g=null);return vb.merge(ca)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Pa,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):jb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const g=bb.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Ub.isValidZone(a)}static normalizeZone(a){return h(a,yb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:F=null,locObj:ca=null,outputCalendar:ja="gregory"}={}){return(ca||rb.create(g,F,ja)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:F=null,locObj:ca=null,outputCalendar:ja="gregory"}={}){return(ca||rb.create(g,F,ja)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:F=null,locObj:ca=null}={}){return(ca||rb.create(g,F,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:F=null,locObj:ca=null}=
{}){return(ca||rb.create(g,F,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:M()}}}const Mc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},jd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Mc.hanidec.replace(/[\[|\]]/g,"").split(""),kd=`[ ${String.fromCharCode(160)}]`,Nc=new RegExp(kd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Oc=null;const Qc=[0,31,59,90,120,151,181,212,243,273,304,334],Pc=[0,31,60,91,121,152,182,213,244,274,305,335],md={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ld="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class bb{constructor(a){const g=a.zone||yb.defaultZone;let F=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(g.isValid?null:Ib(g));this.ts=l(a.ts)?yb.now():a.ts;let ca=null;var ja=null;F||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[ca,ja]=[a.old.c,a.old.o]:(ja=g.offset(this.ts),ca=hc(this.ts,ja),ca=(F=Number.isNaN(ca.year)?new Qb("invalid input"):null)?null:ca,ja=F?null:ja));this._zone=g;this.loc=a.loc||rb.create();this.invalid=F;this.weekData=null;this.c=ca;this.o=ja;this.isLuxonDateTime=
!0}static now(){return new bb({})}static local(){const [a,g]=Gb(arguments),[F,ca,ja,qa,za,Ka,Qa]=g;return Sb({year:F,month:ca,day:ja,hour:qa,minute:za,second:Ka,millisecond:Qa},a)}static utc(){const [a,g]=Gb(arguments),[F,ca,ja,qa,za,Ka,Qa]=g;a.zone=Fb.utcInstance;return Sb({year:F,month:ca,day:ja,hour:qa,minute:za,second:Ka,millisecond:Qa},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return bb.invalid("invalid input");const F=
h(g.zone,yb.defaultZone);return F.isValid?new bb({ts:a,zone:F,loc:rb.fromObject(g)}):bb.invalid(Ib(F))}static fromMillis(a,g={}){if(p(a))return-864E13>a||864E13<a?bb.invalid("Timestamp out of range"):new bb({ts:a,zone:h(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Ca(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(p(a))return new bb({ts:1E3*a,zone:h(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Ca("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var F=h(g.zone,yb.defaultZone);if(!F.isValid)return bb.invalid(Ib(F));var ca=yb.now();const ja=l(g.specificOffset)?F.offset(ca):g.specificOffset,qa=G(a,Eb);var za=!l(qa.ordinal),Ka=!l(qa.year),Qa=!l(qa.month)||!l(qa.day);Ka=Ka||Qa;var cb=qa.weekYear||qa.weekNumber;g=rb.fromObject(g);if((Ka||za)&&cb)throw new V("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Qa&&za)throw new V("Can't mix ordinal dates with month/day");Qa=cb||qa.weekday&&
!Ka;let d=hc(ca,ja);Qa?(ca=Xe,cb=Ve,d=xa(d)):za?(ca=Ye,cb=We,d=sb(d)):(ca=ld,cb=md);let db=!1;for(var $a of ca)l(qa[$a])?qa[$a]=db?cb[$a]:d[$a]:db=!0;Qa?($a=Q(qa.weekYear),ca=u(qa.weekNumber,1,B(qa.weekYear)),cb=u(qa.weekday,1,7),$a=$a?ca?cb?!1:La("weekday",qa.weekday):La("week",qa.week):La("weekYear",qa.weekYear)):za?($a=Q(qa.year),ca=u(qa.ordinal,1,n(qa.year)?366:365),$a=$a?ca?!1:La("ordinal",qa.ordinal):La("year",qa.year)):$a=b(qa);if($a=$a||hb(qa))return bb.invalid($a);za=Qa?wb(qa):za?ib(qa):
qa;const [zb,ta]=Tb(za,ja,F);F=new bb({ts:zb,zone:F,o:ta,loc:g});return qa.weekday&&Ka&&a.weekday!==F.weekday?bb.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${F.toISO()}`):F}static fromISO(a,g={}){const [F,ca]=Ja(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Jb(F,ca,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [F,ca]=Ja(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,Aa]);return Jb(F,ca,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [F,
ca]=Ja(a,[Fe,c],[Ge,c],[He,k]);return Jb(F,ca,g,"HTTP",g)}static fromFormat(a,g,F={}){if(l(a)||l(g))throw new Ca("fromFormat requires an input string and a format");const {locale:ca=null,numberingSystem:ja=null}=F,qa=rb.fromOpts({locale:ca,numberingSystem:ja,defaultToEN:!0}),{result:za,zone:Ka,specificOffset:Qa,invalidReason:cb}=Ta(qa,a,g),[d,db,$a,zb]=[za,Ka,Qa,cb];return zb?bb.invalid(zb):Jb(d,db,F,`format ${g}`,a,$a)}static fromString(a,g,F={}){return bb.fromFormat(a,g,F)}static fromSQL(a,g={}){const [F,
ca]=Ja(a,[Qe,Od],[Re,Se]);return Jb(F,ca,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Ca("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new bc(a);return new bb({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Sa(a,rb.fromObject(g)))?a.map(F=>F?F.val:null).join(""):null}static expandFormat(a,g={}){return Oa(Ab.parseFormat(a),rb.fromObject(g)).map(F=>F.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rb(this).weekYear:NaN}get weekNumber(){return this.isValid?Rb(this).weekNumber:NaN}get weekday(){return this.isValid?Rb(this).weekday:
NaN}get ordinal(){return this.isValid?sb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return n(this.year)}get daysInMonth(){return A(this.year,this.month)}get daysInYear(){return this.isValid?
n(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?B(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:F,calendar:ca}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:F,outputCalendar:ca}}toUTC(a=0,g={}){return this.setZone(Fb.instance(a),g)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:F=!1}={}){a=h(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ca=
this.ts;if(g||F)g=a.offset(this.ts),F=this.toObject(),[ca]=Tb(F,g,a);return nb(this,{ts:ca,zone:a})}return bb.invalid(Ib(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:F}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:F});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=G(a,Eb);var g=!l(a.weekYear)||!l(a.weekNumber)||!l(a.weekday);const F=!l(a.ordinal),ca=!l(a.year),ja=!l(a.month)||!l(a.day),qa=a.weekYear||
a.weekNumber;if((ca||ja||F)&&qa)throw new V("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ja&&F)throw new V("Can't mix ordinal dates with month/day");g?g=wb({...xa(this.c),...a}):l(a.ordinal)?(g={...this.toObject(),...a},l(a.day)&&(g.day=Math.min(A(g.year,g.month),g.day))):g=ib({...sb(this.c),...a});const [za,Ka]=Tb(g,this.o,this.zone);return nb(this,{ts:za,o:Ka})}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return nb(this,Db(this,a))}minus(a){if(!this.isValid)return this;
a=jb.fromDurationLike(a).negate();return nb(this,Db(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=jb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Pa,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:F=!1,includeOffset:ca=!0,extendedZone:ja=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
Yb(this,a);return qa=qa+"T"+ic(this,a,g,F,ca,ja)}toISODate({format:a="extended"}={}){return this.isValid?Yb(this,"extended"===a):null}toISOWeekDate(){return ac(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:F=!0,includePrefix:ca=!1,extendedZone:ja=!1,format:qa="extended"}={}){return this.isValid?(ca?"T":"")+ic(this,"extended"===qa,g,a,F,ja):null}toRFC2822(){return ac(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ac(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Yb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:F=!0}={}){let ca="HH:mm:ss.SSS";if(g||a)F&&(ca+=" "),g?ca+="z":a&&(ca+="ZZ");return ac(this,ca,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",F={}){if(!this.isValid||!a.isValid)return jb.invalid("created by diffing an invalid DateTime");F={locale:this.locale,numberingSystem:this.numberingSystem,...F};
const ca=(Array.isArray(g)?g:[g]).map(jb.normalizeUnit);g=a.valueOf()>this.valueOf();a=Y(g?this:a,g?a:this,ca,F);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(bb.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const F=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=F&&F<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||bb.fromObject({},{zone:this.zone}),F=a.padding?this<g?-a.padding:a.padding:0;let ca="years months days hours minutes seconds".split(" "),ja=a.unit;Array.isArray(a.unit)&&(ca=a.unit,ja=void 0);return kb(g,this.plus(F),{...a,numeric:"always",units:ca,unit:ja})}toRelativeCalendar(a={}){return this.isValid?kb(a.base||bb.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(bb.isDateTime))throw new Ca("min requires all arguments be DateTimes");
return T(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(bb.isDateTime))throw new Ca("max requires all arguments be DateTimes");return T(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,F={}){const {locale:ca=null,numberingSystem:ja=null}=F;F=rb.fromOpts({locale:ca,numberingSystem:ja,defaultToEN:!0});return Ta(F,a,g)}static fromStringExplain(a,g,F={}){return bb.fromFormatExplain(a,g,F)}static get DATE_SHORT(){return Pa}static get DATE_MED(){return Xa}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return lb}static get TIME_SIMPLE(){return xb}static get TIME_WITH_SECONDS(){return Kb}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
m.DateTime=bb;m.Duration=jb;m.FixedOffsetZone=Fb;m.IANAZone=Ub;m.Info=lc;m.Interval=vb;m.SystemZone=nc;m.Zone=jc})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(m,e,ia){var aa={};(function(N){(function(P,E){N.exports&&(N.exports=E())})(ia.commonjsGlobal,function(){function P(h,l,p,Q){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,P.prototype);h.expected=l;h.found=p;h.location=Q;h.name=
"SyntaxError";return h}function E(h,l,p){p=p||" ";if(h.length>l)return h;l-=h.length;p+=p.repeat(l);return h+p.slice(0,l)}(function(h,l){function p(){this.constructor=h}p.prototype=l.prototype;h.prototype=new p})(P,Error);P.prototype.format=function(h){var l="Error: "+this.message;if(this.location){var p=null,Q;for(Q=0;Q<h.length;Q++)if(h[Q].source===this.location.source){p=h[Q].text.split(/\r\n|\n|\r/g);break}h=this.location.start;Q=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(h):h;var M=this.location.source+":"+Q.line+":"+Q.column;if(p){var T=this.location.end,D=E("",Q.line.toString().length," ");p=p[h.line-1];T=(h.line===T.line?T.column:p.length+1)-h.column||1;l+="\n --\x3e "+M+"\n"+D+" |\n"+Q.line+" | "+p+"\n"+D+" | "+E("",h.column-1," ")+E("",T,"^")}else l+="\n at "+M}return l};P.buildMessage=function(h,l){function p(f){return f.charCodeAt(0).toString(16).toUpperCase()}function Q(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+p(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+p(u)})}function M(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+p(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+p(u)})}function T(f){return D[f.type](f)}
var D={literal:function(f){return'"'+Q(f.text)+'"'},class:function(f){var u=f.parts.map(function(L){return Array.isArray(L)?M(L[0])+"-"+M(L[1]):M(L)});return"["+(f.inverted?"^":"")+u.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};return"Expected "+function(f){f=f.map(T);var u,L;f.sort();if(0<f.length){for(L=u=1;u<f.length;u++)f[u-1]!==f[u]&&(f[L]=f[u],L++);f.length=L}switch(f.length){case 1:return f[0];case 2:return f[0]+
" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}(h)+" but "+(l?'"'+Q(l)+'"':"end of input")+" found."};return{SyntaxError:P,parse:function(h,l){function p(r,y){return{type:"literal",text:r,ignoreCase:y}}function Q(r,y,X){return{type:"class",parts:r,inverted:y,ignoreCase:X}}function M(r){var y=db[r],X;if(!y){for(X=r-1;!db[X];)X--;y=db[X];for(y={line:y.line,column:y.column};X<r;)10===h.charCodeAt(X)?(y.line++,y.column=1):y.column++,X++;db[r]=y}return y}function T(r,y,X){var ya=
M(r),Na=M(y);r={source:hb,start:{offset:r,line:ya.line,column:ya.column},end:{offset:y,line:Na.line,column:Na.column}};X&&hb&&"function"===typeof hb.offset&&(r.start=hb.offset(r.start),r.end=hb.offset(r.end));return r}function D(r){d<$a||(d>$a&&($a=d,zb=[]),zb.push(r))}function f(){var r=d;xa();var y=L();y!==b?(xa(),r=y):(d=r,r=b);return r}function u(){var r=d;var y=L();if(y!==b){r=[];var X=d;var ya=xa();var Na=La();if(Na!==b){var eb=xa();var fb=L();fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)}else d=X,X=
b;for(;X!==b;)r.push(X),X=d,ya=xa(),Na=La(),Na!==b?(eb=xa(),fb=L(),fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)):(d=X,X=b);X={type:"expression-list"};y=[y];for(ya=0;ya<r.length;ya++)y.push(r[ya][3]);X.value=y;r=X}else d=r,r=b;return r}function L(){var r=d;var y=Z();if(y!==b){r=[];var X=d;var ya=xa();var Na=sa();if(Na!==b){var eb=xa();var fb=Z();fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)}else d=X,X=b;for(;X!==b;)r.push(X),X=d,ya=xa(),Na=sa(),Na!==b?(eb=xa(),fb=Z(),fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)):(d=X,X=b);r=
ib(y,r)}else d=r,r=b;return r}function Z(){var r=d;var y=I();if(y!==b){r=[];var X=d;var ya=xa();var Na=ka();if(Na!==b){var eb=xa();var fb=I();fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)}else d=X,X=b;for(;X!==b;)r.push(X),X=d,ya=xa(),Na=ka(),Na!==b?(eb=xa(),fb=I(),fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)):(d=X,X=b);r=ib(y,r)}else d=r,r=b;return r}function I(){var r=d;var y=da();if(y===b){y=d;if(33===h.charCodeAt(d)){var X=nb;d++}else X=b,0===ta&&D(ne);if(X!==b){var ya=d;ta++;if(61===h.charCodeAt(d)){var Na=la;
d++}else Na=b,0===ta&&D(Lc);ta--;Na===b?ya=void 0:(d=ya,ya=b);ya!==b?y=X=[X,ya]:(d=y,y=b)}else d=y,y=b}y!==b?(X=xa(),ya=I(),ya!==b?r={type:"unary-expression",operator:"NOT",expr:ya}:(d=r,r=b)):(d=r,r=b);if(r===b){y=d;r=A();if(r!==b){xa();y=[];X=d;ya=xa();Na=O();if(Na!==b){var eb=xa();var fb=A();fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)}else d=X,X=b;if(X!==b)for(;X!==b;)y.push(X),X=d,ya=xa(),Na=O(),Na!==b?(eb=xa(),fb=A(),fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)):(d=X,X=b);else y=b;y!==b&&(y={type:"arithmetic",
tail:y});y===b&&(y=d,X=n(),X!==b?(xa(),ya=Va(),ya!==b?(xa(),ya=u(),ya!==b?(xa(),Na=ab(),Na!==b?y={op:X,right:ya}:(d=y,y=b)):(d=y,y=b)):(d=y,y=b)):(d=y,y=b),y===b&&(y=d,X=n(),X!==b?(xa(),ya=Va(),ya!==b?(xa(),ya=ab(),ya!==b?y={op:X,right:{type:"expression-list",value:[]}}:(d=y,y=b)):(d=y,y=b)):(d=y,y=b),y===b&&(y=d,X=n(),X!==b?(xa(),ya=t(),ya!==b?y={op:X,right:ya}:(d=y,y=b)):(d=y,y=b))),y===b&&(y=d,Na=da(),Na!==b?(xa(),X=v(),X!==b?(xa(),ya=A(),ya!==b?(xa(),eb=ka(),eb!==b?(xa(),Na=A(),Na!==b?y={op:"NOT"+
X,right:{type:"expression-list",value:[ya,Na]}}:(d=y,y=b)):(d=y,y=b)):(d=y,y=b)):(d=y,y=b)):(d=y,y=b),y===b&&(y=d,Na=v(),Na!==b?(xa(),X=A(),X!==b?(xa(),ya=ka(),ya!==b?(xa(),eb=A(),eb!==b?y={op:Na,right:{type:"expression-list",value:[X,eb]}}:(d=y,y=b)):(d=y,y=b)):(d=y,y=b)):(d=y,y=b)),y===b&&(y=d,X=c(),X!==b?(xa(),ya=da(),ya!==b?(xa(),ya=A(),ya!==b?y={op:X+"NOT",right:ya}:(d=y,y=b)):(d=y,y=b)):(d=y,y=b),y===b&&(y=d,X=c(),X!==b?(xa(),ya=A(),ya!==b?y={op:X,right:ya}:(d=y,y=b)):(d=y,y=b)),y===b&&(y=d,
X=J(),X!==b?(xa(),ya=Ha(),ya!==b?(xa(),Na=d,h.substr(d,6).toLowerCase()===ob?(eb=h.substr(d,6),d+=6):(eb=b,0===ta&&D(Od)),eb!==b?(eb=d,ta++,fb=G(),ta--,fb===b?eb=void 0:(d=eb,eb=b),eb!==b?Na="ESCAPE":(d=Na,Na=b)):(d=Na,Na=b),Na!==b?(xa(),Na=Ia(),Na!==b?y={op:X,right:ya,escape:Na.value}:(d=y,y=b)):(d=y,y=b)):(d=y,y=b)):(d=y,y=b),y===b&&(y=d,X=J(),X!==b?(xa(),ya=Ha(),ya!==b?y={op:X,right:ya,escape:""}:(d=y,y=b)):(d=y,y=b))))));y===b&&(y=null);""==y||void 0==y||null==y?y=r:(X=null,y=X="arithmetic"==
y.type?ib(r,y.tail):sb(y.op,r,y.right,y.escape))}else d=y,y=b;r=y}return r}function O(){if(h.substr(d,2)===hc){var r=hc;d+=2}else r=b,0===ta&&D(id);r===b&&(62===h.charCodeAt(d)?(r=Tb,d++):(r=b,0===ta&&D(pe)),r===b&&(h.substr(d,2)===Db?(r=Db,d+=2):(r=b,0===ta&&D(Bd)),r===b&&(h.substr(d,2)===Jb?(r=Jb,d+=2):(r=b,0===ta&&D(se)),r===b&&(60===h.charCodeAt(d)?(r=ac,d++):(r=b,0===ta&&D(re)),r===b&&(61===h.charCodeAt(d)?(r=la,d++):(r=b,0===ta&&D(Lc)),r===b&&(h.substr(d,2)===Yb?(r=Yb,d+=2):(r=b,0===ta&&D(qe))))))));
return r}function J(){var r=r=d;var y=da();if(y!==b){var X=xa();var ya=k();ya!==b?r=y=[y,X,ya]:(d=r,r=b)}else d=r,r=b;r!==b&&(r=r[0]+" "+r[2]);r===b&&(r=k());return r}function n(){var r=r=d;var y=da();if(y!==b){var X=xa();var ya=Aa();ya!==b?r=y=[y,X,ya]:(d=r,r=b)}else d=r,r=b;r!==b&&(r=r[0]+" "+r[2]);r===b&&(r=Aa());return r}function A(){var r=d;var y=B();if(y!==b){r=[];var X=d;var ya=xa();var Na=x();if(Na!==b){var eb=xa();var fb=B();fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)}else d=X,X=b;for(;X!==b;)r.push(X),
X=d,ya=xa(),Na=x(),Na!==b?(eb=xa(),fb=B(),fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)):(d=X,X=b);r=ib(y,r)}else d=r,r=b;return r}function x(){if(43===h.charCodeAt(d)){var r=ic;d++}else r=b,0===ta&&D(Vc);r===b&&(45===h.charCodeAt(d)?(r=Eb,d++):(r=b,0===ta&&D(Ab)),r===b&&(h.substr(d,2)===Sb?(r=Sb,d+=2):(r=b,0===ta&&D(Qb))));return r}function B(){var r=d;var y=w();if(y!==b){r=[];var X=d;var ya=xa();var Na=z();if(Na!==b){var eb=xa();var fb=w();fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)}else d=X,X=b;for(;X!==b;)r.push(X),
X=d,ya=xa(),Na=z(),Na!==b?(eb=xa(),fb=w(),fb!==b?X=ya=[ya,Na,eb,fb]:(d=X,X=b)):(d=X,X=b);r=ib(y,r)}else d=r,r=b;return r}function z(){if(42===h.charCodeAt(d)){var r=kb;d++}else r=b,0===ta&&D(Hd);r===b&&(47===h.charCodeAt(d)?(r=Gb,d++):(r=b,0===ta&&D(Id)));return r}function w(){var r=Ia();if(r===b){var y=d;var X=d;var ya=Ya();if(ya!==b){var Na=Ua();if(Na!==b){var eb=gb();eb!==b?X=parseFloat(ya+Na+eb):(d=X,X=b)}else d=X,X=b}else d=X,X=b;X===b&&(X=d,ya=Ya(),ya!==b?(Na=Ua(),Na!==b?X=parseFloat(ya+Na):
(d=X,X=b)):(d=X,X=b),X===b&&(X=d,ya=Ya(),ya!==b?(Na=gb(),Na!==b?X=parseFloat(ya+Na):(d=X,X=b)):(d=X,X=b),X===b&&(X=d,ya=Ya(),ya!==b&&(ya=parseFloat(ya)),X=ya)));var fb=X;if(fb!==b){var Qd=d;ta++;var Lf=ba();ta--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?y={type:"number",value:fb}:(d=y,y=b)}else d=y,y=b;r=y;if(r===b){var Yc=d;var rc=d;if(h.substr(d,4).toLowerCase()===pa){var Rd=h.substr(d,4);d+=4}else Rd=b,0===ta&&D(He);if(Rd!==b){var Zc=d;ta++;var Mf=G();ta--;Mf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Rd=[Rd,
Zc]:(d=rc,rc=b)}else d=rc,rc=b;var mc=rc;mc!==b&&(mc={type:"boolean",value:!0});Yc=mc;if(Yc===b){Yc=d;var sc=d;if(h.substr(d,5).toLowerCase()===Ca){var Sd=h.substr(d,5);d+=5}else Sd=b,0===ta&&D(Ie);if(Sd!==b){var $c=d;ta++;var Nf=G();ta--;Nf===b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Sd=[Sd,$c]:(d=sc,sc=b)}else d=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Yc=mc}r=Yc;if(r===b){var tc=d;if(h.substr(d,4).toLowerCase()===V){var Td=h.substr(d,4);d+=4}else Td=b,0===ta&&D(Ge);if(Td!==b){var ad=d;ta++;
var Of=G();ta--;Of===b?ad=void 0:(d=ad,ad=b);ad!==b?tc=Td=[Td,ad]:(d=tc,tc=b)}else d=tc,tc=b;var Ze=tc;Ze!==b&&(Ze={type:"null",value:null});r=Ze;if(r===b){var uc=d;if(fa()!==b){xa();var lf=Ha();lf!==b?uc={type:"date",value:lf.value}:(d=uc,uc=b)}else d=uc,uc=b;r=uc;if(r===b){var vc=d;if(W()!==b){xa();var mf=Ha();mf!==b?vc={type:"timestamp",value:mf.value}:(d=vc,vc=b)}else d=vc,vc=b;r=vc;if(r===b){var Bb=d;var $e=ma();if($e!==b){xa();if(45===h.charCodeAt(d)){var dc=Eb;d++}else dc=b,0===ta&&D(Ab);dc===
b&&(43===h.charCodeAt(d)?(dc=ic,d++):(dc=b,0===ta&&D(Vc)));if(dc!==b){xa();var bd=Ha();if(bd!==b){xa();var nf=U();nf!==b?Bb={type:"interval",value:bd,qualifier:nf,op:dc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=ma(),$e!==b?(xa(),dc=Ha(),dc!==b?(xa(),bd=U(),bd!==b?Bb={type:"interval",value:dc,qualifier:bd,op:""}:(d=Bb,Bb=b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));r=Bb}}}}}}var pb=r;if(pb===b){var Mb=d;var wc=d;if(h.substr(d,7).toLowerCase()===qd){var of=h.substr(d,7);d+=7}else of=
b,0===ta&&D(Pd);if(of!==b){var Ud=d;ta++;var Pf=G();ta--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?wc="EXTRACT":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){xa();var Qf=Va();if(Qf!==b){xa();var Wb=oa();Wb===b&&(Wb=wa(),Wb===b&&(Wb=ua(),Wb===b&&(Wb=Ea(),Wb===b&&(Wb=Ba(),Wb===b&&(Wb=Fa())))));var pf=Wb;if(pf!==b){xa();var Rf=K();if(Rf!==b){xa();var qf=L();if(qf!==b){xa();var Sf=ab();Sf!==b?Mb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Mb,Mb=b)}else d=Mb,
Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var xc=d;if(h.substr(d,9).toLowerCase()===pd){var rf=h.substr(d,9);d+=9}else rf=b,0===ta&&D(Se);if(rf!==b){var Vd=d;ta++;var Tf=G();ta--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?xc="SUBSTRING":(d=xc,xc=b)}else d=xc,xc=b;if(xc!==b){xa();var Uf=Va();if(Uf!==b){xa();var af=L();if(af!==b){xa();var Vf=K();if(Vf!==b){xa();var bf=L();if(bf!==b){xa();var ec=d;var yc=d;if(h.substr(d,3).toLowerCase()===od){var sf=h.substr(d,
3);d+=3}else sf=b,0===ta&&D(Re);if(sf!==b){var Wd=d;ta++;var Wf=G();ta--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?yc="FOR":(d=yc,yc=b)}else d=yc,yc=b;var cd=yc;if(cd!==b){var Xf=xa();var tf=L();if(tf!==b){var Yf=xa();ec=cd=[cd,Xf,tf,Yf]}else d=ec,ec=b}else d=ec,ec=b;ec===b&&(ec=null);cd=ab();cd!==b?Nb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[af,bf,ec[2]]:[af,bf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var tb=
d;var cf=Y();if(cf!==b){xa();var df=Va();if(df!==b){xa();var fc=q();fc===b&&(fc=null);xa();var dd=L();if(dd!==b){xa();var ef=K();if(ef!==b){xa();var uf=L();if(uf!==b){xa();var Zf=ab();Zf!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd,uf]}}:(d=tb,tb=b)}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b;tb===b&&(tb=d,cf=Y(),cf!==b?(xa(),df=Va(),df!==b?(xa(),fc=q(),fc===b&&(fc=null),xa(),dd=L(),dd!==b?(xa(),
ef=ab(),ef!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd]}}:(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b));pb=tb;if(pb===b){var Ob=d;var zc=d;if(h.substr(d,8).toLowerCase()===sd){var vf=h.substr(d,8);d+=8}else vf=b,0===ta&&D(Ue);if(vf!==b){var Xd=d;ta++;var $f=G();ta--;$f===b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?zc="POSITION":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){xa();var ag=Va();if(ag!==b){xa();var wf=L();if(wf!==b){xa();var bg=Aa();
if(bg!==b){xa();var xf=L();if(xf!==b){xa();var cg=ab();cg!==b?Ob={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Ob,Ob=b)}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b;pb=Ob;if(pb===b){var Pb=d;var Ac=d;if(h.substr(d,4).toLowerCase()===xd){var yf=h.substr(d,4);d+=4}else yf=b,0===ta&&D(Mc);if(yf!==b){var Yd=d;ta++;var dg=G();ta--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?Ac="CAST":(d=Ac,Ac=b)}else d=Ac,Ac=b;if(Ac!==b){xa();var eg=Va();if(eg!==
b){xa();var zf=L();if(zf!==b){xa();var Bc=d;if(h.substr(d,2).toLowerCase()===yd){var Af=h.substr(d,2);d+=2}else Af=b,0===ta&&D(jd);if(Af!==b){var Zd=d;ta++;var fg=G();ta--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Bc="AS":(d=Bc,Bc=b)}else d=Bc,Bc=b;var gg=Bc;if(gg!==b){xa();var qb=d;var Cc=d;if(h.substr(d,7).toLowerCase()===zd){var Bf=h.substr(d,7);d+=7}else Bf=b,0===ta&&D(ve);if(Bf!==b){var $d=d;ta++;var hg=G();ta--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Cc="INTEGER":(d=Cc,Cc=b)}else d=Cc,Cc=b;var ub=Cc;
ub!==b&&(ub={type:"data-type",value:{type:"integer"}});qb=ub;if(qb===b){qb=d;var Dc=d;if(h.substr(d,8).toLowerCase()===Ad){var Cf=h.substr(d,8);d+=8}else Cf=b,0===ta&&D(kd);if(Cf!==b){var ae=d;ta++;var ig=G();ta--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Dc="SMALLINT":(d=Dc,Dc=b)}else d=Dc,Dc=b;ub=Dc;ub!==b&&(ub={type:"data-type",value:{type:"smallint"}});qb=ub;if(qb===b){qb=d;var Ec=d;if(h.substr(d,5).toLowerCase()===jc){var Df=h.substr(d,5);d+=5}else Df=b,0===ta&&D(Nc);if(Df!==b){var be=d;ta++;var jg=
G();ta--;jg===b?be=void 0:(d=be,be=b);be!==b?Ec="FLOAT":(d=Ec,Ec=b)}else d=Ec,Ec=b;ub=Ec;ub!==b&&(ub={type:"data-type",value:{type:"float"}});qb=ub;if(qb===b){qb=d;var Fc=d;if(h.substr(d,4).toLowerCase()===Rc){var Ef=h.substr(d,4);d+=4}else Ef=b,0===ta&&D(we);if(Ef!==b){var ce=d;ta++;var kg=G();ta--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Fc="REAL":(d=Fc,Fc=b)}else d=Fc,Fc=b;ub=Fc;ub!==b&&(ub={type:"data-type",value:{type:"real"}});qb=ub;if(qb===b&&(qb=d,ub=fa(),ub!==b&&(ub={type:"data-type",value:{type:"date"}}),
qb=ub,qb===b&&(qb=d,ub=W(),ub!==b&&(ub={type:"data-type",value:{type:"timestamp"}}),qb=ub,qb===b))){qb=d;var Gc=d;if(h.substr(d,7).toLowerCase()===nc){var Ff=h.substr(d,7);d+=7}else Ff=b,0===ta&&D(Oc);if(Ff!==b){var de=d;ta++;var lg=G();ta--;lg===b?de=void 0:(d=de,de=b);de!==b?Gc="VARCHAR":(d=Gc,Gc=b)}else d=Gc,Gc=b;ub=Gc;if(ub!==b){xa();var mg=Va();if(mg!==b){xa();var Gf=na();if(Gf!==b){xa();var ng=ab();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=
b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){xa();var og=ab();og!==b?Pb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Pb,Pb=b)}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b;pb=Pb;if(pb===b){var kc=d;var ee;var Xb=d;Xb=ee=C();if(Xb===b)if(Xb=d,96===h.charCodeAt(d)?(ee=Tc,d++):(ee=b,0===ta&&D(Qa)),ee!==b){var fe=[];if(Kc.test(h.charAt(d))){var gc=h.charAt(d);d++}else gc=b,0===ta&&D(cb);if(gc!==b)for(;gc!==b;)fe.push(gc),Kc.test(h.charAt(d))?
(gc=h.charAt(d),d++):(gc=b,0===ta&&D(cb));else fe=b;fe!==b?(96===h.charCodeAt(d)?(gc=Tc,d++):(gc=b,0===ta&&D(Qa)),gc!==b?Xb=fe.join(""):(d=Xb,Xb=b)):(d=Xb,Xb=b)}else d=Xb,Xb=b;var If=Xb;if(If!==b){xa();var pg=Va();if(pg!==b){xa();var ge=u();ge===b&&(ge=null);xa();var qg=ab();qg!==b?kc={type:"function",name:If,args:ge?ge:{type:"expression-list",value:[]}}:(d=kc,kc=b)}else d=kc,kc=b}else d=kc,kc=b;pb=kc;if(pb===b){var Zb;var Cb=d;var ff=Ra();if(ff!==b){xa();var ed=L();if(ed!==b){xa();var fd=[];for(Zb=
Ma();Zb!==b;)fd.push(Zb),Zb=Ma();Zb=xa();var he=Oa();he!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Ra(),ff!==b)if(xa(),ed=L(),ed!==b){xa();fd=[];for(Zb=Ma();Zb!==b;)fd.push(Zb),Zb=Ma();Zb=xa();he=Wa();if(he!==b){xa();var rg=Oa();rg!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var $b;
var Lb=d;var hf=Ra();if(hf!==b){xa();var gd=[];for($b=Ja();$b!==b;)gd.push($b),$b=Ja();$b=xa();var ie=Oa();ie!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:null}:(d=Lb,Lb=b)}else d=Lb,Lb=b;if(Lb===b)if(Lb=d,hf=Ra(),hf!==b){xa();gd=[];for($b=Ja();$b!==b;)gd.push($b),$b=Ja();$b=xa();ie=Wa();if(ie!==b){xa();var sg=Oa();sg!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:ie.value}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b;gf=Lb}pb=gf;if(pb===b){var je;var ke=d;var Jf=
ba();if(Jf!==b){var Kf=[];for(je=H();je!==b;)Kf.push(je),je=H();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=t(),pb===b)){pb=d;var tg=Va();if(tg!==b){xa();var kf=L();if(kf!==b){xa();var ug=ab();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}
function C(){var r;var y=d;var X=ba();if(X!==b){y=[];for(r=G();r!==b;)y.push(r),r=G();y=X+y.join("")}else d=y,y=b;return y}function ba(){if(Cd.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&D(Wc);return r}function G(){if(Dd.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&D(Jd);return r}function H(){if(Ed.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&D(Xc);return r}function t(){var r=d;if(64===h.charCodeAt(d)){var y=Hb;d++}else y=b,0===ta&&D(Ce);if(y!==b){var X=C();
X!==b?r=y=[y,X]:(d=r,r=b)}else d=r,r=b;r!==b&&(r={type:"parameter",value:r[1]});return r}function q(){var r=d;if(h.substr(d,7).toLowerCase()===vd){var y=h.substr(d,7);d+=7}else y=b,0===ta&&D(jb);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="LEADING":(d=r,r=b)}else d=r,r=b;r===b&&(r=d,h.substr(d,8).toLowerCase()===wd?(y=h.substr(d,8),d+=8):(y=b,0===ta&&D(vb)),y!==b?(y=d,ta++,X=G(),ta--,X===b?y=void 0:(d=y,y=b),y!==b?r="TRAILING":(d=r,r=b)):(d=r,r=b),r===b&&(r=d,h.substr(d,4).toLowerCase()===
xe?(y=h.substr(d,4),d+=4):(y=b,0===ta&&D(lc)),y!==b?(y=d,ta++,X=G(),ta--,X===b?y=void 0:(d=y,y=b),y!==b?r="BOTH":(d=r,r=b)):(d=r,r=b)));return r}function U(){var r=d;var y=d;var X=ha();if(X!==b){xa();var ya=Va();if(ya!==b)if(xa(),ya=Da(),ya!==b){xa();var Na=ab();Na!==b?y={type:"interval-period",period:X.value,precision:ya,secondary:null}:(d=y,y=b)}else d=y,y=b;else d=y,y=b}else d=y,y=b;y===b&&(y=d,X=ha(),X!==b&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),y=X);if(y!==
b)if(xa(),X=d,h.substr(d,2).toLowerCase()===oc?(ya=h.substr(d,2),d+=2):(ya=b,0===ta&&D(Qc)),ya!==b?(ya=d,ta++,Na=G(),ta--,Na===b?ya=void 0:(d=ya,ya=b),ya!==b?X="TO":(d=X,X=b)):(d=X,X=b),X!==b){xa();X=d;ya=ha();ya!==b&&(ya={type:"interval-period",period:ya.value,precision:null,secondary:null});X=ya;if(X===b){X=d;ya=Fa();if(ya!==b)if(xa(),ya=Va(),ya!==b)if(xa(),ya=Da(),ya!==b)if(xa(),Na=La(),Na!==b)if(xa(),Na=va(),Na!==b){xa();var eb=ab();eb!==b?X={type:"interval-period",period:"second",precision:ya,
secondary:Na}:(d=X,X=b)}else d=X,X=b;else d=X,X=b;else d=X,X=b;else d=X,X=b;else d=X,X=b;X===b&&(X=d,ya=Fa(),ya!==b?(xa(),ya=Va(),ya!==b?(xa(),ya=Da(),ya!==b?(xa(),Na=ab(),Na!==b?X={type:"interval-period",period:"second",precision:ya,secondary:null}:(d=X,X=b)):(d=X,X=b)):(d=X,X=b)):(d=X,X=b),X===b&&(X=d,ya=Fa(),ya!==b&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),X=ya))}X!==b?r={type:"interval-qualifier",start:y,end:X}:(d=r,r=b)}else d=r,r=b;else d=r,r=b;r===b&&(r=d,
X=ha(),X!==b?(xa(),y=Va(),y!==b?(xa(),y=va(),y!==b?(xa(),ya=ab(),ya!==b?r={type:"interval-period",period:X.value,precision:y,secondary:null}:(d=r,r=b)):(d=r,r=b)):(d=r,r=b)):(d=r,r=b),r===b&&(r=d,X=ha(),X!==b&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),r=X,r===b&&(r=d,X=Fa(),X!==b?(xa(),y=Va(),y!==b?(xa(),y=Da(),y!==b?(xa(),ya=La(),ya!==b?(xa(),X=va(),X!==b?(xa(),ya=ab(),ya!==b?r={type:"interval-period",period:"second",precision:y,secondary:X}:(d=r,r=b)):(d=r,r=b)):
(d=r,r=b)):(d=r,r=b)):(d=r,r=b)):(d=r,r=b),r===b&&(r=d,X=Fa(),X!==b?(xa(),y=Va(),y!==b?(xa(),y=va(),y!==b?(xa(),ya=ab(),ya!==b?r={type:"interval-period",period:"second",precision:y,secondary:null}:(d=r,r=b)):(d=r,r=b)):(d=r,r=b)):(d=r,r=b),r===b&&(r=d,X=Fa(),X!==b&&(X={type:"interval-period",period:"second",precision:null,secondary:null}),r=X)))));return r}function ha(){var r=d;r=ua();r!==b&&(r={type:"string",value:"day"});r===b&&(r=d,r=Ea(),r!==b&&(r={type:"string",value:"hour"}),r===b&&(r=d,r=Ba(),
r!==b&&(r={type:"string",value:"minute"}),r===b&&(r=d,r=wa(),r!==b&&(r={type:"string",value:"month"}),r===b&&(r=d,r=oa(),r!==b&&(r={type:"string",value:"year"})))));return r}function va(){var r=na();r!==b&&(r=parseFloat(r));return r}function Da(){var r=na();r!==b&&(r=parseFloat(r));return r}function Ha(){var r=Ia();r===b&&(r=t());return r}function Ia(){var r=d;if(39===h.charCodeAt(d)){var y=Za;d++}else y=b,0===ta&&D(Kd);y===b&&(h.substr(d,2)===bc?(y=bc,d+=2):(y=b,0===ta&&D(Ld)));if(y!==b){y=[];var X=
d;h.substr(d,2)===S?(X=S,d+=2):(X=b,0===ta&&D(Md));X!==b&&(X="'");X===b&&(Uc.test(h.charAt(d))?(X=h.charAt(d),d++):(X=b,0===ta&&D(Nd)));for(;X!==b;)y.push(X),X=d,h.substr(d,2)===S?(X=S,d+=2):(X=b,0===ta&&D(Md)),X!==b&&(X="'"),X===b&&(Uc.test(h.charAt(d))?(X=h.charAt(d),d++):(X=b,0===ta&&D(Nd)));39===h.charCodeAt(d)?(X=Za,d++):(X=b,0===ta&&D(Kd));X!==b?r={type:"string",value:y.join("")}:(d=r,r=b)}else d=r,r=b;return r}function Ja(){var r=d;if(Ta()!==b){xa();var y=L();if(y!==b){xa();var X=Sa();X!==
b?(xa(),X=L(),X!==b?r={type:"when-clause",operand:y,value:X}:(d=r,r=b)):(d=r,r=b)}else d=r,r=b}else d=r,r=b;return r}function Ma(){var r=d;if(Ta()!==b){xa();var y=L();if(y!==b){xa();var X=Sa();X!==b?(xa(),X=L(),X!==b?r={type:"when-clause",operand:y,value:X}:(d=r,r=b)):(d=r,r=b)}else d=r,r=b}else d=r,r=b;return r}function Wa(){var r=d;var y=d;if(h.substr(d,4).toLowerCase()===rb){var X=h.substr(d,4);d+=4}else X=b,0===ta&&D(ca);if(X!==b){X=d;ta++;var ya=G();ta--;ya===b?X=void 0:(d=X,X=b);X!==b?y="ELSE":
(d=y,y=b)}else d=y,y=b;y!==b?(xa(),y=L(),y!==b?r={type:"else-clause",value:y}:(d=r,r=b)):(d=r,r=b);return r}function Ya(){var r=na();if(r===b){r=d;if(45===h.charCodeAt(d)){var y=Eb;d++}else y=b,0===ta&&D(Ab);y===b&&(43===h.charCodeAt(d)?(y=ic,d++):(y=b,0===ta&&D(Vc)));if(y!==b){var X=na();X!==b?r=y[0]+X:(d=r,r=b)}else d=r,r=b}return r}function Ua(){var r=d;if(46===h.charCodeAt(d)){var y=ea;d++}else y=b,0===ta&&D(De);y!==b?(r=na(),r===b&&(r=null),r="."+(null!=r?r:"")):(d=r,r=b);return r}function gb(){var r;
var y=r=d;if(Gd.test(h.charAt(d))){var X=h.charAt(d);d++}else X=b,0===ta&&D(Ee);X!==b?(yb.test(h.charAt(d))?(y=h.charAt(d),d++):(y=b,0===ta&&D(Fe)),y===b&&(y=null),y="e"+(null===y?"":y)):(d=y,y=b);y!==b?(X=na(),X!==b?r=y+X:(d=r,r=b)):(d=r,r=b);return r}function na(){var r=[];var y=ra();if(y!==b)for(;y!==b;)r.push(y),y=ra();else r=b;r!==b&&(r=r.join(""));return r}function ra(){if(Fd.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&D(te);return r}function Aa(){var r=d;if(h.substr(d,2).toLowerCase()===
Ga){var y=h.substr(d,2);d+=2}else y=b,0===ta&&D(Je);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="IN":(d=r,r=b)}else d=r,r=b;return r}function c(){var r=d;if(h.substr(d,2).toLowerCase()===Pa){var y=h.substr(d,2);d+=2}else y=b,0===ta&&D(Ke);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="IS":(d=r,r=b)}else d=r,r=b;return r}function k(){var r=d;if(h.substr(d,4).toLowerCase()===Xa){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(Le);if(y!==b){y=d;ta++;var X=G();
ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="LIKE":(d=r,r=b)}else d=r,r=b;return r}function da(){var r=d;if(h.substr(d,3).toLowerCase()===mb){var y=h.substr(d,3);d+=3}else y=b,0===ta&&D(Me);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="NOT":(d=r,r=b)}else d=r,r=b;return r}function ka(){var r=d;if(h.substr(d,3).toLowerCase()===lb){var y=h.substr(d,3);d+=3}else y=b,0===ta&&D(Ne);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="AND":(d=r,r=b)}else d=r,r=b;return r}
function sa(){var r=d;if(h.substr(d,2).toLowerCase()===xb){var y=h.substr(d,2);d+=2}else y=b,0===ta&&D(Oe);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="OR":(d=r,r=b)}else d=r,r=b;return r}function v(){var r=d;if(h.substr(d,7).toLowerCase()===Kb){var y=h.substr(d,7);d+=7}else y=b,0===ta&&D(Pe);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="BETWEEN":(d=r,r=b)}else d=r,r=b;return r}function K(){var r=d;if(h.substr(d,4).toLowerCase()===nd){var y=h.substr(d,
4);d+=4}else y=b,0===ta&&D(Qe);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="FROM":(d=r,r=b)}else d=r,r=b;return r}function Y(){var r=d;if(h.substr(d,4).toLowerCase()===rd){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(Te);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="TRIM":(d=r,r=b)}else d=r,r=b;return r}function W(){var r=d;if(h.substr(d,9).toLowerCase()===td){var y=h.substr(d,9);d+=9}else y=b,0===ta&&D(cc);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:
(d=y,y=b);y!==b?r="TIMESTAMP":(d=r,r=b)}else d=r,r=b;return r}function fa(){var r=d;if(h.substr(d,4).toLowerCase()===ud){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(ue);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="DATE":(d=r,r=b)}else d=r,r=b;return r}function ma(){var r=d;if(h.substr(d,8).toLowerCase()===ye){var y=h.substr(d,8);d+=8}else y=b,0===ta&&D(Pc);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="INTERVAL":(d=r,r=b)}else d=r,r=b;return r}function oa(){var r=
d;if(h.substr(d,4).toLowerCase()===pc){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(md);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="YEAR":(d=r,r=b)}else d=r,r=b;return r}function wa(){var r=d;if(h.substr(d,5).toLowerCase()===Ub){var y=h.substr(d,5);d+=5}else y=b,0===ta&&D(Ve);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="MONTH":(d=r,r=b)}else d=r,r=b;return r}function ua(){var r=d;if(h.substr(d,3).toLowerCase()===hd){var y=h.substr(d,3);d+=3}else y=b,0===
ta&&D(We);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="DAY":(d=r,r=b)}else d=r,r=b;return r}function Ea(){var r=d;if(h.substr(d,4).toLowerCase()===Hc){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(ld);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="HOUR":(d=r,r=b)}else d=r,r=b;return r}function Ba(){var r=d;if(h.substr(d,6).toLowerCase()===Ic){var y=h.substr(d,6);d+=6}else y=b,0===ta&&D(Xe);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r=
"MINUTE":(d=r,r=b)}else d=r,r=b;return r}function Fa(){var r=d;if(h.substr(d,6).toLowerCase()===Jc){var y=h.substr(d,6);d+=6}else y=b,0===ta&&D(Ye);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="SECOND":(d=r,r=b)}else d=r,r=b;return r}function Ra(){var r=d;if(h.substr(d,4).toLowerCase()===qc){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(bb);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="CASE":(d=r,r=b)}else d=r,r=b;return r}function Oa(){var r=d;if(h.substr(d,
3).toLowerCase()===ze){var y=h.substr(d,3);d+=3}else y=b,0===ta&&D(a);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="END":(d=r,r=b)}else d=r,r=b;return r}function Ta(){var r=d;if(h.substr(d,4).toLowerCase()===Ae){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(g);if(y!==b){y=d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="WHEN":(d=r,r=b)}else d=r,r=b;return r}function Sa(){var r=d;if(h.substr(d,4).toLowerCase()===Be){var y=h.substr(d,4);d+=4}else y=b,0===ta&&D(F);if(y!==b){y=
d;ta++;var X=G();ta--;X===b?y=void 0:(d=y,y=b);y!==b?r="THEN":(d=r,r=b)}else d=r,r=b;return r}function La(){if(44===h.charCodeAt(d)){var r=Sc;d++}else r=b,0===ta&&D(ja);return r}function Va(){if(40===h.charCodeAt(d)){var r=Fb;d++}else r=b,0===ta&&D(qa);return r}function ab(){if(41===h.charCodeAt(d)){var r=me;d++}else r=b,0===ta&&D(za);return r}function xa(){var r;var y=[];for(r=wb();r!==b;)y.push(r),r=wb();return y}function wb(){if(oe.test(h.charAt(d))){var r=h.charAt(d);d++}else r=b,0===ta&&D(Ka);
return r}function sb(r,y,X,ya){r={type:"binary-expression",operator:r,left:y,right:X};void 0!==ya&&(r.escape=ya);return r}function ib(r,y){for(var X=0;X<y.length;X++)r=sb(y[X][1],r,y[X][3]);return r}l=void 0!==l?l:{};var b={},hb=l.grammarSource,Ib={start:f},Rb=f,nb="!",la="\x3d",hc="\x3e\x3d",Tb="\x3e",Db="\x3c\x3d",Jb="\x3c\x3e",ac="\x3c",Yb="!\x3d",ic="+",Eb="-",Sb="||",kb="*",Gb="/",Hb="@",Za="'",bc="N'",S="''",ea=".",V="null",pa="true",Ca="false",Ga="in",Pa="is",Xa="like",ob="escape",mb="not",
lb="and",xb="or",Kb="between",nd="from",od="for",pd="substring",qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",jc="float",Rc="real",nc="varchar",oc="to",ye="interval",pc="year",Ub="month",hd="day",Hc="hour",Ic="minute",Jc="second",qc="case",ze="end",Ae="when",Be="then",rb="else",Sc=",",Fb="(",me=")",Tc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Uc=/^[^']/,Fd=/^[0-9]/,
Gd=/^[eE]/,yb=/^[+\-]/,oe=/^[ \t\n\r]/,Kc=/^[^`]/,ne=p("!",!1),Lc=p("\x3d",!1),id=p("\x3e\x3d",!1),pe=p("\x3e",!1),Bd=p("\x3c\x3d",!1),se=p("\x3c\x3e",!1),re=p("\x3c",!1),qe=p("!\x3d",!1),Vc=p("+",!1),Ab=p("-",!1),Qb=p("||",!1),Hd=p("*",!1),Id=p("/",!1),Wc=Q([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=Q([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Xc=Q([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=p("@",!1),Kd=p("'",!1),Ld=p("N'",!1),Md=p("''",!1),Nd=Q(["'"],!0,!1),
De=p(".",!1),te=Q([["0","9"]],!1,!1),Ee=Q(["e","E"],!1,!1),Fe=Q(["+","-"],!1,!1),Ge=p("NULL",!0),He=p("TRUE",!0),Ie=p("FALSE",!0),Je=p("IN",!0),Ke=p("IS",!0),Le=p("LIKE",!0),Od=p("ESCAPE",!0),Me=p("NOT",!0),Ne=p("AND",!0),Oe=p("OR",!0),Pe=p("BETWEEN",!0),Qe=p("FROM",!0),Re=p("FOR",!0),Se=p("SUBSTRING",!0),Pd=p("EXTRACT",!0),Te=p("TRIM",!0),Ue=p("POSITION",!0),cc=p("TIMESTAMP",!0),ue=p("DATE",!0),jb=p("LEADING",!0),vb=p("TRAILING",!0),lc=p("BOTH",!0),Mc=p("CAST",!0),jd=p("AS",!0),ve=p("INTEGER",!0),
kd=p("SMALLINT",!0),Nc=p("FLOAT",!0),we=p("REAL",!0),Oc=p("VARCHAR",!0),Qc=p("TO",!0),Pc=p("INTERVAL",!0),md=p("YEAR",!0),Ve=p("MONTH",!0),We=p("DAY",!0),ld=p("HOUR",!0),Xe=p("MINUTE",!0),Ye=p("SECOND",!0),bb=p("CASE",!0),a=p("END",!0),g=p("WHEN",!0),F=p("THEN",!0),ca=p("ELSE",!0),ja=p(",",!1),qa=p("(",!1),za=p(")",!1),Ka=Q([" ","\t","\n","\r"],!1,!1),Qa=p("`",!1),cb=Q(["`"],!0,!1),d=0,db=[{line:1,column:1}],$a=0,zb=[],ta=0;if("startRule"in l){if(!(l.startRule in Ib))throw Error("Can't start parsing from rule \""+
l.startRule+'".');Rb=Ib[l.startRule]}var Vb=Rb();if(Vb!==b&&d===h.length)return Vb;Vb!==b&&d<h.length&&D({type:"end"});throw function(r,y,X){return new P(P.buildMessage(r,y),r,y,X)}(zb,$a<h.length?h.charAt($a):null,$a<h.length?T($a,$a+1):T($a,$a));}}})})({get exports(){return aa},set exports(N){aa=N}});let R=function(){function N(){}N.parse=function(P){return aa.parse(P)};return e._createClass(N)}();m.WhereGrammar=R;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],
function(m){m.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};m.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(m){m.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,
supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(m,e,ia,aa,R,N,P,E,h,l,p,Q,M,T,D){function f(I,O,J,n){const A=n.x-J.x;n=n.y-J.y;O=Math.min(1,Math.max(0,((O.x-J.x)*A+(O.y-J.y)*n)/(A*A+n*n)));I.x=J.x+A*O;I.y=J.y+n*O}function u(I,O){return I?O?4:3:O?3:2}let L=function(){function I(J,n,A){this.items=J;this.query=n;this.geometryType=A.geometryType;this.hasM=A.hasM;this.hasZ=A.hasZ;this.fieldsIndex=A.fieldsIndex;this.objectIdField=A.objectIdField;this.spatialReference=A.spatialReference;this.featureAdapter=A.featureAdapter}var O=I.prototype;
O.createQueryResponseForCount=function(){const J=new h(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return J.countDistinctValues(this.items);const {groupByFieldsForStatistics:n,having:A,outStatistics:x}=this.query;if(!n?.length)return 1;const B=new Map,z=new Map,w=new Set;for(const G of x){var {statisticType:C}=G;C="exceedslimit"!==C?G.onStatisticField:void 0;if(!z.has(C)){var ba=[];for(const H of n){const t=this._getAttributeValues(J,H,B);ba.push(t)}z.set(C,this._calculateUniqueValues(ba,
J.returnDistinctValues))}C=z.get(C);for(const H in C){const {data:t,items:q}=C[H];ba=t.join(",");A&&!J.validateItems(q,A)||w.add(ba)}}return w.size};O.createQueryResponse=async function(){let J;J=this.query.outStatistics?this.query.outStatistics.some(n=>"exceedslimit"===n.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const n=this.query.geometry;E.isValid(this.query.outSR)&&
!E.equals(n.spatialReference,this.query.outSR)?J.queryGeometry=Q.cleanFromGeometryEngine({spatialReference:this.query.outSR,...l.project(n,n.spatialReference,this.query.outSR)}):J.queryGeometry=Q.cleanFromGeometryEngine({spatialReference:this.query.outSR,...n})}return J};O.createSnappingResponse=function(J,n){const A=this.featureAdapter,x=u(this.hasZ,this.hasM),{point:B,mode:z}=J,w="number"===typeof J.distance?J.distance:J.distance.x,C="number"===typeof J.distance?J.distance:J.distance.y,ba={candidates:[]},
G="esriGeometryPolygon"===this.geometryType;n=this._getPointCreator(z,this.spatialReference,n);const H=new Z(null,0),t=new Z(null,0),q={x:0,y:0,z:0};for(const Ja of this.items){var U=A.getGeometry(Ja);if(aa.isNone(U))continue;const {coords:Ma,lengths:Wa}=U;H.coords=Ma;t.coords=Ma;if(J.types&e.SnappingTypes.EDGE){U=0;for(var ha=0;ha<Wa.length;ha++){var va=Wa[ha];for(var Da=0;Da<va;Da++,U+=x){var Ha=H;Ha.coordsIndex=U;if(Da!==va-1){const Ya=t;Ya.coordsIndex=U+x;const Ua=q;f(q,B,Ha,Ya);var Ia=(B.x-Ua.x)/
w;const gb=(B.y-Ua.y)/C;Ia=Ia*Ia+gb*gb;1>=Ia&&ba.candidates.push(p.makeEdgeCandidate(A.getObjectId(Ja),n(Ua),Math.sqrt(Ia),n(Ha),n(Ya)))}}}}if(J.types&e.SnappingTypes.VERTEX)for(U=G?Ma.length-x:Ma.length,ha=0;ha<U;ha+=x)va=H,va.coordsIndex=ha,Da=(B.x-va.x)/w,Ha=(B.y-va.y)/C,Da=Da*Da+Ha*Ha,1>=Da&&ba.candidates.push(p.makeVertexCandidate(A.getObjectId(Ja),n(va),Math.sqrt(Da)))}ba.candidates.sort((Ja,Ma)=>Ja.distance-Ma.distance);return ba};O._getPointCreator=function(J,n,A){const x=aa.isSome(A)&&!E.equals(n,
A)?z=>l.project(z,n,A):z=>z,{hasZ:B}=this;return"3d"===J?B?({x:z,y:w,z:C})=>x({x:z,y:w,z:C}):({x:z,y:w})=>x({x:z,y:w,z:0}):({x:z,y:w})=>x({x:z,y:w})};O.createSummaryStatisticsResponse=async function(J){const {field:n,valueExpression:A,normalizationField:x,normalizationType:B,normalizationTotal:z,minValue:w,maxValue:C,scale:ba}=J;J=this.fieldsIndex.isDateField(n);var G=await this._getDataValues({field:n,valueExpression:A,normalizationField:x,normalizationType:B,normalizationTotal:z,scale:ba});const H=
T.isNullCountSupported({normalizationType:B,normalizationField:x,minValue:w,maxValue:C}),t=this.fieldsIndex.get(n),q={value:.5,fieldType:t?.type};G=M.isStringField(t)?T.calculateStringStatistics({values:G,supportsNullCount:H,percentileParams:q}):T.calculateStatistics({values:G,minValue:w,maxValue:C,useSampleStdDev:!B,supportsNullCount:H,percentileParams:q});return T.processSummaryStatisticsResult(G,J)};O.createUniqueValuesResponse=async function(J){const {field:n,valueExpression:A,domains:x,returnAllCodedValues:B,
scale:z}=J;var w=await this._getDataValues({field:n,field2:J.field2,field3:J.field3,fieldDelimiter:J.fieldDelimiter,valueExpression:A,scale:z});w=T.calculateUniqueValuesCount(w);return T.createUVResult(w,x,B,J.fieldDelimiter)};O.createClassBreaksResponse=async function(J){const {field:n,valueExpression:A,normalizationField:x,normalizationType:B,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:C,minValue:ba,maxValue:G,numClasses:H,scale:t}=J;J=await this._getDataValues({field:n,
valueExpression:A,normalizationField:x,normalizationType:B,normalizationTotal:z,scale:t});J=T.calculateClassBreaks(J,{field:n,normalizationField:x,normalizationType:B,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:C,minValue:ba,maxValue:G,numClasses:H});return T.resolveCBResult(J,w)};O.createHistogramResponse=async function(J){const {field:n,valueExpression:A,normalizationField:x,normalizationType:B,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:C,minValue:ba,
maxValue:G,numBins:H,scale:t}=J;J=await this._getDataValues({field:n,valueExpression:A,normalizationField:x,normalizationType:B,normalizationTotal:z,scale:t});return T.calculateHistogram(J,{field:n,normalizationField:x,normalizationType:B,normalizationTotal:z,classificationMethod:w,standardDeviationInterval:C,minValue:ba,maxValue:G,numBins:H})};O._sortFeatures=function(J,n,A){if(1<J.length&&n&&n.length)for(const x of n.reverse()){n=x.split(" ");const B=n[0],z=this.fieldsIndex.get(B);n=n[1]?"desc"===
n[1].toLowerCase():!1;const w=T.getAttributeComparator(z?.type,n);J.sort((C,ba)=>{C=A(C,B,z);ba=A(ba,B,z);return w(C,ba)})}};O._createFeatureQueryResponse=function(J){const n=this.items,{geometryType:A,hasM:x,hasZ:B,objectIdField:z,spatialReference:w}=this,{outFields:C,outSR:ba,quantizationParameters:G,resultRecordCount:H,resultOffset:t,returnZ:q,returnM:U}=J,ha=null!=H?n.length>(t||0)+H:!1,va=C&&(C.includes("*")?[...this.fieldsIndex.fields]:C.map(Da=>this.fieldsIndex.get(Da)));return{exceededTransferLimit:ha,
features:this._createFeatures(J,n),fields:va,geometryType:A,hasM:x&&U,hasZ:B&&q,objectIdFieldName:z,spatialReference:Q.cleanFromGeometryEngine(ba||w),transform:G&&P.toQuantizationTransform(G)||null}};O._createFeatures=function(J,n){const A=new h(J,this.featureAdapter,this.fieldsIndex),{hasM:x,hasZ:B}=this,{orderByFields:z,quantizationParameters:w,returnGeometry:C,returnCentroid:ba,maxAllowableOffset:G,resultOffset:H,resultRecordCount:t,returnZ:q=!1,returnM:U=!1}=J,ha=B&&q,va=x&&U;J=[];var Da=0;n=
[...n];this._sortFeatures(n,z,(Ja,Ma,Wa)=>A.getFieldValue(Ja,Ma,Wa));if(C||ba){var Ha=P.toQuantizationTransform(w)??void 0;if(C&&!ba)for(var Ia of n)J[Da++]={attributes:A.getAttributes(Ia),geometry:Q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ia),G,Ha,ha,va)};else if(!C&&ba)for(const Ja of n)J[Da++]={attributes:A.getAttributes(Ja),centroid:Q.transformCentroid(this,this.featureAdapter.getCentroid(Ja,this),Ha)};else for(const Ja of n)J[Da++]={attributes:A.getAttributes(Ja),
centroid:Q.transformCentroid(this,this.featureAdapter.getCentroid(Ja,this),Ha),geometry:Q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ja),G,Ha,ha,va)}}else for(Ha of n)(Ia=A.getAttributes(Ha))&&(J[Da++]={attributes:Ia});Da=H||0;null!=t&&(J=J.slice(Da,Math.min(J.length,Da+t)));return J};O._createExceedsLimitQueryResponse=function(J){var n=!1;let A=Number.POSITIVE_INFINITY,x=Number.POSITIVE_INFINITY;n=Number.POSITIVE_INFINITY;for(const B of J.outStatistics??[])if("exceedslimit"===
B.statisticType){A=null!=B.maxPointCount?B.maxPointCount:Number.POSITIVE_INFINITY;x=null!=B.maxRecordCount?B.maxRecordCount:Number.POSITIVE_INFINITY;n=null!=B.maxVertexCount?B.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)n=this.items.length>A;else if(this.items.length>x)n=!0;else{J=u(this.hasZ,this.hasM);const B=this.featureAdapter;n=this.items.reduce((z,w)=>{w=B.getGeometry(w);return z+(aa.isSome(w)&&w.coords.length||0)},0)/J>n}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(n)}}]}};O._createStatisticsQueryResponse=async function(J){var n={attributes:{}};const A=[],x=new Map,B=new Map,z=new Map,w=new Map,C=new h(J,this.featureAdapter,this.fieldsIndex);var ba=J.outStatistics;const {groupByFieldsForStatistics:G,having:H,orderByFields:t}=J;J=G&&G.length;const q=!!J,U=q?G[0]:null,ha=q&&!this.fieldsIndex.get(U);for(const Ja of ba??
[]){const {outStatisticFieldName:Ma,statisticType:Wa}=Ja;ba=Ja;var va="exceedslimit"!==Wa?Ja.onStatisticField:void 0;const Ya="percentile_disc"===Wa||"percentile_cont"===Wa,Ua="EnvelopeAggregate"===Wa||"CentroidAggregate"===Wa||"ConvexHullAggregate"===Wa,gb=q&&1===J&&(va===U||ha)&&"count"===Wa;if(q){if(!z.has(va)){var Da=[];for(const na of G){var Ha=this._getAttributeValues(C,na,x);Da.push(Ha)}z.set(va,this._calculateUniqueValues(Da,Ua?!1:C.returnDistinctValues))}Da=z.get(va);for(const na in Da){const {count:ra,
data:Aa,items:c,itemPositions:k}=Da[na];Ha=Aa.join(",");if(!H||C.validateItems(c,H)){const da=w.get(Ha)||{attributes:{}};if(Ua){da.aggregateGeometries||(da.aggregateGeometries={});const {aggregateGeometries:sa,outStatisticFieldName:v}=await this._getAggregateGeometry(ba,c);da.aggregateGeometries[v]=sa}else{var Ia=null;if(gb)Ia=ra;else{const sa=this._getAttributeValues(C,va,x);Ia=k.map(v=>sa[v]);Ia=Ya&&"statisticParameters"in ba?this._getPercentileValue(ba,Ia):this._getStatisticValue(ba,Ia,null,C.returnDistinctValues)}da.attributes[Ma]=
Ia}let ka=0;G.forEach((sa,v)=>da.attributes[this.fieldsIndex.get(sa)?sa:`EXPR_${++ka}`]=Aa[v]);w.set(Ha,da)}}}else if(Ua){n.aggregateGeometries||(n.aggregateGeometries={});const {aggregateGeometries:na,outStatisticFieldName:ra}=await this._getAggregateGeometry(ba,this.items);n.aggregateGeometries[ra]=na}else va=this._getAttributeValues(C,va,x),n.attributes[Ma]=Ya&&"statisticParameters"in ba?this._getPercentileValue(ba,va):this._getStatisticValue(ba,va,B,C.returnDistinctValues);A.push({name:Ma,alias:Ma,
type:"esriFieldTypeDouble"})}n=q?Array.from(w.values()):[n];this._sortFeatures(n,t,(Ja,Ma)=>Ja.attributes[Ma]);return{fields:A,features:n}};O._getAggregateGeometry=async function(J,n){var A=await new Promise((t,q)=>m(["../../../geometry/geometryEngineJSON"],t,q));const {statisticType:x,outStatisticFieldName:B}=J,{featureAdapter:z,spatialReference:w,geometryType:C,hasZ:ba,hasM:G}=this;n=n.map(t=>Q.getGeometry(C,ba,G,z.getGeometry(t)));const H=A.convexHull(w,n,!0)[0];J={aggregateGeometries:null,outStatisticFieldName:null};
"EnvelopeAggregate"===x?(A=H?N.getPolygonExtent(H):N.getGeometryExtent(A.union(w,n)),J.aggregateGeometries={...A,spatialReference:w},J.outStatisticFieldName=B||"extent"):"CentroidAggregate"===x?(A=H?R.polygonCentroid(H):R.extentCentroid(N.getGeometryExtent(A.union(w,n))),J.aggregateGeometries={x:A[0],y:A[1],spatialReference:w},J.outStatisticFieldName=B||"centroid"):"ConvexHullAggregate"===x&&(J.aggregateGeometries=H,J.outStatisticFieldName=B||"convexHull");return J};O._getStatisticValue=function(J,
n,A,x){const {onStatisticField:B,statisticType:z}=J;J=null;J=A?.has(B)?A.get(B):M.isStringField(this.fieldsIndex.get(B))?T.calculateStringStatistics({values:n,returnDistinct:x}):T.calculateStatistics({values:x?[...(new Set(n))]:n,minValue:null,maxValue:null,useSampleStdDev:!0});A&&A.set(B,J);return J["var"===z?"variance":z]};O._getPercentileValue=function(J,n){const {onStatisticField:A,statisticParameters:x,statisticType:B}=J,{value:z,orderBy:w}=x;J=this.fieldsIndex.get(A);return T.calculatePercentile(n,
{value:z,orderBy:w,fieldType:J?.type,isDiscrete:"percentile_disc"===B})};O._getAttributeValues=function(J,n,A){if(A.has(n))return A.get(n);const x=this.fieldsIndex.get(n),B=this.items.map(z=>J.getFieldValue(z,n,x));A.set(n,B);return B};O._getAttributeDataValues=function(J,n){return this.items.map(A=>J.getDataValue(A,{field:n.field,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,normalizationField:n.normalizationField,normalizationType:n.normalizationType,normalizationTotal:n.normalizationTotal}))};
O._getAttributeExpressionValues=async function(J,n,A){const {arcadeUtils:x}=await D.loadArcade();n=x.createFunction(n);A=A&&x.getViewInfo(A);return J.getExpressionValues(this.items,n,A,x)};O._calculateUniqueValues=function(J,n){const A={},x=this.items,B=x.length;for(let z=0;z<B;z++){const w=x[z],C=[];for(const G of J)C.push(G[z]);const ba=C.join(",");null==A[ba]?A[ba]={count:1,data:C,items:[w],itemPositions:[z]}:(n||A[ba].count++,A[ba].items.push(w),A[ba].itemPositions.push(z))}return A};O._getDataValues=
async function(J){const n=new h(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:A,field:x,normalizationField:B,normalizationType:z,normalizationTotal:w,scale:C}=J,ba=A?{viewingMode:"map",scale:C,spatialReference:this.query.outSR||this.spatialReference}:null;return A?this._getAttributeExpressionValues(n,A,ba):this._getAttributeDataValues(n,{field:x,field2:J.field2,field3:J.field3,fieldDelimiter:J.fieldDelimiter,normalizationField:B,normalizationType:z,normalizationTotal:w})};ia._createClass(I,
[{key:"size",get:function(){return this.items.length}}]);return I}();e.SnappingTypes=void 0;(function(I){I[I.NONE=0]="NONE";I[I.EDGE=1]="EDGE";I[I.VERTEX=2]="VERTEX"})(e.SnappingTypes||(e.SnappingTypes={}));let Z=function(){function I(O,J){this.coords=O;this.coordsIndex=J}ia._createClass(I,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return I}();e.QueryEngineResult=
L;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(m,e,ia){function aa({scale:z,translate:w},C){return Math.round((C-w[0])/z[0])}function R({scale:z,translate:w},C){return Math.round((w[1]-C)/z[1])}function N(z,w,C){const ba=[];let G,H,t,q;for(let U=0;U<C.length;U++){const ha=C[U];if(0<U){if(t=aa(z,ha[0]),q=R(z,ha[1]),t!==G||q!==H)ba.push(w(ha,t-G,q-H)),G=t,H=q}else G=aa(z,
ha[0]),H=R(z,ha[1]),ba.push(w(ha,G,H))}return 0<ba.length?ba:null}function P(z,w,C,ba){return N(z,C?ba?B:x:ba?x:A,w)}function E(z,w,C,ba){const G=[];C=C?ba?B:x:ba?x:A;for(ba=0;ba<w.length;ba++){const H=N(z,C,w[ba]);H&&3<=H.length&&G.push(H)}return G.length?G:null}function h(z,w,C,ba){const G=[];C=C?ba?B:x:ba?x:A;for(ba=0;ba<w.length;ba++){const H=N(z,C,w[ba]);H&&2<=H.length&&G.push(H)}return G.length?G:null}function l({scale:z,translate:w},C){return C*z[0]+w[0]}function p({scale:z,translate:w},C){return w[1]-
C*z[1]}function Q(z,w,C){const ba=Array(C.length);if(!C.length)return ba;const [G,H]=z.scale;let t=l(z,C[0][0]);z=p(z,C[0][1]);ba[0]=w(C[0],t,z);for(let q=1;q<C.length;q++){const U=C[q];t+=U[0]*G;z-=U[1]*H;ba[q]=w(U,t,z)}return ba}function M(z,w,C){const ba=Array(C.length);for(let G=0;G<C.length;G++)ba[G]=Q(z,w,C[G]);return ba}function T(z,w,C,ba){return Q(z,C?ba?B:x:ba?x:A,w)}function D(z,w,C,ba){return M(z,C?ba?B:x:ba?x:A,w)}function f(z,w,C,ba){return M(z,C?ba?B:x:ba?x:A,w)}function u(z,w,C){let [ba,
G]=C[0],H=Math.min(ba,w[0]),t=Math.min(G,w[1]),q=Math.max(ba,w[2]);w=Math.max(G,w[3]);for(let U=1;U<C.length;U++){const [ha,va]=C[U];ba+=ha;G+=va;0>ha&&(H=Math.min(H,ba));0<ha&&(q=Math.max(q,ba));0>va?t=Math.min(t,G):0<va&&(w=Math.max(w,G))}z[0]=H;z[1]=t;z[2]=q;z[3]=w;return z}function L(z,w){if(!w.length)return null;z[0]=z[1]=Number.POSITIVE_INFINITY;z[2]=z[3]=Number.NEGATIVE_INFINITY;for(let C=0;C<w.length;C++)u(z,z,w[C]);return z}function Z(z,w,C,ba,G){w.xmin=aa(z,C.xmin);w.ymin=R(z,C.ymin);w.xmax=
aa(z,C.xmax);w.ymax=R(z,C.ymax);w!==C&&(ba&&(w.zmin=C.zmin,w.zmax=C.zmax),G&&(w.mmin=C.mmin,w.mmax=C.mmax));return w}function I(z,w,C,ba,G){w.points=P(z,C.points,ba,G)??[];return w}function O(z,w,C,ba,G){w.x=aa(z,C.x);w.y=R(z,C.y);w!==C&&(ba&&(w.z=C.z),G&&(w.m=C.m));return w}function J(z,w,C,ba,G){z=E(z,C.rings,ba,G);if(!z)return null;w.rings=z;return w}function n(z,w,C,ba,G){z=h(z,C.paths,ba,G);if(!z)return null;w.paths=z;return w}const A=(z,w,C)=>[w,C],x=(z,w,C)=>[w,C,z[2]],B=(z,w,C)=>[w,C,z[2],
z[3]];m.equals=function(z,w){if(z===w||null==z&&null==w)return!0;if(null==z||null==w)return!1;let C,ba,G,H;z&&"upperLeft"===z.originPosition?(C=z.translate[0],ba=z.translate[1],z=z.scale[0]):(C=e.isSome(z.extent)?z.extent.xmin:0,ba=e.isSome(z.extent)?z.extent.ymax:0,z=z.tolerance);w&&"upperLeft"===w.originPosition?(G=w.translate[0],H=w.translate[1],w=w.scale[0]):(G=e.isSome(w.extent)?w.extent.xmin:0,H=e.isSome(w.extent)?w.extent.ymax:0,w=w.tolerance);return C===G&&ba===H&&z===w};m.getQuantizedBoundsCoordsArray=
u;m.getQuantizedBoundsCoordsArrayArray=L;m.getQuantizedBoundsPaths=function(z){return L([0,0,0,0],z)};m.getQuantizedBoundsPoints=function(z){const w=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return u(w,w,z)};m.getQuantizedBoundsRings=function(z){return L([0,0,0,0],z)};m.quantizeBounds=function(z,w,C){w[0]=aa(z,C[0]);w[3]=R(z,C[1]);w[2]=aa(z,C[2]);w[1]=R(z,C[3]);return w};m.quantizeExtent=Z;m.quantizeGeometry=function(z,w){return z&&w?ia.isPoint(w)?
O(z,{},w,!1,!1):ia.isPolyline(w)?n(z,{},w,!1,!1):ia.isPolygon(w)?J(z,{},w,!1,!1):ia.isMultipoint(w)?I(z,{},w,!1,!1):ia.isExtent(w)?Z(z,{},w,!1,!1):null:null};m.quantizeMultipoint=I;m.quantizePaths=h;m.quantizePoint=O;m.quantizePoints=P;m.quantizePolygon=J;m.quantizePolyline=n;m.quantizeRings=E;m.quantizeX=aa;m.quantizeY=R;m.toQuantizationTransform=function(z){return z?{originPosition:"upper-left"===z.originPosition?"upperLeft":"lower-left"===z.originPosition?"lowerLeft":z.originPosition,scale:z.tolerance?
[z.tolerance,z.tolerance]:[1,1],translate:e.isSome(z.extent)?[z.extent.xmin,z.extent.ymax]:[0,0]}:null};m.unquantizeBounds=function(z,w,C){return C?(w[0]=l(z,C[0]),w[1]=p(z,C[3]),w[2]=l(z,C[2]),w[3]=p(z,C[1]),w):[l(z,w[0]),p(z,w[3]),l(z,w[2]),p(z,w[1])]};m.unquantizeCoordsArray=Q;m.unquantizeCoordsArrayArray=M;m.unquantizeExtent=function(z,w,C,ba,G){w.xmin=l(z,C.xmin);w.ymin=p(z,C.ymin);w.xmax=l(z,C.xmax);w.ymax=p(z,C.ymax);w!==C&&(ba&&(w.zmin=C.zmin,w.zmax=C.zmax),G&&(w.mmin=C.mmin,w.mmax=C.mmax));
return w};m.unquantizeMultipoint=function(z,w,C,ba,G){e.isSome(C)&&(w.points=T(z,C.points,ba,G));return w};m.unquantizePaths=D;m.unquantizePoint=function(z,w,C,ba,G){if(e.isNone(C))return w;w.x=l(z,C.x);w.y=p(z,C.y);w!==C&&(ba&&(w.z=C.z),G&&(w.m=C.m));return w};m.unquantizePoints=T;m.unquantizePolygon=function(z,w,C,ba,G){e.isSome(C)&&(w.rings=f(z,C.rings,ba,G));return w};m.unquantizePolyline=function(z,w,C,ba,G){e.isSome(C)&&(w.paths=D(z,C.paths,ba,G));return w};m.unquantizeRings=f;m.unquantizeX=
l;m.unquantizeY=p;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(m,e,ia,aa){return function(){function R(P,E,h){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=P.returnDistinctValues??!1;this.fieldsIndex=h;this.featureAdapter=E;if((E=P.outFields)&&!E.includes("*")){this.outFields=
E;P=0;for(const p of E){var l=ia.getExpressionFromFieldName(p);l=(E=this.fieldsIndex.get(l))?null:ia.getWhereClause(l,h);E=E?E.name:ia.getAliasFromFieldName(p)||`FIELD_EXP_${P++}`;this._fieldDataCache.set(p,{alias:E,clause:l})}}}var N=R.prototype;N.countDistinctValues=function(P){if(!this.returnDistinctValues)return P.length;P.forEach(E=>this.getAttributes(E));return this._returnDistinctMap.size};N.getAttributes=function(P){P=this._processAttributesForOutFields(P);return this._processAttributesForDistinctValues(P)};
N.getFieldValue=function(P,E,h){const l=h?h.name:E;let p=null;this._fieldDataCache.has(l)?p=this._fieldDataCache.get(l)?.clause:h||(p=ia.getWhereClause(E,this.fieldsIndex),this._fieldDataCache.set(l,{alias:l,clause:p}));return h?this.featureAdapter.getAttribute(P,l):p?.calculateValue(P,this.featureAdapter)};N.getDataValue=function(P,E){const h=E.normalizationType,l=E.normalizationTotal;let p=E.field&&this.getFieldValue(P,E.field,this.fieldsIndex.get(E.field));E.field2&&(p=`${aa.processNullValue(p)}${E.fieldDelimiter}${aa.processNullValue(this.getFieldValue(P,
E.field2,this.fieldsIndex.get(E.field2)))}`,E.field3&&(p=`${p}${E.fieldDelimiter}${aa.processNullValue(this.getFieldValue(P,E.field3,this.fieldsIndex.get(E.field3)))}`));h&&Number.isFinite(p)&&(P="field"===h&&E.normalizationField?this.getFieldValue(P,E.normalizationField,this.fieldsIndex.get(E.normalizationField)):null,p=aa.getNormalizedValue(p,h,P,l));return p};N.getExpressionValue=function(P,E,h,l){P={attributes:this.featureAdapter.getAttributes(P),layer:{fields:this.fieldsIndex.fields}};h=l.createExecContext(P,
h);return l.executeFunction(E,h)};N.getExpressionValues=function(P,E,h,l){const p={fields:this.fieldsIndex.fields};return P.map(Q=>{Q={attributes:this.featureAdapter.getAttributes(Q),layer:p};Q=l.createExecContext(Q,h);return l.executeFunction(E,Q)})};N.validateItem=function(P,E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:ia.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E)?.clause?.testFeature(P,this.featureAdapter)??!1};N.validateItems=function(P,
E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:ia.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E)?.clause?.testSet(P,this.featureAdapter)??!1};N._processAttributesForOutFields=function(P){const E=this.outFields;if(!E||!E.length)return this.featureAdapter.getAttributes(P);const h={};for(const l of E){const {alias:p,clause:Q}=this._fieldDataCache.get(l);h[p]=Q?Q.calculateValue(P,this.featureAdapter):this.featureAdapter.getAttribute(P,p)}return h};
N._processAttributesForDistinctValues=function(P){if(e.isNone(P)||!this.returnDistinctValues)return P;var E=this.outFields,h=[];if(E)for(const p of E){var {alias:l}=this._fieldDataCache.get(p);h.push(P[l])}else for(l in P)h.push(P[l]);E=`${(E||["*"]).join(",")}=${h.join(",")}`;h=this._returnDistinctMap.get(E)||0;this._returnDistinctMap.set(E,++h);return 1<h?null:P};return m._createClass(R)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(m,e,ia){function aa(n){return null==n||"string"===typeof n&&!n?"\x3cNull\x3e":n}function R(n){const A=null!=n.minValue||null!=n.maxValue,x=!!n.sqlExpression&&n.supportsSQLExpression;return!(null!=n.normalizationField||null!=n.normalizationType)&&!A&&!x}function N(n){const {values:A,useSampleStdDev:x,supportsNullCount:B}=n;var z=Number.POSITIVE_INFINITY;let w=Number.NEGATIVE_INFINITY,C=null,ba=null;var G=null;let H=null,t=0;const q=null==n.minValue?-Infinity:n.minValue,U=null==n.maxValue?
Infinity:n.maxValue;for(const ha of A)Number.isFinite(ha)?ha>=q&&ha<=U&&(C=null===C?ha:C+ha,z=Math.min(z,ha),w=Math.max(w,ha),t++):"string"===typeof ha&&t++;if(t&&null!=C){ba=C/t;G=0;for(const ha of A)Number.isFinite(ha)&&ha>=q&&ha<=U&&(G+=(ha-ba)**2);H=x?1<t?G/(t-1):0:0<t?G/t:0;G=Math.sqrt(H)}else w=z=null;z={avg:ba,count:t,max:w,min:z,stddev:G,sum:C,variance:H};B&&(z.nullcount=A.length-t);n.percentileParams&&(z.median=P(A,n.percentileParams));return z}function P(n,A){const {fieldType:x,value:B,
orderBy:z,isDiscrete:w}=A,C=E(x,"desc"===z);n=[...n].filter(t=>null!=t).sort((t,q)=>C(t,q));if(0===n.length)return null;if(0>=B)return n[0];if(1<=B)return n[n.length-1];var ba=(n.length-1)*B,G=Math.floor(ba);A=G+1;ba%=1;G=n[G];const H=n[A];return A>=n.length||w||"string"===typeof G||"string"===typeof H?G:G*(1-ba)+H*ba}function E(n,A){const x=A?1:-1,B=p(A),z=l(A);if(!n||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...O].includes(n))return(w,C)=>"number"===
typeof w&&"number"===typeof C?B(w,C):"string"===typeof w&&"string"===typeof C?z(w,C):x;if("esriFieldTypeDate"===n)return(w,C)=>{w=(new Date(w)).getTime();C=(new Date(C)).getTime();return isNaN(w)||isNaN(C)?x:B(w,C)};if(O.has(n))return(w,C)=>B(w,C);if("esriFieldTypeString"===n)return(w,C)=>z(w,C);if("esriFieldTypeGUID"===n||"esriFieldTypeGlobalID"===n){const w=l(A);return(C,ba)=>w(Q(C),Q(ba))}return A?(w,C)=>1:(w,C)=>-1}function h(n,A,x){if(x){if(null==n)return null==A?0:1;if(null==A)return-1}else{if(null==
n)return null==A?0:-1;if(null==A)return 1}return null}function l(n){return n?(A,x)=>{const B=h(A,x,!0);if(null!=B)return B;A=A.toUpperCase();x=x.toUpperCase();return A>x?-1:A<x?1:0}:(A,x)=>{const B=h(A,x,!1);if(null!=B)return B;A=A.toUpperCase();x=x.toUpperCase();return A<x?-1:A>x?1:0}}function p(n){return n?(A,x)=>{const B=h(A,x,!0);return null!=B?B:x-A}:(A,x)=>{const B=h(A,x,!1);return null!=B?B:A-x}}function Q(n){return n.substr(24,12)+n.substr(19,4)+n.substr(16,2)+n.substr(14,2)+n.substr(11,2)+
n.substr(9,2)+n.substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2)}function M(n){return"coded-value"!==n?.type?[]:n.codedValues.map(A=>A.code)}function T(n,A){const x=f({field:A.field,normalizationType:A.normalizationType,normalizationField:A.normalizationField,classificationMethod:A.classificationMethod,standardDeviationInterval:A.standardDeviationInterval,breakCount:A.numClasses||5});n=D(n,A.minValue,A.maxValue);return ia.createGenerateRendererClassBreaks({definition:x,values:n,normalizationTotal:A.normalizationTotal})}
function D(n,A,x){const B=null==A?-Infinity:A,z=null==x?Infinity:x;return n.filter(w=>Number.isFinite(w)&&w>=B&&w<=z)}function f(n){const {breakCount:A,field:x,normalizationField:B,normalizationType:z}=n,w=n.classificationMethod||"equal-interval";return new e({breakCount:A,classificationField:x,classificationMethod:w,normalizationField:"field"===z?B:void 0,normalizationType:z,standardDeviationInterval:"standard-deviation"===w?n.standardDeviationInterval||1:void 0})}function u(n,A){const {field:x,
classificationMethod:B,standardDeviationInterval:z,normalizationType:w,normalizationField:C,normalizationTotal:ba,minValue:G,maxValue:H}=A,t=A.numBins||10;let q=A=null,U=null;B&&"equal-interval"!==B||w?({classBreaks:n}=T(n,{field:x,normalizationType:w,normalizationField:C,normalizationTotal:ba,classificationMethod:B,standardDeviationInterval:z,minValue:G,maxValue:H,numClasses:t}),A=n[0].minValue,q=n[n.length-1].maxValue,U=n.map(ha=>[ha.minValue,ha.maxValue])):(null!=G&&null!=H?(A=G,q=H):(n=N({values:n,
minValue:G,maxValue:H,useSampleStdDev:!w,supportsNullCount:R({normalizationType:w,normalizationField:C,minValue:G,maxValue:H})}),A=n.min??null,q=n.max??null),U=Z(A??0,q??0,t));return{min:A,max:q,intervals:U}}function L(n,A){let x=-1;for(let B=n.length-1;0<=B;B--)if(A>=n[B][0]){x=B;break}return x}function Z(n,A,x){const B=(A-n)/x,z=[];let w;for(let C=1;C<=x;C++)w=n+B,w=Number(w.toFixed(16)),z.push([n,C===x?A:w]),n=w;return z}const I=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,O=new Set(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),J="min max avg stddev count sum variance nullcount median".split(" ");m.calculateClassBreaks=T;m.calculateHistogram=function(n,A){var x=u(n,A);const B=x.intervals,z=x.min??0;x=x.max??0;const w=B.map((C,ba)=>({minValue:B[ba][0],maxValue:B[ba][1],count:0}));for(const C of n)null!=C&&C>=z&&C<=x&&(n=L(B,C),-1<n&&w[n].count++);return{bins:w,minValue:z,maxValue:x,normalizationTotal:A.normalizationTotal}};m.calculatePercentile=P;m.calculateStatistics=
N;m.calculateStringStatistics=function(n){const A=n.returnDistinct?[...(new Set(n.values))]:n.values,x=A.filter(z=>null!=z).length,B={count:x};n.supportsNullCount&&(B.nullcount=A.length-x);n.percentileParams&&(B.median=P(A,n.percentileParams));return B};m.calculateUniqueValuesCount=function(n){const A={};for(let x of n){if(null==x||"string"===typeof x&&""===x.trim())x=null;null==A[x]?A[x]={count:1,data:x}:A[x].count++}return{count:A}};m.createClassBreaksDefinition=f;m.createUVResult=function(n,A,
x,B){n=n.count;const z=[];if(x&&A){x=[];var w=M(A[0]);for(const C of w)if(A[1]){w=M(A[1]);for(const ba of w)if(A[2]){w=M(A[2]);for(const G of w)x.push(`${aa(C)}${B}${aa(ba)}${B}${aa(G)}`)}else x.push(`${aa(C)}${B}${aa(ba)}`)}else x.push(C);for(const C of x)n.hasOwnProperty(C)||(n[C]={data:C,count:0})}for(const C in n)A=n[C],z.push({value:A.data,count:A.count,label:A.label});return{uniqueValueInfos:z}};m.getAttributeComparator=E;m.getEqualIntervalBins=Z;m.getNormalizedValue=function(n,A,x,B){let z=
null;switch(A){case "log":0!==n&&(z=Math.log(n)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(B)&&0!==B&&(z=n/B*100);break;case "field":Number.isFinite(x)&&0!==x&&(z=n/x);break;case "natural-log":0<n&&(z=Math.log(n));break;case "square-root":0<n&&(z=n**.5)}return z};m.isNullCountSupported=R;m.processNullValue=aa;m.processSummaryStatisticsResult=function(n,A){let x;for(x in n)J.includes(x)&&(Number.isFinite(n[x])||(n[x]=null));if(!A)return n;["avg","stddev","variance"].forEach(B=>{null!=
n[B]&&(n[B]=Math.ceil(n[B]))});return n};m.resolveCBResult=function(n,A){let x=n.classBreaks;const B=x[0].minValue,z=x[x.length-1].maxValue,w="standard-deviation"===A;x=x.map(C=>{const ba=C.label;C={minValue:C.minValue,maxValue:C.maxValue,label:ba};if(w&&ba){const G=ba.match(I)?.map(H=>+H.trim())??[];2===G.length?(C.minStdDev=G[0],C.maxStdDev=G[1],0>G[0]&&0<G[1]&&(C.hasAvg=!0)):1===G.length&&(ba.includes("\x3c")?(C.minStdDev=null,C.maxStdDev=G[0]):ba.includes("\x3e")&&(C.minStdDev=G[0],C.maxStdDev=
null))}return C});return{minValue:B,maxValue:z,classBreakInfos:x,normalizationTotal:n.normalizationTotal}};m.statisticTypes=J;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,e,ia,aa,R,N,P,E,h,l){N=new ia.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ia=new ia.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});aa=function(p){function Q(T){T=M.call(this,T);T.type="class-breaks-definition";T.breakCount=
null;T.classificationField=null;T.classificationMethod=null;T.normalizationField=null;T.normalizationType=null;return T}m._inherits(Q,p);var M=m._createSuper(Q);m._createClass(Q,[{key:"standardDeviationInterval",set:function(T){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",T)}},{key:"definedInterval",set:function(T){"defined-interval"===this.classificationMethod&&this._set("definedInterval",T)}}]);return Q}(aa.JSONSupport);e.__decorate([h.enumeration({classBreaksDef:"class-breaks-definition"})],
aa.prototype,"type",void 0);e.__decorate([R.property({json:{write:!0}})],aa.prototype,"breakCount",void 0);e.__decorate([R.property({json:{write:!0}})],aa.prototype,"classificationField",void 0);e.__decorate([R.property({type:String,json:{read:N.read,write:N.write}})],aa.prototype,"classificationMethod",void 0);e.__decorate([R.property({json:{write:!0}})],aa.prototype,"normalizationField",void 0);e.__decorate([R.property({json:{read:ia.read,write:ia.write}})],aa.prototype,"normalizationType",void 0);
e.__decorate([R.property({value:null,json:{write:!0}})],aa.prototype,"standardDeviationInterval",null);e.__decorate([R.property({value:null,json:{write:!0}})],aa.prototype,"definedInterval",null);return aa=e.__decorate([l.subclass("esri.rest.support.ClassBreaksDefinition")],aa)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(m,e,ia){m.enumeration=function(aa,R={}){aa=aa instanceof e.JSONMap?aa:new e.JSONMap(aa,R);aa={type:R?.ignoreUnknown??
!0?aa.apiValues:String,json:{type:aa.jsonValues,read:R?.readOnly?!1:{reader:aa.read},write:{writer:aa.write}}};void 0!==R?.readOnly&&(aa.readOnly=!!R.readOnly);void 0!==R?.default&&(aa.json.default=R.default);void 0!==R?.name&&(aa.json.name=R.name);void 0!==R?.nonNullable&&(aa.nonNullable=R.nonNullable);return ia.property(aa)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(m,e){function ia(M){var T=
M.definition;const {classificationMethod:D,normalizationType:f,definedInterval:u}=T;T=T.breakCount??1;const L=[];var Z=M.values;if(0===Z.length)return[];Z=Z.sort((x,B)=>x-B);var I=Z[0],O=Z[Z.length-1];if("equal-interval"===D)if(Z.length>=T){Z=(O-I)/T;M=I;for(var J=1;J<T;J++){var n=Number((I+J*Z).toFixed(6));L.push({minValue:M,maxValue:n,label:aa(M,n,f)});M=n}L.push({minValue:M,maxValue:O,label:aa(M,O,f)})}else Z.forEach(x=>{L.push({minValue:x,maxValue:x,label:aa(x,x,f)})});else if("natural-breaks"===
D){Z=R(Z);M=N(Z.uniqueValues,M.valueFrequency||Z.valueFrequency,T);for(J=1;J<T;J++)Z.uniqueValues.length>J&&(n=Number(Z.uniqueValues[M[J]].toFixed(6)),L.push({minValue:I,maxValue:n,label:aa(I,n,f)}),I=n);L.push({minValue:I,maxValue:O,label:aa(I,O,f)})}else if("quantile"===D)if(Z.length>=T&&I!==O){M=Math.ceil(Z.length/T);J=0;for(n=1;n<T;n++){var A=M+J-1;A>Z.length&&(A=Z.length-1);0>A&&(A=0);L.push({minValue:I,maxValue:Z[A],label:aa(I,Z[A],f)});I=Z[A];J+=M;M=Math.ceil((Z.length-J)/(T-n))}L.push({minValue:I,
maxValue:O,label:aa(I,O,f)})}else for(T=-1,O=0;O<Z.length;O++)I=Z[O],I!==T&&(T=I,L.push({minValue:T,maxValue:I,label:aa(T,I,f)}),T=I);else if("standard-deviation"===D)if(M=h(Z),J=l(Z,M),0===J)L.push({minValue:Z[0],maxValue:Z[0],label:aa(Z[0],Z[0],f)});else{Z=E(I,O,T,M,J)*J;J=0;for(n=T;1<=n;n--)A=Number((M-(n-.5)*Z).toFixed(6)),L.push({minValue:I,maxValue:A,label:aa(I,A,f)}),I=A,J++;n=Number((M+.5*Z).toFixed(6));L.push({minValue:I,maxValue:n,label:aa(I,n,f)});I=n;J++;for(A=1;A<=T;A++)n=J===2*T?O:Number((M+
(A+.5)*Z).toFixed(6)),L.push({minValue:I,maxValue:n,label:aa(I,n,f)}),I=n,J++}else if("defined-interval"===D){if(!u)return L;T=Z[0];O=Z[Z.length-1];Z=Math.ceil((O-T)/u);I=T;for(M=1;M<Z;M++)J=Number((T+M*u).toFixed(6)),L.push({minValue:I,maxValue:J,label:aa(I,J,f)}),I=J;L.push({minValue:I,maxValue:O,label:aa(I,O,f)})}return L}function aa(M,T,D){let f=null;return f=M===T?D&&"percent-of-total"===D?M+"%":M.toString():D&&"percent-of-total"===D?M+"% - "+T+"%":M+" - "+T}function R(M){const T=[],D=[];let f=
Number.MIN_VALUE,u=1,L=-1;for(let Z=0;Z<M.length;Z++){const I=M[Z];I===f?(u++,D[L]=u):null!==I&&(T.push(I),f=I,u=1,D.push(u),L++)}return{uniqueValues:T,valueFrequency:D}}function N(M,T,D){var f=M.length;const u=[];D>f&&(D=f);for(var L=0;L<D;L++)u.push(Math.round(L*f/D-1));u.push(f-1);L=P(u,M,T,D);f=L.mean;L=L.sdcm;var Z=D,I=0,O=0;let J=0,n=0,A=!0;for(let B=0;2>B&&A;B++){0===B&&(A=!1);for(var x=0;x<Z-1;x++)for(;u[x+1]+1!==u[x+2];)if(u[x+1]+=1,I=p(x,u,M,T),J=I.sbMean,I=I.sbSdcm,O=p(x+1,u,M,T),n=O.sbMean,
O=O.sbSdcm,I+O<L[x]+L[x+1])L[x]=I,L[x+1]=O,f[x]=J,f[x+1]=n,A=!0;else{--u[x+1];break}for(x=Z-1;0<x;x--)for(;u[x]!==u[x-1]+1;)if(--u[x],I=p(x-1,u,M,T),J=I.sbMean,I=I.sbSdcm,O=p(x,u,M,T),n=O.sbMean,O=O.sbSdcm,I+O<L[x-1]+L[x])L[x-1]=I,L[x]=O,f[x-1]=J,f[x]=n,A=!0;else{u[x]+=1;break}}A&&(L=P(u,M,T,D));return u}function P(M,T,D,f){let u=[];var L=[],Z=[];let I=0;const O=[],J=[];for(var n=0;n<f;n++){var A=p(n,M,T,D);O.push(A.sbMean);J.push(A.sbSdcm);I+=J[n]}A=I;for(n=!0;n||I<A;){n=!1;u=[];for(L=0;L<f;L++)u.push(M[L]);
for(Z=0;Z<f;Z++)for(A=M[Z]+1;A<=M[Z+1];A++)if(L=T[A],0<Z&&A!==M[Z+1]&&Math.abs(L-O[Z])>Math.abs(L-O[Z-1]))M[Z]=A;else if(Z<f-1&&M[Z]!==A-1&&Math.abs(L-O[Z])>Math.abs(L-O[Z+1])){M[Z+1]=A-1;break}A=I;I=0;L=[];Z=[];for(let x=0;x<f;x++){L.push(O[x]);Z.push(J[x]);const B=p(x,M,T,D);O[x]=B.sbMean;J[x]=B.sbSdcm;I+=J[x]}}if(I>A){for(T=0;T<f;T++)M[T]=u[T],O[T]=L[T],J[T]=Z[T];I=A}return{mean:O,sdcm:J}}function E(M,T,D,f,u){M=Math.max(f-M,T-f)/u/D;return 1<=M?1:.5<=M?.5:.25}function h(M){let T=0;for(let D=0;D<
M.length;D++)T+=M[D];return T/=M.length}function l(M,T){let D=0;for(let f=0;f<M.length;f++){const u=M[f];D+=(u-T)*(u-T)}D/=M.length;return Math.sqrt(D)}function p(M,T,D,f){var u=0,L=0;for(var Z=T[M]+1;Z<=T[M+1];Z++){const I=f[Z];u+=D[Z]*I;L+=I}0>=L&&Q.warn("Exception in Natural Breaks calculation");u/=L;L=0;for(Z=T[M]+1;Z<=T[M+1];Z++)L+=f[Z]*(D[Z]-u)**2;return{sbMean:u,sbSdcm:L}}const Q=e.getLogger("esri.rest.support.generateRendererUtils");m.createGenerateRendererClassBreaks=function(M){const {normalizationTotal:T}=
M;return{classBreaks:ia(M),normalizationTotal:T}};m.createGenerateRendererUniqueValues=function(M){M=R(M);const T=[],D=M.uniqueValues.length;for(let f=0;f<D;f++){const u=M.uniqueValues[f];T.push({value:u,count:M.valueFrequency[f],label:u.toString()})}return{uniqueValues:T}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(m){m.makeEdgeCandidate=function(e,ia,aa,R,N,P=!1){return{objectId:e,target:ia,
distance:aa,type:"edge",start:R,end:N,draped:P}};m.makeVertexCandidate=function(e,ia,aa){return{objectId:e,target:ia,distance:aa,type:"vertex"}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(m,e,ia,aa,R,N,P){function E(na,ra,Aa){if(na)for(const c of na)(na=(na=R.getDeepValue(c,ra))&&"function"!==typeof na&&
Aa.get(na))&&R.setDeepValue(c,na.name,ra)}function h(na,ra){if(!na||!ra)return[];Ha.clear();l(Ha,na,ra);return Array.from(Ha).sort()}function l(na,ra,Aa){if(Aa)if(ra?.fields?.length)if(Aa.includes("*"))for(const {name:c}of ra.fields)na.add(c);else for(const c of Aa)p(na,ra,c);else if(Aa.includes("*"))na.clear(),na.add("*");else for(const c of Aa)null!=c&&na.add(c)}function p(na,ra,Aa){"string"===typeof Aa&&(ra?(ra=ra.get(Aa))&&na.add(ra.name):na.add(Aa))}async function Q(na,ra,Aa){if(Aa){var {arcadeUtils:c}=
await P.loadArcade();Aa=c.extractFieldNames(Aa,ra?.fields?.map(k=>k.name));for(const k of Aa)p(na,ra,k)}}async function M(na,ra,Aa){if(Aa&&"1\x3d1"!==Aa){const c=(await new Promise((k,da)=>m(["../../core/sql/WhereClause"],k,da))).WhereClause.create(Aa,ra);if(!c.isStandardized)throw new ia("fieldUtils:collectFilterFields","Where clause is not standardized",{where:Aa});l(na,ra,c.fieldNames)}}function T(na,ra){for(const Aa of na)if(Aa&&Aa.valueType&&Aa.valueType===ra)return Aa.name;return null}async function D(na,
ra){if(ra){var Aa=ra.elevationInfo?.featureExpressionInfo;if(Aa)return Aa.collectRequiredFields(na,ra.fieldsIndex)}}async function f(na,ra,Aa){const c=[];Aa?.expressionInfos&&c.push(...Aa.expressionInfos.map(k=>Q(na,ra.fieldsIndex,k.expression)));Aa=Aa?.content;if(Array.isArray(Aa))for(const k of Aa)"expression"===k.type&&k.expressionInfo&&c.push(Q(na,ra.fieldsIndex,k.expressionInfo.expression));await Promise.all(c)}async function u(na,ra,Aa){ra&&Aa&&(Aa.valueExpression?await Q(na,ra.fieldsIndex,
Aa.valueExpression):Aa.field&&p(na,ra.fieldsIndex,Aa.field))}async function L(na,ra){const {labelingInfo:Aa,fieldsIndex:c}=ra;Aa&&Aa.length&&await Promise.all(Aa.map(k=>Z(na,c,k)))}async function Z(na,ra,Aa){if(Aa){var c=Aa.getLabelExpression();Aa=Aa.where;"arcade"===c.type?await Q(na,ra,c.expression):(c=c.expression.match(/{[^}]*}/g))&&c.forEach(k=>{p(na,ra,k.slice(1,-1))});await M(na,ra,Aa)}}function I(na){return"number"===typeof na&&!isNaN(na)&&isFinite(na)}function O(na){return null===na||I(na)}
function J(na){return null===na||Ia(na)}function n(na){return null!=na&&"string"===typeof na}function A(na){return null===na||n(na)}function x(){return!0}function B(na,ra){let Aa;switch(na.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Aa=na.nullable?J:Ia;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Aa=na.nullable?O:I;break;case "string":case "esriFieldTypeString":Aa=
na.nullable?A:n;break;default:Aa=x}return 1===arguments.length?Aa:Aa(ra)}function z(na){return null!=na&&Ma.has(na.type)}function w(na,ra){return null==na||na.nullable&&null===ra?null:z(na)&&!C(na.type,Number(ra))?e.NumericRangeValidationError.OUT_OF_RANGE:B(na,ra)?na.domain?N.validateDomainValue(na.domain,ra):null:e.TypeValidationError.INVALID_TYPE}function C(na,ra){na="string"===typeof na?ba(na):na;if(!na)return!1;const Aa=na.min,c=na.max;return na.isInteger?Ia(ra)&&ra>=Aa&&ra<=c:ra>=Aa&&ra<=c}
function ba(na){switch(na){case "esriFieldTypeSmallInteger":case "small-integer":return Wa;case "esriFieldTypeInteger":case "integer":return Ya;case "esriFieldTypeSingle":case "single":return Ua;case "esriFieldTypeDouble":case "double":return gb}}function G(na,ra,Aa){if(!ra||!ra.attributes||!na){if(aa.isSome(Aa))for(var c of na??[])Aa.add(c);return!0}ra=ra.attributes;c=!1;for(const k of na)if(!(k in ra))if(c=!0,aa.isSome(Aa))Aa.add(k);else break;return c}const H=/^([0-9])/,t=/[^a-z0-9_\u0080-\uffff]/gi,
q=/_{2,}/g,U=/^_/,ha=/_$/,va="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),Da=["field","normalizationField"],Ha=new Set,Ia=(()=>"isInteger"in Number?Number.isInteger:na=>"number"===typeof na&&isFinite(na)&&Math.floor(na)===na)(),Ja=["integer","small-integer","single","double"],Ma=new Set([...Ja,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Wa={min:-32768,max:32767,isInteger:!0},Ya={min:-2147483648,max:2147483647,isInteger:!0},Ua={min:-3.4E38,max:1.2E38,isInteger:!1},gb={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,
isInteger:!1};e.collectArcadeFieldNames=Q;e.collectElevationFields=D;e.collectFeatureReductionFields=async function(na,ra,Aa){if(ra&&Aa&&"fields"in Aa){var c=[];c.push(f(na,ra,Aa.popupTemplate));Aa.fields&&c.push(...Aa.fields.map(async k=>{k.onStatisticExpression?Q(na,ra.fieldsIndex,k.onStatisticExpression.expression):na.add(k.onStatisticField)}));await Promise.all(c)}};e.collectField=p;e.collectFields=l;e.collectFilterFields=async function(na,ra,Aa){ra&&(ra.timeInfo&&aa.isSome(Aa)&&Aa.timeExtent&&
l(na,ra.fieldsIndex,[ra.timeInfo.startField,ra.timeInfo.endField]),ra.floorInfo&&l(na,ra.fieldsIndex,[ra.floorInfo.floorField]),aa.isSome(Aa)&&aa.isSome(Aa.where)&&await M(na,ra.fieldsIndex,Aa.where))};e.collectLabelingFields=L;e.collectOrderByInfos=async function(na,ra,Aa){ra&&Aa&&await Promise.all(Aa.map(c=>u(na,ra,c)))};e.collectPopupTemplateFields=f;e.doubleRange=gb;e.featureHasFields=function(na,ra){return!G(na,ra,null)};e.fixFields=h;e.fixRendererFields=function(na,ra){if(null!=na&&null!=ra)for(const Aa of Array.isArray(na)?
na:[na])if(E(va,Aa,ra),"visualVariables"in Aa&&Aa.visualVariables)for(const c of Aa.visualVariables)E(Da,c,ra)};e.fixTimeInfoFields=function(na,ra){if(null!=na&&ra?.fields?.length)if("startField"in na){var Aa=ra.get(na.startField);ra=ra.get(na.endField);na.startField=Aa?.name??null;na.endField=ra?.name??null}else Aa=ra.get(na.startTimeField),ra=ra.get(na.endTimeField),na.startTimeField=Aa?.name??null,na.endTimeField=ra?.name??null};e.getDisplayFieldName=function({displayField:na,fields:ra}){if(na)return na;
if(!ra||!ra.length)return null;if(!(na=T(ra,"name-or-title")||T(ra,"unique-identifier")||T(ra,"type-or-category")))a:{for(const Aa of ra)if(Aa&&Aa.name&&(ra=Aa.name.toLowerCase(),ra.includes("name")||ra.includes("title"))){na=Aa.name;break a}na=null}return na};e.getElevationFields=async function(na){if(!na)return[];const ra=new Set;await D(ra,na);return Array.from(ra).sort()};e.getExpressionFields=async function(na,ra){const Aa=new Set;for(const c of ra)await Q(Aa,na.fieldsIndex,c);return Array.from(Aa).sort()};
e.getFeatureEditFields=function(na){if(!na)return[];const ra="editFieldsInfo"in na&&na.editFieldsInfo;return ra?h(na.fieldsIndex,[ra&&ra.creatorField,ra&&ra.creationDateField,ra&&ra.editorField,ra&&ra.editDateField]):[]};e.getFeatureGeometryFields=function(na){if(!na)return[];const ra=na.geometryFieldsInfo;return ra?h(na.fieldsIndex,[ra.shapeAreaField,ra.shapeLengthField]):[]};e.getFieldDefaultValue=function(na){const ra=na.defaultValue;if(void 0!==ra&&B(na,ra))return ra;if(na.nullable)return null};
e.getFieldRange=function(na){const ra=N.getDomainRange(na.domain);if(ra)return ra;if(z(na))return ba(na.type)};e.getLabelingFields=async function(na){if(!na)return[];const ra=new Set;await L(ra,na);return Array.from(ra).sort()};e.getNumericTypeForValue=function(na){if(!I(na))return null;if(Ia(na)){if(na>=Wa.min&&na<=Wa.max)return"esriFieldTypeSmallInteger";if(na>=Ya.min&&na<=Ya.max)return"esriFieldTypeInteger"}return na>=Ua.min&&na<=Ua.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=
async function(na){if(!na)return[];const ra="timeInfo"in na&&na.timeInfo;return ra?h(na.fieldsIndex,[na.trackIdField,ra.startField,ra.endField]):[]};e.integerRange=Ya;e.isDateField=function(na){return null!=na&&("date"===na.type||"esriFieldTypeDate"===na.type)};e.isNumberInRange=C;e.isNumericField=z;e.isRasterPixelValueField=function(na){return na?["raster.itempixelvalue","raster.servicepixelvalue"].some(ra=>na.toLowerCase().startsWith(ra)):!1};e.isStringField=function(na){return null!=na&&("string"===
na.type||"esriFieldTypeString"===na.type)};e.isValidFieldValue=function(na,ra){return null===w(na,ra)};e.isValueMatchingFieldType=B;e.normalizeFieldName=function(na){return null==na?null:na.trim().replace(t,"_").replace(q,"_").replace(U,"").replace(ha,"").replace(H,"F$1")||null};e.numericTypes=Ja;e.packFields=function(na,ra,Aa=1){if(!ra||!na)return[];if(ra.includes("*"))return["*"];ra=h(na,ra);return ra.length/na.fields.length>=Aa?["*"]:ra};e.populateMissingFields=G;e.rendererFields=va;e.sanitizeNullFieldValue=
function(na){return null==na||"number"===typeof na&&isNaN(na)?null:na};e.singleRange=Ua;e.smallIntegerRange=Wa;e.unpackFieldNames=function(na,ra){return aa.isNone(ra)||aa.isNone(na)?[]:ra.includes("*")?(na.fields??[]).map(Aa=>Aa.name):ra};e.validateFieldValue=w;e.validationErrorToString=function(na,ra,Aa){switch(na){case N.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Aa} is not in the coded domain - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;case N.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Aa} is out of the range of valid values - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${Aa} is not a valid value for the field type - field: ${ra.name}, type: ${ra.type}, nullable: ${ra.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:const {min:c,max:k}=ba(ra.type);return`Value ${Aa} is out of range for the number type - field: ${ra.name}, type: ${ra.type}, value range is ${c} to ${k}`}};e.visualVariableFields=Da;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(m){m.DomainValidationError=void 0;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(m.DomainValidationError||(m.DomainValidationError={}));m.getDomainRange=function(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}};m.validateDomainValue=function(e,ia){switch(e.type){case "range":const aa="range"in e?e.range[0]:e.minValue;e="range"in
e?e.range[1]:e.maxValue;if(null!=aa&&+ia<aa||null!=e&&+ia>e)return m.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==e.codedValues||e.codedValues.every(R=>null==R||R.code!==ia))return m.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==e.codedValues||e.codedValues.every(R=>null==R||R.code!==ia))return m.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(m,e,ia,aa,R,N,P,E){function h(){p||(p=(async()=>{const M=await new Promise((T,D)=>m(["./arcadeUtils"],T,D));return{arcade:M.arcade,arcadeUtils:M,Dictionary:M.Dictionary,Feature:M.arcadeFeature}})());return p}const l=N.getLogger("esri.support.arcadeOnDemand");let p;aa=(M,T,D)=>Q.create(M,T,D,null,["$feature","$view"]);let Q=function(){function M(D,f,u,L,Z,I,O){this.script=D;this.evaluate=L;this.fields=Array.isArray(I)?I:I.fields;this._syntaxTree=u;this._arcade=f;this._arcadeFeature=Z;this._spatialReference=
O;this._referencesGeometry=f.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}M.create=async function(D,f,u,L,Z,I){const {arcade:O,Feature:J,Dictionary:n}=await h(),A=E.fromJSON(f);let x;try{x=O.parseScript(D,I)}catch(G){return l.error(new R("arcade-bad-expression","Failed to parse arcade script",{script:D,error:G})),null}Z=Z.reduce((G,H)=>({...G,[H]:null}),{});let B=null;P.isSome(L)&&(B=new n(L),B.immutable=!0,Z.$config=null);I=
(L=O.scriptUsesGeometryEngine(x))&&O.enableGeometrySupport();const z=O.scriptUsesFeatureSet(x)&&O.enableFeatureSetSupport(),w=(f=O.scriptIsAsync(x))&&O.enableAsyncSupport();Z={vars:Z,spatialReference:A,useAsync:!!w};await Promise.all([I,z,w]);I=new Set;await O.loadDependentModules(I,x,null,f,L);const C=new n;C.immutable=!1;C.setField("scale",0);const ba=O.compileScript(x,Z);return new M(D,O,x,G=>{"$view"in G&&G.$view&&(C.setField("scale","object"===typeof G.$view?G.$view.scale:void 0),G.$view=C);
B&&(G.$config=B);return ba({vars:G,spatialReference:A})},new J,u,A)};var T=M.prototype;T.repurposeFeature=function(D){D.geometry&&!D.geometry.spatialReference&&(D.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(D.geometry,D.attributes,{fields:this.fields});return this._arcadeFeature};T.referencesGeometry=function(){return this._referencesGeometry};T.referencesScale=function(){return this._referencesScale};return ia._createClass(M)}();e.ArcadeExpression=
Q;e.createDictionaryExpression=(M,T,D,f)=>Q.create(M,T,D,f,["$feature","$view"]);e.createLabelExpression=(M,T,D)=>Q.create(M,T,D,null,["$feature"]);e.createRendererExpression=aa;e.createVVExpression=aa;e.loadArcade=h;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(m,e,ia,aa,R,N,P,E,h,l,p,Q){function M(){return new Promise((L,Z)=>m(["../../../geometry/geometryEngineJSON"],L,Z))}const T={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var D={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},f={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},u={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.canQueryWithRBush=
function(L){if(N.isExtent(L))return!0;if(N.isPolygon(L)){for(const Z of L.rings)if(5!==Z.length||Z[0][0]!==Z[1][0]||Z[0][0]!==Z[4][0]||Z[2][0]!==Z[3][0]||Z[0][1]!==Z[3][1]||Z[0][1]!==Z[4][1]||Z[1][1]!==Z[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(L,Z,I){const {spatialRel:O,geometry:J}=L;if(J){if(null==O||!0!==D[O])throw new ia("feature-store:unsupported-query","Unsupported query spatial relationship",{query:L});if(P.isValid(J.spatialReference)&&P.isValid(I)){if(null==
J||!0!==f[N.getJsonType(J)])throw new ia("feature-store:unsupported-query","Unsupported query geometry type",{query:L});if(null==Z||!0!==u[Z])throw new ia("feature-store:unsupported-query","Unsupported layer geometry type",{query:L});if(L.outSR)return p.checkProjectionSupport(L.geometry&&L.geometry.spatialReference,L.outSR)}}};e.getSpatialQueryOperator=function(L,Z,I,O,J){if(N.isPolygon(Z)&&"esriGeometryPoint"===I&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L)){const n=h.convertFromPolygon(new l,
Z,!1,!1);return Promise.resolve(A=>E.polygonContainsPoint(n,!1,!1,A))}if(N.isPolygon(Z)&&"esriGeometryMultipoint"===I){const n=h.convertFromPolygon(new l,Z,!1,!1);if("esriSpatialRelContains"===L)return Promise.resolve(A=>E.polygonContainsMultipoint(n,!1,!1,A,O,J))}if(N.isExtent(Z)&&"esriGeometryPoint"===I&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L))return Promise.resolve(n=>aa.extentContainsPoint(Z,Q.getGeometry(I,O,J,n)));if(N.isExtent(Z)&&"esriGeometryMultipoint"===I&&"esriSpatialRelContains"===
L)return Promise.resolve(n=>aa.extentContainsMultipoint(Z,Q.getGeometry(I,O,J,n)));if(N.isExtent(Z)&&"esriSpatialRelIntersects"===L){const n=R.getExtentIntersector(I);return Promise.resolve(A=>n(Z,Q.getGeometry(I,O,J,A)))}return M().then(n=>{const A=n[T[L]].bind(null,Z.spatialReference,Z);return x=>A(Q.getGeometry(I,O,J,x))})};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(m,e){m.extentIntersectsExtent=
e.extentIntersectsExtent;m.extentIntersectsMultipoint=e.extentIntersectsMultipoint;m.extentIntersectsPoint=e.extentIntersectsPoint;m.extentIntersectsPolygon=e.extentIntersectsPolygon;m.extentIntersectsPolyline=e.extentIntersectsPolyline;m.extentIntersectsRings=e.extentIntersectsRings;m.getFeatureExtentIntersector=e.getFeatureExtentIntersector;m.isSelfIntersecting=e.isSelfIntersecting;m.segmentIntersects=e.segmentIntersects;m.getExtentIntersector=function(ia){return"mesh"===ia?e.extentIntersectsExtent:
e.getFeatureExtentIntersector(ia)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(m){function e(ia,aa,R,N,P){if(!ia)return!1;aa=aa?R?4:3:R?3:2;const {coords:E,lengths:h}=ia;R=!1;ia=0;for(const p of h){var l=ia;for(let Q=ia,M=ia+p*aa;Q<M;Q+=aa){l=Q+aa;l===M&&(l=ia);const T=E[Q],D=E[Q+1],f=E[l];l=E[l+1];(D<P&&l>=P||l<P&&D>=P)&&T+(P-D)/(l-D)*(f-T)<N&&(R=!R)}ia+=p*aa}return R}m.polygonContainsCoords=e;m.polygonContainsMultipoint=
function(ia,aa,R,N,P,E){P=P?E?4:3:E?3:2;const {coords:h,lengths:l}=N;if(!l)return!1;for(let p=0,Q=0;p<l.length;p++,Q+=P)if(!e(ia,aa,R,h[Q],h[Q+1]))return!1;return!0};m.polygonContainsPoint=function(ia,aa,R,N){return e(ia,aa,R,N.coords[0],N.coords[1])};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(m){function e(R,N,P,E,h){if(null!=E&&null!=h)return l=>{const p=R.getAttribute(l,N);l=R.getAttribute(l,P);
return(null==p||p<=h)&&(null==l||l>=E)};if(null!=E)return l=>{l=R.getAttribute(l,P);return null==l||l>=E};if(null!=h)return l=>{l=R.getAttribute(l,N);return null==l||l<=h}}function ia(R,N,P,E){if(null!=P&&null!=E&&P===E)return h=>R.getAttribute(h,N)===P;if(null!=P&&null!=E)return h=>{h=R.getAttribute(h,N);return h>=P&&h<=E};if(null!=P)return h=>R.getAttribute(h,N)>=P;if(null!=E)return h=>R.getAttribute(h,N)<=E}function aa(){return()=>!1}m.getTimeExtent=async function(R,N){if(!R)return null;const P=
N.featureAdapter,{startTimeField:E,endTimeField:h}=R;let l=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(E&&h)await N.forEach(Q=>{const M=P.getAttribute(Q,E);Q=P.getAttribute(Q,h);null==M||isNaN(M)||(l=Math.min(l,M));null==Q||isNaN(Q)||(p=Math.max(p,Q))});else{const Q=E||h;await N.forEach(M=>{M=P.getAttribute(M,Q);null==M||isNaN(M)||(l=Math.min(l,M),p=Math.max(p,M))})}return{start:l,end:p}};m.getTimeOperator=function(R,N,P){if(!N||!R)return null;const {startTimeField:E,endTimeField:h}=R;
if(!E&&!h)return null;const {start:l,end:p}=N;return null===l&&null===p?null:void 0===l&&void 0===p?aa():E&&h?e(P,E,h,l,p):ia(P,E||h,l,p)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(m,e){function ia(R){return"oid"===R.type||"esriFieldTypeOID"===R.type}function aa(R){return"global-id"===R.type||"esriFieldTypeGlobalID"===R.type}return function(){function R(P=[]){this.fields=
[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(P){this.fields=P;var E=[];for(const h of P){P=h?.name;const l=e.normalizeFieldName(h?.name)?.toLowerCase()??"";if(P&&l){const p=P.trim().toLowerCase();this._fieldsMap.set(P,h);this._fieldsMap.set(p,h);this._normalizedFieldsMap.set(l,h);E.push(p);"date"===h.type||"esriFieldTypeDate"===h.type?(this.dateFields.push(h),
this._dateFieldsSet.add(h)):e.isNumericField(h)&&(this._numericFieldsSet.add(h),this.numericFields.push(h));ia(h)||aa(h)||(h.editable=null==h.editable||!!h.editable,h.nullable=null==h.nullable||!!h.nullable)}}E.sort();this.uid=E.join(",")}}var N=R.prototype;N.destroy=function(){this._fieldsMap.clear()};N.has=function(P){return null!=this.get(P)};N.get=function(P){if(P){var E=this._fieldsMap.get(P);if(E)return E;(E=this._fieldsMap.get(P.trim().toLowerCase())??this._normalizedFieldsMap.get(e.normalizeFieldName(P)?.toLowerCase()??
""))&&this._fieldsMap.set(P,E);return E}};N.isDateField=function(P){return this._dateFieldsSet.has(this.get(P))};N.isNumericField=function(P){return this._numericFieldsSet.has(this.get(P))};N.normalizeFieldName=function(P){if(P=this.get(P))return P.name??void 0};m._createClass(R,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const P of this.fields)ia(P)||aa(P)||P.nullable||void 0!==e.getFieldDefaultValue(P)||this._requiredFields.push(P)}return this._requiredFields}}]);
return R}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),function(m,e,ia,aa,R,N,P,E,h,l,p,Q,M,T,D){function f(B){return u.has(B)?u.get(B):
"number"===typeof B?B:1}m.Task=void 0;(function(B){B[B.YIELD=1]="YIELD"})(m.Task||(m.Task={}));m.TaskPriority=void 0;(function(B){B.RESOURCE_CONTROLLER_IMMEDIATE="immediate";B.RESOURCE_CONTROLLER="schedule";B.SLIDE="slide";B.STREAM_DATA_LOADER="stream loader";B.ELEVATION_QUERY="elevation query";B.TERRAIN_SURFACE="terrain";B.SURFACE_GEOMETRY_UPDATES="surface geometry updates";B.LOD_RENDERER="LoD renderer";B.GRAPHICS_CORE="Graphics3D";B.I3S_CONTROLLER="I3S";B.POINT_CLOUD_LAYER="point cloud";B.FEATURE_TILE_FETCHER=
"feature fetcher";B.OVERLAY="overlay";B.STAGE="stage";B.GRAPHICS_DECONFLICTOR="graphics deconflictor";B.FILTER_VISIBILITY="Graphics3D filter visibility";B.SCALE_VISIBILITY="Graphics3D scale visibility";B.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";B.POINT_OF_INTEREST_FREQUENT="POI frequent";B.POINT_OF_INTEREST_INFREQUENT="POI infrequent";B.LABELER="labeler";B.FEATURE_QUERY_ENGINE="feature query";B.FEATURE_TILE_TREE="feature tile tree";B.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";B.ELEVATION_ALIGNMENT=
"elevation alignment";B.TEXT_TEXTURE_ATLAS="text texture atlas";B.TEXTURE_UNLOAD="texture unload";B.LINE_OF_SIGHT_TOOL="line of sight tool";B.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";B.ELEVATION_PROFILE="elevation profile";B.SNAPPING="snapping";B.SHADOW_ACCUMULATOR="shadow accumulator";B.CLOUDS_GENERATOR="clouds generator";B[B.TEST_PRIO=1]="TEST_PRIO"})(m.TaskPriority||(m.TaskPriority={}));const u=new Map([[m.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[m.TaskPriority.RESOURCE_CONTROLLER,
4],[m.TaskPriority.SLIDE,0],[m.TaskPriority.STREAM_DATA_LOADER,0],[m.TaskPriority.ELEVATION_QUERY,0],[m.TaskPriority.TERRAIN_SURFACE,1],[m.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[m.TaskPriority.LOD_RENDERER,2],[m.TaskPriority.GRAPHICS_CORE,2],[m.TaskPriority.I3S_CONTROLLER,2],[m.TaskPriority.POINT_CLOUD_LAYER,2],[m.TaskPriority.FEATURE_TILE_FETCHER,2],[m.TaskPriority.OVERLAY,4],[m.TaskPriority.STAGE,4],[m.TaskPriority.GRAPHICS_DECONFLICTOR,4],[m.TaskPriority.FILTER_VISIBILITY,4],[m.TaskPriority.SCALE_VISIBILITY,
4],[m.TaskPriority.FRUSTUM_VISIBILITY,4],[m.TaskPriority.CLOUDS_GENERATOR,4],[m.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[m.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[m.TaskPriority.LABELER,8],[m.TaskPriority.FEATURE_QUERY_ENGINE,8],[m.TaskPriority.FEATURE_TILE_TREE,16],[m.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[m.TaskPriority.ELEVATION_ALIGNMENT,12],[m.TaskPriority.TEXT_TEXTURE_ATLAS,12],[m.TaskPriority.TEXTURE_UNLOAD,12],[m.TaskPriority.LINE_OF_SIGHT_TOOL,16],[m.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,
0],[m.TaskPriority.SNAPPING,0],[m.TaskPriority.SHADOW_ACCUMULATOR,30]]),L=p.Milliseconds(6.5),Z=p.Milliseconds(1),I=p.Milliseconds(30),O=p.Milliseconds(1E3/30),J=p.Milliseconds(100);var n;(function(B){let z=function(){function ba(){this._updating=new Q.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new P("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new C;this._state=D.RenderState.INTERACTING;this._tasks=new E;this._runQueue=new E;
this._load=0;this._idleStateCallbacks=new E;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=l.watch(()=>T.SCHEDULER_LOG_SLOW_TASKS,t=>this._debug=t,l.initial);for(const t of Object.keys(m.TaskPriority))this.performanceInfo.tasks.set(m.TaskPriority[t],new P(m.TaskPriority[t]));const H=this;this._test={FRAME_SAFETY_BUDGET:L,INTERACTING_BUDGET:O,IDLE_BUDGET:J,get availableBudget(){return H._budget.budget},usedBudget:0,getBudget:()=>H._budget,setBudget:t=>H._budget=t,updateTask:t=>
this._updateTask(t),getState:t=>this._getState(t),getRuntime:t=>this._getRuntime(t),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var G=ba.prototype;G._updatingChanged=function(){this._updating.set(this._tasks.some(H=>H.needsUpdate))};G.destroy=function(){this._tasks.toArray().forEach(H=>H.remove());this._tasks.clear();N.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};G.taskRunningChanged=function(H){this._updatingChanged();
H&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};G.registerTask=function(H,t){const q=f(H);t=new w(this,H,t,q);this._tasks.push(t);this._updatingChanged();this.performanceInfo.tasks.has(H)||this.performanceInfo.tasks.set(H,new P(H));return t};G.registerIdleStateCallbacks=function(H,t){const q={idleBegin:H,idleEnd:t};this._idleStateCallbacks.push(q);
this.state===D.RenderState.IDLE&&this._idleUpdatesStartFired&&q.idleBegin();const U=this;return{remove:()=>this._removeIdleStateCallbacks(q),set idleBegin(ha){U._idleUpdatesStartFired&&(q.idleEnd(),U._state===D.RenderState.IDLE&&ha());q.idleBegin=ha},set idleEnd(ha){q.idleEnd=ha}}};G.updateBudget=function(H){this._test.usedBudget=0;++this._frameNumber;let t=L,q=H.frameDuration,U=Z;switch(this.state){case D.RenderState.IDLE:t=p.Milliseconds(0);q=p.Milliseconds(Math.max(J,H.frameDuration));U=I;break;
case D.RenderState.INTERACTING:q=p.Milliseconds(Math.max(O,H.frameDuration))}q=p.Milliseconds(q-H.elapsedFrameTime-t);if(this.state!==D.RenderState.IDLE&&q<Z&&!this._forceTask)return this._forceTask=!0,!1;q=p.Milliseconds(Math.max(q,U));this._budget.reset(q,this.state);this._updateLoad();return this._schedule()};G.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case D.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(H=>
H.idleBegin()));this._runIdle();break;case D.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};G.stopFrame=function(){this._budget.reset(p.Milliseconds(0),this._state);this._budget.madeProgress()};G._removeIdleStateCallbacks=function(H){this._idleUpdatesStartFired&&H.idleEnd();this._idleStateCallbacks.removeUnordered(H)};G.removeTask=function(H){this._tasks.removeUnordered(H);this._runQueue.removeUnordered(H);this._updatingChanged()};
G._updateTask=function(H){this._tasks.forAll(t=>{t.name===H&&t.setPriority(H)})};G._getState=function(H){if(this._runQueue.some(q=>q.name===H))return m.TaskState.SCHEDULED;let t=m.TaskState.IDLE;this._tasks.forAll(q=>{q.name===H&&q.needsUpdate&&(1>=q.schedulePriority?t=m.TaskState.READY:t!==m.TaskState.READY&&(t=m.TaskState.WAITING))});return t};G._getRuntime=function(H){let t=0;this._tasks.forAll(q=>{q.name===H&&(t+=q.runtime)});return t};G._resetRuntimes=function(){this._tasks.forAll(H=>H.runtime=
0)};G._getRunning=function(){const H=new Map;this._tasks.forAll(q=>{q.needsUpdate&&H.set(q.name,(H.get(q.name)||0)+1)});if(0===H.size)return null;let t="";H.forEach((q,U)=>{t=1<q?t+` ${q}x ${U}`:t+` ${U}`});return t};G._runIdle=function(){this._run()};G._runInteracting=function(){this._run()};G._runAnimating=function(){this._run()};G._updateLoad=function(){const H=this._tasks.reduce((t,q)=>q.needsUpdate?++t:t,0);this._load=.9*this._load+H*(1-.9)};G._schedule=function(){this._runQueue.filterInPlace(H=>
{if(H.needsUpdate)return!0;H.schedulePriority=H.basePriority;return!1});for(this._tasks.forAll(H=>{0===H.basePriority&&H.needsUpdate&&!this._runQueue.includes(H)&&H.blockFrame!==this._frameNumber&&this._runQueue.unshift(H)});0===this._runQueue.length;){let H=!1;this._tasks.forAll(t=>{if(t.needsUpdate&&0!==t.schedulePriority&&0!==t.basePriority&&t.blockFrame!==this._frameNumber)switch(H=!0,t.schedulePriority){case 1:t.schedulePriority=0;this._runQueue.push(t);break;default:--t.schedulePriority}});
if(!H)return this._updatingChanged(),!1}this._updatingChanged();return!0};G._run=function(){const H=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var t=this._budget.now();const q=this._runQueue.pop();this._budget.resetProgress();try{q.task.runTask(this._budget)===m.Task.YIELD&&(q.blockFrame=this._frameNumber)}catch(U){R.getLogger("esri.views.support.Scheduler").error(`Exception in task "${q.name}"`,U)}!this._budget.hasProgressed&&q.blockFrame!==this._frameNumber&&
q.needsUpdate&&(q.blockFrame=this._frameNumber);q.schedulePriority=q.basePriority;t=this._budget.now()-t;q.runtime+=t;this._frameTaskTimes.set(q.priority,this._frameTaskTimes.get(q.priority)+t);this._debug&&t>2*this._budget.budget&&console.log("Task",q.name,"used",t,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-H);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
H)};G._startFrameTaskTimes=function(){for(const H of Object.keys(m.TaskPriority))this._frameTaskTimes.set(m.TaskPriority[H],0)};G._recordFrameTaskTimes=function(H){this._frameTaskTimes.forEach((t,q)=>this.performanceInfo.tasks.get(q).record(t));this.performanceInfo.total.record(H)};e._createClass(ba,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(H){this._state!==H&&(this._state=
H,this.state!==D.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(t=>t.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ba}();B.Scheduler=z;let w=function(){function ba(H,t,q,U){this._scheduler=H;this.name=t;this._basePriority=U;this.runtime=this.blockFrame=0;this._queue=new M.PromiseQueue;this._handles=new ia;this.schedulePriority=this._basePriority;this._task=new Q.ObservableValue(N.isSome(q)?q:this._queue);this._handles.add(l.when(()=>
this.task.running,ha=>H.taskRunningChanged(ha)))}var G=ba.prototype;G.remove=function(){this.processQueue(A);this._scheduler.removeTask(this);this.schedule=x.schedule;this.reschedule=x.reschedule;this._handles.destroy()};G.setPriority=function(H){this.name=H;H=f(H);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=H;this._basePriority=H};G.schedule=function(H,t,q){return this._queue.push(H,t,q)};G.reschedule=function(H,t,q){return this._queue.unshift(H,t,q)};G.processQueue=
function(H){this._queue.runTask(H)};e._createClass(ba,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(H){this.setPriority(H)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ba}(),C=function(){function ba(){this._begin="undefined"!==typeof performance?performance.now():0;
this._budget=0;this._state=D.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var G=ba.prototype;G.run=function(H){if(this.done)return!1;!0===H()&&this.madeProgress();return!0};G.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};G.reset=function(H,t){this._begin=this.now();this._budget=H;this._state=t;this.resetProgress()};G.now=function(){return performance.now()};G.resetProgress=function(){this._done=this._progressed=!1};e._createClass(ba,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(H){this._enabled=H}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return ba}();B.Budget=C})(n||(n={}));m.TaskState=void 0;
(function(B){B.SCHEDULED="s";B.READY="r";B.WAITING="w";B.IDLE="i"})(m.TaskState||(m.TaskState={}));const A=(()=>{const B=new n.Budget;B.enabled=!1;return B})(),x=new (function(){function B(){}var z=B.prototype;z.remove=function(){};z.processQueue=function(){};z.schedule=function(w,C,ba){try{if(h.isAborted(C)){const G=h.createAbortError();return ba?Promise.resolve(ba(G)):Promise.reject(G)}return h.when(w(A))}catch(G){return Promise.reject(G)}};z.reschedule=function(w,C,ba){return this.schedule(w,C,
ba)};return e._createClass(B)}());m.ImmediateTask=x;m.getTaskPriority=f;m.newScheduler=function(){return new n.Scheduler};m.noBudget=A;m.taskPriorities=u;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(m,e,ia,aa,R,N,P){function E(M,T,D={}){return h(M,T,D,p)}function h(M,T,D={},f){let u=null;const L=D.once?(Z,
I)=>{f(Z)&&(aa.removeMaybe(u),T(Z,I))}:(Z,I)=>{f(Z)&&T(Z,I)};u=N.watchTracked(M,L,D.sync,D.equals);D.initial&&(M=M(),L(M,M));return u}function l(M,T,D){if(R.isAborted(D))return Promise.reject(R.createAbortError());const f=M();if(T?.(f))return Promise.resolve(f);let u=null;return new Promise((L,Z)=>{u=ia.handlesGroup([R.onAbort(D,()=>{u=aa.removeMaybe(u);Z(R.createAbortError())}),h(M,I=>{u=aa.removeMaybe(u);L(I)},{sync:!1,once:!0},T??p)])})}function p(M){return!0}function Q(M){return!!M}m.autorun=
P.autorun;m.initial={initial:!0};m.on=function(M,T,D,f={}){function u(){Z&&I&&(I.remove(),f.onListenerRemove?.(Z),I=Z=null)}function L(n){f.once&&f.once&&aa.removeMaybe(O);D(n)}let Z=null,I=null,O=null;const J=E(M,(n,A)=>{u();e.isEventTarget(n)&&(Z=n,I=e.on(n,T,L),f.onListenerAdd?.(n))},{sync:f.sync,initial:!0});return O=ia.makeHandle(()=>{J.remove();u()})};m.once=function(M,T){return l(M,null,T)};m.pausable=function(M,T,D={}){let f=!1;const u=E(M,(L,Z)=>{f||T(L,Z)},D);return{remove(){u.remove()},
pause(){f=!0},resume(){f=!1}}};m.sync={sync:!0};m.syncAndInitial={sync:!0,initial:!0};m.watch=E;m.when=function(M,T,D={}){return h(M,T,D,Q)};m.whenOnce=function(M,T){return l(M,Q,T)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../tracking","./SimpleObservable"],function(m,e,ia,aa){let R=function(){function N(E){this._observable=new aa.SimpleObservable;
this._value=E}var P=N.prototype;P.get=function(){ia.trackAccess(this._observable);return this._value};P.set=function(E){E!==this._value&&(this._value=E,this._observable.notify())};return e._createClass(N)}();m.ObservableValue=R;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(m,e,ia,aa){let R=
function(){function P(){this._tasks=[];this._running=new aa.ObservableValue(!1)}var E=P.prototype;E.destroy=function(){this.cancelAll()};E.runTask=function(h){for(;!h.done&&this._process(h);)h.madeProgress()};E.push=function(h,l,p){this._running.set(!0);return new Promise((Q,M)=>this._tasks.push(new N(Q,M,h,l,p)))};E.unshift=function(h,l,p){this._running.set(!0);return new Promise((Q,M)=>this._tasks.unshift(new N(Q,M,h,l,p)))};E._process=function(h){if(0===this._tasks.length)return!1;const l=this._tasks.shift();
try{const p=ia.isAborted(l.signal);if(p&&!l.abortCallback)l.reject(ia.createAbortError());else{const Q=p?l.abortCallback?.(ia.createAbortError()):l.callback(h);ia.isPromiseLike(Q)?Q.then(l.resolve,l.reject):l.resolve(Q)}}catch(p){l.reject(p)}this._running.set(0<this._tasks.length);return!0};E.cancelAll=function(){const h=ia.createAbortError();for(const l of this._tasks)if(l.abortCallback){const p=l.abortCallback(h);l.resolve(p)}else l.reject(h);this._tasks.length=0;this._running.set(!1)};e._createClass(P,
[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return P}(),N=e._createClass(function(P,E,h,l,p){this.resolve=P;this.reject=E;this.callback=h;this.signal=l;this.abortCallback=p});m.PromiseQueue=R;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,e,ia,aa,R,N,P,E){ia=function(h){function l(){var Q=p.apply(this,arguments);Q.SCHEDULER_LOG_SLOW_TASKS=!1;Q.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return Q}m._inherits(l,h);var p=m._createSuper(l);return m._createClass(l)}(ia);e.__decorate([aa.property()],ia.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([aa.property()],ia.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ia=e.__decorate([E.subclass("esri.views.support.DebugFlags")],ia);
return new ia})},"esri/views/support/RenderState":function(){define(["exports"],function(m){m.RenderState=void 0;var e=m.RenderState||(m.RenderState={});e[e.ANIMATING=0]="ANIMATING";e[e.INTERACTING=1]="INTERACTING";e[e.IDLE=2]="IDLE";Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],
function(m,e,ia,aa,R){const N=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let P=1;m.createCapabilities=function(E,h){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:E},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0},query:aa.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:h,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,
supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};m.createDefaultAttributesFunction=function(E,h){if(e("esri-csp-restrictions"))return()=>({[h]:null,...E});try{let l=`this.${h} = null;`;for(const Q in E){const M=N.test(Q)?`.${Q}`:`["${Q}"]`;l+=`this${M} = ${JSON.stringify(E[Q])};`}const p=(new Function(`\n      return class AttributesClass$${P++} {\n        constructor() {\n          ${l};\n        }\n      }\n    `))();return()=>new p}catch(l){return()=>({[h]:null,...E})}};m.createDefaultTemplate=
function(E={}){return[{name:"New Feature",description:"",prototype:{attributes:ia.clone(E)}}]};m.createDrawingInfo=function(E){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===E||"esriGeometryMultipoint"===E?R.defaultPointSymbolJSON:"esriGeometryPolyline"===E?R.defaultPolylineSymbolJSON:R.defaultPolygonSymbolJSON}}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(m){const e=[252,146,31,255],ia={type:"esriSMS",
style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},aa={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};m.defaultColor=e;m.defaultOutlineColor=[153,153,153,255];m.defaultPointSymbolJSON=ia;m.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};m.defaultPolylineSymbolJSON=aa;m.defaultTextSymbolJSON={type:"esriTS",color:[255,
255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};m.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};m.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};m.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(m,e,ia,aa,R,N){function P(T){return new l(T)}async function E(){aa.isNone(M)&&(M=await new Promise((T,D)=>m(["../../../../geometry/geometryEngineJSON"],T,D)));return M}let h=ia._createClass(function(){this.description=
this.code=null}),l=ia._createClass(function(T){this.error=new h;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=T}),p=ia._createClass(function(T){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=T});const Q=new Set;let M;e.createFeatureEditErrorResult=P;e.createFeatureEditSuccessResult=function(T){return new p(T)};e.loadGeometryEngineForSimplify=async function(T,D){!R.isValid(T)||"esriGeometryPolygon"!==D&&"esriGeometryPolyline"!==D||await E()};
e.mixAttributes=function(T,D,f,u=!1,L){Q.clear();for(const J in f){const n=T.get(J);if(!n)continue;var Z=f[J],I=n,O=Z;let A=O;"string"===typeof O&&N.isNumericField(I)?A=parseFloat(O):null!=O&&N.isStringField(I)&&"string"!==typeof O&&(A=String(O));I=N.sanitizeNullFieldValue(A);I!==Z&&L&&L.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:n,originalValue:Z,sanitizedValue:I}});Q.add(n.name);if(n&&(u||n.editable)){if(Z=N.validateFieldValue(n,
I))return P(N.validationErrorToString(Z,n,I));D[n.name]=I}}for(const J of T?.requiredFields??[])if(!Q.has(J.name))return P(`missing required field "${J.name}"`);return null};e.simplify=function(T,D){if(!T||!R.isValid(D))return T;if("rings"in T||"paths"in T){if(aa.isNone(M))throw new TypeError("geometry engine not loaded");return M.simplify(D,T)}return T};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],
function(m,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});m.kebabDict=e;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(m,e,ia,aa,R,N,P,E,h,l,p,Q,M,T,D){function f(O){return aa.isPoint(O)?null!=
O.z:!!O.hasZ}function u(O){return aa.isPoint(O)?null!=O.m:!!O.hasM}const L=R.WGS84,Z={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:R.WGS84},I={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function O(){this._nextObjectId=this._queryEngine=null}var J=O.prototype;J.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};J.load=async function(n){var A=
[];const {features:x}=n;var B=this._inferLayerProperties(x,n.fields);const z=n.fields||[],w=null!=n.hasM?n.hasM:!!B.hasM,C=null!=n.hasZ?n.hasZ:!!B.hasZ;var ba=!n.spatialReference&&!B.spatialReference;const G=ba?L:n.spatialReference||B.spatialReference,H=ba?Z:null,t=n.geometryType||B.geometryType;let q=n.objectIdField||B.objectIdField;n=n.timeInfo;if(t&&(ba&&A.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!t))throw new e("feature-layer:missing-property",
"geometryType not set and couldn't be inferred from the provided features");if(!q)throw new e("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");B.objectIdField&&q!==B.objectIdField&&(A.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${q}" doesn't match the field name "${B.objectIdField}", found in the provided fields`}),q=B.objectIdField);if(q&&!B.objectIdField){let ha=null;z.some(va=>va.name===q?(ha=va,!0):!1)?
(ha.type="esriFieldTypeOID",ha.editable=!1,ha.nullable=!1):z.unshift({alias:q,name:q,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const ha of z){null==ha.name&&(ha.name=ha.alias);null==ha.alias&&(ha.alias=ha.name);if(!ha.name)throw new e("feature-layer:invalid-field-name","field name is missing",{field:ha});ha.name===q&&(ha.type="esriFieldTypeOID");if(!T.kebabDict.jsonValues.includes(ha.type))throw new e("feature-layer:invalid-field-type",`invalid type for field "${ha.name}"`,{field:ha});
}B={};for(var U of z)"esriFieldTypeOID"!==U.type&&"esriFieldTypeGlobalID"!==U.type&&(ba=D.getFieldDefaultValue(U),void 0!==ba&&(B[U.name]=ba));this._fieldsIndex=new M(z);this._createDefaultAttributes=p.createDefaultAttributesFunction(B,q);n&&(n.startTimeField&&((U=this._fieldsIndex.get(n.startTimeField))?(n.startTimeField=U.name,U.type="esriFieldTypeDate"):n.startTimeField=null),n.endTimeField&&((U=this._fieldsIndex.get(n.endTimeField))?(n.endTimeField=U.name,U.type="esriFieldTypeDate"):n.endTimeField=
null),n.trackIdField&&((U=this._fieldsIndex.get(n.trackIdField))?n.trackIdField=U.name:(n.trackIdField=null,A.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:n}}))),n.startTimeField||n.endTimeField||(A.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:n}}),n=null));A={warnings:A,featureErrors:[],layerDefinition:{...I,drawingInfo:p.createDrawingInfo(t),templates:p.createDefaultTemplate(B),
extent:H,geometryType:t,objectIdField:q,fields:z,hasZ:C,hasM:w,timeInfo:n},assignedObjectIds:{}};this._queryEngine=new l.QueryEngine({fields:z,geometryType:t,hasM:w,hasZ:C,objectIdField:q,spatialReference:G,featureStore:new E({geometryType:t,hasM:w,hasZ:C}),timeInfo:n,cacheSpatialQueries:!0});if(!x||!x.length)return this._nextObjectId=P.initialObjectId,A;this._nextObjectId=P.findLastObjectIdFromFeatures(q,x)+1;await h.checkProjectionSupport(x,G);return this._loadInitialFeatures(A,x)};J.applyEdits=
async function(n){const {spatialReference:A,geometryType:x}=this._queryEngine;await Promise.all([Q.loadGeometryEngineForSimplify(A,x),h.checkProjectionSupport(n.adds,A),h.checkProjectionSupport(n.updates,A)]);return this._applyEdits(n)};J.queryFeatures=function(n,A={}){return this._queryEngine.executeQuery(n,A.signal)};J.queryFeatureCount=function(n,A={}){return this._queryEngine.executeQueryForCount(n,A.signal)};J.queryObjectIds=function(n,A={}){return this._queryEngine.executeQueryForIds(n,A.signal)};
J.queryExtent=function(n,A={}){return this._queryEngine.executeQueryForExtent(n,A.signal)};J.querySnapping=function(n,A={}){return this._queryEngine.executeQueryForSnapping(n,A.signal)};J._inferLayerProperties=function(n,A){let x=void 0,B=void 0,z=null,w=null,C=null;for(const ba of n)if(n=ba.geometry,!ia.isNone(n)&&(z||(z=aa.getJsonType(n)),w||(w=n.spatialReference),null==x&&(x=f(n)),null==B&&(B=u(n)),z&&w&&null!=x&&null!=B))break;if(A&&A.length){let ba=null;A.some(G=>{const H="esriFieldTypeOID"===
G.type,t=!G.type&&G.name&&"objectid"===G.name.toLowerCase();ba=G;return H||t})&&(C=ba.name)}return{geometryType:z,spatialReference:w,objectIdField:C,hasM:B,hasZ:x}};J._loadInitialFeatures=async function(n,A){const {geometryType:x,hasM:B,hasZ:z,objectIdField:w,spatialReference:C,featureStore:ba}=this._queryEngine,G=[];for(const q of A){null!=q.uid&&(n.assignedObjectIds[q.uid]=-1);if(q.geometry&&x!==aa.getJsonType(q.geometry)){n.featureErrors.push(Q.createFeatureEditErrorResult("Incorrect geometry type."));
continue}A=this._createDefaultAttributes();const U=Q.mixAttributes(this._fieldsIndex,A,q.attributes,!0,n.warnings);U?n.featureErrors.push(U):(this._assignObjectId(A,q.attributes,!0),q.attributes=A,null!=q.uid&&(n.assignedObjectIds[q.uid]=q.attributes[w]),ia.isSome(q.geometry)&&(q.geometry=h.project(q.geometry,q.geometry.spatialReference,C)),G.push(q))}ba.addMany(N.convertFromFeatures([],G,x,z,B,w));const {fullExtent:H,timeExtent:t}=await this._queryEngine.fetchRecomputedExtents();n.layerDefinition.extent=
H;if(t){const {start:q,end:U}=t;n.layerDefinition.timeInfo.timeExtent=[q,U]}return n};J._applyEdits=async function(n){const {adds:A,updates:x,deletes:B}=n;n={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};A&&A.length&&this._applyAddEdits(n,A);x&&x.length&&this._applyUpdateEdits(n,x);if(B&&B.length){for(const C of B)n.deleteResults.push(Q.createFeatureEditSuccessResult(C));this._queryEngine.featureStore.removeManyById(B)}const {fullExtent:z,timeExtent:w}=await this._queryEngine.fetchRecomputedExtents();
return{extent:z,timeExtent:w,featureEditResults:n}};J._applyAddEdits=function(n,A){const {addResults:x}=n,{geometryType:B,hasM:z,hasZ:w,objectIdField:C,spatialReference:ba,featureStore:G}=this._queryEngine,H=[];for(const t of A){if(t.geometry&&B!==aa.getJsonType(t.geometry)){x.push(Q.createFeatureEditErrorResult("Incorrect geometry type."));continue}A=this._createDefaultAttributes();const q=Q.mixAttributes(this._fieldsIndex,A,t.attributes);q?x.push(q):(this._assignObjectId(A,t.attributes),t.attributes=
A,null!=t.uid&&(n.uidToObjectId[t.uid]=t.attributes[C]),ia.isSome(t.geometry)&&(A=t.geometry.spatialReference??ba,t.geometry=h.project(Q.simplify(t.geometry,A),A,ba)),H.push(t),x.push(Q.createFeatureEditSuccessResult(t.attributes[C])))}G.addMany(N.convertFromFeatures([],H,B,w,z,C))};J._applyUpdateEdits=function({updateResults:n},A){const {geometryType:x,hasM:B,hasZ:z,objectIdField:w,spatialReference:C,featureStore:ba}=this._queryEngine;for(const H of A){const {attributes:t,geometry:q}=H;A=t&&t[w];
if(null==A){n.push(Q.createFeatureEditErrorResult(`Identifier field ${w} missing`));continue}if(!ba.has(A)){n.push(Q.createFeatureEditErrorResult(`Feature with object id ${A} missing`));continue}const U=N.convertToFeature(ba.getFeature(A),x,z,B);if(ia.isSome(q)){if(x!==aa.getJsonType(q)){n.push(Q.createFeatureEditErrorResult("Incorrect geometry type."));continue}var G=q.spatialReference??C;U.geometry=h.project(Q.simplify(q,G),G,C)}if(t&&(G=Q.mixAttributes(this._fieldsIndex,U.attributes,t))){n.push(G);
continue}ba.add(N.convertFromFeature(U,x,z,B,w));n.push(Q.createFeatureEditSuccessResult(A))}};J._assignObjectId=function(n,A,x=!1){const B=this._queryEngine.objectIdField;x?A&&isFinite(A[B])?n[B]=A[B]:n[B]=this._nextObjectId++:n[B]=this._nextObjectId++};return m._createClass(O)}()});