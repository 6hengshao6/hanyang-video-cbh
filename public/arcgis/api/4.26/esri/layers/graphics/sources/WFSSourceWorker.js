// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(h,e,ca,V,E,J,P,D){function l(F){return{ok:!0,value:F}}function k(F){return{ok:!1,error:F}}function n(F){return E.isSome(F)&&!0===F.ok?F.value:null}function R(F){return E.isSome(F)&&!1===F.ok?F.error:null}let M=function(F){function x(p,G){var z=f.call(this,
{});z._result=null;z._abortHandle=null;z.abort=()=>{z._abortController=E.abortMaybe(z._abortController)};z.remove=z.abort;z._abortController=new AbortController;const {signal:v}=z._abortController;z.promise=p(v);z.promise.then(I=>{z._result=l(I);z._cleanup()},I=>{z._result=k(I);z._cleanup()});z._abortHandle=J.onAbort(G,z.abort);return z}e._inherits(x,F);var f=e._createSuper(x);F=x.prototype;F.normalizeCtorArgs=function(){return{}};F.destroy=function(){this.abort()};F._cleanup=function(){this._abortHandle=
E.removeMaybe(this._abortHandle);this._abortController=null};e._createClass(x,[{key:"value",get:function(){return n(this._result)}},{key:"error",get:function(){return R(this._result)}},{key:"finished",get:function(){return E.isSome(this._result)}}]);return x}(V);ca.__decorate([P.property()],M.prototype,"value",null);ca.__decorate([P.property()],M.prototype,"error",null);ca.__decorate([P.property()],M.prototype,"finished",null);ca.__decorate([P.property()],M.prototype,"promise",void 0);ca.__decorate([P.property()],
M.prototype,"_result",void 0);M=ca.__decorate([D.subclass("esri.core.asyncUtils.ReactiveTask")],M);h.assertResult=function(F){if(!0===F.ok)return F.value;throw F.error;};h.createTask=function(F,x){return new M(F,x)};h.forEach=function(F,x,f){return J.eachAlways(F.map((p,G)=>x.apply(f,[p,G])))};h.makeResultError=k;h.makeResultOk=l;h.map=async function(F,x,f){return(await J.eachAlways(F.map((p,G)=>x.apply(f,[p,G])))).map(p=>p.value)};h.result=async function(F){if(E.isNone(F))return{ok:!1,error:Error("no promise provided")};
try{return l(await F)}catch(x){return k(x)}};h.resultError=R;h.resultOrAbort=async function(F){try{return l(await F)}catch(x){return J.throwIfAbortError(x),k(x)}};h.resultValue=n;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(h,e,ca,V,E,J,P,D,l,k){function n(w,T){return w?T?4:3:T?3:2}function R(w,T,aa,X){if(w){if(aa)return T&&X?m:Fa;if(T&&X)return c}else if(T&&X)return Fa;return sa}function M({scale:w,translate:T},aa){return Math.round((aa-T[0])/w[0])}function F({scale:w,translate:T},aa){return Math.round((T[1]-aa)/w[1])}function x({scale:w,translate:T},aa,X){return aa*w[X]+T[X]}function f(w){w=w.coords;return{x:w[0],y:w[1]}}function p(w,T){w.coords[0]=T.x;w.coords[1]=T.y;return w}function G(w){w=w.coords;return{x:w[0],
y:w[1],z:w[2]}}function z(w,T){w.coords[0]=T.x;w.coords[1]=T.y;w.coords[2]=T.z;return w}function v(w){w=w.coords;return{x:w[0],y:w[1],m:w[2]}}function I(w,T){w.coords[0]=T.x;w.coords[1]=T.y;w.coords[2]=T.m;return w}function H(w){w=w.coords;return{x:w[0],y:w[1],z:w[2],m:w[3]}}function u(w,T){w.coords[0]=T.x;w.coords[1]=T.y;w.coords[2]=T.z;w.coords[3]=T.m;return w}function S(w,T){return w&&T?u:w?z:T?I:p}function B(w,T,aa,X,ha){aa=S(aa,X);for(const {geometry:ma,attributes:oa}of T)T=V.isSome(ma)?aa(new k,
ma):null,w.push(new D.OptimizedFeature(T,oa,null,ha?oa[ha]:void 0));return w}function Q(w,T,aa,X){for(const {geometry:ha,attributes:ma}of T)w.push({attributes:ma,geometry:V.isSome(ha)?C(ha,aa,X):null});return w}function C(w,T,aa){if(V.isNone(w))return null;const X=n(T,aa),ha=[];for(let ma=0;ma<w.coords.length;ma+=X){const oa=[];for(let za=0;za<X;za++)oa.push(w.coords[ma+za]);ha.push(oa)}return T?aa?{points:ha,hasZ:T,hasM:aa}:{points:ha,hasZ:T}:aa?{points:ha,hasM:aa}:{points:ha}}function y(w,T,aa,
X,ha){aa=n(aa,X);for(const {geometry:ma,attributes:oa}of T)T=V.isSome(ma)?K(new k,ma,aa):null,w.push(new D.OptimizedFeature(T,oa,null,ha?oa[ha]:void 0));return w}function K(w,T,aa=n(T.hasZ,T.hasM)){w.lengths[0]=T.points.length;const X=w.coords;let ha=0;for(const ma of T.points)for(T=0;T<aa;T++)X[ha++]=ma[T];return w}function da(w,T,aa){if(!w)return null;const X=n(T,aa),{coords:ha,lengths:ma}=w;w=[];let oa=0;for(const za of ma){const wa=[];for(let Ia=0;Ia<za;Ia++){const Ga=[];for(let Ja=0;Ja<X;Ja++)Ga.push(ha[oa++]);
wa.push(Ga)}w.push(wa)}return T?aa?{paths:w,hasZ:T,hasM:aa}:{paths:w,hasZ:T}:aa?{paths:w,hasM:aa}:{paths:w}}function O(w,T,aa,X,ha){aa=n(aa,X);for(const {geometry:ma,attributes:oa}of T)T=V.isSome(ma)?N(new k,ma,aa):null,w.push(new D.OptimizedFeature(T,oa,null,ha?oa[ha]:void 0));return w}function N(w,T,aa=n(T.hasZ,T.hasM)){const {lengths:X,coords:ha}=w;let ma=0;for(const oa of T.paths){for(const za of oa)for(T=0;T<aa;T++)ha[ma++]=za[T];X.push(oa.length)}return w}function r(w,T,aa){if(!w)return null;
const X=n(T,aa),{coords:ha,lengths:ma}=w;w=[];let oa=0;for(const za of ma){const wa=[];for(let Ia=0;Ia<za;Ia++){const Ga=[];for(let Ja=0;Ja<X;Ja++)Ga.push(ha[oa++]);wa.push(Ga)}w.push(wa)}return T?aa?{rings:w,hasZ:T,hasM:aa}:{rings:w,hasZ:T}:aa?{rings:w,hasM:aa}:{rings:w}}function t(w,T,aa,X,ha){for(const {geometry:ma,centroid:oa,attributes:za}of T){T=V.isSome(ma)?Y(new k,ma,aa,X):null;const wa=ha?za[ha]:void 0;V.isSome(oa)?w.push(new D.OptimizedFeature(T,za,p(new k,oa),wa)):w.push(new D.OptimizedFeature(T,
za,null,wa))}return w}function Y(w,T,aa=T.hasZ,X=T.hasM){ja(w,T.rings,aa,X);return w}function ja(w,T,aa,X){aa=n(aa,X);const {lengths:ha,coords:ma}=w;X=0;Qa(w);for(const oa of T){for(const za of oa)for(T=0;T<aa;T++)ma[X++]=za[T];ha.push(oa.length)}return w}function ya(w,T,aa,X,ha,ma){Pa(w);if(!aa){for(const oa of T)w.push(new D.OptimizedFeature(null,oa.attributes,null,ma?oa.attributes[ma]:void 0));return w}switch(aa){case "esriGeometryPoint":return B(w,T,X,ha,ma);case "esriGeometryMultipoint":return y(w,
T,X,ha,ma);case "esriGeometryPolyline":return O(w,T,X,ha,ma);case "esriGeometryPolygon":return t(w,T,X,ha,ma);default:ab.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${aa}'`)),Pa(w)}return w}function pa(w,T,aa,X){w=w&&("coords"in w?w:w.geometry);if(V.isNone(w))return null;switch(T){case "esriGeometryPoint":return T=f,aa&&X?T=H:aa?T=G:X&&(T=v),T(w);case "esriGeometryMultipoint":return C(w,aa,X);case "esriGeometryPolyline":return da(w,aa,X);case "esriGeometryPolygon":return r(w,
aa,X);default:return ab.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${T}'`)),null}}function ta(w,T,aa,X,ha){Pa(w);if(V.isNone(aa)){for(const oa of T)w.push({attributes:oa.attributes});return w}switch(aa){case "esriGeometryPoint":aa=f;X&&ha?aa=H:X?aa=G:ha&&(aa=v);for(var ma of T){const {geometry:oa,attributes:za}=ma;X=V.isSome(oa)?aa(oa):null;w.push({attributes:za,geometry:X})}break;case "esriGeometryMultipoint":return Q(w,T,X,ha);case "esriGeometryPolyline":for(const {geometry:oa,
attributes:za}of T)w.push({attributes:za,geometry:V.isSome(oa)?da(oa,X,ha):null});break;case "esriGeometryPolygon":for(const {geometry:oa,attributes:za,centroid:wa}of T)ma=V.isSome(oa)?r(oa,X,ha):null,V.isSome(wa)?(T=f(wa),w.push({attributes:za,centroid:T,geometry:ma})):w.push({attributes:za,geometry:ma});break;default:ab.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${aa}'`))}return w}function xa(w,T,aa,X,ha,ma,oa=aa,za=X){Qa(w);if(V.isNone(T)||!T.coords.length)return null;
ha=na[ha];const {coords:wa,lengths:Ia}=T;T=n(aa,X);const Ga=n(aa&&oa,X&&za);aa=R(aa,X,oa,za);if(!Ia.length)return aa(w.coords,wa,0,0,M(ma,wa[0]),F(ma,wa[1])),Qa(w,T,0),w;let Ja,Ua=0,Ra,Wa=0;for(const Va of Ia){if(Va<ha)continue;let Na=0;Ra=Wa;za=X=M(ma,wa[Ua]);Ja=oa=F(ma,wa[Ua+1]);aa(w.coords,wa,Ra,Ua,za,Ja);Na++;Ua+=T;Ra+=Ga;for(let Xa=1;Xa<Va;Xa++,Ua+=T)if(za=M(ma,wa[Ua]),Ja=F(ma,wa[Ua+1]),za!==X||Ja!==oa)aa(w.coords,wa,Ra,Ua,za-X,Ja-oa),Ra+=Ga,Na++,X=za,oa=Ja;Na>=ha&&(w.lengths.push(Na),Wa=Ra)}Pa(w.coords,
Wa);return w.coords.length?w:null}function Da(w,T,aa,X,ha,ma,oa){let za=X,wa=0;for(let Ga=ma+aa;Ga<oa;Ga+=aa){var Ia=T[Ga];const Ja=T[Ga+1],Ua=T[oa],Ra=T[oa+1];let Wa=T[ma],Va=T[ma+1],Na=Ua-Wa,Xa=Ra-Va;if(0!==Na||0!==Xa){const bb=((Ia-Wa)*Na+(Ja-Va)*Xa)/(Na*Na+Xa*Xa);1<bb?(Wa=Ua,Va=Ra):0<bb&&(Wa+=Na*bb,Va+=Xa*bb)}Na=Ia-Wa;Xa=Ja-Va;Ia=Na*Na+Xa*Xa;Ia>za&&(wa=Ga,za=Ia)}za>X&&(wa-ma>aa&&Da(w,T,aa,X,ha,ma,wa),ha(w,T,w.length,wa,T[wa],T[wa+1]),oa-wa>aa&&Da(w,T,aa,X,ha,wa,oa))}function Ca(w,T,aa,X,ha){const {coords:ma,
lengths:oa}=T;aa=n(aa,X);if(!ma.length)return w!==T&&Qa(w),w;V.assertIsSome(ha);const {originPosition:za,scale:wa,translate:Ia}=ha;ha=ua;ha.originPosition=za;X=ha.scale;X[0]=wa[0]??1;X[1]=-(wa[1]??1);X[2]=wa[2]??1;X[3]=wa[3]??1;var Ga=ha.translate;Ga[0]=Ia[0]??0;Ga[1]=Ia[1]??0;Ga[2]=Ia[2]??0;Ga[3]=Ia[3]??0;if(!oa.length){for(X=0;X<aa;++X)w.coords[X]=x(ha,ma[X],X);w!==T&&Qa(w,aa,0);return w}Ga=0;for(let Ua=0;Ua<oa.length;Ua++){const Ra=oa[Ua];w.lengths[Ua]=Ra;for(var Ja=0;Ja<aa;++Ja)w.coords[Ga+Ja]=
x(ha,ma[Ga+Ja],Ja);Ja=w.coords[Ga];let Wa=w.coords[Ga+1];Ga+=aa;for(let Va=1;Va<Ra;Va++,Ga+=aa){Ja+=ma[Ga]*X[0];Wa+=ma[Ga+1]*X[1];w.coords[Ga]=Ja;w.coords[Ga+1]=Wa;for(let Na=2;Na<aa;++Na)w.coords[Ga+Na]=x(ha,ma[Ga+Na],Na)}}w!==T&&Qa(w,ma.length,oa.length);return w}function La(w,T,aa,X){let ha=0,ma=w[X*T],oa=w[X*(T+1)];for(let za=1;za<aa;za++){const wa=ma+w[X*(T+za)],Ia=oa+w[X*(T+za)+1],Ga=(wa-ma)*(Ia+oa);ma=wa;oa=Ia;ha+=Ga}return.5*ha}function Qa(w,T=0,aa=0){Pa(w.lengths,aa);Pa(w.coords,T)}function Pa(w,
T=0){w.length!==T&&(w.length=T)}const ab=ca.getLogger("esri.layers.graphics.featureConversionUtils"),na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},sa=(w,T,aa,X,ha,ma)=>{w[aa]=ha;w[aa+1]=ma},Fa=(w,T,aa,X,ha,ma)=>{w[aa]=ha;w[aa+1]=ma;w[aa+2]=T[X+2]},c=(w,T,aa,X,ha,ma)=>{w[aa]=ha;w[aa+1]=ma;w[aa+2]=T[X+3]},m=(w,T,aa,X,ha,ma)=>{w[aa]=ha;w[aa+1]=ma;w[aa+2]=T[X+2];w[aa+3]=T[X+3]},ea=[],ka=[],ua={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,
0]};h.convertFromFeature=function(w,T,aa,X,ha){ea[0]=w;[w]=ya(ka,ea,T,aa,X,ha);Pa(ea);Pa(ka);return w};h.convertFromFeatureSet=function(w,T){const aa=new l,{hasM:X,hasZ:ha,features:ma,objectIdFieldName:oa,spatialReference:za,geometryType:wa,exceededTransferLimit:Ia,transform:Ga,fields:Ja}=w;Ja&&(aa.fields=Ja);aa.geometryType=wa??null;aa.objectIdFieldName=oa??T??null;aa.spatialReference=za??null;if(!aa.objectIdFieldName)return ab.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
aa;ma&&ya(aa.features,ma,wa,ha,X,aa.objectIdFieldName);Ia&&(aa.exceededTransferLimit=Ia);X&&(aa.hasM=X);ha&&(aa.hasZ=ha);Ga&&(aa.transform=Ga);return aa};h.convertFromFeatures=ya;h.convertFromGeometry=function(w,T,aa){if(V.isNone(w))return null;const X=new k;"hasZ"in w&&null==T&&(T=w.hasZ);"hasM"in w&&null==aa&&(aa=w.hasM);if(P.isPoint(w))return S(null!=T?T:null!=w.z,null!=aa?aa:null!=w.m)(X,w);if(P.isPolygon(w))return Y(X,w,T,aa);if(P.isPolyline(w))return N(X,w,n(T,aa));if(P.isMultipoint(w))return K(X,
w,n(T,aa));ab.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${w}'`))};h.convertFromGraphics=function(w,T,aa,X,ha,ma){const oa=w.length;switch(aa){case "esriGeometryPoint":B(w,T,X,ha,ma);break;case "esriGeometryMultipoint":y(w,T,X,ha,ma);break;case "esriGeometryPolyline":O(w,T,X,ha,ma);break;case "esriGeometryPolygon":t(w,T,X,ha,ma);break;default:ab.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${aa}'`))}for(X=
0;X<T.length;X++)w[X+oa].geometryType=aa,w[X+oa].insertAfter=T[X].insertAfter,w[X+oa].groupId=T[X].groupId;return w};h.convertFromMultipoint=K;h.convertFromMultipointFeatures=y;h.convertFromNestedArray=ja;h.convertFromPoint=function(w,T,aa=S(null!=T.z,null!=T.m)){return aa(w,T)};h.convertFromPointFeatures=B;h.convertFromPolygon=Y;h.convertFromPolyline=N;h.convertFromPolylineFeatures=O;h.convertToFeature=function(w,T,aa,X){ka[0]=w;ta(ea,ka,T,aa,X);w=ea[0];Pa(ea);Pa(ka);return w};h.convertToFeatureSet=
function(w){const {objectIdFieldName:T,spatialReference:aa,transform:X,fields:ha,hasM:ma,hasZ:oa,features:za,geometryType:wa,exceededTransferLimit:Ia,uniqueIdField:Ga,queryGeometry:Ja,queryGeometryType:Ua}=w;w=ta([],za,wa,oa,ma);const Ra=pa(Ja,Ua,!1,!1);w={features:w,fields:ha,geometryType:wa,objectIdFieldName:T,spatialReference:aa,uniqueIdField:Ga,queryGeometry:Ra};X&&(w.transform=X);Ia&&(w.exceededTransferLimit=Ia);ma&&(w.hasM=ma);oa&&(w.hasZ=oa);return w};h.convertToFeatures=ta;h.convertToGeometry=
pa;h.convertToMultipoint=C;h.convertToMultipointFeatures=Q;h.convertToPoint=function(w,T,aa){return w?T?aa?H(w):G(w):aa?v(w):f(w):null};h.convertToPolygon=r;h.convertToPolyline=da;h.deltaDecodeGeometry=function(w,T){if(V.isNone(w))return null;const aa=w.clone(),X=w.coords;w=w.lengths;let ha=0;for(let za=0;za<w.length;za++){const wa=w[za];var ma=X[T*ha],oa=X[T*ha+1];for(let Ia=1;Ia<wa;Ia++)ma+=X[T*(ha+Ia)],oa+=X[T*(ha+Ia)+1],aa.coords[T*(ha+Ia)]=ma,aa.coords[T*(ha+Ia)+1]=oa;ha+=wa}return aa};h.deltaEncodeGeometry=
function(w,T){const aa=w.clone(),X=w.coords;w=w.lengths;let ha=0;for(let oa=0;oa<w.length;oa++){const za=w[oa];let wa=X[T*ha];var ma=X[T*ha+1];for(let Ia=1;Ia<za;Ia++){const Ga=X[T*(ha+Ia)],Ja=X[T*(ha+Ia)+1];ma=Ja-ma;aa.coords[T*(ha+Ia)]=Ga-wa;aa.coords[T*(ha+Ia)+1]=ma;wa=Ga;ma=Ja}ha+=za}return aa};h.generalizeOptimizedGeometry=function(w,T,aa,X,ha,ma,oa=aa,za=X){Qa(w);if(!T||!T.coords.length)return null;ha=na[ha];const {coords:wa,lengths:Ia}=T;T=n(aa,X);const Ga=n(aa&&oa,X&&za);aa=R(aa,X,oa,za);
if(!Ia.length)return aa(w.coords,wa,0,0,wa[0],wa[1]),Qa(w,T,0),w;X=0;ma*=ma;for(const Ja of Ia){if(Ja<ha){X+=Ja*T;continue}oa=w.coords.length/Ga;za=X;const Ua=X+(Ja-1)*T;aa(w.coords,wa,w.coords.length,za,wa[za],wa[za+1]);Da(w.coords,wa,T,ma,aa,za,Ua);aa(w.coords,wa,w.coords.length,Ua,wa[Ua],wa[Ua+1]);za=w.coords.length/Ga-oa;za>=ha?w.lengths.push(za):Pa(w.coords,oa*Ga);X+=Ja*T}return w.coords.length?w:null};h.getBoundsOptimizedGeometry=function(w,T,aa,X){if(V.isNone(T)||!T.coords||!T.coords.length)return null;
aa=n(aa,X);let ha=X=Number.POSITIVE_INFINITY,ma=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY;if(T&&T.coords){T=T.coords;for(let za=0;za<T.length;za+=aa){const wa=T[za],Ia=T[za+1];X=Math.min(X,wa);ma=Math.max(ma,wa);ha=Math.min(ha,Ia);oa=Math.max(oa,Ia)}}E.is(w)?E.fromRectValues(w,X,ha,ma,oa):J.fromValues(X,ha,ma,oa,w);return w};h.getQuantizedArea=function(w,T){const {coords:aa,lengths:X}=w;let ha=w=0;for(let ma=0;ma<X.length;ma++){const oa=X[ma];ha+=La(aa,w,oa,T);w+=oa}return Math.abs(ha)};
h.getQuantizedBoundsOptimizedGeometry=function(w,T,aa,X){aa=n(aa,X);const {lengths:ha,coords:ma}=T;X=T=Number.POSITIVE_INFINITY;let oa=Number.NEGATIVE_INFINITY,za=Number.NEGATIVE_INFINITY,wa=0;for(const Ia of ha){let Ga=ma[wa],Ja=ma[wa+1];T=Math.min(Ga,T);X=Math.min(Ja,X);oa=Math.max(Ga,oa);za=Math.max(Ja,za);wa+=aa;for(let Ua=1;Ua<Ia;Ua++,wa+=aa){const Ra=ma[wa],Wa=ma[wa+1];Ga+=Ra;Ja+=Wa;0>Ra&&(T=Math.min(T,Ga));0<Ra&&(oa=Math.max(oa,Ga));0>Wa?X=Math.min(X,Ja):0<Wa&&(za=Math.max(za,Ja))}}w[0]=T;
w[1]=X;w[2]=oa;w[3]=za;return w};h.getSignedQuantizedRingArea=La;h.quantizeOptimizedFeatureSet=function(w,T){const {geometryType:aa,features:X,hasM:ha,hasZ:ma}=T;if(!w)return T;for(let oa=0;oa<X.length;oa++){const za=X[oa],wa=za.weakClone();wa.geometry=new k;xa(wa.geometry,za.geometry,ha,ma,aa,w);za.centroid&&(wa.centroid=new k,xa(wa.centroid,za.centroid,ha,ma,"esriGeometryPoint",w));X[oa]=wa}T.transform=w;return T};h.quantizeOptimizedGeometry=xa;h.quantizeX=M;h.quantizeY=F;h.removeCollinearVectices=
function(w,T,aa,X,ha){if(!T||!T.coords||!T.coords.length)return null;aa=na[aa];const {coords:ma,lengths:oa}=T;T=R(X,ha,X,ha);X=n(X,ha);let za=ha=0,wa=0,Ia=0;for(const Ua of oa){za=Ia;T(w.coords,ma,za,ha,ma[ha],ma[ha+1]);ha+=X;var Ga=ma[ha];let Ra=ma[ha+1],Wa=Ga,Va=Ra;var Ja=Ra/Ga;za+=X;T(w.coords,ma,za,ha,Wa,Va);ha+=X;for(let Na=2;Na<Ua;Na++){Ga=ma[ha];Ra=ma[ha+1];const Xa=Ra/Ga,bb=Ja===Xa||!isFinite(Ja)&&!isFinite(Xa);Ja=bb&&isFinite(Xa)?0<=Ja&&0<=Xa||0>=Ja&&0>=Xa:0<=Va&&0<=Ra||0>=Va&&0>=Ra;bb&&
Ja?(Wa+=Ga,Va+=Ra):(Wa=Ga,Va=Ra,za+=X);T(w.coords,ma,za,ha,Wa,Va);ha+=X;Ja=Xa}za+=X;Ga=(za-Ia)/X;Ga>=aa&&(w.lengths[wa]=Ga,Ia=za,wa++)}w.coords.length>Ia&&(w.coords.length=Ia);w.lengths.length>wa&&(w.lengths.length=wa);return w.coords.length&&w.lengths.length?w:null};h.removeZMValues=function(w,T,aa,X,ha,ma){Qa(w);w.lengths.push(...T.lengths);if(aa===ha&&X===ma)for(var oa=0;oa<T.coords.length;oa++)w.coords.push(T.coords[oa]);else for(oa=n(aa,X),aa=R(aa,X,ha,ma),T=T.coords,X=0;X<T.length;X+=oa)aa(w.coords,
T,w.coords.length,X,T[X],T[X+1]);return w};h.unquantizeOptimizedFeatureSet=function(w){const {transform:T,features:aa,hasM:X,hasZ:ha}=w;if(!T)return w;for(const ma of aa)V.isSome(ma.geometry)&&Ca(ma.geometry,ma.geometry,X,ha,T),V.isSome(ma.centroid)&&Ca(ma.centroid,ma.centroid,X,ha,T);w.transform=null;return w};h.unquantizeOptimizedGeometry=Ca;h.unquantizeValue=x;h.unquantizeX=function(w,T){return x(w,T,0)};h.unquantizeY=function(w,T){return x(w,-T,1)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(h,e,ca,V){function E(f=F){return[f[0],f[1],f[2],f[3],f[4],f[5]]}function J(f,p,G,z,v,I,H=E()){H[0]=f;H[1]=p;H[2]=G;H[3]=z;H[4]=v;H[5]=I;return H}function P(f){return f[0]>=f[3]?0:f[3]-f[0]}function D(f){return f[1]>=f[4]?0:f[4]-f[1]}function l(f){return f[2]>=f[5]?0:f[5]-f[2]}function k(f,p){return Math.max(p[0],f[0])<=Math.min(p[3],f[3])&&Math.max(p[1],f[1])<=Math.min(p[4],
f[4])&&Math.max(p[2],f[2])<=Math.min(p[5],f[5])}function n(f,p){f[0]=p[0];f[1]=p[1];f[2]=p[2];f[3]=p[3];f[4]=p[4];f[5]=p[5];return f}function R(f){return 6===f.length}const M=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],F=[0,0,0,0,0,0],x=E();h.NEGATIVE_INFINITY=M;h.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];h.ZERO=F;h.allFinite=function(f){for(let p=0;6>p;p++)if(!isFinite(f[p]))return!1;return!0};h.center=function(f,p=[0,0,0]){p[0]=f[0]+P(f)/2;p[1]=
f[1]+D(f)/2;p[2]=f[2]+l(f)/2;return p};h.contains=function(f,p){return p[0]>=f[0]&&p[1]>=f[1]&&p[2]>=f[2]&&p[3]<=f[3]&&p[4]<=f[4]&&p[5]<=f[5]};h.containsPoint=function(f,p){return p[0]>=f[0]&&p[1]>=f[1]&&p[2]>=f[2]&&p[0]<=f[3]&&p[1]<=f[4]&&p[2]<=f[5]};h.containsPointWithMargin=function(f,p,G){return p[0]>=f[0]-G&&p[1]>=f[1]-G&&p[2]>=f[2]-G&&p[0]<=f[3]+G&&p[1]<=f[4]+G&&p[2]<=f[5]+G};h.create=E;h.depth=D;h.diameter=function(f){const p=P(f),G=l(f);f=D(f);return Math.sqrt(p*p+G*G+f*f)};h.empty=function(f){return f?
n(f,M):E(M)};h.equals=function(f,p,G){if(e.isNone(f)||e.isNone(p))return f===p;if(!R(f)||!R(p))return!1;if(G)for(let z=0;z<f.length;z++){if(!G(f[z],p[z]))return!1}else for(G=0;G<f.length;G++)if(f[G]!==p[G])return!1;return!0};h.expandWithAABB=function(f,p){f[0]=Math.min(f[0],p[0]);f[1]=Math.min(f[1],p[1]);f[2]=Math.min(f[2],p[2]);f[3]=Math.max(f[3],p[3]);f[4]=Math.max(f[4],p[4]);f[5]=Math.max(f[5],p[5])};h.expandWithBuffer=function(f,p,G=0,z=p.length/3){let v=f[0],I=f[1],H=f[2],u=f[3],S=f[4],B=f[5];
for(let Q=0;Q<z;Q++)v=Math.min(v,p[G+3*Q]),I=Math.min(I,p[G+3*Q+1]),H=Math.min(H,p[G+3*Q+2]),u=Math.max(u,p[G+3*Q]),S=Math.max(S,p[G+3*Q+1]),B=Math.max(B,p[G+3*Q+2]);f[0]=v;f[1]=I;f[2]=H;f[3]=u;f[4]=S;f[5]=B};h.expandWithNestedArray=function(f,p,G){const z=p.length;let v=f[0],I=f[1],H=f[2],u=f[3],S=f[4],B=f[5];if(G)for(G=0;G<z;G++){var Q=p[G];v=Math.min(v,Q[0]);I=Math.min(I,Q[1]);H=Math.min(H,Q[2]);u=Math.max(u,Q[0]);S=Math.max(S,Q[1]);B=Math.max(B,Q[2])}else for(G=0;G<z;G++)Q=p[G],v=Math.min(v,Q[0]),
I=Math.min(I,Q[1]),u=Math.max(u,Q[0]),S=Math.max(S,Q[1]);f[0]=v;f[1]=I;f[2]=H;f[3]=u;f[4]=S;f[5]=B};h.expandWithOffset=function(f,p,G,z){f[0]=Math.min(f[0],f[0]+p);f[3]=Math.max(f[3],f[3]+p);f[1]=Math.min(f[1],f[1]+G);f[4]=Math.max(f[4],f[4]+G);f[2]=Math.min(f[2],f[2]+z);f[5]=Math.max(f[5],f[5]+z)};h.expandWithRect=function(f,p){f[0]=Math.min(f[0],p[0]);f[1]=Math.min(f[1],p[1]);f[3]=Math.max(f[3],p[2]);f[4]=Math.max(f[4],p[3])};h.expandWithVec3=function(f,p){f[0]=Math.min(f[0],p[0]);f[1]=Math.min(f[1],
p[1]);f[2]=Math.min(f[2],p[2]);f[3]=Math.max(f[3],p[0]);f[4]=Math.max(f[4],p[1]);f[5]=Math.max(f[5],p[2])};h.fromExtent=function(f,p=E()){p[0]=f.xmin;p[1]=f.ymin;p[2]=f.hasZ?f.zmin:-Infinity;p[3]=f.xmax;p[4]=f.ymax;p[5]=f.hasZ?f.zmax:Infinity;return p};h.fromMinMax=function(f,p,G=E()){G[0]=f[0];G[1]=f[1];G[2]=f[2];G[3]=p[0];G[4]=p[1];G[5]=p[2];return G};h.fromRect=function(f,p){f[0]=p[0];f[1]=p[1];f[2]=Number.NEGATIVE_INFINITY;f[3]=p[2];f[4]=p[3];f[5]=Number.POSITIVE_INFINITY;return f};h.fromRectValues=
function(f,p,G,z,v){f[0]=p;f[1]=G;f[2]=Number.NEGATIVE_INFINITY;f[3]=z;f[4]=v;f[5]=Number.POSITIVE_INFINITY;return f};h.fromValues=J;h.getMax=function(f,p){p[0]=f[3];p[1]=f[4];p[2]=f[5];return p};h.getMin=function(f,p){p[0]=f[0];p[1]=f[1];p[2]=f[2];return p};h.height=l;h.intersects=k;h.intersectsClippingArea=function(f,p){return e.isNone(p)?!0:k(f,p)};h.is=R;h.isPoint=function(f){return 0===P(f)&&0===D(f)&&0===l(f)};h.maximumDimension=function(f){return Math.max(P(f),l(f),D(f))};h.offset=function(f,
p,G,z,v=f){v[0]=f[0]+p;v[1]=f[1]+G;v[2]=f[2]+z;v[3]=f[3]+p;v[4]=f[4]+G;v[5]=f[5]+z;return v};h.scale=function(f,p,G=f){const z=f[0]+P(f)/2,v=f[1]+D(f)/2,I=f[2]+l(f)/2;G[0]=z+(f[0]-z)*p;G[1]=v+(f[1]-v)*p;G[2]=I+(f[2]-I)*p;G[3]=z+(f[3]-z)*p;G[4]=v+(f[4]-v)*p;G[5]=I+(f[5]-I)*p;return G};h.set=n;h.setMax=function(f,p,G=f){G[3]=p[0];G[4]=p[1];G[5]=p[2];G!==f&&(G[0]=f[0],G[1]=f[1],G[2]=f[2]);return f};h.setMin=function(f,p,G=f){G[0]=p[0];G[1]=p[1];G[2]=p[2];G!==f&&(G[3]=f[3],G[4]=f[4],G[5]=f[5]);return G};
h.size=function(f,p=[0,0,0]){p[0]=P(f);p[1]=D(f);p[2]=l(f);return p};h.toExtent=function(f,p){return isFinite(f[2])||isFinite(f[5])?new ca({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],zmin:f[2],zmax:f[5],spatialReference:p}):new ca({xmin:f[0],xmax:f[3],ymin:f[1],ymax:f[4],spatialReference:p})};h.toRect=function(f,p){p||(p=V.create());p[0]=f[0];p[1]=f[1];p[2]=f[3];p[3]=f[4];return p};h.width=P;h.wrap=function(f,p,G,z,v,I){return J(f,p,G,z,v,I,x)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(h,e,ca){let V=function(){function J(P=null,D={},l,k){this.geometry=P;this.attributes=D;this.centroid=l;this.objectId=k;this.geohashY=this.geohashX=this.displayId=0}J.prototype.weakClone=function(){const P=new J(this.geometry,this.attributes,this.centroid,this.objectId);P.displayId=this.displayId;P.geohashX=this.geohashX;P.geohashY=this.geohashY;return P};return e._createClass(J)}(),
E=function(J){function P(){return D.apply(this,arguments)}e._inherits(P,J);var D=e._createSuper(P);return e._createClass(P)}(V);h.OptimizedFeature=V;h.OptimizedFeatureWithGeometry=E;h.hasGeometry=function(J){return!(ca.isNone(J.geometry)||!J.geometry.coords||!J.geometry.coords.length)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){return function(){function e(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}e.prototype.weakClone=function(){const ca=new e;ca.objectIdFieldName=this.objectIdFieldName;ca.globalIdFieldName=this.globalIdFieldName;ca.geohashFieldName=this.geohashFieldName;ca.geometryProperties=this.geometryProperties;
ca.geometryType=this.geometryType;ca.spatialReference=this.spatialReference;ca.hasZ=this.hasZ;ca.hasM=this.hasM;ca.features=this.features;ca.fields=this.fields;ca.transform=this.transform;ca.exceededTransferLimit=this.exceededTransferLimit;ca.uniqueIdField=this.uniqueIdField;ca.queryGeometry=this.queryGeometry;ca.queryGeometryType=this.queryGeometryType;return ca};return h._createClass(e)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){return function(){function e(V=
[],E=[],J=!1){this.lengths=V??[];this.coords=E??[];this.hasIndeterminateRingOrder=J}e.fromRect=function(V){const [E,J,P,D]=V;V=P-E;const l=D-J;return new e([5],[E,J,V,0,0,l,-V,0,0,-l])};var ca=e.prototype;ca.forEachVertex=function(V){let E=0;this.lengths.length||V(this.coords[0],this.coords[1]);for(let J=0;J<this.lengths.length;J++){const P=this.lengths[J];for(let D=0;D<P;D++)V(this.coords[2*(D+E)],this.coords[2*(D+E)+1]);E+=P}};ca.clone=function(V){return V?(V.set(this.coords),new e(this.lengths.slice(),
V,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};h._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((V,E)=>V+E)}}]);return e}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n){const R=J.create();return function(){function M(x){this.geometryInfo=x;this._boundsStore=new l.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ca;this.featureAdapter=k.optimizedFeatureQueryEngineAdapter}var F=M.prototype;F.getFullExtent=function(x){if(E.isNone(this.fullBounds))return null;const [f,p,G,z]=this.fullBounds;return{xmin:f,ymin:p,xmax:G,ymax:z,spatialReference:n.cleanFromGeometryEngine(x)}};F.add=function(x){this._add(x);this._emitChanged()};
F.addMany=function(x){for(const f of x)this._add(f);this._emitChanged()};F.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};F.removeById=function(x){x=this._featuresById.get(x);if(!x)return null;this._remove(x);this._emitChanged();return x};F.removeManyById=function(x){this._boundsStore.invalidateIndex();for(const f of x)(x=this._featuresById.get(f))&&this._remove(x);this._emitChanged()};F.forEachBounds=function(x,f){for(const p of x)(x=this._boundsStore.get(p.objectId))&&
f(J.fromRect(R,x))};F.getFeature=function(x){return this._featuresById.get(x)};F.has=function(x){return this._featuresById.has(x)};F.forEach=function(x){this._featuresById.forEach(f=>x(f))};F.forEachInBounds=function(x,f){this._boundsStore.forEachInBounds(x,p=>{f(this._featuresById.get(p))})};F.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};F.sweep=function(){let x=!1;this._featuresById.forEach((f,p)=>{this._markedIds.has(p)||(x=!0,this._remove(f))});
this._markedIds.clear();x&&this._emitChanged()};F._emitChanged=function(){this.events.emit("changed",void 0)};F._add=function(x){if(x){var f=x.objectId;if(null==f)V.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature","feature id is missing",{feature:x}));else{var p=this._featuresById.get(f);this._markedIds.add(f);if(p){x.displayId=p.displayId;var G=this._boundsStore.get(f);this._boundsStore.delete(f)}else if(E.isSome(this.onFeatureAdd))this.onFeatureAdd(x);
!E.isNone(x.geometry)&&x.geometry.coords&&x.geometry.coords.length?(G=D.getBoundsOptimizedGeometry(E.isSome(G)?G:P.create(),x.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),E.isSome(G)&&this._boundsStore.set(f,G)):this._boundsStore.set(f,null);this._featuresById.set(f,x)}}};F._remove=function(x){if(E.isSome(this.onFeatureRemove))this.onFeatureRemove(x);const f=x.objectId;this._markedIds.delete(f);this._boundsStore.delete(f);this._featuresById.delete(f);return x};h._createClass(M,[{key:"geometryType",
get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let x=0;this._featuresById.forEach(f=>{E.isSome(f.geometry)&&f.geometry.coords&&(x+=f.geometry.coords.length)});return{featureCount:this._featuresById.size,
vertexCount:x/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return M}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(h,e,ca,V,E){let J=function(){function P(){this._emitter=new P.EventEmitter(this)}var D=P.prototype;D.emit=function(l,k){return this._emitter.emit(l,k)};D.on=function(l,k){return this._emitter.on(l,k)};D.once=function(l,k){return this._emitter.once(l,
k)};D.hasEventListener=function(l){return this._emitter.hasEventListener(l)};return h._createClass(P)}();(function(P){let D=function(){function k(R=null){this._target=R;this._listenersMap=null}var n=k.prototype;n.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};n.emit=function(R,M){R=this._listenersMap&&this._listenersMap.get(R);if(!R)return!1;const F=this._target||this;[...R].forEach(x=>{x.call(F,M)});return 0<R.length};n.on=function(R,M){if(Array.isArray(R)){var F=
R.map(x=>this.on(x,M));return V.handlesGroup(F)}if(R.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);F=this._listenersMap.get(R)||[];F.push(M);this._listenersMap.set(R,F);return{remove:()=>{const x=this._listenersMap&&this._listenersMap.get(R)||[],f=x.indexOf(M);0<=f&&x.splice(f,1)}}};n.once=function(R,M){const F=this.on(R,x=>{F.remove();M.call(null,x)});return F};n.hasEventListener=function(R){R=
this._listenersMap&&this._listenersMap.get(R);return null!=R&&0<R.length};return h._createClass(k)}();P.EventEmitter=D;P.EventedMixin=k=>{k=function(n){function R(){var F=M.apply(this,arguments);F._emitter=new D;return F}h._inherits(R,n);var M=h._createSuper(R);n=R.prototype;n.destroy=function(){this._emitter.clear()};n.emit=function(F,x){return this._emitter.emit(F,x)};n.on=function(F,x){return this._emitter.on(F,x)};n.once=function(F,x){return this._emitter.once(F,x)};n.hasEventListener=function(F){return this._emitter.hasEventListener(F)};
return h._createClass(R)}(k);return k=e.__decorate([E.subclass("esri.core.Evented")],k)};let l=function(k){function n(){var M=R.apply(this,arguments);M._emitter=new J.EventEmitter(h._assertThisInitialized(M));return M}h._inherits(n,k);var R=h._createSuper(n);k=n.prototype;k.destroy=function(){this._emitter.clear()};k.emit=function(M,F){return this._emitter.emit(M,F)};k.on=function(M,F){return this._emitter.on(M,F)};k.once=function(M,F){return this._emitter.once(M,F)};k.hasEventListener=function(M){return this._emitter.hasEventListener(M)};
return h._createClass(n)}(ca);l=e.__decorate([E.subclass("esri.core.Evented")],l);P.EventedAccessor=l})(J||(J={}));return J})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(h,e,ca,V,E){function J(l,k,n){P.minX=k[0];P.minY=k[1];P.maxX=k[2];P.maxY=k[3];l.search(P,n)}const P={minX:0,minY:0,maxX:0,maxY:0};let D=function(){function l(){this._indexInvalid=
!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new V.PooledRBush(9,ca("esri-csp-restrictions")?n=>({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const n=Array(this._idByBounds.size);let R=0;this._idByBounds.forEach((M,F)=>{n[R++]=F});this._indexInvalid=!1;this._index.clear();this._index.load(n)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(n=>
this._idByBounds.has(n))))),this._boundsToLoad.length=0)}}var k=l.prototype;k.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};k.delete=function(n){const R=this._boundsById.get(n);this._boundsById.delete(n);R&&(this._idByBounds.delete(R),this._indexInvalid||this._index.remove(R))};k.forEachInBounds=function(n,R){this._loadIndex();J(this._index,n,M=>R(this._idByBounds.get(M)))};k.get=function(n){return this._boundsById.get(n)};
k.has=function(n){return this._boundsById.has(n)};k.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};k.set=function(n,R){if(!this._indexInvalid){const M=this._boundsById.get(n);M&&(this._index.remove(M),this._idByBounds.delete(M))}this._boundsById.set(n,R);R&&(this._idByBounds.set(R,n),this._indexInvalid||(this._boundsToLoad.push(R),5E4<this._boundsToLoad.length&&this._loadIndex()))};e._createClass(l,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;
const n=E.empty();for(const R of this._boundsById.values())R&&(n[0]=Math.min(R[0],n[0]),n[1]=Math.min(R[1],n[1]),n[2]=Math.max(R[2],n[2]),n[3]=Math.max(R[3],n[3]));return n}},{key:"valid",get:function(){return!this._indexInvalid}}]);return l}();h.BoundsStore=D;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(h,e,ca,V,E,J){function P(B,Q){D(B,0,B.children.length,Q,B)}function D(B,Q,C,y,K){K||(K=new u([]));K.minX=Infinity;K.minY=Infinity;K.maxX=-Infinity;K.maxY=-Infinity;for(let da=Q,O;da<C;da++)O=B.children[da],l(K,B.leaf?y(O):O);return K}function l(B,Q){B.minX=Math.min(B.minX,Q.minX);B.minY=Math.min(B.minY,Q.minY);B.maxX=Math.max(B.maxX,Q.maxX);B.maxY=Math.max(B.maxY,Q.maxY)}function k(B,Q){return B.minX-Q.minX}function n(B,Q){return B.minY-Q.minY}function R(B){return(B.maxX-B.minX)*(B.maxY-
B.minY)}function M(B){return B.maxX-B.minX+(B.maxY-B.minY)}function F(B,Q){return B.minX<=Q.minX&&B.minY<=Q.minY&&Q.maxX<=B.maxX&&Q.maxY<=B.maxY}function x(B,Q){return Q.minX<=B.maxX&&Q.minY<=B.maxY&&Q.maxX>=B.minX&&Q.maxY>=B.minY}function f(B,Q,C,y,K){for(Q=[Q,C];Q.length;){C=V.assumeNonNull(Q.pop());const da=V.assumeNonNull(Q.pop());if(C-da<=y)continue;const O=da+Math.ceil((C-da)/y/2)*y;J.quickselect(B,O,da,C,K);Q.push(da,O,O,C)}}let p=function(){function B(C=9,y){this._compareMinX=k;this._compareMinY=
n;this._toBBox=K=>K;this._maxEntries=Math.max(4,C||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));y&&("function"===typeof y?this._toBBox=y:this._initFormat(y));this.clear()}var Q=B.prototype;Q.destroy=function(){this.clear();G.prune();z.prune();v.prune();I.prune()};Q.all=function(C){this._all(this._data,C)};Q.search=function(C,y){let K=this._data;const da=this._toBBox;if(x(C,K))for(G.clear();K;){for(let O=0,N=K.children.length;O<N;O++){const r=K.children[O],t=K.leaf?da(r):r;x(C,t)&&
(K.leaf?y(r):F(C,t)?this._all(r,y):G.push(r))}K=G.pop()}};Q.collides=function(C){let y=this._data;const K=this._toBBox;if(!x(C,y))return!1;for(G.clear();y;){for(let da=0,O=y.children.length;da<O;da++){const N=y.children[da],r=y.leaf?K(N):N;if(x(C,r)){if(y.leaf||F(C,r))return!0;G.push(N)}}y=G.pop()}return!1};Q.load=function(C){if(!C.length)return this;if(C.length<this._minEntries){for(let y=0,K=C.length;y<K;y++)this.insert(C[y]);return this}C=this._build(C.slice(0,C.length),0,C.length-1,0);if(this._data.children.length)if(this._data.height===
C.height)this._splitRoot(this._data,C);else{if(this._data.height<C.height){const y=this._data;this._data=C;C=y}this._insert(C,this._data.height-C.height-1,!0)}else this._data=C;return this};Q.insert=function(C){C&&this._insert(C,this._data.height-1);return this};Q.clear=function(){this._data=new u([]);return this};Q.remove=function(C){if(!C)return this;let y=this._data,K=null,da=0,O=!1,N;const r=this._toBBox(C);v.clear();for(I.clear();y||0<v.length;){y||(y=V.assumeNonNull(v.pop()),K=v.data[v.length-
1],da=I.pop()??0,O=!0);if(y.leaf&&(N=ca.indexOf(y.children,C,y.children.length,y.indexHint),-1!==N)){y.children.splice(N,1);v.push(y);this._condense(v);break}O||y.leaf||!F(y,r)?K?(da++,y=K.children[da],O=!1):y=null:(v.push(y),I.push(da),da=0,K=y,y=y.children[0])}return this};Q.toJSON=function(){return this._data};Q.fromJSON=function(C){this._data=C;return this};Q._all=function(C,y){for(z.clear();C;){if(!0===C.leaf)for(const K of C.children)y(K);else z.pushArray(C.children);C=z.pop()??null}};Q._build=
function(C,y,K,da){var O=K-y+1,N=this._maxEntries;if(O<=N)return C=new u(C.slice(y,K+1)),P(C,this._toBBox),C;da||(da=Math.ceil(Math.log(O)/Math.log(N)),N=Math.ceil(O/N**(da-1)));const r=new S([]);r.height=da;O=Math.ceil(O/N);N=O*Math.ceil(Math.sqrt(N));for(f(C,y,K,N,this._compareMinX);y<=K;y+=N){const t=Math.min(y+N-1,K);f(C,y,t,O,this._compareMinY);for(let Y=y;Y<=t;Y+=O)r.children.push(this._build(C,Y,Math.min(Y+O-1,t),da-1))}P(r,this._toBBox);return r};Q._chooseSubtree=function(C,y,K,da){for(;;){da.push(y);
if(!0===y.leaf||da.length-1===K)break;let O=Infinity,N=Infinity,r=void 0;for(let t=0,Y=y.children.length;t<Y;t++){const ja=y.children[t],ya=R(ja),pa=(Math.max(ja.maxX,C.maxX)-Math.min(ja.minX,C.minX))*(Math.max(ja.maxY,C.maxY)-Math.min(ja.minY,C.minY))-ya;pa<N?(N=pa,O=ya<O?ya:O,r=ja):pa===N&&ya<O&&(O=ya,r=ja)}y=r||y.children[0]}return y};Q._insert=function(C,y,K){var da=this._toBBox;K=K?C:da(C);v.clear();da=this._chooseSubtree(K,this._data,y,v);da.children.push(C);for(l(da,K);0<=y;)if(v.data[y].children.length>
this._maxEntries)this._split(v,y),y--;else break;this._adjustParentBBoxes(K,v,y)};Q._split=function(C,y){const K=C.data[y];var da=K.children.length;const O=this._minEntries;this._chooseSplitAxis(K,O,da);(da=this._chooseSplitIndex(K,O,da))?(da=K.children.splice(da,K.children.length-da),da=K.leaf?new u(da):new S(da),da.height=K.height,P(K,this._toBBox),P(da,this._toBBox),y?C.data[y-1].children.push(da):this._splitRoot(K,da)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
Q._splitRoot=function(C,y){this._data=new S([C,y]);this._data.height=C.height+1;P(this._data,this._toBBox)};Q._chooseSplitIndex=function(C,y,K){let da,O,N=void 0;da=O=Infinity;for(let t=y;t<=K-y;t++){var r=D(C,0,t,this._toBBox);const Y=D(C,t,K,this._toBBox),ja=Math.max(0,Math.min(r.maxX,Y.maxX)-Math.max(r.minX,Y.minX))*Math.max(0,Math.min(r.maxY,Y.maxY)-Math.max(r.minY,Y.minY));r=R(r)+R(Y);ja<da?(da=ja,N=t,O=r<O?r:O):ja===da&&r<O&&(O=r,N=t)}return N};Q._chooseSplitAxis=function(C,y,K){const da=C.leaf?
this._compareMinX:k,O=C.leaf?this._compareMinY:n,N=this._allDistMargin(C,y,K,da);y=this._allDistMargin(C,y,K,O);N<y&&C.children.sort(da)};Q._allDistMargin=function(C,y,K,da){C.children.sort(da);da=this._toBBox;var O=D(C,0,y,da);const N=D(C,K-y,K,da);let r=M(O)+M(N);for(let t=y;t<K-y;t++){const Y=C.children[t];l(O,C.leaf?da(Y):Y);r+=M(O)}for(K=K-y-1;K>=y;K--)O=C.children[K],l(N,C.leaf?da(O):O),r+=M(N);return r};Q._adjustParentBBoxes=function(C,y,K){for(;0<=K;K--)l(y.data[K],C)};Q._condense=function(C){for(let y=
C.length-1;0<=y;y--){const K=C.data[y];if(0===K.children.length)if(0<y){const da=C.data[y-1],O=da.children;O.splice(ca.indexOf(O,K,O.length,da.indexHint),1)}else this.clear();else P(K,this._toBBox)}};Q._initFormat=function(C){const y=["return a"," - b",";"];this._compareMinX=new Function("a","b",y.join(C[0]));this._compareMinY=new Function("a","b",y.join(C[1]));this._toBBox=new Function("a","return {minX: a"+C[0]+", minY: a"+C[1]+", maxX: a"+C[2]+", maxY: a"+C[3]+"};")};return e._createClass(B)}();
const G=new E,z=new E,v=new E,I=new E({deallocator:void 0});E=e._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let H=function(B){function Q(){var y=C.apply(this,arguments);y.height=1;y.indexHint=new ca.PositionHint;return y}e._inherits(Q,B);var C=e._createSuper(Q);return e._createClass(Q)}(E),u=function(B){function Q(y){var K=C.call(this);K.children=y;K.leaf=!0;return K}e._inherits(Q,B);var C=e._createSuper(Q);return e._createClass(Q)}(H),S=function(B){function Q(y){var K=
C.call(this);K.children=y;K.leaf=!1;return K}e._inherits(Q,B);var C=e._createSuper(Q);return e._createClass(Q)}(H);h.BBox=E;h.PooledRBush=p;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(h){var e={};(function(ca){(function(V){V=V();void 0!==V&&(ca.exports=V)})(function(){function V(P,D,l,k,n){for(;k>l;){if(600<k-l){var R=k-l+1,M=D-l+1,F=Math.log(R),x=.5*Math.exp(2*F/3);F=.5*Math.sqrt(F*x*(R-x)/R)*(0>M-R/2?-1:1);V(P,
D,Math.max(l,Math.floor(D-M*x/R+F)),Math.min(k,Math.floor(D+(R-M)*x/R+F)),n)}R=P[D];M=l;x=k;E(P,l,D);for(0<n(P[k],R)&&E(P,l,k);M<x;){E(P,M,x);M++;for(x--;0>n(P[M],R);)M++;for(;0<n(P[x],R);)x--}0===n(P[l],R)?E(P,l,x):(x++,E(P,x,k));x<=D&&(l=x+1);D<=x&&(k=x-1)}}function E(P,D,l){var k=P[D];P[D]=P[l];P[l]=k}function J(P,D){return P<D?-1:P>D?1:0}return function(P,D,l,k,n){V(P,D,l||0,k||P.length-1,n||J)}})})({get exports(){return e},set exports(ca){e=ca}});h.quickselect=e})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(h,e,ca,V,E){h.optimizedFeatureQueryEngineAdapter={getObjectId(J){return J.objectId},getAttributes(J){return J.attributes},getAttribute(J,P){return J.attributes[P]},cloneWithGeometry(J,P){return new V.OptimizedFeature(P,J.attributes,null,J.objectId)},getGeometry(J){return J.geometry},getCentroid(J,P){e.isNone(J.centroid)&&(J.centroid=ca.getCentroidOptimizedGeometry(new E,J.geometry,P.hasZ,P.hasM));return J.centroid}};
Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(h,e){function ca(E,J,P,D,l,k,n=1){k=l?k?4:3:k?3:2;let R=P,M=P+k,F=0,x=0,f=P=0,p=0;for(let G=0,z=D-1;G<z;G++,R+=k,M+=k){D=J[R];const v=J[R+1],I=J[R+2],H=J[M],u=J[M+1],S=J[M+2];let B=D*u-H*v;f+=B;F+=(D+H)*B;x+=(v+u)*B;l&&(B=D*S-H*I,P+=(I+S)*B,p+=B);D<E[0]&&(E[0]=D);D>E[1]&&(E[1]=D);v<E[2]&&(E[2]=v);v>E[3]&&(E[3]=v);l&&(I<E[4]&&(E[4]=I),I>E[5]&&(E[5]=
I))}0<f*n&&(f*=-1);0<p*n&&(p*=-1);if(!f)return null;E=[F,x,.5*f];l&&(E[3]=P,E[4]=.5*p);return E}function V(E,J,P,D,l){l=D?l?4:3:l?3:2;let k=J,n=J+l,R=0,M=0,F=0,x=0;for(let z=0,v=P-1;z<v;z++,k+=l,n+=l){var f=E[k];const I=E[k+1],H=E[k+2],u=E[n],S=E[n+1],B=E[n+2];if(D){var p=u-f;var G=S-I;const Q=B-H;p=Math.sqrt(p*p+G*G+Q*Q)}else p=u-f,G=S-I,p=Math.sqrt(p*p+G*G);p&&(R+=p,D?(f=[f+.5*(u-f),I+.5*(S-I),H+.5*(B-H)],M+=p*f[0],F+=p*f[1],x+=p*f[2]):(f=[f+.5*(u-f),I+.5*(S-I)],M+=p*f[0],F+=p*f[1]))}return 0<R?
D?[M/R,F/R,x/R]:[M/R,F/R]:0<P?D?[E[J],E[J+1],E[J+2]]:[E[J],E[J+1]]:null}h.getCentroidOptimizedGeometry=function(E,J,P,D,l){if(e.isNone(J)||!J.lengths.length)return null;const k="upperLeft"===l?.originPosition?-1:1;E.lengths.length&&(E.lengths.length=0);E.coords.length&&(E.coords.length=0);l=E.coords;const n=[],R=P?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:M,coords:F}=J,x=P?D?4:3:D?3:2;let f=0;for(var p of M){const G=ca(R,F,f,p,P,D,k);G&&n.push(G);f+=p*x}n.sort((G,z)=>{let v=k*G[2]-k*z[2];0===v&&P&&(v=G[4]-z[4]);return v});n.length&&(p=6*n[0][2],l[0]=n[0][0]/p,l[1]=n[0][1]/p,P&&(p=6*n[0][4],l[2]=0!==p?n[0][3]/p:0),l[0]<R[0]||l[0]>R[1]||l[1]<R[2]||l[1]>R[3]||P&&(l[2]<R[4]||l[2]>R[5]))&&(l.length=0);if(!l.length)if(J=J.lengths[0]?V(F,0,M[0],P,D):null)l[0]=J[0],l[1]=J[1],P&&2<J.length&&(l[2]=
J[2]);else return null;return E};h.lineCentroid=V;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n,R,M){async function F(B,Q,C){if(!B)return null;var {where:y}=B;B.where=y=y&&y.trim();if(!y||/^1 *= *1$/.test(y)||Q&&Q===y)B.where=null;if(!B.geometry)return B;Q=await f(B);B.distance=0;B.units=null;"esriSpatialRelEnvelopeIntersects"===B.spatialRel&&({spatialReference:y}=B.geometry,Q=P.getGeometryExtent(Q),Q.spatialReference=y);if(Q){await M.checkProjectionSupport(Q.spatialReference,C);y=Q.spatialReference;Q=x(Q,C)&&D.isExtent(Q)?{spatialReference:y,rings:[[[Q.xmin,
Q.ymin],[Q.xmin,Q.ymax],[Q.xmax,Q.ymax],[Q.xmax,Q.ymin],[Q.xmin,Q.ymin]]]}:Q;y=(await l.normalizeCentralMeridian(D.fromJSON(Q)))[0];if(V.isNone(y))throw z;const K="quantizationParameters"in B&&B.quantizationParameters?.tolerance||"maxAllowableOffset"in B&&B.maxAllowableOffset||0;Q=K&&x(Q,C)?{densificationStep:8*K}:void 0;y=y.toJSON();Q=await M.project(y,y.spatialReference,C,Q);if(!Q)throw z;Q.spatialReference=C;B.geometry=Q}return B}function x(B,Q){if(!B)return!1;const C=B.spatialReference;return(D.isExtent(B)||
D.isPolygon(B)||D.isPolyline(B))&&!k.equals(C,Q)&&!J.canProjectWithoutEngine(C,Q)}async function f(B){const {distance:Q,units:C}=B,y=B.geometry;if(null==Q||"vertexAttributes"in y)return y;var K=y.spatialReference;B=C?G.fromJSON(C):E.getUnitString(K);K=K&&(k.isGeographic(K)||k.isWebMercator(K))?y:await M.checkProjectionSupport(K,k.WGS84).then(()=>M.project(y,k.WGS84));return(await p())(K.spatialReference,K,Q,B)}async function p(){return(await new Promise((B,Q)=>h(["../../../geometry/geometryEngineJSON"],
B,Q))).geodesicBuffer}const G=new ca.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),z=Object.freeze({}),v=new R,I=new R,H=new R,u={esriGeometryPoint:n.convertToPoint,esriGeometryPolyline:n.convertToPolyline,esriGeometryPolygon:n.convertToPolygon,esriGeometryMultipoint:n.convertToMultipoint},S=(B,Q)=>"_geVersion"!==B?Q:void 0;e.QUERY_ENGINE_EMPTY_RESULT=
z;e.cleanFromGeometryEngine=function(B){return B&&"_geVersion"in B?JSON.parse(JSON.stringify(B,S)):B};e.getGeometry=function(B,Q,C,y,K,da,O=Q,N=C){const r=Q&&O,t=C&&N;y=V.isSome(y)?"coords"in y?y:y.geometry:null;if(V.isNone(y))return null;if(K)return Q=n.generalizeOptimizedGeometry(I,y,Q,C,B,K,O,N),da&&(Q=n.quantizeOptimizedGeometry(H,Q,r,t,B,da)),u[B]?.(Q,r,t)??null;if(da)return da=n.quantizeOptimizedGeometry(H,y,Q,C,B,da,O,N),u[B]?.(da,r,t)??null;n.removeZMValues(v,y,Q,C,O,N);return u[B]?.(v,r,
t)??null};e.normalizeQuery=async function(B,Q,C){const {outFields:y,orderByFields:K,groupByFieldsForStatistics:da,outStatistics:O}=B;if(y)for(var N=0;N<y.length;N++)y[N]=y[N].trim();if(K)for(N=0;N<K.length;N++)K[N]=K[N].trim();if(da)for(N=0;N<da.length;N++)da[N]=da[N].trim();if(O)for(N=0;N<O.length;N++)O[N].onStatisticField&&(O[N].onStatisticField=O[N].onStatisticField.trim());B.geometry&&!B.outSR&&(B.outSR=B.geometry.spatialReference);return F(B,Q,C)};e.normalizeQueryLike=F;e.transformCentroid=function(B,
Q,C,y=B.hasZ,K=B.hasM){if(V.isNone(Q))return null;const da=B.hasZ&&y,O=B.hasM&&K;return C?(B=n.quantizeOptimizedGeometry(H,Q,B.hasZ,B.hasM,"esriGeometryPoint",C,y,K),n.convertToPoint(B,da,O)):n.convertToPoint(Q,da,O)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n,R,M,F,x,f,p,G,z,v,I,H,u,S,B,Q,C){function y(){return!!ib&&p.isLoaded()}function K(U){J.isNone(hb)&&(hb=Promise.all([p.load(),(new Promise((fa,W)=>h(["../chunks/geometryEngineBase"],fa,W))).then(fa=>fa.geometryEngineBase),new Promise((fa,W)=>h(["./geometryAdapters/hydrated"],fa,W))]));return hb.then(([,fa,{hydratedAdapter:W}])=>{P.throwIfAborted(U);b=W;ib=fa.default;ib._enableProjection(p.pe);Rb.notify()})}function da(U,fa,W=null,qa=null){return Array.isArray(U)?0===
U.length?[]:O(b,U,U[0].spatialReference,fa,W,qa):O(b,[U],U.spatialReference,fa,W,qa)[0]}function O(U,fa,W,qa,Ha=null,Ka=null){if(J.isNone(W)||J.isNone(qa))return fa;if(Y(W,qa,Ha))return fa.map(Sa=>J.unwrap(ja(Sa,W,qa)));if(J.isNone(Ha)){const Sa=S.cacheKey(W,qa);void 0!==Ib[Sa]?Ha=Ib[Sa]:(Ha=r(W,qa,void 0),J.isNone(Ha)&&(Ha=new S),Ib[Sa]=Ha)}if(J.isNone(ib)||J.isNone(U))throw new nb;return J.isSome(Ka)?ib._project(U,fa,W,qa,Ha,Ka):ib._project(U,fa,W,qa,Ha)}function N(U,fa){if(!y())for(const W of U)if(J.isSome(W)&&
!B.equals(W.spatialReference,fa)&&B.isValid(W.spatialReference)&&B.isValid(fa)&&!Y(W.spatialReference,fa))return l.trackAccess(Rb),{pending:K(),geometries:null};return{pending:null,geometries:U.map(W=>J.isNone(W)?null:B.equals(W.spatialReference,fa)?W:B.isValid(W.spatialReference)&&B.isValid(fa)?t(W,fa):null)}}function r(U,fa,W=null){if(J.isNone(U)||J.isNone(fa))return null;if(J.isNone(ib)||J.isNone(b))throw new nb;U=ib._getTransformation(b,U,fa,W,W?.spatialReference);return null!==U?S.fromGE(U):
null}function t(U,fa){try{const W=da(U,fa);if(null==W)return null;"xmin"in U&&"xmin"in W&&(W.zmin=U.zmin,W.zmax=U.zmax);const qa=C.getGeometryZScaler(W.type,U.spatialReference,fa);J.isSome(qa)&&qa(W);return W}catch(W){if(!(W instanceof nb))throw W;return null}}function Y(U,fa,W){return W?!1:B.equals(U,fa)?!0:B.isValid(U)&&B.isValid(fa)&&!!Aa(U,fa,Yb)}function ja(U,fa,W){return U?"x"in U?ya(U,fa,new G,W,0):"xmin"in U?Da(U,fa,new x,W,0):"rings"in U?xa(U,fa,new z,W,0):"paths"in U?ta(U,fa,new v,W,0):
"points"in U?pa(U,fa,new f,W,0):null:null}function ya(U,fa,W,qa,Ha){Za[0]=U.x;Za[1]=U.y;const Ka=U.z;Za[2]=void 0!==Ka?Ka:Ha;if(!Pa(Za,fa,0,Za,qa,0,1))return null;W.x=Za[0];W.y=Za[1];W.spatialReference=qa;void 0===Ka?(W.z=void 0,W.hasZ=!1):(W.z=Za[2],W.hasZ=!0);void 0===U.m?(W.m=void 0,W.hasM=!1):(W.m=U.m,W.hasM=!0);return W}function pa(U,fa,W,qa,Ha){const {points:Ka,hasZ:Sa,hasM:Ya}=U;U=[];const ob=Ka.length,mb=[];for(var lb of Ka)mb.push(lb[0],lb[1],Sa?lb[2]:Ha);if(!Pa(mb,fa,0,mb,qa,0,ob))return null;
for(fa=0;fa<ob;++fa){Ha=3*fa;lb=mb[Ha];const xb=mb[Ha+1];Sa&&Ya?U.push([lb,xb,mb[Ha+2],Ka[fa][3]]):Sa?U.push([lb,xb,mb[Ha+2]]):Ya?U.push([lb,xb,Ka[fa][2]]):U.push([lb,xb])}W.points=U;W.spatialReference=qa;W.hasZ=Sa;W.hasM=Ya;return W}function ta(U,fa,W,qa,Ha){const {paths:Ka,hasZ:Sa,hasM:Ya}=U;U=[];if(!ab(Ka,Sa??!1,Ya??!1,fa,U,qa,Ha))return null;W.paths=U;W.spatialReference=qa;W.hasZ=Sa;W.hasM=Ya;return W}function xa(U,fa,W,qa,Ha){const {rings:Ka,hasZ:Sa,hasM:Ya}=U;U=[];if(!ab(Ka,Sa??!1,Ya??!1,fa,
U,qa,Ha))return null;W.rings=U;W.spatialReference=qa;W.hasZ=Sa;W.hasM=Ya;return W}function Da(U,fa,W,qa,Ha){const {xmin:Ka,ymin:Sa,xmax:Ya,ymax:ob,hasZ:mb,hasM:lb}=U;if(!Ca(Ka,Sa,mb?U.zmin:Ha,fa,Za,qa))return null;W.xmin=Za[0];W.ymin=Za[1];mb&&(W.zmin=Za[2]);if(!Ca(Ya,ob,mb?U.zmax:Ha,fa,Za,qa))return null;W.xmax=Za[0];W.ymax=Za[1];mb&&(W.zmax=Za[2]);lb&&(W.mmin=U.mmin,W.mmax=U.mmax);W.spatialReference=qa;return W}function Ca(U,fa,W,qa,Ha,Ka){kb[0]=U;kb[1]=fa;kb[2]=W;return Pa(kb,qa,0,Ha,Ka,0,1)}function La(U,
fa,W,qa){if(J.isNone(fa)||J.isNone(qa)||2>U.length)return!1;2===U.length&&(kb[0]=U[0],kb[1]=U[1],kb[2]=0,U=kb);return Pa(U,fa,0,W,qa,0,1)}function Qa(U,fa,W){if(J.isNone(fa))return!1;fa=c(fa,Jb);fa=Db[fa][la.WGS84_COMPARABLE_LON_LAT];if(J.isNone(fa))return!1;fa(U,0,kb,0);W!==kb&&(W[0]=kb[0],W[1]=kb[1],2<W.length&&(W[2]=kb[2]));return!0}function Pa(U,fa,W,qa,Ha,Ka,Sa=1){fa=Aa(fa,Ha,Yb);if(J.isNone(fa))return!1;if(fa===m){if(U===qa&&W===Ka)return!0;Sa=W+3*Sa;for(let Ya=W,ob=Ka;Ya<Sa;Ya++,ob++)qa[ob]=
U[Ya];return!0}Sa=W+3*Sa;for(let Ya=W,ob=Ka;Ya<Sa;Ya+=3,ob+=3)fa(U,Ya,qa,ob);return!0}function ab(U,fa,W,qa,Ha,Ka,Sa=0){const Ya=[];for(const ob of U)for(const mb of ob)Ya.push(mb[0],mb[1],fa?mb[2]:Sa);if(!Pa(Ya,qa,0,Ya,Ka,0,Ya.length/3))return!1;qa=0;Ha.length=0;for(const ob of U){U=[];for(const mb of ob)fa&&W?U.push([Ya[qa++],Ya[qa++],Ya[qa++],mb[3]]):fa?U.push([Ya[qa++],Ya[qa++],Ya[qa++]]):(W?U.push([Ya[qa++],Ya[qa++],mb[2]]):U.push([Ya[qa++],Ya[qa++]]),qa++);Ha.push(U)}return!0}function na(U,
fa,W,qa){fa=qa+fa;if(fa<qa/2||W>fa)return Number.MAX_VALUE;U=Math.abs(Eb*U)+Math.asin(W/fa);return U>=Math.PI/2?Number.MAX_VALUE:W/Math.cos(U)}function sa(U,fa,W){const qa=Math.sin(U);U=Math.cos(U);const Ha=Math.sin(fa);fa=Math.cos(fa);W[0]=-qa;W[4]=-Ha*U;W[8]=fa*U;W[12]=0;W[1]=U;W[5]=-Ha*qa;W[9]=fa*qa;W[13]=0;W[2]=0;W[6]=fa;W[10]=Ha;W[14]=0;W[3]=0;W[7]=0;W[11]=0;W[15]=1;return W}function Fa(U,fa,W){sa(U,fa,W);n.transpose(W,W);return W}function c(U,fa){if(!U)return la.UNKNOWN;if(fa.spatialReference===
U)return fa.spatialReferenceId;fa.spatialReference=U;"metersPerUnit"in fa&&(fa.metersPerUnit=D.getMetersPerUnitForSR(U,1));return U.wkt===F.SphericalECEFSpatialReferenceLike.wkt?fa.spatialReferenceId=la.SPHERICAL_ECEF:B.isWGS84(U)?fa.spatialReferenceId=la.WGS84:B.isWebMercator(U)?fa.spatialReferenceId=la.WEB_MERCATOR:B.isPlateCarree(U)?fa.spatialReferenceId=la.PLATE_CARREE:U.wkt===F.WGS84ECEFSpatialReferenceLike.wkt?fa.spatialReferenceId=la.WGS84_ECEF:U.wkid===Q.SupportedGCSWkids.CGCS2000?fa.spatialReferenceId=
la.CGCS2000:U.wkt===F.SphericalPCPFMarsLike.wkt?fa.spatialReferenceId=la.SPHERICAL_MARS_PCPF:U.wkt===F.SphericalPCPFMoonLike.wkt?fa.spatialReferenceId=la.SPHERICAL_MOON_PCPF:B.isMars(U)?fa.spatialReferenceId=la.GCSMARS2000:B.isMoon(U)?fa.spatialReferenceId=la.GCSMOON2000:fa.spatialReferenceId=la.UNKNOWN}function m(U,fa,W,qa){U!==W&&(W[qa++]=U[fa++],W[qa++]=U[fa++],W[qa]=U[fa])}function ea(U,fa,W,qa){W[qa++]=Sb*(U[fa++]/H.earth.radius);W[qa++]=Sb*(Math.PI/2-2*Math.atan(Math.exp(-U[fa++]/H.earth.radius)));
W[qa]=U[fa]}function ka(U,fa,W,qa){ea(U,fa,W,qa);wa(W,qa,W,qa)}function ua(U,fa,W,qa){ea(U,fa,W,qa);Va(W,qa,W,qa)}function w(U,fa,W,qa,Ha){var Ka=.4999999*Math.PI;Ka=E.clamp(Eb*U[fa+1],-Ka,Ka);Ka=Math.sin(Ka);W[qa++]=Eb*U[fa]*Ha.radius;W[qa++]=Ha.halfSemiMajorAxis*Math.log((1+Ka)/(1-Ka));W[qa]=U[fa+2]}function T(U,fa,W,qa){w(U,fa,W,qa,H.earth)}function aa(U,fa,W,qa){W[qa]=U[fa]*hc;W[qa+1]=U[fa+1]*hc;W[qa+2]=U[fa+2]}function X(U,fa,W,qa){W[qa]=U[fa]*Tb;W[qa+1]=U[fa+1]*Tb;W[qa+2]=U[fa+2]}function ha(U,
fa,W,qa){ea(U,fa,W,qa);aa(W,qa,W,qa)}function ma(U,fa,W,qa,Ha){Ha+=U[fa+2];const Ka=Eb*U[fa+1];U=Eb*U[fa];fa=Math.cos(Ka);W[qa++]=Math.cos(U)*fa*Ha;W[qa++]=Math.sin(U)*fa*Ha;W[qa]=Math.sin(Ka)*Ha}function oa(U,fa,W,qa){ma(U,fa,W,qa,H.moon.radius)}function za(U,fa,W,qa){ma(U,fa,W,qa,H.mars.radius)}function wa(U,fa,W,qa){ma(U,fa,W,qa,H.earth.radius)}function Ia(U,fa,W,qa,Ha){var Ka=U[fa];const Sa=U[fa+1];fa=U[fa+2];U=Math.sqrt(Ka*Ka+Sa*Sa+fa*fa);fa=E.asinClamped(fa/(0===U?1:U));Ka=Math.atan2(Sa,Ka);
W[qa++]=Sb*Ka;W[qa++]=Sb*fa;W[qa]=U-Ha}function Ga(U,fa,W,qa){Ia(U,fa,W,qa,H.moon.radius)}function Ja(U,fa,W,qa){Ia(U,fa,W,qa,H.mars.radius)}function Ua(U,fa,W,qa){Ia(U,fa,W,qa,H.earth.radius)}function Ra(U,fa,W,qa){Ua(U,fa,W,qa);T(W,qa,W,qa)}function Wa(U,fa,W,qa){Ua(U,fa,W,qa);Va(W,qa,W,qa)}function Va(U,fa,W,qa){var Ha=H.earth;const Ka=Eb*U[fa];var Sa=Eb*U[fa+1];U=U[fa+2];fa=Math.sin(Sa);Sa=Math.cos(Sa);const Ya=Ha.radius/Math.sqrt(1-Ha.eccentricitySquared*fa*fa);W[qa++]=(Ya+U)*Sa*Math.cos(Ka);
W[qa++]=(Ya+U)*Sa*Math.sin(Ka);W[qa++]=(Ya*(1-Ha.eccentricitySquared)+U)*fa}function Na(U,fa,W,qa){var Ha=u.earthEllipsoidConstants,Ka=U[fa],Sa=U[fa+1];U=U[fa+2];let Ya;fa=Math.abs(U);var ob=Ka*Ka+Sa*Sa;var mb=Math.sqrt(ob);var lb=ob+U*U;var xb=Math.sqrt(lb);Ka=Math.atan2(Sa,Ka);var Kb=U*U/lb;lb=ob/lb;Sa=Ha.a2/xb;ob=Ha.a3-Ha.a4/xb;.3<lb?(Kb=fa/xb*(1+lb*(Ha.a1+Sa+Kb*ob)/xb),xb=Math.asin(Kb),Sa=Kb*Kb,lb=Math.sqrt(1-Sa)):(lb=mb/xb*(1-Kb*(Ha.a5-Sa-lb*ob)/xb),xb=Math.acos(lb),Sa=1-lb*lb,Kb=Math.sqrt(Sa));
Ya=1-H.earth.eccentricitySquared*Sa;Sa=H.earth.radius/Math.sqrt(Ya);Ha=Ha.a6*Sa;Sa=mb-Sa*lb;ob=fa-Ha*Kb;fa=lb*Sa+Kb*ob;mb=lb*ob-Kb*Sa;Ha=mb/(Ha/Ya+fa);xb+=Ha;0>U&&(xb=-xb);W[qa++]=Sb*Ka;W[qa++]=Sb*xb;W[qa]=fa+mb*Ha/2}function Xa(U,fa,W,qa){Na(U,fa,W,qa);wa(W,qa,W,qa)}function bb(U,fa,W,qa){Na(U,fa,W,qa);T(W,qa,W,qa)}function Aa(U,fa,W=sb()){return J.isNone(U)||J.isNone(fa)?null:wb(U,fa,W).projector}function wb(U,fa,W){if(J.isNone(U)||J.isNone(fa)||W.source.spatialReference===U&&W.dest.spatialReference===
fa)return W;const qa=c(U,W.source),Ha=c(fa,W.dest);qa===la.UNKNOWN&&Ha===la.UNKNOWN?B.equals(U,fa)?W.projector=m:W.projector=null:W.projector=Db[qa][Ha];return W}function sb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:m}}let ib=null,b=null,hb=null,Ib={};const Rb=new k.SimpleObservable;let nb=function(U){function fa(){return W.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}
ca._inherits(fa,U);var W=ca._createSuper(fa);return ca._createClass(fa)}(V);var la;(function(U){U[U.UNKNOWN=0]="UNKNOWN";U[U.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";U[U.WGS84=2]="WGS84";U[U.WEB_MERCATOR=3]="WEB_MERCATOR";U[U.WGS84_ECEF=4]="WGS84_ECEF";U[U.CGCS2000=5]="CGCS2000";U[U.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";U[U.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";U[U.GCSMARS2000=8]="GCSMARS2000";U[U.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";U[U.GCSMOON2000=10]="GCSMOON2000";U[U.LON_LAT=
11]="LON_LAT";U[U.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const hc=H.earth.radius*Math.PI/180,Tb=180/(H.earth.radius*Math.PI),Db={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:wa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:T,[la.PLATE_CARREE]:aa,[la.WGS84]:m,[la.WGS84_ECEF]:Va},[la.CGCS2000]:{[la.CGCS2000]:m,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:wa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:aa,[la.WGS84]:null,[la.WGS84_ECEF]:Va},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:m,[la.GCSMOON2000]:null,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:za,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:m,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ea,[la.WGS84_COMPARABLE_LON_LAT]:ea,[la.SPHERICAL_ECEF]:ka,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:m,[la.PLATE_CARREE]:ha,[la.WGS84]:ea,[la.WGS84_ECEF]:ua},[la.WGS84_ECEF]:{[la.CGCS2000]:Na,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Na,[la.WGS84_COMPARABLE_LON_LAT]:Na,[la.SPHERICAL_ECEF]:Xa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:bb,[la.PLATE_CARREE]:function(U,fa,W,qa){Na(U,fa,W,qa);aa(W,qa,W,qa)},[la.WGS84]:Na,[la.WGS84_ECEF]:m},
[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ua,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ua,[la.WGS84_COMPARABLE_LON_LAT]:Ua,[la.SPHERICAL_ECEF]:m,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Ra,[la.PLATE_CARREE]:function(U,fa,W,qa){Ua(U,fa,W,qa);aa(W,qa,W,qa)},[la.WGS84]:Ua,[la.WGS84_ECEF]:Wa},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ja,[la.GCSMOON2000]:null,[la.LON_LAT]:Ja,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:m,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ga,[la.LON_LAT]:Ga,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:m,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:m,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:m,[la.GCSMARS2000]:m,[la.GCSMOON2000]:m,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:wa,[la.SPHERICAL_MARS_PCPF]:za,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:T,
[la.PLATE_CARREE]:aa,[la.WGS84]:m,[la.WGS84_ECEF]:Va},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:m,[la.WGS84_COMPARABLE_LON_LAT]:m,[la.SPHERICAL_ECEF]:wa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:aa,[la.WGS84]:m,[la.WGS84_ECEF]:Va},[la.PLATE_CARREE]:{[la.CGCS2000]:X,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:X,[la.WGS84_COMPARABLE_LON_LAT]:X,[la.SPHERICAL_ECEF]:function(U,
fa,W,qa){X(U,fa,W,qa);wa(W,qa,W,qa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(U,fa,W,qa){X(U,fa,W,qa);T(W,qa,W,qa)},[la.PLATE_CARREE]:m,[la.WGS84]:X,[la.WGS84_ECEF]:function(U,fa,W,qa){X(U,fa,W,qa);Va(W,qa,W,qa)}}},Jb={spatialReference:null,spatialReferenceId:la.UNKNOWN},ac={spatialReference:null,spatialReferenceId:la.UNKNOWN},Yb=sb(),ic=sb(),Eb=E.deg2rad(1),Sb=E.rad2deg(1),kb=M.create(),Gb=M.create(),Hb=M.create(),Za=M.create(),bc=M.create();
e.canProjectToWGS84ComparableLonLat=function(U){if(J.isNone(U))return!1;U=c(U,Jb);return!!Db[U][la.WGS84_COMPARABLE_LON_LAT]};e.canProjectWithoutEngine=Y;e.computeENUToSphericalPCPFLocalRotation=sa;e.computeSphericalPCPFToENULocalRotation=Fa;e.computeTranslationToOriginAndRotation=function(U,fa,W,qa){if(J.isNone(U)||J.isNone(qa))return!1;var Ha=c(U,Jb),Ka=c(qa,ac);if(Ha===Ka&&Ka!==la.SPHERICAL_ECEF&&Ka!==la.SPHERICAL_MARS_PCPF&&Ka!==la.SPHERICAL_MOON_PCPF&&(Ha!==la.UNKNOWN||B.equals(U,qa)))return n.fromTranslation(W,
fa),!0;if(Ka===la.SPHERICAL_ECEF||Ka===la.SPHERICAL_MARS_PCPF||Ka===la.SPHERICAL_MOON_PCPF){Ha=Db[Ha][la.LON_LAT];Ka=Db[la.LON_LAT][Ka];if(J.isNone(Ha)||J.isNone(Ka))return!1;Ha(fa,0,Gb,0);Ka(Gb,0,Hb,0);sa(Eb*Gb[0],Eb*Gb[1],W);W[12]=Hb[0];W[13]=Hb[1];W[14]=Hb[2];return!0}if((Ka===la.WEB_MERCATOR||Ka===la.PLATE_CARREE)&&(Ha===la.WGS84||Ha===la.CGCS2000&&Ka===la.PLATE_CARREE||Ha===la.SPHERICAL_ECEF||Ha===la.WEB_MERCATOR)){U=Db[Ha][la.LON_LAT];Ka=Db[la.LON_LAT][Ka];if(J.isNone(U)||J.isNone(Ka))return!1;
U(fa,0,Gb,0);Ka(Gb,0,Hb,0);Ha===la.SPHERICAL_ECEF?Fa(Eb*Gb[0],Eb*Gb[1],W):n.identity(W);W[12]=Hb[0];W[13]=Hb[1];W[14]=Hb[2];return!0}return!1};e.getProjectorName=function(U,fa){switch(Aa(U,fa,Yb)){case m:return"copy3";case wa:return"wgs84ToSphericalECEF";case T:return"wgs84ToWebMercator";case aa:return"wgs84ToPlateCarree";case Va:return"wgs84ToWGS84ECEF";case ea:return"webMercatorToWGS84";case ka:return"webMercatorToSphericalECEF";case ua:return"webMercatorToWGS84ECEF";case ha:return"webMercatorToPlateCarree";
case Na:return"wgs84ECEFToWGS84";case Xa:return"wgs84ECEFToSphericalECEF";case bb:return"wgs84ECEFToWebMercator";case Ua:return"sphericalECEFToWGS84";case Ra:return"sphericalECEFToWebMercator";case Ja:return"sphericalMarsPCPFToMars2000";case Ga:return"sphericalMoonPCPFToMoon2000";case Wa:return"sphericalECEFToWGS84ECEF";case za:return"mars2000ToSphericalPCPF";case oa:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=r;e.getTransformations=function(U,fa,W=null){if(J.isNone(ib)||
J.isNone(b))throw new nb;U=ib._getTransformationBySuitability(b,U,fa,W,W?.spatialReference);if(null!==U){fa=[];for(const qa of U)fa.push(S.fromGE(qa));return fa}return[]};e.initializeProjection=async function(U,fa,W,qa){if(y())return P.waitTick(qa);if(Array.isArray(U))for(const {source:Ha,dest:Ka,geographicTransformation:Sa}of U){if(!Y(Ha,Ka,Sa))return K(qa)}else if(!Y(U,fa,W))return K(qa);return P.waitTick(qa)};e.isLoaded=y;e.load=K;e.localLinearScaleFactors=function(U,fa,W,qa){if(J.isNone(fa)||
J.isNone(qa))return!1;const Ha=c(fa,Jb);var Ka=c(qa,ac);if(Ha===Ka&&Ha!==la.UNKNOWN||B.equals(fa,qa))return W[0]=1,W[1]=1,W[2]=1,!0;if(Ha===la.SPHERICAL_ECEF){fa=R.length(U);U=fa/Math.sqrt(U[0]*U[0]+U[1]*U[1]);fa/=H.earth.radius;if(Ka===la.WEB_MERCATOR)return W[0]=U*fa,W[1]=U*fa,W[2]=1,!0;if(Ka===la.WGS84||Ka===la.CGCS2000)return Ka=Tb,W[0]=Ka*U*fa,W[1]=Ka*fa,W[2]=1,!0}else if(Ha===la.PLATE_CARREE){if(Ka===la.WGS84||Ka===la.CGCS2000)return W[0]=Tb,W[1]=Tb,W[2]=1,!0;if(Ka===la.WEB_MERCATOR)return Ka=
U[1]/H.earth.radius,W[0]=1,W[1]=1/Math.cos(Ka),W[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(U,fa,W,qa){const Ha=Math.cos(W);U[0]=Math.cos(fa)*Ha*qa;U[1]=Math.sin(fa)*Ha*qa;U[2]=Math.sin(W)*qa};e.lonLatToWebMercatorComparable=w;e.project=da;e.projectBoundingRect=function(U,fa,W,qa){if(null==U)return!1;if(B.equals(fa,qa))return I.copy(W,U),!0;kb[0]=U[0];kb[1]=U[1];kb[2]=0;if(!Pa(kb,fa,0,kb,qa,0,1))return!1;W[0]=kb[0];W[1]=kb[1];kb[0]=U[2];kb[1]=U[3];kb[2]=0;if(!Pa(kb,fa,0,kb,qa,0,1))return!1;
W[2]=kb[0];W[3]=kb[1];return!0};e.projectBoundingSphere=function(U,fa,W,qa){if(J.isNone(fa)||J.isNone(qa))return!1;fa=wb(fa,qa,ic);if(fa.projector===m)return W[0]=U[0],W[1]=U[1],W[2]=U[2],W[3]=U[3],!0;if(J.isNone(fa.projector))return!1;const {source:Ha,dest:Ka}=fa;if(Ka.spatialReferenceId===la.WEB_MERCATOR){fa=Db[Ha.spatialReferenceId][la.WGS84];if(J.isNone(fa))return!1;fa(U,0,Gb,0);T(Gb,0,W,0);W[3]=na(Gb[1],U[2],U[3],H.earth.radius);return!0}if(Ha.spatialReferenceId!==la.WGS84&&Ha.spatialReferenceId!==
la.CGCS2000||Ka.spatialReferenceId!==la.PLATE_CARREE)fa.projector(U,0,W,0),W[3]=U[3]*(Ha.metersPerUnit??1)/(Ka.metersPerUnit??1);else{qa=Db[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Sa=U[3];J.isSome(Db[Ha.spatialReferenceId][la.SPHERICAL_ECEF])&&J.isSome(qa)&&(Sa=na(U[1],U[2],U[3],H.earth.radius));fa.projector(U,0,W,0);W[3]=Sa}return!0};e.projectBuffer=Pa;e.projectDirection=function(U,fa,W,qa,Ha){R.copy(Za,U);R.add(bc,U,fa);La(Za,W,Za,Ha);La(bc,W,bc,Ha);R.subtract(qa,bc,Za);R.normalize(qa,qa)};e.projectExtent=
function(U,fa,W=fa.spatialReference,qa=0){return J.isSome(U.spatialReference)&&J.isSome(W)&&J.isSome(Da(U,U.spatialReference,fa,W,qa))};e.projectMany=O;e.projectMultipoint=function(U,fa,W=fa.spatialReference,qa=0){return J.isSome(U.spatialReference)&&J.isSome(W)&&J.isSome(pa(U,U.spatialReference,fa,W,qa))};e.projectOrLoad=function(U,fa){U=N([U],fa);return J.isSome(U.pending)?{pending:U.pending,geometry:null}:J.isSome(U.geometries)?{pending:null,geometry:U.geometries[0]}:{pending:null,geometry:null}};
e.projectOrLoadMany=N;e.projectPoint=function(U,fa,W=fa.spatialReference,qa=0){return J.isSome(W)&&J.isSome(U.spatialReference)&&J.isSome(ya(U,U.spatialReference,fa,W,qa))};e.projectPointToVector=function(U,fa,W,qa=0){Za[0]=U.x;Za[1]=U.y;const Ha=U.z;Za[2]=void 0!==Ha?Ha:qa;return Pa(Za,U.spatialReference,0,fa,W,0,1)};e.projectPointToWGS84ComparableLonLat=function(U,fa){Za[0]=U.x;Za[1]=U.y;const W=U.z;Za[2]=void 0!==W?W:0;return Qa(Za,U.spatialReference,fa)};e.projectPolygon=function(U,fa,W=fa.spatialReference,
qa=0){return J.isSome(U.spatialReference)&&J.isSome(W)&&J.isSome(xa(U,U.spatialReference,fa,W,qa))};e.projectPolygonToWGS84ComparableLonLat=function({hasZ:U,spatialReference:fa,rings:W},qa,Ha=0){fa=c(fa,Jb);fa=Db[fa][la.WGS84_COMPARABLE_LON_LAT];if(J.isNone(fa))return!1;U=U?Ka=>Ka:Ka=>R.set(Za,Ka[0],Ka[1],Ha);for(const Ka of W){W=[];for(const Sa of Ka){const Ya=[0,0,Ha];fa(U(Sa),0,Ya,0);W.push(Ya)}qa.push(W)}return!0};e.projectPolyline=function(U,fa,W=fa.spatialReference,qa=0){return J.isSome(U.spatialReference)&&
J.isSome(W)&&J.isSome(ta(U,U.spatialReference,fa,W,qa))};e.projectPolylineToWGS84ComparableLonLat=function({hasZ:U,spatialReference:fa,paths:W},qa,Ha=0){fa=c(fa,Jb);fa=Db[fa][la.WGS84_COMPARABLE_LON_LAT];if(J.isNone(fa))return!1;U=U?Ka=>Ka:Ka=>R.set(Za,Ka[0],Ka[1],Ha);for(const Ka of W){W=[];for(const Sa of Ka){const Ya=[0,0,Ha];fa(U(Sa),0,Ya,0);W.push(Ya)}qa.push(W)}return!0};e.projectVectorToDehydratedPoint=function(U,fa,W){return Pa(U,fa,0,Za,W.spatialReference,0,1)?(W.x=Za[0],W.y=Za[1],W.z=Za[2],
W):null};e.projectVectorToPoint=function(U,fa,W){if(J.isNone(fa)||J.isNone(W))return null;const qa=new G({spatialReference:W});return Pa(U,fa,0,Za,W,0,1)?(qa.x=Za[0],qa.y=Za[1],qa.z=Za[2],qa):null};e.projectVectorToVector=La;e.projectVectorToWGS84ComparableLonLat=function(U,fa,W){return Qa(U,fa,W)};e.projectWithoutEngine=ja;e.projectXYZToVector=Ca;e.sphericalPCPFtoLonLatElevation=Ia;e.test={get loadPromise(){return hb}};e.tryProjectWithZConversion=t;e.unload=function(){hb=b=ib=null;Ib={}};Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(h,e,ca){ca=function(V){function E(){return J.apply(this,arguments)}e._inherits(E,V);var J=e._createSuper(E);E.prototype.notify=function(){var P=this._observers;if(P&&0<P.length){P=P.slice();for(const D of P)D.onInvalidated(),D.onCommitted()}};return e._createClass(E)}(ca.ObservableBase);h.SimpleObservable=
ca;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(h,e,ca){function V(c,m){c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=m[3];c[4]=m[4];c[5]=m[5];c[6]=m[6];c[7]=m[7];c[8]=m[8];c[9]=m[9];c[10]=m[10];c[11]=m[11];c[12]=m[12];c[13]=m[13];c[14]=m[14];c[15]=m[15];return c}function E(c,m,ea,ka,ua,w,T,aa,X,ha,ma,oa,za,wa,Ia,Ga,Ja){c[0]=m;c[1]=ea;c[2]=ka;c[3]=ua;c[4]=w;c[5]=T;c[6]=aa;c[7]=X;c[8]=ha;c[9]=ma;c[10]=oa;c[11]=
za;c[12]=wa;c[13]=Ia;c[14]=Ga;c[15]=Ja;return c}function J(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function P(c,m){if(c===m){const ea=m[1],ka=m[2],ua=m[3],w=m[6],T=m[7],aa=m[11];c[1]=m[4];c[2]=m[8];c[3]=m[12];c[4]=ea;c[6]=m[9];c[7]=m[13];c[8]=ka;c[9]=w;c[11]=m[14];c[12]=ua;c[13]=T;c[14]=aa}else c[0]=m[0],c[1]=m[4],c[2]=m[8],c[3]=m[12],c[4]=m[1],c[5]=m[5],c[6]=m[9],c[7]=m[13],c[8]=m[2],c[9]=m[6],c[10]=m[10],c[11]=
m[14],c[12]=m[3],c[13]=m[7],c[14]=m[11],c[15]=m[15];return c}function D(c,m){l(c,m)||J(c);return c}function l(c,m){const ea=m[0],ka=m[1],ua=m[2],w=m[3],T=m[4],aa=m[5],X=m[6],ha=m[7],ma=m[8],oa=m[9],za=m[10],wa=m[11],Ia=m[12],Ga=m[13],Ja=m[14];m=m[15];const Ua=ea*aa-ka*T,Ra=ea*X-ua*T,Wa=ea*ha-w*T,Va=ka*X-ua*aa,Na=ka*ha-w*aa,Xa=ua*ha-w*X,bb=ma*Ga-oa*Ia,Aa=ma*Ja-za*Ia,wb=ma*m-wa*Ia,sb=oa*Ja-za*Ga,ib=oa*m-wa*Ga,b=za*m-wa*Ja;let hb=Ua*b-Ra*ib+Wa*sb+Va*wb-Na*Aa+Xa*bb;if(!hb)return null;hb=1/hb;c[0]=(aa*
b-X*ib+ha*sb)*hb;c[1]=(ua*ib-ka*b-w*sb)*hb;c[2]=(Ga*Xa-Ja*Na+m*Va)*hb;c[3]=(za*Na-oa*Xa-wa*Va)*hb;c[4]=(X*wb-T*b-ha*Aa)*hb;c[5]=(ea*b-ua*wb+w*Aa)*hb;c[6]=(Ja*Wa-Ia*Xa-m*Ra)*hb;c[7]=(ma*Xa-za*Wa+wa*Ra)*hb;c[8]=(T*ib-aa*wb+ha*bb)*hb;c[9]=(ka*wb-ea*ib-w*bb)*hb;c[10]=(Ia*Na-Ga*Wa+m*Ua)*hb;c[11]=(oa*Wa-ma*Na-wa*Ua)*hb;c[12]=(aa*Aa-T*sb-X*bb)*hb;c[13]=(ea*sb-ka*Aa+ua*bb)*hb;c[14]=(Ga*Ra-Ia*Va-Ja*Ua)*hb;c[15]=(ma*Va-oa*Ra+za*Ua)*hb;return c}function k(c,m){const ea=m[0],ka=m[1],ua=m[2],w=m[3],T=m[4],aa=
m[5],X=m[6],ha=m[7],ma=m[8],oa=m[9],za=m[10],wa=m[11],Ia=m[12],Ga=m[13],Ja=m[14];m=m[15];c[0]=aa*(za*m-wa*Ja)-oa*(X*m-ha*Ja)+Ga*(X*wa-ha*za);c[1]=-(ka*(za*m-wa*Ja)-oa*(ua*m-w*Ja)+Ga*(ua*wa-w*za));c[2]=ka*(X*m-ha*Ja)-aa*(ua*m-w*Ja)+Ga*(ua*ha-w*X);c[3]=-(ka*(X*wa-ha*za)-aa*(ua*wa-w*za)+oa*(ua*ha-w*X));c[4]=-(T*(za*m-wa*Ja)-ma*(X*m-ha*Ja)+Ia*(X*wa-ha*za));c[5]=ea*(za*m-wa*Ja)-ma*(ua*m-w*Ja)+Ia*(ua*wa-w*za);c[6]=-(ea*(X*m-ha*Ja)-T*(ua*m-w*Ja)+Ia*(ua*ha-w*X));c[7]=ea*(X*wa-ha*za)-T*(ua*wa-w*za)+ma*(ua*
ha-w*X);c[8]=T*(oa*m-wa*Ga)-ma*(aa*m-ha*Ga)+Ia*(aa*wa-ha*oa);c[9]=-(ea*(oa*m-wa*Ga)-ma*(ka*m-w*Ga)+Ia*(ka*wa-w*oa));c[10]=ea*(aa*m-ha*Ga)-T*(ka*m-w*Ga)+Ia*(ka*ha-w*aa);c[11]=-(ea*(aa*wa-ha*oa)-T*(ka*wa-w*oa)+ma*(ka*ha-w*aa));c[12]=-(T*(oa*Ja-za*Ga)-ma*(aa*Ja-X*Ga)+Ia*(aa*za-X*oa));c[13]=ea*(oa*Ja-za*Ga)-ma*(ka*Ja-ua*Ga)+Ia*(ka*za-ua*oa);c[14]=-(ea*(aa*Ja-X*Ga)-T*(ka*Ja-ua*Ga)+Ia*(ka*X-ua*aa));c[15]=ea*(aa*za-X*oa)-T*(ka*za-ua*oa)+ma*(ka*X-ua*aa);return c}function n(c){const m=c[0],ea=c[1],ka=c[2],
ua=c[3],w=c[4],T=c[5],aa=c[6],X=c[7],ha=c[8],ma=c[9],oa=c[10],za=c[11],wa=c[12],Ia=c[13],Ga=c[14];c=c[15];return(m*T-ea*w)*(oa*c-za*Ga)-(m*aa-ka*w)*(ma*c-za*Ia)+(m*X-ua*w)*(ma*Ga-oa*Ia)+(ea*aa-ka*T)*(ha*c-za*wa)-(ea*X-ua*T)*(ha*Ga-oa*wa)+(ka*X-ua*aa)*(ha*Ia-ma*wa)}function R(c,m,ea){const ka=m[0],ua=m[1],w=m[2],T=m[3],aa=m[4],X=m[5],ha=m[6],ma=m[7],oa=m[8],za=m[9],wa=m[10],Ia=m[11],Ga=m[12],Ja=m[13],Ua=m[14];m=m[15];let Ra=ea[0],Wa=ea[1],Va=ea[2],Na=ea[3];c[0]=Ra*ka+Wa*aa+Va*oa+Na*Ga;c[1]=Ra*ua+Wa*
X+Va*za+Na*Ja;c[2]=Ra*w+Wa*ha+Va*wa+Na*Ua;c[3]=Ra*T+Wa*ma+Va*Ia+Na*m;Ra=ea[4];Wa=ea[5];Va=ea[6];Na=ea[7];c[4]=Ra*ka+Wa*aa+Va*oa+Na*Ga;c[5]=Ra*ua+Wa*X+Va*za+Na*Ja;c[6]=Ra*w+Wa*ha+Va*wa+Na*Ua;c[7]=Ra*T+Wa*ma+Va*Ia+Na*m;Ra=ea[8];Wa=ea[9];Va=ea[10];Na=ea[11];c[8]=Ra*ka+Wa*aa+Va*oa+Na*Ga;c[9]=Ra*ua+Wa*X+Va*za+Na*Ja;c[10]=Ra*w+Wa*ha+Va*wa+Na*Ua;c[11]=Ra*T+Wa*ma+Va*Ia+Na*m;Ra=ea[12];Wa=ea[13];Va=ea[14];Na=ea[15];c[12]=Ra*ka+Wa*aa+Va*oa+Na*Ga;c[13]=Ra*ua+Wa*X+Va*za+Na*Ja;c[14]=Ra*w+Wa*ha+Va*wa+Na*Ua;c[15]=
Ra*T+Wa*ma+Va*Ia+Na*m;return c}function M(c,m,ea){const ka=ea[0],ua=ea[1];ea=ea[2];if(m===c)c[12]=m[0]*ka+m[4]*ua+m[8]*ea+m[12],c[13]=m[1]*ka+m[5]*ua+m[9]*ea+m[13],c[14]=m[2]*ka+m[6]*ua+m[10]*ea+m[14],c[15]=m[3]*ka+m[7]*ua+m[11]*ea+m[15];else{const w=m[0],T=m[1],aa=m[2],X=m[3],ha=m[4],ma=m[5],oa=m[6],za=m[7],wa=m[8],Ia=m[9],Ga=m[10],Ja=m[11];c[0]=w;c[1]=T;c[2]=aa;c[3]=X;c[4]=ha;c[5]=ma;c[6]=oa;c[7]=za;c[8]=wa;c[9]=Ia;c[10]=Ga;c[11]=Ja;c[12]=w*ka+ha*ua+wa*ea+m[12];c[13]=T*ka+ma*ua+Ia*ea+m[13];c[14]=
aa*ka+oa*ua+Ga*ea+m[14];c[15]=X*ka+za*ua+Ja*ea+m[15]}return c}function F(c,m,ea){const ka=ea[0],ua=ea[1];ea=ea[2];c[0]=m[0]*ka;c[1]=m[1]*ka;c[2]=m[2]*ka;c[3]=m[3]*ka;c[4]=m[4]*ua;c[5]=m[5]*ua;c[6]=m[6]*ua;c[7]=m[7]*ua;c[8]=m[8]*ea;c[9]=m[9]*ea;c[10]=m[10]*ea;c[11]=m[11]*ea;c[12]=m[12];c[13]=m[13];c[14]=m[14];c[15]=m[15];return c}function x(c,m,ea,ka){let ua=ka[0],w=ka[1];ka=ka[2];let T=Math.sqrt(ua*ua+w*w+ka*ka);var aa=void 0,X=void 0;let ha=void 0,ma=void 0,oa=void 0,za=void 0,wa=void 0,Ia=void 0,
Ga=void 0,Ja=void 0,Ua=void 0,Ra=void 0,Wa=void 0,Va=void 0,Na=void 0,Xa=void 0,bb=void 0,Aa=void 0,wb=void 0,sb=void 0,ib=void 0,b=void 0;X=aa=void 0;if(T<ca.getEpsilon())return null;T=1/T;ua*=T;w*=T;ka*=T;aa=Math.sin(ea);X=Math.cos(ea);ha=1-X;ma=m[0];oa=m[1];za=m[2];wa=m[3];Ia=m[4];Ga=m[5];Ja=m[6];Ua=m[7];Ra=m[8];Wa=m[9];Va=m[10];Na=m[11];Xa=ua*ua*ha+X;bb=w*ua*ha+ka*aa;Aa=ka*ua*ha-w*aa;wb=ua*w*ha-ka*aa;sb=w*w*ha+X;ib=ka*w*ha+ua*aa;b=ua*ka*ha+w*aa;aa=w*ka*ha-ua*aa;X=ka*ka*ha+X;c[0]=ma*Xa+Ia*bb+Ra*
Aa;c[1]=oa*Xa+Ga*bb+Wa*Aa;c[2]=za*Xa+Ja*bb+Va*Aa;c[3]=wa*Xa+Ua*bb+Na*Aa;c[4]=ma*wb+Ia*sb+Ra*ib;c[5]=oa*wb+Ga*sb+Wa*ib;c[6]=za*wb+Ja*sb+Va*ib;c[7]=wa*wb+Ua*sb+Na*ib;c[8]=ma*b+Ia*aa+Ra*X;c[9]=oa*b+Ga*aa+Wa*X;c[10]=za*b+Ja*aa+Va*X;c[11]=wa*b+Ua*aa+Na*X;m!==c&&(c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);return c}function f(c,m,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const ua=m[4],w=m[5],T=m[6],aa=m[7],X=m[8],ha=m[9],ma=m[10],oa=m[11];m!==c&&(c[0]=m[0],c[1]=m[1],c[2]=m[2],c[3]=m[3],c[12]=m[12],
c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[4]=ua*ea+X*ka;c[5]=w*ea+ha*ka;c[6]=T*ea+ma*ka;c[7]=aa*ea+oa*ka;c[8]=X*ea-ua*ka;c[9]=ha*ea-w*ka;c[10]=ma*ea-T*ka;c[11]=oa*ea-aa*ka;return c}function p(c,m,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const ua=m[0],w=m[1],T=m[2],aa=m[3],X=m[8],ha=m[9],ma=m[10],oa=m[11];m!==c&&(c[4]=m[4],c[5]=m[5],c[6]=m[6],c[7]=m[7],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[0]=ua*ea-X*ka;c[1]=w*ea-ha*ka;c[2]=T*ea-ma*ka;c[3]=aa*ea-oa*ka;c[8]=ua*ka+X*ea;c[9]=w*ka+ha*ea;c[10]=
T*ka+ma*ea;c[11]=aa*ka+oa*ea;return c}function G(c,m,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const ua=m[0],w=m[1],T=m[2],aa=m[3],X=m[4],ha=m[5],ma=m[6],oa=m[7];m!==c&&(c[8]=m[8],c[9]=m[9],c[10]=m[10],c[11]=m[11],c[12]=m[12],c[13]=m[13],c[14]=m[14],c[15]=m[15]);c[0]=ua*ea+X*ka;c[1]=w*ea+ha*ka;c[2]=T*ea+ma*ka;c[3]=aa*ea+oa*ka;c[4]=X*ea-ua*ka;c[5]=ha*ea-w*ka;c[6]=ma*ea-T*ka;c[7]=oa*ea-aa*ka;return c}function z(c,m){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=
0;c[12]=m[0];c[13]=m[1];c[14]=m[2];c[15]=1;return c}function v(c,m){c[0]=m[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=m[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function I(c,m,ea){if(0===m)return J(c);let ka=ea[0],ua=ea[1];ea=ea[2];let w=Math.sqrt(ka*ka+ua*ua+ea*ea),T=void 0,aa=void 0,X=void 0;if(w<ca.getEpsilon())return null;w=1/w;ka*=w;ua*=w;ea*=w;T=Math.sin(m);aa=Math.cos(m);X=1-aa;c[0]=ka*ka*X+aa;c[1]=ua*ka*X+ea*T;c[2]=ea*ka*X-ua*T;c[3]=0;c[4]=ka*ua*
X-ea*T;c[5]=ua*ua*X+aa;c[6]=ea*ua*X+ka*T;c[7]=0;c[8]=ka*ea*X+ua*T;c[9]=ua*ea*X-ka*T;c[10]=ea*ea*X+aa;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function H(c,m){const ea=Math.sin(m);m=Math.cos(m);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m;c[6]=ea;c[7]=0;c[8]=0;c[9]=-ea;c[10]=m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function u(c,m){const ea=Math.sin(m);m=Math.cos(m);c[0]=m;c[1]=0;c[2]=-ea;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ea;c[9]=0;c[10]=m;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function S(c,m){const ea=Math.sin(m);m=Math.cos(m);c[0]=m;c[1]=ea;c[2]=0;c[3]=0;c[4]=-ea;c[5]=m;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function B(c,m,ea){var ka=m[0],ua=m[1],w=m[2],T=m[3],aa=ka+ka,X=ua+ua;const ha=w+w;m=ka*aa;const ma=ka*X;ka*=ha;const oa=ua*X;ua*=ha;w*=ha;aa*=T;X*=T;T*=ha;c[0]=1-(oa+w);c[1]=ma+T;c[2]=ka-X;c[3]=0;c[4]=ma-T;c[5]=1-(m+w);c[6]=ua+aa;c[7]=0;c[8]=ka+X;c[9]=ua-aa;c[10]=1-(m+oa);c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=
ea[2];c[15]=1;return c}function Q(c,m){const ea=Fa,ka=-m[0],ua=-m[1],w=-m[2],T=m[3],aa=m[4],X=m[5],ha=m[6],ma=m[7],oa=ka*ka+ua*ua+w*w+T*T;0<oa?(ea[0]=2*(aa*T+ma*ka+X*w-ha*ua)/oa,ea[1]=2*(X*T+ma*ua+ha*ka-aa*w)/oa,ea[2]=2*(ha*T+ma*w+aa*ua-X*ka)/oa):(ea[0]=2*(aa*T+ma*ka+X*w-ha*ua),ea[1]=2*(X*T+ma*ua+ha*ka-aa*w),ea[2]=2*(ha*T+ma*w+aa*ua-X*ka));B(c,m,ea);return c}function C(c,m){c[0]=m[12];c[1]=m[13];c[2]=m[14];return c}function y(c,m){const ea=m[0],ka=m[1],ua=m[2],w=m[4],T=m[5],aa=m[6],X=m[8],ha=m[9];
m=m[10];c[0]=Math.sqrt(ea*ea+ka*ka+ua*ua);c[1]=Math.sqrt(w*w+T*T+aa*aa);c[2]=Math.sqrt(X*X+ha*ha+m*m);return c}function K(c,m){const ea=m[0]+m[5]+m[10];let ka=0;0<ea?(ka=2*Math.sqrt(ea+1),c[3]=.25*ka,c[0]=(m[6]-m[9])/ka,c[1]=(m[8]-m[2])/ka,c[2]=(m[1]-m[4])/ka):m[0]>m[5]&&m[0]>m[10]?(ka=2*Math.sqrt(1+m[0]-m[5]-m[10]),c[3]=(m[6]-m[9])/ka,c[0]=.25*ka,c[1]=(m[1]+m[4])/ka,c[2]=(m[8]+m[2])/ka):m[5]>m[10]?(ka=2*Math.sqrt(1+m[5]-m[0]-m[10]),c[3]=(m[8]-m[2])/ka,c[0]=(m[1]+m[4])/ka,c[1]=.25*ka,c[2]=(m[6]+m[9])/
ka):(ka=2*Math.sqrt(1+m[10]-m[0]-m[5]),c[3]=(m[1]-m[4])/ka,c[0]=(m[8]+m[2])/ka,c[1]=(m[6]+m[9])/ka,c[2]=.25*ka);return c}function da(c,m,ea,ka){var ua=m[0],w=m[1],T=m[2],aa=m[3],X=ua+ua,ha=w+w,ma=T+T;m=ua*X;const oa=ua*ha;ua*=ma;const za=w*ha;w*=ma;T*=ma;X*=aa;ha*=aa;aa*=ma;ma=ka[0];const wa=ka[1];ka=ka[2];c[0]=(1-(za+T))*ma;c[1]=(oa+aa)*ma;c[2]=(ua-ha)*ma;c[3]=0;c[4]=(oa-aa)*wa;c[5]=(1-(m+T))*wa;c[6]=(w+X)*wa;c[7]=0;c[8]=(ua+ha)*ka;c[9]=(w-X)*ka;c[10]=(1-(m+za))*ka;c[11]=0;c[12]=ea[0];c[13]=ea[1];
c[14]=ea[2];c[15]=1;return c}function O(c,m,ea,ka,ua){var w=m[0],T=m[1],aa=m[2],X=m[3],ha=w+w,ma=T+T,oa=aa+aa;m=w*ha;var za=w*ma,wa=w*oa;w=T*ma;T*=oa;var Ia=aa*oa;aa=X*ha;ma*=X;const Ga=X*oa;var Ja=ka[0],Ua=ka[1];oa=ka[2];ka=ua[0];X=ua[1];ua=ua[2];ha=(1-(w+Ia))*Ja;const Ra=(za+Ga)*Ja;Ja*=wa-ma;za=(za-Ga)*Ua;Ia=(1-(m+Ia))*Ua;Ua*=T+aa;wa=(wa+ma)*oa;T=(T-aa)*oa;m=(1-(m+w))*oa;c[0]=ha;c[1]=Ra;c[2]=Ja;c[3]=0;c[4]=za;c[5]=Ia;c[6]=Ua;c[7]=0;c[8]=wa;c[9]=T;c[10]=m;c[11]=0;c[12]=ea[0]+ka-(ha*ka+za*X+wa*ua);
c[13]=ea[1]+X-(Ra*ka+Ia*X+T*ua);c[14]=ea[2]+ua-(Ja*ka+Ua*X+m*ua);c[15]=1;return c}function N(c,m){var ea=m[0],ka=m[1],ua=m[2];m=m[3];var w=ea+ea,T=ka+ka;const aa=ua+ua;ea*=w;const X=ka*w;ka*=T;const ha=ua*w,ma=ua*T;ua*=aa;w*=m;T*=m;m*=aa;c[0]=1-ka-ua;c[1]=X+m;c[2]=ha-T;c[3]=0;c[4]=X-m;c[5]=1-ea-ua;c[6]=ma+w;c[7]=0;c[8]=ha+T;c[9]=ma-w;c[10]=1-ea-ka;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function r(c,m,ea,ka,ua,w,T){const aa=1/(ea-m),X=1/(ua-ka),ha=1/(w-T);c[0]=2*w*aa;c[1]=0;c[2]=0;c[3]=0;
c[4]=0;c[5]=2*w*X;c[6]=0;c[7]=0;c[8]=(ea+m)*aa;c[9]=(ua+ka)*X;c[10]=(T+w)*ha;c[11]=-1;c[12]=0;c[13]=0;c[14]=T*w*2*ha;c[15]=0;return c}function t(c,m,ea,ka,ua){m=1/Math.tan(m/2);let w=void 0;c[0]=m/ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=m;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=ua&&Infinity!==ua?(w=1/(ka-ua),c[10]=(ua+ka)*w,c[14]=2*ua*ka*w):(c[10]=-1,c[14]=-2*ka);return c}function Y(c,m,ea,ka){const ua=Math.tan(m.upDegrees*Math.PI/180),w=Math.tan(m.downDegrees*Math.PI/180),
T=Math.tan(m.leftDegrees*Math.PI/180);m=Math.tan(m.rightDegrees*Math.PI/180);const aa=2/(T+m),X=2/(ua+w);c[0]=aa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=X;c[6]=0;c[7]=0;c[8]=-((T-m)*aa*.5);c[9]=(ua-w)*X*.5;c[10]=ka/(ea-ka);c[11]=-1;c[12]=0;c[13]=0;c[14]=ka*ea/(ea-ka);c[15]=0;return c}function ja(c,m,ea,ka,ua,w,T){const aa=1/(m-ea),X=1/(ka-ua),ha=1/(w-T);c[0]=-2*aa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*X;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ha;c[11]=0;c[12]=(m+ea)*aa;c[13]=(ua+ka)*X;c[14]=(T+w)*ha;c[15]=1;return c}
function ya(c,m,ea,ka){var ua=void 0;let w=void 0;var T=void 0,aa=void 0;let X=void 0,ha=void 0;var ma=void 0,oa=void 0;let za=void 0,wa=void 0;const Ia=m[0],Ga=m[1];m=m[2];T=ka[0];aa=ka[1];ka=ka[2];ma=ea[0];oa=ea[1];ea=ea[2];ua=ca.getEpsilon();if(Math.abs(Ia-ma)<ua&&Math.abs(Ga-oa)<ua&&Math.abs(m-ea)<ua)return J(c);ma=Ia-ma;oa=Ga-oa;za=m-ea;wa=1/Math.sqrt(ma*ma+oa*oa+za*za);ma*=wa;oa*=wa;za*=wa;ua=aa*za-ka*oa;w=ka*ma-T*za;T=T*oa-aa*ma;(wa=Math.sqrt(ua*ua+w*w+T*T))?(wa=1/wa,ua*=wa,w*=wa,T*=wa):T=
w=ua=0;aa=oa*T-za*w;X=za*ua-ma*T;ha=ma*w-oa*ua;(wa=Math.sqrt(aa*aa+X*X+ha*ha))?(wa=1/wa,aa*=wa,X*=wa,ha*=wa):ha=X=aa=0;c[0]=ua;c[1]=aa;c[2]=ma;c[3]=0;c[4]=w;c[5]=X;c[6]=oa;c[7]=0;c[8]=T;c[9]=ha;c[10]=za;c[11]=0;c[12]=-(ua*Ia+w*Ga+T*m);c[13]=-(aa*Ia+X*Ga+ha*m);c[14]=-(ma*Ia+oa*Ga+za*m);c[15]=1;return c}function pa(c,m,ea,ka){const ua=m[0],w=m[1];m=m[2];var T=ka[0];const aa=ka[1];var X=ka[2];ka=ua-ea[0];let ha=w-ea[1];ea=m-ea[2];let ma=ka*ka+ha*ha+ea*ea;0<ma&&(ma=1/Math.sqrt(ma),ka*=ma,ha*=ma,ea*=ma);
let oa=aa*ea-X*ha;X=X*ka-T*ea;T=T*ha-aa*ka;ma=oa*oa+X*X+T*T;0<ma&&(ma=1/Math.sqrt(ma),oa*=ma,X*=ma,T*=ma);c[0]=oa;c[1]=X;c[2]=T;c[3]=0;c[4]=ha*T-ea*X;c[5]=ea*oa-ka*T;c[6]=ka*X-ha*oa;c[7]=0;c[8]=ka;c[9]=ha;c[10]=ea;c[11]=0;c[12]=ua;c[13]=w;c[14]=m;c[15]=1;return c}function ta(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function xa(c){return Math.sqrt(c[0]**2+c[1]**
2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Da(c,m,ea){c[0]=m[0]+ea[0];c[1]=m[1]+ea[1];c[2]=m[2]+ea[2];c[3]=m[3]+ea[3];c[4]=m[4]+ea[4];c[5]=m[5]+ea[5];c[6]=m[6]+ea[6];c[7]=m[7]+ea[7];c[8]=m[8]+ea[8];c[9]=m[9]+ea[9];c[10]=m[10]+ea[10];c[11]=m[11]+ea[11];c[12]=m[12]+ea[12];c[13]=m[13]+ea[13];c[14]=m[14]+ea[14];c[15]=m[15]+ea[15];return c}function Ca(c,m,ea){c[0]=m[0]-ea[0];c[1]=m[1]-ea[1];c[2]=m[2]-ea[2];c[3]=m[3]-
ea[3];c[4]=m[4]-ea[4];c[5]=m[5]-ea[5];c[6]=m[6]-ea[6];c[7]=m[7]-ea[7];c[8]=m[8]-ea[8];c[9]=m[9]-ea[9];c[10]=m[10]-ea[10];c[11]=m[11]-ea[11];c[12]=m[12]-ea[12];c[13]=m[13]-ea[13];c[14]=m[14]-ea[14];c[15]=m[15]-ea[15];return c}function La(c,m,ea){c[0]=m[0]*ea;c[1]=m[1]*ea;c[2]=m[2]*ea;c[3]=m[3]*ea;c[4]=m[4]*ea;c[5]=m[5]*ea;c[6]=m[6]*ea;c[7]=m[7]*ea;c[8]=m[8]*ea;c[9]=m[9]*ea;c[10]=m[10]*ea;c[11]=m[11]*ea;c[12]=m[12]*ea;c[13]=m[13]*ea;c[14]=m[14]*ea;c[15]=m[15]*ea;return c}function Qa(c,m,ea,ka){c[0]=
m[0]+ea[0]*ka;c[1]=m[1]+ea[1]*ka;c[2]=m[2]+ea[2]*ka;c[3]=m[3]+ea[3]*ka;c[4]=m[4]+ea[4]*ka;c[5]=m[5]+ea[5]*ka;c[6]=m[6]+ea[6]*ka;c[7]=m[7]+ea[7]*ka;c[8]=m[8]+ea[8]*ka;c[9]=m[9]+ea[9]*ka;c[10]=m[10]+ea[10]*ka;c[11]=m[11]+ea[11]*ka;c[12]=m[12]+ea[12]*ka;c[13]=m[13]+ea[13]*ka;c[14]=m[14]+ea[14]*ka;c[15]=m[15]+ea[15]*ka;return c}function Pa(c,m){return c[0]===m[0]&&c[1]===m[1]&&c[2]===m[2]&&c[3]===m[3]&&c[4]===m[4]&&c[5]===m[5]&&c[6]===m[6]&&c[7]===m[7]&&c[8]===m[8]&&c[9]===m[9]&&c[10]===m[10]&&c[11]===
m[11]&&c[12]===m[12]&&c[13]===m[13]&&c[14]===m[14]&&c[15]===m[15]}function ab(c,m){if(c===m)return!0;const ea=c[0],ka=c[1],ua=c[2],w=c[3],T=c[4],aa=c[5],X=c[6],ha=c[7],ma=c[8],oa=c[9],za=c[10],wa=c[11],Ia=c[12],Ga=c[13],Ja=c[14];c=c[15];const Ua=m[0],Ra=m[1],Wa=m[2],Va=m[3],Na=m[4],Xa=m[5],bb=m[6],Aa=m[7],wb=m[8],sb=m[9],ib=m[10],b=m[11],hb=m[12],Ib=m[13],Rb=m[14];m=m[15];const nb=ca.getEpsilon();return Math.abs(ea-Ua)<=nb*Math.max(1,Math.abs(ea),Math.abs(Ua))&&Math.abs(ka-Ra)<=nb*Math.max(1,Math.abs(ka),
Math.abs(Ra))&&Math.abs(ua-Wa)<=nb*Math.max(1,Math.abs(ua),Math.abs(Wa))&&Math.abs(w-Va)<=nb*Math.max(1,Math.abs(w),Math.abs(Va))&&Math.abs(T-Na)<=nb*Math.max(1,Math.abs(T),Math.abs(Na))&&Math.abs(aa-Xa)<=nb*Math.max(1,Math.abs(aa),Math.abs(Xa))&&Math.abs(X-bb)<=nb*Math.max(1,Math.abs(X),Math.abs(bb))&&Math.abs(ha-Aa)<=nb*Math.max(1,Math.abs(ha),Math.abs(Aa))&&Math.abs(ma-wb)<=nb*Math.max(1,Math.abs(ma),Math.abs(wb))&&Math.abs(oa-sb)<=nb*Math.max(1,Math.abs(oa),Math.abs(sb))&&Math.abs(za-ib)<=nb*
Math.max(1,Math.abs(za),Math.abs(ib))&&Math.abs(wa-b)<=nb*Math.max(1,Math.abs(wa),Math.abs(b))&&Math.abs(Ia-hb)<=nb*Math.max(1,Math.abs(Ia),Math.abs(hb))&&Math.abs(Ga-Ib)<=nb*Math.max(1,Math.abs(Ga),Math.abs(Ib))&&Math.abs(Ja-Rb)<=nb*Math.max(1,Math.abs(Ja),Math.abs(Rb))&&Math.abs(c-m)<=nb*Math.max(1,Math.abs(c),Math.abs(m))}function na(c){const m=ca.getEpsilon(),ea=c[0],ka=c[1],ua=c[2],w=c[4],T=c[5],aa=c[6],X=c[8],ha=c[9];c=c[10];return Math.abs(1-(ea*ea+w*w+X*X))<=m&&Math.abs(1-(ka*ka+T*T+ha*ha))<=
m&&Math.abs(1-(ua*ua+aa*aa+c*c))<=m}function sa(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const Fa=e.create();e=Object.freeze(Object.defineProperty({__proto__:null,add:Da,adjoint:k,copy:V,determinant:n,equals:ab,exactEquals:Pa,frob:xa,fromQuat:N,fromQuat2:Q,fromRotation:I,fromRotationTranslation:B,fromRotationTranslationScale:da,fromRotationTranslationScaleOrigin:O,fromScaling:v,fromTranslation:z,fromXRotation:H,fromYRotation:u,fromZRotation:S,
frustum:r,getRotation:K,getScaling:y,getTranslation:C,hasIdentityRotation:sa,identity:J,invert:l,invertOrIdentity:D,isOrthoNormal:na,lookAt:ya,mul:R,multiply:R,multiplyScalar:La,multiplyScalarAndAdd:Qa,ortho:ja,perspective:t,perspectiveFromFieldOfView:Y,rotate:x,rotateX:f,rotateY:p,rotateZ:G,scale:F,set:E,str:ta,sub:Ca,subtract:Ca,targetTo:pa,translate:M,transpose:P},Symbol.toStringTag,{value:"Module"}));h.add=Da;h.adjoint=k;h.copy=V;h.determinant=n;h.equals=ab;h.exactEquals=Pa;h.frob=xa;h.fromQuat=
N;h.fromQuat2=Q;h.fromRotation=I;h.fromRotationTranslation=B;h.fromRotationTranslationScale=da;h.fromRotationTranslationScaleOrigin=O;h.fromScaling=v;h.fromTranslation=z;h.fromXRotation=H;h.fromYRotation=u;h.fromZRotation=S;h.frustum=r;h.getRotation=K;h.getScaling=y;h.getTranslation=C;h.hasIdentityRotation=sa;h.identity=J;h.invert=l;h.invertOrIdentity=D;h.isOrthoNormal=na;h.lookAt=ya;h.mat4=e;h.mul=R;h.multiply=R;h.multiplyScalar=La;h.multiplyScalarAndAdd=Qa;h.ortho=ja;h.perspective=t;h.perspectiveFromFieldOfView=
Y;h.rotate=x;h.rotateX=f;h.rotateY=p;h.rotateZ=G;h.scale=F;h.set=E;h.str=ta;h.sub=Ca;h.subtract=Ca;h.targetTo=pa;h.translate=M;h.transpose=P})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(h,e,ca,V,E){function J(){return!!e._pe}function P(){return!!E("esri-wasm")}function D(){return F?F:F=(new Promise((f,p)=>h(["./pe-wasm"],f,p))).then(f=>f.peWasm).then(({default:f})=>f({locateFile:p=>V.getAssetUrl(`esri/geometry/support/${p}`)})).then(f=>
{l(f)})}function l(f){function p(v,I,H){v[I]=H(v[I])}e._pe=f;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(v){function I(){return H.apply(this,arguments)}ca._inherits(I,v);var H=ca._createSuper(I);I.prototype.destroy=function(){e._pe.destroy(this)};return ca._createClass(I)}(e._pe.PeGCSExtent);f=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,
e._pe.PeUnit];for(var G of f)p(G.prototype,"getName",v=>function(){return v.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const v of[e._pe.PeGeogtran,e._pe.PeProjcs])p(v.prototype,"getParameters",I=>function(){const H=Array(e.PeDefs.PE_PARM_MAX);let u=I.call(this);for(let S=0;S<H.length;S++){const B=e._pe.getValue(u,"*");H[S]=B?e._pe.wrapPointer(B,e._pe.PeParameter):null;u+=Int32Array.BYTES_PER_ELEMENT}return H});p(e._pe.PeHorizon.prototype,"getCoord",v=>function(){const I=this.getSize();if(!I)return null;
const H=[],u=v.call(this);M(H,I,u);return H});p(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",v=>{const I=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let H=null;var u=v.call(this);if(!e._pe.compare(u,e._pe.NULL)){H=[u];const S=this.getSteps();if(1<S){u=e._pe.getPointer(u);for(let B=1;B<S;B++)H.push(e._pe.wrapPointer(u+I*B,e._pe.PeGTlistExtendedGTs))}}return H}});const z=e._pe._pe_getPeHorizonSize();G=v=>function(){let I=this._cache;I||(this._cache=I=new Map);if(I.has(v))return I.get(v);
let H=null;var u=v.call(this);if(!e._pe.compare(u,e._pe.NULL)){H=[u];const S=u.getNump();if(1<S){u=e._pe.getPointer(u);for(let B=1;B<S;B++)H.push(e._pe.wrapPointer(u+z*B,e._pe.PeHorizon))}}I.set(v,H);return H};p(e._pe.PeProjcs.prototype,"horizonGcsGenerate",G);p(e._pe.PeProjcs.prototype,"horizonPcsGenerate",G);e._pe.PeObject.prototype.toString=function(v=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const I=e._pe.getPointer(this),H=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(I,
v,H))}}function k(f){if(f){var p=e._pe.getClass(f);p&&(p=e._pe.getCache(p))&&(f=e._pe.getPointer(f))&&delete p[f]}}function n(f,p){const G=[];p=Array(p);for(let z=0;z<f;z++)G.push(e._pe.ensureInt8(p));return G}function R(f){let p;Array.isArray(f[0])?(p=[],f.forEach(G=>{p.push(G[0],G[1])})):p=f;return p}function M(f,p,G,z=!1){if(z)for(z=0;z<2*p;z++)f[z]=e._pe.getValue(G+z*Float64Array.BYTES_PER_ELEMENT,"double");else{z=0===f.length;for(let v=0;v<p;v++)z&&(f[v]=Array(2)),f[v][0]=e._pe.getValue(G,"double"),
f[v][1]=e._pe.getValue(G+Float64Array.BYTES_PER_ELEMENT,"double"),G+=2*Float64Array.BYTES_PER_ELEMENT}}let F;e._pe=null;e.PeCSTransformations=void 0;(function(f){function p(v,I,H){e._pe.ensureCache.prepare();var u=R(H);const S=H===u;u=e._pe.ensureFloat64(u);(v=e._pe._pe_geog_to_proj(e._pe.getPointer(v),I,u))&&M(H,I,u,S);return v}function G(v,I,H){return z(v,I,H,0)}function z(v,I,H,u){e._pe.ensureCache.prepare();var S=R(H);const B=H===S;S=e._pe.ensureFloat64(S);(v=e._pe._pe_proj_to_geog_center(e._pe.getPointer(v),
I,S,u))&&M(H,I,S,B);return v}f.geogToProj=p;f.projGeog=function(v,I,H,u){switch(u){case e.PeDefs.PE_TRANSFORM_P_TO_G:return G(v,I,H);case e.PeDefs.PE_TRANSFORM_G_TO_P:return p(v,I,H)}return 0};f.projToGeog=G;f.projToGeogCenter=z})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(f){f.init=function(){f.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;
f.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;f.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
f.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;f.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;f.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
f.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));e.PeFactory=void 0;(function(f){function p(I,H){let u=
null,S=G[I];S||(S={},G[I]=S);S.hasOwnProperty(String(H))?u=S[H]:(I=e._pe.PeFactory.prototype.factoryByType(I,H),e._pe.compare(I,e._pe.NULL)||(u=I,S[H]=u));return u=v(u)}const G={},z={},v=I=>{if(I){const H=I.getType();switch(H){case e.PeDefs.PE_TYPE_GEOGCS:I=e._pe.castObject(I,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:I=e._pe.castObject(I,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:I=e._pe.castObject(I,e._pe.PeGeogtran);break;default:H&e.PeDefs.PE_TYPE_UNIT&&(I=e._pe.castObject(I,
e._pe.PeUnit))}}return I};f.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(I){return p(e.PeDefs.PE_TYPE_COORDSYS,I)};f.factoryByType=p;f.fromString=function(I,H){let u=null,S=z[I];S||(S={},z[I]=S);S.hasOwnProperty(H)?u=S[H]:(I=e._pe.PeFactory.prototype.fromString(I,H),e._pe.compare(I,e._pe.NULL)||(u=I,S[H]=u));return u=v(u)};f.geogcs=function(I){return p(e.PeDefs.PE_TYPE_GEOGCS,I)};f.geogtran=function(I){return p(e.PeDefs.PE_TYPE_GEOGTRAN,I)};f.getCode=function(I){return e._pe.PeFactory.prototype.getCode(I)};
f.projcs=function(I){return p(e.PeDefs.PE_TYPE_PROJCS,I)};f.unit=function(I){return p(e.PeDefs.PE_TYPE_UNIT,I)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(f){let p;f.init=function(){f.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;p=e._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(G,z,v,I,H,u){let S=null;const B=new e._pe.PeInteger(u);try{const Q=e._pe.PeGTlistExtended.prototype.getGTlist(G,z,v,I,H,B);if(u=B.val)if(S=
[Q],1<u){const C=e._pe.getPointer(Q);for(G=1;G<u;G++)S.push(e._pe.wrapPointer(C+p*G,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(B)}return S}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(f){f.destroy=function(p){if(p&&p.length){for(const G of p)k(G),G.getEntries().forEach(z=>{k(z);z=z.getGeogtran();k(z);z.getParameters().forEach(k);[z.getGeogcs1(),z.getGeogcs2()].forEach(v=>{k(v);const I=v.getDatum();k(I);k(I.getSpheroid());k(v.getPrimem());k(v.getUnit())})});
e._pe.PeGTlistExtendedEntry.prototype.Delete(p[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(f){f.geogToGeog=function(p,G,z,v,I){e._pe.ensureCache.prepare();var H=R(z);const u=z===H;H=e._pe.ensureFloat64(H);let S=0;v&&(S=e._pe.ensureFloat64(v));(p=e._pe._pe_geog_to_geog(e._pe.getPointer(p),G,H,S,I))&&M(z,G,H,u);return p}})(e.PeGTTransformations||(e.PeGTTransformations={}));e.PeNotationDms=void 0;(function(f){const p=(z,v,I,H,u,S)=>{e._pe.ensureCache.prepare();
switch(z){case "dd":var B=e._pe._pe_geog_to_dd;var Q=e.PeDefs.PE_DD_MAX;break;case "ddm":B=e._pe._pe_geog_to_ddm;Q=e.PeDefs.PE_DDM_MAX;break;case "dms":B=e._pe._pe_geog_to_dms,Q=e.PeDefs.PE_DMS_MAX}z=0;v&&(z=e._pe.getPointer(v));v=R(H);v=e._pe.ensureFloat64(v);Q=n(I,Q);H=e._pe.ensureInt32(Q);if(u=B(z,I,v,u,H))for(B=0;B<I;B++)S[B]=e._pe.UTF8ToString(Q[B]);return u},G=(z,v,I,H,u)=>{e._pe.ensureCache.prepare();switch(z){case "dd":var S=e._pe._pe_dd_to_geog;break;case "ddm":S=e._pe._pe_ddm_to_geog;break;
case "dms":S=e._pe._pe_dms_to_geog}z=0;v&&(z=e._pe.getPointer(v));v=H.map(B=>e._pe.ensureString(B));H=e._pe.ensureInt32(v);v=e._pe.ensureFloat64(Array(2*I));(S=S(z,I,H,v))&&M(u,I,v);return S};f.geogToDms=function(z,v,I,H,u){return p("dms",z,v,I,H,u)};f.dmsToGeog=function(z,v,I,H){return G("dms",z,v,I,H)};f.geogToDdm=function(z,v,I,H,u){return p("ddm",z,v,I,H,u)};f.ddmToGeog=function(z,v,I,H){return G("ddm",z,v,I,H)};f.geogToDd=function(z,v,I,H,u){return p("dd",z,v,I,H,u)};f.ddToGeog=function(z,v,
I,H){return G("dd",z,v,I,H)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;f.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;f.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geogToMgrsExtended=
function(p,G,z,v,I,H,u){e._pe.ensureCache.prepare();let S=0;p&&(S=e._pe.getPointer(p));p=R(z);z=e._pe.ensureFloat64(p);p=n(G,e.PeDefs.PE_MGRS_MAX);const B=e._pe.ensureInt32(p);if(v=e._pe._pe_geog_to_mgrs_extended(S,G,z,v,I,H,B))for(I=0;I<G;I++)u[I]=e._pe.UTF8ToString(p[I]);return v};f.mgrsToGeogExtended=function(p,G,z,v,I){e._pe.ensureCache.prepare();let H=0;p&&(H=e._pe.getPointer(p));p=z.map(u=>e._pe.ensureString(u));z=e._pe.ensureInt32(p);p=e._pe.ensureFloat64(Array(2*G));(v=e._pe._pe_mgrs_to_geog_extended(H,
G,z,v,p))&&M(I,G,p);return v}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(f){f.geogToUsng=function(p,G,z,v,I,H,u){e._pe.ensureCache.prepare();let S=0;p&&(S=e._pe.getPointer(p));p=R(z);z=e._pe.ensureFloat64(p);p=n(G,e.PeDefs.PE_MGRS_MAX);const B=e._pe.ensureInt32(p);if(v=e._pe._pe_geog_to_usng(S,G,z,v,I,H,B))for(I=0;I<G;I++)u[I]=e._pe.UTF8ToString(p[I]);return v};f.usngToGeog=function(p,G,z,v){e._pe.ensureCache.prepare();var I=0;p&&(I=e._pe.getPointer(p));p=z.map(H=>
e._pe.ensureString(H));z=e._pe.ensureInt32(p);p=e._pe.ensureFloat64(Array(2*G));(I=e._pe._pe_usng_to_geog(I,G,z,p))&&M(v,G,p);return I}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;f.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};f.geogToUtm=function(p,G,z,v,I){e._pe.ensureCache.prepare();var H=
0;p&&(H=e._pe.getPointer(p));p=R(z);z=e._pe.ensureFloat64(p);p=n(G,e.PeDefs.PE_UTM_MAX);const u=e._pe.ensureInt32(p);if(v=e._pe._pe_geog_to_utm(H,G,z,v,u))for(H=0;H<G;H++)I[H]=e._pe.UTF8ToString(p[H]);return v};f.utmToGeog=function(p,G,z,v,I){e._pe.ensureCache.prepare();let H=0;p&&(H=e._pe.getPointer(p));p=z.map(u=>e._pe.ensureString(u));z=e._pe.ensureInt32(p);p=e._pe.ensureFloat64(Array(2*G));(v=e._pe._pe_utm_to_geog(H,G,z,v,p))&&M(I,G,p);return v}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=
void 0;(function(f){const p=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(G,z=f.PE_PCSINFO_OPTION_DOMAIN){let v=null,I=null;p.has(G)&&(I=p.get(G),I[z]&&(v=I[z]));v||(v=e._pe.PePCSInfo.prototype.generate(G,z),I||(I=
[],p.set(G,I)),I[z]=v);return v}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(f){f.versionString=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));const x=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTTransformations(){return e.PeGTTransformations},get PeGTlistExtended(){return e.PeGTlistExtended},
get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:l,get _pe(){return e._pe},isLoaded:J,isSupported:P,load:D},Symbol.toStringTag,{value:"Module"}));e._init=l;e.isLoaded=J;e.isSupported=P;e.load=D;e.pe=x})},"esri/geometry/support/geodesicConstants":function(){define(["exports",
"./Ellipsoid"],function(h,e){const ca=Math.PI/180;var V=e.earth.radius;const E=e.earth.eccentricitySquared;V={a1:V*E,a2:V*E*V*E,a3:V*E*E/2,a4:V*E*V*E*2.5,a5:V*E+V*E*E/2,a6:1-E};e={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,
f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,
f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},
104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};
h.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;h.earthEllipsoidConstants=V;h.spheroids=e;h.toRadians=ca;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(h,e){return function(){function ca(E){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(E&&E.steps)for(const J of E.steps)J instanceof e?this.steps.push(J):
this.steps.push(new e({wkid:J.wkid,wkt:J.wkt,isInverse:J.isInverse}))}ca.cacheKey=function(E,J){return[void 0!==E.wkid&&null!==E.wkid?E.wkid.toString():"-1",void 0!==E.wkt&&null!==E.wkt?E.wkt.toString():"",void 0!==J.wkid&&null!==J.wkid?J.wkid.toString():"-1",void 0!==J.wkt&&null!==J.wkt?J.wkt.toString():""].join()};ca.fromGE=function(E){const J=new ca;let P="";for(const D of E.steps)E=e.fromGE(D),J.steps.push(E),P+=E.uid.toString()+",";J._cachedProjection={};J._gtlistentry=null;J._chain=P;return J};
var V=ca.prototype;V.getInverse=function(){const E=new ca;E.steps=[];for(let J=this.steps.length-1;0<=J;J--)E.steps.push(this.steps[J].getInverse());return E};V.getGTListEntry=function(){let E="";for(const J of this.steps)E+=J.uid.toString()+",";E!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=E);return this._gtlistentry};V.assignCachedGe=function(E,J,P){this._cachedProjection[ca.cacheKey(E,J)]=P};V.getCachedGeTransformation=function(E,J){let P="";for(const D of this.steps)P+=
D.uid.toString()+",";P!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=P);E=this._cachedProjection[ca.cacheKey(E,J)];return void 0===E?null:E};return h._createClass(ca)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){let e=0;return function(){function ca(V){this.uid=e++;V?(this._wkt=null!=V.wkt?V.wkt:null,this._wkid=null!=V.wkid?V.wkid:-1,this._isInverse=null!=V.isInverse?!0===V.isInverse:
!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ca.fromGE=function(V){const E=new ca;E._wkt=V.wkt;E._wkid=V.wkid;E._isInverse=V.isInverse;return E};ca.prototype.getInverse=function(){const V=new ca;V._wkt=this.wkt;V._wkid=this._wkid;V._isInverse=!this.isInverse;return V};h._createClass(ca,[{key:"wkt",get:function(){return this._wkt},set:function(V){this._wkt=V;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(V){this._wkid=V;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},
set:function(V){this._isInverse=V;this.uid=e++}}]);return ca}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(h,e,ca,V){h.getGeometryZScaler=function(E,J,P){if(e.isNone(J)||e.isNone(P)||P.vcsWkid||V.equals(J,P))return null;J=ca.getMetersPerVerticalUnitForSR(J);P=ca.getMetersPerVerticalUnitForSR(P);const D=J/P;if(1===D)return null;switch(E){case "point":case "esriGeometryPoint":return l=>{l&&null!=l.z&&(l.z*=
D)};case "polyline":case "esriGeometryPolyline":return l=>{if(l)for(const k of l.paths)for(const n of k)2<n.length&&(n[2]*=D)};case "polygon":case "esriGeometryPolygon":return l=>{if(l)for(const k of l.rings)for(const n of k)2<n.length&&(n[2]*=D)};case "multipoint":case "esriGeometryMultipoint":return l=>{if(l)for(const k of l.points)2<k.length&&(k[2]*=D)};case "extent":case "esriGeometryExtent":return l=>{l&&null!=l.zmin&&null!=l.zmax&&(l.zmin*=D,l.zmax*=D)};default:return null}};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(h,e,ca,V,E,J,P,D,l,k,n,R){function M(v){const I=[];let H=0,u=0;for(let S=0;S<v.length;S++){const B=v[S];let Q=null;for(let C=0;C<B.length;C++)Q=B[C],I.push(Q),
0===C?u=H=Q[0]:(H=Math.min(H,Q[0]),u=Math.max(u,Q[0]));Q&&I.push([(H+u)/2,0])}return I}function F(v,I){if(!(v instanceof P||v instanceof J))throw z.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ca("straightLineDensify: the input geometry is neither polyline nor polygon");var H=D.getGeometryParts(v);const u=[];for(const B of H){H=[];u.push(H);H.push([B[0][0],B[0][1]]);for(let Q=0;Q<B.length-1;Q++){const C=B[Q][0],y=B[Q][1],K=B[Q+1][0],da=B[Q+1][1];var S=Math.sqrt((K-
C)*(K-C)+(da-y)*(da-y));const O=(da-y)/S,N=(K-C)/S,r=S/I;if(1<r){for(let t=1;t<=r-1;t++){const Y=t*I;H.push([N*Y+C,O*Y+y])}S=(S+Math.floor(r-1)*I)/2;H.push([N*S+C,O*S+y])}H.push([K,da])}}return"polygon"===v.type?new J({rings:u,spatialReference:v.spatialReference}):new P({paths:u,spatialReference:v.spatialReference})}function x(v,I,H){I&&(v=F(v,1E6),v=k.webMercatorToGeographic(v,!0));H&&(v=D.updatePolyGeometry(v,H));return v}function f(v,I,H){if(Array.isArray(v)){var u=v[0];u>I?(H=D.offsetMagnitude(u,
I),v[0]=u+-2*H*I):u<H&&(I=D.offsetMagnitude(u,H),v[0]=u+-2*I*H)}else u=v.x,u>I?(H=D.offsetMagnitude(u,I),v=v.clone().offset(-2*H*I,0)):u<H&&(I=D.offsetMagnitude(u,H),v=v.clone().offset(-2*I*H,0));return v}function p(v,I){let H=-1;for(let u=0;u<I.cutIndexes.length;u++){const S=I.cutIndexes[u],B=I.geometries[u],Q=D.getGeometryParts(B);for(let C=0;C<Q.length;C++){const y=Q[C];y.some(K=>{if(180>K[0])return!0;K=0;for(var da=0;da<y.length;da++){var O=y[da][0];K=O>K?O:K}K=Number(K.toFixed(9));K=-360*D.offsetMagnitude(K,
180);for(da=0;da<y.length;da++)O=B.getPoint(C,da),B.setPoint(C,da,O.clone().offset(K,0));return!0})}if(S===H)if("polygon"===v[0].type)for(const C of D.getGeometryParts(B))v[S]=v[S].addRing(C);else{if("polyline"===v[0].type)for(const C of D.getGeometryParts(B))v[S]=v[S].addPath(C)}else H=S,v[S]=B}return v}async function G(v,I,H){if(!Array.isArray(v))return G([v],I);I&&"string"!==typeof I&&z.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var u="string"===
typeof I?I:I?.url??e.geometryServiceUrl;let S,B,Q;let C=0;var y=[];I=[];for(var K of v)if(E.isNone(K))I.push(K);else{if(!da){var da=K.spatialReference;var O=l.getInfo(da);var N=(S=da.isWebMercator)?102100:4326;B=D.cutParams[N].maxX;Q=D.cutParams[N].minX;var r=D.cutParams[N].plus180Line;N=D.cutParams[N].minus180Line}if(O)if("mesh"===K.type)I.push(K);else if("point"===K.type)I.push(f(K.clone(),B,Q));else if("multipoint"===K.type){var t=K.clone();t.points=t.points.map(Y=>f(Y,B,Q));I.push(t)}else if("extent"===
K.type)t=K.clone()._normalize(!1,!1,O),I.push(t.rings?new J(t):t);else if(K.extent){t=K.extent;const Y=2*D.offsetMagnitude(t.xmin,Q)*B;let ja=0===Y?K.clone():D.updatePolyGeometry(K.clone(),Y);t.offset(Y,0);t.intersects(r)&&t.xmax!==B?(C=t.xmax>C?t.xmax:C,ja=x(ja,S),y.push(ja),I.push("cut")):t.intersects(N)&&t.xmin!==Q?(C=2*t.xmax*B>C?2*t.xmax*B:C,ja=x(ja,S,360),y.push(ja),I.push("cut")):I.push(ja)}else I.push(K.clone());else I.push(K)}da=D.offsetMagnitude(C,B);O=-90;r=da;for(K=new P;0<da;)N=-180+
360*da,K.addPath([[N,O],[N,-1*O]]),O*=-1,da--;if(0<y.length&&0<r){da=await n.cut(u,y,K,H);da=p(y,da);O=[];y=[];for(r=0;r<I.length;r++)K=I[r],"cut"!==K?y.push(K):(K=da.shift(),N=v[r],E.isSome(N)&&"polygon"===N.type&&N.rings&&1<N.rings.length&&K.rings.length>=N.rings.length?(O.push(K),y.push("simplify")):y.push(S?k.geographicToWebMercator(K):K));if(!O.length)return y;I=await R.simplify(u,O,H);v=[];for(H=0;H<y.length;H++)u=y[H],"simplify"!==u?v.push(u):v.push(S?k.geographicToWebMercator(I.shift()):I.shift());
return v}v=[];for(H=0;H<I.length;H++)u=I[H],"cut"!==u?v.push(u):(u=y.shift(),v.push(!0===S?k.geographicToWebMercator(u):u));return v}const z=V.getLogger("esri.geometry.support.normalizeUtils");h.getDenormalizedExtent=function(v){if(!v)return null;const I=v.extent;if(!I)return null;var H=v.spatialReference&&l.getInfo(v.spatialReference);if(!H)return I;const [u,S]=H.valid;({width:H}=I);let {xmin:B,xmax:Q}=I;[B,Q]=[Q,B];if("extent"===v.type||0===H||H<=S||H>2*S||B<u||Q>S)return I;let C;switch(v.type){case "polygon":if(1<
v.rings.length)C=M(v.rings);else return I;break;case "polyline":if(1<v.paths.length)C=M(v.paths);else return I;break;case "multipoint":C=v.points}v=I.clone();for(let y=0;y<C.length;y++){let K=C[y][0];0>K?(K+=S,Q=Math.max(K,Q)):(K-=S,B=Math.min(K,B))}v.xmin=B;v.xmax=Q;return v.width<H?(v.xmin-=S,v.xmax-=S,v):I};h.normalizeCentralMeridian=G;h.normalizeMapX=function(v,I){if(I=l.getInfo(I)){const [H,u]=I.valid;I=u-H;if(v<H)for(;v<H;)v+=I;if(v>u)for(;v>u;)v-=I}return v};h.straightLineDensify=F;Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(h,e,ca,V){function E(J){return V.isPolygon(J)?J.rings:J.paths}e={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,
-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ca.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:ca.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:ca.WGS84})}};h.cutParams=e;h.getGeometryParts=E;h.offsetMagnitude=function(J,P){return Math.ceil((J-P)/(2*P))};h.updatePolyGeometry=function(J,P){const D=E(J);for(const l of D)for(const k of l)k[0]+=P;return J};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(h,e,ca,V,E){h.cut=async function(J,P,D,l){J=E.parseUrl(J);const k=P[0].spatialReference;P={...l,query:{...J.query,f:"json",sr:JSON.stringify(k),target:JSON.stringify({geometryType:V.getJsonType(P[0]),geometries:P}),cutter:JSON.stringify(D)}};P=await ca(J.path+"/cut",P);const {cutIndexes:n,geometries:R=[]}=P.data;
return{cutIndexes:n,geometries:R.map(M=>{M=V.fromJSON(M);M.spatialReference=k;return M})}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(h,e,ca,V,E,J){function P(D,l,k){const n={};for(const M in D)if("declaredClass"!==M){var R=D[M];if(null!=R&&"function"!==typeof R)if(Array.isArray(R)){n[M]=[];for(let F=0;F<R.length;F++)n[M][F]=P(R[F])}else"object"===
typeof R?R.toJSON?(R=R.toJSON(k&&k[M]),n[M]=l?R:JSON.stringify(R)):n[M]=l?R:JSON.stringify(R):n[M]=R}return n}h.asValidOptions=function(D,l){return l?{...l,query:{...(D??{}),...l.query}}:{query:D}};h.encode=P;h.getToken=function(D,l){return D?J.supportsApiKey(D)&&(l||e.apiKey)?l||e.apiKey:ca.id?.findCredential(D)?.token:null};h.parseUrl=function(D){return"string"===typeof D?E.urlToObject(D):V.clone(D)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports",
"../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(h,e,ca,V,E){h.simplify=async function(J,P,D){const l="string"===typeof J?ca.urlToObject(J):J;J=P[0].spatialReference;const k=V.getJsonType(P[0]);P={...D,query:{...l.query,f:"json",sr:J.wkid??JSON.stringify(J),geometries:JSON.stringify(E.encodeGeometries(P))}};({data:P}=await e(l.path+"/simplify",P));return E.decodeGeometries(P.geometries,k,J)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(h,e){h.decodeGeometries=function(ca,V,E){const J=e.getGeometryType(V);return ca.map(P=>{P=J.fromJSON(P);P.spatialReference=E;return P})};h.encodeGeometries=function(ca){return{geometryType:e.getJsonType(ca[0]),geometries:ca.map(V=>V.toJSON())}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(h,e,ca,V,E,J,P){function D(x,f){if(!f)return null;if("x"in f){var p={x:0,y:0};[p.x,p.y]=x(f.x,f.y,n);null!=f.z&&(p.z=f.z);null!=f.m&&(p.m=f.m);return p}return"xmin"in f?(p={xmin:0,ymin:0,xmax:0,ymax:0},[p.xmin,p.ymin]=x(f.xmin,f.ymin,n),[p.xmax,p.ymax]=x(f.xmax,f.ymax,n),f.hasZ&&(p.zmin=f.zmin,p.zmax=f.zmax,p.hasZ=!0),f.hasM&&(p.mmin=f.mmin,p.mmax=f.mmax,p.hasM=!0),p):"rings"in f?{rings:l(f.rings,x),hasM:f.hasM,hasZ:f.hasZ}:"paths"in f?{paths:l(f.paths,x),hasM:f.hasM,hasZ:f.hasZ}:"points"in
f?{points:k(f.points,x),hasM:f.hasM,hasZ:f.hasZ}:null}function l(x,f){const p=[];for(const G of x)p.push(k(G,f));return p}function k(x,f){const p=[];for(const G of x)x=f(G[0],G[1],[0,0]),p.push(x),2<G.length&&x.push(G[2]),3<G.length&&x.push(G[3]);return p}const n=[0,0],R=D.bind(null,P.lngLatToXY),M=D.bind(null,P.xyToLngLat),F=new (function(){function x(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var f=x.prototype;f.push=async function(p,G,z){if(!(p&&p.length&&G&&z)||J.equals(G,
z))return p;const v={geometries:p,inSpatialReference:G,outSpatialReference:z,resolve:null};this._jobs.push(v);return new Promise(I=>{v.resolve=I;null===this._timer&&(this._timer=setTimeout(this._process,10))})};f._process=function(){this._timer=null;const p=this._jobs.shift();if(p){var {geometries:G,inSpatialReference:z,outSpatialReference:v,resolve:I}=p;P.canProject(z,v)?J.isWebMercator(v)?I(G.map(R)):I(G.map(M)):I(V.projectMany(E.jsonAdapter,G,z,v,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}};return e._createClass(x)}());h.checkProjectionSupport=async function(x,f){x&&f&&(x=Array.isArray(x)?x.map(p=>ca.isSome(p.geometry)?p.geometry.spatialReference:null).filter(ca.isSome):[x],await V.initializeProjection(x.map(p=>({source:p,dest:f}))))};h.project=function(x,f,p,G){if(!x)return x;p||(p=f,f=x.spatialReference);return J.isValid(f)&&J.isValid(p)&&!J.equals(f,p)?P.canProject(f,p)?(x=J.isWebMercator(p)?R(x):M(x),x.spatialReference=p,x):V.projectMany(E.jsonAdapter,[x],f,p,null,G)[0]:x};
h.projectMany=function(x,f,p){return F.push(x,f,p)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(h,e){let ca=e._createClass(function(D,l,k){this.x=D;this.y=l;this.spatialReference=k;this.m=this.z=void 0}),V=e._createClass(function(D,l,k,n){this.rings=D;this.spatialReference=l;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);n&&(this.hasM=n)}),E=e._createClass(function(D,
l,k,n){this.paths=D;this.spatialReference=l;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);n&&(this.hasM=n)}),J=e._createClass(function(D,l,k,n){this.points=D;this.spatialReference=l;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);n&&(this.hasM=n)}),P=e._createClass(function(D,l,k,n,R){this.xmin=D;this.ymin=l;this.xmax=k;this.ymax=n;this.spatialReference=R;this.mmax=this.mmin=this.zmax=this.zmin=void 0});h.jsonAdapter={convertToGEGeometry:function(D,l){return null==l?null:D.convertJSONToGeometry(l)},exportPoint:function(D,
l,k){k=new ca(D.getPointX(l),D.getPointY(l),k);const n=D.hasZ(l),R=D.hasM(l);n&&(k.z=D.getPointZ(l));R&&(k.m=D.getPointM(l));return k},exportPolygon:function(D,l,k){return new V(D.exportPaths(l),k,D.hasZ(l),D.hasM(l))},exportPolyline:function(D,l,k){return new E(D.exportPaths(l),k,D.hasZ(l),D.hasM(l))},exportMultipoint:function(D,l,k){return new J(D.exportPoints(l),k,D.hasZ(l),D.hasM(l))},exportExtent:function(D,l,k){var n=D.hasZ(l);const R=D.hasM(l);k=new P(D.getXMin(l),D.getYMin(l),D.getXMax(l),
D.getYMax(l),k);n&&(n=D.getZExtent(l),k.zmin=n.vmin,k.zmax=n.vmax);R&&(D=D.getMExtent(l),k.mmin=D.vmin,k.mmax=D.vmax);return k}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n,R,M,F,x,f,p,G,z,v,I,H,u,S,B,Q){function C(N){return null!=N&&N.every(r=>"exceedslimit"!==r.statisticType)}let y=e._createClass(function(N,r=null,t,Y,ja){this.attributes=N;this.geometry=t;this.centroid=Y;this.filterFlags=ja;this.groupId=-1;this.displayId=r});const K=new P.MemCacheStorage(2E6);let da=0,O=function(){function N(t){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:z.queryCapabilities};this.geometryType=t.geometryType;this.hasM=!!t.hasM;
this.hasZ=!!t.hasZ;this.objectIdField=t.objectIdField;this.spatialReference=t.spatialReference;this.definitionExpression=t.definitionExpression;this.featureStore=t.featureStore;this.aggregateAdapter=t.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=t.timeInfo;t.cacheSpatialQueries&&(this._geometryQueryCache=new P.MemCache(da++ +"$$",K));this.fieldsIndex=new S(t.fields);t.scheduler&&t.priority&&(this._frameTask=t.scheduler.registerTask(t.priority))}
var r=N.prototype;r.destroy=function(){this._frameTask=J.removeMaybe(this._frameTask);this.clearCache();J.destroyMaybe(this._geometryQueryCache);this._changeHandle=J.removeMaybe(this._changeHandle);J.destroyMaybe(this.fieldsIndex)};r.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};r.executeQuery=async function(t,Y){try{return(await this._executeQuery(t,{},Y)).createQueryResponse()}catch(ja){if(ja!==u.QUERY_ENGINE_EMPTY_RESULT)throw ja;
return(new v.QueryEngineResult([],t,this)).createQueryResponse()}};r.executeQueryForCount=async function(t={},Y){try{return(await this._executeQuery(t,{returnGeometry:!1,returnCentroid:!1,outSR:null},Y)).createQueryResponseForCount()}catch(ja){if(ja!==u.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}};r.executeQueryForExtent=async function(t,Y){const ja=t.outSR;try{const ya=await this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},Y),pa=ya.size;if(!pa)return{count:0,extent:null};const ta=
await this._getBounds(ya.items,ya.spatialReference,ja||this.spatialReference);return{count:pa,extent:ta}}catch(ya){if(ya===u.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ya;}};r.executeQueryForIds=async function(t,Y){return this.executeQueryForIdSet(t,Y).then(ja=>Array.from(ja))};r.executeQueryForIdSet=async function(t,Y){try{const ja=await this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},Y),ya=ja.items,pa=new Set;await this._reschedule(()=>{for(const ta of ya)pa.add(ja.featureAdapter.getObjectId(ta))},
Y);return pa}catch(ja){if(ja===u.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}};r.executeQueryForSnapping=async function(t,Y){const {point:ja,distance:ya,types:pa}=t;if(pa===v.SnappingTypes.NONE)return{candidates:[]};const ta=await this._reschedule(()=>this._checkQuerySupport(t.query),Y),xa=!x.equals(ja.spatialReference,this.spatialReference);xa&&await G.checkProjectionSupport(ja.spatialReference,this.spatialReference);var Da="number"===typeof ya?ya:ya.x,Ca="number"===typeof ya?ya:ya.y;Da={xmin:ja.x-
Da,xmax:ja.x+Da,ymin:ja.y-Ca,ymax:ja.y+Ca,spatialReference:ja.spatialReference};Da=xa?G.project(Da,this.spatialReference):Da;if(!Da)return{candidates:[]};Ca=(await F.normalizeCentralMeridian(M.fromJSON(ja),null,{signal:Y}))[0];const La=(await F.normalizeCentralMeridian(M.fromJSON(Da),null,{signal:Y}))[0];if(J.isNone(Ca)||J.isNone(La))return{candidates:[]};const Qa=new v.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(La.toJSON())),Y),ta,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Qa),Y);await this._reschedule(()=>this._executeTimeQuery(Qa),Y);await this._reschedule(()=>this._executeAttributesQuery(Qa),Y);Y=Ca.toJSON();Y=xa?G.project(Y,this.spatialReference):Y;return Qa.createSnappingResponse({...t,point:Y,distance:xa?Math.max(Da.xmax-Da.xmin,Da.ymax-Da.ymin)/2:ya},ja.spatialReference)};r.executeQueryForLatestObservations=async function(t,Y){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new V("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:t,timeInfo:this.timeInfo});try{const ja=await this._executeQuery(t,{},Y);await this._reschedule(()=>this._filterLatest(ja),Y);return ja.createQueryResponse()}catch(ja){if(ja!==u.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new v.QueryEngineResult([],t,this)).createQueryResponse()}};r.executeQueryForSummaryStatistics=async function(t={},Y,ja){const {field:ya,normalizationField:pa,valueExpression:ta}=Y;return(await this._getQueryEngineResultForStats(t,{field:ya,normalizationField:pa,valueExpression:ta},
ja)).createSummaryStatisticsResponse(Y)};r.executeQueryForUniqueValues=async function(t={},Y,ja){const {field:ya,field2:pa,field3:ta,valueExpression:xa}=Y;return(await this._getQueryEngineResultForStats(t,{field:ya,field2:pa,field3:ta,valueExpression:xa},ja)).createUniqueValuesResponse(Y)};r.executeQueryForClassBreaks=async function(t={},Y,ja){const {field:ya,normalizationField:pa,valueExpression:ta}=Y;return(await this._getQueryEngineResultForStats(t,{field:ya,normalizationField:pa,valueExpression:ta},
ja)).createClassBreaksResponse(Y)};r.executeQueryForHistogram=async function(t={},Y,ja){const {field:ya,normalizationField:pa,valueExpression:ta}=Y;return(await this._getQueryEngineResultForStats(t,{field:ya,normalizationField:pa,valueExpression:ta},ja)).createHistogramResponse(Y)};r.fetchRecomputedExtents=async function(t){const [Y,ja]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),J.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=H.getTimeExtent(this.timeInfo,this.featureStore)]);D.throwIfAborted(t);return{fullExtent:Y,timeExtent:ja}};r._getBounds=async function(t,Y,ja){const ya=k.set(k.create(),k.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(t,pa=>k.expandWithAABB(ya,pa));t={xmin:ya[0],ymin:ya[1],xmax:ya[3],ymax:ya[4],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(ya[2])&&isFinite(ya[5])&&(t.zmin=ya[2],t.zmax=ya[5]);Y=G.project(t,Y,ja);Y.spatialReference=u.cleanFromGeometryEngine(ja);0===Y.xmax-Y.xmin&&(ja=l.getMetersPerUnitForSR(Y.spatialReference),Y.xmin-=ja,Y.xmax+=ja);0===Y.ymax-Y.ymin&&(ja=l.getMetersPerUnitForSR(Y.spatialReference),Y.ymin-=ja,Y.ymax+=ja);this.hasZ&&null!=Y.zmin&&null!=Y.zmax&&0===Y.zmax-Y.zmin&&(ja=l.getMetersPerUnitForSR(Y.spatialReference),Y.zmin-=ja,Y.zmax+=ja);return Y};r._schedule=async function(t,Y){return J.isSome(this._frameTask)?
this._frameTask.schedule(t,Y):t(Q.noBudget)};r._reschedule=async function(t,Y){return J.isSome(this._frameTask)?this._frameTask.reschedule(t,Y):t(Q.noBudget)};r._getAllFeaturesQueryEngineResult=async function(t){return new v.QueryEngineResult(await this._getAllFeatures(),t,this)};r._getAllFeatures=async function(){if(J.isNone(this._allFeaturesPromise)){const ja=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(ya=>ja.push(ya))})().then(()=>ja)}const t=this._allFeaturesPromise,
Y=await t;return t===this._allFeaturesPromise?Y.slice():this._getAllFeatures()};r._executeQuery=async function(t,Y,ja){t=E.clone(t);t=await this._schedule(()=>u.normalizeQuery(t,this.definitionExpression,this.spatialReference),ja);t=await this._reschedule(()=>this._checkQuerySupport(t),ja);t={...t,...Y};const ya=await this._reschedule(()=>this._executeSceneFilterQuery(t,ja),ja),pa=await this._reschedule(()=>this._executeGeometryQuery(t,ya,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(pa),
ja);await this._reschedule(()=>this._executeObjectIdsQuery(pa),ja);await this._reschedule(()=>this._executeTimeQuery(pa),ja);await this._reschedule(()=>this._executeAttributesQuery(pa),ja);return pa};r._executeSceneFilterQuery=async function(t,Y){if(J.isNone(t.sceneFilter))return null;const {outSR:ja,returnGeometry:ya,returnCentroid:pa}=t;var ta=this.featureStore.featureSpatialReference,xa=t.sceneFilter.geometry;const Da=J.isNone(ta)||x.equals(ta,xa.spatialReference)?xa:G.project(xa,ta);if(!Da)return null;
ta=ya||pa;ta=x.isValid(ja)&&!x.equals(this.spatialReference,ja)&&ta?async Pa=>this._project(Pa,ja):Pa=>Pa;const Ca=this.featureAdapter;xa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Da)),Y);if("disjoint"===t.sceneFilter.spatialRelationship){if(!xa.length)return null;const Pa=new Set;for(var La of xa)Pa.add(Ca.getObjectId(La));const ab=await this._reschedule(()=>this._getAllFeatures(),Y);La=await this._reschedule(async()=>{const na=await I.getSpatialQueryOperator("esriSpatialRelDisjoint",
Da,this.geometryType,this.hasZ,this.hasM),sa=await this._runSpatialFilter(ab,Fa=>!Pa.has(Ca.getObjectId(Fa))||na(Ca.getGeometry(Fa)),Y);return new v.QueryEngineResult(sa,t,this)},Y);return ta(La)}if(!xa.length)return new v.QueryEngineResult([],t,this);if(this._canExecuteSinglePass(Da,t))return ta(new v.QueryEngineResult(xa,t,this));const Qa=await I.getSpatialQueryOperator("esriSpatialRelContains",Da,this.geometryType,this.hasZ,this.hasM);La=await this._runSpatialFilter(xa,Pa=>Qa(Ca.getGeometry(Pa)),
Y);return ta(new v.QueryEngineResult(La,t,this))};r._executeGeometryQuery=async function(t,Y,ja){if(J.isSome(Y)&&0===Y.items.length)return Y;t=J.isSome(Y)?Y.query:t;const {geometry:ya,outSR:pa,spatialRel:ta,returnGeometry:xa,returnCentroid:Da}=t;var Ca=this.featureStore.featureSpatialReference;const La=!ya||J.isNone(Ca)||x.equals(Ca,ya.spatialReference)?ya:G.project(ya,Ca),Qa=xa||Da,Pa=x.isValid(pa)&&!x.equals(this.spatialReference,pa),ab=this._geometryQueryCache&&J.isNone(Y)?Pa&&Qa?JSON.stringify({originalFilterGeometry:ya,
spatialRelationship:ta,outSpatialReference:pa}):JSON.stringify({originalFilterGeometry:ya,spatialRelationship:ta}):null;Ca=ab?this._geometryQueryCache.get(ab):null;if(J.isSome(Ca))return new v.QueryEngineResult(Ca,t,this);Ca=async m=>{Pa&&Qa&&await this._project(m,pa);ab&&this._geometryQueryCache.put(ab,m.items,m.items.length+1);return m};if(!La)return Ca(J.isSome(Y)?Y:await this._getAllFeaturesQueryEngineResult(t));const na=this.featureAdapter;let sa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ya)),
ja);if("esriSpatialRelDisjoint"===ta){if(!sa.length)return Ca(J.isSome(Y)?Y:await this._getAllFeaturesQueryEngineResult(t));const m=new Set;for(var Fa of sa)m.add(na.getObjectId(Fa));const ea=J.isSome(Y)?Y.items:await this._reschedule(()=>this._getAllFeatures(),ja);Fa=await this._reschedule(async()=>{const ka=await I.getSpatialQueryOperator(ta,La,this.geometryType,this.hasZ,this.hasM),ua=await this._runSpatialFilter(ea,w=>!m.has(na.getObjectId(w))||ka(na.getGeometry(w)),ja);return new v.QueryEngineResult(ua,
t,this)},ja);return Ca(Fa)}if(J.isSome(Y)){const m=new ca.PositionHint;sa=sa.filter(ea=>0<=ca.indexOf(Y.items,ea,Y.items.length,m))}if(!sa.length)return Ca=new v.QueryEngineResult([],t,this),ab&&this._geometryQueryCache.put(ab,Ca.items,1),Ca;if(this._canExecuteSinglePass(La,t))return Ca(new v.QueryEngineResult(sa,t,this));const c=await I.getSpatialQueryOperator(ta,La,this.geometryType,this.hasZ,this.hasM);Fa=await this._runSpatialFilter(sa,m=>c(na.getGeometry(m)),ja);return Ca(new v.QueryEngineResult(Fa,
t,this))};r._executeAggregateIdsQuery=function(t){if(0!==t.items.length&&t.query.aggregateIds&&t.query.aggregateIds.length&&!J.isNone(this.aggregateAdapter)){var Y=new Set;for(const ya of t.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ya).forEach(pa=>Y.add(pa));var ja=this.featureAdapter.getObjectId;t.items=t.items.filter(ya=>Y.has(ja(ya)))}};r._executeObjectIdsQuery=function(t){if(0!==t.items.length&&t.query.objectIds&&t.query.objectIds.length){var Y=new Set(t.query.objectIds),ja=
this.featureAdapter.getObjectId;t.items=t.items.filter(ya=>Y.has(ja(ya)))}};r._executeTimeQuery=function(t){if(0!==t.items.length){var Y=H.getTimeOperator(this.timeInfo,t.query.timeExtent,this.featureAdapter);J.isNone(Y)||(t.items=t.items.filter(Y))}};r._executeAttributesQuery=function(t){if(0!==t.items.length){var Y=p.getWhereClause(t.query.where,this.fieldsIndex);if(Y){if(!Y.isStandardized)throw new TypeError("Where clause is not standardized");t.items=t.items.filter(ja=>Y.testFeature(ja,this.featureAdapter))}}};
r._runSpatialFilter=async function(t,Y,ja){if(!Y)return t;if(J.isNone(this._frameTask))return t.filter(xa=>Y(xa));let ya=0;const pa=[],ta=async xa=>{for(;ya<t.length;){const Da=t[ya++];Y(Da)&&(pa.push(Da),xa.madeProgress());xa.done&&await this._reschedule(Ca=>ta(Ca),ja)}};return this._reschedule(xa=>ta(xa),ja).then(()=>pa)};r._filterLatest=function(t){const {trackIdField:Y,startTimeField:ja,endTimeField:ya}=this.timeInfo,pa=ya||ja,ta=new Map,xa=this.featureAdapter.getAttribute;for(const Da of t.items){const Ca=
xa(Da,Y),La=xa(Da,pa),Qa=ta.get(Ca);(!Qa||La>xa(Qa,pa))&&ta.set(Ca,Da)}t.items=Array.from(ta.values())};r._canExecuteSinglePass=function(t,Y){({spatialRel:Y}=Y);return I.canQueryWithRBush(t)&&("esriSpatialRelEnvelopeIntersects"===Y||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===Y||"esriSpatialRelContains"===Y||"esriSpatialRelWithin"===Y))};r._project=async function(t,Y){if(!Y||x.equals(this.spatialReference,Y))return t;const ja=this.featureAdapter;Y=await G.projectMany(t.items.map(ya=>
u.getGeometry(this.geometryType,this.hasZ,this.hasM,ja.getGeometry(ya))),this.spatialReference,Y);t.items=Y.map((ya,pa)=>ja.cloneWithGeometry(t.items[pa],f.convertFromGeometry(ya,this.hasZ,this.hasM)));return t};r._getQueryBBoxes=function(t){if(I.canQueryWithRBush(t)){if(M.isExtent(t))return[n.fromValues(t.xmin,t.ymin,t.xmax,t.ymax)];if(M.isPolygon(t))return t.rings.map(Y=>n.fromValues(Math.min(Y[0][0],Y[2][0]),Math.min(Y[0][1],Y[2][1]),Math.max(Y[0][0],Y[2][0]),Math.max(Y[0][1],Y[2][1])))}return[R.getBoundsXY(n.create(),
t)]};r._searchFeatures=async function(t){const Y=new Set;await Promise.all(t.map(ja=>this.featureStore.forEachInBounds(ja,ya=>Y.add(ya))));t=Array.from(Y.values());Y.clear();return t};r._checkStatisticsSupport=async function(t,Y){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new V("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);
return Promise.all([this._checkStatisticsParamsSupport(Y),I.checkSpatialQuerySupport(t,this.geometryType,this.spatialReference),G.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)};r._checkStatisticsParamsSupport=async function(t){var Y=[];t.valueExpression&&({arcadeUtils:Y}=await B.loadArcade(),Y=Y.extractFieldNames(t.valueExpression));t.field&&Y.push(t.field);t.field2&&Y.push(t.field2);t.field3&&Y.push(t.field3);t.normalizationField&&Y.push(t.normalizationField);if(!Y.length)throw new V("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:t});p.validateFields(this.fieldsIndex,Y,"params contains missing fields")};r._checkQuerySupport=async function(t){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new V("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);this._checkStatisticsQuerySupport(t);return Promise.all([I.checkSpatialQuerySupport(t,this.geometryType,
this.spatialReference),G.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)};r._checkAttributesQuerySupport=function(t){const {outFields:Y,orderByFields:ja,returnDistinctValues:ya,outStatistics:pa}=t,ta=pa?pa.map(xa=>xa.outStatisticFieldName&&xa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const xa=ja.map(Da=>{const Ca=Da.toLowerCase();return Ca.includes(" asc")?Ca.split(" asc")[0]:Ca.includes(" desc")?Ca.split(" desc")[0]:Da}).filter(Da=>!ta.includes(Da));
p.validateFields(this.fieldsIndex,xa,"orderByFields contains missing fields")}if(Y&&0<Y.length)p.validateFields(this.fieldsIndex,Y,"outFields contains missing fields");else if(ya)throw new V("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:t});p.validateWhere(this.fieldsIndex,t.where)};r._checkStatisticsQuerySupport=function(t){const {outStatistics:Y,groupByFieldsForStatistics:ja,having:ya}=t;var pa=ja&&ja.length,ta=Y&&Y.length;if(ya){if(!pa||!ta)throw new V("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});p.validateHaving(this.fieldsIndex,ya,Y)}if(ta&&C(Y)){ta=Y.map(xa=>xa.onStatisticField).filter(Boolean);p.validateFields(this.fieldsIndex,ta,"onStatisticFields contains missing fields");pa&&p.validateFields(this.fieldsIndex,ja,"groupByFieldsForStatistics contains missing fields");for(const xa of Y){const {onStatisticField:Da,statisticType:Ca}=xa;if(("percentile_disc"===Ca||"percentile_cont"===Ca)&&"statisticParameters"in
xa){if({statisticParameters:pa}=xa,!pa)throw new V("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:xa,query:t});}else if("count"!==Ca&&Da&&p.hasInvalidFieldType(Da,this.fieldsIndex))throw new V("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:xa,query:t});}}};r._getQueryEngineResultForStats=async function(t,Y,ja){t=E.clone(t);try{t=await this._schedule(()=>u.normalizeQuery(t,this.definitionExpression,this.spatialReference),
ja);t=await this._reschedule(()=>this._checkStatisticsSupport(t,Y),ja);const ya=await this._reschedule(()=>this._executeSceneFilterQuery(t,ja),ja),pa=await this._reschedule(()=>this._executeGeometryQuery(t,ya,ja),ja);await this._reschedule(()=>this._executeAggregateIdsQuery(pa),ja);await this._reschedule(()=>this._executeObjectIdsQuery(pa),ja);await this._reschedule(()=>this._executeTimeQuery(pa),ja);await this._reschedule(()=>this._executeAttributesQuery(pa),ja);return pa}catch(ya){if(ya!==u.QUERY_ENGINE_EMPTY_RESULT)throw ya;
return new v.QueryEngineResult([],t,this)}};e._createClass(N,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return N}();h.Feature=y;h.QueryEngine=O;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(h,e,ca,V){h.RemoveMode=void 0;(function(P){P[P.ALL=0]="ALL";P[P.SOME=1]="SOME"})(h.RemoveMode||(h.RemoveMode={}));let E=function(){function P(l,
k,n){this._namespace=l;this._storage=k;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}var D=P.prototype;D.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};D.resetHitRate=function(){this._hit=this._miss=0};D.put=function(l,k,n,R=0){this._storage.put(this._namespace+
l,k,n,R)};D.get=function(l){l=this._storage.get(this._namespace+l);void 0===l?++this._miss:++this._hit;return l};D.pop=function(l){l=this._storage.pop(this._namespace+l);void 0===l?++this._miss:++this._hit;return l};D.updateSize=function(l,k,n){this._storage.updateSize(this._namespace+l,k,n)};D.clear=function(){this._storage.clear(this._namespace)};D.clearAll=function(){this._storage.clearAll()};D.getStats=function(){return this._storage.getStats()};D.resetStats=function(){this._storage.resetStats()};
e._createClass(P,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return P}(),J=function(){function P(l=10485760){this._maxSize=l;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new V;this._users=new V}var D=P.prototype;D.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};D.register=function(l){this._users.push(l)};D.deregister=function(l){this._users.removeUnordered(l)};D.registerRemoveFunc=function(l,k){this._removeFuncs.push([l,k])};D.deregisterRemoveFunc=function(l){this._removeFuncs.filterInPlace(k=>k[0]!==l)};D.put=function(l,k,n,R){const M=this._db.get(l);M&&(this._size-=M.size,this._db.delete(l),M.entry!==k&&this._notifyRemove(l,M.entry,h.RemoveMode.ALL));n>this._maxSize?this._notifyRemove(l,k,h.RemoveMode.ALL):void 0===k?
console.warn("Refusing to cache undefined entry "):!n||0>n?console.warn("Refusing to cache entry with invalid size "+n):(R=1+Math.max(R,-3)- -3,this._db.set(l,{entry:k,size:n,lifetime:R,lives:R}),this._size+=n,this._checkSizeLimit())};D.updateSize=function(l,k,n){const R=this._db.get(l);if(R&&R.entry===k){for(this._size-=R.size;n>this._maxSize;)if(n=this._notifyRemove(l,k,h.RemoveMode.SOME),!(ca.isSome(n)&&0<n)){this._db.delete(l);return}R.size=n;this._size+=n;this._checkSizeLimit()}};D.pop=function(l){const k=
this._db.get(l);if(k)return this._size-=k.size,this._db.delete(l),++this._hit,k.entry;++this._miss};D.get=function(l){const k=this._db.get(l);if(void 0===k)++this._miss;else return this._db.delete(l),k.lives=k.lifetime,this._db.set(l,k),++this._hit,k.entry};D.getStats=function(){const l={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},k={},n=[];this._db.forEach((F,x)=>{const f=F.lifetime;
n[f]=(n[f]||0)+F.size;this._users.forAll(p=>{p=p.namespace;x.startsWith(p)&&(k[p]=(k[p]||0)+F.size)})});const R={};this._users.forAll(F=>{const x=F.namespace;!isNaN(F.hitRate)&&0<F.hitRate?(k[x]=k[x]||0,R[x]=Math.round(100*F.hitRate)+"%"):R[x]="0%"});var M=Object.keys(k);M.sort((F,x)=>k[x]-k[F]);M.forEach(F=>l[F]=Math.round(k[F]/2**20)+"MB / "+R[F]);for(M=n.length-1;0<=M;--M){const F=n[M];F&&(l["Priority "+(M+-3-1)]=Math.round(F/this.size*100)+"%")}return l};D.resetStats=function(){this._hit=this._miss=
0;this._users.forAll(l=>l.resetHitRate())};D.clear=function(l){this._db.forEach((k,n)=>{n.startsWith(l)&&(this._size-=k.size,this._db.delete(n),this._notifyRemove(n,k.entry,h.RemoveMode.ALL))})};D.clearAll=function(){this._db.forEach((l,k)=>this._notifyRemove(k,l.entry,h.RemoveMode.ALL));this._size=0;this._db.clear()};D._getHitRate=function(){return this._hit/(this._hit+this._miss)};D._notifyRemove=function(l,k,n){let R;this._removeFuncs.some(M=>l.startsWith(M[0])?(M=M[1](k,n),"number"===typeof M&&
(R=M),!0):!1);return R};D._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [l,k]of this._db){this._db.delete(l);if(1>=k.lives){this._size-=k.size;const n=this._notifyRemove(l,k.entry,h.RemoveMode.SOME);ca.isSome(n)&&0<n&&(this._size+=n,k.lives=k.lifetime,k.size=n,this._db.set(l,k))}else--k.lives,this._db.set(l,k);if(this._size<=.9*this.maxSize)break}};e._createClass(P,[{key:"size",get:function(){return this._size}},{key:"sizeMB",get:function(){return this._size/1024/1024}},{key:"maxSize",
get:function(){return this._maxSize},set:function(l){this._maxSize=Math.max(l,0);this._checkSizeLimit()}}]);return P}();h.MIN_PRIORITY=-3;h.MemCache=E;h.MemCacheStorage=J;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(h,e,ca){function V(l,k){return l?P.get(l,k):null}function E(l,k,n,R=!0){const M=[];for(const F of k)if("*"!==F&&!l.has(F))if(R){k=
J(F);try{const x=V(k,l);if(!x)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:k});if(!x.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:x});E(l,x.fieldNames,"expression contains missing fields")}catch(x){if((k=x&&x.details)&&(k.clause||k.where))throw x;k&&k.missingFields?M.push(...k.missingFields):M.push(F)}}else M.push(F);if(M.length)throw new e("feature-store:unsupported-query",n,{missingFields:M});}function J(l){return l.split(" as ")[0]}
const P=new ca.WhereClauseCache(50,500),D=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));h.getAliasFromFieldName=function(l){return l.split(" as ")[1]};h.getExpressionFromFieldName=J;h.getWhereClause=V;h.hasInvalidFieldType=function(l,k){return(l=k.get(l))?!D.has(l.type):!1};h.validateFields=E;h.validateHaving=function(l,k,n){if(!k)return!0;const R=P.get(k,l);if(!R)throw new e("feature-store:unsupported-query",
"invalid SQL expression",{having:k});if(!R.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:k});E(l,R.fieldNames,"having contains missing fields");if(!R.getExpressions().every(M=>{const {aggregateType:F,field:x}=M,f=l.get(x)?.name;return n.some(p=>{const {onStatisticField:G,statisticType:z}=p;return l.get(G)?.name===f&&z.toLowerCase().trim()===F})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",
{having:k});return!0};h.validateWhere=function(l,k){if(!k)return!0;const n=P.get(k,l);if(!n)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:k});if(!n.isStandardized)throw new e("feature-store:unsupported-query","where clause is not standard",{where:k});E(l,n.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../ItemCache","./WhereClause"],function(h,e,ca,V){let E=function(){function J(P,D){this._cache=new ca(P);this._invalidCache=new ca(D)}J.prototype.get=function(P,D){const l=`${D.uid}:${P}`,k=this._cache.get(l);if(k)return k;if(void 0!==this._invalidCache.get(l))return null;try{const n=V.WhereClause.create(P,D);this._cache.put(l,n);return n}catch{return this._invalidCache.put(l,null),null}};return e._createClass(J)}();h.WhereClauseCache=E;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/core/ItemCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(h,e){return function(){function ca(E,J){this._storage=new e.MemCacheStorage;this._storage.maxSize=E;J&&this._storage.registerRemoveFunc("",J)}var V=ca.prototype;V.put=function(E,J){this._storage.put(E,J,1,1)};V.pop=function(E){return this._storage.pop(E)};V.get=function(E){return this._storage.get(E)};V.clear=function(){this._storage.clearAll()};V.destroy=function(){this._storage.destroy()};return h._createClass(ca)}()})},
"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(h,e,ca,V,E,J){function P(O,N){O+="";return O.length>=N?O:Array(N-O.length+1).join("0")+O}function D(O,N,r="0",t="0",Y="0",ja="0",ya="",pa="0",ta="0"){return"+"===ya||"-"===ya?(O=`${P(parseInt(O,10),4)}-${P(parseInt(N,10),2)}-${P(parseInt(r,10),2)}`,N="",10>parseFloat(ja)&&(N="0"),t=`${P(parseInt(t,10),2)}:${P(parseInt(Y,
10),2)}:${N+parseFloat(ja).toString()}`,ya=`${ya}${P(parseInt(pa,10),2)}:${P(parseInt(ta,10),2)}`,new Date(O+"T"+t+ya)):new Date(parseInt(O,10),parseInt(N,10)-1,parseInt(r,10),parseInt(t,10),parseInt(Y,10),parseFloat(ja))}function l(O){let N=H.exec(O);if(null!==N){const [,r,t,Y,ja,ya,pa]=N;return D(r,t,Y,ja,ya,pa)}N=u.exec(O);if(null!==N){const [,r,t,Y,ja,ya,pa,ta,xa,Da]=N;return D(r,t,Y,ja,ya,pa,ta,xa,Da)}N=S.exec(O);if(null!==N){const [,r,t,Y,ja,ya,pa,ta,xa]=N;return D(r,t,Y,ja,ya,"0",pa,ta,xa)}N=
B.exec(O);if(null!==N){const [,r,t,Y,ja,ya]=N;return D(r,t,Y,ja,ya)}N=I.exec(O);if(null!==N){const [,r,t,Y]=N;return D(r,t,Y)}throw Error("SQL Invalid Timestamp");}function k(O){const N=I.exec(O);if(null===N)try{return l(O)}catch{throw Error("SQL Invalid Date");}const [,r,t,Y]=N;return new Date(parseInt(r,10),parseInt(t,10)-1,parseInt(Y,10))}function n(O){return Array.isArray(O)?O:[O]}function R(O){return null!==O?!0!==O:null}function M(O,N){return null!=O&&null!=N?!0===O&&!0===N:!1===O||!1===N?!1:
null}function F(O,N){return null!=O&&null!=N?!0===O||!0===N:!0===O||!0===N?!0:null}function x(O,N){if(null==O)return null;let r=!1;for(const t of N)if(null==t)r=null;else if(O===t){r=!0;break}return r}function f(O,N,r){if(null==O)return null;let t="",Y=K.Normal;for(let ja=0;ja<N.length;ja++){const ya=N.charAt(ja);switch(Y){case K.Normal:ya===r?Y=K.Escaped:t="-[]/{}()*+?.\\^$|".includes(ya)?t+("\\"+ya):"%"===ya?t+".*":"_"===ya?t+".":t+ya;break;case K.Escaped:t="-[]/{}()*+?.\\^$|".includes(ya)?t+("\\"+
ya):t+ya,Y=K.Normal}}return(new RegExp("^"+t+"$","m")).test(O)}function p(O){return O instanceof Date?O.valueOf():O}function G(O,N,r){if(null==N||null==r)return null;N=p(N);r=p(r);switch(O){case "\x3c\x3e":return N!==r;case "\x3d":return N===r;case "\x3e":return N>r;case "\x3c":return N<r;case "\x3e\x3d":return N>=r;case "\x3c\x3d":return N<=r}}function z(O,N,r){if("||"===O)return E.evaluateFunction("concat",[N,r]);if(N instanceof E.SqlInterval)if(r instanceof Date)switch(O){case "+":return new Date(N.valueInMilliseconds()+
r.getTime());case "-":return N.valueInMilliseconds()-r.getTime();case "*":return N.valueInMilliseconds()*r.getTime();case "/":return N.valueInMilliseconds()/r.getTime()}else if(r instanceof E.SqlInterval)switch(O){case "+":return E.SqlInterval.createFromMilliseconds(N.valueInMilliseconds()+r.valueInMilliseconds());case "-":return E.SqlInterval.createFromMilliseconds(N.valueInMilliseconds()-r.valueInMilliseconds());case "*":return N.valueInMilliseconds()*r.valueInMilliseconds();case "/":return N.valueInMilliseconds()/
r.valueInMilliseconds()}else N=N.valueInMilliseconds();else if(r instanceof E.SqlInterval)if(N instanceof Date)switch(O){case "+":return new Date(r.valueInMilliseconds()+N.getTime());case "-":return new Date(N.getTime()-r.valueInMilliseconds());case "*":return N.getTime()*r.valueInMilliseconds();case "/":return N.getTime()/r.valueInMilliseconds()}else r=r.valueInMilliseconds();else if(N instanceof Date&&"number"===typeof r)switch(r*=864E5,N=N.getTime(),O){case "+":return new Date(N+r);case "-":return new Date(N-
r);case "*":return new Date(N*r);case "/":return new Date(N/r)}else if(r instanceof Date&&"number"===typeof N)switch(N*=864E5,r=r.getTime(),O){case "+":return new Date(N+r);case "-":return new Date(N-r);case "*":return new Date(N*r);case "/":return new Date(N/r)}switch(O){case "+":return N+r;case "-":return N-r;case "*":return N*r;case "/":return N/r}}function v(O,N,r,t){O=t.getAttribute(O,N);return null!=O&&1===r[N]?new Date(O):O}const I=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,S=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Q=new Set(["current_timestamp","current_date","current_time"]);let C=function(){function O(){}O.makeBool=function(N){return!0===N};O.featureValue=function(N,r,t,Y){return v(N,r,t,Y)};O.equalsNull=function(N){return null===N};O.applyLike=function(N,r,t){return f(N,r,
t)};O.ensureArray=function(N){return n(N)};O.applyIn=function(N,r){return x(N,r)};O.currentDate=function(){const N=new Date;N.setHours(0,0,0,0);return N};O.makeSqlInterval=function(N,r,t){return E.SqlInterval.createFromValueAndQualifer(N,r,t)};O.convertInterval=function(N){return N instanceof E.SqlInterval?N.valueInMilliseconds():N};O.currentTimestamp=function(){return new Date};O.compare=function(N,r,t){return G(N,r,t)};O.calculate=function(N,r,t){return z(N,r,t)};O.makeComparable=function(N){return p(N)};
O.evaluateFunction=function(N,r){return E.evaluateFunction(N,r)};O.lookup=function(N,r){N=r[N];return void 0===N?null:N};O.between=function(N,r){return null==N||null==r[0]||null==r[1]?null:N>=r[0]&&N<=r[1]};O.notbetween=function(N,r){return null==N||null==r[0]||null==r[1]?null:N<r[0]||N>r[1]};O.ternaryNot=function(N){return R(N)};O.ternaryAnd=function(N,r){return M(N,r)};O.ternaryOr=function(N,r){return F(N,r)};return e._createClass(O)}(),y=function(){function O(r,t){this.fieldsIndex=t;this._datefields=
{};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=J.WhereGrammar.parse(r);const {isStandardized:Y,isAggregate:ja,referencedFieldNames:ya}=this._extractExpressionInfo(t);this._referencedFieldNames=ya;this.isStandardized=Y;this.isAggregate=ja}O.create=function(r,t){return new O(r,t)};var N=O.prototype;N.testSet=function(r,t=da){const Y={};for(const ja of this.fieldNames)Y[ja]=r.map(ya=>t.getAttribute(ya,ja));return!!this._evaluateNode(this.parseTree,{attributes:Y},da)};N.calculateValue=
function(r,t=da){r=this._evaluateNode(this.parseTree,r,t);return r instanceof E.SqlInterval?r.valueInMilliseconds()/864E5:r};N.calculateValueCompiled=function(r,t=da){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(r,this.parameters,t,this._datefields);if(ca("esri-csp-restrictions"))return this.calculateValue(r,t);this._compileMe();return this.parseTree._compiledVersion(r,this.parameters,t,this._datefields)};N.testFeature=function(r,t=da){return!!this._evaluateNode(this.parseTree,
r,t)};N.testFeatureCompiled=function(r,t=da){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(r,this.parameters,t,this._datefields);if(ca("esri-csp-restrictions"))return this.testFeature(r,t);this._compileMe();return!!this.parseTree._compiledVersion(r,this.parameters,t,this._datefields)};N.getFunctions=function(){const r=new Set;this._visitAll(this.parseTree,t=>{"function"===t.type&&r.add(t.name.toLowerCase())});return Array.from(r)};N.getExpressions=function(){const r=
new Map;this._visitAll(this.parseTree,t=>{if("function"===t.type){const Y=t.name.toLowerCase();t=t.args.value[0];if("column-reference"===t.type){t=t.column;const ja=`${Y}-${t}`;r.has(ja)||r.set(ja,{aggregateType:Y,field:t})}}});return[...r.values()]};N.getVariables=function(){const r=new Set;this._visitAll(this.parseTree,t=>{"parameter"===t.type&&r.add(t.value.toLowerCase())});return Array.from(r)};N._compileMe=function(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",r)).bind(C)};N._extractExpressionInfo=function(r){const t=[],Y=new Set;let ja=!0,ya=!0;this._visitAll(this.parseTree,pa=>{switch(pa.type){case "column-reference":const ta=r?.get(pa.column);let xa,Da;ta?xa=Da=ta.name??"":(Da=pa.column,xa=Da.toLowerCase());ta&&ta.name&&("date"===ta.type||"esriFieldTypeDate"===ta.type)&&(this._datefields[ta.name]=1);Y.has(xa)||(Y.add(xa),t.push(Da));pa.column=Da;break;
case "function":const {name:Ca,args:La}=pa;pa=La.value.length;ja&&(ja=E.isStandardized(Ca,pa));ya&&(ya=V.isAggregate(Ca,pa))}});return{referencedFieldNames:Array.from(t),isStandardized:ja,isAggregate:ya}};N._visitAll=function(r,t){if(null!=r)switch(t(r),r.type){case "when-clause":this._visitAll(r.operand,t);this._visitAll(r.value,t);break;case "case-expression":for(const Y of r.clauses)this._visitAll(Y,t);"simple"===r.format&&this._visitAll(r.operand,t);null!==r.else&&this._visitAll(r.else,t);break;
case "expression-list":for(const Y of r.value)this._visitAll(Y,t);break;case "unary-expression":this._visitAll(r.expr,t);break;case "binary-expression":this._visitAll(r.left,t);this._visitAll(r.right,t);break;case "function":this._visitAll(r.args,t)}};N.evaluateNodeToJavaScript=function(r){switch(r.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case "case-expression":var t="";if("simple"===r.format){var Y=
"this.makeComparable("+this.evaluateNodeToJavaScript(r.operand)+")";t="( ";for(let ja=0;ja<r.clauses.length;ja++)t+=" ("+Y+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(r.clauses[ja].operand)+")) ? ("+this.evaluateNodeToJavaScript(r.clauses[ja].value)+") : "}else for(t="( ",Y=0;Y<r.clauses.length;Y++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(r.clauses[Y].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(r.clauses[Y].value)+") : ";t=null!==r.else?t+this.evaluateNodeToJavaScript(r.else):
t+"null";return t+" )";case "parameter":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case "expression-list":t="[";for(Y of r.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(Y);return t+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";case "binary-expression":switch(r.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "OR":return"this.ternaryOr("+
this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+
"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+
","+JSON.stringify(r.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(r.operator)+
","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")"}throw Error("Not Supported Operator "+r.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(r.value);case "date":return"(new Date("+k(r.value).getTime().toString()+"))";case "timestamp":return"(new Date("+l(r.value).getTime().toString()+"))";case "current-time":return"date"===r.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+
JSON.stringify(r.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+")"}throw Error("Unsupported sql syntax "+r.type);};N._evaluateNode=function(r,t,Y){switch(r.type){case "interval":return t=this._evaluateNode(r.value,t,Y),E.SqlInterval.createFromValueAndQualifer(t,r.qualifier,r.op);case "case-expression":if("simple"===r.format){var ja=p(this._evaluateNode(r.operand,t,Y));for(var ya=0;ya<r.clauses.length;ya++)if(ja===
p(this._evaluateNode(r.clauses[ya].operand,t,Y)))return this._evaluateNode(r.clauses[ya].value,t,Y)}else for(ja=0;ja<r.clauses.length;ja++)if(!0===this._evaluateNode(r.clauses[ja].operand,t,Y))return this._evaluateNode(r.clauses[ja].value,t,Y);return null!==r.else?this._evaluateNode(r.else,t,Y):null;case "parameter":return this.parameters[r.value.toLowerCase()];case "expression-list":ja=[];for(ya of r.value)ja.push(this._evaluateNode(ya,t,Y));return ja;case "unary-expression":return R(this._evaluateNode(r.expr,
t,Y));case "binary-expression":switch(r.operator){case "AND":return M(this._evaluateNode(r.left,t,Y),this._evaluateNode(r.right,t,Y));case "OR":return F(this._evaluateNode(r.left,t,Y),this._evaluateNode(r.right,t,Y));case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(r.left,t,Y);case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(r.left,t,Y);case "IN":return ja=n(this._evaluateNode(r.right,
t,Y)),x(this._evaluateNode(r.left,t,Y),ja);case "NOT IN":return ja=n(this._evaluateNode(r.right,t,Y)),R(x(this._evaluateNode(r.left,t,Y),ja));case "BETWEEN":return ja=this._evaluateNode(r.left,t,Y),r=this._evaluateNode(r.right,t,Y),null==ja||null==r[0]||null==r[1]?null:ja>=p(r[0])&&ja<=p(r[1]);case "NOTBETWEEN":return ja=this._evaluateNode(r.left,t,Y),r=this._evaluateNode(r.right,t,Y),null==ja||null==r[0]||null==r[1]?null:ja<p(r[0])||ja>p(r[1]);case "LIKE":return f(this._evaluateNode(r.left,t,Y),
this._evaluateNode(r.right,t,Y),r.escape);case "NOT LIKE":return R(f(this._evaluateNode(r.left,t,Y),this._evaluateNode(r.right,t,Y),r.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return G(r.operator,this._evaluateNode(r.left,t,Y),this._evaluateNode(r.right,t,Y));case "-":case "+":case "*":case "/":case "||":return z(r.operator,this._evaluateNode(r.left,t,Y),this._evaluateNode(r.right,t,Y))}case "null":case "boolean":case "string":case "number":return r.value;
case "date":return k(r.value);case "timestamp":return l(r.value);case "current-time":return t=new Date,"date"===r.mode&&t.setHours(0,0,0,0),t;case "column-reference":return v(t,r.column,this._datefields,Y);case "data-type":return r.value;case "function":return t=this._evaluateNode(r.args,t,Y),this.isAggregate?V.aggregateFunction(r.name,t):E.evaluateFunction(r.name,t)}throw Error("Unsupported sql syntax "+r.type);};e._createClass(O,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,r=>{"current-time"===r.type?this._hasDateFunctions=!0:"function"===r.type&&(this._hasDateFunctions=this._hasDateFunctions||Q.has(r.name.toLowerCase()))});return this._hasDateFunctions}}]);return O}();var K;(function(O){O[O.Normal=0]="Normal";O[O.Escaped=1]="Escaped"})(K||(K={}));const da={getAttribute(O,N){return(O&&"object"===typeof O.attributes?
O.attributes:O)[N]}};h.WhereClause=y;h.defaultAttributeAdapter=da;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(h){function e(E){let J=0;for(let P=0;P<E.length;P++)J+=E[P];return J/E.length}function ca(E){const J=e(E),P=E.length;let D=0;for(const l of E)D+=(l-J)**2;return 1<P?D/(P-1):0}const V={min:{minParams:1,maxParams:1,evaluate:E=>null==E[0]?null:Math.min.apply(Math,E[0])},max:{minParams:1,maxParams:1,
evaluate:E=>null==E[0]?null:Math.max.apply(Math,E[0])},avg:{minParams:1,maxParams:1,evaluate:E=>null==E[0]?null:e(E[0])},sum:{minParams:1,maxParams:1,evaluate:E=>{if(null==E[0])E=null;else{E=E[0];let J=0;for(let P=0;P<E.length;P++)J+=E[P];E=J}return E}},stddev:{minParams:1,maxParams:1,evaluate:E=>null==E[0]?null:Math.sqrt(ca(E[0]))},count:{minParams:1,maxParams:1,evaluate:E=>null==E[0]?null:E[0].length},var:{minParams:1,maxParams:1,evaluate:E=>null==E[0]?null:ca(E[0])}};h.aggregateFunction=function(E,
J){const P=V[E.toLowerCase()];if(null==P)throw Error("Function Not Recognised");if(J.length<P.minParams||J.length>P.maxParams)throw Error(`Invalid Parameter count for call to ${E.toUpperCase()}`);return P.evaluate(J)};h.isAggregate=function(E,J){E=V[E.toLowerCase()];return null!=E&&J>=E.minParams&&J<=E.maxParams};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport",
"../string","../../chunks/datetime"],function(h,e,ca,V,E){function J(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function P(k,n){if(k instanceof Date)return n?J(k):k;if("string"===typeof k||k instanceof String)if(k=E.DateTime.fromSQL(k),k.isValid)return n?J(k.toJSDate()):k.toJSDate();throw new ca.SqlError(ca.SqlErrorCodes.CannotCastValue);}let D=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(n){if(null!==
n.precision||null!==n.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(n,R){R.includes(".")?(R=R.split("."),n.second=parseFloat(R[0]),n.millis=parseInt(R[1],10)):n.second=parseFloat(R)};k.createFromMilliseconds=function(n){const R=new k;R.second=n/1E3;return R};k.createFromValueAndQualifer=function(n,R,M){let F=null;const x=new k;x.op="-"===M?"-":"+";if("interval-period"===R.type){k._fixDefaults(R);M=RegExp("^[0-9]{1,}$");if("year"===
R.period||"month"===R.period)throw Error("Year-Month Intervals not supported");if("second"===R.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(n))k._parseSecondsComponent(x,n);else throw Error("Illegal Interval");else if(M.test(n))x[R.period]=parseFloat(n);else throw Error("Illegal Interval");}else{k._fixDefaults(R.start);k._fixDefaults(R.end);if("year"===R.start.period||"month"===R.start.period)throw Error("Year-Month Intervals not supported");if("year"===R.end.period||"month"===R.end.period)throw Error("Year-Month Intervals not supported");
switch(R.start.period){case "day":switch(R.end.period){case "hour":F=RegExp("^[0-9]{1,} [0-9]{1,}$");if(F.test(n))x[R.start.period]=parseFloat(n.split(" ")[0]),x[R.end.period]=parseFloat(n.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":F=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(F.test(n))x[R.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),x.hour=parseFloat(n[0]),x.minute=parseFloat(n[1]);else throw Error("Illegal Interval");break;case "second":F=
RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(F.test(n))x[R.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),x.hour=parseFloat(n[0]),x.minute=parseFloat(n[1]),k._parseSecondsComponent(x,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(R.end.period){case "minute":F=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(F.test(n))x.hour=parseFloat(n.split(":")[0]),x.minute=parseFloat(n.split(":")[1]);
else throw Error("Illegal Interval");break;case "second":F=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(F.test(n))n=n.split(":"),x.hour=parseFloat(n[0]),x.minute=parseFloat(n[1]),k._parseSecondsComponent(x,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(R.end.period){case "second":F=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(F.test(n))n=n.split(":"),x.minute=parseFloat(n[0]),k._parseSecondsComponent(x,
n[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return x};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return e._createClass(k)}();const l={extract:{minParams:2,maxParams:2,evaluate:([k,n])=>{if(null==n)return null;if(n instanceof Date)switch(k.toUpperCase()){case "SECOND":return n.getSeconds();
case "MINUTE":return n.getMinutes();case "HOUR":return n.getHours();case "DAY":return n.getDate();case "MONTH":return n.getMonth()+1;case "YEAR":return n.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [n,R]=k;return null==n||null==R?null:n.toString().substring(R-1)}if(3===k.length){const [n,R,M]=k;return null==n||null==R||null==M?null:0>=M?"":n.toString().substring(R-1,R+M-1)}}},position:{minParams:2,maxParams:2,
evaluate:([k,n])=>null==k||null==n?null:n.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var n=3===k.length,R=n?k[1]:" ";n=n?k[2]:k[1];if(null==R||null==n)return null;R=`(${V.escapeRegExpString(R)})`;switch(k[0]){case "BOTH":return n.replace(new RegExp(`^${R}*|${R}*$`,"g"),"");case "LEADING":return n.replace(new RegExp(`^${R}*`,"g"),"");case "TRAILING":return n.replace(new RegExp(`${R}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>
null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==
k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const n=k[0];k=2===k.length?10**k[1]:1;return null==n?null:Math.round(n*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let n="";for(let R=0;R<k.length;R++){if(null==k[R])return null;
n+=k[R].toString()}return n}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const n of k)if(null!==n)return n;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>
null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const n=k[0];k=k[1];return(n instanceof Date?n.valueOf():n)===(k instanceof Date?k.valueOf():k)?null:n}},cast:{minParams:2,maxParams:2,evaluate:k=>{var n=k[0];k=k[1];if(null===n)return null;switch(k.type){case "integer":n=parseInt(n,10);if(isNaN(n))throw new ca.SqlError(ca.SqlErrorCodes.CannotCastValue);return n;case "smallint":n=parseInt(n,10);if(isNaN(n))throw new ca.SqlError(ca.SqlErrorCodes.CannotCastValue);if(32767<
n||-32767>n)throw new ca.SqlError(ca.SqlErrorCodes.CannotCastValue);return n;case "float":case "real":n=parseFloat(n);if(isNaN(n))throw new ca.SqlError(ca.SqlErrorCodes.CannotCastValue);return n;case "date":return P(n,!0);case "timestamp":return P(n,!1);case "varchar":n=n.toString();if(n.length>k.size)throw new ca.SqlError(ca.SqlErrorCodes.CannotCastValue);return n;default:throw new ca.SqlError(ca.SqlErrorCodes.InvalidDataType);}}}};h.SqlInterval=D;h.evaluateFunction=function(k,n){const R=l[k.toLowerCase()];
if(null==R)throw Error("Function Not Recognised");if(n.length<R.minParams||n.length>R.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return R.evaluate(n)};h.isStandardized=function(k,n){k=l[k.toLowerCase()];return null!=k&&n>=k.minParams&&n<=k.maxParams};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(h,
e,ca){h.SqlErrorCodes=void 0;(function(D){D.InvalidFunctionParameters="InvalidFunctionParameters";D.UnsupportedSqlFunction="UnsupportedSqlFunction";D.UnsupportedOperator="UnsupportedOperator";D.UnsupportedSyntax="UnsupportedSyntax";D.UnsupportedIsRhs="UnsupportedIsRhs";D.UnsupportedIsLhs="UnsupportedIsLhs";D.InvalidDataType="InvalidDataType";D.CannotCastValue="CannotCastValue";D.MissingStatisticParameters="MissingStatisticParameters"})(h.SqlErrorCodes||(h.SqlErrorCodes={}));const V={[h.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",
[h.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[h.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[h.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[h.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[h.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[h.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[h.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",
[h.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let E=function(D){function l(n,R){n=k.call(this,ca.doSubstitutions(V[n],R));n.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(n),l);return n}e._inherits(l,D);var k=e._createSuper(l);return e._createClass(l)}(e._wrapNativeSuper(Error));h.FeatureSetErrorCodes=void 0;(function(D){D.NeverReach="NeverReach";D.NotImplemented="NotImplemented";
D.Cancelled="Cancelled";D.InvalidStatResponse="InvalidStatResponse";D.InvalidRequest="InvalidRequest";D.RequestFailed="RequestFailed";D.MissingFeatures="MissingFeatures";D.AggregationFieldNotFound="AggregationFieldNotFound";D.DataElementsNotFound="DataElementsNotFound"})(h.FeatureSetErrorCodes||(h.FeatureSetErrorCodes={}));const J={[h.FeatureSetErrorCodes.Cancelled]:"Cancelled",[h.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[h.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",
[h.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[h.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[h.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[h.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[h.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[h.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let P=function(D){function l(n,R){n=k.call(this,ca.doSubstitutions(J[n],R));n.declaredRootClass=
"esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(n),l);return n}e._inherits(l,D);var k=e._createSuper(l);return e._createClass(l)}(e._wrapNativeSuper(Error));h.FeatureSetError=P;h.FeatureSetErrorMessages=J;h.SqlError=E;h.SqlErrorMessages=V;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(h,e){function ca(M){return M&&
M.loc?`Line : ${M.loc.start?.line}, ${M.loc.start?.column}: `:""}function V(M,F){try{if(!F)return M;for(const x in F){let f=F[x];f||(f="");M=M.replace("{"+x+"}",F[x])}}catch(x){}return M}h.ExecutionErrorCodes=void 0;(function(M){M.AsyncNotEnabled="AsyncNotEnabled";M.ModulesNotSupported="ModulesNotSupported";M.CircularModules="CircularModules";M.NeverReach="NeverReach";M.UnsupportedHashType="UnsupportedHashType";M.InvalidParameter="InvalidParameter";M.UnexpectedToken="UnexpectedToken";M.Unrecognised=
"Unrecognised";M.UnrecognisedType="UnrecognisedType";M.MaximumCallDepth="MaximumCallDepth";M.BooleanConditionRequired="BooleanConditionRequired";M.TypeNotAllowedInFeature="TypeNotAllowedInFeature";M.KeyMustBeString="KeyMustBeString";M.WrongNumberOfParameters="WrongNumberOfParameters";M.CallNonFunction="CallNonFunction";M.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";M.NoFunctionInDictionary="NoFunctionInDictionary";M.NoFunctionInArray="NoFunctionInArray";M.AssignModuleFunction="AssignModuleFunction";
M.LogicExpressionOrAnd="LogicExpressionOrAnd";M.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";M.FuncionNotFound="FunctionNotFound";M.InvalidMemberAccessKey="InvalidMemberAccessKey";M.UnsupportedUnaryOperator="UnsupportUnaryOperator";M.InvalidIdentifier="InvalidIdentifier";M.MemberOfNull="MemberOfNull";M.UnsupportedOperator="UnsupportedOperator";M.Cancelled="Cancelled";M.ModuleAccessorMustBeString="ModuleAccessorMustBeString";M.ModuleExportNotFound="ModuleExportNotFound";M.Immutable=
"Immutable";M.OutOfBounds="OutOfBounds";M.IllegalResult="IllegalResult";M.FieldNotFound="FieldNotFound";M.PortalRequired="PortalRequired";M.LogicError="LogicError";M.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";M.KeyAccessorMustBeString="KeyAccessorMustBeString";M.WrongSpatialReference="WrongSpatialReference"})(h.ExecutionErrorCodes||(h.ExecutionErrorCodes={}));const E={[h.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[h.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",
[h.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[h.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[h.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[h.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[h.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[h.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[h.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[h.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[h.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[h.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[h.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[h.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[h.ExecutionErrorCodes.PortalRequired]:"Portal is required",[h.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[h.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[h.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[h.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[h.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[h.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[h.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[h.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[h.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[h.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[h.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[h.ExecutionErrorCodes.Immutable]:"Object is immutable",[h.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[h.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[h.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[h.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[h.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[h.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[h.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[h.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[h.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[h.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[h.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[h.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[h.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[h.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let J=function(M){function F(...f){return x.call(this,...f)}e._inherits(F,M);var x=e._createSuper(F);return e._createClass(F)}(e._wrapNativeSuper(Error)),P=function(M){function F(f,
p){f=x.call(this,ca(p)+f.message,{cause:f});f.loc=null;Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),F);p&&p.loc&&(f.loc=p.loc);return f}e._inherits(F,M);var x=e._createSuper(F);return e._createClass(F)}(J),D=function(M){function F(f,p,G,z){f=x.call(this,"Execution error - "+ca(G)+V(E[p],z));f.loc=null;f.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),F);G&&G.loc&&(f.loc=G.loc);return f}
e._inherits(F,M);var x=e._createSuper(F);return e._createClass(F)}(e._wrapNativeSuper(Error)),l=function(M){function F(f,p,G,z){f=x.call(this,"Compilation error - "+ca(G)+V(E[p],z));f.loc=null;f.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),F);G&&G.loc&&(f.loc=G.loc);return f}e._inherits(F,M);var x=e._createSuper(F);return e._createClass(F)}(e._wrapNativeSuper(Error)),k=function(M){function F(){var f=x.call(this,
"Uncompilable code structures");f.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),F);return f}e._inherits(F,M);var x=e._createSuper(F);return e._createClass(F)}(e._wrapNativeSuper(Error));h.ModuleErrorCodes=void 0;(function(M){M.UnrecognisedUri="UnrecognisedUri";M.UnsupportedUriProtocol="UnsupportedUriProtocol"})(h.ModuleErrorCodes||(h.ModuleErrorCodes={}));const n={[h.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[h.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let R=function(M){function F(f,p){f=x.call(this,V(n[f],p));f.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(e._assertThisInitialized(f),F);return f}e._inherits(F,M);var x=e._createSuper(F);return e._createClass(F)}(e._wrapNativeSuper(Error));h.ArcadeCompilationError=l;h.ArcadeExecutionError=D;h.ArcadeUncompilableError=k;h.ErrorWithCause=J;h.ExecutionErrorMessages=E;h.LocatableArcadeExecutionError=
P;h.ModuleError=R;h.ModuleErrorMessages=n;h.doSubstitutions=V;h.ensureArcadeExecutionError=function(M,F,x){return"esri.arcade.arcadeexecutionerror"===x.declaredRootClass||"esri.arcade.arcadecompilationerror"===x.declaredRootClass?null===x.loc&&F&&F.loc?new P(x,{cause:x}):x:F&&F.loc?new P(x,{cause:x}):x};h.parsingValidationMessage=function(M,F,x){return"Parsing error - "+ca(M)+V(E[F],x)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],
function(h){function e(a,g={}){const L=JSON.stringify([a,g]);let ba=hd[L];ba||(ba=new Intl.ListFormat(a,g),hd[L]=ba);return ba}function ca(a,g={}){const L=JSON.stringify([a,g]);let ba=Hc[L];ba||(ba=new Intl.DateTimeFormat(a,g),Hc[L]=ba);return ba}function V(a,g={}){const L=JSON.stringify([a,g]);let ba=Ic[L];ba||(ba=new Intl.NumberFormat(a,g),Ic[L]=ba);return ba}function E(a,g={}){const {base:L,...ba}=g,ia=JSON.stringify([a,ba]);let ra=Jc[ia];ra||(ra=new Intl.RelativeTimeFormat(a,g),Jc[ia]=ra);return ra}
function J(a){const g=[];for(let L=1;12>=L;L++){const ba=cb.utc(2016,L,1);g.push(a(ba))}return g}function P(a){const g=[];for(let L=1;7>=L;L++){const ba=cb.utc(2016,11,13+L);g.push(a(ba))}return g}function D(a,g,L,ba,ia){a=a.listingMode(L);return"error"===a?null:"en"===a?ba(g):ia(g)}function l(a,g){if(k(a)||null===a)return g;if(a instanceof jc)return a;if("string"===typeof a){const L=a.toLowerCase();return"default"===L?g:"local"===L||"system"===L?nc.instance:"utc"===L||"gmt"===L?Fb.utcInstance:Fb.parseSpecifier(L)||
Ub.create(a)}return n(a)?Fb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new me(a)}function k(a){return"undefined"===typeof a}function n(a){return"number"===typeof a}function R(a){return"number"===typeof a&&0===a%1}function M(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function F(a,g,L){if(0!==a.length)return a.reduce((ba,ia)=>{ia=[g(ia),ia];return ba?L(ba[0],ia[0])===ba[0]?ba:ia:ia},null)[1]}function x(a,g){return g.reduce((L,ba)=>
{L[ba]=a[ba];return L},{})}function f(a,g){return Object.prototype.hasOwnProperty.call(a,g)}function p(a,g,L){return R(a)&&a>=g&&a<=L}function G(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function z(a){if(!k(a)&&null!==a&&""!==a)return parseInt(a,10)}function v(a){if(!k(a)&&null!==a&&""!==a)return parseFloat(a)}function I(a){if(!k(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function H(a,g,L=!1){g=10**g;return(L?Math.trunc:Math.round)(a*g)/g}function u(a){return 0===
a%4&&(0!==a%100||0===a%400)}function S(a,g){var L=g-1;L=L-12*Math.floor(L/12)+1;return 2===L?u(a+(g-L)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][L-1]}function B(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(a.year,a.month-1,a.day));return+g}function Q(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:
52}function C(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function y(a,g,L,ba=null){a=new Date(a);const ia={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ba&&(ia.timeZone=ba);return(g=(new Intl.DateTimeFormat(L,{timeZoneName:g,...ia})).formatToParts(a).find(ra=>"timezonename"===ra.type.toLowerCase()))?g.value:null}function K(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function da(a){const g=
Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new Ha(`Invalid unit value ${a}`);return g}function O(a,g){const L={};for(const ba in a)if(f(a,ba)){const ia=a[ba];void 0!==ia&&null!==ia&&(L[g(ba)]=da(ia))}return L}function N(a,g){const L=Math.trunc(Math.abs(a/60)),ba=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${G(L,2)}:${G(ba,2)}`;case "narrow":return`${a}${L}${0<ba?`:${ba}`:""}`;case "techie":return`${a}${G(L,2)}${G(ba,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);
}}function r(a){return x(a,["hour","minute","second","millisecond"])}function t(a){switch(a){case "narrow":return[...ne];case "short":return[...Kc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Y(a){switch(a){case "narrow":return[...pe];case "short":return[...id];case "long":return[...Lc];case "numeric":return"1234567".split("");default:return null}}function ja(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function ya(a,g,L="always",ba=!1){const ia={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var ra=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===L&&ra)switch(L="days"===a,g){case 1:return L?"tomorrow":`next ${ia[a][0]}`;case -1:return L?"yesterday":`last ${ia[a][0]}`;case 0:return L?
"today":`this ${ia[a][0]}`}L=Object.is(g,-0)||0>g;g=Math.abs(g);ra=1===g;const Ea=ia[a];a=ba?ra?Ea[1]:Ea[2]||Ea[1]:ra?ia[a][0]:a;return L?`${g} ${a} ago`:`in ${g} ${a}`}function pa(a,g){let L="";for(const ba of a)L=ba.literal?L+ba.val:L+g(ba.val);return L}function ta(...a){a=a.reduce((g,L)=>g+L.source,"");return RegExp(`^${a}$`)}function xa(...a){return g=>a.reduce(([L,ba,ia],ra)=>{const [Ea,Ma,Ta]=ra(g,ia);return[{...L,...Ea},Ma||ba,Ta]},[{},null,1]).slice(0,2)}function Da(a,...g){if(null==a)return[null,
null];for(const [L,ba]of g)if(g=L.exec(a))return ba(g);return[null,null]}function Ca(...a){return(g,L)=>{const ba={};let ia;for(ia=0;ia<a.length;ia++)ba[a[ia]]=z(g[L+ia]);return[ba,null,L+ia]}}function La(a,g,L){a=a[g];return k(a)?L:z(a)}function Qa(a,g){return[{hours:La(a,g,0),minutes:La(a,g+1,0),seconds:La(a,g+2,0),milliseconds:I(a[g+3])},null,g+4]}function Pa(a,g){const L=!a[g]&&!a[g+1];a=K(a[g+1],a[g+2]);return[{},L?null:Fb.instance(a),g+3]}function ab(a,g){return[{},a[g]?Ub.create(a[g]):null,
g+1]}function na(a){const [g,L,ba,ia,ra,Ea,Ma,Ta,db]=a,d="-"===g[0];a=Ta&&"-"===Ta[0];const eb=($a,zb=!1)=>void 0!==$a&&(zb||$a&&d)?-$a:$a;return[{years:eb(v(L)),months:eb(v(ba)),weeks:eb(v(ia)),days:eb(v(ra)),hours:eb(v(Ea)),minutes:eb(v(Ma)),seconds:eb(v(Ta),"-0"===Ta),milliseconds:eb(I(db),a)}]}function sa(a,g,L,ba,ia,ra,Ea){g={year:2===g.length?C(z(g)):z(g),month:Kc.indexOf(L)+1,day:z(ba),hour:z(ia),minute:z(ra)};Ea&&(g.second=z(Ea));a&&(g.weekday=3<a.length?Lc.indexOf(a)+1:id.indexOf(a)+1);return g}
function Fa(a){const [,g,L,ba,ia,ra,Ea,Ma,Ta,db,d,eb]=a;a=sa(g,ia,ba,L,ra,Ea,Ma);let $a;$a=Ta?te[Ta]:db?0:K(d,eb);return[a,new Fb($a)]}function c(a){const [,g,L,ba,ia,ra,Ea,Ma]=a;return[sa(g,ia,ba,L,ra,Ea,Ma),Fb.utcInstance]}function m(a){const [,g,L,ba,ia,ra,Ea,Ma]=a;return[sa(g,Ma,L,ba,ia,ra,Ea),Fb.utcInstance]}function ea(a,g,L=!1){a={values:L?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};
return new jb(a)}function ka(a,g,L,ba,ia){a=a[ia][L];var ra=g[L]/a;ra=Math.sign(ra)!==Math.sign(ba[ia])&&0!==ba[ia]&&1>=Math.abs(ra)?0>ra?Math.floor(ra):Math.ceil(ra):Math.trunc(ra);ba[ia]+=ra;g[L]-=ra*a}function ua(a,g){ue.reduce((L,ba)=>{if(k(g[ba]))return L;L&&ka(a,g,L,g,ba);return ba},null)}function w(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(jb.fromMillis(a).as("days"))}function T(a,g,L){const ba=[["years",
(Ta,db)=>db.year-Ta.year],["quarters",(Ta,db)=>db.quarter-Ta.quarter+4*(db.year-Ta.year)],["months",(Ta,db)=>db.month-Ta.month+12*(db.year-Ta.year)],["weeks",(Ta,db)=>{Ta=w(Ta,db);return(Ta-Ta%7)/7}],["days",w]],ia={},ra=a;let Ea,Ma;for(const [Ta,db]of ba)0<=L.indexOf(Ta)&&(Ea=Ta,ia[Ta]=db(a,g),Ma=ra.plus(ia),Ma>g?(ia[Ta]--,a=ra.plus(ia)):a=Ma);return[a,ia,Ma,Ea]}function aa(a,g,L,ba){let [ia,ra,Ea,Ma]=T(a,g,L);a=g-ia;L=L.filter(Ta=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ta));0===
L.length&&(Ea<g&&(Ea=ia.plus({[Ma]:1})),Ea!==ia&&(ra[Ma]=(ra[Ma]||0)+a/(Ea-ia)));g=jb.fromObject(ra,ba);return 0<L.length?jb.fromMillis(a,ba).shiftTo(...L).plus(g):g}function X({numberingSystem:a},g=""){return new RegExp(`${Mc[a||"latn"]}${g}`)}function ha(a,g=L=>L){return{regex:a,deser:([L])=>{{let ba=parseInt(L,10);if(isNaN(ba)){ba="";for(let ia=0;ia<L.length;ia++){const ra=L.charCodeAt(ia);if(-1!==L[ia].search(Mc.hanidec))ba+=ve.indexOf(L[ia]);else for(const Ea in jd){const [Ma,Ta]=jd[Ea];ra>=
Ma&&ra<=Ta&&(ba+=ra-Ma)}}L=parseInt(ba,10)}else L=ba}return g(L)}}}function ma(a){return a.replace(/\./g,"\\.?").replace(Nc,kd)}function oa(a,g){return null===a?null:{regex:RegExp(a.map(ma).join("|")),deser:([L])=>a.findIndex(ba=>L.replace(/\./g,"").replace(Nc," ").toLowerCase()===ba.replace(/\./g,"").replace(Nc," ").toLowerCase())+g}}function za(a,g){return{regex:a,deser:([,L,ba])=>K(L,ba),groups:g}}function wa(a){return{regex:a,deser:([g])=>g}}function Ia(a,g){const L=X(g),ba=X(g,"{2}"),ia=X(g,
"{3}"),ra=X(g,"{4}"),Ea=X(g,"{6}"),Ma=X(g,"{1,2}"),Ta=X(g,"{1,3}"),db=X(g,"{1,6}"),d=X(g,"{1,9}"),eb=X(g,"{2,4}"),$a=X(g,"{4,6}"),zb=Vb=>({regex:RegExp(Vb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([q])=>q,literal:!0}),va=(Vb=>{if(a.literal)return zb(Vb);switch(Vb.val){case "G":return oa(g.eras("short",!1),0);case "GG":return oa(g.eras("long",!1),0);case "y":return ha(db);case "yy":return ha(eb,C);case "yyyy":return ha(ra);case "yyyyy":return ha($a);case "yyyyyy":return ha(Ea);case "M":return ha(Ma);
case "MM":return ha(ba);case "MMM":return oa(g.months("short",!0,!1),1);case "MMMM":return oa(g.months("long",!0,!1),1);case "L":return ha(Ma);case "LL":return ha(ba);case "LLL":return oa(g.months("short",!1,!1),1);case "LLLL":return oa(g.months("long",!1,!1),1);case "d":return ha(Ma);case "dd":return ha(ba);case "o":return ha(Ta);case "ooo":return ha(ia);case "HH":return ha(ba);case "H":return ha(Ma);case "hh":return ha(ba);case "h":return ha(Ma);case "mm":return ha(ba);case "m":return ha(Ma);case "q":return ha(Ma);
case "qq":return ha(ba);case "s":return ha(Ma);case "ss":return ha(ba);case "S":return ha(Ta);case "SSS":return ha(ia);case "u":return wa(d);case "uu":return wa(Ma);case "uuu":return ha(L);case "a":return oa(g.meridiems(),0);case "kkkk":return ha(ra);case "kk":return ha(eb,C);case "W":return ha(Ma);case "WW":return ha(ba);case "E":case "c":return ha(L);case "EEE":return oa(g.weekdays("short",!1,!1),1);case "EEEE":return oa(g.weekdays("long",!1,!1),1);case "ccc":return oa(g.weekdays("short",!0,!1),
1);case "cccc":return oa(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return za(new RegExp(`([+-]${Ma.source})(?::(${ba.source}))?`),2);case "ZZZ":return za(new RegExp(`([+-]${Ma.source})(${ba.source})?`),2);case "z":return wa(/[a-z_+-/]{1,256}?/i);case " ":return wa(/[^\S\n\r]/);default:return zb(Vb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};va.token=a;return va}function Ga(a){return[`^${a.map(g=>g.regex).reduce((g,L)=>`${g}(${L.source})`,"")}$`,a]}function Ja(a,
g,L){if(a=a.match(g)){g={};let ba=1;for(const ia in L)if(f(L,ia)){const ra=L[ia],Ea=ra.groups?ra.groups+1:1;!ra.literal&&ra.token&&(g[ra.token.val[0]]=ra.deser(a.slice(ba,ba+Ea)));ba+=Ea}return[a,g]}return[a,{}]}function Ua(a){const g=ia=>{switch(ia){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let L=null,ba;k(a.z)||(L=Ub.create(a.z));k(a.Z)||(L||(L=new Fb(a.Z)),ba=a.Z);k(a.q)||(a.M=3*(a.q-1)+1);k(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);k(a.u)||(a.S=I(a.u));return[Object.keys(a).reduce((ia,ra)=>{const Ea=g(ra);Ea&&(ia[Ea]=a[ra]);return ia},{}),L,ba]}function Ra(a,g){return Array.prototype.concat(...a.map(L=>{if(!L.literal){var ba=Ab.macroTokenToFormatOpts(L.val);ba=Va(ba,
g);L=null==ba||ba.includes(void 0)?L:ba}return L}))}function Wa(a,g,L){L=Ra(Ab.parseFormat(L),a);var ba=L.map($a=>Ia($a,a));const ia=ba.find($a=>$a.invalidReason);if(ia)return{input:g,tokens:L,invalidReason:ia.invalidReason};const [ra,Ea]=Ga(ba);ba=RegExp(ra,"i");const [Ma,Ta]=Ja(g,ba,Ea),[db,d,eb]=Ta?Ua(Ta):[null,null,void 0];if(f(Ta,"a")&&f(Ta,"H"))throw new W("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:L,regex:ba,rawMatches:Ma,matches:Ta,result:db,zone:d,specificOffset:eb}}
function Va(a,g){if(!a)return null;g=Ab.create(g,a);var L=g.formatDateTimeParts;Oc||(Oc=cb.fromMillis(1555555555555));return L.call(g,Oc).map(ba=>{{const {type:ra,value:Ea}=ba;if("literal"===ra)ba=/^\s+$/.test(Ea),ba={literal:!ba,val:ba?" ":Ea};else{ba=a[ra];var ia=we[ra];"object"===typeof ia&&(ia=ia[ba]);ba=ia?{literal:!1,val:ia}:void 0}}return ba})}function Na(a,g){return new Qb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Xa(a,g,L){g=new Date(Date.UTC(a,
g-1,L));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function bb(a,g){a=u(a)?Pc:Qc;const L=a.findIndex(ba=>ba<g);return{month:L+1,day:g-a[L]}}function Aa(a){const {year:g,month:L,day:ba}=a;var ia=ba+(u(g)?Pc:Qc)[L-1];const ra=Xa(g,L,ba);ia=Math.floor((ia-ra+10)/7);let Ea;1>ia?(Ea=g-1,ia=Q(Ea)):ia>Q(g)?(Ea=g+1,ia=1):Ea=g;return{weekYear:Ea,weekNumber:ia,weekday:ra,...r(a)}}function wb(a){const {weekYear:g,weekNumber:L,weekday:ba}=a;var ia=Xa(g,1,4),ra=u(g)?
366:365;ia=7*L+ba-ia-3;1>ia?(ra=g-1,ia+=u(ra)?366:365):ia>ra?(ra=g+1,ia-=u(g)?366:365):ra=g;const {month:Ea,day:Ma}=bb(ra,ia);return{year:ra,month:Ea,day:Ma,...r(a)}}function sb(a){const {year:g,month:L,day:ba}=a;var ia=ba+(u(g)?Pc:Qc)[L-1];return{year:g,ordinal:ia,...r(a)}}function ib(a){const {year:g,ordinal:L}=a,{month:ba,day:ia}=bb(g,L);return{year:g,month:ba,day:ia,...r(a)}}function b(a){const g=R(a.year),L=p(a.month,1,12),ba=p(a.day,1,S(a.year,a.month));return g?L?ba?!1:Na("day",a.day):Na("month",
a.month):Na("year",a.year)}function hb(a){const {hour:g,minute:L,second:ba,millisecond:ia}=a;a=p(g,0,23)||24===g&&0===L&&0===ba&&0===ia;const ra=p(L,0,59),Ea=p(ba,0,59),Ma=p(ia,0,999);return a?ra?Ea?Ma?!1:Na("millisecond",ia):Na("second",ba):Na("minute",L):Na("hour",g)}function Ib(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Rb(a){null===a.weekData&&(a.weekData=Aa(a.c));return a.weekData}function nb(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new cb({...a,...g,old:a})}function la(a,g,L){let ba=a-6E4*g;const ia=L.offset(ba);if(g===ia)return[ba,g];ba-=6E4*(ia-g);g=L.offset(ba);return ia===g?[ba,ia]:[a-6E4*Math.min(ia,g),Math.max(ia,g)]}function hc(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Tb(a,g,L){return la(B(a),g,L)}function Db(a,g){const L=a.o;var ba=a.c.year+
Math.trunc(g.years);const ia=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);ba={...a.c,year:ba,month:ia,day:Math.min(a.c.day,S(ba,ia))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};g=jb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");ba=B(ba);let [ra,Ea]=
la(ba,L,a.zone);0!==g&&(ra+=g,Ea=a.zone.offset(ra));return{ts:ra,o:Ea}}function Jb(a,g,L,ba,ia,ra){const {setZone:Ea,zone:Ma}=L;return a&&0!==Object.keys(a).length||g?(a=cb.fromObject(a,{...L,zone:g||Ma,specificOffset:ra}),Ea?a:a.setZone(Ma)):cb.invalid(new Qb("unparsable",`the input "${ia}" can't be parsed as ${ba}`))}function ac(a,g,L=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:L,forceSimple:!0}).formatDateTimeFromString(a,g):null}function Yb(a,g){const L=9999<a.c.year||0>a.c.year;
let ba="";L&&0<=a.c.year&&(ba+="+");ba+=G(a.c.year,L?6:4);g?(ba=ba+"-"+G(a.c.month),ba=ba+"-"+G(a.c.day)):(ba+=G(a.c.month),ba+=G(a.c.day));return ba}function ic(a,g,L,ba,ia,ra){let Ea=G(a.c.hour);g?(Ea=Ea+":"+G(a.c.minute),0===a.c.second&&L||(Ea+=":")):Ea+=G(a.c.minute);0===a.c.second&&L||(Ea+=G(a.c.second),0===a.c.millisecond&&ba||(Ea=Ea+"."+G(a.c.millisecond,3)));ia&&(a.isOffsetFixed&&0===a.offset&&!ra?Ea+="Z":0>a.o?(Ea=Ea+"-"+G(Math.trunc(-a.o/60)),Ea=Ea+":"+G(Math.trunc(-a.o%60))):(Ea=Ea+"+"+
G(Math.trunc(a.o/60)),Ea=Ea+":"+G(Math.trunc(a.o%60))));ra&&(Ea+="["+a.zone.ianaName+"]");return Ea}function Eb(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new qa(a);return g}function Sb(a,g){const L=l(g.zone,yb.defaultZone);g=rb.fromObject(g);const ba=yb.now();var ia;if(k(a.year))a=ba;else{for(const ra of ld)k(a[ra])&&(a[ra]=md[ra]);if(ia=b(a)||hb(a))return cb.invalid(ia);ia=L.offset(ba);[a,ia]=Tb(a,ia,L)}return new cb({ts:a,zone:L,loc:g,o:ia})}function kb(a,g,L){const ba=k(L.round)?!0:L.round,ia=(Ea,Ma)=>{Ea=H(Ea,ba||L.calendary?0:2,!0);return g.loc.clone(L).relFormatter(L).format(Ea,
Ma)},ra=Ea=>L.calendary?g.hasSame(a,Ea)?0:g.startOf(Ea).diff(a.startOf(Ea),Ea).get(Ea):g.diff(a,Ea).get(Ea);if(L.unit)return ia(ra(L.unit),L.unit);for(const Ea of L.units){const Ma=ra(Ea);if(1<=Math.abs(Ma))return ia(Ma,Ea)}return ia(a>g?-0:0,L.units[L.units.length-1])}function Gb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Hb(a){if(cb.isDateTime(a))return a;if(a&&a.valueOf&&n(a.valueOf()))return cb.fromJSDate(a);
if(a&&"object"===typeof a)return cb.fromObject(a);throw new Ha(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Za extends Error{}class bc extends Za{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class U extends Za{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class fa extends Za{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class W extends Za{}class qa extends Za{constructor(a){super(`Invalid unit ${a}`)}}class Ha extends Za{}class Ka extends Za{constructor(){super("Zone is an abstract class")}}
const Sa={year:"numeric",month:"numeric",day:"numeric"},Ya={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},lb={year:"numeric",month:"long",day:"numeric",weekday:"long"},xb={hour:"numeric",minute:"numeric"},Kb={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class jc{get type(){throw new Ka;}get name(){throw new Ka;}get ianaName(){return this.name}get isUniversal(){throw new Ka;}offsetName(a,g){throw new Ka;}formatOffset(a,g){throw new Ka;}offset(a){throw new Ka;}equals(a){throw new Ka;}get isValid(){throw new Ka;}}let Rc=null;class nc extends jc{static get instance(){null===
Rc&&(Rc=new nc);return Rc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:g,locale:L}){return y(a,g,L)}formatOffset(a,g){return N(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Ub extends jc{static create(a){pc[a]||(pc[a]=new Ub(a));return pc[a]}static resetCache(){pc=
{};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Ub.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:L}){return y(a,g,L,this.name)}formatOffset(a,g){return N(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;
oc[g]||(oc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));g=oc[g];if(g.formatToParts){g=g.formatToParts(a);var L=[];for(let d=0;d<g.length;d++){const {type:eb,value:$a}=g[d],zb=ye[eb];"era"===eb?L[zb]=$a:k(zb)||(L[zb]=parseInt($a,10))}g=L}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,d,eb,$a,zb,va,Vb,q]=g;g=[$a,d,eb,zb,
va,Vb,q]}let [ba,ia,ra,Ea,Ma,Ta,db]=g;"BC"===Ea&&(ba=-Math.abs(ba)+1);g=B({year:ba,month:ia,day:ra,hour:24===Ma?0:Ma,minute:Ta,second:db,millisecond:0});a=+a;L=a%1E3;return(g-(a-(0<=L?L:1E3+L)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let hd={},Hc={},Ic={},Jc={},qc=null;class ze{constructor(a,g,L){this.padTo=L.padTo||0;this.floor=L.floor||!1;const {padTo:ba,floor:ia,...ra}=L;if(!g||0<Object.keys(ra).length)g={useGrouping:!1,...L},0<L.padTo&&(g.minimumIntegerDigits=
L.padTo),this.inf=V(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):H(a,3);return G(a,this.padTo)}}class Ae{constructor(a,g,L){this.opts=L;L=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(L=a.offset/60*-1,L=0<=L?`Etc/GMT+${L}`:`Etc/GMT${L}`,0!==a.offset&&Ub.create(L).valid?this.dt=a:(L="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,L=a.zone.name):(L="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||L;this.dtf=ca(g,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(g=>{if("timeZoneName"===g.type){const L=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...g,value:L}}return g}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,g,L){this.opts={style:"long",...L};!g&&M()&&(this.rtf=E(a,L))}format(a,g){return this.rtf?this.rtf.format(a,g):ya(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,L,ba=!1){a=
a||yb.defaultLocale;var ia;(ia=a)||(ba?ba="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),ba=qc),ia=ba);return new rb(ia,g||yb.defaultNumberingSystem,L||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:L}={}){return rb.create(a,g,L)}constructor(a,g,L,ba){var ia=a.indexOf("-x-");-1!==ia&&(a=a.substring(0,ia));ia=a.indexOf("-u-");if(-1===ia)var ra=[a];else{try{ra=ca(a).resolvedOptions();var Ea=
a}catch($a){Ea=a.substring(0,ia),ra=ca(Ea).resolvedOptions()}const {numberingSystem:d,calendar:eb}=ra;ra=[Ea,d,eb]}const [Ma,Ta,db]=ra;this.locale=Ma;this.numberingSystem=g||Ta||null;this.outputCalendar=L||db||null;g=this.locale;L=this.numberingSystem;if((ra=this.outputCalendar)||L)g.includes("-u-")||(g+="-u"),ra&&(g+=`-ca-${ra}`),L&&(g+=`-nu-${L}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
ba;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,L=!0){return D(this,a,L,t,()=>{const ba=g?{month:a,day:"numeric"}:{month:a},ia=g?"format":"standalone";this.monthsCache[ia][a]||(this.monthsCache[ia][a]=
J(ra=>this.extract(ra,ba,"month")));return this.monthsCache[ia][a]})}weekdays(a,g=!1,L=!0){return D(this,a,L,Y,()=>{const ba=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ia=g?"format":"standalone";this.weekdaysCache[ia][a]||(this.weekdaysCache[ia][a]=P(ra=>this.extract(ra,ba,"weekday")));return this.weekdaysCache[ia][a]})}meridiems(a=!0){return D(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[cb.utc(2016,11,13,
9),cb.utc(2016,11,13,19)].map(L=>this.extract(L,g,"dayperiod"))}return this.meridiemCache})}eras(a,g=!0){return D(this,a,g,ja,()=>{const L={era:a};this.eraCache[a]||(this.eraCache[a]=[cb.utc(-40,1,1),cb.utc(2017,1,1)].map(ba=>this.extract(ba,L,"era")));return this.eraCache[a]})}extract(a,g,L){return(a=this.dtFormatter(a,g).formatToParts().find(ba=>ba.type.toLowerCase()===L))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new Ae(a,
this.intl,g)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return e(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Sc=null;class Fb extends jc{static get utcInstance(){null===Sc&&(Sc=new Fb(0));return Sc}static instance(a){return 0===
a?Fb.utcInstance:new Fb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Fb(K(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${N(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${N(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return N(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends jc{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Tc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Uc=null,Fd=60,Gd;class yb{static get now(){return Tc}static set now(a){Tc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return l(Cd,
nc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Uc}static set defaultOutputCalendar(a){Uc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Ub.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Kc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Lc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),id="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Vc={D:Sa,DD:Ya,DDD:mb,DDDD:lb,t:xb,tt:Kb,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,g={}){return new Ab(a,g)}static parseFormat(a){let g=
null,L="",ba=!1;const ia=[];for(let ra=0;ra<a.length;ra++){const Ea=a.charAt(ra);"'"===Ea?(0<L.length&&ia.push({literal:ba||/^\s+$/.test(L),val:L}),g=null,L="",ba=!ba):ba?L+=Ea:Ea===g?L+=Ea:(0<L.length&&ia.push({literal:/^\s+$/.test(L),val:L}),g=L=Ea)}0<L.length&&ia.push({literal:ba||/^\s+$/.test(L),val:L});return ia}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return G(a,
g);const L={...this.opts};0<g&&(L.padTo=g);return this.loc.numberFormatter(L).format(a)}formatDateTimeFromString(a,g){const L="en"===this.loc.listingMode(),ba=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ia=(d,eb)=>this.loc.extract(a,d,eb),ra=d=>a.isOffsetFixed&&0===a.offset&&d.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,d.format):"",Ea=(d,eb)=>L?t(d)[a.month-1]:ia(eb?{month:d}:{month:d,day:"numeric"},"month"),Ma=(d,eb)=>L?Y(d)[a.weekday-1]:ia(eb?{weekday:d}:{weekday:d,month:"long",
day:"numeric"},"weekday"),Ta=d=>{const eb=Ab.macroTokenToFormatOpts(d);return eb?this.formatWithSystemDefault(a,eb):d},db=d=>L?ja(d)[0>a.year?0:1]:ia({era:d},"era");return pa(Ab.parseFormat(g),d=>{switch(d){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ra({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return ra({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ra({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return L?Bd[12>a.hour?0:1]:ia({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ba?ia({day:"numeric"},"day"):this.num(a.day);case "dd":return ba?ia({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ma("short",!0);case "cccc":return Ma("long",!0);case "ccccc":return Ma("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ma("short",!1);case "EEEE":return Ma("long",
!1);case "EEEEE":return Ma("narrow",!1);case "L":return ba?ia({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ba?ia({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Ea("short",!0);case "LLLL":return Ea("long",!0);case "LLLLL":return Ea("narrow",!0);case "M":return ba?ia({month:"numeric"},"month"):this.num(a.month);case "MM":return ba?ia({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Ea("short",!1);case "MMMM":return Ea("long",
!1);case "MMMMM":return Ea("narrow",!1);case "y":return ba?ia({year:"numeric"},"year"):this.num(a.year);case "yy":return ba?ia({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ba?ia({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ba?ia({year:"numeric"},"year"):this.num(a.year,6);case "G":return db("short");case "GG":return db("long");case "GGGGG":return db("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ta(d)}})}formatDurationFromString(a,g){const L=ia=>{switch(ia[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};g=Ab.parseFormat(g);const ba=g.reduce((ia,{literal:ra,val:Ea})=>ra?ia:ia.concat(Ea),[]);a=a.shiftTo(...ba.map(L).filter(ia=>ia));return pa(g,(ia=>ra=>{const Ea=L(ra);return Ea?this.num(ia.get(Ea),ra.length):ra})(a))}}class Qb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Wc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Wc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Xc=RegExp(`(?:T${Jd.source})?`),Ce=Ca("weekYear","weekNumber","weekDay"),Kd=Ca("year","ordinal"),Ld=RegExp(`${Wc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Wc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=ta(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Xc),Je=ta(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Xc),Ke=ta(/(\d{4})-?(\d{3})/,Xc),Le=ta(Jd),Od=xa(function(a,g){return[{year:La(a,g),month:La(a,g+1,1),day:La(a,g+2,1)},null,g+3]},Qa,Pa,ab),Me=xa(Ce,Qa,Pa,ab),Ne=xa(Kd,Qa,Pa,ab),Oe=xa(Qa,Pa,ab),Pe=xa(Qa),Qe=ta(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=ta(Ld),Se=xa(Qa,Pa,ab),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=cc.slice(0).reverse();
class jb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let L=g?Ue:Te;a.matrix&&(L=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=L;this.isLuxonDuration=!0}static fromMillis(a,g){return jb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new Ha(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new jb({values:O(a,
jb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(n(a))return jb.fromMillis(a);if(jb.isDuration(a))return a;if("object"===typeof a)return jb.fromObject(a);throw new Ha(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [L]=Da(a,[De,na]);return L?jb.fromObject(L,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [L]=Da(a,[Nd,Pe]);return L?
jb.fromObject(L,g):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new Ha("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new fa(a);return new jb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new qa(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Ab.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=cc.map(L=>{const ba=this.values[L];return k(ba)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:L.slice(0,-1)}).format(ba)}).filter(L=>L);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=H(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let L="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(L+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(L+=".SSS"));g=g.toFormat(L);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);const g=
{};for(const L of cc)if(f(a.values,L)||f(this.values,L))g[L]=a.get(L)+this.get(L);return ea(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const L of Object.keys(this.values))g[L]=da(a(this.values[L],L));return ea(this,{values:g},!0)}get(a){return this[jb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...O(a,jb.normalizeUnit)};return ea(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:L,matrix:ba}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:ba,conversionAccuracy:L};return ea(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ua(this.matrix,a);return ea(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [L,ba]of Object.entries(a))0!==ba&&(g[L]=ba);return ea(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(ra=>jb.normalizeUnit(ra));const g={},L={},ba=this.toObject();let ia;for(const ra of cc)if(0<=a.indexOf(ra)){ia=ra;let Ea=0;for(const Ta in L)Ea+=this.matrix[Ta][ra]*L[Ta],L[Ta]=0;n(ba[ra])&&(Ea+=ba[ra]);const Ma=Math.trunc(Ea);g[ra]=Ma;L[ra]=(1E3*Ea-1E3*Ma)/1E3;for(const Ta in ba)cc.indexOf(Ta)>cc.indexOf(ra)&&ka(this.matrix,ba,Ta,g,ra)}else n(ba[ra])&&(L[ra]=ba[ra]);for(const ra in L)0!==L[ra]&&(g[ia]+=ra===ia?L[ra]:L[ra]/this.matrix[ia][ra]);return ea(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return ea(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ba of cc){var g=this.values[ba];var L=a.values[ba];g=void 0===g||0===g?void 0===L||0===L:g===L;if(!g)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new Ha("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new U(a);return new vb({invalid:a})}static fromDateTimes(a,
g){a=Hb(a);g=Hb(g);var L=a&&a.isValid?g&&g.isValid?g<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==L?new vb({start:a,end:g}):L}static after(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a,a.plus(g))}static before(a,g){g=jb.fromDurationLike(g);a=Hb(a);return vb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [L,ba]=(a||"").split("/",2);if(L&&ba){let Ea;try{var ia=cb.fromISO(L,g);Ea=ia.isValid}catch(Ta){Ea=!1}let Ma;try{var ra=cb.fromISO(ba,g);Ma=ra.isValid}catch(Ta){Ma=!1}if(Ea&&Ma)return vb.fromDateTimes(ia,ra);if(Ea){if(ra=jb.fromISO(ba,g),ra.isValid)return vb.after(ia,ra)}else if(Ma&&(ia=jb.fromISO(L,g),ia.isValid))return vb.before(ra,ia)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),L=this.end.startOf(a);return Math.floor(L.diff(g,a).get(a))+(L.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?vb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Hb).filter(ra=>this.contains(ra)).sort();const g=[];let {s:L}=this,ba=0;for(;L<this.e;){var ia=a[ba]||this.e;ia=+ia>+this.e?
this.e:ia;g.push(vb.fromDateTimes(L,ia));L=ia;ba+=1}return g}splitBy(a){a=jb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,L=1;const ba=[];for(;g<this.e;){var ia=this.start.plus(a.mapUnits(ra=>ra*L));ia=+ia>+this.e?this.e:ia;ba.push(vb.fromDateTimes(g,ia));g=ia;L+=1}return ba}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:vb.fromDateTimes(g,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,L]=a.sort((ba,ia)=>ba.s-ia.s).reduce(([ba,ia],ra)=>
ia?ia.overlaps(ra)||ia.abutsStart(ra)?[ba,ia.union(ra)]:[ba.concat([ia]),ra]:[ba,ra],[[],null]);L&&g.push(L);return g}static xor(a){let g=null,L=0;const ba=[];a=a.map(ia=>[{time:ia.s,type:"s"},{time:ia.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ia,ra)=>ia.time-ra.time);for(const ia of a)L+="s"===ia.type?1:-1,1===L?g=ia.time:(g&&+g!==+ia.time&&ba.push(vb.fromDateTimes(g,ia.time)),g=null);return vb.merge(ba)}difference(...a){return vb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>
g&&!g.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Sa,g={}){return this.isValid?Ab.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:g=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):jb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const g=cb.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Ub.isValidZone(a)}static normalizeZone(a){return l(a,yb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:L=null,locObj:ba=null,outputCalendar:ia="gregory"}={}){return(ba||rb.create(g,L,ia)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:L=null,locObj:ba=null,outputCalendar:ia="gregory"}={}){return(ba||rb.create(g,L,ia)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:L=null,locObj:ba=null}={}){return(ba||rb.create(g,L,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:L=null,locObj:ba=null}=
{}){return(ba||rb.create(g,L,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:M()}}}const Mc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},jd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Mc.hanidec.replace(/[\[|\]]/g,"").split(""),kd=`[ ${String.fromCharCode(160)}]`,Nc=new RegExp(kd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Oc=null;const Qc=[0,31,59,90,120,151,181,212,243,273,304,334],Pc=[0,31,60,91,121,152,182,213,244,274,305,335],md={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ld="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class cb{constructor(a){const g=a.zone||yb.defaultZone;let L=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(g.isValid?null:Ib(g));this.ts=k(a.ts)?yb.now():a.ts;let ba=null;var ia=null;L||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[ba,ia]=[a.old.c,a.old.o]:(ia=g.offset(this.ts),ba=hc(this.ts,ia),ba=(L=Number.isNaN(ba.year)?new Qb("invalid input"):null)?null:ba,ia=L?null:ia));this._zone=g;this.loc=a.loc||rb.create();this.invalid=L;this.weekData=null;this.c=ba;this.o=ia;this.isLuxonDateTime=
!0}static now(){return new cb({})}static local(){const [a,g]=Gb(arguments),[L,ba,ia,ra,Ea,Ma,Ta]=g;return Sb({year:L,month:ba,day:ia,hour:ra,minute:Ea,second:Ma,millisecond:Ta},a)}static utc(){const [a,g]=Gb(arguments),[L,ba,ia,ra,Ea,Ma,Ta]=g;a.zone=Fb.utcInstance;return Sb({year:L,month:ba,day:ia,hour:ra,minute:Ea,second:Ma,millisecond:Ta},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return cb.invalid("invalid input");const L=
l(g.zone,yb.defaultZone);return L.isValid?new cb({ts:a,zone:L,loc:rb.fromObject(g)}):cb.invalid(Ib(L))}static fromMillis(a,g={}){if(n(a))return-864E13>a||864E13<a?cb.invalid("Timestamp out of range"):new cb({ts:a,zone:l(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Ha(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(n(a))return new cb({ts:1E3*a,zone:l(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new Ha("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var L=l(g.zone,yb.defaultZone);if(!L.isValid)return cb.invalid(Ib(L));var ba=yb.now();const ia=k(g.specificOffset)?L.offset(ba):g.specificOffset,ra=O(a,Eb);var Ea=!k(ra.ordinal),Ma=!k(ra.year),Ta=!k(ra.month)||!k(ra.day);Ma=Ma||Ta;var db=ra.weekYear||ra.weekNumber;g=rb.fromObject(g);if((Ma||Ea)&&db)throw new W("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ta&&Ea)throw new W("Can't mix ordinal dates with month/day");Ta=db||ra.weekday&&
!Ma;let d=hc(ba,ia);Ta?(ba=Xe,db=Ve,d=Aa(d)):Ea?(ba=Ye,db=We,d=sb(d)):(ba=ld,db=md);let eb=!1;for(var $a of ba)k(ra[$a])?ra[$a]=eb?db[$a]:d[$a]:eb=!0;Ta?($a=R(ra.weekYear),ba=p(ra.weekNumber,1,Q(ra.weekYear)),db=p(ra.weekday,1,7),$a=$a?ba?db?!1:Na("weekday",ra.weekday):Na("week",ra.week):Na("weekYear",ra.weekYear)):Ea?($a=R(ra.year),ba=p(ra.ordinal,1,u(ra.year)?366:365),$a=$a?ba?!1:Na("ordinal",ra.ordinal):Na("year",ra.year)):$a=b(ra);if($a=$a||hb(ra))return cb.invalid($a);Ea=Ta?wb(ra):Ea?ib(ra):
ra;const [zb,va]=Tb(Ea,ia,L);L=new cb({ts:zb,zone:L,o:va,loc:g});return ra.weekday&&Ma&&a.weekday!==L.weekday?cb.invalid("mismatched weekday",`you can't specify both a weekday of ${ra.weekday} and a date of ${L.toISO()}`):L}static fromISO(a,g={}){const [L,ba]=Da(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Jb(L,ba,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [L,ba]=Da(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,Fa]);return Jb(L,ba,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [L,
ba]=Da(a,[Fe,c],[Ge,c],[He,m]);return Jb(L,ba,g,"HTTP",g)}static fromFormat(a,g,L={}){if(k(a)||k(g))throw new Ha("fromFormat requires an input string and a format");const {locale:ba=null,numberingSystem:ia=null}=L,ra=rb.fromOpts({locale:ba,numberingSystem:ia,defaultToEN:!0}),{result:Ea,zone:Ma,specificOffset:Ta,invalidReason:db}=Wa(ra,a,g),[d,eb,$a,zb]=[Ea,Ma,Ta,db];return zb?cb.invalid(zb):Jb(d,eb,L,`format ${g}`,a,$a)}static fromString(a,g,L={}){return cb.fromFormat(a,g,L)}static fromSQL(a,g={}){const [L,
ba]=Da(a,[Qe,Od],[Re,Se]);return Jb(L,ba,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new Ha("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new bc(a);return new cb({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Va(a,rb.fromObject(g)))?a.map(L=>L?L.val:null).join(""):null}static expandFormat(a,g={}){return Ra(Ab.parseFormat(a),rb.fromObject(g)).map(L=>L.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rb(this).weekYear:NaN}get weekNumber(){return this.isValid?Rb(this).weekNumber:NaN}get weekday(){return this.isValid?Rb(this).weekday:
NaN}get ordinal(){return this.isValid?sb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return u(this.year)}get daysInMonth(){return S(this.year,this.month)}get daysInYear(){return this.isValid?
u(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?Q(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:L,calendar:ba}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:L,outputCalendar:ba}}toUTC(a=0,g={}){return this.setZone(Fb.instance(a),g)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:L=!1}={}){a=l(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ba=
this.ts;if(g||L)g=a.offset(this.ts),L=this.toObject(),[ba]=Tb(L,g,a);return nb(this,{ts:ba,zone:a})}return cb.invalid(Ib(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:L}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:L});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=O(a,Eb);var g=!k(a.weekYear)||!k(a.weekNumber)||!k(a.weekday);const L=!k(a.ordinal),ba=!k(a.year),ia=!k(a.month)||!k(a.day),ra=a.weekYear||
a.weekNumber;if((ba||ia||L)&&ra)throw new W("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ia&&L)throw new W("Can't mix ordinal dates with month/day");g?g=wb({...Aa(this.c),...a}):k(a.ordinal)?(g={...this.toObject(),...a},k(a.day)&&(g.day=Math.min(S(g.year,g.month),g.day))):g=ib({...sb(this.c),...a});const [Ea,Ma]=Tb(g,this.o,this.zone);return nb(this,{ts:Ea,o:Ma})}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return nb(this,Db(this,a))}minus(a){if(!this.isValid)return this;
a=jb.fromDurationLike(a).negate();return nb(this,Db(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=jb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Ab.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Sa,g={}){return this.isValid?Ab.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:L=!1,includeOffset:ba=!0,extendedZone:ia=!1}={}){if(!this.isValid)return null;a="extended"===a;let ra=
Yb(this,a);return ra=ra+"T"+ic(this,a,g,L,ba,ia)}toISODate({format:a="extended"}={}){return this.isValid?Yb(this,"extended"===a):null}toISOWeekDate(){return ac(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:L=!0,includePrefix:ba=!1,extendedZone:ia=!1,format:ra="extended"}={}){return this.isValid?(ba?"T":"")+ic(this,"extended"===ra,g,a,L,ia):null}toRFC2822(){return ac(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ac(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Yb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:L=!0}={}){let ba="HH:mm:ss.SSS";if(g||a)L&&(ba+=" "),g?ba+="z":a&&(ba+="ZZ");return ac(this,ba,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",L={}){if(!this.isValid||!a.isValid)return jb.invalid("created by diffing an invalid DateTime");L={locale:this.locale,numberingSystem:this.numberingSystem,...L};
const ba=(Array.isArray(g)?g:[g]).map(jb.normalizeUnit);g=a.valueOf()>this.valueOf();a=aa(g?this:a,g?a:this,ba,L);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(cb.now(),a,g)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const L=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=L&&L<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||cb.fromObject({},{zone:this.zone}),L=a.padding?this<g?-a.padding:a.padding:0;let ba="years months days hours minutes seconds".split(" "),ia=a.unit;Array.isArray(a.unit)&&(ba=a.unit,ia=void 0);return kb(g,this.plus(L),{...a,numeric:"always",units:ba,unit:ia})}toRelativeCalendar(a={}){return this.isValid?kb(a.base||cb.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(cb.isDateTime))throw new Ha("min requires all arguments be DateTimes");
return F(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(cb.isDateTime))throw new Ha("max requires all arguments be DateTimes");return F(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,L={}){const {locale:ba=null,numberingSystem:ia=null}=L;L=rb.fromOpts({locale:ba,numberingSystem:ia,defaultToEN:!0});return Wa(L,a,g)}static fromStringExplain(a,g,L={}){return cb.fromFormatExplain(a,g,L)}static get DATE_SHORT(){return Sa}static get DATE_MED(){return Ya}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return lb}static get TIME_SIMPLE(){return xb}static get TIME_WITH_SECONDS(){return Kb}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
h.DateTime=cb;h.Duration=jb;h.FixedOffsetZone=Fb;h.IANAZone=Ub;h.Info=lc;h.Interval=vb;h.SystemZone=nc;h.Zone=jc})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(h,e,ca){var V={};(function(J){(function(P,D){J.exports&&(J.exports=D())})(ca.commonjsGlobal,function(){function P(l,k,n,R){l=Error.call(this,l);Object.setPrototypeOf&&Object.setPrototypeOf(l,P.prototype);l.expected=k;l.found=n;l.location=R;l.name=
"SyntaxError";return l}function D(l,k,n){n=n||" ";if(l.length>k)return l;k-=l.length;n+=n.repeat(k);return l+n.slice(0,k)}(function(l,k){function n(){this.constructor=l}n.prototype=k.prototype;l.prototype=new n})(P,Error);P.prototype.format=function(l){var k="Error: "+this.message;if(this.location){var n=null,R;for(R=0;R<l.length;R++)if(l[R].source===this.location.source){n=l[R].text.split(/\r\n|\n|\r/g);break}l=this.location.start;R=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(l):l;var M=this.location.source+":"+R.line+":"+R.column;if(n){var F=this.location.end,x=D("",R.line.toString().length," ");n=n[l.line-1];F=(l.line===F.line?F.column:n.length+1)-l.column||1;k+="\n --\x3e "+M+"\n"+x+" |\n"+R.line+" | "+n+"\n"+x+" | "+D("",l.column-1," ")+D("",F,"^")}else k+="\n at "+M}return k};P.buildMessage=function(l,k){function n(f){return f.charCodeAt(0).toString(16).toUpperCase()}function R(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+n(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+n(p)})}function M(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+n(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+n(p)})}function F(f){return x[f.type](f)}
var x={literal:function(f){return'"'+R(f.text)+'"'},class:function(f){var p=f.parts.map(function(G){return Array.isArray(G)?M(G[0])+"-"+M(G[1]):M(G)});return"["+(f.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};return"Expected "+function(f){f=f.map(F);var p,G;f.sort();if(0<f.length){for(G=p=1;p<f.length;p++)f[p-1]!==f[p]&&(f[G]=f[p],G++);f.length=G}switch(f.length){case 1:return f[0];case 2:return f[0]+
" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}(l)+" but "+(k?'"'+R(k)+'"':"end of input")+" found."};return{SyntaxError:P,parse:function(l,k){function n(q,A){return{type:"literal",text:q,ignoreCase:A}}function R(q,A,Z){return{type:"class",parts:q,inverted:A,ignoreCase:Z}}function M(q){var A=eb[q],Z;if(!A){for(Z=q-1;!eb[Z];)Z--;A=eb[Z];for(A={line:A.line,column:A.column};Z<q;)10===l.charCodeAt(Z)?(A.line++,A.column=1):A.column++,Z++;eb[q]=A}return A}function F(q,A,Z){var Ba=
M(q),Oa=M(A);q={source:hb,start:{offset:q,line:Ba.line,column:Ba.column},end:{offset:A,line:Oa.line,column:Oa.column}};Z&&hb&&"function"===typeof hb.offset&&(q.start=hb.offset(q.start),q.end=hb.offset(q.end));return q}function x(q){d<$a||(d>$a&&($a=d,zb=[]),zb.push(q))}function f(){var q=d;Aa();var A=G();A!==b?(Aa(),q=A):(d=q,q=b);return q}function p(){var q=d;var A=G();if(A!==b){q=[];var Z=d;var Ba=Aa();var Oa=Na();if(Oa!==b){var fb=Aa();var gb=G();gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)}else d=Z,Z=
b;for(;Z!==b;)q.push(Z),Z=d,Ba=Aa(),Oa=Na(),Oa!==b?(fb=Aa(),gb=G(),gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)):(d=Z,Z=b);Z={type:"expression-list"};A=[A];for(Ba=0;Ba<q.length;Ba++)A.push(q[Ba][3]);Z.value=A;q=Z}else d=q,q=b;return q}function G(){var q=d;var A=z();if(A!==b){q=[];var Z=d;var Ba=Aa();var Oa=ua();if(Oa!==b){var fb=Aa();var gb=z();gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),Z=d,Ba=Aa(),Oa=ua(),Oa!==b?(fb=Aa(),gb=z(),gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)):(d=Z,Z=b);q=
ib(A,q)}else d=q,q=b;return q}function z(){var q=d;var A=v();if(A!==b){q=[];var Z=d;var Ba=Aa();var Oa=ka();if(Oa!==b){var fb=Aa();var gb=v();gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),Z=d,Ba=Aa(),Oa=ka(),Oa!==b?(fb=Aa(),gb=v(),gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)):(d=Z,Z=b);q=ib(A,q)}else d=q,q=b;return q}function v(){var q=d;var A=ea();if(A===b){A=d;if(33===l.charCodeAt(d)){var Z=nb;d++}else Z=b,0===va&&x(ne);if(Z!==b){var Ba=d;va++;if(61===l.charCodeAt(d)){var Oa=la;
d++}else Oa=b,0===va&&x(Lc);va--;Oa===b?Ba=void 0:(d=Ba,Ba=b);Ba!==b?A=Z=[Z,Ba]:(d=A,A=b)}else d=A,A=b}A!==b?(Z=Aa(),Ba=v(),Ba!==b?q={type:"unary-expression",operator:"NOT",expr:Ba}:(d=q,q=b)):(d=q,q=b);if(q===b){A=d;q=S();if(q!==b){Aa();A=[];Z=d;Ba=Aa();Oa=I();if(Oa!==b){var fb=Aa();var gb=S();gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)}else d=Z,Z=b;if(Z!==b)for(;Z!==b;)A.push(Z),Z=d,Ba=Aa(),Oa=I(),Oa!==b?(fb=Aa(),gb=S(),gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)):(d=Z,Z=b);else A=b;A!==b&&(A={type:"arithmetic",
tail:A});A===b&&(A=d,Z=u(),Z!==b?(Aa(),Ba=Xa(),Ba!==b?(Aa(),Ba=p(),Ba!==b?(Aa(),Oa=bb(),Oa!==b?A={op:Z,right:Ba}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=u(),Z!==b?(Aa(),Ba=Xa(),Ba!==b?(Aa(),Ba=bb(),Ba!==b?A={op:Z,right:{type:"expression-list",value:[]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=u(),Z!==b?(Aa(),Ba=r(),Ba!==b?A={op:Z,right:Ba}:(d=A,A=b)):(d=A,A=b))),A===b&&(A=d,Oa=ea(),Oa!==b?(Aa(),Z=w(),Z!==b?(Aa(),Ba=S(),Ba!==b?(Aa(),fb=ka(),fb!==b?(Aa(),Oa=S(),Oa!==b?A={op:"NOT"+
Z,right:{type:"expression-list",value:[Ba,Oa]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Oa=w(),Oa!==b?(Aa(),Z=S(),Z!==b?(Aa(),Ba=ka(),Ba!==b?(Aa(),fb=S(),fb!==b?A={op:Oa,right:{type:"expression-list",value:[Z,fb]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,Z=c(),Z!==b?(Aa(),Ba=ea(),Ba!==b?(Aa(),Ba=S(),Ba!==b?A={op:Z+"NOT",right:Ba}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=c(),Z!==b?(Aa(),Ba=S(),Ba!==b?A={op:Z,right:Ba}:(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,
Z=H(),Z!==b?(Aa(),Ba=ta(),Ba!==b?(Aa(),Oa=d,l.substr(d,6).toLowerCase()===ob?(fb=l.substr(d,6),d+=6):(fb=b,0===va&&x(Od)),fb!==b?(fb=d,va++,gb=O(),va--,gb===b?fb=void 0:(d=fb,fb=b),fb!==b?Oa="ESCAPE":(d=Oa,Oa=b)):(d=Oa,Oa=b),Oa!==b?(Aa(),Oa=xa(),Oa!==b?A={op:Z,right:Ba,escape:Oa.value}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Z=H(),Z!==b?(Aa(),Ba=ta(),Ba!==b?A={op:Z,right:Ba,escape:""}:(d=A,A=b)):(d=A,A=b))))));A===b&&(A=null);""==A||void 0==A||null==A?A=q:(Z=null,A=Z="arithmetic"==
A.type?ib(q,A.tail):sb(A.op,q,A.right,A.escape))}else d=A,A=b;q=A}return q}function I(){if(l.substr(d,2)===hc){var q=hc;d+=2}else q=b,0===va&&x(id);q===b&&(62===l.charCodeAt(d)?(q=Tb,d++):(q=b,0===va&&x(pe)),q===b&&(l.substr(d,2)===Db?(q=Db,d+=2):(q=b,0===va&&x(Bd)),q===b&&(l.substr(d,2)===Jb?(q=Jb,d+=2):(q=b,0===va&&x(se)),q===b&&(60===l.charCodeAt(d)?(q=ac,d++):(q=b,0===va&&x(re)),q===b&&(61===l.charCodeAt(d)?(q=la,d++):(q=b,0===va&&x(Lc)),q===b&&(l.substr(d,2)===Yb?(q=Yb,d+=2):(q=b,0===va&&x(qe))))))));
return q}function H(){var q=q=d;var A=ea();if(A!==b){var Z=Aa();var Ba=m();Ba!==b?q=A=[A,Z,Ba]:(d=q,q=b)}else d=q,q=b;q!==b&&(q=q[0]+" "+q[2]);q===b&&(q=m());return q}function u(){var q=q=d;var A=ea();if(A!==b){var Z=Aa();var Ba=Fa();Ba!==b?q=A=[A,Z,Ba]:(d=q,q=b)}else d=q,q=b;q!==b&&(q=q[0]+" "+q[2]);q===b&&(q=Fa());return q}function S(){var q=d;var A=Q();if(A!==b){q=[];var Z=d;var Ba=Aa();var Oa=B();if(Oa!==b){var fb=Aa();var gb=Q();gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),
Z=d,Ba=Aa(),Oa=B(),Oa!==b?(fb=Aa(),gb=Q(),gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)):(d=Z,Z=b);q=ib(A,q)}else d=q,q=b;return q}function B(){if(43===l.charCodeAt(d)){var q=ic;d++}else q=b,0===va&&x(Vc);q===b&&(45===l.charCodeAt(d)?(q=Eb,d++):(q=b,0===va&&x(Ab)),q===b&&(l.substr(d,2)===Sb?(q=Sb,d+=2):(q=b,0===va&&x(Qb))));return q}function Q(){var q=d;var A=y();if(A!==b){q=[];var Z=d;var Ba=Aa();var Oa=C();if(Oa!==b){var fb=Aa();var gb=y();gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)}else d=Z,Z=b;for(;Z!==b;)q.push(Z),
Z=d,Ba=Aa(),Oa=C(),Oa!==b?(fb=Aa(),gb=y(),gb!==b?Z=Ba=[Ba,Oa,fb,gb]:(d=Z,Z=b)):(d=Z,Z=b);q=ib(A,q)}else d=q,q=b;return q}function C(){if(42===l.charCodeAt(d)){var q=kb;d++}else q=b,0===va&&x(Hd);q===b&&(47===l.charCodeAt(d)?(q=Gb,d++):(q=b,0===va&&x(Id)));return q}function y(){var q=xa();if(q===b){var A=d;var Z=d;var Ba=Qa();if(Ba!==b){var Oa=Pa();if(Oa!==b){var fb=ab();fb!==b?Z=parseFloat(Ba+Oa+fb):(d=Z,Z=b)}else d=Z,Z=b}else d=Z,Z=b;Z===b&&(Z=d,Ba=Qa(),Ba!==b?(Oa=Pa(),Oa!==b?Z=parseFloat(Ba+Oa):
(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,Ba=Qa(),Ba!==b?(Oa=ab(),Oa!==b?Z=parseFloat(Ba+Oa):(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,Ba=Qa(),Ba!==b&&(Ba=parseFloat(Ba)),Z=Ba)));var gb=Z;if(gb!==b){var Qd=d;va++;var Lf=da();va--;Lf===b?Qd=void 0:(d=Qd,Qd=b);Qd!==b?A={type:"number",value:gb}:(d=A,A=b)}else d=A,A=b;q=A;if(q===b){var Yc=d;var rc=d;if(l.substr(d,4).toLowerCase()===qa){var Rd=l.substr(d,4);d+=4}else Rd=b,0===va&&x(He);if(Rd!==b){var Zc=d;va++;var Mf=O();va--;Mf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?rc=Rd=[Rd,
Zc]:(d=rc,rc=b)}else d=rc,rc=b;var mc=rc;mc!==b&&(mc={type:"boolean",value:!0});Yc=mc;if(Yc===b){Yc=d;var sc=d;if(l.substr(d,5).toLowerCase()===Ha){var Sd=l.substr(d,5);d+=5}else Sd=b,0===va&&x(Ie);if(Sd!==b){var $c=d;va++;var Nf=O();va--;Nf===b?$c=void 0:(d=$c,$c=b);$c!==b?sc=Sd=[Sd,$c]:(d=sc,sc=b)}else d=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Yc=mc}q=Yc;if(q===b){var tc=d;if(l.substr(d,4).toLowerCase()===W){var Td=l.substr(d,4);d+=4}else Td=b,0===va&&x(Ge);if(Td!==b){var ad=d;va++;
var Of=O();va--;Of===b?ad=void 0:(d=ad,ad=b);ad!==b?tc=Td=[Td,ad]:(d=tc,tc=b)}else d=tc,tc=b;var Ze=tc;Ze!==b&&(Ze={type:"null",value:null});q=Ze;if(q===b){var uc=d;if(ha()!==b){Aa();var lf=ta();lf!==b?uc={type:"date",value:lf.value}:(d=uc,uc=b)}else d=uc,uc=b;q=uc;if(q===b){var vc=d;if(X()!==b){Aa();var mf=ta();mf!==b?vc={type:"timestamp",value:mf.value}:(d=vc,vc=b)}else d=vc,vc=b;q=vc;if(q===b){var Bb=d;var $e=ma();if($e!==b){Aa();if(45===l.charCodeAt(d)){var dc=Eb;d++}else dc=b,0===va&&x(Ab);dc===
b&&(43===l.charCodeAt(d)?(dc=ic,d++):(dc=b,0===va&&x(Vc)));if(dc!==b){Aa();var bd=ta();if(bd!==b){Aa();var nf=Y();nf!==b?Bb={type:"interval",value:bd,qualifier:nf,op:dc}:(d=Bb,Bb=b)}else d=Bb,Bb=b}else d=Bb,Bb=b}else d=Bb,Bb=b;Bb===b&&(Bb=d,$e=ma(),$e!==b?(Aa(),dc=ta(),dc!==b?(Aa(),bd=Y(),bd!==b?Bb={type:"interval",value:dc,qualifier:bd,op:""}:(d=Bb,Bb=b)):(d=Bb,Bb=b)):(d=Bb,Bb=b));q=Bb}}}}}}var pb=q;if(pb===b){var Mb=d;var wc=d;if(l.substr(d,7).toLowerCase()===qd){var of=l.substr(d,7);d+=7}else of=
b,0===va&&x(Pd);if(of!==b){var Ud=d;va++;var Pf=O();va--;Pf===b?Ud=void 0:(d=Ud,Ud=b);Ud!==b?wc="EXTRACT":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){Aa();var Qf=Xa();if(Qf!==b){Aa();var Wb=oa();Wb===b&&(Wb=za(),Wb===b&&(Wb=wa(),Wb===b&&(Wb=Ia(),Wb===b&&(Wb=Ga(),Wb===b&&(Wb=Ja())))));var pf=Wb;if(pf!==b){Aa();var Rf=T();if(Rf!==b){Aa();var qf=G();if(qf!==b){Aa();var Sf=bb();Sf!==b?Mb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(d=Mb,Mb=b)}else d=Mb,
Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;pb=Mb;if(pb===b){var Nb=d;var xc=d;if(l.substr(d,9).toLowerCase()===pd){var rf=l.substr(d,9);d+=9}else rf=b,0===va&&x(Se);if(rf!==b){var Vd=d;va++;var Tf=O();va--;Tf===b?Vd=void 0:(d=Vd,Vd=b);Vd!==b?xc="SUBSTRING":(d=xc,xc=b)}else d=xc,xc=b;if(xc!==b){Aa();var Uf=Xa();if(Uf!==b){Aa();var af=G();if(af!==b){Aa();var Vf=T();if(Vf!==b){Aa();var bf=G();if(bf!==b){Aa();var ec=d;var yc=d;if(l.substr(d,3).toLowerCase()===od){var sf=l.substr(d,
3);d+=3}else sf=b,0===va&&x(Re);if(sf!==b){var Wd=d;va++;var Wf=O();va--;Wf===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?yc="FOR":(d=yc,yc=b)}else d=yc,yc=b;var cd=yc;if(cd!==b){var Xf=Aa();var tf=G();if(tf!==b){var Yf=Aa();ec=cd=[cd,Xf,tf,Yf]}else d=ec,ec=b}else d=ec,ec=b;ec===b&&(ec=null);cd=bb();cd!==b?Nb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[af,bf,ec[2]]:[af,bf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;pb=Nb;if(pb===b){var tb=
d;var cf=aa();if(cf!==b){Aa();var df=Xa();if(df!==b){Aa();var fc=t();fc===b&&(fc=null);Aa();var dd=G();if(dd!==b){Aa();var ef=T();if(ef!==b){Aa();var uf=G();if(uf!==b){Aa();var Zf=bb();Zf!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd,uf]}}:(d=tb,tb=b)}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b}else d=tb,tb=b;tb===b&&(tb=d,cf=aa(),cf!==b?(Aa(),df=Xa(),df!==b?(Aa(),fc=t(),fc===b&&(fc=null),Aa(),dd=G(),dd!==b?(Aa(),
ef=bb(),ef!==b?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd]}}:(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b)):(d=tb,tb=b));pb=tb;if(pb===b){var Ob=d;var zc=d;if(l.substr(d,8).toLowerCase()===sd){var vf=l.substr(d,8);d+=8}else vf=b,0===va&&x(Ue);if(vf!==b){var Xd=d;va++;var $f=O();va--;$f===b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?zc="POSITION":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){Aa();var ag=Xa();if(ag!==b){Aa();var wf=G();if(wf!==b){Aa();var bg=Fa();
if(bg!==b){Aa();var xf=G();if(xf!==b){Aa();var cg=bb();cg!==b?Ob={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(d=Ob,Ob=b)}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b;pb=Ob;if(pb===b){var Pb=d;var Ac=d;if(l.substr(d,4).toLowerCase()===xd){var yf=l.substr(d,4);d+=4}else yf=b,0===va&&x(Mc);if(yf!==b){var Yd=d;va++;var dg=O();va--;dg===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?Ac="CAST":(d=Ac,Ac=b)}else d=Ac,Ac=b;if(Ac!==b){Aa();var eg=Xa();if(eg!==
b){Aa();var zf=G();if(zf!==b){Aa();var Bc=d;if(l.substr(d,2).toLowerCase()===yd){var Af=l.substr(d,2);d+=2}else Af=b,0===va&&x(jd);if(Af!==b){var Zd=d;va++;var fg=O();va--;fg===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?Bc="AS":(d=Bc,Bc=b)}else d=Bc,Bc=b;var gg=Bc;if(gg!==b){Aa();var qb=d;var Cc=d;if(l.substr(d,7).toLowerCase()===zd){var Bf=l.substr(d,7);d+=7}else Bf=b,0===va&&x(ve);if(Bf!==b){var $d=d;va++;var hg=O();va--;hg===b?$d=void 0:(d=$d,$d=b);$d!==b?Cc="INTEGER":(d=Cc,Cc=b)}else d=Cc,Cc=b;var ub=Cc;
ub!==b&&(ub={type:"data-type",value:{type:"integer"}});qb=ub;if(qb===b){qb=d;var Dc=d;if(l.substr(d,8).toLowerCase()===Ad){var Cf=l.substr(d,8);d+=8}else Cf=b,0===va&&x(kd);if(Cf!==b){var ae=d;va++;var ig=O();va--;ig===b?ae=void 0:(d=ae,ae=b);ae!==b?Dc="SMALLINT":(d=Dc,Dc=b)}else d=Dc,Dc=b;ub=Dc;ub!==b&&(ub={type:"data-type",value:{type:"smallint"}});qb=ub;if(qb===b){qb=d;var Ec=d;if(l.substr(d,5).toLowerCase()===jc){var Df=l.substr(d,5);d+=5}else Df=b,0===va&&x(Nc);if(Df!==b){var be=d;va++;var jg=
O();va--;jg===b?be=void 0:(d=be,be=b);be!==b?Ec="FLOAT":(d=Ec,Ec=b)}else d=Ec,Ec=b;ub=Ec;ub!==b&&(ub={type:"data-type",value:{type:"float"}});qb=ub;if(qb===b){qb=d;var Fc=d;if(l.substr(d,4).toLowerCase()===Rc){var Ef=l.substr(d,4);d+=4}else Ef=b,0===va&&x(we);if(Ef!==b){var ce=d;va++;var kg=O();va--;kg===b?ce=void 0:(d=ce,ce=b);ce!==b?Fc="REAL":(d=Fc,Fc=b)}else d=Fc,Fc=b;ub=Fc;ub!==b&&(ub={type:"data-type",value:{type:"real"}});qb=ub;if(qb===b&&(qb=d,ub=ha(),ub!==b&&(ub={type:"data-type",value:{type:"date"}}),
qb=ub,qb===b&&(qb=d,ub=X(),ub!==b&&(ub={type:"data-type",value:{type:"timestamp"}}),qb=ub,qb===b))){qb=d;var Gc=d;if(l.substr(d,7).toLowerCase()===nc){var Ff=l.substr(d,7);d+=7}else Ff=b,0===va&&x(Oc);if(Ff!==b){var de=d;va++;var lg=O();va--;lg===b?de=void 0:(d=de,de=b);de!==b?Gc="VARCHAR":(d=Gc,Gc=b)}else d=Gc,Gc=b;ub=Gc;if(ub!==b){Aa();var mg=Xa();if(mg!==b){Aa();var Gf=na();if(Gf!==b){Aa();var ng=bb();ng!==b?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(d=qb,qb=b)}else d=qb,qb=
b}else d=qb,qb=b}else d=qb,qb=b}}}}var Hf=qb;if(Hf!==b){Aa();var og=bb();og!==b?Pb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(d=Pb,Pb=b)}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b}else d=Pb,Pb=b;pb=Pb;if(pb===b){var kc=d;var ee;var Xb=d;Xb=ee=K();if(Xb===b)if(Xb=d,96===l.charCodeAt(d)?(ee=Tc,d++):(ee=b,0===va&&x(Ta)),ee!==b){var fe=[];if(Kc.test(l.charAt(d))){var gc=l.charAt(d);d++}else gc=b,0===va&&x(db);if(gc!==b)for(;gc!==b;)fe.push(gc),Kc.test(l.charAt(d))?
(gc=l.charAt(d),d++):(gc=b,0===va&&x(db));else fe=b;fe!==b?(96===l.charCodeAt(d)?(gc=Tc,d++):(gc=b,0===va&&x(Ta)),gc!==b?Xb=fe.join(""):(d=Xb,Xb=b)):(d=Xb,Xb=b)}else d=Xb,Xb=b;var If=Xb;if(If!==b){Aa();var pg=Xa();if(pg!==b){Aa();var ge=p();ge===b&&(ge=null);Aa();var qg=bb();qg!==b?kc={type:"function",name:If,args:ge?ge:{type:"expression-list",value:[]}}:(d=kc,kc=b)}else d=kc,kc=b}else d=kc,kc=b;pb=kc;if(pb===b){var Zb;var Cb=d;var ff=Ua();if(ff!==b){Aa();var ed=G();if(ed!==b){Aa();var fd=[];for(Zb=
Ca();Zb!==b;)fd.push(Zb),Zb=Ca();Zb=Aa();var he=Ra();he!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:null}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;if(Cb===b)if(Cb=d,ff=Ua(),ff!==b)if(Aa(),ed=G(),ed!==b){Aa();fd=[];for(Zb=Ca();Zb!==b;)fd.push(Zb),Zb=Ca();Zb=Aa();he=La();if(he!==b){Aa();var rg=Ra();rg!==b?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:he.value}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b;else d=Cb,Cb=b;var gf=Cb;if(gf===b){var $b;
var Lb=d;var hf=Ua();if(hf!==b){Aa();var gd=[];for($b=Da();$b!==b;)gd.push($b),$b=Da();$b=Aa();var ie=Ra();ie!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:null}:(d=Lb,Lb=b)}else d=Lb,Lb=b;if(Lb===b)if(Lb=d,hf=Ua(),hf!==b){Aa();gd=[];for($b=Da();$b!==b;)gd.push($b),$b=Da();$b=Aa();ie=La();if(ie!==b){Aa();var sg=Ra();sg!==b?Lb={type:"case-expression",format:"searched",clauses:gd,else:ie.value}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b;gf=Lb}pb=gf;if(pb===b){var je;var ke=d;var Jf=
da();if(Jf!==b){var Kf=[];for(je=N();je!==b;)Kf.push(je),je=N();ke=Jf+Kf.join("")}else d=ke,ke=b;var le=ke;if(le!==b){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===b&&(pb=r(),pb===b)){pb=d;var tg=Xa();if(tg!==b){Aa();var kf=G();if(kf!==b){Aa();var ug=bb();ug!==b?(kf.paren=!0,pb=kf):(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}}}}}}}}}return pb}
function K(){var q;var A=d;var Z=da();if(Z!==b){A=[];for(q=O();q!==b;)A.push(q),q=O();A=Z+A.join("")}else d=A,A=b;return A}function da(){if(Cd.test(l.charAt(d))){var q=l.charAt(d);d++}else q=b,0===va&&x(Wc);return q}function O(){if(Dd.test(l.charAt(d))){var q=l.charAt(d);d++}else q=b,0===va&&x(Jd);return q}function N(){if(Ed.test(l.charAt(d))){var q=l.charAt(d);d++}else q=b,0===va&&x(Xc);return q}function r(){var q=d;if(64===l.charCodeAt(d)){var A=Hb;d++}else A=b,0===va&&x(Ce);if(A!==b){var Z=K();
Z!==b?q=A=[A,Z]:(d=q,q=b)}else d=q,q=b;q!==b&&(q={type:"parameter",value:q[1]});return q}function t(){var q=d;if(l.substr(d,7).toLowerCase()===vd){var A=l.substr(d,7);d+=7}else A=b,0===va&&x(jb);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="LEADING":(d=q,q=b)}else d=q,q=b;q===b&&(q=d,l.substr(d,8).toLowerCase()===wd?(A=l.substr(d,8),d+=8):(A=b,0===va&&x(vb)),A!==b?(A=d,va++,Z=O(),va--,Z===b?A=void 0:(d=A,A=b),A!==b?q="TRAILING":(d=q,q=b)):(d=q,q=b),q===b&&(q=d,l.substr(d,4).toLowerCase()===
xe?(A=l.substr(d,4),d+=4):(A=b,0===va&&x(lc)),A!==b?(A=d,va++,Z=O(),va--,Z===b?A=void 0:(d=A,A=b),A!==b?q="BOTH":(d=q,q=b)):(d=q,q=b)));return q}function Y(){var q=d;var A=d;var Z=ja();if(Z!==b){Aa();var Ba=Xa();if(Ba!==b)if(Aa(),Ba=pa(),Ba!==b){Aa();var Oa=bb();Oa!==b?A={type:"interval-period",period:Z.value,precision:Ba,secondary:null}:(d=A,A=b)}else d=A,A=b;else d=A,A=b}else d=A,A=b;A===b&&(A=d,Z=ja(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),A=Z);if(A!==
b)if(Aa(),Z=d,l.substr(d,2).toLowerCase()===oc?(Ba=l.substr(d,2),d+=2):(Ba=b,0===va&&x(Qc)),Ba!==b?(Ba=d,va++,Oa=O(),va--,Oa===b?Ba=void 0:(d=Ba,Ba=b),Ba!==b?Z="TO":(d=Z,Z=b)):(d=Z,Z=b),Z!==b){Aa();Z=d;Ba=ja();Ba!==b&&(Ba={type:"interval-period",period:Ba.value,precision:null,secondary:null});Z=Ba;if(Z===b){Z=d;Ba=Ja();if(Ba!==b)if(Aa(),Ba=Xa(),Ba!==b)if(Aa(),Ba=pa(),Ba!==b)if(Aa(),Oa=Na(),Oa!==b)if(Aa(),Oa=ya(),Oa!==b){Aa();var fb=bb();fb!==b?Z={type:"interval-period",period:"second",precision:Ba,
secondary:Oa}:(d=Z,Z=b)}else d=Z,Z=b;else d=Z,Z=b;else d=Z,Z=b;else d=Z,Z=b;else d=Z,Z=b;Z===b&&(Z=d,Ba=Ja(),Ba!==b?(Aa(),Ba=Xa(),Ba!==b?(Aa(),Ba=pa(),Ba!==b?(Aa(),Oa=bb(),Oa!==b?Z={type:"interval-period",period:"second",precision:Ba,secondary:null}:(d=Z,Z=b)):(d=Z,Z=b)):(d=Z,Z=b)):(d=Z,Z=b),Z===b&&(Z=d,Ba=Ja(),Ba!==b&&(Ba={type:"interval-period",period:"second",precision:null,secondary:null}),Z=Ba))}Z!==b?q={type:"interval-qualifier",start:A,end:Z}:(d=q,q=b)}else d=q,q=b;else d=q,q=b;q===b&&(q=d,
Z=ja(),Z!==b?(Aa(),A=Xa(),A!==b?(Aa(),A=ya(),A!==b?(Aa(),Ba=bb(),Ba!==b?q={type:"interval-period",period:Z.value,precision:A,secondary:null}:(d=q,q=b)):(d=q,q=b)):(d=q,q=b)):(d=q,q=b),q===b&&(q=d,Z=ja(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),q=Z,q===b&&(q=d,Z=Ja(),Z!==b?(Aa(),A=Xa(),A!==b?(Aa(),A=pa(),A!==b?(Aa(),Ba=Na(),Ba!==b?(Aa(),Z=ya(),Z!==b?(Aa(),Ba=bb(),Ba!==b?q={type:"interval-period",period:"second",precision:A,secondary:Z}:(d=q,q=b)):(d=q,q=b)):
(d=q,q=b)):(d=q,q=b)):(d=q,q=b)):(d=q,q=b),q===b&&(q=d,Z=Ja(),Z!==b?(Aa(),A=Xa(),A!==b?(Aa(),A=ya(),A!==b?(Aa(),Ba=bb(),Ba!==b?q={type:"interval-period",period:"second",precision:A,secondary:null}:(d=q,q=b)):(d=q,q=b)):(d=q,q=b)):(d=q,q=b),q===b&&(q=d,Z=Ja(),Z!==b&&(Z={type:"interval-period",period:"second",precision:null,secondary:null}),q=Z)))));return q}function ja(){var q=d;q=wa();q!==b&&(q={type:"string",value:"day"});q===b&&(q=d,q=Ia(),q!==b&&(q={type:"string",value:"hour"}),q===b&&(q=d,q=Ga(),
q!==b&&(q={type:"string",value:"minute"}),q===b&&(q=d,q=za(),q!==b&&(q={type:"string",value:"month"}),q===b&&(q=d,q=oa(),q!==b&&(q={type:"string",value:"year"})))));return q}function ya(){var q=na();q!==b&&(q=parseFloat(q));return q}function pa(){var q=na();q!==b&&(q=parseFloat(q));return q}function ta(){var q=xa();q===b&&(q=r());return q}function xa(){var q=d;if(39===l.charCodeAt(d)){var A=Za;d++}else A=b,0===va&&x(Kd);A===b&&(l.substr(d,2)===bc?(A=bc,d+=2):(A=b,0===va&&x(Ld)));if(A!==b){A=[];var Z=
d;l.substr(d,2)===U?(Z=U,d+=2):(Z=b,0===va&&x(Md));Z!==b&&(Z="'");Z===b&&(Uc.test(l.charAt(d))?(Z=l.charAt(d),d++):(Z=b,0===va&&x(Nd)));for(;Z!==b;)A.push(Z),Z=d,l.substr(d,2)===U?(Z=U,d+=2):(Z=b,0===va&&x(Md)),Z!==b&&(Z="'"),Z===b&&(Uc.test(l.charAt(d))?(Z=l.charAt(d),d++):(Z=b,0===va&&x(Nd)));39===l.charCodeAt(d)?(Z=Za,d++):(Z=b,0===va&&x(Kd));Z!==b?q={type:"string",value:A.join("")}:(d=q,q=b)}else d=q,q=b;return q}function Da(){var q=d;if(Wa()!==b){Aa();var A=G();if(A!==b){Aa();var Z=Va();Z!==
b?(Aa(),Z=G(),Z!==b?q={type:"when-clause",operand:A,value:Z}:(d=q,q=b)):(d=q,q=b)}else d=q,q=b}else d=q,q=b;return q}function Ca(){var q=d;if(Wa()!==b){Aa();var A=G();if(A!==b){Aa();var Z=Va();Z!==b?(Aa(),Z=G(),Z!==b?q={type:"when-clause",operand:A,value:Z}:(d=q,q=b)):(d=q,q=b)}else d=q,q=b}else d=q,q=b;return q}function La(){var q=d;var A=d;if(l.substr(d,4).toLowerCase()===rb){var Z=l.substr(d,4);d+=4}else Z=b,0===va&&x(ba);if(Z!==b){Z=d;va++;var Ba=O();va--;Ba===b?Z=void 0:(d=Z,Z=b);Z!==b?A="ELSE":
(d=A,A=b)}else d=A,A=b;A!==b?(Aa(),A=G(),A!==b?q={type:"else-clause",value:A}:(d=q,q=b)):(d=q,q=b);return q}function Qa(){var q=na();if(q===b){q=d;if(45===l.charCodeAt(d)){var A=Eb;d++}else A=b,0===va&&x(Ab);A===b&&(43===l.charCodeAt(d)?(A=ic,d++):(A=b,0===va&&x(Vc)));if(A!==b){var Z=na();Z!==b?q=A[0]+Z:(d=q,q=b)}else d=q,q=b}return q}function Pa(){var q=d;if(46===l.charCodeAt(d)){var A=fa;d++}else A=b,0===va&&x(De);A!==b?(q=na(),q===b&&(q=null),q="."+(null!=q?q:"")):(d=q,q=b);return q}function ab(){var q;
var A=q=d;if(Gd.test(l.charAt(d))){var Z=l.charAt(d);d++}else Z=b,0===va&&x(Ee);Z!==b?(yb.test(l.charAt(d))?(A=l.charAt(d),d++):(A=b,0===va&&x(Fe)),A===b&&(A=null),A="e"+(null===A?"":A)):(d=A,A=b);A!==b?(Z=na(),Z!==b?q=A+Z:(d=q,q=b)):(d=q,q=b);return q}function na(){var q=[];var A=sa();if(A!==b)for(;A!==b;)q.push(A),A=sa();else q=b;q!==b&&(q=q.join(""));return q}function sa(){if(Fd.test(l.charAt(d))){var q=l.charAt(d);d++}else q=b,0===va&&x(te);return q}function Fa(){var q=d;if(l.substr(d,2).toLowerCase()===
Ka){var A=l.substr(d,2);d+=2}else A=b,0===va&&x(Je);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="IN":(d=q,q=b)}else d=q,q=b;return q}function c(){var q=d;if(l.substr(d,2).toLowerCase()===Sa){var A=l.substr(d,2);d+=2}else A=b,0===va&&x(Ke);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="IS":(d=q,q=b)}else d=q,q=b;return q}function m(){var q=d;if(l.substr(d,4).toLowerCase()===Ya){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(Le);if(A!==b){A=d;va++;var Z=O();
va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="LIKE":(d=q,q=b)}else d=q,q=b;return q}function ea(){var q=d;if(l.substr(d,3).toLowerCase()===mb){var A=l.substr(d,3);d+=3}else A=b,0===va&&x(Me);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="NOT":(d=q,q=b)}else d=q,q=b;return q}function ka(){var q=d;if(l.substr(d,3).toLowerCase()===lb){var A=l.substr(d,3);d+=3}else A=b,0===va&&x(Ne);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="AND":(d=q,q=b)}else d=q,q=b;return q}
function ua(){var q=d;if(l.substr(d,2).toLowerCase()===xb){var A=l.substr(d,2);d+=2}else A=b,0===va&&x(Oe);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="OR":(d=q,q=b)}else d=q,q=b;return q}function w(){var q=d;if(l.substr(d,7).toLowerCase()===Kb){var A=l.substr(d,7);d+=7}else A=b,0===va&&x(Pe);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="BETWEEN":(d=q,q=b)}else d=q,q=b;return q}function T(){var q=d;if(l.substr(d,4).toLowerCase()===nd){var A=l.substr(d,
4);d+=4}else A=b,0===va&&x(Qe);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="FROM":(d=q,q=b)}else d=q,q=b;return q}function aa(){var q=d;if(l.substr(d,4).toLowerCase()===rd){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(Te);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="TRIM":(d=q,q=b)}else d=q,q=b;return q}function X(){var q=d;if(l.substr(d,9).toLowerCase()===td){var A=l.substr(d,9);d+=9}else A=b,0===va&&x(cc);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:
(d=A,A=b);A!==b?q="TIMESTAMP":(d=q,q=b)}else d=q,q=b;return q}function ha(){var q=d;if(l.substr(d,4).toLowerCase()===ud){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(ue);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="DATE":(d=q,q=b)}else d=q,q=b;return q}function ma(){var q=d;if(l.substr(d,8).toLowerCase()===ye){var A=l.substr(d,8);d+=8}else A=b,0===va&&x(Pc);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="INTERVAL":(d=q,q=b)}else d=q,q=b;return q}function oa(){var q=
d;if(l.substr(d,4).toLowerCase()===pc){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(md);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="YEAR":(d=q,q=b)}else d=q,q=b;return q}function za(){var q=d;if(l.substr(d,5).toLowerCase()===Ub){var A=l.substr(d,5);d+=5}else A=b,0===va&&x(Ve);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="MONTH":(d=q,q=b)}else d=q,q=b;return q}function wa(){var q=d;if(l.substr(d,3).toLowerCase()===hd){var A=l.substr(d,3);d+=3}else A=b,0===
va&&x(We);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="DAY":(d=q,q=b)}else d=q,q=b;return q}function Ia(){var q=d;if(l.substr(d,4).toLowerCase()===Hc){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(ld);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="HOUR":(d=q,q=b)}else d=q,q=b;return q}function Ga(){var q=d;if(l.substr(d,6).toLowerCase()===Ic){var A=l.substr(d,6);d+=6}else A=b,0===va&&x(Xe);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q=
"MINUTE":(d=q,q=b)}else d=q,q=b;return q}function Ja(){var q=d;if(l.substr(d,6).toLowerCase()===Jc){var A=l.substr(d,6);d+=6}else A=b,0===va&&x(Ye);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="SECOND":(d=q,q=b)}else d=q,q=b;return q}function Ua(){var q=d;if(l.substr(d,4).toLowerCase()===qc){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(cb);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="CASE":(d=q,q=b)}else d=q,q=b;return q}function Ra(){var q=d;if(l.substr(d,
3).toLowerCase()===ze){var A=l.substr(d,3);d+=3}else A=b,0===va&&x(a);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="END":(d=q,q=b)}else d=q,q=b;return q}function Wa(){var q=d;if(l.substr(d,4).toLowerCase()===Ae){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(g);if(A!==b){A=d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="WHEN":(d=q,q=b)}else d=q,q=b;return q}function Va(){var q=d;if(l.substr(d,4).toLowerCase()===Be){var A=l.substr(d,4);d+=4}else A=b,0===va&&x(L);if(A!==b){A=
d;va++;var Z=O();va--;Z===b?A=void 0:(d=A,A=b);A!==b?q="THEN":(d=q,q=b)}else d=q,q=b;return q}function Na(){if(44===l.charCodeAt(d)){var q=Sc;d++}else q=b,0===va&&x(ia);return q}function Xa(){if(40===l.charCodeAt(d)){var q=Fb;d++}else q=b,0===va&&x(ra);return q}function bb(){if(41===l.charCodeAt(d)){var q=me;d++}else q=b,0===va&&x(Ea);return q}function Aa(){var q;var A=[];for(q=wb();q!==b;)A.push(q),q=wb();return A}function wb(){if(oe.test(l.charAt(d))){var q=l.charAt(d);d++}else q=b,0===va&&x(Ma);
return q}function sb(q,A,Z,Ba){q={type:"binary-expression",operator:q,left:A,right:Z};void 0!==Ba&&(q.escape=Ba);return q}function ib(q,A){for(var Z=0;Z<A.length;Z++)q=sb(A[Z][1],q,A[Z][3]);return q}k=void 0!==k?k:{};var b={},hb=k.grammarSource,Ib={start:f},Rb=f,nb="!",la="\x3d",hc="\x3e\x3d",Tb="\x3e",Db="\x3c\x3d",Jb="\x3c\x3e",ac="\x3c",Yb="!\x3d",ic="+",Eb="-",Sb="||",kb="*",Gb="/",Hb="@",Za="'",bc="N'",U="''",fa=".",W="null",qa="true",Ha="false",Ka="in",Sa="is",Ya="like",ob="escape",mb="not",
lb="and",xb="or",Kb="between",nd="from",od="for",pd="substring",qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",jc="float",Rc="real",nc="varchar",oc="to",ye="interval",pc="year",Ub="month",hd="day",Hc="hour",Ic="minute",Jc="second",qc="case",ze="end",Ae="when",Be="then",rb="else",Sc=",",Fb="(",me=")",Tc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Uc=/^[^']/,Fd=/^[0-9]/,
Gd=/^[eE]/,yb=/^[+\-]/,oe=/^[ \t\n\r]/,Kc=/^[^`]/,ne=n("!",!1),Lc=n("\x3d",!1),id=n("\x3e\x3d",!1),pe=n("\x3e",!1),Bd=n("\x3c\x3d",!1),se=n("\x3c\x3e",!1),re=n("\x3c",!1),qe=n("!\x3d",!1),Vc=n("+",!1),Ab=n("-",!1),Qb=n("||",!1),Hd=n("*",!1),Id=n("/",!1),Wc=R([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=R([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Xc=R([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=n("@",!1),Kd=n("'",!1),Ld=n("N'",!1),Md=n("''",!1),Nd=R(["'"],!0,!1),
De=n(".",!1),te=R([["0","9"]],!1,!1),Ee=R(["e","E"],!1,!1),Fe=R(["+","-"],!1,!1),Ge=n("NULL",!0),He=n("TRUE",!0),Ie=n("FALSE",!0),Je=n("IN",!0),Ke=n("IS",!0),Le=n("LIKE",!0),Od=n("ESCAPE",!0),Me=n("NOT",!0),Ne=n("AND",!0),Oe=n("OR",!0),Pe=n("BETWEEN",!0),Qe=n("FROM",!0),Re=n("FOR",!0),Se=n("SUBSTRING",!0),Pd=n("EXTRACT",!0),Te=n("TRIM",!0),Ue=n("POSITION",!0),cc=n("TIMESTAMP",!0),ue=n("DATE",!0),jb=n("LEADING",!0),vb=n("TRAILING",!0),lc=n("BOTH",!0),Mc=n("CAST",!0),jd=n("AS",!0),ve=n("INTEGER",!0),
kd=n("SMALLINT",!0),Nc=n("FLOAT",!0),we=n("REAL",!0),Oc=n("VARCHAR",!0),Qc=n("TO",!0),Pc=n("INTERVAL",!0),md=n("YEAR",!0),Ve=n("MONTH",!0),We=n("DAY",!0),ld=n("HOUR",!0),Xe=n("MINUTE",!0),Ye=n("SECOND",!0),cb=n("CASE",!0),a=n("END",!0),g=n("WHEN",!0),L=n("THEN",!0),ba=n("ELSE",!0),ia=n(",",!1),ra=n("(",!1),Ea=n(")",!1),Ma=R([" ","\t","\n","\r"],!1,!1),Ta=n("`",!1),db=R(["`"],!0,!1),d=0,eb=[{line:1,column:1}],$a=0,zb=[],va=0;if("startRule"in k){if(!(k.startRule in Ib))throw Error("Can't start parsing from rule \""+
k.startRule+'".');Rb=Ib[k.startRule]}var Vb=Rb();if(Vb!==b&&d===l.length)return Vb;Vb!==b&&d<l.length&&x({type:"end"});throw function(q,A,Z){return new P(P.buildMessage(q,A),q,A,Z)}(zb,$a<l.length?l.charAt($a):null,$a<l.length?F($a,$a+1):F($a,$a));}}})})({get exports(){return V},set exports(J){V=J}});let E=function(){function J(){}J.parse=function(P){return V.parse(P)};return e._createClass(J)}();h.WhereGrammar=E;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],
function(h){h.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};h.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(h){h.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,
supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n,R,M,F,x){function f(v,I,H,u){const S=u.x-H.x;u=u.y-H.y;I=Math.min(1,Math.max(0,((I.x-H.x)*S+(I.y-H.y)*u)/(S*S+u*u)));v.x=H.x+S*I;v.y=H.y+u*I}function p(v,I){return v?I?4:3:I?3:2}let G=function(){function v(H,u,S){this.items=H;this.query=u;this.geometryType=S.geometryType;this.hasM=S.hasM;this.hasZ=S.hasZ;this.fieldsIndex=S.fieldsIndex;this.objectIdField=S.objectIdField;this.spatialReference=S.spatialReference;this.featureAdapter=S.featureAdapter}var I=v.prototype;I.createQueryResponseForCount=
function(){const H=new l(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return H.countDistinctValues(this.items);const {groupByFieldsForStatistics:u,having:S,outStatistics:B}=this.query;if(!u?.length)return 1;const Q=new Map,C=new Map,y=new Set;for(const O of B){var {statisticType:K}=O;K="exceedslimit"!==K?O.onStatisticField:void 0;if(!C.has(K)){var da=[];for(const N of u){const r=this._getAttributeValues(H,N,Q);da.push(r)}C.set(K,this._calculateUniqueValues(da,H.returnDistinctValues))}K=
C.get(K);for(const N in K){const {data:r,items:t}=K[N];da=r.join(",");S&&!H.validateItems(t,S)||y.add(da)}}return y.size};I.createQueryResponse=async function(){let H;H=this.query.outStatistics?this.query.outStatistics.some(u=>"exceedslimit"===u.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const u=this.query.geometry;D.isValid(this.query.outSR)&&
!D.equals(u.spatialReference,this.query.outSR)?H.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...k.project(u,u.spatialReference,this.query.outSR)}):H.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...u})}return H};I.createSnappingResponse=function(H,u){const S=this.featureAdapter,B=p(this.hasZ,this.hasM),{point:Q,mode:C}=H,y="number"===typeof H.distance?H.distance:H.distance.x,K="number"===typeof H.distance?H.distance:H.distance.y,da={candidates:[]},
O="esriGeometryPolygon"===this.geometryType;u=this._getPointCreator(C,this.spatialReference,u);const N=new z(null,0),r=new z(null,0),t={x:0,y:0,z:0};for(const Da of this.items){var Y=S.getGeometry(Da);if(V.isNone(Y))continue;const {coords:Ca,lengths:La}=Y;N.coords=Ca;r.coords=Ca;if(H.types&e.SnappingTypes.EDGE){Y=0;for(var ja=0;ja<La.length;ja++){var ya=La[ja];for(var pa=0;pa<ya;pa++,Y+=B){var ta=N;ta.coordsIndex=Y;if(pa!==ya-1){const Qa=r;Qa.coordsIndex=Y+B;const Pa=t;f(t,Q,ta,Qa);var xa=(Q.x-Pa.x)/
y;const ab=(Q.y-Pa.y)/K;xa=xa*xa+ab*ab;1>=xa&&da.candidates.push(n.makeEdgeCandidate(S.getObjectId(Da),u(Pa),Math.sqrt(xa),u(ta),u(Qa)))}}}}if(H.types&e.SnappingTypes.VERTEX)for(Y=O?Ca.length-B:Ca.length,ja=0;ja<Y;ja+=B)ya=N,ya.coordsIndex=ja,pa=(Q.x-ya.x)/y,ta=(Q.y-ya.y)/K,pa=pa*pa+ta*ta,1>=pa&&da.candidates.push(n.makeVertexCandidate(S.getObjectId(Da),u(ya),Math.sqrt(pa)))}da.candidates.sort((Da,Ca)=>Da.distance-Ca.distance);return da};I._getPointCreator=function(H,u,S){const B=V.isSome(S)&&!D.equals(u,
S)?C=>k.project(C,u,S):C=>C,{hasZ:Q}=this;return"3d"===H?Q?({x:C,y,z:K})=>B({x:C,y,z:K}):({x:C,y})=>B({x:C,y,z:0}):({x:C,y})=>B({x:C,y})};I.createSummaryStatisticsResponse=async function(H){const {field:u,valueExpression:S,normalizationField:B,normalizationType:Q,normalizationTotal:C,minValue:y,maxValue:K,scale:da}=H;H=this.fieldsIndex.isDateField(u);var O=await this._getDataValues({field:u,valueExpression:S,normalizationField:B,normalizationType:Q,normalizationTotal:C,scale:da});const N=F.isNullCountSupported({normalizationType:Q,
normalizationField:B,minValue:y,maxValue:K}),r=this.fieldsIndex.get(u),t={value:.5,fieldType:r?.type};O=M.isStringField(r)?F.calculateStringStatistics({values:O,supportsNullCount:N,percentileParams:t}):F.calculateStatistics({values:O,minValue:y,maxValue:K,useSampleStdDev:!Q,supportsNullCount:N,percentileParams:t});return F.processSummaryStatisticsResult(O,H)};I.createUniqueValuesResponse=async function(H){const {field:u,valueExpression:S,domains:B,returnAllCodedValues:Q,scale:C}=H;var y=await this._getDataValues({field:u,
field2:H.field2,field3:H.field3,fieldDelimiter:H.fieldDelimiter,valueExpression:S,scale:C});y=F.calculateUniqueValuesCount(y);return F.createUVResult(y,B,Q,H.fieldDelimiter)};I.createClassBreaksResponse=async function(H){const {field:u,valueExpression:S,normalizationField:B,normalizationType:Q,normalizationTotal:C,classificationMethod:y,standardDeviationInterval:K,minValue:da,maxValue:O,numClasses:N,scale:r}=H;H=await this._getDataValues({field:u,valueExpression:S,normalizationField:B,normalizationType:Q,
normalizationTotal:C,scale:r});H=F.calculateClassBreaks(H,{field:u,normalizationField:B,normalizationType:Q,normalizationTotal:C,classificationMethod:y,standardDeviationInterval:K,minValue:da,maxValue:O,numClasses:N});return F.resolveCBResult(H,y)};I.createHistogramResponse=async function(H){const {field:u,valueExpression:S,normalizationField:B,normalizationType:Q,normalizationTotal:C,classificationMethod:y,standardDeviationInterval:K,minValue:da,maxValue:O,numBins:N,scale:r}=H;H=await this._getDataValues({field:u,
valueExpression:S,normalizationField:B,normalizationType:Q,normalizationTotal:C,scale:r});return F.calculateHistogram(H,{field:u,normalizationField:B,normalizationType:Q,normalizationTotal:C,classificationMethod:y,standardDeviationInterval:K,minValue:da,maxValue:O,numBins:N})};I._sortFeatures=function(H,u,S){if(1<H.length&&u&&u.length)for(const B of u.reverse()){u=B.split(" ");const Q=u[0],C=this.fieldsIndex.get(Q);u=u[1]?"desc"===u[1].toLowerCase():!1;const y=F.getAttributeComparator(C?.type,u);
H.sort((K,da)=>{K=S(K,Q,C);da=S(da,Q,C);return y(K,da)})}};I._createFeatureQueryResponse=function(H){const u=this.items,{geometryType:S,hasM:B,hasZ:Q,objectIdField:C,spatialReference:y}=this,{outFields:K,outSR:da,quantizationParameters:O,resultRecordCount:N,resultOffset:r,returnZ:t,returnM:Y}=H,ja=null!=N?u.length>(r||0)+N:!1,ya=K&&(K.includes("*")?[...this.fieldsIndex.fields]:K.map(pa=>this.fieldsIndex.get(pa)));return{exceededTransferLimit:ja,features:this._createFeatures(H,u),fields:ya,geometryType:S,
hasM:B&&Y,hasZ:Q&&t,objectIdFieldName:C,spatialReference:R.cleanFromGeometryEngine(da||y),transform:O&&P.toQuantizationTransform(O)||null}};I._createFeatures=function(H,u){const S=new l(H,this.featureAdapter,this.fieldsIndex),{hasM:B,hasZ:Q}=this,{orderByFields:C,quantizationParameters:y,returnGeometry:K,returnCentroid:da,maxAllowableOffset:O,resultOffset:N,resultRecordCount:r,returnZ:t=!1,returnM:Y=!1}=H,ja=Q&&t,ya=B&&Y;H=[];var pa=0;u=[...u];this._sortFeatures(u,C,(Da,Ca,La)=>S.getFieldValue(Da,
Ca,La));if(K||da){var ta=P.toQuantizationTransform(y)??void 0;if(K&&!da)for(var xa of u)H[pa++]={attributes:S.getAttributes(xa),geometry:R.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(xa),O,ta,ja,ya)};else if(!K&&da)for(const Da of u)H[pa++]={attributes:S.getAttributes(Da),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(Da,this),ta)};else for(const Da of u)H[pa++]={attributes:S.getAttributes(Da),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(Da,
this),ta),geometry:R.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Da),O,ta,ja,ya)}}else for(ta of u)(xa=S.getAttributes(ta))&&(H[pa++]={attributes:xa});pa=N||0;null!=r&&(H=H.slice(pa,Math.min(H.length,pa+r)));return H};I._createExceedsLimitQueryResponse=function(H){var u=!1;let S=Number.POSITIVE_INFINITY,B=Number.POSITIVE_INFINITY;u=Number.POSITIVE_INFINITY;for(const Q of H.outStatistics??[])if("exceedslimit"===Q.statisticType){S=null!=Q.maxPointCount?Q.maxPointCount:
Number.POSITIVE_INFINITY;B=null!=Q.maxRecordCount?Q.maxRecordCount:Number.POSITIVE_INFINITY;u=null!=Q.maxVertexCount?Q.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)u=this.items.length>S;else if(this.items.length>B)u=!0;else{H=p(this.hasZ,this.hasM);const Q=this.featureAdapter;u=this.items.reduce((C,y)=>{y=Q.getGeometry(y);return C+(V.isSome(y)&&y.coords.length||0)},0)/H>u}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",
sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(u)}}]}};I._createStatisticsQueryResponse=async function(H){var u={attributes:{}};const S=[],B=new Map,Q=new Map,C=new Map,y=new Map,K=new l(H,this.featureAdapter,this.fieldsIndex);var da=H.outStatistics;const {groupByFieldsForStatistics:O,having:N,orderByFields:r}=H;H=O&&O.length;const t=!!H,Y=t?O[0]:null,ja=t&&!this.fieldsIndex.get(Y);for(const Da of da??[]){const {outStatisticFieldName:Ca,statisticType:La}=
Da;da=Da;var ya="exceedslimit"!==La?Da.onStatisticField:void 0;const Qa="percentile_disc"===La||"percentile_cont"===La,Pa="EnvelopeAggregate"===La||"CentroidAggregate"===La||"ConvexHullAggregate"===La,ab=t&&1===H&&(ya===Y||ja)&&"count"===La;if(t){if(!C.has(ya)){var pa=[];for(const na of O){var ta=this._getAttributeValues(K,na,B);pa.push(ta)}C.set(ya,this._calculateUniqueValues(pa,Pa?!1:K.returnDistinctValues))}pa=C.get(ya);for(const na in pa){const {count:sa,data:Fa,items:c,itemPositions:m}=pa[na];
ta=Fa.join(",");if(!N||K.validateItems(c,N)){const ea=y.get(ta)||{attributes:{}};if(Pa){ea.aggregateGeometries||(ea.aggregateGeometries={});const {aggregateGeometries:ua,outStatisticFieldName:w}=await this._getAggregateGeometry(da,c);ea.aggregateGeometries[w]=ua}else{var xa=null;if(ab)xa=sa;else{const ua=this._getAttributeValues(K,ya,B);xa=m.map(w=>ua[w]);xa=Qa&&"statisticParameters"in da?this._getPercentileValue(da,xa):this._getStatisticValue(da,xa,null,K.returnDistinctValues)}ea.attributes[Ca]=
xa}let ka=0;O.forEach((ua,w)=>ea.attributes[this.fieldsIndex.get(ua)?ua:`EXPR_${++ka}`]=Fa[w]);y.set(ta,ea)}}}else if(Pa){u.aggregateGeometries||(u.aggregateGeometries={});const {aggregateGeometries:na,outStatisticFieldName:sa}=await this._getAggregateGeometry(da,this.items);u.aggregateGeometries[sa]=na}else ya=this._getAttributeValues(K,ya,B),u.attributes[Ca]=Qa&&"statisticParameters"in da?this._getPercentileValue(da,ya):this._getStatisticValue(da,ya,Q,K.returnDistinctValues);S.push({name:Ca,alias:Ca,
type:"esriFieldTypeDouble"})}u=t?Array.from(y.values()):[u];this._sortFeatures(u,r,(Da,Ca)=>Da.attributes[Ca]);return{fields:S,features:u}};I._getAggregateGeometry=async function(H,u){var S=await new Promise((r,t)=>h(["../../../geometry/geometryEngineJSON"],r,t));const {statisticType:B,outStatisticFieldName:Q}=H,{featureAdapter:C,spatialReference:y,geometryType:K,hasZ:da,hasM:O}=this;u=u.map(r=>R.getGeometry(K,da,O,C.getGeometry(r)));const N=S.convexHull(y,u,!0)[0];H={aggregateGeometries:null,outStatisticFieldName:null};
"EnvelopeAggregate"===B?(S=N?J.getPolygonExtent(N):J.getGeometryExtent(S.union(y,u)),H.aggregateGeometries={...S,spatialReference:y},H.outStatisticFieldName=Q||"extent"):"CentroidAggregate"===B?(S=N?E.polygonCentroid(N):E.extentCentroid(J.getGeometryExtent(S.union(y,u))),H.aggregateGeometries={x:S[0],y:S[1],spatialReference:y},H.outStatisticFieldName=Q||"centroid"):"ConvexHullAggregate"===B&&(H.aggregateGeometries=N,H.outStatisticFieldName=Q||"convexHull");return H};I._getStatisticValue=function(H,
u,S,B){const {onStatisticField:Q,statisticType:C}=H;H=null;H=S?.has(Q)?S.get(Q):M.isStringField(this.fieldsIndex.get(Q))?F.calculateStringStatistics({values:u,returnDistinct:B}):F.calculateStatistics({values:B?[...(new Set(u))]:u,minValue:null,maxValue:null,useSampleStdDev:!0});S&&S.set(Q,H);return H["var"===C?"variance":C]};I._getPercentileValue=function(H,u){const {onStatisticField:S,statisticParameters:B,statisticType:Q}=H,{value:C,orderBy:y}=B;H=this.fieldsIndex.get(S);return F.calculatePercentile(u,
{value:C,orderBy:y,fieldType:H?.type,isDiscrete:"percentile_disc"===Q})};I._getAttributeValues=function(H,u,S){if(S.has(u))return S.get(u);const B=this.fieldsIndex.get(u),Q=this.items.map(C=>H.getFieldValue(C,u,B));S.set(u,Q);return Q};I._getAttributeDataValues=function(H,u){return this.items.map(S=>H.getDataValue(S,{field:u.field,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,normalizationField:u.normalizationField,normalizationType:u.normalizationType,normalizationTotal:u.normalizationTotal}))};
I._getAttributeExpressionValues=async function(H,u,S){const {arcadeUtils:B}=await x.loadArcade();u=B.createFunction(u);S=S&&B.getViewInfo(S);return H.getExpressionValues(this.items,u,S,B)};I._calculateUniqueValues=function(H,u){const S={},B=this.items,Q=B.length;for(let C=0;C<Q;C++){const y=B[C],K=[];for(const O of H)K.push(O[C]);const da=K.join(",");null==S[da]?S[da]={count:1,data:K,items:[y],itemPositions:[C]}:(u||S[da].count++,S[da].items.push(y),S[da].itemPositions.push(C))}return S};I._getDataValues=
async function(H){const u=new l(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:S,field:B,normalizationField:Q,normalizationType:C,normalizationTotal:y,scale:K}=H,da=S?{viewingMode:"map",scale:K,spatialReference:this.query.outSR||this.spatialReference}:null;return S?this._getAttributeExpressionValues(u,S,da):this._getAttributeDataValues(u,{field:B,field2:H.field2,field3:H.field3,fieldDelimiter:H.fieldDelimiter,normalizationField:Q,normalizationType:C,normalizationTotal:y})};ca._createClass(v,
[{key:"size",get:function(){return this.items.length}}]);return v}();e.SnappingTypes=void 0;(function(v){v[v.NONE=0]="NONE";v[v.EDGE=1]="EDGE";v[v.VERTEX=2]="VERTEX"})(e.SnappingTypes||(e.SnappingTypes={}));let z=function(){function v(I,H){this.coords=I;this.coordsIndex=H}ca._createClass(v,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return v}();e.QueryEngineResult=
G;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(h,e,ca){function V({scale:C,translate:y},K){return Math.round((K-y[0])/C[0])}function E({scale:C,translate:y},K){return Math.round((y[1]-K)/C[1])}function J(C,y,K){const da=[];let O,N,r,t;for(let Y=0;Y<K.length;Y++){const ja=K[Y];if(0<Y){if(r=V(C,ja[0]),t=E(C,ja[1]),r!==O||t!==N)da.push(y(ja,r-O,t-N)),O=r,N=t}else O=V(C,
ja[0]),N=E(C,ja[1]),da.push(y(ja,O,N))}return 0<da.length?da:null}function P(C,y,K,da){return J(C,K?da?Q:B:da?B:S,y)}function D(C,y,K,da){const O=[];K=K?da?Q:B:da?B:S;for(da=0;da<y.length;da++){const N=J(C,K,y[da]);N&&3<=N.length&&O.push(N)}return O.length?O:null}function l(C,y,K,da){const O=[];K=K?da?Q:B:da?B:S;for(da=0;da<y.length;da++){const N=J(C,K,y[da]);N&&2<=N.length&&O.push(N)}return O.length?O:null}function k({scale:C,translate:y},K){return K*C[0]+y[0]}function n({scale:C,translate:y},K){return y[1]-
K*C[1]}function R(C,y,K){const da=Array(K.length);if(!K.length)return da;const [O,N]=C.scale;let r=k(C,K[0][0]);C=n(C,K[0][1]);da[0]=y(K[0],r,C);for(let t=1;t<K.length;t++){const Y=K[t];r+=Y[0]*O;C-=Y[1]*N;da[t]=y(Y,r,C)}return da}function M(C,y,K){const da=Array(K.length);for(let O=0;O<K.length;O++)da[O]=R(C,y,K[O]);return da}function F(C,y,K,da){return R(C,K?da?Q:B:da?B:S,y)}function x(C,y,K,da){return M(C,K?da?Q:B:da?B:S,y)}function f(C,y,K,da){return M(C,K?da?Q:B:da?B:S,y)}function p(C,y,K){let [da,
O]=K[0],N=Math.min(da,y[0]),r=Math.min(O,y[1]),t=Math.max(da,y[2]);y=Math.max(O,y[3]);for(let Y=1;Y<K.length;Y++){const [ja,ya]=K[Y];da+=ja;O+=ya;0>ja&&(N=Math.min(N,da));0<ja&&(t=Math.max(t,da));0>ya?r=Math.min(r,O):0<ya&&(y=Math.max(y,O))}C[0]=N;C[1]=r;C[2]=t;C[3]=y;return C}function G(C,y){if(!y.length)return null;C[0]=C[1]=Number.POSITIVE_INFINITY;C[2]=C[3]=Number.NEGATIVE_INFINITY;for(let K=0;K<y.length;K++)p(C,C,y[K]);return C}function z(C,y,K,da,O){y.xmin=V(C,K.xmin);y.ymin=E(C,K.ymin);y.xmax=
V(C,K.xmax);y.ymax=E(C,K.ymax);y!==K&&(da&&(y.zmin=K.zmin,y.zmax=K.zmax),O&&(y.mmin=K.mmin,y.mmax=K.mmax));return y}function v(C,y,K,da,O){y.points=P(C,K.points,da,O)??[];return y}function I(C,y,K,da,O){y.x=V(C,K.x);y.y=E(C,K.y);y!==K&&(da&&(y.z=K.z),O&&(y.m=K.m));return y}function H(C,y,K,da,O){C=D(C,K.rings,da,O);if(!C)return null;y.rings=C;return y}function u(C,y,K,da,O){C=l(C,K.paths,da,O);if(!C)return null;y.paths=C;return y}const S=(C,y,K)=>[y,K],B=(C,y,K)=>[y,K,C[2]],Q=(C,y,K)=>[y,K,C[2],C[3]];
h.equals=function(C,y){if(C===y||null==C&&null==y)return!0;if(null==C||null==y)return!1;let K,da,O,N;C&&"upperLeft"===C.originPosition?(K=C.translate[0],da=C.translate[1],C=C.scale[0]):(K=e.isSome(C.extent)?C.extent.xmin:0,da=e.isSome(C.extent)?C.extent.ymax:0,C=C.tolerance);y&&"upperLeft"===y.originPosition?(O=y.translate[0],N=y.translate[1],y=y.scale[0]):(O=e.isSome(y.extent)?y.extent.xmin:0,N=e.isSome(y.extent)?y.extent.ymax:0,y=y.tolerance);return K===O&&da===N&&C===y};h.getQuantizedBoundsCoordsArray=
p;h.getQuantizedBoundsCoordsArrayArray=G;h.getQuantizedBoundsPaths=function(C){return G([0,0,0,0],C)};h.getQuantizedBoundsPoints=function(C){const y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(y,y,C)};h.getQuantizedBoundsRings=function(C){return G([0,0,0,0],C)};h.quantizeBounds=function(C,y,K){y[0]=V(C,K[0]);y[3]=E(C,K[1]);y[2]=V(C,K[2]);y[1]=E(C,K[3]);return y};h.quantizeExtent=z;h.quantizeGeometry=function(C,y){return C&&y?ca.isPoint(y)?
I(C,{},y,!1,!1):ca.isPolyline(y)?u(C,{},y,!1,!1):ca.isPolygon(y)?H(C,{},y,!1,!1):ca.isMultipoint(y)?v(C,{},y,!1,!1):ca.isExtent(y)?z(C,{},y,!1,!1):null:null};h.quantizeMultipoint=v;h.quantizePaths=l;h.quantizePoint=I;h.quantizePoints=P;h.quantizePolygon=H;h.quantizePolyline=u;h.quantizeRings=D;h.quantizeX=V;h.quantizeY=E;h.toQuantizationTransform=function(C){return C?{originPosition:"upper-left"===C.originPosition?"upperLeft":"lower-left"===C.originPosition?"lowerLeft":C.originPosition,scale:C.tolerance?
[C.tolerance,C.tolerance]:[1,1],translate:e.isSome(C.extent)?[C.extent.xmin,C.extent.ymax]:[0,0]}:null};h.unquantizeBounds=function(C,y,K){return K?(y[0]=k(C,K[0]),y[1]=n(C,K[3]),y[2]=k(C,K[2]),y[3]=n(C,K[1]),y):[k(C,y[0]),n(C,y[3]),k(C,y[2]),n(C,y[1])]};h.unquantizeCoordsArray=R;h.unquantizeCoordsArrayArray=M;h.unquantizeExtent=function(C,y,K,da,O){y.xmin=k(C,K.xmin);y.ymin=n(C,K.ymin);y.xmax=k(C,K.xmax);y.ymax=n(C,K.ymax);y!==K&&(da&&(y.zmin=K.zmin,y.zmax=K.zmax),O&&(y.mmin=K.mmin,y.mmax=K.mmax));
return y};h.unquantizeMultipoint=function(C,y,K,da,O){e.isSome(K)&&(y.points=F(C,K.points,da,O));return y};h.unquantizePaths=x;h.unquantizePoint=function(C,y,K,da,O){if(e.isNone(K))return y;y.x=k(C,K.x);y.y=n(C,K.y);y!==K&&(da&&(y.z=K.z),O&&(y.m=K.m));return y};h.unquantizePoints=F;h.unquantizePolygon=function(C,y,K,da,O){e.isSome(K)&&(y.rings=f(C,K.rings,da,O));return y};h.unquantizePolyline=function(C,y,K,da,O){e.isSome(K)&&(y.paths=x(C,K.paths,da,O));return y};h.unquantizeRings=f;h.unquantizeX=
k;h.unquantizeY=n;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(h,e,ca,V){return function(){function E(P,D,l){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=P.returnDistinctValues??!1;this.fieldsIndex=l;this.featureAdapter=D;if((D=P.outFields)&&!D.includes("*")){this.outFields=
D;P=0;for(const n of D){var k=ca.getExpressionFromFieldName(n);k=(D=this.fieldsIndex.get(k))?null:ca.getWhereClause(k,l);D=D?D.name:ca.getAliasFromFieldName(n)||`FIELD_EXP_${P++}`;this._fieldDataCache.set(n,{alias:D,clause:k})}}}var J=E.prototype;J.countDistinctValues=function(P){if(!this.returnDistinctValues)return P.length;P.forEach(D=>this.getAttributes(D));return this._returnDistinctMap.size};J.getAttributes=function(P){P=this._processAttributesForOutFields(P);return this._processAttributesForDistinctValues(P)};
J.getFieldValue=function(P,D,l){const k=l?l.name:D;let n=null;this._fieldDataCache.has(k)?n=this._fieldDataCache.get(k)?.clause:l||(n=ca.getWhereClause(D,this.fieldsIndex),this._fieldDataCache.set(k,{alias:k,clause:n}));return l?this.featureAdapter.getAttribute(P,k):n?.calculateValue(P,this.featureAdapter)};J.getDataValue=function(P,D){const l=D.normalizationType,k=D.normalizationTotal;let n=D.field&&this.getFieldValue(P,D.field,this.fieldsIndex.get(D.field));D.field2&&(n=`${V.processNullValue(n)}${D.fieldDelimiter}${V.processNullValue(this.getFieldValue(P,
D.field2,this.fieldsIndex.get(D.field2)))}`,D.field3&&(n=`${n}${D.fieldDelimiter}${V.processNullValue(this.getFieldValue(P,D.field3,this.fieldsIndex.get(D.field3)))}`));l&&Number.isFinite(n)&&(P="field"===l&&D.normalizationField?this.getFieldValue(P,D.normalizationField,this.fieldsIndex.get(D.normalizationField)):null,n=V.getNormalizedValue(n,l,P,k));return n};J.getExpressionValue=function(P,D,l,k){P={attributes:this.featureAdapter.getAttributes(P),layer:{fields:this.fieldsIndex.fields}};l=k.createExecContext(P,
l);return k.executeFunction(D,l)};J.getExpressionValues=function(P,D,l,k){const n={fields:this.fieldsIndex.fields};return P.map(R=>{R={attributes:this.featureAdapter.getAttributes(R),layer:n};R=k.createExecContext(R,l);return k.executeFunction(D,R)})};J.validateItem=function(P,D){this._fieldDataCache.has(D)||this._fieldDataCache.set(D,{alias:D,clause:ca.getWhereClause(D,this.fieldsIndex)});return this._fieldDataCache.get(D)?.clause?.testFeature(P,this.featureAdapter)??!1};J.validateItems=function(P,
D){this._fieldDataCache.has(D)||this._fieldDataCache.set(D,{alias:D,clause:ca.getWhereClause(D,this.fieldsIndex)});return this._fieldDataCache.get(D)?.clause?.testSet(P,this.featureAdapter)??!1};J._processAttributesForOutFields=function(P){const D=this.outFields;if(!D||!D.length)return this.featureAdapter.getAttributes(P);const l={};for(const k of D){const {alias:n,clause:R}=this._fieldDataCache.get(k);l[n]=R?R.calculateValue(P,this.featureAdapter):this.featureAdapter.getAttribute(P,n)}return l};
J._processAttributesForDistinctValues=function(P){if(e.isNone(P)||!this.returnDistinctValues)return P;var D=this.outFields,l=[];if(D)for(const n of D){var {alias:k}=this._fieldDataCache.get(n);l.push(P[k])}else for(k in P)l.push(P[k]);D=`${(D||["*"]).join(",")}=${l.join(",")}`;l=this._returnDistinctMap.get(D)||0;this._returnDistinctMap.set(D,++l);return 1<l?null:P};return h._createClass(E)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(h,e,ca){function V(u){return null==u||"string"===typeof u&&!u?"\x3cNull\x3e":u}function E(u){const S=null!=u.minValue||null!=u.maxValue,B=!!u.sqlExpression&&u.supportsSQLExpression;return!(null!=u.normalizationField||null!=u.normalizationType)&&!S&&!B}function J(u){const {values:S,useSampleStdDev:B,supportsNullCount:Q}=u;var C=Number.POSITIVE_INFINITY;let y=Number.NEGATIVE_INFINITY,K=null,da=null;var O=null;let N=null,r=0;const t=null==u.minValue?-Infinity:u.minValue,Y=null==u.maxValue?Infinity:
u.maxValue;for(const ja of S)Number.isFinite(ja)?ja>=t&&ja<=Y&&(K=null===K?ja:K+ja,C=Math.min(C,ja),y=Math.max(y,ja),r++):"string"===typeof ja&&r++;if(r&&null!=K){da=K/r;O=0;for(const ja of S)Number.isFinite(ja)&&ja>=t&&ja<=Y&&(O+=(ja-da)**2);N=B?1<r?O/(r-1):0:0<r?O/r:0;O=Math.sqrt(N)}else y=C=null;C={avg:da,count:r,max:y,min:C,stddev:O,sum:K,variance:N};Q&&(C.nullcount=S.length-r);u.percentileParams&&(C.median=P(S,u.percentileParams));return C}function P(u,S){const {fieldType:B,value:Q,orderBy:C,
isDiscrete:y}=S,K=D(B,"desc"===C);u=[...u].filter(r=>null!=r).sort((r,t)=>K(r,t));if(0===u.length)return null;if(0>=Q)return u[0];if(1<=Q)return u[u.length-1];var da=(u.length-1)*Q,O=Math.floor(da);S=O+1;da%=1;O=u[O];const N=u[S];return S>=u.length||y||"string"===typeof O||"string"===typeof N?O:O*(1-da)+N*da}function D(u,S){const B=S?1:-1,Q=n(S),C=k(S);if(!u||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...I].includes(u))return(y,K)=>"number"===typeof y&&
"number"===typeof K?Q(y,K):"string"===typeof y&&"string"===typeof K?C(y,K):B;if("esriFieldTypeDate"===u)return(y,K)=>{y=(new Date(y)).getTime();K=(new Date(K)).getTime();return isNaN(y)||isNaN(K)?B:Q(y,K)};if(I.has(u))return(y,K)=>Q(y,K);if("esriFieldTypeString"===u)return(y,K)=>C(y,K);if("esriFieldTypeGUID"===u||"esriFieldTypeGlobalID"===u){const y=k(S);return(K,da)=>y(R(K),R(da))}return S?(y,K)=>1:(y,K)=>-1}function l(u,S,B){if(B){if(null==u)return null==S?0:1;if(null==S)return-1}else{if(null==
u)return null==S?0:-1;if(null==S)return 1}return null}function k(u){return u?(S,B)=>{const Q=l(S,B,!0);if(null!=Q)return Q;S=S.toUpperCase();B=B.toUpperCase();return S>B?-1:S<B?1:0}:(S,B)=>{const Q=l(S,B,!1);if(null!=Q)return Q;S=S.toUpperCase();B=B.toUpperCase();return S<B?-1:S>B?1:0}}function n(u){return u?(S,B)=>{const Q=l(S,B,!0);return null!=Q?Q:B-S}:(S,B)=>{const Q=l(S,B,!1);return null!=Q?Q:S-B}}function R(u){return u.substr(24,12)+u.substr(19,4)+u.substr(16,2)+u.substr(14,2)+u.substr(11,2)+
u.substr(9,2)+u.substr(6,2)+u.substr(4,2)+u.substr(2,2)+u.substr(0,2)}function M(u){return"coded-value"!==u?.type?[]:u.codedValues.map(S=>S.code)}function F(u,S){const B=f({field:S.field,normalizationType:S.normalizationType,normalizationField:S.normalizationField,classificationMethod:S.classificationMethod,standardDeviationInterval:S.standardDeviationInterval,breakCount:S.numClasses||5});u=x(u,S.minValue,S.maxValue);return ca.createGenerateRendererClassBreaks({definition:B,values:u,normalizationTotal:S.normalizationTotal})}
function x(u,S,B){const Q=null==S?-Infinity:S,C=null==B?Infinity:B;return u.filter(y=>Number.isFinite(y)&&y>=Q&&y<=C)}function f(u){const {breakCount:S,field:B,normalizationField:Q,normalizationType:C}=u,y=u.classificationMethod||"equal-interval";return new e({breakCount:S,classificationField:B,classificationMethod:y,normalizationField:"field"===C?Q:void 0,normalizationType:C,standardDeviationInterval:"standard-deviation"===y?u.standardDeviationInterval||1:void 0})}function p(u,S){const {field:B,
classificationMethod:Q,standardDeviationInterval:C,normalizationType:y,normalizationField:K,normalizationTotal:da,minValue:O,maxValue:N}=S,r=S.numBins||10;let t=S=null,Y=null;Q&&"equal-interval"!==Q||y?({classBreaks:u}=F(u,{field:B,normalizationType:y,normalizationField:K,normalizationTotal:da,classificationMethod:Q,standardDeviationInterval:C,minValue:O,maxValue:N,numClasses:r}),S=u[0].minValue,t=u[u.length-1].maxValue,Y=u.map(ja=>[ja.minValue,ja.maxValue])):(null!=O&&null!=N?(S=O,t=N):(u=J({values:u,
minValue:O,maxValue:N,useSampleStdDev:!y,supportsNullCount:E({normalizationType:y,normalizationField:K,minValue:O,maxValue:N})}),S=u.min??null,t=u.max??null),Y=z(S??0,t??0,r));return{min:S,max:t,intervals:Y}}function G(u,S){let B=-1;for(let Q=u.length-1;0<=Q;Q--)if(S>=u[Q][0]){B=Q;break}return B}function z(u,S,B){const Q=(S-u)/B,C=[];let y;for(let K=1;K<=B;K++)y=u+Q,y=Number(y.toFixed(16)),C.push([u,K===B?S:y]),u=y;return C}const v=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,I=new Set(["esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),H="min max avg stddev count sum variance nullcount median".split(" ");h.calculateClassBreaks=F;h.calculateHistogram=function(u,S){var B=p(u,S);const Q=B.intervals,C=B.min??0;B=B.max??0;const y=Q.map((K,da)=>({minValue:Q[da][0],maxValue:Q[da][1],count:0}));for(const K of u)null!=K&&K>=C&&K<=B&&(u=G(Q,K),-1<u&&y[u].count++);return{bins:y,minValue:C,maxValue:B,normalizationTotal:S.normalizationTotal}};h.calculatePercentile=P;h.calculateStatistics=
J;h.calculateStringStatistics=function(u){const S=u.returnDistinct?[...(new Set(u.values))]:u.values,B=S.filter(C=>null!=C).length,Q={count:B};u.supportsNullCount&&(Q.nullcount=S.length-B);u.percentileParams&&(Q.median=P(S,u.percentileParams));return Q};h.calculateUniqueValuesCount=function(u){const S={};for(let B of u){if(null==B||"string"===typeof B&&""===B.trim())B=null;null==S[B]?S[B]={count:1,data:B}:S[B].count++}return{count:S}};h.createClassBreaksDefinition=f;h.createUVResult=function(u,S,
B,Q){u=u.count;const C=[];if(B&&S){B=[];var y=M(S[0]);for(const K of y)if(S[1]){y=M(S[1]);for(const da of y)if(S[2]){y=M(S[2]);for(const O of y)B.push(`${V(K)}${Q}${V(da)}${Q}${V(O)}`)}else B.push(`${V(K)}${Q}${V(da)}`)}else B.push(K);for(const K of B)u.hasOwnProperty(K)||(u[K]={data:K,count:0})}for(const K in u)S=u[K],C.push({value:S.data,count:S.count,label:S.label});return{uniqueValueInfos:C}};h.getAttributeComparator=D;h.getEqualIntervalBins=z;h.getNormalizedValue=function(u,S,B,Q){let C=null;
switch(S){case "log":0!==u&&(C=Math.log(u)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(Q)&&0!==Q&&(C=u/Q*100);break;case "field":Number.isFinite(B)&&0!==B&&(C=u/B);break;case "natural-log":0<u&&(C=Math.log(u));break;case "square-root":0<u&&(C=u**.5)}return C};h.isNullCountSupported=E;h.processNullValue=V;h.processSummaryStatisticsResult=function(u,S){let B;for(B in u)H.includes(B)&&(Number.isFinite(u[B])||(u[B]=null));if(!S)return u;["avg","stddev","variance"].forEach(Q=>{null!=u[Q]&&
(u[Q]=Math.ceil(u[Q]))});return u};h.resolveCBResult=function(u,S){let B=u.classBreaks;const Q=B[0].minValue,C=B[B.length-1].maxValue,y="standard-deviation"===S;B=B.map(K=>{const da=K.label;K={minValue:K.minValue,maxValue:K.maxValue,label:da};if(y&&da){const O=da.match(v)?.map(N=>+N.trim())??[];2===O.length?(K.minStdDev=O[0],K.maxStdDev=O[1],0>O[0]&&0<O[1]&&(K.hasAvg=!0)):1===O.length&&(da.includes("\x3c")?(K.minStdDev=null,K.maxStdDev=O[0]):da.includes("\x3e")&&(K.minStdDev=O[0],K.maxStdDev=null))}return K});
return{minValue:Q,maxValue:C,classBreakInfos:B,normalizationTotal:u.normalizationTotal}};h.statisticTypes=H;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,e,ca,V,E,J,P,D,l,k){J=new ca.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ca=new ca.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});V=function(n){function R(F){F=M.call(this,F);F.type="class-breaks-definition";F.breakCount=
null;F.classificationField=null;F.classificationMethod=null;F.normalizationField=null;F.normalizationType=null;return F}h._inherits(R,n);var M=h._createSuper(R);h._createClass(R,[{key:"standardDeviationInterval",set:function(F){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",F)}},{key:"definedInterval",set:function(F){"defined-interval"===this.classificationMethod&&this._set("definedInterval",F)}}]);return R}(V.JSONSupport);e.__decorate([l.enumeration({classBreaksDef:"class-breaks-definition"})],
V.prototype,"type",void 0);e.__decorate([E.property({json:{write:!0}})],V.prototype,"breakCount",void 0);e.__decorate([E.property({json:{write:!0}})],V.prototype,"classificationField",void 0);e.__decorate([E.property({type:String,json:{read:J.read,write:J.write}})],V.prototype,"classificationMethod",void 0);e.__decorate([E.property({json:{write:!0}})],V.prototype,"normalizationField",void 0);e.__decorate([E.property({json:{read:ca.read,write:ca.write}})],V.prototype,"normalizationType",void 0);e.__decorate([E.property({value:null,
json:{write:!0}})],V.prototype,"standardDeviationInterval",null);e.__decorate([E.property({value:null,json:{write:!0}})],V.prototype,"definedInterval",null);return V=e.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],V)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(h,e,ca){h.enumeration=function(V,E={}){V=V instanceof e.JSONMap?V:new e.JSONMap(V,E);V={type:E?.ignoreUnknown??!0?V.apiValues:String,json:{type:V.jsonValues,
read:E?.readOnly?!1:{reader:V.read},write:{writer:V.write}}};void 0!==E?.readOnly&&(V.readOnly=!!E.readOnly);void 0!==E?.default&&(V.json.default=E.default);void 0!==E?.name&&(V.json.name=E.name);void 0!==E?.nonNullable&&(V.nonNullable=E.nonNullable);return ca.property(V)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(h,e){function ca(M){var F=M.definition;const {classificationMethod:x,
normalizationType:f,definedInterval:p}=F;F=F.breakCount??1;const G=[];var z=M.values;if(0===z.length)return[];z=z.sort((B,Q)=>B-Q);var v=z[0],I=z[z.length-1];if("equal-interval"===x)if(z.length>=F){z=(I-v)/F;M=v;for(var H=1;H<F;H++){var u=Number((v+H*z).toFixed(6));G.push({minValue:M,maxValue:u,label:V(M,u,f)});M=u}G.push({minValue:M,maxValue:I,label:V(M,I,f)})}else z.forEach(B=>{G.push({minValue:B,maxValue:B,label:V(B,B,f)})});else if("natural-breaks"===x){z=E(z);M=J(z.uniqueValues,M.valueFrequency||
z.valueFrequency,F);for(H=1;H<F;H++)z.uniqueValues.length>H&&(u=Number(z.uniqueValues[M[H]].toFixed(6)),G.push({minValue:v,maxValue:u,label:V(v,u,f)}),v=u);G.push({minValue:v,maxValue:I,label:V(v,I,f)})}else if("quantile"===x)if(z.length>=F&&v!==I){M=Math.ceil(z.length/F);H=0;for(u=1;u<F;u++){var S=M+H-1;S>z.length&&(S=z.length-1);0>S&&(S=0);G.push({minValue:v,maxValue:z[S],label:V(v,z[S],f)});v=z[S];H+=M;M=Math.ceil((z.length-H)/(F-u))}G.push({minValue:v,maxValue:I,label:V(v,I,f)})}else for(F=-1,
I=0;I<z.length;I++)v=z[I],v!==F&&(F=v,G.push({minValue:F,maxValue:v,label:V(F,v,f)}),F=v);else if("standard-deviation"===x)if(M=l(z),H=k(z,M),0===H)G.push({minValue:z[0],maxValue:z[0],label:V(z[0],z[0],f)});else{z=D(v,I,F,M,H)*H;H=0;for(u=F;1<=u;u--)S=Number((M-(u-.5)*z).toFixed(6)),G.push({minValue:v,maxValue:S,label:V(v,S,f)}),v=S,H++;u=Number((M+.5*z).toFixed(6));G.push({minValue:v,maxValue:u,label:V(v,u,f)});v=u;H++;for(S=1;S<=F;S++)u=H===2*F?I:Number((M+(S+.5)*z).toFixed(6)),G.push({minValue:v,
maxValue:u,label:V(v,u,f)}),v=u,H++}else if("defined-interval"===x){if(!p)return G;F=z[0];I=z[z.length-1];z=Math.ceil((I-F)/p);v=F;for(M=1;M<z;M++)H=Number((F+M*p).toFixed(6)),G.push({minValue:v,maxValue:H,label:V(v,H,f)}),v=H;G.push({minValue:v,maxValue:I,label:V(v,I,f)})}return G}function V(M,F,x){let f=null;return f=M===F?x&&"percent-of-total"===x?M+"%":M.toString():x&&"percent-of-total"===x?M+"% - "+F+"%":M+" - "+F}function E(M){const F=[],x=[];let f=Number.MIN_VALUE,p=1,G=-1;for(let z=0;z<M.length;z++){const v=
M[z];v===f?(p++,x[G]=p):null!==v&&(F.push(v),f=v,p=1,x.push(p),G++)}return{uniqueValues:F,valueFrequency:x}}function J(M,F,x){var f=M.length;const p=[];x>f&&(x=f);for(var G=0;G<x;G++)p.push(Math.round(G*f/x-1));p.push(f-1);G=P(p,M,F,x);f=G.mean;G=G.sdcm;var z=x,v=0,I=0;let H=0,u=0,S=!0;for(let Q=0;2>Q&&S;Q++){0===Q&&(S=!1);for(var B=0;B<z-1;B++)for(;p[B+1]+1!==p[B+2];)if(p[B+1]+=1,v=n(B,p,M,F),H=v.sbMean,v=v.sbSdcm,I=n(B+1,p,M,F),u=I.sbMean,I=I.sbSdcm,v+I<G[B]+G[B+1])G[B]=v,G[B+1]=I,f[B]=H,f[B+1]=
u,S=!0;else{--p[B+1];break}for(B=z-1;0<B;B--)for(;p[B]!==p[B-1]+1;)if(--p[B],v=n(B-1,p,M,F),H=v.sbMean,v=v.sbSdcm,I=n(B,p,M,F),u=I.sbMean,I=I.sbSdcm,v+I<G[B-1]+G[B])G[B-1]=v,G[B]=I,f[B-1]=H,f[B]=u,S=!0;else{p[B]+=1;break}}S&&(G=P(p,M,F,x));return p}function P(M,F,x,f){let p=[];var G=[],z=[];let v=0;const I=[],H=[];for(var u=0;u<f;u++){var S=n(u,M,F,x);I.push(S.sbMean);H.push(S.sbSdcm);v+=H[u]}S=v;for(u=!0;u||v<S;){u=!1;p=[];for(G=0;G<f;G++)p.push(M[G]);for(z=0;z<f;z++)for(S=M[z]+1;S<=M[z+1];S++)if(G=
F[S],0<z&&S!==M[z+1]&&Math.abs(G-I[z])>Math.abs(G-I[z-1]))M[z]=S;else if(z<f-1&&M[z]!==S-1&&Math.abs(G-I[z])>Math.abs(G-I[z+1])){M[z+1]=S-1;break}S=v;v=0;G=[];z=[];for(let B=0;B<f;B++){G.push(I[B]);z.push(H[B]);const Q=n(B,M,F,x);I[B]=Q.sbMean;H[B]=Q.sbSdcm;v+=H[B]}}if(v>S){for(F=0;F<f;F++)M[F]=p[F],I[F]=G[F],H[F]=z[F];v=S}return{mean:I,sdcm:H}}function D(M,F,x,f,p){M=Math.max(f-M,F-f)/p/x;return 1<=M?1:.5<=M?.5:.25}function l(M){let F=0;for(let x=0;x<M.length;x++)F+=M[x];return F/=M.length}function k(M,
F){let x=0;for(let f=0;f<M.length;f++){const p=M[f];x+=(p-F)*(p-F)}x/=M.length;return Math.sqrt(x)}function n(M,F,x,f){var p=0,G=0;for(var z=F[M]+1;z<=F[M+1];z++){const v=f[z];p+=x[z]*v;G+=v}0>=G&&R.warn("Exception in Natural Breaks calculation");p/=G;G=0;for(z=F[M]+1;z<=F[M+1];z++)G+=f[z]*(x[z]-p)**2;return{sbMean:p,sbSdcm:G}}const R=e.getLogger("esri.rest.support.generateRendererUtils");h.createGenerateRendererClassBreaks=function(M){const {normalizationTotal:F}=M;return{classBreaks:ca(M),normalizationTotal:F}};
h.createGenerateRendererUniqueValues=function(M){M=E(M);const F=[],x=M.uniqueValues.length;for(let f=0;f<x;f++){const p=M.uniqueValues[f];F.push({value:p,count:M.valueFrequency[f],label:p.toString()})}return{uniqueValues:F}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(h){h.makeEdgeCandidate=function(e,ca,V,E,J,P=!1){return{objectId:e,target:ca,distance:V,type:"edge",start:E,end:J,draped:P}};h.makeVertexCandidate=
function(e,ca,V){return{objectId:e,target:ca,distance:V,type:"vertex"}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(h,e,ca,V,E,J,P){function D(na,sa,Fa){if(na)for(const c of na)(na=(na=E.getDeepValue(c,sa))&&"function"!==typeof na&&Fa.get(na))&&E.setDeepValue(c,na.name,sa)}function l(na,sa){if(!na||
!sa)return[];ta.clear();k(ta,na,sa);return Array.from(ta).sort()}function k(na,sa,Fa){if(Fa)if(sa?.fields?.length)if(Fa.includes("*"))for(const {name:c}of sa.fields)na.add(c);else for(const c of Fa)n(na,sa,c);else if(Fa.includes("*"))na.clear(),na.add("*");else for(const c of Fa)null!=c&&na.add(c)}function n(na,sa,Fa){"string"===typeof Fa&&(sa?(sa=sa.get(Fa))&&na.add(sa.name):na.add(Fa))}async function R(na,sa,Fa){if(Fa){var {arcadeUtils:c}=await P.loadArcade();Fa=c.extractFieldNames(Fa,sa?.fields?.map(m=>
m.name));for(const m of Fa)n(na,sa,m)}}async function M(na,sa,Fa){if(Fa&&"1\x3d1"!==Fa){const c=(await new Promise((m,ea)=>h(["../../core/sql/WhereClause"],m,ea))).WhereClause.create(Fa,sa);if(!c.isStandardized)throw new ca("fieldUtils:collectFilterFields","Where clause is not standardized",{where:Fa});k(na,sa,c.fieldNames)}}function F(na,sa){for(const Fa of na)if(Fa&&Fa.valueType&&Fa.valueType===sa)return Fa.name;return null}async function x(na,sa){if(sa){var Fa=sa.elevationInfo?.featureExpressionInfo;
if(Fa)return Fa.collectRequiredFields(na,sa.fieldsIndex)}}async function f(na,sa,Fa){const c=[];Fa?.expressionInfos&&c.push(...Fa.expressionInfos.map(m=>R(na,sa.fieldsIndex,m.expression)));Fa=Fa?.content;if(Array.isArray(Fa))for(const m of Fa)"expression"===m.type&&m.expressionInfo&&c.push(R(na,sa.fieldsIndex,m.expressionInfo.expression));await Promise.all(c)}async function p(na,sa,Fa){sa&&Fa&&(Fa.valueExpression?await R(na,sa.fieldsIndex,Fa.valueExpression):Fa.field&&n(na,sa.fieldsIndex,Fa.field))}
async function G(na,sa){const {labelingInfo:Fa,fieldsIndex:c}=sa;Fa&&Fa.length&&await Promise.all(Fa.map(m=>z(na,c,m)))}async function z(na,sa,Fa){if(Fa){var c=Fa.getLabelExpression();Fa=Fa.where;"arcade"===c.type?await R(na,sa,c.expression):(c=c.expression.match(/{[^}]*}/g))&&c.forEach(m=>{n(na,sa,m.slice(1,-1))});await M(na,sa,Fa)}}function v(na){return"number"===typeof na&&!isNaN(na)&&isFinite(na)}function I(na){return null===na||v(na)}function H(na){return null===na||xa(na)}function u(na){return null!=
na&&"string"===typeof na}function S(na){return null===na||u(na)}function B(){return!0}function Q(na,sa){let Fa;switch(na.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Fa=na.nullable?H:xa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Fa=na.nullable?I:v;break;case "string":case "esriFieldTypeString":Fa=na.nullable?S:u;break;default:Fa=
B}return 1===arguments.length?Fa:Fa(sa)}function C(na){return null!=na&&Ca.has(na.type)}function y(na,sa){return null==na||na.nullable&&null===sa?null:C(na)&&!K(na.type,Number(sa))?e.NumericRangeValidationError.OUT_OF_RANGE:Q(na,sa)?na.domain?J.validateDomainValue(na.domain,sa):null:e.TypeValidationError.INVALID_TYPE}function K(na,sa){na="string"===typeof na?da(na):na;if(!na)return!1;const Fa=na.min,c=na.max;return na.isInteger?xa(sa)&&sa>=Fa&&sa<=c:sa>=Fa&&sa<=c}function da(na){switch(na){case "esriFieldTypeSmallInteger":case "small-integer":return La;
case "esriFieldTypeInteger":case "integer":return Qa;case "esriFieldTypeSingle":case "single":return Pa;case "esriFieldTypeDouble":case "double":return ab}}function O(na,sa,Fa){if(!sa||!sa.attributes||!na){if(V.isSome(Fa))for(var c of na??[])Fa.add(c);return!0}sa=sa.attributes;c=!1;for(const m of na)if(!(m in sa))if(c=!0,V.isSome(Fa))Fa.add(m);else break;return c}const N=/^([0-9])/,r=/[^a-z0-9_\u0080-\uffff]/gi,t=/_{2,}/g,Y=/^_/,ja=/_$/,ya="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
pa=["field","normalizationField"],ta=new Set,xa=(()=>"isInteger"in Number?Number.isInteger:na=>"number"===typeof na&&isFinite(na)&&Math.floor(na)===na)(),Da=["integer","small-integer","single","double"],Ca=new Set([...Da,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=
void 0;(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const La={min:-32768,max:32767,isInteger:!0},Qa={min:-2147483648,max:2147483647,isInteger:!0},Pa={min:-3.4E38,max:1.2E38,isInteger:!1},ab={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=R;e.collectElevationFields=x;e.collectFeatureReductionFields=async function(na,sa,Fa){if(sa&&Fa&&"fields"in Fa){var c=[];c.push(f(na,sa,Fa.popupTemplate));Fa.fields&&c.push(...Fa.fields.map(async m=>
{m.onStatisticExpression?R(na,sa.fieldsIndex,m.onStatisticExpression.expression):na.add(m.onStatisticField)}));await Promise.all(c)}};e.collectField=n;e.collectFields=k;e.collectFilterFields=async function(na,sa,Fa){sa&&(sa.timeInfo&&V.isSome(Fa)&&Fa.timeExtent&&k(na,sa.fieldsIndex,[sa.timeInfo.startField,sa.timeInfo.endField]),sa.floorInfo&&k(na,sa.fieldsIndex,[sa.floorInfo.floorField]),V.isSome(Fa)&&V.isSome(Fa.where)&&await M(na,sa.fieldsIndex,Fa.where))};e.collectLabelingFields=G;e.collectOrderByInfos=
async function(na,sa,Fa){sa&&Fa&&await Promise.all(Fa.map(c=>p(na,sa,c)))};e.collectPopupTemplateFields=f;e.doubleRange=ab;e.featureHasFields=function(na,sa){return!O(na,sa,null)};e.fixFields=l;e.fixRendererFields=function(na,sa){if(null!=na&&null!=sa)for(const Fa of Array.isArray(na)?na:[na])if(D(ya,Fa,sa),"visualVariables"in Fa&&Fa.visualVariables)for(const c of Fa.visualVariables)D(pa,c,sa)};e.fixTimeInfoFields=function(na,sa){if(null!=na&&sa?.fields?.length)if("startField"in na){var Fa=sa.get(na.startField);
sa=sa.get(na.endField);na.startField=Fa?.name??null;na.endField=sa?.name??null}else Fa=sa.get(na.startTimeField),sa=sa.get(na.endTimeField),na.startTimeField=Fa?.name??null,na.endTimeField=sa?.name??null};e.getDisplayFieldName=function({displayField:na,fields:sa}){if(na)return na;if(!sa||!sa.length)return null;if(!(na=F(sa,"name-or-title")||F(sa,"unique-identifier")||F(sa,"type-or-category")))a:{for(const Fa of sa)if(Fa&&Fa.name&&(sa=Fa.name.toLowerCase(),sa.includes("name")||sa.includes("title"))){na=
Fa.name;break a}na=null}return na};e.getElevationFields=async function(na){if(!na)return[];const sa=new Set;await x(sa,na);return Array.from(sa).sort()};e.getExpressionFields=async function(na,sa){const Fa=new Set;for(const c of sa)await R(Fa,na.fieldsIndex,c);return Array.from(Fa).sort()};e.getFeatureEditFields=function(na){if(!na)return[];const sa="editFieldsInfo"in na&&na.editFieldsInfo;return sa?l(na.fieldsIndex,[sa&&sa.creatorField,sa&&sa.creationDateField,sa&&sa.editorField,sa&&sa.editDateField]):
[]};e.getFeatureGeometryFields=function(na){if(!na)return[];const sa=na.geometryFieldsInfo;return sa?l(na.fieldsIndex,[sa.shapeAreaField,sa.shapeLengthField]):[]};e.getFieldDefaultValue=function(na){const sa=na.defaultValue;if(void 0!==sa&&Q(na,sa))return sa;if(na.nullable)return null};e.getFieldRange=function(na){const sa=J.getDomainRange(na.domain);if(sa)return sa;if(C(na))return da(na.type)};e.getLabelingFields=async function(na){if(!na)return[];const sa=new Set;await G(sa,na);return Array.from(sa).sort()};
e.getNumericTypeForValue=function(na){if(!v(na))return null;if(xa(na)){if(na>=La.min&&na<=La.max)return"esriFieldTypeSmallInteger";if(na>=Qa.min&&na<=Qa.max)return"esriFieldTypeInteger"}return na>=Pa.min&&na<=Pa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=async function(na){if(!na)return[];const sa="timeInfo"in na&&na.timeInfo;return sa?l(na.fieldsIndex,[na.trackIdField,sa.startField,sa.endField]):[]};e.integerRange=Qa;e.isDateField=function(na){return null!=na&&("date"===na.type||
"esriFieldTypeDate"===na.type)};e.isNumberInRange=K;e.isNumericField=C;e.isRasterPixelValueField=function(na){return na?["raster.itempixelvalue","raster.servicepixelvalue"].some(sa=>na.toLowerCase().startsWith(sa)):!1};e.isStringField=function(na){return null!=na&&("string"===na.type||"esriFieldTypeString"===na.type)};e.isValidFieldValue=function(na,sa){return null===y(na,sa)};e.isValueMatchingFieldType=Q;e.normalizeFieldName=function(na){return null==na?null:na.trim().replace(r,"_").replace(t,"_").replace(Y,
"").replace(ja,"").replace(N,"F$1")||null};e.numericTypes=Da;e.packFields=function(na,sa,Fa=1){if(!sa||!na)return[];if(sa.includes("*"))return["*"];sa=l(na,sa);return sa.length/na.fields.length>=Fa?["*"]:sa};e.populateMissingFields=O;e.rendererFields=ya;e.sanitizeNullFieldValue=function(na){return null==na||"number"===typeof na&&isNaN(na)?null:na};e.singleRange=Pa;e.smallIntegerRange=La;e.unpackFieldNames=function(na,sa){return V.isNone(sa)||V.isNone(na)?[]:sa.includes("*")?(na.fields??[]).map(Fa=>
Fa.name):sa};e.validateFieldValue=y;e.validationErrorToString=function(na,sa,Fa){switch(na){case J.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Fa} is not in the coded domain - field: ${sa.name}, domain: ${JSON.stringify(sa.domain)}`;case J.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Fa} is out of the range of valid values - field: ${sa.name}, domain: ${JSON.stringify(sa.domain)}`;case e.TypeValidationError.INVALID_TYPE:return`Value ${Fa} is not a valid value for the field type - field: ${sa.name}, type: ${sa.type}, nullable: ${sa.nullable}`;
case e.NumericRangeValidationError.OUT_OF_RANGE:const {min:c,max:m}=da(sa.type);return`Value ${Fa} is out of range for the number type - field: ${sa.name}, type: ${sa.type}, value range is ${c} to ${m}`}};e.visualVariableFields=pa;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(h){h.DomainValidationError=void 0;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";e.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(h.DomainValidationError||(h.DomainValidationError={}));h.getDomainRange=function(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}};h.validateDomainValue=function(e,ca){switch(e.type){case "range":const V="range"in e?e.range[0]:e.minValue;e="range"in e?e.range[1]:e.maxValue;if(null!=V&&+ca<V||null!=e&&+ca>e)return h.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==
e.codedValues||e.codedValues.every(E=>null==E||E.code!==ca))return h.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==e.codedValues||e.codedValues.every(E=>null==E||E.code!==ca))return h.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(h,e,ca,V,E,J,P,D){function l(){n||(n=(async()=>{const M=await new Promise((F,x)=>h(["./arcadeUtils"],F,x));return{arcade:M.arcade,arcadeUtils:M,Dictionary:M.Dictionary,Feature:M.arcadeFeature}})());return n}const k=J.getLogger("esri.support.arcadeOnDemand");let n;V=(M,F,x)=>R.create(M,F,x,null,["$feature","$view"]);let R=function(){function M(x,f,p,G,z,v,I){this.script=x;this.evaluate=G;this.fields=Array.isArray(v)?v:v.fields;this._syntaxTree=p;this._arcade=f;this._arcadeFeature=z;this._spatialReference=
I;this._referencesGeometry=f.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}M.create=async function(x,f,p,G,z,v){const {arcade:I,Feature:H,Dictionary:u}=await l(),S=D.fromJSON(f);let B;try{B=I.parseScript(x,v)}catch(O){return k.error(new E("arcade-bad-expression","Failed to parse arcade script",{script:x,error:O})),null}z=z.reduce((O,N)=>({...O,[N]:null}),{});let Q=null;P.isSome(G)&&(Q=new u(G),Q.immutable=!0,z.$config=null);v=
(G=I.scriptUsesGeometryEngine(B))&&I.enableGeometrySupport();const C=I.scriptUsesFeatureSet(B)&&I.enableFeatureSetSupport(),y=(f=I.scriptIsAsync(B))&&I.enableAsyncSupport();z={vars:z,spatialReference:S,useAsync:!!y};await Promise.all([v,C,y]);v=new Set;await I.loadDependentModules(v,B,null,f,G);const K=new u;K.immutable=!1;K.setField("scale",0);const da=I.compileScript(B,z);return new M(x,I,B,O=>{"$view"in O&&O.$view&&(K.setField("scale","object"===typeof O.$view?O.$view.scale:void 0),O.$view=K);
Q&&(O.$config=Q);return da({vars:O,spatialReference:S})},new H,p,S)};var F=M.prototype;F.repurposeFeature=function(x){x.geometry&&!x.geometry.spatialReference&&(x.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(x.geometry,x.attributes,{fields:this.fields});return this._arcadeFeature};F.referencesGeometry=function(){return this._referencesGeometry};F.referencesScale=function(){return this._referencesScale};return ca._createClass(M)}();e.ArcadeExpression=
R;e.createDictionaryExpression=(M,F,x,f)=>R.create(M,F,x,f,["$feature","$view"]);e.createLabelExpression=(M,F,x)=>R.create(M,F,x,null,["$feature"]);e.createRendererExpression=V;e.createVVExpression=V;e.loadArcade=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n,R){function M(){return new Promise((G,z)=>h(["../../../geometry/geometryEngineJSON"],G,z))}const F={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var x={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},f={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},p={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.canQueryWithRBush=
function(G){if(J.isExtent(G))return!0;if(J.isPolygon(G)){for(const z of G.rings)if(5!==z.length||z[0][0]!==z[1][0]||z[0][0]!==z[4][0]||z[2][0]!==z[3][0]||z[0][1]!==z[3][1]||z[0][1]!==z[4][1]||z[1][1]!==z[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(G,z,v){const {spatialRel:I,geometry:H}=G;if(H){if(null==I||!0!==x[I])throw new ca("feature-store:unsupported-query","Unsupported query spatial relationship",{query:G});if(P.isValid(H.spatialReference)&&P.isValid(v)){if(null==
H||!0!==f[J.getJsonType(H)])throw new ca("feature-store:unsupported-query","Unsupported query geometry type",{query:G});if(null==z||!0!==p[z])throw new ca("feature-store:unsupported-query","Unsupported layer geometry type",{query:G});if(G.outSR)return n.checkProjectionSupport(G.geometry&&G.geometry.spatialReference,G.outSR)}}};e.getSpatialQueryOperator=function(G,z,v,I,H){if(J.isPolygon(z)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G)){const u=l.convertFromPolygon(new k,
z,!1,!1);return Promise.resolve(S=>D.polygonContainsPoint(u,!1,!1,S))}if(J.isPolygon(z)&&"esriGeometryMultipoint"===v){const u=l.convertFromPolygon(new k,z,!1,!1);if("esriSpatialRelContains"===G)return Promise.resolve(S=>D.polygonContainsMultipoint(u,!1,!1,S,I,H))}if(J.isExtent(z)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G))return Promise.resolve(u=>V.extentContainsPoint(z,R.getGeometry(v,I,H,u)));if(J.isExtent(z)&&"esriGeometryMultipoint"===v&&"esriSpatialRelContains"===
G)return Promise.resolve(u=>V.extentContainsMultipoint(z,R.getGeometry(v,I,H,u)));if(J.isExtent(z)&&"esriSpatialRelIntersects"===G){const u=E.getExtentIntersector(v);return Promise.resolve(S=>u(z,R.getGeometry(v,I,H,S)))}return M().then(u=>{const S=u[F[G]].bind(null,z.spatialReference,z);return B=>S(R.getGeometry(v,I,H,B))})};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(h,e){h.extentIntersectsExtent=
e.extentIntersectsExtent;h.extentIntersectsMultipoint=e.extentIntersectsMultipoint;h.extentIntersectsPoint=e.extentIntersectsPoint;h.extentIntersectsPolygon=e.extentIntersectsPolygon;h.extentIntersectsPolyline=e.extentIntersectsPolyline;h.extentIntersectsRings=e.extentIntersectsRings;h.getFeatureExtentIntersector=e.getFeatureExtentIntersector;h.isSelfIntersecting=e.isSelfIntersecting;h.segmentIntersects=e.segmentIntersects;h.getExtentIntersector=function(ca){return"mesh"===ca?e.extentIntersectsExtent:
e.getFeatureExtentIntersector(ca)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(h){function e(ca,V,E,J,P){if(!ca)return!1;V=V?E?4:3:E?3:2;const {coords:D,lengths:l}=ca;E=!1;ca=0;for(const n of l){var k=ca;for(let R=ca,M=ca+n*V;R<M;R+=V){k=R+V;k===M&&(k=ca);const F=D[R],x=D[R+1],f=D[k];k=D[k+1];(x<P&&k>=P||k<P&&x>=P)&&F+(P-x)/(k-x)*(f-F)<J&&(E=!E)}ca+=n*V}return E}h.polygonContainsCoords=e;h.polygonContainsMultipoint=
function(ca,V,E,J,P,D){P=P?D?4:3:D?3:2;const {coords:l,lengths:k}=J;if(!k)return!1;for(let n=0,R=0;n<k.length;n++,R+=P)if(!e(ca,V,E,l[R],l[R+1]))return!1;return!0};h.polygonContainsPoint=function(ca,V,E,J){return e(ca,V,E,J.coords[0],J.coords[1])};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(h){function e(E,J,P,D,l){if(null!=D&&null!=l)return k=>{const n=E.getAttribute(k,J);k=E.getAttribute(k,P);return(null==
n||n<=l)&&(null==k||k>=D)};if(null!=D)return k=>{k=E.getAttribute(k,P);return null==k||k>=D};if(null!=l)return k=>{k=E.getAttribute(k,J);return null==k||k<=l}}function ca(E,J,P,D){if(null!=P&&null!=D&&P===D)return l=>E.getAttribute(l,J)===P;if(null!=P&&null!=D)return l=>{l=E.getAttribute(l,J);return l>=P&&l<=D};if(null!=P)return l=>E.getAttribute(l,J)>=P;if(null!=D)return l=>E.getAttribute(l,J)<=D}function V(){return()=>!1}h.getTimeExtent=async function(E,J){if(!E)return null;const P=J.featureAdapter,
{startTimeField:D,endTimeField:l}=E;let k=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;if(D&&l)await J.forEach(R=>{const M=P.getAttribute(R,D);R=P.getAttribute(R,l);null==M||isNaN(M)||(k=Math.min(k,M));null==R||isNaN(R)||(n=Math.max(n,R))});else{const R=D||l;await J.forEach(M=>{M=P.getAttribute(M,R);null==M||isNaN(M)||(k=Math.min(k,M),n=Math.max(n,M))})}return{start:k,end:n}};h.getTimeOperator=function(E,J,P){if(!J||!E)return null;const {startTimeField:D,endTimeField:l}=E;if(!D&&!l)return null;
const {start:k,end:n}=J;return null===k&&null===n?null:void 0===k&&void 0===n?V():D&&l?e(P,D,l,k,n):ca(P,D||l,k,n)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(h,e){function ca(E){return"oid"===E.type||"esriFieldTypeOID"===E.type}function V(E){return"global-id"===E.type||"esriFieldTypeGlobalID"===E.type}return function(){function E(P=[]){this.fields=[];this._fieldsMap=
new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(P){this.fields=P;var D=[];for(const l of P){P=l?.name;const k=e.normalizeFieldName(l?.name)?.toLowerCase()??"";if(P&&k){const n=P.trim().toLowerCase();this._fieldsMap.set(P,l);this._fieldsMap.set(n,l);this._normalizedFieldsMap.set(k,l);D.push(n);"date"===l.type||"esriFieldTypeDate"===l.type?(this.dateFields.push(l),this._dateFieldsSet.add(l)):
e.isNumericField(l)&&(this._numericFieldsSet.add(l),this.numericFields.push(l));ca(l)||V(l)||(l.editable=null==l.editable||!!l.editable,l.nullable=null==l.nullable||!!l.nullable)}}D.sort();this.uid=D.join(",")}}var J=E.prototype;J.destroy=function(){this._fieldsMap.clear()};J.has=function(P){return null!=this.get(P)};J.get=function(P){if(P){var D=this._fieldsMap.get(P);if(D)return D;(D=this._fieldsMap.get(P.trim().toLowerCase())??this._normalizedFieldsMap.get(e.normalizeFieldName(P)?.toLowerCase()??
""))&&this._fieldsMap.set(P,D);return D}};J.isDateField=function(P){return this._dateFieldsSet.has(this.get(P))};J.isNumericField=function(P){return this._numericFieldsSet.has(this.get(P))};J.normalizeFieldName=function(P){if(P=this.get(P))return P.name??void 0};h._createClass(E,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const P of this.fields)ca(P)||V(P)||P.nullable||void 0!==e.getFieldDefaultValue(P)||this._requiredFields.push(P)}return this._requiredFields}}]);
return E}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),function(h,e,ca,V,E,J,P,D,l,k,n,R,M,F,x){function f(Q){return p.has(Q)?p.get(Q):
"number"===typeof Q?Q:1}h.Task=void 0;(function(Q){Q[Q.YIELD=1]="YIELD"})(h.Task||(h.Task={}));h.TaskPriority=void 0;(function(Q){Q.RESOURCE_CONTROLLER_IMMEDIATE="immediate";Q.RESOURCE_CONTROLLER="schedule";Q.SLIDE="slide";Q.STREAM_DATA_LOADER="stream loader";Q.ELEVATION_QUERY="elevation query";Q.TERRAIN_SURFACE="terrain";Q.SURFACE_GEOMETRY_UPDATES="surface geometry updates";Q.LOD_RENDERER="LoD renderer";Q.GRAPHICS_CORE="Graphics3D";Q.I3S_CONTROLLER="I3S";Q.POINT_CLOUD_LAYER="point cloud";Q.FEATURE_TILE_FETCHER=
"feature fetcher";Q.OVERLAY="overlay";Q.STAGE="stage";Q.GRAPHICS_DECONFLICTOR="graphics deconflictor";Q.FILTER_VISIBILITY="Graphics3D filter visibility";Q.SCALE_VISIBILITY="Graphics3D scale visibility";Q.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";Q.POINT_OF_INTEREST_FREQUENT="POI frequent";Q.POINT_OF_INTEREST_INFREQUENT="POI infrequent";Q.LABELER="labeler";Q.FEATURE_QUERY_ENGINE="feature query";Q.FEATURE_TILE_TREE="feature tile tree";Q.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";Q.ELEVATION_ALIGNMENT=
"elevation alignment";Q.TEXT_TEXTURE_ATLAS="text texture atlas";Q.TEXTURE_UNLOAD="texture unload";Q.LINE_OF_SIGHT_TOOL="line of sight tool";Q.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";Q.ELEVATION_PROFILE="elevation profile";Q.SNAPPING="snapping";Q.SHADOW_ACCUMULATOR="shadow accumulator";Q.CLOUDS_GENERATOR="clouds generator";Q[Q.TEST_PRIO=1]="TEST_PRIO"})(h.TaskPriority||(h.TaskPriority={}));const p=new Map([[h.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[h.TaskPriority.RESOURCE_CONTROLLER,
4],[h.TaskPriority.SLIDE,0],[h.TaskPriority.STREAM_DATA_LOADER,0],[h.TaskPriority.ELEVATION_QUERY,0],[h.TaskPriority.TERRAIN_SURFACE,1],[h.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[h.TaskPriority.LOD_RENDERER,2],[h.TaskPriority.GRAPHICS_CORE,2],[h.TaskPriority.I3S_CONTROLLER,2],[h.TaskPriority.POINT_CLOUD_LAYER,2],[h.TaskPriority.FEATURE_TILE_FETCHER,2],[h.TaskPriority.OVERLAY,4],[h.TaskPriority.STAGE,4],[h.TaskPriority.GRAPHICS_DECONFLICTOR,4],[h.TaskPriority.FILTER_VISIBILITY,4],[h.TaskPriority.SCALE_VISIBILITY,
4],[h.TaskPriority.FRUSTUM_VISIBILITY,4],[h.TaskPriority.CLOUDS_GENERATOR,4],[h.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[h.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[h.TaskPriority.LABELER,8],[h.TaskPriority.FEATURE_QUERY_ENGINE,8],[h.TaskPriority.FEATURE_TILE_TREE,16],[h.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[h.TaskPriority.ELEVATION_ALIGNMENT,12],[h.TaskPriority.TEXT_TEXTURE_ATLAS,12],[h.TaskPriority.TEXTURE_UNLOAD,12],[h.TaskPriority.LINE_OF_SIGHT_TOOL,16],[h.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,
0],[h.TaskPriority.SNAPPING,0],[h.TaskPriority.SHADOW_ACCUMULATOR,30]]),G=n.Milliseconds(6.5),z=n.Milliseconds(1),v=n.Milliseconds(30),I=n.Milliseconds(1E3/30),H=n.Milliseconds(100);var u;(function(Q){let C=function(){function da(){this._updating=new R.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new P("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new K;this._state=x.RenderState.INTERACTING;this._tasks=new D;this._runQueue=new D;
this._load=0;this._idleStateCallbacks=new D;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=k.watch(()=>F.SCHEDULER_LOG_SLOW_TASKS,r=>this._debug=r,k.initial);for(const r of Object.keys(h.TaskPriority))this.performanceInfo.tasks.set(h.TaskPriority[r],new P(h.TaskPriority[r]));const N=this;this._test={FRAME_SAFETY_BUDGET:G,INTERACTING_BUDGET:I,IDLE_BUDGET:H,get availableBudget(){return N._budget.budget},usedBudget:0,getBudget:()=>N._budget,setBudget:r=>N._budget=r,updateTask:r=>
this._updateTask(r),getState:r=>this._getState(r),getRuntime:r=>this._getRuntime(r),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var O=da.prototype;O._updatingChanged=function(){this._updating.set(this._tasks.some(N=>N.needsUpdate))};O.destroy=function(){this._tasks.toArray().forEach(N=>N.remove());this._tasks.clear();J.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};O.taskRunningChanged=function(N){this._updatingChanged();
N&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};O.registerTask=function(N,r){const t=f(N);r=new y(this,N,r,t);this._tasks.push(r);this._updatingChanged();this.performanceInfo.tasks.has(N)||this.performanceInfo.tasks.set(N,new P(N));return r};O.registerIdleStateCallbacks=function(N,r){const t={idleBegin:N,idleEnd:r};this._idleStateCallbacks.push(t);
this.state===x.RenderState.IDLE&&this._idleUpdatesStartFired&&t.idleBegin();const Y=this;return{remove:()=>this._removeIdleStateCallbacks(t),set idleBegin(ja){Y._idleUpdatesStartFired&&(t.idleEnd(),Y._state===x.RenderState.IDLE&&ja());t.idleBegin=ja},set idleEnd(ja){t.idleEnd=ja}}};O.updateBudget=function(N){this._test.usedBudget=0;++this._frameNumber;let r=G,t=N.frameDuration,Y=z;switch(this.state){case x.RenderState.IDLE:r=n.Milliseconds(0);t=n.Milliseconds(Math.max(H,N.frameDuration));Y=v;break;
case x.RenderState.INTERACTING:t=n.Milliseconds(Math.max(I,N.frameDuration))}t=n.Milliseconds(t-N.elapsedFrameTime-r);if(this.state!==x.RenderState.IDLE&&t<z&&!this._forceTask)return this._forceTask=!0,!1;t=n.Milliseconds(Math.max(t,Y));this._budget.reset(t,this.state);this._updateLoad();return this._schedule()};O.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case x.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(N=>
N.idleBegin()));this._runIdle();break;case x.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};O.stopFrame=function(){this._budget.reset(n.Milliseconds(0),this._state);this._budget.madeProgress()};O._removeIdleStateCallbacks=function(N){this._idleUpdatesStartFired&&N.idleEnd();this._idleStateCallbacks.removeUnordered(N)};O.removeTask=function(N){this._tasks.removeUnordered(N);this._runQueue.removeUnordered(N);this._updatingChanged()};
O._updateTask=function(N){this._tasks.forAll(r=>{r.name===N&&r.setPriority(N)})};O._getState=function(N){if(this._runQueue.some(t=>t.name===N))return h.TaskState.SCHEDULED;let r=h.TaskState.IDLE;this._tasks.forAll(t=>{t.name===N&&t.needsUpdate&&(1>=t.schedulePriority?r=h.TaskState.READY:r!==h.TaskState.READY&&(r=h.TaskState.WAITING))});return r};O._getRuntime=function(N){let r=0;this._tasks.forAll(t=>{t.name===N&&(r+=t.runtime)});return r};O._resetRuntimes=function(){this._tasks.forAll(N=>N.runtime=
0)};O._getRunning=function(){const N=new Map;this._tasks.forAll(t=>{t.needsUpdate&&N.set(t.name,(N.get(t.name)||0)+1)});if(0===N.size)return null;let r="";N.forEach((t,Y)=>{r=1<t?r+` ${t}x ${Y}`:r+` ${Y}`});return r};O._runIdle=function(){this._run()};O._runInteracting=function(){this._run()};O._runAnimating=function(){this._run()};O._updateLoad=function(){const N=this._tasks.reduce((r,t)=>t.needsUpdate?++r:r,0);this._load=.9*this._load+N*(1-.9)};O._schedule=function(){this._runQueue.filterInPlace(N=>
{if(N.needsUpdate)return!0;N.schedulePriority=N.basePriority;return!1});for(this._tasks.forAll(N=>{0===N.basePriority&&N.needsUpdate&&!this._runQueue.includes(N)&&N.blockFrame!==this._frameNumber&&this._runQueue.unshift(N)});0===this._runQueue.length;){let N=!1;this._tasks.forAll(r=>{if(r.needsUpdate&&0!==r.schedulePriority&&0!==r.basePriority&&r.blockFrame!==this._frameNumber)switch(N=!0,r.schedulePriority){case 1:r.schedulePriority=0;this._runQueue.push(r);break;default:--r.schedulePriority}});
if(!N)return this._updatingChanged(),!1}this._updatingChanged();return!0};O._run=function(){const N=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var r=this._budget.now();const t=this._runQueue.pop();this._budget.resetProgress();try{t.task.runTask(this._budget)===h.Task.YIELD&&(t.blockFrame=this._frameNumber)}catch(Y){E.getLogger("esri.views.support.Scheduler").error(`Exception in task "${t.name}"`,Y)}!this._budget.hasProgressed&&t.blockFrame!==this._frameNumber&&
t.needsUpdate&&(t.blockFrame=this._frameNumber);t.schedulePriority=t.basePriority;r=this._budget.now()-r;t.runtime+=r;this._frameTaskTimes.set(t.priority,this._frameTaskTimes.get(t.priority)+r);this._debug&&r>2*this._budget.budget&&console.log("Task",t.name,"used",r,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-N);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
N)};O._startFrameTaskTimes=function(){for(const N of Object.keys(h.TaskPriority))this._frameTaskTimes.set(h.TaskPriority[N],0)};O._recordFrameTaskTimes=function(N){this._frameTaskTimes.forEach((r,t)=>this.performanceInfo.tasks.get(t).record(r));this.performanceInfo.total.record(N)};e._createClass(da,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(N){this._state!==N&&(this._state=
N,this.state!==x.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(r=>r.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return da}();Q.Scheduler=C;let y=function(){function da(N,r,t,Y){this._scheduler=N;this.name=r;this._basePriority=Y;this.runtime=this.blockFrame=0;this._queue=new M.PromiseQueue;this._handles=new ca;this.schedulePriority=this._basePriority;this._task=new R.ObservableValue(J.isSome(t)?t:this._queue);this._handles.add(k.when(()=>
this.task.running,ja=>N.taskRunningChanged(ja)))}var O=da.prototype;O.remove=function(){this.processQueue(S);this._scheduler.removeTask(this);this.schedule=B.schedule;this.reschedule=B.reschedule;this._handles.destroy()};O.setPriority=function(N){this.name=N;N=f(N);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=N;this._basePriority=N};O.schedule=function(N,r,t){return this._queue.push(N,r,t)};O.reschedule=function(N,r,t){return this._queue.unshift(N,r,t)};O.processQueue=
function(N){this._queue.runTask(N)};e._createClass(da,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(N){this.setPriority(N)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return da}(),K=function(){function da(){this._begin="undefined"!==typeof performance?performance.now():0;
this._budget=0;this._state=x.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var O=da.prototype;O.run=function(N){if(this.done)return!1;!0===N()&&this.madeProgress();return!0};O.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};O.reset=function(N,r){this._begin=this.now();this._budget=N;this._state=r;this.resetProgress()};O.now=function(){return performance.now()};O.resetProgress=function(){this._done=this._progressed=!1};e._createClass(da,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(N){this._enabled=N}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return da}();Q.Budget=K})(u||(u={}));h.TaskState=void 0;
(function(Q){Q.SCHEDULED="s";Q.READY="r";Q.WAITING="w";Q.IDLE="i"})(h.TaskState||(h.TaskState={}));const S=(()=>{const Q=new u.Budget;Q.enabled=!1;return Q})(),B=new (function(){function Q(){}var C=Q.prototype;C.remove=function(){};C.processQueue=function(){};C.schedule=function(y,K,da){try{if(l.isAborted(K)){const O=l.createAbortError();return da?Promise.resolve(da(O)):Promise.reject(O)}return l.when(y(S))}catch(O){return Promise.reject(O)}};C.reschedule=function(y,K,da){return this.schedule(y,K,
da)};return e._createClass(Q)}());h.ImmediateTask=B;h.getTaskPriority=f;h.newScheduler=function(){return new u.Scheduler};h.noBudget=S;h.taskPriorities=p;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(h,e,ca,V,E,J,P){function D(M,F,x={}){return l(M,F,x,n)}function l(M,F,x={},f){let p=null;const G=x.once?(z,
v)=>{f(z)&&(V.removeMaybe(p),F(z,v))}:(z,v)=>{f(z)&&F(z,v)};p=J.watchTracked(M,G,x.sync,x.equals);x.initial&&(M=M(),G(M,M));return p}function k(M,F,x){if(E.isAborted(x))return Promise.reject(E.createAbortError());const f=M();if(F?.(f))return Promise.resolve(f);let p=null;return new Promise((G,z)=>{p=ca.handlesGroup([E.onAbort(x,()=>{p=V.removeMaybe(p);z(E.createAbortError())}),l(M,v=>{p=V.removeMaybe(p);G(v)},{sync:!1,once:!0},F??n)])})}function n(M){return!0}function R(M){return!!M}h.autorun=P.autorun;
h.initial={initial:!0};h.on=function(M,F,x,f={}){function p(){z&&v&&(v.remove(),f.onListenerRemove?.(z),v=z=null)}function G(u){f.once&&f.once&&V.removeMaybe(I);x(u)}let z=null,v=null,I=null;const H=D(M,(u,S)=>{p();e.isEventTarget(u)&&(z=u,v=e.on(u,F,G),f.onListenerAdd?.(u))},{sync:f.sync,initial:!0});return I=ca.makeHandle(()=>{H.remove();p()})};h.once=function(M,F){return k(M,null,F)};h.pausable=function(M,F,x={}){let f=!1;const p=D(M,(G,z)=>{f||F(G,z)},x);return{remove(){p.remove()},pause(){f=
!0},resume(){f=!1}}};h.sync={sync:!0};h.syncAndInitial={sync:!0,initial:!0};h.watch=D;h.when=function(M,F,x={}){return l(M,F,x,R)};h.whenOnce=function(M,F){return k(M,R,F)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../tracking","./SimpleObservable"],function(h,e,ca,V){let E=function(){function J(D){this._observable=new V.SimpleObservable;this._value=
D}var P=J.prototype;P.get=function(){ca.trackAccess(this._observable);return this._value};P.set=function(D){D!==this._value&&(this._value=D,this._observable.notify())};return e._createClass(J)}();h.ObservableValue=E;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(h,e,ca,V){let E=function(){function P(){this._tasks=
[];this._running=new V.ObservableValue(!1)}var D=P.prototype;D.destroy=function(){this.cancelAll()};D.runTask=function(l){for(;!l.done&&this._process(l);)l.madeProgress()};D.push=function(l,k,n){this._running.set(!0);return new Promise((R,M)=>this._tasks.push(new J(R,M,l,k,n)))};D.unshift=function(l,k,n){this._running.set(!0);return new Promise((R,M)=>this._tasks.unshift(new J(R,M,l,k,n)))};D._process=function(l){if(0===this._tasks.length)return!1;const k=this._tasks.shift();try{const n=ca.isAborted(k.signal);
if(n&&!k.abortCallback)k.reject(ca.createAbortError());else{const R=n?k.abortCallback?.(ca.createAbortError()):k.callback(l);ca.isPromiseLike(R)?R.then(k.resolve,k.reject):k.resolve(R)}}catch(n){k.reject(n)}this._running.set(0<this._tasks.length);return!0};D.cancelAll=function(){const l=ca.createAbortError();for(const k of this._tasks)if(k.abortCallback){const n=k.abortCallback(l);k.resolve(n)}else k.reject(l);this._tasks.length=0;this._running.set(!1)};e._createClass(P,[{key:"length",get:function(){return this._tasks.length}},
{key:"running",get:function(){return this._running.get()}}]);return P}(),J=e._createClass(function(P,D,l,k,n){this.resolve=P;this.reject=D;this.callback=l;this.signal=k;this.abortCallback=n});h.PromiseQueue=E;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,e,ca,V,E,J,P,D){ca=function(l){function k(){var R=n.apply(this,arguments);R.SCHEDULER_LOG_SLOW_TASKS=!1;R.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return R}h._inherits(k,l);var n=h._createSuper(k);return h._createClass(k)}(ca);e.__decorate([V.property()],ca.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([V.property()],ca.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ca=e.__decorate([D.subclass("esri.views.support.DebugFlags")],ca);return new ca})},
"esri/views/support/RenderState":function(){define(["exports"],function(h){h.RenderState=void 0;var e=h.RenderState||(h.RenderState={});e[e.ANIMATING=0]="ANIMATING";e[e.INTERACTING=1]="INTERACTING";e[e.IDLE=2]="IDLE";Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(h,e,ca,V,E){function*J(z){switch(z.type){case "Feature":yield z;
break;case "FeatureCollection":for(const v of z.features)v&&(yield v)}}function*P(z){if(z)switch(z.type){case "Point":yield z.coordinates;break;case "LineString":case "MultiPoint":yield*z.coordinates;break;case "MultiLineString":case "Polygon":for(const v of z.coordinates)yield*v;break;case "MultiPolygon":for(const v of z.coordinates)for(const I of v)yield*I}}function*D(z,v={}){const {geometryType:I,objectIdField:H}=v;for(const u of z){const {geometry:S,properties:B,id:Q}=u;if(S&&G[S.type]!==I)continue;
z=B||{};let C=void 0;H&&(C=z[H],null==Q||C||(z[H]=C=Q));yield new ca.OptimizedFeature(S?R(new V,S,v):null,z,null,C??void 0)}}function l(z){for(const v of z)if(2<v.length)return!0;return!1}function k(z){let v=0;for(let I=0;I<z.length;I++){const H=z[I],u=z[(I+1)%z.length];v+=H[0]*u[1]-u[0]*H[1]}return 0>=v}function n(z){const v=z[0],I=z[z.length-1];v[0]===I[0]&&v[1]===I[1]&&v[2]===I[2]||z.push(v);return z}function R(z,v,I){switch(v.type){case "LineString":return x(z,v.coordinates,I),z;case "MultiLineString":for(const u of v.coordinates)x(z,
u,I);return z;case "MultiPoint":return x(z,v.coordinates,I),z;case "MultiPolygon":for(var H of v.coordinates)for(M(z,H[0],I),v=1;v<H.length;v++)F(z,H[v],I);return z;case "Point":return p(z,v.coordinates,I),z;case "Polygon":H=v.coordinates;M(z,H[0],I);for(v=1;v<H.length;v++)F(z,H[v],I);return z}}function M(z,v,I){v=n(v);k(v)?x(z,v,I):f(z,v,I)}function F(z,v,I){v=n(v);k(v)?f(z,v,I):x(z,v,I)}function x(z,v,I){for(const H of v)p(z,H,I);z.lengths.push(v.length)}function f(z,v,I){for(let H=v.length-1;0<=
H;H--)p(z,v[H],I);z.lengths.push(v.length)}function p(z,v,I){const [H,u,S]=v;z.coords.push(H,u);I.hasZ&&z.coords.push(S||0)}const G={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};h.createOptimizedFeatures=function(z,v){return Array.from(D(J(z),v))};h.getGeometryType=function(z){return G[z]};h.inferLayerProperties=function(z,v={}){const I=[];var H=
new Set;const u=new Set;var S=!1;let B=null,Q=!1,C=void 0;({geometryType:v=null}=v);var y=!1;for(const K of J(z)){const {geometry:da,properties:O,id:N}=K;if(da&&(v||(v=G[da.type]),G[da.type]!==v))continue;S||(S=P(da),S=l(S));!Q&&(Q=null!=N)&&(C=typeof N,O&&(B=Object.keys(O).filter(r=>O[r]===N)));O&&B&&Q&&null!=N&&(1<B.length?B=B.filter(r=>O[r]===N):1===B.length&&(B=O[B[0]]===N?B:[]));if(!y&&O){z=!0;for(const r in O){if(H.has(r))continue;y=O[r];if(null==y){z=!1;u.add(r);continue}a:switch(typeof y){case "string":y=
"esriFieldTypeString";break a;case "number":y="esriFieldTypeDouble";break a;default:y="unknown"}if("unknown"===y){u.add(r);continue}u.delete(r);H.add(r);const t=E.normalizeFieldName(r);t&&I.push({name:t,alias:r,type:y})}y=z}}if(H=E.normalizeFieldName(1===B?.length&&B[0]||null)??void 0)for(const K of I)if(K.name===H&&E.isNumericField(K)){K.type="esriFieldTypeOID";break}return{fields:I,geometryType:v,hasZ:S,objectIdFieldName:H,objectIdFieldType:C,unknownFields:Array.from(u)}};h.validateGeoJSON=function(z){if(!z)throw new e("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==z.type&&"FeatureCollection"!==z.type)throw new e("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:z});({crs:z}=z);if(z){var v="string"===typeof z?z:"name"===z.type?z.properties.name:"EPSG"===z.type?z.properties.code:null,I=RegExp(".*(CRS84H?|4326)$","i");if(!v||!I.test(v))throw new e("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:z});}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(h,e,ca,V,E,J){function P(F){return new k(F)}async function D(){V.isNone(M)&&(M=await new Promise((F,x)=>h(["../../../../geometry/geometryEngineJSON"],F,x)));return M}let l=ca._createClass(function(){this.description=this.code=null}),k=ca._createClass(function(F){this.error=
new l;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=F}),n=ca._createClass(function(F){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=F});const R=new Set;let M;e.createFeatureEditErrorResult=P;e.createFeatureEditSuccessResult=function(F){return new n(F)};e.loadGeometryEngineForSimplify=async function(F,x){!E.isValid(F)||"esriGeometryPolygon"!==x&&"esriGeometryPolyline"!==x||await D()};e.mixAttributes=function(F,x,f,p=!1,G){R.clear();for(const H in f){const u=
F.get(H);if(!u)continue;var z=f[H],v=u,I=z;let S=I;"string"===typeof I&&J.isNumericField(v)?S=parseFloat(I):null!=I&&J.isStringField(v)&&"string"!==typeof I&&(S=String(I));v=J.sanitizeNullFieldValue(S);v!==z&&G&&G.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:u,originalValue:z,sanitizedValue:v}});R.add(u.name);if(u&&(p||u.editable)){if(z=J.validateFieldValue(u,v))return P(J.validationErrorToString(z,u,v));x[u.name]=v}}for(const H of F?.requiredFields??
[])if(!R.has(H.name))return P(`missing required field "${H.name}"`);return null};e.simplify=function(F,x){if(!F||!E.isValid(x))return F;if("rings"in F||"paths"in F){if(V.isNone(M))throw new TypeError("geometry engine not loaded");return M.simplify(x,F)}return F};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n,R,M,F,x,f,p){function G(pa){pa=N(pa);t(pa);Y(pa);pa=pa.firstElementChild;const ta=E.cache(v(pa));return{operations:z(pa),get featureTypes(){return Array.from(ta())},readFeatureTypes:ta}}function z(pa){let ta=!1;const xa={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};F.visitXML(pa,{OperationsMetadata:{Operation:Da=>{switch(Da.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:Ca=>{xa.GetCapabilities.url=
Ca.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:Ca=>{xa.DescribeFeatureType.url=Ca.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:Ca=>{xa.GetFeature.url=Ca.getAttribute("xlink:href")}}},Parameter:Ca=>{if("outputFormat"===Ca.getAttribute("name"))return{AllowedValues:{Value:La=>{(La=La.textContent)&&ja.has(La.toLowerCase())&&(xa.GetFeature.outputFormat=La)}}}}}}},Constraint:Da=>{switch(Da.getAttribute("name")){case "KVPEncoding":return{DefaultValue:Ca=>
{ta="true"===Ca.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:Ca=>{xa.GetFeature.supportsPagination="true"===Ca.textContent.toLowerCase()}}}}}});if(!ta)throw new V("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(J.isNone(xa.GetFeature.outputFormat))throw new V("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return xa}function v(pa){return F.iterateXML(pa,{FeatureTypeList:{FeatureType:ta=>
{const xa={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},Da=new Set([4326]),Ca=La=>{La=parseInt(La.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);Number.isNaN(La)||Da.add(La)};F.visitXML(ta,{Name:La=>{const {name:Qa,prefix:Pa}=r(La.textContent);xa.typeName=`${Pa}:${Qa}`;xa.name=Qa;xa.namespacePrefix=Pa;xa.namespaceUri=La.lookupNamespaceURI(Pa)},Abstract:La=>{xa.description=La.textContent},Title:La=>
{xa.title=La.textContent},WGS84BoundingBox:La=>{xa.extent=I(La)},DefaultSRS:Ca,DefaultCRS:Ca,OtherSRS:Ca,OtherCRS:Ca});xa.title||(xa.title=xa.name);xa.supportedSpatialReferences.push(...Da);return xa}}})}function I(pa){let ta,xa,Da,Ca;for(const La of pa.children)switch(La.localName){case "LowerCorner":[ta,xa]=La.textContent.split(" ").map(Qa=>Number.parseFloat(Qa));break;case "UpperCorner":[Da,Ca]=La.textContent.split(" ").map(Qa=>Number.parseFloat(Qa))}return{xmin:ta,ymin:xa,xmax:Da,ymax:Ca,spatialReference:k.WGS84}}
function H(pa,ta,xa){return E.find(pa,Da=>xa?Da.name===ta&&Da.namespaceUri===xa:Da.typeName===ta||Da.name===ta)}async function u(pa,ta,xa,Da={}){const {spatialReference:Ca=f.WGS84}=Da;pa=pa.readFeatureTypes();xa=ta?H(pa,ta,xa):pa.next().value;if(J.isNone(xa)){if(ta)throw new V("wfs-layer:feature-type-not-found",`The type '${ta}' could not be found in the service`);throw new V("wfs-layer:empty-service","The service is empty");}ta=new p({...xa.extent,spatialReference:Ca});if(!k.equals(Ca,k.WGS84))try{await l.initializeProjection(k.WGS84,
Ca,void 0,Da),ta=l.project(ta,k.WGS84)}catch{throw new V("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:ta,spatialReference:Ca,featureType:xa}}async function S(pa,ta,xa={}){const [Da,Ca]=await P.eachAlways([C(pa.operations.DescribeFeatureType.url,ta,xa),Q(pa,ta,xa)]);if(Da.error||Ca.error)throw new V("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${ta}'`,{error:Da.error||Ca.error});const {fields:La,errors:Qa}=
Da.value??{};pa=Da.value?.geometryType||Ca.value?.geometryType;xa=Ca.value?.swapXY??!1;if(J.isNone(pa))throw new V("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${ta}`,{typeName:ta,geometryType:pa,fields:La,errors:Qa});return{...B(La??[]),geometryType:pa,swapXY:xa}}function B(pa){const ta=pa.find(Da=>"geometry"===Da.type);let xa=pa.find(Da=>"oid"===Da.type);pa=pa.filter(Da=>"geometry"!==Da.type);xa||(xa=new x({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),
pa.unshift(xa));return{geometryField:ta?.name??null,objectIdField:xa.name,fields:pa}}async function Q(pa,ta,xa={}){let Da,Ca=!1;const [La,Qa]=await Promise.all([da(pa.operations.GetFeature.url,ta,pa.operations.GetFeature.outputFormat,{...xa,count:1}),ca(pa.operations.GetFeature.url,{responseType:"text",query:O(ta,void 0,{...xa,count:1}),signal:xa?.signal})]);if(pa="FeatureCollection"===La.type&&La.features[0]?.geometry){Da=n.featureGeometryTypeKebabDictionary.fromJSON(R.getGeometryType(pa.type));
switch(pa.type){case "Point":var Pa=pa.coordinates;break;case "LineString":case "MultiPoint":Pa=pa.coordinates[0];break;case "MultiLineString":case "Polygon":Pa=pa.coordinates[0][0];break;case "MultiPolygon":Pa=pa.coordinates[0][0][0]}if(ta=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(Qa.data))pa=Pa[0].toFixed(3),Pa=Pa[1].toFixed(3),xa=parseFloat(ta[1]).toFixed(3),ta=parseFloat(ta[2]).toFixed(3),pa===ta&&Pa===xa&&(Ca=!0)}return{geometryType:Da,swapXY:Ca}}async function C(pa,ta,xa){pa=
await ca(pa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:ta,...xa?.customParameters},signal:xa?.signal});return y(ta,pa.data)}function y(pa,ta){const {name:xa}=r(pa);ta=N(ta);Y(ta);const Da=E.find(F.iterateXML(ta.firstElementChild,{element:Ca=>({name:Ca.getAttribute("name"),typeName:r(Ca.getAttribute("type")).name})}),({name:Ca})=>Ca===xa);if(J.isSome(Da)){const Ca=E.find(F.iterateXML(ta.firstElementChild,{complexType:La=>La}),La=>La.getAttribute("name")===
Da.typeName);if(J.isSome(Ca))return K(Ca)}throw new V("wfs-layer:feature-type-not-found",`Type '${pa}' not found in document`,{document:(new XMLSerializer).serializeToString(ta)});}function K(pa){const ta=[],xa=[];let Da=void 0;var Ca=F.iterateXML(pa,{complexContent:{extension:{sequence:{element:La=>La}}}});for(const La of Ca){Ca=La.getAttribute("name");if(!Ca)continue;let Qa,Pa;La.hasAttribute("type")?Qa=r(La.getAttribute("type")).name:F.visitXML(La,{simpleType:{restriction:sa=>{Qa=r(sa.getAttribute("base")).name;
return{maxLength:Fa=>{Pa=+Fa.getAttribute("value")}}}}});if(!Qa)continue;const ab="true"===La.getAttribute("nillable");let na=!1;switch(Qa.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":xa.push(new x({name:Ca,alias:Ca,type:"integer",nullable:ab}));break;case "float":case "double":case "decimal":xa.push(new x({name:Ca,
alias:Ca,type:"double",nullable:ab}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":xa.push(new x({name:Ca,alias:Ca,type:"string",nullable:ab,length:Pa??255}));break;case "datetime":case "date":xa.push(new x({name:Ca,
alias:Ca,type:"date",nullable:ab,length:Pa??36}));break;case "pointpropertytype":Da="point";na=!0;break;case "multipointpropertytype":Da="multipoint";na=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":Da="polyline";na=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":Da="polygon";na=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":na=!0;ta.push(new V("wfs-layer:unknown-geometry-type",
`geometry type '${Qa}' is not supported`,{type:(new XMLSerializer).serializeToString(pa)}));break;default:ta.push(new V("wfs-layer:unknown-field-type",`Unknown field type '${Qa}'`,{type:(new XMLSerializer).serializeToString(pa)}))}na&&xa.push(new x({name:Ca,alias:Ca,type:"geometry",nullable:ab}))}for(const La of xa)if("integer"===La.type&&!La.nullable&&ya.has(La.name.toLowerCase())){La.type="oid";break}return{geometryType:Da,fields:xa,errors:ta}}async function da(pa,ta,xa,Da){({data:pa}=await ca(pa,
{responseType:"text",query:O(ta,xa,Da),signal:Da?.signal}));pa=pa.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{if(Da?.dateFields?.length){const Ca=new Set(Da.dateFields);return JSON.parse(pa,(La,Qa)=>Ca.has(La)?M.parseDate(Qa):Qa)}return JSON.parse(pa)}catch(Ca){throw new V("wfs-layer:malformed-json","Error while parsing the\u00a0response",{response:pa,error:Ca});}}function O(pa,ta,xa){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:pa,OUTPUTFORMAT:ta,SRSNAME:"EPSG:4326",
STARTINDEX:xa?.startIndex,COUNT:xa?.count,...xa?.customParameters}}function N(pa){return(new DOMParser).parseFromString(pa.trim(),"text/xml")}function r(pa){const [ta,xa]=pa.split(":");return{prefix:xa?ta:"",name:xa??ta}}function t(pa){if((pa=pa.firstElementChild?.getAttribute("version"))&&"2.0.0"!==pa)throw new V("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${pa}. Supported version: ${"2.0.0"}`);}function Y(pa){let ta="",xa="";F.visitXML(pa.firstElementChild,{Exception:Da=>{ta=Da.getAttribute("exceptionCode");
return{ExceptionText:Ca=>{xa=Ca.textContent}}}});if(ta)throw new V(`wfs-layer:${ta}`,xa);}const ja=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),ya=new Set(["objectid","fid"]);h.WFS_OID_FIELD_NAME="__esri_wfs_id__";h.describeFeatureType=C;h.findFeatureType=H;h.getCapabilities=async function(pa,ta){ta=await ca(pa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...ta?.customParameters},signal:ta?.signal});ta=G(ta.data);D.isHTTPSProtocol(pa)&&
(D.hasSameOrigin(pa,ta.operations.DescribeFeatureType.url,!0)&&(ta.operations.DescribeFeatureType.url=D.toHTTPS(ta.operations.DescribeFeatureType.url)),D.hasSameOrigin(pa,ta.operations.GetFeature.url,!0)&&(ta.operations.GetFeature.url=D.toHTTPS(ta.operations.GetFeature.url)));return ta};h.getFeature=da;h.getFeatureCount=async function(pa,ta,xa){pa=await ca(pa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:ta,RESULTTYPE:"hits",...xa?.customParameters},signal:xa?.signal});
pa=N(pa.data);Y(pa);pa=Number.parseFloat(pa.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(pa)?0:pa};h.getFeatureTypeInfo=u;h.getWFSLayerInfo=async function(pa,ta,xa,Da={}){const {featureType:Ca,extent:La}=await u(pa,ta,xa,Da),{fields:Qa,geometryType:Pa,swapXY:ab,objectIdField:na,geometryField:sa}=await S(pa,Ca.typeName,Da);return{url:pa.operations.GetCapabilities.url,name:Ca.name,namespaceUri:Ca.namespaceUri,fields:Qa,geometryField:sa,geometryType:Pa,objectIdField:na,spatialReference:Da.spatialReference??
f.WGS84,extent:La,swapXY:ab,wfsCapabilities:pa,customParameters:Da.customParameters}};h.parseDescribeFeatureTypeResponse=y;h.parseGetCapabilitiesResponse=G;h.prepareWFSLayerFields=B;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(h){function e(V){V=(new Date(V)).getTime();return Number.isNaN(V)?null:V}const ca=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;
h.parseDate=function(V){var E=ca.exec(V);if(E?.groups){E=E.groups;var J=+E.year,P=+E.month-1,D=+E.day,l=+(E.hours??0),k=+(E.minutes??0),n=+(E.seconds??0);if(23<l||59<k||59<n)E=null;else{var R=E.ms??"0";R=R?+R.padEnd(3,"0").substring(0,3):0;E=E.isUTC?Date.UTC(J,P,D,l,k,n,R):E.offsetSign?6E4*("+"===E.offsetSign?-1:1)*(60*+E.offsetHours+ +E.offsetMinutes)+Date.UTC(J,P,D,l,k,n,R):(new Date(J,P,D,l,k,n,R)).getTime();E=Number.isNaN(E)?null:E}}else E=null;return E??e(V)};h.parseJSDate=e;Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(h){function e(V,E){if(V&&E)for(const J of V.children)J.localName in E&&(V=E[J.localName],"function"===typeof V?(V=V(J))&&e(J,V):e(J,V))}function*ca(V,E){for(const J of V.children)J.localName in E&&(V=E[J.localName],"function"===typeof V?yield V(J):yield*ca(J,V))}h.iterateXML=ca;h.visitXML=e;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(h,e,ca,V,E,J,P,D,l,k,n,R,M){var F;const x=new ca.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});ca=F=function(f){function p(z){z=G.call(this,z);
z.alias=null;z.defaultValue=void 0;z.description=null;z.domain=null;z.editable=!0;z.length=-1;z.name=null;z.nullable=!0;z.type=null;z.valueType=null;z.visible=!0;return z}h._inherits(p,f);var G=h._createSuper(p);f=p.prototype;f.readDescription=function(z,{description:v}){z=null;try{z=v?JSON.parse(v):null}catch(I){}return z?.value??null};f.readValueType=function(z,{description:v}){z=null;try{z=v?JSON.parse(v):null}catch(I){}return z?x.fromJSON(z.fieldValueType):null};f.clone=function(){return new F({alias:this.alias,
defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return h._createClass(p)}(V.JSONSupport);e.__decorate([E.property({type:String,json:{write:!0}})],ca.prototype,"alias",void 0);e.__decorate([E.property({type:[String,Number],json:{write:{allowNull:!0}}})],ca.prototype,"defaultValue",void 0);e.__decorate([E.property()],
ca.prototype,"description",void 0);e.__decorate([k.reader("description")],ca.prototype,"readDescription",null);e.__decorate([E.property({types:R.types,json:{read:{reader:R.fromJSON},write:!0}})],ca.prototype,"domain",void 0);e.__decorate([E.property({type:Boolean,json:{write:!0}})],ca.prototype,"editable",void 0);e.__decorate([E.property({type:J.Integer,json:{write:!0}})],ca.prototype,"length",void 0);e.__decorate([E.property({type:String,json:{write:!0}})],ca.prototype,"name",void 0);e.__decorate([E.property({type:Boolean,
json:{write:!0}})],ca.prototype,"nullable",void 0);e.__decorate([l.enumeration(M.kebabDict)],ca.prototype,"type",void 0);e.__decorate([E.property()],ca.prototype,"valueType",void 0);e.__decorate([k.reader("valueType",["description"])],ca.prototype,"readValueType",null);e.__decorate([E.property({type:Boolean,json:{read:!1}})],ca.prototype,"visible",void 0);return ca=F=e.__decorate([n.subclass("esri.layers.support.Field")],ca)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(h,e,ca,V,E,J){e={key:"type",base:V,typeMap:{range:J,"coded-value":ca,inherited:E}};h.CodedValueDomain=ca;h.DomainBase=V;h.InheritedDomain=E;h.RangeDomain=J;h.fromJSON=function(P){if(!P||!P.type)return null;switch(P.type){case "range":return J.fromJSON(P);case "codedValue":return ca.fromJSON(P);case "inherited":return E.fromJSON(P)}return null};h.types=e;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(h,e,ca,V,E,J,P,D,l){var k;E=k=function(n){function R(F){F=M.call(this,F);F.codedValues=null;F.type="coded-value";return F}h._inherits(R,n);var M=h._createSuper(R);n=R.prototype;n.getName=function(F){let x=null;if(this.codedValues){const f=String(F);this.codedValues.some(p=>{String(p.code)===f&&(x=p.name);return!!x})}return x};n.clone=function(){return new k({codedValues:ca.clone(this.codedValues),name:this.name})};return h._createClass(R)}(l);e.__decorate([V.property({type:[D.CodedValue],
json:{write:!0}})],E.prototype,"codedValues",void 0);e.__decorate([J.enumeration({codedValue:"coded-value"})],E.prototype,"type",void 0);return E=k=e.__decorate([P.subclass("esri.layers.support.CodedValueDomain")],E)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,e,ca,V,E,J,P,D,l){var k;h.CodedValue=k=function(n){function R(F){F=M.call(this,F);F.name=null;F.code=null;return F}e._inherits(R,n);var M=e._createSuper(R);R.prototype.clone=function(){return new k({name:this.name,code:this.code})};return e._createClass(R)}(V.JSONSupport);ca.__decorate([E.property({type:String,json:{write:!0}})],h.CodedValue.prototype,"name",void 0);ca.__decorate([E.property({type:[String,Number],json:{write:!0}})],h.CodedValue.prototype,"code",void 0);h.CodedValue=k=ca.__decorate([l.subclass("esri.layers.support.CodedValue")],
h.CodedValue);Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(h,e,ca,V,E,J,P,D,l,k){ca=new ca.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});V=function(n){function R(F){F=M.call(this,F);F.name=null;F.type=null;return F}h._inherits(R,n);var M=h._createSuper(R);return h._createClass(R)}(V.JSONSupport);e.__decorate([E.property({type:String,json:{write:!0}})],V.prototype,"name",void 0);e.__decorate([l.enumeration(ca)],V.prototype,"type",void 0);return V=e.__decorate([k.subclass("esri.layers.support.Domain")],V)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(h,e,ca,V,E,J,P,D,l,k){var n;ca=n=function(R){function M(x){x=F.call(this,x);x.type="inherited";return x}h._inherits(M,R);var F=h._createSuper(M);M.prototype.clone=function(){return new n};return h._createClass(M)}(k);e.__decorate([D.enumeration({inherited:"inherited"})],ca.prototype,"type",void 0);return ca=n=e.__decorate([l.subclass("esri.layers.support.InheritedDomain")],ca)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(h,e,ca,V,E,J,P,D,l){var k;V=k=function(n){function R(F){F=M.call(this,F);F.maxValue=null;F.minValue=null;F.type="range";return F}h._inherits(R,n);var M=h._createSuper(R);R.prototype.clone=function(){return new k({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return h._createClass(R)}(l);e.__decorate([ca.property({type:Number,json:{type:[Number],read:{source:"range",reader(n,R){return R.range&&R.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&
null==this.minValue}},target:"range",writer(n,R,M){R[M]=[this.minValue||0,n]}}}})],V.prototype,"maxValue",void 0);e.__decorate([ca.property({type:Number,json:{type:[Number],read:{source:"range",reader(n,R){return R.range&&R.range[0]}},write:{target:"range",writer(n,R,M){R[M]=[n,this.maxValue||0]}}}})],V.prototype,"minValue",void 0);e.__decorate([P.enumeration({range:"range"})],V.prototype,"type",void 0);return V=k=e.__decorate([D.subclass("esri.layers.support.RangeDomain")],V)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(h,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});h.kebabDict=e;Object.defineProperty(h,Symbol.toStringTag,
{value:"Module"})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(h,e,ca,V,E,J,P,D,l,k,n,R,M,F,x){return function(){function f(){this._customParameters=this._queryEngine=
null;this._snapshotFeatures=async G=>{const {objectIdField:z}=this._queryEngine;var v=await F.getFeature(this._getFeatureUrl??"",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map(H=>H.name),signal:G});await R.validateGeoJSON(v);J.throwIfAborted(G);G=R.createOptimizedFeatures(v,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:z});if(!P.equals(this._queryEngine.spatialReference,P.WGS84))for(var I of G)E.isSome(I.geometry)&&
(I.geometry=D.convertFromGeometry(k.project(D.convertToGeometry(I.geometry,this._queryEngine.geometryType,!1,!1),P.WGS84,this._queryEngine.spatialReference)));I=1;for(const H of G)v={},M.mixAttributes(this._fieldsIndex,v,H.attributes,!0),H.attributes=v,null==H.attributes[z]&&(H.objectId=H.attributes[z]=I++);return G}}var p=f.prototype;p.destroy=function(){this._queryEngine?.destroy();this._queryEngine=null};p.load=async function(G,z){const {getFeatureUrl:v,getFeatureOutputFormat:I,spatialReference:H,
fields:u,geometryType:S,featureType:B,objectIdField:Q,customParameters:C}=G;this._featureType=B;this._customParameters=C;this._getFeatureUrl=v;this._getFeatureOutputFormat=I;this._fieldsIndex=new x(u);await this._checkProjection(H);J.throwIfAborted(z);this._queryEngine=new n.QueryEngine({fields:u,geometryType:S,hasM:!1,hasZ:!1,objectIdField:Q,spatialReference:H,timeInfo:null,featureStore:new l({geometryType:S,hasM:!1,hasZ:!1})});G=await this._snapshotFeatures(E.unwrap(z.signal));this._queryEngine.featureStore.addMany(G);
return{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}};p.applyEdits=async function(){throw new ca("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");};p.queryFeatures=async function(G={},z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(G,z.signal)};p.queryFeatureCount=async function(G={},z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(G,z.signal)};p.queryObjectIds=async function(G=
{},z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(G,z.signal)};p.queryExtent=async function(G={},z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(G,z.signal)};p.querySnapping=async function(G,z={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(G,z.signal)};p.refresh=async function(G){this._customParameters=G;this._snapshotTask?.abort();this._snapshotTask=e.createTask(this._snapshotFeatures);
this._snapshotTask.promise.then(z=>{this._queryEngine.featureStore.clear();z&&this._queryEngine.featureStore.addMany(z)},z=>{this._queryEngine.featureStore.clear();J.isAbortError(z)||V.getLogger("esri.layers.WFSLayer").error(new ca("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:z}))});await this._waitSnapshotComplete();return{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}};p._waitSnapshotComplete=async function(){if(this._snapshotTask&&
!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}};p._checkProjection=async function(G){try{await k.checkProjectionSupport(P.WGS84,G)}catch{throw new ca("unsupported-projection","Projection not supported",{spatialReference:G});}};return h._createClass(f)}()});