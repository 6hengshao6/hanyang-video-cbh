// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../request ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./support/fromPortalItem ../geometry/Extent ../geometry/SpatialReference".split(" "),function(l,g,c,b,m,n,p,q,r,t,u,v,d,C,D,E,w,x,k,
h){let y=0;b=function(f){function e(){var a=z.apply(this,arguments);a.attributionDataUrl=null;a.fullExtent=new k(-180,-90,180,90,h.WGS84);a.id=Date.now().toString(16)+"-layer-"+y++;a.legendEnabled=!0;a.listMode="show";a.opacity=1;a.parent=null;a.popupEnabled=!0;a.attributionVisible=!0;a.spatialReference=h.WGS84;a.title=null;a.type=null;a.url=null;a.visible=!0;return a}g._inherits(e,f);var z=g._createSuper(e);e.fromArcGISServerUrl=async function(a){a="string"===typeof a?{url:a}:a;return(await new Promise((A,
B)=>l(["./support/arcgisLayers"],A,B))).fromUrl(a)};e.fromPortalItem=function(a){return x.fromPortalItem(a)};f=e.prototype;f.initialize=function(){this.when().catch(a=>{u.isAbortError(a)||t.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:a})})};f.destroy=function(){if(this.parent){const a=this.parent;"layers"in a&&a.layers.includes(this)?a.layers.remove(this):"tables"in a&&a.tables.includes(this)?a.tables.remove(this):
"baseLayers"in a&&a.baseLayers.includes(this)?a.baseLayers.remove(this):"baseLayers"in a&&a.referenceLayers.includes(this)&&a.referenceLayers.remove(this)}};f.fetchAttributionData=async function(){const a=this.attributionDataUrl;if(this.hasAttributionData&&a)return(await m(a,{query:{f:"json"},responseType:"json"})).data;throw new n("layer:no-attribution-data","Layer does not have attribution data");};g._createClass(e,[{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},
{key:"parsedUrl",get:function(){return v.urlToObject(this.url)}}]);return e}(p.EventedMixin(q.IdentifiableMixin(r)));c.__decorate([d.property({type:String})],b.prototype,"attributionDataUrl",void 0);c.__decorate([d.property({type:k})],b.prototype,"fullExtent",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"hasAttributionData",null);c.__decorate([d.property({type:String,clonable:!1})],b.prototype,"id",void 0);c.__decorate([d.property({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",
void 0);c.__decorate([d.property({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0);c.__decorate([d.property({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0);c.__decorate([d.property({clonable:!1})],b.prototype,"parent",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"parsedUrl",null);c.__decorate([d.property({type:Boolean})],b.prototype,"popupEnabled",void 0);c.__decorate([d.property({type:Boolean})],b.prototype,"attributionVisible",
void 0);c.__decorate([d.property({type:h})],b.prototype,"spatialReference",void 0);c.__decorate([d.property({type:String})],b.prototype,"title",void 0);c.__decorate([d.property({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0);c.__decorate([d.property()],b.prototype,"url",void 0);c.__decorate([d.property({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0);return b=c.__decorate([w.subclass("esri.layers.Layer")],b)});