// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(f,c){f.updateOrigins=function(a){a&&a.writtenProperties&&a.writtenProperties.forEach(({target:d,propName:g,newOrigin:q})=>{c.isMultiOriginJSONMixin(d)&&q&&d.originOf(g)!==q&&d.updateOrigin(g,q)})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(f){f.isMultiOriginJSONMixin=function(c){return c&&
"getAtOrigin"in c&&"originOf"in c};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/networks/UtilityNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/deprecate ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../layers/FeatureLayer ../layers/support/featureQueryAll ./Network ./RulesTable ./support/NamedTraceConfiguration ./support/NetworkSystemLayers ./support/TerminalConfiguration ./support/typeUtils ../rest/support/Query".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l,e,n,r,p,x,B,u){const H=d.getLogger("esri.networks.UtilityNetwork");d=function(D){function L(z){z=I.call(this,z);z.sharedNamedTraceConfigurations=[];z.type="utility";return z}f._inherits(L,D);var I=f._createSuper(L);D=L.prototype;D.load=async function(z){this.addResolvingPromise(f._get(f._getPrototypeOf(L.prototype),"load",this).call(this,z));this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(z));return this};D.getTerminalConfiguration=function(z){let E=
null,F=null;var J=z.layer;let C=null;if("feature"===J?.type){if(C=J.layerId,null===C)return null}else return null;J=z.attributes;if(null==J)return null;for(const G of Object.keys(J))"ASSETGROUP"===G.toUpperCase()&&(E=z.getAttribute(G)),"ASSETTYPE"===G.toUpperCase()&&(F=z.getAttribute(G));if(!this.dataElement)return null;let M=null;z=this.dataElement.domainNetworks;for(var O of z)if(z=O.junctionSources?.find(G=>G.layerId===C))if(z=z.assetGroups?.find(G=>G.assetGroupCode===E))if(z=z.assetTypes?.find(G=>
G.assetTypeCode===F)){M=z.terminalConfigurationId;break}return null!=M?(O=this.dataElement.terminalConfigurations?.find(G=>G.terminalConfigurationId===M))?x.fromJSON(O):null:null};D.getTierNames=function(z){return this.dataElement?.domainNetworks.find(E=>E.domainNetworkName===z)?.tiers.map(E=>E.name)||[]};D.getRulesTable=async function(){return this._createRulesTable()};D.isUtilityLayer=function(z){return this._utilityLayerList.has(z.layerId)};D._loadNamedTraceConfigurationsFromNetwork=async function(z){if(0!==
this.sharedNamedTraceConfigurations?.length){var E=this.sharedNamedTraceConfigurations.map(F=>F.globalId);z=await this.queryNamedTraceConfigurations({globalIds:E},z);for(const F of this.sharedNamedTraceConfigurations)if(E=z?.find(J=>J.globalId===F.globalId))E=E.write({},{origin:"service"}),F.read(E,{origin:"service"})}};D._createRulesTable=async function(){const z=new k({url:this.rulesTableUrl});await z.load();var E=this.dataElement?.domainNetworks;if(!E)return null;const F=E.flatMap(J=>[...J.edgeSources,
...J.junctionSources]);E=(await this._queryRulesTable(z)).map(J=>this._hydrateRuleInfo(z,F,J));return new n({layer:z,rules:E})};D._queryRulesTable=async function(z){const E=new u({where:"1\x3d1",outFields:["*"]});return(await l.queryAllJSON(z,E)).features};D._hydrateRuleInfo=function(z,E,F){var J=z.fieldsIndex;z=J.get("RULETYPE");var C=J.get("CREATIONDATE"),M=J.get("FROMNETWORKSOURCEID"),O=J.get("FROMASSETGROUP"),G=J.get("FROMASSETTYPE"),Q=J.get("FROMTERMINALID"),V=J.get("TONETWORKSOURCEID"),R=J.get("TOASSETGROUP");
const da=J.get("TOASSETTYPE"),N=J.get("TOTERMINALID"),ea=J.get("VIANETWORKSOURCEID"),fa=J.get("VIAASSETGROUP"),aa=J.get("VIAASSETTYPE");J=J.get("VIATERMINALID");z=F.attributes[z.name];C=new Date(F.attributes[C.name]);F=[{networkSourceId:F.attributes[M.name],assetGroupId:F.attributes[O.name],assetTypeId:F.attributes[G.name],terminalId:F.attributes[Q.name]},{networkSourceId:F.attributes[V.name],assetGroupId:F.attributes[R.name],assetTypeId:F.attributes[da.name],terminalId:F.attributes[N.name]},{networkSourceId:F.attributes[ea.name],
assetGroupId:F.attributes[fa.name],assetTypeId:F.attributes[aa.name],terminalId:F.attributes[J.name]}];let U;(function(T){T[T.from=0]="from";T[T.to=1]="to";T[T.via=2]="via"})(U||(U={}));M={ruleType:z,creationDate:C};for(const T of[U.from,U.to,U.via]){if(z!==B.RuleType.RTEdgeJunctionEdgeConnectivity&&T===U.via)continue;const X=F[T];O=E.find(Y=>Y.sourceId===X.networkSourceId);G=O?.assetGroups.find(Y=>Y.assetGroupCode===X.assetGroupId);Q=G?.assetTypes.find(Y=>Y.assetTypeCode===X.assetTypeId);V=this._getTerminal(z,
Q,X);if(z===B.RuleType.RTContainment||z===B.RuleType.RTAttachment)V=null;R="";switch(T){case U.from:R="from";break;case U.to:R="to";break;case U.via:R="via"}M[`${R}NetworkSource`]=O;M[`${R}AssetGroup`]=G;M[`${R}AssetType`]=Q;M[`${R}Terminal`]=V}return M};D._getTerminal=function(z,E,F){if(z===B.RuleType.RTAttachment||z===B.RuleType.RTContainment)return null;const J=E?.terminalConfigurationId;return this.terminalConfigurations?.find(C=>C.id===J)?.terminals?.find(C=>C.id===F.terminalId)??null};f._createClass(L,
[{key:"serviceTerritoryFeatureLayerId",get:function(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}},{key:"networkSystemLayers",get:function(){return new p({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:
null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null})}},{key:"rulesTableId",get:function(){a.deprecatedProperty(H,"rulesTableId",{replacement:"networkSystemLayers.rulesTableId",version:"4.25"});return this.sourceJSON?.systemLayers.rulesTableId}},{key:"rulesTableUrl",get:function(){a.deprecatedProperty(H,"rulesTableUrl",{replacement:"networkSystemLayers.rulesTableUrl",
version:"4.25"});return this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.rulesTableId}`:null}},{key:"subnetworksTableId",get:function(){a.deprecatedProperty(H,"subnetworksTableId",{replacement:"networkSystemLayers.subnetworksTableId",version:"4.25"});return this.sourceJSON?.systemLayers.subnetworksTableId}},{key:"subnetworksTableUrl",get:function(){a.deprecatedProperty(H,"subnetworksTableUrl",{replacement:"networkSystemLayers.subnetworksTableUrl",version:"4.25"});return this.sourceJSON?
`${this.featureServiceUrl}/${this.networkSystemLayers.subnetworksTableId}`:null}},{key:"terminalConfigurations",get:function(){return this.dataElement?.terminalConfigurations.map(z=>x.fromJSON(z))||[]}},{key:"domainNetworkNames",get:function(){return this.dataElement?.domainNetworks.map(z=>z.domainNetworkName)||[]}},{key:"_utilityLayerList",get:function(){const z=new Set;this.dataElement?.domainNetworks?.map(E=>{E.edgeSources.map(F=>{z.add(F.layerId)});E.junctionSources.map(F=>{z.add(F.layerId)})});
return z}}]);return L}(e);c.__decorate([g.property({type:[r],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],d.prototype,"sharedNamedTraceConfigurations",void 0);c.__decorate([g.property({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],d.prototype,"type",void 0);c.__decorate([g.property({readOnly:!0})],d.prototype,"serviceTerritoryFeatureLayerId",null);c.__decorate([g.property({readOnly:!0})],
d.prototype,"networkSystemLayers",null);c.__decorate([g.property({readOnly:!0})],d.prototype,"rulesTableId",null);c.__decorate([g.property({readOnly:!0})],d.prototype,"rulesTableUrl",null);c.__decorate([g.property({readOnly:!0})],d.prototype,"subnetworksTableId",null);c.__decorate([g.property({readOnly:!0})],d.prototype,"subnetworksTableUrl",null);c.__decorate([g.property({readOnly:!0})],d.prototype,"terminalConfigurations",null);c.__decorate([g.property({readOnly:!0})],d.prototype,"domainNetworkNames",
null);return d=c.__decorate([m.subclass("esri.networks.UtilityNetwork")],d)})},"esri/layers/support/featureQueryAll":function(){define(["exports","../../core/maybe","../../rest/support/Query"],function(f,c,a){function d(w){return q(w)*g(w)}function g(w){return w.capabilities.query.maxRecordCount||2E3}function q(w){return w.capabilities.query.supportsMaxRecordCountFactor?a.MAX_MAX_RECORD_COUNT_FACTOR:1}f.getMaxRecordCountFactor=q;f.getMaximumQuerySize=d;f.getMaximumRecordCount=g;f.queryAllJSON=async function(w,
t,m){t=t.clone();w.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=q(w));const k=d(w),l=w.capabilities.query.supportsPagination;t.start=0;t.num=k;let e=null;for(;;){const n=await w.source.queryFeaturesJSON(t,m);c.isNone(e)?e=n:e.features=e.features.concat(n.features);e.exceededTransferLimit=n.exceededTransferLimit;if(!l||!n.exceededTransferLimit)break;t.start+=k}return e};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/networks/Network":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/Loadable ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../layers/mixins/EditBusLayer ../layers/support/arcgisLayerUrl ./support/TopologyValidationJobInfo ./support/utils ../rest/networks/support/QueryNamedTraceConfigurationsParameters".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l,e,n,r,p,x,B,u,H,D,L,I,z){q=function(E){function F(C){C=J.call(this,C);C.id=null;C.title=null;C.layerUrl=null;C.dataElement=null;C.fullExtent=null;C.spatialReference=null;C.type=null;C.sourceJSON=null;return C}c._inherits(F,E);var J=c._createSuper(F);F.fromPortalItem=function(C){return I.networkFromPortalItem(C)};E=F.prototype;E.initialize=function(){this.when().catch(C=>{k.isAbortError(C)||w.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??
"no title"}', id: '${this.id??"no id"}')`,{error:C})})};E.load=async function(C){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),C));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,C));return this};E.getLayerIdBySourceId=function(C){if(this.dataElement){const M=this.dataElement.domainNetworks;for(const O of M){for(const G of O.edgeSources??[])if(G.sourceId===C)return G.layerId;for(const G of O.junctionSources??[])if(G.sourceId===C)return G.layerId}}return null};
E.queryNamedTraceConfigurations=async function(C,M){const {queryNamedTraceConfigurations:O}=await new Promise((Q,V)=>f(["../rest/networks/queryNamedTraceConfigurations"],Q,V)),G=this.networkServiceUrl;C=new z({...C});return(await O(G,C,{...M}))?.namedTraceConfigurations??null};E.validateTopology=async function(C,M){if(!C.validateArea)throw new g("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const {validateNetworkTopology:O}=
await new Promise((G,Q)=>f(["../rest/networks/validateNetworkTopology"],G,Q));C=await O(this.networkServiceUrl,C,{...M});C?.serviceEdits&&H.editEventBus.emit("edits",{serviceUrl:this.featureServiceUrl??"",layerId:null,event:{edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:C.serviceEdits,exceededTransferLimit:!1}});return C};E.submitTopologyValidationJob=async function(C,M){if(!C.validateArea)throw new g("network:undefined-validateArea",
"the network must have validateArea defined in the validate network topology parameters.");if(!C.gdbVersion)throw new g("network:undefined-gdb-version","version must be defined");const {submitValidateNetworkTopologyJob:O}=await new Promise((G,Q)=>f(["../rest/networks/validateNetworkTopology"],G,Q));C=await O(this.networkServiceUrl,C,{...M});return new L({statusUrl:C,featureServiceUrl:this.featureServiceUrl})};E._fetchLayerMetaData=async function(C,M){C=await d(C,{responseType:"json",query:{f:"json"},
...M});this.sourceJSON=C.data;this.read(C.data,{origin:"service"})};E._fetchDataElement=async function(C,M,O){this.dataElement||(C=await d(`${C}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([M]),f:"json"},...O}).then(G=>G.data.layerDataElements?.[0]))&&this.read(C,{origin:"service"})};c._createClass(F,[{key:"datasetName",get:function(){return this.dataElement?.name??null}},{key:"owner",get:function(){return this.dataElement?.userIdentity??null}},{key:"schemaGeneration",get:function(){return this.dataElement?.schemaGeneration??
null}},{key:"parsedUrl",get:function(){return l.urlToObject(this.layerUrl)}},{key:"featureServiceUrl",get:function(){const C=this.parsedUrl&&D.parse(this.parsedUrl.path);return t.isSome(C)?C.url.path:null}},{key:"networkServiceUrl",get:function(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}},{key:"layerId",get:function(){const C=this.parsedUrl&&D.parse(this.parsedUrl.path);return t.isSome(C)?C.sublayer:null}},{key:"networkSystemLayers",
get:function(){return null}}]);return F}(m.MultiOriginJSONMixin(q));a.__decorate([e.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],q.prototype,"id",void 0);a.__decorate([e.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],q.prototype,"title",void 0);a.__decorate([e.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},
write:{target:"url",isRequired:!0}}},read:!1}})],q.prototype,"layerUrl",void 0);a.__decorate([e.property({type:Object,json:{origins:{service:{read:!0}},read:!1}})],q.prototype,"dataElement",void 0);a.__decorate([e.property({type:B,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],q.prototype,"fullExtent",void 0);a.__decorate([e.property({type:u,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],q.prototype,"spatialReference",void 0);a.__decorate([e.property({type:["utility",
"trace"],readOnly:!0,json:{read:!1,write:!1}})],q.prototype,"type",void 0);a.__decorate([e.property({readOnly:!0})],q.prototype,"datasetName",null);a.__decorate([e.property({readOnly:!0})],q.prototype,"owner",null);a.__decorate([e.property({readOnly:!0})],q.prototype,"schemaGeneration",null);a.__decorate([e.property({readOnly:!0})],q.prototype,"parsedUrl",null);a.__decorate([e.property({readOnly:!0})],q.prototype,"featureServiceUrl",null);a.__decorate([e.property({readOnly:!0})],q.prototype,"networkServiceUrl",
null);a.__decorate([e.property({readOnly:!0})],q.prototype,"layerId",null);a.__decorate([e.property()],q.prototype,"sourceJSON",void 0);a.__decorate([e.property({readOnly:!0})],q.prototype,"networkSystemLayers",null);return q=a.__decorate([x.subclass("esri.networks.Network")],q)})},"esri/networks/support/TopologyValidationJobInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/mixins/EditBusLayer ../../rest/networks/support/ValidateNetworkTopologyResult".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l,e,n){d=g.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});n=function(r){function p(B){B=x.call(this,B);B.featureServiceUrl=null;B.statusUrl=null;B.status=null;B.submissionTime=null;B.lastUpdatedTime=null;B._timer=void 0;return B}f._inherits(p,r);var x=f._createSuper(p);r=p.prototype;r.destroy=function(){clearInterval(this._timer)};r.checkJobStatus=async function(B){({data:B}=await a(this.statusUrl,{...B,query:{f:"json"}}));this.read(B);
(this.serviceEdits||this.exceededTransferLimit)&&this.featureServiceUrl&&e.editEventBus.emit("edits",{serviceUrl:this.featureServiceUrl??"",layerId:null,event:{edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0}});return this};r.waitForJobCompletion=async function(B={}){const {interval:u=1E3,statusCallback:H}=B;return new Promise((D,L)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||
L(q.createAbortError());this.checkJobStatus().then(I=>{({status:I}=I);this.status=I;switch(I){case "job-succeeded":this._clearTimer();D(this);break;case "job-waiting":case "job-executing":H&&H(this)}},I=>{this._clearTimer();L(I)})},u)})};r._clearTimer=function(){clearInterval(this._timer);this._timer=void 0};return f._createClass(p)}(n);c.__decorate([w.property()],n.prototype,"featureServiceUrl",void 0);c.__decorate([w.property({type:String,json:{write:!0}})],n.prototype,"statusUrl",void 0);c.__decorate([k.enumeration(d)],
n.prototype,"status",void 0);c.__decorate([w.property({type:Date,json:{type:Number,write:{writer:(r,p)=>{p.submissionTime=r?r.getTime():null}}}})],n.prototype,"submissionTime",void 0);c.__decorate([w.property({type:Date,json:{type:Number,write:{writer:(r,p)=>{p.lastUpdatedTime=r?r.getTime():null}}}})],n.prototype,"lastUpdatedTime",void 0);return n=c.__decorate([l.subclass("esri.networks.support.TopologyValidationJobInfo")],n)})},"esri/rest/networks/support/ValidateNetworkTopologyResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.moment=null;e.fullUpdate=!1;e.validateErrorsCreated=!1;e.dirtyAreaCount=null;e.exceededTransferLimit=null;e.serviceEdits=null;return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a.JSONSupport);c.__decorate([d.property({type:Date,json:{type:Number,write:{writer:(m,k)=>{k.moment=m?m.getTime():null}}}})],a.prototype,"moment",void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"fullUpdate",
void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"validateErrorsCreated",void 0);c.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"dirtyAreaCount",void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exceededTransferLimit",void 0);c.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"serviceEdits",void 0);return a=c.__decorate([t.subclass("esri.rest.networks.support.ValidateNetworkTopologyResult")],a)})},
"esri/networks/support/utils":function(){define("require exports ../../request ../../core/Error ../../layers/support/featureQueryAll ../../portal/PortalItem ../../rest/support/FeatureSet".split(" "),function(f,c,a,d,g,q,w){async function t(m,k){return"Utility Network Layer"===m?({default:m}=await new Promise((l,e)=>f(["../UtilityNetwork"],n=>l(Object.freeze(Object.defineProperty({__proto__:null,default:n},Symbol.toStringTag,{value:"Module"}))),e)),new m({layerUrl:k})):null}c.getFeaturesFromLayers=
async function(m){const k=m.layers,l=m.layerInfos,e=m.returnGeometry||!1,n=m.outSpatialReference;await Promise.all(k.map(r=>r.load()));return(await Promise.all(k.map(async r=>{var p=l.find(B=>B.layerUrl===r.parsedUrl?.path);if(!p||!p.objectIds?.length)return{layer:r,featureSet:void 0};const x=r.createQuery();x.returnGeometry=e;x.outFields=p.outFields||["*"];x.outSpatialReference=n;x.gdbVersion=r.gdbVersion;x.objectIds=p.objectIds;p=w.fromJSON(await g.queryAllJSON(r,x));return{layer:r,featureSet:p}}))).filter(r=>
void 0!==r.featureSet)};c.getObjectIdsFromElements=function(m,k){const l=[],e=new Map;for(const r of k){k=m.getLayerIdBySourceId(r.networkSourceId);if(null==k)continue;let p=e.get(k);void 0===p&&(p=[]);p.push(r.objectId);e.set(k,p)}const n=m.featureServiceUrl;e.forEach((r,p)=>l.push({layerUrl:`${n}/${p}`,objectIds:r}));return l};c.networkFromPortalItem=async function(m){m="portalItem"in m?m:{portalItem:m};!m.portalItem||m.portalItem instanceof q||(m={...m,portalItem:new q(m.portalItem)});m=m.portalItem;
await m.load();if("Feature Service"!==m.type)throw new d("portal:unknown-item-type","Unknown item type '${type}'",{type:m.type});m=m.url;var k=await a(m,{responseType:"json",query:{f:"json"}});return k.data.type&&k.data.type.includes("Network Layer")?t(k.data.type,m):k.data.layers&&(k=k.data.layers.find(l=>l.type.includes("Network Layer")))?t(k.type,`${m}/${k.id}`):null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/networks/support/QueryNamedTraceConfigurationsParameters":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.globalIds=[];e.creators=[];e.tags=[];e.names=[];return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a.JSONSupport);c.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"globalIds",void 0);c.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"creators",void 0);c.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"tags",void 0);c.__decorate([d.property({type:[String],
json:{write:!0}})],a.prototype,"names",void 0);return a=c.__decorate([t.subclass("esri.rest.networks.support.QueryNamedTraceConfigurationsParameters")],a)})},"esri/networks/RulesTable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/JSONSupport ../core/Loadable ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./support/typeUtils".split(" "),function(f,
c,a,d,g,q,w,t,m,k,l){d=function(e){function n(p){p=r.call(this,p);p.request=a;return p}f._inherits(n,e);var r=f._createSuper(n);e=n.prototype;e.initialize=function(){};e.load=async function(p){p=this.layer.load(p).then(()=>this._initializeRulesTable());this.addResolvingPromise(p);return this};e.getFeatureSQL=function(p,x){var B=p.layerId.toString(),u=p.fieldsIndex?.normalizeFieldName("assetGroup");p=p.fieldsIndex?.normalizeFieldName("assetType");u=u?x.attributes[u]:null;x=p?x.attributes[p]:null;if(B=
this.rulesHash[B])if(B=B.assetGroupHash[u])return B.assetTypeHash[x]||null;return null};e._initializeRulesTable=async function(){const p={};let x;var B=x||(x={});B[B.from=0]="from";B[B.to=1]="to";B[B.via=2]="via";B=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const z of this.rules)if(z.ruleType===
l.RuleType.RTJunctionJunctionConnectivity||z.ruleType===l.RuleType.RTJunctionEdgeConnectivity||z.ruleType===l.RuleType.RTEdgeJunctionEdgeConnectivity){var u=[[x.from,x.to],[x.to,x.from]];z.ruleType===l.RuleType.RTEdgeJunctionEdgeConnectivity&&(u=[[x.from,x.via],[x.via,x.from],[x.to,x.via],[x.via,x.to]]);for(const E of u){u=E.shift();var H=E.shift(),D=!1;switch(z.ruleType){case l.RuleType.RTEdgeJunctionEdgeConnectivity:D=u===x.from||u===x.to;break;case l.RuleType.RTJunctionEdgeConnectivity:D=u===x.to}var L=
B[u];u=z[L.networkSourceId].layerId.toString();const F=z[L.assetGroupId]?.assetGroupCode?.toString();L=z[L.assetTypeId]?.assetTypeCode?.toString();var I=B[H];H=z[I.networkSourceId].layerId.toString();const J=z[I.assetGroupId]?.assetGroupCode?.toString();I=z[I.assetTypeId];const C=I?.assetTypeCode?.toString(),M=p[u]??{assetGroupHash:{}};if(!(F&&L&&J&&C))continue;const O=M.assetGroupHash[F]??{assetTypeHash:{}},G=O.assetTypeHash[L]??{};G[H]=G[H]??{};D&&(G[u]=G[u]??{},D=`(assetgroup = ${F} AND assettype = ${L})`,
G[u].anyVertex=G[u].anyVertex?`${G[u].anyVertex}`:`${D}`,"esriNECPEndVertex"===I.connectivityPolicy&&(G[u].endVertex=G[u]?.endVertex?`${G[u].endVertex}`:`${D}`));D=`(assetgroup = ${J} AND assettype = ${C})`;G[H].anyVertex=G[H]?.anyVertex?`${G[H].anyVertex} OR ${D}`:`${D}`;"esriNECPEndVertex"===I.connectivityPolicy&&(G[H].endVertex=G[H]?.endVertex?`${G[H].endVertex} OR ${D}`:`${D}`);O.assetTypeHash[L]=G;M.assetGroupHash[F]=O;p[u]=M}}this.rulesHash=p};return f._createClass(n)}(d.JSONSupportMixin(g));
c.__decorate([q.property({constructOnly:!0})],d.prototype,"layer",void 0);c.__decorate([q.property({constructOnly:!0})],d.prototype,"rules",void 0);c.__decorate([q.property()],d.prototype,"rulesHash",void 0);c.__decorate([q.property({constructOnly:!0})],d.prototype,"request",void 0);return d=c.__decorate([k.subclass("esri.networks.RulesTable")],d)})},"esri/networks/support/typeUtils":function(){define(["exports","../../core/jsonMap"],function(f,c){f.RuleType=void 0;var a=f.RuleType||(f.RuleType={});
a[a.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity";a[a.RTContainment=2]="RTContainment";a[a.RTAttachment=3]="RTAttachment";a[a.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity";a[a.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";a=new c.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});const d=
new c.JSONMap({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});c=new c.JSONMap({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});f.associationTypeKebabDict=d;f.traceTypeKebabDict=a;f.validationTypeKebabDict=c;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},
"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),function(f,c,a,d,g,q,w,t,m,k,l,e){a=function(n){function r(x){x=
p.call(this,x);x.globalId=null;x.title=null;x.traceConfiguration=null;x.creationDate=null;x.creator=null;x.description=null;x.minStartingPoints=null;x.resultTypes=[];x.tags=[];x.traceType=null;return x}f._inherits(r,n);var p=f._createSuper(r);r.prototype.readTraceConfiguration=function(x,B){return void 0!==x.tierName?e.fromJSON(x):k.fromJSON(x)};return f._createClass(r)}(a.MultiOriginJSONSupport);c.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",
isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],a.prototype,"globalId",void 0);c.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],a.prototype,"title",void 0);c.__decorate([d.property({type:k,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"traceConfiguration",
void 0);c.__decorate([t.reader("service","traceConfiguration")],a.prototype,"readTraceConfiguration",null);c.__decorate([d.property({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creationDate",void 0);c.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creator",void 0);c.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"description",void 0);c.__decorate([d.property({type:["none",
"one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],a.prototype,"minStartingPoints",void 0);c.__decorate([d.property({type:[Object],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"resultTypes",void 0);c.__decorate([d.property({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"tags",void 0);c.__decorate([d.property({type:l.traceTypeKebabDict.apiValues,json:{type:l.traceTypeKebabDict.jsonValues,
origins:{service:{read:l.traceTypeKebabDict.read,write:l.traceTypeKebabDict.write}},read:!1}})],a.prototype,"traceType",void 0);return a=c.__decorate([m.subclass("esri.networks.support.NamedTraceConfiguration")],a)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.conditionBarriers=[];e.outputConditions=[];e.functions=[];e.functionBarriers=[];e.traversabilityScope=null;e.shortestPathNetworkAttributeName=null;e.includeBarriers=null;e.validateConsistency=null;e.ignoreBarriersAtStartingPoints=null;return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a.JSONSupport);c.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0);c.__decorate([d.property({type:[Object],
json:{write:!0}})],a.prototype,"outputConditions",void 0);c.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0);c.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functionBarriers",void 0);c.__decorate([d.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0);c.__decorate([d.property({type:Boolean,
json:{write:!0}})],a.prototype,"includeBarriers",void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0);return a=c.__decorate([t.subclass("esri.networks.support.TraceConfiguration")],a)})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),
function(f,c,a,d,g,q,w,t){d=function(m){function k(e){e=l.call(this,e);e.filterBarriers=[];e.domainNetworkName=null;e.filterBitsetNetworkAttributeName=null;e.filterFunctionBarriers=[];e.filterScope=null;e.includeContainers=null;e.includeContent=null;e.includeIsolated=null;e.includeStructures=null;e.includeUpToFirstSpatialContainer=null;e.nearestNeighbor=null;e.outputFilterCategories=[];e.outputFilters=[];e.propagators=[];e.subnetworkName=null;e.targetTierName=null;e.tierName=null;e.validateLocatability=
null;return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(t);c.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterBarriers",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"domainNetworkName",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"filterBitsetNetworkAttributeName",void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterFunctionBarriers",void 0);c.__decorate([a.property({type:["junctions",
"edges","junctionsAndEdges"],json:{write:!0}})],d.prototype,"filterScope",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContainers",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContent",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeIsolated",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeStructures",void 0);c.__decorate([a.property({type:Boolean,
json:{write:!0}})],d.prototype,"includeUpToFirstSpatialContainer",void 0);c.__decorate([a.property({type:Object,json:{write:!0}})],d.prototype,"nearestNeighbor",void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"outputFilterCategories",void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"outputFilters",void 0);c.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"propagators",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],
d.prototype,"subnetworkName",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"targetTierName",void 0);c.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"tierName",void 0);c.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"validateLocatability",void 0);return d=c.__decorate([w.subclass("esri.networks.support.UNTraceConfiguration")],d)})},"esri/networks/support/NetworkSystemLayers":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.rulesTableId=null;e.rulesTableUrl=null;e.subnetworksTableId=null;e.subnetworksTableUrl=null;e.dirtyAreasLayerId=null;e.dirtyAreasLayerUrl=null;return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a);c.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableId",void 0);c.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableUrl",void 0);c.__decorate([d.property({constructOnly:!0})],
a.prototype,"subnetworksTableId",void 0);c.__decorate([d.property({constructOnly:!0})],a.prototype,"subnetworksTableUrl",void 0);c.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerId",void 0);c.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerUrl",void 0);return a=c.__decorate([t.subclass("esri.networks.support.NetworkSystemLayers")],a)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),
function(f,c,a,d,g,q,w,t,m,k){a=new a.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});d=function(l){function e(r){r=n.call(this,r);r.defaultConfiguration=null;r.id=null;r.name=null;r.terminals=[];r.traversabilityModel=null;return r}f._inherits(e,l);var n=f._createSuper(e);return f._createClass(e)}(d.JSONSupport);c.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"defaultConfiguration",void 0);c.__decorate([g.property({type:Number,json:{read:{source:"terminalConfigurationId"},
write:{target:"terminalConfigurationId"}}})],d.prototype,"id",void 0);c.__decorate([g.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],d.prototype,"name",void 0);c.__decorate([g.property({type:[k],json:{write:!0}})],d.prototype,"terminals",void 0);c.__decorate([g.property({type:a.apiValues,json:{type:a.jsonValues,read:a.read,write:a.write}})],d.prototype,"traversabilityModel",void 0);return d=c.__decorate([m.subclass("esri.networks.support.TerminalConfiguration")],
d)})},"esri/networks/support/Terminal":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.id=null;e.name=null;return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a.JSONSupport);
c.__decorate([d.property({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],a.prototype,"id",void 0);c.__decorate([d.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],a.prototype,"name",void 0);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"isUpstreamTerminal",void 0);return a=c.__decorate([t.subclass("esri.networks.support.Terminal")],a)})},"esri/rest/geometryService/project":function(){define("exports ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(f,c,a,d,g,q,w){const t=a.ensureType(w);f.project=async function(m,k,l){k=t(k);m=g.parseUrl(m);const e={...m.query,f:"json",...k.toJSON()},n=k.outSpatialReference,r=d.getJsonType(k.geometries[0]);k=g.asValidOptions(e,l);return c(m.path+"/project",k).then(({data:{geometries:p}})=>q.decodeGeometries(p,r,n))};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(f,c,a,d,g,q,w,t,m){a=function(k){function l(n){n=e.call(this,n);n.geometries=[];n.outSpatialReference=null;n.transformation=null;n.transformForward=null;return n}f._inherits(l,k);var e=f._createSuper(l);l.prototype.toJSON=function(){const n=this.geometries.map(x=>x.toJSON()),r=this.geometries[0],p={};p.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());p.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference.toJSON());p.geometries=JSON.stringify({geometryType:m.getJsonType(r),
geometries:n});this.transformation&&(p.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(p.transformForward=this.transformForward);return p};return f._createClass(l)}(a.JSONSupport);c.__decorate([d.property()],a.prototype,"geometries",void 0);c.__decorate([d.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);c.__decorate([d.property()],a.prototype,"transformation",void 0);c.__decorate([d.property()],a.prototype,
"transformForward",void 0);return a=c.__decorate([t.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(f,
c,a,d,g,q,w,t,m,k,l){a=function(e){function n(p){p=r.call(this,p);p.levelLayer=null;p.facilityLayer=null;p.siteLayer=null;return p}f._inherits(n,e);var r=f._createSuper(n);return f._createClass(n)}(a.JSONSupport);c.__decorate([d.property({type:k,json:{write:!0}})],a.prototype,"levelLayer",void 0);c.__decorate([d.property({type:m,json:{write:!0}})],a.prototype,"facilityLayer",void 0);c.__decorate([d.property({type:l,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=c.__decorate([t.subclass("esri.support.MapFloorInfo")],
a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.facilityIdField=null;e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}
f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a.JSONSupport);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);c.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},
write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=c.__decorate([t.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.facilityIdField=null;e.layerId=null;e.levelIdField=null;e.levelNumberField=null;e.longNameField=null;e.shortNameField=null;e.sublayerId=null;e.verticalOrderField=null;return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a.JSONSupport);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",
void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"levelIdField",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);c.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,
write:!1}}}})],a.prototype,"sublayerId",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=c.__decorate([t.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t){a=function(m){function k(e){e=l.call(this,e);e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}f._inherits(k,m);var l=f._createSuper(k);return f._createClass(k)}(a.JSONSupport);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);c.__decorate([d.property({type:Number,
json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=c.__decorate([t.subclass("esri.layers.support.SiteLayerInfo")],a)})},"esri/webdoc/GeotriggersInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./geotriggersInfo/support/geotriggerTypes".split(" "),
function(f,c,a,d,g,q,w,t,m,k){a=function(l){function e(r){r=n.call(this,r);r.geotriggers=null;return r}f._inherits(e,l);var n=f._createSuper(e);return f._createClass(e)}(a.ClonableMixin(d.JSONSupport));c.__decorate([g.property({types:[k.types],json:{write:{isRequired:!0}}})],a.prototype,"geotriggers",void 0);return a=c.__decorate([m.subclass("esri.webdoc.GeotriggersInfo")],a)})},"esri/webdoc/geotriggersInfo/support/geotriggerTypes":function(){define(["exports","../FenceGeotrigger","../Geotrigger"],
function(f,c,a){f.types={base:a,key:"type",typeMap:{fence:c}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/geotriggersInfo/FenceGeotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./DeviceLocationFeed ./FeatureFenceParameters ./Geotrigger ./GeotriggerNotificationOptions ./support/typeUtils".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l,e,n){d=function(r){function p(B){B=x.call(this,B);B.enterExitRule="enter-contains-and-exit-does-not-intersect";B.feed=null;B.feedAccuracyMode="use-geometry";B.fenceNotificationRule=null;B.fenceParameters=null;B.name=null;B.notificationOptions=null;B.type="fence";return B}f._inherits(p,r);var x=f._createSuper(p);return f._createClass(p)}(l);c.__decorate([w.enumeration(n.enterExitRuleKebabDict)],d.prototype,"enterExitRule",void 0);c.__decorate([a.property({type:m,json:{write:{isRequired:!0}}})],
d.prototype,"feed",void 0);c.__decorate([w.enumeration(n.feedAccuracyModeKebabDict)],d.prototype,"feedAccuracyMode",void 0);c.__decorate([a.property({type:n.fenceNotificationRuleKebabDict.apiValues,json:{type:n.fenceNotificationRuleKebabDict.jsonValues,read:n.fenceNotificationRuleKebabDict.read,write:{writer:n.fenceNotificationRuleKebabDict.write,isRequired:!0}}})],d.prototype,"fenceNotificationRule",void 0);c.__decorate([a.property({type:k,json:{write:{isRequired:!0}}})],d.prototype,"fenceParameters",
void 0);c.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);c.__decorate([a.property({type:e,json:{write:!0}})],d.prototype,"notificationOptions",void 0);c.__decorate([w.enumeration({fence:"fence"},{readOnly:!0})],d.prototype,"type",void 0);return d=c.__decorate([t.subclass("esri.webdoc.geotriggersInfo.FenceGeotrigger")],d)})},"esri/webdoc/geotriggersInfo/DeviceLocationFeed":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l){d=new d.JSONMap({deviceLocation:"device-location"});a=function(e){function n(p){p=r.call(this,p);p.filterExpression=null;p.type="device-location";return p}f._inherits(n,e);var r=f._createSuper(n);return f._createClass(n)}(a.ClonableMixin(g.JSONSupport));c.__decorate([q.property({type:l,json:{write:!0}})],a.prototype,"filterExpression",void 0);c.__decorate([q.property({type:d.apiValues,readOnly:!0,json:{type:d.jsonValues,read:d.read,write:d.write}})],a.prototype,"type",
void 0);return a=c.__decorate([k.subclass("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],a)})},"esri/webdoc/geotriggersInfo/ExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,a,d,g,q,w,t,m){a=function(k){function l(n){n=
e.call(this,n);n.expression=null;n.returnType="string";n.title=null;return n}f._inherits(l,k);var e=f._createSuper(l);return f._createClass(l)}(a.ClonableMixin(d.JSONSupport));c.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"expression",void 0);c.__decorate([g.property({type:["number","string"],json:{write:!0}})],a.prototype,"returnType",void 0);c.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=c.__decorate([m.subclass("esri.webdoc.geotriggersInfo.ExpressionInfo")],
a)})},"esri/webdoc/geotriggersInfo/FeatureFenceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./FeatureFilter ./FeatureLayerSource".split(" "),function(f,c,a,d,g,q,w,t,m,k,l,e){a=function(n){function r(x){x=
p.call(this,x);x.fenceSource=null;x.filter=null;x.bufferDistance=null;x.type="features";return x}f._inherits(r,n);var p=f._createSuper(r);return f._createClass(r)}(a.ClonableMixin(d.JSONSupport));c.__decorate([g.property({type:e,json:{write:{isRequired:!0}}})],a.prototype,"fenceSource",void 0);c.__decorate([g.property({type:l,json:{write:!0}})],a.prototype,"filter",void 0);c.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"bufferDistance",void 0);c.__decorate([m.enumeration({features:"features"},
{readOnly:!0})],a.prototype,"type",void 0);return a=c.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],a)})},"esri/webdoc/geotriggersInfo/FeatureFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l){d=function(e){function n(p){p=r.call(this,p);p.geometry=null;p.where=null;return p}f._inherits(n,e);var r=f._createSuper(n);return f._createClass(n)}(d.ClonableMixin(g.JSONSupport));c.__decorate([q.property({types:a.geometryTypes,json:{read:l.fromJSON,write:!0}})],d.prototype,"geometry",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"where",void 0);return d=c.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureFilter")],d)})},"esri/webdoc/geotriggersInfo/FeatureLayerSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t,m,k){a=function(l){function e(r){r=n.call(this,r);r.layerId=null;r.layerUrl=null;r.type="feature-layer";return r}f._inherits(e,l);var n=f._createSuper(e);return f._createClass(e)}(a.ClonableMixin(d.JSONSupport));c.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],a.prototype,"layerId",void 0);c.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],a.prototype,
"layerUrl",void 0);c.__decorate([m.enumeration({featureLayer:"feature-layer"},{readOnly:!0})],a.prototype,"type",void 0);return a=c.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureLayerSource")],a)})},"esri/webdoc/geotriggersInfo/Geotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l){a=function(e){function n(p){p=r.call(this,p);p.type="fence";return p}f._inherits(n,e);var r=f._createSuper(n);return f._createClass(n)}(a.ClonableMixin(d.JSONSupport));c.__decorate([k.enumeration({fence:"fence"},{readOnly:!0})],a.prototype,"type",void 0);return a=c.__decorate([l.subclass("esri.webdoc.geotriggersInfo.Geotrigger")],a)})},"esri/webdoc/geotriggersInfo/GeotriggerNotificationOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(f,c,a,d,g,q,w,t,m,k){a=function(l){function e(r){r=n.call(this,r);r.expressionInfo=null;r.requestedActions=null;return r}f._inherits(e,l);var n=f._createSuper(e);return f._createClass(e)}(a.ClonableMixin(d.JSONSupport));c.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"expressionInfo",void 0);c.__decorate([g.property({type:[String],json:{write:!0}})],a.prototype,"requestedActions",void 0);return a=c.__decorate([m.subclass("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],
a)})},"esri/webdoc/geotriggersInfo/support/typeUtils":function(){define(["exports","../../../core/jsonMap"],function(f,c){const a=new c.JSONMap({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),d=new c.JSONMap({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"});c=new c.JSONMap({enter:"enter",
enterOrExit:"enter-or-exit",exit:"exit"});f.enterExitRuleKebabDict=a;f.feedAccuracyModeKebabDict=d;f.fenceNotificationRuleKebabDict=c;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/RangeInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(f,c,a,d,g,q,w){var t;a=t=function(m){function k(e){e=
l.call(this,e);e.activeRange=null;e.currentRangeExtent=null;e.fullRangeExtent=null;return e}f._inherits(k,m);var l=f._createSuper(k);k.prototype.clone=function(){return new t(d.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))};return f._createClass(k)}(a.JSONSupport);c.__decorate([g.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a.prototype,"activeRange",
void 0);c.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"currentRangeExtent",void 0);c.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"fullRangeExtent",void 0);return a=t=c.__decorate([w.subclass("esri.webdoc.RangeInfo")],a)})},"esri/webdoc/Widgets":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),
function(f,c,a,d,g,q,w,t,m,k){var l;a=l=function(e){function n(p){p=r.call(this,p);p.range=null;p.timeSlider=null;p.floorFilter=null;return p}f._inherits(n,e);var r=f._createSuper(n);n.prototype.clone=function(){return new l(d.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))};return f._createClass(n)}(a.JSONSupport);c.__decorate([g.property({type:m,json:{write:!0}})],a.prototype,"range",void 0);c.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"timeSlider",
void 0);c.__decorate([g.property({type:t,json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=l=c.__decorate([w.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,a,d,g,q,w){var t;a=t=function(m){function k(e){e=
l.call(this,e);e.enabled=!1;e.longNames=!1;e.minimized=!1;e.pinnedLevels=!1;e.site=null;e.facility=null;e.level=null;return e}f._inherits(k,m);var l=f._createSuper(k);k.prototype.clone=function(){return new t(d.clone({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))};return f._createClass(k)}(a.JSONSupport);c.__decorate([g.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],
a.prototype,"enabled",void 0);c.__decorate([g.property({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);c.__decorate([g.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],a.prototype,"minimized",void 0);c.__decorate([g.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);c.__decorate([g.property({type:String,json:{read:{source:"site"},
write:{target:"site"}}})],a.prototype,"site",void 0);c.__decorate([g.property({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);c.__decorate([g.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],a.prototype,"level",void 0);return a=t=c.__decorate([w.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t,m){var k;a=new a.JSONMap({slider:"slider",picker:"picker"});d=k=function(l){function e(r){r=n.call(this,r);r.interactionMode=null;r.numStops=null;r.stopInterval=null;return r}f._inherits(e,l);var n=f._createSuper(e);e.prototype.clone=function(){return new k({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})};return f._createClass(e)}(d.JSONSupport);c.__decorate([g.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,
default:null,read:{reader:a.read},write:{isRequired:!0,writer:a.write}}})],d.prototype,"interactionMode",void 0);c.__decorate([g.property({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const l=null!=this.stopInterval;return{enabled:!l,isRequired:!l}}}}})],d.prototype,"numStops",void 0);c.__decorate([g.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],d.prototype,"stopInterval",void 0);return d=k=c.__decorate([m.subclass("esri.webdoc.widgets.Range")],
d)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(f,c,a,d,g,q,w,t,m,k,l,e,n){var r;
g=r=function(p){function x(u){u=B.call(this,u);u.currentTimeExtent=null;u.fullTimeExtent=null;u.loop=!1;u.numStops=null;u.numThumbs=null;u.stopDelay=null;u.stopInterval=null;u.stops=null;return u}f._inherits(x,p);var B=f._createSuper(x);p=x.prototype;p.readCurrentTimeExtent=function(u){if(u)return new a({start:null!=u[0]?new Date(u[0]):null,end:null!=u[1]?new Date(u[1]):null})};p.writeCurrentTimeExtent=function(u,H,D){u&&t.setDeepValue(D,[w.isSome(u.start)?u.start.getTime():null,w.isSome(u.end)?u.end.getTime():
null],H)};p.readFullTimeExtent=function(u,H){if(u=H.properties)return new a({start:null!=u.startTime?new Date(u.startTime):null,end:null!=u.endTime?new Date(u.endTime):null})};p.writeFullTimeExtent=function(u,H){if(u){H=H.properties=H.properties||{};var D=u.end;u=u.start;D&&(H.endTime=w.isSome(D)?D.getTime():null);u&&(H.startTime=w.isSome(u)?u.getTime():null)}};p.readStopInterval=function(u,H,D){return u?d.fromJSON({value:u.interval,unit:u.units},D):null};p.writeStopInterval=function(u,H,D,L){u&&
(u=u.toJSON(L),t.setDeepValue(D,{interval:u.value,units:u.unit},H))};p.readStops=function(u){return u&&u.length?u.map(H=>new Date(H)):null};p.writeStops=function(u,H,D){u&&u.length&&t.setDeepValue(D,u.map(L=>L.getTime()),H)};p.clone=function(){return new r(q.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))};return f._createClass(x)}(g.JSONSupport);
c.__decorate([m.property({type:a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],g.prototype,"currentTimeExtent",void 0);c.__decorate([l.reader("currentTimeExtent")],g.prototype,"readCurrentTimeExtent",null);c.__decorate([n.writer("currentTimeExtent")],g.prototype,"writeCurrentTimeExtent",null);c.__decorate([m.property({type:a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],
g.prototype,"fullTimeExtent",void 0);c.__decorate([l.reader("fullTimeExtent")],g.prototype,"readFullTimeExtent",null);c.__decorate([n.writer("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null);c.__decorate([m.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],g.prototype,"loop",void 0);c.__decorate([m.property({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var p=
!!this.stops?.length;p=!(this.stopInterval||p);return{enabled:p,isRequired:p}}}}})],g.prototype,"numStops",void 0);c.__decorate([m.property({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],g.prototype,"numThumbs",void 0);c.__decorate([m.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],g.prototype,"stopDelay",void 0);c.__decorate([m.property({type:d,
json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){const p=!!this.stops?.length;return{enabled:!p,isRequired:!(null!=this.numStops||p)}}}}})],g.prototype,"stopInterval",void 0);c.__decorate([l.reader("stopInterval")],g.prototype,"readStopInterval",null);c.__decorate([n.writer("stopInterval")],g.prototype,"writeStopInterval",null);c.__decorate([m.property({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",
overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],g.prototype,"stops",void 0);c.__decorate([l.reader("stops")],g.prototype,"readStops",null);c.__decorate([n.writer("stops")],g.prototype,"writeStops",null);return g=r=c.__decorate([e.subclass("esri.webdoc.widgets.TimeSlider")],g)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(f){const c={width:600,height:400};f.getOptimalThumbnailSize=function(a,d){d=d||c;let {width:g,height:q}=d;d=g/q;
1.5>d?q=g/1.5:1.5<d&&(g=1.5*q);g>a.width&&(q*=a.width/g,g=a.width);q>a.height&&(g*=a.height/q,q=a.height);return{width:Math.round(g),height:Math.round(q)}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(f,c,a,d,g,q,w,t){var m;a=m=function(k){function l(n){n=e.call(this,n);n.editing=null;n.offline=null;n.viewing=null;return n}f._inherits(l,k);var e=f._createSuper(l);l.prototype.clone=function(){return new m(d.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))};return f._createClass(l)}(a.JSONSupport);c.__decorate([g.property({json:{write:!0}})],a.prototype,"editing",void 0);c.__decorate([g.property({json:{write:!0}})],a.prototype,"offline",void 0);c.__decorate([g.property({type:t,
json:{write:!0}})],a.prototype,"viewing",void 0);return a=m=c.__decorate([w.subclass("esri.webmap.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(f,c,a,d,g,q,w,t){var m;a=m=function(k){function l(n){n=
e.call(this,n);n.search=null;return n}f._inherits(l,k);var e=f._createSuper(l);l.prototype.clone=function(){return new m(d.clone({search:this.search}))};return f._createClass(l)}(a.JSONSupport);c.__decorate([g.property({type:t,json:{write:!0}})],a.prototype,"search",void 0);return a=m=c.__decorate([w.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l,e,n){var r;const p=a.ofType(e),x=a.ofType(n);a=r=function(B){function u(D){D=H.call(this,D);D.addressSearchEnabled=!0;D.enabled=!0;D.hintText=null;D.layers=new p;D.tables=new x;return D}f._inherits(u,B);var H=f._createSuper(u);B=u.prototype;B.readAddressSearchEnabled=function(D){return!D};B.writeAddressSearchEnabled=function(D,L,I){L[I]=!D};B.clone=function(){return new r(g.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,
layers:this.layers,tables:this.tables}))};return f._createClass(u)}(d.JSONSupport);c.__decorate([q.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);c.__decorate([t.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);c.__decorate([k.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);
c.__decorate([q.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],a.prototype,"enabled",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);c.__decorate([q.property({type:p,json:{write:{overridePolicy:l.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);c.__decorate([q.property({type:x,json:{read:!0,write:{overridePolicy:l.writeNonEmptyCollectionPolicy}}})],
a.prototype,"tables",void 0);return a=r=c.__decorate([m.subclass("esri.webdoc.applicationProperties.Search")],a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(f){f.writeNonEmptyCollectionPolicy=function(c){return{enabled:!!c?.length}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(f,c,a,d,g,q,w,t){var m;a=m=function(k){function l(n){n=e.call(this,n);n.field=null;n.id=null;n.subLayer=null;return n}f._inherits(l,k);var e=f._createSuper(l);l.prototype.clone=function(){return new m(d.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return f._createClass(l)}(a.JSONSupport);c.__decorate([g.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);c.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);
c.__decorate([g.property({type:q.Integer,json:{write:!0}})],a.prototype,"subLayer",void 0);return a=m=c.__decorate([w.subclass("esri.webdoc.applicationProperties.SearchLayer")],a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(f,c,a,d,g,q,w,t,m,k){var l;a=l=function(e){function n(p){p=r.call(this,p);p.exactMatch=!1;p.name=null;p.type=null;return p}f._inherits(n,e);var r=f._createSuper(n);n.prototype.clone=function(){return new l({exactMatch:this.exactMatch,type:this.type,name:this.name})};return f._createClass(n)}(a.JSONSupport);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);c.__decorate([t.enumeration(k.kebabDict)],
a.prototype,"type",void 0);return a=l=c.__decorate([m.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(f,c,a,d,g,q,w,t){var m;a=m=function(k){function l(n){n=
e.call(this,n);n.field=null;n.id=null;return n}f._inherits(l,k);var e=f._createSuper(l);l.prototype.clone=function(){return new m(d.clone({field:this.field,id:this.id}))};return f._createClass(l)}(a.JSONSupport);c.__decorate([g.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);c.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=m=c.__decorate([w.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(f,c,a,d,g,q,w,t,m,k){var l;a=l=function(e){function n(p){p=r.call(this,p);p.exactMatch=!1;p.name=null;p.type=null;return p}f._inherits(n,e);var r=f._createSuper(n);n.prototype.clone=function(){return new l({exactMatch:this.exactMatch,type:this.type,name:this.name})};return f._createClass(n)}(a.JSONSupport);c.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);c.__decorate([t.enumeration(k.kebabDict)],
a.prototype,"type",void 0);return a=l=c.__decorate([m.subclass("esri.webdoc.applicationProperties.SearchTableField")],a)})},"esri/webmap/Bookmark":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../TimeExtent ../Viewpoint ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../webdoc/support/SlideThumbnail".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l,e,n,r,p,x,B){var u;q=u=function(H){function D(I){I=L.call(this,I);I.name=null;I.thumbnail=new B.SlideThumbnail;I.timeExtent=null;return I}f._inherits(D,H);var L=f._createSuper(D);H=D.prototype;H.castThumbnail=function(I){return"string"===typeof I?new B.SlideThumbnail({url:I}):x.ensureType(B.SlideThumbnail,I)};H.readViewpoint=function(I,z){const {extent:E,viewpoint:F}=z;return d.fromJSON(F||{targetGeometry:E})};H.writeViewpoint=function(I,z,E,F){if(I){var {targetGeometry:J}=
I;k.isSome(J)&&"extent"!==J.type?F?.messages?F.messages.push(new g("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):m.getLogger(this.declaredClass).error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):(k.isSome(J)&&(z.extent=J.toJSON()),z[E]=I.toJSON())}};H.clone=function(){return new u(t.clone({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))};
f._createClass(D,[{key:"viewpoint",set:function(I){const {targetGeometry:z,scale:E}=I;k.isSome(z)&&"point"===z.type&&k.isNone(E)&&m.getLogger(this.declaredClass).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",I);this._set("viewpoint",I)}}]);return D}(q.IdentifiableMixin(w.JSONSupport));c.__decorate([l.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],q.prototype,"name",void 0);c.__decorate([l.property({type:B.SlideThumbnail,json:{write:{overridePolicy(H){return{enabled:!(!H||
!H.url)}}}}})],q.prototype,"thumbnail",void 0);c.__decorate([e.cast("thumbnail")],q.prototype,"castThumbnail",null);c.__decorate([l.property({type:a,json:{write:!0}})],q.prototype,"timeExtent",void 0);c.__decorate([l.property({type:d,nonNullable:!0,json:{write:!0}})],q.prototype,"viewpoint",null);c.__decorate([n.reader("viewpoint",["extent","viewpoint"])],q.prototype,"readViewpoint",null);c.__decorate([p.writer("viewpoint")],q.prototype,"writeViewpoint",null);return q=u=c.__decorate([r.subclass("esri.webmap.Bookmark")],
q)})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,a,d,g,q,w,t,m){var k;f.SlideThumbnail=k=function(l){function e(){var r=n.apply(this,arguments);r.url="";return r}c._inherits(e,l);var n=c._createSuper(e);
l=e.prototype;l.destroy=function(){this.url=""};l.clone=function(){return new k({url:this.url})};return c._createClass(e)}(d.JSONSupport);a.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],f.SlideThumbnail.prototype,"url",void 0);f.SlideThumbnail=k=a.__decorate([m.subclass("esri.webdoc.support.SlideThumbnail")],f.SlideThumbnail);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(f,c,a,d,g,q,w,t,m,k,l){var e;d=e=function(n){function r(x){x=p.call(this,x);x.background=null;x.rangeInfo=null;x.spatialReference=null;x.viewpoint=null;return x}f._inherits(r,n);var p=f._createSuper(r);r.prototype.clone=function(){return new e(g.clone({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))};return f._createClass(r)}(d);c.__decorate([q.property({type:l})],d.prototype,"background",void 0);c.__decorate([q.property({type:k})],
d.prototype,"rangeInfo",void 0);c.__decorate([q.property({type:m})],d.prototype,"spatialReference",void 0);c.__decorate([q.property({type:a})],d.prototype,"viewpoint",void 0);return d=e=c.__decorate([t.subclass("esri.webmap.InitialViewProperties")],d)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,a,d,g,q,w,t){var m;d=m=function(k){function l(n){n=e.call(this,n);n.color=new a([0,0,0,1]);return n}f._inherits(l,k);var e=f._createSuper(l);l.prototype.clone=function(){return new m(g.clone({color:this.color}))};return f._createClass(l)}(d.JSONSupport);c.__decorate([q.property({type:a,json:{write:!0}})],d.prototype,"color",void 0);return d=m=c.__decorate([t.subclass("esri.webmap.background.ColorBackground")],d)})},"esri/webmap/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"../core/Version"],function(f,c,a){a=function(d){function g(w,t){return q.call(this,w,t,"webmap")}c._inherits(g,d);var q=c._createSuper(g);return c._createClass(g)}(a.Version);f.Version=a;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./Error"],function(f,c,a){let d=function(){function g(w,t,m=""){this.major=w;this.minor=t;this._context=m}var q=g.prototype;q.lessThan=function(w,t){return this.major<
w||w===this.major&&this.minor<t};q.since=function(w,t){return!this.lessThan(w,t)};q.validate=function(w){if(this.major!==w.major)throw new a((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:w});};q.clone=function(){return new g(this.major,this.minor,this._context)};g.parse=function(w,t=""){const [m,k]=w.split(".");var l=/^\s*\d+\s*$/;if(!m||!m.match||!m.match(l))throw new a((t&&
t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:w});if(!k||!k.match||!k.match(l))throw new a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:w});w=parseInt(m,10);l=parseInt(k,10);return new g(w,l,t)};return c._createClass(g)}();f.Version=d;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/arrayUtils ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/SpatialReference ./geometry/support/spatialReferenceUtils ./geometry/support/webMercatorUtils ./layers/support/arcgisLayerUrl ./layers/support/layerUtils ./networks/UtilityNetwork ./portal/Portal ./portal/PortalItem ./portal/support/portalItemUtils ./rest/geometryService/project ./rest/support/ProjectParameters ./support/basemapUtils ./support/MapFloorInfo ./webdoc/GeotriggersInfo ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/Version ./webmap/background/ColorBackground".split(" "),function(f,
c,a,d,g,q,w,t,m,k,l,e,n,r,p,x,B,u,H,D,L,I,z,E,F,J,C,M,O,G,Q,V,R,da,N,ea,fa,aa,U,T,X,Y,na,oa,pa,qa,ha,ba,ja){const ia=new ba.Version(2,27),ka=w.ofType(qa);w=w.ofType(V);const ca=new Map;ca.set("image/jpeg","jpeg");ca.set("image/jpg","jpg");ca.set("image/png","png");ca.set("image/gif","gif");const la=N.TypeKeyword.JSAPI,ma=N.TypeKeyword.DEVELOPER_BASEMAP,ra="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(A=>
A.toLowerCase());g=function(A){function W(b){b=sa.call(this,b);b._isAuthoringAppSetByUser=!1;b._isAuthoringAppVersionSetByUser=!1;b._thumbnailFilename=null;b._updateFromPromise=null;b._resourceReferences={portalItem:null,paths:[]};b.applicationProperties=null;b.bookmarks=new ka;b.floorInfo=null;b.geotriggersInfo=null;b.initialViewProperties=new ha;b.portalItem=null;b.presentation=null;b.sourceVersion=null;b.widgets=null;b.utilityNetworks=null;b.authoringApp=b.authoringAppVersion=null;b._isAuthoringAppSetByUser=
b._isAuthoringAppVersionSetByUser=!1;return b}c._inherits(W,A);var sa=c._createSuper(W);A=W.prototype;A.destroy=function(){const b=this.portalItem;this.portalItem=null;b?.destroy()};A.initialize=function(){this.when().catch(b=>{l.getLogger(this.declaredClass).error("#load()","Failed to load web map",b)});if(this.resourceInfo){let b;try{b=this._validateJSON(this.resourceInfo)}catch(h){this.addResolvingPromise(Promise.reject(h));return}this.read(b)}};A.writeAuthoringApp=function(b,h){h.authoringApp=
b&&this._isAuthoringAppSetByUser?b:la};A.writeAuthoringAppVersion=function(b,h){h.authoringAppVersion=b&&this._isAuthoringAppVersionSetByUser?b:d.version};A.readInitialViewProperties=function(b,h){b=new ha;h.background&&(b.background=ja.fromJSON(h.background));const v=h.initialState?.viewpoint;v&&(v.rotation&&ba.Version.parse(h.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===h.authoringApp&&(v.rotation*=-1),b.viewpoint=q.fromJSON(v));h.mapRangeInfo&&(b.rangeInfo=X.fromJSON(h.mapRangeInfo));h.spatialReference&&
(b.spatialReference=C.fromJSON(h.spatialReference));return b};A.writeInitialViewProperties=function(b,h,v,y){b&&((v=b.background)&&v.color&&(h.background=v.write({},y)),b.viewpoint&&(h.initialState={viewpoint:b.viewpoint.write({},y)}),b.rangeInfo&&(h.mapRangeInfo=b.rangeInfo.toJSON(y)),b.spatialReference&&(h.spatialReference=b.spatialReference.write({},y)))};A.writeLayers=function(b,h,v,y){h[v]=this._writeLayers(b,y,"operational-layers")};A.readSourceVersion=function(b,h){const [v,y]=h.version.split(".");
return new ba.Version(parseInt(v,10),parseInt(y,10))};A.writeSourceVersion=function(b,h,v){h[v]=`${ia.major}.${ia.minor}`};A.writeTables=function(b,h,v,y){b=this._writeLayers(b,y,"tables");b.length&&(h[v]=b)};A.load=function(b){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};A.loadAll=function(){return k.loadAll(this,b=>{b(this.ground,this.basemap,this.layers,this.tables)})};A.read=function(b,h){h={...h,origin:"web-map"};const v=this._getAuthoringPropsState();J.readLoadable(this,
b,y=>c._get(c._getPrototypeOf(W.prototype),"read",this).call(this,b,y),h);this._restoreAuthoringPropsFromState(v)};A.write=function(b,h){if("loaded"!==this.loadStatus)throw b=new t("webmap:not-loaded","Web map must be loaded before it can be serialized"),l.getLogger(this.declaredClass).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),b;this._removeDanglingLayerRefs();h={...h,origin:"web-map",restrictedWebMapWriting:!0,webmap:this};return c._get(c._getPrototypeOf(W.prototype),
"write",this).call(this,b,h)};A.save=async function(b){b=b||{};this._validateItem();const h=new Promise((P,S)=>f(["./webdoc/support/saveUtils"],P,S));await this._updateFromPromise;await this.load();await this._loadLayerContainers();await this._beforeSave();await this._validateMap();const v=this.portalItem;var y=B.urlToObject(v.itemUrl);const K={origin:"web-map",messages:[],writtenProperties:[],url:y,portal:v.portal||R.getDefault(),portalItem:v,verifyItemRelativeUrls:y?{rootPath:y.path,writtenUrls:[]}:
null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}};y=this.write({},K);await Promise.all(K.resources.pendingOperations);this._validateJSONForWriting(K,b);await this._updateItemProperties(v);await this._updateItem(v,y,K);await Promise.all([this._updateItemThumbnail(),h.then(({saveResources:P})=>P(this._resourceReferences,K,null))]);return v};A.saveAs=async function(b,h){h=h||{};b=this._getPortalItem(b);const v=new Promise((S,Z)=>f(["./webdoc/support/saveUtils"],
S,Z));await this._updateFromPromise;await this.load();await this._loadLayerContainers();await this._beforeSave();await this._validateMap();const y={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:b.portal,portalItem:b,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},K=this.write({},y);await Promise.all(y.resources.pendingOperations);this._validateJSONForWriting(y,h);await this._updateItemPropertiesForSaveAs(b);const P=this._getThumbnailState();
await this._createItem(b,K,y,h)&&(this._resourceReferences.portalItem=b);this._restoreThumbnailFromState(P);await Promise.all([this._updateItemThumbnail(),v.then(({saveResources:S})=>S(this._resourceReferences,y,null))]);return b};A.updateFrom=async function(b,h){this._updateFromPromise=b=this._updateFromInternal(b,h);await b;b===this._updateFromPromise&&(this._updateFromPromise=null)};A.getLayerJSONFromResourceInfo=function(b){const h=this.resourceInfo;return this._collectAllLayersJSON([...(h?.baseMap?.baseMapLayers||
[]),...(h?.operationalLayers||[]),...(this.basemap?.resourceInfo?.data?.baseMapLayers||[])]).find(v=>v.id===b.id)};A._collectAllLayersJSON=function(b){return b.reduce((h,v)=>{h.push(v);"GroupLayer"===v.layerType&&(h=h.concat(this._collectAllLayersJSON(v.layers||[])));return h},[])};A._writeLayers=function(b,h,v){h={...h,layerContainerType:v};return b.map(y=>e.unwrap(oa.getLayerJSON(y,"tables"===v?null:this.getLayerJSONFromResourceInfo(y),h))).filter(Boolean).toArray()};A._loadFromSource=function(){return this.resourceInfo?
this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve()};A._loadFromItem=async function(b){await b.load().catch(y=>{throw new t("webmap:load-portal-item","Failed to load portal item",{error:y});});if("Web Map"!==b.type)throw new t("webmap:invalid-portal-item",`Invalid portal item type '${b.type}', expected 'Web Map'`,{type:b.type});const h=await b.fetchData();this.resourceInfo=h;const v={origin:"web-map",url:B.urlToObject(b.itemUrl),
portal:b.portal||R.getDefault(),portalItem:b,readResourcePaths:[]};await this._readAndLoadFromJSON(h,v);this._resourceReferences={portalItem:b,paths:v.readResourcePaths??[]};return this._computeInitialViewpoint()};A._readAndLoadFromJSON=function(b,h){b=this._validateJSON(b);this.read(b,h);return this._loadFromJSON(b,h)};A._validateJSON=function(b){const h=ba.Version.parse(b.version||"","webmap");ia.validate(h);b.version=`${h.major}.${h.minor}`;return b};A._loadFromJSON=function(b,h){const v={context:{...h,
layerContainerType:"operational-layers"}};this.portalItem&&(v.context.portal=this.portalItem.portal||R.getDefault());return(new Promise((y,K)=>f(["./layers/support/layersCreator"],y,K))).then(({populateOperationalLayers:y})=>{const K=[];var P=b.operationalLayers;P&&P.length&&K.push(y(this.layers,P,v));P={...v,context:{...v.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const S=b.tables;S&&S.length&&K.push(y(this.tables,S,P));return p.eachAlways(K).then(()=>{})})};A._computeInitialViewpoint=
async function(){let b=this.initialViewProperties;if(!b?.viewpoint?.targetGeometry){var h=await this._getExtentFromItem();h&&(b=b?b.clone():new ha,b.viewpoint=new q,b.viewpoint.targetGeometry=h,this.initialViewProperties=b)}};A._getExtentFromItem=async function(){const b=this.initialViewProperties?.spatialReference,h=this.portalItem?.extent;return b&&h?b.isWGS84?h.clone():b.isWebMercator?O.geographicToWebMercator(h):(await new Promise((v,y)=>f(["./portal/support/geometryServiceUtils"],v,y))).getGeometryServiceURL(this.portalItem).then(v=>
{const y=new fa;y.geometries=[h];y.outSpatialReference=b;return ea.project(v,y)}).then(v=>v[0]).catch(v=>{l.getLogger(this.declaredClass).error("Error projecting item's extent:",v);return null}):null};A._removeDanglingLayerRefs=function(){var b=this.applicationProperties,h=b&&b.viewing&&b.viewing.search;const v=y=>this.allLayers.some(K=>K.id===y);h&&h.layers&&(h.layers=h.layers.filter(y=>v(y.id)));h&&h.tables&&(h.tables=h.tables.filter(y=>this.tables.some(K=>K.id===y.id)));(h=b&&b.editing&&b.editing.locationTracking)&&
h.info&&!v(h.info.layerId)&&(b.editing=null);(b=this.presentation&&this.presentation.slides)&&b.forEach(y=>{y.visibleLayers&&(y.visibleLayers=y.visibleLayers.filter(K=>v(K.id)))})};A._validateMap=async function(){if(!this.basemap?.baseLayers.length)throw new t("webmap:save","Map does not have a valid basemap with a base layer.");let b=null;await x.whenOnce(()=>{const h=aa.findSpatialReference(this.initialViewProperties,this.basemap);b=h.spatialReference;return!h.updating});if(!M.equals(b,this.initialViewProperties.spatialReference))throw new t("webmap:save",
"The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:b});};A._validateItem=function(){if(!this.portalItem)throw l.getLogger(this.declaredClass).error("save: requires the portalItem property to be set"),new t("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)};A._validateItemType=function(b){if("Web Map"!==b.type)throw new t("webmap:portal-item-wrong-type",
'Portal item needs to have type "Web Map"');};A._loadLayerContainers=function(){const b=[];this.basemap&&b.push(this.basemap.load());this.ground&&b.push(this.ground.load());return p.eachAlways(b).then(()=>{})};A._beforeSave=async function(){const b=[];for(const h of this.allLayers)if("beforeSave"in h&&"function"===typeof h.beforeSave){const v=h.beforeSave();v&&b.push(v)}await p.eachAlways(b)};A._loadAllLayers=function(){const b=this._getAllLayersAndTables().map(h=>h.load());return p.eachAlways(b).then(()=>
{})};A._getAllLayersAndTables=function(){return this.allLayers.concat(this.allTables)};A._validateJSONForWriting=function(b,h){let v=(b.messages??[]).filter(y=>"error"===y.type).map(y=>new t(y.name,y.message,y.details));b.blockedRelativeUrls&&(v=v.concat(b.blockedRelativeUrls.map(y=>new t("url:unsupported",`Relative url '${y}' is not supported in Web Map`))));h.ignoreUnsupported&&(v=v.filter(y=>"layer:unsupported"!==y.name&&"symbol:unsupported"!==y.name&&"symbol-layer:unsupported"!==y.name&&"property:unsupported"!==
y.name&&"url:unsupported"!==y.name));if(0<v.length)throw new t("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:v});};A._updateItemProperties=async function(b){b.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry);await this._updateTypeKeywords(b)};A._updateItemPropertiesForSaveAs=async function(b){N.removeTypeKeyword(b,"CollectorDisabled");N.removeTypeKeyword(b,"FieldMapsDisabled");
N.removeTypeKeyword(b,N.TypeKeyword.METADATA);N.removeTypeKeyword(b,"OfflineDisabled");N.removeTypeKeyword(b,"Offline Map Areas");N.removeTypeKeyword(b,"Workforce Dispatcher");N.removeTypeKeyword(b,"Workforce Project");N.removeTypeKeyword(b,"Workforce Worker");await this._updateItemProperties(b)};A._getWGS84Extent=async function(b){b=b.clone().normalize();let h;if(1<b.length)for(const v of b)h?v.width>h.width&&(h=v):h=v;else h=b[0];return this._projectToWGS84(h)};A._projectToWGS84=async function(b){var h=
b.spatialReference;if(h.isWGS84)return b.clone();if(h.isWebMercator)return O.webMercatorToGeographic(b);h=await (await new Promise((y,K)=>f(["./portal/support/geometryServiceUtils"],y,K))).getGeometryServiceURL(this.portalItem);const v=new fa;v.geometries=[b];v.outSpatialReference=C.WGS84;return(await ea.project(h,v))[0]};A._updateTypeKeywords=async function(b){N.addTypeKeyword(b,la);await this._loadAllLayers();this._evalCollectorKeyword(b);this._evalDataEditingKeyword(b);this._evalOfflineKeyword(b);
this._evalDeveloperBasemapKeyword(b);this._evalUtilityNetworkKeyword(b);b.typeKeywords&&(b.typeKeywords=b.typeKeywords.filter((h,v,y)=>y.indexOf(h)===v))};A._evalCollectorKeyword=function(b){N.hasTypeKeyword(b,"CollectorDisabled")||N.hasTypeKeyword(b,"Workforce Project")||N.hasTypeKeyword(b,"Workforce Worker")||N.hasTypeKeyword(b,"Workforce Dispatcher")||!this._hasEditableFeatureLayer()?N.removeTypeKeyword(b,"Collector"):N.addTypeKeyword(b,"Collector")};A._evalDataEditingKeyword=function(b){this._hasEditableFeatureLayer()?
N.addTypeKeyword(b,"Data Editing"):N.removeTypeKeyword(b,"Data Editing")};A._evalOfflineKeyword=function(b){!N.hasTypeKeyword(b,"OfflineDisabled")&&this._isOfflineCapableMap()?N.addTypeKeyword(b,"Offline"):N.removeTypeKeyword(b,"Offline")};A._evalDeveloperBasemapKeyword=function(b){aa.hasDeveloperBasemapLayer(this.basemap)?N.addTypeKeyword(b,ma):N.removeTypeKeyword(b,ma)};A._evalUtilityNetworkKeyword=function(b){this.utilityNetworks?.length?N.addTypeKeyword(b,"UtilityNetwork"):N.removeTypeKeyword(b,
"UtilityNetwork")};A._hasEditableFeatureLayer=function(){return this._getAllLayersAndTables().some(b=>b.loaded&&Q.isFeatureServiceLayer(b)&&b.capabilities.operations.supportsEditing&&b.editingEnabled)};A._isOfflineCapableMap=function(){return this._getAllLayersAndTables().filter(b=>"group"!==b.type).every(b=>b.loaded&&this._isOfflineCapableLayer(b))};A._isFeatureCollectionLike=function(b){return Q.isFeatureCollectionLayer(b)||"map-notes"===b.type||"route"===b.type};A._isOfflineCapableLayer=function(b){return Q.isFeatureServiceLayer(b)&&
b.capabilities.operations.supportsSync||this._isFeatureCollectionLike(b)&&!b.portalItem||("tile"===b.type||"vector-tile"===b.type)&&(b.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(b)||aa.isDeveloperBasemapLayer(b))&&b.spatialReference.equals(this.initialViewProperties.spatialReference)};A._isExportableAGOLTileLayer=function(b){return"tile"===b.type?G.isServerOrServicesAGOLUrl(b.url)&&ra.some(h=>b.url?.toLowerCase().includes("/"+h+"/")):!1};A._updateItem=async function(b,
h,v){await b.update({data:h});this._syncUpInstanceWithItem(b,h,v)};A._createItem=async function(b,h,v,y){var K=this.portalItem;K={item:K,authenticated:!(!K?.id||!K.portal.user)};const P=b.portal;await P.signIn();const {copyAllowed:S,itemReloaded:Z}=await this._isCopyAllowed(K,P);K.authenticated||(K.authenticated=Z);if(!S)throw new t("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");y=await this._initializeNewItem(b,K,h,y);this.portalItem=b;this._syncUpInstanceWithItem(b,
h,v);return y};A._isCopyAllowed=async function(b,h){const {item:v,authenticated:y}=b;if(v?.id&&v.typeKeywords?.includes("useOnly")){if(v.portal.portalHostname!==h.portalHostname)return{copyAllowed:!1,itemReloaded:!1};y||await v.reload();return{copyAllowed:"admin"===v.itemControl||"update"===v.itemControl,itemReloaded:!0}}return{copyAllowed:!0,itemReloaded:!1}};A._initializeNewItem=async function(b,h,v,y){var K=b.portal;const {item:P,authenticated:S}=h,{folder:Z,copyAllResources:ta}=y;h=!1;ta&&P?.id&&
B.hasSameCanonicalArcGISOnlinePortal(P.portal.url,K.url)&&(S||await P.reload(),P.isOrgItem&&({total:h}=await P.fetchResources(),h=!!h));h?(K=await P.copy({copyResources:"all",folder:Z}),b.id=K.id,b.portal=K.portal,K=b.toJSON(),await b.load(),b.read(K),await b.update({data:v})):await K.user?.addItem({item:b,folder:Z,data:v});return h};A._syncUpInstanceWithItem=function(b,h,v){n.MultiOriginJSONSupport.prototype.read.call(this,{version:h.version,authoringApp:h.authoringApp,authoringAppVersion:h.authoringAppVersion},
{origin:"web-map",ignoreDefaults:!0,url:b.itemUrl&&B.urlToObject(b.itemUrl)});F.updateOrigins(v);this.resourceInfo=h};A._updateItemThumbnail=async function(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())};A._getPortalItem=function(b){b=da.from(b);b.id&&(b=b.clone(),b.id=null);b.type||(b.type="Web Map");b.portal||(b.portal=R.getDefault());this._validateItemType(b);
return b};A._updateFromInternal=async function(b,h){h=h||{};await x.whenOnce(()=>b.ready);this._updateInitialViewProperties(b,h);if(b.map===this)for(const v of b.allLayerViews)for(const y of["visible","featureEffect"])y in v&&y in v.layer&&v._isOverridden(y)&&(v.layer[y]=v[y]);await this._updateThumbnailUrl(b,h)};A._updateInitialViewProperties=function(b,h){h.backgroundExcluded||(this.initialViewProperties.background=b.background?.clone());this.initialViewProperties.spatialReference=b.spatialReference?.clone();
h.viewpointExcluded||(this.initialViewProperties.viewpoint=new q({rotation:b.rotation,scale:h.scalePreserved?b.scale:null,targetGeometry:this._getViewExtent(b)}));if(!h.widgetsExcluded)for(const v of b.persistableViewModels)v.updateWebDocument(this)};A._getViewExtent=function(b){const h=b.center.clone().normalize();b=b.extent.clone();const v=b.width/2;b.xmin=h.x-v;b.xmax=h.x+v;return b};A._updateThumbnailUrl=async function(b,h){h.thumbnailExcluded||(h=na.getOptimalThumbnailSize(b,h.thumbnailSize),
b=await b.takeScreenshot({format:"png",width:h.width,height:h.height}),this._setAutoGeneratedThumbnail(b.dataUrl))};A._setAutoGeneratedThumbnail=function(b){this.thumbnailUrl=b;this._thumbnailFilename=null};A._clearThumbnailOverride=function(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null};A._generateCustomThumbnailFilename=function(b){if(B.isDataProtocol(b)){b=(b=(b=B.dataComponents(b))&&b.mediaType)&&ca.get(b.toLowerCase())||null;const h=`thumbnail${Date.now()}`;
return b?`${h}.${b}`:h}return null};A._getThumbnailState=function(){let b=this.thumbnailUrl;b&&(b=this._isOverridden("thumbnailUrl")?b:B.addQueryParameter(b,"w","8192"));return{thumbnailUrl:b,filename:this._thumbnailFilename}};A._restoreThumbnailFromState=function(b){this.thumbnailUrl=b.thumbnailUrl;this._thumbnailFilename=b.filename};A._getAuthoringPropsState=function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,
isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}};A._restoreAuthoringPropsFromState=function(b){b.isAuthoringAppSetByUser?this.authoringApp=b.authoringApp:this._isAuthoringAppSetByUser=!1;b.isAuthoringAppVersionSetByUser?this.authoringAppVersion=b.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1};W.fromJSON=function(b){if(!b)throw new t("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:b})};c._createClass(W,[{key:"authoringApp",
set:function(b){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",b)}},{key:"authoringAppVersion",set:function(b){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",b)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(b){b?(this._override("thumbnailUrl",b),this._thumbnailFilename=this._generateCustomThumbnailFilename(b)):this._clearThumbnailOverride()}}]);return W}(n.MultiOriginJSONMixin(m.LoadableMixin(r.EsriPromiseMixin(g))));
g.VERSION=ia;a.__decorate([u.property({type:pa,json:{write:!0}})],g.prototype,"applicationProperties",void 0);a.__decorate([u.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringApp",null);a.__decorate([E.writer("authoringApp")],g.prototype,"writeAuthoringApp",null);a.__decorate([u.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringAppVersion",null);a.__decorate([E.writer("authoringAppVersion")],g.prototype,"writeAuthoringAppVersion",
null);a.__decorate([u.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],g.prototype,"basemap",void 0);a.__decorate([u.property({type:ka,json:{write:{overridePolicy(A){return{enabled:!!(A&&0<A.length),ignoreOrigin:!0}}}}})],g.prototype,"bookmarks",void 0);a.__decorate([u.property({type:U,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],g.prototype,"floorInfo",void 0);a.__decorate([u.property({type:T,json:{write:!0}})],g.prototype,"geotriggersInfo",void 0);a.__decorate([u.property({type:ha,
nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:ja},"initialState.viewpoint":{type:q},mapRangeInfo:{type:X},spatialReference:{type:C}}}}})],g.prototype,"initialViewProperties",void 0);a.__decorate([I.reader("initialViewProperties")],g.prototype,"readInitialViewProperties",null);a.__decorate([E.writer("initialViewProperties")],g.prototype,"writeInitialViewProperties",null);a.__decorate([u.property({json:{read:!1,
write:{target:"operationalLayers",ignoreOrigin:!0}}})],g.prototype,"layers",void 0);a.__decorate([E.writer("layers")],g.prototype,"writeLayers",null);a.__decorate([u.property({type:da})],g.prototype,"portalItem",void 0);a.__decorate([u.property({json:{write:!0}})],g.prototype,"presentation",void 0);a.__decorate([u.property()],g.prototype,"resourceInfo",void 0);a.__decorate([u.property({readOnly:!0,type:ba.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],
g.prototype,"sourceVersion",void 0);a.__decorate([I.reader("sourceVersion")],g.prototype,"readSourceVersion",null);a.__decorate([E.writer("sourceVersion")],g.prototype,"writeSourceVersion",null);a.__decorate([u.property({json:{read:!1,write:{ignoreOrigin:!0}}})],g.prototype,"tables",void 0);a.__decorate([E.writer("tables")],g.prototype,"writeTables",null);a.__decorate([u.property()],g.prototype,"thumbnailUrl",null);a.__decorate([u.property({type:Y,json:{write:!0}})],g.prototype,"widgets",void 0);
a.__decorate([u.property({type:w,json:{read:!0,write:!0}})],g.prototype,"utilityNetworks",void 0);return g=a.__decorate([z.subclass("esri.WebMap")],g)});