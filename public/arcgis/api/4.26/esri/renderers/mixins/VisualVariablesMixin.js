// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../layers/support/fieldUtils ../support/randomRotationExpression ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
function(n,m,k,q,r,F,G,H,t,u,v,l,w,x,y,z,A,B,C){const D={base:B,key:"type",typeMap:{opacity:y,color:x,rotation:z,size:A}};n.VisualVariablesMixin=e=>{e=function(f){function h(){var a=E.apply(this,arguments);a._vvFactory=new C;return a}m._inherits(h,f);var E=m._createSuper(h);f=h.prototype;f.readVisualVariables=function(a,b,c){return this._vvFactory.readVariables(a,b,c)};f.writeVisualVariables=function(a,b,c,g){b[c]=this._vvFactory.writeVariables(a,g)};f.hasVisualVariables=function(a,b){return a?0<
this.getVisualVariablesForType(a,b).length:0<this.getVisualVariablesForType("size",b).length||0<this.getVisualVariablesForType("color",b).length||0<this.getVisualVariablesForType("opacity",b).length||0<this.getVisualVariablesForType("rotation",b).length};f.getVisualVariablesForType=function(a,b){const c=this.visualVariables;return c?c.filter(g=>g.type===a&&("string"===typeof b?g.target===b:!1===b?!g.target:!0)):[]};f.collectVVRequiredFields=async function(a,b){var c=[];this.visualVariables&&(c=c.concat(this.visualVariables));
for(const d of c)if(d&&(d.field&&l.collectField(a,b,d.field),d.normalizationField&&l.collectField(a,b,d.normalizationField),d.valueExpression)){{c=a;var g=b;const p=w.matchRandomRotationExpression(d.valueExpression);q.isSome(p)?(l.collectField(c,g,p),c=!0):c=!1}c||await l.collectArcadeFieldNames(a,b,d.valueExpression)}};m._createClass(h,[{key:"visualVariables",set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"arcadeRequiredForVisualVariables",
get:function(){if(!this.visualVariables)return!1;for(const a of this.visualVariables)if(a.arcadeRequired)return!0;return!1}}]);return h}(e);k.__decorate([r.property({types:[D],value:null,json:{write:!0}})],e.prototype,"visualVariables",null);k.__decorate([t.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null);k.__decorate([v.writer("visualVariables")],e.prototype,"writeVisualVariables",null);return e=k.__decorate([u.subclass("esri.renderers.mixins.VisualVariablesMixin")],
e)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});