// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/jsonMap ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),function(k,n,f,q,r,t,u,E,F,G,v,w,x,y,z){const A={color:w,size:z,opacity:x,rotation:y},B=new q.JSONMap({colorInfo:"color",
transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),C=/^\[([^\]]+)\]$/i;f=function(g){function h(){var a=D.apply(this,arguments);a.colorVariables=null;a.opacityVariables=null;a.rotationVariables=null;a.sizeVariables=null;return a}k._inherits(h,g);var D=k._createSuper(h);g=h.prototype;g.readVariables=function(a,b,c){const {rotationExpression:d,rotationType:l}=b;if(b=(b=d&&d.match(C))&&b[1])a||(a=[]),a.push({type:"rotationInfo",rotationType:l,field:b});if(a)return a.map(m=>{var e=B.read(m.type);
const p=A[e];p||(r.getLogger(this.declaredClass).warn(`Unknown variable type: ${e}`),c&&c.messages&&c.messages.push(new t("visual-variable:unsupported",`visualVariable of type '${e}' is not supported`,{definition:m,context:c})));e=new p;e.read(m,c);return e})};g.writeVariables=function(a,b){const c=[];for(const d of a)(a=d.toJSON(b))&&c.push(a);return c};g._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};k._createClass(h,[{key:"visualVariables",
set:function(a){this._resetVariables();if((a=a&&a.filter(c=>!!c))&&a.length){for(var b of a)switch(b.type){case "color":this.colorVariables.push(b);break;case "opacity":this.opacityVariables.push(b);break;case "rotation":this.rotationVariables.push(b);break;case "size":this.sizeVariables.push(b)}this.sizeVariables.length&&this.sizeVariables.some(c=>!!c.target)&&a.sort((c,d)=>{let l=null;return l=c.target===d.target?0:c.target?1:-1});for(b=0;b<a.length;b++)a[b].index=b}this._set("visualVariables",
a)}}]);return h}(f);n.__decorate([u.property()],f.prototype,"visualVariables",null);return f=n.__decorate([v.subclass("esri.renderers.visualVariables.VisualVariableFactory")],f)});