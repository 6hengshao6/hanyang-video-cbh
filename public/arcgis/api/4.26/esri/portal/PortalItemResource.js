// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(n,l,d,b,p,q,e,m,h,r,w,x,t){b=function(c){function g(a){a=u.call(this,a);a.portalItem=null;return a}l._inherits(g,c);var u=l._createSuper(g);c=g.prototype;c.normalizeCtorArgs=
function(a){return a&&a.portalItem&&a.path?{...a,path:this._normalizePath(a.path,a.portalItem)}:a};c._castPath=function(a){return this._normalizePath(a,this.portalItem)};c.fetch=function(a="json",f){const k=this.url;if(e.isNone(k))throw new p("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(k,{responseType:a,query:{token:this.portalItem.apiKey},signal:e.get(f,"signal")})};c.update=async function(a,f){return(await new Promise((k,
v)=>n(["./support/resourceUtils"],k,v))).addOrUpdateResource(this,"update",a,f)};c.hasPath=function(){return e.isSome(this.path)};c._normalizePath=function(a,f){if(e.isNone(a))return a;a=a.replace(/^\/+/,"");e.isSome(f)&&m.isAbsolute(a)&&(a=m.makeRelative(a,f.itemUrl));return a?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")};l._createClass(g,[{key:"path",set:function(a){e.isSome(a)&&m.isAbsolute(a)?q.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):
this._set("path",a)}},{key:"url",get:function(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}},{key:"itemRelativeUrl",get:function(){return this.portalItem&&this.path?`./resources/${this.path}`:null}}]);return g}(b);d.__decorate([h.property()],b.prototype,"portalItem",void 0);d.__decorate([h.property({type:String,value:null})],b.prototype,"path",null);d.__decorate([r.cast("path")],b.prototype,"_castPath",null);d.__decorate([h.property({type:String,readOnly:!0})],
b.prototype,"url",null);d.__decorate([h.property({type:String,readOnly:!0})],b.prototype,"itemRelativeUrl",null);return b=d.__decorate([t.subclass("esri.portal.PortalItemResource")],b)});