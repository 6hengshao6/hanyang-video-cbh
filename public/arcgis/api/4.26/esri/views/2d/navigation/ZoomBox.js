// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../input/InputManager".split(" "),function(l,n,h,r,p,v,w,x,t,q){h=function(f){function k(a){a=u.call(this,a);a._container=null;a._overlay=null;a._backgroundShape=null;a._boxShape=null;a._box=
{x:0,y:0,width:0,height:0};a._rafId=null;a._handles=null;a._redraw=a._redraw.bind(l._assertThisInitialized(a));return a}l._inherits(k,f);var u=l._createSuper(k);f=k.prototype;f.destroy=function(){this.view=null};f._start=function(){this._createContainer();this._createOverlay();this.navigation.begin()};f._update=function(a,c,b,d){this._box.x=a;this._box.y=c;this._box.width=b;this._box.height=d;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};f._end=function(a,c,b,d,e){const g=this.view;
a=g.toMap(r.createScreenPoint(a+.5*b,c+.5*d));b=Math.max(b/g.width,d/g.height);-1===e&&(b=1/b);this._destroyOverlay();this.navigation.end();g.goTo({center:a,scale:g.scale*b})};f._updateBox=function(a,c,b,d){const e=this._boxShape;e.setAttributeNS(null,"x",""+a);e.setAttributeNS(null,"y",""+c);e.setAttributeNS(null,"width",""+b);e.setAttributeNS(null,"height",""+d);e.setAttributeNS(null,"class","esri-zoom-box__outline")};f._updateBackground=function(a,c,b,d){this._backgroundShape.setAttributeNS(null,
"d",this._toSVGPath(a,c,b,d,this.view.width,this.view.height))};f._createContainer=function(){const a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a};f._createOverlay=function(){var a=this.view.width,c=this.view.height;const b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+c+" L 0 "+c+" Z");b.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg",
"rect");c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");c.setAttributeNS(null,"class","esri-zoom-box__overlay");c.appendChild(b);c.appendChild(a);this._container.appendChild(c);this._backgroundShape=b;this._boxShape=a;this._overlay=c};f._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=
this._boxShape=this._overlay=null};f._toSVGPath=function(a,c,b,d,e,g){b=a+b;d=c+d;return"M 0 0 L "+e+" 0 L "+e+" "+g+" L 0 "+g+" ZM "+a+" "+c+" L "+a+" "+d+" L "+b+" "+d+" L "+b+" "+c+" Z"};f._handleDrag=function(a,c){var b=a.x,d=a.y,e=a.origin.x;const g=a.origin.y;let m;b>e?(m=e,e=b-e):(m=b,e-=b);d>g?(b=g,d-=g):(b=d,d=g-d);switch(a.action){case "start":this._start();break;case "update":this._update(m,b,e,d);break;case "end":this._end(m,b,e,d,c)}a.stopPropagation()};f._redraw=function(){if(this._rafId&&
(this._rafId=null,this._overlay)){var {x:a,y:c,width:b,height:d}=this._box;this._updateBox(a,c,b,d);this._updateBackground(a,c,b,d);this._rafId=requestAnimationFrame(this._redraw)}};l._createClass(k,[{key:"view",set:function(a){this._handles&&this._handles.forEach(c=>{c.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],c=>this._handleDrag(c,1),q.ViewEventPriorities.INTERNAL),a.on("drag",["Shift","Ctrl"],c=>this._handleDrag(c,-1),q.ViewEventPriorities.INTERNAL))}}]);
return k}(h);n.__decorate([p.property()],h.prototype,"navigation",void 0);n.__decorate([p.property()],h.prototype,"view",null);return h=n.__decorate([t.subclass("esri.views.2d.navigation.ZoomBox")],h)});