// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../../../../webgl/enums".split(" "),function(m,p,x,y,z,A,a){return function(e){function l(){return B.apply(this,arguments)}m._inherits(l,e);var B=m._createSuper(l);e=l.prototype;e.dispose=function(){};e.getGeometryType=function(){return x.WGLGeometryType.LINE};e.supportsSymbology=function(d){return!0};e.drawGeometry=function(d,f,c,b){const {context:g,painter:q,
rendererInfo:r,displayLevel:C,passOptions:t,requestRender:u,allowDelayedRender:D}=d,h=A.LineMaterialKey.load(c.materialKey),n=p.isSome(t)&&"hittest"===t.type;var k=y.createProgramDescriptor(h.data,{geometry:[{location:0,name:"a_pos",count:2,type:a.DataType.SHORT},{location:1,name:"a_id",count:4,type:a.DataType.UNSIGNED_BYTE},{location:2,name:"a_color",count:4,type:a.DataType.UNSIGNED_BYTE,normalized:!0},{location:3,name:"a_offsetAndNormal",count:4,type:a.DataType.BYTE},{location:4,name:"a_accumulatedDistanceAndHalfWidth",
count:2,type:a.DataType.UNSIGNED_SHORT},{location:5,name:"a_tlbr",count:4,type:a.DataType.UNSIGNED_SHORT},{location:6,name:"a_segmentDirection",count:4,type:a.DataType.BYTE},{location:7,name:"a_aux",count:2,type:a.DataType.UNSIGNED_SHORT},{location:8,name:"a_zoomRange",count:2,type:a.DataType.UNSIGNED_SHORT}]});let v=a.PrimitiveType.TRIANGLES;n&&(k=this._getTriangleDesc(c.materialKey,k),v=a.PrimitiveType.POINTS);const {attributes:w,bufferLayouts:E}=k;b=q.materialManager.getMaterialProgram(d,h,"materials/line",
w,b);D&&p.isSome(u)&&!b.compiled?u():(k=1/d.pixelRatio,g.useProgram(b),this._setSharedUniforms(b,d,f),h.textureBinding&&q.textureManager.bindTextures(g,b,h),b.setUniform1f("u_zoomFactor",2**(C-f.key.level)),b.setUniform1f("u_blur",0+k),b.setUniform1f("u_antialiasing",k),this._setSizeVVUniforms(h,b,r,f),this._setColorAndOpacityVVUniforms(h,b,r),g.setFaceCullingEnabled(!1),d=c.target.getVAO(g,E,w,n),f=c.indexCount,c=c.indexFrom*Uint32Array.BYTES_PER_ELEMENT,n&&(f/=3,c/=3),g.bindVAO(d),g.drawElements(v,
f,a.DataType.UNSIGNED_INT,c))};return m._createClass(l)}(z)});