// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../alignmentUtils","../enums"],function(l,d,C,D,e){function y(f){return f===e.WGLSymbologyType.SIMPLE||f===e.WGLSymbologyType.OUTLINE_FILL_SIMPLE}function x(f){return f===e.WGLSymbologyType.OUTLINE_FILL||f===e.WGLSymbologyType.OUTLINE_FILL_SIMPLE}const E=Object.keys(e.WGLSymbologyType).filter(f=>"number"===typeof e.WGLSymbologyType[f]).reduce((f,a)=>({...f,[a]:e.WGLSymbologyType[a]}),{});let m=function(){function f(c){this._data=
0;this._data=c}f.load=function(c){const g=this.shared;g.data=c;return g};var a=f.prototype;a.setBit=function(c,g){c=1<<c;this._data=g?this._data|c:this._data&~c};a.bit=function(c){return(this._data&1<<c)>>c};a.setBits=function(c,g,b){for(let h=g,k=0;h<b;h++,k++)this.setBit(h,0!==(c&1<<k))};a.bits=function(c,g){let b=0;for(let h=c,k=0;h<g;h++,k++)b|=this.bit(h)<<k;return b};a.hasVV=function(){return!1};a.setVV=function(c,g){};a.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,
sdf:this.sdf,symbologyType:{value:e.WGLSymbologyType[this.symbologyType],options:E,namespace:"SYMBOLOGY_TYPE"}}};a.getVariationHash=function(){return this._data&~(7&this.textureBinding)};d._createClass(f,[{key:"data",get:function(){return this._data},set:function(c){this._data=c??0}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(c){this.setBits(c,8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(c){this.setBit(20,c)}},{key:"sdf",get:function(){return!!this.bit(11)},
set:function(c){this.setBit(11,c??!1)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(c){this.setBit(12,c)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(c){this.setBits(c,0,8)}},{key:"symbologyType",get:function(){return this.bits(21,26)},set:function(c){this.setBits(c,21,26)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case e.WGLGeometryType.FILL:return"fill";case e.WGLGeometryType.MARKER:return"marker";case e.WGLGeometryType.LINE:return"line";
case e.WGLGeometryType.TEXT:return"text";case e.WGLGeometryType.LABEL:return"label";default:throw new C(`Unable to handle unknown geometryType: ${this.geometryType}`);}}}]);return f}();m.shared=new m(0);const n=f=>function(a){function c(){return g.apply(this,arguments)}d._inherits(c,a);var g=d._createSuper(c);a=c.prototype;a.hasSizeVV=function(){return this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};a.hasVV=function(){return d._get(d._getPrototypeOf(c.prototype),
"hasVV",this).call(this)||this.hasSizeVV()};a.setVV=function(b,h){d._get(d._getPrototypeOf(c.prototype),"setVV",this).call(this,b,h);{var k=this.geometryType;const z=e.WGLVVFlag.SIZE_FIELD_STOPS|e.WGLVVFlag.SIZE_MINMAX_VALUE|e.WGLVVFlag.SIZE_SCALE_STOPS|e.WGLVVFlag.SIZE_UNIT_VALUE,A=(b&(e.WGLVVTarget.FIELD_TARGETS_OUTLINE|e.WGLVVTarget.MINMAX_TARGETS_OUTLINE|e.WGLVVTarget.SCALE_TARGETS_OUTLINE|e.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;h=k===e.WGLGeometryType.LINE&&h.isOutline||k===e.WGLGeometryType.FILL&&
x(h.symbologyType)?z&A:z&~A}b&=h;this.vvSizeMinMaxValue=!!(b&e.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(b&e.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(b&e.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(b&e.WGLVVFlag.SIZE_SCALE_STOPS)};d._createClass(c,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(b){this.setBit(16,b)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(b){this.setBit(17,b)}},{key:"vvSizeFieldStops",
get:function(){return 0!==this.bit(18)},set:function(b){this.setBit(18,b)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(b){this.setBit(19,b)}}]);return c}(f),B=f=>function(a){function c(){return g.apply(this,arguments)}d._inherits(c,a);var g=d._createSuper(c);a=c.prototype;a.hasVV=function(){return d._get(d._getPrototypeOf(c.prototype),"hasVV",this).call(this)||this.vvRotation};a.setVV=function(b,h){d._get(d._getPrototypeOf(c.prototype),"setVV",this).call(this,b,h);
this.vvRotation=!h.isOutline&&!!(b&e.WGLVVFlag.ROTATION)};d._createClass(c,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(b){this.setBit(15,b)}}]);return c}(f),v=f=>function(a){function c(){return g.apply(this,arguments)}d._inherits(c,a);var g=d._createSuper(c);a=c.prototype;a.hasVV=function(){return d._get(d._getPrototypeOf(c.prototype),"hasVV",this).call(this)||this.vvColor};a.setVV=function(b,h){d._get(d._getPrototypeOf(c.prototype),"setVV",this).call(this,b,h);this.vvColor=
!h.isOutline&&!!(b&e.WGLVVFlag.COLOR)};d._createClass(c,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(b){this.setBit(13,b)}}]);return c}(f),w=f=>function(a){function c(){return g.apply(this,arguments)}d._inherits(c,a);var g=d._createSuper(c);a=c.prototype;a.hasVV=function(){return d._get(d._getPrototypeOf(c.prototype),"hasVV",this).call(this)||this.vvOpacity};a.setVV=function(b,h){d._get(d._getPrototypeOf(c.prototype),"setVV",this).call(this,b,h);this.vvOpacity=!h.isOutline&&
!!(b&e.WGLVVFlag.OPACITY)};d._createClass(c,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(b){this.setBit(14,b)}}]);return c}(f);let p=function(f){function a(){return c.apply(this,arguments)}d._inherits(a,f);var c=d._createSuper(a);a.load=function(g){const b=this.shared;b.data=g;return b};a.from=function(g){const {symbologyType:b,vvFlags:h}=g,k=this.load(0);k.geometryType=e.WGLGeometryType.FILL;k.symbologyType=b;b!==e.WGLSymbologyType.DOT_DENSITY&&k.setVV(h,g);return k.data};
a.prototype.getVariation=function(){return{...d._get(d._getPrototypeOf(a.prototype),"getVariation",this).call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return d._createClass(a)}(v(w(n(m))));p.shared=new p(0);let q=function(f){function a(){return c.apply(this,arguments)}d._inherits(a,f);var c=d._createSuper(a);a.load=function(g){const b=
this.shared;b.data=g;return b};a.from=function(g){const {symbologyType:b,vvFlags:h}=g,k=this.load(0);k.geometryType=e.WGLGeometryType.MARKER;k.symbologyType=b;b!==e.WGLSymbologyType.HEATMAP&&k.setVV(h,g);return k.data};a.prototype.getVariation=function(){return{...d._get(d._getPrototypeOf(a.prototype),"getVariation",this).call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,
vvSizeUnitValue:this.vvSizeUnitValue}};return d._createClass(a)}(v(w(B(n(m)))));q.shared=new q(0);let r=function(f){function a(){return c.apply(this,arguments)}d._inherits(a,f);var c=d._createSuper(a);a.load=function(g){const b=this.shared;b.data=g;return b};a.from=function(g){const b=this.load(0);b.geometryType=e.WGLGeometryType.LINE;b.symbologyType=g.symbologyType;b.setVV(g.vvFlags,g);return b.data};a.prototype.getVariation=function(){return{...d._get(d._getPrototypeOf(a.prototype),"getVariation",
this).call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return d._createClass(a)}(v(w(n(m))));r.shared=new r(0);let t=function(f){function a(){return c.apply(this,arguments)}d._inherits(a,f);var c=d._createSuper(a);a.load=function(g){const b=this.shared;b.data=g;return b};a.from=function(g){const b=this.load(0);b.geometryType=e.WGLGeometryType.TEXT;
b.symbologyType=g.symbologyType;b.setVV(g.vvFlags,g);return b.data};a.prototype.getVariation=function(){return{...d._get(d._getPrototypeOf(a.prototype),"getVariation",this).call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return d._createClass(a)}(v(w(B(n(m)))));t.shared=new t(0);let u=function(f){function a(){return c.apply(this,
arguments)}d._inherits(a,f);var c=d._createSuper(a);a.load=function(g){const b=this.shared;b.data=g;return b};a.from=function(g){const b=this.load(0);b.geometryType=e.WGLGeometryType.LABEL;b.symbologyType=g.symbologyType;b.setVV(g.vvFlags,g);b.mapAligned=D.isMapAligned(g.placement);return b.data};a.prototype.getVariation=function(){return{...d._get(d._getPrototypeOf(a.prototype),"getVariation",this).call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,
vvSizeUnitValue:this.vvSizeUnitValue}};return d._createClass(a)}(n(m));u.shared=new u(0);l.FillMaterialKey=p;l.LabelMaterialKey=u;l.LineMaterialKey=r;l.MarkerMaterialKey=q;l.MaterialKeyBase=m;l.TextMaterialKey=t;l.createMaterialKey=function(f,a){switch(f){case e.WGLGeometryType.FILL:return p.from(a);case e.WGLGeometryType.LINE:return r.from(a);case e.WGLGeometryType.MARKER:return q.from(a);case e.WGLGeometryType.TEXT:return t.from(a);case e.WGLGeometryType.LABEL:return u.from(a);default:throw Error(`Unable to createMaterialKey for unknown geometryType ${f}`);
}};l.hasOutlineFillSymbology=function(f){return x(f.symbologyType)};l.hasSimpleSymbology=function(f){return y(f.symbologyType)};l.hydrateMaterialKey=function(f){switch(m.load(f).geometryType){case e.WGLGeometryType.MARKER:return new q(f);case e.WGLGeometryType.FILL:return new p(f);case e.WGLGeometryType.LINE:return new r(f);case e.WGLGeometryType.TEXT:return new t(f);case e.WGLGeometryType.LABEL:return new u(f)}};l.isOutlineFillSymbology=x;l.isSimpleSymbology=y;Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})});