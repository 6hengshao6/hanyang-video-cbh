// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(l,k,n,t,u,m,v,p,y,g,w,z){l.CapType=void 0;(function(f){f[f.BUTT=0]="BUTT";f[f.ROUND=1]="ROUND";f[f.SQUARE=2]="SQUARE";f[f.UNKNOWN=4]="UNKNOWN"})(l.CapType||(l.CapType={}));let q=function(){function f(c,
a,d,e){this.type=c;this.typeName=a.type;this.id=a.id;this.source=a.source;this.sourceLayer=a["source-layer"];this.minzoom=a.minzoom;this.maxzoom=a.maxzoom;this.filter=a.filter;this.layout=a.layout;this.paint=a.paint;this.z=d;this.uid=e;switch(c){case g.StyleLayerType.BACKGROUND:this._layoutDefinition=g.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=g.StyleDefinition.backgroundPaintDefinition;break;case g.StyleLayerType.FILL:this._layoutDefinition=g.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=g.StyleDefinition.fillPaintDefinition;break;case g.StyleLayerType.LINE:this._layoutDefinition=g.StyleDefinition.lineLayoutDefinition;this._paintDefinition=g.StyleDefinition.linePaintDefinition;break;case g.StyleLayerType.SYMBOL:this._layoutDefinition=g.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=g.StyleDefinition.symbolPaintDefinition;break;case g.StyleLayerType.CIRCLE:this._layoutDefinition=g.StyleDefinition.circleLayoutDefinition,this._paintDefinition=g.StyleDefinition.circlePaintDefinition}this._layoutProperties=
this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var b=f.prototype;b.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=y.createFilter(this.filter)};b.getLayoutProperty=function(c){return this._layoutProperties[c]};b.getPaintProperty=function(c){return this._paintProperties[c]};b.getLayoutValue=function(c,a,d){let e;const h=this._layoutProperties[c];h&&(e=h.getValue(a,d));void 0===e&&(e=this._layoutDefinition[c]["default"]);
return e};b.getPaintValue=function(c,a,d){let e;const h=this._paintProperties[c];h&&(e=h.getValue(a,d));void 0===e&&(e=this._paintDefinition[c]["default"]);return e};b.isPainterDataDriven=function(){const c=this._paintProperties;if(c)for(const a in c)if(c[a].isDataDriven)return!0;return!1};b._parseLayout=function(c){const a={};for(const d in c){const e=this._layoutDefinition[d];e&&(a[d]=new w(e,c[d]))}return a};b._parsePaint=function(c){const a={};for(const d in c){const e=this._paintDefinition[d];
e&&(a[d]=new w(e,c[d]))}return a};b.computeAttributesKey=function(c,a,d,e){let h=0,x=0;for(const r of a){a=3;if(!r||r!==e){const {isLayout:A,isOptional:B}=d[r];a=A?this.getLayoutProperty(r):this.getPaintProperty(r);a=a?.interpolator?2:a?.isDataDriven?1:B&&!a?3:0}x|=a<<h;h+=2}return x<<3|c};return k._createClass(f)}(),C=function(f){function b(a,d,e,h){a=c.call(this,a,d,e,h);a.backgroundMaterial=new t.VTLBackgroundMaterial(a.computeAttributesKey(n.ShaderProgramType.BACKGROUND,t.VTLBackgroundMaterial.ATTRIBUTES,
t.VTLBackgroundMaterial.ATTRIBUTES_INFO));return a}k._inherits(b,f);var c=k._createSuper(b);return k._createClass(b)}(q),D=function(f){function b(a,d,e,h){a=c.call(this,a,d,e,h);d=a.getPaintProperty("fill-color");e=a.getPaintProperty("fill-opacity");h=a.getPaintProperty("fill-pattern");a.hasDataDrivenColor=d?.isDataDriven;a.hasDataDrivenOpacity=e?.isDataDriven;a.hasDataDrivenFill=a.hasDataDrivenColor||a.hasDataDrivenOpacity||h?.isDataDriven;e=a.getPaintProperty("fill-outline-color");a.outlineUsesFillColor=
!e;a.hasDataDrivenOutlineColor=e?.isDataDriven;a.hasDataDrivenOutline=e?e.isDataDriven:d?d.isDataDriven:!1;a.hasDataDrivenOutline=(e?a.hasDataDrivenOutlineColor:a.hasDataDrivenColor)||a.hasDataDrivenOpacity;a.fillMaterial=new m.VTLFillMaterial(a.computeAttributesKey(n.ShaderProgramType.FILL,m.VTLFillMaterial.ATTRIBUTES,m.VTLFillMaterial.ATTRIBUTES_INFO));a.outlineMaterial=new m.VTLOutlineMaterial(a.computeAttributesKey(n.ShaderProgramType.OUTLINE,a.outlineUsesFillColor?m.VTLOutlineMaterial.ATTRIBUTES_FILL:
m.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,a.outlineUsesFillColor?m.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:m.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),a.outlineUsesFillColor);return a}k._inherits(b,f);var c=k._createSuper(b);return k._createClass(b)}(q),E=function(f){function b(a,d,e,h){a=c.call(this,a,d,e,h);d=a.getPaintProperty("line-pattern");a.lineMaterial=new v.VTLLineMaterial(a.computeAttributesKey(n.ShaderProgramType.LINE,v.VTLLineMaterial.ATTRIBUTES,v.VTLLineMaterial.ATTRIBUTES_INFO,d?"line-dasharray":
""));a.hasDataDrivenLine=a.getPaintProperty("line-blur")?.isDataDriven||a.getPaintProperty("line-color")?.isDataDriven||a.getPaintProperty("line-gap-width")?.isDataDriven||a.getPaintProperty("line-offset")?.isDataDriven||a.getPaintProperty("line-opacity")?.isDataDriven||a.getPaintProperty("line-pattern")?.isDataDriven||a.getPaintProperty("line-dasharray")?.isDataDriven||a.getLayoutProperty("line-cap")?.isDataDriven||a.getPaintProperty("line-width")?.isDataDriven;a.canUseThinTessellation=!1;!a.hasDataDrivenLine&&
(d=a.getPaintProperty("line-width"),!d||"number"===typeof d&&.5*d<z.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(d=a.getPaintProperty("line-offset"),!d||"number"===typeof d&&0===d)&&(a.canUseThinTessellation=!0);return a}k._inherits(b,f);var c=k._createSuper(b);b.prototype.getDashKey=function(a,d){switch(d){case l.CapType.BUTT:d="Butt";break;case l.CapType.ROUND:d="Round";break;case l.CapType.SQUARE:d="Square";break;default:d="Butt"}return`dasharray-[${a.toString()}]-${d}`};return k._createClass(b)}(q),F=function(f){function b(a,
d,e,h){a=c.call(this,a,d,e,h);a.iconMaterial=new p.VTLIconMaterial(a.computeAttributesKey(n.ShaderProgramType.ICON,p.VTLIconMaterial.ATTRIBUTES,p.VTLIconMaterial.ATTRIBUTES_INFO));a.textMaterial=new p.VTLTextMaterial(a.computeAttributesKey(n.ShaderProgramType.TEXT,p.VTLTextMaterial.ATTRIBUTES,p.VTLTextMaterial.ATTRIBUTES_INFO));a.hasDataDrivenIcon=a.getPaintProperty("icon-color")?.isDataDriven||a.getPaintProperty("icon-halo-blur")?.isDataDriven||a.getPaintProperty("icon-halo-color")?.isDataDriven||
a.getPaintProperty("icon-halo-width")?.isDataDriven||a.getPaintProperty("icon-opacity")?.isDataDriven||a.getLayoutProperty("icon-size")?.isDataDriven;a.hasDataDrivenText=a.getPaintProperty("text-color")?.isDataDriven||a.getPaintProperty("text-halo-blur")?.isDataDriven||a.getPaintProperty("text-halo-color")?.isDataDriven||a.getPaintProperty("text-halo-width")?.isDataDriven||a.getPaintProperty("text-opacity")?.isDataDriven||a.getLayoutProperty("text-size")?.isDataDriven;return a}k._inherits(b,f);var c=
k._createSuper(b);return k._createClass(b)}(q),G=function(f){function b(a,d,e,h){a=c.call(this,a,d,e,h);a.circleMaterial=new u.VTLCircleMaterial(a.computeAttributesKey(n.ShaderProgramType.CIRCLE,u.VTLCircleMaterial.ATTRIBUTES,u.VTLCircleMaterial.ATTRIBUTES_INFO));return a}k._inherits(b,f);var c=k._createSuper(b);return k._createClass(b)}(q),H=function(){function f(b,c,a){this.allowOverlap=b.getLayoutValue("icon-allow-overlap",c);this.ignorePlacement=b.getLayoutValue("icon-ignore-placement",c);this.keepUpright=
b.getLayoutValue("icon-keep-upright",c);this.optional=b.getLayoutValue("icon-optional",c);this.rotationAlignment=b.getLayoutValue("icon-rotation-alignment",c);this.rotationAlignment===g.RotationAlignment.AUTO&&(this.rotationAlignment=a?g.RotationAlignment.MAP:g.RotationAlignment.VIEWPORT);a=b.getLayoutProperty("icon-anchor");a?.isDataDriven?this._anchorProp=a:this.anchor=b.getLayoutValue("icon-anchor",c);a=b.getLayoutProperty("icon-offset");a?.isDataDriven?this._offsetProp=a:this.offset=b.getLayoutValue("icon-offset",
c);a=b.getLayoutProperty("icon-padding");a?.isDataDriven?this._paddingProp=a:this.padding=b.getLayoutValue("icon-padding",c);a=b.getLayoutProperty("icon-rotate");a?.isDataDriven?this._rotateProp=a:this.rotate=b.getLayoutValue("icon-rotate",c);a=b.getLayoutProperty("icon-size");a?.isDataDriven?this._sizeProp=a:this.size=b.getLayoutValue("icon-size",c)}f.prototype.update=function(b,c){this._anchorProp&&(this.anchor=this._anchorProp.getValue(b,c));this._offsetProp&&(this.offset=this._offsetProp.getValue(b,
c));this._paddingProp&&(this.padding=this._paddingProp.getValue(b,c));this._rotateProp&&(this.rotate=this._rotateProp.getValue(b,c));this._sizeProp&&(this.size=this._sizeProp.getValue(b,c))};return k._createClass(f)}(),I=function(){function f(b,c,a){this.allowOverlap=b.getLayoutValue("text-allow-overlap",c);this.ignorePlacement=b.getLayoutValue("text-ignore-placement",c);this.keepUpright=b.getLayoutValue("text-keep-upright",c);this.optional=b.getLayoutValue("text-optional",c);this.rotationAlignment=
b.getLayoutValue("text-rotation-alignment",c);this.rotationAlignment===g.RotationAlignment.AUTO&&(this.rotationAlignment=a?g.RotationAlignment.MAP:g.RotationAlignment.VIEWPORT);a=b.getLayoutProperty("text-anchor");a?.isDataDriven?this._anchorProp=a:this.anchor=b.getLayoutValue("text-anchor",c);a=b.getLayoutProperty("text-justify");a?.isDataDriven?this._justifyProp=a:this.justify=b.getLayoutValue("text-justify",c);a=b.getLayoutProperty("text-letter-spacing");a?.isDataDriven?this._letterSpacingProp=
a:this.letterSpacing=b.getLayoutValue("text-letter-spacing",c);a=b.getLayoutProperty("text-line-height");a?.isDataDriven?this._lineHeightProp=a:this.lineHeight=b.getLayoutValue("text-line-height",c);a=b.getLayoutProperty("text-max-angle");a?.isDataDriven?this._maxAngleProp=a:this.maxAngle=b.getLayoutValue("text-max-angle",c);a=b.getLayoutProperty("text-max-width");a?.isDataDriven?this._maxWidthProp=a:this.maxWidth=b.getLayoutValue("text-max-width",c);a=b.getLayoutProperty("text-offset");a?.isDataDriven?
this._offsetProp=a:this.offset=b.getLayoutValue("text-offset",c);a=b.getLayoutProperty("text-padding");a?.isDataDriven?this._paddingProp=a:this.padding=b.getLayoutValue("text-padding",c);a=b.getLayoutProperty("text-rotate");a?.isDataDriven?this._rotateProp=a:this.rotate=b.getLayoutValue("text-rotate",c);a=b.getLayoutProperty("text-size");a?.isDataDriven?this._sizeProp=a:this.size=b.getLayoutValue("text-size",c);a=b.getLayoutProperty("text-writing-mode");a?.isDataDriven?this._writingModeProp=a:this.writingMode=
b.getLayoutValue("text-writing-mode",c)}f.prototype.update=function(b,c){this._anchorProp&&(this.anchor=this._anchorProp.getValue(b,c));this._justifyProp&&(this.justify=this._justifyProp.getValue(b,c));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(b,c));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(b,c));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(b,c));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(b,c));this._offsetProp&&
(this.offset=this._offsetProp.getValue(b,c));this._paddingProp&&(this.padding=this._paddingProp.getValue(b,c));this._rotateProp&&(this.rotate=this._rotateProp.getValue(b,c));this._sizeProp&&(this.size=this._sizeProp.getValue(b,c));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(b,c))};return k._createClass(f)}();l.BackgroundStyleLayer=C;l.CircleStyleLayer=G;l.FillStyleLayer=D;l.IconLayout=H;l.LineStyleLayer=E;l.StyleLayer=q;l.SymbolStyleLayer=F;l.TextLayout=I;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})});