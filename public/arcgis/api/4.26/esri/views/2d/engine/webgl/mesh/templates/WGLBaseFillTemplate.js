// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../enums ../../number ../../Utils ../../materialKey/MaterialKey ./templateUtils ./WGLLineTemplate".split(" "),function(n,r,t,u,v,w,p,q,x){return y=>function(g){function l(...a){a=z.call(this,...a);a.forceLibtess=!1;a._bitset=0;a._lineTemplate=null;a.geometryType=u.WGLGeometryType.FILL;return a}n._inherits(l,g);var z=n._createSuper(l);g=l.prototype;g._maybeAddLineTemplate=
function(a){this._lineTemplate=x.fromFillOutline(a)};g._write=function(a,b,d,c){d="esriGeometryPoint"===b.geometryType;const e=p.FillMaterialKey.load(this._materialKey);a.recordStart(b.getDisplayId(),this._materialKey,this.geometryType,d);this._writeGeometry(a,b,e,c,d);p.hasOutlineFillSymbology(e)&&r.isSome(this._lineTemplate)&&this._lineTemplate.writeGeometry(a,b,c,d);a.recordEnd()};g._writeGeometry=function(a,b,d,c,e){c=this._getGeometry(b,c,e);r.isNone(c)||(e=[],100<c.maxLength||this.forceLibtess||
!q.triangulate(e,c)?(c=q.triangulateLibtess(c),this._writeVertices(a,b,c,[c.length/2],d)):e.length&&this._writeVertices(a,b,c.coords,c.lengths,d,e))};g._writeVertex=function(a,b,d,c,e,f){const h=v.i1616to32(1*c,1*e);a.vertexBounds(c,e,0,0);a.vertexWrite(h);a.vertexWrite(b);d.symbologyType===u.WGLSymbologyType.DOT_DENSITY?a.vertexWriteF32(1/Math.abs(f.readGeometryArea())):(a.vertexWrite(this.fillColor),b=p.hasSimpleSymbology(d),b||(a.vertexWrite(this.tl),a.vertexWrite(this.br)),a.vertexWrite(this.aux21),
a.vertexWrite(this.aux22),a.vertexWrite(this.aux3),b||a.vertexWrite(this._minMaxZoom))};g._writeVertices=function(a,b,d,c,e,f){var h=b.getDisplayId();h|=this._bitset<<24;var k=c.reduce((m,A)=>m+A);const B=w.getStrides(e.geometryType,e.symbologyType).geometry/4;c=a.vertexCount();a.vertexEnsureSize(B*k);k=0;if(f)for(const m of f)this._writeVertex(a,h,e,d[2*m],d[2*m+1],b),k++;else for(f=0;f<d.length;f+=2)this._writeVertex(a,h,e,Math.round(d[f]),Math.round(d[f+1]),b),k++;a.indexEnsureSize(k);for(b=0;b<
k;b++)a.indexWrite(b+c)};g._getGeometry=function(a,b,d){return(a=b?t.deltaDecodeGeometry(t.convertFromGeometry(b),2):a.readGeometryForDisplay())?q.clipMarshall(a,d?256:8):null};return n._createClass(l)}(y)});