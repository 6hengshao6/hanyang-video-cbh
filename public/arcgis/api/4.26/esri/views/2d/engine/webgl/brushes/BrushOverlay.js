// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../definitions ../Utils ./WGLBrush ../../../../webgl/enums".split(" "),function(h,n,k,p,q,b){return function(e){function g(){var a=r.apply(this,arguments);a._desc={vsPath:"overlay/overlay",fsPath:"overlay/overlay",attributes:new Map([["a_pos",0],["a_uv",1]])};return a}h._inherits(g,e);var r=h._createSuper(g);e=g.prototype;e.dispose=function(){};e.prepareState=function({context:a}){a.setBlendingEnabled(!0);a.setColorMask(!0,
!0,!0,!0);a.setBlendFunctionSeparate(b.BlendFactor.ONE,b.BlendFactor.ONE_MINUS_SRC_ALPHA,b.BlendFactor.ONE,b.BlendFactor.ONE_MINUS_SRC_ALPHA);a.setStencilWriteMask(0);a.setStencilTestEnabled(!0);a.setStencilFunction(b.CompareFunction.GREATER,255,255)};e.draw=function(a,f){const {context:c,painter:t,requestRender:l,allowDelayedRender:u}=a;if(f.isReady){var {computedOpacity:v,dvsMat3:w,isWrapAround:x,perspectiveTransform:y,texture:z}=f;a.timeline.begin(this.name);var d=t.materialManager.getProgram(this._desc);
if(u&&n.isSome(l)&&!d.compiled)l();else{var m=p.createProgramDescriptor("overlay",{geometry:[{location:0,name:"a_pos",count:2,type:b.DataType.FLOAT}],tex:[{location:1,name:"a_uv",count:2,type:b.DataType.UNSIGNED_SHORT}]});if(f=f.getVAO(c,m.bufferLayouts,m.attributes))c.bindVAO(f),c.useProgram(d),c.bindTexture(z,k.TEXTURE_BINDING_BITMAP),d.setUniformMatrix3fv("u_dvsMat3",w),d.setUniform1i("u_texture",k.TEXTURE_BINDING_BITMAP),d.setUniform1f("u_opacity",v),d.setUniform2fv("u_perspective",y),c.drawArrays(b.PrimitiveType.TRIANGLE_STRIP,
0,x?10:4),c.bindVAO(),a.timeline.end(this.name)}}};return h._createClass(g)}(q)});