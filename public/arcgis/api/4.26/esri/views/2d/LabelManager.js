// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/has ../../core/Logger ../../core/maybe ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./engine/webgl/collisions/CollisionEngine".split(" "),function(f,d,c,u,l,m,v,n,p,g,w,x,q,r){c=function(b){function e(a){a=t.call(this,a);a._applyVisibilityPassThrottled=
p.throttle(a._applyVisibilityPass,32,f._assertThisInitialized(a));a.lastUpdateId=-1;a.updateRequested=!1;a.view=null;return a}f._inherits(e,b);var t=f._createSuper(e);b=e.prototype;b.initialize=function(){this.collisionEngine=new r.CollisionEngine};b.destroy=function(){this.collisionEngine=null;this._applyVisibilityPassThrottled=n.removeMaybe(this._applyVisibilityPassThrottled)};b.update=function(a){this._applyVisibilityPassThrottled(a)};b.viewChange=function(){this.requestUpdate()};b.requestUpdate=
function(){this.updateRequested||(this.updateRequested=!0,this.view?.requestUpdate())};b.processUpdate=function(a){this._set("updateParameters",a);this.updateRequested&&(this.updateRequested=!1,this.update(a))};b._applyVisibilityPass=function(a){const h=this.view;if(h)try{const k=h.featuresTilingScheme.getClosestInfoForScale(a.state.scale).level;this.collisionEngine.run(h.allLayerViews.items,a,k)}catch(k){}};f._createClass(e,[{key:"updating",get:function(){m("esri-2d-log-updating")&&console.log(`Updating LabelManager ${this.updateRequested}:\n-> updateRequested: ${this.updateRequested}`);
return this.updateRequested}}]);return e}(l.HandleOwnerMixin(c));d.__decorate([g.property()],c.prototype,"updateRequested",void 0);d.__decorate([g.property({readOnly:!0})],c.prototype,"updateParameters",void 0);d.__decorate([g.property()],c.prototype,"updating",null);d.__decorate([g.property()],c.prototype,"view",void 0);return c=d.__decorate([q.subclass("esri.views.2d.layers.labels.LabelManager")],c)});