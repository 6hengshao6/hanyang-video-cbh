// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/aaBoundingRect ../../../geometry/support/spatialReferenceUtils ../tiling/PagedTileQueue ../tiling/TileInfoView ../tiling/TileKey ../tiling/TileQueue ../tiling/TileStrategy ./LayerView2D ./support/Display ../../layers/LayerView ../../layers/RefreshableLayerView".split(" "),
function(l,p,t,h,H,I,w,x,y,J,z,K,L,M,A,B,C,D){const q=new Set,m=[],n=[];let E=l._createClass(function(c,f,r,a,b,g,d,k=[0,0],e=x.create()){this.id=c;this.level=f;this.row=r;this.col=a;this.world=b;this.resolution=g;this.scale=d;this.coords=k;this.bounds=e});h=function(c){function f(a){a=r.call(this,a);a._tileMap=new Map;a.layer=null;a.tiles=[];return a}l._inherits(f,c);var r=l._createSuper(f);c=f.prototype;c.initialize=function(){this.display=new B.Display(this);this.container.addChild(this.display)};
c.attach=function(){};c.detach=function(){};c.requestRender=function(){this.display.requestRender()};c.tilesChanged=function(a,b){};c.supportsSpatialReference=function(a){const b=this.layer?.tileInfo;return b?y.equals(b.spatialReference,a):!0};c.doRefresh=async function(){};c.isUpdating=function(){return!1};c.update=function(a){var b=this._tileInfoView;const g=this.tiles;if(b){a=b.getTileCoverage(a.state,0);const {spans:k,lodInfo:e}=a??{};if(k&&k.length&&e)for(const {row:u,colFrom:F,colTo:G}of k)for(a=
F;a<=G;a++){var d=e.normalizeCol(a);const v=e.getWorldForColumn(a);b=`${e.level}/${u}/${d}/${v}`;this._tileMap.has(b)||(d=new E(b,e.level,u,d,v,e.resolution,e.scale),e.getTileCoords(d.coords,d,!1),e.getTileBounds(d.bounds,d,!0),this._tileMap.set(b,d),g.push(d),m.push(d));q.add(b)}}for(a=g.length-1;0<=a;a--)b=g[a],q.has(b.id)||(g.splice(a,1),n.push(b),this._tileMap.delete(b.id));if(m.length||n.length)this.tilesChanged(m,n),m.length=n.length=0;q.clear();this.requestRender()};c.moveStart=function(){};
c.viewChange=function(){this.requestUpdate()};c.moveEnd=function(){};l._createClass(f,[{key:"_tileInfoView",get:function(){const a=this.layer&&this.layer.tileInfo;return a?new z(a):null}}]);return f}(D(A.LayerView2DMixin(C)));p.__decorate([t.property()],h.prototype,"_tileInfoView",null);p.__decorate([t.property()],h.prototype,"layer",void 0);return h=p.__decorate([w.subclass("esri.views.2d.layers.BaseLayerView2D")],h)});