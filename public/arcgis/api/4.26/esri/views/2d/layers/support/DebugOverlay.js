// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../../core/arrayUtils ../../../../core/has ../../../webgl/checkWebGLError ../../../webgl/context-util ../../../webgl/enums ../../../../chunks/builtins ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../engine/DisplayObject ../../../webgl/VertexElementDescriptor".split(" "),function(f,m,g,n,k,x,y,
z,A,B,c,C,D,p,q,r){const t={geometry:[new r.VertexElementDescriptor("a_PositionAndFlags",3,c.DataType.SHORT,0,6)]},h=new Map;h.set("a_PositionAndFlags",0);const u={vsPath:"debug/overlay",fsPath:"debug/overlay",attributes:h};return function(d){function e(b){var a=v.call(this);a._conf=b;return a}f._inherits(e,d);var v=f._createSuper(e);e.makeFlags=function(b,a){return b|a<<2};d=e.prototype;d._createTransforms=function(){return{dvs:n.create()}};d.doRender=function(b){this._updateTransforms(b);this._ensureResources(b);
const {context:a}=b;a.useProgram(this._program);this._program.setUniformMatrix3fv("u_dvsMat3",this.transforms.dvs);this._program.setUniform4fv("u_colors",this._conf.getColors(b));this._program.setUniform1fv("u_opacities",this._conf.getOpacities(b));const {vertexData:w,indexData:l}=this._conf.getMesh(b);this._vertexBuffer.setData(w);this._indexBuffer.setData(l);a.bindVAO(this._vertexArray);a.setBlendingEnabled(!0);a.setBlendFunction(c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA);a.setDepthTestEnabled(!1);
a.setStencilTestEnabled(!1);a.setColorMask(!0,!0,!0,!0);a.drawElements(c.PrimitiveType.TRIANGLES,l.length,c.DataType.UNSIGNED_INT,0)};d.onDetach=function(){this._vertexArray=m.disposeMaybe(this._vertexArray)};d._updateTransforms=function(b){g.identity(this.transforms.dvs);g.translate(this.transforms.dvs,this.transforms.dvs,[-1,1]);g.scale(this.transforms.dvs,this.transforms.dvs,[2/b.state.size[0],-2/b.state.size[1],1])};d._ensureResources=function(b){const {context:a}=b;this._program||(this._program=
b.painter.materialManager.getProgram(u));this._vertexBuffer||(this._vertexBuffer=k.BufferObject.createVertex(a,c.Usage.STREAM_DRAW));this._indexBuffer||(this._indexBuffer=k.BufferObject.createIndex(a,c.Usage.STREAM_DRAW));this._vertexArray||(this._vertexArray=new p.VertexArrayObject(a,h,t,{geometry:this._vertexBuffer},this._indexBuffer))};return f._createClass(e)}(q.DisplayObject)});