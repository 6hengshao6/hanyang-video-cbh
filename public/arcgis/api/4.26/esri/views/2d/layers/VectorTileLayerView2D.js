// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ../../tiling/TileKey".split(" "),function(C,p,z,F,w,e,m,b,a){let f=function(){function d(n,q,g){this._layer=n;this._styleRepository=q;this.devicePixelRatio=g;this._connection=this._glyphMosaic=this._spriteMosaic=null}var k=d.prototype;
k.destroy=function(){this._connection?.close();this._glyphMosaic=this._spriteMosaic=this._layer=this._styleRepository=this._connection=null};k.start=async function(n){this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,n);this._spriteSourcePromise.then(g=>{this._spriteMosaic=new b(1024,1024,250);this._spriteMosaic.setSpriteSource(g)});var q=this._layer.currentStyleInfo.glyphsUrl;q=new m(q?F.addQueryParameters(q,{...this._layer.customParameters,token:this._layer.apiKey}):null);
this._glyphMosaic=new e(1024,1024,q);this._broadcastPromise=w.open("WorkerTileHandler",{client:this,schedule:n.schedule,signal:n.signal}).then(g=>{this._connection=g;this._layer&&!this._connection.closed&&(g=g.broadcast("setStyle",this._layer.currentStyleInfo.style,n),Promise.all(g).catch(v=>z.throwIfNotAbortError(v)))})};k.updateStyle=async function(n){await this._broadcastPromise;return this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",n))};k.setSpriteSource=function(n){const q=
new b(1024,1024,250);q.setSpriteSource(n);this._spriteMosaic=q;this._spriteSourcePromise=Promise.resolve(n);return q};k.setStyle=async function(n,q){await this._broadcastPromise;this._styleRepository=n;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null);this._spriteSourcePromise.then(g=>{this._spriteMosaic=new b(1024,1024,250);this._spriteMosaic.setSpriteSource(g)});n=new m(this._layer.currentStyleInfo.glyphsUrl?F.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,
{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new e(1024,1024,n);return this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",q))};k.fetchTileData=function(n,q){return this._getRefKeys(n,q).then(g=>{const v=this._layer.sourceNameToSource,x=[];for(const h in v)x.push(h);return this._getSourcesData(x,g,q)})};k.parseTileData=function(n,q){const g=n&&n.data;if(!g)return Promise.resolve(null);const {sourceName2DataAndRefKey:v,transferList:x}=g;return 0===
Object.keys(v).length?Promise.resolve(null):this._broadcastPromise.then(()=>this._connection.invoke("createTileAndParse",{key:n.key.id,sourceName2DataAndRefKey:v,styleLayerUIDs:n.styleLayerUIDs},{...q,transferList:x}))};k.getSprites=async function(n){await this._spriteSourcePromise;return this._spriteMosaic.getSpriteItems(n)};k.getGlyphs=function(n){return this._glyphMosaic.getGlyphItems(n.font,n.codePoints)};k._getTilePayload=async function(n,q,g){n=a.pool.acquire(n.id);const v=this._layer.sourceNameToSource[q],
{level:x,row:h,col:r}=n;a.pool.release(n);try{return{protobuff:await v.requestTile(x,h,r,g),sourceName:q}}catch(A){if(z.isAbortError(A))throw A;return{protobuff:null,sourceName:q}}};k._getRefKeys=function(n,q){const g=this._layer.sourceNameToSource,v=[];for(const x in g){const h=g[x].getRefKey(n,q);v.push(h)}return z.eachAlways(v)};k._getSourcesData=function(n,q,g){const v=[];for(let x=0;x<q.length;x++)if(null==q[x].value||null==n[x])v.push(null);else{const h=this._getTilePayload(q[x].value,n[x],
g);v.push(h)}return z.eachAlways(v).then(x=>{const h={},r=[];for(let A=0;A<x.length;A++){const G=x[A].value;G&&G.protobuff&&0<G.protobuff.byteLength&&(h[G.sourceName]={refKey:q[A].value.id,protobuff:G.protobuff},r.push(G.protobuff))}return{sourceName2DataAndRefKey:h,transferList:r}})};p._createClass(d,[{key:"spriteMosaic",get:function(){return this._spriteSourcePromise.then(()=>this._spriteMosaic)}},{key:"glyphMosaic",get:function(){return this._glyphMosaic}}]);return d}();C.TileHandler=f;Object.defineProperty(C,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(C,p,z,F,w){return function(){function e(b,a,f){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=b;this.height=a;this._glyphSource=f;this._binPack=
new p(b-4,a-4);this._glyphData.push(new Uint8Array(b*a));this._dirties.push(!0);this._textures.push(void 0)}var m=e.prototype;m.getGlyphItems=function(b,a){const f=[],d=this._glyphSource,k=new Set,n=1/256;for(const g of a)k.add(Math.floor(g*n));const q=[];k.forEach(g=>{if(256>=g){const v=b+g;this._rangePromises.has(v)?q.push(this._rangePromises.get(v)):(g=d.getRange(b,g).then(()=>{this._rangePromises["delete"](v)},()=>{this._rangePromises["delete"](v)}),this._rangePromises.set(v,g),q.push(g))}});
return Promise.all(q).then(()=>{let g=this._glyphIndex[b];g||(g={},this._glyphIndex[b]=g);for(const A of a){var v=g[A];if(v){f[A]={sdf:!0,rect:v.rect,metrics:v.metrics,page:v.page,code:A};continue}var x=d.getGlyph(b,A);if(!x||!x.metrics)continue;v=x.metrics;let G;if(0===v.width)G=new z(0,0,0,0);else{const D=v.width+6,B=v.height+6;var h=D%4?4-D%4:4,r=B%4?4-B%4:4;1===h&&(h=5);1===r&&(r=5);G=this._binPack.allocate(D+h,B+r);G.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=
null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new p(this.width-4,this.height-4),G=this._binPack.allocate(D+h,B+r));h=this._glyphData[this._currentPage];x=x.bitmap;let t;if(x)for(let K=0;K<B;K++){r=D*K;t=this.width*(G.y+K+1)+G.x;for(let O=0;O<D;O++)h[t+O+1]=x[r+O]}}g[A]={rect:G,metrics:v,tileIDs:null,page:this._currentPage};f[A]={sdf:!0,rect:G,metrics:v,page:this._currentPage,
code:A};this._dirties[this._currentPage]=!0}return f})};m.removeGlyphs=function(b){for(const a in this._glyphIndex){const f=this._glyphIndex[a];if(!f)continue;let d;for(const k in f)if(d=f[k],d.tileIDs["delete"](b),0===d.tileIDs.size){const n=this._glyphData[d.page],q=d.rect;let g,v;for(let x=0;x<q.height;x++)for(g=this.width*(q.y+x)+q.x,v=0;v<q.width;v++)n[g+v]=0;delete f[k];this._dirties[d.page]=!0}}};m.bind=function(b,a,f,d=0){this._textures[f]||(this._textures[f]=new w.Texture(b,{pixelFormat:F.PixelFormat.ALPHA,
dataType:F.PixelType.UNSIGNED_BYTE,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));const k=this._textures[f];k.setSamplingMode(a);this._dirties[f]&&k.setData(this._glyphData[f]);b.bindTexture(k,d);this._dirties[f]=!1};m.dispose=function(){this._binPack=null;for(const b of this._textures)b&&b.dispose();this._textures.length=0};return C._createClass(e)}()})},"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"../webgl/Rect"],function(C,p){return function(){function z(w,e){this._height=this._width=0;this._free=[];this._width=w;this._height=e;this._free.push(new p(0,0,w,e))}var F=z.prototype;F.allocate=function(w,e){if(w>this._width||e>this._height)return new p;let m=null,b=-1;for(let a=0;a<this._free.length;++a){const f=this._free[a];w<=f.width&&e<=f.height&&(null===m||f.y<=m.y&&f.x<=m.x)&&(m=f,b=a)}if(null===m)return new p;this._free.splice(b,1);m.width<m.height?(m.width>w&&this._free.push(new p(m.x+
w,m.y,m.width-w,e)),m.height>e&&this._free.push(new p(m.x,m.y+e,m.width,m.height-e))):(m.width>w&&this._free.push(new p(m.x+w,m.y,m.width-w,m.height)),m.height>e&&this._free.push(new p(m.x,m.y+e,w,m.height-e)));return new p(m.x,m.y,w,e)};F.release=function(w){for(let e=0;e<this._free.length;++e){const m=this._free[e];if(m.y===w.y&&m.height===w.height&&m.x+m.width===w.x)m.width+=w.width;else if(m.x===w.x&&m.width===w.width&&m.y+m.height===w.y)m.height+=w.height;else if(w.y===m.y&&w.height===m.height&&
w.x+w.width===m.x)m.x=w.x,m.width+=w.width;else if(w.x===m.x&&w.width===m.width&&w.y+w.height===m.y)m.y=w.y,m.height+=w.height;else continue;this._free.splice(e,1);this.release(w)}this._free.push(w)};C._createClass(z,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);return z}()})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request","../../../../core/pbf"],function(C,
p,z){let F=function(){function e(b){this._metrics=[];this._bitmaps=[];if(b)for(;b.next();)switch(b.tag()){case 1:const a=b.getMessage();for(;a.next();)switch(a.tag()){case 3:const f=a.getMessage();let d,k,n,q,g,v,x;for(;f.next();)switch(f.tag()){case 1:d=f.getUInt32();break;case 2:k=f.getBytes();break;case 3:n=f.getUInt32();break;case 4:q=f.getUInt32();break;case 5:g=f.getSInt32();break;case 6:v=f.getSInt32();break;case 7:x=f.getUInt32();break;default:f.skip()}f.release();d&&(this._metrics[d]={width:n,
height:q,left:g,top:v,advance:x},this._bitmaps[d]=k);break;default:a.skip()}a.release();break;default:b.skip()}}var m=e.prototype;m.getMetrics=function(b){return this._metrics[b]};m.getBitmap=function(b){return this._bitmaps[b]};return C._createClass(e)}(),w=function(){function e(){this._ranges=[]}var m=e.prototype;m.getRange=function(b){return this._ranges[b]};m.addRange=function(b,a){this._ranges[b]=a};return C._createClass(e)}();return function(){function e(b){this._glyphInfo={};this._baseURL=
b}var m=e.prototype;m.getRange=function(b,a){const f=this._getFontStack(b);if(f.getRange(a))return Promise.resolve();const d=256*a,k=d+255;if(this._baseURL)return b=this._baseURL.replace("{fontstack}",b).replace("{range}",d+"-"+k),p(b,{responseType:"array-buffer"}).then(n=>{f.addRange(a,new F(new z(new Uint8Array(n.data),new DataView(n.data))))}).catch(()=>{f.addRange(a,new F)});f.addRange(a,new F);return Promise.resolve()};m.getGlyph=function(b,a){if(b=this._getFontStack(b)){var f=Math.floor(a/256);
if(!(256<f)&&(b=b.getRange(f)))return{metrics:b.getMetrics(a),bitmap:b.getBitmap(a)}}};m._getFontStack=function(b){let a=this._glyphInfo[b];a||(a=this._glyphInfo[b]=new w);return a};return C._createClass(e)}()})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../symbols/cim/rasterizingUtils ./RectangleBinPack ../webgl/Rect ../../../webgl/enums ../../../webgl/Texture".split(" "),function(C,p,z,F,w,e){return function(){function m(a,
f,d=0){this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;(0>=a||0>=f)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=a;this._pageHeight=f;0<d&&(this._maxItemSize=d);this._binPack=new z(a-4,f-4)}var b=m.prototype;b.dispose=function(){this._binPack=null;this._mosaicRects={};for(const a of this._textures)a&&a.dispose();
this._textures.length=0};b.getWidth=function(a){return a>=this._size.length?-1:this._size[a][0]};b.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]};b.getPageSize=function(a){return a>=this._size.length?null:this._size[a]};b.setSpriteSource=function(a){this.dispose();this.pixelRatio=a.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new z(this._pageWidth-4,this._pageHeight-4);const f=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=
f;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=a};b.getSpriteItem=function(a,f=!1){var d=this._mosaicRects[a];if(d)return d;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;let k;a&&a.startsWith("dasharray-")?([d,k]=this._rasterizeDash(a),f=!0):d=this._sprites.getSpriteInfo(a);if(!d||!d.width||!d.height||0>d.width||0>d.height)return null;const n=d.width,q=d.height,[g,v,x]=this._allocateImage(n,q);if(0>=g.width)return null;
this._copy(g,d,v,x,f,k);d={rect:g,width:n,height:q,sdf:d.sdf,simplePattern:!1,pixelRatio:d.pixelRatio,page:v};return this._mosaicRects[a]=d};b.getSpriteItems=function(a){const f={};for(const d of a)f[d.name]=this.getSpriteItem(d.name,d.repeat);return f};b.getMosaicItemPosition=function(a,f){f=(a=this.getSpriteItem(a,f))&&a.rect;if(!f)return null;f.width=a.width;f.height=a.height;return{tl:[f.x+2,f.y+2],br:[f.x+2+a.width,f.y+2+a.height],page:a.page}};b.bind=function(a,f,d=0,k=0){if(!(d>=this._size.length||
d>=this._mosaicsData.length)){this._textures[d]||(this._textures[d]=new e.Texture(a,{pixelFormat:w.PixelFormat.RGBA,dataType:w.PixelType.UNSIGNED_BYTE,wrapMode:w.TextureWrapMode.CLAMP_TO_EDGE,width:this._size[d][0],height:this._size[d][1]},new Uint8Array(this._mosaicsData[d].buffer)));var n=this._textures[d];n.setSamplingMode(f);this._dirties[d]&&n.setData(new Uint8Array(this._mosaicsData[d].buffer));a.bindTexture(n,k);this._dirties[d]=!1}};m._copyBits=function(a,f,d,k,n,q,g,v,x,h,r){let A=k*f+d;
g=v*q+g;if(r)for(g-=q,r=-1;r<=h;r++,A=((r+h)%h+k)*f+d,g+=q)for(v=-1;v<=x;v++)n[g+v]=a[A+(v+x)%x];else for(d=0;d<h;d++){for(k=0;k<x;k++)n[g+k]=a[A+k];A+=f;g+=q}};b._copy=function(a,f,d,k,n,q){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(d>=this._mosaicsData.length)){var g=new Uint32Array(q?q.buffer:this._sprites.image.buffer),v=this._mosaicsData[d];v&&g||console.error("Source or target images are uninitialized!");m._copyBits(g,q?f.width:this._sprites.width,f.x,f.y,v,k[0],a.x+2,a.y+2,f.width,
f.height,n);this._dirties[d]=!0}};b._allocateImage=function(a,f){a+=2;f+=2;var d=Math.max(a,f);if(this._maxItemSize&&this._maxItemSize<d)return d=new F(0,0,a,f),this._mosaicsData.push(new Uint32Array(a*f)),this._dirties.push(!0),this._size.push([a,f]),this._textures.push(void 0),[d,this._mosaicsData.length-1,[a,f]];d=a%4?4-a%4:4;let k=f%4?4-f%4:4;1===d&&(d=5);1===k&&(k=5);d=this._binPack.allocate(a+d,f+k);return 0>=d.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),
this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new z(this._pageWidth-4,this._pageHeight-4),this._allocateImage(a,f)):[d,this._currentPage,[this._pageWidth,this._pageHeight]]};b._rasterizeDash=function(a){var f=a.match(/\[(.*?)\]/);if(!f)return null;f=f[1].split(",").map(Number);a=a.slice(a.lastIndexOf("-")+1);const [d,
k,n]=p.rasterizeDash(f,a);a=new Uint8Array(d.buffer);return[{x:0,y:0,width:k,height:n,sdf:!0,pixelRatio:1},a]};return C._createClass(m)}()})},"esri/views/2d/engine/vectorTiles/TileManager":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/LRUCache ../../../../core/maybe ../../tiling/TileCoverage ../../tiling/TileKey".split(" "),function(C,p,z,F,w,e){const m=(a,f)=>a+1/(1<<2*f);let b=function(){function a(d,k){this._tiles=new Map;this._tileCache=new z(40,n=>n.dispose());
this._viewSize=[0,0];this._visibleTiles=new Map;this.acquireTile=d.acquireTile;this.releaseTile=d.releaseTile;this.tileInfoView=d.tileInfoView;this._container=k}var f=a.prototype;f.destroy=function(){for(const [,d]of this._tiles)d.dispose();this._tiles=null;this._tileCache.clear();this._tileCache=null};f.update=function(d){this._updateCacheSize(d);const k=this.tileInfoView;d=k.getTileCoverage(d.state,0,"smallest");const {spans:n,lodInfo:q}=d,{level:g}=q,v=this._tiles,x=new Set,h=new Set;for(const {row:A,
colFrom:G,colTo:D}of n)for(let B=G;B<=D;B++){const t=e.getId(g,A,q.normalizeCol(B),q.getWorldForColumn(B)),K=this._getOrAcquireTile(t);x.add(t);K.processed()?this._addToContainer(K):h.add(new e(t))}for(const [A,G]of v)G.isCoverage=x.has(A);for(var r of h)this._findPlaceholdersForMissingTiles(r,x);r=!1;for(const [A,G]of v)G.neededForCoverage=x.has(A),G.neededForCoverage||G.isHoldingForFade&&k.intersects(d,G.key)&&x.add(A),G.isFading&&(r=!0);for(const [A]of this._tiles)x.has(A)||this._releaseTile(A);
w.pool.release(d);return!r};f.clear=function(){this._tiles.clear();this._tileCache.clear();this._visibleTiles.clear()};f.clearCache=function(){this._tileCache.clear()};f._findPlaceholdersForMissingTiles=function(d,k){var n=[];for(const [,q]of this._tiles)this._addPlaceholderChild(n,q,d,k);n=n.reduce(m,0);1E-6>Math.abs(1-n)||this._addPlaceholderParent(d.id,k)};f._addPlaceholderChild=function(d,k,n,q){if(!(k.key.level<=n.level)&&k.hasData()){var g=k.key,v=g.level-n.level;n.row===g.row>>v&&n.col===g.col>>
v&&n.world===g.world&&(this._addToContainer(k),q.add(k.id),d.push(k.key.level-n.level))}};f._addPlaceholderParent=function(d,k){const n=this._tiles;for(;;){{const [g,v,x,h]=d.split("/");d=parseInt(g,10);d=0===d?null:`${d-1}/${parseInt(v,10)>>1}/${parseInt(x,10)>>1}/${parseInt(h,10)}`}if(!d||k.has(d))break;const q=n.get(d);if(q&&q.hasData()){this._addToContainer(q);k.add(q.id);break}}};f._getOrAcquireTile=function(d){let k=this._tiles.get(d);if(k)return k;(k=this._tileCache.pop(d))||(k=this.acquireTile(new e(d)));
this._tiles.set(d,k);return k};f._releaseTile=function(d){const k=this._tiles.get(d);this.releaseTile(k);this._removeFromContainer(k);this._tiles.delete(d);k.hasData()?this._tileCache.put(d,k,1):k.dispose()};f._addToContainer=function(d){let k;const n=[],q=this._container;if(!q.contains(d)){var g=this._visibleTiles;for(const [,v]of g)this._canConnectDirectly(d,v)&&n.push(v),F.isNone(k)&&this._canConnectDirectly(v,d)&&(k=v);if(F.isSome(k)){for(const v of n)k.childrenTiles.delete(v),d.childrenTiles.add(v),
v.parentTile=d;k.childrenTiles.add(d);d.parentTile=k}else for(const v of n)d.childrenTiles.add(v),v.parentTile=d;g.set(d.id,d);q.addChild(d)}};f._removeFromContainer=function(d){this._visibleTiles.delete(d.id);this._container.removeChild(d);if(F.isSome(d.parentTile)){d.parentTile.childrenTiles.delete(d);for(const k of d.childrenTiles)F.isSome(d.parentTile)&&d.parentTile.childrenTiles.add(k)}for(const k of d.childrenTiles)k.parentTile=d.parentTile;d.parentTile=null;d.childrenTiles.clear()};f._canConnectDirectly=
function(d,k){d=d.key;let {level:n,row:q,col:g,world:v}=k.key;for(k=this._visibleTiles;0<n;){n--;q>>=1;g>>=1;if(d.level===n&&d.row===q&&d.col===g&&d.world===v)return!0;if(k.has(`${n}/${q}/${g}/${v}`))break}return!1};f._updateCacheSize=function(d){d=d.state.size;if(d[0]!==this._viewSize[0]||d[1]!==this._viewSize[1]){var k=Math.ceil(d[0]/512)+1,n=Math.ceil(d[1]/512)+1;this._viewSize[0]=d[0];this._viewSize[1]=d[1];this._tileCache.maxSize=5*k*n}};return p._createClass(a)}();C.TileManager=b;Object.defineProperty(C,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/VectorTile":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f32 ./enums ./RenderBucket ./decluttering/config ../webgl/TiledDisplayObject".split(" "),function(C,p,z,F,w,e,m,b,a){a=function(d){function k(q,g,v,x,h,r,A,G=null){g=n.call(this,q,g,v,x,h,r,4096,4096);g._memCache=G;g.type="vector-tile";g._referenced=0;g._hasSymbolBuckets=!1;
g._memoryUsedByLayerData=0;g.layerData=new Map;g.layerCount=0;g.status="loading";g.allSymbolsFadingOut=!1;g.lastOpacityUpdate=0;g.symbols=new Map;g.isCoverage=!1;g.neededForCoverage=!1;g.decluttered=!1;g.invalidating=!1;g.parentTile=null;g.childrenTiles=new Set;g._processed=!1;g._referenced=1;g.styleRepository=A;g.id=q.id;return g}p._inherits(k,d);var n=p._createSuper(k);d=k.prototype;d.setData=function(q){this.changeDataImpl(q);this.requestRender();this.ready();this.invalidating=!1;this._processed=
!0};d.deleteLayerData=function(q){let g=!1;for(const v of q)this.layerData.has(v)&&(q=this.layerData.get(v),this._memoryUsedByLayerData-=q.memoryUsed,q.type===e.BucketType.SYMBOL&&this.symbols.has(v)&&(this.symbols.delete(v),g=!0),q.destroy(),this.layerData.delete(v),this.layerCount--);z.isSome(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData);g&&this.emit("symbols-changed");this.requestRender()};d.processed=function(){return this._processed};d.hasData=function(){return 0<
this.layerCount};d.dispose=function(){"unloaded"!==this.status&&(f.delete(this),k._destroyRenderBuckets(this.layerData),this.layerData=null,this._memoryUsedByLayerData=this.layerCount=0,this.destroy(),this.status="unloaded")};d.release=function(){return 0===--this._referenced?(this.dispose(),this.stage=null,!0):!1};d.retain=function(){++this._referenced};d.changeDataImpl=function(q){let g=!1;if(q){const {bucketsWithData:v,emptyBuckets:x}=q;q=this._createRenderBuckets(v);if(x&&0<x.byteLength){const h=
new Uint32Array(x);for(const r of h)this._deleteLayerData(r)}for(const [h,r]of q)this._deleteLayerData(h),r.type===e.BucketType.SYMBOL&&(this.symbols.set(h,r.symbols),g=!0),this._memoryUsedByLayerData+=r.memoryUsed,this.layerData.set(h,r),this.layerCount++;z.isSome(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData)}this._hasSymbolBuckets=!1;for(const [,v]of this.layerData)v.type===e.BucketType.SYMBOL&&(this._hasSymbolBuckets=!0);g&&this.emit("symbols-changed")};
d.attachWithContext=function(q){this.stage={context:q,trashDisplayObject(g){g.processDetach()},untrashDisplayObject(){return!1}}};d.setTransform=function(q){p._get(p._getPrototypeOf(k.prototype),"setTransform",this).call(this,q);var g=this.resolution/(q.resolution*q.pixelRatio);const v=this.width/this.rangeX*g;g*=this.height/this.rangeY;const x=[0,0];q.toScreen(x,[this.x,this.y]);const h=this.transforms.tileUnitsToPixels;F.identity(h);F.translate(h,h,x);F.rotate(h,h,Math.PI*q.rotation/180);F.scale(h,
h,[v,g,1])};d._createTransforms=function(){return{dvs:w.create(),tileMat3:w.create(),tileUnitsToPixels:w.create()}};k._destroyRenderBuckets=function(q){if(q){var g=new Set;q.forEach(v=>{g.has(v)||(v.destroy(),g.add(v))});q.clear()}};d._createRenderBuckets=function(q){const g=new Map,v=new Map;for(const x of q){q=this._deserializeBucket(x,v);for(const h of q.layerUIDs)g.set(h,q)}return g};d._deserializeBucket=function(q,g){let v=g.get(q);if(v)return v;switch((new Uint32Array(q))[0]){case e.BucketType.FILL:v=
new m.FillRenderBucket(q,this.styleRepository);break;case e.BucketType.LINE:v=new m.LineRenderBucket(q,this.styleRepository);break;case e.BucketType.SYMBOL:v=new m.SymbolRenderBucket(q,this.styleRepository,this);break;case e.BucketType.CIRCLE:v=new m.CircleRenderBucket(q,this.styleRepository)}g.set(q,v);return v};d._deleteLayerData=function(q){if(this.layerData.has(q)){var g=this.layerData.get(q);this._memoryUsedByLayerData-=g.memoryUsed;g.destroy();this.layerData.delete(q);this.layerCount--}};p._createClass(k,
[{key:"hasSymbolBuckets",get:function(){return this._hasSymbolBuckets}},{key:"isFading",get:function(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<b.FADE_DURATION}},{key:"isHoldingForFade",get:function(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<b.FADE_DURATION)}},{key:"wasRequested",get:function(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}},{key:"referenced",get:function(){return this._referenced}},
{key:"memoryUsage",get:function(){return(this._memoryUsedByLayerData+256)/(this._referenced||1)}}]);return k}(a.TiledDisplayObject);const f=new Map;C.VectorTile=a;C.printAllocations=function(){f.forEach((d,k)=>{console.log(`\n${k.key}:`);d[0].forEach(n=>console.log(n));console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d");d[1].forEach(n=>console.log(n))})};Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/RenderBucket":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./enums ./decluttering/util ../../../webgl/BufferObject ../../../webgl/enums ../../../webgl/VertexArrayObject".split(" "),
function(C,p,z,F,w,e,m,b){let a=function(){function q(v,x){this.layerUIDs=[];this.isDestroyed=!1;this._data=v;this.memoryUsed=v.byteLength;let h=1;v=new Uint32Array(v);this.layerUIDs=[];const r=v[h++];for(let A=0;A<r;A++)this.layerUIDs[A]=v[h++];this.bufferDataOffset=h;x&&(this.layer=x.getStyleLayerByUID(this.layerUIDs[0]))}var g=q.prototype;g.destroy=function(){this.isDestroyed||(this.doDestroy(),this.isDestroyed=!0)};g.prepareForRendering=function(v){z.isNone(this._data)||(this.doPrepareForRendering(v,
this._data,this.bufferDataOffset),this._data=null)};p._createClass(q,[{key:"isPreparedForRendering",get:function(){return z.isNone(this._data)}},{key:"offset",get:function(){return this.bufferDataOffset}}]);return q}(),f=function(q){function g(x,h){h=v.call(this,x,h);h.type=F.BucketType.LINE;h.lineIndexStart=0;h.lineIndexCount=0;x=new Uint32Array(x);let r=h.bufferDataOffset;h.lineIndexStart=x[r++];h.lineIndexCount=x[r++];const A=x[r++];if(0<A){const G=new Map;for(let D=0;D<A;D++){const B=x[r++],t=
x[r++],K=x[r++];G.set(B,[t,K])}h.patternMap=G}h.bufferDataOffset=r;return h}p._inherits(g,q);var v=p._createSuper(g);q=g.prototype;q.hasData=function(){return 0<this.lineIndexCount};q.triangleCount=function(){return this.lineIndexCount/3};q.doDestroy=function(){z.isSome(this.lineVertexArrayObject)&&this.lineVertexArrayObject.dispose();z.isSome(this.lineVertexBuffer)&&this.lineVertexBuffer.dispose();z.isSome(this.lineIndexBuffer)&&this.lineIndexBuffer.dispose();this.lineIndexBuffer=this.lineVertexBuffer=
this.lineVertexArrayObject=null;this.memoryUsed=0};q.doPrepareForRendering=function(x,h,r){h=new Uint32Array(h);var A=new Int32Array(h.buffer);const G=h[r++];this.lineVertexBuffer=e.BufferObject.createVertex(x,m.Usage.STATIC_DRAW,new Int32Array(A.buffer,4*r,G));r+=G;A=h[r++];this.lineIndexBuffer=e.BufferObject.createIndex(x,m.Usage.STATIC_DRAW,new Uint32Array(h.buffer,4*r,A));r+=A;r=this.layer.lineMaterial;this.lineVertexArrayObject=new b.VertexArrayObject(x,r.getAttributeLocations(),r.getLayoutInfo(),
{geometry:this.lineVertexBuffer},this.lineIndexBuffer)};return p._createClass(g)}(a),d=function(q){function g(x,h){h=v.call(this,x,h);h.type=F.BucketType.FILL;h.fillIndexStart=0;h.fillIndexCount=0;h.outlineIndexStart=0;h.outlineIndexCount=0;x=new Uint32Array(x);let r=h.bufferDataOffset;h.fillIndexStart=x[r++];h.fillIndexCount=x[r++];h.outlineIndexStart=x[r++];h.outlineIndexCount=x[r++];const A=x[r++];if(0<A){const G=new Map;for(let D=0;D<A;D++){const B=x[r++],t=x[r++],K=x[r++];G.set(B,[t,K])}h.patternMap=
G}h.bufferDataOffset=r;return h}p._inherits(g,q);var v=p._createSuper(g);q=g.prototype;q.hasData=function(){return 0<this.fillIndexCount||0<this.outlineIndexCount};q.triangleCount=function(){return(this.fillIndexCount+this.outlineIndexCount)/3};q.doDestroy=function(){z.isSome(this.fillVertexArrayObject)&&this.fillVertexArrayObject.dispose();z.isSome(this.fillVertexBuffer)&&this.fillVertexBuffer.dispose();z.isSome(this.fillIndexBuffer)&&this.fillIndexBuffer.dispose();this.fillIndexBuffer=this.fillVertexBuffer=
this.fillVertexArrayObject=null;z.isSome(this.outlineVertexArrayObject)&&this.outlineVertexArrayObject.dispose();z.isSome(this.outlineVertexBuffer)&&this.outlineVertexBuffer.dispose();z.isSome(this.outlineIndexBuffer)&&this.outlineIndexBuffer.dispose();this.outlineIndexBuffer=this.outlineVertexBuffer=this.outlineVertexArrayObject=null;this.memoryUsed=0};q.doPrepareForRendering=function(x,h,r){h=new Uint32Array(h);var A=new Int32Array(h.buffer),G=h[r++];this.fillVertexBuffer=e.BufferObject.createVertex(x,
m.Usage.STATIC_DRAW,new Int32Array(A.buffer,4*r,G));r+=G;G=h[r++];this.fillIndexBuffer=e.BufferObject.createIndex(x,m.Usage.STATIC_DRAW,new Uint32Array(h.buffer,4*r,G));r+=G;G=h[r++];this.outlineVertexBuffer=e.BufferObject.createVertex(x,m.Usage.STATIC_DRAW,new Int32Array(A.buffer,4*r,G));r+=G;A=h[r++];this.outlineIndexBuffer=e.BufferObject.createIndex(x,m.Usage.STATIC_DRAW,new Uint32Array(h.buffer,4*r,A));r+=A;h=this.layer;r=h.fillMaterial;h=h.outlineMaterial;this.fillVertexArrayObject=new b.VertexArrayObject(x,
r.getAttributeLocations(),r.getLayoutInfo(),{geometry:this.fillVertexBuffer},this.fillIndexBuffer);this.outlineVertexArrayObject=new b.VertexArrayObject(x,h.getAttributeLocations(),h.getLayoutInfo(),{geometry:this.outlineVertexBuffer},this.outlineIndexBuffer)};return p._createClass(g)}(a),k=function(q){function g(x,h,r){h=v.call(this,x,h);h.type=F.BucketType.SYMBOL;h.iconPerPageElementsMap=new Map;h.glyphPerPageElementsMap=new Map;h.symbolInstances=[];h.isIconSDF=!1;h.opacityChanged=!1;h.lastOpacityUpdate=
0;h.symbols=[];const A=new Uint32Array(x),G=new Int32Array(x);x=new Float32Array(x);let D=h.bufferDataOffset;h.isIconSDF=!!A[D++];var B=A[D++];for(var t=0;t<B;t++){var K=A[D++],O=A[D++],R=A[D++];h.iconPerPageElementsMap.set(K,[O,R])}B=A[D++];for(t=0;t<B;t++)K=A[D++],O=A[D++],R=A[D++],h.glyphPerPageElementsMap.set(K,[O,R]);B=A[D++];t=A[D++];h.iconOpacity=new Int32Array(B);h.textOpacity=new Int32Array(t);D=w.deserializeSymbols(A,G,x,D,h.symbols,r);h.bufferDataOffset=D;return h}p._inherits(g,q);var v=
p._createSuper(g);q=g.prototype;q.hasData=function(){return 0<this.iconPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};q.triangleCount=function(){let x=0;for(const [,h]of this.iconPerPageElementsMap)x+=h[1];for(const [,h]of this.glyphPerPageElementsMap)x+=h[1];return x/3};q.doDestroy=function(){z.isSome(this.iconVertexArrayObject)&&this.iconVertexArrayObject.dispose();z.isSome(this.iconVertexBuffer)&&this.iconVertexBuffer.dispose();z.isSome(this.iconOpacityBuffer)&&this.iconOpacityBuffer.dispose();
z.isSome(this.iconIndexBuffer)&&this.iconIndexBuffer.dispose();this.iconIndexBuffer=this.iconOpacityBuffer=this.iconVertexBuffer=this.iconVertexArrayObject=null;z.isSome(this.textVertexArrayObject)&&this.textVertexArrayObject.dispose();z.isSome(this.textVertexBuffer)&&this.textVertexBuffer.dispose();z.isSome(this.textOpacityBuffer)&&this.textOpacityBuffer.dispose();z.isSome(this.textIndexBuffer)&&this.textIndexBuffer.dispose();this.textIndexBuffer=this.textOpacityBuffer=this.textVertexBuffer=this.textVertexArrayObject=
null;this.memoryUsed=0};q.updateOpacityInfo=function(){if(this.opacityChanged){this.opacityChanged=!1;var x=z.unwrap(this.iconOpacity),h=z.unwrap(this.iconOpacityBuffer);0<x.length&&x.byteLength===h.size&&h.setSubData(x,0,0,x.length);x=z.unwrap(this.textOpacity);h=z.unwrap(this.textOpacityBuffer);0<x.length&&x.byteLength===h.size&&h.setSubData(x,0,0,x.length)}};q.doPrepareForRendering=function(x,h,r){h=new Uint32Array(h);var A=new Int32Array(h.buffer),G=h[r++];this.iconVertexBuffer=e.BufferObject.createVertex(x,
m.Usage.STATIC_DRAW,new Int32Array(A.buffer,4*r,G));r+=G;G=h[r++];this.iconIndexBuffer=e.BufferObject.createIndex(x,m.Usage.STATIC_DRAW,new Uint32Array(h.buffer,4*r,G));r+=G;G=h[r++];this.textVertexBuffer=e.BufferObject.createVertex(x,m.Usage.STATIC_DRAW,new Int32Array(A.buffer,4*r,G));r+=G;A=h[r++];this.textIndexBuffer=e.BufferObject.createIndex(x,m.Usage.STATIC_DRAW,new Uint32Array(h.buffer,4*r,A));r+=A;this.iconOpacityBuffer=e.BufferObject.createVertex(x,m.Usage.STATIC_DRAW,z.unwrap(this.iconOpacity).buffer);
this.textOpacityBuffer=e.BufferObject.createVertex(x,m.Usage.STATIC_DRAW,z.unwrap(this.textOpacity).buffer);h=this.layer;r=h.iconMaterial;h=h.textMaterial;this.iconVertexArrayObject=new b.VertexArrayObject(x,r.getAttributeLocations(),r.getLayoutInfo(),{geometry:this.iconVertexBuffer,opacity:this.iconOpacityBuffer},this.iconIndexBuffer);this.textVertexArrayObject=new b.VertexArrayObject(x,h.getAttributeLocations(),h.getLayoutInfo(),{geometry:this.textVertexBuffer,opacity:this.textOpacityBuffer},this.textIndexBuffer)};
return p._createClass(g)}(a),n=function(q){function g(x,h){h=v.call(this,x,h);h.type=F.BucketType.CIRCLE;h.circleIndexStart=0;h.circleIndexCount=0;x=new Uint32Array(x);let r=h.bufferDataOffset;h.circleIndexStart=x[r++];h.circleIndexCount=x[r++];h.bufferDataOffset=r;return h}p._inherits(g,q);var v=p._createSuper(g);q=g.prototype;q.hasData=function(){return 0<this.circleIndexCount};q.triangleCount=function(){return this.circleIndexCount/3};q.doDestroy=function(){z.isSome(this.circleVertexArrayObject)&&
this.circleVertexArrayObject.dispose();z.isSome(this.circleVertexBuffer)&&this.circleVertexBuffer.dispose();z.isSome(this.circleIndexBuffer)&&this.circleIndexBuffer.dispose();this.circleIndexBuffer=this.circleVertexBuffer=this.circleVertexArrayObject=null;this.memoryUsed=0};q.doPrepareForRendering=function(x,h,r){h=new Uint32Array(h);var A=new Int32Array(h.buffer);const G=h[r++];this.circleVertexBuffer=e.BufferObject.createVertex(x,m.Usage.STATIC_DRAW,new Int32Array(A.buffer,4*r,G));r+=G;A=h[r++];
this.circleIndexBuffer=e.BufferObject.createIndex(x,m.Usage.STATIC_DRAW,new Uint32Array(h.buffer,4*r,A));r+=A;r=this.layer.circleMaterial;this.circleVertexArrayObject=new b.VertexArrayObject(x,r.getAttributeLocations(),r.getLayoutInfo(),{geometry:this.circleVertexBuffer},this.circleIndexBuffer)};return p._createClass(g)}(a);C.CircleRenderBucket=n;C.FillRenderBucket=d;C.LineRenderBucket=f;C.RenderBucketBase=a;C.SymbolRenderBucket=k;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/util":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../enums","./core"],function(C,p,z,F){let w=function(){function e(b,a,f){this._rows=Math.ceil(a/f);this._columns=Math.ceil(b/f);this._cellSize=f;this.cells=Array(this._rows);for(b=0;b<this._rows;b++)for(this.cells[b]=Array(this._columns),a=0;a<this._columns;a++)this.cells[b][a]=[]}var m=e.prototype;m.getCell=function(b,a){a=Math.min(Math.max(Math.floor(a/this._cellSize),0),this._rows-1);b=Math.min(Math.max(Math.floor(b/this._cellSize),0),this._columns-
1);return this.cells[a]&&this.cells[a][b]||null};m.getCellSpan=function(b,a,f,d){return[Math.min(Math.max(Math.floor(b/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(a/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(f/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(d/this._cellSize),0),this.rows-1)]};p._createClass(e,[{key:"cellSize",get:function(){return this._cellSize}},{key:"columns",get:function(){return this._columns}},{key:"rows",get:function(){return this._rows}}]);
return e}();C.GridIndex=w;C.deserializeSymbols=function(e,m,b,a,f,d){const k=m[a++];for(let g=0;g<k;g++){const v=new F.VTLSymbol(d);v.xTile=m[a++];v.yTile=m[a++];v.hash=m[a++];v.priority=m[a++];var n=m[a++];for(var q=0;q<n;q++){const x=m[a++],h=m[a++],r=m[a++],A=m[a++],G=!!m[a++],D=m[a++],B=b[a++],t=b[a++],K=m[a++],O=m[a++];v.colliders.push({xTile:x,yTile:h,dxPixels:r,dyPixels:A,hard:G,partIndex:D,width:K,height:O,minLod:B,maxLod:t})}n=e[a++];for(q=0;q<n;q++)v.textVertexRanges.push([e[a++],e[a++]]);
n=e[a++];for(q=0;q<n;q++)v.iconVertexRanges.push([e[a++],e[a++]]);f.push(v)}return a};C.tileCoordChange=function(e,m,b,a,f,d){b-=f;if(0<=b)return(m>>b)+(a-(d<<b))*(e>>b);b=-b;return m-(d-(a<<b))*(e>>b)<<b};C.writeOpacityToBuffers=function(e,m,b){for(const [g,v]of e.symbols){{var a=e,f=m,d=b,k=v;const x=a.layerData.get(g);if(x.type===z.BucketType.SYMBOL){for(const h of k){k=h.unique;var n=void 0;if(h.selectedForRendering){var q=k.parts[0];n=q.startOpacity;q=q.targetOpacity;a.allSymbolsFadingOut=a.allSymbolsFadingOut&&
0===q;n=d?Math.floor(127*n)|q<<7:q?255:0;n|=n<<24|n<<16|n<<8}else n=0;for(const [r,A]of h.iconVertexRanges)for(q=r;q<r+A;q+=4)x.iconOpacity[q/4]=n;h.selectedForRendering?(n=k.parts[1],k=n.startOpacity,n=n.targetOpacity,a.allSymbolsFadingOut=a.allSymbolsFadingOut&&0===n,k=d?Math.floor(127*k)|n<<7:n?255:0,n=k<<24|k<<16|k<<8|k):n=0;for(const [r,A]of h.textVertexRanges)for(k=r;k<r+A;k+=4)x.textOpacity[k/4]=n}x.lastOpacityUpdate=f;x.opacityChanged=!0}}}};Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/decluttering/core":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(C,p){let z=p._createClass(function(F){this.hash=this.yTile=this.xTile=0;this.priority=1;this.colliders=[];this.textVertexRanges=[];this.iconVertexRanges=[];this.tile=F});p=p._createClass(function(){this.tileSymbols=[];this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}];this.show=!1});C.VTLSymbol=
z;C.VTLUniqueSymbol=p;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/VectorTileContainer":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/aaBoundingRect ./decluttering/SymbolFader ./style/StyleDefinition ../webgl/enums ../webgl/RenderableTile ../webgl/TileContainer ../../tiling/TileCoverage ../../tiling/TileKey ../../../webgl/enums".split(" "),
function(C,p,z,F,w,e,m,b,a,f,d,k,n){function q(g,v){if(g){const x=g.getLayoutProperty("visibility");if(!x||x.getValue()!==m.Visibility.NONE&&(void 0===g.minzoom||g.minzoom<v+1E-6)&&(void 0===g.maxzoom||g.maxzoom>=v-1E-6))return!0}return!1}f=function(g){function v(h){h=x.call(this,h);h._backgroundTiles=[];h._pointToCallbacks=new Map;return h}p._inherits(v,g);var x=p._createSuper(v);g=v.prototype;g.destroy=function(){this.removeAllChildren();this._spriteMosaic?.dispose();this._spriteMosaic=null;this._glyphMosaic?.dispose();
this._glyphMosaic=null;z.isSome(this._symbolFader)&&(this._symbolFader.clear(),this._symbolFader=null);this._styleRepository=null;this._backgroundTiles=[];this._pointToCallbacks.clear()};g.setStyleResources=function(h,r,A){this._spriteMosaic=h;this._glyphMosaic=r;this._styleRepository=A;z.isNone(this._symbolFader)&&(h=new e.SymbolFader(this._styleRepository,this.children),h.on("fade-start",()=>{this.emit("fade-start");this.requestRender()}),h.on("fade-complete",()=>{this.emit("fade-complete");this.requestRender()}),
this._symbolFader=h);z.unwrap(this._symbolFader).styleRepository=A};g.setSpriteMosaic=function(h){this._spriteMosaic?.dispose();this._spriteMosaic=h};g.deleteStyleLayers=function(h){z.isSome(this._symbolFader)&&this._symbolFader.deleteStyleLayers(h)};g.hitTest=async function(h){const r=F.createResolver();this._pointToCallbacks.set(h,r);this.requestRender();return r.promise};g.enterTileInvalidation=function(){for(const h of this.children)h.invalidating=!0};g.createRenderParams=function(h){return{...p._get(p._getPrototypeOf(v.prototype),
"createRenderParams",this).call(this,h),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}};g.doRender=function(h){!this.visible||h.drawPhase!==b.WGLDrawPhase.MAP&&h.drawPhase!==b.WGLDrawPhase.DEBUG||void 0===this._spriteMosaic||p._get(p._getPrototypeOf(v.prototype),"doRender",this).call(this,h)};g.addChild=function(h){p._get(p._getPrototypeOf(v.prototype),"addChild",this).call(this,h);z.isSome(this._symbolFader)?
this._symbolFader.addTile(h):h.decluttered=!0;this.requestRender();return h};g.removeChild=function(h){z.isSome(this._symbolFader)&&this._symbolFader.removeTile(h);this.requestRender();return p._get(p._getPrototypeOf(v.prototype),"removeChild",this).call(this,h)};g.renderChildren=function(h){const {drawPhase:r}=h;if(r===b.WGLDrawPhase.DEBUG)p._get(p._getPrototypeOf(v.prototype),"renderChildren",this).call(this,h);else if(this._doRender(h),0<this._pointToCallbacks.size){h.drawPhase=b.WGLDrawPhase.HITTEST;
const A=h.painter.effects.hittestVTL;A.bind(h);this._doRender(h);A.draw(h,this._pointToCallbacks);A.unbind(h);h.drawPhase=r}};g.removeAllChildren=function(){for(let h=0;h<this.children.length;h++){const r=this.children[h];z.isSome(this._symbolFader)&&this._symbolFader.removeTile(r);r.dispose()}p._get(p._getPrototypeOf(v.prototype),"removeAllChildren",this).call(this)};g.getStencilTarget=function(){return this.children.filter(h=>h.neededForCoverage&&h.hasData())};g.restartDeclutter=function(){z.isSome(this._symbolFader)&&
this._symbolFader.restartDeclutter()};g._doRender=function(h){const {context:r}=h;var A=this._styleRepository;if(A){var G=A.layers,D=!0;h.drawPhase===b.WGLDrawPhase.HITTEST&&(D=!1);0<A.backgroundBucketIds.length&&(h.renderPass="background",this._renderBackgroundLayers(h,A.backgroundBucketIds));p._get(p._getPrototypeOf(v.prototype),"renderChildren",this).call(this,h);h.drawPhase===b.WGLDrawPhase.MAP&&this._fade(h.displayLevel,h.state);if((A=this.children.filter(t=>t.visible&&t.hasData()))&&0!==A.length){for(var B of A)B.triangleCount=
0;r.setStencilWriteMask(0);r.setColorMask(!0,!0,!0,!0);r.setStencilOp(n.StencilOperation.KEEP,n.StencilOperation.KEEP,n.StencilOperation.REPLACE);r.setStencilTestEnabled(!0);r.setBlendingEnabled(!1);r.setDepthTestEnabled(!0);r.setDepthWriteEnabled(!0);r.setDepthFunction(n.CompareFunction.LEQUAL);r.setClearDepth(1);r.clear(r.gl.DEPTH_BUFFER_BIT);h.renderPass="opaque";for(B=G.length-1;0<=B;B--)this._renderStyleLayer(G[B],h,A);r.setDepthWriteEnabled(!1);r.setBlendingEnabled(D);r.setBlendFunctionSeparate(n.BlendFactor.ONE,
n.BlendFactor.ONE_MINUS_SRC_ALPHA,n.BlendFactor.ONE,n.BlendFactor.ONE_MINUS_SRC_ALPHA);h.renderPass="translucent";for(D=0;D<G.length;D++)this._renderStyleLayer(G[D],h,A)}r.bindVAO();r.setStencilTestEnabled(!0);r.setBlendingEnabled(!0)}};g._fade=function(h,r){z.isSome(this._symbolFader)&&(this._symbolFader.update(h,r)||this.requestRender())};g._renderStyleLayer=function(h,r,A){const {painter:G,renderPass:D}=r;if(void 0!==h){var B=h.getLayoutProperty("visibility");if(!B||B.getValue()!==m.Visibility.NONE){switch(h.type){case m.StyleLayerType.BACKGROUND:return;
case m.StyleLayerType.FILL:if("opaque"!==D&&"translucent"!==r.renderPass)return;var t="vtlFill";break;case m.StyleLayerType.LINE:if("translucent"!==D)return;t="vtlLine";break;case m.StyleLayerType.CIRCLE:if("translucent"!==D)return;t="vtlCircle";break;case m.StyleLayerType.SYMBOL:if("translucent"!==D)return;t="vtlSymbol"}A=h.type===m.StyleLayerType.SYMBOL?A.filter(K=>K.decluttered):A.filter(K=>K.neededForCoverage);if("vtlSymbol"!==t&&(B=r.displayLevel,0===A.length||void 0!==h.minzoom&&h.minzoom>=
B+1E-6||void 0!==h.maxzoom&&h.maxzoom<B-1E-6))return;B=h.uid;r.styleLayerUID=B;r.styleLayer=h;for(const K of A)if(K.layerData.has(B)){G.renderObjects(r,A,t);break}}}};g._renderBackgroundLayers=function(h,r){const {context:A,displayLevel:G,painter:D,state:B}=h,t=this._styleRepository;var K=!1;for(var O of r)if(t.getLayerById(O).type===m.StyleLayerType.BACKGROUND&&q(t.getLayerById(O),G)){K=!0;break}if(K){K=this._tileInfoView.getTileCoverage(h.state,0,"smallest");var {spans:R,lodInfo:P}=K,{level:U}=
P,Y=w.create();O=[];if(this._renderPasses){var J=this._renderPasses[0];z.isSome(this._clippingInfos)&&(J.brushes[0].prepareState(h),J.brushes[0].drawMany(h,this._clippingInfos))}J=this._backgroundTiles;var L=0;for(const {row:Q,colFrom:M,colTo:S}of R)for(let W=M;W<=S;W++){if(L<J.length){var H=J[L];H.key.set(U,Q,P.normalizeCol(W),P.getWorldForColumn(W));this._tileInfoView.getTileBounds(Y,H.key,!1);H.x=Y[0];H.y=Y[3];H.resolution=this._tileInfoView.getTileResolution(U)}else{H=new k(U,Q,P.normalizeCol(W),
P.getWorldForColumn(W));const Z=this._tileInfoView.getTileBounds(w.create(),H),ha=this._tileInfoView.getTileResolution(U);H=new a.RenderableTile(H,ha,Z[0],Z[3],512,512,4096,4096);J.push(H)}H.setTransform(B);O.push(H);L++}A.setStencilWriteMask(0);A.setColorMask(!0,!0,!0,!0);A.setStencilOp(n.StencilOperation.KEEP,n.StencilOperation.KEEP,n.StencilOperation.REPLACE);A.setStencilFunction(n.CompareFunction.EQUAL,0,255);U=!0;h.drawPhase===b.WGLDrawPhase.HITTEST&&(U=!1);A.setStencilTestEnabled(U);for(const Q of r)r=
t.getLayerById(Q),r.type===m.StyleLayerType.BACKGROUND&&q(r,G)&&(h.styleLayerUID=r.uid,h.styleLayer=r,D.renderObjects(h,O,"vtlBackground"));d.pool.release(K)}};return p._createClass(v)}(f);C.VectorTileContainer=f;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolFader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/maybe ./config ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),
function(C,p,z,F,w,e,m,b,a,f,d){z=function(k){function n(g,v){var x=q.call(this);x.styleRepository=g;x._tileToHandle=new Map;x._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]};x._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]};x._completed=!1;x._symbolRepository=new a.SymbolRepository(4096,v,()=>new e.VTLUniqueSymbol);x._symbolDeclutterer=new b.SymbolDeclutterer(v,x._symbolRepository,(h,r,A)=>new m.CollisionJob(h,r,A,x.styleRepository,x._zoom,x._viewState.rotation),(h,r)=>{h.allSymbolsFadingOut=
!0;h.lastOpacityUpdate=r;f.writeOpacityToBuffers(h,r,!0);h.decluttered=!0;h.requestRender()},(h,r)=>x.styleRepository.getStyleLayerByUID(h.styleLayerUID).z-x.styleRepository.getStyleLayerByUID(r.styleLayerUID).z,h=>{h=x.styleRepository.getStyleLayerByUID(h);return x._zoom+1E-6<h.minzoom||x._zoom-1E-6>=h.maxzoom?!1:(h=h.getLayoutProperty("visibility"))&&h.getValue()===d.Visibility.NONE?!1:!0});return x}p._inherits(n,k);var q=p._createSuper(n);k=n.prototype;k.addTile=function(g){g.decluttered=!1;this._tileToHandle.set(g,
g.on("symbols-changed",()=>{this._symbolRepository.add(g);this.restartDeclutter()}));this._symbolRepository.add(g);this.restartDeclutter()};k.removeTile=function(g){const v=this._tileToHandle.get(g);v&&(this._symbolRepository.removeTile(g),this.restartDeclutter(),v.remove(),this._tileToHandle.delete(g))};k.update=function(g,v){this._zoom=g;this._viewState={scale:v.scale,rotation:v.rotation,center:[v.center[0],v.center[1]],size:[v.size[0],v.size[1]]};this._continueDeclutter();return this._completed};
k.restartDeclutter=function(){this._completed=!1;this._symbolDeclutterer.restart();this._notifyUnstable()};k.clear=function(){this._completed=!1;this._symbolRepository=null;this._symbolDeclutterer.restart();this._tileToHandle.forEach(g=>g.remove());this._tileToHandle.clear()};k.deleteStyleLayers=function(g){this._symbolRepository.deleteStyleLayers(g)};k._continueDeclutter=function(){if(!this._completed||this.stale)this._symbolDeclutterer.running||(this._declutterZoom=this._zoom,this._declutterViewState.center[0]=
this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),(this._completed=this._symbolDeclutterer.continue(w.DECLUTTER_BUDGET))&&
this._scheduleNotifyStable()};k._scheduleNotifyStable=function(){F.isSome(this._stableNotificationHandle)&&clearTimeout(this._stableNotificationHandle);this._stableNotificationHandle=setTimeout(()=>{this._stableNotificationHandle=null;this.emit("fade-complete")},1.5*w.FADE_DURATION)};k._notifyUnstable=function(){F.isSome(this._stableNotificationHandle)&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null);this.emit("fade-start")};p._createClass(n,[{key:"stale",get:function(){return this._zoom!==
this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}}]);return n}(z);C.SymbolFader=z;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/mat3f32 ./config ./util ../style/StyleDefinition".split(" "),
function(C,p,z,F,w,e){let m=function(){function b(f,d,k,n,q,g){this._symbols=f;this._styleRepository=n;this._zoom=q;this._currentSymbolCursor=this._currentLayerCursor=0;this._styleProps=new Map;this._allNeededMatrices=new Map;this._gridIndex=new w.GridIndex(d,k,F.COLLISION_GRID_CELL_SIZE);this._si=Math.sin(Math.PI*g/180);this._co=Math.cos(Math.PI*g/180);for(const v of f)for(const x of v.symbols)this._allNeededMatrices.has(x.tile)||this._allNeededMatrices.set(x.tile,z.clone(x.tile.transforms.tileUnitsToPixels))}
var a=b.prototype;a.work=function(f){const d=this._gridIndex,k=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const B=this._symbols[this._currentLayerCursor],t=this._getProperties(B.styleLayerUID);for(;this._currentSymbolCursor<B.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-k>f)return!1;var n=B.symbols[this._currentSymbolCursor];if(!n.unique.show)continue;var q=n,g=
this._si,v=this._co,x=this._allNeededMatrices.get(n.tile),h=this._zoom;const {iconRotationAlignment:K,textRotationAlignment:O,iconTranslate:R,iconTranslateAnchor:P,textTranslate:U,textTranslateAnchor:Y}=t;var r=0;for(const M of q.colliders){const [S,W]=0===M.partIndex?R:U;var A=0===M.partIndex?P:Y,G=M.minLod<=h&&h<=M.maxLod;r+=G?0:1;M.enabled=G;M.xScreen=M.xTile*x[0]+M.yTile*x[3]+x[6];M.yScreen=M.xTile*x[1]+M.yTile*x[4]+x[7];A===e.TranslateAnchor.MAP?(M.xScreen+=v*S-g*W,M.yScreen+=g*S+v*W):(M.xScreen+=
S,M.yScreen+=W);e.RotationAlignment.VIEWPORT===(0===M.partIndex?K:O)?(M.dxScreen=M.dxPixels,M.dyScreen=M.dyPixels):(M.dxScreen=v*(M.dxPixels+M.width/2)-g*(M.dyPixels+M.height/2)-M.width/2,M.dyScreen=g*(M.dxPixels+M.width/2)+v*(M.dyPixels+M.height/2)-M.height/2)}0<q.colliders.length&&r===q.colliders.length&&(q.unique.show=!1);q=n.unique;if(!q.show)continue;const {iconAllowOverlap:J,iconIgnorePlacement:L,textAllowOverlap:H,textIgnorePlacement:Q}=t;for(const M of n.colliders)if(M.enabled&&(g=q.parts[M.partIndex],
g.show)){if(v=!(M.partIndex?H:J))a:{v=M.xScreen+M.dxScreen;x=M.yScreen+M.dyScreen;h=v+M.width;r=x+M.height;const [S,W,Z,ha]=d.getCellSpan(v,x,h,r);for(A=W;A<=ha;A++)for(G=S;G<=Z;G++){var D=d.cells[A][G];for(const da of D){D=da.xScreen+da.dxScreen;const V=da.yScreen+da.dyScreen,aa=D+da.width,ea=V+da.height;if(!(h<D||v>aa||r<V||x>ea)){v=!0;break a}}}v=!1}v&&(M.hard?q.show=!1:g.show=!1)}if(q.show)for(const M of n.colliders){if(!M.enabled)continue;if(M.partIndex?Q:L)continue;if(!q.parts[M.partIndex].show)continue;
n=M.xScreen+M.dxScreen;g=M.yScreen+M.dyScreen;const [S,W,Z,ha]=this._gridIndex.getCellSpan(n,g,n+M.width,g+M.height);for(n=W;n<=ha;n++)for(g=S;g<=Z;g++)this._gridIndex.cells[n][g].push(M)}}}return!0};a._getProperties=function(f){var d=this._styleProps.get(f);if(d)return d;d=this._zoom;const k=this._styleRepository.getStyleLayerByUID(f);var n=k.getLayoutValue("symbol-placement",d)!==e.SymbolPlacement.POINT;let q=k.getLayoutValue("icon-rotation-alignment",d);q===e.RotationAlignment.AUTO&&(q=n?e.RotationAlignment.MAP:
e.RotationAlignment.VIEWPORT);let g=k.getLayoutValue("text-rotation-alignment",d);g===e.RotationAlignment.AUTO&&(g=n?e.RotationAlignment.MAP:e.RotationAlignment.VIEWPORT);n=k.getPaintValue("icon-translate",d);const v=k.getPaintValue("icon-translate-anchor",d),x=k.getPaintValue("text-translate",d),h=k.getPaintValue("text-translate-anchor",d);d={iconAllowOverlap:k.getLayoutValue("icon-allow-overlap",d),iconIgnorePlacement:k.getLayoutValue("icon-ignore-placement",d),textAllowOverlap:k.getLayoutValue("text-allow-overlap",
d),textIgnorePlacement:k.getLayoutValue("text-ignore-placement",d),iconRotationAlignment:q,textRotationAlignment:g,iconTranslateAnchor:v,iconTranslate:n,textTranslateAnchor:h,textTranslate:x};this._styleProps.set(f,d);return d};return p._createClass(b)}();C.CollisionJob=m;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe",
"./config"],function(C,p,z,F){function w(m,b){if(m.priority-b.priority)return m.priority-b.priority;const a=m.tile.key,f=b.tile.key;return a.world-f.world?a.world-f.world:a.level-f.level?a.level-f.level:a.row-f.row?a.row-f.row:a.col-f.col?a.col-f.col:m.xTile-b.xTile?m.xTile-b.xTile:m.yTile-b.yTile}let e=function(){function m(a,f,d,k,n,q){this._visibleTiles=a;this._symbolRepository=f;this._createCollisionJob=d;this._assignTileSymbolsOpacity=k;this._symbolLayerSorter=n;this._isLayerVisible=q;this._selectionJob=
null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}var b=m.prototype;b.setScreenSize=function(a,f){this._screenWidth===a&&this._screenHeight===f||this.restart();this._screenWidth=a;this._screenHeight=f};b.restart=function(){this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=
!0};b.continue=function(a){this._selectionJob||(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var f=performance.now();if(!this._selectionJob.work(a))return!1;this._selectionJobCompleted=!0;a=Math.max(0,a-(performance.now()-f));if(0===a)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight));if(!this._collisionJobCompleted){f=performance.now();if(!this._collisionJob.work(a))return!1;
this._collisionJobCompleted=!0;a=Math.max(0,a-(performance.now()-f));if(0===a)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){f=performance.now();if(!this._opacityJob.work(a))return!1;this._opacityJobCompleted=!0;a=Math.max(0,a-(performance.now()-f));if(0===a)return!1}this._running=!1;return!0};b._createSelectionJob=function(){const a=this._symbolRepository.uniqueSymbols;for(let g=0;g<a.length;g++){const v=a[g];for(let x=0;x<v.uniqueSymbols.length;x++){const h=
v.uniqueSymbols[x];for(const r of h.tileSymbols)r.selectedForRendering=!1}}const f=[];let d=0,k=0;const n=this._isLayerVisible,q=this._symbolLayerSorter;return{work:function(g){const v=performance.now();for(;k<a.length;k++,d=0){const h=a[k];var x=h.styleLayerUID;if(!n(x)){f[k]||(f[k]={styleLayerUID:x,symbols:[]});continue}f[k]=f[k]||{styleLayerUID:x,symbols:[]};const r=f[k];for(;d<h.uniqueSymbols.length;d++){x=h.uniqueSymbols[d];if(99===d%100&&performance.now()-v>g)return!1;let A=null,G=!1,D=!1;for(const B of x.tileSymbols)if(!D||
!G){const t=B.tile;if(!A||t.isCoverage||t.neededForCoverage&&!G){A=B;if(t.neededForCoverage||t.isCoverage)D=!0;t.isCoverage&&(G=!0)}}A.selectedForRendering=!0;if(D){r.symbols.push(A);x.show=!0;for(const B of x.parts)B.show=!0}else x.show=!1}}for(const h of f)h.symbols.sort(w);return!0},get sortedSymbols(){return f.sort(q)}}};b._createOpacityJob=function(){function a(n,q){var g=n.symbols;for(const [,x]of g){var v=x;g=q;for(const h of v){v=h.unique;for(const r of v.parts)r.startOpacity+=(g-r.startTime)/
F.FADE_DURATION*(.5<r.targetOpacity?1:-1),r.startOpacity=Math.min(Math.max(r.startOpacity,0),1),r.startTime=g,r.targetOpacity=v.show&&r.show?1:0}}f(n,q);for(const x of n.childrenTiles)a(x,q)}const f=this._assignTileSymbolsOpacity,d=this._visibleTiles;let k=0;return{work(n){const q=performance.now();for(;k<d.length;k++){if(performance.now()-q>n)return!1;const g=d[k];if(z.isSome(g.parentTile))continue;const v=performance.now();a(g,v)}return!0}}};p._createClass(m,[{key:"running",get:function(){return this._running}}]);
return m}();C.SymbolDeclutterer=e;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./util"],function(C,p,z,F){let w=function(){function e(b,a,f){this.tileCoordRange=b;this._visibleTiles=a;this._createUnique=f;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}var m=e.prototype;m.add=function(b,a){this._uniqueSymbolLayerArray=
null;let f=this._tiles.get(b.id);f||(f={symbols:new Map},this._tiles.set(b.id,f));var d=new Map;if(a)for(var k of a)f.symbols.has(k)&&(d.set(k,f.symbols.get(k)),f.symbols.delete(k));else for(var [n]of b.layerData)f.symbols.has(n)&&(d.set(n,f.symbols.get(n)),f.symbols.delete(n));this._removeSymbols(d);a=b.symbols;d=new Map;for(const [q,g]of a)if(k=g.length,32<=k){n=this.tileCoordRange;do n/=2,k/=4;while(8<k&&64<n);k=new F.GridIndex(this.tileCoordRange,this.tileCoordRange,n);d.set(q,{flat:g,index:k});
f.symbols.set(q,{flat:g,index:k});for(const v of g)k.getCell(v.xTile,v.yTile).push(v)}else d.set(q,{flat:g}),f.symbols.set(q,{flat:g});this._addSymbols(b.key,a)};m.deleteStyleLayers=function(b){this._uniqueSymbolLayerArray=null;for(const [a,f]of this._tiles){const d=new Map;for(const k of b)f.symbols.has(k)&&(d.set(k,f.symbols.get(k)),f.symbols.delete(k));this._removeSymbols(d);0===f.symbols.size&&this._tiles.delete(a)}};m.removeTile=function(b){this._uniqueSymbolLayerArray=null;const a=this._tiles.get(b.id);
if(a){var f=new Map;for(const [d]of b.symbols)a.symbols.has(d)&&(f.set(d,a.symbols.get(d)),a.symbols.delete(d));this._removeSymbols(f);0===a.symbols.size&&this._tiles.delete(b.id)}};m._removeSymbols=function(b){for(const [f,{flat:d}]of b)for(const k of d){b=k.unique;var a=b.tileSymbols;const n=a.length-1;for(let q=0;q<n;q++)if(a[q]===k){a[q]=a[n];break}a.length=n;0===n&&(a=this._uniqueSymbolsReferences.get(f),a.delete(b),0===a.size&&this._uniqueSymbolsReferences.delete(f));k.unique=null}};m._addSymbols=
function(b,a){if(0!==a.size){var f=this._visibleTiles;for(const d of f)d.parentTile||d.key.world!==b.world||d.key.level===b.level&&!d.key.equals(b)||this._matchSymbols(d,b,a);for(const [d,k]of a)for(const n of k)z.isNone(n.unique)&&(b=this._createUnique(),n.unique=b,b.tileSymbols.push(n),a=this._uniqueSymbolsReferences.get(d),a||(a=new Set,this._uniqueSymbolsReferences.set(d,a)),a.add(b))}};m._matchSymbols=function(b,a,f){if(b.key.level>a.level){var d=b.key.level-a.level;if(b.key.row>>d!==a.row||
b.key.col>>d!==a.col)return}if(a.level>b.key.level&&(d=a.level-b.key.level,a.row>>d!==b.key.row||a.col>>d!==b.key.col))return;if(a.equals(b.key))for(var k of b.childrenTiles)this._matchSymbols(k,a,f);else{k=new Map;for(const [g,v]of f){var n=[];for(const h of v)f=F.tileCoordChange(this.tileCoordRange,h.xTile,a.level,a.col,b.key.level,b.key.col),d=F.tileCoordChange(this.tileCoordRange,h.yTile,a.level,a.row,b.key.level,b.key.row),0<=f&&f<this.tileCoordRange&&0<=d&&d<this.tileCoordRange&&n.push({symbol:h,
xTransformed:f,yTransformed:d});f=[];d=b.key.level<a.level?1:1<<b.key.level-a.level;const x=this._tiles.get(b.id).symbols.get(g);if(x){const h=x.flat;for(const r of n){var q=!1;let A;const G=r.xTransformed,D=r.yTransformed;A=z.isSome(x.index)?x.index.getCell(G,D):h;n=r.symbol;const B=n.hash;for(const t of A)if(B===t.hash&&Math.abs(G-t.xTile)<=d&&Math.abs(D-t.yTile)<=d){q=t.unique;n.unique=q;q.tileSymbols.push(n);q=!0;break}q||f.push(n)}}0<f.length&&k.set(g,f)}for(const g of b.childrenTiles)this._matchSymbols(g,
a,k)}};m._createUniqueSymbolLayerArray=function(){var b=this._uniqueSymbolsReferences;const a=Array(b.size);let f=0;for(const [d,k]of b){const n=Array(k.size);b=0;for(const q of k)n[b++]=q;a[f]={styleLayerUID:d,uniqueSymbols:n};f++}return a};p._createClass(e,[{key:"uniqueSymbols",get:function(){z.isNone(this._uniqueSymbolLayerArray)&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());return this._uniqueSymbolLayerArray}}]);return e}();C.SymbolRepository=w;Object.defineProperty(C,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/RenderableTile":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/mat3f32","./TiledDisplayObject"],function(C,p,z,F){F=function(w){function e(){return m.apply(this,arguments)}p._inherits(e,w);var m=p._createSuper(e);e.prototype._createTransforms=function(){return{dvs:z.create(),tileMat3:z.create()}};return p._createClass(e)}(F.TiledDisplayObject);C.RenderableTile=F;Object.defineProperty(C,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","./StyleDefinition","./StyleLayer"],function(C,p,z){return function(){function F(e){this._style=e;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;e.layers||(e.layers=[]);this.version=parseFloat(e.version);if(this.layers=e.layers.map((m,b,a)=>this._create(m,b,a)).filter(m=>!!m))for(let m=0;m<
this.layers.length;m++)e=this.layers[m],this._layerByName[e.id]=e,this._uidToLayer.set(e.uid,e),e.type===p.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(e.id);this._identifyRefLayers()}var w=F.prototype;w.isPainterDataDriven=function(e){return(e=this._layerByName[e])?e.isPainterDataDriven():!1};w.getStyleLayerId=function(e){return e>=this.layers.length?null:this.layers[e].id};w.getStyleLayerByUID=function(e){return this._uidToLayer.get(e)??null};w.getStyleLayerIndex=function(e){return(e=
this._layerByName[e])?this.layers.indexOf(e):-1};w.setStyleLayer=function(e,m){if(e&&e.id){var b=this._style;null!=m&&m>=this.layers.length&&(m=this.layers.length-1);var a=!0,f;if(f=this._layerByName[e.id]){const d=this.layers.indexOf(f);m||(m=d);m===d?(a=!1,f=F._recreateLayer(e,f),this.layers[m]=f,b.layers[m]=e):(this.layers.splice(d,1),b.layers.splice(d,1),f=this._create(e,m,this.layers),this.layers.splice(m,0,f),b.layers.splice(m,0,e))}else f=this._create(e,m,this.layers),!m||m>=this.layers.length?
(this.layers.push(f),b.layers.push(e)):(this.layers.splice(m,0,f),b.layers.splice(m,0,e));this._layerByName[e.id]=f;this._uidToLayer.set(f.uid,f);a&&this._recomputeZValues();this._identifyRefLayers()}};w.getStyleLayer=function(e){return(e=this._layerByName[e])?{type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:e.layout,paint:e.paint}:null};w.deleteStyleLayer=function(e){const m=this._layerByName[e];m&&(delete this._layerByName[e],
this._uidToLayer.delete(m.uid),e=this.layers.indexOf(m),this.layers.splice(e,1),this._style.layers.splice(e,1),this._recomputeZValues(),this._identifyRefLayers())};w.getLayerById=function(e){return this._layerByName[e]};w.getLayoutProperties=function(e){return(e=this._layerByName[e])?e.layout:null};w.getPaintProperties=function(e){return(e=this._layerByName[e])?e.paint:null};w.setPaintProperties=function(e,m){if(e=this._layerByName[e]){var b=F._recreateLayer({type:e.typeName,id:e.id,source:e.source,
"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:e.layout,paint:m},e),a=this.layers.indexOf(e);this.layers[a]=b;this._style.layers[a].paint=m;this._layerByName[e.id]=b;this._uidToLayer.set(e.uid,b)}};w.setLayoutProperties=function(e,m){if(e=this._layerByName[e]){var b=F._recreateLayer({type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:m,paint:e.paint},e),a=this.layers.indexOf(e);this.layers[a]=
b;this._style.layers[a].layout=m;this._layerByName[e.id]=b;this._uidToLayer.set(e.uid,b)}};w.setStyleLayerVisibility=function(e,m){if(e=this._layerByName[e]){var b=e.layout||{};b.visibility=m;m=F._recreateLayer({type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:b,paint:e.paint},e);var a=this.layers.indexOf(e);this.layers[a]=m;this._style.layers[a].layout=b;this._layerByName[e.id]=m;this._uidToLayer.set(e.uid,m)}};w.getStyleLayerVisibility=
function(e){return(e=this._layerByName[e])?e.layout?.visibility??"visible":"none"};w._recomputeZValues=function(){const e=this.layers,m=1/(e.length+1);for(let b=0;b<e.length;b++)e[b].z=1-(1+b)*m};w._identifyRefLayers=function(){const e=[],m=[];let b=0;for(const d of this.layers){const k=d.layout;if(d.type===p.StyleLayerType.FILL){var a=d,f=d.source+"|"+d.sourceLayer;f+="|"+(k?.visibility??"");f+="|"+d.minzoom;f+="|"+d.maxzoom;f+="|"+JSON.stringify(d.filter);if(a.hasDataDrivenFill||a.hasDataDrivenOutline)f+=
"|"+b;e.push({key:f,layer:d})}else if(d.type===p.StyleLayerType.LINE){a=d;f=d.paint;f=null!=f&&(null!=f["line-pattern"]||null!=f["line-dasharray"]);let n=d.source+"|"+d.sourceLayer;n+="|"+(k?.visibility??"");n+="|"+d.minzoom;n+="|"+d.maxzoom;n+="|"+JSON.stringify(d.filter);n+="|"+(void 0!==k?k["line-cap"]:"");n+="|"+(void 0!==k?k["line-join"]:"");if(a.hasDataDrivenLine||f)n+="|"+b;m.push({key:n,layer:d})}++b}this._assignRefLayers(e);this._assignRefLayers(m)};w._assignRefLayers=function(e){e.sort((k,
n)=>k.key<n.key?-1:k.key>n.key?1:0);let m,b;const a=e.length;for(let k=0;k<a;k++){const n=e[k];if(n.key===m)n.layer.refLayerId=b;else if(m=n.key,b=n.layer.id,n.layer.type===p.StyleLayerType.FILL){if(!n.layer.getPaintProperty("fill-outline-color"))for(var f=k+1;f<a;f++){var d=e[f];if(d.key===m){if(d.layer.getPaintProperty("fill-outline-color")){e[k]=d;e[f]=n;b=d.layer.id;break}}else break}}else if(n.layer.type===p.StyleLayerType.LINE)for(f=n.layer,d=k+1;d<a;d++){const q=e[d];if(q.key!==m)break;const g=
q.layer;if(f.canUseThinTessellation&&!g.canUseThinTessellation||!f.canUseThinTessellation&&(g.getPaintProperty("line-pattern")||g.getPaintProperty("line-dasharray")))f=g,e[k]=q,e[d]=n,b=q.layer.id}}};w._create=function(e,m,b){m=1-1/(b.length+1)*(1+m);b=this._runningId++;switch(e.type){case "background":return new z.BackgroundStyleLayer(p.StyleLayerType.BACKGROUND,e,m,b);case "fill":return new z.FillStyleLayer(p.StyleLayerType.FILL,e,m,b);case "line":return new z.LineStyleLayer(p.StyleLayerType.LINE,
e,m,b);case "symbol":return new z.SymbolStyleLayer(p.StyleLayerType.SYMBOL,e,m,b);case "raster":console.warn(`Unsupported vector tile raster layer ${e.id}`);break;case "circle":return new z.CircleStyleLayer(p.StyleLayerType.CIRCLE,e,m,b)}return null};F._recreateLayer=function(e,m){switch(e.type){case "background":return new z.BackgroundStyleLayer(p.StyleLayerType.BACKGROUND,e,m.z,m.uid);case "fill":return new z.FillStyleLayer(p.StyleLayerType.FILL,e,m.z,m.uid);case "line":return new z.LineStyleLayer(p.StyleLayerType.LINE,
e,m.z,m.uid);case "symbol":return new z.SymbolStyleLayer(p.StyleLayerType.SYMBOL,e,m.z,m.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${e.id}`);break;case "circle":return new z.CircleStyleLayer(p.StyleLayerType.CIRCLE,e,m.z,m.uid)}return null};return C._createClass(F)}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(C,p,z,F,w,e,m,b,a,f,d,k){C.CapType=void 0;(function(G){G[G.BUTT=0]="BUTT";G[G.ROUND=1]="ROUND";G[G.SQUARE=2]="SQUARE";G[G.UNKNOWN=4]="UNKNOWN"})(C.CapType||(C.CapType={}));let n=function(){function G(B,t,K,O){this.type=B;this.typeName=t.type;this.id=t.id;this.source=t.source;this.sourceLayer=t["source-layer"];this.minzoom=t.minzoom;this.maxzoom=t.maxzoom;this.filter=t.filter;this.layout=t.layout;this.paint=t.paint;this.z=K;this.uid=O;switch(B){case f.StyleLayerType.BACKGROUND:this._layoutDefinition=
f.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=f.StyleDefinition.backgroundPaintDefinition;break;case f.StyleLayerType.FILL:this._layoutDefinition=f.StyleDefinition.fillLayoutDefinition;this._paintDefinition=f.StyleDefinition.fillPaintDefinition;break;case f.StyleLayerType.LINE:this._layoutDefinition=f.StyleDefinition.lineLayoutDefinition;this._paintDefinition=f.StyleDefinition.linePaintDefinition;break;case f.StyleLayerType.SYMBOL:this._layoutDefinition=f.StyleDefinition.symbolLayoutDefinition;
this._paintDefinition=f.StyleDefinition.symbolPaintDefinition;break;case f.StyleLayerType.CIRCLE:this._layoutDefinition=f.StyleDefinition.circleLayoutDefinition,this._paintDefinition=f.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var D=G.prototype;D.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=a.createFilter(this.filter)};D.getLayoutProperty=
function(B){return this._layoutProperties[B]};D.getPaintProperty=function(B){return this._paintProperties[B]};D.getLayoutValue=function(B,t,K){let O;const R=this._layoutProperties[B];R&&(O=R.getValue(t,K));void 0===O&&(O=this._layoutDefinition[B]["default"]);return O};D.getPaintValue=function(B,t,K){let O;const R=this._paintProperties[B];R&&(O=R.getValue(t,K));void 0===O&&(O=this._paintDefinition[B]["default"]);return O};D.isPainterDataDriven=function(){const B=this._paintProperties;if(B)for(const t in B)if(B[t].isDataDriven)return!0;
return!1};D._parseLayout=function(B){const t={};for(const K in B){const O=this._layoutDefinition[K];O&&(t[K]=new d(O,B[K]))}return t};D._parsePaint=function(B){const t={};for(const K in B){const O=this._paintDefinition[K];O&&(t[K]=new d(O,B[K]))}return t};D.computeAttributesKey=function(B,t,K,O){let R=0,P=0;for(const U of t){t=3;if(!U||U!==O){const {isLayout:Y,isOptional:J}=K[U];t=Y?this.getLayoutProperty(U):this.getPaintProperty(U);t=t?.interpolator?2:t?.isDataDriven?1:J&&!t?3:0}P|=t<<R;R+=2}return P<<
3|B};return p._createClass(G)}(),q=function(G){function D(t,K,O,R){t=B.call(this,t,K,O,R);t.backgroundMaterial=new F.VTLBackgroundMaterial(t.computeAttributesKey(z.ShaderProgramType.BACKGROUND,F.VTLBackgroundMaterial.ATTRIBUTES,F.VTLBackgroundMaterial.ATTRIBUTES_INFO));return t}p._inherits(D,G);var B=p._createSuper(D);return p._createClass(D)}(n),g=function(G){function D(t,K,O,R){t=B.call(this,t,K,O,R);K=t.getPaintProperty("fill-color");O=t.getPaintProperty("fill-opacity");R=t.getPaintProperty("fill-pattern");
t.hasDataDrivenColor=K?.isDataDriven;t.hasDataDrivenOpacity=O?.isDataDriven;t.hasDataDrivenFill=t.hasDataDrivenColor||t.hasDataDrivenOpacity||R?.isDataDriven;O=t.getPaintProperty("fill-outline-color");t.outlineUsesFillColor=!O;t.hasDataDrivenOutlineColor=O?.isDataDriven;t.hasDataDrivenOutline=O?O.isDataDriven:K?K.isDataDriven:!1;t.hasDataDrivenOutline=(O?t.hasDataDrivenOutlineColor:t.hasDataDrivenColor)||t.hasDataDrivenOpacity;t.fillMaterial=new e.VTLFillMaterial(t.computeAttributesKey(z.ShaderProgramType.FILL,
e.VTLFillMaterial.ATTRIBUTES,e.VTLFillMaterial.ATTRIBUTES_INFO));t.outlineMaterial=new e.VTLOutlineMaterial(t.computeAttributesKey(z.ShaderProgramType.OUTLINE,t.outlineUsesFillColor?e.VTLOutlineMaterial.ATTRIBUTES_FILL:e.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,t.outlineUsesFillColor?e.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:e.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),t.outlineUsesFillColor);return t}p._inherits(D,G);var B=p._createSuper(D);return p._createClass(D)}(n),v=function(G){function D(t,K,
O,R){t=B.call(this,t,K,O,R);K=t.getPaintProperty("line-pattern");t.lineMaterial=new m.VTLLineMaterial(t.computeAttributesKey(z.ShaderProgramType.LINE,m.VTLLineMaterial.ATTRIBUTES,m.VTLLineMaterial.ATTRIBUTES_INFO,K?"line-dasharray":""));t.hasDataDrivenLine=t.getPaintProperty("line-blur")?.isDataDriven||t.getPaintProperty("line-color")?.isDataDriven||t.getPaintProperty("line-gap-width")?.isDataDriven||t.getPaintProperty("line-offset")?.isDataDriven||t.getPaintProperty("line-opacity")?.isDataDriven||
t.getPaintProperty("line-pattern")?.isDataDriven||t.getPaintProperty("line-dasharray")?.isDataDriven||t.getLayoutProperty("line-cap")?.isDataDriven||t.getPaintProperty("line-width")?.isDataDriven;t.canUseThinTessellation=!1;!t.hasDataDrivenLine&&(K=t.getPaintProperty("line-width"),!K||"number"===typeof K&&.5*K<k.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(K=t.getPaintProperty("line-offset"),!K||"number"===typeof K&&0===K)&&(t.canUseThinTessellation=!0);return t}p._inherits(D,G);var B=p._createSuper(D);D.prototype.getDashKey=
function(t,K){switch(K){case C.CapType.BUTT:K="Butt";break;case C.CapType.ROUND:K="Round";break;case C.CapType.SQUARE:K="Square";break;default:K="Butt"}return`dasharray-[${t.toString()}]-${K}`};return p._createClass(D)}(n),x=function(G){function D(t,K,O,R){t=B.call(this,t,K,O,R);t.iconMaterial=new b.VTLIconMaterial(t.computeAttributesKey(z.ShaderProgramType.ICON,b.VTLIconMaterial.ATTRIBUTES,b.VTLIconMaterial.ATTRIBUTES_INFO));t.textMaterial=new b.VTLTextMaterial(t.computeAttributesKey(z.ShaderProgramType.TEXT,
b.VTLTextMaterial.ATTRIBUTES,b.VTLTextMaterial.ATTRIBUTES_INFO));t.hasDataDrivenIcon=t.getPaintProperty("icon-color")?.isDataDriven||t.getPaintProperty("icon-halo-blur")?.isDataDriven||t.getPaintProperty("icon-halo-color")?.isDataDriven||t.getPaintProperty("icon-halo-width")?.isDataDriven||t.getPaintProperty("icon-opacity")?.isDataDriven||t.getLayoutProperty("icon-size")?.isDataDriven;t.hasDataDrivenText=t.getPaintProperty("text-color")?.isDataDriven||t.getPaintProperty("text-halo-blur")?.isDataDriven||
t.getPaintProperty("text-halo-color")?.isDataDriven||t.getPaintProperty("text-halo-width")?.isDataDriven||t.getPaintProperty("text-opacity")?.isDataDriven||t.getLayoutProperty("text-size")?.isDataDriven;return t}p._inherits(D,G);var B=p._createSuper(D);return p._createClass(D)}(n),h=function(G){function D(t,K,O,R){t=B.call(this,t,K,O,R);t.circleMaterial=new w.VTLCircleMaterial(t.computeAttributesKey(z.ShaderProgramType.CIRCLE,w.VTLCircleMaterial.ATTRIBUTES,w.VTLCircleMaterial.ATTRIBUTES_INFO));return t}
p._inherits(D,G);var B=p._createSuper(D);return p._createClass(D)}(n),r=function(){function G(D,B,t){this.allowOverlap=D.getLayoutValue("icon-allow-overlap",B);this.ignorePlacement=D.getLayoutValue("icon-ignore-placement",B);this.keepUpright=D.getLayoutValue("icon-keep-upright",B);this.optional=D.getLayoutValue("icon-optional",B);this.rotationAlignment=D.getLayoutValue("icon-rotation-alignment",B);this.rotationAlignment===f.RotationAlignment.AUTO&&(this.rotationAlignment=t?f.RotationAlignment.MAP:
f.RotationAlignment.VIEWPORT);t=D.getLayoutProperty("icon-anchor");t?.isDataDriven?this._anchorProp=t:this.anchor=D.getLayoutValue("icon-anchor",B);t=D.getLayoutProperty("icon-offset");t?.isDataDriven?this._offsetProp=t:this.offset=D.getLayoutValue("icon-offset",B);t=D.getLayoutProperty("icon-padding");t?.isDataDriven?this._paddingProp=t:this.padding=D.getLayoutValue("icon-padding",B);t=D.getLayoutProperty("icon-rotate");t?.isDataDriven?this._rotateProp=t:this.rotate=D.getLayoutValue("icon-rotate",
B);t=D.getLayoutProperty("icon-size");t?.isDataDriven?this._sizeProp=t:this.size=D.getLayoutValue("icon-size",B)}G.prototype.update=function(D,B){this._anchorProp&&(this.anchor=this._anchorProp.getValue(D,B));this._offsetProp&&(this.offset=this._offsetProp.getValue(D,B));this._paddingProp&&(this.padding=this._paddingProp.getValue(D,B));this._rotateProp&&(this.rotate=this._rotateProp.getValue(D,B));this._sizeProp&&(this.size=this._sizeProp.getValue(D,B))};return p._createClass(G)}(),A=function(){function G(D,
B,t){this.allowOverlap=D.getLayoutValue("text-allow-overlap",B);this.ignorePlacement=D.getLayoutValue("text-ignore-placement",B);this.keepUpright=D.getLayoutValue("text-keep-upright",B);this.optional=D.getLayoutValue("text-optional",B);this.rotationAlignment=D.getLayoutValue("text-rotation-alignment",B);this.rotationAlignment===f.RotationAlignment.AUTO&&(this.rotationAlignment=t?f.RotationAlignment.MAP:f.RotationAlignment.VIEWPORT);t=D.getLayoutProperty("text-anchor");t?.isDataDriven?this._anchorProp=
t:this.anchor=D.getLayoutValue("text-anchor",B);t=D.getLayoutProperty("text-justify");t?.isDataDriven?this._justifyProp=t:this.justify=D.getLayoutValue("text-justify",B);t=D.getLayoutProperty("text-letter-spacing");t?.isDataDriven?this._letterSpacingProp=t:this.letterSpacing=D.getLayoutValue("text-letter-spacing",B);t=D.getLayoutProperty("text-line-height");t?.isDataDriven?this._lineHeightProp=t:this.lineHeight=D.getLayoutValue("text-line-height",B);t=D.getLayoutProperty("text-max-angle");t?.isDataDriven?
this._maxAngleProp=t:this.maxAngle=D.getLayoutValue("text-max-angle",B);t=D.getLayoutProperty("text-max-width");t?.isDataDriven?this._maxWidthProp=t:this.maxWidth=D.getLayoutValue("text-max-width",B);t=D.getLayoutProperty("text-offset");t?.isDataDriven?this._offsetProp=t:this.offset=D.getLayoutValue("text-offset",B);t=D.getLayoutProperty("text-padding");t?.isDataDriven?this._paddingProp=t:this.padding=D.getLayoutValue("text-padding",B);t=D.getLayoutProperty("text-rotate");t?.isDataDriven?this._rotateProp=
t:this.rotate=D.getLayoutValue("text-rotate",B);t=D.getLayoutProperty("text-size");t?.isDataDriven?this._sizeProp=t:this.size=D.getLayoutValue("text-size",B);t=D.getLayoutProperty("text-writing-mode");t?.isDataDriven?this._writingModeProp=t:this.writingMode=D.getLayoutValue("text-writing-mode",B)}G.prototype.update=function(D,B){this._anchorProp&&(this.anchor=this._anchorProp.getValue(D,B));this._justifyProp&&(this.justify=this._justifyProp.getValue(D,B));this._letterSpacingProp&&(this.letterSpacing=
this._letterSpacingProp.getValue(D,B));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(D,B));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(D,B));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(D,B));this._offsetProp&&(this.offset=this._offsetProp.getValue(D,B));this._paddingProp&&(this.padding=this._paddingProp.getValue(D,B));this._rotateProp&&(this.rotate=this._rotateProp.getValue(D,B));this._sizeProp&&(this.size=this._sizeProp.getValue(D,B));
this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(D,B))};return p._createClass(G)}();C.BackgroundStyleLayer=q;C.CircleStyleLayer=h;C.FillStyleLayer=g;C.IconLayout=r;C.LineStyleLayer=v;C.StyleLayer=n;C.SymbolStyleLayer=x;C.TextLayout=A;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial","../../../../webgl/enums",
"../../../../webgl/VertexElementDescriptor"],function(C,p,z,F,w){z=function(e){function m(a){return b.call(this,a)}p._inherits(m,e);var b=p._createSuper(m);e=m.prototype;e.geometryInfo=function(){return m.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return m.ATTRIBUTES};e.attributesInfo=function(){return m.ATTRIBUTES_INFO};return p._createClass(m)}(z.VTLMaterial);z.ATTRIBUTES=[];z.GEOMETRY_LAYOUT=[new w.VertexElementDescriptor("a_pos",2,F.DataType.BYTE,0,2)];z.ATTRIBUTES_INFO=
{};C.VTLBackgroundMaterial=z;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../MemoryBuffer ./enums ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(C,p,z,F,w,e,m){let b=function(){function d(n){this._locations=new Map;this._key=n}var k=d.prototype;k.defines=function(){return[]};k.getStride=
function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};k.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};k.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};k.getEncodingInfos=function(){this._propertyEncodingInfo||this._buildAttributesInfo();return this._propertyEncodingInfo};k.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};
k.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};k.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};k.setDataUniforms=function(n,q,g,v,x){var h=this.getUniforms();for(const r of h){const {name:A,type:G,getValue:D}=r;h=D(g,q,v,x);if(null!==h)switch(G){case "float":n.setUniform1f(A,h);break;case "vec2":n.setUniform2fv(A,h);break;case "vec4":n.setUniform4fv(A,h)}}};k.encodeAttributes=function(n,q,g,
v){const x=this.attributesInfo(),h=this.getEncodingInfos(),r=[];let A=0,G=0;for(const B of Object.keys(h)){var D=h[B];const {type:t,precisionFactor:K,isLayout:O}=x[B],R=O?g.getLayoutProperty(B):g.getPaintProperty(B),P=R.interpolator?.getInterpolationRange(q);let U=0;for(const Y of D){const {offset:J,bufferElementsToAdd:L}=Y;if(0<L){for(D=0;D<L;D++)r.push(0);A+=G;G=Y.bufferElementsToAdd}D=v??R.getValue(P?P[U]:q,n);switch(t){case w.EncodingType.R8_SIGNED:case w.EncodingType.R8_UNSIGNED:r[A]|=this._encodeByte(D*
(K||1),8*J);break;case w.EncodingType.R16_SIGNED:case w.EncodingType.R16_UNSIGNED:r[A]|=this._encodeShort(D*(K||1),8*J);break;case w.EncodingType.R8G8_SIGNED:case w.EncodingType.R8G8_UNSIGNED:r[A]|=this._encodeByte(D*(K||1),8*J);r[A]|=this._encodeByte(D*(K||1),8*J+8);break;case w.EncodingType.R16G16_SIGNED:case w.EncodingType.R16G16_UNSIGNED:r[A]|=this._encodeShort(D*(K||1),8*J);r[A]|=this._encodeShort(D*(K||1),8*J+16);break;case w.EncodingType.R8G8B8A8_SIGNED:case w.EncodingType.R8G8B8A8_UNSIGNED:r[A]|=
this._encodeByte(D*(K||1),8*J);r[A]|=this._encodeByte(D*(K||1),8*J+8);r[A]|=this._encodeByte(D*(K||1),8*J+16);r[A]|=this._encodeByte(D*(K||1),8*J+24);break;case w.EncodingType.R8G8B8A8_COLOR:r[A]=this._encodeColor(D);break;case w.EncodingType.R16G16B16A16_DASHARRAY:case w.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(A,r,D);break;default:throw Error("Unsupported encoding type");}U++}}return r};k.getAtributeState=function(n){const q=3+2*n;n=0|this._bit(q);return n|=this._bit(q+1)<<1};k._buildAttributesInfo=
function(){const n=[],q={};var g={},v=-1;const x=this.attributesInfo();var h=this.attributes();let r=-1;for(const B of h){r++;h=this.getAtributeState(r);if(h===w.AttributeStatus.UNIFORM||h===w.AttributeStatus.UNUSED)continue;var A=x[B];const t=[];q[B]=t;A=A.type;for(let K=0;K<h;K++){const {dataType:O,bytesPerElement:R,count:P,normalized:U}=d._encodingInfo[A],Y=R*P;var G=`${O}-${!0===U}`;let J=g[G],L=0;!J||4<J.count+P?(v++,J={dataIndex:v,count:0,offset:0},4!==P&&(g[G]=J),n.push({location:-1,name:"a_data_"+
v,count:P,type:O,normalized:U}),L=Math.ceil(Math.max(Y/4,1))):(G=n[J.dataIndex],G.count+=P,L=Math.ceil(Math.max(G.count*R/4,1))-Math.ceil(Math.max(J.offset/4,1)));t.push({dataIndex:J.dataIndex,offset:J.offset,bufferElementsToAdd:L});J.offset+=Y;J.count+=P}}for(const B of n)switch(B.type){case e.DataType.BYTE:case e.DataType.UNSIGNED_BYTE:B.count=4;break;case e.DataType.SHORT:case e.DataType.UNSIGNED_SHORT:B.count+=B.count%2}this._buildVertexBufferLayout(n);g=0;v=this._layoutInfo.geometry;for(var D of v)this._locations.set(D.name,
g++);if(D=this._layoutInfo.opacity)for(const B of D)this._locations.set(B.name,g++);this._buildShaderInfo(n,q);this._propertyEncodingInfo=q};k._buildVertexBufferLayout=function(n){const q={},g=this.geometryInfo();let v=g[0].stride;if(0===n.length)q.geometry=g;else{const x=[];let h=v;for(const r of n)v+=a(r.type)*r.count;for(const r of g)x.push(new m.VertexElementDescriptor(r.name,r.count,r.type,r.offset,v,r.normalized));for(const r of n)x.push(new m.VertexElementDescriptor(r.name,r.count,r.type,h,
v,r.normalized)),h+=a(r.type)*r.count;q.geometry=x}this.opacityInfo()&&(q.opacity=this.opacityInfo());this._layoutInfo=q;this._stride=v};k._buildShaderInfo=function(n,q){let g="\n",v="\n";const x=[];for(var h of n)g+=`attribute ${this._getType(h.count)} ${h.name};\n`;var r=this.attributes();n=this.attributesInfo();h=-1;for(const D of r){h++;const {name:B,type:t,precisionFactor:K,isLayout:O}=n[D];r=K&&1!==K?` * ${1/K}`:"";const {bytesPerElement:R,count:P}=d._encodingInfo[t];var A=U=>`a_data_${U.dataIndex}${f(P,
U.offset,R)}`;switch(this.getAtributeState(h)){case w.AttributeStatus.UNIFORM:r=this._getType(P);var G=`u_${B}`;x.push({name:G,type:r,getValue:(Y,J,L,H)=>{L=O?Y.getLayoutValue(D,J):Y.getPaintValue(D,J);if(t===w.EncodingType.R16G16B16A16_DASHARRAY){Y=Y.getDashKey(L,Y.getLayoutValue("line-cap",J));H=H.getMosaicItemPosition(Y,!1);if(z.isNone(H))return null;const {tl:Q,br:M}=H;return[Q[0],M[1],M[0],Q[1]]}if(t===w.EncodingType.R16G16B16A16_PATTERN){H=H.getMosaicItemPosition(L,!D.includes("line-"));if(z.isNone(H))return null;
const {tl:Q,br:M}=H;return[Q[0],M[1],M[0],Q[1]]}return t===w.EncodingType.R8G8B8A8_COLOR?(H=L[3],[H*L[0],H*L[1],H*L[2],H]):L}});g+=`uniform ${r} ${G};\n`;v+=`${r} ${B} = ${G};\n`;break;case w.AttributeStatus.DATA_DRIVEN:G=A(q[D][0]);v+=`${this._getType(P)} ${B} = ${G}${r};\n`;break;case w.AttributeStatus.INTERPOLATED_DATA_DRIVEN:G=`u_t_${B}`;x.push({name:G,type:"float",getValue:(Y,J,L,H)=>(O?Y.getLayoutProperty(D):Y.getPaintProperty(D)).interpolator.interpolationUniformValue(L,J)});g+=`uniform float ${G};\n`;
const U=A(q[D][0]);A=A(q[D][1]);v+=`${this._getType(P)} ${B} = mix(${U}${r}, ${A}${r}, ${G});\n`}}this._shaderHeader=g;this._shaderMain=v;this._uniforms=x};k._bit=function(n){return(this._key&1<<n)>>n};k._getType=function(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};k._encodeColor=function(n){const q=255*n[3];return F.i8888to32(n[0]*q,n[1]*q,n[2]*q,q)};k._encodePattern=function(n,q,g){if(g&&g.rect){var v=g.rect,x=g.width;
g=g.height;q[n]=this._encodeShort(v.x+2,0);q[n]|=this._encodeShort(v.y+2+g,16);q[n+1]=this._encodeShort(v.x+2+x,0);q[n+1]|=this._encodeShort(v.y+2,16)}};k._encodeByte=function(n,q){return(n&255)<<q};k._encodeShort=function(n,q){return(n&65535)<<q};p._createClass(d,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);return d}();b._encodingInfo={[w.EncodingType.R8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[w.EncodingType.R8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:1,normalized:!1},[w.EncodingType.R16_SIGNED]:{dataType:e.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[w.EncodingType.R16_UNSIGNED]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[w.EncodingType.R8G8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:2,normalized:!1},[w.EncodingType.R8G8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[w.EncodingType.R16G16_SIGNED]:{dataType:e.DataType.SHORT,
bytesPerElement:2,count:2,normalized:!1},[w.EncodingType.R16G16_UNSIGNED]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[w.EncodingType.R8G8B8A8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[w.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[w.EncodingType.R8G8B8A8_COLOR]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[w.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:e.DataType.UNSIGNED_SHORT,
bytesPerElement:2,count:4,normalized:!1},[w.EncodingType.R16G16B16A16_PATTERN]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const a=d=>{switch(d){case e.DataType.FLOAT:return 4;case e.DataType.INT:return 4;case e.DataType.UNSIGNED_INT:return 4;case e.DataType.SHORT:return 2;case e.DataType.UNSIGNED_SHORT:return 2;case e.DataType.BYTE:return 1;case e.DataType.UNSIGNED_BYTE:return 1}},f=(d,k,n)=>{k/=n;if(1===d)switch(k){case 0:return".x";case 1:return".y";case 2:return".z";
case 3:return".w"}else if(2===d)switch(k){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===d)switch(k){case 0:return".xyz";case 1:return".yzw"}return""};C.VTLMaterial=b;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(C){return function(){function p(F){this._array=[];0>=F&&console.error("strideInBytes must be positive!");this._stride=F}var z=
p.prototype;z.reset=function(){this.array.length=0};z.toBuffer=function(){return(new Uint32Array(this._array)).buffer};p.i1616to32=function(F,w){return 65535&F|w<<16};p.i8888to32=function(F,w,e,m){return F&255|(w&255)<<8|(e&255)<<16|m<<24};p.i8816to32=function(F,w,e){return F&255|(w&255)<<8|e<<16};C._createClass(p,[{key:"array",get:function(){return this._array}},{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",
get:function(){return 4*this._array.length}}]);return p}()})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(C){C.EncodingType=void 0;(function(p){p[p.R8_SIGNED=0]="R8_SIGNED";p[p.R8_UNSIGNED=1]="R8_UNSIGNED";p[p.R16_SIGNED=2]="R16_SIGNED";p[p.R16_UNSIGNED=3]="R16_UNSIGNED";p[p.R8G8_SIGNED=4]="R8G8_SIGNED";p[p.R8G8_UNSIGNED=5]="R8G8_UNSIGNED";p[p.R16G16_SIGNED=6]="R16G16_SIGNED";p[p.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";p[p.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";
p[p.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";p[p.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";p[p.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";p[p.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(C.EncodingType||(C.EncodingType={}));C.AttributeStatus=void 0;(function(p){p[p.UNIFORM=0]="UNIFORM";p[p.DATA_DRIVEN=1]="DATA_DRIVEN";p[p.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";p[p.UNUSED=3]="UNUSED"})(C.AttributeStatus||(C.AttributeStatus={}));Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(C,p,z,F,w,e){F=function(m){function b(f){return a.call(this,f)}p._inherits(b,m);var a=p._createSuper(b);m=b.prototype;m.geometryInfo=function(){return b.GEOMETRY_LAYOUT};m.opacityInfo=function(){return null};m.attributes=function(){return b.ATTRIBUTES};m.attributesInfo=
function(){return b.ATTRIBUTES_INFO};return p._createClass(b)}(F.VTLMaterial);F.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");F.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,w.DataType.SHORT,0,4)];F.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:z.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,
precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:z.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:32}};C.VTLCircleMaterial=F;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(C,p,z,F,w,e){let m=function(b){function a(d){return f.call(this,d)}p._inherits(a,b);var f=p._createSuper(a);b=a.prototype;b.geometryInfo=function(){return a.GEOMETRY_LAYOUT};b.opacityInfo=function(){return null};b.attributes=function(){return a.ATTRIBUTES};b.attributesInfo=function(){return a.ATTRIBUTES_INFO};return p._createClass(a)}(F.VTLMaterial);m.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];m.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,w.DataType.SHORT,0,4)];
m.ATTRIBUTES_INFO={"fill-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:z.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};F=function(b){function a(d,k){d=f.call(this,d);d._usefillColor=k;return d}p._inherits(a,b);var f=p._createSuper(a);b=a.prototype;b.geometryInfo=function(){return a.GEOMETRY_LAYOUT};b.opacityInfo=function(){return null};b.attributes=function(){return this._usefillColor?
a.ATTRIBUTES_FILL:a.ATTRIBUTES_OUTLINE};b.attributesInfo=function(){return this._usefillColor?a.ATTRIBUTES_INFO_FILL:a.ATTRIBUTES_INFO_OUTLINE};return p._createClass(a)}(F.VTLMaterial);F.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];F.ATTRIBUTES_FILL=["fill-color","fill-opacity"];F.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,w.DataType.SHORT,0,8),new e.VertexElementDescriptor("a_offset",2,w.DataType.BYTE,4,8),new e.VertexElementDescriptor("a_xnormal",2,w.DataType.BYTE,6,8)];
F.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100}};F.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100}};C.VTLFillMaterial=m;C.VTLOutlineMaterial=F;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(C,p,z,F,w,e){F=function(m){function b(f){return a.call(this,f)}p._inherits(b,m);var a=p._createSuper(b);m=b.prototype;m.geometryInfo=function(){return b.GEOMETRY_LAYOUT};m.opacityInfo=function(){return null};m.attributes=function(){return b.ATTRIBUTES};m.attributesInfo=function(){return b.ATTRIBUTES_INFO};return p._createClass(b)}(F.VTLMaterial);F.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");F.GEOMETRY_LAYOUT=
[new e.VertexElementDescriptor("a_pos",2,w.DataType.SHORT,0,16),new e.VertexElementDescriptor("a_extrude_offset",4,w.DataType.BYTE,4,16),new e.VertexElementDescriptor("a_dir_normal",4,w.DataType.BYTE,8,16),new e.VertexElementDescriptor("a_accumulatedDistance",2,w.DataType.UNSIGNED_SHORT,12,16)];F.ATTRIBUTES_INFO={"line-width":{name:"width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",
type:z.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:z.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:z.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};C.VTLLineMaterial=F;Object.defineProperty(C,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(C,p,z,F,w,e){const m=[new e.VertexElementDescriptor("a_pos",2,w.DataType.SHORT,0,16),new e.VertexElementDescriptor("a_vertexOffset",2,w.DataType.SHORT,4,16),new e.VertexElementDescriptor("a_texAngleRange",4,w.DataType.UNSIGNED_BYTE,8,16),
new e.VertexElementDescriptor("a_levelInfo",4,w.DataType.UNSIGNED_BYTE,12,16)],b=[new e.VertexElementDescriptor("a_opacityInfo",1,w.DataType.UNSIGNED_BYTE,0,1)];w=function(a){function f(k){return d.call(this,k)}p._inherits(f,a);var d=p._createSuper(f);a=f.prototype;a.geometryInfo=function(){return m};a.opacityInfo=function(){return b};a.attributes=function(){return f.ATTRIBUTES};a.attributesInfo=function(){return f.ATTRIBUTES_INFO};return p._createClass(f)}(F.VTLMaterial);w.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");
w.ATTRIBUTES_INFO={"icon-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:z.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:z.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};
F=function(a){function f(k){return d.call(this,k)}p._inherits(f,a);var d=p._createSuper(f);a=f.prototype;a.geometryInfo=function(){return m};a.opacityInfo=function(){return b};a.attributes=function(){return f.ATTRIBUTES};a.attributesInfo=function(){return f.ATTRIBUTES_INFO};return p._createClass(f)}(F.VTLMaterial);F.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");F.ATTRIBUTES_INFO={"text-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},
"text-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:z.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:z.EncodingType.R8_UNSIGNED,isLayout:!0}};C.VTLIconMaterial=w;C.VTLTextMaterial=F;Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../expression/expression","../expression/types"],function(C,p,z){return function(){function F(w){this._expression=w}F.prototype.filter=function(w,e){if(!this._expression)return!0;try{return this._expression.evaluate(w,e)}catch(m){return console.log(m.message),!0}};F.createFilter=function(w){if(!w)return null;this.isLegacyFilter(w)&&(w=this.convertLegacyFilter(w));try{const e=p.createExpression(w,
null,z.BooleanType);return new F(e)}catch(e){return console.log(e.message),null}};F.isLegacyFilter=function(w){if(!Array.isArray(w)||0===w.length)return!0;switch(w[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===w.length&&"string"===typeof w[1]&&!Array.isArray(w[2]);case "in":return 3<=w.length&&"string"===typeof w[1]&&!Array.isArray(w[2]);case "!in":return!0;case "any":case "all":for(let e=1;e<w.length;e++)if(this.isLegacyFilter(w[e]))return!0;
return!1;case "none":return!0;case "has":return 2===w.length&&("$id"===w[1]||"$type"===w[1]);case "!has":return!0;default:return!1}};F.convertLegacyFilter=function(w){if(!Array.isArray(w)||0===w.length)return!0;const e=w[0];if(1===w.length)return"any"!==e;switch(e){case "\x3d\x3d":return F.convertComparison("\x3d\x3d",w[1],w[2]);case "!\x3d":return F.negate(F.convertComparison("\x3d\x3d",w[1],w[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return F.convertComparison(e,w[1],w[2]);case "in":return F.convertIn(w[1],
w.slice(2));case "!in":return F.negate(F.convertIn(w[1],w.slice(2)));case "any":case "all":case "none":return F.convertCombining(e,w.slice(1));case "has":return F.convertHas(w[1]);case "!has":return F.negate(F.convertHas(w[1]));default:throw Error("Unexpected legacy filter.");}};F.convertComparison=function(w,e,m){switch(e){case "$type":return[w,["geometry-type"],m];case "$id":return[w,["id"],m];default:return[w,["get",e],m]}};F.convertIn=function(w,e){switch(w){case "$type":return["in",["geometry-type"],
["literal",e]];case "$id":return["in",["id"],["literal",e]];default:return["in",["get",w],["literal",e]]}};F.convertHas=function(w){switch(w){case "$type":return!0;case "$id":return["has-id"];default:return["has",w]}};F.convertCombining=function(w,e){return[w].concat(e.map(this.convertLegacyFilter))};F.negate=function(w){return["!",w]};return C._createClass(F)}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),
function(C,p,z,F,w,e,m,b){function a(u,c,l){var y=typeof u;if("string"===y||"boolean"===y||"number"===y||null===u){if(l)switch(l.kind){case "string":"string"!==y&&(u=ia.toString(u));break;case "number":"number"!==y&&(u=ia.toNumber(u));break;case "color":u=ia.toColor(u)}u=["literal",u]}if(!Array.isArray(u)||0===u.length)throw Error("Expression must be a non empty array");y=u[0];if("string"!==typeof y)throw Error("First element of expression must be a string");const E=na[y];if(void 0===E)throw Error(`Invalid expression operator "${y}"`);
if(!E)throw Error(`Unimplemented expression operator "${y}"`);return E.parse(u,c,l)}let f=function(){function u(l){this._parent=l;this._vars={}}var c=u.prototype;c.add=function(l,y){this._vars[l]=y};c.get=function(l){return this._vars[l]?this._vars[l]:this._parent?this._parent.get(l):null};return p._createClass(u)}(),d=function(){function u(){this.type=b.ValueType}u.parse=function(c){if(1<c.length)throw Error('"id" does not expect arguments');return new u};u.prototype.evaluate=function(c,l){return c?.id};
return p._createClass(u)}(),k=function(){function u(){this.type=b.StringType}u.parse=function(c){if(1<c.length)throw Error('"geometry-type" does not expect arguments');return new u};u.prototype.evaluate=function(c,l){if(!c)return null;switch(c.type){case w.GeometryType.Point:return"Point";case w.GeometryType.LineString:return"LineString";case w.GeometryType.Polygon:return"Polygon";default:return null}};return p._createClass(u)}(),n=function(){function u(){this.type=b.ObjectType}u.parse=function(c){if(1<
c.length)throw Error('"properties" does not expect arguments');return new u};u.prototype.evaluate=function(c,l){return c?.values};return p._createClass(u)}(),q=function(){function u(){this.type=b.NumberType}u.parse=function(c){if(1<c.length)throw Error('"zoom" does not expect arguments');return new u};u.prototype.evaluate=function(c,l){return l};return p._createClass(u)}(),g=function(){function u(c,l,y){this._lhs=c;this._rhs=l;this._compare=y;this.type=b.BooleanType}u.parse=function(c,l,y){if(3!==
c.length&&4!==c.length)throw Error(`"${c[0]}" expects 2 or 3 arguments`);if(4===c.length)throw Error(`"${c[0]}" collator not supported`);return new u(a(c[1],l),a(c[2],l),y)};u.prototype.evaluate=function(c,l){return this._compare(this._lhs.evaluate(c,l),this._rhs.evaluate(c,l))};return p._createClass(u)}(),v=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return g.parse(y,E,(I,N)=>I===N)};return p._createClass(c)}(g),x=function(u){function c(){return l.apply(this,
arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return g.parse(y,E,(I,N)=>I!==N)};return p._createClass(c)}(g),h=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return g.parse(y,E,(I,N)=>I<N)};return p._createClass(c)}(g),r=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return g.parse(y,E,(I,N)=>I<=N)};return p._createClass(c)}(g),
A=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return g.parse(y,E,(I,N)=>I>N)};return p._createClass(c)}(g),G=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return g.parse(y,E,(I,N)=>I>=N)};return p._createClass(c)}(g),D=function(){function u(c){this._arg=c;this.type=b.BooleanType}u.parse=function(c,l){if(2!==c.length)throw Error('"!" expects 1 argument');
return new u(a(c[1],l))};u.prototype.evaluate=function(c,l){return!this._arg.evaluate(c,l)};return p._createClass(u)}(),B=function(){function u(c){this._args=c;this.type=b.BooleanType}u.parse=function(c,l){const y=[];for(let E=1;E<c.length;E++)y.push(a(c[E],l));return new u(y)};u.prototype.evaluate=function(c,l){for(const y of this._args)if(!y.evaluate(c,l))return!1;return!0};return p._createClass(u)}(),t=function(){function u(c){this._args=c;this.type=b.BooleanType}u.parse=function(c,l){const y=
[];for(let E=1;E<c.length;E++)y.push(a(c[E],l));return new u(y)};u.prototype.evaluate=function(c,l){for(const y of this._args)if(y.evaluate(c,l))return!0;return!1};return p._createClass(u)}(),K=function(){function u(c){this._args=c;this.type=b.BooleanType}u.parse=function(c,l){const y=[];for(let E=1;E<c.length;E++)y.push(a(c[E],l));return new u(y)};u.prototype.evaluate=function(c,l){for(const y of this._args)if(y.evaluate(c,l))return!1;return!0};return p._createClass(u)}(),O=function(){function u(c,
l,y){this.type=c;this._args=l;this._fallback=y}u.parse=function(c,l,y){if(4>c.length)throw Error('"case" expects at least 3 arguments');if(1===c.length%2)throw Error('"case" expects an odd number of arguments');let E;const I=[];for(let N=1;N<c.length-1;N+=2){const X=a(c[N],l),T=a(c[N+1],l,y);E||(E=T.type);I.push({condition:X,output:T})}c=a(c[c.length-1],l,y);E||(E=c.type);return new u(E,I,c)};u.prototype.evaluate=function(c,l){for(const y of this._args)if(y.condition.evaluate(c,l))return y.output.evaluate(c,
l);return this._fallback.evaluate(c,l)};return p._createClass(u)}(),R=function(){function u(c,l){this.type=c;this._args=l}u.parse=function(c,l){if(2>c.length)throw Error('"coalesce" expects at least 1 argument');let y;const E=[];for(let I=1;I<c.length;I++){const N=a(c[I],l);y||(y=N.type);E.push(N)}return new u(y,E)};u.prototype.evaluate=function(c,l){for(const y of this._args){const E=y.evaluate(c,l);if(null!==E)return E}return null};return p._createClass(u)}(),P=function(){function u(c,l,y,E,I){this.type=
c;this._input=l;this._labels=y;this._outputs=E;this._fallback=I}u.parse=function(c,l){if(3>c.length)throw Error('"match" expects at least 3 arguments');if(0===c.length%2)throw Error('"case" expects an even number of arguments');let y;const E=a(c[1],l),I=[],N={};let X;for(let ca=2;ca<c.length-1;ca+=2){var T=c[ca];Array.isArray(T)||(T=[T]);for(const ja of T){T=typeof ja;if("string"!==T&&"number"!==T)throw Error('"match" requires string or number literal as labels');if(!X)X=T;else if(T!==X)throw Error('"match" requires labels to have the same type');
N[ja]=I.length}T=a(c[ca+1],l);y||(y=T.type);I.push(T)}return new u(y,E,N,I,a(c[c.length-1],l))};u.prototype.evaluate=function(c,l){const y=this._input.evaluate(c,l);return(this._outputs[this._labels[y]]||this._fallback).evaluate(c,l)};return p._createClass(u)}(),U=function(){function u(l,y,E,I,N){this._operator=l;this.type=y;this.interpolation=E;this.input=I;this._stops=N}u.parse=function(l,y,E){const I=l[0];if(5>l.length)throw Error(`"${I}" expects at least 4 arguments`);const N=l[1];if(!Array.isArray(N)||
0===N.length)throw Error(`"${N}" is not a valid interpolation`);switch(N[0]){case "linear":if(1!==N.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==N.length||"number"!==typeof N[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==N.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var X=1;5>X;X++){var T=N[X];if("number"!==typeof T||
0>T||1<T)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${l[0]}" unknown interpolation type "${N[0]}"`);}if(1!==l.length%2)throw Error(`"${I}" expects an even number of arguments`);X=a(l[2],y,b.NumberType);let ca;"interpolate-hcl"===I||"interpolate-lab"===I?ca=b.ColorType:E&&"value"!==E.kind&&(ca=E);E=[];for(T=3;T<l.length;T+=2){const ja=l[T];if("number"!==typeof ja)throw Error(`"${I}" requires stop inputs as literal numbers`);
if(E.length&&E[E.length-1][0]>=ja)throw Error(`"${I}" requires strictly ascending stop inputs`);const oa=a(l[T+1],y,ca);ca||(ca=oa.type);E.push([ja,oa])}if(ca&&ca!==b.ColorType&&ca!==b.NumberType&&("array"!==ca.kind||ca.itemType!==b.NumberType))throw Error(`"${I}" cannot interpolate type ${b.typeToString(ca)}`);return new u(I,ca,N,X,E)};var c=u.prototype;c.evaluate=function(l,y){var E=this._stops;if(1===E.length)return E[0][1].evaluate(l,y);var I=this.input.evaluate(l,y);if(I<=E[0][0])return E[0][1].evaluate(l,
y);if(I>=E[E.length-1][0])return E[E.length-1][1].evaluate(l,y);let N=0;for(;++N<E.length&&!(I<E[N][0]););const X=u.interpolationRatio(this.interpolation,I,E[N-1][0],E[N][0]);I=E[N-1][1].evaluate(l,y);const T=E[N][1].evaluate(l,y);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(I)&&Array.isArray(T))return I.map((ca,ja)=>m.interpolate(ca,T[ja],X));if("color"===this.type.kind&&I instanceof z&&T instanceof z)return I=new z(I),l=new z(T),new z([m.interpolate(I.r,l.r,X),m.interpolate(I.g,
l.g,X),m.interpolate(I.b,l.b,X),m.interpolate(I.a,l.a,X)]);if("number"===this.type.kind&&"number"===typeof I&&"number"===typeof T)return m.interpolate(I,T,X);throw Error(`"${this._operator}" cannot interpolate type ${b.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return l=F.toLCH(I),y=F.toLCH(T),E=y.h-l.h,l=F.toRGB({h:l.h+X*(180<E||-180>E?E-360*Math.round(E/360):E),c:m.interpolate(l.c,y.c,X),l:m.interpolate(l.l,y.l,X)}),new z({a:m.interpolate(I.a,T.a,X),...l});if("interpolate-lab"===
this._operator)return l=F.toLAB(I),y=F.toLAB(T),l=F.toRGB({l:m.interpolate(l.l,y.l,X),a:m.interpolate(l.a,y.a,X),b:m.interpolate(l.b,y.b,X)}),new z({a:m.interpolate(I.a,T.a,X),...l});throw Error(`Unexpected operator "${this._operator}"`);};c.interpolationUniformValue=function(l,y){const E=this._stops;if(1===E.length||l>=E[E.length-1][0])return 0;let I=0;for(;++I<E.length&&!(l<E[I][0]););return u.interpolationRatio(this.interpolation,y,E[I-1][0],E[I][0])};c.getInterpolationRange=function(l){const y=
this._stops;if(1===y.length)return l=y[0][0],[l,l];var E=y[y.length-1][0];if(l>=E)return[E,E];for(E=0;++E<y.length&&!(l<y[E][0]););return[y[E-1][0],y[E][0]]};u.interpolationRatio=function(l,y,E,I){let N=0;"linear"===l[0]?N=u._exponentialInterpolationRatio(y,1,E,I):"exponential"===l[0]?N=u._exponentialInterpolationRatio(y,l[1],E,I):"cubic-bezier"===l[0]&&(N=e.unitBezier(l[1],l[2],l[3],l[4])(u._exponentialInterpolationRatio(y,1,E,I),1E-5));0>N?N=0:1<N&&(N=1);return N};u._exponentialInterpolationRatio=
function(l,y,E,I){I-=E;if(0===I)return 0;l-=E;return 1===y?l/I:(y**l-1)/(y**I-1)};return p._createClass(u)}(),Y=function(){function u(c,l,y){this.type=c;this._input=l;this._stops=y}u.parse=function(c,l){if(5>c.length)throw Error('"step" expects at least 4 arguments');if(1!==c.length%2)throw Error('"step" expects an even number of arguments');const y=a(c[1],l,b.NumberType);let E;const I=[];I.push([-Infinity,a(c[2],l)]);for(let N=3;N<c.length;N+=2){const X=c[N];if("number"!==typeof X)throw Error('"step" requires stop inputs as literal numbers');
if(I.length&&I[I.length-1][0]>=X)throw Error('"step" requires strictly ascending stop inputs');const T=a(c[N+1],l);E||(E=T.type);I.push([X,T])}return new u(E,y,I)};u.prototype.evaluate=function(c,l){const y=this._stops;if(1===y.length)return y[0][1].evaluate(c,l);const E=this._input.evaluate(c,l);let I=0;for(;++I<y.length&&!(E<y[I][0]););return this._stops[I-1][1].evaluate(c,l)};return p._createClass(u)}(),J=function(){function u(c,l){this.type=c;this._output=l}u.parse=function(c,l,y){if(4>c.length)throw Error('"let" expects at least 3 arguments');
if(1===c.length%2)throw Error('"let" expects an odd number of arguments');const E=new f(l);for(let I=1;I<c.length-1;I+=2){const N=c[I];if("string"!==typeof N)throw Error(`"let" requires a string to define variable names - found ${N}`);E.add(N,a(c[I+1],l))}c=a(c[c.length-1],E,y);return new u(c.type,c)};u.prototype.evaluate=function(c,l){return this._output.evaluate(c,l)};return p._createClass(u)}(),L=function(){function u(c,l){this.type=c;this.output=l}u.parse=function(c,l,y){if(2!==c.length||"string"!==
typeof c[1])throw Error('"var" requires just one literal string argument');l=l.get(c[1]);if(!l)throw Error(`${c[1]} must be defined before being used in a "var" expression`);return new u(y||b.ValueType,l)};u.prototype.evaluate=function(c,l){return this.output.evaluate(c,l)};return p._createClass(u)}(),H=function(){function u(c,l,y){this.type=c;this._index=l;this._array=y}u.parse=function(c,l){if(3!==c.length)throw Error('"at" expects 2 arguments');const y=a(c[1],l,b.NumberType);c=a(c[2],l);return new u(c.type.itemType,
y,c)};u.prototype.evaluate=function(c,l){const y=this._index.evaluate(c,l);c=this._array.evaluate(c,l);if(0>y||y>=c.length)throw Error('"at" index out of bounds');if(y!==Math.floor(y))throw Error('"at" index must be an integer');return c[y]};return p._createClass(u)}(),Q=function(){function u(c,l){this._key=c;this._obj=l;this.type=b.ValueType}u.parse=function(c,l){let y;switch(c.length){case 2:return y=a(c[1],l),new u(y);case 3:return y=a(c[1],l),c=a(c[2],l),new u(y,c);default:throw Error('"get" expects 1 or 2 arguments');
}};u.prototype.evaluate=function(c,l){const y=this._key.evaluate(c,l);return this._obj?this._obj.evaluate(c,l)[y]:c?.values[y]};return p._createClass(u)}(),M=function(){function u(c,l){this._key=c;this._obj=l;this.type=b.BooleanType}u.parse=function(c,l){let y;switch(c.length){case 2:return y=a(c[1],l),new u(y);case 3:return y=a(c[1],l),c=a(c[2],l),new u(y,c);default:throw Error('"has" expects 1 or 2 arguments');}};u.prototype.evaluate=function(c,l){const y=this._key.evaluate(c,l);return this._obj?
(c=this._obj.evaluate(c,l),y in c):!!c?.values[y]};return p._createClass(u)}(),S=function(){function u(c,l){this._key=c;this._vals=l;this.type=b.BooleanType}u.parse=function(c,l){if(3!==c.length)throw Error('"in" expects 2 arguments');return new u(a(c[1],l),a(c[2],l))};u.prototype.evaluate=function(c,l){const y=this._key.evaluate(c,l);return this._vals.evaluate(c,l).includes(y)};return p._createClass(u)}(),W=function(){function u(c,l,y){this._item=c;this._array=l;this._from=y;this.type=b.NumberType}
u.parse=function(c,l){if(3>c.length||4<c.length)throw Error('"index-of" expects 3 or 4 arguments');const y=a(c[1],l),E=a(c[2],l);return 4===c.length?(c=a(c[3],l,b.NumberType),new u(y,E,c)):new u(y,E)};u.prototype.evaluate=function(c,l){const y=this._item.evaluate(c,l),E=this._array.evaluate(c,l);if(this._from){c=this._from.evaluate(c,l);if(c!==Math.floor(c))throw Error('"index-of" index must be an integer');return E.indexOf(y,c)}return E.indexOf(y)};return p._createClass(u)}(),Z=function(){function u(c){this._arg=
c;this.type=b.NumberType}u.parse=function(c,l){if(2!==c.length)throw Error('"length" expects 2 arguments');c=a(c[1],l);return new u(c)};u.prototype.evaluate=function(c,l){c=this._arg.evaluate(c,l);if("string"===typeof c||Array.isArray(c))return c.length;throw Error('"length" expects string or array');};return p._createClass(u)}(),ha=function(){function u(c,l,y,E){this.type=c;this._array=l;this._from=y;this._to=E}u.parse=function(c,l){if(3>c.length||4<c.length)throw Error('"slice" expects 2 or 3 arguments');
const y=a(c[1],l),E=a(c[2],l,b.NumberType);if(E.type!==b.NumberType)throw Error('"slice" index must return a number');if(4===c.length){c=a(c[3],l,b.NumberType);if(c.type!==b.NumberType)throw Error('"slice" index must return a number');return new u(y.type,y,E,c)}return new u(y.type,y,E)};u.prototype.evaluate=function(c,l){const y=this._array.evaluate(c,l);if(!Array.isArray(y)&&"string"!==typeof y)throw Error('"slice" input must be an array or a string');const E=this._from.evaluate(c,l);if(0>E||E>=
y.length)throw Error('"slice" index out of bounds');if(E!==Math.floor(E))throw Error('"slice" index must be an integer');if(this._to){c=this._to.evaluate(c,l);if(0>c||c>=y.length)throw Error('"slice" index out of bounds');if(c!==Math.floor(c))throw Error('"slice" index must be an integer');return y.slice(E,c)}return y.slice(E)};return p._createClass(u)}(),da=function(){function u(){this.type=b.BooleanType}u.parse=function(c){if(1!==c.length)throw Error('"has-id" expects no arguments');return new u};
u.prototype.evaluate=function(c,l){return c&&void 0!==c.id};return p._createClass(u)}(),V=function(){function u(c,l){this._args=c;this._calculate=l;this.type=b.NumberType}u.parse=function(c,l,y){c=c.slice(1).map(E=>a(E,l));return new u(c,y)};u.prototype.evaluate=function(c,l){let y;this._args&&(y=this._args.map(E=>E.evaluate(c,l)));return this._calculate(y)};return p._createClass(u)}(),aa=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,
E){switch(y.length){case 2:return V.parse(y,E,I=>-I[0]);case 3:return V.parse(y,E,I=>I[0]-I[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return p._createClass(c)}(V),ea=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return V.parse(y,E,I=>{let N=1;for(const X of I)N*=X;return N})};return p._createClass(c)}(V),fa=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=
function(y,E){if(3===y.length)return V.parse(y,E,I=>I[0]/I[1]);throw Error('"/" expects 2 arguments');};return p._createClass(c)}(V),ka=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){if(3===y.length)return V.parse(y,E,I=>I[0]%I[1]);throw Error('"%" expects 2 arguments');};return p._createClass(c)}(V),pa=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){if(3===
y.length)return V.parse(y,E,I=>I[0]**I[1]);throw Error('"^" expects 1 or 2 arguments');};return p._createClass(c)}(V),qa=function(u){function c(){return l.apply(this,arguments)}p._inherits(c,u);var l=p._createSuper(c);c.parse=function(y,E){return V.parse(y,E,I=>{let N=0;for(const X of I)N+=X;return N})};return p._createClass(c)}(V),ba=function(){function u(c,l){this._args=c;this._calculate=l;this.type=b.NumberType}u.parse=function(c,l){const y=c.slice(1).map(E=>a(E,l));return new u(y,u.ops[c[0]])};
u.prototype.evaluate=function(c,l){let y;this._args&&(y=this._args.map(E=>E.evaluate(c,l)));return this._calculate(y)};return p._createClass(u)}();ba.ops={abs:u=>Math.abs(u[0]),acos:u=>Math.acos(u[0]),asin:u=>Math.asin(u[0]),atan:u=>Math.atan(u[0]),ceil:u=>Math.ceil(u[0]),cos:u=>Math.cos(u[0]),e:()=>Math.E,floor:u=>Math.floor(u[0]),ln:u=>Math.log(u[0]),ln2:()=>Math.LN2,log10:u=>Math.log(u[0])/Math.LN10,log2:u=>Math.log(u[0])/Math.LN2,max:u=>Math.max(...u),min:u=>Math.min(...u),pi:()=>Math.PI,round:u=>
Math.round(u[0]),sin:u=>Math.sin(u[0]),sqrt:u=>Math.sqrt(u[0]),tan:u=>Math.tan(u[0])};let ra=function(){function u(c){this._args=c;this.type=b.StringType}u.parse=function(c,l){return new u(c.slice(1).map(y=>a(y,l)))};u.prototype.evaluate=function(c,l){return this._args.map(y=>y.evaluate(c,l)).join("")};return p._createClass(u)}(),ma=function(){function u(c,l){this._arg=c;this._calculate=l;this.type=b.StringType}u.parse=function(c,l){if(2!==c.length)throw Error(`${c[0]} expects 1 argument`);l=a(c[1],
l);return new u(l,u.ops[c[0]])};u.prototype.evaluate=function(c,l){return this._calculate(this._arg.evaluate(c,l))};return p._createClass(u)}();ma.ops={downcase:u=>u.toLowerCase(),upcase:u=>u.toUpperCase()};let sa=function(){function u(l){this._args=l;this.type=b.ColorType}u.parse=function(l,y){if(4!==l.length)throw Error('"rgb" expects 3 arguments');l=l.slice(1).map(E=>a(E,y));return new u(l)};var c=u.prototype;c.evaluate=function(l,y){const E=this._validate(this._args[0].evaluate(l,y)),I=this._validate(this._args[1].evaluate(l,
y));l=this._validate(this._args[2].evaluate(l,y));return new z({r:E,g:I,b:l})};c._validate=function(l){if("number"!==typeof l||0>l||255<l)throw Error(`${l}: invalid color component`);return Math.round(l)};return p._createClass(u)}(),ta=function(){function u(l){this._args=l;this.type=b.ColorType}u.parse=function(l,y){if(5!==l.length)throw Error('"rgba" expects 4 arguments');l=l.slice(1).map(E=>a(E,y));return new u(l)};var c=u.prototype;c.evaluate=function(l,y){const E=this._validate(this._args[0].evaluate(l,
y)),I=this._validate(this._args[1].evaluate(l,y)),N=this._validate(this._args[2].evaluate(l,y));l=this._validateAlpha(this._args[3].evaluate(l,y));return new z({r:E,g:I,b:N,a:l})};c._validate=function(l){if("number"!==typeof l||0>l||255<l)throw Error(`${l}: invalid color component`);return Math.round(l)};c._validateAlpha=function(l){if("number"!==typeof l||0>l||1<l)throw Error(`${l}: invalid alpha color component`);return l};return p._createClass(u)}(),ua=function(){function u(c){this._color=c;this.type=
b.arrayType(b.NumberType,4)}u.parse=function(c,l){if(2!==c.length)throw Error('"to-rgba" expects 1 argument');c=a(c[1],l);return new u(c)};u.prototype.evaluate=function(c,l){return(new z(this._color.evaluate(c,l))).toRgba()};return p._createClass(u)}(),la=function(){function u(c,l){this.type=c;this._args=l}u.parse=function(c,l){var y=c[0];if(2>c.length)throw Error(`${y} expects at least one argument`);let E=1,I;if("array"===y){if(2<c.length){switch(c[1]){case "string":I=b.StringType;break;case "number":I=
b.NumberType;break;case "boolean":I=b.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}E++}else I=b.ValueType;if(3<c.length){var N=c[2];if(null!==N&&("number"!==typeof N||0>N||N!==Math.floor(N)))throw Error('"array" length argument must be a positive integer literal');E++}I=b.arrayType(I,N)}else switch(y){case "string":I=b.StringType;break;case "number":I=b.NumberType;break;case "boolean":I=b.BooleanType;break;case "object":I=b.ObjectType}for(y=[];E<
c.length;E++)N=a(c[E],l),y.push(N);return new u(I,y)};u.prototype.evaluate=function(c,l){let y;for(const E of this._args){const I=E.evaluate(c,l);y=b.getType(I);if(b.matchType(y,this.type))return I}throw Error(`Expected ${b.typeToString(this.type)} but got ${b.typeToString(y)}`);};return p._createClass(u)}(),ia=function(){function u(c,l){this.type=c;this._args=l}u.parse=function(c,l){var y=c[0];const E=u.types[y];if(E===b.BooleanType||E===b.StringType){if(2!==c.length)throw Error(`${y} expects one argument`);
}else if(2>c.length)throw Error(`${y} expects at least one argument`);y=[];for(let I=1;I<c.length;I++){const N=a(c[I],l);y.push(N)}return new u(E,y)};u.prototype.evaluate=function(c,l){if(this.type===b.BooleanType)return!!this._args[0].evaluate(c,l);if(this.type===b.StringType)return b.valueToString(this._args[0].evaluate(c,l));if(this.type===b.NumberType){for(const E of this._args){var y=Number(E.evaluate(c,l));if(!isNaN(y))return y}return null}if(this.type===b.ColorType){for(y of this._args)try{const E=
u.toColor(y.evaluate(c,l));if(E instanceof z)return E}catch{}return null}};u.toBoolean=function(c){return!!c};u.toString=function(c){return b.valueToString(c)};u.toNumber=function(c){const l=Number(c);if(isNaN(l))throw Error(`"${c}" is not a number`);return l};u.toColor=function(c){if(c instanceof z)return c;if("string"===typeof c){const l=z.fromString(c);if(l)return l;throw Error(`"${c}" is not a color`);}if(Array.isArray(c))return z.fromArray(c);throw Error(`"${c}" is not a color`);};return p._createClass(u)}();
ia.types={"to-boolean":b.BooleanType,"to-color":b.ColorType,"to-number":b.NumberType,"to-string":b.StringType};let va=function(){function u(c){this._val=c;this.type=b.getType(c)}u.parse=function(c){if(2!==c.length)throw Error('"literal" expects 1 argument');return new u(c[1])};u.prototype.evaluate=function(c,l){return this._val};return p._createClass(u)}(),wa=function(){function u(c){this._arg=c;this.type=b.StringType}u.parse=function(c,l){if(2!==c.length)throw Error('"typeof" expects 1 argument');
return new u(a(c[1],l))};u.prototype.evaluate=function(c,l){return b.typeToString(b.getType(this._arg.evaluate(c,l)))};return p._createClass(u)}();const na={array:la,boolean:la,collator:null,format:null,image:null,literal:va,number:la,"number-format":null,object:la,string:la,"to-boolean":ia,"to-color":ia,"to-number":ia,"to-string":ia,typeof:wa,accumulated:null,"feature-state":null,"geometry-type":k,id:d,"line-progress":null,properties:n,at:H,get:Q,has:M,in:S,"index-of":W,length:Z,slice:ha,"!":D,"!\x3d":x,
"\x3c":h,"\x3c\x3d":r,"\x3d\x3d":v,"\x3e":A,"\x3e\x3d":G,all:B,any:t,case:O,coalesce:R,match:P,within:null,interpolate:U,"interpolate-hcl":U,"interpolate-lab":U,step:Y,let:J,var:L,concat:ra,downcase:ma,"is-supported-script":null,"resolved-locale":null,upcase:ma,rgb:sa,rgba:ta,"to-rgba":ua,"-":aa,"*":ea,"/":fa,"%":ka,"^":pa,"+":qa,abs:ba,acos:ba,asin:ba,atan:ba,ceil:ba,cos:ba,e:ba,floor:ba,ln:ba,ln2:ba,log10:ba,log2:ba,max:ba,min:ba,pi:ba,round:ba,sin:ba,sqrt:ba,tan:ba,zoom:q,"heatmap-density":null,
"has-id":da,none:K};C.ALL=B;C.ANY=t;C.Add=qa;C.Assert=la;C.At=H;C.Calculate=ba;C.Case=O;C.Coalesce=R;C.Coerce=ia;C.Concat=ra;C.Div=fa;C.EQ=v;C.GE=G;C.GT=A;C.GeomType=k;C.Get=Q;C.Has=M;C.HasID=da;C.ID=d;C.In=S;C.IndexOf=W;C.Interpolate=U;C.LE=r;C.LT=h;C.Length=Z;C.Let=J;C.Literal=va;C.Match=P;C.Mod=ka;C.Mul=ea;C.NE=x;C.NONE=K;C.NOT=D;C.Pow=pa;C.Properties=n;C.Rgb=sa;C.Rgba=ta;C.Slice=ha;C.Step=Y;C.String=ma;C.Sub=aa;C.ToRgba=ua;C.TypeOf=wa;C.Var=L;C.Zoom=q;C.createExpression=a;C.ops=na;Object.defineProperty(C,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(C,p){function z(g,v){return{kind:"array",itemType:g,n:v}}function F(g){if("array"===g.kind){const v=F(g.itemType);return"number"===typeof g.n?`array<${v}, ${g.n}>`:"value"===g.itemType.kind?"array":`array<${v}>`}return g.kind}function w(g){if(null===g)return m;if("string"===typeof g)return a;if("boolean"===typeof g)return f;if("number"===typeof g)return b;
if(g instanceof p)return d;if(Array.isArray(g)){let v;for(const x of g){const h=w(x);if(!v)v=h;else if(v!==h){v=n;break}}return z(v||n,g.length)}return"object"===typeof g?k:n}function e(g,v){if("array"===v.kind)return"array"===g.kind&&(0===g.n&&"value"===g.itemType.kind||e(g.itemType,v.itemType))&&("number"!==typeof v.n||v.n===g.n);if("value"===v.kind)for(const x of q)if(e(g,x))return!0;return v.kind===g.kind}const m={kind:"null"},b={kind:"number"},a={kind:"string"},f={kind:"boolean"},d={kind:"color"},
k={kind:"object"},n={kind:"value"},q=[m,b,a,f,d,k,z(n)];C.BooleanType=f;C.ColorType=d;C.NullType=m;C.NumberType=b;C.ObjectType=k;C.StringType=a;C.ValueType=n;C.arrayType=z;C.getType=w;C.matchType=e;C.typeToString=F;C.valueToString=function(g){if(null===g)return"";const v=typeof g;return"string"===v?g:"number"===v||"boolean"===v?String(g):g instanceof p?g.toString():JSON.stringify(g)};Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(C,p,z,F,w){return function(){function e(b,a){this.isDataDriven=!1;this.interpolator=null;switch(b.type){case "number":var f=!0;break;case "color":f=!0;break;case "array":f="number"===b.value;break;default:f=!1}null==a&&(a=b.default);if(Array.isArray(a)&&0<a.length&&F.ops[a[0]]){f={number:w.NumberType,color:w.ColorType,string:w.StringType,boolean:w.BooleanType,enum:w.StringType};try{var d="array"===
b.type?w.arrayType(f[b.value]||w.ValueType,b.length):f[b.type];const k=F.createExpression(a,null,d);this.getValue=this._buildExpression(k,b);this.isDataDriven=!0;k instanceof F.Interpolate&&k.input instanceof F.Zoom&&(this.interpolator=k)}catch(k){console.log(k.message),this.getValue=this._buildSimple(b.default)}}else{f&&"interval"===a.type&&(f=!1);if(d=a&&a.stops&&0<a.stops.length)for(const k of a.stops)k[1]=this._validate(k[1],b);if(this.isDataDriven=a?!!a.property:!1)if(void 0!==a.default&&(a.default=
this._validate(a.default,b)),d)switch(a.type){case "identity":this.getValue=this._buildIdentity(a,b);break;case "categorical":this.getValue=this._buildCategorical(a,b);break;default:this.getValue=f?this._buildInterpolate(a,b):this._buildInterval(a,b)}else this.getValue=this._buildIdentity(a,b);else d?this.getValue=f?this._buildZoomInterpolate(a):this._buildZoomInterval(a):(a=this._validate(a,b),this.getValue=this._buildSimple(a))}}var m=e.prototype;m._validate=function(b,a){if("number"===a.type){if(b<
a.minimum)return a.minimum;if(b>a.maximum)return a.maximum}else"color"===a.type?b=e._parseColor(b):"enum"===a.type?"string"===typeof b&&(b=a.values.indexOf(b)):"array"===a.type&&"enum"===a.value?b=b.map(f=>"string"===typeof f?a.values.indexOf(f):f):"string"===a.type&&(b=w.valueToString(b));return b};m._buildSimple=function(b){return()=>b};m._buildExpression=function(b,a){return(f,d)=>{try{const k=b.evaluate(d,f);return void 0===k?a.default:this._validate(k,a)}catch(k){return console.log(k.message),
a.default}}};m._buildIdentity=function(b,a){return(f,d)=>{let k;d&&(k=d.values[b.property]);void 0!==k&&(k=this._validate(k,a));return null!=k?k:void 0!==b.default?b.default:a.default}};m._buildCategorical=function(b,a){return(f,d)=>{let k;d&&(k=d.values[b.property]);k=this._categorical(k,b.stops);return void 0!==k?k:void 0!==b.default?b.default:a.default}};m._buildInterval=function(b,a){return(f,d)=>{let k;d&&(k=d.values[b.property]);return"number"===typeof k?this._interval(k,b.stops):void 0!==b.default?
b.default:a.default}};m._buildInterpolate=function(b,a){return(f,d)=>{let k;d&&(k=d.values[b.property]);return"number"===typeof k?this._interpolate(k,b.stops,b.base||1):void 0!==b.default?b.default:a.default}};m._buildZoomInterpolate=function(b){return a=>this._interpolate(a,b.stops,b.base||1)};m._buildZoomInterval=function(b){return a=>this._interval(a,b.stops)};m._categorical=function(b,a){const f=a.length;for(let d=0;d<f;d++)if(a[d][0]===b)return a[d][1]};m._interval=function(b,a){const f=a.length;
let d=0;for(let k=0;k<f;k++)if(a[k][0]<=b)d=k;else break;return a[d][1]};m._interpolate=function(b,a,f){const d=a.length;for(let q=0;q<d;q++){const g=a[q];if(g[0]<=b)var k=g;else{var n=g;break}}if(k&&n){a=n[0]-k[0];b-=k[0];f=1===f?b/a:(f**b-1)/(f**a-1);if(Array.isArray(k[1])){k=k[1];n=n[1];b=[];for(a=0;a<k.length;a++)b.push(z.interpolate(k[a],n[a],f));return b}return z.interpolate(k[1],n[1],f)}if(k)return k[1];if(n)return n[1]};e._isEmpty=function(b){for(const a in b)if(b.hasOwnProperty(a))return!1;
return!0};e._parseColor=function(b){if(Array.isArray(b))return b;"string"===typeof b&&(b=new p(b));if(b instanceof p&&!this._isEmpty(b))return p.toUnitRGBA(b)};return C._createClass(e)}()})},"esri/views/2d/layers/LayerView2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/collectionUtils ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../engine/Container ../support/HighlightOptions ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),
function(C,p,z,F,w,e,m,b,a,f,d,k,n,q,g,v,x){const h=F.ofType({key:"type",base:null,typeMap:{rect:g,path:x,geometry:v}});C.LayerView2DMixin=r=>{r=function(A){function G(){var B=D.apply(this,arguments);B.attached=!1;B.clips=new h;B.lastUpdateId=-1;B.moving=!1;B.updateRequested=!1;B.visibleAtCurrentScale=!1;B.highlightOptions=null;return B}p._inherits(G,A);var D=p._createSuper(G);A=G.prototype;A.initialize=function(){const B=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&B&&!this.spatialReferenceSupported?
this.addResolvingPromise(Promise.reject(new e("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new n.Container),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([m.watch(()=>this.suspended,t=>{this.container&&(this.container.visible=!t);this.view&&!t&&this.updateRequested&&this.view.requestUpdate()},m.syncAndInitial),
m.watch(()=>this.layer?.opacity??1,t=>{this.container&&(this.container.opacity=t)},m.syncAndInitial),m.watch(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",t=>{this.container&&(this.container.blendMode=t)},m.syncAndInitial),m.watch(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,t=>{this.container&&(this.container.effect=t)},m.syncAndInitial),m.watch(()=>this.highlightOptions,t=>this.container.highlightOptions=t,m.syncAndInitial),m.on(()=>this.clips,"change",()=>
{this.container&&(this.container.clips=this.clips)},m.syncAndInitial),m.watch(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:t})=>{t=null!=t?this.isVisibleAtScale(t):!1;t!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",t)},m.syncAndInitial)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(t=>{t===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},
()=>{}))};A.destroy=function(){this.processDetach();this.updateRequested=!1};A.processAttach=function(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())};A.processDetach=function(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)};A.isVisibleAtScale=function(B){const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!t)return!0;
const {minScale:K,maxScale:O}=t;return(0===K||B<=K)&&(0===O||B>=O)};A.requestUpdate=function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())};A.processUpdate=function(B){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",B),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(B)))};A.hitTest=function(B,t){return Promise.resolve(null)};A.supportsSpatialReference=function(B){return!0};
A.canResume=function(){return this.spatialReferenceSupported?p._get(p._getPrototypeOf(G.prototype),"canResume",this).call(this)?this.visibleAtCurrentScale:!1:!1};A.getSuspendInfo=function(){const B=p._get(p._getPrototypeOf(G.prototype),"getSuspendInfo",this).call(this),t=!this.spatialReferenceSupported,K=this.visibleAtCurrentScale;t&&(B.spatialReferenceNotSupported=t);K&&(B.outsideScaleRange=K);return B};A.addAttachHandles=function(B){this.addHandles(B,"attach")};p._createClass(G,[{key:"spatialReferenceSupported",
get:function(){const B=this.view?.spatialReference;return null==B||this.supportsSpatialReference(B)}},{key:"updating",get:function(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this.updatingHandles?.updating)}}]);return G}(r);z.__decorate([b.property()],r.prototype,"attached",void 0);z.__decorate([b.property({type:h,set(A){A=w.referenceSetter(A,this._get("clips"),h);this._set("clips",A)}})],r.prototype,"clips",void 0);z.__decorate([b.property()],
r.prototype,"container",void 0);z.__decorate([b.property()],r.prototype,"moving",void 0);z.__decorate([b.property({readOnly:!0})],r.prototype,"spatialReferenceSupported",null);z.__decorate([b.property({readOnly:!0})],r.prototype,"updateParameters",void 0);z.__decorate([b.property()],r.prototype,"updateRequested",void 0);z.__decorate([b.property()],r.prototype,"updating",null);z.__decorate([b.property()],r.prototype,"view",void 0);z.__decorate([b.property({readOnly:!0})],r.prototype,"visibleAtCurrentScale",
void 0);z.__decorate([b.property({type:q})],r.prototype,"highlightOptions",void 0);return r=z.__decorate([k.subclass("esri.views.2d.layers.LayerView2D")],r)};Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})})},"esri/views/layers/support/ClipRect":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),
function(C,p,z,F,w,e,m,b){var a;F=a=function(f){function d(n){n=k.call(this,n);n.type="rect";n.left=null;n.right=null;n.top=null;n.bottom=null;return n}C._inherits(d,f);var k=C._createSuper(d);f=d.prototype;f.clone=function(){return new a({left:this.left,right:this.right,top:this.top,bottom:this.bottom})};f.commitVersionProperties=function(){this.commitProperty("left");this.commitProperty("right");this.commitProperty("top");this.commitProperty("bottom")};return C._createClass(d)}(b);p.__decorate([z.property({type:[Number,
String],json:{write:!0}})],F.prototype,"left",void 0);p.__decorate([z.property({type:[Number,String],json:{write:!0}})],F.prototype,"right",void 0);p.__decorate([z.property({type:[Number,String],json:{write:!0}})],F.prototype,"top",void 0);p.__decorate([z.property({type:[Number,String],json:{write:!0}})],F.prototype,"bottom",void 0);return F=a=p.__decorate([m.subclass("esri.views.layers.support.ClipRect")],F)})},"esri/views/layers/support/ClipArea":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(C,p,z,F,w,e,m,b){z=function(a){function f(){return d.apply(this,arguments)}C._inherits(f,a);var d=C._createSuper(f);C._createClass(f,[{key:"version",get:function(){this.commitVersionProperties();return(this._get("version")||0)+1}}]);return f}(z.JSONSupport);p.__decorate([F.property({readOnly:!0})],z.prototype,"version",null);return z=p.__decorate([b.subclass("esri.views.layers.support.ClipArea")],z)})},"esri/views/layers/support/Geometry":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea ../../../geometry/Extent ../../../geometry/Polygon".split(" "),
function(C,p,z,F,w,e,m,b,a,f,d,k,n){var q;z={base:a,key:"type",typeMap:{extent:k,polygon:n}};d=q=function(g){function v(h){h=x.call(this,h);h.type="geometry";h.geometry=null;return h}C._inherits(v,g);var x=C._createSuper(v);g=v.prototype;g.clone=function(){return new q({geometry:this.geometry?.clone()??null})};g.commitVersionProperties=function(){this.commitProperty("geometry")};return C._createClass(v)}(d);p.__decorate([F.property({types:z,json:{read:f.fromJSON,write:!0}})],d.prototype,"geometry",
void 0);return d=q=p.__decorate([b.subclass("esri.views.layers.support.Geometry")],d)})},"esri/views/layers/support/Path":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),function(C,p,z,F,w,e,m,b){F=function(a){function f(k){k=d.call(this,k);k.type="path";
k.path=[];return k}C._inherits(f,a);var d=C._createSuper(f);f.prototype.commitVersionProperties=function(){this.commitProperty("path")};return C._createClass(f)}(b);p.__decorate([z.property({type:[[[Number]]],json:{write:!0}})],F.prototype,"path",void 0);return F=p.__decorate([m.subclass("esri.views.layers.support.Path")],F)})},"esri/views/2d/layers/support/DebugOverlay":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../../core/arrayUtils ../../../../core/has ../../../webgl/checkWebGLError ../../../webgl/context-util ../../../webgl/enums ../../../../chunks/builtins ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../engine/DisplayObject ../../../webgl/VertexElementDescriptor".split(" "),
function(C,p,z,F,w,e,m,b,a,f,d,k,n,q,g,v){const x={geometry:[new v.VertexElementDescriptor("a_PositionAndFlags",3,d.DataType.SHORT,0,6)]},h=new Map;h.set("a_PositionAndFlags",0);const r={vsPath:"debug/overlay",fsPath:"debug/overlay",attributes:h};return function(A){function G(B){var t=D.call(this);t._conf=B;return t}C._inherits(G,A);var D=C._createSuper(G);G.makeFlags=function(B,t){return B|t<<2};A=G.prototype;A._createTransforms=function(){return{dvs:F.create()}};A.doRender=function(B){this._updateTransforms(B);
this._ensureResources(B);const {context:t}=B;t.useProgram(this._program);this._program.setUniformMatrix3fv("u_dvsMat3",this.transforms.dvs);this._program.setUniform4fv("u_colors",this._conf.getColors(B));this._program.setUniform1fv("u_opacities",this._conf.getOpacities(B));const {vertexData:K,indexData:O}=this._conf.getMesh(B);this._vertexBuffer.setData(K);this._indexBuffer.setData(O);t.bindVAO(this._vertexArray);t.setBlendingEnabled(!0);t.setBlendFunction(d.BlendFactor.ONE,d.BlendFactor.ONE_MINUS_SRC_ALPHA);
t.setDepthTestEnabled(!1);t.setStencilTestEnabled(!1);t.setColorMask(!0,!0,!0,!0);t.drawElements(d.PrimitiveType.TRIANGLES,O.length,d.DataType.UNSIGNED_INT,0)};A.onDetach=function(){this._vertexArray=p.disposeMaybe(this._vertexArray)};A._updateTransforms=function(B){z.identity(this.transforms.dvs);z.translate(this.transforms.dvs,this.transforms.dvs,[-1,1]);z.scale(this.transforms.dvs,this.transforms.dvs,[2/B.state.size[0],-2/B.state.size[1],1])};A._ensureResources=function(B){const {context:t}=B;
this._program||(this._program=B.painter.materialManager.getProgram(r));this._vertexBuffer||(this._vertexBuffer=w.BufferObject.createVertex(t,d.Usage.STREAM_DRAW));this._indexBuffer||(this._indexBuffer=w.BufferObject.createIndex(t,d.Usage.STREAM_DRAW));this._vertexArray||(this._vertexArray=new q.VertexArrayObject(t,h,x,{geometry:this._vertexBuffer},this._indexBuffer))};return C._createClass(G)}(g.DisplayObject)})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../layers/support/TileInfo","./TileInfoView","./TileKey"],function(C,p,z,F){return function(w){function e(){var b=m.apply(this,arguments);b._fullCacheLodInfos=null;b._levelByScale={};return b}C._inherits(e,w);var m=C._createSuper(e);w=e.prototype;w.getTileParentId=function(b){b=F.pool.acquire(b);const a=0===b.level?null:F.getId(b.level-1,b.row>>1,b.col>>1,b.world);F.pool.release(b);return a};w.getTileCoverage=function(b,a,f){b=C._get(C._getPrototypeOf(e.prototype),"getTileCoverage",this).call(this,
b,a,f);if(!b)return b;const d=1<<b.lodInfo.level;b.spans=b.spans.filter(k=>0<=k.row&&k.row<d);return b};w.scaleToLevel=function(b){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[b])return this._levelByScale[b];var a=this._fullCacheLodInfos;if(b>a[0].scale)return a[0].level;let f;for(let d=0;d<a.length-1;d++)if(f=a[d+1],b>f.scale)return a=a[d],a.level+(a.scale-b)/(a.scale-f.scale);return a[a.length-1].level};w._initializeFullCacheLODs=function(b){b=0===
b[0].level?b.map(a=>({level:a.level,resolution:a.resolution,scale:a.scale})):p.create({size:this.tileInfo.size[0],spatialReference:this.tileInfo.spatialReference}).lods.map(a=>({level:a.level,resolution:a.resolution,scale:a.scale}));for(let a=0;a<b.length;a++)this._levelByScale[b[a].scale]=b[a].level;this._fullCacheLodInfos=b};return C._createClass(e)}(z)})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/diffUtils ../../../geometry/support/aaBoundingRect ../../../geometry/support/spatialReferenceUtils ../engine/vectorTiles/enums ../engine/vectorTiles/TileHandler ../engine/vectorTiles/TileManager ../engine/vectorTiles/VectorTile ../engine/vectorTiles/VectorTileContainer ../engine/vectorTiles/style/StyleDefinition ../engine/vectorTiles/style/StyleRepository ./LayerView2D ./support/DebugOverlay ../tiling/TileInfoViewPOT ../tiling/TileQueue ../../layers/LayerView".split(" "),function(C,
p,z,F,w,e,m,b,a,f,d,k,n,q,g,v,x,h,r,A,G,D,B,t,K,O){function R(P){if(e.isNone(P))return 0;switch(P.type){case "partial":return Object.keys(P.diff).length;case "complete":return Math.max(Object.keys(P.oldValue).length,Object.keys(P.newValue).length);case "collection":return Object.keys(P.added).length+Object.keys(P.changed).length+Object.keys(P.removed).length}}f=function(P){function U(){var J=Y.apply(this,arguments);J._styleChanges=[];J._fetchQueue=null;J._parseQueue=null;J._tileHandlerPromise=null;
J._isTileHandlerReady=!1;J._collisionOverlay=null;J.fading=!1;J._getCollidersMesh=L=>{({pixelRatio:L}=L.state);let H=0;const Q=[],M=[];for(const W of J._vectorTileContainer.children)if(W.symbols)for(const [,Z]of W.symbols)for(const ha of Z)for(const da of ha.colliders){const V=(da.xScreen+da.dxScreen)*L,aa=(da.yScreen+da.dyScreen)*L,ea=da.width*L,fa=da.height*L;var S=.5<ha.unique.parts[da.partIndex].targetOpacity;if(!S&&"all"!==J.layer.showCollisionBoxes)continue;const ka=B.makeFlags(S?2:0,S?3:0);
Q.push(V,aa,ka,V+ea,aa,ka,V,aa+fa,ka,V+ea,aa+fa,ka);M.push(H,H+1,H+2,H+1,H+3,H+2);H+=4;S=B.makeFlags(S?3:1,S?3:0);Q.push(V,aa,S,V+ea,aa,S,V,aa+1,S,V+ea,aa+1,S);M.push(H,H+1,H+2,H+1,H+3,H+2);H+=4;Q.push(V,aa+fa-1,S,V+ea,aa+fa-1,S,V,aa+fa,S,V+ea,aa+fa,S);M.push(H,H+1,H+2,H+1,H+3,H+2);H+=4;Q.push(V,aa,S,V+1,aa,S,V,aa+fa,S,V+1,aa+fa,S);M.push(H,H+1,H+2,H+1,H+3,H+2);H+=4;Q.push(V+ea-1,aa,S,V+ea,aa,S,V+ea-1,aa+fa,S,V+ea,aa+fa,S);M.push(H,H+1,H+2,H+1,H+3,H+2);H+=4}return{vertexData:new Int16Array(Q),indexData:new Uint32Array(M)}};
J._getCollidersColors=()=>[1,.5,0,1,1,0,0,1,0,1,.5,1,0,.5,0,1];J._getCollidersOpacities=()=>[.05,.01,.15,.2];return J}C._inherits(U,P);var Y=C._createSuper(U);P=U.prototype;P.hitTest=async function(J,L){if(!this._tileHandlerPromise)return null;await this._tileHandlerPromise;L=await this._vectorTileContainer.hitTest(L);if(!L||0===L.length)return null;L=L[0]-1;var H=this._styleRepository;const Q=H.getStyleLayerByUID(L);if(!Q)return null;H=H.getStyleLayerIndex(Q.id);return[{type:"graphic",mapPoint:J,
layer:this.layer,graphic:new z({attributes:{layerId:H,layerName:Q.id,layerUID:L},layer:this.layer,sourceLayer:this.layer})}]};P.update=function(J){this._tileHandlerPromise&&this._isTileHandlerReady&&(J.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),this._tileHandler.devicePixelRatio=J.pixelRatio):0<this._styleChanges.length?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=J.state,this._parseQueue.state=J.state,
this._tileManager.update(J)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))};P.attach=function(){const {style:J}=this.layer.currentStyleInfo;this._styleRepository=new G(J);this._tileInfoView=new t(this.layer.tileInfo,this.layer.fullExtent);this._vectorTileContainer=new r.VectorTileContainer(this._tileInfoView);this._tileHandler=new v.TileHandler(this.layer,this._styleRepository,window.devicePixelRatio||1);this.container.addChild(this._vectorTileContainer);this._start();
this.addAttachHandles([this._vectorTileContainer.on("fade-start",()=>{this.fading=!0;this.notifyChange("updating");this.requestUpdate()}),this._vectorTileContainer.on("fade-complete",()=>{this._collisionOverlay?.requestRender();this.fading=!1;this.notifyChange("updating");this.requestUpdate()}),b.watch(()=>this.layer.showCollisionBoxes,L=>{"none"!==L?this._collisionOverlay||(this._collisionOverlay=new B({getMesh:this._getCollidersMesh,getColors:this._getCollidersColors,getOpacities:this._getCollidersOpacities}),
this.container.addChild(this._collisionOverlay)):this._collisionOverlay&&(this.container.removeChild(this._collisionOverlay),this._collisionOverlay=null);this.container.requestRender()},b.initial),this.layer.on("paint-change",L=>{if(L.isDataDriven)this._styleChanges.push({type:g.StyleUpdateType.PAINTER_CHANGED,data:L}),this.notifyChange("updating"),this.requestUpdate();else{const Q=this._styleRepository;var H=Q.getLayerById(L.layer);H&&(H=H.type===A.StyleLayerType.SYMBOL,Q.setPaintProperties(L.layer,
L.paint),H&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())}}),this.layer.on("layout-change",L=>{const H=this._styleRepository,Q=H.getLayerById(L.layer);if(Q){var M=k.diff(Q.layout,L.layout);e.isNone(M)||(k.hasDiff(M,"visibility")&&1===R(M)?(H.setLayoutProperties(L.layer,L.layout),Q.type===A.StyleLayerType.SYMBOL&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender()):(this._styleChanges.push({type:g.StyleUpdateType.LAYOUT_CHANGED,
data:L}),this.notifyChange("updating"),this.requestUpdate()))}}),this.layer.on("style-layer-visibility-change",L=>{const H=this._styleRepository,Q=H.getLayerById(L.layer);Q&&(H.setStyleLayerVisibility(L.layer,L.visibility),Q.type===A.StyleLayerType.SYMBOL&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())}),this.layer.on("style-layer-change",L=>{this._styleChanges.push({type:g.StyleUpdateType.LAYER_CHANGED,data:L});this.notifyChange("updating");this.requestUpdate()}),
this.layer.on("delete-style-layer",L=>{this._styleChanges.push({type:g.StyleUpdateType.LAYER_REMOVED,data:L});this.notifyChange("updating");this.requestUpdate()}),this.layer.on("load-style",()=>this._loadStyle()),this.layer.on("spriteSource-change",L=>{this._newSpriteSource=L.spriteSource;this._styleChanges.push({type:g.StyleUpdateType.SPRITES_CHANGED,data:null});L=this._styleRepository.layers;for(const H of L)switch(H.type){case A.StyleLayerType.SYMBOL:H.getLayoutProperty("icon-image")&&this._styleChanges.push({type:g.StyleUpdateType.LAYOUT_CHANGED,
data:{layer:H.id,layout:H.layout}});break;case A.StyleLayerType.LINE:H.getPaintProperty("line-pattern")&&this._styleChanges.push({type:g.StyleUpdateType.PAINTER_CHANGED,data:{layer:H.id,paint:H.paint,isDataDriven:H.isPainterDataDriven()}});break;case A.StyleLayerType.FILL:H.getLayoutProperty("fill-pattern")&&this._styleChanges.push({type:g.StyleUpdateType.PAINTER_CHANGED,data:{layer:H.id,paint:H.paint,isDataDriven:H.isPainterDataDriven()}})}this.notifyChange("updating");this.requestUpdate()})])};
P.detach=function(){this._stop();this.container.removeAllChildren();this._vectorTileContainer=e.destroyMaybe(this._vectorTileContainer);this._tileHandler=e.destroyMaybe(this._tileHandler)};P.moveStart=function(){this.requestUpdate()};P.viewChange=function(){this.requestUpdate()};P.moveEnd=function(){this._collisionOverlay&&this._vectorTileContainer.restartDeclutter();this.requestUpdate()};P.supportsSpatialReference=function(J){return q.equals(this.layer.tileInfo?.spatialReference,J)};P.canResume=
function(){let J=C._get(C._getPrototypeOf(U.prototype),"canResume",this).call(this);const {currentStyleInfo:L}=this.layer;if(J&&L?.layerDefinition){const H=this.view.scale,{minScale:Q,maxScale:M}=L.layerDefinition;L&&L.layerDefinition&&(Q&&Q<H&&(J=!1),M&&M>H&&(J=!1))}return J};P.isUpdating=function(){const J=this._vectorTileContainer.children;return!this._isTileHandlerReady||!this._fetchQueue||!this._parseQueue||this._fetchQueue.updating||this._parseQueue.updating||0<J.length&&J.some(L=>L.invalidating)||
this.fading};P.acquireTile=function(J){const L=this._createVectorTile(J);this._tileHandlerPromise?.then(()=>{this._fetchQueue.push(L.key).then(H=>this._parseQueue.push({key:L.key,data:H})).then(H=>{L.once("attach",()=>this.requestUpdate());L.setData(H);this.requestUpdate();this.notifyChange("updating")}).catch(H=>{this.notifyChange("updating");m.isAbortError(H)||w.getLogger(this.declaredClass).error(H)})});return L};P.releaseTile=function(J){J=J.key.id;this._fetchQueue.abort(J);this._parseQueue.abort(J);
this.requestUpdate()};P._start=function(){this._stop();this._tileManager=new x.TileManager({acquireTile:H=>this.acquireTile(H),releaseTile:H=>this.releaseTile(H),tileInfoView:this._tileInfoView},this._vectorTileContainer);if(this.layer.currentStyleInfo){var J=new AbortController,L=this._tileHandler.start({signal:J.signal}).then(()=>{this._fetchQueue=new K({tileInfoView:this._tileInfoView,process:(H,Q)=>this._getTileData(H,Q),concurrency:15});this._parseQueue=new K({tileInfoView:this._tileInfoView,
process:(H,Q)=>this._parseTileData(H,Q),concurrency:8});this.requestUpdate();this._isTileHandlerReady=!0});this._tileHandler.spriteMosaic.then(H=>{this._vectorTileContainer.setStyleResources(H,this._tileHandler.glyphMosaic,this._styleRepository);this.requestUpdate()});this._tileHandlerAbortController=J;this._tileHandlerPromise=L}};P._stop=function(){if(this._tileHandlerAbortController&&this._vectorTileContainer){var J=this._tileHandlerAbortController;J&&J.abort();this._tileHandlerPromise=null;this._isTileHandlerReady=
!1;this._fetchQueue=e.destroyMaybe(this._fetchQueue);this._parseQueue=e.destroyMaybe(this._parseQueue);this._tileManager=e.destroyMaybe(this._tileManager);this._vectorTileContainer.removeAllChildren()}};P._getTileData=async function(J,L){J=await this._tileHandler.fetchTileData(J,L);this.notifyChange("updating");return J};P._parseTileData=async function(J,L){return this._tileHandler.parseTileData(J,L)};P._applyStyleChanges=async function(){this._isTileHandlerReady=!1;this._fetchQueue.pause();this._parseQueue.pause();
this._fetchQueue.clear();this._parseQueue.clear();this._tileManager.clearCache();var J=this._styleChanges;try{await this._tileHandler.updateStyle(J)}catch(W){w.getLogger(this.declaredClass).error("error applying vector-tiles style update",W.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0}const L=this._styleRepository,H=[];J.forEach(W=>{W.type===g.StyleUpdateType.LAYER_REMOVED&&(W=L.getLayerById(W.data.layer))&&H.push(W.uid)});const Q=[];let M;J.forEach(W=>
{const Z=W.data;switch(W.type){case g.StyleUpdateType.PAINTER_CHANGED:L.setPaintProperties(Z.layer,Z.paint);M=Z.layer;break;case g.StyleUpdateType.LAYOUT_CHANGED:L.setLayoutProperties(Z.layer,Z.layout);M=Z.layer;break;case g.StyleUpdateType.LAYER_REMOVED:L.deleteStyleLayer(Z.layer);return;case g.StyleUpdateType.LAYER_CHANGED:L.setStyleLayer(Z.layer,Z.index);M=Z.layer.id;break;case g.StyleUpdateType.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(this._newSpriteSource)),
M=this._newSpriteSource=null}(W=L.getLayerById(M))&&Q.push(W.uid)});J=this._vectorTileContainer.children;if(0<H.length){this._vectorTileContainer.deleteStyleLayers(H);for(var S of J)S.deleteLayerData(H)}this._fetchQueue.resume();this._parseQueue.resume();if(0<Q.length){S=[];for(const W of J)J=this._fetchQueue.push(W.key).then(Z=>this._parseQueue.push({key:W.key,data:Z,styleLayerUIDs:Q})).then(Z=>W.setData(Z)),S.push(J);await Promise.all(S)}this._styleChanges=[];this._isTileHandlerReady=!0;this.notifyChange("updating");
this.requestUpdate()};P._loadStyle=async function(){var {style:J}=this.layer.currentStyleInfo;J=F.clone(J);this._isTileHandlerReady=!1;this._fetchQueue.pause();this._parseQueue.pause();this._fetchQueue.clear();this._parseQueue.clear();this.notifyChange("updating");this._styleRepository=new G(J);this._vectorTileContainer.destroy();this._tileManager.clear();this._tileHandlerAbortController.abort();this._tileHandlerAbortController=new AbortController;const {signal:L}=this._tileHandlerAbortController;
try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,J),await this._tileHandlerPromise}catch(H){if(!m.isAbortError(H))throw H;}L.aborted||(J=await this._tileHandler.spriteMosaic,this._vectorTileContainer.setStyleResources(J,this._tileHandler.glyphMosaic,this._styleRepository));this._fetchQueue.resume();this._parseQueue.resume();this._isTileHandlerReady=!0;this.notifyChange("updating");this.requestUpdate()};P._createVectorTile=function(J){const L=this._tileInfoView.getTileBounds(n.create(),
J),H=this._tileInfoView.getTileResolution(J.level);return new h.VectorTile(J,H,L[0],L[3],512,512,this._styleRepository)};return C._createClass(U)}(D.LayerView2DMixin(O));p.__decorate([a.property()],f.prototype,"_fetchQueue",void 0);p.__decorate([a.property()],f.prototype,"_parseQueue",void 0);p.__decorate([a.property()],f.prototype,"_isTileHandlerReady",void 0);p.__decorate([a.property()],f.prototype,"fading",void 0);return f=p.__decorate([d.subclass("esri.views.2d.layers.VectorTileLayerView2D")],
f)});