// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/has ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass".split(" "),function(g,h,e,q,l,u,y,v){e=function(f){function n(c){c=w.call(this,
c);c.tiles=new Map;return c}g._inherits(n,f);var w=g._createSuper(n);f=n.prototype;f.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.tiles=null};f.acquireTile=function(c){const b=this.createTile(c);b.once("isReady",()=>this.notifyChange("updating"));this.tiles.set(c.id,b);this.notifyChange("updating");return b};f.forceAttributeTextureUpload=function(){};f.forEachTile=function(c){this.tiles.forEach(c)};f.releaseTile=function(c){this.tiles.delete(c.key.id);this.notifyChange("updating");
this.disposeTile(c)};f.isUpdating=function(){let c=!0;this.tiles.forEach(k=>{c=c&&k.isReady});const b=!c;if(q("esri-2d-log-updating")){let k="";this.tiles.forEach(p=>{k+=`-> ${p.key.id}: isReady: ${p.isReady} status: ${p.updateStatus}\n`;c=c&&p.isReady});console.log(`Updating BaseTileRenderer ${b}\n${k}`)}return b};f.setHighlight=function(){};f.invalidateLabels=function(){};f.requestUpdate=function(){this.layerView.requestUpdate()};g._createClass(n,[{key:"updating",get:function(){return this.isUpdating()}}]);
return n}(e.HandleOwner);h.__decorate([l.property()],e.prototype,"layer",void 0);h.__decorate([l.property()],e.prototype,"layerView",void 0);h.__decorate([l.property()],e.prototype,"tileInfoView",void 0);h.__decorate([l.property()],e.prototype,"updating",null);return e=h.__decorate([v.subclass("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],e)})},"esri/views/2d/layers/features/tileRenderers/support/HeatmapSource":function(){define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../../renderers/support/heatmapUtils"],function(g,h,e){let q=function(){function l(){this.gradient=null;this.height=512;this.intensities=null;this.width=512}l.prototype.render=function(u){e.drawHeatmap(u,512,this.intensities,this.gradient,this.minDensity,this.maxDensity)};return h._createClass(l)}();g.HeatmapSource=q;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/Error ../../../../../core/accessorSupport/decorators/subclass ../../../../../renderers/support/heatmapUtils ../../../engine/BitmapTileContainer ./BaseTileRenderer ./support/HeatmapSource".split(" "),function(g,h,e,q,l,u,y,v,f,n,w,c){e=function(b){function k(a){var d=
p.call(this,a);d._intensityInfo={minDensity:0,maxDensity:0};d.type="heatmap";d.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}};d._container=new n.BitmapTileContainer(a.tileInfoView);return d}g._inherits(k,b);var p=g._createSuper(k);b=k.prototype;b.createTile=function(a){const d=this._container.createTile(a);this.tileInfoView.getTileCoords(d.bitmap,a);d.bitmap.resolution=this.tileInfoView.getTileResolution(a);return d};b.onConfigUpdate=function(){const a=
this.layer.renderer;if("heatmap"===a.type){const {minDensity:d,maxDensity:r,colorStops:x}=a;this._intensityInfo.minDensity=d;this._intensityInfo.maxDensity=r;this._gradient=f.generateGradient(x);this.tiles.forEach(m=>{const t=m.bitmap.source;t&&(t.minDensity=d,t.maxDensity=r,t.gradient=this._gradient,m.bitmap.invalidateTexture())})}};b.hitTest=function(){return Promise.resolve([])};b.install=function(a){a.addChild(this._container)};b.uninstall=function(a){this._container.removeAllChildren();a.removeChild(this._container)};
b.disposeTile=function(a){this._container.removeChild(a);a.destroy()};b.supportsRenderer=function(a){return a&&"heatmap"===a.type};b.onTileData=function(a){const d=this.tiles.get(a.tileKey);if(d){a=a.intensityInfo;var {minDensity:r,maxDensity:x}=this._intensityInfo,m=d.bitmap.source||new c.HeatmapSource;m.intensities=a&&a.matrix||null;m.minDensity=r;m.maxDensity=x;m.gradient=this._gradient;d.bitmap.source=m;this._container.addChild(d);this._container.requestRender();this.requestUpdate()}};b.onTileError=
function(a){console.error(a)};b.lockGPUUploads=function(){};b.unlockGPUUploads=function(){};b.fetchResource=function(a,d){console.error(a);return Promise.reject()};return g._createClass(k)}(w);return e=h.__decorate([v.subclass("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],e)});