// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ./Manipulation ../../../../interactive/dragEventPipeline ../../../../interactive/GraphicManipulator ../../../../interactive/editGeometry/interfaces ../../../../interactive/support/utils".split(" "),function(r,l,B,t,u,C,v,D){let J=function(e){function h(b){var c=E.call(this);c._view=b.view;c._tool=b.tool;c._graphic=b.graphic;c._manipulator=c._createManipulator();c.forEachManipulator(g=>c._tool.manipulators.add(g));
return c}l._inherits(h,e);var E=l._createSuper(h);e=h.prototype;e.destroy=function(){this.forEachManipulator(b=>{this._tool.manipulators.remove(b);b.destroy()});this._graphic=this._manipulator=this._view=this._tool=null};e.forEachManipulator=function(b){b(this._manipulator,t.ManipulatorType.TRANSLATE_XY)};e.createDragPipeline=function(b,c){let g=null,f=null,m=0,n=0,p=0;const {offsetX:w,offsetY:x,size:y}=D.getSymbolInfo(B.unwrap(this._graphic.symbol));return u.createManipulatorDragEventPipeline(this._manipulator,
(K,F)=>{F.next(a=>{if("start"===a.action){const d=b();g=d.editGeometryOperations;f=d.constraints}return a}).next(u.screenToMap(this._view)).next(a=>{const {x:d,y:k,z}=a.mapEnd;if(f&&(d+w<f.xmin||k+x-y<f.ymin||d+w>f.xmax||k+x-y>f.ymax))return a;"start"===a.action&&(m=a.mapStart.x,n=a.mapStart.y,p=a.mapStart.z);var q=d-m;const G=k-n,H=z-p;m=d;n=k;p=z;const A=[];for(const I of g.data.components)A.push(...I.vertices);q=g.moveVertices(A,q,G,H,"start"===a.action?v.AccumulationBehaviour.NEW_STEP:v.AccumulationBehaviour.ACCUMULATE_STEPS);
c(a,q);return a})})};e._createManipulator=function(){return new C.GraphicManipulator({view:this._view,graphic:this._graphic,selectable:!0,cursor:"move"})};return l._createClass(h)}(t.Manipulation);r.DragManipulation=J;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});