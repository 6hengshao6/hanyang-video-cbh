// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./capabilities/DisjointTimerQuery"],function(g,h,b,k){let n=function(){function c(a,d){this._timer=a;this._queryPool=[];this._queryResults=new Map;this._currentQuery=null;d.forEach(f=>{const l=this._timer.createQuery(),m=this._timer.createQuery();this._queryPool.push(l,m);this._queryResults.set(f,null)})}var e=c.prototype;e.start=function(){k.hasRunningElapsedTimer||(this._currentQuery=this._queryPool.pop(),b.isNone(this._currentQuery)||
(this._timer.disjoint(),this._timer.beginTimeElapsed(this._currentQuery)))};e.stop=function(a){if(this._timer.disjoint()||b.isNone(this._currentQuery)||!this._queryResults.has(a))return this.abort(),null;this._timer.endTimeElapsed();const d=this._queryResults.get(a);if(b.isNone(d))return this._queryResults.set(a,this._currentQuery),this._currentQuery=null;if(!this._timer.resultAvailable(d))return this._queryPool.unshift(this._currentQuery),this._currentQuery=null;const f=this._timer.getResult(d)/
1E6;this._queryPool.unshift(d);this._queryResults.set(a,this._currentQuery);this._currentQuery=null;return f};e.abort=function(){b.isSome(this._currentQuery)&&(this._timer.deleteQuery(this._currentQuery),this._queryPool.unshift(this._timer.createQuery()),this._currentQuery=null)};e.dispose=function(){b.isSome(this._currentQuery)&&this._timer.deleteQuery(this._currentQuery);this._queryPool.forEach(a=>{this._timer.deleteQuery(a)});this._queryResults.forEach(a=>{b.isNone(a)||this._timer.deleteQuery(a)})};
return h._createClass(c)}();g.createElapsedTimerPool=function(c,e){c=c.capabilities.disjointTimerQuery;return b.isNone(c)?null:new n(c,e)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});