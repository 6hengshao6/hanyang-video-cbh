// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ./BufferObject ./enums ./FramebufferObject ./Texture ./VertexArrayObject ./VertexElementDescriptor ./WebGLDriverTestModule".split(" "),function(l,f,p,q,b,r,t,u,v,g){g=function(w){function e(d){var a=x.call(this);a._rctx=d;a._program=d.programCache.acquire("\n      precision highp float;\n      attribute vec2 a_pos;\n      uniform highp sampler2D u_texture;\n      varying vec4 v_color;\n\n      float getBit(in float bitset, in int bitIndex) {\n        float offset \x3d pow(2.0, float(bitIndex));\n        return mod(floor(bitset / offset), 2.0);\n      }\n\n      void main() {\n        vec4 value \x3d texture2D(u_texture, vec2(0.0));\n        float bit \x3d getBit(value.x * 255.0, 1);\n\n        v_color \x3d bit * vec4(1.0);\n        gl_Position \x3d vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n      }\n      ",
"\n      precision highp float;\n      varying vec4 v_color;\n\n      void main() {\n        gl_FragColor \x3d v_color;\n      }\n      ",new Map([["a_pos",0]]));return a}f._inherits(e,w);var x=f._createSuper(e);e.prototype._test=function(d){const a=this._rctx,h=new r.FramebufferObject(a,{colorTarget:b.TargetType.TEXTURE,depthStencilTarget:b.DepthStencilTargetType.NONE},{target:b.TextureType.TEXTURE_2D,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:b.PixelFormat.RGBA,dataType:b.PixelType.UNSIGNED_BYTE,
samplingMode:b.TextureSamplingMode.NEAREST,width:1,height:1}),c=new Uint8Array(4),m=q.BufferObject.createVertex(a,b.Usage.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),n=new u.VertexArrayObject(a,new Map([["a_position",0]]),{geometry:[new v.VertexElementDescriptor("a_position",2,b.DataType.SHORT,0,4)]},{geometry:m});a.useProgram(d);var k=new t.Texture(a,{target:b.TextureType.TEXTURE_2D,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:b.PixelFormat.RGBA,dataType:b.PixelType.UNSIGNED_BYTE,samplingMode:b.TextureSamplingMode.NEAREST,
width:1,height:1},new Uint8Array([2,255,0,0]));d.setUniform1i("u_texture",0);a.bindTexture(k,0);k=a.getBoundFramebufferObject();a.bindFramebuffer(h);a.useProgram(d);const {x:y,y:z,width:A,height:B}=a.getViewport();a.setViewport(0,0,1,1);a.bindVAO(n);a.drawArrays(b.PrimitiveType.TRIANGLE_STRIP,0,4);a.setViewport(y,z,A,B);h.readPixels(0,0,1,1,b.PixelFormat.RGBA,b.PixelType.UNSIGNED_BYTE,c);n.dispose(!1);m.dispose();h.dispose();(d=255!==c[0]||255!==c[1]||255!==c[2]||255!==c[3])&&p.getLogger("esri.views.webgl.testSamplerPrecision").warn(`A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. [${c[0]}.${c[1]}.${c[2]}.${c[3]}]`);
a.bindFramebuffer(k);return d};return f._createClass(e)}(g.WebGLDriverTestModule);l.IgnoresSamplerPrecision=g;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});