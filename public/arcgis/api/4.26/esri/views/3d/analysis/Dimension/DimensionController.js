// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../analysis/dimensionUtils ../../../../core/Accessor ../../../../core/Handles ../../../../core/Logger ../../../../core/maybe ../../../../core/reactiveUtils ../../../../core/unitUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../support/getDefaultUnitForView ./lengthDimensionUtils".split(" "),
function(c,l,e,p,q,r,t,u,n,v,k,z,A,B,w,x,f){c.DimensionController=function(d){function g(a){a=y.call(this,a);a._handles=new r;return a}l._inherits(g,d);var y=l._createSuper(g);d=g.prototype;d.initialize=function(){const {computations:a}=this.analysisViewData;for(const b of a)this._addComputation(b);this.addHandles(a.on("change",({added:b,removed:h})=>{for(const m of h)this._removeComputation(m);for(const m of b)this._addComputation(m)}))};d.destroy=function(){this._handles=u.destroyMaybe(this._handles)};
d._addComputation=function(a){this._handles.has(a)||this._handles.add(n.watch(()=>f.computationToGeometryDependencies(a),b=>{const {measureType:h}=b;f.isGeodesicDimension(b)&&h!==p.LengthDimensionMeasureType.Direct?(b=Math.round(v.convertUnit(f.GEODESIC_DISTANCE_THRESHOLD,"meters","kilometers")),t.getLogger(this.declaredClass).warnOnce(`A ${h} dimension in the analysis (id: '${this.analysis.id}') will not `+"display, because only direct dimensions can measure lengths greater than "+`${b} km. Update the measureType of the affected dimension to "direct" to display it.`),
a.geometry=null):(b=f.computeGeometryFromDimension(b,this.view.renderCoordsHelper,a.geometry),a.geometry=b,a.result.length=f.computeLength(b,h,this._defaultUnit))},n.syncAndInitial),a)};d._removeComputation=function(a){this._handles.remove(a)};l._createClass(g,[{key:"analysis",get:function(){return this.analysisViewData.analysis}},{key:"_defaultUnit",get:function(){return x.getDefaultUnitForView(this.view)}}]);return g}(q);e.__decorate([k.property({constructOnly:!0})],c.DimensionController.prototype,
"analysisViewData",void 0);e.__decorate([k.property({constructOnly:!0})],c.DimensionController.prototype,"view",void 0);e.__decorate([k.property()],c.DimensionController.prototype,"analysis",null);e.__decorate([k.property()],c.DimensionController.prototype,"_defaultUnit",null);c.DimensionController=e.__decorate([w.subclass("esri.views.3d.analysis.Dimension.support.DimensionController")],c.DimensionController);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});