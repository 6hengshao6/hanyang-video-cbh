// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/Extent ./DynamicLayerView3D ../../layers/WMSLayerView".split(" "),function(f,l,m,g,u,v,w,n,p,q,r){g=function(c){function e(){var b=t.apply(this,arguments);b.type="wms-3d";return b}f._inherits(e,c);var t=f._createSuper(e);c=e.prototype;
c.initialize=function(){this.layer.serviceSupportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new m("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view")));this.updatingHandles.add(()=>this.exportImageParameters?.version,()=>{this.updatingHandles.addPromise(this.refreshDebounced())})};c.createFetchPopupFeaturesQuery=function(b){var d=this.findExtentInfoAt(b),
a=d.extent;a=new p(a[0],a[1],a[2],a[3],this._spatialReference);d=d.imageSize;const h=d.width,k=a.width/h;return{extent:a,width:h,height:d.height,x:Math.round((b.x-a.xmin)/k),y:Math.round((a.ymax-b.y)/k)}};c.getFetchOptions=function(){return{timeExtent:this.timeExtent}};return f._createClass(e)}(r(q));return g=l.__decorate([n.subclass("esri.views.3d.layers.WMSLayerView3D")],g)});