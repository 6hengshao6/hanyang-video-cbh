// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(d,a){let z=function(){function r(g,l){this._lockedSchemaPixelSize=g;this._isGCS=l}var p=r.prototype;p.getLevelRowColumn=function(g){return this._isGCS?[g[0],g[1]>>1,g[2]>>1]:256===this._lockedSchemaPixelSize&&0<g[0]?[g[0]-1,g[1]>>1,g[2]>>1]:g};p.adjustLevel=function(g){return this._isGCS?g:256===this._lockedSchemaPixelSize?0<g?g-1:0:g};p.getShift=function(g,
l){let e=0,c=0;if(256===this._lockedSchemaPixelSize||this._isGCS)g[2]%2&&(e=l),g[1]%2&&(c=l);return[e,c]};p.getScale=function(g){if(this._isGCS){if(512===this._lockedSchemaPixelSize)return 4}else if(256===this._lockedSchemaPixelSize&&0===g)return 1;return 2};return a._createClass(r)}();d.SchemaHelper=z;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/TileHandler3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/MemCache ../../../../core/promiseUtils ../../../../chunks/mat3f32 ../../../../geometry/support/aaBoundingRect ./TileHandler ./VectorTile ./decluttering/jobsUtil ../../tiling/TileInfoViewPOT ../../tiling/TileKey".split(" "),
function(d,a,z,r,p,g,l,e,c,h,k){return function(b){function f(q,u,v,C,y){u=n.call(this,q,u,v);u._memCache=C;u._loader=y;u._ongoingTileRequests=new Map;u._ongoingRequestToController=new Map;u._tileInfoView=new h(q.tileInfo,q.fullExtent);return u}d._inherits(f,b);var n=d._createSuper(f);b=f.prototype;b.destroy=function(){d._get(d._getPrototypeOf(f.prototype),"destroy",this).call(this);this._ongoingRequestToController.forEach(q=>q.abort());this._ongoingRequestToController.clear();this._ongoingTileRequests.clear()};
b.getVectorTile=async function(q,u,v,C){u=new k(q,u,v,0);let y=this._memCache.get(u.id);if(a.isSome(y))return y.retain(),y;v=await this._getVectorTileData(u);r.throwIfAborted(C);if(!this._layer)return null;y=this._memCache.get(u.id);if(a.isSome(y))return y.retain(),y;C=this._layer.tileInfo.getTileBounds(g.create(),u);q=this._tileInfoView.getTileResolution(q);y=new e.VectorTile(u,q,C[0],C[3],512,512,this._styleRepository,this._memCache);a.isSome(v)?(y.setData(v),y.retain(),this._memCache.put(u.id,
y,y.memoryUsage*y.referenced,z.MIN_PRIORITY)):y.setData(null);y.neededForCoverage=!0;y.transforms.tileUnitsToPixels=p.fromValues(.125,0,0,0,.125,0,0,0,1);c.declutterSingleTile(y,this._styleRepository);return y};b._getVectorTileData=function(q){const u=q.id;if(this._ongoingTileRequests.has(u))return this._ongoingTileRequests.get(u);const v=new AbortController;q=this._getParsedVectorTileData(q,{signal:v.signal}).then(C=>{this._ongoingTileRequests.delete(u);this._ongoingRequestToController.delete(u);
return C}).catch(()=>{this._ongoingTileRequests.delete(u);this._ongoingRequestToController.delete(u);return null});this._ongoingTileRequests.set(u,q);this._ongoingRequestToController.set(u,v);return q};b._getParsedVectorTileData=function(q,u){return this.fetchTileData(q,u).then(v=>this.parseTileData({key:q,data:v},u))};b.request=function(q,u){return this._loader.request(q,"binary",u)};return d._createClass(f)}(l.TileHandler)})},"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ../../tiling/TileKey".split(" "),
function(d,a,z,r,p,g,l,e,c){let h=function(){function k(f,n,q){this._layer=f;this._styleRepository=n;this.devicePixelRatio=q;this._connection=this._glyphMosaic=this._spriteMosaic=null}var b=k.prototype;b.destroy=function(){this._connection?.close();this._glyphMosaic=this._spriteMosaic=this._layer=this._styleRepository=this._connection=null};b.start=async function(f){this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,f);this._spriteSourcePromise.then(q=>{this._spriteMosaic=
new e(1024,1024,250);this._spriteMosaic.setSpriteSource(q)});var n=this._layer.currentStyleInfo.glyphsUrl;n=new l(n?r.addQueryParameters(n,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new g(1024,1024,n);this._broadcastPromise=p.open("WorkerTileHandler",{client:this,schedule:f.schedule,signal:f.signal}).then(q=>{this._connection=q;this._layer&&!this._connection.closed&&(q=q.broadcast("setStyle",this._layer.currentStyleInfo.style,f),Promise.all(q).catch(u=>z.throwIfNotAbortError(u)))})};
b.updateStyle=async function(f){await this._broadcastPromise;return this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",f))};b.setSpriteSource=function(f){const n=new e(1024,1024,250);n.setSpriteSource(f);this._spriteMosaic=n;this._spriteSourcePromise=Promise.resolve(f);return n};b.setStyle=async function(f,n){await this._broadcastPromise;this._styleRepository=f;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null);this._spriteSourcePromise.then(q=>
{this._spriteMosaic=new e(1024,1024,250);this._spriteMosaic.setSpriteSource(q)});f=new l(this._layer.currentStyleInfo.glyphsUrl?r.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new g(1024,1024,f);return this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",n))};b.fetchTileData=function(f,n){return this._getRefKeys(f,n).then(q=>{const u=this._layer.sourceNameToSource,v=[];for(const C in u)v.push(C);
return this._getSourcesData(v,q,n)})};b.parseTileData=function(f,n){const q=f&&f.data;if(!q)return Promise.resolve(null);const {sourceName2DataAndRefKey:u,transferList:v}=q;return 0===Object.keys(u).length?Promise.resolve(null):this._broadcastPromise.then(()=>this._connection.invoke("createTileAndParse",{key:f.key.id,sourceName2DataAndRefKey:u,styleLayerUIDs:f.styleLayerUIDs},{...n,transferList:v}))};b.getSprites=async function(f){await this._spriteSourcePromise;return this._spriteMosaic.getSpriteItems(f)};
b.getGlyphs=function(f){return this._glyphMosaic.getGlyphItems(f.font,f.codePoints)};b._getTilePayload=async function(f,n,q){f=c.pool.acquire(f.id);const u=this._layer.sourceNameToSource[n],{level:v,row:C,col:y}=f;c.pool.release(f);try{return{protobuff:await u.requestTile(v,C,y,q),sourceName:n}}catch(D){if(z.isAbortError(D))throw D;return{protobuff:null,sourceName:n}}};b._getRefKeys=function(f,n){const q=this._layer.sourceNameToSource,u=[];for(const v in q){const C=q[v].getRefKey(f,n);u.push(C)}return z.eachAlways(u)};
b._getSourcesData=function(f,n,q){const u=[];for(let v=0;v<n.length;v++)if(null==n[v].value||null==f[v])u.push(null);else{const C=this._getTilePayload(n[v].value,f[v],q);u.push(C)}return z.eachAlways(u).then(v=>{const C={},y=[];for(let D=0;D<v.length;D++){const E=v[D].value;E&&E.protobuff&&0<E.protobuff.byteLength&&(C[E.sourceName]={refKey:n[D].value.id,protobuff:E.protobuff},y.push(E.protobuff))}return{sourceName2DataAndRefKey:C,transferList:y}})};a._createClass(k,[{key:"spriteMosaic",get:function(){return this._spriteSourcePromise.then(()=>
this._spriteMosaic)}},{key:"glyphMosaic",get:function(){return this._glyphMosaic}}]);return k}();d.TileHandler=h;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(d,a,z,r,p){return function(){function g(e,c,h){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=
0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=e;this.height=c;this._glyphSource=h;this._binPack=new a(e-4,c-4);this._glyphData.push(new Uint8Array(e*c));this._dirties.push(!0);this._textures.push(void 0)}var l=g.prototype;l.getGlyphItems=function(e,c){const h=[],k=this._glyphSource,b=new Set,f=1/256;for(const q of c)b.add(Math.floor(q*f));const n=[];b.forEach(q=>{if(256>=q){const u=e+q;this._rangePromises.has(u)?n.push(this._rangePromises.get(u)):(q=k.getRange(e,q).then(()=>
{this._rangePromises["delete"](u)},()=>{this._rangePromises["delete"](u)}),this._rangePromises.set(u,q),n.push(q))}});return Promise.all(n).then(()=>{let q=this._glyphIndex[e];q||(q={},this._glyphIndex[e]=q);for(const D of c){var u=q[D];if(u){h[D]={sdf:!0,rect:u.rect,metrics:u.metrics,page:u.page,code:D};continue}var v=k.getGlyph(e,D);if(!v||!v.metrics)continue;u=v.metrics;let E;if(0===u.width)E=new z(0,0,0,0);else{const A=u.width+6,G=u.height+6;var C=A%4?4-A%4:4,y=G%4?4-G%4:4;1===C&&(C=5);1===y&&
(y=5);E=this._binPack.allocate(A+C,G+y);E.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new a(this.width-4,this.height-4),E=this._binPack.allocate(A+C,G+y));C=this._glyphData[this._currentPage];v=v.bitmap;let w;if(v)for(let I=0;I<G;I++){y=A*I;w=this.width*(E.y+I+1)+E.x;for(let K=0;K<A;K++)C[w+
K+1]=v[y+K]}}q[D]={rect:E,metrics:u,tileIDs:null,page:this._currentPage};h[D]={sdf:!0,rect:E,metrics:u,page:this._currentPage,code:D};this._dirties[this._currentPage]=!0}return h})};l.removeGlyphs=function(e){for(const c in this._glyphIndex){const h=this._glyphIndex[c];if(!h)continue;let k;for(const b in h)if(k=h[b],k.tileIDs["delete"](e),0===k.tileIDs.size){const f=this._glyphData[k.page],n=k.rect;let q,u;for(let v=0;v<n.height;v++)for(q=this.width*(n.y+v)+n.x,u=0;u<n.width;u++)f[q+u]=0;delete h[b];
this._dirties[k.page]=!0}}};l.bind=function(e,c,h,k=0){this._textures[h]||(this._textures[h]=new p.Texture(e,{pixelFormat:r.PixelFormat.ALPHA,dataType:r.PixelType.UNSIGNED_BYTE,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));const b=this._textures[h];b.setSamplingMode(c);this._dirties[h]&&b.setData(this._glyphData[h]);e.bindTexture(b,k);this._dirties[h]=!1};l.dispose=function(){this._binPack=null;for(const e of this._textures)e&&e.dispose();this._textures.length=0};return d._createClass(g)}()})},
"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../webgl/Rect"],function(d,a){return function(){function z(p,g){this._height=this._width=0;this._free=[];this._width=p;this._height=g;this._free.push(new a(0,0,p,g))}var r=z.prototype;r.allocate=function(p,g){if(p>this._width||g>this._height)return new a;let l=null,e=-1;for(let c=0;c<this._free.length;++c){const h=this._free[c];p<=h.width&&g<=h.height&&(null===l||h.y<=l.y&&h.x<=l.x)&&
(l=h,e=c)}if(null===l)return new a;this._free.splice(e,1);l.width<l.height?(l.width>p&&this._free.push(new a(l.x+p,l.y,l.width-p,g)),l.height>g&&this._free.push(new a(l.x,l.y+g,l.width,l.height-g))):(l.width>p&&this._free.push(new a(l.x+p,l.y,l.width-p,l.height)),l.height>g&&this._free.push(new a(l.x,l.y+g,p,l.height-g)));return new a(l.x,l.y,p,g)};r.release=function(p){for(let g=0;g<this._free.length;++g){const l=this._free[g];if(l.y===p.y&&l.height===p.height&&l.x+l.width===p.x)l.width+=p.width;
else if(l.x===p.x&&l.width===p.width&&l.y+l.height===p.y)l.height+=p.height;else if(p.y===l.y&&p.height===l.height&&p.x+p.width===l.x)l.x=p.x,l.width+=p.width;else if(p.x===l.x&&p.width===l.width&&p.y+p.height===l.y)l.y=p.y,l.height+=p.height;else continue;this._free.splice(g,1);this.release(p)}this._free.push(p)};d._createClass(z,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);return z}()})},"esri/views/2d/engine/webgl/Rect":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],
function(d){return function(){function a(z=0,r=0,p=0,g=0){this.x=z;this.y=r;this.width=p;this.height=g}a.prototype.union=function(z){this.x=Math.min(this.x,z.x);this.y=Math.min(this.y,z.y);this.width=Math.max(this.width,z.width);this.height=Math.max(this.height,z.height)};d._createClass(a,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return a}()})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../request",
"../../../../core/pbf"],function(d,a,z){let r=function(){function g(e){this._metrics=[];this._bitmaps=[];if(e)for(;e.next();)switch(e.tag()){case 1:const c=e.getMessage();for(;c.next();)switch(c.tag()){case 3:const h=c.getMessage();let k,b,f,n,q,u,v;for(;h.next();)switch(h.tag()){case 1:k=h.getUInt32();break;case 2:b=h.getBytes();break;case 3:f=h.getUInt32();break;case 4:n=h.getUInt32();break;case 5:q=h.getSInt32();break;case 6:u=h.getSInt32();break;case 7:v=h.getUInt32();break;default:h.skip()}h.release();
k&&(this._metrics[k]={width:f,height:n,left:q,top:u,advance:v},this._bitmaps[k]=b);break;default:c.skip()}c.release();break;default:e.skip()}}var l=g.prototype;l.getMetrics=function(e){return this._metrics[e]};l.getBitmap=function(e){return this._bitmaps[e]};return d._createClass(g)}(),p=function(){function g(){this._ranges=[]}var l=g.prototype;l.getRange=function(e){return this._ranges[e]};l.addRange=function(e,c){this._ranges[e]=c};return d._createClass(g)}();return function(){function g(e){this._glyphInfo=
{};this._baseURL=e}var l=g.prototype;l.getRange=function(e,c){const h=this._getFontStack(e);if(h.getRange(c))return Promise.resolve();const k=256*c,b=k+255;if(this._baseURL)return e=this._baseURL.replace("{fontstack}",e).replace("{range}",k+"-"+b),a(e,{responseType:"array-buffer"}).then(f=>{h.addRange(c,new r(new z(new Uint8Array(f.data),new DataView(f.data))))}).catch(()=>{h.addRange(c,new r)});h.addRange(c,new r);return Promise.resolve()};l.getGlyph=function(e,c){if(e=this._getFontStack(e)){var h=
Math.floor(c/256);if(!(256<h)&&(e=e.getRange(h)))return{metrics:e.getMetrics(c),bitmap:e.getBitmap(c)}}};l._getFontStack=function(e){let c=this._glyphInfo[e];c||(c=this._glyphInfo[e]=new p);return c};return d._createClass(g)}()})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../symbols/cim/rasterizingUtils ./RectangleBinPack ../webgl/Rect ../../../webgl/enums ../../../webgl/Texture".split(" "),function(d,a,z,r,p,g){return function(){function l(c,
h,k=0){this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;(0>=c||0>=h)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=c;this._pageHeight=h;0<k&&(this._maxItemSize=k);this._binPack=new z(c-4,h-4)}var e=l.prototype;e.dispose=function(){this._binPack=null;this._mosaicRects={};for(const c of this._textures)c&&c.dispose();
this._textures.length=0};e.getWidth=function(c){return c>=this._size.length?-1:this._size[c][0]};e.getHeight=function(c){return c>=this._size.length?-1:this._size[c][1]};e.getPageSize=function(c){return c>=this._size.length?null:this._size[c]};e.setSpriteSource=function(c){this.dispose();this.pixelRatio=c.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new z(this._pageWidth-4,this._pageHeight-4);const h=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=
h;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=c};e.getSpriteItem=function(c,h=!1){var k=this._mosaicRects[c];if(k)return k;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;let b;c&&c.startsWith("dasharray-")?([k,b]=this._rasterizeDash(c),h=!0):k=this._sprites.getSpriteInfo(c);if(!k||!k.width||!k.height||0>k.width||0>k.height)return null;const f=k.width,n=k.height,[q,u,v]=this._allocateImage(f,n);if(0>=q.width)return null;
this._copy(q,k,u,v,h,b);k={rect:q,width:f,height:n,sdf:k.sdf,simplePattern:!1,pixelRatio:k.pixelRatio,page:u};return this._mosaicRects[c]=k};e.getSpriteItems=function(c){const h={};for(const k of c)h[k.name]=this.getSpriteItem(k.name,k.repeat);return h};e.getMosaicItemPosition=function(c,h){h=(c=this.getSpriteItem(c,h))&&c.rect;if(!h)return null;h.width=c.width;h.height=c.height;return{tl:[h.x+2,h.y+2],br:[h.x+2+c.width,h.y+2+c.height],page:c.page}};e.bind=function(c,h,k=0,b=0){if(!(k>=this._size.length||
k>=this._mosaicsData.length)){this._textures[k]||(this._textures[k]=new g.Texture(c,{pixelFormat:p.PixelFormat.RGBA,dataType:p.PixelType.UNSIGNED_BYTE,wrapMode:p.TextureWrapMode.CLAMP_TO_EDGE,width:this._size[k][0],height:this._size[k][1]},new Uint8Array(this._mosaicsData[k].buffer)));var f=this._textures[k];f.setSamplingMode(h);this._dirties[k]&&f.setData(new Uint8Array(this._mosaicsData[k].buffer));c.bindTexture(f,b);this._dirties[k]=!1}};l._copyBits=function(c,h,k,b,f,n,q,u,v,C,y){let D=b*h+k;
q=u*n+q;if(y)for(q-=n,y=-1;y<=C;y++,D=((y+C)%C+b)*h+k,q+=n)for(u=-1;u<=v;u++)f[q+u]=c[D+(u+v)%v];else for(k=0;k<C;k++){for(b=0;b<v;b++)f[q+b]=c[D+b];D+=h;q+=n}};e._copy=function(c,h,k,b,f,n){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(k>=this._mosaicsData.length)){var q=new Uint32Array(n?n.buffer:this._sprites.image.buffer),u=this._mosaicsData[k];u&&q||console.error("Source or target images are uninitialized!");l._copyBits(q,n?h.width:this._sprites.width,h.x,h.y,u,b[0],c.x+2,c.y+2,h.width,
h.height,f);this._dirties[k]=!0}};e._allocateImage=function(c,h){c+=2;h+=2;var k=Math.max(c,h);if(this._maxItemSize&&this._maxItemSize<k)return k=new r(0,0,c,h),this._mosaicsData.push(new Uint32Array(c*h)),this._dirties.push(!0),this._size.push([c,h]),this._textures.push(void 0),[k,this._mosaicsData.length-1,[c,h]];k=c%4?4-c%4:4;let b=h%4?4-h%4:4;1===k&&(k=5);1===b&&(b=5);k=this._binPack.allocate(c+k,h+b);return 0>=k.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),
this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new z(this._pageWidth-4,this._pageHeight-4),this._allocateImage(c,h)):[k,this._currentPage,[this._pageWidth,this._pageHeight]]};e._rasterizeDash=function(c){var h=c.match(/\[(.*?)\]/);if(!h)return null;h=h[1].split(",").map(Number);c=c.slice(c.lastIndexOf("-")+1);const [k,
b,f]=a.rasterizeDash(h,c);c=new Uint8Array(k.buffer);return[{x:0,y:0,width:b,height:f,sdf:!0,pixelRatio:1},c]};return d._createClass(l)}()})},"esri/symbols/cim/rasterizingUtils":function(){define(["exports","../../core/floatRGBA","../../core/mathUtils"],function(d,a,z){d.rasterizeDash=function(r,p){var g="Butt"===p,l="Square"===p;p=!g&&!l;1===r.length%2&&(r=[...r,...r]);var e=0;for(var c of r)e+=c;c=Math.round(15.5*e);e=new Float32Array(31*c);let h=0,k=0,b=.5,f=!0;for(var n of r){h=k;for(k+=15.5*
n;b<=k;){for(r=.5;31>r;){const q=p?(r-15.5)*(r-15.5):Math.abs(r-15.5);e[(r-.5)*c+b-.5]=f?g?Math.max(Math.max(h+7.75-b,q),Math.max(b-k+7.75,q)):q:p?Math.min((b-h)*(b-h)+q,(b-k)*(b-k)+q):l?Math.min(Math.max(b-h,q),Math.max(k-b,q)):Math.min(Math.max(b-h+7.75,q),Math.max(k+7.75-b,q));r++}b++}f=!f}g=e.length;n=new Uint8Array(4*g);for(l=0;l<g;++l)a.packFloatRGBA((p?Math.sqrt(e[l]):e[l])/15.5,n,4*l);return[n,c,31]};d.rasterizeSimpleFill=function(r,p,g){g=z.nextPowerOfTwo(Math.ceil(g));var l="vertical"===
p||"horizontal"===p||"cross"===p||"esriSFSCross"===p||"esriSFSVertical"===p||"esriSFSHorizontal"===p?8*g:16*g;const e=2*g;r.width=l;r.height=l;const c=r.getContext("2d");c.strokeStyle="#FFFFFF";c.lineWidth=g;c.beginPath();if("vertical"===p||"cross"===p||"esriSFSCross"===p||"esriSFSVertical"===p)c.moveTo(l/2,-e),c.lineTo(l/2,l+e);if("horizontal"===p||"cross"===p||"esriSFSCross"===p||"esriSFSHorizontal"===p)c.moveTo(-e,l/2),c.lineTo(l+e,l/2);if("forward-diagonal"===p||"diagonal-cross"===p||"esriSFSDiagonalCross"===
p||"esriSFSForwardDiagonal"===p)c.moveTo(-e,-e),c.lineTo(l+e,l+e),c.moveTo(l-e,-e),c.lineTo(l+e,e),c.moveTo(-e,l-e),c.lineTo(e,l+e);if("backward-diagonal"===p||"diagonal-cross"===p||"esriSFSBackwardDiagonal"===p||"esriSFSDiagonalCross"===p)c.moveTo(l+e,-e),c.lineTo(-e,l+e),c.moveTo(e,-e),c.lineTo(-e,e),c.moveTo(l+e,l-e),c.lineTo(l-e,l+e);c.stroke();p=c.getImageData(0,0,r.width,r.height);p=new Uint8Array(p.data);for(l=0;l<p.length;l+=4)g=p[l+3]/255,p[l]*=g,p[l+1]*=g,p[l+2]*=g;return[p,r.width,r.height]};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobsUtil":function(){define("exports ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),function(d,a,z,r,p,g,l){d.declutterSingleTile=function(e,c){const h=[],k=new p.SymbolRepository(4096,h,()=>{const f=new a.VTLUniqueSymbol;f.show=!1;f.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});f.parts.push({startTime:0,startOpacity:0,
targetOpacity:0,show:!1});return f}),b=new r.SymbolDeclutterer(h,k,(f,n,q)=>new z.CollisionJob(f,n,q,e.styleRepository,e.key.level,0),(f,n)=>{g.writeOpacityToBuffers(f,n,!1)},()=>0,f=>(f=c.getStyleLayerByUID(f).getLayoutProperty("visibility"))&&f.getValue()===l.Visibility.NONE?!1:!0);h.push(e);k.add(e);b.setScreenSize(512,512);b.continue(Infinity)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/mat3f32 ./config ./util ../style/StyleDefinition".split(" "),
function(d,a,z,r,p,g){let l=function(){function e(h,k,b,f,n,q){this._symbols=h;this._styleRepository=f;this._zoom=n;this._currentSymbolCursor=this._currentLayerCursor=0;this._styleProps=new Map;this._allNeededMatrices=new Map;this._gridIndex=new p.GridIndex(k,b,r.COLLISION_GRID_CELL_SIZE);this._si=Math.sin(Math.PI*q/180);this._co=Math.cos(Math.PI*q/180);for(const u of h)for(const v of u.symbols)this._allNeededMatrices.has(v.tile)||this._allNeededMatrices.set(v.tile,z.clone(v.tile.transforms.tileUnitsToPixels))}
var c=e.prototype;c.work=function(h){const k=this._gridIndex,b=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const G=this._symbols[this._currentLayerCursor],w=this._getProperties(G.styleLayerUID);for(;this._currentSymbolCursor<G.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-b>h)return!1;var f=G.symbols[this._currentSymbolCursor];if(!f.unique.show)continue;var n=f,q=
this._si,u=this._co,v=this._allNeededMatrices.get(f.tile),C=this._zoom;const {iconRotationAlignment:I,textRotationAlignment:K,iconTranslate:Q,iconTranslateAnchor:L,textTranslate:S,textTranslateAnchor:O}=w;var y=0;for(const J of n.colliders){const [W,U]=0===J.partIndex?Q:S;var D=0===J.partIndex?L:O,E=J.minLod<=C&&C<=J.maxLod;y+=E?0:1;J.enabled=E;J.xScreen=J.xTile*v[0]+J.yTile*v[3]+v[6];J.yScreen=J.xTile*v[1]+J.yTile*v[4]+v[7];D===g.TranslateAnchor.MAP?(J.xScreen+=u*W-q*U,J.yScreen+=q*W+u*U):(J.xScreen+=
W,J.yScreen+=U);g.RotationAlignment.VIEWPORT===(0===J.partIndex?I:K)?(J.dxScreen=J.dxPixels,J.dyScreen=J.dyPixels):(J.dxScreen=u*(J.dxPixels+J.width/2)-q*(J.dyPixels+J.height/2)-J.width/2,J.dyScreen=q*(J.dxPixels+J.width/2)+u*(J.dyPixels+J.height/2)-J.height/2)}0<n.colliders.length&&y===n.colliders.length&&(n.unique.show=!1);n=f.unique;if(!n.show)continue;const {iconAllowOverlap:P,iconIgnorePlacement:T,textAllowOverlap:N,textIgnorePlacement:R}=w;for(const J of f.colliders)if(J.enabled&&(q=n.parts[J.partIndex],
q.show)){if(u=!(J.partIndex?N:P))a:{u=J.xScreen+J.dxScreen;v=J.yScreen+J.dyScreen;C=u+J.width;y=v+J.height;const [W,U,Y,Z]=k.getCellSpan(u,v,C,y);for(D=U;D<=Z;D++)for(E=W;E<=Y;E++){var A=k.cells[D][E];for(const ea of A){A=ea.xScreen+ea.dxScreen;const ba=ea.yScreen+ea.dyScreen,aa=A+ea.width,fa=ba+ea.height;if(!(C<A||u>aa||y<ba||v>fa)){u=!0;break a}}}u=!1}u&&(J.hard?n.show=!1:q.show=!1)}if(n.show)for(const J of f.colliders){if(!J.enabled)continue;if(J.partIndex?R:T)continue;if(!n.parts[J.partIndex].show)continue;
f=J.xScreen+J.dxScreen;q=J.yScreen+J.dyScreen;const [W,U,Y,Z]=this._gridIndex.getCellSpan(f,q,f+J.width,q+J.height);for(f=U;f<=Z;f++)for(q=W;q<=Y;q++)this._gridIndex.cells[f][q].push(J)}}}return!0};c._getProperties=function(h){var k=this._styleProps.get(h);if(k)return k;k=this._zoom;const b=this._styleRepository.getStyleLayerByUID(h);var f=b.getLayoutValue("symbol-placement",k)!==g.SymbolPlacement.POINT;let n=b.getLayoutValue("icon-rotation-alignment",k);n===g.RotationAlignment.AUTO&&(n=f?g.RotationAlignment.MAP:
g.RotationAlignment.VIEWPORT);let q=b.getLayoutValue("text-rotation-alignment",k);q===g.RotationAlignment.AUTO&&(q=f?g.RotationAlignment.MAP:g.RotationAlignment.VIEWPORT);f=b.getPaintValue("icon-translate",k);const u=b.getPaintValue("icon-translate-anchor",k),v=b.getPaintValue("text-translate",k),C=b.getPaintValue("text-translate-anchor",k);k={iconAllowOverlap:b.getLayoutValue("icon-allow-overlap",k),iconIgnorePlacement:b.getLayoutValue("icon-ignore-placement",k),textAllowOverlap:b.getLayoutValue("text-allow-overlap",
k),textIgnorePlacement:b.getLayoutValue("text-ignore-placement",k),iconRotationAlignment:n,textRotationAlignment:q,iconTranslateAnchor:u,iconTranslate:f,textTranslateAnchor:C,textTranslate:v};this._styleProps.set(h,k);return k};return a._createClass(e)}();d.CollisionJob=l;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../symbols/cim/enums"],
function(d,a,z){d.StyleLayerType=void 0;(function(r){r[r.BACKGROUND=0]="BACKGROUND";r[r.FILL=1]="FILL";r[r.LINE=2]="LINE";r[r.SYMBOL=3]="SYMBOL";r[r.CIRCLE=4]="CIRCLE"})(d.StyleLayerType||(d.StyleLayerType={}));d.Visibility=void 0;(function(r){r[r.VISIBLE=0]="VISIBLE";r[r.NONE=1]="NONE"})(d.Visibility||(d.Visibility={}));d.SymbolPlacement=void 0;(function(r){r[r.POINT=0]="POINT";r[r.LINE=1]="LINE";r[r.LINE_CENTER=2]="LINE_CENTER"})(d.SymbolPlacement||(d.SymbolPlacement={}));d.RotationAlignment=void 0;
(function(r){r[r.MAP=0]="MAP";r[r.VIEWPORT=1]="VIEWPORT";r[r.AUTO=2]="AUTO"})(d.RotationAlignment||(d.RotationAlignment={}));d.TextJustification=void 0;(function(r){r[r.AUTO=0]="AUTO";r[r.LEFT=1]="LEFT";r[r.CENTER=2]="CENTER";r[r.RIGHT=3]="RIGHT"})(d.TextJustification||(d.TextJustification={}));d.SymbolAnchor=void 0;(function(r){r[r.CENTER=0]="CENTER";r[r.LEFT=1]="LEFT";r[r.RIGHT=2]="RIGHT";r[r.TOP=3]="TOP";r[r.BOTTOM=4]="BOTTOM";r[r.TOP_LEFT=5]="TOP_LEFT";r[r.TOP_RIGHT=6]="TOP_RIGHT";r[r.BOTTOM_LEFT=
7]="BOTTOM_LEFT";r[r.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"})(d.SymbolAnchor||(d.SymbolAnchor={}));d.TextTransform=void 0;(function(r){r[r.NONE=0]="NONE";r[r.UPPERCASE=1]="UPPERCASE";r[r.LOWERCASE=2]="LOWERCASE"})(d.TextTransform||(d.TextTransform={}));d.TranslateAnchor=void 0;(function(r){r[r.MAP=0]="MAP";r[r.VIEWPORT=1]="VIEWPORT"})(d.TranslateAnchor||(d.TranslateAnchor={}));d.TextWritingMode=void 0;(function(r){r[r.HORIZONTAL=0]="HORIZONTAL";r[r.VERTICAL=1]="VERTICAL"})(d.TextWritingMode||(d.TextWritingMode=
{}));a=a._createClass(function(){});a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:z.CapType.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:z.JoinType.MITER},
"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:d.SymbolPlacement.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},
"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:d.SymbolAnchor.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",
values:["map","viewport","auto"],default:d.RotationAlignment.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:d.SymbolAnchor.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",
values:["auto","left","center","right"],default:d.TextJustification.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",
default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:d.RotationAlignment.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:d.TextTransform.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[d.TextWritingMode.HORIZONTAL]}};a.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE}};a.backgroundPaintDefinition=
{"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",
values:["map","viewport"],default:d.TranslateAnchor.MAP}};a.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",
values:["map","viewport"],default:d.TranslateAnchor.MAP},"line-width":{type:"number",minimum:0,default:1}};a.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",
values:["map","viewport"],default:d.TranslateAnchor.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:d.TranslateAnchor.MAP}};a.rasterPaintDefinition=
{"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};a.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,
default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:d.TranslateAnchor.MAP}};
d.StyleDefinition=a;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/enums":function(){define(["exports"],function(d){d.CapType=void 0;(function(a){a[a.BUTT=0]="BUTT";a[a.ROUND=1]="ROUND";a[a.SQUARE=2]="SQUARE";a[a.UNKNOWN=4]="UNKNOWN"})(d.CapType||(d.CapType={}));d.JoinType=void 0;(function(a){a[a.BEVEL=0]="BEVEL";a[a.ROUND=1]="ROUND";a[a.MITER=2]="MITER";a[a.UNKNOWN=4]="UNKNOWN"})(d.JoinType||(d.JoinType={}));d.Alignment=void 0;(function(a){a[a.SCREEN=0]="SCREEN";
a[a.MAP=1]="MAP"})(d.Alignment||(d.Alignment={}));d.ExternalColorMixMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Ignore=1]="Ignore";a[a.Multiply=99]="Multiply"})(d.ExternalColorMixMode||(d.ExternalColorMixMode={}));d.ExtremityPlacement=void 0;(function(a){a.Both="Both";a.JustBegin="JustBegin";a.JustEnd="JustEnd";a.None="None"})(d.ExtremityPlacement||(d.ExtremityPlacement={}));d.FillMode=void 0;(function(a){a[a.Mosaic=0]="Mosaic";a[a.Centered=1]="Centered"})(d.FillMode||(d.FillMode={}));d.FontEffects=
void 0;(function(a){a[a.Normal=0]="Normal";a[a.Superscript=1]="Superscript";a[a.Subscript=2]="Subscript"})(d.FontEffects||(d.FontEffects={}));d.FontEncoding=void 0;(function(a){a[a.MSSymbol=0]="MSSymbol";a[a.Unicode=1]="Unicode"})(d.FontEncoding||(d.FontEncoding={}));d.FontType=void 0;(function(a){a[a.Unspecified=0]="Unspecified";a[a.TrueType=1]="TrueType";a[a.PSOpenType=2]="PSOpenType";a[a.TTOpenType=3]="TTOpenType";a[a.Type1=4]="Type1"})(d.FontType||(d.FontType={}));d.AngleAlignment=void 0;(function(a){a[a.Display=
0]="Display";a[a.Map=1]="Map"})(d.AngleAlignment||(d.AngleAlignment={}));d.AnimatedSymbolRepeatType=void 0;(function(a){a.None="None";a.Loop="Loop";a.Oscillate="Oscillate"})(d.AnimatedSymbolRepeatType||(d.AnimatedSymbolRepeatType={}));d.DominantSizeAxis=void 0;(function(a){a[a.Z=0]="Z";a[a.X=1]="X";a[a.Y=2]="Y"})(d.DominantSizeAxis||(d.DominantSizeAxis={}));d.RotationOrder=void 0;(function(a){a[a.XYZ=0]="XYZ";a[a.ZXY=1]="ZXY";a[a.YXZ=2]="YXZ"})(d.RotationOrder||(d.RotationOrder={}));d.BalloonCalloutStyle=
void 0;(function(a){a[a.Rectangle=0]="Rectangle";a[a.RoundedRectangle=1]="RoundedRectangle";a[a.Oval=2]="Oval"})(d.BalloonCalloutStyle||(d.BalloonCalloutStyle={}));d.BlendingMode=void 0;(function(a){a[a.None=0]="None";a[a.Alpha=1]="Alpha";a[a.Screen=2]="Screen";a[a.Multiply=3]="Multiply";a[a.Add=4]="Add"})(d.BlendingMode||(d.BlendingMode={}));d.BlockProgression=void 0;(function(a){a[a.TTB=0]="TTB";a[a.RTL=1]="RTL";a[a.BTT=2]="BTT"})(d.BlockProgression||(d.BlockProgression={}));d.BillBoardMode=void 0;
(function(a){a[a.None=0]="None";a[a.SignPost=1]="SignPost";a[a.FaceNearPlane=2]="FaceNearPlane"})(d.BillBoardMode||(d.BillBoardMode={}));d.CGAAttributeType=void 0;(function(a){a[a.Float=0]="Float";a[a.String=1]="String";a[a.Boolean=2]="Boolean"})(d.CGAAttributeType||(d.CGAAttributeType={}));d.ClippingType=void 0;(function(a){a[a.Intersect=0]="Intersect";a[a.Subtract=1]="Subtract"})(d.ClippingType||(d.ClippingType={}));d.GeometricEffectArrowType=void 0;(function(a){a.OpenEnded="OpenEnded";a.Block=
"Block";a.Crossed="Crossed"})(d.GeometricEffectArrowType||(d.GeometricEffectArrowType={}));d.GeometricEffectControlMeasureLineRule=void 0;(function(a){a.FullGeometry="FullGeometry";a.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment";a.ReversedFirstSegment="ReversedFirstSegment";a.PerpendicularToSecondSegment="PerpendicularToSecondSegment";a.SecondSegmentWithTicks="SecondSegmentWithTicks";a.DoublePerpendicular="DoublePerpendicular";a.OppositeToFirstSegment="OppositeToFirstSegment";a.TriplePerpendicular=
"TriplePerpendicular";a.HalfCircleFirstSegment="HalfCircleFirstSegment";a.HalfCircleSecondSegment="HalfCircleSecondSegment";a.HalfCircleExtended="HalfCircleExtended";a.OpenCircle="OpenCircle";a.CoverageEdgesWithTicks="CoverageEdgesWithTicks";a.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks";a.GapExtentMidline="GapExtentMidline";a.Chevron="Chevron";a.PerpendicularWithArc="PerpendicularWithArc";a.ClosedHalfCircle="ClosedHalfCircle";a.TripleParallelExtended="TripleParallelExtended";a.ParallelWithTicks=
"ParallelWithTicks";a.Parallel="Parallel";a.PerpendicularToFirstSegment="PerpendicularToFirstSegment";a.ParallelOffset="ParallelOffset";a.OffsetOpposite="OffsetOpposite";a.OffsetSame="OffsetSame";a.CircleWithArc="CircleWithArc";a.DoubleJog="DoubleJog";a.PerpendicularOffset="PerpendicularOffset";a.LineExcludingLastSegment="LineExcludingLastSegment";a.MultivertexArrow="MultivertexArrow";a.CrossedArrow="CrossedArrow";a.ChevronArrow="ChevronArrow";a.ChevronArrowOffset="ChevronArrowOffset";a.PartialFirstSegment=
"PartialFirstSegment";a.Arch="Arch";a.CurvedParallelTicks="CurvedParallelTicks";a.Arc90Degrees="Arc90Degrees"})(d.GeometricEffectControlMeasureLineRule||(d.GeometricEffectControlMeasureLineRule={}));d.GeometricEffectDonutMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square";a.TrueBuffer="TrueBuffer"})(d.GeometricEffectDonutMethod||(d.GeometricEffectDonutMethod={}));d.GeometricEffectEnclosingPolygonMethod=void 0;(function(a){a.ClosePath="ClosePath";
a.ConvexHull="ConvexHull";a.RectangularBox="RectangularBox"})(d.GeometricEffectEnclosingPolygonMethod||(d.GeometricEffectEnclosingPolygonMethod={}));d.GeometricEffectExtensionOrigin=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(d.GeometricEffectExtensionOrigin||(d.GeometricEffectExtensionOrigin={}));d.GeometricEffectOffsetMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square"})(d.GeometricEffectOffsetMethod||(d.GeometricEffectOffsetMethod=
{}));d.GeometricEffectOffsetOption=void 0;(function(a){a.Fast="Fast";a.Accurate="Accurate"})(d.GeometricEffectOffsetOption||(d.GeometricEffectOffsetOption={}));d.GeometricEffectOffsetTangentMethod=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(d.GeometricEffectOffsetTangentMethod||(d.GeometricEffectOffsetTangentMethod={}));d.GeometricEffectWaveform=void 0;(function(a){a.Sinus="Sinus";a.Square="Square";a.Triangle="Triangle";a.Random="Random"})(d.GeometricEffectWaveform||
(d.GeometricEffectWaveform={}));d.GlyphHinting=void 0;(function(a){a[a.None=0]="None";a[a.Default=1]="Default";a[a.Force=2]="Force"})(d.GlyphHinting||(d.GlyphHinting={}));d.GradientAlignment=void 0;(function(a){a[a.Buffered=0]="Buffered";a[a.Left=1]="Left";a[a.Right=2]="Right";a[a.AlongLine=3]="AlongLine"})(d.GradientAlignment||(d.GradientAlignment={}));d.GradientFillMethod=void 0;(function(a){a[a.Linear=0]="Linear";a[a.Rectangular=1]="Rectangular";a[a.Circular=2]="Circular";a[a.Buffered=3]="Buffered"})(d.GradientFillMethod||
(d.GradientFillMethod={}));d.GradientStrokeType=void 0;(function(a){a[a.Discrete=0]="Discrete";a[a.Continuous=1]="Continuous"})(d.GradientStrokeType||(d.GradientStrokeType={}));d.GradientStrokeMethod=void 0;(function(a){a[a.AcrossLine=0]="AcrossLine";a[a.AloneLine=1]="AloneLine"})(d.GradientStrokeMethod||(d.GradientStrokeMethod={}));d.HorizontalAlignment=void 0;(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Center=2]="Center";a[a.Justify=3]="Justify"})(d.HorizontalAlignment||(d.HorizontalAlignment=
{}));d.LeaderLineStyle=void 0;(function(a){a[a.Base=0]="Base";a[a.MidPoint=1]="MidPoint";a[a.ThreePoint=2]="ThreePoint";a[a.FourPoint=3]="FourPoint";a[a.Underline=4]="Underline";a[a.CircularCW=5]="CircularCW";a[a.CircularCCW=6]="CircularCCW"})(d.LeaderLineStyle||(d.LeaderLineStyle={}));d.LineCapStyle=void 0;(function(a){a.Butt="Butt";a.Round="Round";a.Square="Square"})(d.LineCapStyle||(d.LineCapStyle={}));d.LineDashEnding=void 0;(function(a){a.NoConstraint="NoConstraint";a.HalfPattern="HalfPattern";
a.HalfGap="HalfGap";a.FullPattern="FullPattern";a.FullGap="FullGap";a.Custom="Custom"})(d.LineDashEnding||(d.LineDashEnding={}));d.LineDecorationStyle=void 0;(function(a){a[a.None=-1]="None";a[a.Custom=0]="Custom";a[a.Circle=1]="Circle";a[a.OpenArrow=2]="OpenArrow";a[a.ClosedArrow=3]="ClosedArrow";a[a.Diamond=4]="Diamond"})(d.LineDecorationStyle||(d.LineDecorationStyle={}));d.LineGapType=void 0;(function(a){a[a.ExtraLeading=0]="ExtraLeading";a[a.Multiple=1]="Multiple";a[a.Exact=2]="Exact"})(d.LineGapType||
(d.LineGapType={}));d.LineJoinStyle=void 0;(function(a){a.Bevel="Bevel";a.Round="Round";a.Miter="Miter"})(d.LineJoinStyle||(d.LineJoinStyle={}));d.ExpressionReturnType=void 0;(function(a){a[a.Default=0]="Default";a[a.String=1]="String";a[a.Numeric=2]="Numeric"})(d.ExpressionReturnType||(d.ExpressionReturnType={}));d.MarkerPlacementType=void 0;(function(a){a[a.InsidePolygon=0]="InsidePolygon";a[a.PolygonCenter=1]="PolygonCenter";a[a.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(d.MarkerPlacementType||
(d.MarkerPlacementType={}));d.MaterialMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Replace=1]="Replace";a[a.Multiply=2]="Multiply"})(d.MaterialMode||(d.MaterialMode={}));d.PlacementClip=void 0;(function(a){a[a.ClipAtBoundary=0]="ClipAtBoundary";a[a.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary";a[a.DoNotTouchBoundary=2]="DoNotTouchBoundary";a[a.DoNotClip=3]="DoNotClip"})(d.PlacementClip||(d.PlacementClip={}));d.PlacementEndings=void 0;(function(a){a.NoConstraint="NoConstraint";
a.WithMarkers="WithMarkers";a.WithFullGap="WithFullGap";a.WithHalfGap="WithHalfGap";a.Custom="Custom"})(d.PlacementEndings||(d.PlacementEndings={}));d.PlacementGridType=void 0;(function(a){a.Fixed="Fixed";a.Random="Random";a.RandomFixedQuantity="RandomFixedQuantity"})(d.PlacementGridType||(d.PlacementGridType={}));d.PlacementOnLineRelativeTo=void 0;(function(a){a.LineMiddle="LineMiddle";a.LineBeginning="LineBeginning";a.LineEnd="LineEnd";a.SegmentMidpoint="SegmentMidpoint"})(d.PlacementOnLineRelativeTo||
(d.PlacementOnLineRelativeTo={}));d.PlacementPolygonCenterMethod=void 0;(function(a){a.OnPolygon="OnPolygon";a.CenterOfMass="CenterOfMass";a.BoundingBoxCenter="BoundingBoxCenter"})(d.PlacementPolygonCenterMethod||(d.PlacementPolygonCenterMethod={}));d.PlacementRandomlyAlongLineRandomization=void 0;(function(a){a[a.Low=0]="Low";a[a.Medium=1]="Medium";a[a.High=2]="High"})(d.PlacementRandomlyAlongLineRandomization||(d.PlacementRandomlyAlongLineRandomization={}));d.PlacementStepPosition=void 0;(function(a){a[a.MarkerCenter=
0]="MarkerCenter";a[a.MarkerBounds=1]="MarkerBounds"})(d.PlacementStepPosition||(d.PlacementStepPosition={}));d.PointSymbolCalloutScale=void 0;(function(a){a[a.None=0]="None";a[a.PropUniform=1]="PropUniform";a[a.PropNonuniform=2]="PropNonuniform";a[a.DifUniform=3]="DifUniform";a[a.DifNonuniform=4]="DifNonuniform"})(d.PointSymbolCalloutScale||(d.PointSymbolCalloutScale={}));d.Simple3DLineStyle=void 0;(function(a){a.Tube="Tube";a.Strip="Strip";a.Wall="Wall"})(d.Simple3DLineStyle||(d.Simple3DLineStyle=
{}));d.SizeVariationMethod=void 0;(function(a){a[a.Random=0]="Random";a[a.Increasing=1]="Increasing";a[a.Decreasing=2]="Decreasing";a[a.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(d.SizeVariationMethod||(d.SizeVariationMethod={}));d.SymbolUnits=void 0;(function(a){a[a.Relative=0]="Relative";a[a.Absolute=1]="Absolute"})(d.SymbolUnits||(d.SymbolUnits={}));d.TextCase=void 0;(function(a){a[a.Normal=0]="Normal";a[a.LowerCase=1]="LowerCase";a[a.Allcaps=2]="Allcaps"})(d.TextCase||(d.TextCase=
{}));d.TextReadingDirection=void 0;(function(a){a[a.LTR=0]="LTR";a[a.RTL=1]="RTL"})(d.TextReadingDirection||(d.TextReadingDirection={}));d.TextureFilter=void 0;(function(a){a.Draft="Draft";a.Picture="Picture";a.Text="Text"})(d.TextureFilter||(d.TextureFilter={}));d.VerticalAlignment=void 0;(function(a){a[a.Top=0]="Top";a[a.Center=1]="Center";a[a.Baseline=2]="Baseline";a[a.Bottom=3]="Bottom"})(d.VerticalAlignment||(d.VerticalAlignment={}));d.VerticalGlyphOrientation=void 0;(function(a){a[a.Right=0]=
"Right";a[a.Upright=1]="Upright"})(d.VerticalGlyphOrientation||(d.VerticalGlyphOrientation={}));d.WaterbodySize=void 0;(function(a){a[a.Small=0]="Small";a[a.Medium=1]="Medium";a[a.Large=2]="Large"})(d.WaterbodySize||(d.WaterbodySize={}));d.WaveStrength=void 0;(function(a){a[a.Calm=0]="Calm";a[a.Rippled=1]="Rippled";a[a.Slight=2]="Slight";a[a.Moderate=3]="Moderate"})(d.WaveStrength||(d.WaveStrength={}));Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./config"],function(d,a,z,r){function p(l,e){if(l.priority-e.priority)return l.priority-e.priority;const c=l.tile.key,h=e.tile.key;return c.world-h.world?c.world-h.world:c.level-h.level?c.level-h.level:c.row-h.row?c.row-h.row:c.col-h.col?c.col-h.col:l.xTile-e.xTile?l.xTile-e.xTile:l.yTile-e.yTile}let g=function(){function l(c,h,k,b,f,n){this._visibleTiles=c;this._symbolRepository=h;this._createCollisionJob=k;this._assignTileSymbolsOpacity=
b;this._symbolLayerSorter=f;this._isLayerVisible=n;this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}var e=l.prototype;e.setScreenSize=function(c,h){this._screenWidth===c&&this._screenHeight===h||this.restart();this._screenWidth=c;this._screenHeight=h};e.restart=function(){this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=
!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0};e.continue=function(c){this._selectionJob||(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var h=performance.now();if(!this._selectionJob.work(c))return!1;this._selectionJobCompleted=!0;c=Math.max(0,c-(performance.now()-h));if(0===c)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight));if(!this._collisionJobCompleted){h=
performance.now();if(!this._collisionJob.work(c))return!1;this._collisionJobCompleted=!0;c=Math.max(0,c-(performance.now()-h));if(0===c)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){h=performance.now();if(!this._opacityJob.work(c))return!1;this._opacityJobCompleted=!0;c=Math.max(0,c-(performance.now()-h));if(0===c)return!1}this._running=!1;return!0};e._createSelectionJob=function(){const c=this._symbolRepository.uniqueSymbols;for(let q=0;q<c.length;q++){const u=
c[q];for(let v=0;v<u.uniqueSymbols.length;v++){const C=u.uniqueSymbols[v];for(const y of C.tileSymbols)y.selectedForRendering=!1}}const h=[];let k=0,b=0;const f=this._isLayerVisible,n=this._symbolLayerSorter;return{work:function(q){const u=performance.now();for(;b<c.length;b++,k=0){const C=c[b];var v=C.styleLayerUID;if(!f(v)){h[b]||(h[b]={styleLayerUID:v,symbols:[]});continue}h[b]=h[b]||{styleLayerUID:v,symbols:[]};const y=h[b];for(;k<C.uniqueSymbols.length;k++){v=C.uniqueSymbols[k];if(99===k%100&&
performance.now()-u>q)return!1;let D=null,E=!1,A=!1;for(const G of v.tileSymbols)if(!A||!E){const w=G.tile;if(!D||w.isCoverage||w.neededForCoverage&&!E){D=G;if(w.neededForCoverage||w.isCoverage)A=!0;w.isCoverage&&(E=!0)}}D.selectedForRendering=!0;if(A){y.symbols.push(D);v.show=!0;for(const G of v.parts)G.show=!0}else v.show=!1}}for(const C of h)C.symbols.sort(p);return!0},get sortedSymbols(){return h.sort(n)}}};e._createOpacityJob=function(){function c(f,n){var q=f.symbols;for(const [,v]of q){var u=
v;q=n;for(const C of u){u=C.unique;for(const y of u.parts)y.startOpacity+=(q-y.startTime)/r.FADE_DURATION*(.5<y.targetOpacity?1:-1),y.startOpacity=Math.min(Math.max(y.startOpacity,0),1),y.startTime=q,y.targetOpacity=u.show&&y.show?1:0}}h(f,n);for(const v of f.childrenTiles)c(v,n)}const h=this._assignTileSymbolsOpacity,k=this._visibleTiles;let b=0;return{work(f){const n=performance.now();for(;b<k.length;b++){if(performance.now()-n>f)return!1;const q=k[b];if(z.isSome(q.parentTile))continue;const u=
performance.now();c(q,u)}return!0}}};a._createClass(l,[{key:"running",get:function(){return this._running}}]);return l}();d.SymbolDeclutterer=g;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./util"],function(d,a,z,r){let p=function(){function g(e,c,h){this.tileCoordRange=e;this._visibleTiles=c;this._createUnique=
h;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}var l=g.prototype;l.add=function(e,c){this._uniqueSymbolLayerArray=null;let h=this._tiles.get(e.id);h||(h={symbols:new Map},this._tiles.set(e.id,h));var k=new Map;if(c)for(var b of c)h.symbols.has(b)&&(k.set(b,h.symbols.get(b)),h.symbols.delete(b));else for(var [f]of e.layerData)h.symbols.has(f)&&(k.set(f,h.symbols.get(f)),h.symbols.delete(f));this._removeSymbols(k);c=e.symbols;k=new Map;for(const [n,q]of c)if(b=q.length,32<=b){f=this.tileCoordRange;
do f/=2,b/=4;while(8<b&&64<f);b=new r.GridIndex(this.tileCoordRange,this.tileCoordRange,f);k.set(n,{flat:q,index:b});h.symbols.set(n,{flat:q,index:b});for(const u of q)b.getCell(u.xTile,u.yTile).push(u)}else k.set(n,{flat:q}),h.symbols.set(n,{flat:q});this._addSymbols(e.key,c)};l.deleteStyleLayers=function(e){this._uniqueSymbolLayerArray=null;for(const [c,h]of this._tiles){const k=new Map;for(const b of e)h.symbols.has(b)&&(k.set(b,h.symbols.get(b)),h.symbols.delete(b));this._removeSymbols(k);0===
h.symbols.size&&this._tiles.delete(c)}};l.removeTile=function(e){this._uniqueSymbolLayerArray=null;const c=this._tiles.get(e.id);if(c){var h=new Map;for(const [k]of e.symbols)c.symbols.has(k)&&(h.set(k,c.symbols.get(k)),c.symbols.delete(k));this._removeSymbols(h);0===c.symbols.size&&this._tiles.delete(e.id)}};l._removeSymbols=function(e){for(const [h,{flat:k}]of e)for(const b of k){e=b.unique;var c=e.tileSymbols;const f=c.length-1;for(let n=0;n<f;n++)if(c[n]===b){c[n]=c[f];break}c.length=f;0===f&&
(c=this._uniqueSymbolsReferences.get(h),c.delete(e),0===c.size&&this._uniqueSymbolsReferences.delete(h));b.unique=null}};l._addSymbols=function(e,c){if(0!==c.size){var h=this._visibleTiles;for(const k of h)k.parentTile||k.key.world!==e.world||k.key.level===e.level&&!k.key.equals(e)||this._matchSymbols(k,e,c);for(const [k,b]of c)for(const f of b)z.isNone(f.unique)&&(e=this._createUnique(),f.unique=e,e.tileSymbols.push(f),c=this._uniqueSymbolsReferences.get(k),c||(c=new Set,this._uniqueSymbolsReferences.set(k,
c)),c.add(e))}};l._matchSymbols=function(e,c,h){if(e.key.level>c.level){var k=e.key.level-c.level;if(e.key.row>>k!==c.row||e.key.col>>k!==c.col)return}if(c.level>e.key.level&&(k=c.level-e.key.level,c.row>>k!==e.key.row||c.col>>k!==e.key.col))return;if(c.equals(e.key))for(var b of e.childrenTiles)this._matchSymbols(b,c,h);else{b=new Map;for(const [q,u]of h){var f=[];for(const C of u)h=r.tileCoordChange(this.tileCoordRange,C.xTile,c.level,c.col,e.key.level,e.key.col),k=r.tileCoordChange(this.tileCoordRange,
C.yTile,c.level,c.row,e.key.level,e.key.row),0<=h&&h<this.tileCoordRange&&0<=k&&k<this.tileCoordRange&&f.push({symbol:C,xTransformed:h,yTransformed:k});h=[];k=e.key.level<c.level?1:1<<e.key.level-c.level;const v=this._tiles.get(e.id).symbols.get(q);if(v){const C=v.flat;for(const y of f){var n=!1;let D;const E=y.xTransformed,A=y.yTransformed;D=z.isSome(v.index)?v.index.getCell(E,A):C;f=y.symbol;const G=f.hash;for(const w of D)if(G===w.hash&&Math.abs(E-w.xTile)<=k&&Math.abs(A-w.yTile)<=k){n=w.unique;
f.unique=n;n.tileSymbols.push(f);n=!0;break}n||h.push(f)}}0<h.length&&b.set(q,h)}for(const q of e.childrenTiles)this._matchSymbols(q,c,b)}};l._createUniqueSymbolLayerArray=function(){var e=this._uniqueSymbolsReferences;const c=Array(e.size);let h=0;for(const [k,b]of e){const f=Array(b.size);e=0;for(const n of b)f[e++]=n;c[h]={styleLayerUID:k,uniqueSymbols:f};h++}return c};a._createClass(g,[{key:"uniqueSymbols",get:function(){z.isNone(this._uniqueSymbolLayerArray)&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());
return this._uniqueSymbolLayerArray}}]);return g}();d.SymbolRepository=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../layers/support/TileInfo","./TileInfoView","./TileKey"],function(d,a,z,r){return function(p){function g(){var e=l.apply(this,arguments);e._fullCacheLodInfos=null;e._levelByScale={};return e}d._inherits(g,p);var l=d._createSuper(g);p=g.prototype;p.getTileParentId=
function(e){e=r.pool.acquire(e);const c=0===e.level?null:r.getId(e.level-1,e.row>>1,e.col>>1,e.world);r.pool.release(e);return c};p.getTileCoverage=function(e,c,h){e=d._get(d._getPrototypeOf(g.prototype),"getTileCoverage",this).call(this,e,c,h);if(!e)return e;const k=1<<e.lodInfo.level;e.spans=e.spans.filter(b=>0<=b.row&&b.row<k);return e};p.scaleToLevel=function(e){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[e])return this._levelByScale[e];var c=this._fullCacheLodInfos;
if(e>c[0].scale)return c[0].level;let h;for(let k=0;k<c.length-1;k++)if(h=c[k+1],e>h.scale)return c=c[k],c.level+(c.scale-e)/(c.scale-h.scale);return c[c.length-1].level};p._initializeFullCacheLODs=function(e){e=0===e[0].level?e.map(c=>({level:c.level,resolution:c.resolution,scale:c.scale})):a.create({size:this.tileInfo.size[0],spatialReference:this.tileInfo.spatialReference}).lods.map(c=>({level:c.level,resolution:c.resolution,scale:c.scale}));for(let c=0;c<e.length;c++)this._levelByScale[e[c].scale]=
e[c].level;this._fullCacheLodInfos=e};return d._createClass(g)}(z)})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(d,a,z,r,p,g){const l=new p("0/0/0/0");let e=function(){function h(b,f,n,q,u,v,C,y){this.x=b;this.ymin=f;this.ymax=n;this.invM=q;this.leftAdjust=u;this.rightAdjust=v;this.leftBound=C;this.rightBound=y}h.create=function(b,
f){b[1]>f[1]&&([b,f]=[f,b]);const [n,q]=b,[u,v]=f;b=u-n;f=v-q;f=0!==f?b/f:0;const C=(Math.ceil(q)-q)*f,y=(Math.floor(q)-q)*f;return new h(n,Math.floor(q),Math.ceil(v),f,0>b?C:y,0>b?y:C,0>b?u:n,0>b?n:u)};var k=h.prototype;k.incrRow=function(){this.x+=this.invM};k.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};k.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return d._createClass(h)}();const c=[[0,0],[0,0],[0,0],[0,0]];return function(){function h(b,
f=null){this.tileInfo=b;this.fullExtent=f;this.scales=[];this._infoByScale={};this._infoByLevel={};const n=b.lods.slice();n.sort((u,v)=>v.scale-u.scale);const q=this._lodInfos=n.map(u=>z.create(b,u,f));n.forEach((u,v)=>{this._infoByLevel[u.level]=q[v];this._infoByScale[u.scale]=q[v];this.scales[v]=u.scale},this);this._wrap=b.isWrappable}var k=h.prototype;k.getLODInfoAt=function(b){return this._infoByLevel["number"===typeof b?b:b.level]};k.getTileBounds=function(b,f,n=!1){l.set(f);return(f=this._infoByLevel[l.level])?
f.getTileBounds(b,l,n):b};k.getTileCoords=function(b,f,n=!1){l.set(f);return(f=this._infoByLevel[l.level])?f.getTileCoords(b,l,n):b};k.getTileCoverage=function(b,f=192,n="closest"){n="closest"===n?this.getClosestInfoForScale(b.scale):this.getSmallestInfoForScale(b.scale);const q=r.pool.acquire(n),u=this._wrap;var v=Infinity;let C=-Infinity;const y=q.spans;c[0][0]=c[0][1]=c[1][1]=c[3][0]=-f;c[1][0]=c[2][0]=b.size[0]+f;c[2][1]=c[3][1]=b.size[1]+f;for(D of c)b.toMap(D,D),D[0]=n.getColumnForX(D[0]),D[1]=
n.getRowForY(D[1]);b=[];var D=3;for(f=0;4>f;f++)c[f][1]===c[D][1]?D=f:(D=e.create(c[f],c[D]),v=Math.min(D.ymin,v),C=Math.max(D.ymax,C),void 0===b[D.ymin]&&(b[D.ymin]=[]),b[D.ymin].push(D),D=f);if(null==v||null==C||100<C-v)return null;for(f=[];v<C;){null!=b[v]&&(f=f.concat(b[v]));D=Infinity;var E=-Infinity;for(var A=f.length-1;0<=A;A--){var G=f[A];D=Math.min(D,G.getLeftCol());E=Math.max(E,G.getRightCol())}D=Math.floor(D);E=Math.floor(E);if(v>=n.first[1]&&v<=n.last[1])if(u)if(n.size[0]<n.worldSize[0])for(A=
Math.floor(E/n.worldSize[0]),G=Math.floor(D/n.worldSize[0]);G<=A;G++)y.push(new g(v,Math.max(n.getFirstColumnForWorld(G),D),Math.min(n.getLastColumnForWorld(G),E)));else y.push(new g(v,D,E));else D>n.last[0]||E<n.first[0]||(D=Math.max(D,n.first[0]),E=Math.min(E,n.last[0]),y.push(new g(v,D,E)));v+=1;for(D=f.length-1;0<=D;D--)E=f[D],E.ymax>=v?E.incrRow():f.splice(D,1)}return q};k.getTileParentId=function(b){l.set(b);b=this._lodInfos.indexOf(this._infoByLevel[l.level])-1;if(0>b)return null;this._getTileIdAtLOD(l,
this._lodInfos[b],l);return l.id};k.getTileResolution=function(b){return(b=this._infoByLevel["object"===typeof b?b.level:b])?b.resolution:-1};k.getTileScale=function(b){return(b=this._infoByLevel[b.level])?b.scale:-1};k.intersects=function(b,f){l.set(f);f=this._infoByLevel[l.level];const n=b.lodInfo;if(n.resolution>f.resolution){this._getTileIdAtLOD(l,n,l);var q=n.denormalizeCol(l.col,l.world);for(var u of b.spans)if(u.row===l.row&&u.colFrom<=q&&u.colTo>=q)return!0}if(n.resolution<f.resolution){const [C,
y,D,E]=b.spans.reduce((A,G)=>{A[0]=Math.min(A[0],G.row);A[1]=Math.max(A[1],G.row);A[2]=Math.min(A[2],G.colFrom);A[3]=Math.max(A[3],G.colTo);return A},[Infinity,-Infinity,Infinity,-Infinity]);q=f.denormalizeCol(l.col,l.world);b=n.getColumnForX(f.getXForColumn(q));u=n.getRowForY(f.getYForRow(l.row));q=n.getColumnForX(f.getXForColumn(q+1))-1;f=n.getRowForY(f.getYForRow(l.row+1))-1;return!(b>E||q<D||u>y||f<C)}const v=n.denormalizeCol(l.col,l.world);return b.spans.some(C=>C.row===l.row&&C.colFrom<=v&&
C.colTo>=v)};k.normalizeBounds=function(b,f,n){b[0]=f[0];b[1]=f[1];b[2]=f[2];b[3]=f[3];this._wrap&&(f=a.getInfo(this.tileInfo.spatialReference),n=-n*(f.valid[1]-f.valid[0]),b[0]+=n,b[2]+=n);return b};k.getSmallestInfoForScale=function(b){const f=this.scales;if(this._infoByScale[b])return this._infoByScale[b];if(b>f[0])return this._infoByScale[f[0]];for(let n=1;n<f.length-1;n++)if(b>f[n]+1E-6)return this._infoByScale[f[n-1]];return this._infoByScale[f[f.length-1]]};k.getClosestInfoForScale=function(b){const f=
this.scales;if(this._infoByScale[b])return this._infoByScale[b];b=f.reduce((n,q)=>Math.abs(q-b)<Math.abs(n-b)?q:n,f[0]);return this._infoByScale[b]};k.scaleToLevel=function(b){const f=this.scales;if(this._infoByScale[b])return this._infoByScale[b].level;for(let n=f.length-1;0<=n;n--)if(b<f[n])return n===f.length-1?this._infoByScale[f[f.length-1]].level:this._infoByScale[f[n]].level+(f[n]-b)/(f[n]-f[n+1]);return this._infoByScale[f[0]].level};k.scaleToZoom=function(b){return this.tileInfo.scaleToZoom(b)};
k._getTileIdAtLOD=function(b,f,n){const q=this._infoByLevel[n.level];b.set(n);if(f.resolution<q.resolution)return null;if(f.resolution===q.resolution)return b;b.level=f.level;b.col=Math.floor(n.col*q.resolution/f.resolution+.01);b.row=Math.floor(n.row*q.resolution/f.resolution+.01);return b};d._createClass(h,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return h}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/maybe","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(d,a,z,r){function p(l,e,c){l[0]=e;l[1]=c;return l}const g=new r("0/0/0/0");return function(){function l(c,h,k,b,f,n,q,u,v,C,y,D){this.level=c;this.resolution=h;this.scale=k;this.origin=b;this.first=f;this.last=n;this.size=q;this.norm=u;this.worldStart=v;this.worldEnd=C;this.worldSize=y;this.wrap=D}l.create=function(c,h,k=null){var b=z.getInfo(c.spatialReference);const f=h.origin||[c.origin.x,c.origin.y],
n=[c.size[0]*h.resolution,c.size[1]*h.resolution],q=[-Infinity,-Infinity],u=[Infinity,Infinity],v=[Infinity,Infinity];a.isSome(k)&&(p(q,Math.max(0,Math.floor((k.xmin-f[0])/n[0])),Math.max(0,Math.floor((f[1]-k.ymax)/n[1]))),p(u,Math.max(0,Math.floor((k.xmax-f[0])/n[0])),Math.max(0,Math.floor((f[1]-k.ymin)/n[1]))),p(v,u[0]-q[0]+1,u[1]-q[1]+1));const {cols:C,rows:y}=h;!k&&C&&y&&(p(q,C[0],y[0]),p(u,C[1],y[1]),p(v,C[1]-C[0]+1,y[1]-y[0]+1));let D;c.isWrappable?(c=[Math.ceil(Math.round((b.valid[1]-b.valid[0])/
h.resolution)/c.size[0]),v[1]],b=[Math.floor((b.origin[0]-f[0])/n[0]),q[1]],k=[c[0]+b[0]-1,u[1]],D=!0):(b=q,k=u,c=v,D=!1);return new l(h.level,h.resolution,h.scale,f,q,u,v,n,b,k,c,D)};var e=l.prototype;e.normalizeCol=function(c){if(!this.wrap)return c;const h=this.worldSize[0];return 0>c?h-1-Math.abs((c+1)%h):c%h};e.denormalizeCol=function(c,h){return this.wrap?this.worldSize[0]*h+c:c};e.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.getFirstColumnForWorld=function(c){return c*
this.worldSize[0]+this.first[0]};e.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.getRowForY=function(c){return(this.origin[1]-c)/this.norm[1]};e.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};e.getTileBounds=function(c,h,k=!1){g.set(h);var b=k?g.col:this.denormalizeCol(g.col,g.world),f=g.row;h=this.getXForColumn(b);
k=this.getYForRow(f+1);b=this.getXForColumn(b+1);f=this.getYForRow(f);c[0]=h;c[1]=k;c[2]=b;c[3]=f;return c};e.getTileCoords=function(c,h,k=!1){g.set(h);h=k?g.col:this.denormalizeCol(g.col,g.world);Array.isArray(c)?p(c,this.getXForColumn(h),this.getYForRow(g.row)):(c.x=this.getXForColumn(h),c.y=this.getYForRow(g.row));return c};return d._createClass(l)}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(d,a){let z=
function(){function r(){this.spans=[]}var p=r.prototype;p.acquire=function(g){this.lodInfo=g};p.release=function(){this.lodInfo=null;this.spans.length=0};p.forEach=function(g,l){const {spans:e,lodInfo:c}=this,{level:h}=c;if(0!==e.length)for(const {row:k,colFrom:b,colTo:f}of e)for(let n=b;n<=f;n++)g.call(l,h,k,c.normalizeCol(n),c.getWorldForColumn(n))};return d._createClass(r)}();z.pool=new a(z);return z})},"esri/views/2d/tiling/TileSpan":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],
function(d){return d._createClass(function(a,z,r){this.row=a;this.colFrom=z;this.colTo=r})})},"esri/views/2d/engine/vectorTiles/VTLPainter3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../vtlBrushes ./shaders/VTLMaterialManager ./style/StyleDefinition ../../../webgl/enums".split(" "),function(d,a,z,r,p,g){return function(){function l(c,h){this.spriteMosaic=c;this.glyphMosaic=h;this._brushCache=new Map;this._vtlMaterialManager=new r}var e=l.prototype;e.dispose=
function(){this._brushCache&&(this._brushCache.forEach(c=>c.dispose()),this._brushCache=null);this._vtlMaterialManager=a.disposeMaybe(this._vtlMaterialManager);this.spriteMosaic.dispose();this.glyphMosaic.dispose()};e.drawTile=function(c,h,k){const {context:b}=c,f=k.layers;0<k.backgroundBucketIds.length&&(c.renderPass="background",k.backgroundBucketIds.forEach(q=>this._renderStyleLayer(k.getLayerById(q),c,h,!0)));b.setBlendingEnabled(!1);b.setDepthTestEnabled(!0);b.setDepthWriteEnabled(!0);b.setDepthFunction(g.CompareFunction.LEQUAL);
c.renderPass="opaque";for(var n=f.length-1;0<=n;n--)this._renderStyleLayer(f[n],c,h,!1);b.setDepthWriteEnabled(!1);b.setBlendingEnabled(!0);b.setBlendFunctionSeparate(g.BlendFactor.ONE,g.BlendFactor.ONE_MINUS_SRC_ALPHA,g.BlendFactor.ONE,g.BlendFactor.ONE_MINUS_SRC_ALPHA);c.renderPass="translucent";for(n=0;n<f.length;n++)this._renderStyleLayer(f[n],c,h,!1);b.setDepthTestEnabled(!1);b.bindVAO()};e._renderStyleLayer=function(c,h,k,b=!1){if(b||c&&k.layerData.has(c.uid))if(b=c.getLayoutProperty("visibility"),
!b||b.getValue()!==p.Visibility.NONE){({renderPass:b}=h);switch(c.type){case p.StyleLayerType.BACKGROUND:if("background"!==b)return;var f="vtlBackground";break;case p.StyleLayerType.FILL:if("opaque"!==b&&"translucent"!==h.renderPass)return;f="vtlFill";break;case p.StyleLayerType.LINE:if("translucent"!==b)return;f="vtlLine";break;case p.StyleLayerType.CIRCLE:if("translucent"!==b)return;f="vtlCircle";break;case p.StyleLayerType.SYMBOL:if("translucent"!==b)return;f="vtlSymbol"}b=h.displayLevel;void 0!==
c.minzoom&&c.minzoom>b+1E-6||void 0!==c.maxzoom&&c.maxzoom<=b-1E-6||(h.styleLayerUID=c.uid,h.styleLayer=c,this._drawWithBrush(h,k,f))}};e._drawWithBrush=function(c,h,k){this._brushCache.has(k)||this._brushCache.set(k,new z.vtlBrushes[k]);this._brushCache.get(k).drawMany(c,[h])};d._createClass(l,[{key:"vectorTilesMaterialManager",get:function(){return this._vtlMaterialManager}}]);return l}()})},"esri/views/2d/engine/vtlBrushes":function(){define("exports ./webgl/brushes/WGLBrushVTLBackground ./webgl/brushes/WGLBrushVTLCircle ./webgl/brushes/WGLBrushVTLFill ./webgl/brushes/WGLBrushVTLLine ./webgl/brushes/WGLBrushVTLSymbol".split(" "),
function(d,a,z,r,p,g){d.vtlBrushes={vtlBackground:a.WGLBrushVTLBackground,vtlFill:r.WGLBrushVTLFill,vtlLine:p.WGLBrushVTLLine,vtlCircle:z.WGLBrushVTLCircle,vtlSymbol:g.WGLBrushVTLSymbol};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLBackground":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/mat3f32 ../../../../../chunks/vec4f32 ../definitions ../enums ../number ./WGLBrush ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject".split(" "),
function(d,a,z,r,p,g,l,e,c,h,k,b,f){h=function(n){function q(){var v=u.apply(this,arguments);v._color=g.fromValues(1,0,0,1);v._patternMatrix=p.create();v._programOptions={id:!1,pattern:!1};return v}a._inherits(q,n);var u=a._createSuper(q);n=q.prototype;n.dispose=function(){this._vao&&(this._vao.dispose(),this._vao=null)};n.drawMany=function(v,C){const {context:y,painter:D,styleLayerUID:E,requestRender:A,allowDelayedRender:G}=v;this._loadWGLResources(v);const w=v.displayLevel;var I=v.styleLayer,K=
I.backgroundMaterial;const Q=D.vectorTilesMaterialManager;var L=I.getPaintValue("background-color",w);const S=I.getPaintValue("background-opacity",w),O=I.getPaintValue("background-pattern",w),P=void 0!==O,T=L[3]*S,N=v.spriteMosaic;let R,J;const W=(window.devicePixelRatio|1)>l.VTL_HIGH_RES_CUTOFF?2:1;v=v.drawPhase===e.WGLDrawPhase.HITTEST;const U=this._programOptions;U.id=v;U.pattern=P;K=Q.getMaterialProgram(y,K,U);if(G&&r.isSome(A)&&!K.compiled)A();else{y.bindVAO(this._vao);y.useProgram(K);if(P){L=
N.getMosaicItemPosition(O,!0);if(r.isSome(L)){const {tl:Y,br:Z,page:ea}=L;R=Z[0]-Y[0];J=Z[1]-Y[1];L=N.getPageSize(ea);r.isSome(L)&&(N.bind(y,b.TextureSamplingMode.LINEAR,ea,l.VTL_TEXTURE_BINDING_UNIT_SPRITES),K.setUniform4f("u_tlbr",Y[0],Y[1],Z[0],Z[1]),K.setUniform2fv("u_mosaicSize",L),K.setUniform1i("u_texture",l.VTL_TEXTURE_BINDING_UNIT_SPRITES))}K.setUniform1f("u_opacity",S)}else this._color[0]=T*L[0],this._color[1]=T*L[1],this._color[2]=T*L[2],this._color[3]=T,K.setUniform4fv("u_color",this._color);
K.setUniform1f("u_depth",I.z||0);v&&(I=c.u32to4Xu8(E+1),K.setUniform4fv("u_id",I));for(const Y of C)K.setUniform1f("u_coord_range",Y.rangeX),K.setUniformMatrix3fv("u_dvsMat3",Y.transforms.dvs),P&&(I=W*Y.width*Math.max(2**(Math.round(w)-Y.key.level),1),C=I/z.nextPowerOfTwo(R),I/=z.nextPowerOfTwo(J),this._patternMatrix[0]=C,this._patternMatrix[4]=I,K.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)),y.setStencilFunction(b.CompareFunction.EQUAL,0,255),y.drawArrays(b.PrimitiveType.TRIANGLE_STRIP,
0,4)}};n._loadWGLResources=function(v){if(!this._vao){var {context:C,styleLayer:y}=v;v=y.backgroundMaterial;var D=new Int8Array([0,0,1,0,0,1,1,1]);D=k.BufferObject.createVertex(C,b.Usage.STATIC_DRAW,D);this._vao=new f.VertexArrayObject(C,v.getAttributeLocations(),v.getLayoutInfo(),{geometry:D})}};return a._createClass(q)}(h);d.WGLBrushVTLBackground=h;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(d){d.ANGLE_FACTOR_256=
256/360;d.ATTRIBUTE_DATA_ANIMATION=1;d.ATTRIBUTE_DATA_DD0=3;d.ATTRIBUTE_DATA_DD1=4;d.ATTRIBUTE_DATA_FILTER_FLAGS=0;d.ATTRIBUTE_DATA_GPGPU=2;d.ATTRIBUTE_DATA_VV=3;d.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;d.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};d.BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR=8;d.BITSET_FILL_RANDOM_PATTERN_OFFSET=4;d.BITSET_GENERIC_CONSIDER_ALPHA_ONLY=16;d.BITSET_GENERIC_LOCK_COLOR=2;d.BITSET_LINE_SCALE_DASH=4;d.BITSET_MARKER_ALIGNMENT_MAP=1;d.BITSET_MARKER_ALIGNMENT_SCREEN=
0;d.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE=4;d.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY=8;d.BITSET_TYPE_FILL_OUTLINE=1;d.BUFFER_DATA_MINIMUM_SIZE=128;d.BUFFER_DATA_POOL_SIZE=4;d.CHART_MAX_FIELDS=10;d.COLLISION_BOX_PADDING=16;d.COLLISION_BUCKET_SIZE=128;d.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;d.COLLISION_MAX_ZOOM_DELTA=1;d.COLLISION_PLACEMENT_PADDING=8;d.COLLISION_TILE_BOX_SIZE=4;d.DEBUG_LABELS=!1;d.DISPLAY_RECORD_INT_PER_ELEMENT=8;d.DOT_DENSITY_MAX_FIELDS=8;d.EFFECT_FLAG_0=4;d.ENABLE_EARLY_LABEL_DISCARD=
!1;d.EXTRUDE_SCALE=64;d.FILTER_FLAG_0=2;d.GLYPH_SIZE=24;d.HEURISTIC_GLYPHS_PER_FEATURE=10;d.HEURISTIC_GLYPHS_PER_LINE=50;d.HIGHLIGHT_FLAG=1;d.HITTEST_RADIUS=3;d.MAGIC_LABEL_LINE_HEIGHT=29;d.MAX_FILTERS=2;d.MAX_GPU_UPLOADS_PER_FRAME=2;d.MIN_MAX_ZOOM_PRECISION_FACTOR=10;d.NAN_MAGIC_NUMBER=1E-30;d.PATCH_PIXEL_BUFFER_ALLOC_SIZE=500;d.PATTERN_FILL_RASTERIZATION_SCALE=2;d.PICTURE_FILL_COLOR=4294967295;d.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE=1024;d.RASTER_TILE_SIZE=256;d.SDF_TEXTURE_SIZE=124;d.SPRITE_PADDING=
2;d.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;d.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;d.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;d.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;d.TEXTURE_BINDING_ATTRIBUTE_DATA_4=5;d.TEXTURE_BINDING_ATTRIBUTE_DATA_5=6;d.TEXTURE_BINDING_BITMAP=0;d.TEXTURE_BINDING_GLYPH_ATLAS=0;d.TEXTURE_BINDING_GPGPU=12;d.TEXTURE_BINDING_HIGHLIGHT_0=5;d.TEXTURE_BINDING_HIGHLIGHT_1=6;d.TEXTURE_BINDING_RENDERER_0=5;d.TEXTURE_BINDING_RENDERER_1=6;d.TEXTURE_BINDING_SPRITE_ATLAS=0;d.TEXTURE_UPLOAD_MANAGER_BUDGET=
4;d.TEXTURE_UPLOAD_MANAGER_CHUNK_SIZE=128;d.TEXT_PLACEMENT_PADDING=8;d.THIN_LINE_HALF_WIDTH_THRESHOLD=1.05;d.TILE_SIZE=512;d.VTL_HIGH_RES_CUTOFF=1.15;d.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6;d.VTL_TEXTURE_BINDING_UNIT_SPRITES=5;d.WEBGL_MAX_INNER_STOPS=6;d.WEBGL_MAX_STOPS=8;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(d){d.WGLGeometryType=void 0;(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";
a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL"})(d.WGLGeometryType||(d.WGLGeometryType={}));d.WGLDrawPhase=void 0;(function(a){a[a.NONE=0]="NONE";a[a.MAP=1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(d.WGLDrawPhase||(d.WGLDrawPhase={}));d.VVType=void 0;(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(d.VVType||
(d.VVType={}));d.WGLVVFlag=void 0;(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(d.WGLVVFlag||(d.WGLVVFlag={}));d.WGLVVTarget=void 0;(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=
512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(d.WGLVVTarget||(d.WGLVVTarget={}));d.MosaicType=void 0;(function(a){a[a.SPRITE=0]="SPRITE";a[a.GLYPH=1]="GLYPH"})(d.MosaicType||(d.MosaicType={}));d.WGLSymbologyType=void 0;(function(a){a[a.DEFAULT=0]="DEFAULT";a[a.SIMPLE=1]="SIMPLE";a[a.DOT_DENSITY=2]="DOT_DENSITY";a[a.OUTLINE_FILL=3]="OUTLINE_FILL";a[a.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";a[a.HEATMAP=5]="HEATMAP";a[a.PIE_CHART=6]="PIE_CHART"})(d.WGLSymbologyType||
(d.WGLSymbologyType={}));Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(d){function a(p,g,l){return Math.round(Math.max(Math.min(p,l),g))}const z=new Float32Array(1),r=new Uint32Array(z.buffer);d.i16=function(p){return a(p,-32768,32767)};d.i1616to32=function(p,g){return 65535&p|g<<16};d.i32=function(p){return a(p,-2147483648,2147483647)};d.i8=function(p){return a(p,-128,127)};d.i8816to32=function(p,g,l){return p&
255|(g&255)<<8|l<<16};d.i8888to32=function(p,g,l,e){return p&255|(g&255)<<8|(l&255)<<16|e<<24};d.numTo32=function(p){return p|0};d.toFloat32=function(p){r[0]=p;return z[0]};d.toUint32=function(p){z[0]=p;return r[0]};d.u16=function(p){return a(p,0,65535)};d.u32=function(p){return a(p,0,4294967295)};d.u32to4Xu8=function(p){return[p&255,(p&65280)>>>8,(p&16711680)>>>16,(p&4278190080)>>>24]};d.u4u4to8=function(p,g){return 15&p|(15&g)<<4};d.u8=function(p){return a(p,0,255)};Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(d){return function(){function a(){this.name=this.constructor.name||"UnnamedBrush";this.brushEffect=null}var z=a.prototype;z.prepareState=function(r,p){};z.draw=function(r,p,g){};z.drawMany=function(r,p,g){for(const l of p)l.visible&&this.draw(r,l,g)};return d._createClass(a)}()})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLCircle":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),
function(d,a,z,r,p,g,l,e){l=function(c){function h(){var b=k.apply(this,arguments);b._programOptions={id:!1};return b}a._inherits(h,c);var k=a._createSuper(h);c=h.prototype;c.dispose=function(){};c.drawMany=function(b,f){const {context:n,displayLevel:q,requiredLevel:u,state:v,drawPhase:C,painter:y,spriteMosaic:D,styleLayerUID:E,requestRender:A,allowDelayedRender:G}=b;if(f.some(O=>O.layerData.get(E)?.circleIndexCount??!1)){b=b.styleLayer;var w=b.circleMaterial,I=y.vectorTilesMaterialManager,K=b.getPaintValue("circle-translate",
q),Q=b.getPaintValue("circle-translate-anchor",q),L=C===p.WGLDrawPhase.HITTEST,S=this._programOptions;S.id=L;I=I.getMaterialProgram(n,w,S);if(G&&z.isSome(A)&&!I.compiled)A();else{n.useProgram(I);I.setUniformMatrix3fv("u_displayMat3",Q===r.TranslateAnchor.VIEWPORT?v.displayMat3:v.displayViewMat3);I.setUniform2fv("u_circleTranslation",K);I.setUniform1f("u_depth",b.z);I.setUniform1f("u_antialiasingWidth",1.2);K=-1;L&&(L=g.u32to4Xu8(E+1),I.setUniform4fv("u_id",L));for(const O of f)O.layerData.has(E)&&
(O.key.level!==K&&(K=O.key.level,w.setDataUniforms(I,q,b,K,D)),f=O.layerData.get(E),f.circleIndexCount&&(f.prepareForRendering(n),L=f.circleVertexArrayObject,z.isNone(L)||(n.bindVAO(L),I.setUniformMatrix3fv("u_dvsMat3",O.transforms.dvs),u!==O.key.level?n.setStencilFunction(e.CompareFunction.EQUAL,O.stencilRef,255):n.setStencilFunction(e.CompareFunction.GREATER,255,255),n.drawElements(e.PrimitiveType.TRIANGLES,f.circleIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*f.circleIndexStart),
O.triangleCount+=f.circleIndexCount/3)))}}};return a._createClass(h)}(l);d.WGLBrushVTLCircle=l;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLFill":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(d,a,z,r,p,g,l,e,c){const h=1/65536;e=function(k){function b(){var n=
f.apply(this,arguments);n._fillProgramOptions={id:!1,pattern:!1};n._outlineProgramOptions={id:!1};return n}a._inherits(b,k);var f=a._createSuper(b);k=b.prototype;k.dispose=function(){};k.drawMany=function(n,q){const {displayLevel:u,drawPhase:v,renderPass:C,spriteMosaic:y,styleLayerUID:D}=n;var E=!1;for(var A of q)if(A.layerData.has(D)){var G=A.layerData.get(D);if(0<G.fillIndexCount||0<G.outlineIndexCount){E=!0;break}}if(E){E=n.styleLayer;var w=E.getPaintProperty("fill-pattern");G=(A=void 0!==w)&&
w.isDataDriven;if(A&&!G){var I=w.getValue(u);I=y.getMosaicItemPosition(I,!0)}w=!A&&E.getPaintValue("fill-antialias",u);var K=!0,Q=1;if(!A){var L=E.getPaintProperty("fill-color"),S=E.getPaintProperty("fill-opacity");L?.isDataDriven||S?.isDataDriven||(Q=E.getPaintValue("fill-color",u),Q=E.getPaintValue("fill-opacity",u)*Q[3],1<=Q&&(K=!1))}if(!K||"opaque"!==C){var O;v===g.WGLDrawPhase.HITTEST&&(O=l.u32to4Xu8(D+1));L=E.getPaintValue("fill-translate",u);S=E.getPaintValue("fill-translate-anchor",u);(K||
"translucent"!==C)&&this._drawFill(n,D,E,q,L,S,A,I,G,O);I=!E.hasDataDrivenOutlineColor&&E.outlineUsesFillColor&&1>Q;w&&"opaque"!==C&&!I&&this._drawOutline(n,D,E,q,L,S,O)}}};k._drawFill=function(n,q,u,v,C,y,D,E,A,G){if(!D||A||!z.isNone(E)){var {context:w,displayLevel:I,state:K,drawPhase:Q,painter:L,pixelRatio:S,spriteMosaic:O,requestRender:P,allowDelayedRender:T}=n;n=u.fillMaterial;var N=L.vectorTilesMaterialManager,R=S>p.VTL_HIGH_RES_CUTOFF?2:1,J=Q===g.WGLDrawPhase.HITTEST,W=this._fillProgramOptions;
W.id=J;W.pattern=D;N=N.getMaterialProgram(w,n,W);if(T&&z.isSome(P)&&!N.compiled)P();else{w.useProgram(N);z.isSome(E)&&({page:E}=E,W=O.getPageSize(E),z.isSome(W)&&(O.bind(w,c.TextureSamplingMode.LINEAR,E,p.VTL_TEXTURE_BINDING_UNIT_SPRITES),N.setUniform2fv("u_mosaicSize",W),N.setUniform1i("u_texture",p.VTL_TEXTURE_BINDING_UNIT_SPRITES)));N.setUniformMatrix3fv("u_displayMat3",y===r.TranslateAnchor.VIEWPORT?K.displayMat3:K.displayViewMat3);N.setUniform2fv("u_fillTranslation",C);N.setUniform1f("u_depth",
u.z+h);J&&N.setUniform4fv("u_id",G);C=-1;for(const U of v)if(U.layerData.has(q)&&(U.key.level!==C&&(C=U.key.level,n.setDataUniforms(N,I,u,C,O)),v=U.layerData.get(q),v.fillIndexCount&&(v.prepareForRendering(w),y=v.fillVertexArrayObject,!z.isNone(y)))){w.bindVAO(y);N.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);w.setStencilFunction(c.CompareFunction.EQUAL,U.stencilRef,255);D&&N.setUniform1f("u_patternFactor",U.rangeX/(R*U.width*Math.max(2**(Math.round(I)-U.key.level),1)));if(A){y=v.patternMap;
if(!y)continue;for(const [Y,Z]of y)y=O.getPageSize(Y),z.isSome(y)&&(O.bind(w,c.TextureSamplingMode.LINEAR,Y,p.VTL_TEXTURE_BINDING_UNIT_SPRITES),N.setUniform2fv("u_mosaicSize",y),N.setUniform1i("u_texture",p.VTL_TEXTURE_BINDING_UNIT_SPRITES),w.drawElements(c.PrimitiveType.TRIANGLES,Z[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*Z[0]))}else w.drawElements(c.PrimitiveType.TRIANGLES,v.fillIndexCount,c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*v.fillIndexStart);U.triangleCount+=v.fillIndexCount/
3}}}};k._drawOutline=function(n,q,u,v,C,y,D){const {context:E,displayLevel:A,state:G,drawPhase:w,painter:I,pixelRatio:K,spriteMosaic:Q,requestRender:L,allowDelayedRender:S}=n;n=u.outlineMaterial;var O=I.vectorTilesMaterialManager;const P=.75/K,T=w===g.WGLDrawPhase.HITTEST,N=this._outlineProgramOptions;N.id=T;O=O.getMaterialProgram(E,n,N);if(S&&z.isSome(L)&&!O.compiled)L();else{E.useProgram(O);O.setUniformMatrix3fv("u_displayMat3",y===r.TranslateAnchor.VIEWPORT?G.displayMat3:G.displayViewMat3);O.setUniform2fv("u_fillTranslation",
C);O.setUniform1f("u_depth",u.z+h);O.setUniform1f("u_outline_width",P);T&&O.setUniform4fv("u_id",D);C=-1;for(const R of v)R.layerData.has(q)&&(R.key.level!==C&&(C=R.key.level,n.setDataUniforms(O,A,u,C,Q)),v=R.layerData.get(q),v.prepareForRendering(E),v.outlineIndexCount&&(y=v.outlineVertexArrayObject,z.isNone(y)||(E.bindVAO(y),O.setUniformMatrix3fv("u_dvsMat3",R.transforms.dvs),E.setStencilFunction(c.CompareFunction.EQUAL,R.stencilRef,255),E.drawElements(c.PrimitiveType.TRIANGLES,v.outlineIndexCount,
c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*v.outlineIndexStart),R.triangleCount+=v.outlineIndexCount/3)))}};return a._createClass(b)}(e);d.WGLBrushVTLFill=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLLine":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),
function(d,a,z,r,p,g,l,e,c){e=function(h){function k(){var f=b.apply(this,arguments);f._programOptions={id:!1,pattern:!1,sdf:!1};return f}a._inherits(k,h);var b=a._createSuper(k);h=k.prototype;h.dispose=function(){};h.drawMany=function(f,n){const {context:q,displayLevel:u,state:v,drawPhase:C,painter:y,pixelRatio:D,spriteMosaic:E,styleLayerUID:A,requestRender:G,allowDelayedRender:w}=f;if(n.some(U=>U.layerData.get(A)?.lineIndexCount??!1)){f=f.styleLayer;var I=f.lineMaterial,K=y.vectorTilesMaterialManager,
Q=f.getPaintValue("line-translate",u),L=f.getPaintValue("line-translate-anchor",u),S=f.getPaintProperty("line-pattern"),O=void 0!==S,P=O&&S.isDataDriven;if(O&&!P){S=S.getValue(u);var T=E.getMosaicItemPosition(S)}var N;S=!1;if(!O){var R=f.getPaintProperty("line-dasharray");S=(N=void 0!==R)&&R.isDataDriven;N&&!S&&(T=R.getValue(u),T=f.getDashKey(T,f.getLayoutValue("line-cap",u)),T=E.getMosaicItemPosition(T))}R=1/D;var J=C===g.WGLDrawPhase.HITTEST,W=this._programOptions;W.id=J;W.pattern=O;W.sdf=N;N=K.getMaterialProgram(q,
I,W);if(w&&z.isSome(G)&&!N.compiled)G();else{q.useProgram(N);N.setUniformMatrix3fv("u_displayViewMat3",v.displayViewMat3);N.setUniformMatrix3fv("u_displayMat3",L===r.TranslateAnchor.VIEWPORT?v.displayMat3:v.displayViewMat3);N.setUniform2fv("u_lineTranslation",Q);N.setUniform1f("u_depth",f.z);N.setUniform1f("u_antialiasing",R);J&&(Q=l.u32to4Xu8(A+1),N.setUniform4fv("u_id",Q));T&&z.isSome(T)&&({page:Q}=T,L=E.getPageSize(Q),z.isSome(L)&&(E.bind(q,c.TextureSamplingMode.LINEAR,Q,p.VTL_TEXTURE_BINDING_UNIT_SPRITES),
N.setUniform2fv("u_mosaicSize",L),N.setUniform1i("u_texture",p.VTL_TEXTURE_BINDING_UNIT_SPRITES)));Q=-1;for(const U of n)if(U.layerData.has(A)&&(U.key.level!==Q&&(Q=U.key.level,I.setDataUniforms(N,u,f,Q,E)),N.setUniform1f("u_zoomFactor",2**(u-Q)/D),n=U.layerData.get(A),n.lineIndexCount&&(n.prepareForRendering(q),L=n.lineVertexArrayObject,!z.isNone(L)))){q.bindVAO(L);N.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);q.setStencilFunction(c.CompareFunction.EQUAL,U.stencilRef,255);if(P||S){L=n.patternMap;
if(!L)continue;for(const [Y,Z]of L)L=E.getPageSize(Y),z.isSome(L)&&(E.bind(q,c.TextureSamplingMode.LINEAR,Y,p.VTL_TEXTURE_BINDING_UNIT_SPRITES),N.setUniform2fv("u_mosaicSize",L),N.setUniform1i("u_texture",p.VTL_TEXTURE_BINDING_UNIT_SPRITES),q.drawElements(c.PrimitiveType.TRIANGLES,Z[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*Z[0]))}else q.drawElements(c.PrimitiveType.TRIANGLES,n.lineIndexCount,c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n.lineIndexStart);U.triangleCount+=n.lineIndexCount/
3}}}};return a._createClass(k)}(e);d.WGLBrushVTLLine=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec2f32 ../../vectorTiles/decluttering/config ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../GeometryUtils ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(d,a,z,r,p,g,
l,e,c,h,k,b){const f=1/65536;k=function(n){function q(){var v=u.apply(this,arguments);v._iconProgramOptions={id:!1,sdf:!1};v._sdfProgramOptions={id:!1};v._spritesTextureSize=r.create();return v}a._inherits(q,n);var u=a._createSuper(q);n=q.prototype;n.dispose=function(){};n.drawMany=function(v,C){const {drawPhase:y,styleLayerUID:D}=v,E=v.styleLayer;let A;y===e.WGLDrawPhase.HITTEST&&(A=h.u32to4Xu8(D+1));this._drawIcons(v,E,C,A);this._drawText(v,E,C,A)};n._drawIcons=function(v,C,y,D){const {context:E,
displayLevel:A,drawPhase:G,painter:w,spriteMosaic:I,state:K,styleLayerUID:Q,requestRender:L,allowDelayedRender:S}=v,O=C.iconMaterial;var P=w.vectorTilesMaterialManager,T=!1;for(var N of y)if(N.layerData.has(Q)){var R=N.layerData.get(Q);if(0<R.iconPerPageElementsMap.size){T=!0;break}}if(T){T=C.getPaintValue("icon-translate",A);N=C.getPaintValue("icon-translate-anchor",A);var J=C.getLayoutValue("icon-rotation-alignment",A);J===g.RotationAlignment.AUTO&&(J=C.getLayoutValue("symbol-placement",A)===g.SymbolPlacement.POINT?
g.RotationAlignment.VIEWPORT:g.RotationAlignment.MAP);var W=J===g.RotationAlignment.MAP;W=C.getLayoutValue("icon-keep-upright",A)&&W;var U=R.isIconSDF;R=G===e.WGLDrawPhase.HITTEST;var Y=this._iconProgramOptions;Y.id=R;Y.sdf=U;P=P.getMaterialProgram(E,O,Y);if(S&&z.isSome(L)&&!P.compiled)L();else{E.useProgram(P);P.setUniformMatrix3fv("u_displayViewMat3",J===g.RotationAlignment.MAP?K.displayViewMat3:K.displayMat3);P.setUniformMatrix3fv("u_displayMat3",N===g.TranslateAnchor.VIEWPORT?K.displayMat3:K.displayViewMat3);
P.setUniform2fv("u_iconTranslation",T);P.setUniform1f("u_depth",C.z);P.setUniform1f("u_mapRotation",c.degToByte(K.rotation));P.setUniform1f("u_keepUpright",W?1:0);P.setUniform1f("u_level",10*A);P.setUniform1i("u_texture",l.VTL_TEXTURE_BINDING_UNIT_SPRITES);P.setUniform1f("u_fadeDuration",p.FADE_DURATION/1E3);R&&P.setUniform4fv("u_id",D);D=-1;for(const Z of y)if(Z.layerData.has(Q)&&(Z.key.level!==D&&(D=Z.key.level,O.setDataUniforms(P,A,C,D,I)),R=Z.layerData.get(Q),0!==R.iconPerPageElementsMap.size&&
(R.prepareForRendering(E),R.updateOpacityInfo(),y=R.iconVertexArrayObject,!z.isNone(y)))){E.bindVAO(y);P.setUniformMatrix3fv("u_dvsMat3",Z.transforms.dvs);P.setUniform1f("u_time",(performance.now()-R.lastOpacityUpdate)/1E3);for(const [ea,ba]of R.iconPerPageElementsMap)this._renderIconRange(v,P,ba,ea,Z)}}}};n._renderIconRange=function(v,C,y,D,E){const {context:A,spriteMosaic:G}=v;this._spritesTextureSize[0]=G.getWidth(D)/4;this._spritesTextureSize[1]=G.getHeight(D)/4;C.setUniform2fv("u_mosaicSize",
this._spritesTextureSize);G.bind(A,b.TextureSamplingMode.LINEAR,D,l.VTL_TEXTURE_BINDING_UNIT_SPRITES);A.setStencilTestEnabled(!0);A.setStencilFunction(b.CompareFunction.GREATER,255,255);A.setStencilWriteMask(0);A.drawElements(b.PrimitiveType.TRIANGLES,y[1],b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*y[0]);E.triangleCount+=y[1]/3};n._drawText=function(v,C,y,D){const {context:E,displayLevel:A,drawPhase:G,glyphMosaic:w,painter:I,pixelRatio:K,spriteMosaic:Q,state:L,styleLayerUID:S,requestRender:O,
allowDelayedRender:P}=v;v=C.textMaterial;const T=I.vectorTilesMaterialManager;var N=!1;for(var R of y)if(R.layerData.has(S)){var J=R.layerData.get(S);if(0<J.glyphPerPageElementsMap.size){N=!0;break}}if(N&&(J=C.getPaintProperty("text-opacity"),!J||J.isDataDriven||0!==J.getValue(A))){J=C.getPaintProperty("text-color");var W=!J||J.isDataDriven||0<J.getValue(A)[3];J=C.getPaintProperty("text-halo-width");R=C.getPaintProperty("text-halo-color");var U=(!J||J.isDataDriven||0<J.getValue(A))&&(!R||R.isDataDriven||
0<R.getValue(A)[3]);if(W||U){J=C.getLayoutValue("text-rotation-alignment",A);J===g.RotationAlignment.AUTO&&(J=C.getLayoutValue("symbol-placement",A)===g.SymbolPlacement.POINT?g.RotationAlignment.VIEWPORT:g.RotationAlignment.MAP);R=J===g.RotationAlignment.MAP;R=C.getLayoutValue("text-keep-upright",A)&&R;N=G===e.WGLDrawPhase.HITTEST;var Y=.8*3/K;this._glyphTextureSize||(this._glyphTextureSize=r.fromValues(w.width/4,w.height/4));var Z=C.getPaintValue("text-translate",A),ea=C.getPaintValue("text-translate-anchor",
A),ba=this._sdfProgramOptions;ba.id=N;var aa=T.getMaterialProgram(E,v,ba);if(P&&z.isSome(O)&&!aa.compiled)O();else{E.useProgram(aa);aa.setUniformMatrix3fv("u_displayViewMat3",J===g.RotationAlignment.MAP?L.displayViewMat3:L.displayMat3);aa.setUniformMatrix3fv("u_displayMat3",ea===g.TranslateAnchor.VIEWPORT?L.displayMat3:L.displayViewMat3);aa.setUniform2fv("u_textTranslation",Z);aa.setUniform1f("u_depth",C.z+f);aa.setUniform2fv("u_mosaicSize",this._glyphTextureSize);aa.setUniform1f("u_mapRotation",
c.degToByte(L.rotation));aa.setUniform1f("u_keepUpright",R?1:0);aa.setUniform1f("u_level",10*A);aa.setUniform1i("u_texture",l.VTL_TEXTURE_BINDING_UNIT_GLYPHS);aa.setUniform1f("u_antialiasingWidth",Y);aa.setUniform1f("u_fadeDuration",p.FADE_DURATION/1E3);N&&aa.setUniform4fv("u_id",D);D=-1;for(const fa of y)fa.layerData.has(S)&&(fa.key.level!==D&&(D=fa.key.level,v.setDataUniforms(aa,A,C,D,Q)),J=fa.layerData.get(S),0!==J.glyphPerPageElementsMap.size&&(J.prepareForRendering(E),J.updateOpacityInfo(),y=
J.textVertexArrayObject,z.isNone(y)||(E.bindVAO(y),aa.setUniformMatrix3fv("u_dvsMat3",fa.transforms.dvs),E.setStencilTestEnabled(!0),E.setStencilFunction(b.CompareFunction.GREATER,255,255),E.setStencilWriteMask(0),y=(performance.now()-J.lastOpacityUpdate)/1E3,aa.setUniform1f("u_time",y),J.glyphPerPageElementsMap.forEach((ka,la)=>{this._renderGlyphRange(E,ka,la,w,aa,U,W,fa)}))))}}}};n._renderGlyphRange=function(v,C,y,D,E,A,G,w){D.bind(v,b.TextureSamplingMode.LINEAR,y,l.VTL_TEXTURE_BINDING_UNIT_GLYPHS);
A&&(E.setUniform1f("u_halo",1),v.drawElements(b.PrimitiveType.TRIANGLES,C[1],b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*C[0]),w.triangleCount+=C[1]/3);G&&(E.setUniform1f("u_halo",0),v.drawElements(b.PrimitiveType.TRIANGLES,C[1],b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*C[0]),w.triangleCount+=C[1]/3)};return a._createClass(q)}(k);d.WGLBrushVTLSymbol=k;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["exports"],
function(d){function a(g,l){g%=l;return 0<=g?g:g+l}const z=128/Math.PI,r=256/360,p=1/Math.LN2;d.between=function(g,l,e){return g>=l&&g<=e||g>=e&&g<=l};d.degToByte=function(g){return a(g*r,256)};d.interpolate=function(g,l,e){return g*(1-e)+l*e};d.log2=function(g){return Math.log(g)*p};d.positiveMod=a;d.radToByte=function(g){return a(g*z,256)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterialManager":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers",
"../enums","./Programs"],function(d,a,z){return function(){function r(){this._programByKey=new Map}var p=r.prototype;p.dispose=function(){this._programByKey.forEach(g=>g.dispose());this._programByKey.clear()};p.getMaterialProgram=function(g,l,e){const c=l.key<<3|this._getMaterialOptionsValue(l.type,e);if(this._programByKey.has(c))return this._programByKey.get(c);var h=this._getProgramTemplate(l.type);({shaders:h}=h);const {vertexShader:k,fragmentShader:b}=h(e);e=l.getShaderHeader();h=l.getShaderMain();
e=k.replace("#pragma header",e).replace("#pragma main",h);g=g.programCache.acquire(e,b,l.getAttributeLocations());this._programByKey.set(c,g);return g};p._getMaterialOptionsValue=function(g,l){switch(g){case a.ShaderProgramType.BACKGROUND:return(l.pattern?1:0)<<1|(l.id?1:0);case a.ShaderProgramType.FILL:return(l.pattern?1:0)<<1|(l.id?1:0);case a.ShaderProgramType.OUTLINE:return l.id?1:0;case a.ShaderProgramType.LINE:return(l.sdf?1:0)<<2|(l.pattern?1:0)<<1|(l.id?1:0);case a.ShaderProgramType.ICON:return(l.sdf?
1:0)<<1|(l.id?1:0);case a.ShaderProgramType.CIRCLE:return l.id?1:0;case a.ShaderProgramType.TEXT:return l.id?1:0;default:return 0}};p._getProgramTemplate=function(g){switch(g){case a.ShaderProgramType.BACKGROUND:return z.background;case a.ShaderProgramType.CIRCLE:return z.circle;case a.ShaderProgramType.FILL:return z.fill;case a.ShaderProgramType.ICON:return z.icon;case a.ShaderProgramType.LINE:return z.line;case a.ShaderProgramType.OUTLINE:return z.outline;case a.ShaderProgramType.TEXT:return z.text;
default:return null}};return d._createClass(r)}()})},"esri/views/2d/engine/vectorTiles/shaders/Programs":function(){define(["exports","./sources/resolver","../../../../webgl/programUtils"],function(d,a,z){d.background={shaders:r=>({vertexShader:z.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+a.resolveIncludes("background/background.vert"),fragmentShader:z.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+a.resolveIncludes("background/background.frag")})};d.circle={shaders:r=>({vertexShader:z.glslifyDefineMap({ID:r.id})+
a.resolveIncludes("circle/circle.vert"),fragmentShader:z.glslifyDefineMap({ID:r.id})+a.resolveIncludes("circle/circle.frag")})};d.fill={shaders:r=>({vertexShader:z.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+a.resolveIncludes("fill/fill.vert"),fragmentShader:z.glslifyDefineMap({ID:r.id,PATTERN:r.pattern})+a.resolveIncludes("fill/fill.frag")})};d.icon={shaders:r=>({vertexShader:z.glslifyDefineMap({ID:r.id,SDF:r.sdf})+a.resolveIncludes("icon/icon.vert"),fragmentShader:z.glslifyDefineMap({ID:r.id,
SDF:r.sdf})+a.resolveIncludes("icon/icon.frag")})};d.line={shaders:r=>({vertexShader:z.glslifyDefineMap({ID:r.id,PATTERN:r.pattern,SDF:r.sdf})+a.resolveIncludes("line/line.vert"),fragmentShader:z.glslifyDefineMap({ID:r.id,PATTERN:r.pattern,SDF:r.sdf})+a.resolveIncludes("line/line.frag")})};d.outline={shaders:r=>({vertexShader:z.glslifyDefineMap({ID:r.id})+a.resolveIncludes("outline/outline.vert"),fragmentShader:z.glslifyDefineMap({ID:r.id})+a.resolveIncludes("outline/outline.frag")})};d.text={shaders:r=>
({vertexShader:z.glslifyDefineMap({ID:r.id})+a.resolveIncludes("text/text.vert"),fragmentShader:z.glslifyDefineMap({ID:r.id})+a.resolveIncludes("text/text.frag")})};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/resolver":function(){define(["exports","./shaderRepository","../../../../../webgl/ShaderCompiler"],function(d,a,z){const r=new z.ShaderCompiler(function(p){let g=a;p.split("/").forEach(l=>{g&&(g=g[l])});return g});d.resolveIncludes=
function(p){return r.resolveIncludes(p)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/shaderRepository":function(){define(function(){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d u_opacity * color;\n#else\ngl_FragColor \x3d u_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"background.vert":"precision mediump float;\nattribute vec2 a_pos;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position \x3d vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d u_tlbr / u_mosaicSize.xyxy;\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float dist \x3d length(v_offset);\nmediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_stroke_color \x3d stroke_color * stroke_opacity;\nv_stroke_width \x3d stroke_width;\nv_radius \x3d radius;\nv_blur \x3d max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset \x3d offset;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d fract(v_tileTextureCoord);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d v_color[3] * color;\n#else\ngl_FragColor \x3d v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include \x3cutil/util.glsl\x3e\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n#ifdef PATTERN\nfloat patternWidth \x3d nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight \x3d nextPOT(tlbr.w - tlbr.y);\nfloat scaleX \x3d 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY \x3d 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat \x3d mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord \x3d (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\n#include \x3cutil/encoding.glsl\x3e\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor \x3d v_color;\nfloat d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio \x3d 0.248062016;\nfloat size \x3d max(v_size.x, v_size.y);\nfloat dist \x3d d * softEdgeRatio * size;\nfillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width \x3e 0.25) {\nlowp vec4 outlinePixelColor \x3d u_outlineColor;\nconst float outlineLimitRatio \x3d (16.0 / 86.0);\nfloat clampedOutlineSize \x3d softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor \x3d v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor \x3d v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor \x3d texture2D(u_texture, v_tex);\ngl_FragColor \x3d v_opacity * texColor;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float tileCoordRatio \x3d 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color \x3d color;\nv_opacity \x3d opacity;\n#ifdef SDF\nv_halo_width \x3d halo_width;\n#endif\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *\x3d interpolatedOpacity;\nmediump float a_angle         \x3d a_levelInfo[1];\nmediump float a_minLevel      \x3d a_levelInfo[2];\nmediump float a_maxLevel      \x3d a_levelInfo[3];\nmediump vec2 a_tex            \x3d a_texAngleRange.xy;\nmediump float delta_z \x3d 0.0;\nmediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_opacity, 0.0);\nvec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\nv_size \x3d abs(offset);\n#ifdef SDF\noffset \x3d (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_tex \x3d a_tex.xy / u_mosaicSize;\n}"},
line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include \x3cutil/encoding.glsl\x3e\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\nlowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX \x3d fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color \x3d texture2D(u_texture, texCoord);\ngl_FragColor \x3d alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX \x3d fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist \x3d d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor \x3d alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor \x3d alpha * v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale \x3d 1.0 / 31.0;\nconst mediump float tileCoordRatio \x3d 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth \x3d 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_blur \x3d blur + u_antialiasing;\nv_normal \x3d a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          \x3d tlbr / u_mosaicSize.xyxy;\nv_patternSize   \x3d vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio \x3d width / v_patternSize.y;\n#else\nv_widthRatio \x3d width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth \x3d (width + u_antialiasing) * 0.5;\nmediump vec2 dir \x3d a_dir_normal.xy * scale;\nmediump vec2 offset_ \x3d a_extrude_offset.zw * scale * offset;\nmediump vec2 dist \x3d v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance \x3d a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d abs(v_normal.y);\nlowp float alpha \x3d smoothstep(1.0, 0.0, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale \x3d 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_normal \x3d a_xnormal;\nmediump vec2 dist \x3d u_outline_width * scale * a_offset;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d texture2D(u_texture, v_tex).a;\nmediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision \x3d 1.0 / 8.0;\nconst mediump float edgePos \x3d 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale \x3d 1.0 / 24.0;\nconst float sdfPixel \x3d 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo \x3e 0.5)\n{\nv_color \x3d halo_color * opacity;\nhalo_width *\x3d sdfPixel;\nhalo_blur *\x3d sdfPixel;\n}\nelse\n{\nv_color \x3d color * opacity;\nhalo_width \x3d 0.0;\nhalo_blur \x3d 0.0;\n}\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *\x3d interpolatedOpacity;\nmediump float a_angle       \x3d a_levelInfo[1];\nmediump float a_minLevel    \x3d a_levelInfo[2];\nmediump float a_maxLevel    \x3d a_levelInfo[3];\nmediump vec2 a_tex          \x3d a_texAngleRange.xy;\nmediump float a_visMinAngle    \x3d a_texAngleRange.z;\nmediump float a_visMaxAngle    \x3d a_texAngleRange.w;\nmediump float delta_z \x3d 0.0;\nmediump float angle \x3d mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle \x3c a_visMaxAngle)\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_color[3], 0.0);\nv_tex \x3d a_tex.xy / u_mosaicSize;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_edgeDistance \x3d edgePos - halo_width / size;\nv_edgeWidth \x3d (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},
util:{"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(d,a){let z=function(){function r(g){this._readFile=
g}var p=r.prototype;p.resolveIncludes=function(g){return this._resolve(g)};p._resolve=function(g,l=new Map){if(l.has(g))return l.get(g);const e=this._read(g);if(!e)throw Error(`cannot find shader file ${g}`);const c=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let h=c.exec(e);const k=[];for(;null!=h;)k.push({path:h[1],start:h.index,length:h[0].length}),h=c.exec(e);let b=0,f="";k.forEach(n=>{f+=e.slice(b,n.start);f+=l.has(n.path)?"":this._resolve(n.path,l);b=n.start+n.length});f+=e.slice(b);l.set(g,f);
return f};p._read=function(g){return this._readFile(g)};return a._createClass(r)}();d.ShaderCompiler=z;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(d){d.glslifyDefineMap=function(a){let z="";for(const p in a){var r=a[p];if("boolean"===typeof r)r&&(z+=`#define ${p}\n`);else if("number"===typeof r)z+=`#define ${p} ${r.toFixed()}\n`;else if("object"===typeof r){const {options:g,value:l}=r;if("number"===typeof g[l]){const {value:e,
options:c,namespace:h}=r;r=h?`${h}_`:"";for(const k in c)z+=`#define ${r}${k} ${c[k].toFixed()}\n`;z+=`#define ${p} ${r}${e}\n`}else{const e=r.options;let c=0;for(const h in e)z+=`#define ${e[h]} ${(c++).toFixed()}\n`;z+=`#define ${p} ${e[r.value]}\n`}}}return z};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","./StyleDefinition","./StyleLayer"],function(d,
a,z){return function(){function r(g){this._style=g;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;g.layers||(g.layers=[]);this.version=parseFloat(g.version);if(this.layers=g.layers.map((l,e,c)=>this._create(l,e,c)).filter(l=>!!l))for(let l=0;l<this.layers.length;l++)g=this.layers[l],this._layerByName[g.id]=g,this._uidToLayer.set(g.uid,g),g.type===a.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(g.id);this._identifyRefLayers()}var p=r.prototype;
p.isPainterDataDriven=function(g){return(g=this._layerByName[g])?g.isPainterDataDriven():!1};p.getStyleLayerId=function(g){return g>=this.layers.length?null:this.layers[g].id};p.getStyleLayerByUID=function(g){return this._uidToLayer.get(g)??null};p.getStyleLayerIndex=function(g){return(g=this._layerByName[g])?this.layers.indexOf(g):-1};p.setStyleLayer=function(g,l){if(g&&g.id){var e=this._style;null!=l&&l>=this.layers.length&&(l=this.layers.length-1);var c=!0,h;if(h=this._layerByName[g.id]){const k=
this.layers.indexOf(h);l||(l=k);l===k?(c=!1,h=r._recreateLayer(g,h),this.layers[l]=h,e.layers[l]=g):(this.layers.splice(k,1),e.layers.splice(k,1),h=this._create(g,l,this.layers),this.layers.splice(l,0,h),e.layers.splice(l,0,g))}else h=this._create(g,l,this.layers),!l||l>=this.layers.length?(this.layers.push(h),e.layers.push(g)):(this.layers.splice(l,0,h),e.layers.splice(l,0,g));this._layerByName[g.id]=h;this._uidToLayer.set(h.uid,h);c&&this._recomputeZValues();this._identifyRefLayers()}};p.getStyleLayer=
function(g){return(g=this._layerByName[g])?{type:g.typeName,id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,filter:g.filter,layout:g.layout,paint:g.paint}:null};p.deleteStyleLayer=function(g){const l=this._layerByName[g];l&&(delete this._layerByName[g],this._uidToLayer.delete(l.uid),g=this.layers.indexOf(l),this.layers.splice(g,1),this._style.layers.splice(g,1),this._recomputeZValues(),this._identifyRefLayers())};p.getLayerById=function(g){return this._layerByName[g]};
p.getLayoutProperties=function(g){return(g=this._layerByName[g])?g.layout:null};p.getPaintProperties=function(g){return(g=this._layerByName[g])?g.paint:null};p.setPaintProperties=function(g,l){if(g=this._layerByName[g]){var e=r._recreateLayer({type:g.typeName,id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,filter:g.filter,layout:g.layout,paint:l},g),c=this.layers.indexOf(g);this.layers[c]=e;this._style.layers[c].paint=l;this._layerByName[g.id]=e;this._uidToLayer.set(g.uid,
e)}};p.setLayoutProperties=function(g,l){if(g=this._layerByName[g]){var e=r._recreateLayer({type:g.typeName,id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,filter:g.filter,layout:l,paint:g.paint},g),c=this.layers.indexOf(g);this.layers[c]=e;this._style.layers[c].layout=l;this._layerByName[g.id]=e;this._uidToLayer.set(g.uid,e)}};p.setStyleLayerVisibility=function(g,l){if(g=this._layerByName[g]){var e=g.layout||{};e.visibility=l;l=r._recreateLayer({type:g.typeName,
id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,filter:g.filter,layout:e,paint:g.paint},g);var c=this.layers.indexOf(g);this.layers[c]=l;this._style.layers[c].layout=e;this._layerByName[g.id]=l;this._uidToLayer.set(g.uid,l)}};p.getStyleLayerVisibility=function(g){return(g=this._layerByName[g])?g.layout?.visibility??"visible":"none"};p._recomputeZValues=function(){const g=this.layers,l=1/(g.length+1);for(let e=0;e<g.length;e++)g[e].z=1-(1+e)*l};p._identifyRefLayers=
function(){const g=[],l=[];let e=0;for(const k of this.layers){const b=k.layout;if(k.type===a.StyleLayerType.FILL){var c=k,h=k.source+"|"+k.sourceLayer;h+="|"+(b?.visibility??"");h+="|"+k.minzoom;h+="|"+k.maxzoom;h+="|"+JSON.stringify(k.filter);if(c.hasDataDrivenFill||c.hasDataDrivenOutline)h+="|"+e;g.push({key:h,layer:k})}else if(k.type===a.StyleLayerType.LINE){c=k;h=k.paint;h=null!=h&&(null!=h["line-pattern"]||null!=h["line-dasharray"]);let f=k.source+"|"+k.sourceLayer;f+="|"+(b?.visibility??"");
f+="|"+k.minzoom;f+="|"+k.maxzoom;f+="|"+JSON.stringify(k.filter);f+="|"+(void 0!==b?b["line-cap"]:"");f+="|"+(void 0!==b?b["line-join"]:"");if(c.hasDataDrivenLine||h)f+="|"+e;l.push({key:f,layer:k})}++e}this._assignRefLayers(g);this._assignRefLayers(l)};p._assignRefLayers=function(g){g.sort((b,f)=>b.key<f.key?-1:b.key>f.key?1:0);let l,e;const c=g.length;for(let b=0;b<c;b++){const f=g[b];if(f.key===l)f.layer.refLayerId=e;else if(l=f.key,e=f.layer.id,f.layer.type===a.StyleLayerType.FILL){if(!f.layer.getPaintProperty("fill-outline-color"))for(var h=
b+1;h<c;h++){var k=g[h];if(k.key===l){if(k.layer.getPaintProperty("fill-outline-color")){g[b]=k;g[h]=f;e=k.layer.id;break}}else break}}else if(f.layer.type===a.StyleLayerType.LINE)for(h=f.layer,k=b+1;k<c;k++){const n=g[k];if(n.key!==l)break;const q=n.layer;if(h.canUseThinTessellation&&!q.canUseThinTessellation||!h.canUseThinTessellation&&(q.getPaintProperty("line-pattern")||q.getPaintProperty("line-dasharray")))h=q,g[b]=n,g[k]=f,e=n.layer.id}}};p._create=function(g,l,e){l=1-1/(e.length+1)*(1+l);e=
this._runningId++;switch(g.type){case "background":return new z.BackgroundStyleLayer(a.StyleLayerType.BACKGROUND,g,l,e);case "fill":return new z.FillStyleLayer(a.StyleLayerType.FILL,g,l,e);case "line":return new z.LineStyleLayer(a.StyleLayerType.LINE,g,l,e);case "symbol":return new z.SymbolStyleLayer(a.StyleLayerType.SYMBOL,g,l,e);case "raster":console.warn(`Unsupported vector tile raster layer ${g.id}`);break;case "circle":return new z.CircleStyleLayer(a.StyleLayerType.CIRCLE,g,l,e)}return null};
r._recreateLayer=function(g,l){switch(g.type){case "background":return new z.BackgroundStyleLayer(a.StyleLayerType.BACKGROUND,g,l.z,l.uid);case "fill":return new z.FillStyleLayer(a.StyleLayerType.FILL,g,l.z,l.uid);case "line":return new z.LineStyleLayer(a.StyleLayerType.LINE,g,l.z,l.uid);case "symbol":return new z.SymbolStyleLayer(a.StyleLayerType.SYMBOL,g,l.z,l.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${g.id}`);break;case "circle":return new z.CircleStyleLayer(a.StyleLayerType.CIRCLE,
g,l.z,l.uid)}return null};return d._createClass(r)}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(d,a,z,r,p,g,l,e,c,h,k,b){d.CapType=void 0;(function(E){E[E.BUTT=0]="BUTT";E[E.ROUND=
1]="ROUND";E[E.SQUARE=2]="SQUARE";E[E.UNKNOWN=4]="UNKNOWN"})(d.CapType||(d.CapType={}));let f=function(){function E(G,w,I,K){this.type=G;this.typeName=w.type;this.id=w.id;this.source=w.source;this.sourceLayer=w["source-layer"];this.minzoom=w.minzoom;this.maxzoom=w.maxzoom;this.filter=w.filter;this.layout=w.layout;this.paint=w.paint;this.z=I;this.uid=K;switch(G){case h.StyleLayerType.BACKGROUND:this._layoutDefinition=h.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=h.StyleDefinition.backgroundPaintDefinition;
break;case h.StyleLayerType.FILL:this._layoutDefinition=h.StyleDefinition.fillLayoutDefinition;this._paintDefinition=h.StyleDefinition.fillPaintDefinition;break;case h.StyleLayerType.LINE:this._layoutDefinition=h.StyleDefinition.lineLayoutDefinition;this._paintDefinition=h.StyleDefinition.linePaintDefinition;break;case h.StyleLayerType.SYMBOL:this._layoutDefinition=h.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=h.StyleDefinition.symbolPaintDefinition;break;case h.StyleLayerType.CIRCLE:this._layoutDefinition=
h.StyleDefinition.circleLayoutDefinition,this._paintDefinition=h.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var A=E.prototype;A.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=c.createFilter(this.filter)};A.getLayoutProperty=function(G){return this._layoutProperties[G]};A.getPaintProperty=function(G){return this._paintProperties[G]};A.getLayoutValue=
function(G,w,I){let K;const Q=this._layoutProperties[G];Q&&(K=Q.getValue(w,I));void 0===K&&(K=this._layoutDefinition[G]["default"]);return K};A.getPaintValue=function(G,w,I){let K;const Q=this._paintProperties[G];Q&&(K=Q.getValue(w,I));void 0===K&&(K=this._paintDefinition[G]["default"]);return K};A.isPainterDataDriven=function(){const G=this._paintProperties;if(G)for(const w in G)if(G[w].isDataDriven)return!0;return!1};A._parseLayout=function(G){const w={};for(const I in G){const K=this._layoutDefinition[I];
K&&(w[I]=new k(K,G[I]))}return w};A._parsePaint=function(G){const w={};for(const I in G){const K=this._paintDefinition[I];K&&(w[I]=new k(K,G[I]))}return w};A.computeAttributesKey=function(G,w,I,K){let Q=0,L=0;for(const S of w){w=3;if(!S||S!==K){const {isLayout:O,isOptional:P}=I[S];w=O?this.getLayoutProperty(S):this.getPaintProperty(S);w=w?.interpolator?2:w?.isDataDriven?1:P&&!w?3:0}L|=w<<Q;Q+=2}return L<<3|G};return a._createClass(E)}(),n=function(E){function A(w,I,K,Q){w=G.call(this,w,I,K,Q);w.backgroundMaterial=
new r.VTLBackgroundMaterial(w.computeAttributesKey(z.ShaderProgramType.BACKGROUND,r.VTLBackgroundMaterial.ATTRIBUTES,r.VTLBackgroundMaterial.ATTRIBUTES_INFO));return w}a._inherits(A,E);var G=a._createSuper(A);return a._createClass(A)}(f),q=function(E){function A(w,I,K,Q){w=G.call(this,w,I,K,Q);I=w.getPaintProperty("fill-color");K=w.getPaintProperty("fill-opacity");Q=w.getPaintProperty("fill-pattern");w.hasDataDrivenColor=I?.isDataDriven;w.hasDataDrivenOpacity=K?.isDataDriven;w.hasDataDrivenFill=w.hasDataDrivenColor||
w.hasDataDrivenOpacity||Q?.isDataDriven;K=w.getPaintProperty("fill-outline-color");w.outlineUsesFillColor=!K;w.hasDataDrivenOutlineColor=K?.isDataDriven;w.hasDataDrivenOutline=K?K.isDataDriven:I?I.isDataDriven:!1;w.hasDataDrivenOutline=(K?w.hasDataDrivenOutlineColor:w.hasDataDrivenColor)||w.hasDataDrivenOpacity;w.fillMaterial=new g.VTLFillMaterial(w.computeAttributesKey(z.ShaderProgramType.FILL,g.VTLFillMaterial.ATTRIBUTES,g.VTLFillMaterial.ATTRIBUTES_INFO));w.outlineMaterial=new g.VTLOutlineMaterial(w.computeAttributesKey(z.ShaderProgramType.OUTLINE,
w.outlineUsesFillColor?g.VTLOutlineMaterial.ATTRIBUTES_FILL:g.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,w.outlineUsesFillColor?g.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:g.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),w.outlineUsesFillColor);return w}a._inherits(A,E);var G=a._createSuper(A);return a._createClass(A)}(f),u=function(E){function A(w,I,K,Q){w=G.call(this,w,I,K,Q);I=w.getPaintProperty("line-pattern");w.lineMaterial=new l.VTLLineMaterial(w.computeAttributesKey(z.ShaderProgramType.LINE,l.VTLLineMaterial.ATTRIBUTES,
l.VTLLineMaterial.ATTRIBUTES_INFO,I?"line-dasharray":""));w.hasDataDrivenLine=w.getPaintProperty("line-blur")?.isDataDriven||w.getPaintProperty("line-color")?.isDataDriven||w.getPaintProperty("line-gap-width")?.isDataDriven||w.getPaintProperty("line-offset")?.isDataDriven||w.getPaintProperty("line-opacity")?.isDataDriven||w.getPaintProperty("line-pattern")?.isDataDriven||w.getPaintProperty("line-dasharray")?.isDataDriven||w.getLayoutProperty("line-cap")?.isDataDriven||w.getPaintProperty("line-width")?.isDataDriven;
w.canUseThinTessellation=!1;!w.hasDataDrivenLine&&(I=w.getPaintProperty("line-width"),!I||"number"===typeof I&&.5*I<b.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(I=w.getPaintProperty("line-offset"),!I||"number"===typeof I&&0===I)&&(w.canUseThinTessellation=!0);return w}a._inherits(A,E);var G=a._createSuper(A);A.prototype.getDashKey=function(w,I){switch(I){case d.CapType.BUTT:I="Butt";break;case d.CapType.ROUND:I="Round";break;case d.CapType.SQUARE:I="Square";break;default:I="Butt"}return`dasharray-[${w.toString()}]-${I}`};
return a._createClass(A)}(f),v=function(E){function A(w,I,K,Q){w=G.call(this,w,I,K,Q);w.iconMaterial=new e.VTLIconMaterial(w.computeAttributesKey(z.ShaderProgramType.ICON,e.VTLIconMaterial.ATTRIBUTES,e.VTLIconMaterial.ATTRIBUTES_INFO));w.textMaterial=new e.VTLTextMaterial(w.computeAttributesKey(z.ShaderProgramType.TEXT,e.VTLTextMaterial.ATTRIBUTES,e.VTLTextMaterial.ATTRIBUTES_INFO));w.hasDataDrivenIcon=w.getPaintProperty("icon-color")?.isDataDriven||w.getPaintProperty("icon-halo-blur")?.isDataDriven||
w.getPaintProperty("icon-halo-color")?.isDataDriven||w.getPaintProperty("icon-halo-width")?.isDataDriven||w.getPaintProperty("icon-opacity")?.isDataDriven||w.getLayoutProperty("icon-size")?.isDataDriven;w.hasDataDrivenText=w.getPaintProperty("text-color")?.isDataDriven||w.getPaintProperty("text-halo-blur")?.isDataDriven||w.getPaintProperty("text-halo-color")?.isDataDriven||w.getPaintProperty("text-halo-width")?.isDataDriven||w.getPaintProperty("text-opacity")?.isDataDriven||w.getLayoutProperty("text-size")?.isDataDriven;
return w}a._inherits(A,E);var G=a._createSuper(A);return a._createClass(A)}(f),C=function(E){function A(w,I,K,Q){w=G.call(this,w,I,K,Q);w.circleMaterial=new p.VTLCircleMaterial(w.computeAttributesKey(z.ShaderProgramType.CIRCLE,p.VTLCircleMaterial.ATTRIBUTES,p.VTLCircleMaterial.ATTRIBUTES_INFO));return w}a._inherits(A,E);var G=a._createSuper(A);return a._createClass(A)}(f),y=function(){function E(A,G,w){this.allowOverlap=A.getLayoutValue("icon-allow-overlap",G);this.ignorePlacement=A.getLayoutValue("icon-ignore-placement",
G);this.keepUpright=A.getLayoutValue("icon-keep-upright",G);this.optional=A.getLayoutValue("icon-optional",G);this.rotationAlignment=A.getLayoutValue("icon-rotation-alignment",G);this.rotationAlignment===h.RotationAlignment.AUTO&&(this.rotationAlignment=w?h.RotationAlignment.MAP:h.RotationAlignment.VIEWPORT);w=A.getLayoutProperty("icon-anchor");w?.isDataDriven?this._anchorProp=w:this.anchor=A.getLayoutValue("icon-anchor",G);w=A.getLayoutProperty("icon-offset");w?.isDataDriven?this._offsetProp=w:this.offset=
A.getLayoutValue("icon-offset",G);w=A.getLayoutProperty("icon-padding");w?.isDataDriven?this._paddingProp=w:this.padding=A.getLayoutValue("icon-padding",G);w=A.getLayoutProperty("icon-rotate");w?.isDataDriven?this._rotateProp=w:this.rotate=A.getLayoutValue("icon-rotate",G);w=A.getLayoutProperty("icon-size");w?.isDataDriven?this._sizeProp=w:this.size=A.getLayoutValue("icon-size",G)}E.prototype.update=function(A,G){this._anchorProp&&(this.anchor=this._anchorProp.getValue(A,G));this._offsetProp&&(this.offset=
this._offsetProp.getValue(A,G));this._paddingProp&&(this.padding=this._paddingProp.getValue(A,G));this._rotateProp&&(this.rotate=this._rotateProp.getValue(A,G));this._sizeProp&&(this.size=this._sizeProp.getValue(A,G))};return a._createClass(E)}(),D=function(){function E(A,G,w){this.allowOverlap=A.getLayoutValue("text-allow-overlap",G);this.ignorePlacement=A.getLayoutValue("text-ignore-placement",G);this.keepUpright=A.getLayoutValue("text-keep-upright",G);this.optional=A.getLayoutValue("text-optional",
G);this.rotationAlignment=A.getLayoutValue("text-rotation-alignment",G);this.rotationAlignment===h.RotationAlignment.AUTO&&(this.rotationAlignment=w?h.RotationAlignment.MAP:h.RotationAlignment.VIEWPORT);w=A.getLayoutProperty("text-anchor");w?.isDataDriven?this._anchorProp=w:this.anchor=A.getLayoutValue("text-anchor",G);w=A.getLayoutProperty("text-justify");w?.isDataDriven?this._justifyProp=w:this.justify=A.getLayoutValue("text-justify",G);w=A.getLayoutProperty("text-letter-spacing");w?.isDataDriven?
this._letterSpacingProp=w:this.letterSpacing=A.getLayoutValue("text-letter-spacing",G);w=A.getLayoutProperty("text-line-height");w?.isDataDriven?this._lineHeightProp=w:this.lineHeight=A.getLayoutValue("text-line-height",G);w=A.getLayoutProperty("text-max-angle");w?.isDataDriven?this._maxAngleProp=w:this.maxAngle=A.getLayoutValue("text-max-angle",G);w=A.getLayoutProperty("text-max-width");w?.isDataDriven?this._maxWidthProp=w:this.maxWidth=A.getLayoutValue("text-max-width",G);w=A.getLayoutProperty("text-offset");
w?.isDataDriven?this._offsetProp=w:this.offset=A.getLayoutValue("text-offset",G);w=A.getLayoutProperty("text-padding");w?.isDataDriven?this._paddingProp=w:this.padding=A.getLayoutValue("text-padding",G);w=A.getLayoutProperty("text-rotate");w?.isDataDriven?this._rotateProp=w:this.rotate=A.getLayoutValue("text-rotate",G);w=A.getLayoutProperty("text-size");w?.isDataDriven?this._sizeProp=w:this.size=A.getLayoutValue("text-size",G);w=A.getLayoutProperty("text-writing-mode");w?.isDataDriven?this._writingModeProp=
w:this.writingMode=A.getLayoutValue("text-writing-mode",G)}E.prototype.update=function(A,G){this._anchorProp&&(this.anchor=this._anchorProp.getValue(A,G));this._justifyProp&&(this.justify=this._justifyProp.getValue(A,G));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(A,G));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(A,G));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(A,G));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(A,
G));this._offsetProp&&(this.offset=this._offsetProp.getValue(A,G));this._paddingProp&&(this.padding=this._paddingProp.getValue(A,G));this._rotateProp&&(this.rotate=this._rotateProp.getValue(A,G));this._sizeProp&&(this.size=this._sizeProp.getValue(A,G));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(A,G))};return a._createClass(E)}();d.BackgroundStyleLayer=n;d.CircleStyleLayer=C;d.FillStyleLayer=q;d.IconLayout=y;d.LineStyleLayer=u;d.StyleLayer=f;d.SymbolStyleLayer=v;d.TextLayout=
D;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(d,a,z,r,p){z=function(g){function l(c){return e.call(this,c)}a._inherits(l,g);var e=a._createSuper(l);g=l.prototype;g.geometryInfo=function(){return l.GEOMETRY_LAYOUT};g.opacityInfo=function(){return null};
g.attributes=function(){return l.ATTRIBUTES};g.attributesInfo=function(){return l.ATTRIBUTES_INFO};return a._createClass(l)}(z.VTLMaterial);z.ATTRIBUTES=[];z.GEOMETRY_LAYOUT=[new p.VertexElementDescriptor("a_pos",2,r.DataType.BYTE,0,2)];z.ATTRIBUTES_INFO={};d.VTLBackgroundMaterial=z;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../MemoryBuffer ./enums ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(d,a,z,r,p,g,l){let e=function(){function k(f){this._locations=new Map;this._key=f}var b=k.prototype;b.defines=function(){return[]};b.getStride=function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};b.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};b.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};b.getEncodingInfos=function(){this._propertyEncodingInfo||this._buildAttributesInfo();
return this._propertyEncodingInfo};b.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};b.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};b.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};b.setDataUniforms=function(f,n,q,u,v){var C=this.getUniforms();for(const y of C){const {name:D,type:E,getValue:A}=y;C=A(q,n,u,v);if(null!==C)switch(E){case "float":f.setUniform1f(D,
C);break;case "vec2":f.setUniform2fv(D,C);break;case "vec4":f.setUniform4fv(D,C)}}};b.encodeAttributes=function(f,n,q,u){const v=this.attributesInfo(),C=this.getEncodingInfos(),y=[];let D=0,E=0;for(const G of Object.keys(C)){var A=C[G];const {type:w,precisionFactor:I,isLayout:K}=v[G],Q=K?q.getLayoutProperty(G):q.getPaintProperty(G),L=Q.interpolator?.getInterpolationRange(n);let S=0;for(const O of A){const {offset:P,bufferElementsToAdd:T}=O;if(0<T){for(A=0;A<T;A++)y.push(0);D+=E;E=O.bufferElementsToAdd}A=
u??Q.getValue(L?L[S]:n,f);switch(w){case p.EncodingType.R8_SIGNED:case p.EncodingType.R8_UNSIGNED:y[D]|=this._encodeByte(A*(I||1),8*P);break;case p.EncodingType.R16_SIGNED:case p.EncodingType.R16_UNSIGNED:y[D]|=this._encodeShort(A*(I||1),8*P);break;case p.EncodingType.R8G8_SIGNED:case p.EncodingType.R8G8_UNSIGNED:y[D]|=this._encodeByte(A*(I||1),8*P);y[D]|=this._encodeByte(A*(I||1),8*P+8);break;case p.EncodingType.R16G16_SIGNED:case p.EncodingType.R16G16_UNSIGNED:y[D]|=this._encodeShort(A*(I||1),8*
P);y[D]|=this._encodeShort(A*(I||1),8*P+16);break;case p.EncodingType.R8G8B8A8_SIGNED:case p.EncodingType.R8G8B8A8_UNSIGNED:y[D]|=this._encodeByte(A*(I||1),8*P);y[D]|=this._encodeByte(A*(I||1),8*P+8);y[D]|=this._encodeByte(A*(I||1),8*P+16);y[D]|=this._encodeByte(A*(I||1),8*P+24);break;case p.EncodingType.R8G8B8A8_COLOR:y[D]=this._encodeColor(A);break;case p.EncodingType.R16G16B16A16_DASHARRAY:case p.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(D,y,A);break;default:throw Error("Unsupported encoding type");
}S++}}return y};b.getAtributeState=function(f){const n=3+2*f;f=0|this._bit(n);return f|=this._bit(n+1)<<1};b._buildAttributesInfo=function(){const f=[],n={};var q={},u=-1;const v=this.attributesInfo();var C=this.attributes();let y=-1;for(const G of C){y++;C=this.getAtributeState(y);if(C===p.AttributeStatus.UNIFORM||C===p.AttributeStatus.UNUSED)continue;var D=v[G];const w=[];n[G]=w;D=D.type;for(let I=0;I<C;I++){const {dataType:K,bytesPerElement:Q,count:L,normalized:S}=k._encodingInfo[D],O=Q*L;var E=
`${K}-${!0===S}`;let P=q[E],T=0;!P||4<P.count+L?(u++,P={dataIndex:u,count:0,offset:0},4!==L&&(q[E]=P),f.push({location:-1,name:"a_data_"+u,count:L,type:K,normalized:S}),T=Math.ceil(Math.max(O/4,1))):(E=f[P.dataIndex],E.count+=L,T=Math.ceil(Math.max(E.count*Q/4,1))-Math.ceil(Math.max(P.offset/4,1)));w.push({dataIndex:P.dataIndex,offset:P.offset,bufferElementsToAdd:T});P.offset+=O;P.count+=L}}for(const G of f)switch(G.type){case g.DataType.BYTE:case g.DataType.UNSIGNED_BYTE:G.count=4;break;case g.DataType.SHORT:case g.DataType.UNSIGNED_SHORT:G.count+=
G.count%2}this._buildVertexBufferLayout(f);q=0;u=this._layoutInfo.geometry;for(var A of u)this._locations.set(A.name,q++);if(A=this._layoutInfo.opacity)for(const G of A)this._locations.set(G.name,q++);this._buildShaderInfo(f,n);this._propertyEncodingInfo=n};b._buildVertexBufferLayout=function(f){const n={},q=this.geometryInfo();let u=q[0].stride;if(0===f.length)n.geometry=q;else{const v=[];let C=u;for(const y of f)u+=c(y.type)*y.count;for(const y of q)v.push(new l.VertexElementDescriptor(y.name,y.count,
y.type,y.offset,u,y.normalized));for(const y of f)v.push(new l.VertexElementDescriptor(y.name,y.count,y.type,C,u,y.normalized)),C+=c(y.type)*y.count;n.geometry=v}this.opacityInfo()&&(n.opacity=this.opacityInfo());this._layoutInfo=n;this._stride=u};b._buildShaderInfo=function(f,n){let q="\n",u="\n";const v=[];for(var C of f)q+=`attribute ${this._getType(C.count)} ${C.name};\n`;var y=this.attributes();f=this.attributesInfo();C=-1;for(const A of y){C++;const {name:G,type:w,precisionFactor:I,isLayout:K}=
f[A];y=I&&1!==I?` * ${1/I}`:"";const {bytesPerElement:Q,count:L}=k._encodingInfo[w];var D=S=>`a_data_${S.dataIndex}${h(L,S.offset,Q)}`;switch(this.getAtributeState(C)){case p.AttributeStatus.UNIFORM:y=this._getType(L);var E=`u_${G}`;v.push({name:E,type:y,getValue:(O,P,T,N)=>{T=K?O.getLayoutValue(A,P):O.getPaintValue(A,P);if(w===p.EncodingType.R16G16B16A16_DASHARRAY){O=O.getDashKey(T,O.getLayoutValue("line-cap",P));N=N.getMosaicItemPosition(O,!1);if(z.isNone(N))return null;const {tl:R,br:J}=N;return[R[0],
J[1],J[0],R[1]]}if(w===p.EncodingType.R16G16B16A16_PATTERN){N=N.getMosaicItemPosition(T,!A.includes("line-"));if(z.isNone(N))return null;const {tl:R,br:J}=N;return[R[0],J[1],J[0],R[1]]}return w===p.EncodingType.R8G8B8A8_COLOR?(N=T[3],[N*T[0],N*T[1],N*T[2],N]):T}});q+=`uniform ${y} ${E};\n`;u+=`${y} ${G} = ${E};\n`;break;case p.AttributeStatus.DATA_DRIVEN:E=D(n[A][0]);u+=`${this._getType(L)} ${G} = ${E}${y};\n`;break;case p.AttributeStatus.INTERPOLATED_DATA_DRIVEN:E=`u_t_${G}`;v.push({name:E,type:"float",
getValue:(O,P,T,N)=>(K?O.getLayoutProperty(A):O.getPaintProperty(A)).interpolator.interpolationUniformValue(T,P)});q+=`uniform float ${E};\n`;const S=D(n[A][0]);D=D(n[A][1]);u+=`${this._getType(L)} ${G} = mix(${S}${y}, ${D}${y}, ${E});\n`}}this._shaderHeader=q;this._shaderMain=u;this._uniforms=v};b._bit=function(f){return(this._key&1<<f)>>f};b._getType=function(f){switch(f){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};b._encodeColor=
function(f){const n=255*f[3];return r.i8888to32(f[0]*n,f[1]*n,f[2]*n,n)};b._encodePattern=function(f,n,q){if(q&&q.rect){var u=q.rect,v=q.width;q=q.height;n[f]=this._encodeShort(u.x+2,0);n[f]|=this._encodeShort(u.y+2+q,16);n[f+1]=this._encodeShort(u.x+2+v,0);n[f+1]|=this._encodeShort(u.y+2,16)}};b._encodeByte=function(f,n){return(f&255)<<n};b._encodeShort=function(f,n){return(f&65535)<<n};a._createClass(k,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);
return k}();e._encodingInfo={[p.EncodingType.R8_SIGNED]:{dataType:g.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[p.EncodingType.R8_UNSIGNED]:{dataType:g.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[p.EncodingType.R16_SIGNED]:{dataType:g.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[p.EncodingType.R16_UNSIGNED]:{dataType:g.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[p.EncodingType.R8G8_SIGNED]:{dataType:g.DataType.BYTE,bytesPerElement:1,
count:2,normalized:!1},[p.EncodingType.R8G8_UNSIGNED]:{dataType:g.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[p.EncodingType.R16G16_SIGNED]:{dataType:g.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[p.EncodingType.R16G16_UNSIGNED]:{dataType:g.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[p.EncodingType.R8G8B8A8_SIGNED]:{dataType:g.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[p.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:g.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[p.EncodingType.R8G8B8A8_COLOR]:{dataType:g.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[p.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:g.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[p.EncodingType.R16G16B16A16_PATTERN]:{dataType:g.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const c=k=>{switch(k){case g.DataType.FLOAT:return 4;case g.DataType.INT:return 4;case g.DataType.UNSIGNED_INT:return 4;
case g.DataType.SHORT:return 2;case g.DataType.UNSIGNED_SHORT:return 2;case g.DataType.BYTE:return 1;case g.DataType.UNSIGNED_BYTE:return 1}},h=(k,b,f)=>{b/=f;if(1===k)switch(b){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===k)switch(b){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===k)switch(b){case 0:return".xyz";case 1:return".yzw"}return""};d.VTLMaterial=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],
function(d){return function(){function a(r){this._array=[];0>=r&&console.error("strideInBytes must be positive!");this._stride=r}var z=a.prototype;z.reset=function(){this.array.length=0};z.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(r,p){return 65535&r|p<<16};a.i8888to32=function(r,p,g,l){return r&255|(p&255)<<8|(g&255)<<16|l<<24};a.i8816to32=function(r,p,g){return r&255|(p&255)<<8|g<<16};d._createClass(a,[{key:"array",get:function(){return this._array}},
{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}}]);return a}()})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(d){d.EncodingType=void 0;(function(a){a[a.R8_SIGNED=0]="R8_SIGNED";a[a.R8_UNSIGNED=1]="R8_UNSIGNED";a[a.R16_SIGNED=2]="R16_SIGNED";a[a.R16_UNSIGNED=3]="R16_UNSIGNED";a[a.R8G8_SIGNED=4]="R8G8_SIGNED";a[a.R8G8_UNSIGNED=
5]="R8G8_UNSIGNED";a[a.R16G16_SIGNED=6]="R16G16_SIGNED";a[a.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";a[a.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";a[a.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";a[a.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";a[a.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";a[a.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(d.EncodingType||(d.EncodingType={}));d.AttributeStatus=void 0;(function(a){a[a.UNIFORM=0]="UNIFORM";a[a.DATA_DRIVEN=1]="DATA_DRIVEN";a[a.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";
a[a.UNUSED=3]="UNUSED"})(d.AttributeStatus||(d.AttributeStatus={}));Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(d,a,z,r,p,g){r=function(l){function e(h){return c.call(this,h)}a._inherits(e,l);var c=a._createSuper(e);l=e.prototype;l.geometryInfo=
function(){return e.GEOMETRY_LAYOUT};l.opacityInfo=function(){return null};l.attributes=function(){return e.ATTRIBUTES};l.attributesInfo=function(){return e.ATTRIBUTES_INFO};return a._createClass(e)}(r.VTLMaterial);r.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");r.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",2,p.DataType.SHORT,0,4)];r.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:z.EncodingType.R8_UNSIGNED},
"circle-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:z.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:32}};
d.VTLCircleMaterial=r;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(d,a,z,r,p,g){let l=function(e){function c(k){return h.call(this,k)}a._inherits(c,e);var h=a._createSuper(c);e=c.prototype;e.geometryInfo=function(){return c.GEOMETRY_LAYOUT};
e.opacityInfo=function(){return null};e.attributes=function(){return c.ATTRIBUTES};e.attributesInfo=function(){return c.ATTRIBUTES_INFO};return a._createClass(c)}(r.VTLMaterial);l.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];l.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",2,p.DataType.SHORT,0,4)];l.ATTRIBUTES_INFO={"fill-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",
type:z.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};r=function(e){function c(k,b){k=h.call(this,k);k._usefillColor=b;return k}a._inherits(c,e);var h=a._createSuper(c);e=c.prototype;e.geometryInfo=function(){return c.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return this._usefillColor?c.ATTRIBUTES_FILL:c.ATTRIBUTES_OUTLINE};e.attributesInfo=function(){return this._usefillColor?c.ATTRIBUTES_INFO_FILL:c.ATTRIBUTES_INFO_OUTLINE};return a._createClass(c)}(r.VTLMaterial);
r.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];r.ATTRIBUTES_FILL=["fill-color","fill-opacity"];r.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",2,p.DataType.SHORT,0,8),new g.VertexElementDescriptor("a_offset",2,p.DataType.BYTE,4,8),new g.VertexElementDescriptor("a_xnormal",2,p.DataType.BYTE,6,8)];r.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100}};
r.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100}};d.VTLFillMaterial=l;d.VTLOutlineMaterial=r;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(d,a,z,r,p,g){r=function(l){function e(h){return c.call(this,h)}a._inherits(e,l);var c=a._createSuper(e);l=e.prototype;l.geometryInfo=function(){return e.GEOMETRY_LAYOUT};l.opacityInfo=function(){return null};l.attributes=function(){return e.ATTRIBUTES};l.attributesInfo=function(){return e.ATTRIBUTES_INFO};return a._createClass(e)}(r.VTLMaterial);r.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");r.GEOMETRY_LAYOUT=
[new g.VertexElementDescriptor("a_pos",2,p.DataType.SHORT,0,16),new g.VertexElementDescriptor("a_extrude_offset",4,p.DataType.BYTE,4,16),new g.VertexElementDescriptor("a_dir_normal",4,p.DataType.BYTE,8,16),new g.VertexElementDescriptor("a_accumulatedDistance",2,p.DataType.UNSIGNED_SHORT,12,16)];r.ATTRIBUTES_INFO={"line-width":{name:"width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",
type:z.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:z.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:z.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};d.VTLLineMaterial=r;Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(d,a,z,r,p,g){const l=[new g.VertexElementDescriptor("a_pos",2,p.DataType.SHORT,0,16),new g.VertexElementDescriptor("a_vertexOffset",2,p.DataType.SHORT,4,16),new g.VertexElementDescriptor("a_texAngleRange",4,p.DataType.UNSIGNED_BYTE,8,16),
new g.VertexElementDescriptor("a_levelInfo",4,p.DataType.UNSIGNED_BYTE,12,16)],e=[new g.VertexElementDescriptor("a_opacityInfo",1,p.DataType.UNSIGNED_BYTE,0,1)];p=function(c){function h(b){return k.call(this,b)}a._inherits(h,c);var k=a._createSuper(h);c=h.prototype;c.geometryInfo=function(){return l};c.opacityInfo=function(){return e};c.attributes=function(){return h.ATTRIBUTES};c.attributesInfo=function(){return h.ATTRIBUTES_INFO};return a._createClass(h)}(r.VTLMaterial);p.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");
p.ATTRIBUTES_INFO={"icon-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:z.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:z.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};
r=function(c){function h(b){return k.call(this,b)}a._inherits(h,c);var k=a._createSuper(h);c=h.prototype;c.geometryInfo=function(){return l};c.opacityInfo=function(){return e};c.attributes=function(){return h.ATTRIBUTES};c.attributesInfo=function(){return h.ATTRIBUTES_INFO};return a._createClass(h)}(r.VTLMaterial);r.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");r.ATTRIBUTES_INFO={"text-color":{name:"color",type:z.EncodingType.R8G8B8A8_COLOR},
"text-opacity":{name:"opacity",type:z.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:z.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:z.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:z.EncodingType.R8_UNSIGNED,isLayout:!0}};d.VTLIconMaterial=p;d.VTLTextMaterial=r;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../expression/expression","../expression/types"],function(d,a,z){return function(){function r(p){this._expression=p}r.prototype.filter=function(p,g){if(!this._expression)return!0;try{return this._expression.evaluate(p,g)}catch(l){return console.log(l.message),!0}};r.createFilter=function(p){if(!p)return null;this.isLegacyFilter(p)&&(p=this.convertLegacyFilter(p));try{const g=a.createExpression(p,
null,z.BooleanType);return new r(g)}catch(g){return console.log(g.message),null}};r.isLegacyFilter=function(p){if(!Array.isArray(p)||0===p.length)return!0;switch(p[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===p.length&&"string"===typeof p[1]&&!Array.isArray(p[2]);case "in":return 3<=p.length&&"string"===typeof p[1]&&!Array.isArray(p[2]);case "!in":return!0;case "any":case "all":for(let g=1;g<p.length;g++)if(this.isLegacyFilter(p[g]))return!0;
return!1;case "none":return!0;case "has":return 2===p.length&&("$id"===p[1]||"$type"===p[1]);case "!has":return!0;default:return!1}};r.convertLegacyFilter=function(p){if(!Array.isArray(p)||0===p.length)return!0;const g=p[0];if(1===p.length)return"any"!==g;switch(g){case "\x3d\x3d":return r.convertComparison("\x3d\x3d",p[1],p[2]);case "!\x3d":return r.negate(r.convertComparison("\x3d\x3d",p[1],p[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return r.convertComparison(g,p[1],p[2]);case "in":return r.convertIn(p[1],
p.slice(2));case "!in":return r.negate(r.convertIn(p[1],p.slice(2)));case "any":case "all":case "none":return r.convertCombining(g,p.slice(1));case "has":return r.convertHas(p[1]);case "!has":return r.negate(r.convertHas(p[1]));default:throw Error("Unexpected legacy filter.");}};r.convertComparison=function(p,g,l){switch(g){case "$type":return[p,["geometry-type"],l];case "$id":return[p,["id"],l];default:return[p,["get",g],l]}};r.convertIn=function(p,g){switch(p){case "$type":return["in",["geometry-type"],
["literal",g]];case "$id":return["in",["id"],["literal",g]];default:return["in",["get",p],["literal",g]]}};r.convertHas=function(p){switch(p){case "$type":return!0;case "$id":return["has-id"];default:return["has",p]}};r.convertCombining=function(p,g){return[p].concat(g.map(this.convertLegacyFilter))};r.negate=function(p){return["!",p]};return d._createClass(r)}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),
function(d,a,z,r,p,g,l,e){function c(x,m,t){var B=typeof x;if("string"===B||"boolean"===B||"number"===B||null===x){if(t)switch(t.kind){case "string":"string"!==B&&(x=ha.toString(x));break;case "number":"number"!==B&&(x=ha.toNumber(x));break;case "color":x=ha.toColor(x)}x=["literal",x]}if(!Array.isArray(x)||0===x.length)throw Error("Expression must be a non empty array");B=x[0];if("string"!==typeof B)throw Error("First element of expression must be a string");const F=na[B];if(void 0===F)throw Error(`Invalid expression operator "${B}"`);
if(!F)throw Error(`Unimplemented expression operator "${B}"`);return F.parse(x,m,t)}let h=function(){function x(t){this._parent=t;this._vars={}}var m=x.prototype;m.add=function(t,B){this._vars[t]=B};m.get=function(t){return this._vars[t]?this._vars[t]:this._parent?this._parent.get(t):null};return a._createClass(x)}(),k=function(){function x(){this.type=e.ValueType}x.parse=function(m){if(1<m.length)throw Error('"id" does not expect arguments');return new x};x.prototype.evaluate=function(m,t){return m?.id};
return a._createClass(x)}(),b=function(){function x(){this.type=e.StringType}x.parse=function(m){if(1<m.length)throw Error('"geometry-type" does not expect arguments');return new x};x.prototype.evaluate=function(m,t){if(!m)return null;switch(m.type){case p.GeometryType.Point:return"Point";case p.GeometryType.LineString:return"LineString";case p.GeometryType.Polygon:return"Polygon";default:return null}};return a._createClass(x)}(),f=function(){function x(){this.type=e.ObjectType}x.parse=function(m){if(1<
m.length)throw Error('"properties" does not expect arguments');return new x};x.prototype.evaluate=function(m,t){return m?.values};return a._createClass(x)}(),n=function(){function x(){this.type=e.NumberType}x.parse=function(m){if(1<m.length)throw Error('"zoom" does not expect arguments');return new x};x.prototype.evaluate=function(m,t){return t};return a._createClass(x)}(),q=function(){function x(m,t,B){this._lhs=m;this._rhs=t;this._compare=B;this.type=e.BooleanType}x.parse=function(m,t,B){if(3!==
m.length&&4!==m.length)throw Error(`"${m[0]}" expects 2 or 3 arguments`);if(4===m.length)throw Error(`"${m[0]}" collator not supported`);return new x(c(m[1],t),c(m[2],t),B)};x.prototype.evaluate=function(m,t){return this._compare(this._lhs.evaluate(m,t),this._rhs.evaluate(m,t))};return a._createClass(x)}(),u=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return q.parse(B,F,(H,M)=>H===M)};return a._createClass(m)}(q),v=function(x){function m(){return t.apply(this,
arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return q.parse(B,F,(H,M)=>H!==M)};return a._createClass(m)}(q),C=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return q.parse(B,F,(H,M)=>H<M)};return a._createClass(m)}(q),y=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return q.parse(B,F,(H,M)=>H<=M)};return a._createClass(m)}(q),
D=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return q.parse(B,F,(H,M)=>H>M)};return a._createClass(m)}(q),E=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return q.parse(B,F,(H,M)=>H>=M)};return a._createClass(m)}(q),A=function(){function x(m){this._arg=m;this.type=e.BooleanType}x.parse=function(m,t){if(2!==m.length)throw Error('"!" expects 1 argument');
return new x(c(m[1],t))};x.prototype.evaluate=function(m,t){return!this._arg.evaluate(m,t)};return a._createClass(x)}(),G=function(){function x(m){this._args=m;this.type=e.BooleanType}x.parse=function(m,t){const B=[];for(let F=1;F<m.length;F++)B.push(c(m[F],t));return new x(B)};x.prototype.evaluate=function(m,t){for(const B of this._args)if(!B.evaluate(m,t))return!1;return!0};return a._createClass(x)}(),w=function(){function x(m){this._args=m;this.type=e.BooleanType}x.parse=function(m,t){const B=
[];for(let F=1;F<m.length;F++)B.push(c(m[F],t));return new x(B)};x.prototype.evaluate=function(m,t){for(const B of this._args)if(B.evaluate(m,t))return!0;return!1};return a._createClass(x)}(),I=function(){function x(m){this._args=m;this.type=e.BooleanType}x.parse=function(m,t){const B=[];for(let F=1;F<m.length;F++)B.push(c(m[F],t));return new x(B)};x.prototype.evaluate=function(m,t){for(const B of this._args)if(B.evaluate(m,t))return!1;return!0};return a._createClass(x)}(),K=function(){function x(m,
t,B){this.type=m;this._args=t;this._fallback=B}x.parse=function(m,t,B){if(4>m.length)throw Error('"case" expects at least 3 arguments');if(1===m.length%2)throw Error('"case" expects an odd number of arguments');let F;const H=[];for(let M=1;M<m.length-1;M+=2){const X=c(m[M],t),V=c(m[M+1],t,B);F||(F=V.type);H.push({condition:X,output:V})}m=c(m[m.length-1],t,B);F||(F=m.type);return new x(F,H,m)};x.prototype.evaluate=function(m,t){for(const B of this._args)if(B.condition.evaluate(m,t))return B.output.evaluate(m,
t);return this._fallback.evaluate(m,t)};return a._createClass(x)}(),Q=function(){function x(m,t){this.type=m;this._args=t}x.parse=function(m,t){if(2>m.length)throw Error('"coalesce" expects at least 1 argument');let B;const F=[];for(let H=1;H<m.length;H++){const M=c(m[H],t);B||(B=M.type);F.push(M)}return new x(B,F)};x.prototype.evaluate=function(m,t){for(const B of this._args){const F=B.evaluate(m,t);if(null!==F)return F}return null};return a._createClass(x)}(),L=function(){function x(m,t,B,F,H){this.type=
m;this._input=t;this._labels=B;this._outputs=F;this._fallback=H}x.parse=function(m,t){if(3>m.length)throw Error('"match" expects at least 3 arguments');if(0===m.length%2)throw Error('"case" expects an even number of arguments');let B;const F=c(m[1],t),H=[],M={};let X;for(let da=2;da<m.length-1;da+=2){var V=m[da];Array.isArray(V)||(V=[V]);for(const ia of V){V=typeof ia;if("string"!==V&&"number"!==V)throw Error('"match" requires string or number literal as labels');if(!X)X=V;else if(V!==X)throw Error('"match" requires labels to have the same type');
M[ia]=H.length}V=c(m[da+1],t);B||(B=V.type);H.push(V)}return new x(B,F,M,H,c(m[m.length-1],t))};x.prototype.evaluate=function(m,t){const B=this._input.evaluate(m,t);return(this._outputs[this._labels[B]]||this._fallback).evaluate(m,t)};return a._createClass(x)}(),S=function(){function x(t,B,F,H,M){this._operator=t;this.type=B;this.interpolation=F;this.input=H;this._stops=M}x.parse=function(t,B,F){const H=t[0];if(5>t.length)throw Error(`"${H}" expects at least 4 arguments`);const M=t[1];if(!Array.isArray(M)||
0===M.length)throw Error(`"${M}" is not a valid interpolation`);switch(M[0]){case "linear":if(1!==M.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==M.length||"number"!==typeof M[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==M.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var X=1;5>X;X++){var V=M[X];if("number"!==typeof V||
0>V||1<V)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${t[0]}" unknown interpolation type "${M[0]}"`);}if(1!==t.length%2)throw Error(`"${H}" expects an even number of arguments`);X=c(t[2],B,e.NumberType);let da;"interpolate-hcl"===H||"interpolate-lab"===H?da=e.ColorType:F&&"value"!==F.kind&&(da=F);F=[];for(V=3;V<t.length;V+=2){const ia=t[V];if("number"!==typeof ia)throw Error(`"${H}" requires stop inputs as literal numbers`);
if(F.length&&F[F.length-1][0]>=ia)throw Error(`"${H}" requires strictly ascending stop inputs`);const oa=c(t[V+1],B,da);da||(da=oa.type);F.push([ia,oa])}if(da&&da!==e.ColorType&&da!==e.NumberType&&("array"!==da.kind||da.itemType!==e.NumberType))throw Error(`"${H}" cannot interpolate type ${e.typeToString(da)}`);return new x(H,da,M,X,F)};var m=x.prototype;m.evaluate=function(t,B){var F=this._stops;if(1===F.length)return F[0][1].evaluate(t,B);var H=this.input.evaluate(t,B);if(H<=F[0][0])return F[0][1].evaluate(t,
B);if(H>=F[F.length-1][0])return F[F.length-1][1].evaluate(t,B);let M=0;for(;++M<F.length&&!(H<F[M][0]););const X=x.interpolationRatio(this.interpolation,H,F[M-1][0],F[M][0]);H=F[M-1][1].evaluate(t,B);const V=F[M][1].evaluate(t,B);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(H)&&Array.isArray(V))return H.map((da,ia)=>l.interpolate(da,V[ia],X));if("color"===this.type.kind&&H instanceof z&&V instanceof z)return H=new z(H),t=new z(V),new z([l.interpolate(H.r,t.r,X),l.interpolate(H.g,
t.g,X),l.interpolate(H.b,t.b,X),l.interpolate(H.a,t.a,X)]);if("number"===this.type.kind&&"number"===typeof H&&"number"===typeof V)return l.interpolate(H,V,X);throw Error(`"${this._operator}" cannot interpolate type ${e.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return t=r.toLCH(H),B=r.toLCH(V),F=B.h-t.h,t=r.toRGB({h:t.h+X*(180<F||-180>F?F-360*Math.round(F/360):F),c:l.interpolate(t.c,B.c,X),l:l.interpolate(t.l,B.l,X)}),new z({a:l.interpolate(H.a,V.a,X),...t});if("interpolate-lab"===
this._operator)return t=r.toLAB(H),B=r.toLAB(V),t=r.toRGB({l:l.interpolate(t.l,B.l,X),a:l.interpolate(t.a,B.a,X),b:l.interpolate(t.b,B.b,X)}),new z({a:l.interpolate(H.a,V.a,X),...t});throw Error(`Unexpected operator "${this._operator}"`);};m.interpolationUniformValue=function(t,B){const F=this._stops;if(1===F.length||t>=F[F.length-1][0])return 0;let H=0;for(;++H<F.length&&!(t<F[H][0]););return x.interpolationRatio(this.interpolation,B,F[H-1][0],F[H][0])};m.getInterpolationRange=function(t){const B=
this._stops;if(1===B.length)return t=B[0][0],[t,t];var F=B[B.length-1][0];if(t>=F)return[F,F];for(F=0;++F<B.length&&!(t<B[F][0]););return[B[F-1][0],B[F][0]]};x.interpolationRatio=function(t,B,F,H){let M=0;"linear"===t[0]?M=x._exponentialInterpolationRatio(B,1,F,H):"exponential"===t[0]?M=x._exponentialInterpolationRatio(B,t[1],F,H):"cubic-bezier"===t[0]&&(M=g.unitBezier(t[1],t[2],t[3],t[4])(x._exponentialInterpolationRatio(B,1,F,H),1E-5));0>M?M=0:1<M&&(M=1);return M};x._exponentialInterpolationRatio=
function(t,B,F,H){H-=F;if(0===H)return 0;t-=F;return 1===B?t/H:(B**t-1)/(B**H-1)};return a._createClass(x)}(),O=function(){function x(m,t,B){this.type=m;this._input=t;this._stops=B}x.parse=function(m,t){if(5>m.length)throw Error('"step" expects at least 4 arguments');if(1!==m.length%2)throw Error('"step" expects an even number of arguments');const B=c(m[1],t,e.NumberType);let F;const H=[];H.push([-Infinity,c(m[2],t)]);for(let M=3;M<m.length;M+=2){const X=m[M];if("number"!==typeof X)throw Error('"step" requires stop inputs as literal numbers');
if(H.length&&H[H.length-1][0]>=X)throw Error('"step" requires strictly ascending stop inputs');const V=c(m[M+1],t);F||(F=V.type);H.push([X,V])}return new x(F,B,H)};x.prototype.evaluate=function(m,t){const B=this._stops;if(1===B.length)return B[0][1].evaluate(m,t);const F=this._input.evaluate(m,t);let H=0;for(;++H<B.length&&!(F<B[H][0]););return this._stops[H-1][1].evaluate(m,t)};return a._createClass(x)}(),P=function(){function x(m,t){this.type=m;this._output=t}x.parse=function(m,t,B){if(4>m.length)throw Error('"let" expects at least 3 arguments');
if(1===m.length%2)throw Error('"let" expects an odd number of arguments');const F=new h(t);for(let H=1;H<m.length-1;H+=2){const M=m[H];if("string"!==typeof M)throw Error(`"let" requires a string to define variable names - found ${M}`);F.add(M,c(m[H+1],t))}m=c(m[m.length-1],F,B);return new x(m.type,m)};x.prototype.evaluate=function(m,t){return this._output.evaluate(m,t)};return a._createClass(x)}(),T=function(){function x(m,t){this.type=m;this.output=t}x.parse=function(m,t,B){if(2!==m.length||"string"!==
typeof m[1])throw Error('"var" requires just one literal string argument');t=t.get(m[1]);if(!t)throw Error(`${m[1]} must be defined before being used in a "var" expression`);return new x(B||e.ValueType,t)};x.prototype.evaluate=function(m,t){return this.output.evaluate(m,t)};return a._createClass(x)}(),N=function(){function x(m,t,B){this.type=m;this._index=t;this._array=B}x.parse=function(m,t){if(3!==m.length)throw Error('"at" expects 2 arguments');const B=c(m[1],t,e.NumberType);m=c(m[2],t);return new x(m.type.itemType,
B,m)};x.prototype.evaluate=function(m,t){const B=this._index.evaluate(m,t);m=this._array.evaluate(m,t);if(0>B||B>=m.length)throw Error('"at" index out of bounds');if(B!==Math.floor(B))throw Error('"at" index must be an integer');return m[B]};return a._createClass(x)}(),R=function(){function x(m,t){this._key=m;this._obj=t;this.type=e.ValueType}x.parse=function(m,t){let B;switch(m.length){case 2:return B=c(m[1],t),new x(B);case 3:return B=c(m[1],t),m=c(m[2],t),new x(B,m);default:throw Error('"get" expects 1 or 2 arguments');
}};x.prototype.evaluate=function(m,t){const B=this._key.evaluate(m,t);return this._obj?this._obj.evaluate(m,t)[B]:m?.values[B]};return a._createClass(x)}(),J=function(){function x(m,t){this._key=m;this._obj=t;this.type=e.BooleanType}x.parse=function(m,t){let B;switch(m.length){case 2:return B=c(m[1],t),new x(B);case 3:return B=c(m[1],t),m=c(m[2],t),new x(B,m);default:throw Error('"has" expects 1 or 2 arguments');}};x.prototype.evaluate=function(m,t){const B=this._key.evaluate(m,t);return this._obj?
(m=this._obj.evaluate(m,t),B in m):!!m?.values[B]};return a._createClass(x)}(),W=function(){function x(m,t){this._key=m;this._vals=t;this.type=e.BooleanType}x.parse=function(m,t){if(3!==m.length)throw Error('"in" expects 2 arguments');return new x(c(m[1],t),c(m[2],t))};x.prototype.evaluate=function(m,t){const B=this._key.evaluate(m,t);return this._vals.evaluate(m,t).includes(B)};return a._createClass(x)}(),U=function(){function x(m,t,B){this._item=m;this._array=t;this._from=B;this.type=e.NumberType}
x.parse=function(m,t){if(3>m.length||4<m.length)throw Error('"index-of" expects 3 or 4 arguments');const B=c(m[1],t),F=c(m[2],t);return 4===m.length?(m=c(m[3],t,e.NumberType),new x(B,F,m)):new x(B,F)};x.prototype.evaluate=function(m,t){const B=this._item.evaluate(m,t),F=this._array.evaluate(m,t);if(this._from){m=this._from.evaluate(m,t);if(m!==Math.floor(m))throw Error('"index-of" index must be an integer');return F.indexOf(B,m)}return F.indexOf(B)};return a._createClass(x)}(),Y=function(){function x(m){this._arg=
m;this.type=e.NumberType}x.parse=function(m,t){if(2!==m.length)throw Error('"length" expects 2 arguments');m=c(m[1],t);return new x(m)};x.prototype.evaluate=function(m,t){m=this._arg.evaluate(m,t);if("string"===typeof m||Array.isArray(m))return m.length;throw Error('"length" expects string or array');};return a._createClass(x)}(),Z=function(){function x(m,t,B,F){this.type=m;this._array=t;this._from=B;this._to=F}x.parse=function(m,t){if(3>m.length||4<m.length)throw Error('"slice" expects 2 or 3 arguments');
const B=c(m[1],t),F=c(m[2],t,e.NumberType);if(F.type!==e.NumberType)throw Error('"slice" index must return a number');if(4===m.length){m=c(m[3],t,e.NumberType);if(m.type!==e.NumberType)throw Error('"slice" index must return a number');return new x(B.type,B,F,m)}return new x(B.type,B,F)};x.prototype.evaluate=function(m,t){const B=this._array.evaluate(m,t);if(!Array.isArray(B)&&"string"!==typeof B)throw Error('"slice" input must be an array or a string');const F=this._from.evaluate(m,t);if(0>F||F>=
B.length)throw Error('"slice" index out of bounds');if(F!==Math.floor(F))throw Error('"slice" index must be an integer');if(this._to){m=this._to.evaluate(m,t);if(0>m||m>=B.length)throw Error('"slice" index out of bounds');if(m!==Math.floor(m))throw Error('"slice" index must be an integer');return B.slice(F,m)}return B.slice(F)};return a._createClass(x)}(),ea=function(){function x(){this.type=e.BooleanType}x.parse=function(m){if(1!==m.length)throw Error('"has-id" expects no arguments');return new x};
x.prototype.evaluate=function(m,t){return m&&void 0!==m.id};return a._createClass(x)}(),ba=function(){function x(m,t){this._args=m;this._calculate=t;this.type=e.NumberType}x.parse=function(m,t,B){m=m.slice(1).map(F=>c(F,t));return new x(m,B)};x.prototype.evaluate=function(m,t){let B;this._args&&(B=this._args.map(F=>F.evaluate(m,t)));return this._calculate(B)};return a._createClass(x)}(),aa=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,
F){switch(B.length){case 2:return ba.parse(B,F,H=>-H[0]);case 3:return ba.parse(B,F,H=>H[0]-H[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return a._createClass(m)}(ba),fa=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return ba.parse(B,F,H=>{let M=1;for(const X of H)M*=X;return M})};return a._createClass(m)}(ba),ka=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);
m.parse=function(B,F){if(3===B.length)return ba.parse(B,F,H=>H[0]/H[1]);throw Error('"/" expects 2 arguments');};return a._createClass(m)}(ba),la=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){if(3===B.length)return ba.parse(B,F,H=>H[0]%H[1]);throw Error('"%" expects 2 arguments');};return a._createClass(m)}(ba),pa=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,
F){if(3===B.length)return ba.parse(B,F,H=>H[0]**H[1]);throw Error('"^" expects 1 or 2 arguments');};return a._createClass(m)}(ba),qa=function(x){function m(){return t.apply(this,arguments)}a._inherits(m,x);var t=a._createSuper(m);m.parse=function(B,F){return ba.parse(B,F,H=>{let M=0;for(const X of H)M+=X;return M})};return a._createClass(m)}(ba),ca=function(){function x(m,t){this._args=m;this._calculate=t;this.type=e.NumberType}x.parse=function(m,t){const B=m.slice(1).map(F=>c(F,t));return new x(B,
x.ops[m[0]])};x.prototype.evaluate=function(m,t){let B;this._args&&(B=this._args.map(F=>F.evaluate(m,t)));return this._calculate(B)};return a._createClass(x)}();ca.ops={abs:x=>Math.abs(x[0]),acos:x=>Math.acos(x[0]),asin:x=>Math.asin(x[0]),atan:x=>Math.atan(x[0]),ceil:x=>Math.ceil(x[0]),cos:x=>Math.cos(x[0]),e:()=>Math.E,floor:x=>Math.floor(x[0]),ln:x=>Math.log(x[0]),ln2:()=>Math.LN2,log10:x=>Math.log(x[0])/Math.LN10,log2:x=>Math.log(x[0])/Math.LN2,max:x=>Math.max(...x),min:x=>Math.min(...x),pi:()=>
Math.PI,round:x=>Math.round(x[0]),sin:x=>Math.sin(x[0]),sqrt:x=>Math.sqrt(x[0]),tan:x=>Math.tan(x[0])};let ra=function(){function x(m){this._args=m;this.type=e.StringType}x.parse=function(m,t){return new x(m.slice(1).map(B=>c(B,t)))};x.prototype.evaluate=function(m,t){return this._args.map(B=>B.evaluate(m,t)).join("")};return a._createClass(x)}(),ma=function(){function x(m,t){this._arg=m;this._calculate=t;this.type=e.StringType}x.parse=function(m,t){if(2!==m.length)throw Error(`${m[0]} expects 1 argument`);
t=c(m[1],t);return new x(t,x.ops[m[0]])};x.prototype.evaluate=function(m,t){return this._calculate(this._arg.evaluate(m,t))};return a._createClass(x)}();ma.ops={downcase:x=>x.toLowerCase(),upcase:x=>x.toUpperCase()};let sa=function(){function x(t){this._args=t;this.type=e.ColorType}x.parse=function(t,B){if(4!==t.length)throw Error('"rgb" expects 3 arguments');t=t.slice(1).map(F=>c(F,B));return new x(t)};var m=x.prototype;m.evaluate=function(t,B){const F=this._validate(this._args[0].evaluate(t,B)),
H=this._validate(this._args[1].evaluate(t,B));t=this._validate(this._args[2].evaluate(t,B));return new z({r:F,g:H,b:t})};m._validate=function(t){if("number"!==typeof t||0>t||255<t)throw Error(`${t}: invalid color component`);return Math.round(t)};return a._createClass(x)}(),ta=function(){function x(t){this._args=t;this.type=e.ColorType}x.parse=function(t,B){if(5!==t.length)throw Error('"rgba" expects 4 arguments');t=t.slice(1).map(F=>c(F,B));return new x(t)};var m=x.prototype;m.evaluate=function(t,
B){const F=this._validate(this._args[0].evaluate(t,B)),H=this._validate(this._args[1].evaluate(t,B)),M=this._validate(this._args[2].evaluate(t,B));t=this._validateAlpha(this._args[3].evaluate(t,B));return new z({r:F,g:H,b:M,a:t})};m._validate=function(t){if("number"!==typeof t||0>t||255<t)throw Error(`${t}: invalid color component`);return Math.round(t)};m._validateAlpha=function(t){if("number"!==typeof t||0>t||1<t)throw Error(`${t}: invalid alpha color component`);return t};return a._createClass(x)}(),
ua=function(){function x(m){this._color=m;this.type=e.arrayType(e.NumberType,4)}x.parse=function(m,t){if(2!==m.length)throw Error('"to-rgba" expects 1 argument');m=c(m[1],t);return new x(m)};x.prototype.evaluate=function(m,t){return(new z(this._color.evaluate(m,t))).toRgba()};return a._createClass(x)}(),ja=function(){function x(m,t){this.type=m;this._args=t}x.parse=function(m,t){var B=m[0];if(2>m.length)throw Error(`${B} expects at least one argument`);let F=1,H;if("array"===B){if(2<m.length){switch(m[1]){case "string":H=
e.StringType;break;case "number":H=e.NumberType;break;case "boolean":H=e.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}F++}else H=e.ValueType;if(3<m.length){var M=m[2];if(null!==M&&("number"!==typeof M||0>M||M!==Math.floor(M)))throw Error('"array" length argument must be a positive integer literal');F++}H=e.arrayType(H,M)}else switch(B){case "string":H=e.StringType;break;case "number":H=e.NumberType;break;case "boolean":H=e.BooleanType;break;case "object":H=
e.ObjectType}for(B=[];F<m.length;F++)M=c(m[F],t),B.push(M);return new x(H,B)};x.prototype.evaluate=function(m,t){let B;for(const F of this._args){const H=F.evaluate(m,t);B=e.getType(H);if(e.matchType(B,this.type))return H}throw Error(`Expected ${e.typeToString(this.type)} but got ${e.typeToString(B)}`);};return a._createClass(x)}(),ha=function(){function x(m,t){this.type=m;this._args=t}x.parse=function(m,t){var B=m[0];const F=x.types[B];if(F===e.BooleanType||F===e.StringType){if(2!==m.length)throw Error(`${B} expects one argument`);
}else if(2>m.length)throw Error(`${B} expects at least one argument`);B=[];for(let H=1;H<m.length;H++){const M=c(m[H],t);B.push(M)}return new x(F,B)};x.prototype.evaluate=function(m,t){if(this.type===e.BooleanType)return!!this._args[0].evaluate(m,t);if(this.type===e.StringType)return e.valueToString(this._args[0].evaluate(m,t));if(this.type===e.NumberType){for(const F of this._args){var B=Number(F.evaluate(m,t));if(!isNaN(B))return B}return null}if(this.type===e.ColorType){for(B of this._args)try{const F=
x.toColor(B.evaluate(m,t));if(F instanceof z)return F}catch{}return null}};x.toBoolean=function(m){return!!m};x.toString=function(m){return e.valueToString(m)};x.toNumber=function(m){const t=Number(m);if(isNaN(t))throw Error(`"${m}" is not a number`);return t};x.toColor=function(m){if(m instanceof z)return m;if("string"===typeof m){const t=z.fromString(m);if(t)return t;throw Error(`"${m}" is not a color`);}if(Array.isArray(m))return z.fromArray(m);throw Error(`"${m}" is not a color`);};return a._createClass(x)}();
ha.types={"to-boolean":e.BooleanType,"to-color":e.ColorType,"to-number":e.NumberType,"to-string":e.StringType};let va=function(){function x(m){this._val=m;this.type=e.getType(m)}x.parse=function(m){if(2!==m.length)throw Error('"literal" expects 1 argument');return new x(m[1])};x.prototype.evaluate=function(m,t){return this._val};return a._createClass(x)}(),wa=function(){function x(m){this._arg=m;this.type=e.StringType}x.parse=function(m,t){if(2!==m.length)throw Error('"typeof" expects 1 argument');
return new x(c(m[1],t))};x.prototype.evaluate=function(m,t){return e.typeToString(e.getType(this._arg.evaluate(m,t)))};return a._createClass(x)}();const na={array:ja,boolean:ja,collator:null,format:null,image:null,literal:va,number:ja,"number-format":null,object:ja,string:ja,"to-boolean":ha,"to-color":ha,"to-number":ha,"to-string":ha,typeof:wa,accumulated:null,"feature-state":null,"geometry-type":b,id:k,"line-progress":null,properties:f,at:N,get:R,has:J,in:W,"index-of":U,length:Y,slice:Z,"!":A,"!\x3d":v,
"\x3c":C,"\x3c\x3d":y,"\x3d\x3d":u,"\x3e":D,"\x3e\x3d":E,all:G,any:w,case:K,coalesce:Q,match:L,within:null,interpolate:S,"interpolate-hcl":S,"interpolate-lab":S,step:O,let:P,var:T,concat:ra,downcase:ma,"is-supported-script":null,"resolved-locale":null,upcase:ma,rgb:sa,rgba:ta,"to-rgba":ua,"-":aa,"*":fa,"/":ka,"%":la,"^":pa,"+":qa,abs:ca,acos:ca,asin:ca,atan:ca,ceil:ca,cos:ca,e:ca,floor:ca,ln:ca,ln2:ca,log10:ca,log2:ca,max:ca,min:ca,pi:ca,round:ca,sin:ca,sqrt:ca,tan:ca,zoom:n,"heatmap-density":null,
"has-id":ea,none:I};d.ALL=G;d.ANY=w;d.Add=qa;d.Assert=ja;d.At=N;d.Calculate=ca;d.Case=K;d.Coalesce=Q;d.Coerce=ha;d.Concat=ra;d.Div=ka;d.EQ=u;d.GE=E;d.GT=D;d.GeomType=b;d.Get=R;d.Has=J;d.HasID=ea;d.ID=k;d.In=W;d.IndexOf=U;d.Interpolate=S;d.LE=y;d.LT=C;d.Length=Y;d.Let=P;d.Literal=va;d.Match=L;d.Mod=la;d.Mul=fa;d.NE=v;d.NONE=I;d.NOT=A;d.Pow=pa;d.Properties=f;d.Rgb=sa;d.Rgba=ta;d.Slice=Z;d.Step=O;d.String=ma;d.Sub=aa;d.ToRgba=ua;d.TypeOf=wa;d.Var=T;d.Zoom=n;d.createExpression=c;d.ops=na;Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/TileClipper":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(d,a){d.GeometryType=void 0;(function(h){h[h.Unknown=0]="Unknown";h[h.Point=1]="Point";h[h.LineString=2]="LineString";h[h.Polygon=3]="Polygon"})(d.GeometryType||(d.GeometryType={}));let z=function(){function h(b,f){this.x=b;this.y=f}var k=h.prototype;k.clone=function(){return new h(this.x,this.y)};k.equals=function(b,f){return b===this.x&&f===this.y};
k.isEqual=function(b){return b.x===this.x&&b.y===this.y};k.setCoords=function(b,f){this.x=b;this.y=f};k.normalize=function(){var b=this.x;const f=this.y;b=Math.sqrt(b*b+f*f);this.x/=b;this.y/=b};k.rightPerpendicular=function(){const b=this.x;this.x=this.y;this.y=-b};k.move=function(b,f){this.x+=b;this.y+=f};k.assign=function(b){this.x=b.x;this.y=b.y};k.assignAdd=function(b,f){this.x=b.x+f.x;this.y=b.y+f.y};k.assignSub=function(b,f){this.x=b.x-f.x;this.y=b.y-f.y};k.rotate=function(b,f){const n=this.x,
q=this.y;this.x=n*b-q*f;this.y=n*f+q*b};k.scale=function(b){this.x*=b;this.y*=b};k.length=function(){const b=this.x,f=this.y;return Math.sqrt(b*b+f*f)};h.distance=function(b,f){const n=f.x-b.x;b=f.y-b.y;return Math.sqrt(n*n+b*b)};h.add=function(b,f){return new h(b.x+f.x,b.y+f.y)};h.sub=function(b,f){return new h(b.x-f.x,b.y-f.y)};return a._createClass(h)}(),r=a._createClass(function(h,k,b){this.ratio=h;this.x=k;this.y=b}),p=function(){function h(b,f,n,q=8,u=8){this._lines=[];this._starts=[];this.validateTessellation=
!0;this._pixelRatio=q;this._pixelMargin=u;this._tileSize=512*q;this._dz=b;this._yPos=f;this._xPos=n}var k=h.prototype;k.setPixelMargin=function(b){b!==this._pixelMargin&&(this._pixelMargin=b,this.setExtent(this._extent))};k.setExtent=function(b){this._extent=b;this._finalRatio=this._tileSize/b*(1<<this._dz);let f=this._pixelRatio*this._pixelMargin;f/=this._finalRatio;b>>=this._dz;f>b&&(f=b);this._margin=f;this._xmin=b*this._xPos-f;this._ymin=b*this._yPos-f;this._xmax=this._xmin+b+2*f;this._ymax=this._ymin+
b+2*f};k.reset=function(b){this._type=b;this._lines=[];this._starts=[];this._line=null;this._start=0};k.moveTo=function(b,f){this._pushLine();this._prevIsIn=this._isIn(b,f);this._moveTo(b,f,this._prevIsIn);this._prevPt=new z(b,f);this._firstPt=new z(b,f);this._dist=0};k.lineTo=function(b,f){const n=this._isIn(b,f),q=new z(b,f),u=z.distance(this._prevPt,q);if(n)if(this._prevIsIn)this._lineTo(b,f,!0);else{var v=this._prevPt;var C=q;b=this._intersect(C,v);this._start=this._dist+u*(1-this._r);this._lineTo(b.x,
b.y,!0);this._lineTo(C.x,C.y,!0)}else if(this._prevIsIn)C=this._prevPt,v=q,b=this._intersect(C,v),this._lineTo(b.x,b.y,!0),this._lineTo(v.x,v.y,!1);else{const D=this._prevPt;if(!(D.x<=this._xmin&&q.x<=this._xmin||D.x>=this._xmax&&q.x>=this._xmax||D.y<=this._ymin&&q.y<=this._ymin||D.y>=this._ymax&&q.y>=this._ymax)){b=[];if(D.x<this._xmin&&q.x>this._xmin||D.x>this._xmin&&q.x<this._xmin){f=(this._xmin-D.x)/(q.x-D.x);var y=D.y+f*(q.y-D.y);y<=this._ymin?C=!1:y>=this._ymax?C=!0:b.push(new r(f,this._xmin,
y))}if(D.x<this._xmax&&q.x>this._xmax||D.x>this._xmax&&q.x<this._xmax)f=(this._xmax-D.x)/(q.x-D.x),y=D.y+f*(q.y-D.y),y<=this._ymin?C=!1:y>=this._ymax?C=!0:b.push(new r(f,this._xmax,y));if(D.y<this._ymin&&q.y>this._ymin||D.y>this._ymin&&q.y<this._ymin)f=(this._ymin-D.y)/(q.y-D.y),y=D.x+f*(q.x-D.x),y<=this._xmin?v=!1:y>=this._xmax?v=!0:b.push(new r(f,y,this._ymin));if(D.y<this._ymax&&q.y>this._ymax||D.y>this._ymax&&q.y<this._ymax)f=(this._ymax-D.y)/(q.y-D.y),y=D.x+f*(q.x-D.x),y<=this._xmin?v=!1:y>=
this._xmax?v=!0:b.push(new r(f,y,this._ymax));if(0===b.length)v?C?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):C?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(1<b.length&&b[0].ratio>b[1].ratio)this._start=this._dist+u*b[1].ratio,this._lineTo(b[1].x,b[1].y,!0),this._lineTo(b[0].x,b[0].y,!0);else for(this._start=this._dist+u*b[0].ratio,v=0;v<b.length;v++)this._lineTo(b[v].x,b[v].y,!0)}this._lineTo(q.x,q.y,!1)}this._dist+=u;this._prevIsIn=
n;this._prevPt=q};k.close=function(){if(2<this._line.length){var b=this._firstPt,f=this._prevPt;b.x===f.x&&b.y===f.y||this.lineTo(b.x,b.y);b=this._line;for(f=b.length;4<=f;)if(b[0].x===b[1].x&&b[0].x===b[f-2].x||b[0].y===b[1].y&&b[0].y===b[f-2].y)b.pop(),b[0].x=b[f-2].x,b[0].y=b[f-2].y,--f;else break}};k.result=function(b=!0){this._pushLine();if(0===this._lines.length)return null;this._type===d.GeometryType.Polygon&&b&&e.simplify(this._tileSize,this._margin*this._finalRatio,this._lines);return this._lines};
k.resultWithStarts=function(){if(this._type!==d.GeometryType.LineString)throw Error("Only valid for lines");this._pushLine();const b=this._lines,f=b.length;if(0===f)return null;const n=[];for(let q=0;q<f;q++)n.push({line:b[q],start:this._starts[q]||0});return n};k._isIn=function(b,f){return b>=this._xmin&&b<=this._xmax&&f>=this._ymin&&f<=this._ymax};k._intersect=function(b,f){let n,q,u;if(f.x>=this._xmin&&f.x<=this._xmax)q=f.y<=this._ymin?this._ymin:this._ymax,u=(q-b.y)/(f.y-b.y),n=b.x+u*(f.x-b.x);
else if(f.y>=this._ymin&&f.y<=this._ymax)n=f.x<=this._xmin?this._xmin:this._xmax,u=(n-b.x)/(f.x-b.x),q=b.y+u*(f.y-b.y);else{q=f.y<=this._ymin?this._ymin:this._ymax;n=f.x<=this._xmin?this._xmin:this._xmax;const v=(n-b.x)/(f.x-b.x),C=(q-b.y)/(f.y-b.y);v<C?(u=v,q=b.y+v*(f.y-b.y)):(u=C,n=b.x+C*(f.x-b.x))}this._r=u;return new z(n,q)};k._pushLine=function(){this._line&&(this._type===d.GeometryType.Point?0<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===d.GeometryType.LineString?
1<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===d.GeometryType.Polygon&&3<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)));this._line=[];this._start=0};k._moveTo=function(b,f,n){this._type!==d.GeometryType.Polygon?n&&(b=Math.round((b-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new z(b,f))):(n||(b<this._xmin&&(b=this._xmin),b>this._xmax&&(b=
this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),b=Math.round((b-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new z(b,f)),this._isV=this._isH=!1)};k._lineTo=function(b,f,n){if(this._type!==d.GeometryType.Polygon)if(n){b=Math.round((b-(this._xmin+this._margin))*this._finalRatio);f=Math.round((f-(this._ymin+this._margin))*this._finalRatio);if(0<this._line.length&&(n=this._line[this._line.length-1],n.equals(b,
f)))return;this._line.push(new z(b,f))}else this._line&&0<this._line.length&&this._pushLine();else if(n||(b<this._xmin&&(b=this._xmin),b>this._xmax&&(b=this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),b=Math.round((b-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line&&0<this._line.length){n=this._line[this._line.length-1];const q=n.x===b,u=n.y===f;q&&u||(this._isH&&q?(n.x=b,n.y=f,n=this._line[this._line.length-
2],n.x===b&&n.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(n=this._line[this._line.length-2],this._isH=n.x===b,this._isV=n.y===f)):(this._isH=n.x===b,this._isV=n.y===f)):this._isV&&u?(n.x=b,n.y=f,n=this._line[this._line.length-2],n.x===b&&n.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(n=this._line[this._line.length-2],this._isH=n.x===b,this._isV=n.y===f)):(this._isH=n.x===b,this._isV=n.y===f)):(this._line.push(new z(b,f)),this._isH=q,this._isV=u))}else this._line.push(new z(b,
f))};return a._createClass(h)}(),g=function(){function h(){}var k=h.prototype;k.setExtent=function(b){this._ratio=4096===b?1:4096/b};k.reset=function(b){this._lines=[];this._line=null};k.moveTo=function(b,f){this._line&&this._lines.push(this._line);this._line=[];const n=this._ratio;this._line.push(new z(b*n,f*n))};k.lineTo=function(b,f){const n=this._ratio;this._line.push(new z(b*n,f*n))};k.close=function(){const b=this._line;b&&!b[0].isEqual(b[b.length-1])&&b.push(b[0])};k.result=function(){this._line&&
this._lines.push(this._line);return 0===this._lines.length?null:this._lines};a._createClass(h,[{key:"validateTessellation",get:function(){return 1>this._ratio}}]);return h}();var l;(function(h){h[h.sideLeft=0]="sideLeft";h[h.sideRight=1]="sideRight";h[h.sideTop=2]="sideTop";h[h.sideBottom=3]="sideBottom"})(l||(l={}));let e=function(){function h(){}h.simplify=function(k,b,f){if(f){var n=-b,q=k+b,u=-b,v=k+b;k=[];b=[];var C=f.length;for(let y=0;y<C;++y){const D=f[y];if(!D||2>D.length)continue;let E=
D[0],A;const G=D.length;for(let w=1;w<G;++w)A=D[w],E.x===A.x&&(E.x<=n&&(E.y>A.y?(k.push(y),k.push(w),k.push(l.sideLeft),k.push(-1)):(b.push(y),b.push(w),b.push(l.sideLeft),b.push(-1))),E.x>=q&&(E.y<A.y?(k.push(y),k.push(w),k.push(l.sideRight),k.push(-1)):(b.push(y),b.push(w),b.push(l.sideRight),b.push(-1)))),E.y===A.y&&(E.y<=u&&(E.x<A.x?(k.push(y),k.push(w),k.push(l.sideTop),k.push(-1)):(b.push(y),b.push(w),b.push(l.sideTop),b.push(-1))),E.y>=v&&(E.x>A.x?(k.push(y),k.push(w),k.push(l.sideBottom),
k.push(-1)):(b.push(y),b.push(w),b.push(l.sideBottom),b.push(-1)))),E=A}0!==k.length&&0!==b.length&&(h.fillParent(f,b,k),h.fillParent(f,k,b),n=[],h.calcDeltas(n,b,k),h.calcDeltas(n,k,b),h.addDeltas(n,f))}};h.fillParent=function(k,b,f){const n=f.length,q=b.length;for(let D=0;D<q;D+=4){var u=b[D],v=b[D+1];const E=b[D+2],A=k[u][v-1];u=k[u][v];v=8092;let G=-1;for(let w=0;w<n;w+=4){if(f[w+2]!==E)continue;var C=f[w];const I=f[w+1];var y=k[C][I-1];C=k[C][I];switch(E){case l.sideLeft:case l.sideRight:c(A.y,
y.y,C.y)&&c(u.y,y.y,C.y)&&(y=Math.abs(C.y-y.y),y<v&&(v=y,G=w));break;case l.sideTop:case l.sideBottom:c(A.x,y.x,C.x)&&c(u.x,y.x,C.x)&&(y=Math.abs(C.x-y.x),y<v&&(v=y,G=w))}}b[D+3]=G}};h.calcDeltas=function(k,b,f){const n=b.length;for(let q=0;q<n;q+=4){const u=h.calcDelta(q,b,f,[]);k.push(b[q]);k.push(b[q+1]);k.push(b[q+2]);k.push(u)}};h.calcDelta=function(k,b,f,n){k=b[k+3];if(-1===k)return 0;const q=n.length;if(1<q&&n[q-2]===k)return 0;n.push(k);return h.calcDelta(k,f,b,n)+1};h.addDeltas=function(k,
b){const f=k.length;let n=0;for(var q=0;q<f;q+=4){var u=k[q+3];u>n&&(n=u)}for(q=0;q<f;q+=4){u=b[k[q]];const v=k[q+1],C=n-k[q+3];switch(k[q+2]){case l.sideLeft:u[v-1].x-=C;u[v].x-=C;1===v&&(u[u.length-1].x-=C);v===u.length-1&&(u[0].x-=C);break;case l.sideRight:u[v-1].x+=C;u[v].x+=C;1===v&&(u[u.length-1].x+=C);v===u.length-1&&(u[0].x+=C);break;case l.sideTop:u[v-1].y-=C;u[v].y-=C;1===v&&(u[u.length-1].y-=C);v===u.length-1&&(u[0].y-=C);break;case l.sideBottom:u[v-1].y+=C,u[v].y+=C,1===v&&(u[u.length-
1].y+=C),v===u.length-1&&(u[0].y+=C)}}};return a._createClass(h)}();const c=(h,k,b)=>h>=k&&h<=b||h>=b&&h<=k;d.Point=z;d.SimpleBuilder=g;d.TileClipper=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(d){function a(p,g,l,e){function c(u,v){var C;let y,D;y=u;for(C=0;8>C;C++){D=((b*y+k)*y+h)*y-u;if(Math.abs(D)<v)return y;var E=(3*b*y+2*k)*y+h;if(1E-6>Math.abs(E))break;y-=D/E}E=0;C=1;y=u;if(y<E)return E;if(y>C)return C;
for(;E<C;){D=((b*y+k)*y+h)*y;if(Math.abs(D-u)<v)break;u>D?E=y:C=y;y=.5*(C-E)+E}return y}const h=3*p,k=3*(l-p)-h,b=1-h-k,f=3*g,n=3*(e-g)-f,q=1-f-n;return function(u,v=1E-6){u=c(u,v);return((q*u+n)*u+f)*u}}const z=/^cubic-bezier\((.*)\)/,r={};r.ease=a(.25,.1,.25,1);r.linear=a(0,0,1,1);r.easeIn=r["ease-in"]=a(.42,0,1,1);r.easeOut=r["ease-out"]=a(0,0,.58,1);r.easeInOut=r["ease-in-out"]=a(.42,0,.58,1);d.easingFunctions=r;d.parse=function(p){let g=r[p]||null;!g&&(p=z.exec(p))&&(p=p[1].split(",").map(l=>
parseFloat(l.trim())),4!==p.length||p.some(l=>isNaN(l))||(g=a.apply(a,p)));return g};d.unitBezier=a;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],function(d){function a(e,c){e%=c;return 0<=e?e:e+c}const z=Number.POSITIVE_INFINITY,r=Math.PI,p=128/r,g=256/360,l=1/Math.LN2;d.C_2PI=2*r;d.C_DEG_TO_256=g;d.C_DEG_TO_RAD=r/180;d.C_INFINITY=z;d.C_PI=r;d.C_RAD_TO_256=p;d.between=function(e,c,h){return e>=c&&e<=
h||e>=h&&e<=c};d.degToByte=function(e){return a(e*g,256)};d.interpolate=function(e,c,h){return e*(1-h)+c*h};d.log2=function(e){return Math.log(e)*l};d.positiveMod=a;d.radToByte=function(e){return a(e*p,256)};d.sqr=function(e){return e*e};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(d,a){function z(q,u){return{kind:"array",itemType:q,n:u}}function r(q){if("array"===q.kind){const u=
r(q.itemType);return"number"===typeof q.n?`array<${u}, ${q.n}>`:"value"===q.itemType.kind?"array":`array<${u}>`}return q.kind}function p(q){if(null===q)return l;if("string"===typeof q)return c;if("boolean"===typeof q)return h;if("number"===typeof q)return e;if(q instanceof a)return k;if(Array.isArray(q)){let u;for(const v of q){const C=p(v);if(!u)u=C;else if(u!==C){u=f;break}}return z(u||f,q.length)}return"object"===typeof q?b:f}function g(q,u){if("array"===u.kind)return"array"===q.kind&&(0===q.n&&
"value"===q.itemType.kind||g(q.itemType,u.itemType))&&("number"!==typeof u.n||u.n===q.n);if("value"===u.kind)for(const v of n)if(g(q,v))return!0;return u.kind===q.kind}const l={kind:"null"},e={kind:"number"},c={kind:"string"},h={kind:"boolean"},k={kind:"color"},b={kind:"object"},f={kind:"value"},n=[l,e,c,h,k,b,z(f)];d.BooleanType=h;d.ColorType=k;d.NullType=l;d.NumberType=e;d.ObjectType=b;d.StringType=c;d.ValueType=f;d.arrayType=z;d.getType=p;d.matchType=g;d.typeToString=r;d.valueToString=function(q){if(null===
q)return"";const u=typeof q;return"string"===u?q:"number"===u||"boolean"===u?String(q):q instanceof a?q.toString():JSON.stringify(q)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(d,a,z,r,p){return function(){function g(e,c){this.isDataDriven=!1;this.interpolator=
null;switch(e.type){case "number":var h=!0;break;case "color":h=!0;break;case "array":h="number"===e.value;break;default:h=!1}null==c&&(c=e.default);if(Array.isArray(c)&&0<c.length&&r.ops[c[0]]){h={number:p.NumberType,color:p.ColorType,string:p.StringType,boolean:p.BooleanType,enum:p.StringType};try{var k="array"===e.type?p.arrayType(h[e.value]||p.ValueType,e.length):h[e.type];const b=r.createExpression(c,null,k);this.getValue=this._buildExpression(b,e);this.isDataDriven=!0;b instanceof r.Interpolate&&
b.input instanceof r.Zoom&&(this.interpolator=b)}catch(b){console.log(b.message),this.getValue=this._buildSimple(e.default)}}else{h&&"interval"===c.type&&(h=!1);if(k=c&&c.stops&&0<c.stops.length)for(const b of c.stops)b[1]=this._validate(b[1],e);if(this.isDataDriven=c?!!c.property:!1)if(void 0!==c.default&&(c.default=this._validate(c.default,e)),k)switch(c.type){case "identity":this.getValue=this._buildIdentity(c,e);break;case "categorical":this.getValue=this._buildCategorical(c,e);break;default:this.getValue=
h?this._buildInterpolate(c,e):this._buildInterval(c,e)}else this.getValue=this._buildIdentity(c,e);else k?this.getValue=h?this._buildZoomInterpolate(c):this._buildZoomInterval(c):(c=this._validate(c,e),this.getValue=this._buildSimple(c))}}var l=g.prototype;l._validate=function(e,c){if("number"===c.type){if(e<c.minimum)return c.minimum;if(e>c.maximum)return c.maximum}else"color"===c.type?e=g._parseColor(e):"enum"===c.type?"string"===typeof e&&(e=c.values.indexOf(e)):"array"===c.type&&"enum"===c.value?
e=e.map(h=>"string"===typeof h?c.values.indexOf(h):h):"string"===c.type&&(e=p.valueToString(e));return e};l._buildSimple=function(e){return()=>e};l._buildExpression=function(e,c){return(h,k)=>{try{const b=e.evaluate(k,h);return void 0===b?c.default:this._validate(b,c)}catch(b){return console.log(b.message),c.default}}};l._buildIdentity=function(e,c){return(h,k)=>{let b;k&&(b=k.values[e.property]);void 0!==b&&(b=this._validate(b,c));return null!=b?b:void 0!==e.default?e.default:c.default}};l._buildCategorical=
function(e,c){return(h,k)=>{let b;k&&(b=k.values[e.property]);b=this._categorical(b,e.stops);return void 0!==b?b:void 0!==e.default?e.default:c.default}};l._buildInterval=function(e,c){return(h,k)=>{let b;k&&(b=k.values[e.property]);return"number"===typeof b?this._interval(b,e.stops):void 0!==e.default?e.default:c.default}};l._buildInterpolate=function(e,c){return(h,k)=>{let b;k&&(b=k.values[e.property]);return"number"===typeof b?this._interpolate(b,e.stops,e.base||1):void 0!==e.default?e.default:
c.default}};l._buildZoomInterpolate=function(e){return c=>this._interpolate(c,e.stops,e.base||1)};l._buildZoomInterval=function(e){return c=>this._interval(c,e.stops)};l._categorical=function(e,c){const h=c.length;for(let k=0;k<h;k++)if(c[k][0]===e)return c[k][1]};l._interval=function(e,c){const h=c.length;let k=0;for(let b=0;b<h;b++)if(c[b][0]<=e)k=b;else break;return c[k][1]};l._interpolate=function(e,c,h){const k=c.length;for(let n=0;n<k;n++){const q=c[n];if(q[0]<=e)var b=q;else{var f=q;break}}if(b&&
f){c=f[0]-b[0];e-=b[0];h=1===h?e/c:(h**e-1)/(h**c-1);if(Array.isArray(b[1])){b=b[1];f=f[1];e=[];for(c=0;c<b.length;c++)e.push(z.interpolate(b[c],f[c],h));return e}return z.interpolate(b[1],f[1],h)}if(b)return b[1];if(f)return f[1]};g._isEmpty=function(e){for(const c in e)if(e.hasOwnProperty(c))return!1;return!0};g._parseColor=function(e){if(Array.isArray(e))return e;"string"===typeof e&&(e=new a(e));if(e instanceof a&&!this._isEmpty(e))return a.toUnitRGBA(e)};return d._createClass(g)}()})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../2d/engine/vectorTiles/SchemaHelper ../../2d/engine/vectorTiles/TileHandler3D ../../2d/engine/vectorTiles/VTLPainter3D ../../2d/engine/vectorTiles/style/StyleRepository ./LayerView3D ./TiledLayerView3D ../terrain/terrainUtils ../../layers/LayerView".split(" "),
function(d,a,z,r,p,g,l,e,c,h,k,b,f,n,q,u,v,C,y){function D(E){return A=>E.immediate.schedule(A)}e=function(E){function A(){var w=G.apply(this,arguments);w._tileHandlerController=null;w.type="vector-tile-3d";return w}d._inherits(A,E);var G=d._createSuper(A);E=A.prototype;E.initialize=function(){if(r.isNone(this.layer.fullExtent))this.addResolvingPromise(Promise.reject(new z("vectortilelayerview:full-extent-undefined","This layer view's layer does not define a fullExtent.")));else{var {basemapTerrain:w,
spatialReference:I,state:K,viewingMode:Q}=this.view,L="local"===Q&&!C.vtlAssumes256PixelSizeAsDefault(I)||C.test.force512VTL,S=this.layer.tileInfo.spatialReference.isGeographic;L=L?this.layer.tileInfo:this.layer.tileInfo.getOrCreateCompatible(256,S?1:2);L=this._getTileInfoSupportError(L,this.layer.fullExtent);if(r.isSome(L))return this.addResolvingPromise(Promise.reject(L));L=g.whenOnce(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{var R=w.tilingScheme,J=R.pixelSize;this.schemaHelper=
new b.SchemaHelper(J,r.isSome(w.spatialReference)&&w.spatialReference.isGeographic);J=256===J?this.layer.tileInfo.getOrCreateCompatible(256,this.layer.tileInfo.spatialReference.isGeographic?1:2):this.view.spatialReference?.isGeographic?this.layer.tileInfo.getOrCreateCompatible(512,.5):this.layer.tileInfo;if(R=this._getTileInfoCompatibilityError(J,R))throw R;this.tileInfo=J});this._tileHandlerController=new AbortController;S=this.view.resourceController;this._memCache=S.memoryController.newCache(this.layer.uid,
R=>{R.release()});var O=new q(this.layer.currentStyleInfo.style),P=w.mapTileRequester;this._tileHandler=new f(this.layer,O,K.contentPixelRatio,this._memCache,P);var T=this._tileHandlerController.signal,N=D(S);S=this._tileHandler.start({signal:T,schedule:N});O=this._tileHandler.spriteMosaic;O.then(R=>{!p.isAborted(T)&&this._tileHandler&&(this.painter=new n(R,this._tileHandler.glyphMosaic))});S.then(()=>this._tileHandlerController=null);this.updatingHandles.add(()=>({style:this.layer.currentStyleInfo.style,
pixelRatio:this.view.state?.contentPixelRatio}),({style:R,pixelRatio:J})=>{this._tileHandlerController&&this._tileHandlerController.abort();this._tileHandlerController=new AbortController;this._memCache.clear();R=new q(R);const W=new f(this.layer,R,J,this._memCache,P);J=W.start({signal:this._tileHandlerController.signal,schedule:N});R=W.spriteMosaic;J.then(()=>this._tileHandlerController=null);this.updatingHandles.addPromise(Promise.all([J,R]).then(([,U])=>{const Y=this._tileHandler,Z=this.painter;
this.painter=new n(U,W.glyphMosaic);this._tileHandler=W;this.emit("data-changed");Y.destroy();Z&&Z.dispose()}))});L=Promise.all([L,S,O]);this.addResolvingPromise(L)}};E.destroy=function(){this.painter=r.disposeMaybe(this.painter);this._tileHandlerController=r.abortMaybe(this._tileHandlerController);r.destroyMaybe(this._tileHandler);this._memCache=r.destroyMaybe(this._memCache);this._tileHandler=null};E.fetchTile=async function(w,I,K,Q){return this._tileHandler.getVectorTile(w,I,K,Q)};d._createClass(A,
[{key:"dataLevelRange",get:function(){var w=this.tileInfo.lods;w=this.levelRangeFromScaleRange(w[0].scale,w[w.length-1].scale);1===w.minLevel&&256===this.tileInfo.size[0]&&(w.minLevel=0);return w}}]);return A}(v.TiledLayerView3D(u.LayerView3D(y)));a.__decorate([l.property()],e.prototype,"layer",void 0);a.__decorate([l.property()],e.prototype,"dataLevelRange",null);a.__decorate([l.property()],e.prototype,"updatingProgressValue",void 0);return e=a.__decorate([k.subclass("esri.views.3d.layers.VectorTileLayerView3D")],
e)});