// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/has ../../../../../core/maybe ../../../../../core/reactiveUtils ../ManipulatorType ./config ./Manipulation ./MoveXYAxisManipulation ./MoveXYDiscManipulation ./MoveZManipulation".split(" "),function(k,p,v,t,w,x,y,q,u,r,z,A,B){r=function(d){function m(a){var b=C.call(this);b._handles=new v;b._interactive=!0;const {tool:e,view:c,snapToScene:f,radius:g}=a;b._view=
c;b.xyManipulation=new A.MoveXYDiscManipulation({tool:e,view:c,snapToScene:f,radius:g});b.xyAxisManipulation=new z.MoveXYAxisManipulation({tool:e,view:c,radius:g});b.zManipulation=new B.MoveZManipulation({tool:e,view:c,radius:g});b.xyManipulation.available=a.xyAvailable;b.xyAxisManipulation.available=a.xyAxisAvailable;b.zManipulation.available=a.zAvailable;b._autoHideXYAxis();b.forEachManipulator(h=>b._handles.add(h.events.on("grab-changed",()=>b._updateManipulatorInteractivity())));return b}p._inherits(m,
d);var C=p._createSuper(m);d=m.prototype;d.destroy=function(){this._handles.destroy();this.xyManipulation.destroy();this.xyAxisManipulation.destroy();this.zManipulation.destroy()};d.createGraphicDragPipeline=function(a,b,e){return t.handlesGroup([this.xyManipulation.createGraphicDragPipeline((c,f,g,h,l)=>a(k.ManipulationType.XY,c,f,g,h,l),b,e),this.xyAxisManipulation.createGraphicDragPipeline((c,f,g,h,l)=>a(k.ManipulationType.XY_AXIS,c,f,g,h,l),b,e),this.zManipulation.createGraphicDragPipeline((c,
f,g,h,l)=>a(k.ManipulationType.Z,c,f,g,h,l),b,e)])};d.createDragPipeline=function(a,b,e,c){return t.handlesGroup([this.xyManipulation.createDragPipeline((f,g,h,l,n)=>a(k.ManipulationType.XY,f,g,h,l,n),b,e,c),this.xyAxisManipulation.createDragPipeline((f,g,h,l,n)=>a(k.ManipulationType.XY_AXIS,f,g,h,l,n),b,e,c),this.zManipulation.createDragPipeline((f,g,h,l,n)=>a(k.ManipulationType.Z,f,g,h,l,n),e)])};d.forEachManipulator=function(a){this.xyManipulation.forEachManipulator(b=>a(b,q.ManipulatorType.TRANSLATE_XY));
this.xyAxisManipulation.forEachManipulator(b=>a(b,q.ManipulatorType.TRANSLATE_XY));this.zManipulation.forEachManipulator(b=>a(b,q.ManipulatorType.TRANSLATE_Z))};d._autoHideXYAxis=function(){const a=this.xyAxisManipulation;var b=this.xyManipulation;if(!w("esri-mobile")){var e=[];b.forEachManipulator(c=>e.push(c));a.forEachManipulator(c=>e.push(c));b=()=>{const c=[];this._xyAxisVisible||a.forEachManipulator(f=>c.push(f.disableDisplay()));this._handles.remove("disable-xy-axis-display");this._handles.add(c,
"disable-xy-axis-display")};for(const c of e)this._handles.add(c.events.on("focus-changed",b));this._view.inputManager&&this._handles.add(y.when(()=>this._view.inputManager?.latestPointerType,b));b()}};d._updateManipulatorInteractivity=function(){const a=this.grabbing;this.forEachManipulator(b=>{b.interactive=!a&&this._interactive||b.grabbing})};m.radiusForSymbol=function(a){return(a=x.isSome(a)&&"point-3d"===a.type&&a.symbolLayers)&&0<a.length&&a.some(b=>"icon"===b.type)?u.DISC_RADIUS_SMALL:u.DISC_RADIUS};
p._createClass(m,[{key:"snapToScene",set:function(a){this.xyManipulation.snapToScene=a}},{key:"angle",set:function(a){this.xyAxisManipulation.angle=a}},{key:"interactive",set:function(a){this._interactive!==a&&(this._interactive=a,this._updateManipulatorInteractivity())}},{key:"radius",set:function(a){this.xyAxisManipulation.radius=a;this.xyManipulation.radius=a;this.zManipulation.radius=a}},{key:"displayScale",set:function(a){this.xyManipulation.displayScale=a;this.xyAxisManipulation.displayScale=
a}},{key:"_xyAxisVisible",get:function(){const a=this.xyManipulation.someManipulator(b=>b.focused)||this.xyAxisManipulation.someManipulator(b=>b.focused);return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||a}}]);return m}(r.Manipulation);k.ManipulationType=void 0;(function(d){d[d.XY=0]="XY";d[d.XY_AXIS=1]="XY_AXIS";d[d.Z=2]="Z"})(k.ManipulationType||(k.ManipulationType={}));k.MoveManipulation=r;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});