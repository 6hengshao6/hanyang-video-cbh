// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ./VisualElement ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/UpdatePolicy ../../webgl-engine/lib/WebGLLayer".split(" "),function(k,g,e,l,m,h,n,p,q){h=function(c){function f(a){a=r.call(this,a.view);a._resources=null;a._transform=m.create();return a}g._inherits(f,c);var r=g._createSuper(f);c=f.prototype;c.recreate=function(){this.attached&&this.createResources()};
c.recreateGeometry=function(){if(!e.isNone(this._resources)){var a=this._resources.object,b=this.view._stage;b.removeMany(a.geometries);a.removeAllGeometries();this.createGeometries(a);a.visible=this.visible;b.addMany(a.geometries)}};c.createResources=function(){this.destroyResources();const a=this.view._stage;if(a){var b=new q.WebGLLayer({pickable:!1,updatePolicy:p.UpdatePolicy.SYNC});a.add(b);var d=new n.Object3D({castShadow:!1});d.transformation=this._transform;this.createExternalResources();this.createGeometries(d);
a.addMany(d.geometries);this.forEachExternalMaterial(t=>a.add(t));a.add(d);b.add(d);d.visible=this.visible;this._resources={layer:b,object:d}}};c.destroyResources=function(){const a=this.view._stage;!e.isNone(this._resources)&&a&&(a.remove(this._resources.object),a.remove(this._resources.layer),this.forEachExternalMaterial(b=>{a.remove(b);b.dispose()}),a.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)};c.updateVisibility=
function(a){e.isNone(this._resources)||(this._resources.object.visible=a)};g._createClass(f,[{key:"object",get:function(){return e.isSome(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(a){l.copy(this._transform,a);e.isSome(this._resources)&&(this._resources.object.transformation=this._transform)}}]);return f}(h.VisualElement);k.Object3DVisualElement=h;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});