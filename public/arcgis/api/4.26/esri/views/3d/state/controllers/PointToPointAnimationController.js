// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/vec3f64 ../../../ViewAnimation ../../animation/pointToPoint/Animation ./AnimationController ../../webgl-engine/lib/Camera ../../webgl-engine/lib/Intersector ../../../animation/easing".split(" "),
function(e,c,h,k,y,z,A,m,n,p,q,r,t,u,v){e.PointToPointAnimationController=function(b){function d(a){a=w.call(this,a);a.mode="interaction";a._hasTarget=!1;return a}c._inherits(d,b);var w=c._createSuper(d);b=d.prototype;b.initialize=function(){this.animation=new q.Animation(this.view.state.viewingMode);this.viewAnimation="interaction"===this.mode?null:new p};b.begin=function(a,f){this._hasTarget=!0;f=this.animationSettings(f);g.copyFrom(this.view.state.camera);const x=u.newIntersector(this.view.state.viewingMode);
this.intersectionHelper.intersectRay(g.ray,x,l)&&(g.center=l);this.animation.update(g,a,f);this.animation.finished&&this.finish()};b.finish=function(){this.animation.currentTime=this.animation.time;c._get(c._getPrototypeOf(d.prototype),"finish",this).call(this)};b.stepController=function(a,f){this._hasTarget&&this.animation.step(a,f)};b.onControllerEnd=function(a){this._hasTarget&&(this.animation.cameraAt(this.animation.currentTime/this.animation.time,a),this.animation.currentTime=this.animation.time);
c._get(c._getPrototypeOf(d.prototype),"onControllerEnd",this).call(this,a)};b.animationSettings=function(a={}){return{apex:{maximumDistance:this.view.state.constraints.clampAltitude(Infinity)/6,ascensionFactor:void 0,descensionFactor:void 0},...a,easing:"string"===typeof a.easing?v.EasingFunctions[a.easing]:a.easing}};c._createClass(d,[{key:"intersectionHelper",get:function(){return this.view.sceneIntersectionHelper}},{key:"isInteractive",get:function(){return"interaction"===this.mode}},{key:"steppingFinished",
get:function(){return this._hasTarget&&this.animation.finished}}]);return d}(r.AnimationController);h.__decorate([k.property({constructOnly:!0})],e.PointToPointAnimationController.prototype,"mode",void 0);h.__decorate([k.property({readOnly:!0})],e.PointToPointAnimationController.prototype,"isInteractive",null);e.PointToPointAnimationController=h.__decorate([m.subclass("esri.views.3d.state.controllers.PointToPointAnimationController")],e.PointToPointAnimationController);const g=new t.Camera,l=n.create();
Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});