// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Handles ../../../../core/maybe ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../camera/intersectionUtils ../../camera/constraintUtils/surfaceCollision ./CameraController".split(" "),function(c,e,g,k,l,m,r,t,u,n,p,h,f){c.SurfaceCollisionCorrectionController=
function(b){function d(a){a=q.call(this,a);a._handles=new k;return a}e._inherits(d,b);var q=e._createSuper(d);b=d.prototype;b.onControllerStart=function(){this.state=f.State.Running;this._handles.add(this.view.basemapTerrain.on("elevation-change",a=>this._handleElevationChangeEvent(a)));this._applyCorrection()};b.onControllerEnd=function(){this._handles.removeAll()};b.stepController=function(){};b._handleElevationChangeEvent=function(a){l.isSome(a.spatialReference)&&!p.eyeWithinExtent(this.view,this.desiredCamera,
a.extent,a.spatialReference)||this._applyCorrection()};b._applyCorrection=function(){this.view.state.updateCamera(a=>{a.copyViewFrom(this.desiredCamera);h.applySurfaceCollisionConstraint(this.view,a,h.Mode.EYE_AND_CENTER)||this.constraintEnabled||(this.state=f.State.Stopped)})};e._createClass(d,[{key:"desiredCamera",set:function(a){this._set("desiredCamera",a.clone())}},{key:"canStop",get:function(){return!0}},{key:"constraintEnabled",get:function(){return this.view.state.constraints.collision.enabled}}]);
return d}(f.CameraController);g.__decorate([m.property({constructOnly:!0})],c.SurfaceCollisionCorrectionController.prototype,"desiredCamera",null);c.SurfaceCollisionCorrectionController=g.__decorate([n.subclass("esri.views.3d.state.controllers.SurfaceCollisionCorrectionController")],c.SurfaceCollisionCorrectionController);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});