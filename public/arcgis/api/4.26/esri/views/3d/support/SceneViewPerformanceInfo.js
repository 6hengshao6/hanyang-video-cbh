// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/byteSizeEstimations ../../../core/maybe ../layers/support/MemoryManagedLayerView ./LayerPerformanceInfo ../terrain/terrainUtils".split(" "),function(e,f,d,g,h,k){return e._createClass(function(a){this.usedMemory=this.totalMemory=0;this.quality=1;this.edgesMemory=this.terrainMemory=this.load=0;this.layerPerformanceInfos=[];if(d.isSome(a.resourceController)){var b=a.resourceController.memoryController;this.totalMemory=(b.maxMemory??0)*
f.ByteSizeUnit.MEGABYTES;this.usedMemory=Math.round(b.usedMemory*this.totalMemory);this.quality=b.memoryFactor;this.load=a.resourceController.scheduler.load}this.terrainMemory=a.basemapTerrain?.usedMemory??0;b=a._stage&&a._stage.renderView&&a._stage.renderer.edgeView;this.edgesMemory=d.isSome(b)?b.usedMemory:0;a.allLayerViews.items.forEach(c=>{(g.isMemoryManagedLayerView(c)||k.isSurfaceLayerView(c))&&this.layerPerformanceInfos.push(new h(c,a))});this.layerPerformanceInfos.sort((c,l)=>l.memory-c.memory)})});