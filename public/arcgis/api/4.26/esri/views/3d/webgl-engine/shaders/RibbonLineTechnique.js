// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/OrderIndependentTransparency ../lib/Program ../lib/RenderSlot ../lib/StencilUtils ../lib/TransparencyPassType ../lib/VertexAttribute ../../../../chunks/RibbonLine.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),function(x,n,k,q,y,l,g,z,r,b,t,c,A,u,e){const v=new Map([[c.VertexAttribute.POSITION,
0],[c.VertexAttribute.SUBDIVISIONFACTOR,1],[c.VertexAttribute.UV0,2],[c.VertexAttribute.AUXPOS1,3],[c.VertexAttribute.AUXPOS2,4],[c.VertexAttribute.COLOR,5],[c.VertexAttribute.COLORFEATUREATTRIBUTE,5],[c.VertexAttribute.SIZE,6],[c.VertexAttribute.SIZEFEATUREATTRIBUTE,6],[c.VertexAttribute.OPACITYFEATUREATTRIBUTE,7],[c.VertexAttribute.OBJECTANDLAYERIDCOLOR,8]]);l=function(f){function d(){return B.apply(this,arguments)}k._inherits(d,f);var B=k._createSuper(d);f=d.prototype;f.initializeProgram=function(a){return new z.Program(a.rctx,
d.shader.get().build(this.configuration),v)};f._makePipelineState=function(a,m){const h=this.configuration,p=a===t.TransparencyPassType.NONE,C=a===t.TransparencyPassType.FrontFace;return e.makePipelineState({blending:h.output===q.ShaderOutput.Color||h.output===q.ShaderOutput.Alpha?p?g.blendingDefault:g.oitBlending(a):null,depthTest:{func:g.oitDepthTest(a)},depthWrite:p?h.writeDepth?e.defaultDepthWriteParams:null:g.oitDepthWrite(a),colorWrite:e.defaultColorWriteParams,stencilWrite:h.hasOccludees?b.stencilWriteMaskOn:
null,stencilTest:h.hasOccludees?m?b.stencilToolMaskBaseParams:b.stencilBaseAllZerosParams:null,polygonOffset:p||C?h.hasPolygonOffset?w:null:g.OITPolygonOffset})};f.initializePipeline=function(){var a=this.configuration;a.occluder&&(a=a.hasPolygonOffset?w:null,this._occluderPipelineTransparent=e.makePipelineState({blending:g.blendingDefault,polygonOffset:a,depthTest:b.depthCompareAlways,depthWrite:null,colorWrite:e.defaultColorWriteParams,stencilWrite:null,stencilTest:b.stencilToolTransparentOccluderParams}),
this._occluderPipelineOpaque=e.makePipelineState({blending:g.blendingDefault,polygonOffset:a,depthTest:b.depthCompareAlways,depthWrite:null,colorWrite:e.defaultColorWriteParams,stencilWrite:b.stencilWriteMaskOff,stencilTest:b.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=e.makePipelineState({blending:null,polygonOffset:a,depthTest:b.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:b.stencilWriteMaskOn,stencilTest:b.stencilToolMaskBaseParams}));this._occludeePipelineState=
this._makePipelineState(this.configuration.transparencyPassType,!0);return this._makePipelineState(this.configuration.transparencyPassType,!1)};f.getPipelineState=function(a,m){return m?this._occludeePipelineState:this.configuration.occluder?a===r.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:a===r.RenderSlot.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:k._get(k._getPrototypeOf(d.prototype),"getPipelineState",this).call(this,a,m)};k._createClass(d,
[{key:"primitiveType",get:function(){return this.configuration.wireframe?u.PrimitiveType.LINES:u.PrimitiveType.TRIANGLE_STRIP}}]);return d}(l.ShaderTechnique);l.shader=new y.ReloadableShaderModule(A.RibbonLine,()=>new Promise((f,d)=>x(["./RibbonLine.glsl"],f,d)));const w={factor:0,units:-4};n.RibbonLineTechnique=l;n.vertexAttributeLocations=v;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});