// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/mat2 ../../../../chunks/mat2f64 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ./PathExtruder ./PathGeometry".split(" "),function(v,l,p,E,F,w,z,a,e,G,A){let x=function(){function g(){this.vLeft=e.create();this.vRight=e.create();this.vMinSiblingLength=0;this.frame=new G.Frame2D}g.prototype.setFrameFromUpVector=function(d){a.copy(this.frame.up,
d);a.add(q,this.vLeft,this.vRight);a.normalize(q,q);a.scale(B,this.frame.up,a.dot(q,this.frame.up));a.subtract(t,q,B);a.normalize(t,t);a.cross(this.frame.right,t,this.frame.up)};l._createClass(g,[{key:"foldingAngle",get:function(){return Math.PI-this.rotationAngle}}]);return g}(),H=function(g){function d(){return y.apply(this,arguments)}l._inherits(d,g);var y=l._createSuper(d);d.prototype.applyMiterStretch=function(b,f){var c=this.rotationAngle;if(0>=Math.abs(c))return f;c=p.reciprocalClamped(Math.cos(.5*
c));return w.set(b,(1+(c-1))*f[0],f[1])};l._createClass(d,[{key:"rotationFrameUp",get:function(){return this.frame.up}},{key:"rotationRight",get:function(){return z.UNIT_X}},{key:"rotationAngle",get:function(){a.scale(h,this.frame.up,a.dot(this.frame.up,this.vLeft));a.subtract(h,this.vLeft,h);a.negate(h,h);a.normalize(h,h);a.scale(m,this.frame.up,a.dot(this.frame.up,this.vRight));a.subtract(m,this.vRight,m);a.normalize(m,m);a.cross(u,this.rotationFrameUp,this.vLeft);return Math.sign(a.dot(u,this.vRight))*
(Math.PI-p.acosClamped(a.dot(h,m)))}},{key:"maxStretchDistance",get:function(){return Math.abs(this.vMinSiblingLength/Math.cos(.5*this.foldingAngle))}}]);return d}(x),J=function(g){function d(){return y.apply(this,arguments)}l._inherits(d,g);var y=l._createSuper(d);d.prototype.applyMiterStretch=function(b,f){var c=this.rotationAngle;if(0===Math.abs(c))return f;c=p.reciprocalClamped(Math.cos(.5*c));const k=this.rotationRight;c=E.set(I,1+(c-1)*k[0]*k[0],(c-1)*k[0]*k[1],(c-1)*k[0]*k[1],1+(c-1)*k[1]*
k[1]);return w.transformMat2(b,f,c)};l._createClass(d,[{key:"rotationFrameUp",get:function(){const b=Math.sign(a.dot(this.frame.right,this.vRight));a.cross(r,this.vRight,this.vLeft);a.scale(r,r,b);return a.normalize(r,r)}},{key:"rotationRight",get:function(){var b=this.rotationFrameUp,f=a.dot(b,this.frame.up);b=a.dot(b,this.frame.right);a.scale(n,this.frame.up,-b);a.scale(C,this.frame.right,f);a.add(n,n,C);a.normalize(n,n);f=this.frame;b=n;w.set(D,a.dot(b,f.right),a.dot(b,f.up));return D}},{key:"rotationAngle",
get:function(){const b=Math.sign(a.dot(this.frame.right,this.vRight));a.negate(u,this.vLeft);return-b*(Math.PI-p.acosClamped(a.dot(u,this.vRight)))}},{key:"maxStretchDistance",get:function(){return Math.abs(this.vMinSiblingLength*p.reciprocalClamped(Math.cos(.5*this.foldingAngle)))}}]);return d}(x);const r=e.create(),D=z.create(),n=e.create(),C=e.create(),u=e.create(),h=e.create(),m=e.create(),B=e.create(),q=e.create(),t=e.create(),I=F.create();v.PathVertex=x;v.newPathVertex=function(g){switch(g){case A.UpVectorAlignment.World:return new H;
case A.UpVectorAlignment.Path:return new J}};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});