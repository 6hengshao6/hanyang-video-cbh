// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/promiseUtils ../core/shaderModules/interfaces ./basicInterfaces ./GLMaterial".split(" "),function(k,g,c,q,r,n,l){l=function(f){function e(b){var a=m.call(this,b);a._numLoading=0;a._disposed=!1;a._textureRepository=b.textureRep;a._textureId=b.textureId;a._acquire(b.textureId,d=>a._texture=d);a._acquire(b.normalTextureId,d=>a._textureNormal=d);a._acquire(b.emissiveTextureId,d=>a._textureEmissive=d);
a._acquire(b.occlusionTextureId,d=>a._textureOcclusion=d);a._acquire(b.metallicRoughnessTextureId,d=>a._textureMetallicRoughness=d);return a}g._inherits(e,f);var m=g._createSuper(e);f=e.prototype;f.dispose=function(){this._texture=c.releaseMaybe(this._texture);this._textureNormal=c.releaseMaybe(this._textureNormal);this._textureEmissive=c.releaseMaybe(this._textureEmissive);this._textureOcclusion=c.releaseMaybe(this._textureOcclusion);this._textureMetallicRoughness=c.releaseMaybe(this._textureMetallicRoughness);
this._disposed=!0};f.ensureResources=function(b){return 0===this._numLoading?n.ResourceState.LOADED:n.ResourceState.LOADING};f.updateTexture=function(b){if(c.isNone(this._texture)||b!==this._texture.id)this._texture=c.releaseMaybe(this._texture),this._textureId=b,this._acquire(this._textureId,a=>this._texture=a)};f._acquire=function(b,a){c.isNone(b)?a(null):(b=this._textureRepository.acquire(b),q.isPromiseLike(b)?(++this._numLoading,b.then(d=>{this._disposed?(c.releaseMaybe(d),a(null)):a(d)}).finally(()=>
--this._numLoading)):a(b))};g._createClass(e,[{key:"textureBindParameters",get:function(){return new p(c.isSome(this._texture)?this._texture.glTexture:null,c.isSome(this._textureNormal)?this._textureNormal.glTexture:null,c.isSome(this._textureEmissive)?this._textureEmissive.glTexture:null,c.isSome(this._textureOcclusion)?this._textureOcclusion.glTexture:null,c.isSome(this._textureMetallicRoughness)?this._textureMetallicRoughness.glTexture:null)}}]);return e}(l);let p=function(f){function e(b=null,
a=null,d=null,t=null,u=null){var h=m.call(this);h.texture=b;h.textureNormal=a;h.textureEmissive=d;h.textureOcclusion=t;h.textureMetallicRoughness=u;return h}g._inherits(e,f);var m=g._createSuper(e);return g._createClass(e)}(r.NoParameters);k.GLTextureMaterial=l;k.GLTextureMaterialBindParameters=p;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});