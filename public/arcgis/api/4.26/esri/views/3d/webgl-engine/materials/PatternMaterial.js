// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec4f64 ../../../../geometry/support/buffer/BufferView ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/basicInterfaces ../lib/GLMaterial ../lib/Material ../lib/OrderIndependentTransparency ../lib/RenderSlot ../lib/Util ../lib/VertexAttribute ./DefaultBufferWriter ./PatternStyle ./TriangleMaterial ./internal/bufferWriterUtils ../shaders/PatternTechnique".split(" "),function(w,h,E,r,F,p,
G,H,I,J,t,u,n,K,L,x,y,z){x=function(c){function d(a){a=q.call(this,a,new D);a.supportsEdges=!0;a._vertexAttributeLocations=z.vertexAttributeLocations;a._configuration=new z.PatternTechniqueConfiguration;return a}h._inherits(d,c);var q=h._createSuper(d);c=d.prototype;c.getConfiguration=function(a,b){this._configuration.output=a;this._configuration.cullFace=this.parameters.cullFace;this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.polygonOffset=this.parameters.polygonOffset;
this._configuration.writeDepth=this.parameters.writeDepth;this._configuration.style=this.parameters.style;this._configuration.patternSpacing=this.parameters.patternSpacing;this._configuration.lineWidth=this.parameters.lineWidth;this._configuration.draped=this.parameters.draped;this._configuration.transparencyPassType=b.transparencyPassType;this._configuration.enableOffset=b.camera.relativeElevation<J.OITPolygonOffsetLimit;this._configuration.hasMultipassTerrain=b.multipassTerrain.enabled;this._configuration.cullAboveGround=
b.multipassTerrain.cullAboveGround;return this._configuration};c.requiresSlot=function(a,b){return b===p.ShaderOutput.Color||b===p.ShaderOutput.Alpha||b===p.ShaderOutput.Highlight||b===p.ShaderOutput.Depth&&this.parameters.writeLinearDepth?a===t.RenderSlot.DRAPED_MATERIAL?!0:b===p.ShaderOutput.Highlight?a===t.RenderSlot.OPAQUE_MATERIAL:a===(this.parameters.writeDepth?t.RenderSlot.TRANSPARENT_MATERIAL:t.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):!1};c.createGLMaterial=function(a){return new M(a)};
c.createBufferWriter=function(){const a=F.newLayout().vec3f(n.VertexAttribute.POSITION).vec4u8(n.VertexAttribute.COLOR).vec4f(n.VertexAttribute.UVMAPSPACE);this.parameters.draped||a.mat3f(n.VertexAttribute.BOUNDINGRECT);return new N(a)};return h._createClass(d)}(x.TriangleMaterial);let M=function(c){function d(){return q.apply(this,arguments)}h._inherits(d,c);var q=h._createSuper(d);c=d.prototype;c._updateParameters=function(a){return this.ensureTechnique(z.PatternTechnique,a)};c._updateOccludeeState=
function(a){a.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:a.hasOccludees})};c.beginSlot=function(a){this._output!==p.ShaderOutput.Color&&this._output!==p.ShaderOutput.Alpha||this._updateOccludeeState(a);return this._updateParameters(a)};return h._createClass(d)}(H),N=function(c){function d(){return q.apply(this,arguments)}h._inherits(d,c);var q=h._createSuper(d);c=d.prototype;c.write=function(a,b,e,l,k){for(const m of this.vertexBufferLayout.fieldNames){b=
e.vertexAttributes.get(m);const f=e.indices.get(m);if(b&&f)switch(m){case n.VertexAttribute.POSITION:u.assert(3===b.size);var g=l.getField(m,r.BufferViewVec3f);g&&y.writePosition(f,b.data,a,g,k);break;case n.VertexAttribute.COLOR:u.assert(3===b.size||4===b.size);(g=l.getField(m,r.BufferViewVec4u8))&&y.writeColor(f,b.data,b.size,g,k);break;case n.VertexAttribute.UVMAPSPACE:u.assert(4===b.size);(g=l.getField(m,r.BufferViewVec4f))&&y.writeBufferVec4(f,b.data,g,k);break;case n.VertexAttribute.BOUNDINGRECT:u.assert(9===
b.size),(g=l.getField(m,r.BufferViewMat3f))&&this.writeBoundingRect(f,b.data,a,g,k)}}};c.writeBoundingRect=function(a,b,e,l,k){const g=l.typedBuffer;l=l.typedBufferStride;const m=a.length;k*=l;for(let A=0;A<m;++A){const v=9*a[A];var f=b[v];const B=b[v+1],C=b[v+2];g[k]=e[0]*f+e[4]*B+e[8]*C+e[12];g[k+1]=e[1]*f+e[5]*B+e[9]*C+e[13];g[k+2]=e[2]*f+e[6]*B+e[10]*C+e[14];for(f=3;9>f;++f)g[k+f]=b[v+f];k+=l}};return h._createClass(d)}(K.DefaultBufferWriter),D=function(c){function d(){var a=q.apply(this,arguments);
a.color=E.fromValues(1,1,1,1);a.writeDepth=!0;a.writeLinearDepth=!1;a.polygonOffset=!1;a.hasSlicePlane=!1;a.cullFace=G.CullFaceOptions.None;a.hasOccludees=!1;a.style=L.Style.Cross;a.patternSpacing=10;a.lineWidth=1;a.draped=!0;return a}h._inherits(d,c);var q=h._createSuper(d);return h._createClass(d)}(I.MaterialParameters);w.Parameters=D;w.PatternMaterial=x;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});