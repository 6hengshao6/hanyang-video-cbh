// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../assets ../../../../../core/Accessor ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../support/requestImageUtils ../../core/shaderModules/interfaces ../../lib/basicInterfaces ../../../../webgl/enums ../../../../webgl/Texture".split(" "),
function(c,d,k,n,w,p,h,q,z,A,B,x,r,y,l,g,t){c.WaterTextureRepository=function(e){function b(){var f=m.apply(this,arguments);f._passParameters=new u;f._loading=0;return f}d._inherits(b,e);var m=d._createSuper(b);e=b.prototype;e.destroy=function(){this._passParameters.waveNormal=h.disposeMaybe(this._passParameters.waveNormal);this._passParameters.wavePertubation=h.disposeMaybe(this._passParameters.wavePertubation)};e.ensureResources=function(f){if(0<this._loading)return l.ResourceState.LOADING;if(h.isSome(this._passParameters.waveNormal)&&
h.isSome(this._passParameters.wavePertubation))return l.ResourceState.LOADED;const v={target:g.TextureType.TEXTURE_2D,pixelFormat:g.PixelFormat.RGBA,dataType:g.PixelType.UNSIGNED_BYTE,wrapMode:g.TextureWrapMode.REPEAT,samplingMode:g.TextureSamplingMode.LINEAR_MIPMAP_LINEAR,hasMipmap:!0,maxAnisotropy:8};++this._loading;r.requestImage(n.getAssetUrl("esri/images/materials/water/normals.jpg")).then(a=>this._passParameters.waveNormal=new t.Texture(f,{...v,width:a.width,height:a.height},a)).catch(a=>p.getLogger(this.declaredClass).error("Failed to load water material normal texture.",
a)).finally(()=>--this._loading);++this._loading;r.requestImage(n.getAssetUrl("esri/images/materials/water/perturbation.jpg")).then(a=>this._passParameters.wavePertubation=new t.Texture(f,{...v,width:a.width,height:a.height},a)).catch(a=>p.getLogger(this.declaredClass).error("Failed to load water material pertubation texture.",a)).finally(()=>--this._loading);return l.ResourceState.LOADING};d._createClass(b,[{key:"passParameters",get:function(){return this._passParameters}},{key:"updating",get:function(){return 0<
this._loading}}]);return b}(w);k.__decorate([q.property()],c.WaterTextureRepository.prototype,"_loading",void 0);k.__decorate([q.property({type:Boolean,readOnly:!0})],c.WaterTextureRepository.prototype,"updating",null);c.WaterTextureRepository=k.__decorate([x.subclass("esri.views.3d.webgl-engine.materials.internal.WaterTextureRepository")],c.WaterTextureRepository);let u=function(e){function b(){return m.apply(this,arguments)}d._inherits(b,e);var m=d._createSuper(b);return d._createClass(b)}(y.NoParameters);
c.WaterTexturePassParameters=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});