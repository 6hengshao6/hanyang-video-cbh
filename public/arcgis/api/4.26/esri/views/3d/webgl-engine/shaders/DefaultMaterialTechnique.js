// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../ViewingMode ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/attributes/NormalAttribute.glsl ../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl ../core/shaderLibrary/attributes/VertexNormal.glsl ../core/shaderLibrary/util/AlphaCutoff ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/basicInterfaces ../lib/DefaultVertexAttributeLocations ../lib/Material ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../lib/TransparencyPassType ../../../../chunks/DefaultMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(z,m,f,g,A,B,u,C,v,n,D,E,p,h,F,G,q,H,r,w,I,x,k){let J=function(d){function c(){var a=l.apply(this,arguments);a.isSchematic=!1;a.usePBR=!1;a.mrrFactors=g.fromValues(0,1,.5);a.hasVertexColors=!1;a.hasSymbolColors=!1;a.doubleSided=!1;a.doubleSidedType="normal";a.cullFace=h.CullFaceOptions.Back;a.isInstanced=!1;a.hasInstancedColor=!1;a.emissiveFactor=g.fromValues(0,0,0);a.instancedDoublePrecision=!1;a.normalType=C.NormalAttributeType.Attribute;a.receiveSSAO=!0;a.receiveShadows=!0;a.castShadows=
!0;a.shadowMappingEnabled=!1;a.ambient=g.fromValues(.2,.2,.2);a.diffuse=g.fromValues(.8,.8,.8);a.externalColor=A.fromValues(1,1,1,1);a.colorMixMode="multiply";a.opacity=1;a.layerOpacity=1;a.origin=g.create();a.hasSlicePlane=!1;a.hasSliceHighlight=!0;a.offsetTransparentBackfaces=!1;a.vvSize=null;a.vvColor=null;a.vvOpacity=null;a.vvSymbolAnchor=null;a.vvSymbolRotationMatrix=null;a.transparent=!1;a.writeDepth=!0;a.customDepthTest=h.DepthTestFunction.Less;a.textureAlphaMode=h.AlphaDiscardMode.Blend;a.textureAlphaCutoff=
D.defaultMaskAlphaCutoff;a.textureAlphaPremultiplied=!1;a.hasOccludees=!1;a.renderOccluded=G.RenderOccludedFlag.Occlude;return a}f._inherits(c,d);var l=f._createSuper(c);return f._createClass(c)}(n.VertexNormalPassParameters);n=function(d){function c(){var a=l.apply(this,arguments);a.origin=g.create();a.slicePlaneLocalOrigin=a.origin;return a}f._inherits(c,d);var l=f._createSuper(c);return f._createClass(c)}(n.VertexNormalDrawParameters);p=function(d){function c(){return l.apply(this,arguments)}f._inherits(c,
d);var l=f._createSuper(c);d=c.prototype;d.initializeConfiguration=function(a,b){b.spherical=a.viewingMode===B.ViewingMode.Global;b.doublePrecisionRequiresObfuscation=a.rctx.driverTest.doublePrecisionRequiresObfuscation.result;b.textureCoordinateType=b.hasColorTexture||b.hasMetallicRoughnessTexture||b.hasEmissionTexture||b.hasOcclusionTexture||b.hasNormalTexture?v.TextureCoordinateAttributeType.Default:v.TextureCoordinateAttributeType.None;b.objectAndLayerIdColorInstanced=b.instanced};d.initializeProgram=
function(a){return this._initializeProgram(a,c.shader)};d._initializeProgram=function(a,b){return new H.Program(a.rctx,b.get().build(this.configuration),F.Default3D)};d._convertDepthTestFunction=function(a){return a===h.DepthTestFunction.Lequal?x.CompareFunction.LEQUAL:x.CompareFunction.LESS};d._makePipeline=function(a,b){const e=this.configuration,t=a===w.TransparencyPassType.NONE,y=a===w.TransparencyPassType.FrontFace;var K=k.makePipelineState,L=e.output!==u.ShaderOutput.Color&&e.output!==u.ShaderOutput.Alpha||
!e.transparent?null:t?q.blendingDefault:q.oitBlending(a);var M=e.cullFace!==h.CullFaceOptions.None?!0:e.hasSlicePlane?!1:!e.transparent&&!e.doubleSidedMode;return K.call(k,{blending:L,culling:M?k.cullingParams(e.cullFace):null,depthTest:{func:q.oitDepthTest(a,this._convertDepthTestFunction(e.customDepthTest))},depthWrite:t||y?e.writeDepth?k.defaultDepthWriteParams:null:null,colorWrite:k.defaultColorWriteParams,stencilWrite:e.hasOccludees?r.stencilWriteMaskOn:null,stencilTest:e.hasOccludees?b?r.stencilToolMaskBaseParams:
r.stencilBaseAllZerosParams:null,polygonOffset:t||y?null:q.getOITPolygonOffset(e.enableOffset)})};d.initializePipeline=function(){this._occludeePipelineState=this._makePipeline(this.configuration.transparencyPassType,!0);return this._makePipeline(this.configuration.transparencyPassType,!1)};d.getPipelineState=function(a,b){return b?this._occludeePipelineState:f._get(f._getPrototypeOf(c.prototype),"getPipelineState",this).call(this,a,b)};return f._createClass(c)}(p.ShaderTechnique);p.shader=new E.ReloadableShaderModule(I.DefaultMaterial,
()=>new Promise((d,c)=>z(["./DefaultMaterial.glsl"],d,c)));m.DefaultMaterialDrawParameters=n;m.DefaultMaterialPassParameters=J;m.DefaultMaterialTechnique=p;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});