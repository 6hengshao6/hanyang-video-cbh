// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ../shaders/MeasurementArrowTechnique".split(" "),function(A,h,f,q,B,J,K,L,D,M,k,E){let P=function(d){function b(a){a=e.call(this,a,new F);a._configuration=new E.MeasurementArrowTechniqueConfiguration;return a}h._inherits(b,
d);var e=h._createSuper(b);d=b.prototype;d.getConfiguration=function(a,c){this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset;this._configuration.transparent=1>this.parameters.stripeEvenColor[3]||1>this.parameters.stripeOddColor[3]||1>this.parameters.outlineColor[3];this._configuration.transparencyPassType=c.transparencyPassType;return this._configuration};d.dispose=function(){};d.intersect=function(){};d.requiresSlot=function(a,c){return c===K.ShaderOutput.Color&&a===M.RenderSlot.OPAQUE_MATERIAL};
d.createGLMaterial=function(a){return new N(a)};d.createBufferWriter=function(){return new O};return h._createClass(b)}(D.Material),N=function(d){function b(){return e.apply(this,arguments)}h._inherits(b,d);var e=h._createSuper(b);b.prototype.beginSlot=function(a){return this.ensureTechnique(E.MeasurementArrowTechnique,a)};return h._createClass(b)}(L),F=function(d){function b(){var a=e.apply(this,arguments);a.width=32;a.outlineSize=.2;a.outlineColor=B.fromValues(1,.5,0,1);a.stripeEvenColor=B.fromValues(1,
1,1,1);a.stripeOddColor=B.fromValues(1,.5,0,1);a.stripeLength=1;a.polygonOffset=!1;return a}h._inherits(b,d);var e=h._createSuper(b);return h._createClass(b)}(D.MaterialParameters);const Q=J.newLayout().vec3f(k.VertexAttribute.POSITION).vec3f(k.VertexAttribute.NORMAL).vec2f(k.VertexAttribute.UV0).f32(k.VertexAttribute.AUXPOS1),l=q.create(),r=q.create(),v=q.create(),m=q.create(),w=q.create();let O=function(){function d(){this.vertexBufferLayout=Q}var b=d.prototype;b.allocate=function(e){return this.vertexBufferLayout.createBuffer(e)};
b.elementCount=function(e){return 2*(e.indices.get(k.VertexAttribute.POSITION).length/2+1)};b.write=function(e,a,c,x,G){const n=c.vertexAttributes.get(k.VertexAttribute.POSITION).data,C=c.vertexAttributes.get(k.VertexAttribute.NORMAL).data,t=n.length/3;(c=c&&c.indices&&c.indices.get(k.VertexAttribute.POSITION))&&c.length!==2*(t-1)&&console.warn("MeasurementArrowMaterial does not support indices");const H=x.position,I=x.normal,y=x.uv0;c=0;for(let p=0;p<t;++p){var g=3*p;f.set(l,n[g],n[g+1],n[g+2]);
p<t-1&&(g=3*(p+1),f.set(r,n[g],n[g+1],n[g+2]),f.set(w,C[g],C[g+1],C[g+2]),f.normalize(w,w),f.subtract(v,r,l),f.normalize(v,v),f.cross(m,w,v),f.normalize(m,m));g=f.distance(l,r);e&&a&&(f.transformMat4(l,l,e),f.transformMat4(r,r,e),f.transformMat4(m,m,a));const u=G+2*p,z=u+1;H.setVec(u,l);H.setVec(z,l);I.setVec(u,m);I.setVec(z,m);y.set(u,0,c);y.set(u,1,-1);y.set(z,0,c);y.set(z,1,1);p<t-1&&(c+=g)}e=x.auxpos1;for(a=0;a<2*t;++a)e.set(G+a,c)};return h._createClass(d)}();A.MeasurementArrowMaterial=P;A.Parameters=
F;Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});