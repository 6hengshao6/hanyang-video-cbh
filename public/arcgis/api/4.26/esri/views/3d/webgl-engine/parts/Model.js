// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/maybe ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../lib/ContentObjectType ../lib/GridLocalOriginFactory ../lib/ModelDirtySet ../lib/RenderGeometry ../lib/Util ../lib/WebGLLayer".split(" "),function(g,k,n,q,m,r,A,
B,C,t,u,v,w,x,l,p){g.Model=function(d){function h(){var a=y.apply(this,arguments);a.dirtySet=new w({model:k._assertThisInitialized(a)});a._content=new Map;a._originFactory=new v.GridLocalOriginFactory(null);return a}k._inherits(h,d);var y=k._createSuper(h);d=h.prototype;d.getObject=function(a){return this._content.get(a)};d.add=function(a){const b=a.id;l.assert(!this._content.has(b),"Model/Stage already contains object to be added");this._content.set(b,a);p.isWebGLLayer(a)&&this.dirtySet.layerAdded(a)};
d.remove=function(a){l.assert(this._content.has(a.id),"Model/Stage doesn't contain object to be removed");this._content.delete(a.id);a.unload();p.isWebGLLayer(a)&&this.dirtySet.layerRemoved(a)};d.addMany=function(a){for(const b of a)m.isSome(b)&&(l.assert(!this._content.has(b.id),"Model/Stage already contains object to be added"),this._content.set(b.id,b))};d.removeMany=function(a){for(const b of a)l.assert(this._content.has(b.id),"Model/Stage doesn't contain object to be removed"),this._content.delete(b.id),
b.unload()};d.has=function(a){return this._content.has(a.id)};d.forEachOfType=function(a,b){this._content.forEach(c=>{c.type===a&&b(c)})};d.getRenderGeometry=function(a,b){const {shaderTransformer:c,localOrigin:e}=b,f=new x.RenderGeometry(b,{shaderTransformer:c,castShadow:a.castShadow});f.updateTransformation(z=>a.getCombinedStaticTransformation(b,z));f.localOrigin=m.isSome(e)?e:this._originFactory.getOrigin(f.boundingSphere);return f};d.updateRenderGeometryTransformation=function(a,b,c){if(m.isNone(a))return!1;
c.updateTransformation(f=>a.getCombinedStaticTransformation(b,f));const e=this._originFactory.getOrigin(c.boundingSphere);return c.localOrigin!==e};d.getStats=function(){const a={},b=Array.from(this._content.values());for(let c=0;c<u.ContentObjectType.COUNT;++c)a[c]=b.filter(e=>e.type===c).length;return{contentTypes:a,dirtySet:this.dirtySet.formatDebugInfo()}};k._createClass(h,[{key:"test",get:function(){return{content:Array.from(this._content.values())}}}]);return h}(q);n.__decorate([r.property({constructOnly:!0})],
g.Model.prototype,"dirtySet",void 0);g.Model=n.__decorate([t.subclass("esri.views.3d.webgl-engine.parts.Model")],g.Model);Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});