// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/OrderIndependentTransparency ../lib/Program ../lib/RenderSlot ../lib/StencilUtils ../lib/TransparencyPassType ../lib/VertexAttribute ../../../../chunks/LineMarker.glsl ../../../webgl/renderState".split(" "),function(u,n,h,p,v,l,g,w,q,a,x,c,y,d){const r=new Map([[c.VertexAttribute.POSITION,0],[c.VertexAttribute.UV0,
2],[c.VertexAttribute.AUXPOS1,3],[c.VertexAttribute.NORMAL,4],[c.VertexAttribute.COLOR,5],[c.VertexAttribute.COLORFEATUREATTRIBUTE,5],[c.VertexAttribute.SIZE,6],[c.VertexAttribute.SIZEFEATUREATTRIBUTE,6],[c.VertexAttribute.OPACITYFEATUREATTRIBUTE,7]]);l=function(e){function f(){return z.apply(this,arguments)}h._inherits(f,e);var z=h._createSuper(f);e=f.prototype;e.initializeProgram=function(b){return new w.Program(b.rctx,f.shader.get().build(this.configuration),r)};e._makePipelineState=function(b,
m){const k=this.configuration,t=b===x.TransparencyPassType.NONE;return d.makePipelineState({blending:k.output===p.ShaderOutput.Color||k.output===p.ShaderOutput.Alpha?t?g.blendingDefault:g.oitBlending(b):null,depthTest:{func:g.oitDepthTest(b)},depthWrite:t?k.writeDepth?d.defaultDepthWriteParams:null:g.oitDepthWrite(b),colorWrite:d.defaultColorWriteParams,stencilWrite:k.hasOccludees?a.stencilWriteMaskOn:null,stencilTest:k.hasOccludees?m?a.stencilToolMaskBaseParams:a.stencilBaseAllZerosParams:null,polygonOffset:{factor:0,
units:-10}})};e.initializePipeline=function(){this.configuration.occluder&&(this._occluderPipelineTransparent=d.makePipelineState({blending:g.blendingDefault,depthTest:a.depthCompareAlways,depthWrite:null,colorWrite:d.defaultColorWriteParams,stencilWrite:null,stencilTest:a.stencilToolTransparentOccluderParams}),this._occluderPipelineOpaque=d.makePipelineState({blending:g.blendingDefault,depthTest:a.depthCompareAlways,depthWrite:null,colorWrite:d.defaultColorWriteParams,stencilWrite:a.stencilWriteMaskOff,
stencilTest:a.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=d.makePipelineState({blending:null,depthTest:a.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:a.stencilWriteMaskOn,stencilTest:a.stencilToolMaskBaseParams}));this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0);return this._makePipelineState(this.configuration.transparencyPassType,!1)};e.getPipelineState=function(b,m){return m?this._occludeePipelineState:this.configuration.occluder?
b===q.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:b===q.RenderSlot.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:h._get(h._getPrototypeOf(f.prototype),"getPipelineState",this).call(this,b,m)};return h._createClass(f)}(l.ShaderTechnique);l.shader=new v.ReloadableShaderModule(y.LineMarker,()=>new Promise((e,f)=>u(["./LineMarker.glsl"],e,f)));n.LineMarkerTechnique=l;n.vertexAttributeLocations=r;Object.defineProperty(n,Symbol.toStringTag,
{value:"Module"})});