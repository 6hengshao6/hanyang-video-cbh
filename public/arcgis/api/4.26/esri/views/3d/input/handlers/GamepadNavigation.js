// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../state/controllers/GamepadKeyboardController ../../../input/InputHandler".split(" "),function(h,c,l,f,k,g){g=function(e){function d(b){var a=m.call(this,!0);a._view=b;a._watchHandles=new l;a._handle=a.registerIncoming("gamepad",n=>a._handleEventGamepad(n));a._handle.pause();return a}c._inherits(d,e);var m=c._createSuper(d);e=d.prototype;e.onInstall=function(b){c._get(c._getPrototypeOf(d.prototype),
"onInstall",this).call(this,b);this._watchHandles.add([f.watch(()=>this._view.navigation.gamepad.enabled,a=>{a?this._handle.resume():(this._handle.pause(),this._cameraControllerGamepad&&(this._cameraControllerGamepad.finishController(),this._cameraControllerGamepad=null))},f.initial),f.watch(()=>this._view.navigation.gamepad.device,a=>{this._cameraControllerGamepad&&a&&this._cameraControllerGamepad.gamepadDevice!==a&&(this._cameraControllerGamepad.finishController(),this._cameraControllerGamepad=
null)})])};e.onUninstall=function(){this._watchHandles.removeAll();c._get(c._getPrototypeOf(d.prototype),"onUninstall",this).call(this)};e._handleEventGamepad=function(b){var a=this._view.navigation.gamepad.device;if(!a||b.data.device===a)if((a=this._cameraControllerGamepad&&this._cameraControllerGamepad.active)||k.GamepadKeyboardController.activatesFor(this._view,b.data))a||(a=new k.GamepadKeyboardController({view:this._view,gamepadDevice:b.data.device}),this._view.state.switchCameraController(a)&&
(this._cameraControllerGamepad=a)),this._cameraControllerGamepad&&this._cameraControllerGamepad.active&&this._cameraControllerGamepad.gamepadDevice===b.data.device&&this._cameraControllerGamepad.handleEventGamepad(b.data)};return c._createClass(d)}(g.InputHandler);h.GamepadNavigation=g;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});