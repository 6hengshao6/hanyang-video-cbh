// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../layers/support/commonProperties ../../rest/support/Query ./support/popupUtils".split(" "),function(d,e,p,q,h,D,E,F,u,r,v,w,x){return a=>{a=function(k){function f(){var b=y.apply(this,arguments);b.view=
null;return b}d._inherits(f,k);var y=d._createSuper(f);k=f.prototype;k.fetchPopupFeatures=async function(b,g){const {layer:l}=this;if(!b)throw new p("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:l});var {popupEnabled:c}=l;const m=x.getFetchPopupTemplate(l,g);if(!c||q.isNone(m))throw new p("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:c,popupTemplate:m});const z=await m.getRequiredFields();c=new w;c.timeExtent=this.timeExtent;
c.geometry=b;c.outFields=z;c.outSpatialReference=b.spatialReference;const {resolution:n,spatialReference:t}=this.view;b="2d"===this.view.type?new r(n,n,t):new r(.5*n,.5*n,t);const {returnTopmostRaster:A,showNoDataRecords:B}=m.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};g={returnDomainValues:!0,returnTopmostRaster:A,pixelSize:b,showNoDataRecords:B,signal:q.isSome(g)?g.signal:null};return l.queryVisibleRasters(c,g).then(C=>C)};k.canResume=function(){return!d._get(d._getPrototypeOf(f.prototype),
"canResume",this).call(this)||this.timeExtent?.isEmpty?!1:!0};return d._createClass(f)}(a);e.__decorate([h.property()],a.prototype,"layer",void 0);e.__decorate([h.property()],a.prototype,"suspended",void 0);e.__decorate([h.property(v.combinedViewLayerTimeExtentProperty)],a.prototype,"timeExtent",void 0);e.__decorate([h.property()],a.prototype,"view",void 0);return a=e.__decorate([u.subclass("esri.views.layers.ImageryLayerView")],a)}});