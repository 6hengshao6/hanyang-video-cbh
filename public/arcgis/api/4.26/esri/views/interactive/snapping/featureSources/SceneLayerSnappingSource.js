// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ./I3SSnappingSource".split(" "),function(c,k,f,m,n,p,h,u,v,w,q,l){c.SceneLayerSnappingSource=function(d){function g(a){a=r.call(this,
a);a.availability=1;a._i3sSources=[];return a}k._inherits(g,d);var r=k._createSuper(g);d=g.prototype;d.destroy=function(){this._i3sSources.forEach(a=>a.destroy());this._i3sSources.length=0};d.initialize=function(){const {view:a}=this,b=this.layerSource.layer;this._i3sSources="building-scene"===b.type?this._getBuildingSceneI3SSources(a,b):[this._getSceneLayerI3SSource(a,b)]};d.fetchCandidates=async function(a,b){const e=await Promise.all(this._i3sSources.map(t=>t.fetchCandidates(a,b)));p.throwIfAborted(b);
return e.flat()};d.refresh=function(){this._i3sSources.forEach(a=>a.refresh())};d._getBuildingSceneI3SSources=function(a,b){return b.allSublayers.toArray().map(e=>"building-component"===e.type?new l.I3SSnappingSource({getLayerView:async()=>(await a.whenLayerView(b)).whenSublayerView(e),view:a}):null).filter(n.isSome)};d._getSceneLayerI3SSource=function(a,b){return new l.I3SSnappingSource({getLayerView:async()=>{const e=await a.whenLayerView(b);return"scene-layer-graphics-3d"===e.type?void 0:e},view:a})};
k._createClass(g,[{key:"updating",get:function(){return this._i3sSources.some(a=>a.updating)}}]);return g}(m);f.__decorate([h.property({constructOnly:!0})],c.SceneLayerSnappingSource.prototype,"layerSource",void 0);f.__decorate([h.property({constructOnly:!0})],c.SceneLayerSnappingSource.prototype,"view",void 0);f.__decorate([h.property({readOnly:!0})],c.SceneLayerSnappingSource.prototype,"updating",null);f.__decorate([h.property({readOnly:!0})],c.SceneLayerSnappingSource.prototype,"availability",
void 0);c.SceneLayerSnappingSource=f.__decorate([q.subclass("esri.views.interactive.snapping.featureSources.SceneLayerSnappingSource")],c.SceneLayerSnappingSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});