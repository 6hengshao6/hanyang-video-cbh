// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(c,b,I,P,B){let r=function(){function A(){this._emitter=new A.EventEmitter(this)}var G=A.prototype;G.emit=function(m,l){return this._emitter.emit(m,l)};G.on=function(m,l){return this._emitter.on(m,l)};G.once=function(m,l){return this._emitter.once(m,l)};G.hasEventListener=function(m){return this._emitter.hasEventListener(m)};
return c._createClass(A)}();(function(A){let G=function(){function l(D=null){this._target=D;this._listenersMap=null}var n=l.prototype;n.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};n.emit=function(D,w){D=this._listenersMap&&this._listenersMap.get(D);if(!D)return!1;const x=this._target||this;[...D].forEach(t=>{t.call(x,w)});return 0<D.length};n.on=function(D,w){if(Array.isArray(D)){var x=D.map(t=>this.on(t,w));return P.handlesGroup(x)}if(D.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);x=this._listenersMap.get(D)||[];x.push(w);this._listenersMap.set(D,x);return{remove:()=>{const t=this._listenersMap&&this._listenersMap.get(D)||[],e=t.indexOf(w);0<=e&&t.splice(e,1)}}};n.once=function(D,w){const x=this.on(D,t=>{x.remove();w.call(null,t)});return x};n.hasEventListener=function(D){D=this._listenersMap&&this._listenersMap.get(D);return null!=D&&0<D.length};return c._createClass(l)}();A.EventEmitter=G;A.EventedMixin=l=>{l=function(n){function D(){var x=
w.apply(this,arguments);x._emitter=new G;return x}c._inherits(D,n);var w=c._createSuper(D);n=D.prototype;n.destroy=function(){this._emitter.clear()};n.emit=function(x,t){return this._emitter.emit(x,t)};n.on=function(x,t){return this._emitter.on(x,t)};n.once=function(x,t){return this._emitter.once(x,t)};n.hasEventListener=function(x){return this._emitter.hasEventListener(x)};return c._createClass(D)}(l);return l=b.__decorate([B.subclass("esri.core.Evented")],l)};let m=function(l){function n(){var w=
D.apply(this,arguments);w._emitter=new r.EventEmitter(c._assertThisInitialized(w));return w}c._inherits(n,l);var D=c._createSuper(n);l=n.prototype;l.destroy=function(){this._emitter.clear()};l.emit=function(w,x){return this._emitter.emit(w,x)};l.on=function(w,x){return this._emitter.on(w,x)};l.once=function(w,x){return this._emitter.once(w,x)};l.hasEventListener=function(w){return this._emitter.hasEventListener(w)};return c._createClass(n)}(I);m=b.__decorate([B.subclass("esri.core.Evented")],m);A.EventedAccessor=
m})(r||(r={}));return r})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(c,b,I,P,B,r,A){function G(w,x,t={}){return m(w,x,t,n)}function m(w,x,t={},e){let p=null;const L=t.once?(K,J)=>{e(K)&&(P.removeMaybe(p),x(K,J))}:(K,J)=>{e(K)&&x(K,J)};p=r.watchTracked(w,L,t.sync,t.equals);t.initial&&(w=w(),L(w,w));return p}function l(w,x,t){if(B.isAborted(t))return Promise.reject(B.createAbortError());
const e=w();if(x?.(e))return Promise.resolve(e);let p=null;return new Promise((L,K)=>{p=I.handlesGroup([B.onAbort(t,()=>{p=P.removeMaybe(p);K(B.createAbortError())}),m(w,J=>{p=P.removeMaybe(p);L(J)},{sync:!1,once:!0},x??n)])})}function n(w){return!0}function D(w){return!!w}c.autorun=A.autorun;c.initial={initial:!0};c.on=function(w,x,t,e={}){function p(){K&&J&&(J.remove(),e.onListenerRemove?.(K),J=K=null)}function L(H){e.once&&e.once&&P.removeMaybe(T);t(H)}let K=null,J=null,T=null;const N=G(w,(H,U)=>
{p();b.isEventTarget(H)&&(K=H,J=b.on(H,x,L),e.onListenerAdd?.(H))},{sync:e.sync,initial:!0});return T=I.makeHandle(()=>{N.remove();p()})};c.once=function(w,x){return l(w,null,x)};c.pausable=function(w,x,t={}){let e=!1;const p=G(w,(L,K)=>{e||x(L,K)},t);return{remove(){p.remove()},pause(){e=!0},resume(){e=!1}}};c.sync={sync:!0};c.syncAndInitial={sync:!0,initial:!0};c.watch=G;c.when=function(w,x,t={}){return m(w,x,t,D)};c.whenOnce=function(w,x){return l(w,D,x)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../Accessor ../Handles ../maybe ../reactiveUtils ../scheduling ../accessorSupport/decorators/property ../accessorSupport/decorators/subclass".split(" "),function(c,b,I,P,B,r,A,G,m,l){c.WatchUpdatingTracking=function(n){function D(){var x=w.apply(this,arguments);x.updating=!1;x._handleId=0;x._handles=new B;x._scheduleHandleId=0;x._pendingPromises=new Set;
return x}b._inherits(D,n);var w=b._createSuper(D);n=D.prototype;n.destroy=function(){this.removeAll();this._handles.destroy()};n.add=function(x,t,e={}){return this._installWatch(x,t,e,A.watch)};n.addWhen=function(x,t,e={}){return this._installWatch(x,t,e,A.when)};n.addOnCollectionChange=function(x,t,{initial:e=!1,final:p=!1}={}){const L=++this._handleId;this._handles.add([A.on(x,"after-changes",this._createSyncUpdatingCallback(),A.sync),A.on(x,"change",t,{onListenerAdd:e?K=>t({added:K.toArray(),removed:[]}):
void 0,onListenerRemove:p?K=>t({added:[],removed:K.toArray()}):void 0})],L);return{remove:()=>this._handles.remove(L)}};n.addPromise=function(x){if(r.isNone(x))return x;const t=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(x)&&(0!==this._pendingPromises.size||this._handles.has(-42)||this._set("updating",!1))}},t);this._pendingPromises.add(x);this._set("updating",!0);const e=()=>this._handles.remove(t);x.then(e,e);return x};n.removeAll=function(){this._pendingPromises.clear();
this._handles.removeAll();this._set("updating",!1)};n._installWatch=function(x,t,e={},p){const L=++this._handleId;e.sync||this._installSyncUpdatingWatch(x,L);x=p(x,t,e);this._handles.add(x,L);return{remove:()=>this._handles.remove(L)}};n._installSyncUpdatingWatch=function(x,t){const e=this._createSyncUpdatingCallback();x=A.watch(x,e,{sync:!0,equals:()=>!1});this._handles.add(x,t);return x};n._createSyncUpdatingCallback=function(){return()=>{this._handles.remove(-42);++this._scheduleHandleId;const x=
this._scheduleHandleId;this._get("updating")||this._set("updating",!0);this._handles.add(G.schedule(()=>{x===this._scheduleHandleId&&(this._set("updating",0<this._pendingPromises.size),this._handles.remove(-42))}),-42)}};return b._createClass(D)}(P);I.__decorate([m.property({readOnly:!0})],c.WatchUpdatingTracking.prototype,"updating",void 0);c.WatchUpdatingTracking=I.__decorate([l.subclass("esri.core.support.WatchUpdatingTracking")],c.WatchUpdatingTracking);Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(c,b,I,P,B,r,A,G,m,l,n){const D=r.create();return function(){function w(t){this.geometryInfo=t;this._boundsStore=
new m.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new I;this.featureAdapter=l.optimizedFeatureQueryEngineAdapter}var x=w.prototype;x.getFullExtent=function(t){if(B.isNone(this.fullBounds))return null;const [e,p,L,K]=this.fullBounds;return{xmin:e,ymin:p,xmax:L,ymax:K,spatialReference:n.cleanFromGeometryEngine(t)}};x.add=function(t){this._add(t);this._emitChanged()};x.addMany=function(t){for(const e of t)this._add(e);this._emitChanged()};x.clear=function(){this._featuresById.clear();
this._boundsStore.clear();this._emitChanged()};x.removeById=function(t){t=this._featuresById.get(t);if(!t)return null;this._remove(t);this._emitChanged();return t};x.removeManyById=function(t){this._boundsStore.invalidateIndex();for(const e of t)(t=this._featuresById.get(e))&&this._remove(t);this._emitChanged()};x.forEachBounds=function(t,e){for(const p of t)(t=this._boundsStore.get(p.objectId))&&e(r.fromRect(D,t))};x.getFeature=function(t){return this._featuresById.get(t)};x.has=function(t){return this._featuresById.has(t)};
x.forEach=function(t){this._featuresById.forEach(e=>t(e))};x.forEachInBounds=function(t,e){this._boundsStore.forEachInBounds(t,p=>{e(this._featuresById.get(p))})};x.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};x.sweep=function(){let t=!1;this._featuresById.forEach((e,p)=>{this._markedIds.has(p)||(t=!0,this._remove(e))});this._markedIds.clear();t&&this._emitChanged()};x._emitChanged=function(){this.events.emit("changed",void 0)};x._add=function(t){if(t){var e=
t.objectId;if(null==e)P.getLogger("esri.layers.graphics.data.FeatureStore").error(new b("featurestore:invalid-feature","feature id is missing",{feature:t}));else{var p=this._featuresById.get(e);this._markedIds.add(e);if(p){t.displayId=p.displayId;var L=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(B.isSome(this.onFeatureAdd))this.onFeatureAdd(t);!B.isNone(t.geometry)&&t.geometry.coords&&t.geometry.coords.length?(L=G.getBoundsOptimizedGeometry(B.isSome(L)?L:A.create(),t.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),B.isSome(L)&&this._boundsStore.set(e,L)):this._boundsStore.set(e,null);this._featuresById.set(e,t)}}};x._remove=function(t){if(B.isSome(this.onFeatureRemove))this.onFeatureRemove(t);const e=t.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return t};c._createClass(w,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let t=0;this._featuresById.forEach(e=>{B.isSome(e.geometry)&&e.geometry.coords&&(t+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:t/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return w}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent",
"./aaBoundingRect"],function(c,b,I,P){function B(e=x){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function r(e,p,L,K,J,T,N=B()){N[0]=e;N[1]=p;N[2]=L;N[3]=K;N[4]=J;N[5]=T;return N}function A(e){return e[0]>=e[3]?0:e[3]-e[0]}function G(e){return e[1]>=e[4]?0:e[4]-e[1]}function m(e){return e[2]>=e[5]?0:e[5]-e[2]}function l(e,p){return Math.max(p[0],e[0])<=Math.min(p[3],e[3])&&Math.max(p[1],e[1])<=Math.min(p[4],e[4])&&Math.max(p[2],e[2])<=Math.min(p[5],e[5])}function n(e,p){e[0]=p[0];e[1]=p[1];e[2]=p[2];e[3]=
p[3];e[4]=p[4];e[5]=p[5];return e}function D(e){return 6===e.length}const w=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],x=[0,0,0,0,0,0],t=B();c.NEGATIVE_INFINITY=w;c.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.ZERO=x;c.allFinite=function(e){for(let p=0;6>p;p++)if(!isFinite(e[p]))return!1;return!0};c.center=function(e,p=[0,0,0]){p[0]=e[0]+A(e)/2;p[1]=e[1]+G(e)/2;p[2]=e[2]+m(e)/2;return p};c.contains=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=
e[2]&&p[3]<=e[3]&&p[4]<=e[4]&&p[5]<=e[5]};c.containsPoint=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[0]<=e[3]&&p[1]<=e[4]&&p[2]<=e[5]};c.containsPointWithMargin=function(e,p,L){return p[0]>=e[0]-L&&p[1]>=e[1]-L&&p[2]>=e[2]-L&&p[0]<=e[3]+L&&p[1]<=e[4]+L&&p[2]<=e[5]+L};c.create=B;c.depth=G;c.diameter=function(e){const p=A(e),L=m(e);e=G(e);return Math.sqrt(p*p+L*L+e*e)};c.empty=function(e){return e?n(e,w):B(w)};c.equals=function(e,p,L){if(b.isNone(e)||b.isNone(p))return e===p;if(!D(e)||
!D(p))return!1;if(L)for(let K=0;K<e.length;K++){if(!L(e[K],p[K]))return!1}else for(L=0;L<e.length;L++)if(e[L]!==p[L])return!1;return!0};c.expandWithAABB=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[3]);e[4]=Math.max(e[4],p[4]);e[5]=Math.max(e[5],p[5])};c.expandWithBuffer=function(e,p,L=0,K=p.length/3){let J=e[0],T=e[1],N=e[2],H=e[3],U=e[4],g=e[5];for(let z=0;z<K;z++)J=Math.min(J,p[L+3*z]),T=Math.min(T,p[L+3*z+1]),N=Math.min(N,p[L+3*
z+2]),H=Math.max(H,p[L+3*z]),U=Math.max(U,p[L+3*z+1]),g=Math.max(g,p[L+3*z+2]);e[0]=J;e[1]=T;e[2]=N;e[3]=H;e[4]=U;e[5]=g};c.expandWithNestedArray=function(e,p,L){const K=p.length;let J=e[0],T=e[1],N=e[2],H=e[3],U=e[4],g=e[5];if(L)for(L=0;L<K;L++){var z=p[L];J=Math.min(J,z[0]);T=Math.min(T,z[1]);N=Math.min(N,z[2]);H=Math.max(H,z[0]);U=Math.max(U,z[1]);g=Math.max(g,z[2])}else for(L=0;L<K;L++)z=p[L],J=Math.min(J,z[0]),T=Math.min(T,z[1]),H=Math.max(H,z[0]),U=Math.max(U,z[1]);e[0]=J;e[1]=T;e[2]=N;e[3]=
H;e[4]=U;e[5]=g};c.expandWithOffset=function(e,p,L,K){e[0]=Math.min(e[0],e[0]+p);e[3]=Math.max(e[3],e[3]+p);e[1]=Math.min(e[1],e[1]+L);e[4]=Math.max(e[4],e[4]+L);e[2]=Math.min(e[2],e[2]+K);e[5]=Math.max(e[5],e[5]+K)};c.expandWithRect=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[3]=Math.max(e[3],p[2]);e[4]=Math.max(e[4],p[3])};c.expandWithVec3=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[0]);e[4]=Math.max(e[4],p[1]);
e[5]=Math.max(e[5],p[2])};c.fromExtent=function(e,p=B()){p[0]=e.xmin;p[1]=e.ymin;p[2]=e.hasZ?e.zmin:-Infinity;p[3]=e.xmax;p[4]=e.ymax;p[5]=e.hasZ?e.zmax:Infinity;return p};c.fromMinMax=function(e,p,L=B()){L[0]=e[0];L[1]=e[1];L[2]=e[2];L[3]=p[0];L[4]=p[1];L[5]=p[2];return L};c.fromRect=function(e,p){e[0]=p[0];e[1]=p[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=p[2];e[4]=p[3];e[5]=Number.POSITIVE_INFINITY;return e};c.fromRectValues=function(e,p,L,K,J){e[0]=p;e[1]=L;e[2]=Number.NEGATIVE_INFINITY;e[3]=K;e[4]=
J;e[5]=Number.POSITIVE_INFINITY;return e};c.fromValues=r;c.getMax=function(e,p){p[0]=e[3];p[1]=e[4];p[2]=e[5];return p};c.getMin=function(e,p){p[0]=e[0];p[1]=e[1];p[2]=e[2];return p};c.height=m;c.intersects=l;c.intersectsClippingArea=function(e,p){return b.isNone(p)?!0:l(e,p)};c.is=D;c.isPoint=function(e){return 0===A(e)&&0===G(e)&&0===m(e)};c.maximumDimension=function(e){return Math.max(A(e),m(e),G(e))};c.offset=function(e,p,L,K,J=e){J[0]=e[0]+p;J[1]=e[1]+L;J[2]=e[2]+K;J[3]=e[3]+p;J[4]=e[4]+L;J[5]=
e[5]+K;return J};c.scale=function(e,p,L=e){const K=e[0]+A(e)/2,J=e[1]+G(e)/2,T=e[2]+m(e)/2;L[0]=K+(e[0]-K)*p;L[1]=J+(e[1]-J)*p;L[2]=T+(e[2]-T)*p;L[3]=K+(e[3]-K)*p;L[4]=J+(e[4]-J)*p;L[5]=T+(e[5]-T)*p;return L};c.set=n;c.setMax=function(e,p,L=e){L[3]=p[0];L[4]=p[1];L[5]=p[2];L!==e&&(L[0]=e[0],L[1]=e[1],L[2]=e[2]);return e};c.setMin=function(e,p,L=e){L[0]=p[0];L[1]=p[1];L[2]=p[2];L!==e&&(L[3]=e[3],L[4]=e[4],L[5]=e[5]);return L};c.size=function(e,p=[0,0,0]){p[0]=A(e);p[1]=G(e);p[2]=m(e);return p};c.toExtent=
function(e,p){return isFinite(e[2])||isFinite(e[5])?new I({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:p}):new I({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:p})};c.toRect=function(e,p){p||(p=P.create());p[0]=e[0];p[1]=e[1];p[2]=e[3];p[3]=e[4];return p};c.width=A;c.wrap=function(e,p,L,K,J,T){return r(e,p,L,K,J,T,t)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(c,b,I,P,B,r,A,G,m,l){function n(O,W){return O?W?4:3:W?3:2}function D(O,W,ca,aa){if(O){if(ca)return W&&aa?y:Aa;if(W&&aa)return h}else if(W&&aa)return Aa;return ra}function w({scale:O,translate:W},ca){return Math.round((ca-W[0])/O[0])}function x({scale:O,translate:W},ca){return Math.round((W[1]-ca)/O[1])}function t({scale:O,translate:W},ca,aa){return ca*O[aa]+W[aa]}function e(O){O=O.coords;return{x:O[0],y:O[1]}}function p(O,W){O.coords[0]=W.x;O.coords[1]=W.y;return O}function L(O){O=O.coords;
return{x:O[0],y:O[1],z:O[2]}}function K(O,W){O.coords[0]=W.x;O.coords[1]=W.y;O.coords[2]=W.z;return O}function J(O){O=O.coords;return{x:O[0],y:O[1],m:O[2]}}function T(O,W){O.coords[0]=W.x;O.coords[1]=W.y;O.coords[2]=W.m;return O}function N(O){O=O.coords;return{x:O[0],y:O[1],z:O[2],m:O[3]}}function H(O,W){O.coords[0]=W.x;O.coords[1]=W.y;O.coords[2]=W.z;O.coords[3]=W.m;return O}function U(O,W){return O&&W?H:O?K:W?T:p}function g(O,W,ca,aa,ha){ca=U(ca,aa);for(const {geometry:ma,attributes:oa}of W)W=P.isSome(ma)?
ca(new l,ma):null,O.push(new G.OptimizedFeature(W,oa,null,ha?oa[ha]:void 0));return O}function z(O,W,ca,aa){for(const {geometry:ha,attributes:ma}of W)O.push({attributes:ma,geometry:P.isSome(ha)?v(ha,ca,aa):null});return O}function v(O,W,ca){if(P.isNone(O))return null;const aa=n(W,ca),ha=[];for(let ma=0;ma<O.coords.length;ma+=aa){const oa=[];for(let wa=0;wa<aa;wa++)oa.push(O.coords[ma+wa]);ha.push(oa)}return W?ca?{points:ha,hasZ:W,hasM:ca}:{points:ha,hasZ:W}:ca?{points:ha,hasM:ca}:{points:ha}}function f(O,
W,ca,aa,ha){ca=n(ca,aa);for(const {geometry:ma,attributes:oa}of W)W=P.isSome(ma)?q(new l,ma,ca):null,O.push(new G.OptimizedFeature(W,oa,null,ha?oa[ha]:void 0));return O}function q(O,W,ca=n(W.hasZ,W.hasM)){O.lengths[0]=W.points.length;const aa=O.coords;let ha=0;for(const ma of W.points)for(W=0;W<ca;W++)aa[ha++]=ma[W];return O}function R(O,W,ca){if(!O)return null;const aa=n(W,ca),{coords:ha,lengths:ma}=O;O=[];let oa=0;for(const wa of ma){const va=[];for(let Ea=0;Ea<wa;Ea++){const Ba=[];for(let Fa=0;Fa<
aa;Fa++)Ba.push(ha[oa++]);va.push(Ba)}O.push(va)}return W?ca?{paths:O,hasZ:W,hasM:ca}:{paths:O,hasZ:W}:ca?{paths:O,hasM:ca}:{paths:O}}function M(O,W,ca,aa,ha){ca=n(ca,aa);for(const {geometry:ma,attributes:oa}of W)W=P.isSome(ma)?Q(new l,ma,ca):null,O.push(new G.OptimizedFeature(W,oa,null,ha?oa[ha]:void 0));return O}function Q(O,W,ca=n(W.hasZ,W.hasM)){const {lengths:aa,coords:ha}=O;let ma=0;for(const oa of W.paths){for(const wa of oa)for(W=0;W<ca;W++)ha[ma++]=wa[W];aa.push(oa.length)}return O}function E(O,
W,ca){if(!O)return null;const aa=n(W,ca),{coords:ha,lengths:ma}=O;O=[];let oa=0;for(const wa of ma){const va=[];for(let Ea=0;Ea<wa;Ea++){const Ba=[];for(let Fa=0;Fa<aa;Fa++)Ba.push(ha[oa++]);va.push(Ba)}O.push(va)}return W?ca?{rings:O,hasZ:W,hasM:ca}:{rings:O,hasZ:W}:ca?{rings:O,hasM:ca}:{rings:O}}function C(O,W,ca,aa,ha){for(const {geometry:ma,centroid:oa,attributes:wa}of W){W=P.isSome(ma)?Y(new l,ma,ca,aa):null;const va=ha?wa[ha]:void 0;P.isSome(oa)?O.push(new G.OptimizedFeature(W,wa,p(new l,oa),
va)):O.push(new G.OptimizedFeature(W,wa,null,va))}return O}function Y(O,W,ca=W.hasZ,aa=W.hasM){ia(O,W.rings,ca,aa);return O}function ia(O,W,ca,aa){ca=n(ca,aa);const {lengths:ha,coords:ma}=O;aa=0;Ya(O);for(const oa of W){for(const wa of oa)for(W=0;W<ca;W++)ma[aa++]=wa[W];ha.push(oa.length)}return O}function ua(O,W,ca,aa,ha,ma){Ua(O);if(!ca){for(const oa of W)O.push(new G.OptimizedFeature(null,oa.attributes,null,ma?oa.attributes[ma]:void 0));return O}switch(ca){case "esriGeometryPoint":return g(O,W,
aa,ha,ma);case "esriGeometryMultipoint":return f(O,W,aa,ha,ma);case "esriGeometryPolyline":return M(O,W,aa,ha,ma);case "esriGeometryPolygon":return C(O,W,aa,ha,ma);default:gb.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ca}'`)),Ua(O)}return O}function Ca(O,W,ca,aa){O=O&&("coords"in O?O:O.geometry);if(P.isNone(O))return null;switch(W){case "esriGeometryPoint":return W=e,ca&&aa?W=N:ca?W=L:aa&&(W=J),W(O);case "esriGeometryMultipoint":return v(O,ca,aa);
case "esriGeometryPolyline":return R(O,ca,aa);case "esriGeometryPolygon":return E(O,ca,aa);default:return gb.error("convertToGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${W}'`)),null}}function Ha(O,W,ca,aa,ha){Ua(O);if(P.isNone(ca)){for(const oa of W)O.push({attributes:oa.attributes});return O}switch(ca){case "esriGeometryPoint":ca=e;aa&&ha?ca=N:aa?ca=L:ha&&(ca=J);for(var ma of W){const {geometry:oa,attributes:wa}=ma;aa=P.isSome(oa)?ca(oa):null;O.push({attributes:wa,geometry:aa})}break;
case "esriGeometryMultipoint":return z(O,W,aa,ha);case "esriGeometryPolyline":for(const {geometry:oa,attributes:wa}of W)O.push({attributes:wa,geometry:P.isSome(oa)?R(oa,aa,ha):null});break;case "esriGeometryPolygon":for(const {geometry:oa,attributes:wa,centroid:va}of W)ma=P.isSome(oa)?E(oa,aa,ha):null,P.isSome(va)?(W=e(va),O.push({attributes:wa,centroid:W,geometry:ma})):O.push({attributes:wa,geometry:ma});break;default:gb.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ca}'`))}return O}
function Ia(O,W,ca,aa,ha,ma,oa=ca,wa=aa){Ya(O);if(P.isNone(W)||!W.coords.length)return null;ha=na[ha];const {coords:va,lengths:Ea}=W;W=n(ca,aa);const Ba=n(ca&&oa,aa&&wa);ca=D(ca,aa,oa,wa);if(!Ea.length)return ca(O.coords,va,0,0,w(ma,va[0]),x(ma,va[1])),Ya(O,W,0),O;let Fa,Ra=0,Oa,Ta=0;for(const Sa of Ea){if(Sa<ha)continue;let La=0;Oa=Ta;wa=aa=w(ma,va[Ra]);Fa=oa=x(ma,va[Ra+1]);ca(O.coords,va,Oa,Ra,wa,Fa);La++;Ra+=W;Oa+=Ba;for(let Va=1;Va<Sa;Va++,Ra+=W)if(wa=w(ma,va[Ra]),Fa=x(ma,va[Ra+1]),wa!==aa||Fa!==
oa)ca(O.coords,va,Oa,Ra,wa-aa,Fa-oa),Oa+=Ba,La++,aa=wa,oa=Fa;La>=ha&&(O.lengths.push(La),Ta=Oa)}Ua(O.coords,Ta);return O.coords.length?O:null}function Ja(O,W,ca,aa,ha,ma,oa){let wa=aa,va=0;for(let Ba=ma+ca;Ba<oa;Ba+=ca){var Ea=W[Ba];const Fa=W[Ba+1],Ra=W[oa],Oa=W[oa+1];let Ta=W[ma],Sa=W[ma+1],La=Ra-Ta,Va=Oa-Sa;if(0!==La||0!==Va){const ab=((Ea-Ta)*La+(Fa-Sa)*Va)/(La*La+Va*Va);1<ab?(Ta=Ra,Sa=Oa):0<ab&&(Ta+=La*ab,Sa+=Va*ab)}La=Ea-Ta;Va=Fa-Sa;Ea=La*La+Va*Va;Ea>wa&&(va=Ba,wa=Ea)}wa>aa&&(va-ma>ca&&Ja(O,
W,ca,aa,ha,ma,va),ha(O,W,O.length,va,W[va],W[va+1]),oa-va>ca&&Ja(O,W,ca,aa,ha,va,oa))}function Ma(O,W,ca,aa,ha){const {coords:ma,lengths:oa}=W;ca=n(ca,aa);if(!ma.length)return O!==W&&Ya(O),O;P.assertIsSome(ha);const {originPosition:wa,scale:va,translate:Ea}=ha;ha=sa;ha.originPosition=wa;aa=ha.scale;aa[0]=va[0]??1;aa[1]=-(va[1]??1);aa[2]=va[2]??1;aa[3]=va[3]??1;var Ba=ha.translate;Ba[0]=Ea[0]??0;Ba[1]=Ea[1]??0;Ba[2]=Ea[2]??0;Ba[3]=Ea[3]??0;if(!oa.length){for(aa=0;aa<ca;++aa)O.coords[aa]=t(ha,ma[aa],
aa);O!==W&&Ya(O,ca,0);return O}Ba=0;for(let Ra=0;Ra<oa.length;Ra++){const Oa=oa[Ra];O.lengths[Ra]=Oa;for(var Fa=0;Fa<ca;++Fa)O.coords[Ba+Fa]=t(ha,ma[Ba+Fa],Fa);Fa=O.coords[Ba];let Ta=O.coords[Ba+1];Ba+=ca;for(let Sa=1;Sa<Oa;Sa++,Ba+=ca){Fa+=ma[Ba]*aa[0];Ta+=ma[Ba+1]*aa[1];O.coords[Ba]=Fa;O.coords[Ba+1]=Ta;for(let La=2;La<ca;++La)O.coords[Ba+La]=t(ha,ma[Ba+La],La)}}O!==W&&Ya(O,ma.length,oa.length);return O}function Wa(O,W,ca,aa){let ha=0,ma=O[aa*W],oa=O[aa*(W+1)];for(let wa=1;wa<ca;wa++){const va=
ma+O[aa*(W+wa)],Ea=oa+O[aa*(W+wa)+1],Ba=(va-ma)*(Ea+oa);ma=va;oa=Ea;ha+=Ba}return.5*ha}function Ya(O,W=0,ca=0){Ua(O.lengths,ca);Ua(O.coords,W)}function Ua(O,W=0){O.length!==W&&(O.length=W)}const gb=I.getLogger("esri.layers.graphics.featureConversionUtils"),na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ra=(O,W,ca,aa,ha,ma)=>{O[ca]=ha;O[ca+1]=ma},Aa=(O,W,ca,aa,ha,ma)=>{O[ca]=ha;O[ca+1]=ma;O[ca+2]=W[aa+2]},h=(O,W,ca,aa,ha,ma)=>{O[ca]=ha;O[ca+1]=ma;O[ca+
2]=W[aa+3]},y=(O,W,ca,aa,ha,ma)=>{O[ca]=ha;O[ca+1]=ma;O[ca+2]=W[aa+2];O[ca+3]=W[aa+3]},ea=[],ka=[],sa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(O,W,ca,aa,ha){ea[0]=O;[O]=ua(ka,ea,W,ca,aa,ha);Ua(ea);Ua(ka);return O};c.convertFromFeatureSet=function(O,W){const ca=new m,{hasM:aa,hasZ:ha,features:ma,objectIdFieldName:oa,spatialReference:wa,geometryType:va,exceededTransferLimit:Ea,transform:Ba,fields:Fa}=O;Fa&&(ca.fields=Fa);ca.geometryType=va??null;
ca.objectIdFieldName=oa??W??null;ca.spatialReference=wa??null;if(!ca.objectIdFieldName)return gb.error(new b("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),ca;ma&&ua(ca.features,ma,va,ha,aa,ca.objectIdFieldName);Ea&&(ca.exceededTransferLimit=Ea);aa&&(ca.hasM=aa);ha&&(ca.hasZ=ha);Ba&&(ca.transform=Ba);return ca};c.convertFromFeatures=ua;c.convertFromGeometry=function(O,W,ca){if(P.isNone(O))return null;const aa=new l;"hasZ"in O&&null==W&&(W=O.hasZ);"hasM"in O&&null==
ca&&(ca=O.hasM);if(A.isPoint(O))return U(null!=W?W:null!=O.z,null!=ca?ca:null!=O.m)(aa,O);if(A.isPolygon(O))return Y(aa,O,W,ca);if(A.isPolyline(O))return Q(aa,O,n(W,ca));if(A.isMultipoint(O))return q(aa,O,n(W,ca));gb.error("convertFromGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${O}'`))};c.convertFromGraphics=function(O,W,ca,aa,ha,ma){const oa=O.length;switch(ca){case "esriGeometryPoint":g(O,W,aa,ha,ma);break;case "esriGeometryMultipoint":f(O,W,aa,ha,ma);break;case "esriGeometryPolyline":M(O,
W,aa,ha,ma);break;case "esriGeometryPolygon":C(O,W,aa,ha,ma);break;default:gb.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ca}'`))}for(aa=0;aa<W.length;aa++)O[aa+oa].geometryType=ca,O[aa+oa].insertAfter=W[aa].insertAfter,O[aa+oa].groupId=W[aa].groupId;return O};c.convertFromMultipoint=q;c.convertFromMultipointFeatures=f;c.convertFromNestedArray=ia;c.convertFromPoint=function(O,W,ca=U(null!=W.z,null!=W.m)){return ca(O,W)};c.convertFromPointFeatures=g;
c.convertFromPolygon=Y;c.convertFromPolyline=Q;c.convertFromPolylineFeatures=M;c.convertToFeature=function(O,W,ca,aa){ka[0]=O;Ha(ea,ka,W,ca,aa);O=ea[0];Ua(ea);Ua(ka);return O};c.convertToFeatureSet=function(O){const {objectIdFieldName:W,spatialReference:ca,transform:aa,fields:ha,hasM:ma,hasZ:oa,features:wa,geometryType:va,exceededTransferLimit:Ea,uniqueIdField:Ba,queryGeometry:Fa,queryGeometryType:Ra}=O;O=Ha([],wa,va,oa,ma);const Oa=Ca(Fa,Ra,!1,!1);O={features:O,fields:ha,geometryType:va,objectIdFieldName:W,
spatialReference:ca,uniqueIdField:Ba,queryGeometry:Oa};aa&&(O.transform=aa);Ea&&(O.exceededTransferLimit=Ea);ma&&(O.hasM=ma);oa&&(O.hasZ=oa);return O};c.convertToFeatures=Ha;c.convertToGeometry=Ca;c.convertToMultipoint=v;c.convertToMultipointFeatures=z;c.convertToPoint=function(O,W,ca){return O?W?ca?N(O):L(O):ca?J(O):e(O):null};c.convertToPolygon=E;c.convertToPolyline=R;c.deltaDecodeGeometry=function(O,W){if(P.isNone(O))return null;const ca=O.clone(),aa=O.coords;O=O.lengths;let ha=0;for(let wa=0;wa<
O.length;wa++){const va=O[wa];var ma=aa[W*ha],oa=aa[W*ha+1];for(let Ea=1;Ea<va;Ea++)ma+=aa[W*(ha+Ea)],oa+=aa[W*(ha+Ea)+1],ca.coords[W*(ha+Ea)]=ma,ca.coords[W*(ha+Ea)+1]=oa;ha+=va}return ca};c.deltaEncodeGeometry=function(O,W){const ca=O.clone(),aa=O.coords;O=O.lengths;let ha=0;for(let oa=0;oa<O.length;oa++){const wa=O[oa];let va=aa[W*ha];var ma=aa[W*ha+1];for(let Ea=1;Ea<wa;Ea++){const Ba=aa[W*(ha+Ea)],Fa=aa[W*(ha+Ea)+1];ma=Fa-ma;ca.coords[W*(ha+Ea)]=Ba-va;ca.coords[W*(ha+Ea)+1]=ma;va=Ba;ma=Fa}ha+=
wa}return ca};c.generalizeOptimizedGeometry=function(O,W,ca,aa,ha,ma,oa=ca,wa=aa){Ya(O);if(!W||!W.coords.length)return null;ha=na[ha];const {coords:va,lengths:Ea}=W;W=n(ca,aa);const Ba=n(ca&&oa,aa&&wa);ca=D(ca,aa,oa,wa);if(!Ea.length)return ca(O.coords,va,0,0,va[0],va[1]),Ya(O,W,0),O;aa=0;ma*=ma;for(const Fa of Ea){if(Fa<ha){aa+=Fa*W;continue}oa=O.coords.length/Ba;wa=aa;const Ra=aa+(Fa-1)*W;ca(O.coords,va,O.coords.length,wa,va[wa],va[wa+1]);Ja(O.coords,va,W,ma,ca,wa,Ra);ca(O.coords,va,O.coords.length,
Ra,va[Ra],va[Ra+1]);wa=O.coords.length/Ba-oa;wa>=ha?O.lengths.push(wa):Ua(O.coords,oa*Ba);aa+=Fa*W}return O.coords.length?O:null};c.getBoundsOptimizedGeometry=function(O,W,ca,aa){if(P.isNone(W)||!W.coords||!W.coords.length)return null;ca=n(ca,aa);let ha=aa=Number.POSITIVE_INFINITY,ma=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY;if(W&&W.coords){W=W.coords;for(let wa=0;wa<W.length;wa+=ca){const va=W[wa],Ea=W[wa+1];aa=Math.min(aa,va);ma=Math.max(ma,va);ha=Math.min(ha,Ea);oa=Math.max(oa,Ea)}}B.is(O)?
B.fromRectValues(O,aa,ha,ma,oa):r.fromValues(aa,ha,ma,oa,O);return O};c.getQuantizedArea=function(O,W){const {coords:ca,lengths:aa}=O;let ha=O=0;for(let ma=0;ma<aa.length;ma++){const oa=aa[ma];ha+=Wa(ca,O,oa,W);O+=oa}return Math.abs(ha)};c.getQuantizedBoundsOptimizedGeometry=function(O,W,ca,aa){ca=n(ca,aa);const {lengths:ha,coords:ma}=W;aa=W=Number.POSITIVE_INFINITY;let oa=Number.NEGATIVE_INFINITY,wa=Number.NEGATIVE_INFINITY,va=0;for(const Ea of ha){let Ba=ma[va],Fa=ma[va+1];W=Math.min(Ba,W);aa=Math.min(Fa,
aa);oa=Math.max(Ba,oa);wa=Math.max(Fa,wa);va+=ca;for(let Ra=1;Ra<Ea;Ra++,va+=ca){const Oa=ma[va],Ta=ma[va+1];Ba+=Oa;Fa+=Ta;0>Oa&&(W=Math.min(W,Ba));0<Oa&&(oa=Math.max(oa,Ba));0>Ta?aa=Math.min(aa,Fa):0<Ta&&(wa=Math.max(wa,Fa))}}O[0]=W;O[1]=aa;O[2]=oa;O[3]=wa;return O};c.getSignedQuantizedRingArea=Wa;c.quantizeOptimizedFeatureSet=function(O,W){const {geometryType:ca,features:aa,hasM:ha,hasZ:ma}=W;if(!O)return W;for(let oa=0;oa<aa.length;oa++){const wa=aa[oa],va=wa.weakClone();va.geometry=new l;Ia(va.geometry,
wa.geometry,ha,ma,ca,O);wa.centroid&&(va.centroid=new l,Ia(va.centroid,wa.centroid,ha,ma,"esriGeometryPoint",O));aa[oa]=va}W.transform=O;return W};c.quantizeOptimizedGeometry=Ia;c.quantizeX=w;c.quantizeY=x;c.removeCollinearVectices=function(O,W,ca,aa,ha){if(!W||!W.coords||!W.coords.length)return null;ca=na[ca];const {coords:ma,lengths:oa}=W;W=D(aa,ha,aa,ha);aa=n(aa,ha);let wa=ha=0,va=0,Ea=0;for(const Ra of oa){wa=Ea;W(O.coords,ma,wa,ha,ma[ha],ma[ha+1]);ha+=aa;var Ba=ma[ha];let Oa=ma[ha+1],Ta=Ba,Sa=
Oa;var Fa=Oa/Ba;wa+=aa;W(O.coords,ma,wa,ha,Ta,Sa);ha+=aa;for(let La=2;La<Ra;La++){Ba=ma[ha];Oa=ma[ha+1];const Va=Oa/Ba,ab=Fa===Va||!isFinite(Fa)&&!isFinite(Va);Fa=ab&&isFinite(Va)?0<=Fa&&0<=Va||0>=Fa&&0>=Va:0<=Sa&&0<=Oa||0>=Sa&&0>=Oa;ab&&Fa?(Ta+=Ba,Sa+=Oa):(Ta=Ba,Sa=Oa,wa+=aa);W(O.coords,ma,wa,ha,Ta,Sa);ha+=aa;Fa=Va}wa+=aa;Ba=(wa-Ea)/aa;Ba>=ca&&(O.lengths[va]=Ba,Ea=wa,va++)}O.coords.length>Ea&&(O.coords.length=Ea);O.lengths.length>va&&(O.lengths.length=va);return O.coords.length&&O.lengths.length?
O:null};c.removeZMValues=function(O,W,ca,aa,ha,ma){Ya(O);O.lengths.push(...W.lengths);if(ca===ha&&aa===ma)for(var oa=0;oa<W.coords.length;oa++)O.coords.push(W.coords[oa]);else for(oa=n(ca,aa),ca=D(ca,aa,ha,ma),W=W.coords,aa=0;aa<W.length;aa+=oa)ca(O.coords,W,O.coords.length,aa,W[aa],W[aa+1]);return O};c.unquantizeOptimizedFeatureSet=function(O){const {transform:W,features:ca,hasM:aa,hasZ:ha}=O;if(!W)return O;for(const ma of ca)P.isSome(ma.geometry)&&Ma(ma.geometry,ma.geometry,aa,ha,W),P.isSome(ma.centroid)&&
Ma(ma.centroid,ma.centroid,aa,ha,W);O.transform=null;return O};c.unquantizeOptimizedGeometry=Ma;c.unquantizeValue=t;c.unquantizeX=function(O,W){return t(O,W,0)};c.unquantizeY=function(O,W){return t(O,-W,1)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(c,b,I){let P=function(){function r(A=null,G={},m,l){this.geometry=A;this.attributes=G;this.centroid=
m;this.objectId=l;this.geohashY=this.geohashX=this.displayId=0}r.prototype.weakClone=function(){const A=new r(this.geometry,this.attributes,this.centroid,this.objectId);A.displayId=this.displayId;A.geohashX=this.geohashX;A.geohashY=this.geohashY;return A};return b._createClass(r)}(),B=function(r){function A(){return G.apply(this,arguments)}b._inherits(A,r);var G=b._createSuper(A);return b._createClass(A)}(P);c.OptimizedFeature=P;c.OptimizedFeatureWithGeometry=B;c.hasGeometry=function(r){return!(I.isNone(r.geometry)||
!r.geometry.coords||!r.geometry.coords.length)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){return function(){function b(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;
this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}b.prototype.weakClone=function(){const I=new b;I.objectIdFieldName=this.objectIdFieldName;I.globalIdFieldName=this.globalIdFieldName;I.geohashFieldName=this.geohashFieldName;I.geometryProperties=this.geometryProperties;I.geometryType=this.geometryType;I.spatialReference=this.spatialReference;I.hasZ=this.hasZ;I.hasM=this.hasM;I.features=this.features;I.fields=this.fields;I.transform=this.transform;I.exceededTransferLimit=this.exceededTransferLimit;
I.uniqueIdField=this.uniqueIdField;I.queryGeometry=this.queryGeometry;I.queryGeometryType=this.queryGeometryType;return I};return c._createClass(b)}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){return function(){function b(P=[],B=[],r=!1){this.lengths=P??[];this.coords=B??[];this.hasIndeterminateRingOrder=r}b.fromRect=function(P){const [B,r,A,G]=P;P=A-B;const m=G-r;return new b([5],[B,r,P,0,0,m,-P,0,0,-m])};var I=b.prototype;
I.forEachVertex=function(P){let B=0;this.lengths.length||P(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const A=this.lengths[r];for(let G=0;G<A;G++)P(this.coords[2*(G+B)],this.coords[2*(G+B)+1]);B+=A}};I.clone=function(P){return P?(P.set(this.coords),new b(this.lengths.slice(),P,this.hasIndeterminateRingOrder)):new b(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};c._createClass(b,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",
get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((P,B)=>P+B)}}]);return b}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,b,I,P,B){function r(m,l,n){A.minX=l[0];A.minY=l[1];A.maxX=l[2];A.maxY=l[3];m.search(A,n)}const A={minX:0,minY:0,maxX:0,maxY:0};let G=function(){function m(){this._indexInvalid=
!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new P.PooledRBush(9,I("esri-csp-restrictions")?n=>({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const n=Array(this._idByBounds.size);let D=0;this._idByBounds.forEach((w,x)=>{n[D++]=x});this._indexInvalid=!1;this._index.clear();this._index.load(n)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(n=>
this._idByBounds.has(n))))),this._boundsToLoad.length=0)}}var l=m.prototype;l.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};l.delete=function(n){const D=this._boundsById.get(n);this._boundsById.delete(n);D&&(this._idByBounds.delete(D),this._indexInvalid||this._index.remove(D))};l.forEachInBounds=function(n,D){this._loadIndex();r(this._index,n,w=>D(this._idByBounds.get(w)))};l.get=function(n){return this._boundsById.get(n)};
l.has=function(n){return this._boundsById.has(n)};l.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};l.set=function(n,D){if(!this._indexInvalid){const w=this._boundsById.get(n);w&&(this._index.remove(w),this._idByBounds.delete(w))}this._boundsById.set(n,D);D&&(this._idByBounds.set(D,n),this._indexInvalid||(this._boundsToLoad.push(D),5E4<this._boundsToLoad.length&&this._loadIndex()))};b._createClass(m,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;
const n=B.empty();for(const D of this._boundsById.values())D&&(n[0]=Math.min(D[0],n[0]),n[1]=Math.min(D[1],n[1]),n[2]=Math.max(D[2],n[2]),n[3]=Math.max(D[3],n[3]));return n}},{key:"valid",get:function(){return!this._indexInvalid}}]);return m}();c.BoundsStore=G;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(c,b,I,P,B,r){function A(g,z){G(g,0,g.children.length,z,g)}function G(g,z,v,f,q){q||(q=new H([]));q.minX=Infinity;q.minY=Infinity;q.maxX=-Infinity;q.maxY=-Infinity;for(let R=z,M;R<v;R++)M=g.children[R],m(q,g.leaf?f(M):M);return q}function m(g,z){g.minX=Math.min(g.minX,z.minX);g.minY=Math.min(g.minY,z.minY);g.maxX=Math.max(g.maxX,z.maxX);g.maxY=Math.max(g.maxY,z.maxY)}function l(g,z){return g.minX-z.minX}function n(g,z){return g.minY-z.minY}function D(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}
function w(g){return g.maxX-g.minX+(g.maxY-g.minY)}function x(g,z){return g.minX<=z.minX&&g.minY<=z.minY&&z.maxX<=g.maxX&&z.maxY<=g.maxY}function t(g,z){return z.minX<=g.maxX&&z.minY<=g.maxY&&z.maxX>=g.minX&&z.maxY>=g.minY}function e(g,z,v,f,q){for(z=[z,v];z.length;){v=P.assumeNonNull(z.pop());const R=P.assumeNonNull(z.pop());if(v-R<=f)continue;const M=R+Math.ceil((v-R)/f/2)*f;r.quickselect(g,M,R,v,q);z.push(R,M,M,v)}}let p=function(){function g(v=9,f){this._compareMinX=l;this._compareMinY=n;this._toBBox=
q=>q;this._maxEntries=Math.max(4,v||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));f&&("function"===typeof f?this._toBBox=f:this._initFormat(f));this.clear()}var z=g.prototype;z.destroy=function(){this.clear();L.prune();K.prune();J.prune();T.prune()};z.all=function(v){this._all(this._data,v)};z.search=function(v,f){let q=this._data;const R=this._toBBox;if(t(v,q))for(L.clear();q;){for(let M=0,Q=q.children.length;M<Q;M++){const E=q.children[M],C=q.leaf?R(E):E;t(v,C)&&(q.leaf?f(E):x(v,
C)?this._all(E,f):L.push(E))}q=L.pop()}};z.collides=function(v){let f=this._data;const q=this._toBBox;if(!t(v,f))return!1;for(L.clear();f;){for(let R=0,M=f.children.length;R<M;R++){const Q=f.children[R],E=f.leaf?q(Q):Q;if(t(v,E)){if(f.leaf||x(v,E))return!0;L.push(Q)}}f=L.pop()}return!1};z.load=function(v){if(!v.length)return this;if(v.length<this._minEntries){for(let f=0,q=v.length;f<q;f++)this.insert(v[f]);return this}v=this._build(v.slice(0,v.length),0,v.length-1,0);if(this._data.children.length)if(this._data.height===
v.height)this._splitRoot(this._data,v);else{if(this._data.height<v.height){const f=this._data;this._data=v;v=f}this._insert(v,this._data.height-v.height-1,!0)}else this._data=v;return this};z.insert=function(v){v&&this._insert(v,this._data.height-1);return this};z.clear=function(){this._data=new H([]);return this};z.remove=function(v){if(!v)return this;let f=this._data,q=null,R=0,M=!1,Q;const E=this._toBBox(v);J.clear();for(T.clear();f||0<J.length;){f||(f=P.assumeNonNull(J.pop()),q=J.data[J.length-
1],R=T.pop()??0,M=!0);if(f.leaf&&(Q=I.indexOf(f.children,v,f.children.length,f.indexHint),-1!==Q)){f.children.splice(Q,1);J.push(f);this._condense(J);break}M||f.leaf||!x(f,E)?q?(R++,f=q.children[R],M=!1):f=null:(J.push(f),T.push(R),R=0,q=f,f=f.children[0])}return this};z.toJSON=function(){return this._data};z.fromJSON=function(v){this._data=v;return this};z._all=function(v,f){for(K.clear();v;){if(!0===v.leaf)for(const q of v.children)f(q);else K.pushArray(v.children);v=K.pop()??null}};z._build=function(v,
f,q,R){var M=q-f+1,Q=this._maxEntries;if(M<=Q)return v=new H(v.slice(f,q+1)),A(v,this._toBBox),v;R||(R=Math.ceil(Math.log(M)/Math.log(Q)),Q=Math.ceil(M/Q**(R-1)));const E=new U([]);E.height=R;M=Math.ceil(M/Q);Q=M*Math.ceil(Math.sqrt(Q));for(e(v,f,q,Q,this._compareMinX);f<=q;f+=Q){const C=Math.min(f+Q-1,q);e(v,f,C,M,this._compareMinY);for(let Y=f;Y<=C;Y+=M)E.children.push(this._build(v,Y,Math.min(Y+M-1,C),R-1))}A(E,this._toBBox);return E};z._chooseSubtree=function(v,f,q,R){for(;;){R.push(f);if(!0===
f.leaf||R.length-1===q)break;let M=Infinity,Q=Infinity,E=void 0;for(let C=0,Y=f.children.length;C<Y;C++){const ia=f.children[C],ua=D(ia),Ca=(Math.max(ia.maxX,v.maxX)-Math.min(ia.minX,v.minX))*(Math.max(ia.maxY,v.maxY)-Math.min(ia.minY,v.minY))-ua;Ca<Q?(Q=Ca,M=ua<M?ua:M,E=ia):Ca===Q&&ua<M&&(M=ua,E=ia)}f=E||f.children[0]}return f};z._insert=function(v,f,q){var R=this._toBBox;q=q?v:R(v);J.clear();R=this._chooseSubtree(q,this._data,f,J);R.children.push(v);for(m(R,q);0<=f;)if(J.data[f].children.length>
this._maxEntries)this._split(J,f),f--;else break;this._adjustParentBBoxes(q,J,f)};z._split=function(v,f){const q=v.data[f];var R=q.children.length;const M=this._minEntries;this._chooseSplitAxis(q,M,R);(R=this._chooseSplitIndex(q,M,R))?(R=q.children.splice(R,q.children.length-R),R=q.leaf?new H(R):new U(R),R.height=q.height,A(q,this._toBBox),A(R,this._toBBox),f?v.data[f-1].children.push(R):this._splitRoot(q,R)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};z._splitRoot=
function(v,f){this._data=new U([v,f]);this._data.height=v.height+1;A(this._data,this._toBBox)};z._chooseSplitIndex=function(v,f,q){let R,M,Q=void 0;R=M=Infinity;for(let C=f;C<=q-f;C++){var E=G(v,0,C,this._toBBox);const Y=G(v,C,q,this._toBBox),ia=Math.max(0,Math.min(E.maxX,Y.maxX)-Math.max(E.minX,Y.minX))*Math.max(0,Math.min(E.maxY,Y.maxY)-Math.max(E.minY,Y.minY));E=D(E)+D(Y);ia<R?(R=ia,Q=C,M=E<M?E:M):ia===R&&E<M&&(M=E,Q=C)}return Q};z._chooseSplitAxis=function(v,f,q){const R=v.leaf?this._compareMinX:
l,M=v.leaf?this._compareMinY:n,Q=this._allDistMargin(v,f,q,R);f=this._allDistMargin(v,f,q,M);Q<f&&v.children.sort(R)};z._allDistMargin=function(v,f,q,R){v.children.sort(R);R=this._toBBox;var M=G(v,0,f,R);const Q=G(v,q-f,q,R);let E=w(M)+w(Q);for(let C=f;C<q-f;C++){const Y=v.children[C];m(M,v.leaf?R(Y):Y);E+=w(M)}for(q=q-f-1;q>=f;q--)M=v.children[q],m(Q,v.leaf?R(M):M),E+=w(Q);return E};z._adjustParentBBoxes=function(v,f,q){for(;0<=q;q--)m(f.data[q],v)};z._condense=function(v){for(let f=v.length-1;0<=
f;f--){const q=v.data[f];if(0===q.children.length)if(0<f){const R=v.data[f-1],M=R.children;M.splice(I.indexOf(M,q,M.length,R.indexHint),1)}else this.clear();else A(q,this._toBBox)}};z._initFormat=function(v){const f=["return a"," - b",";"];this._compareMinX=new Function("a","b",f.join(v[0]));this._compareMinY=new Function("a","b",f.join(v[1]));this._toBBox=new Function("a","return {minX: a"+v[0]+", minY: a"+v[1]+", maxX: a"+v[2]+", maxY: a"+v[3]+"};")};return b._createClass(g)}();const L=new B,K=
new B,J=new B,T=new B({deallocator:void 0});B=b._createClass(function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity});let N=function(g){function z(){var f=v.apply(this,arguments);f.height=1;f.indexHint=new I.PositionHint;return f}b._inherits(z,g);var v=b._createSuper(z);return b._createClass(z)}(B),H=function(g){function z(f){var q=v.call(this);q.children=f;q.leaf=!0;return q}b._inherits(z,g);var v=b._createSuper(z);return b._createClass(z)}(N),U=function(g){function z(f){var q=v.call(this);
q.children=f;q.leaf=!1;return q}b._inherits(z,g);var v=b._createSuper(z);return b._createClass(z)}(N);c.BBox=B;c.PooledRBush=p;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(c){var b={};(function(I){(function(P){P=P();void 0!==P&&(I.exports=P)})(function(){function P(A,G,m,l,n){for(;l>m;){if(600<l-m){var D=l-m+1,w=G-m+1,x=Math.log(D),t=.5*Math.exp(2*x/3);x=.5*Math.sqrt(x*t*(D-t)/D)*(0>w-D/2?-1:1);P(A,G,Math.max(m,Math.floor(G-
w*t/D+x)),Math.min(l,Math.floor(G+(D-w)*t/D+x)),n)}D=A[G];w=m;t=l;B(A,m,G);for(0<n(A[l],D)&&B(A,m,l);w<t;){B(A,w,t);w++;for(t--;0>n(A[w],D);)w++;for(;0<n(A[t],D);)t--}0===n(A[m],D)?B(A,m,t):(t++,B(A,t,l));t<=G&&(m=t+1);G<=t&&(l=t-1)}}function B(A,G,m){var l=A[G];A[G]=A[m];A[m]=l}function r(A,G){return A<G?-1:A>G?1:0}return function(A,G,m,l,n){P(A,G,m||0,l||A.length-1,n||r)}})})({get exports(){return b},set exports(I){b=I}});c.quickselect=b})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,b,I,P,B){c.optimizedFeatureQueryEngineAdapter={getObjectId(r){return r.objectId},getAttributes(r){return r.attributes},getAttribute(r,A){return r.attributes[A]},cloneWithGeometry(r,A){return new P.OptimizedFeature(A,r.attributes,null,r.objectId)},getGeometry(r){return r.geometry},getCentroid(r,A){b.isNone(r.centroid)&&(r.centroid=I.getCentroidOptimizedGeometry(new B,r.geometry,A.hasZ,A.hasM));return r.centroid}};
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(c,b){function I(B,r,A,G,m,l,n=1){l=m?l?4:3:l?3:2;let D=A,w=A+l,x=0,t=0,e=A=0,p=0;for(let L=0,K=G-1;L<K;L++,D+=l,w+=l){G=r[D];const J=r[D+1],T=r[D+2],N=r[w],H=r[w+1],U=r[w+2];let g=G*H-N*J;e+=g;x+=(G+N)*g;t+=(J+H)*g;m&&(g=G*U-N*T,A+=(T+U)*g,p+=g);G<B[0]&&(B[0]=G);G>B[1]&&(B[1]=G);J<B[2]&&(B[2]=J);J>B[3]&&(B[3]=J);m&&(T<B[4]&&(B[4]=T),T>B[5]&&(B[5]=
T))}0<e*n&&(e*=-1);0<p*n&&(p*=-1);if(!e)return null;B=[x,t,.5*e];m&&(B[3]=A,B[4]=.5*p);return B}function P(B,r,A,G,m){m=G?m?4:3:m?3:2;let l=r,n=r+m,D=0,w=0,x=0,t=0;for(let K=0,J=A-1;K<J;K++,l+=m,n+=m){var e=B[l];const T=B[l+1],N=B[l+2],H=B[n],U=B[n+1],g=B[n+2];if(G){var p=H-e;var L=U-T;const z=g-N;p=Math.sqrt(p*p+L*L+z*z)}else p=H-e,L=U-T,p=Math.sqrt(p*p+L*L);p&&(D+=p,G?(e=[e+.5*(H-e),T+.5*(U-T),N+.5*(g-N)],w+=p*e[0],x+=p*e[1],t+=p*e[2]):(e=[e+.5*(H-e),T+.5*(U-T)],w+=p*e[0],x+=p*e[1]))}return 0<D?
G?[w/D,x/D,t/D]:[w/D,x/D]:0<A?G?[B[r],B[r+1],B[r+2]]:[B[r],B[r+1]]:null}c.getCentroidOptimizedGeometry=function(B,r,A,G,m){if(b.isNone(r)||!r.lengths.length)return null;const l="upperLeft"===m?.originPosition?-1:1;B.lengths.length&&(B.lengths.length=0);B.coords.length&&(B.coords.length=0);m=B.coords;const n=[],D=A?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:w,coords:x}=r,t=A?G?4:3:G?3:2;let e=0;for(var p of w){const L=I(D,x,e,p,A,G,l);L&&n.push(L);e+=p*t}n.sort((L,K)=>{let J=l*L[2]-l*K[2];0===J&&A&&(J=L[4]-K[4]);return J});n.length&&(p=6*n[0][2],m[0]=n[0][0]/p,m[1]=n[0][1]/p,A&&(p=6*n[0][4],m[2]=0!==p?n[0][3]/p:0),m[0]<D[0]||m[0]>D[1]||m[1]<D[2]||m[1]>D[3]||A&&(m[2]<D[4]||m[2]>D[5]))&&(m.length=0);if(!m.length)if(r=r.lengths[0]?P(x,0,w[0],A,G):null)m[0]=r[0],m[1]=r[1],A&&2<r.length&&(m[2]=r[2]);
else return null;return B};c.lineCentroid=P;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w){async function x(g,z,v){if(!g)return null;var {where:f}=g;g.where=f=f&&f.trim();if(!f||/^1 *= *1$/.test(f)||z&&z===f)g.where=null;if(!g.geometry)return g;z=await e(g);g.distance=0;g.units=null;"esriSpatialRelEnvelopeIntersects"===g.spatialRel&&({spatialReference:f}=g.geometry,z=A.getGeometryExtent(z),z.spatialReference=f);if(z){await w.checkProjectionSupport(z.spatialReference,v);f=z.spatialReference;z=t(z,v)&&G.isExtent(z)?{spatialReference:f,rings:[[[z.xmin,z.ymin],
[z.xmin,z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]]]}:z;f=(await m.normalizeCentralMeridian(G.fromJSON(z)))[0];if(P.isNone(f))throw K;const q="quantizationParameters"in g&&g.quantizationParameters?.tolerance||"maxAllowableOffset"in g&&g.maxAllowableOffset||0;z=q&&t(z,v)?{densificationStep:8*q}:void 0;f=f.toJSON();z=await w.project(f,f.spatialReference,v,z);if(!z)throw K;z.spatialReference=v;g.geometry=z}return g}function t(g,z){if(!g)return!1;const v=g.spatialReference;return(G.isExtent(g)||
G.isPolygon(g)||G.isPolyline(g))&&!l.equals(v,z)&&!r.canProjectWithoutEngine(v,z)}async function e(g){const {distance:z,units:v}=g,f=g.geometry;if(null==z||"vertexAttributes"in f)return f;var q=f.spatialReference;g=v?L.fromJSON(v):B.getUnitString(q);q=q&&(l.isGeographic(q)||l.isWebMercator(q))?f:await w.checkProjectionSupport(q,l.WGS84).then(()=>w.project(f,l.WGS84));return(await p())(q.spatialReference,q,z,g)}async function p(){return(await new Promise((g,z)=>c(["../../../geometry/geometryEngineJSON"],
g,z))).geodesicBuffer}const L=new I.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),K=Object.freeze({}),J=new D,T=new D,N=new D,H={esriGeometryPoint:n.convertToPoint,esriGeometryPolyline:n.convertToPolyline,esriGeometryPolygon:n.convertToPolygon,esriGeometryMultipoint:n.convertToMultipoint},U=(g,z)=>"_geVersion"!==g?z:void 0;b.QUERY_ENGINE_EMPTY_RESULT=
K;b.cleanFromGeometryEngine=function(g){return g&&"_geVersion"in g?JSON.parse(JSON.stringify(g,U)):g};b.getGeometry=function(g,z,v,f,q,R,M=z,Q=v){const E=z&&M,C=v&&Q;f=P.isSome(f)?"coords"in f?f:f.geometry:null;if(P.isNone(f))return null;if(q)return z=n.generalizeOptimizedGeometry(T,f,z,v,g,q,M,Q),R&&(z=n.quantizeOptimizedGeometry(N,z,E,C,g,R)),H[g]?.(z,E,C)??null;if(R)return R=n.quantizeOptimizedGeometry(N,f,z,v,g,R,M,Q),H[g]?.(R,E,C)??null;n.removeZMValues(J,f,z,v,M,Q);return H[g]?.(J,E,C)??null};
b.normalizeQuery=async function(g,z,v){const {outFields:f,orderByFields:q,groupByFieldsForStatistics:R,outStatistics:M}=g;if(f)for(var Q=0;Q<f.length;Q++)f[Q]=f[Q].trim();if(q)for(Q=0;Q<q.length;Q++)q[Q]=q[Q].trim();if(R)for(Q=0;Q<R.length;Q++)R[Q]=R[Q].trim();if(M)for(Q=0;Q<M.length;Q++)M[Q].onStatisticField&&(M[Q].onStatisticField=M[Q].onStatisticField.trim());g.geometry&&!g.outSR&&(g.outSR=g.geometry.spatialReference);return x(g,z,v)};b.normalizeQueryLike=x;b.transformCentroid=function(g,z,v,f=
g.hasZ,q=g.hasM){if(P.isNone(z))return null;const R=g.hasZ&&f,M=g.hasM&&q;return v?(g=n.quantizeOptimizedGeometry(N,z,g.hasZ,g.hasM,"esriGeometryPoint",v,f,q),n.convertToPoint(g,R,M)):n.convertToPoint(z,R,M)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p,L,K,J,T,N,H,U,g,z,v){function f(){return!!ib&&p.isLoaded()}function q(X){r.isNone(hb)&&(hb=Promise.all([p.load(),(new Promise((fa,Z)=>c(["../chunks/geometryEngineBase"],fa,Z))).then(fa=>fa.geometryEngineBase),new Promise((fa,Z)=>c(["./geometryAdapters/hydrated"],fa,Z))]));return hb.then(([,fa,{hydratedAdapter:Z}])=>{A.throwIfAborted(X);d=Z;ib=fa.default;ib._enableProjection(p.pe);Rb.notify()})}function R(X,fa,Z=null,pa=null){return Array.isArray(X)?0===X.length?
[]:M(d,X,X[0].spatialReference,fa,Z,pa):M(d,[X],X.spatialReference,fa,Z,pa)[0]}function M(X,fa,Z,pa,Da=null,Ga=null){if(r.isNone(Z)||r.isNone(pa))return fa;if(Y(Z,pa,Da))return fa.map(Pa=>r.unwrap(ia(Pa,Z,pa)));if(r.isNone(Da)){const Pa=U.cacheKey(Z,pa);void 0!==Ib[Pa]?Da=Ib[Pa]:(Da=E(Z,pa,void 0),r.isNone(Da)&&(Da=new U),Ib[Pa]=Da)}if(r.isNone(ib)||r.isNone(X))throw new nb;return r.isSome(Ga)?ib._project(X,fa,Z,pa,Da,Ga):ib._project(X,fa,Z,pa,Da)}function Q(X,fa){if(!f())for(const Z of X)if(r.isSome(Z)&&
!g.equals(Z.spatialReference,fa)&&g.isValid(Z.spatialReference)&&g.isValid(fa)&&!Y(Z.spatialReference,fa))return m.trackAccess(Rb),{pending:q(),geometries:null};return{pending:null,geometries:X.map(Z=>r.isNone(Z)?null:g.equals(Z.spatialReference,fa)?Z:g.isValid(Z.spatialReference)&&g.isValid(fa)?C(Z,fa):null)}}function E(X,fa,Z=null){if(r.isNone(X)||r.isNone(fa))return null;if(r.isNone(ib)||r.isNone(d))throw new nb;X=ib._getTransformation(d,X,fa,Z,Z?.spatialReference);return null!==X?U.fromGE(X):
null}function C(X,fa){try{const Z=R(X,fa);if(null==Z)return null;"xmin"in X&&"xmin"in Z&&(Z.zmin=X.zmin,Z.zmax=X.zmax);const pa=v.getGeometryZScaler(Z.type,X.spatialReference,fa);r.isSome(pa)&&pa(Z);return Z}catch(Z){if(!(Z instanceof nb))throw Z;return null}}function Y(X,fa,Z){return Z?!1:g.equals(X,fa)?!0:g.isValid(X)&&g.isValid(fa)&&!!xa(X,fa,Yb)}function ia(X,fa,Z){return X?"x"in X?ua(X,fa,new L,Z,0):"xmin"in X?Ja(X,fa,new t,Z,0):"rings"in X?Ia(X,fa,new K,Z,0):"paths"in X?Ha(X,fa,new J,Z,0):"points"in
X?Ca(X,fa,new e,Z,0):null:null}function ua(X,fa,Z,pa,Da){Za[0]=X.x;Za[1]=X.y;const Ga=X.z;Za[2]=void 0!==Ga?Ga:Da;if(!Ua(Za,fa,0,Za,pa,0,1))return null;Z.x=Za[0];Z.y=Za[1];Z.spatialReference=pa;void 0===Ga?(Z.z=void 0,Z.hasZ=!1):(Z.z=Za[2],Z.hasZ=!0);void 0===X.m?(Z.m=void 0,Z.hasM=!1):(Z.m=X.m,Z.hasM=!0);return Z}function Ca(X,fa,Z,pa,Da){const {points:Ga,hasZ:Pa,hasM:Xa}=X;X=[];const ob=Ga.length,mb=[];for(var lb of Ga)mb.push(lb[0],lb[1],Pa?lb[2]:Da);if(!Ua(mb,fa,0,mb,pa,0,ob))return null;for(fa=
0;fa<ob;++fa){Da=3*fa;lb=mb[Da];const xb=mb[Da+1];Pa&&Xa?X.push([lb,xb,mb[Da+2],Ga[fa][3]]):Pa?X.push([lb,xb,mb[Da+2]]):Xa?X.push([lb,xb,Ga[fa][2]]):X.push([lb,xb])}Z.points=X;Z.spatialReference=pa;Z.hasZ=Pa;Z.hasM=Xa;return Z}function Ha(X,fa,Z,pa,Da){const {paths:Ga,hasZ:Pa,hasM:Xa}=X;X=[];if(!gb(Ga,Pa??!1,Xa??!1,fa,X,pa,Da))return null;Z.paths=X;Z.spatialReference=pa;Z.hasZ=Pa;Z.hasM=Xa;return Z}function Ia(X,fa,Z,pa,Da){const {rings:Ga,hasZ:Pa,hasM:Xa}=X;X=[];if(!gb(Ga,Pa??!1,Xa??!1,fa,X,pa,Da))return null;
Z.rings=X;Z.spatialReference=pa;Z.hasZ=Pa;Z.hasM=Xa;return Z}function Ja(X,fa,Z,pa,Da){const {xmin:Ga,ymin:Pa,xmax:Xa,ymax:ob,hasZ:mb,hasM:lb}=X;if(!Ma(Ga,Pa,mb?X.zmin:Da,fa,Za,pa))return null;Z.xmin=Za[0];Z.ymin=Za[1];mb&&(Z.zmin=Za[2]);if(!Ma(Xa,ob,mb?X.zmax:Da,fa,Za,pa))return null;Z.xmax=Za[0];Z.ymax=Za[1];mb&&(Z.zmax=Za[2]);lb&&(Z.mmin=X.mmin,Z.mmax=X.mmax);Z.spatialReference=pa;return Z}function Ma(X,fa,Z,pa,Da,Ga){kb[0]=X;kb[1]=fa;kb[2]=Z;return Ua(kb,pa,0,Da,Ga,0,1)}function Wa(X,fa,Z,pa){if(r.isNone(fa)||
r.isNone(pa)||2>X.length)return!1;2===X.length&&(kb[0]=X[0],kb[1]=X[1],kb[2]=0,X=kb);return Ua(X,fa,0,Z,pa,0,1)}function Ya(X,fa,Z){if(r.isNone(fa))return!1;fa=h(fa,Jb);fa=Db[fa][la.WGS84_COMPARABLE_LON_LAT];if(r.isNone(fa))return!1;fa(X,0,kb,0);Z!==kb&&(Z[0]=kb[0],Z[1]=kb[1],2<Z.length&&(Z[2]=kb[2]));return!0}function Ua(X,fa,Z,pa,Da,Ga,Pa=1){fa=xa(fa,Da,Yb);if(r.isNone(fa))return!1;if(fa===y){if(X===pa&&Z===Ga)return!0;Pa=Z+3*Pa;for(let Xa=Z,ob=Ga;Xa<Pa;Xa++,ob++)pa[ob]=X[Xa];return!0}Pa=Z+3*Pa;
for(let Xa=Z,ob=Ga;Xa<Pa;Xa+=3,ob+=3)fa(X,Xa,pa,ob);return!0}function gb(X,fa,Z,pa,Da,Ga,Pa=0){const Xa=[];for(const ob of X)for(const mb of ob)Xa.push(mb[0],mb[1],fa?mb[2]:Pa);if(!Ua(Xa,pa,0,Xa,Ga,0,Xa.length/3))return!1;pa=0;Da.length=0;for(const ob of X){X=[];for(const mb of ob)fa&&Z?X.push([Xa[pa++],Xa[pa++],Xa[pa++],mb[3]]):fa?X.push([Xa[pa++],Xa[pa++],Xa[pa++]]):(Z?X.push([Xa[pa++],Xa[pa++],mb[2]]):X.push([Xa[pa++],Xa[pa++]]),pa++);Da.push(X)}return!0}function na(X,fa,Z,pa){fa=pa+fa;if(fa<pa/
2||Z>fa)return Number.MAX_VALUE;X=Math.abs(Eb*X)+Math.asin(Z/fa);return X>=Math.PI/2?Number.MAX_VALUE:Z/Math.cos(X)}function ra(X,fa,Z){const pa=Math.sin(X);X=Math.cos(X);const Da=Math.sin(fa);fa=Math.cos(fa);Z[0]=-pa;Z[4]=-Da*X;Z[8]=fa*X;Z[12]=0;Z[1]=X;Z[5]=-Da*pa;Z[9]=fa*pa;Z[13]=0;Z[2]=0;Z[6]=fa;Z[10]=Da;Z[14]=0;Z[3]=0;Z[7]=0;Z[11]=0;Z[15]=1;return Z}function Aa(X,fa,Z){ra(X,fa,Z);n.transpose(Z,Z);return Z}function h(X,fa){if(!X)return la.UNKNOWN;if(fa.spatialReference===X)return fa.spatialReferenceId;
fa.spatialReference=X;"metersPerUnit"in fa&&(fa.metersPerUnit=G.getMetersPerUnitForSR(X,1));return X.wkt===x.SphericalECEFSpatialReferenceLike.wkt?fa.spatialReferenceId=la.SPHERICAL_ECEF:g.isWGS84(X)?fa.spatialReferenceId=la.WGS84:g.isWebMercator(X)?fa.spatialReferenceId=la.WEB_MERCATOR:g.isPlateCarree(X)?fa.spatialReferenceId=la.PLATE_CARREE:X.wkt===x.WGS84ECEFSpatialReferenceLike.wkt?fa.spatialReferenceId=la.WGS84_ECEF:X.wkid===z.SupportedGCSWkids.CGCS2000?fa.spatialReferenceId=la.CGCS2000:X.wkt===
x.SphericalPCPFMarsLike.wkt?fa.spatialReferenceId=la.SPHERICAL_MARS_PCPF:X.wkt===x.SphericalPCPFMoonLike.wkt?fa.spatialReferenceId=la.SPHERICAL_MOON_PCPF:g.isMars(X)?fa.spatialReferenceId=la.GCSMARS2000:g.isMoon(X)?fa.spatialReferenceId=la.GCSMOON2000:fa.spatialReferenceId=la.UNKNOWN}function y(X,fa,Z,pa){X!==Z&&(Z[pa++]=X[fa++],Z[pa++]=X[fa++],Z[pa]=X[fa])}function ea(X,fa,Z,pa){Z[pa++]=Sb*(X[fa++]/N.earth.radius);Z[pa++]=Sb*(Math.PI/2-2*Math.atan(Math.exp(-X[fa++]/N.earth.radius)));Z[pa]=X[fa]}
function ka(X,fa,Z,pa){ea(X,fa,Z,pa);va(Z,pa,Z,pa)}function sa(X,fa,Z,pa){ea(X,fa,Z,pa);Sa(Z,pa,Z,pa)}function O(X,fa,Z,pa,Da){var Ga=.4999999*Math.PI;Ga=B.clamp(Eb*X[fa+1],-Ga,Ga);Ga=Math.sin(Ga);Z[pa++]=Eb*X[fa]*Da.radius;Z[pa++]=Da.halfSemiMajorAxis*Math.log((1+Ga)/(1-Ga));Z[pa]=X[fa+2]}function W(X,fa,Z,pa){O(X,fa,Z,pa,N.earth)}function ca(X,fa,Z,pa){Z[pa]=X[fa]*hc;Z[pa+1]=X[fa+1]*hc;Z[pa+2]=X[fa+2]}function aa(X,fa,Z,pa){Z[pa]=X[fa]*Tb;Z[pa+1]=X[fa+1]*Tb;Z[pa+2]=X[fa+2]}function ha(X,fa,Z,pa){ea(X,
fa,Z,pa);ca(Z,pa,Z,pa)}function ma(X,fa,Z,pa,Da){Da+=X[fa+2];const Ga=Eb*X[fa+1];X=Eb*X[fa];fa=Math.cos(Ga);Z[pa++]=Math.cos(X)*fa*Da;Z[pa++]=Math.sin(X)*fa*Da;Z[pa]=Math.sin(Ga)*Da}function oa(X,fa,Z,pa){ma(X,fa,Z,pa,N.moon.radius)}function wa(X,fa,Z,pa){ma(X,fa,Z,pa,N.mars.radius)}function va(X,fa,Z,pa){ma(X,fa,Z,pa,N.earth.radius)}function Ea(X,fa,Z,pa,Da){var Ga=X[fa];const Pa=X[fa+1];fa=X[fa+2];X=Math.sqrt(Ga*Ga+Pa*Pa+fa*fa);fa=B.asinClamped(fa/(0===X?1:X));Ga=Math.atan2(Pa,Ga);Z[pa++]=Sb*Ga;
Z[pa++]=Sb*fa;Z[pa]=X-Da}function Ba(X,fa,Z,pa){Ea(X,fa,Z,pa,N.moon.radius)}function Fa(X,fa,Z,pa){Ea(X,fa,Z,pa,N.mars.radius)}function Ra(X,fa,Z,pa){Ea(X,fa,Z,pa,N.earth.radius)}function Oa(X,fa,Z,pa){Ra(X,fa,Z,pa);W(Z,pa,Z,pa)}function Ta(X,fa,Z,pa){Ra(X,fa,Z,pa);Sa(Z,pa,Z,pa)}function Sa(X,fa,Z,pa){var Da=N.earth;const Ga=Eb*X[fa];var Pa=Eb*X[fa+1];X=X[fa+2];fa=Math.sin(Pa);Pa=Math.cos(Pa);const Xa=Da.radius/Math.sqrt(1-Da.eccentricitySquared*fa*fa);Z[pa++]=(Xa+X)*Pa*Math.cos(Ga);Z[pa++]=(Xa+X)*
Pa*Math.sin(Ga);Z[pa++]=(Xa*(1-Da.eccentricitySquared)+X)*fa}function La(X,fa,Z,pa){var Da=H.earthEllipsoidConstants,Ga=X[fa],Pa=X[fa+1];X=X[fa+2];let Xa;fa=Math.abs(X);var ob=Ga*Ga+Pa*Pa;var mb=Math.sqrt(ob);var lb=ob+X*X;var xb=Math.sqrt(lb);Ga=Math.atan2(Pa,Ga);var Kb=X*X/lb;lb=ob/lb;Pa=Da.a2/xb;ob=Da.a3-Da.a4/xb;.3<lb?(Kb=fa/xb*(1+lb*(Da.a1+Pa+Kb*ob)/xb),xb=Math.asin(Kb),Pa=Kb*Kb,lb=Math.sqrt(1-Pa)):(lb=mb/xb*(1-Kb*(Da.a5-Pa-lb*ob)/xb),xb=Math.acos(lb),Pa=1-lb*lb,Kb=Math.sqrt(Pa));Xa=1-N.earth.eccentricitySquared*
Pa;Pa=N.earth.radius/Math.sqrt(Xa);Da=Da.a6*Pa;Pa=mb-Pa*lb;ob=fa-Da*Kb;fa=lb*Pa+Kb*ob;mb=lb*ob-Kb*Pa;Da=mb/(Da/Xa+fa);xb+=Da;0>X&&(xb=-xb);Z[pa++]=Sb*Ga;Z[pa++]=Sb*xb;Z[pa]=fa+mb*Da/2}function Va(X,fa,Z,pa){La(X,fa,Z,pa);va(Z,pa,Z,pa)}function ab(X,fa,Z,pa){La(X,fa,Z,pa);W(Z,pa,Z,pa)}function xa(X,fa,Z=sb()){return r.isNone(X)||r.isNone(fa)?null:wb(X,fa,Z).projector}function wb(X,fa,Z){if(r.isNone(X)||r.isNone(fa)||Z.source.spatialReference===X&&Z.dest.spatialReference===fa)return Z;const pa=h(X,
Z.source),Da=h(fa,Z.dest);pa===la.UNKNOWN&&Da===la.UNKNOWN?g.equals(X,fa)?Z.projector=y:Z.projector=null:Z.projector=Db[pa][Da];return Z}function sb(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},projector:y}}let ib=null,d=null,hb=null,Ib={};const Rb=new l.SimpleObservable;let nb=function(X){function fa(){return Z.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")}
I._inherits(fa,X);var Z=I._createSuper(fa);return I._createClass(fa)}(P);var la;(function(X){X[X.UNKNOWN=0]="UNKNOWN";X[X.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";X[X.WGS84=2]="WGS84";X[X.WEB_MERCATOR=3]="WEB_MERCATOR";X[X.WGS84_ECEF=4]="WGS84_ECEF";X[X.CGCS2000=5]="CGCS2000";X[X.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";X[X.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";X[X.GCSMARS2000=8]="GCSMARS2000";X[X.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";X[X.GCSMOON2000=10]="GCSMOON2000";X[X.LON_LAT=
11]="LON_LAT";X[X.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const hc=N.earth.radius*Math.PI/180,Tb=180/(N.earth.radius*Math.PI),Db={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:y,[la.WGS84_COMPARABLE_LON_LAT]:y,[la.SPHERICAL_ECEF]:va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:W,[la.PLATE_CARREE]:ca,[la.WGS84]:y,[la.WGS84_ECEF]:Sa},[la.CGCS2000]:{[la.CGCS2000]:y,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,
[la.LON_LAT]:y,[la.WGS84_COMPARABLE_LON_LAT]:y,[la.SPHERICAL_ECEF]:va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ca,[la.WGS84]:null,[la.WGS84_ECEF]:Sa},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:y,[la.GCSMOON2000]:null,[la.LON_LAT]:y,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:y,[la.LON_LAT]:y,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:ea,[la.WGS84_COMPARABLE_LON_LAT]:ea,[la.SPHERICAL_ECEF]:ka,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:y,[la.PLATE_CARREE]:ha,[la.WGS84]:ea,[la.WGS84_ECEF]:sa},[la.WGS84_ECEF]:{[la.CGCS2000]:La,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:La,[la.WGS84_COMPARABLE_LON_LAT]:La,[la.SPHERICAL_ECEF]:Va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ab,[la.PLATE_CARREE]:function(X,fa,Z,pa){La(X,fa,Z,pa);ca(Z,pa,Z,pa)},[la.WGS84]:La,[la.WGS84_ECEF]:y},
[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ra,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ra,[la.WGS84_COMPARABLE_LON_LAT]:Ra,[la.SPHERICAL_ECEF]:y,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Oa,[la.PLATE_CARREE]:function(X,fa,Z,pa){Ra(X,fa,Z,pa);ca(Z,pa,Z,pa)},[la.WGS84]:Ra,[la.WGS84_ECEF]:Ta},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Fa,[la.GCSMOON2000]:null,[la.LON_LAT]:Fa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:y,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Ba,[la.LON_LAT]:Ba,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:y,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,
[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:y,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:y,[la.GCSMARS2000]:y,[la.GCSMOON2000]:y,[la.LON_LAT]:y,[la.WGS84_COMPARABLE_LON_LAT]:y,[la.SPHERICAL_ECEF]:va,[la.SPHERICAL_MARS_PCPF]:wa,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:W,
[la.PLATE_CARREE]:ca,[la.WGS84]:y,[la.WGS84_ECEF]:Sa},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:y,[la.WGS84_COMPARABLE_LON_LAT]:y,[la.SPHERICAL_ECEF]:va,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ca,[la.WGS84]:y,[la.WGS84_ECEF]:Sa},[la.PLATE_CARREE]:{[la.CGCS2000]:aa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:aa,[la.WGS84_COMPARABLE_LON_LAT]:aa,
[la.SPHERICAL_ECEF]:function(X,fa,Z,pa){aa(X,fa,Z,pa);va(Z,pa,Z,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(X,fa,Z,pa){aa(X,fa,Z,pa);W(Z,pa,Z,pa)},[la.PLATE_CARREE]:y,[la.WGS84]:aa,[la.WGS84_ECEF]:function(X,fa,Z,pa){aa(X,fa,Z,pa);Sa(Z,pa,Z,pa)}}},Jb={spatialReference:null,spatialReferenceId:la.UNKNOWN},ac={spatialReference:null,spatialReferenceId:la.UNKNOWN},Yb=sb(),ic=sb(),Eb=B.deg2rad(1),Sb=B.rad2deg(1),kb=w.create(),Gb=w.create(),
Hb=w.create(),Za=w.create(),bc=w.create();b.canProjectToWGS84ComparableLonLat=function(X){if(r.isNone(X))return!1;X=h(X,Jb);return!!Db[X][la.WGS84_COMPARABLE_LON_LAT]};b.canProjectWithoutEngine=Y;b.computeENUToSphericalPCPFLocalRotation=ra;b.computeSphericalPCPFToENULocalRotation=Aa;b.computeTranslationToOriginAndRotation=function(X,fa,Z,pa){if(r.isNone(X)||r.isNone(pa))return!1;var Da=h(X,Jb),Ga=h(pa,ac);if(Da===Ga&&Ga!==la.SPHERICAL_ECEF&&Ga!==la.SPHERICAL_MARS_PCPF&&Ga!==la.SPHERICAL_MOON_PCPF&&
(Da!==la.UNKNOWN||g.equals(X,pa)))return n.fromTranslation(Z,fa),!0;if(Ga===la.SPHERICAL_ECEF||Ga===la.SPHERICAL_MARS_PCPF||Ga===la.SPHERICAL_MOON_PCPF){Da=Db[Da][la.LON_LAT];Ga=Db[la.LON_LAT][Ga];if(r.isNone(Da)||r.isNone(Ga))return!1;Da(fa,0,Gb,0);Ga(Gb,0,Hb,0);ra(Eb*Gb[0],Eb*Gb[1],Z);Z[12]=Hb[0];Z[13]=Hb[1];Z[14]=Hb[2];return!0}if((Ga===la.WEB_MERCATOR||Ga===la.PLATE_CARREE)&&(Da===la.WGS84||Da===la.CGCS2000&&Ga===la.PLATE_CARREE||Da===la.SPHERICAL_ECEF||Da===la.WEB_MERCATOR)){X=Db[Da][la.LON_LAT];
Ga=Db[la.LON_LAT][Ga];if(r.isNone(X)||r.isNone(Ga))return!1;X(fa,0,Gb,0);Ga(Gb,0,Hb,0);Da===la.SPHERICAL_ECEF?Aa(Eb*Gb[0],Eb*Gb[1],Z):n.identity(Z);Z[12]=Hb[0];Z[13]=Hb[1];Z[14]=Hb[2];return!0}return!1};b.getProjectorName=function(X,fa){switch(xa(X,fa,Yb)){case y:return"copy3";case va:return"wgs84ToSphericalECEF";case W:return"wgs84ToWebMercator";case ca:return"wgs84ToPlateCarree";case Sa:return"wgs84ToWGS84ECEF";case ea:return"webMercatorToWGS84";case ka:return"webMercatorToSphericalECEF";case sa:return"webMercatorToWGS84ECEF";
case ha:return"webMercatorToPlateCarree";case La:return"wgs84ECEFToWGS84";case Va:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ra:return"sphericalECEFToWGS84";case Oa:return"sphericalECEFToWebMercator";case Fa:return"sphericalMarsPCPFToMars2000";case Ba:return"sphericalMoonPCPFToMoon2000";case Ta:return"sphericalECEFToWGS84ECEF";case wa:return"mars2000ToSphericalPCPF";case oa:return"moon2000ToSphericalPCPF";default:return null}};b.getTransformation=E;b.getTransformations=
function(X,fa,Z=null){if(r.isNone(ib)||r.isNone(d))throw new nb;X=ib._getTransformationBySuitability(d,X,fa,Z,Z?.spatialReference);if(null!==X){fa=[];for(const pa of X)fa.push(U.fromGE(pa));return fa}return[]};b.initializeProjection=async function(X,fa,Z,pa){if(f())return A.waitTick(pa);if(Array.isArray(X))for(const {source:Da,dest:Ga,geographicTransformation:Pa}of X){if(!Y(Da,Ga,Pa))return q(pa)}else if(!Y(X,fa,Z))return q(pa);return A.waitTick(pa)};b.isLoaded=f;b.load=q;b.localLinearScaleFactors=
function(X,fa,Z,pa){if(r.isNone(fa)||r.isNone(pa))return!1;const Da=h(fa,Jb);var Ga=h(pa,ac);if(Da===Ga&&Da!==la.UNKNOWN||g.equals(fa,pa))return Z[0]=1,Z[1]=1,Z[2]=1,!0;if(Da===la.SPHERICAL_ECEF){fa=D.length(X);X=fa/Math.sqrt(X[0]*X[0]+X[1]*X[1]);fa/=N.earth.radius;if(Ga===la.WEB_MERCATOR)return Z[0]=X*fa,Z[1]=X*fa,Z[2]=1,!0;if(Ga===la.WGS84||Ga===la.CGCS2000)return Ga=Tb,Z[0]=Ga*X*fa,Z[1]=Ga*fa,Z[2]=1,!0}else if(Da===la.PLATE_CARREE){if(Ga===la.WGS84||Ga===la.CGCS2000)return Z[0]=Tb,Z[1]=Tb,Z[2]=
1,!0;if(Ga===la.WEB_MERCATOR)return Ga=X[1]/N.earth.radius,Z[0]=1,Z[1]=1/Math.cos(Ga),Z[2]=1,!0}return!1};b.lonLatToSphericalPCPF=function(X,fa,Z,pa){const Da=Math.cos(Z);X[0]=Math.cos(fa)*Da*pa;X[1]=Math.sin(fa)*Da*pa;X[2]=Math.sin(Z)*pa};b.lonLatToWebMercatorComparable=O;b.project=R;b.projectBoundingRect=function(X,fa,Z,pa){if(null==X)return!1;if(g.equals(fa,pa))return T.copy(Z,X),!0;kb[0]=X[0];kb[1]=X[1];kb[2]=0;if(!Ua(kb,fa,0,kb,pa,0,1))return!1;Z[0]=kb[0];Z[1]=kb[1];kb[0]=X[2];kb[1]=X[3];kb[2]=
0;if(!Ua(kb,fa,0,kb,pa,0,1))return!1;Z[2]=kb[0];Z[3]=kb[1];return!0};b.projectBoundingSphere=function(X,fa,Z,pa){if(r.isNone(fa)||r.isNone(pa))return!1;fa=wb(fa,pa,ic);if(fa.projector===y)return Z[0]=X[0],Z[1]=X[1],Z[2]=X[2],Z[3]=X[3],!0;if(r.isNone(fa.projector))return!1;const {source:Da,dest:Ga}=fa;if(Ga.spatialReferenceId===la.WEB_MERCATOR){fa=Db[Da.spatialReferenceId][la.WGS84];if(r.isNone(fa))return!1;fa(X,0,Gb,0);W(Gb,0,Z,0);Z[3]=na(Gb[1],X[2],X[3],N.earth.radius);return!0}if(Da.spatialReferenceId!==
la.WGS84&&Da.spatialReferenceId!==la.CGCS2000||Ga.spatialReferenceId!==la.PLATE_CARREE)fa.projector(X,0,Z,0),Z[3]=X[3]*(Da.metersPerUnit??1)/(Ga.metersPerUnit??1);else{pa=Db[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Pa=X[3];r.isSome(Db[Da.spatialReferenceId][la.SPHERICAL_ECEF])&&r.isSome(pa)&&(Pa=na(X[1],X[2],X[3],N.earth.radius));fa.projector(X,0,Z,0);Z[3]=Pa}return!0};b.projectBuffer=Ua;b.projectDirection=function(X,fa,Z,pa,Da){D.copy(Za,X);D.add(bc,X,fa);Wa(Za,Z,Za,Da);Wa(bc,Z,bc,Da);D.subtract(pa,
bc,Za);D.normalize(pa,pa)};b.projectExtent=function(X,fa,Z=fa.spatialReference,pa=0){return r.isSome(X.spatialReference)&&r.isSome(Z)&&r.isSome(Ja(X,X.spatialReference,fa,Z,pa))};b.projectMany=M;b.projectMultipoint=function(X,fa,Z=fa.spatialReference,pa=0){return r.isSome(X.spatialReference)&&r.isSome(Z)&&r.isSome(Ca(X,X.spatialReference,fa,Z,pa))};b.projectOrLoad=function(X,fa){X=Q([X],fa);return r.isSome(X.pending)?{pending:X.pending,geometry:null}:r.isSome(X.geometries)?{pending:null,geometry:X.geometries[0]}:
{pending:null,geometry:null}};b.projectOrLoadMany=Q;b.projectPoint=function(X,fa,Z=fa.spatialReference,pa=0){return r.isSome(Z)&&r.isSome(X.spatialReference)&&r.isSome(ua(X,X.spatialReference,fa,Z,pa))};b.projectPointToVector=function(X,fa,Z,pa=0){Za[0]=X.x;Za[1]=X.y;const Da=X.z;Za[2]=void 0!==Da?Da:pa;return Ua(Za,X.spatialReference,0,fa,Z,0,1)};b.projectPointToWGS84ComparableLonLat=function(X,fa){Za[0]=X.x;Za[1]=X.y;const Z=X.z;Za[2]=void 0!==Z?Z:0;return Ya(Za,X.spatialReference,fa)};b.projectPolygon=
function(X,fa,Z=fa.spatialReference,pa=0){return r.isSome(X.spatialReference)&&r.isSome(Z)&&r.isSome(Ia(X,X.spatialReference,fa,Z,pa))};b.projectPolygonToWGS84ComparableLonLat=function({hasZ:X,spatialReference:fa,rings:Z},pa,Da=0){fa=h(fa,Jb);fa=Db[fa][la.WGS84_COMPARABLE_LON_LAT];if(r.isNone(fa))return!1;X=X?Ga=>Ga:Ga=>D.set(Za,Ga[0],Ga[1],Da);for(const Ga of Z){Z=[];for(const Pa of Ga){const Xa=[0,0,Da];fa(X(Pa),0,Xa,0);Z.push(Xa)}pa.push(Z)}return!0};b.projectPolyline=function(X,fa,Z=fa.spatialReference,
pa=0){return r.isSome(X.spatialReference)&&r.isSome(Z)&&r.isSome(Ha(X,X.spatialReference,fa,Z,pa))};b.projectPolylineToWGS84ComparableLonLat=function({hasZ:X,spatialReference:fa,paths:Z},pa,Da=0){fa=h(fa,Jb);fa=Db[fa][la.WGS84_COMPARABLE_LON_LAT];if(r.isNone(fa))return!1;X=X?Ga=>Ga:Ga=>D.set(Za,Ga[0],Ga[1],Da);for(const Ga of Z){Z=[];for(const Pa of Ga){const Xa=[0,0,Da];fa(X(Pa),0,Xa,0);Z.push(Xa)}pa.push(Z)}return!0};b.projectVectorToDehydratedPoint=function(X,fa,Z){return Ua(X,fa,0,Za,Z.spatialReference,
0,1)?(Z.x=Za[0],Z.y=Za[1],Z.z=Za[2],Z):null};b.projectVectorToPoint=function(X,fa,Z){if(r.isNone(fa)||r.isNone(Z))return null;const pa=new L({spatialReference:Z});return Ua(X,fa,0,Za,Z,0,1)?(pa.x=Za[0],pa.y=Za[1],pa.z=Za[2],pa):null};b.projectVectorToVector=Wa;b.projectVectorToWGS84ComparableLonLat=function(X,fa,Z){return Ya(X,fa,Z)};b.projectWithoutEngine=ia;b.projectXYZToVector=Ma;b.sphericalPCPFtoLonLatElevation=Ea;b.test={get loadPromise(){return hb}};b.tryProjectWithZConversion=C;b.unload=function(){hb=
d=ib=null;Ib={}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(c,b,I){I=function(P){function B(){return r.apply(this,arguments)}b._inherits(B,P);var r=b._createSuper(B);B.prototype.notify=function(){var A=this._observers;if(A&&0<A.length){A=A.slice();for(const G of A)G.onInvalidated(),G.onCommitted()}};return b._createClass(B)}(I.ObservableBase);
c.SimpleObservable=I;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(c,b,I){function P(h,y){h[0]=y[0];h[1]=y[1];h[2]=y[2];h[3]=y[3];h[4]=y[4];h[5]=y[5];h[6]=y[6];h[7]=y[7];h[8]=y[8];h[9]=y[9];h[10]=y[10];h[11]=y[11];h[12]=y[12];h[13]=y[13];h[14]=y[14];h[15]=y[15];return h}function B(h,y,ea,ka,sa,O,W,ca,aa,ha,ma,oa,wa,va,Ea,Ba,Fa){h[0]=y;h[1]=ea;h[2]=ka;h[3]=sa;h[4]=O;h[5]=W;h[6]=ca;h[7]=aa;h[8]=ha;h[9]=
ma;h[10]=oa;h[11]=wa;h[12]=va;h[13]=Ea;h[14]=Ba;h[15]=Fa;return h}function r(h){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function A(h,y){if(h===y){const ea=y[1],ka=y[2],sa=y[3],O=y[6],W=y[7],ca=y[11];h[1]=y[4];h[2]=y[8];h[3]=y[12];h[4]=ea;h[6]=y[9];h[7]=y[13];h[8]=ka;h[9]=O;h[11]=y[14];h[12]=sa;h[13]=W;h[14]=ca}else h[0]=y[0],h[1]=y[4],h[2]=y[8],h[3]=y[12],h[4]=y[1],h[5]=y[5],h[6]=y[9],h[7]=y[13],h[8]=y[2],h[9]=
y[6],h[10]=y[10],h[11]=y[14],h[12]=y[3],h[13]=y[7],h[14]=y[11],h[15]=y[15];return h}function G(h,y){m(h,y)||r(h);return h}function m(h,y){const ea=y[0],ka=y[1],sa=y[2],O=y[3],W=y[4],ca=y[5],aa=y[6],ha=y[7],ma=y[8],oa=y[9],wa=y[10],va=y[11],Ea=y[12],Ba=y[13],Fa=y[14];y=y[15];const Ra=ea*ca-ka*W,Oa=ea*aa-sa*W,Ta=ea*ha-O*W,Sa=ka*aa-sa*ca,La=ka*ha-O*ca,Va=sa*ha-O*aa,ab=ma*Ba-oa*Ea,xa=ma*Fa-wa*Ea,wb=ma*y-va*Ea,sb=oa*Fa-wa*Ba,ib=oa*y-va*Ba,d=wa*y-va*Fa;let hb=Ra*d-Oa*ib+Ta*sb+Sa*wb-La*xa+Va*ab;if(!hb)return null;
hb=1/hb;h[0]=(ca*d-aa*ib+ha*sb)*hb;h[1]=(sa*ib-ka*d-O*sb)*hb;h[2]=(Ba*Va-Fa*La+y*Sa)*hb;h[3]=(wa*La-oa*Va-va*Sa)*hb;h[4]=(aa*wb-W*d-ha*xa)*hb;h[5]=(ea*d-sa*wb+O*xa)*hb;h[6]=(Fa*Ta-Ea*Va-y*Oa)*hb;h[7]=(ma*Va-wa*Ta+va*Oa)*hb;h[8]=(W*ib-ca*wb+ha*ab)*hb;h[9]=(ka*wb-ea*ib-O*ab)*hb;h[10]=(Ea*La-Ba*Ta+y*Ra)*hb;h[11]=(oa*Ta-ma*La-va*Ra)*hb;h[12]=(ca*xa-W*sb-aa*ab)*hb;h[13]=(ea*sb-ka*xa+sa*ab)*hb;h[14]=(Ba*Oa-Ea*Sa-Fa*Ra)*hb;h[15]=(ma*Sa-oa*Oa+wa*Ra)*hb;return h}function l(h,y){const ea=y[0],ka=y[1],sa=y[2],
O=y[3],W=y[4],ca=y[5],aa=y[6],ha=y[7],ma=y[8],oa=y[9],wa=y[10],va=y[11],Ea=y[12],Ba=y[13],Fa=y[14];y=y[15];h[0]=ca*(wa*y-va*Fa)-oa*(aa*y-ha*Fa)+Ba*(aa*va-ha*wa);h[1]=-(ka*(wa*y-va*Fa)-oa*(sa*y-O*Fa)+Ba*(sa*va-O*wa));h[2]=ka*(aa*y-ha*Fa)-ca*(sa*y-O*Fa)+Ba*(sa*ha-O*aa);h[3]=-(ka*(aa*va-ha*wa)-ca*(sa*va-O*wa)+oa*(sa*ha-O*aa));h[4]=-(W*(wa*y-va*Fa)-ma*(aa*y-ha*Fa)+Ea*(aa*va-ha*wa));h[5]=ea*(wa*y-va*Fa)-ma*(sa*y-O*Fa)+Ea*(sa*va-O*wa);h[6]=-(ea*(aa*y-ha*Fa)-W*(sa*y-O*Fa)+Ea*(sa*ha-O*aa));h[7]=ea*(aa*va-
ha*wa)-W*(sa*va-O*wa)+ma*(sa*ha-O*aa);h[8]=W*(oa*y-va*Ba)-ma*(ca*y-ha*Ba)+Ea*(ca*va-ha*oa);h[9]=-(ea*(oa*y-va*Ba)-ma*(ka*y-O*Ba)+Ea*(ka*va-O*oa));h[10]=ea*(ca*y-ha*Ba)-W*(ka*y-O*Ba)+Ea*(ka*ha-O*ca);h[11]=-(ea*(ca*va-ha*oa)-W*(ka*va-O*oa)+ma*(ka*ha-O*ca));h[12]=-(W*(oa*Fa-wa*Ba)-ma*(ca*Fa-aa*Ba)+Ea*(ca*wa-aa*oa));h[13]=ea*(oa*Fa-wa*Ba)-ma*(ka*Fa-sa*Ba)+Ea*(ka*wa-sa*oa);h[14]=-(ea*(ca*Fa-aa*Ba)-W*(ka*Fa-sa*Ba)+Ea*(ka*aa-sa*ca));h[15]=ea*(ca*wa-aa*oa)-W*(ka*wa-sa*oa)+ma*(ka*aa-sa*ca);return h}function n(h){const y=
h[0],ea=h[1],ka=h[2],sa=h[3],O=h[4],W=h[5],ca=h[6],aa=h[7],ha=h[8],ma=h[9],oa=h[10],wa=h[11],va=h[12],Ea=h[13],Ba=h[14];h=h[15];return(y*W-ea*O)*(oa*h-wa*Ba)-(y*ca-ka*O)*(ma*h-wa*Ea)+(y*aa-sa*O)*(ma*Ba-oa*Ea)+(ea*ca-ka*W)*(ha*h-wa*va)-(ea*aa-sa*W)*(ha*Ba-oa*va)+(ka*aa-sa*ca)*(ha*Ea-ma*va)}function D(h,y,ea){const ka=y[0],sa=y[1],O=y[2],W=y[3],ca=y[4],aa=y[5],ha=y[6],ma=y[7],oa=y[8],wa=y[9],va=y[10],Ea=y[11],Ba=y[12],Fa=y[13],Ra=y[14];y=y[15];let Oa=ea[0],Ta=ea[1],Sa=ea[2],La=ea[3];h[0]=Oa*ka+Ta*ca+
Sa*oa+La*Ba;h[1]=Oa*sa+Ta*aa+Sa*wa+La*Fa;h[2]=Oa*O+Ta*ha+Sa*va+La*Ra;h[3]=Oa*W+Ta*ma+Sa*Ea+La*y;Oa=ea[4];Ta=ea[5];Sa=ea[6];La=ea[7];h[4]=Oa*ka+Ta*ca+Sa*oa+La*Ba;h[5]=Oa*sa+Ta*aa+Sa*wa+La*Fa;h[6]=Oa*O+Ta*ha+Sa*va+La*Ra;h[7]=Oa*W+Ta*ma+Sa*Ea+La*y;Oa=ea[8];Ta=ea[9];Sa=ea[10];La=ea[11];h[8]=Oa*ka+Ta*ca+Sa*oa+La*Ba;h[9]=Oa*sa+Ta*aa+Sa*wa+La*Fa;h[10]=Oa*O+Ta*ha+Sa*va+La*Ra;h[11]=Oa*W+Ta*ma+Sa*Ea+La*y;Oa=ea[12];Ta=ea[13];Sa=ea[14];La=ea[15];h[12]=Oa*ka+Ta*ca+Sa*oa+La*Ba;h[13]=Oa*sa+Ta*aa+Sa*wa+La*Fa;h[14]=
Oa*O+Ta*ha+Sa*va+La*Ra;h[15]=Oa*W+Ta*ma+Sa*Ea+La*y;return h}function w(h,y,ea){const ka=ea[0],sa=ea[1];ea=ea[2];if(y===h)h[12]=y[0]*ka+y[4]*sa+y[8]*ea+y[12],h[13]=y[1]*ka+y[5]*sa+y[9]*ea+y[13],h[14]=y[2]*ka+y[6]*sa+y[10]*ea+y[14],h[15]=y[3]*ka+y[7]*sa+y[11]*ea+y[15];else{const O=y[0],W=y[1],ca=y[2],aa=y[3],ha=y[4],ma=y[5],oa=y[6],wa=y[7],va=y[8],Ea=y[9],Ba=y[10],Fa=y[11];h[0]=O;h[1]=W;h[2]=ca;h[3]=aa;h[4]=ha;h[5]=ma;h[6]=oa;h[7]=wa;h[8]=va;h[9]=Ea;h[10]=Ba;h[11]=Fa;h[12]=O*ka+ha*sa+va*ea+y[12];h[13]=
W*ka+ma*sa+Ea*ea+y[13];h[14]=ca*ka+oa*sa+Ba*ea+y[14];h[15]=aa*ka+wa*sa+Fa*ea+y[15]}return h}function x(h,y,ea){const ka=ea[0],sa=ea[1];ea=ea[2];h[0]=y[0]*ka;h[1]=y[1]*ka;h[2]=y[2]*ka;h[3]=y[3]*ka;h[4]=y[4]*sa;h[5]=y[5]*sa;h[6]=y[6]*sa;h[7]=y[7]*sa;h[8]=y[8]*ea;h[9]=y[9]*ea;h[10]=y[10]*ea;h[11]=y[11]*ea;h[12]=y[12];h[13]=y[13];h[14]=y[14];h[15]=y[15];return h}function t(h,y,ea,ka){let sa=ka[0],O=ka[1];ka=ka[2];let W=Math.sqrt(sa*sa+O*O+ka*ka);var ca=void 0,aa=void 0;let ha=void 0,ma=void 0,oa=void 0,
wa=void 0,va=void 0,Ea=void 0,Ba=void 0,Fa=void 0,Ra=void 0,Oa=void 0,Ta=void 0,Sa=void 0,La=void 0,Va=void 0,ab=void 0,xa=void 0,wb=void 0,sb=void 0,ib=void 0,d=void 0;aa=ca=void 0;if(W<I.getEpsilon())return null;W=1/W;sa*=W;O*=W;ka*=W;ca=Math.sin(ea);aa=Math.cos(ea);ha=1-aa;ma=y[0];oa=y[1];wa=y[2];va=y[3];Ea=y[4];Ba=y[5];Fa=y[6];Ra=y[7];Oa=y[8];Ta=y[9];Sa=y[10];La=y[11];Va=sa*sa*ha+aa;ab=O*sa*ha+ka*ca;xa=ka*sa*ha-O*ca;wb=sa*O*ha-ka*ca;sb=O*O*ha+aa;ib=ka*O*ha+sa*ca;d=sa*ka*ha+O*ca;ca=O*ka*ha-sa*
ca;aa=ka*ka*ha+aa;h[0]=ma*Va+Ea*ab+Oa*xa;h[1]=oa*Va+Ba*ab+Ta*xa;h[2]=wa*Va+Fa*ab+Sa*xa;h[3]=va*Va+Ra*ab+La*xa;h[4]=ma*wb+Ea*sb+Oa*ib;h[5]=oa*wb+Ba*sb+Ta*ib;h[6]=wa*wb+Fa*sb+Sa*ib;h[7]=va*wb+Ra*sb+La*ib;h[8]=ma*d+Ea*ca+Oa*aa;h[9]=oa*d+Ba*ca+Ta*aa;h[10]=wa*d+Fa*ca+Sa*aa;h[11]=va*d+Ra*ca+La*aa;y!==h&&(h[12]=y[12],h[13]=y[13],h[14]=y[14],h[15]=y[15]);return h}function e(h,y,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const sa=y[4],O=y[5],W=y[6],ca=y[7],aa=y[8],ha=y[9],ma=y[10],oa=y[11];y!==h&&(h[0]=y[0],
h[1]=y[1],h[2]=y[2],h[3]=y[3],h[12]=y[12],h[13]=y[13],h[14]=y[14],h[15]=y[15]);h[4]=sa*ea+aa*ka;h[5]=O*ea+ha*ka;h[6]=W*ea+ma*ka;h[7]=ca*ea+oa*ka;h[8]=aa*ea-sa*ka;h[9]=ha*ea-O*ka;h[10]=ma*ea-W*ka;h[11]=oa*ea-ca*ka;return h}function p(h,y,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const sa=y[0],O=y[1],W=y[2],ca=y[3],aa=y[8],ha=y[9],ma=y[10],oa=y[11];y!==h&&(h[4]=y[4],h[5]=y[5],h[6]=y[6],h[7]=y[7],h[12]=y[12],h[13]=y[13],h[14]=y[14],h[15]=y[15]);h[0]=sa*ea-aa*ka;h[1]=O*ea-ha*ka;h[2]=W*ea-ma*ka;h[3]=ca*
ea-oa*ka;h[8]=sa*ka+aa*ea;h[9]=O*ka+ha*ea;h[10]=W*ka+ma*ea;h[11]=ca*ka+oa*ea;return h}function L(h,y,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const sa=y[0],O=y[1],W=y[2],ca=y[3],aa=y[4],ha=y[5],ma=y[6],oa=y[7];y!==h&&(h[8]=y[8],h[9]=y[9],h[10]=y[10],h[11]=y[11],h[12]=y[12],h[13]=y[13],h[14]=y[14],h[15]=y[15]);h[0]=sa*ea+aa*ka;h[1]=O*ea+ha*ka;h[2]=W*ea+ma*ka;h[3]=ca*ea+oa*ka;h[4]=aa*ea-sa*ka;h[5]=ha*ea-O*ka;h[6]=ma*ea-W*ka;h[7]=oa*ea-ca*ka;return h}function K(h,y){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=
0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=y[0];h[13]=y[1];h[14]=y[2];h[15]=1;return h}function J(h,y){h[0]=y[0];h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=y[1];h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=y[2];h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function T(h,y,ea){if(0===y)return r(h);let ka=ea[0],sa=ea[1];ea=ea[2];let O=Math.sqrt(ka*ka+sa*sa+ea*ea),W=void 0,ca=void 0,aa=void 0;if(O<I.getEpsilon())return null;O=1/O;ka*=O;sa*=O;ea*=O;W=Math.sin(y);ca=Math.cos(y);aa=1-ca;h[0]=ka*ka*aa+ca;h[1]=
sa*ka*aa+ea*W;h[2]=ea*ka*aa-sa*W;h[3]=0;h[4]=ka*sa*aa-ea*W;h[5]=sa*sa*aa+ca;h[6]=ea*sa*aa+ka*W;h[7]=0;h[8]=ka*ea*aa+sa*W;h[9]=sa*ea*aa-ka*W;h[10]=ea*ea*aa+ca;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function N(h,y){const ea=Math.sin(y);y=Math.cos(y);h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=y;h[6]=ea;h[7]=0;h[8]=0;h[9]=-ea;h[10]=y;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function H(h,y){const ea=Math.sin(y);y=Math.cos(y);h[0]=y;h[1]=0;h[2]=-ea;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=
ea;h[9]=0;h[10]=y;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function U(h,y){const ea=Math.sin(y);y=Math.cos(y);h[0]=y;h[1]=ea;h[2]=0;h[3]=0;h[4]=-ea;h[5]=y;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function g(h,y,ea){var ka=y[0],sa=y[1],O=y[2],W=y[3],ca=ka+ka,aa=sa+sa;const ha=O+O;y=ka*ca;const ma=ka*aa;ka*=ha;const oa=sa*aa;sa*=ha;O*=ha;ca*=W;aa*=W;W*=ha;h[0]=1-(oa+O);h[1]=ma+W;h[2]=ka-aa;h[3]=0;h[4]=ma-W;h[5]=1-(y+O);h[6]=sa+ca;h[7]=0;h[8]=ka+aa;
h[9]=sa-ca;h[10]=1-(y+oa);h[11]=0;h[12]=ea[0];h[13]=ea[1];h[14]=ea[2];h[15]=1;return h}function z(h,y){const ea=Aa,ka=-y[0],sa=-y[1],O=-y[2],W=y[3],ca=y[4],aa=y[5],ha=y[6],ma=y[7],oa=ka*ka+sa*sa+O*O+W*W;0<oa?(ea[0]=2*(ca*W+ma*ka+aa*O-ha*sa)/oa,ea[1]=2*(aa*W+ma*sa+ha*ka-ca*O)/oa,ea[2]=2*(ha*W+ma*O+ca*sa-aa*ka)/oa):(ea[0]=2*(ca*W+ma*ka+aa*O-ha*sa),ea[1]=2*(aa*W+ma*sa+ha*ka-ca*O),ea[2]=2*(ha*W+ma*O+ca*sa-aa*ka));g(h,y,ea);return h}function v(h,y){h[0]=y[12];h[1]=y[13];h[2]=y[14];return h}function f(h,
y){const ea=y[0],ka=y[1],sa=y[2],O=y[4],W=y[5],ca=y[6],aa=y[8],ha=y[9];y=y[10];h[0]=Math.sqrt(ea*ea+ka*ka+sa*sa);h[1]=Math.sqrt(O*O+W*W+ca*ca);h[2]=Math.sqrt(aa*aa+ha*ha+y*y);return h}function q(h,y){const ea=y[0]+y[5]+y[10];let ka=0;0<ea?(ka=2*Math.sqrt(ea+1),h[3]=.25*ka,h[0]=(y[6]-y[9])/ka,h[1]=(y[8]-y[2])/ka,h[2]=(y[1]-y[4])/ka):y[0]>y[5]&&y[0]>y[10]?(ka=2*Math.sqrt(1+y[0]-y[5]-y[10]),h[3]=(y[6]-y[9])/ka,h[0]=.25*ka,h[1]=(y[1]+y[4])/ka,h[2]=(y[8]+y[2])/ka):y[5]>y[10]?(ka=2*Math.sqrt(1+y[5]-y[0]-
y[10]),h[3]=(y[8]-y[2])/ka,h[0]=(y[1]+y[4])/ka,h[1]=.25*ka,h[2]=(y[6]+y[9])/ka):(ka=2*Math.sqrt(1+y[10]-y[0]-y[5]),h[3]=(y[1]-y[4])/ka,h[0]=(y[8]+y[2])/ka,h[1]=(y[6]+y[9])/ka,h[2]=.25*ka);return h}function R(h,y,ea,ka){var sa=y[0],O=y[1],W=y[2],ca=y[3],aa=sa+sa,ha=O+O,ma=W+W;y=sa*aa;const oa=sa*ha;sa*=ma;const wa=O*ha;O*=ma;W*=ma;aa*=ca;ha*=ca;ca*=ma;ma=ka[0];const va=ka[1];ka=ka[2];h[0]=(1-(wa+W))*ma;h[1]=(oa+ca)*ma;h[2]=(sa-ha)*ma;h[3]=0;h[4]=(oa-ca)*va;h[5]=(1-(y+W))*va;h[6]=(O+aa)*va;h[7]=0;h[8]=
(sa+ha)*ka;h[9]=(O-aa)*ka;h[10]=(1-(y+wa))*ka;h[11]=0;h[12]=ea[0];h[13]=ea[1];h[14]=ea[2];h[15]=1;return h}function M(h,y,ea,ka,sa){var O=y[0],W=y[1],ca=y[2],aa=y[3],ha=O+O,ma=W+W,oa=ca+ca;y=O*ha;var wa=O*ma,va=O*oa;O=W*ma;W*=oa;var Ea=ca*oa;ca=aa*ha;ma*=aa;const Ba=aa*oa;var Fa=ka[0],Ra=ka[1];oa=ka[2];ka=sa[0];aa=sa[1];sa=sa[2];ha=(1-(O+Ea))*Fa;const Oa=(wa+Ba)*Fa;Fa*=va-ma;wa=(wa-Ba)*Ra;Ea=(1-(y+Ea))*Ra;Ra*=W+ca;va=(va+ma)*oa;W=(W-ca)*oa;y=(1-(y+O))*oa;h[0]=ha;h[1]=Oa;h[2]=Fa;h[3]=0;h[4]=wa;h[5]=
Ea;h[6]=Ra;h[7]=0;h[8]=va;h[9]=W;h[10]=y;h[11]=0;h[12]=ea[0]+ka-(ha*ka+wa*aa+va*sa);h[13]=ea[1]+aa-(Oa*ka+Ea*aa+W*sa);h[14]=ea[2]+sa-(Fa*ka+Ra*aa+y*sa);h[15]=1;return h}function Q(h,y){var ea=y[0],ka=y[1],sa=y[2];y=y[3];var O=ea+ea,W=ka+ka;const ca=sa+sa;ea*=O;const aa=ka*O;ka*=W;const ha=sa*O,ma=sa*W;sa*=ca;O*=y;W*=y;y*=ca;h[0]=1-ka-sa;h[1]=aa+y;h[2]=ha-W;h[3]=0;h[4]=aa-y;h[5]=1-ea-sa;h[6]=ma+O;h[7]=0;h[8]=ha+W;h[9]=ma-O;h[10]=1-ea-ka;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function E(h,
y,ea,ka,sa,O,W){const ca=1/(ea-y),aa=1/(sa-ka),ha=1/(O-W);h[0]=2*O*ca;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*O*aa;h[6]=0;h[7]=0;h[8]=(ea+y)*ca;h[9]=(sa+ka)*aa;h[10]=(W+O)*ha;h[11]=-1;h[12]=0;h[13]=0;h[14]=W*O*2*ha;h[15]=0;return h}function C(h,y,ea,ka,sa){y=1/Math.tan(y/2);let O=void 0;h[0]=y/ea;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=y;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[11]=-1;h[12]=0;h[13]=0;h[15]=0;null!=sa&&Infinity!==sa?(O=1/(ka-sa),h[10]=(sa+ka)*O,h[14]=2*sa*ka*O):(h[10]=-1,h[14]=-2*ka);return h}function Y(h,
y,ea,ka){const sa=Math.tan(y.upDegrees*Math.PI/180),O=Math.tan(y.downDegrees*Math.PI/180),W=Math.tan(y.leftDegrees*Math.PI/180);y=Math.tan(y.rightDegrees*Math.PI/180);const ca=2/(W+y),aa=2/(sa+O);h[0]=ca;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=aa;h[6]=0;h[7]=0;h[8]=-((W-y)*ca*.5);h[9]=(sa-O)*aa*.5;h[10]=ka/(ea-ka);h[11]=-1;h[12]=0;h[13]=0;h[14]=ka*ea/(ea-ka);h[15]=0;return h}function ia(h,y,ea,ka,sa,O,W){const ca=1/(y-ea),aa=1/(ka-sa),ha=1/(O-W);h[0]=-2*ca;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*aa;h[6]=0;h[7]=
0;h[8]=0;h[9]=0;h[10]=2*ha;h[11]=0;h[12]=(y+ea)*ca;h[13]=(sa+ka)*aa;h[14]=(W+O)*ha;h[15]=1;return h}function ua(h,y,ea,ka){var sa=void 0;let O=void 0;var W=void 0,ca=void 0;let aa=void 0,ha=void 0;var ma=void 0,oa=void 0;let wa=void 0,va=void 0;const Ea=y[0],Ba=y[1];y=y[2];W=ka[0];ca=ka[1];ka=ka[2];ma=ea[0];oa=ea[1];ea=ea[2];sa=I.getEpsilon();if(Math.abs(Ea-ma)<sa&&Math.abs(Ba-oa)<sa&&Math.abs(y-ea)<sa)return r(h);ma=Ea-ma;oa=Ba-oa;wa=y-ea;va=1/Math.sqrt(ma*ma+oa*oa+wa*wa);ma*=va;oa*=va;wa*=va;sa=
ca*wa-ka*oa;O=ka*ma-W*wa;W=W*oa-ca*ma;(va=Math.sqrt(sa*sa+O*O+W*W))?(va=1/va,sa*=va,O*=va,W*=va):W=O=sa=0;ca=oa*W-wa*O;aa=wa*sa-ma*W;ha=ma*O-oa*sa;(va=Math.sqrt(ca*ca+aa*aa+ha*ha))?(va=1/va,ca*=va,aa*=va,ha*=va):ha=aa=ca=0;h[0]=sa;h[1]=ca;h[2]=ma;h[3]=0;h[4]=O;h[5]=aa;h[6]=oa;h[7]=0;h[8]=W;h[9]=ha;h[10]=wa;h[11]=0;h[12]=-(sa*Ea+O*Ba+W*y);h[13]=-(ca*Ea+aa*Ba+ha*y);h[14]=-(ma*Ea+oa*Ba+wa*y);h[15]=1;return h}function Ca(h,y,ea,ka){const sa=y[0],O=y[1];y=y[2];var W=ka[0];const ca=ka[1];var aa=ka[2];ka=
sa-ea[0];let ha=O-ea[1];ea=y-ea[2];let ma=ka*ka+ha*ha+ea*ea;0<ma&&(ma=1/Math.sqrt(ma),ka*=ma,ha*=ma,ea*=ma);let oa=ca*ea-aa*ha;aa=aa*ka-W*ea;W=W*ha-ca*ka;ma=oa*oa+aa*aa+W*W;0<ma&&(ma=1/Math.sqrt(ma),oa*=ma,aa*=ma,W*=ma);h[0]=oa;h[1]=aa;h[2]=W;h[3]=0;h[4]=ha*W-ea*aa;h[5]=ea*oa-ka*W;h[6]=ka*aa-ha*oa;h[7]=0;h[8]=ka;h[9]=ha;h[10]=ea;h[11]=0;h[12]=sa;h[13]=O;h[14]=y;h[15]=1;return h}function Ha(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+
", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Ia(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+h[6]**2+h[7]**2+h[8]**2+h[9]**2+h[10]**2+h[11]**2+h[12]**2+h[13]**2+h[14]**2+h[15]**2)}function Ja(h,y,ea){h[0]=y[0]+ea[0];h[1]=y[1]+ea[1];h[2]=y[2]+ea[2];h[3]=y[3]+ea[3];h[4]=y[4]+ea[4];h[5]=y[5]+ea[5];h[6]=y[6]+ea[6];h[7]=y[7]+ea[7];h[8]=y[8]+ea[8];h[9]=y[9]+ea[9];h[10]=y[10]+ea[10];h[11]=y[11]+ea[11];h[12]=y[12]+ea[12];h[13]=y[13]+ea[13];h[14]=y[14]+
ea[14];h[15]=y[15]+ea[15];return h}function Ma(h,y,ea){h[0]=y[0]-ea[0];h[1]=y[1]-ea[1];h[2]=y[2]-ea[2];h[3]=y[3]-ea[3];h[4]=y[4]-ea[4];h[5]=y[5]-ea[5];h[6]=y[6]-ea[6];h[7]=y[7]-ea[7];h[8]=y[8]-ea[8];h[9]=y[9]-ea[9];h[10]=y[10]-ea[10];h[11]=y[11]-ea[11];h[12]=y[12]-ea[12];h[13]=y[13]-ea[13];h[14]=y[14]-ea[14];h[15]=y[15]-ea[15];return h}function Wa(h,y,ea){h[0]=y[0]*ea;h[1]=y[1]*ea;h[2]=y[2]*ea;h[3]=y[3]*ea;h[4]=y[4]*ea;h[5]=y[5]*ea;h[6]=y[6]*ea;h[7]=y[7]*ea;h[8]=y[8]*ea;h[9]=y[9]*ea;h[10]=y[10]*ea;
h[11]=y[11]*ea;h[12]=y[12]*ea;h[13]=y[13]*ea;h[14]=y[14]*ea;h[15]=y[15]*ea;return h}function Ya(h,y,ea,ka){h[0]=y[0]+ea[0]*ka;h[1]=y[1]+ea[1]*ka;h[2]=y[2]+ea[2]*ka;h[3]=y[3]+ea[3]*ka;h[4]=y[4]+ea[4]*ka;h[5]=y[5]+ea[5]*ka;h[6]=y[6]+ea[6]*ka;h[7]=y[7]+ea[7]*ka;h[8]=y[8]+ea[8]*ka;h[9]=y[9]+ea[9]*ka;h[10]=y[10]+ea[10]*ka;h[11]=y[11]+ea[11]*ka;h[12]=y[12]+ea[12]*ka;h[13]=y[13]+ea[13]*ka;h[14]=y[14]+ea[14]*ka;h[15]=y[15]+ea[15]*ka;return h}function Ua(h,y){return h[0]===y[0]&&h[1]===y[1]&&h[2]===y[2]&&
h[3]===y[3]&&h[4]===y[4]&&h[5]===y[5]&&h[6]===y[6]&&h[7]===y[7]&&h[8]===y[8]&&h[9]===y[9]&&h[10]===y[10]&&h[11]===y[11]&&h[12]===y[12]&&h[13]===y[13]&&h[14]===y[14]&&h[15]===y[15]}function gb(h,y){if(h===y)return!0;const ea=h[0],ka=h[1],sa=h[2],O=h[3],W=h[4],ca=h[5],aa=h[6],ha=h[7],ma=h[8],oa=h[9],wa=h[10],va=h[11],Ea=h[12],Ba=h[13],Fa=h[14];h=h[15];const Ra=y[0],Oa=y[1],Ta=y[2],Sa=y[3],La=y[4],Va=y[5],ab=y[6],xa=y[7],wb=y[8],sb=y[9],ib=y[10],d=y[11],hb=y[12],Ib=y[13],Rb=y[14];y=y[15];const nb=I.getEpsilon();
return Math.abs(ea-Ra)<=nb*Math.max(1,Math.abs(ea),Math.abs(Ra))&&Math.abs(ka-Oa)<=nb*Math.max(1,Math.abs(ka),Math.abs(Oa))&&Math.abs(sa-Ta)<=nb*Math.max(1,Math.abs(sa),Math.abs(Ta))&&Math.abs(O-Sa)<=nb*Math.max(1,Math.abs(O),Math.abs(Sa))&&Math.abs(W-La)<=nb*Math.max(1,Math.abs(W),Math.abs(La))&&Math.abs(ca-Va)<=nb*Math.max(1,Math.abs(ca),Math.abs(Va))&&Math.abs(aa-ab)<=nb*Math.max(1,Math.abs(aa),Math.abs(ab))&&Math.abs(ha-xa)<=nb*Math.max(1,Math.abs(ha),Math.abs(xa))&&Math.abs(ma-wb)<=nb*Math.max(1,
Math.abs(ma),Math.abs(wb))&&Math.abs(oa-sb)<=nb*Math.max(1,Math.abs(oa),Math.abs(sb))&&Math.abs(wa-ib)<=nb*Math.max(1,Math.abs(wa),Math.abs(ib))&&Math.abs(va-d)<=nb*Math.max(1,Math.abs(va),Math.abs(d))&&Math.abs(Ea-hb)<=nb*Math.max(1,Math.abs(Ea),Math.abs(hb))&&Math.abs(Ba-Ib)<=nb*Math.max(1,Math.abs(Ba),Math.abs(Ib))&&Math.abs(Fa-Rb)<=nb*Math.max(1,Math.abs(Fa),Math.abs(Rb))&&Math.abs(h-y)<=nb*Math.max(1,Math.abs(h),Math.abs(y))}function na(h){const y=I.getEpsilon(),ea=h[0],ka=h[1],sa=h[2],O=h[4],
W=h[5],ca=h[6],aa=h[8],ha=h[9];h=h[10];return Math.abs(1-(ea*ea+O*O+aa*aa))<=y&&Math.abs(1-(ka*ka+W*W+ha*ha))<=y&&Math.abs(1-(sa*sa+ca*ca+h*h))<=y}function ra(h){return 1===h[0]&&0===h[1]&&0===h[2]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[8]&&0===h[9]&&1===h[10]}const Aa=b.create();b=Object.freeze(Object.defineProperty({__proto__:null,add:Ja,adjoint:l,copy:P,determinant:n,equals:gb,exactEquals:Ua,frob:Ia,fromQuat:Q,fromQuat2:z,fromRotation:T,fromRotationTranslation:g,fromRotationTranslationScale:R,fromRotationTranslationScaleOrigin:M,
fromScaling:J,fromTranslation:K,fromXRotation:N,fromYRotation:H,fromZRotation:U,frustum:E,getRotation:q,getScaling:f,getTranslation:v,hasIdentityRotation:ra,identity:r,invert:m,invertOrIdentity:G,isOrthoNormal:na,lookAt:ua,mul:D,multiply:D,multiplyScalar:Wa,multiplyScalarAndAdd:Ya,ortho:ia,perspective:C,perspectiveFromFieldOfView:Y,rotate:t,rotateX:e,rotateY:p,rotateZ:L,scale:x,set:B,str:Ha,sub:Ma,subtract:Ma,targetTo:Ca,translate:w,transpose:A},Symbol.toStringTag,{value:"Module"}));c.add=Ja;c.adjoint=
l;c.copy=P;c.determinant=n;c.equals=gb;c.exactEquals=Ua;c.frob=Ia;c.fromQuat=Q;c.fromQuat2=z;c.fromRotation=T;c.fromRotationTranslation=g;c.fromRotationTranslationScale=R;c.fromRotationTranslationScaleOrigin=M;c.fromScaling=J;c.fromTranslation=K;c.fromXRotation=N;c.fromYRotation=H;c.fromZRotation=U;c.frustum=E;c.getRotation=q;c.getScaling=f;c.getTranslation=v;c.hasIdentityRotation=ra;c.identity=r;c.invert=m;c.invertOrIdentity=G;c.isOrthoNormal=na;c.lookAt=ua;c.mat4=b;c.mul=D;c.multiply=D;c.multiplyScalar=
Wa;c.multiplyScalarAndAdd=Ya;c.ortho=ia;c.perspective=C;c.perspectiveFromFieldOfView=Y;c.rotate=t;c.rotateX=e;c.rotateY=p;c.rotateZ=L;c.scale=x;c.set=B;c.str=Ha;c.sub=Ma;c.subtract=Ma;c.targetTo=Ca;c.translate=w;c.transpose=A})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(c,b,I,P,B){function r(){return!!b._pe}function A(){return!!B("esri-wasm")}function G(){return x?x:x=(new Promise((e,p)=>c(["./pe-wasm"],e,p))).then(e=>
e.peWasm).then(({default:e})=>e({locateFile:p=>P.getAssetUrl(`esri/geometry/support/${p}`)})).then(e=>{m(e)})}function m(e){function p(J,T,N){J[T]=N(J[T])}b._pe=e;b.PeDefs.init();b.PeGTlistExtended.init();b.PeNotationMgrs.init();b.PeNotationUtm.init();b.PePCSInfo.init();b.PeGCSExtent=function(J){function T(){return N.apply(this,arguments)}I._inherits(T,J);var N=I._createSuper(T);T.prototype.destroy=function(){b._pe.destroy(this)};return I._createClass(T)}(b._pe.PeGCSExtent);e=[b._pe.PeDatum,b._pe.PeGeogcs,
b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];for(var L of e)p(L.prototype,"getName",J=>function(){return J.call(this,Array(b.PeDefs.PE_NAME_MAX))});for(const J of[b._pe.PeGeogtran,b._pe.PeProjcs])p(J.prototype,"getParameters",T=>function(){const N=Array(b.PeDefs.PE_PARM_MAX);let H=T.call(this);for(let U=0;U<N.length;U++){const g=b._pe.getValue(H,"*");N[U]=g?b._pe.wrapPointer(g,b._pe.PeParameter):null;H+=Int32Array.BYTES_PER_ELEMENT}return N});
p(b._pe.PeHorizon.prototype,"getCoord",J=>function(){const T=this.getSize();if(!T)return null;const N=[],H=J.call(this);w(N,T,H);return N});p(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",J=>{const T=b._pe._pe_getPeGTlistExtendedGTsSize();return function(){let N=null;var H=J.call(this);if(!b._pe.compare(H,b._pe.NULL)){N=[H];const U=this.getSteps();if(1<U){H=b._pe.getPointer(H);for(let g=1;g<U;g++)N.push(b._pe.wrapPointer(H+T*g,b._pe.PeGTlistExtendedGTs))}}return N}});const K=b._pe._pe_getPeHorizonSize();
L=J=>function(){let T=this._cache;T||(this._cache=T=new Map);if(T.has(J))return T.get(J);let N=null;var H=J.call(this);if(!b._pe.compare(H,b._pe.NULL)){N=[H];const U=H.getNump();if(1<U){H=b._pe.getPointer(H);for(let g=1;g<U;g++)N.push(b._pe.wrapPointer(H+K*g,b._pe.PeHorizon))}}T.set(J,N);return N};p(b._pe.PeProjcs.prototype,"horizonGcsGenerate",L);p(b._pe.PeProjcs.prototype,"horizonPcsGenerate",L);b._pe.PeObject.prototype.toString=function(J=b.PeDefs.PE_STR_OPTS_NONE){b._pe.ensureCache.prepare();
const T=b._pe.getPointer(this),N=b._pe.ensureInt8(Array(b.PeDefs.PE_BUFFER_MAX));return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(T,J,N))}}function l(e){if(e){var p=b._pe.getClass(e);p&&(p=b._pe.getCache(p))&&(e=b._pe.getPointer(e))&&delete p[e]}}function n(e,p){const L=[];p=Array(p);for(let K=0;K<e;K++)L.push(b._pe.ensureInt8(p));return L}function D(e){let p;Array.isArray(e[0])?(p=[],e.forEach(L=>{p.push(L[0],L[1])})):p=e;return p}function w(e,p,L,K=!1){if(K)for(K=0;K<2*p;K++)e[K]=b._pe.getValue(L+
K*Float64Array.BYTES_PER_ELEMENT,"double");else{K=0===e.length;for(let J=0;J<p;J++)K&&(e[J]=Array(2)),e[J][0]=b._pe.getValue(L,"double"),e[J][1]=b._pe.getValue(L+Float64Array.BYTES_PER_ELEMENT,"double"),L+=2*Float64Array.BYTES_PER_ELEMENT}}let x;b._pe=null;b.PeCSTransformations=void 0;(function(e){function p(J,T,N){b._pe.ensureCache.prepare();var H=D(N);const U=N===H;H=b._pe.ensureFloat64(H);(J=b._pe._pe_geog_to_proj(b._pe.getPointer(J),T,H))&&w(N,T,H,U);return J}function L(J,T,N){return K(J,T,N,
0)}function K(J,T,N,H){b._pe.ensureCache.prepare();var U=D(N);const g=N===U;U=b._pe.ensureFloat64(U);(J=b._pe._pe_proj_to_geog_center(b._pe.getPointer(J),T,U,H))&&w(N,T,U,g);return J}e.geogToProj=p;e.projGeog=function(J,T,N,H){switch(H){case b.PeDefs.PE_TRANSFORM_P_TO_G:return L(J,T,N);case b.PeDefs.PE_TRANSFORM_G_TO_P:return p(J,T,N)}return 0};e.projToGeog=L;e.projToGeogCenter=K})(b.PeCSTransformations||(b.PeCSTransformations={}));b.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;
e.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;e.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=b._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=
b._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;e.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=b._pe.PeDefs.prototype.PE_TYPE_LINUNIT;e.PE_STR_OPTS_NONE=b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=
b._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=b._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;e.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;e.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;
e.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(b.PeDefs||(b.PeDefs={}));b.PeFactory=void 0;(function(e){function p(T,N){let H=null,U=L[T];U||(U={},L[T]=U);U.hasOwnProperty(String(N))?H=U[N]:(T=b._pe.PeFactory.prototype.factoryByType(T,N),b._pe.compare(T,b._pe.NULL)||(H=T,U[N]=H));return H=J(H)}const L={},K={},J=T=>{if(T){const N=T.getType();switch(N){case b.PeDefs.PE_TYPE_GEOGCS:T=b._pe.castObject(T,b._pe.PeGeogcs);break;case b.PeDefs.PE_TYPE_PROJCS:T=b._pe.castObject(T,b._pe.PeProjcs);
break;case b.PeDefs.PE_TYPE_GEOGTRAN:T=b._pe.castObject(T,b._pe.PeGeogtran);break;default:N&b.PeDefs.PE_TYPE_UNIT&&(T=b._pe.castObject(T,b._pe.PeUnit))}}return T};e.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(T){return p(b.PeDefs.PE_TYPE_COORDSYS,T)};e.factoryByType=p;e.fromString=function(T,N){let H=null,U=K[T];U||(U={},K[T]=U);U.hasOwnProperty(N)?H=U[N]:(T=b._pe.PeFactory.prototype.fromString(T,N),b._pe.compare(T,b._pe.NULL)||(H=T,U[N]=H));return H=J(H)};
e.geogcs=function(T){return p(b.PeDefs.PE_TYPE_GEOGCS,T)};e.geogtran=function(T){return p(b.PeDefs.PE_TYPE_GEOGTRAN,T)};e.getCode=function(T){return b._pe.PeFactory.prototype.getCode(T)};e.projcs=function(T){return p(b.PeDefs.PE_TYPE_PROJCS,T)};e.unit=function(T){return p(b.PeDefs.PE_TYPE_UNIT,T)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=null;b.PeGTlistExtended=void 0;(function(e){let p;e.init=function(){e.PE_GTLIST_OPTS_COMMON=b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;p=b._pe._pe_getPeGTlistExtendedEntrySize()};
e.getGTlist=function(L,K,J,T,N,H){let U=null;const g=new b._pe.PeInteger(H);try{const z=b._pe.PeGTlistExtended.prototype.getGTlist(L,K,J,T,N,g);if(H=g.val)if(U=[z],1<H){const v=b._pe.getPointer(z);for(L=1;L<H;L++)U.push(b._pe.wrapPointer(v+p*L,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(g)}return U}})(b.PeGTlistExtended||(b.PeGTlistExtended={}));b.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(p){if(p&&p.length){for(const L of p)l(L),L.getEntries().forEach(K=>{l(K);K=K.getGeogtran();
l(K);K.getParameters().forEach(l);[K.getGeogcs1(),K.getGeogcs2()].forEach(J=>{l(J);const T=J.getDatum();l(T);l(T.getSpheroid());l(J.getPrimem());l(J.getUnit())})});b._pe.PeGTlistExtendedEntry.prototype.Delete(p[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));b.PeGTTransformations=void 0;(function(e){e.geogToGeog=function(p,L,K,J,T){b._pe.ensureCache.prepare();var N=D(K);const H=K===N;N=b._pe.ensureFloat64(N);let U=0;J&&(U=b._pe.ensureFloat64(J));(p=b._pe._pe_geog_to_geog(b._pe.getPointer(p),
L,N,U,T))&&w(K,L,N,H);return p}})(b.PeGTTransformations||(b.PeGTTransformations={}));b.PeNotationDms=void 0;(function(e){const p=(K,J,T,N,H,U)=>{b._pe.ensureCache.prepare();switch(K){case "dd":var g=b._pe._pe_geog_to_dd;var z=b.PeDefs.PE_DD_MAX;break;case "ddm":g=b._pe._pe_geog_to_ddm;z=b.PeDefs.PE_DDM_MAX;break;case "dms":g=b._pe._pe_geog_to_dms,z=b.PeDefs.PE_DMS_MAX}K=0;J&&(K=b._pe.getPointer(J));J=D(N);J=b._pe.ensureFloat64(J);z=n(T,z);N=b._pe.ensureInt32(z);if(H=g(K,T,J,H,N))for(g=0;g<T;g++)U[g]=
b._pe.UTF8ToString(z[g]);return H},L=(K,J,T,N,H)=>{b._pe.ensureCache.prepare();switch(K){case "dd":var U=b._pe._pe_dd_to_geog;break;case "ddm":U=b._pe._pe_ddm_to_geog;break;case "dms":U=b._pe._pe_dms_to_geog}K=0;J&&(K=b._pe.getPointer(J));J=N.map(g=>b._pe.ensureString(g));N=b._pe.ensureInt32(J);J=b._pe.ensureFloat64(Array(2*T));(U=U(K,T,N,J))&&w(H,T,J);return U};e.geogToDms=function(K,J,T,N,H){return p("dms",K,J,T,N,H)};e.dmsToGeog=function(K,J,T,N){return L("dms",K,J,T,N)};e.geogToDdm=function(K,
J,T,N,H){return p("ddm",K,J,T,N,H)};e.ddmToGeog=function(K,J,T,N){return L("ddm",K,J,T,N)};e.geogToDd=function(K,J,T,N,H){return p("dd",K,J,T,N,H)};e.ddToGeog=function(K,J,T,N){return L("dd",K,J,T,N)}})(b.PeNotationDms||(b.PeNotationDms={}));b.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
e.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geogToMgrsExtended=function(p,L,K,J,T,N,H){b._pe.ensureCache.prepare();let U=0;p&&(U=b._pe.getPointer(p));p=D(K);K=b._pe.ensureFloat64(p);p=n(L,b.PeDefs.PE_MGRS_MAX);const g=b._pe.ensureInt32(p);if(J=b._pe._pe_geog_to_mgrs_extended(U,L,K,J,T,N,g))for(T=0;T<L;T++)H[T]=b._pe.UTF8ToString(p[T]);return J};e.mgrsToGeogExtended=function(p,L,K,J,T){b._pe.ensureCache.prepare();
let N=0;p&&(N=b._pe.getPointer(p));p=K.map(H=>b._pe.ensureString(H));K=b._pe.ensureInt32(p);p=b._pe.ensureFloat64(Array(2*L));(J=b._pe._pe_mgrs_to_geog_extended(N,L,K,J,p))&&w(T,L,p);return J}})(b.PeNotationMgrs||(b.PeNotationMgrs={}));b.PeNotationUsng=void 0;(function(e){e.geogToUsng=function(p,L,K,J,T,N,H){b._pe.ensureCache.prepare();let U=0;p&&(U=b._pe.getPointer(p));p=D(K);K=b._pe.ensureFloat64(p);p=n(L,b.PeDefs.PE_MGRS_MAX);const g=b._pe.ensureInt32(p);if(J=b._pe._pe_geog_to_usng(U,L,K,J,T,N,
g))for(T=0;T<L;T++)H[T]=b._pe.UTF8ToString(p[T]);return J};e.usngToGeog=function(p,L,K,J){b._pe.ensureCache.prepare();var T=0;p&&(T=b._pe.getPointer(p));p=K.map(N=>b._pe.ensureString(N));K=b._pe.ensureInt32(p);p=b._pe.ensureFloat64(Array(2*L));(T=b._pe._pe_usng_to_geog(T,L,K,p))&&w(J,L,p);return T}})(b.PeNotationUsng||(b.PeNotationUsng={}));b.PeNotationUtm=void 0;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
e.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geogToUtm=function(p,L,K,J,T){b._pe.ensureCache.prepare();var N=0;p&&(N=b._pe.getPointer(p));p=D(K);K=b._pe.ensureFloat64(p);p=n(L,b.PeDefs.PE_UTM_MAX);const H=b._pe.ensureInt32(p);if(J=b._pe._pe_geog_to_utm(N,L,K,J,H))for(N=0;N<L;N++)T[N]=b._pe.UTF8ToString(p[N]);return J};e.utmToGeog=function(p,L,K,J,T){b._pe.ensureCache.prepare();let N=0;p&&(N=b._pe.getPointer(p));p=K.map(H=>b._pe.ensureString(H));K=b._pe.ensureInt32(p);p=b._pe.ensureFloat64(Array(2*
L));(J=b._pe._pe_utm_to_geog(N,L,K,J,p))&&w(T,L,p);return J}})(b.PeNotationUtm||(b.PeNotationUtm={}));b.PePCSInfo=void 0;(function(e){const p=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(L,K=e.PE_PCSINFO_OPTION_DOMAIN){let J=
null,T=null;p.has(L)&&(T=p.get(L),T[K]&&(J=T[K]));J||(J=b._pe.PePCSInfo.prototype.generate(L,K),T||(T=[],p.set(L,T)),T[K]=J);return J}})(b.PePCSInfo||(b.PePCSInfo={}));b.PeVersion=void 0;(function(e){e.versionString=function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));const t=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return b.PeCSTransformations},get PeDefs(){return b.PeDefs},get PeFactory(){return b.PeFactory},get PeGCSExtent(){return b.PeGCSExtent},
get PeGTTransformations(){return b.PeGTTransformations},get PeGTlistExtended(){return b.PeGTlistExtended},get PeGTlistExtendedEntry(){return b.PeGTlistExtendedEntry},get PeNotationDms(){return b.PeNotationDms},get PeNotationMgrs(){return b.PeNotationMgrs},get PeNotationUsng(){return b.PeNotationUsng},get PeNotationUtm(){return b.PeNotationUtm},get PePCSInfo(){return b.PePCSInfo},get PeVersion(){return b.PeVersion},_init:m,get _pe(){return b._pe},isLoaded:r,isSupported:A,load:G},Symbol.toStringTag,
{value:"Module"}));b._init=m;b.isLoaded=r;b.isSupported=A;b.load=G;b.pe=t})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(c,b){const I=Math.PI/180;var P=b.earth.radius;const B=b.earth.eccentricitySquared;P={a1:P*B,a2:P*B*P*B,a3:P*B*B/2,a4:P*B*P*B*2.5,a5:P*B+P*B*B/2,a6:1-B};b={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:b.earth.radius,f:b.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,
f:0},104903:{a:b.moon.radius,f:b.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:b.mars.radius,f:b.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,
f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:b.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};c.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;c.earthEllipsoidConstants=P;c.spheroids=b;c.toRadians=I;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["../../chunks/_rollupPluginBabelHelpers","./GeographicTransformationStep"],function(c,b){return function(){function I(B){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(B&&B.steps)for(const r of B.steps)r instanceof b?this.steps.push(r):this.steps.push(new b({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}I.cacheKey=function(B,r){return[void 0!==B.wkid&&null!==B.wkid?B.wkid.toString():"-1",void 0!==B.wkt&&null!==B.wkt?B.wkt.toString():"",void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():""].join()};I.fromGE=function(B){const r=new I;let A="";for(const G of B.steps)B=
b.fromGE(G),r.steps.push(B),A+=B.uid.toString()+",";r._cachedProjection={};r._gtlistentry=null;r._chain=A;return r};var P=I.prototype;P.getInverse=function(){const B=new I;B.steps=[];for(let r=this.steps.length-1;0<=r;r--)B.steps.push(this.steps[r].getInverse());return B};P.getGTListEntry=function(){let B="";for(const r of this.steps)B+=r.uid.toString()+",";B!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=B);return this._gtlistentry};P.assignCachedGe=function(B,r,A){this._cachedProjection[I.cacheKey(B,
r)]=A};P.getCachedGeTransformation=function(B,r){let A="";for(const G of this.steps)A+=G.uid.toString()+",";A!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=A);B=this._cachedProjection[I.cacheKey(B,r)];return void 0===B?null:B};return c._createClass(I)}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){let b=0;return function(){function I(P){this.uid=b++;P?(this._wkt=null!=P.wkt?P.wkt:null,
this._wkid=null!=P.wkid?P.wkid:-1,this._isInverse=null!=P.isInverse?!0===P.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}I.fromGE=function(P){const B=new I;B._wkt=P.wkt;B._wkid=P.wkid;B._isInverse=P.isInverse;return B};I.prototype.getInverse=function(){const P=new I;P._wkt=this.wkt;P._wkid=this._wkid;P._isInverse=!this.isInverse;return P};c._createClass(I,[{key:"wkt",get:function(){return this._wkt},set:function(P){this._wkt=P;this.uid=b++}},{key:"wkid",get:function(){return this._wkid},
set:function(P){this._wkid=P;this.uid=b++}},{key:"isInverse",get:function(){return this._isInverse},set:function(P){this._isInverse=P;this.uid=b++}}]);return I}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(c,b,I,P){c.getGeometryZScaler=function(B,r,A){if(b.isNone(r)||b.isNone(A)||A.vcsWkid||P.equals(r,A))return null;r=I.getMetersPerVerticalUnitForSR(r);A=I.getMetersPerVerticalUnitForSR(A);const G=r/A;
if(1===G)return null;switch(B){case "point":case "esriGeometryPoint":return m=>{m&&null!=m.z&&(m.z*=G)};case "polyline":case "esriGeometryPolyline":return m=>{if(m)for(const l of m.paths)for(const n of l)2<n.length&&(n[2]*=G)};case "polygon":case "esriGeometryPolygon":return m=>{if(m)for(const l of m.rings)for(const n of l)2<n.length&&(n[2]*=G)};case "multipoint":case "esriGeometryMultipoint":return m=>{if(m)for(const l of m.points)2<l.length&&(l[2]*=G)};case "extent":case "esriGeometryExtent":return m=>
{m&&null!=m.zmin&&null!=m.zmax&&(m.zmin*=G,m.zmax*=G)};default:return null}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(c,b,I,P,B,r,A,G,m,l,n,D){function w(J){const T=[];let N=
0,H=0;for(let U=0;U<J.length;U++){const g=J[U];let z=null;for(let v=0;v<g.length;v++)z=g[v],T.push(z),0===v?H=N=z[0]:(N=Math.min(N,z[0]),H=Math.max(H,z[0]));z&&T.push([(N+H)/2,0])}return T}function x(J,T){if(!(J instanceof A||J instanceof r))throw K.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new I("straightLineDensify: the input geometry is neither polyline nor polygon");var N=G.getGeometryParts(J);const H=[];for(const g of N){N=[];H.push(N);N.push([g[0][0],g[0][1]]);
for(let z=0;z<g.length-1;z++){const v=g[z][0],f=g[z][1],q=g[z+1][0],R=g[z+1][1];var U=Math.sqrt((q-v)*(q-v)+(R-f)*(R-f));const M=(R-f)/U,Q=(q-v)/U,E=U/T;if(1<E){for(let C=1;C<=E-1;C++){const Y=C*T;N.push([Q*Y+v,M*Y+f])}U=(U+Math.floor(E-1)*T)/2;N.push([Q*U+v,M*U+f])}N.push([q,R])}}return"polygon"===J.type?new r({rings:H,spatialReference:J.spatialReference}):new A({paths:H,spatialReference:J.spatialReference})}function t(J,T,N){T&&(J=x(J,1E6),J=l.webMercatorToGeographic(J,!0));N&&(J=G.updatePolyGeometry(J,
N));return J}function e(J,T,N){if(Array.isArray(J)){var H=J[0];H>T?(N=G.offsetMagnitude(H,T),J[0]=H+-2*N*T):H<N&&(T=G.offsetMagnitude(H,N),J[0]=H+-2*T*N)}else H=J.x,H>T?(N=G.offsetMagnitude(H,T),J=J.clone().offset(-2*N*T,0)):H<N&&(T=G.offsetMagnitude(H,N),J=J.clone().offset(-2*T*N,0));return J}function p(J,T){let N=-1;for(let H=0;H<T.cutIndexes.length;H++){const U=T.cutIndexes[H],g=T.geometries[H],z=G.getGeometryParts(g);for(let v=0;v<z.length;v++){const f=z[v];f.some(q=>{if(180>q[0])return!0;q=0;
for(var R=0;R<f.length;R++){var M=f[R][0];q=M>q?M:q}q=Number(q.toFixed(9));q=-360*G.offsetMagnitude(q,180);for(R=0;R<f.length;R++)M=g.getPoint(v,R),g.setPoint(v,R,M.clone().offset(q,0));return!0})}if(U===N)if("polygon"===J[0].type)for(const v of G.getGeometryParts(g))J[U]=J[U].addRing(v);else{if("polyline"===J[0].type)for(const v of G.getGeometryParts(g))J[U]=J[U].addPath(v)}else N=U,J[U]=g}return J}async function L(J,T,N){if(!Array.isArray(J))return L([J],T);T&&"string"!==typeof T&&K.warn("normalizeCentralMeridian()",
"The url object is deprecated, use the url string instead");var H="string"===typeof T?T:T?.url??b.geometryServiceUrl;let U,g,z;let v=0;var f=[];T=[];for(var q of J)if(B.isNone(q))T.push(q);else{if(!R){var R=q.spatialReference;var M=m.getInfo(R);var Q=(U=R.isWebMercator)?102100:4326;g=G.cutParams[Q].maxX;z=G.cutParams[Q].minX;var E=G.cutParams[Q].plus180Line;Q=G.cutParams[Q].minus180Line}if(M)if("mesh"===q.type)T.push(q);else if("point"===q.type)T.push(e(q.clone(),g,z));else if("multipoint"===q.type){var C=
q.clone();C.points=C.points.map(Y=>e(Y,g,z));T.push(C)}else if("extent"===q.type)C=q.clone()._normalize(!1,!1,M),T.push(C.rings?new r(C):C);else if(q.extent){C=q.extent;const Y=2*G.offsetMagnitude(C.xmin,z)*g;let ia=0===Y?q.clone():G.updatePolyGeometry(q.clone(),Y);C.offset(Y,0);C.intersects(E)&&C.xmax!==g?(v=C.xmax>v?C.xmax:v,ia=t(ia,U),f.push(ia),T.push("cut")):C.intersects(Q)&&C.xmin!==z?(v=2*C.xmax*g>v?2*C.xmax*g:v,ia=t(ia,U,360),f.push(ia),T.push("cut")):T.push(ia)}else T.push(q.clone());else T.push(q)}R=
G.offsetMagnitude(v,g);M=-90;E=R;for(q=new A;0<R;)Q=-180+360*R,q.addPath([[Q,M],[Q,-1*M]]),M*=-1,R--;if(0<f.length&&0<E){R=await n.cut(H,f,q,N);R=p(f,R);M=[];f=[];for(E=0;E<T.length;E++)q=T[E],"cut"!==q?f.push(q):(q=R.shift(),Q=J[E],B.isSome(Q)&&"polygon"===Q.type&&Q.rings&&1<Q.rings.length&&q.rings.length>=Q.rings.length?(M.push(q),f.push("simplify")):f.push(U?l.geographicToWebMercator(q):q));if(!M.length)return f;T=await D.simplify(H,M,N);J=[];for(N=0;N<f.length;N++)H=f[N],"simplify"!==H?J.push(H):
J.push(U?l.geographicToWebMercator(T.shift()):T.shift());return J}J=[];for(N=0;N<T.length;N++)H=T[N],"cut"!==H?J.push(H):(H=f.shift(),J.push(!0===U?l.geographicToWebMercator(H):H));return J}const K=P.getLogger("esri.geometry.support.normalizeUtils");c.getDenormalizedExtent=function(J){if(!J)return null;const T=J.extent;if(!T)return null;var N=J.spatialReference&&m.getInfo(J.spatialReference);if(!N)return T;const [H,U]=N.valid;({width:N}=T);let {xmin:g,xmax:z}=T;[g,z]=[z,g];if("extent"===J.type||0===
N||N<=U||N>2*U||g<H||z>U)return T;let v;switch(J.type){case "polygon":if(1<J.rings.length)v=w(J.rings);else return T;break;case "polyline":if(1<J.paths.length)v=w(J.paths);else return T;break;case "multipoint":v=J.points}J=T.clone();for(let f=0;f<v.length;f++){let q=v[f][0];0>q?(q+=U,z=Math.max(q,z)):(q-=U,g=Math.min(q,g))}J.xmin=g;J.xmax=z;return J.width<N?(J.xmin-=U,J.xmax-=U,J):T};c.normalizeCentralMeridian=L;c.normalizeMapX=function(J,T){if(T=m.getInfo(T)){const [N,H]=T.valid;T=H-N;if(J<N)for(;J<
N;)J+=T;if(J>H)for(;J>H;)J-=T}return J};c.straightLineDensify=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(c,b,I,P){function B(r){return P.isPolygon(r)?r.rings:r.paths}b={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new b({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],
spatialReference:I.WebMercator}),minus180Line:new b({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:I.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new b({paths:[[[180,-180],[180,180]]],spatialReference:I.WGS84}),minus180Line:new b({paths:[[[-180,-180],[-180,180]]],spatialReference:I.WGS84})}};c.cutParams=b;c.getGeometryParts=B;c.offsetMagnitude=function(r,A){return Math.ceil((r-A)/(2*A))};c.updatePolyGeometry=function(r,
A){const G=B(r);for(const m of G)for(const l of m)l[0]+=A;return r};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define(["exports","../../geometry","../../request","../../geometry/support/jsonUtils","../utils"],function(c,b,I,P,B){c.cut=async function(r,A,G,m){r=B.parseUrl(r);const l=A[0].spatialReference;A={...m,query:{...r.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:P.getJsonType(A[0]),geometries:A}),cutter:JSON.stringify(G)}};
A=await I(r.path+"/cut",A);const {cutIndexes:n,geometries:D=[]}=A.data;return{cutIndexes:n,geometries:D.map(w=>{w=P.fromJSON(w);w.spatialReference=l;return w})}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(c,b,I,P,B,r){function A(G,m,l){const n={};for(const w in G)if("declaredClass"!==w){var D=G[w];if(null!=D&&"function"!==typeof D)if(Array.isArray(D)){n[w]=
[];for(let x=0;x<D.length;x++)n[w][x]=A(D[x])}else"object"===typeof D?D.toJSON?(D=D.toJSON(l&&l[w]),n[w]=m?D:JSON.stringify(D)):n[w]=m?D:JSON.stringify(D):n[w]=D}return n}c.asValidOptions=function(G,m){return m?{...m,query:{...(G??{}),...m.query}}:{query:G}};c.encode=A;c.getToken=function(G,m){return G?r.supportsApiKey(G)&&(m||b.apiKey)?m||b.apiKey:I.id?.findCredential(G)?.token:null};c.parseUrl=function(G){return"string"===typeof G?B.urlToObject(G):P.clone(G)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define(["exports","../../request","../../core/urlUtils","../../geometry/support/jsonUtils","./utils"],function(c,b,I,P,B){c.simplify=async function(r,A,G){const m="string"===typeof r?I.urlToObject(r):r;r=A[0].spatialReference;const l=P.getJsonType(A[0]);A={...G,query:{...m.query,f:"json",sr:r.wkid??JSON.stringify(r),geometries:JSON.stringify(B.encodeGeometries(A))}};({data:A}=await b(m.path+"/simplify",A));return B.decodeGeometries(A.geometries,
l,r)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,b){c.decodeGeometries=function(I,P,B){const r=b.getGeometryType(P);return I.map(A=>{A=r.fromJSON(A);A.spatialReference=B;return A})};c.encodeGeometries=function(I){return{geometryType:b.getJsonType(I[0]),geometries:I.map(P=>P.toJSON())}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(c,b,I,P,B,r,A){function G(t,e){if(!e)return null;if("x"in e){var p={x:0,y:0};[p.x,p.y]=t(e.x,e.y,n);null!=e.z&&(p.z=e.z);null!=e.m&&(p.m=e.m);return p}return"xmin"in e?(p={xmin:0,ymin:0,xmax:0,ymax:0},[p.xmin,p.ymin]=t(e.xmin,e.ymin,n),[p.xmax,p.ymax]=t(e.xmax,e.ymax,n),e.hasZ&&(p.zmin=e.zmin,p.zmax=e.zmax,p.hasZ=!0),e.hasM&&(p.mmin=e.mmin,p.mmax=e.mmax,p.hasM=!0),p):"rings"in e?{rings:m(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:m(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in
e?{points:l(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:null}function m(t,e){const p=[];for(const L of t)p.push(l(L,e));return p}function l(t,e){const p=[];for(const L of t)t=e(L[0],L[1],[0,0]),p.push(t),2<L.length&&t.push(L[2]),3<L.length&&t.push(L[3]);return p}const n=[0,0],D=G.bind(null,A.lngLatToXY),w=G.bind(null,A.xyToLngLat),x=new (function(){function t(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var e=t.prototype;e.push=async function(p,L,K){if(!(p&&p.length&&L&&K)||r.equals(L,
K))return p;const J={geometries:p,inSpatialReference:L,outSpatialReference:K,resolve:null};this._jobs.push(J);return new Promise(T=>{J.resolve=T;null===this._timer&&(this._timer=setTimeout(this._process,10))})};e._process=function(){this._timer=null;const p=this._jobs.shift();if(p){var {geometries:L,inSpatialReference:K,outSpatialReference:J,resolve:T}=p;A.canProject(K,J)?r.isWebMercator(J)?T(L.map(D)):T(L.map(w)):T(P.projectMany(B.jsonAdapter,L,K,J,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}};return b._createClass(t)}());c.checkProjectionSupport=async function(t,e){t&&e&&(t=Array.isArray(t)?t.map(p=>I.isSome(p.geometry)?p.geometry.spatialReference:null).filter(I.isSome):[t],await P.initializeProjection(t.map(p=>({source:p,dest:e}))))};c.project=function(t,e,p,L){if(!t)return t;p||(p=e,e=t.spatialReference);return r.isValid(e)&&r.isValid(p)&&!r.equals(e,p)?A.canProject(e,p)?(t=r.isWebMercator(p)?D(t):w(t),t.spatialReference=p,t):P.projectMany(B.jsonAdapter,[t],e,p,null,L)[0]:t};
c.projectMany=function(t,e,p){return x.push(t,e,p)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(c,b){let I=b._createClass(function(G,m,l){this.x=G;this.y=m;this.spatialReference=l;this.m=this.z=void 0}),P=b._createClass(function(G,m,l,n){this.rings=G;this.spatialReference=m;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);n&&(this.hasM=n)}),B=b._createClass(function(G,
m,l,n){this.paths=G;this.spatialReference=m;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);n&&(this.hasM=n)}),r=b._createClass(function(G,m,l,n){this.points=G;this.spatialReference=m;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);n&&(this.hasM=n)}),A=b._createClass(function(G,m,l,n,D){this.xmin=G;this.ymin=m;this.xmax=l;this.ymax=n;this.spatialReference=D;this.mmax=this.mmin=this.zmax=this.zmin=void 0});c.jsonAdapter={convertToGEGeometry:function(G,m){return null==m?null:G.convertJSONToGeometry(m)},exportPoint:function(G,
m,l){l=new I(G.getPointX(m),G.getPointY(m),l);const n=G.hasZ(m),D=G.hasM(m);n&&(l.z=G.getPointZ(m));D&&(l.m=G.getPointM(m));return l},exportPolygon:function(G,m,l){return new P(G.exportPaths(m),l,G.hasZ(m),G.hasM(m))},exportPolyline:function(G,m,l){return new B(G.exportPaths(m),l,G.hasZ(m),G.hasM(m))},exportMultipoint:function(G,m,l){return new r(G.exportPoints(m),l,G.hasZ(m),G.hasM(m))},exportExtent:function(G,m,l){var n=G.hasZ(m);const D=G.hasM(m);l=new A(G.getXMin(m),G.getYMin(m),G.getXMax(m),
G.getYMax(m),l);n&&(n=G.getZExtent(m),l.zmin=n.vmin,l.zmax=n.vmax);D&&(G=G.getMExtent(m),l.mmin=G.vmin,l.mmax=G.vmax);return l}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p,L,K,J,T,N,H,U,g,z){function v(Q){return null!=Q&&Q.every(E=>"exceedslimit"!==E.statisticType)}let f=b._createClass(function(Q,E=null,C,Y,ia){this.attributes=Q;this.geometry=C;this.centroid=Y;this.filterFlags=ia;this.groupId=-1;this.displayId=E});const q=new A.MemCacheStorage(2E6);let R=0,M=function(){function Q(C){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:K.queryCapabilities};this.geometryType=C.geometryType;this.hasM=!!C.hasM;
this.hasZ=!!C.hasZ;this.objectIdField=C.objectIdField;this.spatialReference=C.spatialReference;this.definitionExpression=C.definitionExpression;this.featureStore=C.featureStore;this.aggregateAdapter=C.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=C.timeInfo;C.cacheSpatialQueries&&(this._geometryQueryCache=new A.MemCache(R++ +"$$",q));this.fieldsIndex=new U(C.fields);C.scheduler&&C.priority&&(this._frameTask=C.scheduler.registerTask(C.priority))}
var E=Q.prototype;E.destroy=function(){this._frameTask=r.removeMaybe(this._frameTask);this.clearCache();r.destroyMaybe(this._geometryQueryCache);this._changeHandle=r.removeMaybe(this._changeHandle);r.destroyMaybe(this.fieldsIndex)};E.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};E.executeQuery=async function(C,Y){try{return(await this._executeQuery(C,{},Y)).createQueryResponse()}catch(ia){if(ia!==H.QUERY_ENGINE_EMPTY_RESULT)throw ia;
return(new J.QueryEngineResult([],C,this)).createQueryResponse()}};E.executeQueryForCount=async function(C={},Y){try{return(await this._executeQuery(C,{returnGeometry:!1,returnCentroid:!1,outSR:null},Y)).createQueryResponseForCount()}catch(ia){if(ia!==H.QUERY_ENGINE_EMPTY_RESULT)throw ia;return 0}};E.executeQueryForExtent=async function(C,Y){const ia=C.outSR;try{const ua=await this._executeQuery(C,{returnGeometry:!0,returnCentroid:!1,outSR:null},Y),Ca=ua.size;if(!Ca)return{count:0,extent:null};const Ha=
await this._getBounds(ua.items,ua.spatialReference,ia||this.spatialReference);return{count:Ca,extent:Ha}}catch(ua){if(ua===H.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ua;}};E.executeQueryForIds=async function(C,Y){return this.executeQueryForIdSet(C,Y).then(ia=>Array.from(ia))};E.executeQueryForIdSet=async function(C,Y){try{const ia=await this._executeQuery(C,{returnGeometry:!0,returnCentroid:!1,outSR:null},Y),ua=ia.items,Ca=new Set;await this._reschedule(()=>{for(const Ha of ua)Ca.add(ia.featureAdapter.getObjectId(Ha))},
Y);return Ca}catch(ia){if(ia===H.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ia;}};E.executeQueryForSnapping=async function(C,Y){const {point:ia,distance:ua,types:Ca}=C;if(Ca===J.SnappingTypes.NONE)return{candidates:[]};const Ha=await this._reschedule(()=>this._checkQuerySupport(C.query),Y),Ia=!t.equals(ia.spatialReference,this.spatialReference);Ia&&await L.checkProjectionSupport(ia.spatialReference,this.spatialReference);var Ja="number"===typeof ua?ua:ua.x,Ma="number"===typeof ua?ua:ua.y;Ja={xmin:ia.x-
Ja,xmax:ia.x+Ja,ymin:ia.y-Ma,ymax:ia.y+Ma,spatialReference:ia.spatialReference};Ja=Ia?L.project(Ja,this.spatialReference):Ja;if(!Ja)return{candidates:[]};Ma=(await x.normalizeCentralMeridian(w.fromJSON(ia),null,{signal:Y}))[0];const Wa=(await x.normalizeCentralMeridian(w.fromJSON(Ja),null,{signal:Y}))[0];if(r.isNone(Ma)||r.isNone(Wa))return{candidates:[]};const Ya=new J.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Wa.toJSON())),Y),Ha,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Ya),Y);await this._reschedule(()=>this._executeTimeQuery(Ya),Y);await this._reschedule(()=>this._executeAttributesQuery(Ya),Y);Y=Ma.toJSON();Y=Ia?L.project(Y,this.spatialReference):Y;return Ya.createSnappingResponse({...C,point:Y,distance:Ia?Math.max(Ja.xmax-Ja.xmin,Ja.ymax-Ja.ymin)/2:ua},ia.spatialReference)};E.executeQueryForLatestObservations=async function(C,Y){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new P("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:C,timeInfo:this.timeInfo});try{const ia=await this._executeQuery(C,{},Y);await this._reschedule(()=>this._filterLatest(ia),Y);return ia.createQueryResponse()}catch(ia){if(ia!==H.QUERY_ENGINE_EMPTY_RESULT)throw ia;return(new J.QueryEngineResult([],C,this)).createQueryResponse()}};E.executeQueryForSummaryStatistics=async function(C={},Y,ia){const {field:ua,normalizationField:Ca,valueExpression:Ha}=Y;return(await this._getQueryEngineResultForStats(C,{field:ua,normalizationField:Ca,valueExpression:Ha},
ia)).createSummaryStatisticsResponse(Y)};E.executeQueryForUniqueValues=async function(C={},Y,ia){const {field:ua,field2:Ca,field3:Ha,valueExpression:Ia}=Y;return(await this._getQueryEngineResultForStats(C,{field:ua,field2:Ca,field3:Ha,valueExpression:Ia},ia)).createUniqueValuesResponse(Y)};E.executeQueryForClassBreaks=async function(C={},Y,ia){const {field:ua,normalizationField:Ca,valueExpression:Ha}=Y;return(await this._getQueryEngineResultForStats(C,{field:ua,normalizationField:Ca,valueExpression:Ha},
ia)).createClassBreaksResponse(Y)};E.executeQueryForHistogram=async function(C={},Y,ia){const {field:ua,normalizationField:Ca,valueExpression:Ha}=Y;return(await this._getQueryEngineResultForStats(C,{field:ua,normalizationField:Ca,valueExpression:Ha},ia)).createHistogramResponse(Y)};E.fetchRecomputedExtents=async function(C){const [Y,ia]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),
this.spatialReference,this.spatialReference),r.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=N.getTimeExtent(this.timeInfo,this.featureStore)]);G.throwIfAborted(C);return{fullExtent:Y,timeExtent:ia}};E._getBounds=async function(C,Y,ia){const ua=l.set(l.create(),l.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(C,Ca=>l.expandWithAABB(ua,Ca));C={xmin:ua[0],ymin:ua[1],xmax:ua[3],ymax:ua[4],spatialReference:H.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&
isFinite(ua[2])&&isFinite(ua[5])&&(C.zmin=ua[2],C.zmax=ua[5]);Y=L.project(C,Y,ia);Y.spatialReference=H.cleanFromGeometryEngine(ia);0===Y.xmax-Y.xmin&&(ia=m.getMetersPerUnitForSR(Y.spatialReference),Y.xmin-=ia,Y.xmax+=ia);0===Y.ymax-Y.ymin&&(ia=m.getMetersPerUnitForSR(Y.spatialReference),Y.ymin-=ia,Y.ymax+=ia);this.hasZ&&null!=Y.zmin&&null!=Y.zmax&&0===Y.zmax-Y.zmin&&(ia=m.getMetersPerUnitForSR(Y.spatialReference),Y.zmin-=ia,Y.zmax+=ia);return Y};E._schedule=async function(C,Y){return r.isSome(this._frameTask)?
this._frameTask.schedule(C,Y):C(z.noBudget)};E._reschedule=async function(C,Y){return r.isSome(this._frameTask)?this._frameTask.reschedule(C,Y):C(z.noBudget)};E._getAllFeaturesQueryEngineResult=async function(C){return new J.QueryEngineResult(await this._getAllFeatures(),C,this)};E._getAllFeatures=async function(){if(r.isNone(this._allFeaturesPromise)){const ia=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(ua=>ia.push(ua))})().then(()=>ia)}const C=this._allFeaturesPromise,
Y=await C;return C===this._allFeaturesPromise?Y.slice():this._getAllFeatures()};E._executeQuery=async function(C,Y,ia){C=B.clone(C);C=await this._schedule(()=>H.normalizeQuery(C,this.definitionExpression,this.spatialReference),ia);C=await this._reschedule(()=>this._checkQuerySupport(C),ia);C={...C,...Y};const ua=await this._reschedule(()=>this._executeSceneFilterQuery(C,ia),ia),Ca=await this._reschedule(()=>this._executeGeometryQuery(C,ua,ia),ia);await this._reschedule(()=>this._executeAggregateIdsQuery(Ca),
ia);await this._reschedule(()=>this._executeObjectIdsQuery(Ca),ia);await this._reschedule(()=>this._executeTimeQuery(Ca),ia);await this._reschedule(()=>this._executeAttributesQuery(Ca),ia);return Ca};E._executeSceneFilterQuery=async function(C,Y){if(r.isNone(C.sceneFilter))return null;const {outSR:ia,returnGeometry:ua,returnCentroid:Ca}=C;var Ha=this.featureStore.featureSpatialReference,Ia=C.sceneFilter.geometry;const Ja=r.isNone(Ha)||t.equals(Ha,Ia.spatialReference)?Ia:L.project(Ia,Ha);if(!Ja)return null;
Ha=ua||Ca;Ha=t.isValid(ia)&&!t.equals(this.spatialReference,ia)&&Ha?async Ua=>this._project(Ua,ia):Ua=>Ua;const Ma=this.featureAdapter;Ia=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ja)),Y);if("disjoint"===C.sceneFilter.spatialRelationship){if(!Ia.length)return null;const Ua=new Set;for(var Wa of Ia)Ua.add(Ma.getObjectId(Wa));const gb=await this._reschedule(()=>this._getAllFeatures(),Y);Wa=await this._reschedule(async()=>{const na=await T.getSpatialQueryOperator("esriSpatialRelDisjoint",
Ja,this.geometryType,this.hasZ,this.hasM),ra=await this._runSpatialFilter(gb,Aa=>!Ua.has(Ma.getObjectId(Aa))||na(Ma.getGeometry(Aa)),Y);return new J.QueryEngineResult(ra,C,this)},Y);return Ha(Wa)}if(!Ia.length)return new J.QueryEngineResult([],C,this);if(this._canExecuteSinglePass(Ja,C))return Ha(new J.QueryEngineResult(Ia,C,this));const Ya=await T.getSpatialQueryOperator("esriSpatialRelContains",Ja,this.geometryType,this.hasZ,this.hasM);Wa=await this._runSpatialFilter(Ia,Ua=>Ya(Ma.getGeometry(Ua)),
Y);return Ha(new J.QueryEngineResult(Wa,C,this))};E._executeGeometryQuery=async function(C,Y,ia){if(r.isSome(Y)&&0===Y.items.length)return Y;C=r.isSome(Y)?Y.query:C;const {geometry:ua,outSR:Ca,spatialRel:Ha,returnGeometry:Ia,returnCentroid:Ja}=C;var Ma=this.featureStore.featureSpatialReference;const Wa=!ua||r.isNone(Ma)||t.equals(Ma,ua.spatialReference)?ua:L.project(ua,Ma),Ya=Ia||Ja,Ua=t.isValid(Ca)&&!t.equals(this.spatialReference,Ca),gb=this._geometryQueryCache&&r.isNone(Y)?Ua&&Ya?JSON.stringify({originalFilterGeometry:ua,
spatialRelationship:Ha,outSpatialReference:Ca}):JSON.stringify({originalFilterGeometry:ua,spatialRelationship:Ha}):null;Ma=gb?this._geometryQueryCache.get(gb):null;if(r.isSome(Ma))return new J.QueryEngineResult(Ma,C,this);Ma=async y=>{Ua&&Ya&&await this._project(y,Ca);gb&&this._geometryQueryCache.put(gb,y.items,y.items.length+1);return y};if(!Wa)return Ma(r.isSome(Y)?Y:await this._getAllFeaturesQueryEngineResult(C));const na=this.featureAdapter;let ra=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ua)),
ia);if("esriSpatialRelDisjoint"===Ha){if(!ra.length)return Ma(r.isSome(Y)?Y:await this._getAllFeaturesQueryEngineResult(C));const y=new Set;for(var Aa of ra)y.add(na.getObjectId(Aa));const ea=r.isSome(Y)?Y.items:await this._reschedule(()=>this._getAllFeatures(),ia);Aa=await this._reschedule(async()=>{const ka=await T.getSpatialQueryOperator(Ha,Wa,this.geometryType,this.hasZ,this.hasM),sa=await this._runSpatialFilter(ea,O=>!y.has(na.getObjectId(O))||ka(na.getGeometry(O)),ia);return new J.QueryEngineResult(sa,
C,this)},ia);return Ma(Aa)}if(r.isSome(Y)){const y=new I.PositionHint;ra=ra.filter(ea=>0<=I.indexOf(Y.items,ea,Y.items.length,y))}if(!ra.length)return Ma=new J.QueryEngineResult([],C,this),gb&&this._geometryQueryCache.put(gb,Ma.items,1),Ma;if(this._canExecuteSinglePass(Wa,C))return Ma(new J.QueryEngineResult(ra,C,this));const h=await T.getSpatialQueryOperator(Ha,Wa,this.geometryType,this.hasZ,this.hasM);Aa=await this._runSpatialFilter(ra,y=>h(na.getGeometry(y)),ia);return Ma(new J.QueryEngineResult(Aa,
C,this))};E._executeAggregateIdsQuery=function(C){if(0!==C.items.length&&C.query.aggregateIds&&C.query.aggregateIds.length&&!r.isNone(this.aggregateAdapter)){var Y=new Set;for(const ua of C.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ua).forEach(Ca=>Y.add(Ca));var ia=this.featureAdapter.getObjectId;C.items=C.items.filter(ua=>Y.has(ia(ua)))}};E._executeObjectIdsQuery=function(C){if(0!==C.items.length&&C.query.objectIds&&C.query.objectIds.length){var Y=new Set(C.query.objectIds),ia=
this.featureAdapter.getObjectId;C.items=C.items.filter(ua=>Y.has(ia(ua)))}};E._executeTimeQuery=function(C){if(0!==C.items.length){var Y=N.getTimeOperator(this.timeInfo,C.query.timeExtent,this.featureAdapter);r.isNone(Y)||(C.items=C.items.filter(Y))}};E._executeAttributesQuery=function(C){if(0!==C.items.length){var Y=p.getWhereClause(C.query.where,this.fieldsIndex);if(Y){if(!Y.isStandardized)throw new TypeError("Where clause is not standardized");C.items=C.items.filter(ia=>Y.testFeature(ia,this.featureAdapter))}}};
E._runSpatialFilter=async function(C,Y,ia){if(!Y)return C;if(r.isNone(this._frameTask))return C.filter(Ia=>Y(Ia));let ua=0;const Ca=[],Ha=async Ia=>{for(;ua<C.length;){const Ja=C[ua++];Y(Ja)&&(Ca.push(Ja),Ia.madeProgress());Ia.done&&await this._reschedule(Ma=>Ha(Ma),ia)}};return this._reschedule(Ia=>Ha(Ia),ia).then(()=>Ca)};E._filterLatest=function(C){const {trackIdField:Y,startTimeField:ia,endTimeField:ua}=this.timeInfo,Ca=ua||ia,Ha=new Map,Ia=this.featureAdapter.getAttribute;for(const Ja of C.items){const Ma=
Ia(Ja,Y),Wa=Ia(Ja,Ca),Ya=Ha.get(Ma);(!Ya||Wa>Ia(Ya,Ca))&&Ha.set(Ma,Ja)}C.items=Array.from(Ha.values())};E._canExecuteSinglePass=function(C,Y){({spatialRel:Y}=Y);return T.canQueryWithRBush(C)&&("esriSpatialRelEnvelopeIntersects"===Y||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===Y||"esriSpatialRelContains"===Y||"esriSpatialRelWithin"===Y))};E._project=async function(C,Y){if(!Y||t.equals(this.spatialReference,Y))return C;const ia=this.featureAdapter;Y=await L.projectMany(C.items.map(ua=>
H.getGeometry(this.geometryType,this.hasZ,this.hasM,ia.getGeometry(ua))),this.spatialReference,Y);C.items=Y.map((ua,Ca)=>ia.cloneWithGeometry(C.items[Ca],e.convertFromGeometry(ua,this.hasZ,this.hasM)));return C};E._getQueryBBoxes=function(C){if(T.canQueryWithRBush(C)){if(w.isExtent(C))return[n.fromValues(C.xmin,C.ymin,C.xmax,C.ymax)];if(w.isPolygon(C))return C.rings.map(Y=>n.fromValues(Math.min(Y[0][0],Y[2][0]),Math.min(Y[0][1],Y[2][1]),Math.max(Y[0][0],Y[2][0]),Math.max(Y[0][1],Y[2][1])))}return[D.getBoundsXY(n.create(),
C)]};E._searchFeatures=async function(C){const Y=new Set;await Promise.all(C.map(ia=>this.featureStore.forEachInBounds(ia,ua=>Y.add(ua))));C=Array.from(Y.values());Y.clear();return C};E._checkStatisticsSupport=async function(C,Y){if(0>(C.distance??0)||null!=C.geometryPrecision||C.multipatchOption||C.pixelSize||C.relationParam||C.text||C.outStatistics||C.groupByFieldsForStatistics||C.having||C.orderByFields)throw new P("feature-store:unsupported-query","Unsupported query options",{query:C});this._checkAttributesQuerySupport(C);
return Promise.all([this._checkStatisticsParamsSupport(Y),T.checkSpatialQuerySupport(C,this.geometryType,this.spatialReference),L.checkProjectionSupport(this.spatialReference,C.outSR)]).then(()=>C)};E._checkStatisticsParamsSupport=async function(C){var Y=[];C.valueExpression&&({arcadeUtils:Y}=await g.loadArcade(),Y=Y.extractFieldNames(C.valueExpression));C.field&&Y.push(C.field);C.field2&&Y.push(C.field2);C.field3&&Y.push(C.field3);C.normalizationField&&Y.push(C.normalizationField);if(!Y.length)throw new P("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:C});p.validateFields(this.fieldsIndex,Y,"params contains missing fields")};E._checkQuerySupport=async function(C){if(0>(C.distance??0)||null!=C.geometryPrecision||C.multipatchOption||C.pixelSize||C.relationParam||C.text)throw new P("feature-store:unsupported-query","Unsupported query options",{query:C});this._checkAttributesQuerySupport(C);this._checkStatisticsQuerySupport(C);return Promise.all([T.checkSpatialQuerySupport(C,this.geometryType,
this.spatialReference),L.checkProjectionSupport(this.spatialReference,C.outSR)]).then(()=>C)};E._checkAttributesQuerySupport=function(C){const {outFields:Y,orderByFields:ia,returnDistinctValues:ua,outStatistics:Ca}=C,Ha=Ca?Ca.map(Ia=>Ia.outStatisticFieldName&&Ia.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ia&&0<ia.length){const Ia=ia.map(Ja=>{const Ma=Ja.toLowerCase();return Ma.includes(" asc")?Ma.split(" asc")[0]:Ma.includes(" desc")?Ma.split(" desc")[0]:Ja}).filter(Ja=>!Ha.includes(Ja));
p.validateFields(this.fieldsIndex,Ia,"orderByFields contains missing fields")}if(Y&&0<Y.length)p.validateFields(this.fieldsIndex,Y,"outFields contains missing fields");else if(ua)throw new P("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:C});p.validateWhere(this.fieldsIndex,C.where)};E._checkStatisticsQuerySupport=function(C){const {outStatistics:Y,groupByFieldsForStatistics:ia,having:ua}=C;var Ca=ia&&ia.length,Ha=Y&&Y.length;if(ua){if(!Ca||!Ha)throw new P("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:C});p.validateHaving(this.fieldsIndex,ua,Y)}if(Ha&&v(Y)){Ha=Y.map(Ia=>Ia.onStatisticField).filter(Boolean);p.validateFields(this.fieldsIndex,Ha,"onStatisticFields contains missing fields");Ca&&p.validateFields(this.fieldsIndex,ia,"groupByFieldsForStatistics contains missing fields");for(const Ia of Y){const {onStatisticField:Ja,statisticType:Ma}=Ia;if(("percentile_disc"===Ma||"percentile_cont"===Ma)&&"statisticParameters"in
Ia){if({statisticParameters:Ca}=Ia,!Ca)throw new P("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ia,query:C});}else if("count"!==Ma&&Ja&&p.hasInvalidFieldType(Ja,this.fieldsIndex))throw new P("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ia,query:C});}}};E._getQueryEngineResultForStats=async function(C,Y,ia){C=B.clone(C);try{C=await this._schedule(()=>H.normalizeQuery(C,this.definitionExpression,this.spatialReference),
ia);C=await this._reschedule(()=>this._checkStatisticsSupport(C,Y),ia);const ua=await this._reschedule(()=>this._executeSceneFilterQuery(C,ia),ia),Ca=await this._reschedule(()=>this._executeGeometryQuery(C,ua,ia),ia);await this._reschedule(()=>this._executeAggregateIdsQuery(Ca),ia);await this._reschedule(()=>this._executeObjectIdsQuery(Ca),ia);await this._reschedule(()=>this._executeTimeQuery(Ca),ia);await this._reschedule(()=>this._executeAttributesQuery(Ca),ia);return Ca}catch(ua){if(ua!==H.QUERY_ENGINE_EMPTY_RESULT)throw ua;
return new J.QueryEngineResult([],C,this)}};b._createClass(Q,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return Q}();c.Feature=f;c.QueryEngine=M;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(c,b,I,P){c.RemoveMode=void 0;(function(A){A[A.ALL=0]="ALL";A[A.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));let B=function(){function A(m,
l,n){this._namespace=m;this._storage=l;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}var G=A.prototype;G.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};G.resetHitRate=function(){this._hit=this._miss=0};G.put=function(m,l,n,D=0){this._storage.put(this._namespace+
m,l,n,D)};G.get=function(m){m=this._storage.get(this._namespace+m);void 0===m?++this._miss:++this._hit;return m};G.pop=function(m){m=this._storage.pop(this._namespace+m);void 0===m?++this._miss:++this._hit;return m};G.updateSize=function(m,l,n){this._storage.updateSize(this._namespace+m,l,n)};G.clear=function(){this._storage.clear(this._namespace)};G.clearAll=function(){this._storage.clearAll()};G.getStats=function(){return this._storage.getStats()};G.resetStats=function(){this._storage.resetStats()};
b._createClass(A,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return A}(),r=function(){function A(m=10485760){this._maxSize=m;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new P;this._users=new P}var G=A.prototype;G.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};G.register=function(m){this._users.push(m)};G.deregister=function(m){this._users.removeUnordered(m)};G.registerRemoveFunc=function(m,l){this._removeFuncs.push([m,l])};G.deregisterRemoveFunc=function(m){this._removeFuncs.filterInPlace(l=>l[0]!==m)};G.put=function(m,l,n,D){const w=this._db.get(m);w&&(this._size-=w.size,this._db.delete(m),w.entry!==l&&this._notifyRemove(m,w.entry,c.RemoveMode.ALL));n>this._maxSize?this._notifyRemove(m,l,c.RemoveMode.ALL):void 0===l?
console.warn("Refusing to cache undefined entry "):!n||0>n?console.warn("Refusing to cache entry with invalid size "+n):(D=1+Math.max(D,-3)- -3,this._db.set(m,{entry:l,size:n,lifetime:D,lives:D}),this._size+=n,this._checkSizeLimit())};G.updateSize=function(m,l,n){const D=this._db.get(m);if(D&&D.entry===l){for(this._size-=D.size;n>this._maxSize;)if(n=this._notifyRemove(m,l,c.RemoveMode.SOME),!(I.isSome(n)&&0<n)){this._db.delete(m);return}D.size=n;this._size+=n;this._checkSizeLimit()}};G.pop=function(m){const l=
this._db.get(m);if(l)return this._size-=l.size,this._db.delete(m),++this._hit,l.entry;++this._miss};G.get=function(m){const l=this._db.get(m);if(void 0===l)++this._miss;else return this._db.delete(m),l.lives=l.lifetime,this._db.set(m,l),++this._hit,l.entry};G.getStats=function(){const m={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},l={},n=[];this._db.forEach((x,t)=>{const e=x.lifetime;
n[e]=(n[e]||0)+x.size;this._users.forAll(p=>{p=p.namespace;t.startsWith(p)&&(l[p]=(l[p]||0)+x.size)})});const D={};this._users.forAll(x=>{const t=x.namespace;!isNaN(x.hitRate)&&0<x.hitRate?(l[t]=l[t]||0,D[t]=Math.round(100*x.hitRate)+"%"):D[t]="0%"});var w=Object.keys(l);w.sort((x,t)=>l[t]-l[x]);w.forEach(x=>m[x]=Math.round(l[x]/2**20)+"MB / "+D[x]);for(w=n.length-1;0<=w;--w){const x=n[w];x&&(m["Priority "+(w+-3-1)]=Math.round(x/this.size*100)+"%")}return m};G.resetStats=function(){this._hit=this._miss=
0;this._users.forAll(m=>m.resetHitRate())};G.clear=function(m){this._db.forEach((l,n)=>{n.startsWith(m)&&(this._size-=l.size,this._db.delete(n),this._notifyRemove(n,l.entry,c.RemoveMode.ALL))})};G.clearAll=function(){this._db.forEach((m,l)=>this._notifyRemove(l,m.entry,c.RemoveMode.ALL));this._size=0;this._db.clear()};G._getHitRate=function(){return this._hit/(this._hit+this._miss)};G._notifyRemove=function(m,l,n){let D;this._removeFuncs.some(w=>m.startsWith(w[0])?(w=w[1](l,n),"number"===typeof w&&
(D=w),!0):!1);return D};G._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [m,l]of this._db){this._db.delete(m);if(1>=l.lives){this._size-=l.size;const n=this._notifyRemove(m,l.entry,c.RemoveMode.SOME);I.isSome(n)&&0<n&&(this._size+=n,l.lives=l.lifetime,l.size=n,this._db.set(m,l))}else--l.lives,this._db.set(m,l);if(this._size<=.9*this.maxSize)break}};b._createClass(A,[{key:"size",get:function(){return this._size}},{key:"sizeMB",get:function(){return this._size/1024/1024}},{key:"maxSize",
get:function(){return this._maxSize},set:function(m){this._maxSize=Math.max(m,0);this._checkSizeLimit()}}]);return A}();c.MIN_PRIORITY=-3;c.MemCache=B;c.MemCacheStorage=r;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(c,b,I){function P(m,l){return m?A.get(m,l):null}function B(m,l,n,D=!0){const w=[];for(const x of l)if("*"!==x&&!m.has(x))if(D){l=
r(x);try{const t=P(l,m);if(!t)throw new b("feature-store:unsupported-query","invalid SQL expression",{where:l});if(!t.isStandardized)throw new b("feature-store:unsupported-query","expression is not standard",{clause:t});B(m,t.fieldNames,"expression contains missing fields")}catch(t){if((l=t&&t.details)&&(l.clause||l.where))throw t;l&&l.missingFields?w.push(...l.missingFields):w.push(x)}}else w.push(x);if(w.length)throw new b("feature-store:unsupported-query",n,{missingFields:w});}function r(m){return m.split(" as ")[0]}
const A=new I.WhereClauseCache(50,500),G=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));c.getAliasFromFieldName=function(m){return m.split(" as ")[1]};c.getExpressionFromFieldName=r;c.getWhereClause=P;c.hasInvalidFieldType=function(m,l){return(m=l.get(m))?!G.has(m.type):!1};c.validateFields=B;c.validateHaving=function(m,l,n){if(!l)return!0;const D=A.get(l,m);if(!D)throw new b("feature-store:unsupported-query",
"invalid SQL expression",{having:l});if(!D.isAggregate)throw new b("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:l});B(m,D.fieldNames,"having contains missing fields");if(!D.getExpressions().every(w=>{const {aggregateType:x,field:t}=w,e=m.get(t)?.name;return n.some(p=>{const {onStatisticField:L,statisticType:K}=p;return m.get(L)?.name===e&&K.toLowerCase().trim()===x})}))throw new b("feature-store:unsupported-query","expressions in having should also exist in outStatistics",
{having:l});return!0};c.validateWhere=function(m,l){if(!l)return!0;const n=A.get(l,m);if(!n)throw new b("feature-store:unsupported-query","invalid SQL expression",{where:l});if(!n.isStandardized)throw new b("feature-store:unsupported-query","where clause is not standard",{where:l});B(m,n.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../ItemCache","./WhereClause"],function(c,b,I,P){let B=function(){function r(A,G){this._cache=new I(A);this._invalidCache=new I(G)}r.prototype.get=function(A,G){const m=`${G.uid}:${A}`,l=this._cache.get(m);if(l)return l;if(void 0!==this._invalidCache.get(m))return null;try{const n=P.WhereClause.create(A,G);this._cache.put(m,n);return n}catch{return this._invalidCache.put(m,null),null}};return b._createClass(r)}();c.WhereClauseCache=B;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/core/ItemCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(c,b){return function(){function I(B,r){this._storage=new b.MemCacheStorage;this._storage.maxSize=B;r&&this._storage.registerRemoveFunc("",r)}var P=I.prototype;P.put=function(B,r){this._storage.put(B,r,1,1)};P.pop=function(B){return this._storage.pop(B)};P.get=function(B){return this._storage.get(B)};P.clear=function(){this._storage.clearAll()};P.destroy=function(){this._storage.destroy()};return c._createClass(I)}()})},
"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(c,b,I,P,B,r){function A(M,Q){M+="";return M.length>=Q?M:Array(Q-M.length+1).join("0")+M}function G(M,Q,E="0",C="0",Y="0",ia="0",ua="",Ca="0",Ha="0"){return"+"===ua||"-"===ua?(M=`${A(parseInt(M,10),4)}-${A(parseInt(Q,10),2)}-${A(parseInt(E,10),2)}`,Q="",10>parseFloat(ia)&&(Q="0"),C=`${A(parseInt(C,10),2)}:${A(parseInt(Y,
10),2)}:${Q+parseFloat(ia).toString()}`,ua=`${ua}${A(parseInt(Ca,10),2)}:${A(parseInt(Ha,10),2)}`,new Date(M+"T"+C+ua)):new Date(parseInt(M,10),parseInt(Q,10)-1,parseInt(E,10),parseInt(C,10),parseInt(Y,10),parseFloat(ia))}function m(M){let Q=N.exec(M);if(null!==Q){const [,E,C,Y,ia,ua,Ca]=Q;return G(E,C,Y,ia,ua,Ca)}Q=H.exec(M);if(null!==Q){const [,E,C,Y,ia,ua,Ca,Ha,Ia,Ja]=Q;return G(E,C,Y,ia,ua,Ca,Ha,Ia,Ja)}Q=U.exec(M);if(null!==Q){const [,E,C,Y,ia,ua,Ca,Ha,Ia]=Q;return G(E,C,Y,ia,ua,"0",Ca,Ha,Ia)}Q=
g.exec(M);if(null!==Q){const [,E,C,Y,ia,ua]=Q;return G(E,C,Y,ia,ua)}Q=T.exec(M);if(null!==Q){const [,E,C,Y]=Q;return G(E,C,Y)}throw Error("SQL Invalid Timestamp");}function l(M){const Q=T.exec(M);if(null===Q)try{return m(M)}catch{throw Error("SQL Invalid Date");}const [,E,C,Y]=Q;return new Date(parseInt(E,10),parseInt(C,10)-1,parseInt(Y,10))}function n(M){return Array.isArray(M)?M:[M]}function D(M){return null!==M?!0!==M:null}function w(M,Q){return null!=M&&null!=Q?!0===M&&!0===Q:!1===M||!1===Q?!1:
null}function x(M,Q){return null!=M&&null!=Q?!0===M||!0===Q:!0===M||!0===Q?!0:null}function t(M,Q){if(null==M)return null;let E=!1;for(const C of Q)if(null==C)E=null;else if(M===C){E=!0;break}return E}function e(M,Q,E){if(null==M)return null;let C="",Y=q.Normal;for(let ia=0;ia<Q.length;ia++){const ua=Q.charAt(ia);switch(Y){case q.Normal:ua===E?Y=q.Escaped:C="-[]/{}()*+?.\\^$|".includes(ua)?C+("\\"+ua):"%"===ua?C+".*":"_"===ua?C+".":C+ua;break;case q.Escaped:C="-[]/{}()*+?.\\^$|".includes(ua)?C+("\\"+
ua):C+ua,Y=q.Normal}}return(new RegExp("^"+C+"$","m")).test(M)}function p(M){return M instanceof Date?M.valueOf():M}function L(M,Q,E){if(null==Q||null==E)return null;Q=p(Q);E=p(E);switch(M){case "\x3c\x3e":return Q!==E;case "\x3d":return Q===E;case "\x3e":return Q>E;case "\x3c":return Q<E;case "\x3e\x3d":return Q>=E;case "\x3c\x3d":return Q<=E}}function K(M,Q,E){if("||"===M)return B.evaluateFunction("concat",[Q,E]);if(Q instanceof B.SqlInterval)if(E instanceof Date)switch(M){case "+":return new Date(Q.valueInMilliseconds()+
E.getTime());case "-":return Q.valueInMilliseconds()-E.getTime();case "*":return Q.valueInMilliseconds()*E.getTime();case "/":return Q.valueInMilliseconds()/E.getTime()}else if(E instanceof B.SqlInterval)switch(M){case "+":return B.SqlInterval.createFromMilliseconds(Q.valueInMilliseconds()+E.valueInMilliseconds());case "-":return B.SqlInterval.createFromMilliseconds(Q.valueInMilliseconds()-E.valueInMilliseconds());case "*":return Q.valueInMilliseconds()*E.valueInMilliseconds();case "/":return Q.valueInMilliseconds()/
E.valueInMilliseconds()}else Q=Q.valueInMilliseconds();else if(E instanceof B.SqlInterval)if(Q instanceof Date)switch(M){case "+":return new Date(E.valueInMilliseconds()+Q.getTime());case "-":return new Date(Q.getTime()-E.valueInMilliseconds());case "*":return Q.getTime()*E.valueInMilliseconds();case "/":return Q.getTime()/E.valueInMilliseconds()}else E=E.valueInMilliseconds();else if(Q instanceof Date&&"number"===typeof E)switch(E*=864E5,Q=Q.getTime(),M){case "+":return new Date(Q+E);case "-":return new Date(Q-
E);case "*":return new Date(Q*E);case "/":return new Date(Q/E)}else if(E instanceof Date&&"number"===typeof Q)switch(Q*=864E5,E=E.getTime(),M){case "+":return new Date(Q+E);case "-":return new Date(Q-E);case "*":return new Date(Q*E);case "/":return new Date(Q/E)}switch(M){case "+":return Q+E;case "-":return Q-E;case "*":return Q*E;case "/":return Q/E}}function J(M,Q,E,C){M=C.getAttribute(M,Q);return null!=M&&1===E[Q]?new Date(M):M}const T=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
H=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,U=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,g=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,z=new Set(["current_timestamp","current_date","current_time"]);let v=function(){function M(){}M.makeBool=function(Q){return!0===Q};M.featureValue=function(Q,E,C,Y){return J(Q,E,C,Y)};M.equalsNull=function(Q){return null===Q};M.applyLike=function(Q,E,C){return e(Q,E,
C)};M.ensureArray=function(Q){return n(Q)};M.applyIn=function(Q,E){return t(Q,E)};M.currentDate=function(){const Q=new Date;Q.setHours(0,0,0,0);return Q};M.makeSqlInterval=function(Q,E,C){return B.SqlInterval.createFromValueAndQualifer(Q,E,C)};M.convertInterval=function(Q){return Q instanceof B.SqlInterval?Q.valueInMilliseconds():Q};M.currentTimestamp=function(){return new Date};M.compare=function(Q,E,C){return L(Q,E,C)};M.calculate=function(Q,E,C){return K(Q,E,C)};M.makeComparable=function(Q){return p(Q)};
M.evaluateFunction=function(Q,E){return B.evaluateFunction(Q,E)};M.lookup=function(Q,E){Q=E[Q];return void 0===Q?null:Q};M.between=function(Q,E){return null==Q||null==E[0]||null==E[1]?null:Q>=E[0]&&Q<=E[1]};M.notbetween=function(Q,E){return null==Q||null==E[0]||null==E[1]?null:Q<E[0]||Q>E[1]};M.ternaryNot=function(Q){return D(Q)};M.ternaryAnd=function(Q,E){return w(Q,E)};M.ternaryOr=function(Q,E){return x(Q,E)};return b._createClass(M)}(),f=function(){function M(E,C){this.fieldsIndex=C;this._datefields=
{};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(E);const {isStandardized:Y,isAggregate:ia,referencedFieldNames:ua}=this._extractExpressionInfo(C);this._referencedFieldNames=ua;this.isStandardized=Y;this.isAggregate=ia}M.create=function(E,C){return new M(E,C)};var Q=M.prototype;Q.testSet=function(E,C=R){const Y={};for(const ia of this.fieldNames)Y[ia]=E.map(ua=>C.getAttribute(ua,ia));return!!this._evaluateNode(this.parseTree,{attributes:Y},R)};Q.calculateValue=
function(E,C=R){E=this._evaluateNode(this.parseTree,E,C);return E instanceof B.SqlInterval?E.valueInMilliseconds()/864E5:E};Q.calculateValueCompiled=function(E,C=R){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(E,this.parameters,C,this._datefields);if(I("esri-csp-restrictions"))return this.calculateValue(E,C);this._compileMe();return this.parseTree._compiledVersion(E,this.parameters,C,this._datefields)};Q.testFeature=function(E,C=R){return!!this._evaluateNode(this.parseTree,
E,C)};Q.testFeatureCompiled=function(E,C=R){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(E,this.parameters,C,this._datefields);if(I("esri-csp-restrictions"))return this.testFeature(E,C);this._compileMe();return!!this.parseTree._compiledVersion(E,this.parameters,C,this._datefields)};Q.getFunctions=function(){const E=new Set;this._visitAll(this.parseTree,C=>{"function"===C.type&&E.add(C.name.toLowerCase())});return Array.from(E)};Q.getExpressions=function(){const E=
new Map;this._visitAll(this.parseTree,C=>{if("function"===C.type){const Y=C.name.toLowerCase();C=C.args.value[0];if("column-reference"===C.type){C=C.column;const ia=`${Y}-${C}`;E.has(ia)||E.set(ia,{aggregateType:Y,field:C})}}});return[...E.values()]};Q.getVariables=function(){const E=new Set;this._visitAll(this.parseTree,C=>{"parameter"===C.type&&E.add(C.value.toLowerCase())});return Array.from(E)};Q._compileMe=function(){const E="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",E)).bind(v)};Q._extractExpressionInfo=function(E){const C=[],Y=new Set;let ia=!0,ua=!0;this._visitAll(this.parseTree,Ca=>{switch(Ca.type){case "column-reference":const Ha=E?.get(Ca.column);let Ia,Ja;Ha?Ia=Ja=Ha.name??"":(Ja=Ca.column,Ia=Ja.toLowerCase());Ha&&Ha.name&&("date"===Ha.type||"esriFieldTypeDate"===Ha.type)&&(this._datefields[Ha.name]=1);Y.has(Ia)||(Y.add(Ia),C.push(Ja));Ca.column=Ja;break;
case "function":const {name:Ma,args:Wa}=Ca;Ca=Wa.value.length;ia&&(ia=B.isStandardized(Ma,Ca));ua&&(ua=P.isAggregate(Ma,Ca))}});return{referencedFieldNames:Array.from(C),isStandardized:ia,isAggregate:ua}};Q._visitAll=function(E,C){if(null!=E)switch(C(E),E.type){case "when-clause":this._visitAll(E.operand,C);this._visitAll(E.value,C);break;case "case-expression":for(const Y of E.clauses)this._visitAll(Y,C);"simple"===E.format&&this._visitAll(E.operand,C);null!==E.else&&this._visitAll(E.else,C);break;
case "expression-list":for(const Y of E.value)this._visitAll(Y,C);break;case "unary-expression":this._visitAll(E.expr,C);break;case "binary-expression":this._visitAll(E.left,C);this._visitAll(E.right,C);break;case "function":this._visitAll(E.args,C)}};Q.evaluateNodeToJavaScript=function(E){switch(E.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(E.value)+", "+JSON.stringify(E.qualifier)+","+JSON.stringify(E.op)+")";case "case-expression":var C="";if("simple"===E.format){var Y=
"this.makeComparable("+this.evaluateNodeToJavaScript(E.operand)+")";C="( ";for(let ia=0;ia<E.clauses.length;ia++)C+=" ("+Y+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(E.clauses[ia].operand)+")) ? ("+this.evaluateNodeToJavaScript(E.clauses[ia].value)+") : "}else for(C="( ",Y=0;Y<E.clauses.length;Y++)C+=" this.makeBool("+this.evaluateNodeToJavaScript(E.clauses[Y].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(E.clauses[Y].value)+") : ";C=null!==E.else?C+this.evaluateNodeToJavaScript(E.else):
C+"null";return C+" )";case "parameter":return"this.lookup("+JSON.stringify(E.value.toLowerCase())+",lookups)";case "expression-list":C="[";for(Y of E.value)"["!==C&&(C+=","),C+=this.evaluateNodeToJavaScript(Y);return C+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(E.expr)+")";case "binary-expression":switch(E.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+" )";case "OR":return"this.ternaryOr("+
this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+" )";case "IS":if("null"!==E.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(E.left)+")";case "ISNOT":if("null"!==E.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(E.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(E.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(E.right)+
"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(E.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(E.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+
","+JSON.stringify(E.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+","+JSON.stringify(E.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(E.operator)+","+this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(E.operator)+
","+this.evaluateNodeToJavaScript(E.left)+","+this.evaluateNodeToJavaScript(E.right)+")"}throw Error("Not Supported Operator "+E.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(E.value);case "date":return"(new Date("+l(E.value).getTime().toString()+"))";case "timestamp":return"(new Date("+m(E.value).getTime().toString()+"))";case "current-time":return"date"===E.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+
JSON.stringify(E.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(E.name)+","+this.evaluateNodeToJavaScript(E.args)+")"}throw Error("Unsupported sql syntax "+E.type);};Q._evaluateNode=function(E,C,Y){switch(E.type){case "interval":return C=this._evaluateNode(E.value,C,Y),B.SqlInterval.createFromValueAndQualifer(C,E.qualifier,E.op);case "case-expression":if("simple"===E.format){var ia=p(this._evaluateNode(E.operand,C,Y));for(var ua=0;ua<E.clauses.length;ua++)if(ia===
p(this._evaluateNode(E.clauses[ua].operand,C,Y)))return this._evaluateNode(E.clauses[ua].value,C,Y)}else for(ia=0;ia<E.clauses.length;ia++)if(!0===this._evaluateNode(E.clauses[ia].operand,C,Y))return this._evaluateNode(E.clauses[ia].value,C,Y);return null!==E.else?this._evaluateNode(E.else,C,Y):null;case "parameter":return this.parameters[E.value.toLowerCase()];case "expression-list":ia=[];for(ua of E.value)ia.push(this._evaluateNode(ua,C,Y));return ia;case "unary-expression":return D(this._evaluateNode(E.expr,
C,Y));case "binary-expression":switch(E.operator){case "AND":return w(this._evaluateNode(E.left,C,Y),this._evaluateNode(E.right,C,Y));case "OR":return x(this._evaluateNode(E.left,C,Y),this._evaluateNode(E.right,C,Y));case "IS":if("null"!==E.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(E.left,C,Y);case "ISNOT":if("null"!==E.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(E.left,C,Y);case "IN":return ia=n(this._evaluateNode(E.right,
C,Y)),t(this._evaluateNode(E.left,C,Y),ia);case "NOT IN":return ia=n(this._evaluateNode(E.right,C,Y)),D(t(this._evaluateNode(E.left,C,Y),ia));case "BETWEEN":return ia=this._evaluateNode(E.left,C,Y),E=this._evaluateNode(E.right,C,Y),null==ia||null==E[0]||null==E[1]?null:ia>=p(E[0])&&ia<=p(E[1]);case "NOTBETWEEN":return ia=this._evaluateNode(E.left,C,Y),E=this._evaluateNode(E.right,C,Y),null==ia||null==E[0]||null==E[1]?null:ia<p(E[0])||ia>p(E[1]);case "LIKE":return e(this._evaluateNode(E.left,C,Y),
this._evaluateNode(E.right,C,Y),E.escape);case "NOT LIKE":return D(e(this._evaluateNode(E.left,C,Y),this._evaluateNode(E.right,C,Y),E.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return L(E.operator,this._evaluateNode(E.left,C,Y),this._evaluateNode(E.right,C,Y));case "-":case "+":case "*":case "/":case "||":return K(E.operator,this._evaluateNode(E.left,C,Y),this._evaluateNode(E.right,C,Y))}case "null":case "boolean":case "string":case "number":return E.value;
case "date":return l(E.value);case "timestamp":return m(E.value);case "current-time":return C=new Date,"date"===E.mode&&C.setHours(0,0,0,0),C;case "column-reference":return J(C,E.column,this._datefields,Y);case "data-type":return E.value;case "function":return C=this._evaluateNode(E.args,C,Y),this.isAggregate?P.aggregateFunction(E.name,C):B.evaluateFunction(E.name,C)}throw Error("Unsupported sql syntax "+E.type);};b._createClass(M,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,E=>{"current-time"===E.type?this._hasDateFunctions=!0:"function"===E.type&&(this._hasDateFunctions=this._hasDateFunctions||z.has(E.name.toLowerCase()))});return this._hasDateFunctions}}]);return M}();var q;(function(M){M[M.Normal=0]="Normal";M[M.Escaped=1]="Escaped"})(q||(q={}));const R={getAttribute(M,Q){return(M&&"object"===typeof M.attributes?
M.attributes:M)[Q]}};c.WhereClause=f;c.defaultAttributeAdapter=R;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(c){function b(B){let r=0;for(let A=0;A<B.length;A++)r+=B[A];return r/B.length}function I(B){const r=b(B),A=B.length;let G=0;for(const m of B)G+=(m-r)**2;return 1<A?G/(A-1):0}const P={min:{minParams:1,maxParams:1,evaluate:B=>null==B[0]?null:Math.min.apply(Math,B[0])},max:{minParams:1,maxParams:1,evaluate:B=>
null==B[0]?null:Math.max.apply(Math,B[0])},avg:{minParams:1,maxParams:1,evaluate:B=>null==B[0]?null:b(B[0])},sum:{minParams:1,maxParams:1,evaluate:B=>{if(null==B[0])B=null;else{B=B[0];let r=0;for(let A=0;A<B.length;A++)r+=B[A];B=r}return B}},stddev:{minParams:1,maxParams:1,evaluate:B=>null==B[0]?null:Math.sqrt(I(B[0]))},count:{minParams:1,maxParams:1,evaluate:B=>null==B[0]?null:B[0].length},var:{minParams:1,maxParams:1,evaluate:B=>null==B[0]?null:I(B[0])}};c.aggregateFunction=function(B,r){const A=
P[B.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(r.length<A.minParams||r.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${B.toUpperCase()}`);return A.evaluate(r)};c.isAggregate=function(B,r){B=P[B.toLowerCase()];return null!=B&&r>=B.minParams&&r<=B.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../arcade/featureset/support/errorsupport",
"../string","../../chunks/datetime"],function(c,b,I,P,B){function r(l){l=new Date(l.getTime());l.setHours(0,0,0,0);return l}function A(l,n){if(l instanceof Date)return n?r(l):l;if("string"===typeof l||l instanceof String)if(l=B.DateTime.fromSQL(l),l.isValid)return n?r(l.toJSDate()):l.toJSDate();throw new I.SqlError(I.SqlErrorCodes.CannotCastValue);}let G=function(){function l(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}l._fixDefaults=function(n){if(null!==
n.precision||null!==n.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};l._parseSecondsComponent=function(n,D){D.includes(".")?(D=D.split("."),n.second=parseFloat(D[0]),n.millis=parseInt(D[1],10)):n.second=parseFloat(D)};l.createFromMilliseconds=function(n){const D=new l;D.second=n/1E3;return D};l.createFromValueAndQualifer=function(n,D,w){let x=null;const t=new l;t.op="-"===w?"-":"+";if("interval-period"===D.type){l._fixDefaults(D);w=RegExp("^[0-9]{1,}$");if("year"===
D.period||"month"===D.period)throw Error("Year-Month Intervals not supported");if("second"===D.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(n))l._parseSecondsComponent(t,n);else throw Error("Illegal Interval");else if(w.test(n))t[D.period]=parseFloat(n);else throw Error("Illegal Interval");}else{l._fixDefaults(D.start);l._fixDefaults(D.end);if("year"===D.start.period||"month"===D.start.period)throw Error("Year-Month Intervals not supported");if("year"===D.end.period||"month"===D.end.period)throw Error("Year-Month Intervals not supported");
switch(D.start.period){case "day":switch(D.end.period){case "hour":x=RegExp("^[0-9]{1,} [0-9]{1,}$");if(x.test(n))t[D.start.period]=parseFloat(n.split(" ")[0]),t[D.end.period]=parseFloat(n.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":x=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(x.test(n))t[D.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),t.hour=parseFloat(n[0]),t.minute=parseFloat(n[1]);else throw Error("Illegal Interval");break;case "second":x=
RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(x.test(n))t[D.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),t.hour=parseFloat(n[0]),t.minute=parseFloat(n[1]),l._parseSecondsComponent(t,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(D.end.period){case "minute":x=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(x.test(n))t.hour=parseFloat(n.split(":")[0]),t.minute=parseFloat(n.split(":")[1]);
else throw Error("Illegal Interval");break;case "second":x=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(x.test(n))n=n.split(":"),t.hour=parseFloat(n[0]),t.minute=parseFloat(n[1]),l._parseSecondsComponent(t,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(D.end.period){case "second":x=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(x.test(n))n=n.split(":"),t.minute=parseFloat(n[0]),l._parseSecondsComponent(t,
n[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return t};l.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return b._createClass(l)}();const m={extract:{minParams:2,maxParams:2,evaluate:([l,n])=>{if(null==n)return null;if(n instanceof Date)switch(l.toUpperCase()){case "SECOND":return n.getSeconds();
case "MINUTE":return n.getMinutes();case "HOUR":return n.getHours();case "DAY":return n.getDate();case "MONTH":return n.getMonth()+1;case "YEAR":return n.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:l=>{if(2===l.length){const [n,D]=l;return null==n||null==D?null:n.toString().substring(D-1)}if(3===l.length){const [n,D,w]=l;return null==n||null==D||null==w?null:0>=w?"":n.toString().substring(D-1,D+w-1)}}},position:{minParams:2,maxParams:2,
evaluate:([l,n])=>null==l||null==n?null:n.indexOf(l)+1},trim:{minParams:2,maxParams:3,evaluate:l=>{var n=3===l.length,D=n?l[1]:" ";n=n?l[2]:l[1];if(null==D||null==n)return null;D=`(${P.escapeRegExpString(D)})`;switch(l[0]){case "BOTH":return n.replace(new RegExp(`^${D}*|${D}*$`,"g"),"");case "LEADING":return n.replace(new RegExp(`^${D}*`,"g"),"");case "TRAILING":return n.replace(new RegExp(`${D}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:l=>
null==l[0]?null:Math.abs(l[0])},ceiling:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.ceil(l[0])},floor:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.floor(l[0])},log:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])},log10:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.sin(l[0])},cos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.cos(l[0])},tan:{minParams:1,
maxParams:1,evaluate:l=>null==l[0]?null:Math.tan(l[0])},asin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.asin(l[0])},acos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.acos(l[0])},atan:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.atan(l[0])},sign:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:0<l[0]?1:0>l[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:l=>null==l[0]||null==l[1]?null:l[0]**l[1]},mod:{minParams:2,maxParams:2,evaluate:l=>null==l[0]||null==
l[1]?null:l[0]%l[1]},round:{minParams:1,maxParams:2,evaluate:l=>{const n=l[0];l=2===l.length?10**l[1]:1;return null==n?null:Math.round(n*l)/l}},truncate:{minParams:1,maxParams:2,evaluate:l=>null==l[0]?null:1===l.length?parseInt(l[0].toFixed(0),10):parseFloat(l[0].toFixed(l[1]))},char_length:{minParams:1,maxParams:1,evaluate:l=>"string"===typeof l[0]||l[0]instanceof String?l[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:l=>{let n="";for(let D=0;D<l.length;D++){if(null==l[D])return null;
n+=l[D].toString()}return n}},lower:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:l=>{for(const n of l)if(null!==n)return n;return null}},cosh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.cosh(l[0])},sinh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.sinh(l[0])},tanh:{minParams:1,maxParams:1,evaluate:l=>
null==l[0]?null:Math.tanh(l[0])},nullif:{minParams:2,maxParams:2,evaluate:l=>{const n=l[0];l=l[1];return(n instanceof Date?n.valueOf():n)===(l instanceof Date?l.valueOf():l)?null:n}},cast:{minParams:2,maxParams:2,evaluate:l=>{var n=l[0];l=l[1];if(null===n)return null;switch(l.type){case "integer":n=parseInt(n,10);if(isNaN(n))throw new I.SqlError(I.SqlErrorCodes.CannotCastValue);return n;case "smallint":n=parseInt(n,10);if(isNaN(n))throw new I.SqlError(I.SqlErrorCodes.CannotCastValue);if(32767<n||
-32767>n)throw new I.SqlError(I.SqlErrorCodes.CannotCastValue);return n;case "float":case "real":n=parseFloat(n);if(isNaN(n))throw new I.SqlError(I.SqlErrorCodes.CannotCastValue);return n;case "date":return A(n,!0);case "timestamp":return A(n,!1);case "varchar":n=n.toString();if(n.length>l.size)throw new I.SqlError(I.SqlErrorCodes.CannotCastValue);return n;default:throw new I.SqlError(I.SqlErrorCodes.InvalidDataType);}}}};c.SqlInterval=G;c.evaluateFunction=function(l,n){const D=m[l.toLowerCase()];
if(null==D)throw Error("Function Not Recognised");if(n.length<D.minParams||n.length>D.maxParams)throw Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return D.evaluate(n)};c.isStandardized=function(l,n){l=m[l.toLowerCase()];return null!=l&&n>=l.minParams&&n<=l.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(c,
b,I){c.SqlErrorCodes=void 0;(function(G){G.InvalidFunctionParameters="InvalidFunctionParameters";G.UnsupportedSqlFunction="UnsupportedSqlFunction";G.UnsupportedOperator="UnsupportedOperator";G.UnsupportedSyntax="UnsupportedSyntax";G.UnsupportedIsRhs="UnsupportedIsRhs";G.UnsupportedIsLhs="UnsupportedIsLhs";G.InvalidDataType="InvalidDataType";G.CannotCastValue="CannotCastValue";G.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||(c.SqlErrorCodes={}));const P={[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",
[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",
[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let B=function(G){function m(n,D){n=l.call(this,I.doSubstitutions(P[n],D));n.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(n),m);return n}b._inherits(m,G);var l=b._createSuper(m);return b._createClass(m)}(b._wrapNativeSuper(Error));c.FeatureSetErrorCodes=void 0;(function(G){G.NeverReach="NeverReach";G.NotImplemented="NotImplemented";
G.Cancelled="Cancelled";G.InvalidStatResponse="InvalidStatResponse";G.InvalidRequest="InvalidRequest";G.RequestFailed="RequestFailed";G.MissingFeatures="MissingFeatures";G.AggregationFieldNotFound="AggregationFieldNotFound";G.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const r={[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",
[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let A=function(G){function m(n,D){n=l.call(this,I.doSubstitutions(r[n],D));n.declaredRootClass=
"esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(n),m);return n}b._inherits(m,G);var l=b._createSuper(m);return b._createClass(m)}(b._wrapNativeSuper(Error));c.FeatureSetError=A;c.FeatureSetErrorMessages=r;c.SqlError=B;c.SqlErrorMessages=P;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(c,b){function I(w){return w&&
w.loc?`Line : ${w.loc.start?.line}, ${w.loc.start?.column}: `:""}function P(w,x){try{if(!x)return w;for(const t in x){let e=x[t];e||(e="");w=w.replace("{"+t+"}",x[t])}}catch(t){}return w}c.ExecutionErrorCodes=void 0;(function(w){w.AsyncNotEnabled="AsyncNotEnabled";w.ModulesNotSupported="ModulesNotSupported";w.CircularModules="CircularModules";w.NeverReach="NeverReach";w.UnsupportedHashType="UnsupportedHashType";w.InvalidParameter="InvalidParameter";w.UnexpectedToken="UnexpectedToken";w.Unrecognised=
"Unrecognised";w.UnrecognisedType="UnrecognisedType";w.MaximumCallDepth="MaximumCallDepth";w.BooleanConditionRequired="BooleanConditionRequired";w.TypeNotAllowedInFeature="TypeNotAllowedInFeature";w.KeyMustBeString="KeyMustBeString";w.WrongNumberOfParameters="WrongNumberOfParameters";w.CallNonFunction="CallNonFunction";w.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";w.NoFunctionInDictionary="NoFunctionInDictionary";w.NoFunctionInArray="NoFunctionInArray";w.AssignModuleFunction="AssignModuleFunction";
w.LogicExpressionOrAnd="LogicExpressionOrAnd";w.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";w.FuncionNotFound="FunctionNotFound";w.InvalidMemberAccessKey="InvalidMemberAccessKey";w.UnsupportedUnaryOperator="UnsupportUnaryOperator";w.InvalidIdentifier="InvalidIdentifier";w.MemberOfNull="MemberOfNull";w.UnsupportedOperator="UnsupportedOperator";w.Cancelled="Cancelled";w.ModuleAccessorMustBeString="ModuleAccessorMustBeString";w.ModuleExportNotFound="ModuleExportNotFound";w.Immutable=
"Immutable";w.OutOfBounds="OutOfBounds";w.IllegalResult="IllegalResult";w.FieldNotFound="FieldNotFound";w.PortalRequired="PortalRequired";w.LogicError="LogicError";w.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";w.KeyAccessorMustBeString="KeyAccessorMustBeString";w.WrongSpatialReference="WrongSpatialReference"})(c.ExecutionErrorCodes||(c.ExecutionErrorCodes={}));const B={[c.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[c.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",
[c.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[c.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[c.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[c.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[c.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[c.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[c.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[c.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[c.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[c.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[c.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[c.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[c.ExecutionErrorCodes.PortalRequired]:"Portal is required",[c.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[c.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[c.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[c.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[c.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[c.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[c.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[c.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[c.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[c.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[c.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[c.ExecutionErrorCodes.Immutable]:"Object is immutable",[c.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[c.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[c.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[c.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[c.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[c.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[c.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[c.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[c.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[c.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[c.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[c.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[c.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[c.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let r=function(w){function x(...e){return t.call(this,...e)}b._inherits(x,w);var t=b._createSuper(x);return b._createClass(x)}(b._wrapNativeSuper(Error)),A=function(w){function x(e,
p){e=t.call(this,I(p)+e.message,{cause:e});e.loc=null;Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(e),x);p&&p.loc&&(e.loc=p.loc);return e}b._inherits(x,w);var t=b._createSuper(x);return b._createClass(x)}(r),G=function(w){function x(e,p,L,K){e=t.call(this,"Execution error - "+I(L)+P(B[p],K));e.loc=null;e.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(e),x);L&&L.loc&&(e.loc=L.loc);return e}
b._inherits(x,w);var t=b._createSuper(x);return b._createClass(x)}(b._wrapNativeSuper(Error)),m=function(w){function x(e,p,L,K){e=t.call(this,"Compilation error - "+I(L)+P(B[p],K));e.loc=null;e.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(e),x);L&&L.loc&&(e.loc=L.loc);return e}b._inherits(x,w);var t=b._createSuper(x);return b._createClass(x)}(b._wrapNativeSuper(Error)),l=function(w){function x(){var e=t.call(this,
"Uncompilable code structures");e.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(e),x);return e}b._inherits(x,w);var t=b._createSuper(x);return b._createClass(x)}(b._wrapNativeSuper(Error));c.ModuleErrorCodes=void 0;(function(w){w.UnrecognisedUri="UnrecognisedUri";w.UnsupportedUriProtocol="UnsupportedUriProtocol"})(c.ModuleErrorCodes||(c.ModuleErrorCodes={}));const n={[c.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[c.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let D=function(w){function x(e,p){e=t.call(this,P(n[e],p));e.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(e),x);return e}b._inherits(x,w);var t=b._createSuper(x);return b._createClass(x)}(b._wrapNativeSuper(Error));c.ArcadeCompilationError=m;c.ArcadeExecutionError=G;c.ArcadeUncompilableError=l;c.ErrorWithCause=r;c.ExecutionErrorMessages=B;c.LocatableArcadeExecutionError=
A;c.ModuleError=D;c.ModuleErrorMessages=n;c.doSubstitutions=P;c.ensureArcadeExecutionError=function(w,x,t){return"esri.arcade.arcadeexecutionerror"===t.declaredRootClass||"esri.arcade.arcadecompilationerror"===t.declaredRootClass?null===t.loc&&x&&x.loc?new A(t,{cause:t}):t:x&&x.loc?new A(t,{cause:t}):t};c.parsingValidationMessage=function(w,x,t){return"Parsing error - "+I(w)+P(B[x],t)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],
function(c){function b(a,u={}){const V=JSON.stringify([a,u]);let da=hd[V];da||(da=new Intl.ListFormat(a,u),hd[V]=da);return da}function I(a,u={}){const V=JSON.stringify([a,u]);let da=Hc[V];da||(da=new Intl.DateTimeFormat(a,u),Hc[V]=da);return da}function P(a,u={}){const V=JSON.stringify([a,u]);let da=Ic[V];da||(da=new Intl.NumberFormat(a,u),Ic[V]=da);return da}function B(a,u={}){const {base:V,...da}=u,ja=JSON.stringify([a,da]);let qa=Jc[ja];qa||(qa=new Intl.RelativeTimeFormat(a,u),Jc[ja]=qa);return qa}
function r(a){const u=[];for(let V=1;12>=V;V++){const da=bb.utc(2016,V,1);u.push(a(da))}return u}function A(a){const u=[];for(let V=1;7>=V;V++){const da=bb.utc(2016,11,13+V);u.push(a(da))}return u}function G(a,u,V,da,ja){a=a.listingMode(V);return"error"===a?null:"en"===a?da(u):ja(u)}function m(a,u){if(l(a)||null===a)return u;if(a instanceof jc)return a;if("string"===typeof a){const V=a.toLowerCase();return"default"===V?u:"local"===V||"system"===V?nc.instance:"utc"===V||"gmt"===V?Fb.utcInstance:Fb.parseSpecifier(V)||
Ub.create(a)}return n(a)?Fb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new me(a)}function l(a){return"undefined"===typeof a}function n(a){return"number"===typeof a}function D(a){return"number"===typeof a&&0===a%1}function w(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function x(a,u,V){if(0!==a.length)return a.reduce((da,ja)=>{ja=[u(ja),ja];return da?V(da[0],ja[0])===da[0]?da:ja:ja},null)[1]}function t(a,u){return u.reduce((V,da)=>
{V[da]=a[da];return V},{})}function e(a,u){return Object.prototype.hasOwnProperty.call(a,u)}function p(a,u,V){return D(a)&&a>=u&&a<=V}function L(a,u=2){return 0>a?"-"+(""+-a).padStart(u,"0"):(""+a).padStart(u,"0")}function K(a){if(!l(a)&&null!==a&&""!==a)return parseInt(a,10)}function J(a){if(!l(a)&&null!==a&&""!==a)return parseFloat(a)}function T(a){if(!l(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function N(a,u,V=!1){u=10**u;return(V?Math.trunc:Math.round)(a*u)/u}function H(a){return 0===
a%4&&(0!==a%100||0===a%400)}function U(a,u){var V=u-1;V=V-12*Math.floor(V/12)+1;return 2===V?H(a+(u-V)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][V-1]}function g(a){let u=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(u=new Date(u),u.setUTCFullYear(a.year,a.month-1,a.day));return+u}function z(a){var u=a-1;u=(u+Math.floor(u/4)-Math.floor(u/100)+Math.floor(u/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===u?53:
52}function v(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function f(a,u,V,da=null){a=new Date(a);const ja={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};da&&(ja.timeZone=da);return(u=(new Intl.DateTimeFormat(V,{timeZoneName:u,...ja})).formatToParts(a).find(qa=>"timezonename"===qa.type.toLowerCase()))?u.value:null}function q(a,u){a=parseInt(a,10);Number.isNaN(a)&&(a=0);u=parseInt(u,10)||0;u=0>a||Object.is(a,-0)?-u:u;return 60*a+u}function R(a){const u=
Number(a);if("boolean"===typeof a||""===a||Number.isNaN(u))throw new Da(`Invalid unit value ${a}`);return u}function M(a,u){const V={};for(const da in a)if(e(a,da)){const ja=a[da];void 0!==ja&&null!==ja&&(V[u(da)]=R(ja))}return V}function Q(a,u){const V=Math.trunc(Math.abs(a/60)),da=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(u){case "short":return`${a}${L(V,2)}:${L(da,2)}`;case "narrow":return`${a}${V}${0<da?`:${da}`:""}`;case "techie":return`${a}${L(V,2)}${L(da,2)}`;default:throw new RangeError(`Value format ${u} is out of range for property format`);
}}function E(a){return t(a,["hour","minute","second","millisecond"])}function C(a){switch(a){case "narrow":return[...ne];case "short":return[...Kc];case "long":return[...oe];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Y(a){switch(a){case "narrow":return[...pe];case "short":return[...id];case "long":return[...Lc];case "numeric":return"1234567".split("");default:return null}}function ia(a){switch(a){case "narrow":return[...qe];
case "short":return[...re];case "long":return[...se];default:return null}}function ua(a,u,V="always",da=!1){const ja={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var qa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===V&&qa)switch(V="days"===a,u){case 1:return V?"tomorrow":`next ${ja[a][0]}`;case -1:return V?"yesterday":`last ${ja[a][0]}`;case 0:return V?
"today":`this ${ja[a][0]}`}V=Object.is(u,-0)||0>u;u=Math.abs(u);qa=1===u;const za=ja[a];a=da?qa?za[1]:za[2]||za[1]:qa?ja[a][0]:a;return V?`${u} ${a} ago`:`in ${u} ${a}`}function Ca(a,u){let V="";for(const da of a)V=da.literal?V+da.val:V+u(da.val);return V}function Ha(...a){a=a.reduce((u,V)=>u+V.source,"");return RegExp(`^${a}$`)}function Ia(...a){return u=>a.reduce(([V,da,ja],qa)=>{const [za,Ka,Qa]=qa(u,ja);return[{...V,...za},Ka||da,Qa]},[{},null,1]).slice(0,2)}function Ja(a,...u){if(null==a)return[null,
null];for(const [V,da]of u)if(u=V.exec(a))return da(u);return[null,null]}function Ma(...a){return(u,V)=>{const da={};let ja;for(ja=0;ja<a.length;ja++)da[a[ja]]=K(u[V+ja]);return[da,null,V+ja]}}function Wa(a,u,V){a=a[u];return l(a)?V:K(a)}function Ya(a,u){return[{hours:Wa(a,u,0),minutes:Wa(a,u+1,0),seconds:Wa(a,u+2,0),milliseconds:T(a[u+3])},null,u+4]}function Ua(a,u){const V=!a[u]&&!a[u+1];a=q(a[u+1],a[u+2]);return[{},V?null:Fb.instance(a),u+3]}function gb(a,u){return[{},a[u]?Ub.create(a[u]):null,
u+1]}function na(a){const [u,V,da,ja,qa,za,Ka,Qa,cb]=a,k="-"===u[0];a=Qa&&"-"===Qa[0];const db=($a,zb=!1)=>void 0!==$a&&(zb||$a&&k)?-$a:$a;return[{years:db(J(V)),months:db(J(da)),weeks:db(J(ja)),days:db(J(qa)),hours:db(J(za)),minutes:db(J(Ka)),seconds:db(J(Qa),"-0"===Qa),milliseconds:db(T(cb),a)}]}function ra(a,u,V,da,ja,qa,za){u={year:2===u.length?v(K(u)):K(u),month:Kc.indexOf(V)+1,day:K(da),hour:K(ja),minute:K(qa)};za&&(u.second=K(za));a&&(u.weekday=3<a.length?Lc.indexOf(a)+1:id.indexOf(a)+1);return u}
function Aa(a){const [,u,V,da,ja,qa,za,Ka,Qa,cb,k,db]=a;a=ra(u,ja,da,V,qa,za,Ka);let $a;$a=Qa?te[Qa]:cb?0:q(k,db);return[a,new Fb($a)]}function h(a){const [,u,V,da,ja,qa,za,Ka]=a;return[ra(u,ja,da,V,qa,za,Ka),Fb.utcInstance]}function y(a){const [,u,V,da,ja,qa,za,Ka]=a;return[ra(u,Ka,V,da,ja,qa,za),Fb.utcInstance]}function ea(a,u,V=!1){a={values:V?u.values:{...a.values,...(u.values||{})},loc:a.loc.clone(u.loc),conversionAccuracy:u.conversionAccuracy||a.conversionAccuracy,matrix:u.matrix||a.matrix};
return new jb(a)}function ka(a,u,V,da,ja){a=a[ja][V];var qa=u[V]/a;qa=Math.sign(qa)!==Math.sign(da[ja])&&0!==da[ja]&&1>=Math.abs(qa)?0>qa?Math.floor(qa):Math.ceil(qa):Math.trunc(qa);da[ja]+=qa;u[V]-=qa*a}function sa(a,u){ue.reduce((V,da)=>{if(l(u[da]))return V;V&&ka(a,u,V,u,da);return da},null)}function O(a,u){a=u.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(jb.fromMillis(a).as("days"))}function W(a,u,V){const da=[["years",
(Qa,cb)=>cb.year-Qa.year],["quarters",(Qa,cb)=>cb.quarter-Qa.quarter+4*(cb.year-Qa.year)],["months",(Qa,cb)=>cb.month-Qa.month+12*(cb.year-Qa.year)],["weeks",(Qa,cb)=>{Qa=O(Qa,cb);return(Qa-Qa%7)/7}],["days",O]],ja={},qa=a;let za,Ka;for(const [Qa,cb]of da)0<=V.indexOf(Qa)&&(za=Qa,ja[Qa]=cb(a,u),Ka=qa.plus(ja),Ka>u?(ja[Qa]--,a=qa.plus(ja)):a=Ka);return[a,ja,Ka,za]}function ca(a,u,V,da){let [ja,qa,za,Ka]=W(a,u,V);a=u-ja;V=V.filter(Qa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Qa));0===
V.length&&(za<u&&(za=ja.plus({[Ka]:1})),za!==ja&&(qa[Ka]=(qa[Ka]||0)+a/(za-ja)));u=jb.fromObject(qa,da);return 0<V.length?jb.fromMillis(a,da).shiftTo(...V).plus(u):u}function aa({numberingSystem:a},u=""){return new RegExp(`${Mc[a||"latn"]}${u}`)}function ha(a,u=V=>V){return{regex:a,deser:([V])=>{{let da=parseInt(V,10);if(isNaN(da)){da="";for(let ja=0;ja<V.length;ja++){const qa=V.charCodeAt(ja);if(-1!==V[ja].search(Mc.hanidec))da+=ve.indexOf(V[ja]);else for(const za in jd){const [Ka,Qa]=jd[za];qa>=
Ka&&qa<=Qa&&(da+=qa-Ka)}}V=parseInt(da,10)}else V=da}return u(V)}}}function ma(a){return a.replace(/\./g,"\\.?").replace(Nc,kd)}function oa(a,u){return null===a?null:{regex:RegExp(a.map(ma).join("|")),deser:([V])=>a.findIndex(da=>V.replace(/\./g,"").replace(Nc," ").toLowerCase()===da.replace(/\./g,"").replace(Nc," ").toLowerCase())+u}}function wa(a,u){return{regex:a,deser:([,V,da])=>q(V,da),groups:u}}function va(a){return{regex:a,deser:([u])=>u}}function Ea(a,u){const V=aa(u),da=aa(u,"{2}"),ja=aa(u,
"{3}"),qa=aa(u,"{4}"),za=aa(u,"{6}"),Ka=aa(u,"{1,2}"),Qa=aa(u,"{1,3}"),cb=aa(u,"{1,6}"),k=aa(u,"{1,9}"),db=aa(u,"{2,4}"),$a=aa(u,"{4,6}"),zb=Vb=>({regex:RegExp(Vb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([F])=>F,literal:!0}),ta=(Vb=>{if(a.literal)return zb(Vb);switch(Vb.val){case "G":return oa(u.eras("short",!1),0);case "GG":return oa(u.eras("long",!1),0);case "y":return ha(cb);case "yy":return ha(db,v);case "yyyy":return ha(qa);case "yyyyy":return ha($a);case "yyyyyy":return ha(za);
case "M":return ha(Ka);case "MM":return ha(da);case "MMM":return oa(u.months("short",!0,!1),1);case "MMMM":return oa(u.months("long",!0,!1),1);case "L":return ha(Ka);case "LL":return ha(da);case "LLL":return oa(u.months("short",!1,!1),1);case "LLLL":return oa(u.months("long",!1,!1),1);case "d":return ha(Ka);case "dd":return ha(da);case "o":return ha(Qa);case "ooo":return ha(ja);case "HH":return ha(da);case "H":return ha(Ka);case "hh":return ha(da);case "h":return ha(Ka);case "mm":return ha(da);case "m":return ha(Ka);
case "q":return ha(Ka);case "qq":return ha(da);case "s":return ha(Ka);case "ss":return ha(da);case "S":return ha(Qa);case "SSS":return ha(ja);case "u":return va(k);case "uu":return va(Ka);case "uuu":return ha(V);case "a":return oa(u.meridiems(),0);case "kkkk":return ha(qa);case "kk":return ha(db,v);case "W":return ha(Ka);case "WW":return ha(da);case "E":case "c":return ha(V);case "EEE":return oa(u.weekdays("short",!1,!1),1);case "EEEE":return oa(u.weekdays("long",!1,!1),1);case "ccc":return oa(u.weekdays("short",
!0,!1),1);case "cccc":return oa(u.weekdays("long",!0,!1),1);case "Z":case "ZZ":return wa(new RegExp(`([+-]${Ka.source})(?::(${da.source}))?`),2);case "ZZZ":return wa(new RegExp(`([+-]${Ka.source})(${da.source})?`),2);case "z":return va(/[a-z_+-/]{1,256}?/i);case " ":return va(/[^\S\n\r]/);default:return zb(Vb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ta.token=a;return ta}function Ba(a){return[`^${a.map(u=>u.regex).reduce((u,V)=>`${u}(${V.source})`,"")}$`,a]}function Fa(a,
u,V){if(a=a.match(u)){u={};let da=1;for(const ja in V)if(e(V,ja)){const qa=V[ja],za=qa.groups?qa.groups+1:1;!qa.literal&&qa.token&&(u[qa.token.val[0]]=qa.deser(a.slice(da,da+za)));da+=za}return[a,u]}return[a,{}]}function Ra(a){const u=ja=>{switch(ja){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";
case "k":return"weekYear";case "q":return"quarter";default:return null}};let V=null,da;l(a.z)||(V=Ub.create(a.z));l(a.Z)||(V||(V=new Fb(a.Z)),da=a.Z);l(a.q)||(a.M=3*(a.q-1)+1);l(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);l(a.u)||(a.S=T(a.u));return[Object.keys(a).reduce((ja,qa)=>{const za=u(qa);za&&(ja[za]=a[qa]);return ja},{}),V,da]}function Oa(a,u){return Array.prototype.concat(...a.map(V=>{if(!V.literal){var da=Ab.macroTokenToFormatOpts(V.val);da=Sa(da,
u);V=null==da||da.includes(void 0)?V:da}return V}))}function Ta(a,u,V){V=Oa(Ab.parseFormat(V),a);var da=V.map($a=>Ea($a,a));const ja=da.find($a=>$a.invalidReason);if(ja)return{input:u,tokens:V,invalidReason:ja.invalidReason};const [qa,za]=Ba(da);da=RegExp(qa,"i");const [Ka,Qa]=Fa(u,da,za),[cb,k,db]=Qa?Ra(Qa):[null,null,void 0];if(e(Qa,"a")&&e(Qa,"H"))throw new Z("Can't include meridiem when specifying 24-hour format");return{input:u,tokens:V,regex:da,rawMatches:Ka,matches:Qa,result:cb,zone:k,specificOffset:db}}
function Sa(a,u){if(!a)return null;u=Ab.create(u,a);var V=u.formatDateTimeParts;Oc||(Oc=bb.fromMillis(1555555555555));return V.call(u,Oc).map(da=>{{const {type:qa,value:za}=da;if("literal"===qa)da=/^\s+$/.test(za),da={literal:!da,val:da?" ":za};else{da=a[qa];var ja=we[qa];"object"===typeof ja&&(ja=ja[da]);da=ja?{literal:!1,val:ja}:void 0}}return da})}function La(a,u){return new Qb("unit out of range",`you specified ${u} (of type ${typeof u}) as a ${a}, which is invalid`)}function Va(a,u,V){u=new Date(Date.UTC(a,
u-1,V));100>a&&0<=a&&u.setUTCFullYear(u.getUTCFullYear()-1900);a=u.getUTCDay();return 0===a?7:a}function ab(a,u){a=H(a)?Pc:Qc;const V=a.findIndex(da=>da<u);return{month:V+1,day:u-a[V]}}function xa(a){const {year:u,month:V,day:da}=a;var ja=da+(H(u)?Pc:Qc)[V-1];const qa=Va(u,V,da);ja=Math.floor((ja-qa+10)/7);let za;1>ja?(za=u-1,ja=z(za)):ja>z(u)?(za=u+1,ja=1):za=u;return{weekYear:za,weekNumber:ja,weekday:qa,...E(a)}}function wb(a){const {weekYear:u,weekNumber:V,weekday:da}=a;var ja=Va(u,1,4),qa=H(u)?
366:365;ja=7*V+da-ja-3;1>ja?(qa=u-1,ja+=H(qa)?366:365):ja>qa?(qa=u+1,ja-=H(u)?366:365):qa=u;const {month:za,day:Ka}=ab(qa,ja);return{year:qa,month:za,day:Ka,...E(a)}}function sb(a){const {year:u,month:V,day:da}=a;var ja=da+(H(u)?Pc:Qc)[V-1];return{year:u,ordinal:ja,...E(a)}}function ib(a){const {year:u,ordinal:V}=a,{month:da,day:ja}=ab(u,V);return{year:u,month:da,day:ja,...E(a)}}function d(a){const u=D(a.year),V=p(a.month,1,12),da=p(a.day,1,U(a.year,a.month));return u?V?da?!1:La("day",a.day):La("month",
a.month):La("year",a.year)}function hb(a){const {hour:u,minute:V,second:da,millisecond:ja}=a;a=p(u,0,23)||24===u&&0===V&&0===da&&0===ja;const qa=p(V,0,59),za=p(da,0,59),Ka=p(ja,0,999);return a?qa?za?Ka?!1:La("millisecond",ja):La("second",da):La("minute",V):La("hour",u)}function Ib(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Rb(a){null===a.weekData&&(a.weekData=xa(a.c));return a.weekData}function nb(a,u){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};
return new bb({...a,...u,old:a})}function la(a,u,V){let da=a-6E4*u;const ja=V.offset(da);if(u===ja)return[da,u];da-=6E4*(ja-u);u=V.offset(da);return ja===u?[da,ja]:[a-6E4*Math.min(ja,u),Math.max(ja,u)]}function hc(a,u){a=new Date(a+6E4*u);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Tb(a,u,V){return la(g(a),u,V)}function Db(a,u){const V=a.o;var da=a.c.year+
Math.trunc(u.years);const ja=a.c.month+Math.trunc(u.months)+3*Math.trunc(u.quarters);da={...a.c,year:da,month:ja,day:Math.min(a.c.day,U(da,ja))+Math.trunc(u.days)+7*Math.trunc(u.weeks)};u=jb.fromObject({years:u.years-Math.trunc(u.years),quarters:u.quarters-Math.trunc(u.quarters),months:u.months-Math.trunc(u.months),weeks:u.weeks-Math.trunc(u.weeks),days:u.days-Math.trunc(u.days),hours:u.hours,minutes:u.minutes,seconds:u.seconds,milliseconds:u.milliseconds}).as("milliseconds");da=g(da);let [qa,za]=
la(da,V,a.zone);0!==u&&(qa+=u,za=a.zone.offset(qa));return{ts:qa,o:za}}function Jb(a,u,V,da,ja,qa){const {setZone:za,zone:Ka}=V;return a&&0!==Object.keys(a).length||u?(a=bb.fromObject(a,{...V,zone:u||Ka,specificOffset:qa}),za?a:a.setZone(Ka)):bb.invalid(new Qb("unparsable",`the input "${ja}" can't be parsed as ${da}`))}function ac(a,u,V=!0){return a.isValid?Ab.create(rb.create("en-US"),{allowZ:V,forceSimple:!0}).formatDateTimeFromString(a,u):null}function Yb(a,u){const V=9999<a.c.year||0>a.c.year;
let da="";V&&0<=a.c.year&&(da+="+");da+=L(a.c.year,V?6:4);u?(da=da+"-"+L(a.c.month),da=da+"-"+L(a.c.day)):(da+=L(a.c.month),da+=L(a.c.day));return da}function ic(a,u,V,da,ja,qa){let za=L(a.c.hour);u?(za=za+":"+L(a.c.minute),0===a.c.second&&V||(za+=":")):za+=L(a.c.minute);0===a.c.second&&V||(za+=L(a.c.second),0===a.c.millisecond&&da||(za=za+"."+L(a.c.millisecond,3)));ja&&(a.isOffsetFixed&&0===a.offset&&!qa?za+="Z":0>a.o?(za=za+"-"+L(Math.trunc(-a.o/60)),za=za+":"+L(Math.trunc(-a.o%60))):(za=za+"+"+
L(Math.trunc(a.o/60)),za=za+":"+L(Math.trunc(a.o%60))));qa&&(za+="["+a.zone.ianaName+"]");return za}function Eb(a){const u={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!u)throw new pa(a);return u}function Sb(a,u){const V=m(u.zone,yb.defaultZone);u=rb.fromObject(u);const da=yb.now();var ja;if(l(a.year))a=da;else{for(const qa of ld)l(a[qa])&&(a[qa]=md[qa]);if(ja=d(a)||hb(a))return bb.invalid(ja);ja=V.offset(da);[a,ja]=Tb(a,ja,V)}return new bb({ts:a,zone:V,loc:u,o:ja})}function kb(a,u,V){const da=l(V.round)?!0:V.round,ja=(za,Ka)=>{za=N(za,da||V.calendary?0:2,!0);return u.loc.clone(V).relFormatter(V).format(za,
Ka)},qa=za=>V.calendary?u.hasSame(a,za)?0:u.startOf(za).diff(a.startOf(za),za).get(za):u.diff(a,za).get(za);if(V.unit)return ja(qa(V.unit),V.unit);for(const za of V.units){const Ka=qa(za);if(1<=Math.abs(Ka))return ja(Ka,za)}return ja(a>u?-0:0,V.units[V.units.length-1])}function Gb(a){let u={};0<a.length&&"object"===typeof a[a.length-1]?(u=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[u,a]}function Hb(a){if(bb.isDateTime(a))return a;if(a&&a.valueOf&&n(a.valueOf()))return bb.fromJSDate(a);
if(a&&"object"===typeof a)return bb.fromObject(a);throw new Da(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Za extends Error{}class bc extends Za{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class X extends Za{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class fa extends Za{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class Z extends Za{}class pa extends Za{constructor(a){super(`Invalid unit ${a}`)}}class Da extends Za{}class Ga extends Za{constructor(){super("Zone is an abstract class")}}
const Pa={year:"numeric",month:"numeric",day:"numeric"},Xa={year:"numeric",month:"short",day:"numeric"},ob={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},lb={year:"numeric",month:"long",day:"numeric",weekday:"long"},xb={hour:"numeric",minute:"numeric"},Kb={hour:"numeric",minute:"numeric",second:"numeric"},nd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},od={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
pd={hour:"numeric",minute:"numeric",hourCycle:"h23"},qd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},rd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},sd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},td={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},ud={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},vd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},wd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xe={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},yd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},zd={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Ad={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class jc{get type(){throw new Ga;}get name(){throw new Ga;}get ianaName(){return this.name}get isUniversal(){throw new Ga;}offsetName(a,u){throw new Ga;}formatOffset(a,u){throw new Ga;}offset(a){throw new Ga;}equals(a){throw new Ga;}get isValid(){throw new Ga;}}let Rc=null;class nc extends jc{static get instance(){null===
Rc&&(Rc=new nc);return Rc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:u,locale:V}){return f(a,u,V)}formatOffset(a,u){return Q(this.offset(a),u)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const ye={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Ub extends jc{static create(a){pc[a]||(pc[a]=new Ub(a));return pc[a]}static resetCache(){pc=
{};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(u){return!1}}constructor(a){super();this.zoneName=a;this.valid=Ub.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:u,locale:V}){return f(a,u,V,this.name)}formatOffset(a,u){return Q(this.offset(a),u)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var u=this.name;
oc[u]||(oc[u]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:u,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));u=oc[u];if(u.formatToParts){u=u.formatToParts(a);var V=[];for(let k=0;k<u.length;k++){const {type:db,value:$a}=u[k],zb=ye[db];"era"===db?V[zb]=$a:l(zb)||(V[zb]=parseInt($a,10))}u=V}else{u=u.format(a).replace(/\u200E/g,"");u=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(u);const [,k,db,$a,zb,ta,Vb,F]=u;u=[$a,k,db,zb,
ta,Vb,F]}let [da,ja,qa,za,Ka,Qa,cb]=u;"BC"===za&&(da=-Math.abs(da)+1);u=g({year:da,month:ja,day:qa,hour:24===Ka?0:Ka,minute:Qa,second:cb,millisecond:0});a=+a;V=a%1E3;return(u-(a-(0<=V?V:1E3+V)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let hd={},Hc={},Ic={},Jc={},qc=null;class ze{constructor(a,u,V){this.padTo=V.padTo||0;this.floor=V.floor||!1;const {padTo:da,floor:ja,...qa}=V;if(!u||0<Object.keys(qa).length)u={useGrouping:!1,...V},0<V.padTo&&(u.minimumIntegerDigits=
V.padTo),this.inf=P(a,u)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):N(a,3);return L(a,this.padTo)}}class Ae{constructor(a,u,V){this.opts=V;V=this.originalZone=void 0;this.opts.timeZone?this.dt=a:"fixed"===a.zone.type?(V=a.offset/60*-1,V=0<=V?`Etc/GMT+${V}`:`Etc/GMT${V}`,0!==a.offset&&Ub.create(V).valid?this.dt=a:(V="UTC",this.dt=0===a.offset?a:a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone)):"system"===a.zone.type?this.dt=
a:"iana"===a.zone.type?(this.dt=a,V=a.zone.name):(V="UTC",this.dt=a.setZone("UTC").plus({minutes:a.offset}),this.originalZone=a.zone);a={...this.opts};a.timeZone=a.timeZone||V;this.dtf=I(u,a)}format(){return this.originalZone?this.formatToParts().map(({value:a})=>a).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const a=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?a.map(u=>{if("timeZoneName"===u.type){const V=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,
format:this.opts.timeZoneName});return{...u,value:V}}return u}):a}resolvedOptions(){return this.dtf.resolvedOptions()}}class Be{constructor(a,u,V){this.opts={style:"long",...V};!u&&w()&&(this.rtf=B(a,V))}format(a,u){return this.rtf?this.rtf.format(a,u):ua(u,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,u){return this.rtf?this.rtf.formatToParts(a,u):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,u,V,da=!1){a=
a||yb.defaultLocale;var ja;(ja=a)||(da?da="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),da=qc),ja=da);return new rb(ja,u||yb.defaultNumberingSystem,V||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:u,outputCalendar:V}={}){return rb.create(a,u,V)}constructor(a,u,V,da){var ja=a.indexOf("-x-");-1!==ja&&(a=a.substring(0,ja));ja=a.indexOf("-u-");if(-1===ja)var qa=[a];else{try{qa=I(a).resolvedOptions();var za=
a}catch($a){za=a.substring(0,ja),qa=I(za).resolvedOptions()}const {numberingSystem:k,calendar:db}=qa;qa=[za,k,db]}const [Ka,Qa,cb]=qa;this.locale=Ka;this.numberingSystem=u||Qa||null;this.outputCalendar=V||cb||null;u=this.locale;V=this.numberingSystem;if((qa=this.outputCalendar)||V)u.includes("-u-")||(u+="-u"),qa&&(u+=`-ca-${qa}`),V&&(u+=`-nu-${V}`);this.intl=u;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=
da;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),u=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);
return a&&u?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,u=!1,V=!0){return G(this,a,V,C,()=>{const da=u?{month:a,day:"numeric"}:{month:a},ja=u?"format":"standalone";this.monthsCache[ja][a]||(this.monthsCache[ja][a]=
r(qa=>this.extract(qa,da,"month")));return this.monthsCache[ja][a]})}weekdays(a,u=!1,V=!0){return G(this,a,V,Y,()=>{const da=u?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ja=u?"format":"standalone";this.weekdaysCache[ja][a]||(this.weekdaysCache[ja][a]=A(qa=>this.extract(qa,da,"weekday")));return this.weekdaysCache[ja][a]})}meridiems(a=!0){return G(this,void 0,a,()=>Bd,()=>{if(!this.meridiemCache){const u={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[bb.utc(2016,11,13,
9),bb.utc(2016,11,13,19)].map(V=>this.extract(V,u,"dayperiod"))}return this.meridiemCache})}eras(a,u=!0){return G(this,a,u,ia,()=>{const V={era:a};this.eraCache[a]||(this.eraCache[a]=[bb.utc(-40,1,1),bb.utc(2017,1,1)].map(da=>this.extract(da,V,"era")));return this.eraCache[a]})}extract(a,u,V){return(a=this.dtFormatter(a,u).formatToParts().find(da=>da.type.toLowerCase()===V))?a.value:null}numberFormatter(a={}){return new ze(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,u={}){return new Ae(a,
this.intl,u)}relFormatter(a={}){return new Be(this.intl,this.isEnglish(),a)}listFormatter(a={}){return b(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Sc=null;class Fb extends jc{static get utcInstance(){null===Sc&&(Sc=new Fb(0));return Sc}static instance(a){return 0===
a?Fb.utcInstance:new Fb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Fb(q(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${Q(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${Q(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,u){return Q(this.fixed,u)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===
a.type&&a.fixed===this.fixed}get isValid(){return!0}}class me extends jc{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Tc=()=>Date.now(),Cd="system",Dd=null,Ed=null,Uc=null,Fd=60,Gd;class yb{static get now(){return Tc}static set now(a){Tc=a}static set defaultZone(a){Cd=a}static get defaultZone(){return m(Cd,
nc.instance)}static get defaultLocale(){return Dd}static set defaultLocale(a){Dd=a}static get defaultNumberingSystem(){return Ed}static set defaultNumberingSystem(a){Ed=a}static get defaultOutputCalendar(){return Uc}static set defaultOutputCalendar(a){Uc=a}static get twoDigitCutoffYear(){return Fd}static set twoDigitCutoffYear(a){Fd=a%100}static get throwOnInvalid(){return Gd}static set throwOnInvalid(a){Gd=a}static resetCaches(){rb.resetCache();Ub.resetCache()}}const oe="January February March April May June July August September October November December".split(" "),
Kc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ne="JFMAMJJASOND".split(""),Lc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),id="Mon Tue Wed Thu Fri Sat Sun".split(" "),pe="MTWTFSS".split(""),Bd=["AM","PM"],se=["Before Christ","Anno Domini"],re=["BC","AD"],qe=["B","A"],Vc={D:Pa,DD:Xa,DDD:mb,DDDD:lb,t:xb,tt:Kb,ttt:nd,tttt:od,T:pd,TT:qd,TTT:rd,TTTT:sd,f:td,ff:vd,fff:xd,ffff:zd,F:ud,FF:wd,FFF:yd,FFFF:Ad};class Ab{static create(a,u={}){return new Ab(a,u)}static parseFormat(a){let u=
null,V="",da=!1;const ja=[];for(let qa=0;qa<a.length;qa++){const za=a.charAt(qa);"'"===za?(0<V.length&&ja.push({literal:da||/^\s+$/.test(V),val:V}),u=null,V="",da=!da):da?V+=za:za===u?V+=za:(0<V.length&&ja.push({literal:/^\s+$/.test(V),val:V}),u=V=za)}0<V.length&&ja.push({literal:da||/^\s+$/.test(V),val:V});return ja}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,u){this.opts=u;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,u){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());
return this.systemLoc.dtFormatter(a,{...this.opts,...u}).format()}formatDateTime(a,u={}){return this.loc.dtFormatter(a,{...this.opts,...u}).format()}formatDateTimeParts(a,u={}){return this.loc.dtFormatter(a,{...this.opts,...u}).formatToParts()}formatInterval(a,u={}){return this.loc.dtFormatter(a.start,{...this.opts,...u}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,u={}){return this.loc.dtFormatter(a,{...this.opts,...u}).resolvedOptions()}num(a,u=0){if(this.opts.forceSimple)return L(a,
u);const V={...this.opts};0<u&&(V.padTo=u);return this.loc.numberFormatter(V).format(a)}formatDateTimeFromString(a,u){const V="en"===this.loc.listingMode(),da=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ja=(k,db)=>this.loc.extract(a,k,db),qa=k=>a.isOffsetFixed&&0===a.offset&&k.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,k.format):"",za=(k,db)=>V?C(k)[a.month-1]:ja(db?{month:k}:{month:k,day:"numeric"},"month"),Ka=(k,db)=>V?Y(k)[a.weekday-1]:ja(db?{weekday:k}:{weekday:k,month:"long",
day:"numeric"},"weekday"),Qa=k=>{const db=Ab.macroTokenToFormatOpts(k);return db?this.formatWithSystemDefault(a,db):k},cb=k=>V?ia(k)[0>a.year?0:1]:ja({era:k},"era");return Ca(Ab.parseFormat(u),k=>{switch(k){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);
case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return qa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return qa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return qa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,
{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return V?Bd[12>a.hour?0:1]:ja({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return da?ja({day:"numeric"},"day"):this.num(a.day);case "dd":return da?ja({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ka("short",!0);case "cccc":return Ka("long",!0);case "ccccc":return Ka("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ka("short",!1);case "EEEE":return Ka("long",
!1);case "EEEEE":return Ka("narrow",!1);case "L":return da?ja({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return da?ja({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return za("short",!0);case "LLLL":return za("long",!0);case "LLLLL":return za("narrow",!0);case "M":return da?ja({month:"numeric"},"month"):this.num(a.month);case "MM":return da?ja({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return za("short",!1);case "MMMM":return za("long",
!1);case "MMMMM":return za("narrow",!1);case "y":return da?ja({year:"numeric"},"year"):this.num(a.year);case "yy":return da?ja({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return da?ja({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return da?ja({year:"numeric"},"year"):this.num(a.year,6);case "G":return cb("short");case "GG":return cb("long");case "GGGGG":return cb("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,
4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Qa(k)}})}formatDurationFromString(a,u){const V=ja=>{switch(ja[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";
case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};u=Ab.parseFormat(u);const da=u.reduce((ja,{literal:qa,val:za})=>qa?ja:ja.concat(za),[]);a=a.shiftTo(...da.map(V).filter(ja=>ja));return Ca(u,(ja=>qa=>{const za=V(qa);return za?this.num(ja.get(za),qa.length):qa})(a))}}class Qb{constructor(a,u){this.reason=a;this.explanation=u}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hd=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,
Id=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Wc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jd=RegExp(`${Wc.source}${`(?:${Id.source}?(?:\\[(${Hd.source})\\])?)?`}`),Xc=RegExp(`(?:T${Jd.source})?`),Ce=Ma("weekYear","weekNumber","weekDay"),Kd=Ma("year","ordinal"),Ld=RegExp(`${Wc.source} ?(?:${Id.source}|(${Hd.source}))?`),Md=RegExp(`(?: ${Ld.source})?`),Nd=RegExp(`^T?${Wc.source}$`),De=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
te={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ge=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
He=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,Ie=Ha(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Xc),Je=Ha(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Xc),Ke=Ha(/(\d{4})-?(\d{3})/,Xc),Le=Ha(Jd),Od=Ia(function(a,u){return[{year:Wa(a,u),month:Wa(a,u+1,1),day:Wa(a,u+2,1)},null,u+3]},Ya,Ua,gb),Me=Ia(Ce,Ya,Ua,gb),Ne=Ia(Kd,Ya,Ua,gb),Oe=Ia(Ya,Ua,gb),Pe=Ia(Ya),Qe=Ha(/(\d{4})-(\d\d)-(\d\d)/,Md),Re=Ha(Ld),Se=Ia(Ya,Ua,gb),Pd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Te={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Pd},Ue={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Pd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),ue=cc.slice(0).reverse();
class jb{constructor(a){const u="longterm"===a.conversionAccuracy||!1;let V=u?Ue:Te;a.matrix&&(V=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=u?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=V;this.isLuxonDuration=!0}static fromMillis(a,u){return jb.fromObject({milliseconds:a},u)}static fromObject(a,u={}){if(null==a||"object"!==typeof a)throw new Da(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new jb({values:M(a,
jb.normalizeUnit),loc:rb.fromObject(u),conversionAccuracy:u.conversionAccuracy,matrix:u.matrix})}static fromDurationLike(a){if(n(a))return jb.fromMillis(a);if(jb.isDuration(a))return a;if("object"===typeof a)return jb.fromObject(a);throw new Da(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,u){const [V]=Ja(a,[De,na]);return V?jb.fromObject(V,u):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,u){const [V]=Ja(a,[Nd,Pe]);return V?
jb.fromObject(V,u):jb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,u=null){if(!a)throw new Da("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,u);if(yb.throwOnInvalid)throw new fa(a);return new jb({invalid:a})}static normalizeUnit(a){const u={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!u)throw new pa(a);return u}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,u={}){u={...u,floor:!1!==u.round&&!1!==u.floor};return this.isValid?Ab.create(this.loc,u).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const u=cc.map(V=>{const da=this.values[V];return l(da)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:V.slice(0,-1)}).format(da)}).filter(V=>V);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(u)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=N(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var u=this.toMillis();if(0>u||864E5<=u)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
u=this.shiftTo("hours","minutes","seconds","milliseconds");let V="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===u.seconds&&0===u.milliseconds||(V+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===u.milliseconds||(V+=".SSS"));u=u.toFormat(V);a.includePrefix&&(u="T"+u);return u}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);const u=
{};for(const V of cc)if(e(a.values,V)||e(this.values,V))u[V]=a.get(V)+this.get(V);return ea(this,{values:u},!0)}minus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const u={};for(const V of Object.keys(this.values))u[V]=R(a(this.values[V],V));return ea(this,{values:u},!0)}get(a){return this[jb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...M(a,jb.normalizeUnit)};return ea(this,{values:a})}reconfigure({locale:a,
numberingSystem:u,conversionAccuracy:V,matrix:da}={}){a={loc:this.loc.clone({locale:a,numberingSystem:u}),matrix:da,conversionAccuracy:V};return ea(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();sa(this.matrix,a);return ea(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const u={};for(const [V,da]of Object.entries(a))0!==da&&(u[V]=da);return ea(this,{values:u},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(qa=>jb.normalizeUnit(qa));const u={},V={},da=this.toObject();let ja;for(const qa of cc)if(0<=a.indexOf(qa)){ja=qa;let za=0;for(const Qa in V)za+=this.matrix[Qa][qa]*V[Qa],V[Qa]=0;n(da[qa])&&(za+=da[qa]);const Ka=Math.trunc(za);u[qa]=Ka;V[qa]=(1E3*za-1E3*Ka)/1E3;for(const Qa in da)cc.indexOf(Qa)>cc.indexOf(qa)&&ka(this.matrix,da,Qa,u,qa)}else n(da[qa])&&(V[qa]=da[qa]);for(const qa in V)0!==V[qa]&&(u[ja]+=qa===ja?V[qa]:V[qa]/this.matrix[ja][qa]);return ea(this,{values:u},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const u of Object.keys(this.values))a[u]=0===this.values[u]?0:-this.values[u];return ea(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const da of cc){var u=this.values[da];var V=a.values[da];u=void 0===u||0===u?void 0===V||0===V:u===V;if(!u)return!1}return!0}}class vb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,u=null){if(!a)throw new Da("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,u);if(yb.throwOnInvalid)throw new X(a);return new vb({invalid:a})}static fromDateTimes(a,
u){a=Hb(a);u=Hb(u);var V=a&&a.isValid?u&&u.isValid?u<a?vb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${u.toISO()}`):null:vb.invalid("missing or invalid end"):vb.invalid("missing or invalid start");return null==V?new vb({start:a,end:u}):V}static after(a,u){u=jb.fromDurationLike(u);a=Hb(a);return vb.fromDateTimes(a,a.plus(u))}static before(a,u){u=jb.fromDurationLike(u);a=Hb(a);return vb.fromDateTimes(a.minus(u),a)}static fromISO(a,
u){const [V,da]=(a||"").split("/",2);if(V&&da){let za;try{var ja=bb.fromISO(V,u);za=ja.isValid}catch(Qa){za=!1}let Ka;try{var qa=bb.fromISO(da,u);Ka=qa.isValid}catch(Qa){Ka=!1}if(za&&Ka)return vb.fromDateTimes(ja,qa);if(za){if(qa=jb.fromISO(da,u),qa.isValid)return vb.after(ja,qa)}else if(Ka&&(ja=jb.fromISO(V,u),ja.isValid))return vb.before(qa,ja)}return vb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const u=this.start.startOf(a),V=this.end.startOf(a);return Math.floor(V.diff(u,a).get(a))+(V.valueOf()!==this.end.valueOf())}hasSame(a){return this.isValid?
this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:u}={}){return this.isValid?vb.fromDateTimes(a||this.s,u||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Hb).filter(qa=>this.contains(qa)).sort();const u=[];let {s:V}=this,da=0;for(;V<this.e;){var ja=a[da]||this.e;ja=+ja>+this.e?
this.e:ja;u.push(vb.fromDateTimes(V,ja));V=ja;da+=1}return u}splitBy(a){a=jb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:u}=this,V=1;const da=[];for(;u<this.e;){var ja=this.start.plus(a.mapUnits(qa=>qa*V));ja=+ja>+this.e?this.e:ja;da.push(vb.fromDateTimes(u,ja));u=ja;V+=1}return da}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:
!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const u=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return u>=a?null:vb.fromDateTimes(u,a)}union(a){return this.isValid?vb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [u,V]=a.sort((da,ja)=>da.s-ja.s).reduce(([da,ja],qa)=>
ja?ja.overlaps(qa)||ja.abutsStart(qa)?[da,ja.union(qa)]:[da.concat([ja]),qa]:[da,qa],[[],null]);V&&u.push(V);return u}static xor(a){let u=null,V=0;const da=[];a=a.map(ja=>[{time:ja.s,type:"s"},{time:ja.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ja,qa)=>ja.time-qa.time);for(const ja of a)V+="s"===ja.type?1:-1,1===V?u=ja.time:(u&&+u!==+ja.time&&da.push(vb.fromDateTimes(u,ja.time)),u=null);return vb.merge(da)}difference(...a){return vb.xor([this].concat(a)).map(u=>this.intersection(u)).filter(u=>
u&&!u.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Pa,u={}){return this.isValid?Ab.create(this.s.loc.clone(u),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,
{separator:u=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${u}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,u){return this.isValid?this.e.diff(this.s,a,u):jb.invalid(this.invalidReason)}mapEndpoints(a){return vb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const u=bb.now().setZone(a).set({month:12});return!a.isUniversal&&u.offset!==u.set({month:6}).offset}static isValidIANAZone(a){return Ub.isValidZone(a)}static normalizeZone(a){return m(a,yb.defaultZone)}static months(a=
"long",{locale:u=null,numberingSystem:V=null,locObj:da=null,outputCalendar:ja="gregory"}={}){return(da||rb.create(u,V,ja)).months(a)}static monthsFormat(a="long",{locale:u=null,numberingSystem:V=null,locObj:da=null,outputCalendar:ja="gregory"}={}){return(da||rb.create(u,V,ja)).months(a,!0)}static weekdays(a="long",{locale:u=null,numberingSystem:V=null,locObj:da=null}={}){return(da||rb.create(u,V,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:u=null,numberingSystem:V=null,locObj:da=null}=
{}){return(da||rb.create(u,V,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:u=null}={}){return rb.create(u,null,"gregory").eras(a)}static features(){return{relative:w()}}}const Mc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},jd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ve=Mc.hanidec.replace(/[\[|\]]/g,"").split(""),kd=`[ ${String.fromCharCode(160)}]`,Nc=new RegExp(kd,"g"),we={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Oc=null;const Qc=[0,31,59,90,120,151,181,212,243,273,304,334],Pc=[0,31,60,91,121,152,182,213,244,274,305,335],md={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},We={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ld="year month day hour minute second millisecond".split(" "),Xe="weekYear weekNumber weekday hour minute second millisecond".split(" "),Ye="year ordinal hour minute second millisecond".split(" ");
class bb{constructor(a){const u=a.zone||yb.defaultZone;let V=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(u.isValid?null:Ib(u));this.ts=l(a.ts)?yb.now():a.ts;let da=null;var ja=null;V||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(u)?[da,ja]=[a.old.c,a.old.o]:(ja=u.offset(this.ts),da=hc(this.ts,ja),da=(V=Number.isNaN(da.year)?new Qb("invalid input"):null)?null:da,ja=V?null:ja));this._zone=u;this.loc=a.loc||rb.create();this.invalid=V;this.weekData=null;this.c=da;this.o=ja;this.isLuxonDateTime=
!0}static now(){return new bb({})}static local(){const [a,u]=Gb(arguments),[V,da,ja,qa,za,Ka,Qa]=u;return Sb({year:V,month:da,day:ja,hour:qa,minute:za,second:Ka,millisecond:Qa},a)}static utc(){const [a,u]=Gb(arguments),[V,da,ja,qa,za,Ka,Qa]=u;a.zone=Fb.utcInstance;return Sb({year:V,month:da,day:ja,hour:qa,minute:za,second:Ka,millisecond:Qa},a)}static fromJSDate(a,u={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return bb.invalid("invalid input");const V=
m(u.zone,yb.defaultZone);return V.isValid?new bb({ts:a,zone:V,loc:rb.fromObject(u)}):bb.invalid(Ib(V))}static fromMillis(a,u={}){if(n(a))return-864E13>a||864E13<a?bb.invalid("Timestamp out of range"):new bb({ts:a,zone:m(u.zone,yb.defaultZone),loc:rb.fromObject(u)});throw new Da(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,u={}){if(n(a))return new bb({ts:1E3*a,zone:m(u.zone,yb.defaultZone),loc:rb.fromObject(u)});throw new Da("fromSeconds requires a numerical input");
}static fromObject(a,u={}){a=a||{};var V=m(u.zone,yb.defaultZone);if(!V.isValid)return bb.invalid(Ib(V));var da=yb.now();const ja=l(u.specificOffset)?V.offset(da):u.specificOffset,qa=M(a,Eb);var za=!l(qa.ordinal),Ka=!l(qa.year),Qa=!l(qa.month)||!l(qa.day);Ka=Ka||Qa;var cb=qa.weekYear||qa.weekNumber;u=rb.fromObject(u);if((Ka||za)&&cb)throw new Z("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Qa&&za)throw new Z("Can't mix ordinal dates with month/day");Qa=cb||qa.weekday&&
!Ka;let k=hc(da,ja);Qa?(da=Xe,cb=Ve,k=xa(k)):za?(da=Ye,cb=We,k=sb(k)):(da=ld,cb=md);let db=!1;for(var $a of da)l(qa[$a])?qa[$a]=db?cb[$a]:k[$a]:db=!0;Qa?($a=D(qa.weekYear),da=p(qa.weekNumber,1,z(qa.weekYear)),cb=p(qa.weekday,1,7),$a=$a?da?cb?!1:La("weekday",qa.weekday):La("week",qa.week):La("weekYear",qa.weekYear)):za?($a=D(qa.year),da=p(qa.ordinal,1,H(qa.year)?366:365),$a=$a?da?!1:La("ordinal",qa.ordinal):La("year",qa.year)):$a=d(qa);if($a=$a||hb(qa))return bb.invalid($a);za=Qa?wb(qa):za?ib(qa):
qa;const [zb,ta]=Tb(za,ja,V);V=new bb({ts:zb,zone:V,o:ta,loc:u});return qa.weekday&&Ka&&a.weekday!==V.weekday?bb.invalid("mismatched weekday",`you can't specify both a weekday of ${qa.weekday} and a date of ${V.toISO()}`):V}static fromISO(a,u={}){const [V,da]=Ja(a,[Ie,Od],[Je,Me],[Ke,Ne],[Le,Oe]);return Jb(V,da,u,"ISO 8601",a)}static fromRFC2822(a,u={}){const [V,da]=Ja(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[Ee,Aa]);return Jb(V,da,u,"RFC 2822",a)}static fromHTTP(a,u={}){const [V,
da]=Ja(a,[Fe,h],[Ge,h],[He,y]);return Jb(V,da,u,"HTTP",u)}static fromFormat(a,u,V={}){if(l(a)||l(u))throw new Da("fromFormat requires an input string and a format");const {locale:da=null,numberingSystem:ja=null}=V,qa=rb.fromOpts({locale:da,numberingSystem:ja,defaultToEN:!0}),{result:za,zone:Ka,specificOffset:Qa,invalidReason:cb}=Ta(qa,a,u),[k,db,$a,zb]=[za,Ka,Qa,cb];return zb?bb.invalid(zb):Jb(k,db,V,`format ${u}`,a,$a)}static fromString(a,u,V={}){return bb.fromFormat(a,u,V)}static fromSQL(a,u={}){const [V,
da]=Ja(a,[Qe,Od],[Re,Se]);return Jb(V,da,u,"SQL",a)}static invalid(a,u=null){if(!a)throw new Da("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,u);if(yb.throwOnInvalid)throw new bc(a);return new bb({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,u={}){return(a=Sa(a,rb.fromObject(u)))?a.map(V=>V?V.val:null).join(""):null}static expandFormat(a,u={}){return Oa(Ab.parseFormat(a),rb.fromObject(u)).map(V=>V.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rb(this).weekYear:NaN}get weekNumber(){return this.isValid?Rb(this).weekNumber:NaN}get weekday(){return this.isValid?Rb(this).weekday:
NaN}get ordinal(){return this.isValid?sb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return H(this.year)}get daysInMonth(){return U(this.year,this.month)}get daysInYear(){return this.isValid?
H(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?z(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:u,numberingSystem:V,calendar:da}=Ab.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:u,numberingSystem:V,outputCalendar:da}}toUTC(a=0,u={}){return this.setZone(Fb.instance(a),u)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:u=!1,keepCalendarTime:V=!1}={}){a=m(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let da=
this.ts;if(u||V)u=a.offset(this.ts),V=this.toObject(),[da]=Tb(V,u,a);return nb(this,{ts:da,zone:a})}return bb.invalid(Ib(a))}reconfigure({locale:a,numberingSystem:u,outputCalendar:V}={}){a=this.loc.clone({locale:a,numberingSystem:u,outputCalendar:V});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=M(a,Eb);var u=!l(a.weekYear)||!l(a.weekNumber)||!l(a.weekday);const V=!l(a.ordinal),da=!l(a.year),ja=!l(a.month)||!l(a.day),qa=a.weekYear||
a.weekNumber;if((da||ja||V)&&qa)throw new Z("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ja&&V)throw new Z("Can't mix ordinal dates with month/day");u?u=wb({...xa(this.c),...a}):l(a.ordinal)?(u={...this.toObject(),...a},l(a.day)&&(u.day=Math.min(U(u.year,u.month),u.day))):u=ib({...sb(this.c),...a});const [za,Ka]=Tb(u,this.o,this.zone);return nb(this,{ts:za,o:Ka})}plus(a){if(!this.isValid)return this;a=jb.fromDurationLike(a);return nb(this,Db(this,a))}minus(a){if(!this.isValid)return this;
a=jb.fromDurationLike(a).negate();return nb(this,Db(this,a))}startOf(a){if(!this.isValid)return this;const u={};a=jb.normalizeUnit(a);switch(a){case "years":u.month=1;case "quarters":case "months":u.day=1;case "weeks":case "days":u.hour=0;case "hours":u.minute=0;case "minutes":u.second=0;case "seconds":u.millisecond=0}"weeks"===a&&(u.weekday=1);"quarters"===a&&(u.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(u)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
u={}){return this.isValid?Ab.create(this.loc.redefaultToEN(u)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Pa,u={}){return this.isValid?Ab.create(this.loc.clone(u),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Ab.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:u=!1,suppressMilliseconds:V=!1,includeOffset:da=!0,extendedZone:ja=!1}={}){if(!this.isValid)return null;a="extended"===a;let qa=
Yb(this,a);return qa=qa+"T"+ic(this,a,u,V,da,ja)}toISODate({format:a="extended"}={}){return this.isValid?Yb(this,"extended"===a):null}toISOWeekDate(){return ac(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:u=!1,includeOffset:V=!0,includePrefix:da=!1,extendedZone:ja=!1,format:qa="extended"}={}){return this.isValid?(da?"T":"")+ic(this,"extended"===qa,u,a,V,ja):null}toRFC2822(){return ac(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ac(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Yb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:u=!1,includeOffsetSpace:V=!0}={}){let da="HH:mm:ss.SSS";if(u||a)V&&(da+=" "),u?da+="z":a&&(da+="ZZ");return ac(this,da,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const u={...this.c};a.includeConfig&&(u.outputCalendar=this.outputCalendar,u.numberingSystem=this.loc.numberingSystem,u.locale=this.loc.locale);return u}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,u="milliseconds",V={}){if(!this.isValid||!a.isValid)return jb.invalid("created by diffing an invalid DateTime");V={locale:this.locale,numberingSystem:this.numberingSystem,...V};
const da=(Array.isArray(u)?u:[u]).map(jb.normalizeUnit);u=a.valueOf()>this.valueOf();a=ca(u?this:a,u?a:this,da,V);return u?a.negate():a}diffNow(a="milliseconds",u={}){return this.diff(bb.now(),a,u)}until(a){return this.isValid?vb.fromDateTimes(this,a):this}hasSame(a,u){if(!this.isValid)return!1;const V=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(u)<=V&&V<=a.endOf(u)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const u=a.base||bb.fromObject({},{zone:this.zone}),V=a.padding?this<u?-a.padding:a.padding:0;let da="years months days hours minutes seconds".split(" "),ja=a.unit;Array.isArray(a.unit)&&(da=a.unit,ja=void 0);return kb(u,this.plus(V),{...a,numeric:"always",units:da,unit:ja})}toRelativeCalendar(a={}){return this.isValid?kb(a.base||bb.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(bb.isDateTime))throw new Da("min requires all arguments be DateTimes");
return x(a,u=>u.valueOf(),Math.min)}static max(...a){if(!a.every(bb.isDateTime))throw new Da("max requires all arguments be DateTimes");return x(a,u=>u.valueOf(),Math.max)}static fromFormatExplain(a,u,V={}){const {locale:da=null,numberingSystem:ja=null}=V;V=rb.fromOpts({locale:da,numberingSystem:ja,defaultToEN:!0});return Ta(V,a,u)}static fromStringExplain(a,u,V={}){return bb.fromFormatExplain(a,u,V)}static get DATE_SHORT(){return Pa}static get DATE_MED(){return Xa}static get DATE_MED_WITH_WEEKDAY(){return ob}static get DATE_FULL(){return mb}static get DATE_HUGE(){return lb}static get TIME_SIMPLE(){return xb}static get TIME_WITH_SECONDS(){return Kb}static get TIME_WITH_SHORT_OFFSET(){return nd}static get TIME_WITH_LONG_OFFSET(){return od}static get TIME_24_SIMPLE(){return pd}static get TIME_24_WITH_SECONDS(){return qd}static get TIME_24_WITH_SHORT_OFFSET(){return rd}static get TIME_24_WITH_LONG_OFFSET(){return sd}static get DATETIME_SHORT(){return td}static get DATETIME_SHORT_WITH_SECONDS(){return ud}static get DATETIME_MED(){return vd}static get DATETIME_MED_WITH_SECONDS(){return wd}static get DATETIME_MED_WITH_WEEKDAY(){return xe}static get DATETIME_FULL(){return xd}static get DATETIME_FULL_WITH_SECONDS(){return yd}static get DATETIME_HUGE(){return zd}static get DATETIME_HUGE_WITH_SECONDS(){return Ad}}
c.DateTime=bb;c.Duration=jb;c.FixedOffsetZone=Fb;c.IANAZone=Ub;c.Info=lc;c.Interval=vb;c.SystemZone=nc;c.Zone=jc})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/_commonjsHelpers"],function(c,b,I){var P={};(function(r){(function(A,G){r.exports&&(r.exports=G())})(I.commonjsGlobal,function(){function A(m,l,n,D){m=Error.call(this,m);Object.setPrototypeOf&&Object.setPrototypeOf(m,A.prototype);m.expected=l;m.found=n;m.location=D;m.name=
"SyntaxError";return m}function G(m,l,n){n=n||" ";if(m.length>l)return m;l-=m.length;n+=n.repeat(l);return m+n.slice(0,l)}(function(m,l){function n(){this.constructor=m}n.prototype=l.prototype;m.prototype=new n})(A,Error);A.prototype.format=function(m){var l="Error: "+this.message;if(this.location){var n=null,D;for(D=0;D<m.length;D++)if(m[D].source===this.location.source){n=m[D].text.split(/\r\n|\n|\r/g);break}m=this.location.start;D=this.location.source&&"function"===typeof this.location.source.offset?
this.location.source.offset(m):m;var w=this.location.source+":"+D.line+":"+D.column;if(n){var x=this.location.end,t=G("",D.line.toString().length," ");n=n[m.line-1];x=(m.line===x.line?x.column:n.length+1)-m.column||1;l+="\n --\x3e "+w+"\n"+t+" |\n"+D.line+" | "+n+"\n"+t+" | "+G("",m.column-1," ")+G("",x,"^")}else l+="\n at "+w}return l};A.buildMessage=function(m,l){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function D(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+n(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+n(p)})}function w(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+n(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+n(p)})}function x(e){return t[e.type](e)}
var t={literal:function(e){return'"'+D(e.text)+'"'},class:function(e){var p=e.parts.map(function(L){return Array.isArray(L)?w(L[0])+"-"+w(L[1]):w(L)});return"["+(e.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){e=e.map(x);var p,L;e.sort();if(0<e.length){for(L=p=1;p<e.length;p++)e[p-1]!==e[p]&&(e[L]=e[p],L++);e.length=L}switch(e.length){case 1:return e[0];case 2:return e[0]+
" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(m)+" but "+(l?'"'+D(l)+'"':"end of input")+" found."};return{SyntaxError:A,parse:function(m,l){function n(F,S){return{type:"literal",text:F,ignoreCase:S}}function D(F,S,ba){return{type:"class",parts:F,inverted:S,ignoreCase:ba}}function w(F){var S=db[F],ba;if(!S){for(ba=F-1;!db[ba];)ba--;S=db[ba];for(S={line:S.line,column:S.column};ba<F;)10===m.charCodeAt(ba)?(S.line++,S.column=1):S.column++,ba++;db[F]=S}return S}function x(F,
S,ba){var ya=w(F),Na=w(S);F={source:hb,start:{offset:F,line:ya.line,column:ya.column},end:{offset:S,line:Na.line,column:Na.column}};ba&&hb&&"function"===typeof hb.offset&&(F.start=hb.offset(F.start),F.end=hb.offset(F.end));return F}function t(F){k<$a||(k>$a&&($a=k,zb=[]),zb.push(F))}function e(){var F=k;xa();var S=L();S!==d?(xa(),F=S):(k=F,F=d);return F}function p(){var F=k;var S=L();if(S!==d){F=[];var ba=k;var ya=xa();var Na=La();if(Na!==d){var eb=xa();var fb=L();fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,
ba=d)}else k=ba,ba=d;for(;ba!==d;)F.push(ba),ba=k,ya=xa(),Na=La(),Na!==d?(eb=xa(),fb=L(),fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)):(k=ba,ba=d);ba={type:"expression-list"};S=[S];for(ya=0;ya<F.length;ya++)S.push(F[ya][3]);ba.value=S;F=ba}else k=F,F=d;return F}function L(){var F=k;var S=K();if(S!==d){F=[];var ba=k;var ya=xa();var Na=sa();if(Na!==d){var eb=xa();var fb=K();fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)F.push(ba),ba=k,ya=xa(),Na=sa(),Na!==d?(eb=xa(),fb=K(),fb!==d?ba=
ya=[ya,Na,eb,fb]:(k=ba,ba=d)):(k=ba,ba=d);F=ib(S,F)}else k=F,F=d;return F}function K(){var F=k;var S=J();if(S!==d){F=[];var ba=k;var ya=xa();var Na=ka();if(Na!==d){var eb=xa();var fb=J();fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)F.push(ba),ba=k,ya=xa(),Na=ka(),Na!==d?(eb=xa(),fb=J(),fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)):(k=ba,ba=d);F=ib(S,F)}else k=F,F=d;return F}function J(){var F=k;var S=ea();if(S===d){S=k;if(33===m.charCodeAt(k)){var ba=nb;k++}else ba=d,0===ta&&t(ne);
if(ba!==d){var ya=k;ta++;if(61===m.charCodeAt(k)){var Na=la;k++}else Na=d,0===ta&&t(Lc);ta--;Na===d?ya=void 0:(k=ya,ya=d);ya!==d?S=ba=[ba,ya]:(k=S,S=d)}else k=S,S=d}S!==d?(ba=xa(),ya=J(),ya!==d?F={type:"unary-expression",operator:"NOT",expr:ya}:(k=F,F=d)):(k=F,F=d);if(F===d){S=k;F=U();if(F!==d){xa();S=[];ba=k;ya=xa();Na=T();if(Na!==d){var eb=xa();var fb=U();fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)}else k=ba,ba=d;if(ba!==d)for(;ba!==d;)S.push(ba),ba=k,ya=xa(),Na=T(),Na!==d?(eb=xa(),fb=U(),fb!==d?ba=
ya=[ya,Na,eb,fb]:(k=ba,ba=d)):(k=ba,ba=d);else S=d;S!==d&&(S={type:"arithmetic",tail:S});S===d&&(S=k,ba=H(),ba!==d?(xa(),ya=Va(),ya!==d?(xa(),ya=p(),ya!==d?(xa(),Na=ab(),Na!==d?S={op:ba,right:ya}:(k=S,S=d)):(k=S,S=d)):(k=S,S=d)):(k=S,S=d),S===d&&(S=k,ba=H(),ba!==d?(xa(),ya=Va(),ya!==d?(xa(),ya=ab(),ya!==d?S={op:ba,right:{type:"expression-list",value:[]}}:(k=S,S=d)):(k=S,S=d)):(k=S,S=d),S===d&&(S=k,ba=H(),ba!==d?(xa(),ya=E(),ya!==d?S={op:ba,right:ya}:(k=S,S=d)):(k=S,S=d))),S===d&&(S=k,Na=ea(),Na!==
d?(xa(),ba=O(),ba!==d?(xa(),ya=U(),ya!==d?(xa(),eb=ka(),eb!==d?(xa(),Na=U(),Na!==d?S={op:"NOT"+ba,right:{type:"expression-list",value:[ya,Na]}}:(k=S,S=d)):(k=S,S=d)):(k=S,S=d)):(k=S,S=d)):(k=S,S=d),S===d&&(S=k,Na=O(),Na!==d?(xa(),ba=U(),ba!==d?(xa(),ya=ka(),ya!==d?(xa(),eb=U(),eb!==d?S={op:Na,right:{type:"expression-list",value:[ba,eb]}}:(k=S,S=d)):(k=S,S=d)):(k=S,S=d)):(k=S,S=d)),S===d&&(S=k,ba=h(),ba!==d?(xa(),ya=ea(),ya!==d?(xa(),ya=U(),ya!==d?S={op:ba+"NOT",right:ya}:(k=S,S=d)):(k=S,S=d)):(k=
S,S=d),S===d&&(S=k,ba=h(),ba!==d?(xa(),ya=U(),ya!==d?S={op:ba,right:ya}:(k=S,S=d)):(k=S,S=d)),S===d&&(S=k,ba=N(),ba!==d?(xa(),ya=Ha(),ya!==d?(xa(),Na=k,m.substr(k,6).toLowerCase()===ob?(eb=m.substr(k,6),k+=6):(eb=d,0===ta&&t(Od)),eb!==d?(eb=k,ta++,fb=M(),ta--,fb===d?eb=void 0:(k=eb,eb=d),eb!==d?Na="ESCAPE":(k=Na,Na=d)):(k=Na,Na=d),Na!==d?(xa(),Na=Ia(),Na!==d?S={op:ba,right:ya,escape:Na.value}:(k=S,S=d)):(k=S,S=d)):(k=S,S=d)):(k=S,S=d),S===d&&(S=k,ba=N(),ba!==d?(xa(),ya=Ha(),ya!==d?S={op:ba,right:ya,
escape:""}:(k=S,S=d)):(k=S,S=d))))));S===d&&(S=null);""==S||void 0==S||null==S?S=F:(ba=null,S=ba="arithmetic"==S.type?ib(F,S.tail):sb(S.op,F,S.right,S.escape))}else k=S,S=d;F=S}return F}function T(){if(m.substr(k,2)===hc){var F=hc;k+=2}else F=d,0===ta&&t(id);F===d&&(62===m.charCodeAt(k)?(F=Tb,k++):(F=d,0===ta&&t(pe)),F===d&&(m.substr(k,2)===Db?(F=Db,k+=2):(F=d,0===ta&&t(Bd)),F===d&&(m.substr(k,2)===Jb?(F=Jb,k+=2):(F=d,0===ta&&t(se)),F===d&&(60===m.charCodeAt(k)?(F=ac,k++):(F=d,0===ta&&t(re)),F===
d&&(61===m.charCodeAt(k)?(F=la,k++):(F=d,0===ta&&t(Lc)),F===d&&(m.substr(k,2)===Yb?(F=Yb,k+=2):(F=d,0===ta&&t(qe))))))));return F}function N(){var F=F=k;var S=ea();if(S!==d){var ba=xa();var ya=y();ya!==d?F=S=[S,ba,ya]:(k=F,F=d)}else k=F,F=d;F!==d&&(F=F[0]+" "+F[2]);F===d&&(F=y());return F}function H(){var F=F=k;var S=ea();if(S!==d){var ba=xa();var ya=Aa();ya!==d?F=S=[S,ba,ya]:(k=F,F=d)}else k=F,F=d;F!==d&&(F=F[0]+" "+F[2]);F===d&&(F=Aa());return F}function U(){var F=k;var S=z();if(S!==d){F=[];var ba=
k;var ya=xa();var Na=g();if(Na!==d){var eb=xa();var fb=z();fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)F.push(ba),ba=k,ya=xa(),Na=g(),Na!==d?(eb=xa(),fb=z(),fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)):(k=ba,ba=d);F=ib(S,F)}else k=F,F=d;return F}function g(){if(43===m.charCodeAt(k)){var F=ic;k++}else F=d,0===ta&&t(Vc);F===d&&(45===m.charCodeAt(k)?(F=Eb,k++):(F=d,0===ta&&t(Ab)),F===d&&(m.substr(k,2)===Sb?(F=Sb,k+=2):(F=d,0===ta&&t(Qb))));return F}function z(){var F=k;var S=f();if(S!==
d){F=[];var ba=k;var ya=xa();var Na=v();if(Na!==d){var eb=xa();var fb=f();fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)F.push(ba),ba=k,ya=xa(),Na=v(),Na!==d?(eb=xa(),fb=f(),fb!==d?ba=ya=[ya,Na,eb,fb]:(k=ba,ba=d)):(k=ba,ba=d);F=ib(S,F)}else k=F,F=d;return F}function v(){if(42===m.charCodeAt(k)){var F=kb;k++}else F=d,0===ta&&t(Hd);F===d&&(47===m.charCodeAt(k)?(F=Gb,k++):(F=d,0===ta&&t(Id)));return F}function f(){var F=Ia();if(F===d){var S=k;var ba=k;var ya=Ya();if(ya!==d){var Na=
Ua();if(Na!==d){var eb=gb();eb!==d?ba=parseFloat(ya+Na+eb):(k=ba,ba=d)}else k=ba,ba=d}else k=ba,ba=d;ba===d&&(ba=k,ya=Ya(),ya!==d?(Na=Ua(),Na!==d?ba=parseFloat(ya+Na):(k=ba,ba=d)):(k=ba,ba=d),ba===d&&(ba=k,ya=Ya(),ya!==d?(Na=gb(),Na!==d?ba=parseFloat(ya+Na):(k=ba,ba=d)):(k=ba,ba=d),ba===d&&(ba=k,ya=Ya(),ya!==d&&(ya=parseFloat(ya)),ba=ya)));var fb=ba;if(fb!==d){var Qd=k;ta++;var Lf=R();ta--;Lf===d?Qd=void 0:(k=Qd,Qd=d);Qd!==d?S={type:"number",value:fb}:(k=S,S=d)}else k=S,S=d;F=S;if(F===d){var Yc=k;
var rc=k;if(m.substr(k,4).toLowerCase()===pa){var Rd=m.substr(k,4);k+=4}else Rd=d,0===ta&&t(He);if(Rd!==d){var Zc=k;ta++;var Mf=M();ta--;Mf===d?Zc=void 0:(k=Zc,Zc=d);Zc!==d?rc=Rd=[Rd,Zc]:(k=rc,rc=d)}else k=rc,rc=d;var mc=rc;mc!==d&&(mc={type:"boolean",value:!0});Yc=mc;if(Yc===d){Yc=k;var sc=k;if(m.substr(k,5).toLowerCase()===Da){var Sd=m.substr(k,5);k+=5}else Sd=d,0===ta&&t(Ie);if(Sd!==d){var $c=k;ta++;var Nf=M();ta--;Nf===d?$c=void 0:(k=$c,$c=d);$c!==d?sc=Sd=[Sd,$c]:(k=sc,sc=d)}else k=sc,sc=d;mc=
sc;mc!==d&&(mc={type:"boolean",value:!1});Yc=mc}F=Yc;if(F===d){var tc=k;if(m.substr(k,4).toLowerCase()===Z){var Td=m.substr(k,4);k+=4}else Td=d,0===ta&&t(Ge);if(Td!==d){var ad=k;ta++;var Of=M();ta--;Of===d?ad=void 0:(k=ad,ad=d);ad!==d?tc=Td=[Td,ad]:(k=tc,tc=d)}else k=tc,tc=d;var Ze=tc;Ze!==d&&(Ze={type:"null",value:null});F=Ze;if(F===d){var uc=k;if(ha()!==d){xa();var lf=Ha();lf!==d?uc={type:"date",value:lf.value}:(k=uc,uc=d)}else k=uc,uc=d;F=uc;if(F===d){var vc=k;if(aa()!==d){xa();var mf=Ha();mf!==
d?vc={type:"timestamp",value:mf.value}:(k=vc,vc=d)}else k=vc,vc=d;F=vc;if(F===d){var Bb=k;var $e=ma();if($e!==d){xa();if(45===m.charCodeAt(k)){var dc=Eb;k++}else dc=d,0===ta&&t(Ab);dc===d&&(43===m.charCodeAt(k)?(dc=ic,k++):(dc=d,0===ta&&t(Vc)));if(dc!==d){xa();var bd=Ha();if(bd!==d){xa();var nf=Y();nf!==d?Bb={type:"interval",value:bd,qualifier:nf,op:dc}:(k=Bb,Bb=d)}else k=Bb,Bb=d}else k=Bb,Bb=d}else k=Bb,Bb=d;Bb===d&&(Bb=k,$e=ma(),$e!==d?(xa(),dc=Ha(),dc!==d?(xa(),bd=Y(),bd!==d?Bb={type:"interval",
value:dc,qualifier:bd,op:""}:(k=Bb,Bb=d)):(k=Bb,Bb=d)):(k=Bb,Bb=d));F=Bb}}}}}}var pb=F;if(pb===d){var Mb=k;var wc=k;if(m.substr(k,7).toLowerCase()===qd){var of=m.substr(k,7);k+=7}else of=d,0===ta&&t(Pd);if(of!==d){var Ud=k;ta++;var Pf=M();ta--;Pf===d?Ud=void 0:(k=Ud,Ud=d);Ud!==d?wc="EXTRACT":(k=wc,wc=d)}else k=wc,wc=d;if(wc!==d){xa();var Qf=Va();if(Qf!==d){xa();var Wb=oa();Wb===d&&(Wb=wa(),Wb===d&&(Wb=va(),Wb===d&&(Wb=Ea(),Wb===d&&(Wb=Ba(),Wb===d&&(Wb=Fa())))));var pf=Wb;if(pf!==d){xa();var Rf=W();
if(Rf!==d){xa();var qf=L();if(qf!==d){xa();var Sf=ab();Sf!==d?Mb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:pf},qf]}}:(k=Mb,Mb=d)}else k=Mb,Mb=d}else k=Mb,Mb=d}else k=Mb,Mb=d}else k=Mb,Mb=d}else k=Mb,Mb=d;pb=Mb;if(pb===d){var Nb=k;var xc=k;if(m.substr(k,9).toLowerCase()===pd){var rf=m.substr(k,9);k+=9}else rf=d,0===ta&&t(Se);if(rf!==d){var Vd=k;ta++;var Tf=M();ta--;Tf===d?Vd=void 0:(k=Vd,Vd=d);Vd!==d?xc="SUBSTRING":(k=xc,xc=d)}else k=xc,xc=d;if(xc!==d){xa();
var Uf=Va();if(Uf!==d){xa();var af=L();if(af!==d){xa();var Vf=W();if(Vf!==d){xa();var bf=L();if(bf!==d){xa();var ec=k;var yc=k;if(m.substr(k,3).toLowerCase()===od){var sf=m.substr(k,3);k+=3}else sf=d,0===ta&&t(Re);if(sf!==d){var Wd=k;ta++;var Wf=M();ta--;Wf===d?Wd=void 0:(k=Wd,Wd=d);Wd!==d?yc="FOR":(k=yc,yc=d)}else k=yc,yc=d;var cd=yc;if(cd!==d){var Xf=xa();var tf=L();if(tf!==d){var Yf=xa();ec=cd=[cd,Xf,tf,Yf]}else k=ec,ec=d}else k=ec,ec=d;ec===d&&(ec=null);cd=ab();cd!==d?Nb={type:"function",name:"substring",
args:{type:"expression-list",value:ec?[af,bf,ec[2]]:[af,bf]}}:(k=Nb,Nb=d)}else k=Nb,Nb=d}else k=Nb,Nb=d}else k=Nb,Nb=d}else k=Nb,Nb=d}else k=Nb,Nb=d;pb=Nb;if(pb===d){var tb=k;var cf=ca();if(cf!==d){xa();var df=Va();if(df!==d){xa();var fc=C();fc===d&&(fc=null);xa();var dd=L();if(dd!==d){xa();var ef=W();if(ef!==d){xa();var uf=L();if(uf!==d){xa();var Zf=ab();Zf!==d?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd,uf]}}:(k=tb,tb=d)}else k=
tb,tb=d}else k=tb,tb=d}else k=tb,tb=d}else k=tb,tb=d}else k=tb,tb=d;tb===d&&(tb=k,cf=ca(),cf!==d?(xa(),df=Va(),df!==d?(xa(),fc=C(),fc===d&&(fc=null),xa(),dd=L(),dd!==d?(xa(),ef=ab(),ef!==d?tb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},dd]}}:(k=tb,tb=d)):(k=tb,tb=d)):(k=tb,tb=d)):(k=tb,tb=d));pb=tb;if(pb===d){var Ob=k;var zc=k;if(m.substr(k,8).toLowerCase()===sd){var vf=m.substr(k,8);k+=8}else vf=d,0===ta&&t(Ue);if(vf!==d){var Xd=k;ta++;
var $f=M();ta--;$f===d?Xd=void 0:(k=Xd,Xd=d);Xd!==d?zc="POSITION":(k=zc,zc=d)}else k=zc,zc=d;if(zc!==d){xa();var ag=Va();if(ag!==d){xa();var wf=L();if(wf!==d){xa();var bg=Aa();if(bg!==d){xa();var xf=L();if(xf!==d){xa();var cg=ab();cg!==d?Ob={type:"function",name:"position",args:{type:"expression-list",value:[wf,xf]}}:(k=Ob,Ob=d)}else k=Ob,Ob=d}else k=Ob,Ob=d}else k=Ob,Ob=d}else k=Ob,Ob=d}else k=Ob,Ob=d;pb=Ob;if(pb===d){var Pb=k;var Ac=k;if(m.substr(k,4).toLowerCase()===xd){var yf=m.substr(k,4);k+=
4}else yf=d,0===ta&&t(Mc);if(yf!==d){var Yd=k;ta++;var dg=M();ta--;dg===d?Yd=void 0:(k=Yd,Yd=d);Yd!==d?Ac="CAST":(k=Ac,Ac=d)}else k=Ac,Ac=d;if(Ac!==d){xa();var eg=Va();if(eg!==d){xa();var zf=L();if(zf!==d){xa();var Bc=k;if(m.substr(k,2).toLowerCase()===yd){var Af=m.substr(k,2);k+=2}else Af=d,0===ta&&t(jd);if(Af!==d){var Zd=k;ta++;var fg=M();ta--;fg===d?Zd=void 0:(k=Zd,Zd=d);Zd!==d?Bc="AS":(k=Bc,Bc=d)}else k=Bc,Bc=d;var gg=Bc;if(gg!==d){xa();var qb=k;var Cc=k;if(m.substr(k,7).toLowerCase()===zd){var Bf=
m.substr(k,7);k+=7}else Bf=d,0===ta&&t(ve);if(Bf!==d){var $d=k;ta++;var hg=M();ta--;hg===d?$d=void 0:(k=$d,$d=d);$d!==d?Cc="INTEGER":(k=Cc,Cc=d)}else k=Cc,Cc=d;var ub=Cc;ub!==d&&(ub={type:"data-type",value:{type:"integer"}});qb=ub;if(qb===d){qb=k;var Dc=k;if(m.substr(k,8).toLowerCase()===Ad){var Cf=m.substr(k,8);k+=8}else Cf=d,0===ta&&t(kd);if(Cf!==d){var ae=k;ta++;var ig=M();ta--;ig===d?ae=void 0:(k=ae,ae=d);ae!==d?Dc="SMALLINT":(k=Dc,Dc=d)}else k=Dc,Dc=d;ub=Dc;ub!==d&&(ub={type:"data-type",value:{type:"smallint"}});
qb=ub;if(qb===d){qb=k;var Ec=k;if(m.substr(k,5).toLowerCase()===jc){var Df=m.substr(k,5);k+=5}else Df=d,0===ta&&t(Nc);if(Df!==d){var be=k;ta++;var jg=M();ta--;jg===d?be=void 0:(k=be,be=d);be!==d?Ec="FLOAT":(k=Ec,Ec=d)}else k=Ec,Ec=d;ub=Ec;ub!==d&&(ub={type:"data-type",value:{type:"float"}});qb=ub;if(qb===d){qb=k;var Fc=k;if(m.substr(k,4).toLowerCase()===Rc){var Ef=m.substr(k,4);k+=4}else Ef=d,0===ta&&t(we);if(Ef!==d){var ce=k;ta++;var kg=M();ta--;kg===d?ce=void 0:(k=ce,ce=d);ce!==d?Fc="REAL":(k=Fc,
Fc=d)}else k=Fc,Fc=d;ub=Fc;ub!==d&&(ub={type:"data-type",value:{type:"real"}});qb=ub;if(qb===d&&(qb=k,ub=ha(),ub!==d&&(ub={type:"data-type",value:{type:"date"}}),qb=ub,qb===d&&(qb=k,ub=aa(),ub!==d&&(ub={type:"data-type",value:{type:"timestamp"}}),qb=ub,qb===d))){qb=k;var Gc=k;if(m.substr(k,7).toLowerCase()===nc){var Ff=m.substr(k,7);k+=7}else Ff=d,0===ta&&t(Oc);if(Ff!==d){var de=k;ta++;var lg=M();ta--;lg===d?de=void 0:(k=de,de=d);de!==d?Gc="VARCHAR":(k=Gc,Gc=d)}else k=Gc,Gc=d;ub=Gc;if(ub!==d){xa();
var mg=Va();if(mg!==d){xa();var Gf=na();if(Gf!==d){xa();var ng=ab();ng!==d?qb={type:"data-type",value:{type:"varchar",size:parseInt(Gf)}}:(k=qb,qb=d)}else k=qb,qb=d}else k=qb,qb=d}else k=qb,qb=d}}}}var Hf=qb;if(Hf!==d){xa();var og=ab();og!==d?Pb={type:"function",name:"cast",args:{type:"expression-list",value:[zf,Hf]}}:(k=Pb,Pb=d)}else k=Pb,Pb=d}else k=Pb,Pb=d}else k=Pb,Pb=d}else k=Pb,Pb=d}else k=Pb,Pb=d;pb=Pb;if(pb===d){var kc=k;var ee;var Xb=k;Xb=ee=q();if(Xb===d)if(Xb=k,96===m.charCodeAt(k)?(ee=
Tc,k++):(ee=d,0===ta&&t(Qa)),ee!==d){var fe=[];if(Kc.test(m.charAt(k))){var gc=m.charAt(k);k++}else gc=d,0===ta&&t(cb);if(gc!==d)for(;gc!==d;)fe.push(gc),Kc.test(m.charAt(k))?(gc=m.charAt(k),k++):(gc=d,0===ta&&t(cb));else fe=d;fe!==d?(96===m.charCodeAt(k)?(gc=Tc,k++):(gc=d,0===ta&&t(Qa)),gc!==d?Xb=fe.join(""):(k=Xb,Xb=d)):(k=Xb,Xb=d)}else k=Xb,Xb=d;var If=Xb;if(If!==d){xa();var pg=Va();if(pg!==d){xa();var ge=p();ge===d&&(ge=null);xa();var qg=ab();qg!==d?kc={type:"function",name:If,args:ge?ge:{type:"expression-list",
value:[]}}:(k=kc,kc=d)}else k=kc,kc=d}else k=kc,kc=d;pb=kc;if(pb===d){var Zb;var Cb=k;var ff=Ra();if(ff!==d){xa();var ed=L();if(ed!==d){xa();var fd=[];for(Zb=Ma();Zb!==d;)fd.push(Zb),Zb=Ma();Zb=xa();var he=Oa();he!==d?Cb={type:"case-expression",format:"simple",operand:ed,clauses:fd,else:null}:(k=Cb,Cb=d)}else k=Cb,Cb=d}else k=Cb,Cb=d;if(Cb===d)if(Cb=k,ff=Ra(),ff!==d)if(xa(),ed=L(),ed!==d){xa();fd=[];for(Zb=Ma();Zb!==d;)fd.push(Zb),Zb=Ma();Zb=xa();he=Wa();if(he!==d){xa();var rg=Oa();rg!==d?Cb={type:"case-expression",
format:"simple",operand:ed,clauses:fd,else:he.value}:(k=Cb,Cb=d)}else k=Cb,Cb=d}else k=Cb,Cb=d;else k=Cb,Cb=d;var gf=Cb;if(gf===d){var $b;var Lb=k;var hf=Ra();if(hf!==d){xa();var gd=[];for($b=Ja();$b!==d;)gd.push($b),$b=Ja();$b=xa();var ie=Oa();ie!==d?Lb={type:"case-expression",format:"searched",clauses:gd,else:null}:(k=Lb,Lb=d)}else k=Lb,Lb=d;if(Lb===d)if(Lb=k,hf=Ra(),hf!==d){xa();gd=[];for($b=Ja();$b!==d;)gd.push($b),$b=Ja();$b=xa();ie=Wa();if(ie!==d){xa();var sg=Oa();sg!==d?Lb={type:"case-expression",
format:"searched",clauses:gd,else:ie.value}:(k=Lb,Lb=d)}else k=Lb,Lb=d}else k=Lb,Lb=d;gf=Lb}pb=gf;if(pb===d){var je;var ke=k;var Jf=R();if(Jf!==d){var Kf=[];for(je=Q();je!==d;)Kf.push(je),je=Q();ke=Jf+Kf.join("")}else k=ke,ke=d;var le=ke;if(le!==d){var jf=le;le=/^CURRENT_DATE$/i.test(jf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(jf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:jf}}pb=le;if(pb===d&&(pb=E(),pb===d)){pb=k;var tg=Va();if(tg!==d){xa();
var kf=L();if(kf!==d){xa();var ug=ab();ug!==d?(kf.paren=!0,pb=kf):(k=pb,pb=d)}else k=pb,pb=d}else k=pb,pb=d}}}}}}}}}return pb}function q(){var F;var S=k;var ba=R();if(ba!==d){S=[];for(F=M();F!==d;)S.push(F),F=M();S=ba+S.join("")}else k=S,S=d;return S}function R(){if(Cd.test(m.charAt(k))){var F=m.charAt(k);k++}else F=d,0===ta&&t(Wc);return F}function M(){if(Dd.test(m.charAt(k))){var F=m.charAt(k);k++}else F=d,0===ta&&t(Jd);return F}function Q(){if(Ed.test(m.charAt(k))){var F=m.charAt(k);k++}else F=
d,0===ta&&t(Xc);return F}function E(){var F=k;if(64===m.charCodeAt(k)){var S=Hb;k++}else S=d,0===ta&&t(Ce);if(S!==d){var ba=q();ba!==d?F=S=[S,ba]:(k=F,F=d)}else k=F,F=d;F!==d&&(F={type:"parameter",value:F[1]});return F}function C(){var F=k;if(m.substr(k,7).toLowerCase()===vd){var S=m.substr(k,7);k+=7}else S=d,0===ta&&t(jb);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="LEADING":(k=F,F=d)}else k=F,F=d;F===d&&(F=k,m.substr(k,8).toLowerCase()===wd?(S=m.substr(k,8),k+=8):(S=d,0===
ta&&t(vb)),S!==d?(S=k,ta++,ba=M(),ta--,ba===d?S=void 0:(k=S,S=d),S!==d?F="TRAILING":(k=F,F=d)):(k=F,F=d),F===d&&(F=k,m.substr(k,4).toLowerCase()===xe?(S=m.substr(k,4),k+=4):(S=d,0===ta&&t(lc)),S!==d?(S=k,ta++,ba=M(),ta--,ba===d?S=void 0:(k=S,S=d),S!==d?F="BOTH":(k=F,F=d)):(k=F,F=d)));return F}function Y(){var F=k;var S=k;var ba=ia();if(ba!==d){xa();var ya=Va();if(ya!==d)if(xa(),ya=Ca(),ya!==d){xa();var Na=ab();Na!==d?S={type:"interval-period",period:ba.value,precision:ya,secondary:null}:(k=S,S=d)}else k=
S,S=d;else k=S,S=d}else k=S,S=d;S===d&&(S=k,ba=ia(),ba!==d&&(ba={type:"interval-period",period:ba.value,precision:null,secondary:null}),S=ba);if(S!==d)if(xa(),ba=k,m.substr(k,2).toLowerCase()===oc?(ya=m.substr(k,2),k+=2):(ya=d,0===ta&&t(Qc)),ya!==d?(ya=k,ta++,Na=M(),ta--,Na===d?ya=void 0:(k=ya,ya=d),ya!==d?ba="TO":(k=ba,ba=d)):(k=ba,ba=d),ba!==d){xa();ba=k;ya=ia();ya!==d&&(ya={type:"interval-period",period:ya.value,precision:null,secondary:null});ba=ya;if(ba===d){ba=k;ya=Fa();if(ya!==d)if(xa(),ya=
Va(),ya!==d)if(xa(),ya=Ca(),ya!==d)if(xa(),Na=La(),Na!==d)if(xa(),Na=ua(),Na!==d){xa();var eb=ab();eb!==d?ba={type:"interval-period",period:"second",precision:ya,secondary:Na}:(k=ba,ba=d)}else k=ba,ba=d;else k=ba,ba=d;else k=ba,ba=d;else k=ba,ba=d;else k=ba,ba=d;ba===d&&(ba=k,ya=Fa(),ya!==d?(xa(),ya=Va(),ya!==d?(xa(),ya=Ca(),ya!==d?(xa(),Na=ab(),Na!==d?ba={type:"interval-period",period:"second",precision:ya,secondary:null}:(k=ba,ba=d)):(k=ba,ba=d)):(k=ba,ba=d)):(k=ba,ba=d),ba===d&&(ba=k,ya=Fa(),ya!==
d&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),ba=ya))}ba!==d?F={type:"interval-qualifier",start:S,end:ba}:(k=F,F=d)}else k=F,F=d;else k=F,F=d;F===d&&(F=k,ba=ia(),ba!==d?(xa(),S=Va(),S!==d?(xa(),S=ua(),S!==d?(xa(),ya=ab(),ya!==d?F={type:"interval-period",period:ba.value,precision:S,secondary:null}:(k=F,F=d)):(k=F,F=d)):(k=F,F=d)):(k=F,F=d),F===d&&(F=k,ba=ia(),ba!==d&&(ba={type:"interval-period",period:ba.value,precision:null,secondary:null}),F=ba,F===d&&(F=k,ba=Fa(),
ba!==d?(xa(),S=Va(),S!==d?(xa(),S=Ca(),S!==d?(xa(),ya=La(),ya!==d?(xa(),ba=ua(),ba!==d?(xa(),ya=ab(),ya!==d?F={type:"interval-period",period:"second",precision:S,secondary:ba}:(k=F,F=d)):(k=F,F=d)):(k=F,F=d)):(k=F,F=d)):(k=F,F=d)):(k=F,F=d),F===d&&(F=k,ba=Fa(),ba!==d?(xa(),S=Va(),S!==d?(xa(),S=ua(),S!==d?(xa(),ya=ab(),ya!==d?F={type:"interval-period",period:"second",precision:S,secondary:null}:(k=F,F=d)):(k=F,F=d)):(k=F,F=d)):(k=F,F=d),F===d&&(F=k,ba=Fa(),ba!==d&&(ba={type:"interval-period",period:"second",
precision:null,secondary:null}),F=ba)))));return F}function ia(){var F=k;F=va();F!==d&&(F={type:"string",value:"day"});F===d&&(F=k,F=Ea(),F!==d&&(F={type:"string",value:"hour"}),F===d&&(F=k,F=Ba(),F!==d&&(F={type:"string",value:"minute"}),F===d&&(F=k,F=wa(),F!==d&&(F={type:"string",value:"month"}),F===d&&(F=k,F=oa(),F!==d&&(F={type:"string",value:"year"})))));return F}function ua(){var F=na();F!==d&&(F=parseFloat(F));return F}function Ca(){var F=na();F!==d&&(F=parseFloat(F));return F}function Ha(){var F=
Ia();F===d&&(F=E());return F}function Ia(){var F=k;if(39===m.charCodeAt(k)){var S=Za;k++}else S=d,0===ta&&t(Kd);S===d&&(m.substr(k,2)===bc?(S=bc,k+=2):(S=d,0===ta&&t(Ld)));if(S!==d){S=[];var ba=k;m.substr(k,2)===X?(ba=X,k+=2):(ba=d,0===ta&&t(Md));ba!==d&&(ba="'");ba===d&&(Uc.test(m.charAt(k))?(ba=m.charAt(k),k++):(ba=d,0===ta&&t(Nd)));for(;ba!==d;)S.push(ba),ba=k,m.substr(k,2)===X?(ba=X,k+=2):(ba=d,0===ta&&t(Md)),ba!==d&&(ba="'"),ba===d&&(Uc.test(m.charAt(k))?(ba=m.charAt(k),k++):(ba=d,0===ta&&t(Nd)));
39===m.charCodeAt(k)?(ba=Za,k++):(ba=d,0===ta&&t(Kd));ba!==d?F={type:"string",value:S.join("")}:(k=F,F=d)}else k=F,F=d;return F}function Ja(){var F=k;if(Ta()!==d){xa();var S=L();if(S!==d){xa();var ba=Sa();ba!==d?(xa(),ba=L(),ba!==d?F={type:"when-clause",operand:S,value:ba}:(k=F,F=d)):(k=F,F=d)}else k=F,F=d}else k=F,F=d;return F}function Ma(){var F=k;if(Ta()!==d){xa();var S=L();if(S!==d){xa();var ba=Sa();ba!==d?(xa(),ba=L(),ba!==d?F={type:"when-clause",operand:S,value:ba}:(k=F,F=d)):(k=F,F=d)}else k=
F,F=d}else k=F,F=d;return F}function Wa(){var F=k;var S=k;if(m.substr(k,4).toLowerCase()===rb){var ba=m.substr(k,4);k+=4}else ba=d,0===ta&&t(da);if(ba!==d){ba=k;ta++;var ya=M();ta--;ya===d?ba=void 0:(k=ba,ba=d);ba!==d?S="ELSE":(k=S,S=d)}else k=S,S=d;S!==d?(xa(),S=L(),S!==d?F={type:"else-clause",value:S}:(k=F,F=d)):(k=F,F=d);return F}function Ya(){var F=na();if(F===d){F=k;if(45===m.charCodeAt(k)){var S=Eb;k++}else S=d,0===ta&&t(Ab);S===d&&(43===m.charCodeAt(k)?(S=ic,k++):(S=d,0===ta&&t(Vc)));if(S!==
d){var ba=na();ba!==d?F=S[0]+ba:(k=F,F=d)}else k=F,F=d}return F}function Ua(){var F=k;if(46===m.charCodeAt(k)){var S=fa;k++}else S=d,0===ta&&t(De);S!==d?(F=na(),F===d&&(F=null),F="."+(null!=F?F:"")):(k=F,F=d);return F}function gb(){var F;var S=F=k;if(Gd.test(m.charAt(k))){var ba=m.charAt(k);k++}else ba=d,0===ta&&t(Ee);ba!==d?(yb.test(m.charAt(k))?(S=m.charAt(k),k++):(S=d,0===ta&&t(Fe)),S===d&&(S=null),S="e"+(null===S?"":S)):(k=S,S=d);S!==d?(ba=na(),ba!==d?F=S+ba:(k=F,F=d)):(k=F,F=d);return F}function na(){var F=
[];var S=ra();if(S!==d)for(;S!==d;)F.push(S),S=ra();else F=d;F!==d&&(F=F.join(""));return F}function ra(){if(Fd.test(m.charAt(k))){var F=m.charAt(k);k++}else F=d,0===ta&&t(te);return F}function Aa(){var F=k;if(m.substr(k,2).toLowerCase()===Ga){var S=m.substr(k,2);k+=2}else S=d,0===ta&&t(Je);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="IN":(k=F,F=d)}else k=F,F=d;return F}function h(){var F=k;if(m.substr(k,2).toLowerCase()===Pa){var S=m.substr(k,2);k+=2}else S=d,0===ta&&t(Ke);
if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="IS":(k=F,F=d)}else k=F,F=d;return F}function y(){var F=k;if(m.substr(k,4).toLowerCase()===Xa){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(Le);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="LIKE":(k=F,F=d)}else k=F,F=d;return F}function ea(){var F=k;if(m.substr(k,3).toLowerCase()===mb){var S=m.substr(k,3);k+=3}else S=d,0===ta&&t(Me);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="NOT":
(k=F,F=d)}else k=F,F=d;return F}function ka(){var F=k;if(m.substr(k,3).toLowerCase()===lb){var S=m.substr(k,3);k+=3}else S=d,0===ta&&t(Ne);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="AND":(k=F,F=d)}else k=F,F=d;return F}function sa(){var F=k;if(m.substr(k,2).toLowerCase()===xb){var S=m.substr(k,2);k+=2}else S=d,0===ta&&t(Oe);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="OR":(k=F,F=d)}else k=F,F=d;return F}function O(){var F=k;if(m.substr(k,7).toLowerCase()===
Kb){var S=m.substr(k,7);k+=7}else S=d,0===ta&&t(Pe);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="BETWEEN":(k=F,F=d)}else k=F,F=d;return F}function W(){var F=k;if(m.substr(k,4).toLowerCase()===nd){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(Qe);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="FROM":(k=F,F=d)}else k=F,F=d;return F}function ca(){var F=k;if(m.substr(k,4).toLowerCase()===rd){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(Te);if(S!==d){S=k;ta++;
var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="TRIM":(k=F,F=d)}else k=F,F=d;return F}function aa(){var F=k;if(m.substr(k,9).toLowerCase()===td){var S=m.substr(k,9);k+=9}else S=d,0===ta&&t(cc);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="TIMESTAMP":(k=F,F=d)}else k=F,F=d;return F}function ha(){var F=k;if(m.substr(k,4).toLowerCase()===ud){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(ue);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="DATE":(k=F,F=d)}else k=
F,F=d;return F}function ma(){var F=k;if(m.substr(k,8).toLowerCase()===ye){var S=m.substr(k,8);k+=8}else S=d,0===ta&&t(Pc);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="INTERVAL":(k=F,F=d)}else k=F,F=d;return F}function oa(){var F=k;if(m.substr(k,4).toLowerCase()===pc){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(md);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="YEAR":(k=F,F=d)}else k=F,F=d;return F}function wa(){var F=k;if(m.substr(k,5).toLowerCase()===
Ub){var S=m.substr(k,5);k+=5}else S=d,0===ta&&t(Ve);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="MONTH":(k=F,F=d)}else k=F,F=d;return F}function va(){var F=k;if(m.substr(k,3).toLowerCase()===hd){var S=m.substr(k,3);k+=3}else S=d,0===ta&&t(We);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="DAY":(k=F,F=d)}else k=F,F=d;return F}function Ea(){var F=k;if(m.substr(k,4).toLowerCase()===Hc){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(ld);if(S!==d){S=k;ta++;
var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="HOUR":(k=F,F=d)}else k=F,F=d;return F}function Ba(){var F=k;if(m.substr(k,6).toLowerCase()===Ic){var S=m.substr(k,6);k+=6}else S=d,0===ta&&t(Xe);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="MINUTE":(k=F,F=d)}else k=F,F=d;return F}function Fa(){var F=k;if(m.substr(k,6).toLowerCase()===Jc){var S=m.substr(k,6);k+=6}else S=d,0===ta&&t(Ye);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="SECOND":(k=F,F=d)}else k=
F,F=d;return F}function Ra(){var F=k;if(m.substr(k,4).toLowerCase()===qc){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(bb);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="CASE":(k=F,F=d)}else k=F,F=d;return F}function Oa(){var F=k;if(m.substr(k,3).toLowerCase()===ze){var S=m.substr(k,3);k+=3}else S=d,0===ta&&t(a);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="END":(k=F,F=d)}else k=F,F=d;return F}function Ta(){var F=k;if(m.substr(k,4).toLowerCase()===Ae){var S=
m.substr(k,4);k+=4}else S=d,0===ta&&t(u);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="WHEN":(k=F,F=d)}else k=F,F=d;return F}function Sa(){var F=k;if(m.substr(k,4).toLowerCase()===Be){var S=m.substr(k,4);k+=4}else S=d,0===ta&&t(V);if(S!==d){S=k;ta++;var ba=M();ta--;ba===d?S=void 0:(k=S,S=d);S!==d?F="THEN":(k=F,F=d)}else k=F,F=d;return F}function La(){if(44===m.charCodeAt(k)){var F=Sc;k++}else F=d,0===ta&&t(ja);return F}function Va(){if(40===m.charCodeAt(k)){var F=Fb;k++}else F=
d,0===ta&&t(qa);return F}function ab(){if(41===m.charCodeAt(k)){var F=me;k++}else F=d,0===ta&&t(za);return F}function xa(){var F;var S=[];for(F=wb();F!==d;)S.push(F),F=wb();return S}function wb(){if(oe.test(m.charAt(k))){var F=m.charAt(k);k++}else F=d,0===ta&&t(Ka);return F}function sb(F,S,ba,ya){F={type:"binary-expression",operator:F,left:S,right:ba};void 0!==ya&&(F.escape=ya);return F}function ib(F,S){for(var ba=0;ba<S.length;ba++)F=sb(S[ba][1],F,S[ba][3]);return F}l=void 0!==l?l:{};var d={},hb=
l.grammarSource,Ib={start:e},Rb=e,nb="!",la="\x3d",hc="\x3e\x3d",Tb="\x3e",Db="\x3c\x3d",Jb="\x3c\x3e",ac="\x3c",Yb="!\x3d",ic="+",Eb="-",Sb="||",kb="*",Gb="/",Hb="@",Za="'",bc="N'",X="''",fa=".",Z="null",pa="true",Da="false",Ga="in",Pa="is",Xa="like",ob="escape",mb="not",lb="and",xb="or",Kb="between",nd="from",od="for",pd="substring",qd="extract",rd="trim",sd="position",td="timestamp",ud="date",vd="leading",wd="trailing",xe="both",xd="cast",yd="as",zd="integer",Ad="smallint",jc="float",Rc="real",
nc="varchar",oc="to",ye="interval",pc="year",Ub="month",hd="day",Hc="hour",Ic="minute",Jc="second",qc="case",ze="end",Ae="when",Be="then",rb="else",Sc=",",Fb="(",me=")",Tc="`",Cd=/^[A-Za-z_\x80-\uFFFF]/,Dd=/^[A-Za-z0-9_]/,Ed=/^[A-Za-z0-9_.\x80-\uFFFF]/,Uc=/^[^']/,Fd=/^[0-9]/,Gd=/^[eE]/,yb=/^[+\-]/,oe=/^[ \t\n\r]/,Kc=/^[^`]/,ne=n("!",!1),Lc=n("\x3d",!1),id=n("\x3e\x3d",!1),pe=n("\x3e",!1),Bd=n("\x3c\x3d",!1),se=n("\x3c\x3e",!1),re=n("\x3c",!1),qe=n("!\x3d",!1),Vc=n("+",!1),Ab=n("-",!1),Qb=n("||",!1),
Hd=n("*",!1),Id=n("/",!1),Wc=D([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Jd=D([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Xc=D([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Ce=n("@",!1),Kd=n("'",!1),Ld=n("N'",!1),Md=n("''",!1),Nd=D(["'"],!0,!1),De=n(".",!1),te=D([["0","9"]],!1,!1),Ee=D(["e","E"],!1,!1),Fe=D(["+","-"],!1,!1),Ge=n("NULL",!0),He=n("TRUE",!0),Ie=n("FALSE",!0),Je=n("IN",!0),Ke=n("IS",!0),Le=n("LIKE",!0),Od=n("ESCAPE",!0),Me=n("NOT",!0),Ne=n("AND",!0),Oe=
n("OR",!0),Pe=n("BETWEEN",!0),Qe=n("FROM",!0),Re=n("FOR",!0),Se=n("SUBSTRING",!0),Pd=n("EXTRACT",!0),Te=n("TRIM",!0),Ue=n("POSITION",!0),cc=n("TIMESTAMP",!0),ue=n("DATE",!0),jb=n("LEADING",!0),vb=n("TRAILING",!0),lc=n("BOTH",!0),Mc=n("CAST",!0),jd=n("AS",!0),ve=n("INTEGER",!0),kd=n("SMALLINT",!0),Nc=n("FLOAT",!0),we=n("REAL",!0),Oc=n("VARCHAR",!0),Qc=n("TO",!0),Pc=n("INTERVAL",!0),md=n("YEAR",!0),Ve=n("MONTH",!0),We=n("DAY",!0),ld=n("HOUR",!0),Xe=n("MINUTE",!0),Ye=n("SECOND",!0),bb=n("CASE",!0),a=
n("END",!0),u=n("WHEN",!0),V=n("THEN",!0),da=n("ELSE",!0),ja=n(",",!1),qa=n("(",!1),za=n(")",!1),Ka=D([" ","\t","\n","\r"],!1,!1),Qa=n("`",!1),cb=D(["`"],!0,!1),k=0,db=[{line:1,column:1}],$a=0,zb=[],ta=0;if("startRule"in l){if(!(l.startRule in Ib))throw Error("Can't start parsing from rule \""+l.startRule+'".');Rb=Ib[l.startRule]}var Vb=Rb();if(Vb!==d&&k===m.length)return Vb;Vb!==d&&k<m.length&&t({type:"end"});throw function(F,S,ba){return new A(A.buildMessage(F,S),F,S,ba)}(zb,$a<m.length?m.charAt($a):
null,$a<m.length?x($a,$a+1):x($a,$a));}}})})({get exports(){return P},set exports(r){P=r}});let B=function(){function r(){}r.parse=function(A){return P.parse(A)};return b._createClass(r)}();c.WhereGrammar=B;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(c){c.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:
{};c.getDefaultExportFromCjs=function(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b["default"]:b}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,
supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,
supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t){function e(J,T,N,H){const U=H.x-N.x;H=H.y-N.y;T=Math.min(1,Math.max(0,((T.x-N.x)*U+(T.y-N.y)*H)/(U*U+H*H)));J.x=N.x+U*T;J.y=N.y+H*T}function p(J,T){return J?T?4:3:T?3:2}let L=function(){function J(N,H,U){this.items=N;this.query=H;this.geometryType=U.geometryType;this.hasM=U.hasM;this.hasZ=U.hasZ;this.fieldsIndex=U.fieldsIndex;this.objectIdField=U.objectIdField;this.spatialReference=U.spatialReference;this.featureAdapter=U.featureAdapter}var T=J.prototype;T.createQueryResponseForCount=
function(){const N=new m(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return N.countDistinctValues(this.items);const {groupByFieldsForStatistics:H,having:U,outStatistics:g}=this.query;if(!H?.length)return 1;const z=new Map,v=new Map,f=new Set;for(const M of g){var {statisticType:q}=M;q="exceedslimit"!==q?M.onStatisticField:void 0;if(!v.has(q)){var R=[];for(const Q of H){const E=this._getAttributeValues(N,Q,z);R.push(E)}v.set(q,this._calculateUniqueValues(R,N.returnDistinctValues))}q=
v.get(q);for(const Q in q){const {data:E,items:C}=q[Q];R=E.join(",");U&&!N.validateItems(C,U)||f.add(R)}}return f.size};T.createQueryResponse=async function(){let N;N=this.query.outStatistics?this.query.outStatistics.some(H=>"exceedslimit"===H.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const H=this.query.geometry;G.isValid(this.query.outSR)&&!G.equals(H.spatialReference,
this.query.outSR)?N.queryGeometry=D.cleanFromGeometryEngine({spatialReference:this.query.outSR,...l.project(H,H.spatialReference,this.query.outSR)}):N.queryGeometry=D.cleanFromGeometryEngine({spatialReference:this.query.outSR,...H})}return N};T.createSnappingResponse=function(N,H){const U=this.featureAdapter,g=p(this.hasZ,this.hasM),{point:z,mode:v}=N,f="number"===typeof N.distance?N.distance:N.distance.x,q="number"===typeof N.distance?N.distance:N.distance.y,R={candidates:[]},M="esriGeometryPolygon"===
this.geometryType;H=this._getPointCreator(v,this.spatialReference,H);const Q=new K(null,0),E=new K(null,0),C={x:0,y:0,z:0};for(const Ja of this.items){var Y=U.getGeometry(Ja);if(P.isNone(Y))continue;const {coords:Ma,lengths:Wa}=Y;Q.coords=Ma;E.coords=Ma;if(N.types&b.SnappingTypes.EDGE){Y=0;for(var ia=0;ia<Wa.length;ia++){var ua=Wa[ia];for(var Ca=0;Ca<ua;Ca++,Y+=g){var Ha=Q;Ha.coordsIndex=Y;if(Ca!==ua-1){const Ya=E;Ya.coordsIndex=Y+g;const Ua=C;e(C,z,Ha,Ya);var Ia=(z.x-Ua.x)/f;const gb=(z.y-Ua.y)/
q;Ia=Ia*Ia+gb*gb;1>=Ia&&R.candidates.push(n.makeEdgeCandidate(U.getObjectId(Ja),H(Ua),Math.sqrt(Ia),H(Ha),H(Ya)))}}}}if(N.types&b.SnappingTypes.VERTEX)for(Y=M?Ma.length-g:Ma.length,ia=0;ia<Y;ia+=g)ua=Q,ua.coordsIndex=ia,Ca=(z.x-ua.x)/f,Ha=(z.y-ua.y)/q,Ca=Ca*Ca+Ha*Ha,1>=Ca&&R.candidates.push(n.makeVertexCandidate(U.getObjectId(Ja),H(ua),Math.sqrt(Ca)))}R.candidates.sort((Ja,Ma)=>Ja.distance-Ma.distance);return R};T._getPointCreator=function(N,H,U){const g=P.isSome(U)&&!G.equals(H,U)?v=>l.project(v,
H,U):v=>v,{hasZ:z}=this;return"3d"===N?z?({x:v,y:f,z:q})=>g({x:v,y:f,z:q}):({x:v,y:f})=>g({x:v,y:f,z:0}):({x:v,y:f})=>g({x:v,y:f})};T.createSummaryStatisticsResponse=async function(N){const {field:H,valueExpression:U,normalizationField:g,normalizationType:z,normalizationTotal:v,minValue:f,maxValue:q,scale:R}=N;N=this.fieldsIndex.isDateField(H);var M=await this._getDataValues({field:H,valueExpression:U,normalizationField:g,normalizationType:z,normalizationTotal:v,scale:R});const Q=x.isNullCountSupported({normalizationType:z,
normalizationField:g,minValue:f,maxValue:q}),E=this.fieldsIndex.get(H),C={value:.5,fieldType:E?.type};M=w.isStringField(E)?x.calculateStringStatistics({values:M,supportsNullCount:Q,percentileParams:C}):x.calculateStatistics({values:M,minValue:f,maxValue:q,useSampleStdDev:!z,supportsNullCount:Q,percentileParams:C});return x.processSummaryStatisticsResult(M,N)};T.createUniqueValuesResponse=async function(N){const {field:H,valueExpression:U,domains:g,returnAllCodedValues:z,scale:v}=N;var f=await this._getDataValues({field:H,
field2:N.field2,field3:N.field3,fieldDelimiter:N.fieldDelimiter,valueExpression:U,scale:v});f=x.calculateUniqueValuesCount(f);return x.createUVResult(f,g,z,N.fieldDelimiter)};T.createClassBreaksResponse=async function(N){const {field:H,valueExpression:U,normalizationField:g,normalizationType:z,normalizationTotal:v,classificationMethod:f,standardDeviationInterval:q,minValue:R,maxValue:M,numClasses:Q,scale:E}=N;N=await this._getDataValues({field:H,valueExpression:U,normalizationField:g,normalizationType:z,
normalizationTotal:v,scale:E});N=x.calculateClassBreaks(N,{field:H,normalizationField:g,normalizationType:z,normalizationTotal:v,classificationMethod:f,standardDeviationInterval:q,minValue:R,maxValue:M,numClasses:Q});return x.resolveCBResult(N,f)};T.createHistogramResponse=async function(N){const {field:H,valueExpression:U,normalizationField:g,normalizationType:z,normalizationTotal:v,classificationMethod:f,standardDeviationInterval:q,minValue:R,maxValue:M,numBins:Q,scale:E}=N;N=await this._getDataValues({field:H,
valueExpression:U,normalizationField:g,normalizationType:z,normalizationTotal:v,scale:E});return x.calculateHistogram(N,{field:H,normalizationField:g,normalizationType:z,normalizationTotal:v,classificationMethod:f,standardDeviationInterval:q,minValue:R,maxValue:M,numBins:Q})};T._sortFeatures=function(N,H,U){if(1<N.length&&H&&H.length)for(const g of H.reverse()){H=g.split(" ");const z=H[0],v=this.fieldsIndex.get(z);H=H[1]?"desc"===H[1].toLowerCase():!1;const f=x.getAttributeComparator(v?.type,H);N.sort((q,
R)=>{q=U(q,z,v);R=U(R,z,v);return f(q,R)})}};T._createFeatureQueryResponse=function(N){const H=this.items,{geometryType:U,hasM:g,hasZ:z,objectIdField:v,spatialReference:f}=this,{outFields:q,outSR:R,quantizationParameters:M,resultRecordCount:Q,resultOffset:E,returnZ:C,returnM:Y}=N,ia=null!=Q?H.length>(E||0)+Q:!1,ua=q&&(q.includes("*")?[...this.fieldsIndex.fields]:q.map(Ca=>this.fieldsIndex.get(Ca)));return{exceededTransferLimit:ia,features:this._createFeatures(N,H),fields:ua,geometryType:U,hasM:g&&
Y,hasZ:z&&C,objectIdFieldName:v,spatialReference:D.cleanFromGeometryEngine(R||f),transform:M&&A.toQuantizationTransform(M)||null}};T._createFeatures=function(N,H){const U=new m(N,this.featureAdapter,this.fieldsIndex),{hasM:g,hasZ:z}=this,{orderByFields:v,quantizationParameters:f,returnGeometry:q,returnCentroid:R,maxAllowableOffset:M,resultOffset:Q,resultRecordCount:E,returnZ:C=!1,returnM:Y=!1}=N,ia=z&&C,ua=g&&Y;N=[];var Ca=0;H=[...H];this._sortFeatures(H,v,(Ja,Ma,Wa)=>U.getFieldValue(Ja,Ma,Wa));if(q||
R){var Ha=A.toQuantizationTransform(f)??void 0;if(q&&!R)for(var Ia of H)N[Ca++]={attributes:U.getAttributes(Ia),geometry:D.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ia),M,Ha,ia,ua)};else if(!q&&R)for(const Ja of H)N[Ca++]={attributes:U.getAttributes(Ja),centroid:D.transformCentroid(this,this.featureAdapter.getCentroid(Ja,this),Ha)};else for(const Ja of H)N[Ca++]={attributes:U.getAttributes(Ja),centroid:D.transformCentroid(this,this.featureAdapter.getCentroid(Ja,
this),Ha),geometry:D.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ja),M,Ha,ia,ua)}}else for(Ha of H)(Ia=U.getAttributes(Ha))&&(N[Ca++]={attributes:Ia});Ca=Q||0;null!=E&&(N=N.slice(Ca,Math.min(N.length,Ca+E)));return N};T._createExceedsLimitQueryResponse=function(N){var H=!1;let U=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY;H=Number.POSITIVE_INFINITY;for(const z of N.outStatistics??[])if("exceedslimit"===z.statisticType){U=null!=z.maxPointCount?z.maxPointCount:
Number.POSITIVE_INFINITY;g=null!=z.maxRecordCount?z.maxRecordCount:Number.POSITIVE_INFINITY;H=null!=z.maxVertexCount?z.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)H=this.items.length>U;else if(this.items.length>g)H=!0;else{N=p(this.hasZ,this.hasM);const z=this.featureAdapter;H=this.items.reduce((v,f)=>{f=z.getGeometry(f);return v+(P.isSome(f)&&f.coords.length||0)},0)/N>H}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",
sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(H)}}]}};T._createStatisticsQueryResponse=async function(N){var H={attributes:{}};const U=[],g=new Map,z=new Map,v=new Map,f=new Map,q=new m(N,this.featureAdapter,this.fieldsIndex);var R=N.outStatistics;const {groupByFieldsForStatistics:M,having:Q,orderByFields:E}=N;N=M&&M.length;const C=!!N,Y=C?M[0]:null,ia=C&&!this.fieldsIndex.get(Y);for(const Ja of R??[]){const {outStatisticFieldName:Ma,statisticType:Wa}=
Ja;R=Ja;var ua="exceedslimit"!==Wa?Ja.onStatisticField:void 0;const Ya="percentile_disc"===Wa||"percentile_cont"===Wa,Ua="EnvelopeAggregate"===Wa||"CentroidAggregate"===Wa||"ConvexHullAggregate"===Wa,gb=C&&1===N&&(ua===Y||ia)&&"count"===Wa;if(C){if(!v.has(ua)){var Ca=[];for(const na of M){var Ha=this._getAttributeValues(q,na,g);Ca.push(Ha)}v.set(ua,this._calculateUniqueValues(Ca,Ua?!1:q.returnDistinctValues))}Ca=v.get(ua);for(const na in Ca){const {count:ra,data:Aa,items:h,itemPositions:y}=Ca[na];
Ha=Aa.join(",");if(!Q||q.validateItems(h,Q)){const ea=f.get(Ha)||{attributes:{}};if(Ua){ea.aggregateGeometries||(ea.aggregateGeometries={});const {aggregateGeometries:sa,outStatisticFieldName:O}=await this._getAggregateGeometry(R,h);ea.aggregateGeometries[O]=sa}else{var Ia=null;if(gb)Ia=ra;else{const sa=this._getAttributeValues(q,ua,g);Ia=y.map(O=>sa[O]);Ia=Ya&&"statisticParameters"in R?this._getPercentileValue(R,Ia):this._getStatisticValue(R,Ia,null,q.returnDistinctValues)}ea.attributes[Ma]=Ia}let ka=
0;M.forEach((sa,O)=>ea.attributes[this.fieldsIndex.get(sa)?sa:`EXPR_${++ka}`]=Aa[O]);f.set(Ha,ea)}}}else if(Ua){H.aggregateGeometries||(H.aggregateGeometries={});const {aggregateGeometries:na,outStatisticFieldName:ra}=await this._getAggregateGeometry(R,this.items);H.aggregateGeometries[ra]=na}else ua=this._getAttributeValues(q,ua,g),H.attributes[Ma]=Ya&&"statisticParameters"in R?this._getPercentileValue(R,ua):this._getStatisticValue(R,ua,z,q.returnDistinctValues);U.push({name:Ma,alias:Ma,type:"esriFieldTypeDouble"})}H=
C?Array.from(f.values()):[H];this._sortFeatures(H,E,(Ja,Ma)=>Ja.attributes[Ma]);return{fields:U,features:H}};T._getAggregateGeometry=async function(N,H){var U=await new Promise((E,C)=>c(["../../../geometry/geometryEngineJSON"],E,C));const {statisticType:g,outStatisticFieldName:z}=N,{featureAdapter:v,spatialReference:f,geometryType:q,hasZ:R,hasM:M}=this;H=H.map(E=>D.getGeometry(q,R,M,v.getGeometry(E)));const Q=U.convexHull(f,H,!0)[0];N={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===
g?(U=Q?r.getPolygonExtent(Q):r.getGeometryExtent(U.union(f,H)),N.aggregateGeometries={...U,spatialReference:f},N.outStatisticFieldName=z||"extent"):"CentroidAggregate"===g?(U=Q?B.polygonCentroid(Q):B.extentCentroid(r.getGeometryExtent(U.union(f,H))),N.aggregateGeometries={x:U[0],y:U[1],spatialReference:f},N.outStatisticFieldName=z||"centroid"):"ConvexHullAggregate"===g&&(N.aggregateGeometries=Q,N.outStatisticFieldName=z||"convexHull");return N};T._getStatisticValue=function(N,H,U,g){const {onStatisticField:z,
statisticType:v}=N;N=null;N=U?.has(z)?U.get(z):w.isStringField(this.fieldsIndex.get(z))?x.calculateStringStatistics({values:H,returnDistinct:g}):x.calculateStatistics({values:g?[...(new Set(H))]:H,minValue:null,maxValue:null,useSampleStdDev:!0});U&&U.set(z,N);return N["var"===v?"variance":v]};T._getPercentileValue=function(N,H){const {onStatisticField:U,statisticParameters:g,statisticType:z}=N,{value:v,orderBy:f}=g;N=this.fieldsIndex.get(U);return x.calculatePercentile(H,{value:v,orderBy:f,fieldType:N?.type,
isDiscrete:"percentile_disc"===z})};T._getAttributeValues=function(N,H,U){if(U.has(H))return U.get(H);const g=this.fieldsIndex.get(H),z=this.items.map(v=>N.getFieldValue(v,H,g));U.set(H,z);return z};T._getAttributeDataValues=function(N,H){return this.items.map(U=>N.getDataValue(U,{field:H.field,field2:H.field2,field3:H.field3,fieldDelimiter:H.fieldDelimiter,normalizationField:H.normalizationField,normalizationType:H.normalizationType,normalizationTotal:H.normalizationTotal}))};T._getAttributeExpressionValues=
async function(N,H,U){const {arcadeUtils:g}=await t.loadArcade();H=g.createFunction(H);U=U&&g.getViewInfo(U);return N.getExpressionValues(this.items,H,U,g)};T._calculateUniqueValues=function(N,H){const U={},g=this.items,z=g.length;for(let v=0;v<z;v++){const f=g[v],q=[];for(const M of N)q.push(M[v]);const R=q.join(",");null==U[R]?U[R]={count:1,data:q,items:[f],itemPositions:[v]}:(H||U[R].count++,U[R].items.push(f),U[R].itemPositions.push(v))}return U};T._getDataValues=async function(N){const H=new m(this.query,
this.featureAdapter,this.fieldsIndex),{valueExpression:U,field:g,normalizationField:z,normalizationType:v,normalizationTotal:f,scale:q}=N,R=U?{viewingMode:"map",scale:q,spatialReference:this.query.outSR||this.spatialReference}:null;return U?this._getAttributeExpressionValues(H,U,R):this._getAttributeDataValues(H,{field:g,field2:N.field2,field3:N.field3,fieldDelimiter:N.fieldDelimiter,normalizationField:z,normalizationType:v,normalizationTotal:f})};I._createClass(J,[{key:"size",get:function(){return this.items.length}}]);
return J}();b.SnappingTypes=void 0;(function(J){J[J.NONE=0]="NONE";J[J.EDGE=1]="EDGE";J[J.VERTEX=2]="VERTEX"})(b.SnappingTypes||(b.SnappingTypes={}));let K=function(){function J(T,N){this.coords=T;this.coordsIndex=N}I._createClass(J,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return J}();b.QueryEngineResult=L;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(c,b,I){function P({scale:v,translate:f},q){return Math.round((q-f[0])/v[0])}function B({scale:v,translate:f},q){return Math.round((f[1]-q)/v[1])}function r(v,f,q){const R=[];let M,Q,E,C;for(let Y=0;Y<q.length;Y++){const ia=q[Y];if(0<Y){if(E=P(v,ia[0]),C=B(v,ia[1]),E!==M||C!==Q)R.push(f(ia,E-M,C-Q)),M=E,Q=C}else M=P(v,ia[0]),Q=B(v,ia[1]),R.push(f(ia,M,Q))}return 0<
R.length?R:null}function A(v,f,q,R){return r(v,q?R?z:g:R?g:U,f)}function G(v,f,q,R){const M=[];q=q?R?z:g:R?g:U;for(R=0;R<f.length;R++){const Q=r(v,q,f[R]);Q&&3<=Q.length&&M.push(Q)}return M.length?M:null}function m(v,f,q,R){const M=[];q=q?R?z:g:R?g:U;for(R=0;R<f.length;R++){const Q=r(v,q,f[R]);Q&&2<=Q.length&&M.push(Q)}return M.length?M:null}function l({scale:v,translate:f},q){return q*v[0]+f[0]}function n({scale:v,translate:f},q){return f[1]-q*v[1]}function D(v,f,q){const R=Array(q.length);if(!q.length)return R;
const [M,Q]=v.scale;let E=l(v,q[0][0]);v=n(v,q[0][1]);R[0]=f(q[0],E,v);for(let C=1;C<q.length;C++){const Y=q[C];E+=Y[0]*M;v-=Y[1]*Q;R[C]=f(Y,E,v)}return R}function w(v,f,q){const R=Array(q.length);for(let M=0;M<q.length;M++)R[M]=D(v,f,q[M]);return R}function x(v,f,q,R){return D(v,q?R?z:g:R?g:U,f)}function t(v,f,q,R){return w(v,q?R?z:g:R?g:U,f)}function e(v,f,q,R){return w(v,q?R?z:g:R?g:U,f)}function p(v,f,q){let [R,M]=q[0],Q=Math.min(R,f[0]),E=Math.min(M,f[1]),C=Math.max(R,f[2]);f=Math.max(M,f[3]);
for(let Y=1;Y<q.length;Y++){const [ia,ua]=q[Y];R+=ia;M+=ua;0>ia&&(Q=Math.min(Q,R));0<ia&&(C=Math.max(C,R));0>ua?E=Math.min(E,M):0<ua&&(f=Math.max(f,M))}v[0]=Q;v[1]=E;v[2]=C;v[3]=f;return v}function L(v,f){if(!f.length)return null;v[0]=v[1]=Number.POSITIVE_INFINITY;v[2]=v[3]=Number.NEGATIVE_INFINITY;for(let q=0;q<f.length;q++)p(v,v,f[q]);return v}function K(v,f,q,R,M){f.xmin=P(v,q.xmin);f.ymin=B(v,q.ymin);f.xmax=P(v,q.xmax);f.ymax=B(v,q.ymax);f!==q&&(R&&(f.zmin=q.zmin,f.zmax=q.zmax),M&&(f.mmin=q.mmin,
f.mmax=q.mmax));return f}function J(v,f,q,R,M){f.points=A(v,q.points,R,M)??[];return f}function T(v,f,q,R,M){f.x=P(v,q.x);f.y=B(v,q.y);f!==q&&(R&&(f.z=q.z),M&&(f.m=q.m));return f}function N(v,f,q,R,M){v=G(v,q.rings,R,M);if(!v)return null;f.rings=v;return f}function H(v,f,q,R,M){v=m(v,q.paths,R,M);if(!v)return null;f.paths=v;return f}const U=(v,f,q)=>[f,q],g=(v,f,q)=>[f,q,v[2]],z=(v,f,q)=>[f,q,v[2],v[3]];c.equals=function(v,f){if(v===f||null==v&&null==f)return!0;if(null==v||null==f)return!1;let q,
R,M,Q;v&&"upperLeft"===v.originPosition?(q=v.translate[0],R=v.translate[1],v=v.scale[0]):(q=b.isSome(v.extent)?v.extent.xmin:0,R=b.isSome(v.extent)?v.extent.ymax:0,v=v.tolerance);f&&"upperLeft"===f.originPosition?(M=f.translate[0],Q=f.translate[1],f=f.scale[0]):(M=b.isSome(f.extent)?f.extent.xmin:0,Q=b.isSome(f.extent)?f.extent.ymax:0,f=f.tolerance);return q===M&&R===Q&&v===f};c.getQuantizedBoundsCoordsArray=p;c.getQuantizedBoundsCoordsArrayArray=L;c.getQuantizedBoundsPaths=function(v){return L([0,
0,0,0],v)};c.getQuantizedBoundsPoints=function(v){const f=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return p(f,f,v)};c.getQuantizedBoundsRings=function(v){return L([0,0,0,0],v)};c.quantizeBounds=function(v,f,q){f[0]=P(v,q[0]);f[3]=B(v,q[1]);f[2]=P(v,q[2]);f[1]=B(v,q[3]);return f};c.quantizeExtent=K;c.quantizeGeometry=function(v,f){return v&&f?I.isPoint(f)?T(v,{},f,!1,!1):I.isPolyline(f)?H(v,{},f,!1,!1):I.isPolygon(f)?N(v,{},f,!1,!1):I.isMultipoint(f)?
J(v,{},f,!1,!1):I.isExtent(f)?K(v,{},f,!1,!1):null:null};c.quantizeMultipoint=J;c.quantizePaths=m;c.quantizePoint=T;c.quantizePoints=A;c.quantizePolygon=N;c.quantizePolyline=H;c.quantizeRings=G;c.quantizeX=P;c.quantizeY=B;c.toQuantizationTransform=function(v){return v?{originPosition:"upper-left"===v.originPosition?"upperLeft":"lower-left"===v.originPosition?"lowerLeft":v.originPosition,scale:v.tolerance?[v.tolerance,v.tolerance]:[1,1],translate:b.isSome(v.extent)?[v.extent.xmin,v.extent.ymax]:[0,
0]}:null};c.unquantizeBounds=function(v,f,q){return q?(f[0]=l(v,q[0]),f[1]=n(v,q[3]),f[2]=l(v,q[2]),f[3]=n(v,q[1]),f):[l(v,f[0]),n(v,f[3]),l(v,f[2]),n(v,f[1])]};c.unquantizeCoordsArray=D;c.unquantizeCoordsArrayArray=w;c.unquantizeExtent=function(v,f,q,R,M){f.xmin=l(v,q.xmin);f.ymin=n(v,q.ymin);f.xmax=l(v,q.xmax);f.ymax=n(v,q.ymax);f!==q&&(R&&(f.zmin=q.zmin,f.zmax=q.zmax),M&&(f.mmin=q.mmin,f.mmax=q.mmax));return f};c.unquantizeMultipoint=function(v,f,q,R,M){b.isSome(q)&&(f.points=x(v,q.points,R,M));
return f};c.unquantizePaths=t;c.unquantizePoint=function(v,f,q,R,M){if(b.isNone(q))return f;f.x=l(v,q.x);f.y=n(v,q.y);f!==q&&(R&&(f.z=q.z),M&&(f.m=q.m));return f};c.unquantizePoints=x;c.unquantizePolygon=function(v,f,q,R,M){b.isSome(q)&&(f.rings=e(v,q.rings,R,M));return f};c.unquantizePolyline=function(v,f,q,R,M){b.isSome(q)&&(f.paths=t(v,q.paths,R,M));return f};c.unquantizeRings=e;c.unquantizeX=l;c.unquantizeY=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(c,b,I,P){return function(){function B(A,G,m){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=A.returnDistinctValues??!1;this.fieldsIndex=m;this.featureAdapter=G;if((G=A.outFields)&&!G.includes("*")){this.outFields=G;A=0;for(const n of G){var l=I.getExpressionFromFieldName(n);l=(G=this.fieldsIndex.get(l))?null:I.getWhereClause(l,m);G=G?G.name:I.getAliasFromFieldName(n)||`FIELD_EXP_${A++}`;
this._fieldDataCache.set(n,{alias:G,clause:l})}}}var r=B.prototype;r.countDistinctValues=function(A){if(!this.returnDistinctValues)return A.length;A.forEach(G=>this.getAttributes(G));return this._returnDistinctMap.size};r.getAttributes=function(A){A=this._processAttributesForOutFields(A);return this._processAttributesForDistinctValues(A)};r.getFieldValue=function(A,G,m){const l=m?m.name:G;let n=null;this._fieldDataCache.has(l)?n=this._fieldDataCache.get(l)?.clause:m||(n=I.getWhereClause(G,this.fieldsIndex),
this._fieldDataCache.set(l,{alias:l,clause:n}));return m?this.featureAdapter.getAttribute(A,l):n?.calculateValue(A,this.featureAdapter)};r.getDataValue=function(A,G){const m=G.normalizationType,l=G.normalizationTotal;let n=G.field&&this.getFieldValue(A,G.field,this.fieldsIndex.get(G.field));G.field2&&(n=`${P.processNullValue(n)}${G.fieldDelimiter}${P.processNullValue(this.getFieldValue(A,G.field2,this.fieldsIndex.get(G.field2)))}`,G.field3&&(n=`${n}${G.fieldDelimiter}${P.processNullValue(this.getFieldValue(A,
G.field3,this.fieldsIndex.get(G.field3)))}`));m&&Number.isFinite(n)&&(A="field"===m&&G.normalizationField?this.getFieldValue(A,G.normalizationField,this.fieldsIndex.get(G.normalizationField)):null,n=P.getNormalizedValue(n,m,A,l));return n};r.getExpressionValue=function(A,G,m,l){A={attributes:this.featureAdapter.getAttributes(A),layer:{fields:this.fieldsIndex.fields}};m=l.createExecContext(A,m);return l.executeFunction(G,m)};r.getExpressionValues=function(A,G,m,l){const n={fields:this.fieldsIndex.fields};
return A.map(D=>{D={attributes:this.featureAdapter.getAttributes(D),layer:n};D=l.createExecContext(D,m);return l.executeFunction(G,D)})};r.validateItem=function(A,G){this._fieldDataCache.has(G)||this._fieldDataCache.set(G,{alias:G,clause:I.getWhereClause(G,this.fieldsIndex)});return this._fieldDataCache.get(G)?.clause?.testFeature(A,this.featureAdapter)??!1};r.validateItems=function(A,G){this._fieldDataCache.has(G)||this._fieldDataCache.set(G,{alias:G,clause:I.getWhereClause(G,this.fieldsIndex)});
return this._fieldDataCache.get(G)?.clause?.testSet(A,this.featureAdapter)??!1};r._processAttributesForOutFields=function(A){const G=this.outFields;if(!G||!G.length)return this.featureAdapter.getAttributes(A);const m={};for(const l of G){const {alias:n,clause:D}=this._fieldDataCache.get(l);m[n]=D?D.calculateValue(A,this.featureAdapter):this.featureAdapter.getAttribute(A,n)}return m};r._processAttributesForDistinctValues=function(A){if(b.isNone(A)||!this.returnDistinctValues)return A;var G=this.outFields,
m=[];if(G)for(const n of G){var {alias:l}=this._fieldDataCache.get(n);m.push(A[l])}else for(l in A)m.push(A[l]);G=`${(G||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(G)||0;this._returnDistinctMap.set(G,++m);return 1<m?null:A};return c._createClass(B)}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,b,I){function P(H){return null==H||"string"===typeof H&&!H?"\x3cNull\x3e":H}function B(H){const U=
null!=H.minValue||null!=H.maxValue,g=!!H.sqlExpression&&H.supportsSQLExpression;return!(null!=H.normalizationField||null!=H.normalizationType)&&!U&&!g}function r(H){const {values:U,useSampleStdDev:g,supportsNullCount:z}=H;var v=Number.POSITIVE_INFINITY;let f=Number.NEGATIVE_INFINITY,q=null,R=null;var M=null;let Q=null,E=0;const C=null==H.minValue?-Infinity:H.minValue,Y=null==H.maxValue?Infinity:H.maxValue;for(const ia of U)Number.isFinite(ia)?ia>=C&&ia<=Y&&(q=null===q?ia:q+ia,v=Math.min(v,ia),f=Math.max(f,
ia),E++):"string"===typeof ia&&E++;if(E&&null!=q){R=q/E;M=0;for(const ia of U)Number.isFinite(ia)&&ia>=C&&ia<=Y&&(M+=(ia-R)**2);Q=g?1<E?M/(E-1):0:0<E?M/E:0;M=Math.sqrt(Q)}else f=v=null;v={avg:R,count:E,max:f,min:v,stddev:M,sum:q,variance:Q};z&&(v.nullcount=U.length-E);H.percentileParams&&(v.median=A(U,H.percentileParams));return v}function A(H,U){const {fieldType:g,value:z,orderBy:v,isDiscrete:f}=U,q=G(g,"desc"===v);H=[...H].filter(E=>null!=E).sort((E,C)=>q(E,C));if(0===H.length)return null;if(0>=
z)return H[0];if(1<=z)return H[H.length-1];var R=(H.length-1)*z,M=Math.floor(R);U=M+1;R%=1;M=H[M];const Q=H[U];return U>=H.length||f||"string"===typeof M||"string"===typeof Q?M:M*(1-R)+Q*R}function G(H,U){const g=U?1:-1,z=n(U),v=l(U);if(!H||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...T].includes(H))return(f,q)=>"number"===typeof f&&"number"===typeof q?z(f,q):"string"===typeof f&&"string"===typeof q?v(f,q):g;if("esriFieldTypeDate"===H)return(f,q)=>{f=
(new Date(f)).getTime();q=(new Date(q)).getTime();return isNaN(f)||isNaN(q)?g:z(f,q)};if(T.has(H))return(f,q)=>z(f,q);if("esriFieldTypeString"===H)return(f,q)=>v(f,q);if("esriFieldTypeGUID"===H||"esriFieldTypeGlobalID"===H){const f=l(U);return(q,R)=>f(D(q),D(R))}return U?(f,q)=>1:(f,q)=>-1}function m(H,U,g){if(g){if(null==H)return null==U?0:1;if(null==U)return-1}else{if(null==H)return null==U?0:-1;if(null==U)return 1}return null}function l(H){return H?(U,g)=>{const z=m(U,g,!0);if(null!=z)return z;
U=U.toUpperCase();g=g.toUpperCase();return U>g?-1:U<g?1:0}:(U,g)=>{const z=m(U,g,!1);if(null!=z)return z;U=U.toUpperCase();g=g.toUpperCase();return U<g?-1:U>g?1:0}}function n(H){return H?(U,g)=>{const z=m(U,g,!0);return null!=z?z:g-U}:(U,g)=>{const z=m(U,g,!1);return null!=z?z:U-g}}function D(H){return H.substr(24,12)+H.substr(19,4)+H.substr(16,2)+H.substr(14,2)+H.substr(11,2)+H.substr(9,2)+H.substr(6,2)+H.substr(4,2)+H.substr(2,2)+H.substr(0,2)}function w(H){return"coded-value"!==H?.type?[]:H.codedValues.map(U=>
U.code)}function x(H,U){const g=e({field:U.field,normalizationType:U.normalizationType,normalizationField:U.normalizationField,classificationMethod:U.classificationMethod,standardDeviationInterval:U.standardDeviationInterval,breakCount:U.numClasses||5});H=t(H,U.minValue,U.maxValue);return I.createGenerateRendererClassBreaks({definition:g,values:H,normalizationTotal:U.normalizationTotal})}function t(H,U,g){const z=null==U?-Infinity:U,v=null==g?Infinity:g;return H.filter(f=>Number.isFinite(f)&&f>=z&&
f<=v)}function e(H){const {breakCount:U,field:g,normalizationField:z,normalizationType:v}=H,f=H.classificationMethod||"equal-interval";return new b({breakCount:U,classificationField:g,classificationMethod:f,normalizationField:"field"===v?z:void 0,normalizationType:v,standardDeviationInterval:"standard-deviation"===f?H.standardDeviationInterval||1:void 0})}function p(H,U){const {field:g,classificationMethod:z,standardDeviationInterval:v,normalizationType:f,normalizationField:q,normalizationTotal:R,
minValue:M,maxValue:Q}=U,E=U.numBins||10;let C=U=null,Y=null;z&&"equal-interval"!==z||f?({classBreaks:H}=x(H,{field:g,normalizationType:f,normalizationField:q,normalizationTotal:R,classificationMethod:z,standardDeviationInterval:v,minValue:M,maxValue:Q,numClasses:E}),U=H[0].minValue,C=H[H.length-1].maxValue,Y=H.map(ia=>[ia.minValue,ia.maxValue])):(null!=M&&null!=Q?(U=M,C=Q):(H=r({values:H,minValue:M,maxValue:Q,useSampleStdDev:!f,supportsNullCount:B({normalizationType:f,normalizationField:q,minValue:M,
maxValue:Q})}),U=H.min??null,C=H.max??null),Y=K(U??0,C??0,E));return{min:U,max:C,intervals:Y}}function L(H,U){let g=-1;for(let z=H.length-1;0<=z;z--)if(U>=H[z][0]){g=z;break}return g}function K(H,U,g){const z=(U-H)/g,v=[];let f;for(let q=1;q<=g;q++)f=H+z,f=Number(f.toFixed(16)),v.push([H,q===g?U:f]),H=f;return v}const J=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,T=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),N="min max avg stddev count sum variance nullcount median".split(" ");
c.calculateClassBreaks=x;c.calculateHistogram=function(H,U){var g=p(H,U);const z=g.intervals,v=g.min??0;g=g.max??0;const f=z.map((q,R)=>({minValue:z[R][0],maxValue:z[R][1],count:0}));for(const q of H)null!=q&&q>=v&&q<=g&&(H=L(z,q),-1<H&&f[H].count++);return{bins:f,minValue:v,maxValue:g,normalizationTotal:U.normalizationTotal}};c.calculatePercentile=A;c.calculateStatistics=r;c.calculateStringStatistics=function(H){const U=H.returnDistinct?[...(new Set(H.values))]:H.values,g=U.filter(v=>null!=v).length,
z={count:g};H.supportsNullCount&&(z.nullcount=U.length-g);H.percentileParams&&(z.median=A(U,H.percentileParams));return z};c.calculateUniqueValuesCount=function(H){const U={};for(let g of H){if(null==g||"string"===typeof g&&""===g.trim())g=null;null==U[g]?U[g]={count:1,data:g}:U[g].count++}return{count:U}};c.createClassBreaksDefinition=e;c.createUVResult=function(H,U,g,z){H=H.count;const v=[];if(g&&U){g=[];var f=w(U[0]);for(const q of f)if(U[1]){f=w(U[1]);for(const R of f)if(U[2]){f=w(U[2]);for(const M of f)g.push(`${P(q)}${z}${P(R)}${z}${P(M)}`)}else g.push(`${P(q)}${z}${P(R)}`)}else g.push(q);
for(const q of g)H.hasOwnProperty(q)||(H[q]={data:q,count:0})}for(const q in H)U=H[q],v.push({value:U.data,count:U.count,label:U.label});return{uniqueValueInfos:v}};c.getAttributeComparator=G;c.getEqualIntervalBins=K;c.getNormalizedValue=function(H,U,g,z){let v=null;switch(U){case "log":0!==H&&(v=Math.log(H)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(z)&&0!==z&&(v=H/z*100);break;case "field":Number.isFinite(g)&&0!==g&&(v=H/g);break;case "natural-log":0<H&&(v=Math.log(H));break;case "square-root":0<
H&&(v=H**.5)}return v};c.isNullCountSupported=B;c.processNullValue=P;c.processSummaryStatisticsResult=function(H,U){let g;for(g in H)N.includes(g)&&(Number.isFinite(H[g])||(H[g]=null));if(!U)return H;["avg","stddev","variance"].forEach(z=>{null!=H[z]&&(H[z]=Math.ceil(H[z]))});return H};c.resolveCBResult=function(H,U){let g=H.classBreaks;const z=g[0].minValue,v=g[g.length-1].maxValue,f="standard-deviation"===U;g=g.map(q=>{const R=q.label;q={minValue:q.minValue,maxValue:q.maxValue,label:R};if(f&&R){const M=
R.match(J)?.map(Q=>+Q.trim())??[];2===M.length?(q.minStdDev=M[0],q.maxStdDev=M[1],0>M[0]&&0<M[1]&&(q.hasAvg=!0)):1===M.length&&(R.includes("\x3c")?(q.minStdDev=null,q.maxStdDev=M[0]):R.includes("\x3e")&&(q.minStdDev=M[0],q.maxStdDev=null))}return q});return{minValue:z,maxValue:v,classBreakInfos:g,normalizationTotal:H.normalizationTotal}};c.statisticTypes=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G,m,l){r=new I.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});I=new I.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});P=function(n){function D(x){x=w.call(this,x);x.type="class-breaks-definition";x.breakCount=
null;x.classificationField=null;x.classificationMethod=null;x.normalizationField=null;x.normalizationType=null;return x}c._inherits(D,n);var w=c._createSuper(D);c._createClass(D,[{key:"standardDeviationInterval",set:function(x){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",x)}},{key:"definedInterval",set:function(x){"defined-interval"===this.classificationMethod&&this._set("definedInterval",x)}}]);return D}(P.JSONSupport);b.__decorate([m.enumeration({classBreaksDef:"class-breaks-definition"})],
P.prototype,"type",void 0);b.__decorate([B.property({json:{write:!0}})],P.prototype,"breakCount",void 0);b.__decorate([B.property({json:{write:!0}})],P.prototype,"classificationField",void 0);b.__decorate([B.property({type:String,json:{read:r.read,write:r.write}})],P.prototype,"classificationMethod",void 0);b.__decorate([B.property({json:{write:!0}})],P.prototype,"normalizationField",void 0);b.__decorate([B.property({json:{read:I.read,write:I.write}})],P.prototype,"normalizationType",void 0);b.__decorate([B.property({value:null,
json:{write:!0}})],P.prototype,"standardDeviationInterval",null);b.__decorate([B.property({value:null,json:{write:!0}})],P.prototype,"definedInterval",null);return P=b.__decorate([l.subclass("esri.rest.support.ClassBreaksDefinition")],P)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,b,I){c.enumeration=function(P,B={}){P=P instanceof b.JSONMap?P:new b.JSONMap(P,B);P={type:B?.ignoreUnknown??!0?P.apiValues:String,json:{type:P.jsonValues,
read:B?.readOnly?!1:{reader:P.read},write:{writer:P.write}}};void 0!==B?.readOnly&&(P.readOnly=!!B.readOnly);void 0!==B?.default&&(P.json.default=B.default);void 0!==B?.name&&(P.json.name=B.name);void 0!==B?.nonNullable&&(P.nonNullable=B.nonNullable);return I.property(P)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,b){function I(w){var x=w.definition;const {classificationMethod:t,
normalizationType:e,definedInterval:p}=x;x=x.breakCount??1;const L=[];var K=w.values;if(0===K.length)return[];K=K.sort((g,z)=>g-z);var J=K[0],T=K[K.length-1];if("equal-interval"===t)if(K.length>=x){K=(T-J)/x;w=J;for(var N=1;N<x;N++){var H=Number((J+N*K).toFixed(6));L.push({minValue:w,maxValue:H,label:P(w,H,e)});w=H}L.push({minValue:w,maxValue:T,label:P(w,T,e)})}else K.forEach(g=>{L.push({minValue:g,maxValue:g,label:P(g,g,e)})});else if("natural-breaks"===t){K=B(K);w=r(K.uniqueValues,w.valueFrequency||
K.valueFrequency,x);for(N=1;N<x;N++)K.uniqueValues.length>N&&(H=Number(K.uniqueValues[w[N]].toFixed(6)),L.push({minValue:J,maxValue:H,label:P(J,H,e)}),J=H);L.push({minValue:J,maxValue:T,label:P(J,T,e)})}else if("quantile"===t)if(K.length>=x&&J!==T){w=Math.ceil(K.length/x);N=0;for(H=1;H<x;H++){var U=w+N-1;U>K.length&&(U=K.length-1);0>U&&(U=0);L.push({minValue:J,maxValue:K[U],label:P(J,K[U],e)});J=K[U];N+=w;w=Math.ceil((K.length-N)/(x-H))}L.push({minValue:J,maxValue:T,label:P(J,T,e)})}else for(x=-1,
T=0;T<K.length;T++)J=K[T],J!==x&&(x=J,L.push({minValue:x,maxValue:J,label:P(x,J,e)}),x=J);else if("standard-deviation"===t)if(w=m(K),N=l(K,w),0===N)L.push({minValue:K[0],maxValue:K[0],label:P(K[0],K[0],e)});else{K=G(J,T,x,w,N)*N;N=0;for(H=x;1<=H;H--)U=Number((w-(H-.5)*K).toFixed(6)),L.push({minValue:J,maxValue:U,label:P(J,U,e)}),J=U,N++;H=Number((w+.5*K).toFixed(6));L.push({minValue:J,maxValue:H,label:P(J,H,e)});J=H;N++;for(U=1;U<=x;U++)H=N===2*x?T:Number((w+(U+.5)*K).toFixed(6)),L.push({minValue:J,
maxValue:H,label:P(J,H,e)}),J=H,N++}else if("defined-interval"===t){if(!p)return L;x=K[0];T=K[K.length-1];K=Math.ceil((T-x)/p);J=x;for(w=1;w<K;w++)N=Number((x+w*p).toFixed(6)),L.push({minValue:J,maxValue:N,label:P(J,N,e)}),J=N;L.push({minValue:J,maxValue:T,label:P(J,T,e)})}return L}function P(w,x,t){let e=null;return e=w===x?t&&"percent-of-total"===t?w+"%":w.toString():t&&"percent-of-total"===t?w+"% - "+x+"%":w+" - "+x}function B(w){const x=[],t=[];let e=Number.MIN_VALUE,p=1,L=-1;for(let K=0;K<w.length;K++){const J=
w[K];J===e?(p++,t[L]=p):null!==J&&(x.push(J),e=J,p=1,t.push(p),L++)}return{uniqueValues:x,valueFrequency:t}}function r(w,x,t){var e=w.length;const p=[];t>e&&(t=e);for(var L=0;L<t;L++)p.push(Math.round(L*e/t-1));p.push(e-1);L=A(p,w,x,t);e=L.mean;L=L.sdcm;var K=t,J=0,T=0;let N=0,H=0,U=!0;for(let z=0;2>z&&U;z++){0===z&&(U=!1);for(var g=0;g<K-1;g++)for(;p[g+1]+1!==p[g+2];)if(p[g+1]+=1,J=n(g,p,w,x),N=J.sbMean,J=J.sbSdcm,T=n(g+1,p,w,x),H=T.sbMean,T=T.sbSdcm,J+T<L[g]+L[g+1])L[g]=J,L[g+1]=T,e[g]=N,e[g+1]=
H,U=!0;else{--p[g+1];break}for(g=K-1;0<g;g--)for(;p[g]!==p[g-1]+1;)if(--p[g],J=n(g-1,p,w,x),N=J.sbMean,J=J.sbSdcm,T=n(g,p,w,x),H=T.sbMean,T=T.sbSdcm,J+T<L[g-1]+L[g])L[g-1]=J,L[g]=T,e[g-1]=N,e[g]=H,U=!0;else{p[g]+=1;break}}U&&(L=A(p,w,x,t));return p}function A(w,x,t,e){let p=[];var L=[],K=[];let J=0;const T=[],N=[];for(var H=0;H<e;H++){var U=n(H,w,x,t);T.push(U.sbMean);N.push(U.sbSdcm);J+=N[H]}U=J;for(H=!0;H||J<U;){H=!1;p=[];for(L=0;L<e;L++)p.push(w[L]);for(K=0;K<e;K++)for(U=w[K]+1;U<=w[K+1];U++)if(L=
x[U],0<K&&U!==w[K+1]&&Math.abs(L-T[K])>Math.abs(L-T[K-1]))w[K]=U;else if(K<e-1&&w[K]!==U-1&&Math.abs(L-T[K])>Math.abs(L-T[K+1])){w[K+1]=U-1;break}U=J;J=0;L=[];K=[];for(let g=0;g<e;g++){L.push(T[g]);K.push(N[g]);const z=n(g,w,x,t);T[g]=z.sbMean;N[g]=z.sbSdcm;J+=N[g]}}if(J>U){for(x=0;x<e;x++)w[x]=p[x],T[x]=L[x],N[x]=K[x];J=U}return{mean:T,sdcm:N}}function G(w,x,t,e,p){w=Math.max(e-w,x-e)/p/t;return 1<=w?1:.5<=w?.5:.25}function m(w){let x=0;for(let t=0;t<w.length;t++)x+=w[t];return x/=w.length}function l(w,
x){let t=0;for(let e=0;e<w.length;e++){const p=w[e];t+=(p-x)*(p-x)}t/=w.length;return Math.sqrt(t)}function n(w,x,t,e){var p=0,L=0;for(var K=x[w]+1;K<=x[w+1];K++){const J=e[K];p+=t[K]*J;L+=J}0>=L&&D.warn("Exception in Natural Breaks calculation");p/=L;L=0;for(K=x[w]+1;K<=x[w+1];K++)L+=e[K]*(t[K]-p)**2;return{sbMean:p,sbSdcm:L}}const D=b.getLogger("esri.rest.support.generateRendererUtils");c.createGenerateRendererClassBreaks=function(w){const {normalizationTotal:x}=w;return{classBreaks:I(w),normalizationTotal:x}};
c.createGenerateRendererUniqueValues=function(w){w=B(w);const x=[],t=w.uniqueValues.length;for(let e=0;e<t;e++){const p=w.uniqueValues[e];x.push({value:p,count:w.valueFrequency[e],label:p.toString()})}return{uniqueValues:x}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(b,I,P,B,r,A=!1){return{objectId:b,target:I,distance:P,type:"edge",start:B,end:r,draped:A}};c.makeVertexCandidate=
function(b,I,P){return{objectId:b,target:I,distance:P,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(c,b,I,P,B,r,A){function G(na,ra,Aa){if(na)for(const h of na)(na=(na=B.getDeepValue(h,ra))&&"function"!==typeof na&&Aa.get(na))&&B.setDeepValue(h,na.name,ra)}function m(na,ra){if(!na||
!ra)return[];Ha.clear();l(Ha,na,ra);return Array.from(Ha).sort()}function l(na,ra,Aa){if(Aa)if(ra?.fields?.length)if(Aa.includes("*"))for(const {name:h}of ra.fields)na.add(h);else for(const h of Aa)n(na,ra,h);else if(Aa.includes("*"))na.clear(),na.add("*");else for(const h of Aa)null!=h&&na.add(h)}function n(na,ra,Aa){"string"===typeof Aa&&(ra?(ra=ra.get(Aa))&&na.add(ra.name):na.add(Aa))}async function D(na,ra,Aa){if(Aa){var {arcadeUtils:h}=await A.loadArcade();Aa=h.extractFieldNames(Aa,ra?.fields?.map(y=>
y.name));for(const y of Aa)n(na,ra,y)}}async function w(na,ra,Aa){if(Aa&&"1\x3d1"!==Aa){const h=(await new Promise((y,ea)=>c(["../../core/sql/WhereClause"],y,ea))).WhereClause.create(Aa,ra);if(!h.isStandardized)throw new I("fieldUtils:collectFilterFields","Where clause is not standardized",{where:Aa});l(na,ra,h.fieldNames)}}function x(na,ra){for(const Aa of na)if(Aa&&Aa.valueType&&Aa.valueType===ra)return Aa.name;return null}async function t(na,ra){if(ra){var Aa=ra.elevationInfo?.featureExpressionInfo;
if(Aa)return Aa.collectRequiredFields(na,ra.fieldsIndex)}}async function e(na,ra,Aa){const h=[];Aa?.expressionInfos&&h.push(...Aa.expressionInfos.map(y=>D(na,ra.fieldsIndex,y.expression)));Aa=Aa?.content;if(Array.isArray(Aa))for(const y of Aa)"expression"===y.type&&y.expressionInfo&&h.push(D(na,ra.fieldsIndex,y.expressionInfo.expression));await Promise.all(h)}async function p(na,ra,Aa){ra&&Aa&&(Aa.valueExpression?await D(na,ra.fieldsIndex,Aa.valueExpression):Aa.field&&n(na,ra.fieldsIndex,Aa.field))}
async function L(na,ra){const {labelingInfo:Aa,fieldsIndex:h}=ra;Aa&&Aa.length&&await Promise.all(Aa.map(y=>K(na,h,y)))}async function K(na,ra,Aa){if(Aa){var h=Aa.getLabelExpression();Aa=Aa.where;"arcade"===h.type?await D(na,ra,h.expression):(h=h.expression.match(/{[^}]*}/g))&&h.forEach(y=>{n(na,ra,y.slice(1,-1))});await w(na,ra,Aa)}}function J(na){return"number"===typeof na&&!isNaN(na)&&isFinite(na)}function T(na){return null===na||J(na)}function N(na){return null===na||Ia(na)}function H(na){return null!=
na&&"string"===typeof na}function U(na){return null===na||H(na)}function g(){return!0}function z(na,ra){let Aa;switch(na.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":Aa=na.nullable?N:Ia;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":Aa=na.nullable?T:J;break;case "string":case "esriFieldTypeString":Aa=na.nullable?U:H;break;default:Aa=
g}return 1===arguments.length?Aa:Aa(ra)}function v(na){return null!=na&&Ma.has(na.type)}function f(na,ra){return null==na||na.nullable&&null===ra?null:v(na)&&!q(na.type,Number(ra))?b.NumericRangeValidationError.OUT_OF_RANGE:z(na,ra)?na.domain?r.validateDomainValue(na.domain,ra):null:b.TypeValidationError.INVALID_TYPE}function q(na,ra){na="string"===typeof na?R(na):na;if(!na)return!1;const Aa=na.min,h=na.max;return na.isInteger?Ia(ra)&&ra>=Aa&&ra<=h:ra>=Aa&&ra<=h}function R(na){switch(na){case "esriFieldTypeSmallInteger":case "small-integer":return Wa;
case "esriFieldTypeInteger":case "integer":return Ya;case "esriFieldTypeSingle":case "single":return Ua;case "esriFieldTypeDouble":case "double":return gb}}function M(na,ra,Aa){if(!ra||!ra.attributes||!na){if(P.isSome(Aa))for(var h of na??[])Aa.add(h);return!0}ra=ra.attributes;h=!1;for(const y of na)if(!(y in ra))if(h=!0,P.isSome(Aa))Aa.add(y);else break;return h}const Q=/^([0-9])/,E=/[^a-z0-9_\u0080-\uffff]/gi,C=/_{2,}/g,Y=/^_/,ia=/_$/,ua="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
Ca=["field","normalizationField"],Ha=new Set,Ia=(()=>"isInteger"in Number?Number.isInteger:na=>"number"===typeof na&&isFinite(na)&&Math.floor(na)===na)(),Ja=["integer","small-integer","single","double"],Ma=new Set([...Ja,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);b.NumericRangeValidationError=void 0;(b.NumericRangeValidationError||(b.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";b.TypeValidationError=
void 0;(b.TypeValidationError||(b.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Wa={min:-32768,max:32767,isInteger:!0},Ya={min:-2147483648,max:2147483647,isInteger:!0},Ua={min:-3.4E38,max:1.2E38,isInteger:!1},gb={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};b.collectArcadeFieldNames=D;b.collectElevationFields=t;b.collectFeatureReductionFields=async function(na,ra,Aa){if(ra&&Aa&&"fields"in Aa){var h=[];h.push(e(na,ra,Aa.popupTemplate));Aa.fields&&h.push(...Aa.fields.map(async y=>
{y.onStatisticExpression?D(na,ra.fieldsIndex,y.onStatisticExpression.expression):na.add(y.onStatisticField)}));await Promise.all(h)}};b.collectField=n;b.collectFields=l;b.collectFilterFields=async function(na,ra,Aa){ra&&(ra.timeInfo&&P.isSome(Aa)&&Aa.timeExtent&&l(na,ra.fieldsIndex,[ra.timeInfo.startField,ra.timeInfo.endField]),ra.floorInfo&&l(na,ra.fieldsIndex,[ra.floorInfo.floorField]),P.isSome(Aa)&&P.isSome(Aa.where)&&await w(na,ra.fieldsIndex,Aa.where))};b.collectLabelingFields=L;b.collectOrderByInfos=
async function(na,ra,Aa){ra&&Aa&&await Promise.all(Aa.map(h=>p(na,ra,h)))};b.collectPopupTemplateFields=e;b.doubleRange=gb;b.featureHasFields=function(na,ra){return!M(na,ra,null)};b.fixFields=m;b.fixRendererFields=function(na,ra){if(null!=na&&null!=ra)for(const Aa of Array.isArray(na)?na:[na])if(G(ua,Aa,ra),"visualVariables"in Aa&&Aa.visualVariables)for(const h of Aa.visualVariables)G(Ca,h,ra)};b.fixTimeInfoFields=function(na,ra){if(null!=na&&ra?.fields?.length)if("startField"in na){var Aa=ra.get(na.startField);
ra=ra.get(na.endField);na.startField=Aa?.name??null;na.endField=ra?.name??null}else Aa=ra.get(na.startTimeField),ra=ra.get(na.endTimeField),na.startTimeField=Aa?.name??null,na.endTimeField=ra?.name??null};b.getDisplayFieldName=function({displayField:na,fields:ra}){if(na)return na;if(!ra||!ra.length)return null;if(!(na=x(ra,"name-or-title")||x(ra,"unique-identifier")||x(ra,"type-or-category")))a:{for(const Aa of ra)if(Aa&&Aa.name&&(ra=Aa.name.toLowerCase(),ra.includes("name")||ra.includes("title"))){na=
Aa.name;break a}na=null}return na};b.getElevationFields=async function(na){if(!na)return[];const ra=new Set;await t(ra,na);return Array.from(ra).sort()};b.getExpressionFields=async function(na,ra){const Aa=new Set;for(const h of ra)await D(Aa,na.fieldsIndex,h);return Array.from(Aa).sort()};b.getFeatureEditFields=function(na){if(!na)return[];const ra="editFieldsInfo"in na&&na.editFieldsInfo;return ra?m(na.fieldsIndex,[ra&&ra.creatorField,ra&&ra.creationDateField,ra&&ra.editorField,ra&&ra.editDateField]):
[]};b.getFeatureGeometryFields=function(na){if(!na)return[];const ra=na.geometryFieldsInfo;return ra?m(na.fieldsIndex,[ra.shapeAreaField,ra.shapeLengthField]):[]};b.getFieldDefaultValue=function(na){const ra=na.defaultValue;if(void 0!==ra&&z(na,ra))return ra;if(na.nullable)return null};b.getFieldRange=function(na){const ra=r.getDomainRange(na.domain);if(ra)return ra;if(v(na))return R(na.type)};b.getLabelingFields=async function(na){if(!na)return[];const ra=new Set;await L(ra,na);return Array.from(ra).sort()};
b.getNumericTypeForValue=function(na){if(!J(na))return null;if(Ia(na)){if(na>=Wa.min&&na<=Wa.max)return"esriFieldTypeSmallInteger";if(na>=Ya.min&&na<=Ya.max)return"esriFieldTypeInteger"}return na>=Ua.min&&na<=Ua.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};b.getTimeFields=async function(na){if(!na)return[];const ra="timeInfo"in na&&na.timeInfo;return ra?m(na.fieldsIndex,[na.trackIdField,ra.startField,ra.endField]):[]};b.integerRange=Ya;b.isDateField=function(na){return null!=na&&("date"===na.type||
"esriFieldTypeDate"===na.type)};b.isNumberInRange=q;b.isNumericField=v;b.isRasterPixelValueField=function(na){return na?["raster.itempixelvalue","raster.servicepixelvalue"].some(ra=>na.toLowerCase().startsWith(ra)):!1};b.isStringField=function(na){return null!=na&&("string"===na.type||"esriFieldTypeString"===na.type)};b.isValidFieldValue=function(na,ra){return null===f(na,ra)};b.isValueMatchingFieldType=z;b.normalizeFieldName=function(na){return null==na?null:na.trim().replace(E,"_").replace(C,"_").replace(Y,
"").replace(ia,"").replace(Q,"F$1")||null};b.numericTypes=Ja;b.packFields=function(na,ra,Aa=1){if(!ra||!na)return[];if(ra.includes("*"))return["*"];ra=m(na,ra);return ra.length/na.fields.length>=Aa?["*"]:ra};b.populateMissingFields=M;b.rendererFields=ua;b.sanitizeNullFieldValue=function(na){return null==na||"number"===typeof na&&isNaN(na)?null:na};b.singleRange=Ua;b.smallIntegerRange=Wa;b.unpackFieldNames=function(na,ra){return P.isNone(ra)||P.isNone(na)?[]:ra.includes("*")?(na.fields??[]).map(Aa=>
Aa.name):ra};b.validateFieldValue=f;b.validationErrorToString=function(na,ra,Aa){switch(na){case r.DomainValidationError.INVALID_CODED_VALUE:return`Value ${Aa} is not in the coded domain - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;case r.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${Aa} is out of the range of valid values - field: ${ra.name}, domain: ${JSON.stringify(ra.domain)}`;case b.TypeValidationError.INVALID_TYPE:return`Value ${Aa} is not a valid value for the field type - field: ${ra.name}, type: ${ra.type}, nullable: ${ra.nullable}`;
case b.NumericRangeValidationError.OUT_OF_RANGE:const {min:h,max:y}=R(ra.type);return`Value ${Aa} is out of range for the number type - field: ${ra.name}, type: ${ra.type}, value range is ${h} to ${y}`}};b.visualVariableFields=Ca;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(c){c.DomainValidationError=void 0;(function(b){b.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";b.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(c.DomainValidationError||(c.DomainValidationError={}));c.getDomainRange=function(b){if(b&&"range"===b.type)return{min:"range"in b?b.range[0]:b.minValue,max:"range"in b?b.range[1]:b.maxValue}};c.validateDomainValue=function(b,I){switch(b.type){case "range":const P="range"in b?b.range[0]:b.minValue;b="range"in b?b.range[1]:b.maxValue;if(null!=P&&+I<P||null!=b&&+I>b)return c.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==b.codedValues||
b.codedValues.every(B=>null==B||B.code!==I))return c.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==b.codedValues||b.codedValues.every(B=>null==B||B.code!==I))return c.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(c,b,I,P,B,r,A,G){function m(){n||(n=(async()=>{const w=await new Promise((x,t)=>c(["./arcadeUtils"],x,t));return{arcade:w.arcade,arcadeUtils:w,Dictionary:w.Dictionary,Feature:w.arcadeFeature}})());return n}const l=r.getLogger("esri.support.arcadeOnDemand");let n;P=(w,x,t)=>D.create(w,x,t,null,["$feature","$view"]);let D=function(){function w(t,e,p,L,K,J,T){this.script=t;this.evaluate=L;this.fields=Array.isArray(J)?J:J.fields;this._syntaxTree=p;this._arcade=e;this._arcadeFeature=K;this._spatialReference=
T;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}w.create=async function(t,e,p,L,K,J){const {arcade:T,Feature:N,Dictionary:H}=await m(),U=G.fromJSON(e);let g;try{g=T.parseScript(t,J)}catch(M){return l.error(new B("arcade-bad-expression","Failed to parse arcade script",{script:t,error:M})),null}K=K.reduce((M,Q)=>({...M,[Q]:null}),{});let z=null;A.isSome(L)&&(z=new H(L),z.immutable=!0,K.$config=null);J=
(L=T.scriptUsesGeometryEngine(g))&&T.enableGeometrySupport();const v=T.scriptUsesFeatureSet(g)&&T.enableFeatureSetSupport(),f=(e=T.scriptIsAsync(g))&&T.enableAsyncSupport();K={vars:K,spatialReference:U,useAsync:!!f};await Promise.all([J,v,f]);J=new Set;await T.loadDependentModules(J,g,null,e,L);const q=new H;q.immutable=!1;q.setField("scale",0);const R=T.compileScript(g,K);return new w(t,T,g,M=>{"$view"in M&&M.$view&&(q.setField("scale","object"===typeof M.$view?M.$view.scale:void 0),M.$view=q);z&&
(M.$config=z);return R({vars:M,spatialReference:U})},new N,p,U)};var x=w.prototype;x.repurposeFeature=function(t){t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields});return this._arcadeFeature};x.referencesGeometry=function(){return this._referencesGeometry};x.referencesScale=function(){return this._referencesScale};return I._createClass(w)}();b.ArcadeExpression=
D;b.createDictionaryExpression=(w,x,t,e)=>D.create(w,x,t,e,["$feature","$view"]);b.createLabelExpression=(w,x,t)=>D.create(w,x,t,null,["$feature"]);b.createRendererExpression=P;b.createVVExpression=P;b.loadArcade=m;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D){function w(){return new Promise((L,K)=>c(["../../../geometry/geometryEngineJSON"],L,K))}const x={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var t={esriSpatialRelIntersects:!0,
esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},e={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},p={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};b.canQueryWithRBush=
function(L){if(r.isExtent(L))return!0;if(r.isPolygon(L)){for(const K of L.rings)if(5!==K.length||K[0][0]!==K[1][0]||K[0][0]!==K[4][0]||K[2][0]!==K[3][0]||K[0][1]!==K[3][1]||K[0][1]!==K[4][1]||K[1][1]!==K[2][1])return!1;return!0}return!1};b.checkSpatialQuerySupport=async function(L,K,J){const {spatialRel:T,geometry:N}=L;if(N){if(null==T||!0!==t[T])throw new I("feature-store:unsupported-query","Unsupported query spatial relationship",{query:L});if(A.isValid(N.spatialReference)&&A.isValid(J)){if(null==
N||!0!==e[r.getJsonType(N)])throw new I("feature-store:unsupported-query","Unsupported query geometry type",{query:L});if(null==K||!0!==p[K])throw new I("feature-store:unsupported-query","Unsupported layer geometry type",{query:L});if(L.outSR)return n.checkProjectionSupport(L.geometry&&L.geometry.spatialReference,L.outSR)}}};b.getSpatialQueryOperator=function(L,K,J,T,N){if(r.isPolygon(K)&&"esriGeometryPoint"===J&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L)){const H=m.convertFromPolygon(new l,
K,!1,!1);return Promise.resolve(U=>G.polygonContainsPoint(H,!1,!1,U))}if(r.isPolygon(K)&&"esriGeometryMultipoint"===J){const H=m.convertFromPolygon(new l,K,!1,!1);if("esriSpatialRelContains"===L)return Promise.resolve(U=>G.polygonContainsMultipoint(H,!1,!1,U,T,N))}if(r.isExtent(K)&&"esriGeometryPoint"===J&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L))return Promise.resolve(H=>P.extentContainsPoint(K,D.getGeometry(J,T,N,H)));if(r.isExtent(K)&&"esriGeometryMultipoint"===J&&"esriSpatialRelContains"===
L)return Promise.resolve(H=>P.extentContainsMultipoint(K,D.getGeometry(J,T,N,H)));if(r.isExtent(K)&&"esriSpatialRelIntersects"===L){const H=B.getExtentIntersector(J);return Promise.resolve(U=>H(K,D.getGeometry(J,T,N,U)))}return w().then(H=>{const U=H[x[L]].bind(null,K.spatialReference,K);return g=>U(D.getGeometry(J,T,N,g))})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,b){c.extentIntersectsExtent=
b.extentIntersectsExtent;c.extentIntersectsMultipoint=b.extentIntersectsMultipoint;c.extentIntersectsPoint=b.extentIntersectsPoint;c.extentIntersectsPolygon=b.extentIntersectsPolygon;c.extentIntersectsPolyline=b.extentIntersectsPolyline;c.extentIntersectsRings=b.extentIntersectsRings;c.getFeatureExtentIntersector=b.getFeatureExtentIntersector;c.isSelfIntersecting=b.isSelfIntersecting;c.segmentIntersects=b.segmentIntersects;c.getExtentIntersector=function(I){return"mesh"===I?b.extentIntersectsExtent:
b.getFeatureExtentIntersector(I)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function b(I,P,B,r,A){if(!I)return!1;P=P?B?4:3:B?3:2;const {coords:G,lengths:m}=I;B=!1;I=0;for(const n of m){var l=I;for(let D=I,w=I+n*P;D<w;D+=P){l=D+P;l===w&&(l=I);const x=G[D],t=G[D+1],e=G[l];l=G[l+1];(t<A&&l>=A||l<A&&t>=A)&&x+(A-t)/(l-t)*(e-x)<r&&(B=!B)}I+=n*P}return B}c.polygonContainsCoords=b;c.polygonContainsMultipoint=function(I,
P,B,r,A,G){A=A?G?4:3:G?3:2;const {coords:m,lengths:l}=r;if(!l)return!1;for(let n=0,D=0;n<l.length;n++,D+=A)if(!b(I,P,B,m[D],m[D+1]))return!1;return!0};c.polygonContainsPoint=function(I,P,B,r){return b(I,P,B,r.coords[0],r.coords[1])};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function b(B,r,A,G,m){if(null!=G&&null!=m)return l=>{const n=B.getAttribute(l,r);l=B.getAttribute(l,A);return(null==n||n<=
m)&&(null==l||l>=G)};if(null!=G)return l=>{l=B.getAttribute(l,A);return null==l||l>=G};if(null!=m)return l=>{l=B.getAttribute(l,r);return null==l||l<=m}}function I(B,r,A,G){if(null!=A&&null!=G&&A===G)return m=>B.getAttribute(m,r)===A;if(null!=A&&null!=G)return m=>{m=B.getAttribute(m,r);return m>=A&&m<=G};if(null!=A)return m=>B.getAttribute(m,r)>=A;if(null!=G)return m=>B.getAttribute(m,r)<=G}function P(){return()=>!1}c.getTimeExtent=async function(B,r){if(!B)return null;const A=r.featureAdapter,{startTimeField:G,
endTimeField:m}=B;let l=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;if(G&&m)await r.forEach(D=>{const w=A.getAttribute(D,G);D=A.getAttribute(D,m);null==w||isNaN(w)||(l=Math.min(l,w));null==D||isNaN(D)||(n=Math.max(n,D))});else{const D=G||m;await r.forEach(w=>{w=A.getAttribute(w,D);null==w||isNaN(w)||(l=Math.min(l,w),n=Math.max(n,w))})}return{start:l,end:n}};c.getTimeOperator=function(B,r,A){if(!r||!B)return null;const {startTimeField:G,endTimeField:m}=B;if(!G&&!m)return null;const {start:l,
end:n}=r;return null===l&&null===n?null:void 0===l&&void 0===n?P():G&&m?b(A,G,m,l,n):I(A,G||m,l,n)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(c,b){function I(B){return"oid"===B.type||"esriFieldTypeOID"===B.type}function P(B){return"global-id"===B.type||"esriFieldTypeGlobalID"===B.type}return function(){function B(A=[]){this.fields=[];this._fieldsMap=new Map;
this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(A){this.fields=A;var G=[];for(const m of A){A=m?.name;const l=b.normalizeFieldName(m?.name)?.toLowerCase()??"";if(A&&l){const n=A.trim().toLowerCase();this._fieldsMap.set(A,m);this._fieldsMap.set(n,m);this._normalizedFieldsMap.set(l,m);G.push(n);"date"===m.type||"esriFieldTypeDate"===m.type?(this.dateFields.push(m),this._dateFieldsSet.add(m)):
b.isNumericField(m)&&(this._numericFieldsSet.add(m),this.numericFields.push(m));I(m)||P(m)||(m.editable=null==m.editable||!!m.editable,m.nullable=null==m.nullable||!!m.nullable)}}G.sort();this.uid=G.join(",")}}var r=B.prototype;r.destroy=function(){this._fieldsMap.clear()};r.has=function(A){return null!=this.get(A)};r.get=function(A){if(A){var G=this._fieldsMap.get(A);if(G)return G;(G=this._fieldsMap.get(A.trim().toLowerCase())??this._normalizedFieldsMap.get(b.normalizeFieldName(A)?.toLowerCase()??
""))&&this._fieldsMap.set(A,G);return G}};r.isDateField=function(A){return this._dateFieldsSet.has(this.get(A))};r.isNumericField=function(A){return this._numericFieldsSet.has(this.get(A))};r.normalizeFieldName=function(A){if(A=this.get(A))return A.name??void 0};c._createClass(B,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const A of this.fields)I(A)||P(A)||A.nullable||void 0!==b.getFieldDefaultValue(A)||this._requiredFields.push(A)}return this._requiredFields}}]);
return B}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t){function e(z){return p.has(z)?p.get(z):
"number"===typeof z?z:1}c.Task=void 0;(function(z){z[z.YIELD=1]="YIELD"})(c.Task||(c.Task={}));c.TaskPriority=void 0;(function(z){z.RESOURCE_CONTROLLER_IMMEDIATE="immediate";z.RESOURCE_CONTROLLER="schedule";z.SLIDE="slide";z.STREAM_DATA_LOADER="stream loader";z.ELEVATION_QUERY="elevation query";z.TERRAIN_SURFACE="terrain";z.SURFACE_GEOMETRY_UPDATES="surface geometry updates";z.LOD_RENDERER="LoD renderer";z.GRAPHICS_CORE="Graphics3D";z.I3S_CONTROLLER="I3S";z.POINT_CLOUD_LAYER="point cloud";z.FEATURE_TILE_FETCHER=
"feature fetcher";z.OVERLAY="overlay";z.STAGE="stage";z.GRAPHICS_DECONFLICTOR="graphics deconflictor";z.FILTER_VISIBILITY="Graphics3D filter visibility";z.SCALE_VISIBILITY="Graphics3D scale visibility";z.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";z.POINT_OF_INTEREST_FREQUENT="POI frequent";z.POINT_OF_INTEREST_INFREQUENT="POI infrequent";z.LABELER="labeler";z.FEATURE_QUERY_ENGINE="feature query";z.FEATURE_TILE_TREE="feature tile tree";z.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";z.ELEVATION_ALIGNMENT=
"elevation alignment";z.TEXT_TEXTURE_ATLAS="text texture atlas";z.TEXTURE_UNLOAD="texture unload";z.LINE_OF_SIGHT_TOOL="line of sight tool";z.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";z.ELEVATION_PROFILE="elevation profile";z.SNAPPING="snapping";z.SHADOW_ACCUMULATOR="shadow accumulator";z.CLOUDS_GENERATOR="clouds generator";z[z.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority={}));const p=new Map([[c.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[c.TaskPriority.RESOURCE_CONTROLLER,
4],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.LOD_RENDERER,2],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,
4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.TEXT_TEXTURE_ATLAS,12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,
0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),L=n.Milliseconds(6.5),K=n.Milliseconds(1),J=n.Milliseconds(30),T=n.Milliseconds(1E3/30),N=n.Milliseconds(100);var H;(function(z){let v=function(){function R(){this._updating=new D.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new A("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new q;this._state=t.RenderState.INTERACTING;this._tasks=new G;this._runQueue=new G;this._load=
0;this._idleStateCallbacks=new G;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=l.watch(()=>x.SCHEDULER_LOG_SLOW_TASKS,E=>this._debug=E,l.initial);for(const E of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[E],new A(c.TaskPriority[E]));const Q=this;this._test={FRAME_SAFETY_BUDGET:L,INTERACTING_BUDGET:T,IDLE_BUDGET:N,get availableBudget(){return Q._budget.budget},usedBudget:0,getBudget:()=>Q._budget,setBudget:E=>Q._budget=E,updateTask:E=>this._updateTask(E),
getState:E=>this._getState(E),getRuntime:E=>this._getRuntime(E),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var M=R.prototype;M._updatingChanged=function(){this._updating.set(this._tasks.some(Q=>Q.needsUpdate))};M.destroy=function(){this._tasks.toArray().forEach(Q=>Q.remove());this._tasks.clear();r.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};M.taskRunningChanged=function(Q){this._updatingChanged();
Q&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};M.registerTask=function(Q,E){const C=e(Q);E=new f(this,Q,E,C);this._tasks.push(E);this._updatingChanged();this.performanceInfo.tasks.has(Q)||this.performanceInfo.tasks.set(Q,new A(Q));return E};M.registerIdleStateCallbacks=function(Q,E){const C={idleBegin:Q,idleEnd:E};this._idleStateCallbacks.push(C);
this.state===t.RenderState.IDLE&&this._idleUpdatesStartFired&&C.idleBegin();const Y=this;return{remove:()=>this._removeIdleStateCallbacks(C),set idleBegin(ia){Y._idleUpdatesStartFired&&(C.idleEnd(),Y._state===t.RenderState.IDLE&&ia());C.idleBegin=ia},set idleEnd(ia){C.idleEnd=ia}}};M.updateBudget=function(Q){this._test.usedBudget=0;++this._frameNumber;let E=L,C=Q.frameDuration,Y=K;switch(this.state){case t.RenderState.IDLE:E=n.Milliseconds(0);C=n.Milliseconds(Math.max(N,Q.frameDuration));Y=J;break;
case t.RenderState.INTERACTING:C=n.Milliseconds(Math.max(T,Q.frameDuration))}C=n.Milliseconds(C-Q.elapsedFrameTime-E);if(this.state!==t.RenderState.IDLE&&C<K&&!this._forceTask)return this._forceTask=!0,!1;C=n.Milliseconds(Math.max(C,Y));this._budget.reset(C,this.state);this._updateLoad();return this._schedule()};M.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case t.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(Q=>
Q.idleBegin()));this._runIdle();break;case t.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};M.stopFrame=function(){this._budget.reset(n.Milliseconds(0),this._state);this._budget.madeProgress()};M._removeIdleStateCallbacks=function(Q){this._idleUpdatesStartFired&&Q.idleEnd();this._idleStateCallbacks.removeUnordered(Q)};M.removeTask=function(Q){this._tasks.removeUnordered(Q);this._runQueue.removeUnordered(Q);this._updatingChanged()};
M._updateTask=function(Q){this._tasks.forAll(E=>{E.name===Q&&E.setPriority(Q)})};M._getState=function(Q){if(this._runQueue.some(C=>C.name===Q))return c.TaskState.SCHEDULED;let E=c.TaskState.IDLE;this._tasks.forAll(C=>{C.name===Q&&C.needsUpdate&&(1>=C.schedulePriority?E=c.TaskState.READY:E!==c.TaskState.READY&&(E=c.TaskState.WAITING))});return E};M._getRuntime=function(Q){let E=0;this._tasks.forAll(C=>{C.name===Q&&(E+=C.runtime)});return E};M._resetRuntimes=function(){this._tasks.forAll(Q=>Q.runtime=
0)};M._getRunning=function(){const Q=new Map;this._tasks.forAll(C=>{C.needsUpdate&&Q.set(C.name,(Q.get(C.name)||0)+1)});if(0===Q.size)return null;let E="";Q.forEach((C,Y)=>{E=1<C?E+` ${C}x ${Y}`:E+` ${Y}`});return E};M._runIdle=function(){this._run()};M._runInteracting=function(){this._run()};M._runAnimating=function(){this._run()};M._updateLoad=function(){const Q=this._tasks.reduce((E,C)=>C.needsUpdate?++E:E,0);this._load=.9*this._load+Q*(1-.9)};M._schedule=function(){this._runQueue.filterInPlace(Q=>
{if(Q.needsUpdate)return!0;Q.schedulePriority=Q.basePriority;return!1});for(this._tasks.forAll(Q=>{0===Q.basePriority&&Q.needsUpdate&&!this._runQueue.includes(Q)&&Q.blockFrame!==this._frameNumber&&this._runQueue.unshift(Q)});0===this._runQueue.length;){let Q=!1;this._tasks.forAll(E=>{if(E.needsUpdate&&0!==E.schedulePriority&&0!==E.basePriority&&E.blockFrame!==this._frameNumber)switch(Q=!0,E.schedulePriority){case 1:E.schedulePriority=0;this._runQueue.push(E);break;default:--E.schedulePriority}});
if(!Q)return this._updatingChanged(),!1}this._updatingChanged();return!0};M._run=function(){const Q=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var E=this._budget.now();const C=this._runQueue.pop();this._budget.resetProgress();try{C.task.runTask(this._budget)===c.Task.YIELD&&(C.blockFrame=this._frameNumber)}catch(Y){B.getLogger("esri.views.support.Scheduler").error(`Exception in task "${C.name}"`,Y)}!this._budget.hasProgressed&&C.blockFrame!==this._frameNumber&&
C.needsUpdate&&(C.blockFrame=this._frameNumber);C.schedulePriority=C.basePriority;E=this._budget.now()-E;C.runtime+=E;this._frameTaskTimes.set(C.priority,this._frameTaskTimes.get(C.priority)+E);this._debug&&E>2*this._budget.budget&&console.log("Task",C.name,"used",E,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-Q);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
Q)};M._startFrameTaskTimes=function(){for(const Q of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[Q],0)};M._recordFrameTaskTimes=function(Q){this._frameTaskTimes.forEach((E,C)=>this.performanceInfo.tasks.get(C).record(E));this.performanceInfo.total.record(Q)};b._createClass(R,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(Q){this._state!==Q&&(this._state=
Q,this.state!==t.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(E=>E.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return R}();z.Scheduler=v;let f=function(){function R(Q,E,C,Y){this._scheduler=Q;this.name=E;this._basePriority=Y;this.runtime=this.blockFrame=0;this._queue=new w.PromiseQueue;this._handles=new I;this.schedulePriority=this._basePriority;this._task=new D.ObservableValue(r.isSome(C)?C:this._queue);this._handles.add(l.when(()=>
this.task.running,ia=>Q.taskRunningChanged(ia)))}var M=R.prototype;M.remove=function(){this.processQueue(U);this._scheduler.removeTask(this);this.schedule=g.schedule;this.reschedule=g.reschedule;this._handles.destroy()};M.setPriority=function(Q){this.name=Q;Q=e(Q);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=Q;this._basePriority=Q};M.schedule=function(Q,E,C){return this._queue.push(Q,E,C)};M.reschedule=function(Q,E,C){return this._queue.unshift(Q,E,C)};M.processQueue=
function(Q){this._queue.runTask(Q)};b._createClass(R,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(Q){this.setPriority(Q)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return R}(),q=function(){function R(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=t.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var M=R.prototype;M.run=function(Q){if(this.done)return!1;!0===Q()&&this.madeProgress();return!0};M.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};M.reset=function(Q,E){this._begin=this.now();this._budget=Q;this._state=E;this.resetProgress()};M.now=function(){return performance.now()};M.resetProgress=function(){this._done=this._progressed=!1};b._createClass(R,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(Q){this._enabled=Q}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return R}();z.Budget=q})(H||(H={}));c.TaskState=void 0;
(function(z){z.SCHEDULED="s";z.READY="r";z.WAITING="w";z.IDLE="i"})(c.TaskState||(c.TaskState={}));const U=(()=>{const z=new H.Budget;z.enabled=!1;return z})(),g=new (function(){function z(){}var v=z.prototype;v.remove=function(){};v.processQueue=function(){};v.schedule=function(f,q,R){try{if(m.isAborted(q)){const M=m.createAbortError();return R?Promise.resolve(R(M)):Promise.reject(M)}return m.when(f(U))}catch(M){return Promise.reject(M)}};v.reschedule=function(f,q,R){return this.schedule(f,q,R)};
return b._createClass(z)}());c.ImmediateTask=g;c.getTaskPriority=e;c.newScheduler=function(){return new H.Scheduler};c.noBudget=U;c.taskPriorities=p;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../tracking","./SimpleObservable"],function(c,b,I,P){let B=function(){function r(G){this._observable=new P.SimpleObservable;this._value=G}var A=r.prototype;A.get=
function(){I.trackAccess(this._observable);return this._value};A.set=function(G){G!==this._value&&(this._value=G,this._observable.notify())};return b._createClass(r)}();c.ObservableValue=B;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(c,b,I,P){let B=function(){function A(){this._tasks=[];
this._running=new P.ObservableValue(!1)}var G=A.prototype;G.destroy=function(){this.cancelAll()};G.runTask=function(m){for(;!m.done&&this._process(m);)m.madeProgress()};G.push=function(m,l,n){this._running.set(!0);return new Promise((D,w)=>this._tasks.push(new r(D,w,m,l,n)))};G.unshift=function(m,l,n){this._running.set(!0);return new Promise((D,w)=>this._tasks.unshift(new r(D,w,m,l,n)))};G._process=function(m){if(0===this._tasks.length)return!1;const l=this._tasks.shift();try{const n=I.isAborted(l.signal);
if(n&&!l.abortCallback)l.reject(I.createAbortError());else{const D=n?l.abortCallback?.(I.createAbortError()):l.callback(m);I.isPromiseLike(D)?D.then(l.resolve,l.reject):l.resolve(D)}}catch(n){l.reject(n)}this._running.set(0<this._tasks.length);return!0};G.cancelAll=function(){const m=I.createAbortError();for(const l of this._tasks)if(l.abortCallback){const n=l.abortCallback(m);l.resolve(n)}else l.reject(m);this._tasks.length=0;this._running.set(!1)};b._createClass(A,[{key:"length",get:function(){return this._tasks.length}},
{key:"running",get:function(){return this._running.get()}}]);return A}(),r=b._createClass(function(A,G,m,l,n){this.resolve=A;this.reject=G;this.callback=m;this.signal=l;this.abortCallback=n});c.PromiseQueue=B;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G){I=function(m){function l(){var D=n.apply(this,arguments);D.SCHEDULER_LOG_SLOW_TASKS=!1;D.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return D}c._inherits(l,m);var n=c._createSuper(l);return c._createClass(l)}(I);b.__decorate([P.property()],I.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([P.property()],I.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);I=b.__decorate([G.subclass("esri.views.support.DebugFlags")],I);return new I})},
"esri/views/support/RenderState":function(){define(["exports"],function(c){c.RenderState=void 0;var b=c.RenderState||(c.RenderState={});b[b.ANIMATING=0]="ANIMATING";b[b.INTERACTING=1]="INTERACTING";b[b.IDLE=2]="IDLE";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p,L,K,J){var T;I=new I.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});P=T=function(N){function H(g){g=U.call(this,g);g.dpi=96;g.format=null;g.origin=null;g.minScale=0;g.maxScale=0;g.size=null;g.spatialReference=null;return g}c._inherits(H,N);var U=c._createSuper(H);H.create=
function(g={}){const {resolutionFactor:z=1,scales:v,size:f=256,spatialReference:q=t.WebMercator,numLODs:R=24}=g;if(!p.isValid(q)){g=[];if(v)for(var M=0;M<v.length;M++){var Q=v[M];g.push(new K({level:M,scale:Q,resolution:Q}))}else for(M=5E-4,Q=R-1;0<=Q;Q--)g.unshift(new K({level:Q,scale:M,resolution:M})),M*=2;return new T({dpi:96,lods:g,origin:new x(0,0,q),size:[f,f],spatialReference:q})}M=p.getInfo(q);g=g.origin?new x({x:g.origin.x,y:g.origin.y,spatialReference:q}):M?new x({x:M.origin[0],y:M.origin[1],
spatialReference:q}):new x({x:0,y:0,spatialReference:q});M=1/(39.37*r.getMetersPerUnitForSR(q)*96);Q=[];if(v)for(var E=0;E<v.length;E++){var C=v[E];Q.push(new K({level:E,scale:C,resolution:C*M}))}else{var Y=p.isGeographic(q)?512/f*5.916575275917094E8:256/f*5.91657527591555E8;E=Math.ceil(R/z);Q.push(new K({level:0,scale:Y,resolution:Y*M}));for(C=1;C<E;C++)Y/=2**z,Q.push(new K({level:C,scale:Y,resolution:Y*M}))}return new T({dpi:96,lods:Q,origin:g,size:[f,f],spatialReference:q})};N=H.prototype;N.readOrigin=
function(g,z){return x.fromJSON({spatialReference:z.spatialReference,...g})};N.readSize=function(g,z){return[z.cols,z.rows]};N.writeSize=function(g,z){z.cols=g[0];z.rows=g[1]};N.zoomToScale=function(g){const z=this.scales;if(0>=g)return z[0];if(g>=z.length-1)return z[z.length-1];const v=Math.floor(g);return z[v]/(z[v]/z[v+1])**(g-v)};N.scaleToZoom=function(g){const z=this.scales,v=z.length-1;let f=0;for(;f<v;f++){const q=z[f],R=z[f+1];if(q<=g)break;if(R===g)return f+1;if(q>g&&R<g)return f+Math.log(q/
g)/Math.log(q/R)}return f};N.snapScale=function(g,z=.95){g=this.scaleToZoom(g);return g%Math.floor(g)>=z?this.zoomToScale(Math.ceil(g)):this.zoomToScale(Math.floor(g))};N.tileAt=function(g,z,v,f){var q=this.lodAt(g);if(!q)return null;let R;if("number"===typeof z)R=z,z=v;else{if(p.equals(z.spatialReference,this.spatialReference))R=z.x,z=z.y;else{f=L.project(z,this.spatialReference);if(B.isNone(f))return null;R=f.x;z=f.y}f=v}v=q.resolution*this.size[0];q=q.resolution*this.size[1];f||(f=new J.TileKey(null,
0,0,0,e.create()));f.level=g;f.row=Math.floor((this.origin.y-z)/q+.001);f.col=Math.floor((R-this.origin.x)/v+.001);this.updateTileInfo(f);return f};N.updateTileInfo=function(g,z=T.ExtrapolateOptions.NONE){var v=this.lodAt(g.level);v||z!==T.ExtrapolateOptions.POWER_OF_TWO||(z=this.lods[this.lods.length-1],z.level<g.level&&(v=z));if(v){var f=g.level-v.level;z=v.resolution*this.size[0]/2**f;v=v.resolution*this.size[1]/2**f;g.id=`${g.level}/${g.row}/${g.col}`;g.extent||(g.extent=e.create());g.extent[0]=
this.origin.x+g.col*z;g.extent[1]=this.origin.y-(g.row+1)*v;g.extent[2]=g.extent[0]+z;g.extent[3]=g.extent[1]+v}};N.upsampleTile=function(g){const z=this._upsampleLevels[g.level];if(!z||-1===z.parentLevel)return!1;g.level=z.parentLevel;g.row=Math.floor(g.row/z.factor+.001);g.col=Math.floor(g.col/z.factor+.001);this.updateTileInfo(g);return!0};N.getTileBounds=function(g,z){var v=this.lodAt(z.level);if(null==v)return null;var {resolution:f}=v;v=f*this.size[0];f*=this.size[1];g[0]=this.origin.x+z.col*
v;g[1]=this.origin.y-(z.row+1)*f;g[2]=g[0]+v;g[3]=g[1]+f;return g};N.lodAt=function(g){return this._levelToLOD?.[g]??null};N.clone=function(){return T.fromJSON(this.write({}))};N.getOrCreateCompatible=function(g,z){if(256===this.size[0]&&256===this.size[1])return 256===g?this:null;const v=[],f=this.lods.length;for(let q=0;q<f;q++){const R=this.lods[q];v.push(new K({level:R.level,scale:R.scale,resolution:R.resolution*z}))}return new T({size:[g,g],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,
origin:this.origin,spatialReference:this.spatialReference,lods:v})};N._initializeUpsampleLevels=function(){const g=this.lods;this._upsampleLevels=[];let z=null;for(let v=0;v<g.length;v++){const f=g[v];this._upsampleLevels[f.level]={parentLevel:z?z.level:-1,factor:z?z.resolution/f.resolution:0};z=f}};c._createClass(H,[{key:"isWrappable",get:function(){const {spatialReference:g,origin:z}=this;if(g&&z){const v=p.getInfo(g);return g.isWrappable&&!!v&&Math.abs(v.origin[0]-z.x)<=v.dx}return!1}},{key:"lods",
set:function(g){let z=0,v=0;const f=[],q=this._levelToLOD={};g&&(z=-Infinity,v=Infinity,g.forEach(R=>{f.push(R.scale);z=R.scale>z?R.scale:z;v=R.scale<v?R.scale:v;q[R.level]=R}));this._set("scales",f);this._set("minScale",z);this._set("maxScale",v);this._set("lods",g);this._initializeUpsampleLevels()}}]);return H}(P.JSONSupport);b.__decorate([A.property({type:Number,json:{write:!0}})],P.prototype,"compressionQuality",void 0);b.__decorate([A.property({type:Number,json:{write:!0}})],P.prototype,"dpi",
void 0);b.__decorate([A.property({type:String,json:{read:I.read,write:I.write,origins:{"web-scene":{read:!1,write:!1}}}})],P.prototype,"format",void 0);b.__decorate([A.property({readOnly:!0})],P.prototype,"isWrappable",null);b.__decorate([A.property({type:x,json:{write:!0}})],P.prototype,"origin",void 0);b.__decorate([n.reader("origin")],P.prototype,"readOrigin",null);b.__decorate([A.property({type:[K],value:null,json:{write:!0}})],P.prototype,"lods",null);b.__decorate([A.property({readOnly:!0})],
P.prototype,"minScale",void 0);b.__decorate([A.property({readOnly:!0})],P.prototype,"maxScale",void 0);b.__decorate([A.property({readOnly:!0})],P.prototype,"scales",void 0);b.__decorate([A.property({cast:N=>Array.isArray(N)?N:"number"===typeof N?[N,N]:[256,256]})],P.prototype,"size",void 0);b.__decorate([n.reader("size",["rows","cols"])],P.prototype,"readSize",null);b.__decorate([w.writer("size",{cols:{type:G.Integer},rows:{type:G.Integer}})],P.prototype,"writeSize",null);b.__decorate([A.property({type:t,
json:{write:!0}})],P.prototype,"spatialReference",void 0);P=T=b.__decorate([D.subclass("esri.layers.support.TileInfo")],P);(function(N){N=N.ExtrapolateOptions||(N.ExtrapolateOptions={});N[N.NONE=0]="NONE";N[N.POWER_OF_TWO=1]="POWER_OF_TWO"})(P||(P={}));return P})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G){var m;I=m=function(l){function n(w){w=D.call(this,w);w.cols=null;w.level=0;w.levelValue=null;w.origin=null;w.resolution=0;w.rows=null;w.scale=0;return w}c._inherits(n,l);var D=c._createSuper(n);n.prototype.clone=function(){return new m({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return c._createClass(n)}(I.JSONSupport);b.__decorate([P.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},
"portal-item":{read:!1,write:!1}}}})],I.prototype,"cols",void 0);b.__decorate([P.property({type:B.Integer,json:{write:!0}})],I.prototype,"level",void 0);b.__decorate([P.property({type:String,json:{write:!0}})],I.prototype,"levelValue",void 0);b.__decorate([P.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,"origin",void 0);b.__decorate([P.property({type:Number,json:{write:!0}})],I.prototype,"resolution",void 0);b.__decorate([P.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,"rows",void 0);b.__decorate([P.property({type:Number,json:{write:!0}})],I.prototype,"scale",void 0);return I=m=b.__decorate([G.subclass("esri.layers.support.LOD")],I)})},"esri/layers/support/TileKey":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(c,b){b=b._createClass(function(I,P,B,r,A){this.id=I;this.level=P;this.row=B;this.col=r;this.extent=A});c.TileKey=b;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p,L,K,J,T){var N;const H=new B.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});B=new B.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});r=N=function(U){function g(v){v=z.call(this,v);v.aggregateIds=null;v.cacheHint=void 0;v.compactGeometryEnabled=!1;v.datumTransformation=null;v.defaultSpatialReferenceEnabled=!1;v.distance=void 0;v.dynamicDataSource=void 0;v.formatOf3DObjects=null;v.fullText=null;v.gdbVersion=null;v.geometry=null;v.geometryPrecision=void 0;v.groupByFieldsForStatistics=null;
v.having=null;v.historicMoment=null;v.maxAllowableOffset=void 0;v.maxRecordCountFactor=1;v.multipatchOption=null;v.num=void 0;v.objectIds=null;v.orderByFields=null;v.outFields=null;v.outSpatialReference=null;v.outStatistics=null;v.parameterValues=null;v.pixelSize=null;v.quantizationParameters=null;v.rangeValues=null;v.relationParameter=null;v.resultType=null;v.returnCentroid=!1;v.returnDistinctValues=!1;v.returnExceededLimitFeatures=!0;v.returnGeometry=!1;v.returnQueryGeometry=!1;v.returnM=void 0;
v.returnZ=void 0;v.sourceSpatialReference=null;v.spatialRelationship="intersects";v.start=void 0;v.sqlFormat=null;v.text=null;v.timeExtent=null;v.timeReferenceUnknownClient=!1;v.units=null;v.where=null;return v}c._inherits(g,U);var z=c._createSuper(g);g.from=function(v){return x.ensureClass(N,v)};U=g.prototype;U.castDatumTransformation=function(v){return"number"===typeof v||"object"===typeof v?v:null};U.writeHistoricMoment=function(v,f){f.historicMoment=v&&v.getTime()};U.writeParameterValues=function(v,
f){if(v){const q={};for(const R in v){const M=v[R];Array.isArray(M)?q[R]=M.map(Q=>Q instanceof Date?Q.getTime():Q):q[R]=M instanceof Date?M.getTime():M}f.parameterValues=q}};U.writeStart=function(v,f){f.resultOffset=this.start;f.resultRecordCount=this.num||10;f.where="1\x3d1"};U.writeWhere=function(v,f){f.where=v||"1\x3d1"};U.clone=function(){return new N(A.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:G.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return c._createClass(g)}(r.JSONSupport);
r.MAX_MAX_RECORD_COUNT_FACTOR=5;b.__decorate([m.property({json:{write:!0}})],r.prototype,"aggregateIds",void 0);b.__decorate([m.property({type:Boolean,json:{write:!0}})],r.prototype,"cacheHint",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"compactGeometryEnabled",void 0);b.__decorate([m.property({json:{write:!0}})],r.prototype,"datumTransformation",void 0);b.__decorate([l.cast("datumTransformation")],r.prototype,"castDatumTransformation",null);b.__decorate([m.property({type:Boolean,
json:{default:!1,write:!0}})],r.prototype,"defaultSpatialReferenceEnabled",void 0);b.__decorate([m.property({type:Number,json:{write:{overridePolicy(U){return{enabled:0<U}}}}})],r.prototype,"distance",void 0);b.__decorate([m.property({type:e.DataLayerSource,json:{write:!0}})],r.prototype,"dynamicDataSource",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],r.prototype,"formatOf3DObjects",void 0);b.__decorate([m.property({type:[p],json:{write:{enabled:!0,overridePolicy(){return{enabled:G.isSome(this.fullText)&&
0<this.fullText.length}}}}})],r.prototype,"fullText",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],r.prototype,"gdbVersion",void 0);b.__decorate([m.property({types:I.geometryTypes,json:{read:t.fromJSON,write:!0}})],r.prototype,"geometry",void 0);b.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"geometryPrecision",void 0);b.__decorate([m.property({type:[String],json:{write:!0}})],r.prototype,"groupByFieldsForStatistics",void 0);b.__decorate([m.property({type:String,
json:{write:!0}})],r.prototype,"having",void 0);b.__decorate([m.property({type:Date})],r.prototype,"historicMoment",void 0);b.__decorate([w.writer("historicMoment")],r.prototype,"writeHistoricMoment",null);b.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"maxAllowableOffset",void 0);b.__decorate([m.property({type:Number,cast(U){return 1>U?1:U>N.MAX_MAX_RECORD_COUNT_FACTOR?N.MAX_MAX_RECORD_COUNT_FACTOR:U},json:{write:{overridePolicy(U){return{enabled:1<U}}}}})],r.prototype,"maxRecordCountFactor",
void 0);b.__decorate([m.property({type:["xyFootprint"],json:{write:!0}})],r.prototype,"multipatchOption",void 0);b.__decorate([m.property({type:Number,json:{read:{source:"resultRecordCount"}}})],r.prototype,"num",void 0);b.__decorate([m.property({json:{write:!0}})],r.prototype,"objectIds",void 0);b.__decorate([m.property({type:[String],json:{write:!0}})],r.prototype,"orderByFields",void 0);b.__decorate([m.property({type:[String],json:{write:!0}})],r.prototype,"outFields",void 0);b.__decorate([m.property({type:J,
json:{name:"outSR",write:!0}})],r.prototype,"outSpatialReference",void 0);b.__decorate([m.property({type:[K],json:{write:{enabled:!0,overridePolicy(){return{enabled:G.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],r.prototype,"outStatistics",void 0);b.__decorate([m.property({json:{write:!0}})],r.prototype,"parameterValues",void 0);b.__decorate([w.writer("parameterValues")],r.prototype,"writeParameterValues",null);b.__decorate([m.property({type:T,json:{write:!0}})],r.prototype,"pixelSize",
void 0);b.__decorate([m.property({type:L,json:{write:!0}})],r.prototype,"quantizationParameters",void 0);b.__decorate([m.property({type:[Object],json:{write:!0}})],r.prototype,"rangeValues",void 0);b.__decorate([m.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],r.prototype,"relationParameter",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],r.prototype,"resultType",
void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"returnCentroid",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"returnDistinctValues",void 0);b.__decorate([m.property({type:Boolean,json:{default:!0,write:!0}})],r.prototype,"returnExceededLimitFeatures",void 0);b.__decorate([m.property({type:Boolean,json:{write:!0}})],r.prototype,"returnGeometry",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],
r.prototype,"returnQueryGeometry",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"returnM",void 0);b.__decorate([m.property({type:Boolean,json:{write:{overridePolicy(U){return{enabled:U}}}}})],r.prototype,"returnZ",void 0);b.__decorate([m.property({type:J,json:{write:!0}})],r.prototype,"sourceSpatialReference",void 0);b.__decorate([n.enumeration(H,{ignoreUnknown:!1,name:"spatialRel"})],r.prototype,"spatialRelationship",void 0);b.__decorate([m.property({type:Number,
json:{read:{source:"resultOffset"}}})],r.prototype,"start",void 0);b.__decorate([w.writer("start"),w.writer("num")],r.prototype,"writeStart",null);b.__decorate([m.property({type:String,json:{write:!0}})],r.prototype,"sqlFormat",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],r.prototype,"text",void 0);b.__decorate([m.property({type:P,json:{write:!0}})],r.prototype,"timeExtent",void 0);b.__decorate([m.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"timeReferenceUnknownClient",
void 0);b.__decorate([n.enumeration(B,{ignoreUnknown:!1}),m.property({json:{write:{overridePolicy(U){return{enabled:!!U&&null!=this.distance&&0<this.distance}}}}})],r.prototype,"units",void 0);b.__decorate([m.property({type:String,json:{write:{overridePolicy(U){return{enabled:null!=U||null!=this.start&&0<this.start}}}}})],r.prototype,"where",void 0);b.__decorate([w.writer("where")],r.prototype,"writeWhere",null);return r=N=b.__decorate([D.subclass("esri.rest.support.Query")],r)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/arrayUtils ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D){var w;I=w=function(e){function p(K){K=L.call(this,K);K.end=null;K.start=null;return K}c._inherits(p,e);var L=c._createSuper(p);e=p.prototype;e.readEnd=function(K,J){return null!=J.end?new Date(J.end):null};e.writeEnd=function(K,J){J.end=K?K.getTime():null};e.readStart=function(K,J){return null!=J.start?new Date(J.start):null};e.writeStart=function(K,J){J.start=K?K.getTime():null};e.clone=function(){return new w({end:this.end,start:this.start})};e.equals=function(K){if(!K)return!1;
const J=P.isSome(this.start)?this.start.getTime():this.start,T=P.isSome(this.end)?this.end.getTime():this.end,N=P.isSome(K.start)?K.start.getTime():K.start;K=P.isSome(K.end)?K.end.getTime():K.end;return J===N&&T===K};e.expandTo=function(K){if(this.isEmpty||this.isAllTime)return this.clone();const J=P.applySome(this.start,N=>B.truncateDate(N,K)),T=P.applySome(this.end,N=>{const H=B.truncateDate(N,K);return N.getTime()===H.getTime()?H:B.offsetDate(H,1,K)});return new w({start:J,end:T})};e.intersection=
function(K){if(!K)return this.clone();if(this.isEmpty||K.isEmpty)return w.empty;if(this.isAllTime)return K.clone();if(K.isAllTime)return this.clone();var J=P.mapOr(this.start,-Infinity,g=>g.getTime());const T=P.mapOr(this.end,Infinity,g=>g.getTime()),N=P.mapOr(K.start,-Infinity,g=>g.getTime());K=P.mapOr(K.end,Infinity,g=>g.getTime());let H,U;N>=J&&N<=T?H=N:J>=N&&J<=K&&(H=J);T>=N&&T<=K?U=T:K>=J&&K<=T&&(U=K);return null==H||null==U||isNaN(H)||isNaN(U)?w.empty:(J=new w,J.start=-Infinity===H?null:new Date(H),
J.end=Infinity===U?null:new Date(U),J)};e.offset=function(K,J){if(this.isEmpty||this.isAllTime)return this.clone();const T=new w,{start:N,end:H}=this;P.isSome(N)&&(T.start=B.offsetDate(N,K,J));P.isSome(H)&&(T.end=B.offsetDate(H,K,J));return T};e.union=function(K){if(!K||K.isEmpty)return this.clone();if(this.isEmpty)return K.clone();if(this.isAllTime||K.isAllTime)return x.clone();const J=P.isSome(this.start)&&P.isSome(K.start)?new Date(Math.min(this.start.getTime(),K.start.getTime())):null;K=P.isSome(this.end)&&
P.isSome(K.end)?new Date(Math.max(this.end.getTime(),K.end.getTime())):null;return new w({start:J,end:K})};c._createClass(p,[{key:"isAllTime",get:function(){return this.equals(w.allTime)}},{key:"isEmpty",get:function(){return this.equals(w.empty)}}],[{key:"allTime",get:function(){return x}},{key:"empty",get:function(){return t}}]);return p}(I.JSONSupport);b.__decorate([r.property({type:Date,json:{write:{allowNull:!0}}})],I.prototype,"end",void 0);b.__decorate([l.reader("end")],I.prototype,"readEnd",
null);b.__decorate([D.writer("end")],I.prototype,"writeEnd",null);b.__decorate([r.property({readOnly:!0,json:{read:!1}})],I.prototype,"isAllTime",null);b.__decorate([r.property({readOnly:!0,json:{read:!1}})],I.prototype,"isEmpty",null);b.__decorate([r.property({type:Date,json:{write:{allowNull:!0}}})],I.prototype,"start",void 0);b.__decorate([l.reader("start")],I.prototype,"readStart",null);b.__decorate([D.writer("start")],I.prototype,"writeStart",null);I=w=b.__decorate([n.subclass("esri.TimeExtent")],
I);const x=new I,t=new I({start:void 0,end:void 0});return I})},"esri/core/timeUtils":function(){define(["exports","./has"],function(c,b){function I(r,A,G){return 0===r?0:r*P[A]/P[G]}const P={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},B={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",
setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};c.convertTime=I;c.makeUTCTime=function(r,A,G=
"milliseconds"){A=new Date(I(A,G,"milliseconds"));A.setUTCFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate());return A};c.offsetDate=function(r,A,G){r=new Date(r.getTime());if(A&&G){const {getter:l,setter:n,multiplier:D}=B[G];if("months"===G){G=r.getFullYear();var m=r.getMonth()+A;G=new Date(G,m+1,1);G.setDate(0);G=G.getDate();r.getDate()>G&&r.setDate(G)}r[n](r[l]()+A*D)}return r};c.offsetDateUTC=function(r,A,G="milliseconds"){r=r.getTime();A=I(A,G,"milliseconds");return new Date(r+A)};c.resetUTCDate=
function(r,A){r=new Date(r.getTime());r.setUTCFullYear(A.getFullYear(),A.getMonth(),A.getDate());return r};c.timeSinceUTCMidnight=function(r,A="milliseconds"){const G=I(r.getUTCHours(),"hours","milliseconds"),m=I(r.getUTCMinutes(),"minutes","milliseconds"),l=I(r.getUTCSeconds(),"seconds","milliseconds");r=r.getUTCMilliseconds();return I(G+m+l+r,"milliseconds",A)};c.truncateDate=function(r,A){switch(A){case "milliseconds":return new Date(r.getTime());case "seconds":return new Date(r.getFullYear(),
r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds());case "minutes":return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes());case "hours":return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours());case "days":return new Date(r.getFullYear(),r.getMonth(),r.getDate());case "weeks":return new Date(r.getFullYear(),r.getMonth(),r.getDate()-r.getDay());case "months":return new Date(r.getFullYear(),r.getMonth(),1);case "years":return new Date(r.getFullYear(),
0,1);case "decades":return new Date(r.getFullYear()-r.getFullYear()%10,0,1);case "centuries":return new Date(r.getFullYear()-r.getFullYear()%100,0,1);default:return new Date}};c.truncateLocalTime=function(r){const A=new Date(0);A.setHours(0);A.setMinutes(0);A.setSeconds(0);A.setMilliseconds(0);A.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate());return A};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p){function L(){N||(N=D.createTypeReader({types:K()}));return N}function K(){H||(H={key:"type",base:null,typeMap:{"data-layer":c.DataLayerSource,"map-layer":x.MapLayerSource}});return H}var J,T;P=P.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});c.JoinTableDataSource=J=function(U){function g(v){v=z.call(this,v);v.type="join-table";return v}b._inherits(g,U);var z=b._createSuper(g);U=g.prototype;U.readLeftTableSource=function(v,
f,q){return L()(v,f,q)};U.castLeftTableSource=function(v){return n.ensureOneOfType(K(),v)};U.readRightTableSource=function(v,f,q){return L()(v,f,q)};U.castRightTableSource=function(v){return n.ensureOneOfType(K(),v)};U.clone=function(){const {leftTableKey:v,rightTableKey:f,leftTableSource:q,rightTableSource:R,joinType:M}=this,Q={leftTableKey:v,rightTableKey:f,leftTableSource:q?.clone()??void 0,rightTableSource:R?.clone()??void 0,joinType:M};return new J(Q)};return b._createClass(g)}(B.JSONSupport);
I.__decorate([G.enumeration({joinTable:"join-table"})],c.JoinTableDataSource.prototype,"type",void 0);I.__decorate([r.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableKey",void 0);I.__decorate([r.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableKey",void 0);I.__decorate([r.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableSource",void 0);I.__decorate([m.reader("leftTableSource")],c.JoinTableDataSource.prototype,
"readLeftTableSource",null);I.__decorate([A.cast("leftTableSource")],c.JoinTableDataSource.prototype,"castLeftTableSource",null);I.__decorate([r.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableSource",void 0);I.__decorate([m.reader("rightTableSource")],c.JoinTableDataSource.prototype,"readRightTableSource",null);I.__decorate([A.cast("rightTableSource")],c.JoinTableDataSource.prototype,"castRightTableSource",null);I.__decorate([G.enumeration(P)],c.JoinTableDataSource.prototype,
"joinType",void 0);c.JoinTableDataSource=J=I.__decorate([l.subclass("esri.layers.support.source.JoinTableDataSource")],c.JoinTableDataSource);let N=null,H=null;A={key:"type",base:null,typeMap:{"join-table":c.JoinTableDataSource,"query-table":t.QueryTableDataSource,raster:e.RasterDataSource,table:p.TableDataSource}};c.DataLayerSource=T=function(U){function g(v){v=z.call(this,v);v.type="data-layer";return v}b._inherits(g,U);var z=b._createSuper(g);g.prototype.clone=function(){const {fields:v,dataSource:f}=
this;return new T({fields:v,dataSource:f})};return b._createClass(g)}(B.JSONSupport);I.__decorate([G.enumeration({dataLayer:"data-layer"})],c.DataLayerSource.prototype,"type",void 0);I.__decorate([r.property({type:[w],json:{write:!0}})],c.DataLayerSource.prototype,"fields",void 0);I.__decorate([r.property({types:A,json:{write:!0}})],c.DataLayerSource.prototype,"dataSource",void 0);c.DataLayerSource=T=I.__decorate([l.subclass("esri.layers.support.source.DataLayerSource")],c.DataLayerSource);c.DataLayerSource.from=
n.ensureType(c.DataLayerSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w){var x;const t=new I.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});I=x=function(e){function p(K){K=L.call(this,K);K.alias=
null;K.defaultValue=void 0;K.description=null;K.domain=null;K.editable=!0;K.length=-1;K.name=null;K.nullable=!0;K.type=null;K.valueType=null;K.visible=!0;return K}c._inherits(p,e);var L=c._createSuper(p);e=p.prototype;e.readDescription=function(K,{description:J}){K=null;try{K=J?JSON.parse(J):null}catch(T){}return K?.value??null};e.readValueType=function(K,{description:J}){K=null;try{K=J?JSON.parse(J):null}catch(T){}return K?t.fromJSON(K.fieldValueType):null};e.clone=function(){return new x({alias:this.alias,
defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return c._createClass(p)}(P.JSONSupport);b.__decorate([B.property({type:String,json:{write:!0}})],I.prototype,"alias",void 0);b.__decorate([B.property({type:[String,Number],json:{write:{allowNull:!0}}})],I.prototype,"defaultValue",void 0);b.__decorate([B.property()],
I.prototype,"description",void 0);b.__decorate([l.reader("description")],I.prototype,"readDescription",null);b.__decorate([B.property({types:D.types,json:{read:{reader:D.fromJSON},write:!0}})],I.prototype,"domain",void 0);b.__decorate([B.property({type:Boolean,json:{write:!0}})],I.prototype,"editable",void 0);b.__decorate([B.property({type:r.Integer,json:{write:!0}})],I.prototype,"length",void 0);b.__decorate([B.property({type:String,json:{write:!0}})],I.prototype,"name",void 0);b.__decorate([B.property({type:Boolean,
json:{write:!0}})],I.prototype,"nullable",void 0);b.__decorate([m.enumeration(w.kebabDict)],I.prototype,"type",void 0);b.__decorate([B.property()],I.prototype,"valueType",void 0);b.__decorate([l.reader("valueType",["description"])],I.prototype,"readValueType",null);b.__decorate([B.property({type:Boolean,json:{read:!1}})],I.prototype,"visible",void 0);return I=x=b.__decorate([n.subclass("esri.layers.support.Field")],I)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(c,b,I,P,B,r){b={key:"type",base:P,typeMap:{range:r,"coded-value":I,inherited:B}};c.CodedValueDomain=I;c.DomainBase=P;c.InheritedDomain=B;c.RangeDomain=r;c.fromJSON=function(A){if(!A||!A.type)return null;switch(A.type){case "range":return r.fromJSON(A);case "codedValue":return I.fromJSON(A);case "inherited":return B.fromJSON(A)}return null};c.types=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(c,b,I,P,B,r,A,G,m){var l;B=l=function(n){function D(x){x=w.call(this,x);x.codedValues=null;x.type="coded-value";return x}c._inherits(D,n);var w=c._createSuper(D);n=D.prototype;n.getName=function(x){let t=null;if(this.codedValues){const e=String(x);this.codedValues.some(p=>{String(p.code)===e&&(t=p.name);return!!t})}return t};n.clone=function(){return new l({codedValues:I.clone(this.codedValues),name:this.name})};return c._createClass(D)}(m);b.__decorate([P.property({type:[G.CodedValue],json:{write:!0}})],
B.prototype,"codedValues",void 0);b.__decorate([r.enumeration({codedValue:"coded-value"})],B.prototype,"type",void 0);return B=l=b.__decorate([A.subclass("esri.layers.support.CodedValueDomain")],B)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G,m){var l;c.CodedValue=l=function(n){function D(x){x=w.call(this,x);x.name=null;x.code=null;return x}b._inherits(D,n);var w=b._createSuper(D);D.prototype.clone=function(){return new l({name:this.name,code:this.code})};return b._createClass(D)}(P.JSONSupport);I.__decorate([B.property({type:String,json:{write:!0}})],c.CodedValue.prototype,"name",void 0);I.__decorate([B.property({type:[String,Number],json:{write:!0}})],c.CodedValue.prototype,"code",void 0);c.CodedValue=l=I.__decorate([m.subclass("esri.layers.support.CodedValue")],
c.CodedValue);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(c,b,I,P,B,r,A,G,m,l){I=new I.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});P=function(n){function D(x){x=w.call(this,x);x.name=null;x.type=null;return x}c._inherits(D,n);var w=c._createSuper(D);return c._createClass(D)}(P.JSONSupport);b.__decorate([B.property({type:String,json:{write:!0}})],P.prototype,"name",void 0);b.__decorate([m.enumeration(I)],P.prototype,"type",void 0);return P=b.__decorate([l.subclass("esri.layers.support.Domain")],P)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,b,I,P,B,r,A,G,m,l){var n;I=n=function(D){function w(t){t=x.call(this,t);t.type="inherited";return t}c._inherits(w,D);var x=c._createSuper(w);w.prototype.clone=function(){return new n};return c._createClass(w)}(l);b.__decorate([G.enumeration({inherited:"inherited"})],I.prototype,"type",void 0);return I=n=b.__decorate([m.subclass("esri.layers.support.InheritedDomain")],I)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,b,I,P,B,r,A,G,m){var l;P=l=function(n){function D(x){x=w.call(this,x);x.maxValue=null;x.minValue=null;x.type="range";return x}c._inherits(D,n);var w=c._createSuper(D);D.prototype.clone=function(){return new l({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return c._createClass(D)}(m);b.__decorate([I.property({type:Number,json:{type:[Number],read:{source:"range",reader(n,D){return D.range&&D.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&
null==this.minValue}},target:"range",writer(n,D,w){D[w]=[this.minValue||0,n]}}}})],P.prototype,"maxValue",void 0);b.__decorate([I.property({type:Number,json:{type:[Number],read:{source:"range",reader(n,D){return D.range&&D.range[0]}},write:{target:"range",writer(n,D,w){D[w]=[n,this.maxValue||0]}}}})],P.prototype,"minValue",void 0);b.__decorate([A.enumeration({range:"range"})],P.prototype,"type",void 0);return P=l=b.__decorate([G.subclass("esri.layers.support.RangeDomain")],P)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(c,b){b=new b.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});c.kebabDict=b;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,b,I,P,B,r,A,G,m,l){var n;c.MapLayerSource=n=function(D){function w(t){t=
x.call(this,t);t.type="map-layer";return t}b._inherits(w,D);var x=b._createSuper(w);w.prototype.clone=function(){const {mapLayerId:t,gdbVersion:e}=this;return new n({mapLayerId:t,gdbVersion:e})};return b._createClass(w)}(P.JSONSupport);I.__decorate([m.enumeration({mapLayer:"map-layer"})],c.MapLayerSource.prototype,"type",void 0);I.__decorate([B.property({type:r.Integer,json:{write:!0}})],c.MapLayerSource.prototype,"mapLayerId",void 0);I.__decorate([B.property({type:String,json:{write:!0}})],c.MapLayerSource.prototype,
"gdbVersion",void 0);c.MapLayerSource=n=I.__decorate([l.subclass("esri.layers.support.source.MapLayerSource")],c.MapLayerSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w){var x;c.QueryTableDataSource=x=function(t){function e(L){L=p.call(this,L);L.type="query-table";return L}b._inherits(e,t);var p=b._createSuper(e);e.prototype.clone=function(){const {workspaceId:L,query:K,oidFields:J,spatialReference:T,geometryType:N}=this,H={workspaceId:L,query:K,oidFields:J,spatialReference:T?.clone()??void 0,geometryType:N};return new x(H)};return b._createClass(e)}(B.JSONSupport);I.__decorate([l.enumeration({queryTable:"query-table"})],c.QueryTableDataSource.prototype,
"type",void 0);I.__decorate([r.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"workspaceId",void 0);I.__decorate([r.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"query",void 0);I.__decorate([r.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"oidFields",void 0);I.__decorate([r.property({type:D,json:{write:!0}})],c.QueryTableDataSource.prototype,"spatialReference",void 0);I.__decorate([l.enumeration(w.featureGeometryTypeKebabDictionary)],
c.QueryTableDataSource.prototype,"geometryType",void 0);c.QueryTableDataSource=x=I.__decorate([n.subclass("esri.layers.support.source.QueryTableDataSource")],c.QueryTableDataSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G,m,l){var n;c.RasterDataSource=n=function(D){function w(t){t=x.call(this,t);t.type="raster";return t}b._inherits(w,D);var x=b._createSuper(w);w.prototype.clone=function(){const {workspaceId:t,dataSourceName:e}=this;return new n({workspaceId:t,dataSourceName:e})};return b._createClass(w)}(P.JSONSupport);I.__decorate([m.enumeration({raster:"raster"})],c.RasterDataSource.prototype,"type",void 0);I.__decorate([B.property({type:String,json:{write:!0}})],c.RasterDataSource.prototype,
"dataSourceName",void 0);I.__decorate([B.property({type:String,json:{write:!0}})],c.RasterDataSource.prototype,"workspaceId",void 0);c.RasterDataSource=n=I.__decorate([l.subclass("esri.layers.support.source.RasterDataSource")],c.RasterDataSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G,m,l){var n;c.TableDataSource=n=function(D){function w(t){t=x.call(this,t);t.type="table";return t}b._inherits(w,D);var x=b._createSuper(w);w.prototype.clone=function(){const {workspaceId:t,gdbVersion:e,dataSourceName:p}=this;return new n({workspaceId:t,gdbVersion:e,dataSourceName:p})};return b._createClass(w)}(P.JSONSupport);I.__decorate([m.enumeration({table:"table"})],c.TableDataSource.prototype,"type",void 0);I.__decorate([B.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,
"workspaceId",void 0);I.__decorate([B.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"gdbVersion",void 0);I.__decorate([B.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"dataSourceName",void 0);c.TableDataSource=n=I.__decorate([l.subclass("esri.layers.support.source.TableDataSource")],c.TableDataSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G,m,l){I=function(n){function D(x){x=w.call(this,x);x.onFields=null;x.operator=null;x.searchTerm=null;x.searchType=null;return x}c._inherits(D,n);var w=c._createSuper(D);return c._createClass(D)}(I.ClonableMixin(P.JSONSupport));b.__decorate([r.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:B.isSome(this.onFields)&&0<this.onFields.length}}}}})],I.prototype,"onFields",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],I.prototype,
"operator",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],I.prototype,"searchTerm",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],I.prototype,"searchType",void 0);return I=b.__decorate([l.subclass("esri.rest.support.FullTextSearch")],I)})},"esri/core/Clonable":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n){B=D=>{D=function(w){function x(){return t.apply(this,arguments)}b._inherits(x,w);var t=b._createSuper(x);x.prototype.clone=function(){var e=G.unwrapOrThrow(l.getProperties(this),"unable to clone instance of non-accessor class"),p=e.metadatas;const L=e.store,K={};e=new Map;for(var J in p){var T=p[J];const N=L?.originOf(J),H=T.clonable;if(T.readOnly||!1===H||N!==m.OriginId.USER&&N!==m.OriginId.DEFAULTS&&N!==m.OriginId.WEB_MAP&&N!==m.OriginId.WEB_SCENE)continue;T=this[J];
let U=null;U="function"===typeof H?H(T):"reference"===H?T:r.tryClone(T);if(null==T||null!=U)N===m.OriginId.DEFAULTS?e.set(J,U):K[J]=U}p=new (Object.getPrototypeOf(this).constructor)(K);if(e.size&&(J=l.getProperties(p)?.store))for(const [N,H]of e)J.set(N,H,m.OriginId.DEFAULTS);return p};return b._createClass(x)}(D);return D=I.__decorate([n.subclass("esri.core.Clonable")],D)};c.Clonable=function(D){function w(){return x.apply(this,arguments)}b._inherits(w,D);var x=b._createSuper(w);return b._createClass(w)}(B(P));
c.Clonable=I.__decorate([n.subclass("esri.core.Clonable")],c.Clonable);c.ClonableMixin=B;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(c,b,I,P,B,r,A,G,m,l){var n;I=new P.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});B=n=function(D){function w(t){t=x.call(this,t);t.extent=null;t.mode="view";t.originPosition="upper-left";t.tolerance=1;return t}c._inherits(w,D);var x=c._createSuper(w);w.prototype.clone=function(){return new n(r.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return c._createClass(w)}(B.JSONSupport);b.__decorate([A.property({type:l,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],B.prototype,"extent",void 0);b.__decorate([A.property({type:["view","edit"],json:{write:!0}})],B.prototype,"mode",void 0);b.__decorate([A.property({type:String,json:{read:I.read,write:I.write}})],B.prototype,"originPosition",void 0);b.__decorate([A.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],B.prototype,"tolerance",void 0);return B=n=b.__decorate([m.subclass("esri.rest.support.QuantizationParameters")],B)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(c,b,I,P,B,r,A,G,m){var l;I=new I.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});P=l=function(n){function D(x){x=w.call(this,x);x.maxPointCount=void 0;x.maxRecordCount=void 0;x.maxVertexCount=void 0;x.onStatisticField=null;
x.outStatisticFieldName=null;x.statisticType=null;x.statisticParameters=null;return x}c._inherits(D,n);var w=c._createSuper(D);n=D.prototype;n.writeStatisticParameters=function(x,t){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)t.statisticParameters=B.clone(x)};n.clone=function(){return new l({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
statisticType:this.statisticType,statisticParameters:B.clone(this.statisticParameters)})};return c._createClass(D)}(P.JSONSupport);b.__decorate([r.property({type:Number,json:{write:!0}})],P.prototype,"maxPointCount",void 0);b.__decorate([r.property({type:Number,json:{write:!0}})],P.prototype,"maxRecordCount",void 0);b.__decorate([r.property({type:Number,json:{write:!0}})],P.prototype,"maxVertexCount",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],P.prototype,"onStatisticField",void 0);
b.__decorate([r.property({type:String,json:{write:!0}})],P.prototype,"outStatisticFieldName",void 0);b.__decorate([r.property({type:String,json:{read:{source:"statisticType",reader:I.read},write:{target:"statisticType",writer:I.write}}})],P.prototype,"statisticType",void 0);b.__decorate([r.property({type:Object})],P.prototype,"statisticParameters",void 0);b.__decorate([m.writer("statisticParameters")],P.prototype,"writeStatisticParameters",null);return P=l=b.__decorate([G.subclass("esri.rest.support.StatisticDefinition")],
P)})},"esri/symbols/support/ElevationInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./FeatureExpressionInfo ./unitConversionUtils".split(" "),function(c,
b,I,P,B,r,A,G,m,l,n,D,w,x){var t;A=I.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});I=new I.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});P=t=function(e){function p(K){K=L.call(this,K);K.offset=null;return K}c._inherits(p,e);var L=c._createSuper(p);e=p.prototype;e.readFeatureExpressionInfo=function(K,J){if(null!=K)return K;if(J.featureExpression&&
0===J.featureExpression.value)return{expression:"0"}};e.writeFeatureExpressionInfo=function(K,J,T,N){J[T]=K.write({},N);"0"===K.expression&&(J.featureExpression={value:0})};e.write=function(K,J){return this.offset||this.mode||this.featureExpressionInfo||this.unit?c._get(c._getPrototypeOf(p.prototype),"write",this).call(this,K,J):null};e.clone=function(){return new t({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};
e.equals=function(K){return this.mode===K.mode&&this.offset===K.offset&&this.unit===K.unit&&B.equalsMaybe(this.featureExpressionInfo,K.featureExpressionInfo)};c._createClass(p,[{key:"mode",get:function(){const {offset:K,featureExpressionInfo:J}=this;return this._isOverridden("mode")?this._get("mode"):B.isSome(K)||J?"relative-to-ground":"on-the-ground"},set:function(K){this._override("mode",K)}},{key:"unit",set:function(K){this._set("unit",K)}}]);return p}(P.JSONSupport);b.__decorate([r.property({type:w,
json:{write:!0}})],P.prototype,"featureExpressionInfo",void 0);b.__decorate([l.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],P.prototype,"readFeatureExpressionInfo",null);b.__decorate([D.writer("featureExpressionInfo",{featureExpressionInfo:{type:w},"featureExpression.value":{type:[0]}})],P.prototype,"writeFeatureExpressionInfo",null);b.__decorate([r.property({type:A.apiValues,nonNullable:!0,json:{type:A.jsonValues,read:A.read,write:{writer:A.write,isRequired:!0}}})],
P.prototype,"mode",null);b.__decorate([r.property({type:Number,json:{write:!0}})],P.prototype,"offset",void 0);b.__decorate([r.property({type:x.supportedUnits,json:{type:String,read:I.read,write:I.write}})],P.prototype,"unit",null);return P=t=b.__decorate([n.subclass("esri.layers.support.ElevationInfo")],P)})},"esri/symbols/support/FeatureExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldUtils".split(" "),
function(c,b,I,P,B,r,A,G,m){var l;I=l=function(n){function D(x){return w.call(this,x)}c._inherits(D,n);var w=c._createSuper(D);n=D.prototype;n.collectRequiredFields=async function(x,t){return m.collectArcadeFieldNames(x,t,this.expression)};n.clone=function(){return new l({expression:this.expression,title:this.title})};n.equals=function(x){return this.expression===x.expression&&this.title===x.title};return c._createClass(D)}(I.JSONSupport);b.__decorate([P.property({type:String,json:{write:!0}})],I.prototype,
"expression",void 0);b.__decorate([P.property({type:String,json:{write:!0}})],I.prototype,"title",void 0);return I=l=b.__decorate([G.subclass("esri.layers.support.FeatureExpressionInfo")],I)})},"esri/symbols/support/unitConversionUtils":function(){define(["exports","../../renderers/support/lengthUtils"],function(c,b){const I=function(){const P=Object.keys(b.meterIn);P.sort();return P}();c.getMetersPerUnit=function(P){return 1/(b.meterIn[P]||1)};c.supportedUnits=I;c.supportsUnit=function(P){return!!P&&
null!=b.meterIn[P]};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(c,b,I){b={inches:b.convertUnit(1,"meters","inches"),feet:b.convertUnit(1,"meters","feet"),"us-feet":b.convertUnit(1,"meters","us-feet"),yards:b.convertUnit(1,"meters","yards"),miles:b.convertUnit(1,"meters","miles"),"nautical-miles":b.convertUnit(1,"meters","nautical-miles"),millimeters:b.convertUnit(1,
"meters","millimeters"),centimeters:b.convertUnit(1,"meters","centimeters"),decimeters:b.convertUnit(1,"meters","decimeters"),meters:b.convertUnit(1,"meters","meters"),kilometers:b.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/b.lengthToDegrees(1,"meters",I.earth.radius)};c.meterIn=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/LRUCache ../../../../core/MapUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/unitUtils ../../../../symbols/support/unitConversionUtils".split(" "),
function(c,b,I,P,B,r,A,G,m){function l(t,{x:e,y:p,z:L}){return`${t}-${e}-${p}-${L??0}}`}function n(){return[]}let D=function(){function t(){}var e=t.prototype;e.alignCandidates=async function(p,L){return p};e.notifyElevationSourceChange=function(){};return b._createClass(t)}(),w=function(){function t(p,L,K){this._elevationInfo=p;this._alignPointsInFeatures=L;this.spatialReference=K;this._alignmentsCache=new P(1024);this._cacheVersion=0;this._metersPerVerticalUnit=G.getMetersPerVerticalUnitForSR(K)}
var e=t.prototype;e.alignCandidates=async function(p,L){const K=this._elevationInfo;return r.isSome(K)&&"absolute-height"===K.mode&&!K.featureExpressionInfo?(this._alignAbsoluteElevationCandidates(p,K),p):this._alignComputedElevationCandidates(p,L)};e.notifyElevationSourceChange=function(){this._alignmentsCache.clear();this._cacheVersion++};e._alignAbsoluteElevationCandidates=function(p,L){const {offset:K,unit:J}=L;if(!r.isNone(K)){L=m.getMetersPerUnit(J??"meters")/this._metersPerVerticalUnit;L*=
K;for(const T of p)switch(T.type){case "edge":T.start.z+=L;T.end.z+=L;continue;case "vertex":T.target.z+=L}}};e._alignComputedElevationCandidates=async function(p,L){var K=new Map;for(const g of p)B.getOrCreateMapValue(K,g.objectId,n).push(g);const [J,T,N]=this._prepareQuery(K);K=await this._alignPointsInFeatures(J,L);A.throwIfAborted(L);if(N!==this._cacheVersion)return this._alignComputedElevationCandidates(p,L);this._applyCacheAndResponse(J,K,T);const {drapedObjectIds:H,failedObjectIds:U}=K;L=[];
for(const g of p)({objectId:p}=g),H.has(p)&&"edge"===g.type&&(g.draped=!0),U.has(p)||L.push(g);return L};e._prepareQuery=function(p){const L=[],K=[];for(const [J,T]of p){p=[];for(const N of T)this._addToQueriesOrCachedResult(J,N.target,p,K),"edge"===N.type&&(this._addToQueriesOrCachedResult(J,N.start,p,K),this._addToQueriesOrCachedResult(J,N.end,p,K));0!==p.length&&L.push({objectId:J,points:p})}return[L,K,this._cacheVersion]};e._addToQueriesOrCachedResult=function(p,L,K,J){p=l(p,L);p=this._alignmentsCache.get(p);
r.isSome(p)?J.push(new x(L,p)):K.push(L)};e._applyCacheAndResponse=function(p,{elevations:L,drapedObjectIds:K,failedObjectIds:J},T){for(var N of T)N.apply();T=0;N=this._alignmentsCache;for(const {objectId:H,points:U}of p)if(J.has(H))T+=U.length;else{p=!K.has(H);for(const g of U){const z=l(H,g),v=L[T++];g.z=v;p&&N.put(z,v,1)}}};return b._createClass(t)}(),x=function(){function t(e,p){this.point=e;this.z=p}t.prototype.apply=function(){this.point.z=this.z};return b._createClass(t)}();c.getSnappingCandidateElevationAligner=
function(t=!1,e){if(t){const {elevationInfo:p,alignPointsInFeatures:L,spatialReference:K}=e;return new w(p,L,K)}return new D};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(c,b){return function(){function I(B,r){this._storage=new b.MemCacheStorage;this._storage.maxSize=B;r&&this._storage.registerRemoveFunc("",r)}var P=I.prototype;P.put=function(B,r,A){this._storage.put(B,r,A,1)};P.pop=
function(B){return this._storage.pop(B)};P.get=function(B){return this._storage.get(B)};P.clear=function(){this._storage.clearAll()};P.destroy=function(){this._storage.destroy()};c._createClass(I,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(B){this._storage.maxSize=B}}]);return I}()})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationFilter":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has"],function(c,
b,I){function P(l){return 1>=l.distance}function B(l,n,{x:D,y:w,z:x}){const {start:t,end:e,target:p}=l;if(!l.draped){const J=e.x-t.x;var L=e.y-t.y,K=e.z-t.z;const T=Math.min(1,Math.max(0,((n.x-t.x)*J+(n.y-t.y)*L+K*(n.z-t.z))/(J*J+L*L+K*K)));L=t.y+L*T;K=t.z+K*T;p.x=t.x+J*T;p.y=L;p.z=K}D=(n.x-p.x)/D;w=(n.y-p.y)/w;n=(n.z-p.z)/x;l.distance=Math.sqrt(D*D+w*w+n*n)}function r(l,n,{x:D,y:w,z:x}){const {target:t}=l;D=(n.x-t.x)/D;w=(n.y-t.y)/w;n=(n.z-t.z)/x;l.distance=Math.sqrt(D*D+w*w+n*n)}function A(l,n){return l.distance-
n.distance}let G=function(){function l(){}var n=l.prototype;n.filter=function(D,w){return w};n.notifyElevationSourceChange=function(){};return b._createClass(l)}(),m=function(){function l(){}var n=l.prototype;n.filter=function(D,w){const {point:x,distance:t}=D;({z:D}=x);if(null==D||0===w.length)return w;D="number"===typeof t?{x:t,y:t,z:t}:t;w=this._updateCandidatesTo3D(w,x,D).filter(P);w.sort(A);return w};n._updateCandidatesTo3D=function(D,w,x){for(const t of D)switch(t.type){case "edge":B(t,w,x);
continue;case "vertex":r(t,w,x)}return D};return b._createClass(l)}();c.getSnappingCandidateElevationFilter=function(l=!1){return l?new m:new G};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/symbologySnappingCandidates":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/lang ../../../../core/LRUCache ../../../../core/promiseUtils ../../../../core/string".split(" "),function(c,
b,I,P,B,r,A){function G(n){switch(n.type){case "vertex":const {objectId:D,target:w}=n;return A.numericHash(`${D}-vertex-${w.x}-${w.y}-${w.z??0}`).toString();case "edge":const {objectId:x,start:t,end:e}=n;return A.numericHash(`${x}-edge-${t.x}-${t.y}-${t.z??0}-to-${e.x}-${e.y}-${e.z??0}`).toString();default:return""}}let m=function(){function n(){}var D=n.prototype;D.fetch=async function(){return[]};D.notifySymbologyChange=function(){};return b._createClass(n)}(),l=function(){function n(w){this._getSymbologyCandidates=
w;this._candidatesCache=new B(1024);this._cacheVersion=0}var D=n.prototype;D.fetch=async function(w,x){if(0===w.length)return[];const t=[],e=[],p=this._candidatesCache;for(var L of w){var K=G(L),J=p.get(K);if(J)for(var T of J)e.push(P.clone(T));else t.push(L),p.put(K,[],1)}if(0===t.length)return e;L=this._cacheVersion;const {candidates:N,sourceCandidateIndices:H}=await this._getSymbologyCandidates(t,x);r.throwIfAborted(x);if(L!==this._cacheVersion)return this.fetch(w,x);w=[];({length:x}=N);for(L=
0;L<x;++L)K=N[L],J=G(t[H[L]]),T=p.get(J),T.push(K),p.put(J,T,T.length),w.push(P.clone(K));return e.concat(w)};D.notifySymbologyChange=function(){this._candidatesCache.clear();this._cacheVersion++};return b._createClass(n)}();c.getSymbologySnappingCandidatesFetcher=function(n=!1,D){return n?new l(D):new m};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/asyncUtils ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/arcgisLayerUrl ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p,L,K,J,T,N,H,U){c.FeatureServiceTiledFetcher=function(g){function z(f){f=v.call(this,f);f.tilesOfInterest=[];f.availability=0;f._pendingTiles=new Map;f._pendingEdits=new B.AsyncSequence;f._pendingEditsAbortController=new AbortController;return f}b._inherits(z,g);var v=b._createSuper(z);g=z.prototype;g.initialize=function(){this._initializeFetchExtent();this.updatingHandles.add(()=>this._configuration,()=>this.refresh());this.updatingHandles.add(()=>this.tilesOfInterest,
(f,q)=>{P.equals(f,q,({id:R},{id:M})=>R===M)||this._process()},D.sync)};g.destroy=function(){this._pendingTiles.forEach(f=>this._deletePendingTile(f));this._pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this._pendingEditsAbortController.abort();this._pendingEditsAbortController=null};g.refresh=function(){this.store.refresh();this._pendingTiles.forEach(f=>this._deletePendingTile(f));this._process()};g.applyEdits=function(f){this._pendingEdits.push(f,async q=>{if(0!==q.addedFeatures.length||
0!==q.updatedFeatures.length||0!==q.deletedFeatures.length){for(const [,R]of this._pendingTiles)R.reset();q={...q,deletedFeatures:q.deletedFeatures.map(({objectId:R,globalId:M})=>R&&-1!==R?R:this._lookupObjectIdByGlobalId(M))};await this.updatingHandles.addPromise(this.store.processEdits(q,(R,M)=>this._queryFeaturesById(R,M),this._pendingEditsAbortController.signal));this._processPendingTiles()}})};g._initializeFetchExtent=function(){if(this.capabilities.query.supportsExtent&&J.isHostedAgolService(this.url)){var f=
r.createTask(async q=>{try{const R=await N.executeQueryForExtent(this.url,new H({where:"1\x3d1",outSpatialReference:this.spatialReference,cacheHint:this.capabilities.query.supportsCacheHint??void 0}),{query:this._configuration.customParameters,signal:q});this.store.extent=p.fromJSON(R.data?.extent)}catch(R){n.throwIfAbortError(R),m.getLogger(this.declaredClass).warn("Failed to fetch data extent",R)}});this.updatingHandles.addPromise(f.promise.then(()=>this._process()));this.handles.add(G.makeHandle(()=>
f.abort()))}};g._process=function(){this._markTilesNotAlive();this._createPendingTiles();this._deletePendingTiles();this._processPendingTiles()};g._markTilesNotAlive=function(){for(const [,f]of this._pendingTiles)f.alive=!1};g._createPendingTiles=function(){var f=this._collectMissingTilesInfo();this._setAvailability(l.isNone(f)?1:f.coveredArea/f.fullArea);if(!l.isNone(f))for(const {data:q,resolution:R}of f.missingTiles)(f=this._pendingTiles.get(q.id))?(f.resolution=R,f.alive=!0):this._createPendingTile(q,
R)};g._collectMissingTilesInfo=function(){let f=null;for(let q=this.tilesOfInterest.length-1;0<=q;q--){const R=this.store.process(this.tilesOfInterest[q],(M,Q)=>this._verifyTileComplexity(M,Q));l.isNone(f)?f=R:f.prepend(R)}return f};g._deletePendingTiles=function(){for(const [,f]of this._pendingTiles)f.alive||this._deletePendingTile(f)};g._processPendingTiles=function(){const f={fetchCount:(q,R)=>this._fetchCount(q,R),fetchFeatures:(q,R,M)=>this._fetchFeatures(q,R,M),finish:(q,R)=>this._finishPendingTile(q,
R),resume:()=>this._processPendingTiles()};if(this._ensureFetchAllCounts(f))for(const [,q]of this._pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(q.data),q.resolution)&&this.updatingHandles.addPromise(q.process(f))};g._verifyTileComplexity=function(f,q){return this._verifyVertexComplexity(f)&&this._verifyFeatureDensity(f,q)};g._verifyVertexComplexity=function(f){return 1E6>f*this._minimumVerticesPerFeature};g._verifyFeatureDensity=function(f,q){if(l.isNone(this.tileInfo))return!1;
q*=this.tileSize;return 1>25/(q*q)*f};g._ensureFetchAllCounts=function(f){let q=!0;for(const [,R]of this._pendingTiles)R.state.type<U.StateType.FETCHED_COUNT&&this.updatingHandles.addPromise(R.process(f)),R.state.type<=U.StateType.FETCH_COUNT&&(q=!1);return q};g._finishPendingTile=function(f,q){this.store.add(f.data,q);this._deletePendingTile(f);this._updateAvailability()};g._updateAvailability=function(){const f=this._collectMissingTilesInfo();this._setAvailability(l.isNone(f)?1:f.coveredArea/f.fullArea)};
g._setAvailability=function(f){this._set("availability",f)};g._createPendingTile=function(f,q){q=new U.PendingFeatureTile(f,q);this._pendingTiles.set(f.id,q);return q};g._deletePendingTile=function(f){f.reset();this._pendingTiles.delete(f.data.id)};g._fetchCount=async function(f,q){return this.store.fetchCount(f.data,this.url,this._createCountQuery(f),{query:this.customParameters,timeout:6E5,signal:q})};g._fetchFeatures=async function(f,q,R){let M=0;const Q=[];let E=0,C=q;for(;;){const Y=this._createFeaturesQuery(f),
ia=this._setPagingParameters(Y,M,C),{features:ua,exceededTransferLimit:Ca}=await this._queryFeatures(Y,R);ia&&(M+=l.unwrap(Y.num));E+=ua.length;for(const Ha of ua)Q.push(Ha);C=q-E;if(!ia||!Ca||0>=C)return Q}};g._filterProperties=function(f){return l.isNone(f)?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:f.where||"1\x3d1",timeExtent:f.timeExtent,gdbVersion:f.gdbVersion}};g._lookupObjectIdByGlobalId=function(f){const q=this.globalIdField,R=this.objectIdField;if(l.isNone(q))throw Error("Expected globalIdField to be defined");
let M=null;this.store.featureStore.forEach(Q=>{f===Q.attributes[q]&&(M=Q.objectId??Q.attributes[R])});if(l.isNone(M))throw Error(`Expected to find a feature with globalId ${f}`);return M};g._queryFeaturesById=function(f,q){const R=this._createFeaturesQuery();R.objectIds=f;return this._queryFeatures(R,q)};g._queryFeatures=function(f,q){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(f,q):this._queryFeaturesJSON(f,q)};g._queryFeaturesPBF=async function(f,q){const {sourceSpatialReference:R}=
this;({data:f}=await N.executeQueryPBF(this.url,f,new T.OptimizedFeatureSetParserContext({sourceSpatialReference:R}),{query:this._configuration.customParameters,timeout:6E5,signal:q}));return K.unquantizeOptimizedFeatureSet(f)};g._queryFeaturesJSON=async function(f,q){const {sourceSpatialReference:R}=this;({data:f}=await N.executeQuery(this.url,f,R,{query:this._configuration.customParameters,timeout:6E5,signal:q}));return K.convertFromFeatureSet(f,this.objectIdField)};g._createCountQuery=function(f){f=
this._createBaseQuery(f);this.capabilities.query.supportsCacheHint&&(f.cacheHint=!0);return f};g._createFeaturesQuery=function(f=null){const q=this._createBaseQuery(f);q.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];q.returnGeometry=!0;l.isSome(f)&&(this.capabilities.query.supportsResultType?q.resultType="tile":this.capabilities.query.supportsCacheHint&&(q.cacheHint=!0));return q};g._createBaseQuery=function(f){f=new H({returnZ:this.hasZ,returnM:!1,geometry:l.isSome(this.tileInfo)&&
l.isSome(f)?L.toExtent(f.data.extent,this.tileInfo.spatialReference):void 0});const q=this._configuration.filter;l.isSome(q)&&(f.where=q.where,f.gdbVersion=q.gdbVersion,f.timeExtent=q.timeExtent);f.outSpatialReference=this.spatialReference;return f};g._setPagingParameters=function(f,q,R){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:M,supportsCacheHint:Q,tileMaxRecordCount:E,maxRecordCount:C,supportsResultType:Y}=this.capabilities.query,ia=M?H.MAX_MAX_RECORD_COUNT_FACTOR:
1,ua=ia*((Y||Q)&&E?E:C||2E3);f.start=q;M?(f.maxRecordCountFactor=Math.min(ia,Math.ceil(R/ua)),f.num=Math.min(R,f.maxRecordCountFactor*ua)):f.num=Math.min(R,ua);return!0};b._createClass(z,[{key:"_minimumVerticesPerFeature",get:function(){switch(this.store?.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(f){const q=this._get("filter");f=this._filterProperties(f);
JSON.stringify(q)!==JSON.stringify(f)&&this._set("filter",f)}},{key:"customParameters",set:function(f){const q=this._get("customParameters");JSON.stringify(q)!==JSON.stringify(f)&&this._set("customParameters",f)}},{key:"_configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(f){const q=this._get("tileInfo");q===f||l.isSome(f)&&l.isSome(q)&&JSON.stringify(f)===JSON.stringify(q)||(this._set("tileInfo",
f),this.store.tileInfo=f)}},{key:"tileSize",set:function(f){this._get("tileSize")!==f&&this._set("tileSize",f)}},{key:"updating",get:function(){return this.updatingExcludingEdits||this._pendingEdits.updating}},{key:"updatingExcludingEdits",get:function(){return this.updatingHandles.updating}},{key:"hasZ",get:function(){return this.store.featureStore.hasZ}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this._pendingTiles.values()).map(f=>
f.debugInfo),storedTiles:this.store.debugInfo}}}]);return z}(A.HandleOwner);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"url",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);
I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"sourceSpatialReference",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"store",void 0);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"_minimumVerticesPerFeature",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,
"filter",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"customParameters",null);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"_configuration",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"tileInfo",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"tileSize",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);I.__decorate([w.property({readOnly:!0})],
c.FeatureServiceTiledFetcher.prototype,"updating",null);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"updatingExcludingEdits",null);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"availability",void 0);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"hasZ",null);c.FeatureServiceTiledFetcher=I.__decorate([e.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],
c.FeatureServiceTiledFetcher);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,b,I,P,B,r){c.AsyncSequence=function(A){function G(){var l=m.apply(this,arguments);l.updating=!1;l._pending=[];return l}b._inherits(G,A);var m=b._createSuper(G);A=G.prototype;A.push=function(l,
n){this._pending.push({promise:l,callback:n});1===this._pending.length&&this._process()};A._process=function(){if(this._pending.length){this.updating=!0;var l=this._pending[0];l.promise.then(n=>l.callback(n)).catch(()=>{}).then(()=>{this._pending.shift();this._process()})}else this.updating=!1};return b._createClass(G)}(P);I.__decorate([B.property()],c.AsyncSequence.prototype,"updating",void 0);c.AsyncSequence=I.__decorate([r.subclass("esri.core.AsyncSequence")],c.AsyncSequence);Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,b,I,P,B,r,A,G){function m(x){return{ok:!0,value:x}}function l(x){return{ok:!1,error:x}}function n(x){return B.isSome(x)&&!0===x.ok?x.value:null}function D(x){return B.isSome(x)&&!1===x.ok?x.error:null}let w=function(x){function t(p,
L){var K=e.call(this,{});K._result=null;K._abortHandle=null;K.abort=()=>{K._abortController=B.abortMaybe(K._abortController)};K.remove=K.abort;K._abortController=new AbortController;const {signal:J}=K._abortController;K.promise=p(J);K.promise.then(T=>{K._result=m(T);K._cleanup()},T=>{K._result=l(T);K._cleanup()});K._abortHandle=r.onAbort(L,K.abort);return K}b._inherits(t,x);var e=b._createSuper(t);x=t.prototype;x.normalizeCtorArgs=function(){return{}};x.destroy=function(){this.abort()};x._cleanup=
function(){this._abortHandle=B.removeMaybe(this._abortHandle);this._abortController=null};b._createClass(t,[{key:"value",get:function(){return n(this._result)}},{key:"error",get:function(){return D(this._result)}},{key:"finished",get:function(){return B.isSome(this._result)}}]);return t}(P);I.__decorate([A.property()],w.prototype,"value",null);I.__decorate([A.property()],w.prototype,"error",null);I.__decorate([A.property()],w.prototype,"finished",null);I.__decorate([A.property()],w.prototype,"promise",
void 0);I.__decorate([A.property()],w.prototype,"_result",void 0);w=I.__decorate([G.subclass("esri.core.asyncUtils.ReactiveTask")],w);c.assertResult=function(x){if(!0===x.ok)return x.value;throw x.error;};c.createTask=function(x,t){return new w(x,t)};c.forEach=function(x,t,e){return r.eachAlways(x.map((p,L)=>t.apply(e,[p,L])))};c.makeResultError=l;c.makeResultOk=m;c.map=async function(x,t,e){return(await r.eachAlways(x.map((p,L)=>t.apply(e,[p,L])))).map(p=>p.value)};c.result=async function(x){if(B.isNone(x))return{ok:!1,
error:Error("no promise provided")};try{return m(await x)}catch(t){return l(t)}};c.resultError=D;c.resultOrAbort=async function(x){try{return m(await x)}catch(t){return r.throwIfAbortError(t),l(t)}};c.resultValue=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./support/WatchUpdatingTracking".split(" "),
function(c,b,I,P,B,r,A,G){const m=l=>{l=function(n){function D(){var x=w.apply(this,arguments);x._handles=new B;x._updatingHandles=new G.WatchUpdatingTracking;return x}b._inherits(D,n);var w=b._createSuper(D);D.prototype.destroy=function(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())};b._createClass(D,[{key:"handles",get:function(){return this._handles}},{key:"updatingHandles",get:function(){return this._updatingHandles}}]);return D}(l);I.__decorate([r.property({readOnly:!0})],
l.prototype,"handles",null);I.__decorate([r.property({readOnly:!0})],l.prototype,"updatingHandles",null);return l=I.__decorate([A.subclass("esri.core.HandleOwner")],l)};c.HandleOwner=function(l){function n(){return D.apply(this,arguments)}b._inherits(n,l);var D=b._createSuper(n);return b._createClass(n)}(m(P));c.HandleOwner=I.__decorate([A.subclass("esri.core.HandleOwner")],c.HandleOwner);c.HandleOwnerMixin=m;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports",
"../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(c,b,I,P){function B(w){if(b.isNone(w))return null;w=I.urlToObject(w);w=w.path.match(l)||w.path.match(n);if(!w)return null;const [,x,t,e,p]=w;w=t.indexOf("/");return{title:A(-1!==w?t.slice(w+1):t),serverType:G[e.toLowerCase()],sublayer:null!=p&&""!==p?parseInt(p,10):null,url:{path:x}}}function r(w){return(w=I.urlToObject(w).path.match(D))?{serviceUrl:w[1],sublayerId:Number(w[2])}:null}function A(w){w=w.replace(/\s*[/_]+\s*/g,
" ");return w[0].toUpperCase()+w.slice(1)}const G={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},m=Object.values(G),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${m.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),n=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${m.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),D=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;
c.cleanTitle=A;c.isArcGISUrl=function(w){return!!l.test(w)};c.isHostedAgolService=function(w){if(!w)return!1;w=w.toLowerCase();const x=w.includes(".arcgis.com/");w=w.includes("//services")||w.includes("//tiles")||w.includes("//features");return x&&w};c.isServerOrServicesAGOLUrl=function(w){if(!w)return!1;w=(new I.Url(I.makeAbsolute(w))).authority?.toLowerCase();return"server.arcgisonline.com"===w||"services.arcgisonline.com"===w};c.isWmsServer=function(w){if(!w)return!1;var x=w.toLowerCase();w=x.includes("/services/");
const t=x.includes("/mapserver/wmsserver"),e=x.includes("/imageserver/wmsserver");x=x.includes("/wmsserver");return w&&(t||e||x)};c.parse=B;c.parseNonStandardSublayerUrl=r;c.sanitizeUrl=function(w,x){return w?I.removeTrailingSlash(I.removeQueryParameters(w,x)):w};c.sanitizeUrlWithLayerId=function(w){let {url:x}=w;if(!x)return{url:x};x=I.removeQueryParameters(x,w.logger);const t=I.urlToObject(x),e=B(t.path);let p=void 0;b.isSome(e)?(null!=e.sublayer&&null==w.layer.layerId&&(p=e.sublayer),x=e.url.path):
w.nonStandardUrlAllowed&&(w=r(t.path),b.isSome(w)&&(x=w.serviceUrl,p=w.sublayerId));return{url:I.removeTrailingSlash(x),layerId:p}};c.serverTypes=m;c.titleFromUrlAndName=function(w,x){const t=[];w&&(w=B(w),b.isSome(w)&&w.title&&t.push(w.title));x&&(x=A(x),t.push(x));if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")};c.writeUrlWithLayerId=function(w,x,t,e,p){P.write(x,e,"url",p);e.url&&
null!=w.layerId&&(e.url=I.join(e.url,t,w.layerId.toString()))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(c,b,I){function P(t,e){var p=e&&e.url&&e.url.path;t&&p&&(t=I.makeAbsolute(t,p,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths&&(p=I.makeRelative(t,e.portalItem.itemUrl),null!=p&&w.test(p)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(p).path)));
return n(t,e&&e.portal)}function B(t,e,p=c.MarkKeep.YES){if(null==t)return t;!I.isAbsolute(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let L=I.makeAbsolute(t);if(e){var K=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(K){K=n(K,e.portal);const J=n(L,e.portal);L=I.makeRelative(J,K,K);null!=L&&L!==J&&L!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(L)}}L=l(L,e?.portal);I.isAbsolute(L)&&(L=I.normalize(L));e?.resources&&e?.portalItem&&
!I.isAbsolute(L)&&!I.isDataProtocol(L)&&p===c.MarkKeep.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(L),compress:!1});return L}function r(t,e,p){return P(t,p)}function A(t,e,p,L){t=B(t,L);void 0!==t&&(e[p]=t)}function G(t){return(t?.match(D)??null)?.[1]??null}function m(t){t=t?.match(D)??null;if(null==t)return null;t=t[2];const e=t.lastIndexOf("/");if(-1===e){const {path:K,extension:J}=I.splitPathExtension(t);return{prefix:null,filename:K,extension:b.unwrap(J)}}const {path:p,
extension:L}=I.splitPathExtension(t.slice(e+1));return{prefix:t.slice(0,e),filename:p,extension:b.unwrap(L)}}function l(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?I.changeDomain(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function n(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const p=`${e.urlKey}.${e.customBaseUrl}`,L=I.getAppUrl();return I.hasSameOrigin(L,`${L.scheme}://${p}`)?I.changeDomain(t,e.portalHostname,p):I.changeDomain(t,p,e.portalHostname)}const D=
/\/items\/([^\/]+)\/resources\/(.*)/,w=/^\.\/resources\//;c.MarkKeep=void 0;(function(t){t[t.YES=0]="YES";t[t.NO=1]="NO"})(c.MarkKeep||(c.MarkKeep={}));const x=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return c.MarkKeep},ensureMainOnlineDomain:l,fromJSON:P,itemIdFromResourceUrl:G,prefixAndFilenameFromResourceUrl:m,read:r,toJSON:B,write:A},Symbol.toStringTag,{value:"Module"}));c.ensureMainOnlineDomain=l;c.fromJSON=P;c.itemIdFromResourceUrl=G;c.persistableUrlUtils=x;c.prefixAndFilenameFromResourceUrl=
m;c.read=r;c.toJSON=B;c.write=A})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),function(c,b,I,P,B,r,A){const G=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let m=function(){function l(D){this._options=
D;this.geometryTypes=G;this._vertexDimension=this._coordinatePtr=0}var n=l.prototype;n.createFeatureResult=function(){return new r};n.prepareFeatures=function(D){this._vertexDimension=2;D.hasZ&&this._vertexDimension++;D.hasM&&this._vertexDimension++};n.finishFeatureResult=function(D){if(D&&D.features&&D.hasZ&&this._options.sourceSpatialReference&&D.spatialReference&&!P.equals(D.spatialReference,this._options.sourceSpatialReference)&&!D.spatialReference.vcsWkid){var w=I.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),
x=I.getMetersPerVerticalUnitForSR(D.spatialReference);w/=x;if(1!==w)for(const t of D.features)if(B.hasGeometry(t))for(D=t.geometry.coords,x=2;x<D.length;x+=3)D[x]*=w}};n.addFeature=function(D,w){D.features.push(w)};n.createFeature=function(){return new B.OptimizedFeature};n.createSpatialReference=function(){return{wkid:0}};n.createGeometry=function(){return new A};n.addField=function(D,w){D.fields.push(w)};n.allocateCoordinates=function(D){D.coords.length=D.lengths.reduce((w,x)=>w+x,0)*this._vertexDimension;
this._coordinatePtr=0};n.addCoordinate=function(D,w){D.coords[this._coordinatePtr++]=w};n.addCoordinatePoint=function(D,w){D.coords.push(w)};n.addLength=function(D,w){D.lengths.push(w)};n.addQueryGeometry=function(D,w){D.queryGeometry=w.queryGeometry;D.queryGeometryType=w.queryGeometryType};n.createPointGeometry=function(){return new A};return b._createClass(l)}();c.OPTIMIZED_GEOMETRY_TYPES=G;c.OptimizedFeatureSetParserContext=m;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/query":function(){define("exports ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),
function(c,b,I,P,B,r,A,G,m){function l(x,t){if(t&&"extent"===x.type)return`${x.xmin},${x.ymin},${x.xmax},${x.ymax}`;if(t&&"point"===x.type)return`${x.x},${x.y}`;x=x.toJSON();delete x.spatialReference;return JSON.stringify(x)}function n(x,t){const e=x.geometry,p=x.toJSON();delete p.compactGeometryEnabled;delete p.defaultSpatialReferenceEnabled;let L,K,J;I.isSome(e)&&(K=e.spatialReference,J=e.spatialReference.wkid||JSON.stringify(e.spatialReference),p.geometryType=B.getJsonType(e),p.geometry=l(e,x.compactGeometryEnabled),
p.inSR=J);p.groupByFieldsForStatistics&&(p.groupByFieldsForStatistics=p.groupByFieldsForStatistics.join(","));p.objectIds&&(p.objectIds=p.objectIds.join(","));p.orderByFields&&(p.orderByFields=p.orderByFields.join(","));!p.outFields||!p.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete p.outFields:p.outFields.includes("*")?p.outFields="*":p.outFields=p.outFields.join(",");p.outSR?(p.outSR=p.outSR.wkid||JSON.stringify(p.outSR),L=x.outSpatialReference):e&&(p.returnGeometry||
p.returnCentroid)&&(p.outSR=p.inSR,L=K);p.returnGeometry&&delete p.returnGeometry;p.outStatistics&&(p.outStatistics=JSON.stringify(p.outStatistics));p.fullText&&(p.fullText=JSON.stringify(p.fullText));p.pixelSize&&(p.pixelSize=JSON.stringify(p.pixelSize));p.quantizationParameters&&(x.defaultSpatialReferenceEnabled&&I.isSome(K)&&I.isSome(x.quantizationParameters)&&I.isSome(x.quantizationParameters.extent)&&K.equals(x.quantizationParameters.extent.spatialReference)&&delete p.quantizationParameters.extent.spatialReference,
p.quantizationParameters=JSON.stringify(p.quantizationParameters));p.parameterValues&&(p.parameterValues=JSON.stringify(p.parameterValues));p.rangeValues&&(p.rangeValues=JSON.stringify(p.rangeValues));p.dynamicDataSource&&(p.layer=JSON.stringify({source:p.dynamicDataSource}),delete p.dynamicDataSource);if(p.timeExtent){const {start:T,end:N}=p.timeExtent;if(null!=T||null!=N)p.time=T===N?T:`${null==T?"null":T},${null==N?"null":N}`;delete p.timeExtent}x.defaultSpatialReferenceEnabled&&I.isSome(K)&&I.isSome(L)&&
K.equals(L)&&(p.defaultSR=p.inSR,delete p.inSR,delete p.outSR);return p}function D(x,t,e){return w(x,t,"pbf",e)}function w(x,t,e,p={},L={}){const K="string"===typeof x?P.urlToObject(x):x;x=t.geometry?[t.geometry]:[];p.responseType="pbf"===e?"array-buffer":"json";return r.normalizeCentralMeridian(x,null,p).then(J=>{J=J&&J[0];I.isSome(J)&&(t=t.clone(),t.geometry=J);J=A.mapParameters({...K.query,f:e,...L,...n(t,L)});return b(P.join(K.path,"query"),{...p,query:{...J,...p.query}})})}c.encodeGeometry=l;
c.executeQuery=async function(x,t,e,p){x=I.isSome(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await w(x,t,"json",p);m.applyFeatureSetZUnitScaling(t,e,x.data);return x};c.executeQueryForCount=function(x,t,e){return I.isSome(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):w(x,t,"json",e,{returnIdsOnly:!0,returnCountOnly:!0})};c.executeQueryForExtent=function(x,t,e){return I.isSome(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):w(x,
t,"json",e,{returnExtentOnly:!0,returnCountOnly:!0}).then(p=>{const L=p.data;if(L.hasOwnProperty("extent"))return p;if(L.features)throw Error("Layer does not support extent calculation.");if(L.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return p})};c.executeQueryForIds=function(x,t,e){return I.isSome(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):w(x,t,"json",e,{returnIdsOnly:!0})};c.executeQueryPBF=async function(x,t,e,p){if(I.isSome(t.timeExtent)&&
t.timeExtent.isEmpty)return{data:e.createFeatureResult()};x=await D(x,t,p);x.data=G.parsePBFFeatureQuery(x.data,e);return x};c.executeQueryPBFBuffer=D;c.queryToQueryStringParameters=n;c.runQuery=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/urlUtils":function(){define(["exports"],function(c){function b(I){const P={};for(const B in I){if("declaredClass"===B)continue;const r=I[B];if(null!=r&&"function"!==typeof r)if(Array.isArray(r)){P[B]=[];for(let A=0;A<r.length;A++)P[B][A]=
b(r[A])}else"object"===typeof r?r.toJSON&&(P[B]=JSON.stringify(r)):P[B]=r}return P}c.mapParameters=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(c,b){c.parsePBFFeatureQuery=function(I,P){var B=b.parseFeatureQuery(I,P);I=B.queryResult.featureResult;P=B.queryResult.queryGeometry;B=B.queryResult.queryGeometryType;if(I&&I.features&&I.features.length&&I.objectIdFieldName){const r=
I.objectIdFieldName;for(const A of I.features)A.attributes&&(A.objectId=A.attributes[r])}I&&(I.queryGeometry=P,I.queryGeometryType=B);return I};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),function(c,b,I,P,B,r){function A(g){return g>=N.length?null:N[g]}function G(g,
z,v){g=g.asUnsafe();for(v=z.createPointGeometry(v);g.next();)switch(g.tag()){case 3:var f=g.getUInt32();f=g.pos()+f;let q=0;for(;g.pos()<f;)z.addCoordinatePoint(v,g.getSInt64(),q++);break;default:g.skip()}return v}function m(g,z,v){g=g.asUnsafe();const f=z.createGeometry(v);for(v=2+(v.hasZ?1:0)+(v.hasM?1:0);g.next();)switch(g.tag()){case 2:var q=g.getUInt32();q=g.pos()+q;for(var R=0;g.pos()<q;)z.addLength(f,g.getUInt32(),R++);break;case 3:q=g.getUInt32();q=g.pos()+q;R=0;for(z.allocateCoordinates(f);g.pos()<
q;)z.addCoordinate(f,g.getSInt64(),R),R++,R===v&&(R=0);break;default:g.skip()}return f}function l(g){g=g.asUnsafe();const z=new B;let v="esriGeometryPoint";for(;g.next();)switch(g.tag()){case 2:var f=g.getUInt32();for(f=g.pos()+f;g.pos()<f;)z.lengths.push(g.getUInt32());break;case 3:f=g.getUInt32();for(f=g.pos()+f;g.pos()<f;)z.coords.push(g.getSInt64());break;case 1:v=r.OPTIMIZED_GEOMETRY_TYPES[g.getEnum()];break;default:g.skip()}return{queryGeometry:z,queryGeometryType:v}}function n(g){for(g=g.asUnsafe();g.next();)switch(g.tag()){case 1:return g.getString();
case 2:return g.getFloat();case 3:return g.getDouble();case 4:return g.getSInt32();case 5:return g.getUInt32();case 6:return g.getInt64();case 7:return g.getUInt64();case 8:return g.getSInt64();case 9:return g.getBool();default:return g.skip(),null}return null}function D(g){g=g.asUnsafe();const z={type:A(0)};for(;g.next();)switch(g.tag()){case 1:z.name=g.getString();break;case 2:z.type=A(g.getEnum());break;case 3:z.alias=g.getString();break;case 4:var v=g.getEnum();v=v>=H.length?null:H[v];z.sqlType=
v;break;case 5:g.skip();break;case 6:z.defaultValue=g.getString();break;default:g.skip()}return z}function w(g){const z={};for(g=g.asUnsafe();g.next();)switch(g.tag()){case 1:z.name=g.getString();break;case 2:z.isSystemMaintained=g.getBool();break;default:g.skip()}return z}function x(g,z,v,f){const q=z.createFeature(v);let R=0;for(;g.next();)switch(g.tag()){case 1:const M=f[R++].name;q.attributes[M]=g.processMessage(n);break;case 2:q.geometry=g.processMessageWithArgs(m,z,v);break;case 4:q.centroid=
g.processMessageWithArgs(G,z,v);break;default:g.skip()}return q}function t(g){const z=[1,1,1,1];for(g=g.asUnsafe();g.next();)switch(g.tag()){case 1:z[0]=g.getDouble();break;case 2:z[1]=g.getDouble();break;case 4:z[2]=g.getDouble();break;case 3:z[3]=g.getDouble();break;default:g.skip()}return z}function e(g){const z=[0,0,0,0];for(g=g.asUnsafe();g.next();)switch(g.tag()){case 1:z[0]=g.getDouble();break;case 2:z[1]=g.getDouble();break;case 4:z[2]=g.getDouble();break;case 3:z[3]=g.getDouble();break;default:g.skip()}return z}
function p(g){const z={originPosition:0>=U.length?null:U[0]};for(g=g.asUnsafe();g.next();)switch(g.tag()){case 1:var v=g.getEnum();z.originPosition=v>=U.length?null:U[v];break;case 2:z.scale=g.processMessage(t);break;case 3:z.translate=g.processMessage(e);break;default:g.skip()}return z}function L(g){const z={};for(g=g.asUnsafe();g.next();)switch(g.tag()){case 1:z.shapeAreaFieldName=g.getString();break;case 2:z.shapeLengthFieldName=g.getString();break;case 3:z.units=g.getString();break;default:g.skip()}return z}
function K(g,z){for(z=z.createSpatialReference();g.next();)switch(g.tag()){case 1:z.wkid=g.getUInt32();break;case 5:z.wkt=g.getString();break;case 2:z.latestWkid=g.getUInt32();break;case 3:z.vcsWkid=g.getUInt32();break;case 4:z.latestVcsWkid=g.getUInt32();break;default:g.skip()}return z}function J(g,z){const v=z.createFeatureResult();g=g.asUnsafe();v.geometryType=0>=z.geometryTypes.length?null:z.geometryTypes[0];let f=!1;for(;g.next();)switch(g.tag()){case 1:v.objectIdFieldName=g.getString();break;
case 3:v.globalIdFieldName=g.getString();break;case 4:v.geohashFieldName=g.getString();break;case 5:v.geometryProperties=g.processMessage(L);break;case 7:var q=g.getEnum();v.geometryType=q>=z.geometryTypes.length?null:z.geometryTypes[q];break;case 8:v.spatialReference=g.processMessageWithArgs(K,z);break;case 10:v.hasZ=g.getBool();break;case 11:v.hasM=g.getBool();break;case 12:v.transform=g.processMessage(p);break;case 9:q=g.getBool();v.exceededTransferLimit=q;break;case 13:z.addField(v,g.processMessage(D));
break;case 15:f||(z.prepareFeatures(v),f=!0);z.addFeature(v,g.processMessageWithArgs(x,z,v,v.fields));break;case 2:v.uniqueIdField=g.processMessage(w);break;default:g.skip()}z.finishFeatureResult(v);return v}function T(g,z){const v={};let f=null;for(;g.next();)switch(g.tag()){case 4:f=g.processMessageWithArgs(l);break;case 1:v.featureResult=g.processMessageWithArgs(J,z);break;default:g.skip()}I.isSome(f)&&v.featureResult&&z.addQueryGeometry(v,f);return v}const N="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
H="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),U=["upperLeft","lowerLeft"];c.parseFeatureQuery=function(g,z){try{const v=new P(new Uint8Array(g),new DataView(g));
for(g={};v.next();)switch(v.tag()){case 2:g.queryResult=v.processMessageWithArgs(T,z);break;default:v.skip()}return g}catch(v){throw new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:v});}};c.parseFieldType=A;c.parseTransform=p;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","../../../core/maybe","../../../geometry/support/zscale"],function(c,b,I){c.applyFeatureSetZUnitScaling=function(P,
B,r){if(r&&r.features&&r.hasZ&&(P=I.getGeometryZScaler(r.geometryType,B,P.outSpatialReference),!b.isNone(P)))for(const A of r.features)P(A.geometry)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/asyncUtils","../../../../../core/maybe","../../../../../geometry/support/aaBoundingRect"],function(c,
b,I,P,B){let r=function(){function G(l,n){this.data=l;this.resolution=n;this.state={type:c.StateType.CREATED};this.alive=!0}var m=G.prototype;m.process=function(l){switch(this.state.type){case c.StateType.CREATED:return this.state=this._gotoFetchCount(this.state,l),this.state.task.promise.then(l.resume,l.resume);case c.StateType.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,l),this.state.task.promise.then(l.resume,l.resume);case c.StateType.FETCHED_FEATURES:this.state=this._goToDone(this.state,
l)}return null};m._gotoFetchCount=function(l,n){return{type:c.StateType.FETCH_COUNT,previous:l,task:I.createTask(async D=>{D=await I.resultOrAbort(n.fetchCount(this,D));this.state.type===c.StateType.FETCH_COUNT&&(this.state=this._gotoFetchedCount(this.state,D.ok?D.value:Infinity))})}};m._gotoFetchedCount=function(l,n){return{type:c.StateType.FETCHED_COUNT,featureCount:n,previous:l}};m._gotoFetchFeatures=function(l,n){return{type:c.StateType.FETCH_FEATURES,previous:l,task:I.createTask(async D=>{D=
await I.resultOrAbort(n.fetchFeatures(this,l.featureCount,D));this.state.type===c.StateType.FETCH_FEATURES&&(this.state=this._gotoFetchedFeatures(this.state,D.ok?D.value:[]))})}};m._gotoFetchedFeatures=function(l,n){return{type:c.StateType.FETCHED_FEATURES,previous:l,features:n}};m._goToDone=function(l,n){n.finish(this,l.features);return{type:c.StateType.DONE,previous:l}};m.reset=function(){const l=this.state;this.state={type:c.StateType.CREATED};switch(l.type){case c.StateType.FETCH_COUNT:case c.StateType.FETCH_FEATURES:l.task.abort()}};
m.intersects=function(l){if(P.isNone(l)||!this.data.extent)return!0;B.fromExtent(l,A);return B.intersects(this.data.extent,A)};b._createClass(G,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this._featureCount,state:this._stateToString}}},{key:"_featureCount",get:function(){switch(this.state.type){case c.StateType.CREATED:case c.StateType.FETCH_COUNT:return 0;case c.StateType.FETCHED_COUNT:return this.state.featureCount;case c.StateType.FETCH_FEATURES:return this.state.previous.featureCount;
case c.StateType.FETCHED_FEATURES:return this.state.features.length;case c.StateType.DONE:return this.state.previous.features.length}}},{key:"_stateToString",get:function(){switch(this.state.type){case c.StateType.CREATED:return"created";case c.StateType.FETCH_COUNT:return"fetch-count";case c.StateType.FETCHED_COUNT:return"fetched-count";case c.StateType.FETCH_FEATURES:return"fetch-features";case c.StateType.FETCHED_FEATURES:return"fetched-features";case c.StateType.DONE:return"done"}}}]);return G}();
c.StateType=void 0;(function(G){G[G.CREATED=0]="CREATED";G[G.FETCH_COUNT=1]="FETCH_COUNT";G[G.FETCHED_COUNT=2]="FETCHED_COUNT";G[G.FETCH_FEATURES=3]="FETCH_FEATURES";G[G.FETCHED_FEATURES=4]="FETCHED_FEATURES";G[G.DONE=5]="DONE"})(c.StateType||(c.StateType={}));const A=B.create();c.PendingFeatureTile=r;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../layers/support/TileInfo ../../../../../layers/support/TileKey ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(c,b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p,L){function K(g){return g.reduce((z,v)=>{var f=v.geometry;if(r.isNone(f))f=0;else{var q=B.estimateFixedArraySize(f.lengths,4);f=32+B.estimateFixedArraySize(f.coords,8)+q}v=32+f+B.estimateAttributesObjectSize(v.attributes);return z+v},0)}c.FeatureServiceTileStore=function(g){function z(f){f=v.call(this,f);f.tileInfo=null;f.extent=null;f.maximumByteSize=10*B.ByteSizeUnit.MEGABYTES;f._tileBounds=new x.BoundsStore;f._tiles=new L.FeatureServiceTileCache;f._refCounts=
new Map;f._tileFeatureCounts=new Map;f._tmpBoundingRect=D.create();return f}b._inherits(z,g);var v=b._createSuper(z);g=z.prototype;g.add=function(f,q){const R=[];for(const M of q)this._referenceFeature(M.objectId)===U.ADDED&&R.push(M);this._addTileStorage(f,new Set(q.map(M=>M.objectId)),K(q));this.featureStore.addMany(R);this._tiles.applyByteSizeLimit(this.maximumByteSize,M=>this._removeTileStorage(M))};g.destroy=function(){this.clear();this._tileFeatureCounts.clear()};g.clear=function(){this.featureStore.clear();
this._tileBounds.clear();this._tiles.clear();this._refCounts.clear()};g.refresh=function(){this.clear();this._tileFeatureCounts.clear()};g.processEdits=function(f,q,R){this._processEditsDelete(f.deletedFeatures.concat(f.updatedFeatures));return this._processEditsRefetch(f.addedFeatures.concat(f.updatedFeatures),q,R)};g._addTileStorage=function(f,q,R){const M=f.id;this._tiles.set(M,new J(f,q,R));this._tileBounds.set(M,f.extent);this._tileFeatureCounts.set(M,q.size)};g._remove=function({id:f}){(f=this._tiles.get(f))&&
this._removeTileStorage(f)};g._removeTileStorage=function(f){const q=[];for(const R of f.objectIds)this._unreferenceFeature(R)===U.REMOVED&&q.push(R);this.featureStore.removeManyById(q);f=f.data.id;this._tiles.delete(f);this._tileBounds.delete(f)};g._processEditsDelete=function(f){this.featureStore.removeManyById(f);for(const [,q]of this._tiles){for(const R of f)q.objectIds.delete(R);this._tileFeatureCounts.set(q.data.id,q.objectIds.size)}for(const q of f)this._refCounts.delete(q)};g._processEditsRefetch=
async function(f,q,R){f=(await q(f,R)).features;const {hasZ:M,hasM:Q}=this.featureStore;for(const E of f)f=w.getBoundsOptimizedGeometry(this._tmpBoundingRect,E.geometry,M,Q),r.isNone(f)||this._tileBounds.forEachInBounds(f,C=>{C=this._tiles.get(C);this.featureStore.add(E);const Y=E.objectId;C.objectIds.has(Y)||(C.objectIds.add(Y),this._referenceFeature(Y),this._tileFeatureCounts.set(C.data.id,C.objectIds.size))})};g.process=function(f,q=()=>!0){if(r.isNone(this.tileInfo)||!f.extent||r.isSome(this.extent)&&
!D.intersects(D.fromExtent(this.extent,this._tmpBoundingRect),f.extent)||this._tiles.has(f.id))return new N(f);const R=this._createTileTree(f,this.tileInfo);this._simplify(R,q,null,0,1);return this._collectMissingTiles(f,R,this.tileInfo)};g.getFeatureCount=function(f){return this._tileFeatureCounts.get(f.id)??0};g.fetchCount=async function(f,q,R,M){const Q=this._tileFeatureCounts.get(f.id);if(null!=Q)return Q;q=await p.executeQueryForCount(q,R,M);this._tileFeatureCounts.set(f.id,q.data.count);return q.data.count};
g._createTileTree=function(f,q){const R=new T(f.level,f.row,f.col);q.updateTileInfo(R,t.ExtrapolateOptions.POWER_OF_TWO);this._tileBounds.forEachInBounds(f.extent,M=>{(M=this._tiles.get(M)?.data)&&this._tilesAreRelated(f,M)&&this._populateChildren(R,M,q,this._tileFeatureCounts.get(M.id)||0)});return R};g._tilesAreRelated=function(f,q){if(!f||!q)return!1;if(f.level===q.level)return f.row===q.row&&f.col===q.col;const R=f.level<q.level,M=R?f:q;f=R?q:f;q=1<<f.level-M.level;return Math.floor(f.row/q)===
M.row&&Math.floor(f.col/q)===M.col};g._populateChildren=function(f,q,R,M){var Q=q.level-f.level-1;if(0>Q)f.isLeaf=!0;else{var E=q.row>>Q,C=q.col>>Q;Q=(E-(f.row<<1)<<1)+(C-(f.col<<1));var Y=f.children[Q];r.isSome(Y)?this._populateChildren(Y,q,R,M):(E=new T(f.level+1,E,C),R.updateTileInfo(E,t.ExtrapolateOptions.POWER_OF_TWO),f.children[Q]=E,this._populateChildren(E,q,R,M))}};g._simplify=function(f,q,R,M,Q){const E=Q*Q;if(f.isLeaf)return q(this.getFeatureCount(f),Q)?0:(this._remove(f),r.isSome(R)&&(R.children[M]=
null),E);Q/=2;const C=Q*Q;let Y=0;for(let ia=0;ia<f.children.length;ia++){const ua=f.children[ia];Y+=r.isSome(ua)?this._simplify(ua,q,f,ia,Q):C}0===Y?this._mergeChildren(f):.18751>1-Y/E&&(this._purge(f),r.isSome(R)&&(R.children[M]=null),Y=E);return Y};g._mergeChildren=function(f){const q=new Set;let R=0;this._forEachLeaf(f,M=>{const Q=this._tiles.get(M.id);if(Q){R+=Q.byteSize;for(const E of Q.objectIds)q.has(E)||(q.add(E),this._referenceFeature(E));this._remove(M)}});this._addTileStorage(f,q,R);f.isLeaf=
!0;f.children[0]=f.children[1]=f.children[2]=f.children[3]=null;this._tileFeatureCounts.set(f.id,q.size)};g._forEachLeaf=function(f,q){for(const R of f.children)r.isNone(R)||(R.isLeaf?q(R):this._forEachLeaf(R,q))};g._purge=function(f){if(!r.isNone(f))if(f.isLeaf)this._remove(f);else for(let q=0;q<f.children.length;q++)this._purge(f.children[q]),f.children[q]=null};g._collectMissingTiles=function(f,q,R){f=new H(R,f,this.extent);this._collectMissingTilesRecurse(q,f,1);return f.info};g._collectMissingTilesRecurse=
function(f,q,R){if(!f.isLeaf)if(f.hasChildren){R/=2;for(let M=0;M<f.children.length;M++){const Q=f.children[M];r.isNone(Q)?q.addMissing(f.level+1,(f.row<<1)+((M&2)>>1),(f.col<<1)+(M&1),R):this._collectMissingTilesRecurse(Q,q,R)}}else q.addMissing(f.level,f.row,f.col,R)};g._referenceFeature=function(f){const q=(this._refCounts.get(f)||0)+1;this._refCounts.set(f,q);return 1===q?U.ADDED:U.UNCHANGED};g._unreferenceFeature=function(f){const q=(this._refCounts.get(f)||0)-1;if(0===q)return this._refCounts.delete(f),
U.REMOVED;0<q&&this._refCounts.set(f,q);return U.UNCHANGED};b._createClass(z,[{key:"debugInfo",get:function(){return Array.from(this._tiles.values()).map(({data:f})=>({data:f,featureCount:this._tileFeatureCounts.get(f.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this._tiles.values()).map(f=>`${f.data.id}:[${Array.from(f.objectIds)}]`),featureReferences:Array.from(this._refCounts.keys()).map(f=>`${f}:${this._refCounts.get(f)}`)}}}]);return z}(P);I.__decorate([A.property({constructOnly:!0})],
c.FeatureServiceTileStore.prototype,"featureStore",void 0);I.__decorate([A.property()],c.FeatureServiceTileStore.prototype,"tileInfo",void 0);I.__decorate([A.property()],c.FeatureServiceTileStore.prototype,"extent",void 0);I.__decorate([A.property()],c.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);c.FeatureServiceTileStore=I.__decorate([n.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],c.FeatureServiceTileStore);let J=b._createClass(function(g,
z,v){this.data=g;this.objectIds=z;this.byteSize=v}),T=function(){function g(z,v,f){this.level=z;this.row=v;this.col=f;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}b._createClass(g,[{key:"hasChildren",get:function(){return!this.isLeaf&&(r.isSome(this.children[0])||r.isSome(this.children[1])||r.isSome(this.children[2])||r.isSome(this.children[3]))}}]);return g}(),N=function(){function g(z,v=[]){this.missingTiles=v;this.coveredArea=this.fullArea=0;this.coveredArea=this.fullArea=
D.area(z.extent)}g.prototype.prepend=function(z){this.missingTiles=z.missingTiles.concat(this.missingTiles);this.coveredArea+=z.coveredArea;this.fullArea+=z.fullArea};return b._createClass(g)}(),H=function(){function g(z,v,f){this._tileInfo=z;this._extent=null;this.info=new N(v);r.isSome(f)&&(this._extent=D.fromExtent(f))}g.prototype.addMissing=function(z,v,f,q){z=new e.TileKey(null,z,v,f);this._tileInfo.updateTileInfo(z,t.ExtrapolateOptions.POWER_OF_TWO);r.isNone(z.extent)||r.isSome(this._extent)&&
!D.intersects(this._extent,z.extent)||(this.info.missingTiles.push({data:z,resolution:q}),this.info.coveredArea-=D.area(z.extent))};return b._createClass(g)}();var U;(function(g){g[g.ADDED=0]="ADDED";g[g.REMOVED=1]="REMOVED";g[g.UNCHANGED=2]="UNCHANGED"})(U||(U={}));c.ProcessResult=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(c){function b(B){return 32+B.length}function I(B){if(!B)return 0;if(Array.isArray(B)){var r=
B.length;if(0===r||"number"===typeof B[0])B=32+8*r;else{var A=32;for(let G=0;G<r;G++)A+=P(B[G]);B=A}return B}A=32;for(r in B)B.hasOwnProperty(r)&&(A+=P(B[r]));return A}function P(B){switch(typeof B){case "object":return I(B);case "string":return b(B);case "number":return 16;case "boolean":return 4;default:return 8}}c.ByteSizeUnit=void 0;(function(B){B[B.KILOBYTES=1024]="KILOBYTES";B[B.MEGABYTES=1048576]="MEGABYTES";B[B.GIGABYTES=1073741824]="GIGABYTES"})(c.ByteSizeUnit||(c.ByteSizeUnit={}));c.estimateAttributesObjectSize=
function(B){if(!B)return 0;let r=32;for(const A in B)if(B.hasOwnProperty(A)){const G=B[A];switch(typeof G){case "string":r+=b(G);break;case "number":r+=16;break;case "boolean":r+=4}}return r};c.estimateFixedArraySize=function(B,r){return 32+B.length*r};c.estimateNestedObjectSize=I;c.estimateNumberByteSize=function(B){return 16};c.estimateStringByteSize=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers"],function(c,b){let I=function(P){function B(){this._store=new Map;this._byteSize=0}var r=B.prototype;r.set=function(A,G){this.delete(A);this._store.set(A,G);this._byteSize+=G.byteSize};r.delete=function(A){const G=this._store.get(A);return this._store.delete(A)?(null!=G&&(this._byteSize-=G.byteSize),!0):!1};r.get=function(A){this._used(A);return this._store.get(A)};r.has=function(A){this._used(A);return this._store.has(A)};r.clear=function(){this._store.clear()};
r.applyByteSizeLimit=function(A,G){for(const [m,l]of this._store){if(this._byteSize<=A)break;this.delete(m);G(l)}};r.values=function(){return this._store.values()};r[P]=function(){return this._store[Symbol.iterator]()};r._used=function(A){const G=this._store.get(A);G&&(this._store.delete(A),this._store.set(A,G))};return b._createClass(B)}(Symbol.iterator);c.FeatureServiceTileCache=I;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/support/WatchUpdatingTracking ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../rest/support/Query ../../../../../symbols/support/ElevationInfo ../snappingCandidateElevationAlignment ../snappingCandidateElevationFilter ../symbologySnappingCandidates ./FeatureServiceTiledFetcher ./FeatureServiceTileStore".split(" "),function(c,
b,I,P,B,r,A,G,m,l,n,D,w,x,t,e,p,L,K,J,T,N,H,U){I=function(z){function v(){var q=f.apply(this,arguments);q._isInitializing=!0;q.remoteClient=null;q._whenSetup=r.createDeferred();q._elevationAligner=J.getSnappingCandidateElevationAligner();q._elevationFilter=T.getSnappingCandidateElevationFilter();q._symbologyCandidatesFetcher=N.getSymbologySnappingCandidatesFetcher();q._handles=new P;q._updatingHandles=new w.WatchUpdatingTracking;q._editsUpdatingHandles=new w.WatchUpdatingTracking;q._pendingApplyEdits=
new Map;q._alignPointsInFeatures=async(R,M)=>{R=await q.remoteClient.invoke("alignElevation",{points:R},{signal:M});r.throwIfAborted(M);return R};q._getSymbologyCandidates=async(R,M)=>{R={candidates:R,spatialReference:q._spatialReference.toJSON()};R=await q.remoteClient.invoke("getSymbologyCandidates",R,{signal:M});r.throwIfAborted(M);return R};return q}c._inherits(v,z);var f=c._createSuper(v);z=v.prototype;z.destroy=function(){this._featureFetcher?.destroy();this._queryEngine?.destroy();this._featureStore?.clear();
this._handles?.destroy()};z.setup=async function(q){if(this.destroyed)return{result:{}};const {geometryType:R,objectIdField:M,timeInfo:Q,fields:E}=q.serviceInfo;var {hasZ:C}=q;const Y=x.fromJSON(q.spatialReference);this._spatialReference=Y;this._featureStore=new t({...q.serviceInfo,hasZ:C,hasM:!1});this._queryEngine=new e.QueryEngine({spatialReference:q.spatialReference,featureStore:this._featureStore,geometryType:R,fields:E,hasZ:C,hasM:!1,objectIdField:M,timeInfo:Q});this._featureFetcher=new H.FeatureServiceTiledFetcher({store:new U.FeatureServiceTileStore({featureStore:this._featureStore}),
url:q.serviceInfo.url,objectIdField:q.serviceInfo.objectIdField,globalIdField:q.serviceInfo.globalIdField,capabilities:q.serviceInfo.capabilities,spatialReference:Y,sourceSpatialReference:x.fromJSON(q.serviceInfo.spatialReference)});C="3d"===q.configuration.viewType;this._elevationAligner=J.getSnappingCandidateElevationAligner(C,{elevationInfo:B.isSome(q.elevationInfo)?K.fromJSON(q.elevationInfo):null,alignPointsInFeatures:this._alignPointsInFeatures,spatialReference:Y});this._elevationFilter=T.getSnappingCandidateElevationFilter(C);
this._handles.add([A.watch(()=>this._featureFetcher.availability,ia=>this.emit("notify-availability",{availability:ia}),A.sync),A.watch(()=>this.updating,()=>this._notifyUpdating())]);this._whenSetup.resolve();this._isInitializing=!1;return this.configure(q.configuration)};z.configure=async function(q){await this._updatingHandles.addPromise(this._whenSetup.promise);this._updateFeatureFetcherConfiguration(q);return{result:{}}};z.fetchCandidates=async function(q,R){await this._whenSetup.promise;r.throwIfAborted(R);
q={point:q.point,mode:q.mode,distance:q.distance,types:q.types,query:B.isSome(q.filter)?q.filter:{where:"1\x3d1"}};R=B.isSome(R)?R.signal:null;var M=await this._queryEngine.executeQueryForSnapping(q,R);r.throwIfAborted(R);M=await this._elevationAligner.alignCandidates(M.candidates,R);r.throwIfAborted(R);const Q=await this._symbologyCandidatesFetcher.fetch(M,R);r.throwIfAborted(R);R=0===Q.length?M:M.concat(Q);return{result:{candidates:this._elevationFilter.filter(q,R)}}};z.updateTiles=async function(q,
R){await this._updatingHandles.addPromise(this._whenSetup.promise);r.throwIfAborted(R);this._featureFetcher.tileSize=q.tileSize;this._featureFetcher.tilesOfInterest=q.tiles;this._featureFetcher.tileInfo=B.isSome(q.tileInfo)?p.fromJSON(q.tileInfo):null;return g};z.refresh=async function(q,R){await this._updatingHandles.addPromise(this._whenSetup.promise);r.throwIfAborted(R);this._featureFetcher.refresh();return g};z.whenNotUpdating=async function(q,R){await this._updatingHandles.addPromise(this._whenSetup.promise);
r.throwIfAborted(R);await A.whenOnce(()=>!this.updatingExcludingEdits,R);r.throwIfAborted(R);return g};z.getDebugInfo=async function(q,R){r.throwIfAborted(R);return{result:this._featureFetcher.debugInfo}};z.beginApplyEdits=async function(q,R){this._updatingHandles.addPromise(this._whenSetup.promise);r.throwIfAborted(R);R=r.createDeferred();this._pendingApplyEdits.set(q.id,R);this._featureFetcher.applyEdits(R.promise);this._editsUpdatingHandles.addPromise(R.promise);return g};z.endApplyEdits=async function(q,
R){const M=this._pendingApplyEdits.get(q.id);M&&M.resolve(q.edits);r.throwIfAborted(R);return g};z.notifyElevationSourceChange=async function(q,R){this._elevationAligner.notifyElevationSourceChange();return g};z.notifySymbologyChange=async function(q,R){this._symbologyCandidatesFetcher.notifySymbologyChange();return g};z.setSymbologySnappingSupported=async function(q){this._symbologyCandidatesFetcher=N.getSymbologySnappingCandidatesFetcher(q,this._getSymbologyCandidates);return g};z._updateFeatureFetcherConfiguration=
function(q){this._featureFetcher.filter=B.isSome(q.filter)?L.fromJSON(q.filter):null;this._featureFetcher.customParameters=q.customParameters};z._notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};c._createClass(v,[{key:"updating",get:function(){return this.updatingExcludingEdits||this._editsUpdatingHandles.updating||this._featureFetcher.updating}},{key:"updatingExcludingEdits",get:function(){return this._featureFetcher.updatingExcludingEdits||this._isInitializing||this._updatingHandles.updating}}]);
return v}(I.EventedAccessor);b.__decorate([G.property({readOnly:!0})],I.prototype,"updating",null);b.__decorate([G.property({readOnly:!0})],I.prototype,"updatingExcludingEdits",null);b.__decorate([G.property()],I.prototype,"_isInitializing",void 0);I=b.__decorate([D.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],I);const g={result:{}};return I});