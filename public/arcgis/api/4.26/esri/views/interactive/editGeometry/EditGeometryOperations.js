// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Evented ../../../core/maybe ./EditGeometry ./interfaces ./operations/AppendVertex ./operations/UpdateVertices ./operations/RemoveVertices ./operations/SplitEdge ./operations/SetVertexPosition ./operations/CloseComponent ./operations/MoveVertex ./operations/OffsetEdgeVertex ./operations/RotateVertex ./operations/ScaleVertex ./operations/UndoGroup".split(" "),function(n,k,l,p,q,e,r,m,t,u,v,w,x,y,z,A,B){l=function(d){function f(a){var b=
C.call(this);b.data=a;b._undoStack=[];b._redoStack=[];b._listener=b.data.on("change",c=>{c.addedVertices&&b.emit("vertex-add",{type:"vertex-add",vertices:c.addedVertices,operation:c.operation});c.removedVertices&&b.emit("vertex-remove",{type:"vertex-remove",vertices:c.removedVertices,operation:c.operation});c.updatedVertices&&b.emit("vertex-update",{type:"vertex-update",vertices:c.updatedVertices,operation:c.operation})});return b}k._inherits(f,d);var C=k._createSuper(f);d=f.prototype;d.destroy=function(){this._listener.remove()};
d.splitEdge=function(a,b){return this._apply(new u.SplitEdge(this.data,a,b))};d.updateVertices=function(a,b,c=e.AccumulationBehaviour.ACCUMULATE_STEPS){return this._apply(new m.UpdateVertices(this.data,a,b),c)};d.moveVertices=function(a,b,c,g,h=e.AccumulationBehaviour.ACCUMULATE_STEPS){return this.updateVertices(a,new x.MoveVertex(this.data.coordinateHelper,b,c,g),h)};d.scaleVertices=function(a,b,c,g,h,D=e.AccumulationBehaviour.ACCUMULATE_STEPS,E=m.AccumulationType.CUMULATIVE){return this.updateVertices(a,
new A.ScaleVertex(b,c,g,h,E),D)};d.rotateVertices=function(a,b,c,g=e.AccumulationBehaviour.ACCUMULATE_STEPS,h=m.AccumulationType.CUMULATIVE){return this.updateVertices(a,new z.RotateVertex(b,c,h),g)};d.removeVertices=function(a){return this._apply(new t.RemoveVertices(this.data,a,this._minNumVerticesPerType))};d.appendVertex=function(a){return 0===this.data.components.length?null:this._apply(new r.AppendVertex(this.data,this.data.components[0],a))};d.setVertexPosition=function(a,b){return this._apply(new v.SetVertexPosition(this.data,
a,b))};d.offsetEdge=function(a,b,c,g=e.AccumulationBehaviour.ACCUMULATE_STEPS){return this.updateVertices([b.leftVertex,b.rightVertex],new y.OffsetEdgeVertex(this.data.coordinateHelper,a,b,c),g)};d.closeComponent=function(a){return this.data.components.includes(a)?this._apply(new w.CloseComponent(this.data,a)):null};d.canRemoveVertex=function(){return this.data.components[0].vertices.length>this._minNumVerticesPerType};d.createUndoGroup=function(){const a=new B.UndoGroup;this._apply(a);return{remove(){return a.close()}}};
d.undo=function(){if(0<this._undoStack.length){const a=this._undoStack.pop();a.undo();this._redoStack.push(a);return a}return null};d.redo=function(){if(0<this._redoStack.length){const a=this._redoStack.pop();a.apply();this._undoStack.push(a);return a}return null};d._apply=function(a,b=e.AccumulationBehaviour.ACCUMULATE_STEPS){if(b===e.AccumulationBehaviour.NEW_STEP||p.isNone(this.lastOperation)||!this.lastOperation.accumulate(a))a.apply(),this._undoStack.push(a),this._redoStack=[];return a};f.fromGeometry=
function(a,b){return new f(q.EditGeometry.fromGeometry(a,b))};k._createClass(f,[{key:"canUndo",get:function(){return 0<this._undoStack.length}},{key:"canRedo",get:function(){return 0<this._redoStack.length}},{key:"lastOperation",get:function(){return 0<this._undoStack.length?this._undoStack[this._undoStack.length-1]:null}},{key:"_minNumVerticesPerType",get:function(){switch(this.data.type){case "point":return 1;case "polyline":return 2;case "polygon":return 3;default:return 0}}}]);return f}(l);n.EditGeometryOperations=
l;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});