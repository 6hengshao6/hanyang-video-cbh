// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v){var E;h=new h.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});f=E=function(A){function t(d){d=q.call(this,d);d.dpi=96;d.format=null;d.origin=null;d.minScale=0;d.maxScale=0;d.size=null;d.spatialReference=null;return d}r._inherits(t,A);var q=r._createSuper(t);t.create=
function(d={}){const {resolutionFactor:B=1,scales:I,size:R=256,spatialReference:N=c.WebMercator,numLODs:K=24}=d;if(!k.isValid(N)){d=[];if(I)for(var X=0;X<I.length;X++){var Y=I[X];d.push(new m({level:X,scale:Y,resolution:Y}))}else for(X=5E-4,Y=K-1;0<=Y;Y--)d.unshift(new m({level:Y,scale:X,resolution:X})),X*=2;return new E({dpi:96,lods:d,origin:new g(0,0,N),size:[R,R],spatialReference:N})}X=k.getInfo(N);d=d.origin?new g({x:d.origin.x,y:d.origin.y,spatialReference:N}):X?new g({x:X.origin[0],y:X.origin[1],
spatialReference:N}):new g({x:0,y:0,spatialReference:N});X=1/(39.37*y.getMetersPerUnitForSR(N)*96);Y=[];if(I)for(var S=0;S<I.length;S++){var U=I[S];Y.push(new m({level:S,scale:U,resolution:U*X}))}else{var J=k.isGeographic(N)?512/R*5.916575275917094E8:256/R*5.91657527591555E8;S=Math.ceil(K/B);Y.push(new m({level:0,scale:J,resolution:J*X}));for(U=1;U<S;U++)J/=2**B,Y.push(new m({level:U,scale:J,resolution:J*X}))}return new E({dpi:96,lods:Y,origin:d,size:[R,R],spatialReference:N})};A=t.prototype;A.readOrigin=
function(d,B){return g.fromJSON({spatialReference:B.spatialReference,...d})};A.readSize=function(d,B){return[B.cols,B.rows]};A.writeSize=function(d,B){B.cols=d[0];B.rows=d[1]};A.zoomToScale=function(d){const B=this.scales;if(0>=d)return B[0];if(d>=B.length-1)return B[B.length-1];const I=Math.floor(d);return B[I]/(B[I]/B[I+1])**(d-I)};A.scaleToZoom=function(d){const B=this.scales,I=B.length-1;let R=0;for(;R<I;R++){const N=B[R],K=B[R+1];if(N<=d)break;if(K===d)return R+1;if(N>d&&K<d)return R+Math.log(N/
d)/Math.log(N/K)}return R};A.snapScale=function(d,B=.95){d=this.scaleToZoom(d);return d%Math.floor(d)>=B?this.zoomToScale(Math.ceil(d)):this.zoomToScale(Math.floor(d))};A.tileAt=function(d,B,I,R){var N=this.lodAt(d);if(!N)return null;let K;if("number"===typeof B)K=B,B=I;else{if(k.equals(B.spatialReference,this.spatialReference))K=B.x,B=B.y;else{R=l.project(B,this.spatialReference);if(w.isNone(R))return null;K=R.x;B=R.y}R=I}I=N.resolution*this.size[0];N=N.resolution*this.size[1];R||(R=new v.TileKey(null,
0,0,0,e.create()));R.level=d;R.row=Math.floor((this.origin.y-B)/N+.001);R.col=Math.floor((K-this.origin.x)/I+.001);this.updateTileInfo(R);return R};A.updateTileInfo=function(d,B=E.ExtrapolateOptions.NONE){var I=this.lodAt(d.level);I||B!==E.ExtrapolateOptions.POWER_OF_TWO||(B=this.lods[this.lods.length-1],B.level<d.level&&(I=B));if(I){var R=d.level-I.level;B=I.resolution*this.size[0]/2**R;I=I.resolution*this.size[1]/2**R;d.id=`${d.level}/${d.row}/${d.col}`;d.extent||(d.extent=e.create());d.extent[0]=
this.origin.x+d.col*B;d.extent[1]=this.origin.y-(d.row+1)*I;d.extent[2]=d.extent[0]+B;d.extent[3]=d.extent[1]+I}};A.upsampleTile=function(d){const B=this._upsampleLevels[d.level];if(!B||-1===B.parentLevel)return!1;d.level=B.parentLevel;d.row=Math.floor(d.row/B.factor+.001);d.col=Math.floor(d.col/B.factor+.001);this.updateTileInfo(d);return!0};A.getTileBounds=function(d,B){var I=this.lodAt(B.level);if(null==I)return null;var {resolution:R}=I;I=R*this.size[0];R*=this.size[1];d[0]=this.origin.x+B.col*
I;d[1]=this.origin.y-(B.row+1)*R;d[2]=d[0]+I;d[3]=d[1]+R;return d};A.lodAt=function(d){return this._levelToLOD?.[d]??null};A.clone=function(){return E.fromJSON(this.write({}))};A.getOrCreateCompatible=function(d,B){if(256===this.size[0]&&256===this.size[1])return 256===d?this:null;const I=[],R=this.lods.length;for(let N=0;N<R;N++){const K=this.lods[N];I.push(new m({level:K.level,scale:K.scale,resolution:K.resolution*B}))}return new E({size:[d,d],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,
origin:this.origin,spatialReference:this.spatialReference,lods:I})};A._initializeUpsampleLevels=function(){const d=this.lods;this._upsampleLevels=[];let B=null;for(let I=0;I<d.length;I++){const R=d[I];this._upsampleLevels[R.level]={parentLevel:B?B.level:-1,factor:B?B.resolution/R.resolution:0};B=R}};r._createClass(t,[{key:"isWrappable",get:function(){const {spatialReference:d,origin:B}=this;if(d&&B){const I=k.getInfo(d);return d.isWrappable&&!!I&&Math.abs(I.origin[0]-B.x)<=I.dx}return!1}},{key:"lods",
set:function(d){let B=0,I=0;const R=[],N=this._levelToLOD={};d&&(B=-Infinity,I=Infinity,d.forEach(K=>{R.push(K.scale);B=K.scale>B?K.scale:B;I=K.scale<I?K.scale:I;N[K.level]=K}));this._set("scales",R);this._set("minScale",B);this._set("maxScale",I);this._set("lods",d);this._initializeUpsampleLevels()}}]);return t}(f.JSONSupport);n.__decorate([z.property({type:Number,json:{write:!0}})],f.prototype,"compressionQuality",void 0);n.__decorate([z.property({type:Number,json:{write:!0}})],f.prototype,"dpi",
void 0);n.__decorate([z.property({type:String,json:{read:h.read,write:h.write,origins:{"web-scene":{read:!1,write:!1}}}})],f.prototype,"format",void 0);n.__decorate([z.property({readOnly:!0})],f.prototype,"isWrappable",null);n.__decorate([z.property({type:g,json:{write:!0}})],f.prototype,"origin",void 0);n.__decorate([b.reader("origin")],f.prototype,"readOrigin",null);n.__decorate([z.property({type:[m],value:null,json:{write:!0}})],f.prototype,"lods",null);n.__decorate([z.property({readOnly:!0})],
f.prototype,"minScale",void 0);n.__decorate([z.property({readOnly:!0})],f.prototype,"maxScale",void 0);n.__decorate([z.property({readOnly:!0})],f.prototype,"scales",void 0);n.__decorate([z.property({cast:A=>Array.isArray(A)?A:"number"===typeof A?[A,A]:[256,256]})],f.prototype,"size",void 0);n.__decorate([b.reader("size",["rows","cols"])],f.prototype,"readSize",null);n.__decorate([p.writer("size",{cols:{type:D.Integer},rows:{type:D.Integer}})],f.prototype,"writeSize",null);n.__decorate([z.property({type:c,
json:{write:!0}})],f.prototype,"spatialReference",void 0);f=E=n.__decorate([a.subclass("esri.layers.support.TileInfo")],f);(function(A){A=A.ExtrapolateOptions||(A.ExtrapolateOptions={});A[A.NONE=0]="NONE";A[A.POWER_OF_TWO=1]="POWER_OF_TWO"})(f||(f={}));return f})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D){var x;h=x=function(u){function b(p){p=a.call(this,p);p.cols=null;p.level=0;p.levelValue=null;p.origin=null;p.resolution=0;p.rows=null;p.scale=0;return p}r._inherits(b,u);var a=r._createSuper(b);b.prototype.clone=function(){return new x({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return r._createClass(b)}(h.JSONSupport);n.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},
"portal-item":{read:!1,write:!1}}}})],h.prototype,"cols",void 0);n.__decorate([f.property({type:w.Integer,json:{write:!0}})],h.prototype,"level",void 0);n.__decorate([f.property({type:String,json:{write:!0}})],h.prototype,"levelValue",void 0);n.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],h.prototype,"origin",void 0);n.__decorate([f.property({type:Number,json:{write:!0}})],h.prototype,"resolution",void 0);n.__decorate([f.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],h.prototype,"rows",void 0);n.__decorate([f.property({type:Number,json:{write:!0}})],h.prototype,"scale",void 0);return h=x=n.__decorate([D.subclass("esri.layers.support.LOD")],h)})},"esri/layers/support/TileKey":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(r,n){n=n._createClass(function(h,f,w,y,z){this.id=h;this.level=f;this.row=w;this.col=y;this.extent=z});r.TileKey=n;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(r,n,h,f,w,y,z,D,x,u,b,a){function p(e,k){return k?g[e].valueToClassName[k].split(" "):[]}const g={widthBreakpoint:{getValue(e){const k=
e.viewSize[0];e=e.breakpoints;const l=this.values;return k<=e.xsmall?l.xsmall:k<=e.small?l.small:k<=e.medium?l.medium:k<=e.large?l.large:l.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue(e){const k=e.viewSize[1];e=e.breakpoints;const l=this.values;return k<=e.xsmall?l.xsmall:k<=e.small?l.small:k<=e.medium?l.medium:k<=e.large?l.large:l.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue(e){e=e.viewSize;const k=this.values;return e[1]>=e[0]?k.portrait:k.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},c={xsmall:544,small:768,medium:992,large:1200};r.BreakpointsOwner=e=>{e=function(k){function l(...v){v=m.call(this,...v);v._breakpointsHandles=new w;v.orientation=null;v.widthBreakpoint=null;v.heightBreakpoint=null;v.breakpoints=c;return v}n._inherits(l,
k);var m=n._createSuper(l);k=l.prototype;k.initialize=function(){this._breakpointsHandles.add(z.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),z.initial))};k.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=y.destroyMaybe(this._breakpointsHandles))};k._updateClassNames=function(){if(this.container){var v=f.acquire(),E=f.acquire(),A=!1,t;for(t in g){const q=this[t],d=g[t].getValue({viewSize:this.size,breakpoints:this.breakpoints});q!==
d&&(A=!0,this[t]=d,p(t,q).forEach(B=>E.push(B)),p(t,d).forEach(B=>v.push(B)))}A&&(this._applyClassNameChanges(v,E),f.release(v),f.release(E))}};k._applyClassNameChanges=function(v,E){const A=this.container;A&&(E.forEach(t=>A.classList.remove(t)),v.forEach(t=>A.classList.add(t)))};k._removeActiveClassNames=function(){const v=this.container;if(v)for(var E in g)p(E,this[E]).forEach(A=>v.classList.remove(A))};n._createClass(l,[{key:"breakpoints",set:function(v){var E=this._get("breakpoints");if(v!==E){E=
(E=v)&&E.xsmall<E.small&&E.small<E.medium&&E.medium<E.large;if(!E){const A=JSON.stringify(c,null,2);console.warn("provided breakpoints are not valid, using defaults:"+A)}v=E?v:c;this._set("breakpoints",{...v})}}}]);return l}(e);h.__decorate([D.property()],e.prototype,"breakpoints",null);h.__decorate([D.property()],e.prototype,"orientation",void 0);h.__decorate([D.property()],e.prototype,"widthBreakpoint",void 0);h.__decorate([D.property()],e.prototype,"heightBreakpoint",void 0);return e=h.__decorate([a.subclass("esri.views.BreakpointsOwner")],
e)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(r,n,h,f,w,y,z,D,x,u,b,a,
p,g,c){function e(l){l&&(f.empty(l),l.parentNode&&l.parentNode.removeChild(l))}const k=[0,0];r.DOMContainer=l=>{l=function(m){function v(...A){var t=E.call(this,...A);t._freqInfo={freq:16,time:750};t._overlayRenderTaskHandle=null;t.height=0;t.overlay=null;t.position=null;t.resizing=!1;t.root=null;t.surface=null;t.suspended=!0;t.ui=null;t.userContent=null;t.width=0;t.widthBreakpoint=null;if(0===A.length||void 0===A[0]?.popup)t.popup=new c({view:n._assertThisInitialized(t)});t.addHandles([z.watch(()=>
t.cursor,q=>{const {surface:d}=n._assertThisInitialized(t);d&&d.setAttribute("data-cursor",q)}),z.watch(()=>t.interacting,q=>{const {surface:d}=n._assertThisInitialized(t);d&&d.setAttribute("data-interacting",q.toString())})]);return t}n._inherits(v,m);var E=n._createSuper(v);m=v.prototype;m.initialize=function(){this.addHandles(z.watch(()=>this.ui,(A,t)=>this._handleUIChange(A,t)));this._wireUI(this.ui);this.addHandles([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};
m.destroy=function(){this.destroyed||(this.ui=y.destroyMaybe(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};m.blur=function(){this.surface&&this.surface.blur()};m.focus=function(){this.surface&&this.surface.focus()};m.pageToContainer=function(A,t,q){const d=this.position;A-=d?d[0]:0;t-=d?d[1]:0;q?(q[0]=A,q[1]=t):q=[A,t];return q};m.containerToPage=function(A,t,q){const d=this.position;A+=d?d[0]:0;t+=d?d[1]:0;q?(q[0]=A,q[1]=t):q=[A,t];return q};m._handleUIChange=
function(A,t){t&&(this.removeHandles("ui"),t.destroy());A&&this._wireUI(A);this._set("ui",A)};m._wireUI=function(A){this.removeHandles("ui");A&&(A.view=this,this.addHandles([z.watch(()=>this.root,t=>{if(t){const q=document.createElement("div");t.appendChild(q);t=q}else t=null;A.container=t},z.initial),z.watch(()=>this.popup,(t,q)=>{q&&A.remove(q,"popup");t&&(t.view=A.view,A.add(t,{key:"popup",position:"manual"}))},z.initial)],"ui"))};m._stopMeasuring=function(){this.removeHandles("measuring");this._get("resizing")&&
this._set("resizing",!1)};m._startMeasuring=function(){const A=this._freqInfo;A.freq=16;A.time=750;this.addHandles([(()=>{const t=()=>{A.freq=16;A.time=750};window.addEventListener("resize",t);return{remove(){window.removeEventListener("resize",t)}}})(),D.addFrameTask({prepare:t=>{const q=this._measure(),d=this._freqInfo;d.time+=t.deltaTime;q&&(d.freq=16,this._get("resizing")||this._set("resizing",!0));d.time<d.freq||(d.time=0,this._position()||q?d.freq=16:d.freq=Math.min(750,2*d.freq),!q&&512<=d.freq&&
this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};m._measure=function(){var A=this.container;const t=A?A.clientWidth:0;A=A?A.clientHeight:0;if(0===t||0===A)return this.suspended||this._set("suspended",!0),!1;const q=this.width,d=this.height;if(t===q&&A===d)return this.suspended&&this._set("suspended",!1),!1;this._set("width",t);this._set("height",A);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:q,oldHeight:d,width:t,height:A});
return!0};m._position=function(){var A=this.container;const t=this.position;var q;if(q=A)q=(A.ownerDocument||window.document).defaultView,A=A.getBoundingClientRect(),k[0]=A.left+(q?.pageXOffset??0),k[1]=A.top+(q?.pageYOffset??0),q=k;A=q;return A?t&&A[0]===t[0]&&A[1]===t[1]?!1:(this._set("position",[A[0],A[1]]),!0):!1};m.forceDOMReadyCycle=function(){};n._createClass(v,[{key:"container",get:function(){return this._get("container")??null},set:function(A){const t=this._get("container"),q=f.byId(A);q||
"string"!==typeof A||w.getLogger(this.declaredClass).error("#container",`element with id '${A}' not found`);if(t!==q)if(this.removeHandles("dom-size"),this._stopMeasuring(),t&&(t.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(e(this.root),this._set("root",null)),this.userContent&&(f.reparent(this.userContent,t),e(this.userContent),this._set("userContent",
null))),q){q.classList.add("esri-view");A=document.createElement("div");A.className="esri-view-user-storage";f.reparent(q,A);q.appendChild(A);this._set("userContent",A);A=document.createElement("div");A.className="esri-view-root";q.insertBefore(A,q.firstChild);this._set("root",A);var d=document.createElement("div");d.className="esri-view-surface";d.setAttribute("role","application");d.tabIndex=0;A.appendChild(d);this._set("surface",d);var B=new g;A.appendChild(B.surface);this._set("overlay",B);this.addHandles(z.watch(()=>
B.needsRender,I=>{this._overlayRenderTaskHandle=I&&!this._overlayRenderTaskHandle?D.addFrameTask({render:()=>this.overlay?.render()}):y.removeMaybe(this._overlayRenderTaskHandle)}));this.forceDOMReadyCycle();this.addHandles(z.watch(()=>this.size,I=>{const [R,N]=I;R>=document.body.clientWidth||N>=document.body.clientHeight?d.classList.add("esri-view-surface--inset-outline"):d.classList.remove("esri-view-surface--inset-outline")},z.initial),"dom-size");this._set("container",q);this._startMeasuring()}else this._set("width",
0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const A=document.activeElement===this.surface;return document.hasFocus()&&A}},{key:"popup",set:function(A){const t=this._get("popup");t&&t!==A&&t.destroy();this._set("popup",A)}},{key:"size",get:function(){return[this.width,this.height]}}]);return v}(l);h.__decorate([x.property()],l.prototype,"container",null);h.__decorate([x.property({readOnly:!0})],
l.prototype,"focused",null);h.__decorate([x.property({readOnly:!0})],l.prototype,"height",void 0);h.__decorate([x.property({type:c})],l.prototype,"popup",null);h.__decorate([x.property({type:g})],l.prototype,"overlay",void 0);h.__decorate([x.property({readOnly:!0})],l.prototype,"position",void 0);h.__decorate([x.property({readOnly:!0})],l.prototype,"resizing",void 0);h.__decorate([x.property({readOnly:!0})],l.prototype,"root",void 0);h.__decorate([x.property({value:null,readOnly:!0})],l.prototype,
"size",null);h.__decorate([x.property({readOnly:!0})],l.prototype,"surface",void 0);h.__decorate([x.property({readOnly:!0})],l.prototype,"suspended",void 0);h.__decorate([x.property()],l.prototype,"ui",void 0);h.__decorate([x.property({readOnly:!0})],l.prototype,"userContent",void 0);h.__decorate([x.property({readOnly:!0})],l.prototype,"width",void 0);h.__decorate([x.property()],l.prototype,"widthBreakpoint",void 0);return l=h.__decorate([p.subclass("esri.views.DOMContainer")],l)};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),function(r,n,h,f,w,y,z,
D,x,u,b,a){h=function(p){function g(){var e=c.apply(this,arguments);e.items=new f;e._watchUpdatingTracking=new u.WatchUpdatingTracking;e._callbacks=new Map;e._projector=a.createProjector();e._hiddenProjector=a.createProjector();return e}r._inherits(g,p);var c=r._createSuper(g);p=g.prototype;p.initialize=function(){const e=document.createElement("div");e.className="esri-overlay-surface";this._set("surface",e);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");e.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,k=>{for(const l of k.added){const m=()=>l.render();this._callbacks.set(l,m);this._projector.append(this.surface,m)}for(const l of k.removed)k=this._projector.detach(this._callbacks.get(l)),this.surface.removeChild(k.domNode),this._callbacks.delete(l)})};p.addItem=function(e){this.items.add(e)};p.removeItem=function(e){this.items.remove(e)};p.destroy=function(){this.items.removeAll();
this._callbacks.forEach(e=>this._projector.detach(e));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};p.render=function(){this._projector.renderNow()};p.computeBoundingRect=function(e){const k=this._hiddenSurface,l=this._hiddenProjector;let m;const v=()=>m=e.render();l.append(k,v);l.renderNow();const E={left:0,top:0,right:0,bottom:0};if(m&&m.domNode){const A=m.domNode.getBoundingClientRect();E.left=A.left;E.top=A.top;E.right=A.right;E.bottom=A.bottom}for(l.detach(v);k.firstChild;)k.removeChild(k.firstChild);
return E};p.overlaps=function(e,k){e=this.computeBoundingRect(e);k=this.computeBoundingRect(k);return Math.max(e.left,k.left)<=Math.min(e.right,k.right)&&Math.max(e.top,k.top)<=Math.min(e.bottom,k.bottom)};p.prepare=async function(){await document.fonts.load(this._fontString()).catch(()=>{})};p.renderCanvas=function(e){if(this.items.some(l=>l.visible)){var k=e.getContext("2d");k.save();k.font=this._fontString();this.items.forEach(l=>{k.save();l.renderCanvas(k);k.restore()});k.restore()}};p._fontString=
function(){return`10px ${getComputedStyle(this.surface).fontFamily}`};r._createClass(g,[{key:"needsRender",get:function(){return 0<this.items.length}},{key:"updating",get:function(){return this._watchUpdatingTracking?.updating??!1}},{key:"hasVisibleItems",get:function(){return this.items.some(e=>e.visible)}}]);return g}(h);n.__decorate([w.property({readOnly:!0})],h.prototype,"surface",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"items",void 0);n.__decorate([w.property({readOnly:!0})],
h.prototype,"needsRender",null);n.__decorate([w.property({readOnly:!0})],h.prototype,"_watchUpdatingTracking",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"updating",null);return h=n.__decorate([x.subclass("esri.views.overlay.ViewOverlay")],h)})},"esri/widgets/Popup":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/resources ./Feature/support/FeatureContentMixin ./Popup/actionUtils ./Popup/css ./Popup/PopupViewModel ./support/componentsUtils ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../support/themeUtils ../intl/substitute".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d,B,I,R,N,K,X,Y,S){function U(F,L){return void 0===L?`${"esri-popup"}__${F}`:`${"esri-popup"}__${F}-${L}`}const J={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},T={closeButton:!0,featureNavigation:!0};f=function(F){function L(C,M){var P=V.call(this,C,M);P._blurClose=!1;P._blurContainer=!1;P._containerNode=null;P._mainContainerNode=null;P._featureMenuNode=null;P._actionsMenuNode=null;P._focusClose=!1;P._focusContainer=!1;P._focusDockButton=
!1;P._focusFeatureMenuButton=!1;P._focusActionsMenuButton=!1;P._focusFirstFeature=!1;P._focusFirstAction=!1;P._handles=new z;P._pointerOffsetInPx=16;P._spinner=null;P._feature=null;P._featureMenuIntersectionObserverNode=null;P._featureMenuViewportNode=null;P._rootFlowItemNode=null;P._featureMenuIntersectionObserverCallback=([W])=>{W?.isIntersecting&&null!=P.viewModel.featurePage&&P.viewModel.featurePage++};P._featureMenuIntersectionObserver=new IntersectionObserver(P._featureMenuIntersectionObserverCallback,
{root:window.document});P._displaySpinnerThrottled=b.throttle(()=>P._displaySpinner(),0);P._exitRelatedRecordsActions=new WeakMap;P._featureSelectionActions=new WeakMap;P._flowItems=new w;P.alignment="auto";P.collapsed=!1;P.collapseEnabled=!0;P.dockEnabled=!1;P.featureMenuOpen=!1;P.headingLevel=2;P.maxInlineActions=3;P.messages=null;P.messagesCommon=null;P.spinnerEnabled=!0;P.viewModel=new q;P.visibleElements={...T};P._handleOpenRelatedFeature=W=>{P._openRelatedFeature(W)};P._addSelectedFeatureIndexHandle();
P.addHandles([u.watch(()=>P.viewModel?.screenLocation,()=>P._positionContainer()),u.watch(()=>[P.viewModel?.active,P.dockEnabled],()=>P._toggleScreenLocationEnabled()),u.watch(()=>P.viewModel?.screenLocation,(W,H)=>{!!W!==!!H&&P.reposition()}),u.watch(()=>[P.viewModel?.view?.padding,P.viewModel?.view?.size,P.viewModel?.active,P.viewModel?.location,P.alignment],()=>P.reposition()),u.watch(()=>P.spinnerEnabled,W=>P._spinnerEnabledChange(W)),u.watch(()=>P.viewModel?.view?.size,(W,H)=>P._updateDockEnabledForViewSize(W,
H)),u.watch(()=>P.viewModel?.view,(W,H)=>P._viewChange(W,H)),u.watch(()=>P.viewModel?.view?.ready,(W,H)=>P._viewReadyChange(W??!1,H??!1)),u.watch(()=>[P.viewModel?.waitingForResult,P.viewModel?.location],()=>{P._hideSpinner();P._displaySpinnerThrottled()}),u.watch(()=>P.selectedFeatureWidget,()=>P._destroyFlowItemWidgets()),u.watch(()=>[P.selectedFeatureWidget?.viewModel?.title,P.selectedFeatureWidget?.viewModel?.state],()=>P._setTitleFromFeatureWidget()),u.watch(()=>[P.selectedFeatureWidget?.viewModel?.content,
P.selectedFeatureWidget?.viewModel?.state],()=>P._setContentFromFeatureWidget()),u.when(()=>!P.collapsed,()=>{"xsmall"===P.viewModel?.view?.widthBreakpoint&&P.viewModel.active&&P.collapseEnabled&&P.viewModel.centerAtLocation()}),u.on(()=>P.viewModel?.allActions,"change",()=>P._watchActions()),u.watch(()=>P.viewModel?.allActions,()=>P._watchActions(),u.initial),u.watch(()=>P.viewModel?.featureViewModels,()=>P._featureMenuViewportScrollTop()),u.on(()=>P._flowItems,"change",()=>{P.notifyChange("_activeFlowItemWidget");
P.scheduleRender()}),u.watch(()=>[P._activeFlowItemWidget?.viewModel?.state,P._activeFlowItemWidget?.viewModel?.title],()=>P.scheduleRender())]);return P}n._inherits(L,F);var V=n._createSuper(L);F=L.prototype;F.loadDependencies=function(){return d.loadCalciteComponents({action:()=>new Promise((C,M)=>r(["../chunks/calcite-action"],C,M)),flow:()=>new Promise((C,M)=>r(["../chunks/calcite-flow"],C,M)),"flow-item":()=>new Promise((C,M)=>r(["../chunks/calcite-flow-item"],C,M)),icon:()=>new Promise((C,M)=>
r(["../chunks/calcite-icon"],C,M)),tooltip:()=>new Promise((C,M)=>r(["../chunks/calcite-tooltip"],C,M))})};F.destroy=function(){this._destroyFlowItemWidgets();this._destroySelectedFeatureWidget();this._destroySpinner();this._handles?.destroy();this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver?.disconnect()};F.castVisibleElements=function(C){return{...T,...C}};F.blur=function(){const {active:C}=this.viewModel;C||D.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active.");
this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};F.clear=function(){return this.viewModel.clear()};F.close=function(){this.visible=!1};F.fetchFeatures=function(C,M){return this.viewModel.fetchFeatures(C,M)};F.focus=function(){const {active:C}=this.viewModel;C||D.getLogger(this.declaredClass).warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};F.next=
function(){return this.viewModel.next()};F.open=function(C){this._handles.remove("selected-index");const M={collapsed:C?!!C.collapsed:!1,actionsMenuOpen:C?!!C.actionsMenuOpen:!1,featureMenuOpen:C?!!C.featureMenuOpen:!1};"xsmall"===this.viewModel?.view?.widthBreakpoint&&(M.collapsed=!0);this.set(M);this.viewModel.open(C);this._shouldFocus(C);this._addSelectedFeatureIndexHandle()};F.previous=function(){return this.viewModel.previous()};F.reposition=function(){this.renderNow();this._positionContainer();
this._setCurrentAlignment()};F.triggerAction=function(C){return this.viewModel.triggerAction(C)};F.render=function(){const {actionsMenuOpen:C,dockEnabled:M,featureMenuVisible:P,dividedActions:W,currentAlignment:H,currentDockPosition:G}=this,{active:O}=this.viewModel,{menuActions:Q}=W,aa=this.selectedFeature?.layer?.title,ba=this.selectedFeature?.layer?.id;return K.tsx("div",{class:this.classes(t.CSS.base,{[t.CSS.alignTopCenter]:"top-center"===H,[t.CSS.alignBottomCenter]:"bottom-center"===H,[t.CSS.alignTopLeft]:"top-left"===
H,[t.CSS.alignBottomLeft]:"bottom-left"===H,[t.CSS.alignTopRight]:"top-right"===H,[t.CSS.alignBottomRight]:"bottom-right"===H,[t.CSS.isDocked]:O&&M,[t.CSS.shadow]:O&&!M,[t.CSS.isDockedTopLeft]:"top-left"===G,[t.CSS.isDockedTopCenter]:"top-center"===G,[t.CSS.isDockedTopRight]:"top-right"===G,[t.CSS.isDockedBottomLeft]:"bottom-left"===G,[t.CSS.isDockedBottomCenter]:"bottom-center"===G,[t.CSS.isDockedBottomRight]:"bottom-right"===G,[t.CSS.isFeatureMenuOpen]:P,[t.CSS.isActionsMenuOpen]:O&&1<Q.length&&
C}),role:"presentation","data-layer-title":aa,"data-layer-id":ba,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},O?[this.renderMainContainer(),this.renderPointer()]:null)};F.renderLoadingIcon=function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes(t.CSS.icon,t.CSS.iconLoading,t.CSS.rotating)})};F.renderNavigationLoading=function(){const {messagesCommon:C}=this;return this.viewModel.pendingPromisesCount?K.tsx("div",{key:U("loading-container"),role:"presentation",
class:t.CSS.loadingContainer,"aria-label":C.loading,title:C.loading},this.renderLoadingIcon()):null};F.renderPreviousIcon=function(){const C=X.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes(t.CSS.icon,{[t.CSS.iconRightTriangleArrow]:C,[t.CSS.paginationPreviousIconRTL]:C,[t.CSS.iconLeftTriangleArrow]:!C,[t.CSS.paginationPreviousIconLTR]:!C})})};F.renderPreviousButton=function(){const {messages:C}=this;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,
onkeydown:this._previous,class:this.classes(t.CSS.button,t.CSS.paginationPrevious),"aria-label":C.previous,title:C.previous},this.renderPreviousIcon())};F.renderNextIcon=function(){const C=X.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes(t.CSS.icon,{[t.CSS.iconLeftTriangleArrow]:C,[t.CSS.paginationNextIconRTL]:C,[t.CSS.iconRightTriangleArrow]:!C,[t.CSS.paginationNextIconLTR]:!C})})};F.renderNextButton=function(){const {messages:C}=this;return K.tsx("div",{role:"button",
tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(t.CSS.button,t.CSS.paginationNext),"aria-label":C.next,title:C.next},this.renderNextIcon())};F.renderFeatureMenuButton=function(){const {featureMenuOpen:C,featureMenuId:M,messagesCommon:P}=this,{featureCount:W,selectedFeatureIndex:H}=this.viewModel;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,
class:this.classes(t.CSS.button,t.CSS.featureMenuButton),"aria-haspopup":"true","aria-controls":M,"aria-expanded":C.toString(),"aria-label":P.menu,title:P.menu},this._getPageText(W,H))};F.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]};F.renderDockIcon=function(){const {dockEnabled:C}=this,M=this._wouldDockTo();return K.tsx("span",{"aria-hidden":"true",class:this.classes({[t.CSS.iconUndock]:C,
[t.CSS.iconDock]:!C,[t.CSS.iconDockToRight]:!C&&("top-right"===M||"bottom-right"===M),[t.CSS.iconDockToLeft]:!C&&("top-left"===M||"bottom-left"===M),[t.CSS.iconDockToTop]:!C&&"top-center"===M,[t.CSS.iconDockToBottom]:!C&&"bottom-center"===M},t.CSS.icon)})};F.renderDockButton=function(){const {dockEnabled:C,messages:M}=this,P=C?M.undock:M.dock;return"xsmall"!==this.viewModel?.view?.widthBreakpoint&&this.dockOptions?.buttonEnabled?K.tsx("div",{role:"button","aria-label":P,title:P,tabIndex:0,bind:this,
onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(t.CSS.button,t.CSS.buttonDock)},this.renderDockIcon()):null};F.renderTitle=function(){const {title:C}=this.viewModel,{titleId:M,collapsible:P,contentCollapsed:W,messagesCommon:H}=this;var G={[t.CSS.headerContainerButton]:P};const O=K.tsx(B.Heading,{level:this.headingLevel,class:t.CSS.headerTitle,innerHTML:C??""});G=P?K.tsx("button",{key:`${C}--collapsible`,
id:M,title:W?H.expand:H.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(t.CSS.headerContainer,G),"aria-expanded":W?"false":"true",onclick:this._toggleCollapsed,type:"button"},O,K.tsx("calcite-icon",{class:t.CSS.collapseIcon,key:"collapse-icon",icon:W?"chevron-down":"chevron-up",scale:"m"})):K.tsx("div",{key:C??"title",id:M,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(t.CSS.headerContainer,G)},O);return C?G:null};F.renderCloseIcon=
function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes(t.CSS.icon,t.CSS.iconClose)})};F.renderCloseButton=function(){const {visibleElements:C,messagesCommon:M}=this;return C.closeButton?K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:t.CSS.button,"aria-label":M.close,title:M.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};F.renderHeader=function(){return K.tsx("header",
{class:t.CSS.header},this.renderTitle(),K.tsx("div",{class:t.CSS.headerButtons},this.renderDockButton(),this.renderCloseButton()))};F.renderContentContainer=function(){const {contentId:C,hasContent:M,contentCollapsed:P,_flowItems:W}=this,{content:H}=this.viewModel,G=W.toArray(),O={[t.CSS.contentHasFlows]:!!G.length};return M&&!P?K.tsx("div",{key:H??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:C,class:this.classes(t.CSS.content,O)},K.tsx("calcite-flow",{bind:this},K.tsx("calcite-flow-item",
{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:X.storeNode,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),G.map(Q=>this.renderFlowItem(Q))),G.map(Q=>this.renderFlowItemTooltips(Q))):null};F.renderFlowItem=function(C){const {messages:M}=this,P=Y.isDarkTheme(),W="graphic"in C&&!C.isTable;return K.tsx("calcite-flow-item",{bind:this,class:this.classes({[t.CSS.calciteThemeDark]:!P,[t.CSS.calciteThemeLight]:P}),heading:C.title??"",description:this._getFlowItemDescription(C),
onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${C.viewModel.uid}`},K.tsx("calcite-action",{class:t.CSS.actionExit,icon:"move-up",label:M?.exitRelatedRecords,text:M?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:H=>this._storeExitRelatedRecordsAction(C,H),onclick:this._destroyFlowItemWidgets}),W?K.tsx("calcite-action",{class:t.CSS.actionSelectFeature,icon:"zoom-to-object",label:M?.selectFeature,text:M?.selectFeature,slot:"header-actions-end",bind:this,afterCreate:H=>
this._storeFeatureSelectionAction(C,H),onclick:()=>this._handleOpenRelatedFeature(C)}):null,K.tsx("div",{class:this.classes(t.CSS.contentFlowItem,{[t.CSS.calciteThemeDark]:P,[t.CSS.calciteThemeLight]:!P})},C.render()))};F.renderFlowItemTooltips=function(C){const {messages:M,_exitRelatedRecordsActions:P,_featureSelectionActions:W}=this,H=Y.isDarkTheme(),G=W.get(C);return[K.tsx("calcite-tooltip",{class:this.classes({[t.CSS.calciteThemeDark]:!H,[t.CSS.calciteThemeLight]:H}),key:`exit-related-records-tooltip-${C.viewModel.uid}`,
label:M?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:P.get(C),placement:"top"},M?.exitRelatedRecords),G?K.tsx("calcite-tooltip",{class:this.classes({[t.CSS.calciteThemeDark]:!H,[t.CSS.calciteThemeLight]:H}),key:`select-related-record-tooltip-${C.viewModel.uid}`,label:M?.selectFeature,overlayPositioning:"fixed",referenceElement:G,placement:"top"},M?.selectFeature):null]};F.renderActionsMenuButton=function(){const {actionsMenuId:C,actionsMenuButtonId:M,actionsMenuOpen:P,dividedActions:W,
messagesCommon:H}=this,G=P?H.close:H.open,{menuActions:O}=W;return O.length?K.tsx("div",{key:U("actions-menu-button"),class:this.classes(t.CSS.button,t.CSS.actionsMenuButton),role:"button",id:M,"aria-haspopup":"true","aria-controls":P?C:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":G,title:G},K.tsx("span",{"aria-hidden":"true",class:t.CSS.iconActionsMenu})):
null};F.renderMenuActions=function(){const {actionsMenuId:C,actionsMenuButtonId:M,actionsMenuOpen:P,dividedActions:W}=this,{menuActions:H}=W;return H.length&&P?K.tsx("ul",{id:C,role:"menu","aria-labelledby":M,key:U("actions"),class:t.CSS.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},H.toArray().map(G=>this.renderAction({action:G,type:"menu-item"}))):null};F.renderInlineActions=function(){const {inlineActions:C}=
this.dividedActions;return C.length?C.toArray().map(M=>this.renderAction({action:M,type:"inline"})):[]};F.renderInlineActionsContainer=function(){const {inlineActions:C,menuActions:M}=this.dividedActions,P=!!C.length,W=!!M.length;return P||W?K.tsx("div",{key:"inline-actions-container","data-inline-actions":P.toString(),"data-menu-actions":W.toString(),class:t.CSS.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};F.renderNavigation=function(){return this.featureNavigationVisible?
K.tsx("section",{key:U("navigation"),class:this.classes(t.CSS.navigation)},this.renderNavigationButtons()):null};F.renderFooter=function(){const {featureNavigationVisible:C,dividedActions:M}=this,{inlineActions:P,menuActions:W}=M,H=!!P.length,G={[t.CSS.footerHasPagination]:C,[t.CSS.footerHasActions]:H,[t.CSS.footerHasActionsMenu]:!!W.length};return C||H?K.tsx("div",{key:U("feature-buttons"),class:this.classes(t.CSS.footer,G)},this.renderInlineActionsContainer(),this.renderNavigation()):null};F.renderFeatureMenuContainer=
function(){var {messages:C}=this;const {featureViewModels:M,isLoadingFeature:P}=this.viewModel;C=S.substitute(C.selectedFeatures,{total:M.length});return K.tsx("section",{key:U("menu"),class:t.CSS.featureMenu},K.tsx("strong",{class:t.CSS.featureMenuHeader},C),K.tsx("nav",{bind:this,class:t.CSS.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:X.storeNode},this.renderFeatureMenu(),K.tsx("div",{class:t.CSS.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
P?K.tsx("div",{class:t.CSS.featureMenuLoader},this.renderLoadingIcon()):null))};F.renderPointer=function(){return this.dockEnabled?null:K.tsx("div",{key:U("pointer"),class:t.CSS.pointer,role:"presentation"},K.tsx("div",{class:this.classes(t.CSS.pointerDirection,t.CSS.shadow)}))};F.renderMainContainer=function(){const {dockEnabled:C,currentAlignment:M,currentDockPosition:P,titleId:W,contentId:H,collapsible:G,hasContent:O,contentCollapsed:Q,visibleElements:aa}=this,{title:ba}=this.viewModel,da="bottom-left"===
M||"bottom-center"===M||"bottom-right"===M||"top-left"===P||"top-center"===P||"top-right"===P,ia="top-left"===M||"top-center"===M||"top-right"===M||"bottom-left"===P||"bottom-center"===P||"bottom-right"===P;return K.tsx("div",{class:this.classes(t.CSS.main,t.CSS.widget,{[t.CSS.shadow]:C,[t.CSS.isCollapsible]:G,[t.CSS.isCollapsed]:Q}),tabIndex:aa.closeButton?void 0:-1,role:"dialog","aria-labelledby":ba?W:"","aria-describedby":O&&!Q?H:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
afterUpdate:this._mainContainerNodeUpdated},da?this.renderFooter():null,da?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),ia?this.renderFooter():null,ia?this.renderFeatureMenuContainer():null)};F.renderContent=function(){const C=this.viewModel?.content;return C?"string"===typeof C?K.tsx("div",{class:v.CSS.contentNode,key:C,innerHTML:C}):this.renderNodeContent(C):null};F.renderActionText=function(C){return K.tsx("span",{key:"text",class:t.CSS.actionText},C)};
F.renderActionIcon=function(C){const M=this._getActionClass(C),P=this._getActionImage(C),W={[t.CSS.iconLoading]:C.active,[t.CSS.rotating]:C.active,[t.CSS.icon]:!!M,[t.CSS.actionImage]:!C.active&&!!P};M&&(W[M]=!C.active);return K.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes(t.CSS.icon,W),styles:this._getIconStyles(P)})};F.renderAction=function(C){const {action:M,type:P}=C;C=this._getActionTitle(M);const W={[t.CSS.action]:"toggle"!==M.type,[t.CSS.actionToggle]:"toggle"===M.type,[t.CSS.actionToggleOn]:"toggle"===
M.type&&M.value,[t.CSS.buttonDisabled]:M.disabled},H=[this.renderActionIcon(M),this.renderActionText(C)];C="menu-item"===P?K.tsx("li",{key:M.uid,role:"menuitem",tabIndex:0,title:C,"aria-label":C,class:this.classes(t.CSS.button,W),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":M.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},H):K.tsx("div",{key:M.uid,role:"button",tabIndex:0,title:C,"aria-label":C,class:this.classes(t.CSS.button,W),onkeyup:this._handleActionMenuItemKeyup,
bind:this,"data-action-uid":M.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},H);return M.visible?C:null};F.renderFeatureMenuItem=function(C,M){const {messages:P,messagesCommon:W}=this,{selectedFeatureIndex:H,selectedFeatureViewModel:G}=this.viewModel;var O=C===G;const Q={[t.CSS.featureMenuSelected]:O};O=O?K.tsx("span",{key:U(`feature-menu-selected-feature-${H}`),title:P.selectedFeature,"aria-label":P.selectedFeature,class:t.CSS.iconCheckMark}):null;C=K.tsx("span",{innerHTML:C.title||
W.untitled});return K.tsx("li",{role:"menuitem",tabIndex:-1,key:U(`feature-menu-feature-${H}`),class:this.classes(Q,t.CSS.featureMenuItem),bind:this,"data-feature-index":M,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},K.tsx("span",{class:t.CSS.featureMenuTitle},C,O))};F.renderFeatureMenu=function(){const {featureMenuId:C}=
this,{featureViewModels:M}=this.viewModel;return 1<M.length?K.tsx("ol",{class:t.CSS.featureMenuList,id:C,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},M.filter(P=>!!P.graphic).map((P,W)=>this.renderFeatureMenuItem(P,W))):null};F._storeFeatureSelectionAction=function(C,M){this._featureSelectionActions.set(C,M);this.scheduleRender()};F._storeExitRelatedRecordsAction=function(C,M){this._exitRelatedRecordsActions.set(C,
M);this.scheduleRender()};F._getFlowItemDescription=function(C){return"featureCountDescription"in C?C.featureCountDescription:C.viewModel.description??""};F._openRelatedFeature=async function(C){await C.viewModel.updateGeometry();C=C.graphic;var M=C?.geometry;x.isNone(M)||x.isNone(C)||(this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:M}),M=A.getPointFromGeometry(M),this.open({features:[C],location:x.isSome(M)?M:void 0}))};F._destroyFlowItemWidgets=function(){this._flowItems.removeAll().forEach(C=>
{"showAllEnabled"in C.viewModel&&(C.viewModel.showAllEnabled=!1);C.viewModel=null;C.destroy()})};F._handleBackClick=function(){const C=this._flowItems.pop();C&&(this._exitRelatedRecordsActions.delete(C),this._featureSelectionActions.delete(C),"showAllEnabled"in C.viewModel&&(C.viewModel.showAllEnabled=!1),C&&(C.viewModel=null,C.destroy()))};F._getActionTitle=function(C){const {messages:M,selectedFeature:P,messagesCommon:W}=this,{id:H}=C,G=P?.attributes,O=C.title??"";return(C="zoom-to-feature"===H?
S.substitute(O,{messages:M}):"remove-selected-feature"===H?S.substitute(O,{messages:W}):"zoom-to-clustered-features"===H?S.substitute(O,{messages:M}):"browse-clustered-features"===H?S.substitute(O,{messages:M}):C.title)&&G?S.substitute(C,G):C??""};F._getActionClass=function(C){var {selectedFeature:M}=this;M=M?.attributes;const {className:P,image:W}=C;return(C=W||P?P:t.CSS.iconDefaultAction)&&M?S.substitute(C,M):C??""};F._getActionImage=function(C){var {selectedFeature:M}=this;M=M?.attributes;({image:C}=
C);return C&&M?S.substitute(C,M):C??""};F._createFeatureUpdatedAnimation=function(){return X.cssTransition("enter",t.CSS.hasFeatureUpdated)};F._getInlineActionCount=function(){const {maxInlineActions:C,featureNavigationVisible:M}=this;if("number"!==typeof C)return null;const P=Math.round(C);return Math.max(M?P-1:P,0)};F._watchActions=function(){const {allActions:C}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");C&&C.forEach(M=>{this._handles.add(u.watch(()=>[M.uid,
M.active,M.className,M.disabled,M.id,M.title,M.image,M.visible],()=>this.scheduleRender()),"actions")})};F._divideActions=function(){var {allActions:C}=this.viewModel;C=C.filter(H=>H.visible);const M=this._getInlineActionCount(),P=null===M,W=0===M;return{inlineActions:P?C.slice(0):W?new w:C.slice(0,M),menuActions:P?new w:W?C.slice(0):C.slice(M)}};F._featureMenuOpenChanged=function(C){C?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};F._actionsMenuOpenChanged=function(C){C?this._focusFirstAction=
!0:this._focusActionsMenuButton=!0};F._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:C,messagesCommon:M}=this;C&&(this.viewModel.title="error"===C.viewModel?.state?M.errorMessage:C.viewModel?.title||"")};F._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:C}=this;C&&(this.viewModel.content=C)};F._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};
F._featureMenuIntersectionObserverCreated=function(C){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(C);this._featureMenuIntersectionObserverNode=C};F._handleFeatureMenuKeyup=function(C){"Escape"===y.eventKey(C)&&(C.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};F._handleActionMenuKeyup=function(C){"Escape"===y.eventKey(C)&&(C.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};
F._setActiveFeature=function(C){const {viewModel:M}=this;M.activeFeature=M.features[C.currentTarget["data-feature-index"]]||null};F._removeActiveFeature=function(){this.viewModel.activeFeature=null};F._handleFeatureMenuItemKeyup=function(C){const M=y.eventKey(C);var {_featureMenuNode:P}=this;const W=C.currentTarget["data-feature-index"];if(P){P=P.querySelectorAll("li");var H=P.length;"ArrowUp"===M?(C.stopPropagation(),P[(W-1+H)%H].focus()):"ArrowDown"===M?(C.stopPropagation(),P[(W+1+H)%H].focus()):
"Home"===M?(C.stopPropagation(),P[0].focus()):"End"===M&&(C.stopPropagation(),P[P.length-1].focus())}};F._handleActionMenuItemKeyup=function(C){const M=y.eventKey(C);var {_actionsMenuNode:P}=this;const W=C.currentTarget.dataset.actionUid;var {menuActions:H}=this.dividedActions;H=H.findIndex(O=>O.uid===W);if(P){P=P.querySelectorAll("li");var G=P.length;"ArrowUp"===M?(C.stopPropagation(),P[(H-1+G)%G].focus()):"ArrowDown"===M?(C.stopPropagation(),P[(H+1+G)%G].focus()):"Home"===M?(C.stopPropagation(),
P[0].focus()):"End"===M&&(C.stopPropagation(),P[P.length-1].focus())}};F._handleMainKeyup=function(C){const M=y.eventKey(C);"ArrowLeft"===M&&(C.stopPropagation(),this.previous());"ArrowRight"===M&&(C.stopPropagation(),this.next())};F._spinnerEnabledChange=function(C){this._destroySpinner();C&&(C=this.get("viewModel.view"),this._createSpinner(C))};F._hideSpinner=function(){const {_spinner:C}=this;C&&(C.location=null,C.hide())};F._displaySpinner=function(){const {_spinner:C}=this;if(C){var {location:M,
waitingForResult:P}=this.viewModel;P&&M?C.show({location:M}):C.hide()}};F._getIconStyles=function(C){return{"background-image":C?`url(${C})`:""}};F._shouldFocus=async function(C){C?.shouldFocus&&(await u.whenOnce(()=>!0===this.viewModel?.active),this.focus())};F._addSelectedFeatureIndexHandle=function(){const C=u.watch(()=>this.viewModel?.selectedFeatureIndex,(M,P)=>this._selectedFeatureIndexUpdated(M,P));this._handles.add(C,"selected-index")};F._selectedFeatureIndexUpdated=function(C,M){const {featureCount:P}=
this;P&&C!==M&&-1!==C&&(this._destroyFlowItemWidgets(),this.featureMenuOpen=this.actionsMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))};F._destroySelectedFeatureWidget=function(){const {_feature:C}=this;C&&(C.viewModel=null,C&&!C.destroyed&&C.destroy());this._feature=null};F._isScreenLocationWithinView=function(C,M){return-1<C.x&&-1<C.y&&C.x<=M.width&&C.y<=M.height};F._isOutsideView=function(C){const {popupHeight:M,
popupWidth:P,screenLocation:W,side:H,view:G}=C;if(isNaN(P)||isNaN(M)||!G||!W)return!1;C=G.padding;return"right"===H&&W.x+P/2>G.width-C.right||"left"===H&&W.x-P/2<C.left||"top"===H&&W.y-M<C.top||"bottom"===H&&W.y+M>G.height-C.bottom?!0:!1};F._calculateAutoAlignment=function(C){if("auto"!==C)return C;const {_pointerOffsetInPx:M,_containerNode:P,_mainContainerNode:W,viewModel:H}=this,{screenLocation:G,view:O}=H;if(x.isNone(G)||!O||!P)return"top-center";if(!this._isScreenLocationWithinView(G,O))return this._get("currentAlignment")||
"top-center";var Q=(C=W?window.getComputedStyle(W,null):null)?parseInt(C.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,aa=C?parseInt(C.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:ba,width:da}=P.getBoundingClientRect();C=da+M;const ia=Math.max(ba,Q,aa)+M;Q=this._isOutsideView({popupHeight:ia,popupWidth:C,screenLocation:G,side:"right",view:O});aa=this._isOutsideView({popupHeight:ia,popupWidth:C,screenLocation:G,side:"left",view:O});const fa=this._isOutsideView({popupHeight:ia,
popupWidth:C,screenLocation:G,side:"top",view:O});C=this._isOutsideView({popupHeight:ia,popupWidth:C,screenLocation:G,side:"bottom",view:O});return aa?fa?"bottom-right":"top-right":Q?fa?"bottom-left":"top-left":fa?C?"top-center":"bottom-center":"top-center"};F._callCurrentAlignment=function(C){return"function"===typeof C?C.call(this):C};F._getCurrentAlignment=function(){const {alignment:C,dockEnabled:M}=this;return M||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(C)))};
F._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};F._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};F._calculatePositionResult=function(C){const M=["left","right"];X.isRTL(this.container)&&M.reverse();return C.replace(/leading/gi,M[0]).replace(/trailing/gi,M[1])};F._callDockPosition=function(C){return"function"===typeof C?C.call(this):C};F._getDockPosition=function(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))};
F._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};F._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};F._calculateAutoDockPosition=function(C){if("auto"!==C)return C;var M=this.viewModel?.view;C=X.isRTL(this.container)?"top-left":"top-right";if(!M)return C;var P=M.padding||{left:0,right:0,top:0,bottom:0};P=M.width-P.left-P.right;({breakpoints:M}=M);return M&&P<=M.xsmall?"bottom-center":C};F._positionContainer=
function(C=this._containerNode){C&&(this._containerNode=C);if(this._containerNode){({screenLocation:C}=this.viewModel);var {width:M}=this._containerNode.getBoundingClientRect();(C=this._calculatePositionStyle(C,M))&&Object.assign(this._containerNode.style,C)}};F._calculateFullWidth=function(C){const {currentAlignment:M,_pointerOffsetInPx:P}=this;return"top-left"===M||"bottom-left"===M||"top-right"===M||"bottom-right"===M?C+P:C};F._calculateAlignmentPosition=function(C,M,P,W){const {currentAlignment:H,
_pointerOffsetInPx:G}=this;if(P){var {padding:O}=P;W/=2;var Q=P.height-M;P=P.width-C;if("bottom-center"===H)return{top:M+G-O.top,left:C-W-O.left};if("top-left"===H)return{bottom:Q+G-O.bottom,right:P+G-O.right};if("bottom-left"===H)return{top:M+G-O.top,right:P+G-O.right};if("top-right"===H)return{bottom:Q+G-O.bottom,left:C+G-O.left};if("bottom-right"===H)return{top:M+G-O.top,left:C+G-O.left};if("top-center"===H)return{bottom:Q+G-O.bottom,left:C-W-O.left}}};F._calculatePositionStyle=function(C,M){const {dockEnabled:P,
view:W}=this;if(W){if(P)return{left:"",top:"",right:"",bottom:""};if(!x.isNone(C)&&M&&(M=this._calculateFullWidth(M),C=this._calculateAlignmentPosition(C.x,C.y,W,M)))return{top:void 0!==C.top?`${C.top}px`:"auto",left:void 0!==C.left?`${C.left}px`:"auto",bottom:void 0!==C.bottom?`${C.bottom}px`:"auto",right:void 0!==C.right?`${C.right}px`:"auto"}}};F._viewChange=function(C,M){C&&M&&(this.close(),this.clear())};F._viewReadyChange=function(C,M){C?(C=this.get("viewModel.view"),this._wireUpView(C)):M&&
(this.close(),this.clear())};F._wireUpView=function(C){this._destroySpinner();if(C){var {spinnerEnabled:M}=this;M&&this._createSpinner(C);this._setDockEnabledForViewSize(this.dockOptions)}};F._dockingThresholdCrossed=function(C,M,P){const [W,H]=C,[G,O]=M,{width:Q=0,height:aa=0}=P??{};return W<=Q&&G>Q||W>Q&&G<=Q||H<=aa&&O>aa||H>aa&&O<=aa};F._updateDockEnabledForViewSize=function(C,M){if(C&&M){var P=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},W=P.left+P.right,H=P.top+P.bottom;
P=[];var G=[];P[0]=C[0]-W;P[1]=C[1]-H;G[0]=M[0]-W;G[1]=M[1]-H;({dockOptions:C}=this);this._dockingThresholdCrossed(P,G,C.breakpoint)&&this._setDockEnabledForViewSize(C);this._setCurrentDockPosition()}};F._focusDockButtonNode=function(C){this._focusDockButton&&(this._focusDockButton=!1,C.focus())};F._closeButtonNodeUpdated=function(C){this._focusClose?(this._focusClose=!1,C.focus()):this._blurClose&&(this._blurClose=!1,C.blur())};F._mainContainerNodeUpdated=function(C){this._mainContainerNode=C;this._focusContainer?
(this._focusContainer=!1,C.focus()):this._blurContainer&&(this._blurContainer=!1,C.blur())};F._featureMenuNodeUpdated=function(C){(this._featureMenuNode=C)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,C=C.querySelectorAll("li"),C.length&&C[0].focus())};F._actionsMenuNodeUpdated=function(C){(this._actionsMenuNode=C)&&this._focusFirstAction&&(this._focusFirstAction=!1,C=C.querySelectorAll("li"),C.length&&C[0].focus())};F._focusFeatureMenuButtonNode=function(C){this._focusFeatureMenuButton&&
(this._focusFeatureMenuButton=!1,C.focus())};F._focusActionsMenuButtonNode=function(C){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,C.focus())};F._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};F._toggleScreenLocationEnabled=function(){const {dockEnabled:C,viewModel:M}=this;M&&(M.screenLocationEnabled=M.active&&!C)};F._shouldDockAtCurrentViewSize=function(C){C=C.breakpoint;var M=this.viewModel?.view?.ui;if(!M)return!1;
const {width:P,height:W}=M;if(isNaN(P)||isNaN(W)||!C)return!1;M=C.hasOwnProperty("width")&&P<=(C.width??0);C=C.hasOwnProperty("height")&&W<=(C.height??0);return M||C};F._setDockEnabledForViewSize=function(C){C.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(C))};F._getPageText=function(C,M){return this.featureNavigationVisible?S.substitute(this.messages.pageText,{index:M+1,total:C}):null};F._destroySpinner=function(){const {_spinner:C,view:M}=this;C&&(M&&M.ui&&M.ui.remove(C,"popup-spinner"),
C.destroy(),this._spinner=null)};F._createSpinner=function(C){C&&(this._spinner=new l({view:C}),C.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};F._toggleCollapsed=function(){this.collapsed=!this.collapsed};F._close=function(){this.close();this.view&&this.view.focus()};F._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};F._toggleFeatureMenu=function(){const C=!this.featureMenuOpen;this._featureMenuOpenChanged(C);this.actionsMenuOpen=
!1;this.featureMenuOpen=C};F._toggleActionsMenu=function(){const C=!this.actionsMenuOpen;this._actionsMenuOpenChanged(C);this.featureMenuOpen=!1;this.actionsMenuOpen=C};F._triggerAction=function(C){const M=C.currentTarget.dataset.actionUid;var {allActions:P}=this.viewModel;C=P.findIndex(W=>W.uid===M);(P=P.getItemAt(C))&&"toggle"===P.type&&(P.value=!P.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(C)};F._selectFeature=function(C){C=C.currentTarget["data-feature-index"];isNaN(C)||(this.viewModel.selectedFeatureIndex=
C);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};F._next=function(){this.next()};F._previous=function(){this.previous()};n._createClass(L,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},
{key:"hasContent",get:function(){const {selectedFeatureWidget:C,viewModel:M}=this;if(!C)return!!M?.content;var P=C.viewModel;if(P?.waitingForContent||"error"===P?.state)return!0;P=P?.content;return Array.isArray(P)?!!P.length:!!P}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&null!=this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",
get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"_activeFlowItemWidget",get:function(){const {_flowItems:C}=this;return C.getItemAt(C.length-1)||null}},{key:"actions",get:function(){return this.viewModel.actions},set:function(C){this.viewModel.actions=C}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?
this._get("actionsMenuOpen"):!1},set:function(C){this._set("actionsMenuOpen",!!C)}},{key:"autoCloseEnabled",get:function(){return this.viewModel.autoCloseEnabled},set:function(C){this.viewModel.autoCloseEnabled=C}},{key:"autoOpenEnabled",get:function(){return this.viewModel.autoOpenEnabled},set:function(C){this.viewModel.autoOpenEnabled=C}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(C){this.viewModel.defaultPopupTemplateEnabled=
C}},{key:"content",get:function(){return this.viewModel.content},set:function(C){this.viewModel.content=C}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||J},set:function(C){var M={...J};const P=this.viewModel?.view?.breakpoints;var W={};P&&(W.width=P.xsmall,W.height=P.xsmall);C={...M,...C};M={...M.breakpoint,...W};({breakpoint:W}=
C);"object"===typeof W?C.breakpoint={...M,...W}:W&&(C.breakpoint=M);this._set("dockOptions",C);this._setCurrentDockPosition();this.reposition()}},{key:"featureCount",get:function(){return this.viewModel.featureCount}},{key:"features",get:function(){return this.viewModel.features},set:function(C){this.viewModel.features=C}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(C){this.viewModel.goToOverride=C}},{key:"highlightEnabled",get:function(){return this.viewModel.highlightEnabled},
set:function(C){this.viewModel.highlightEnabled=C}},{key:"location",get:function(){return this.viewModel.location},set:function(C){this.viewModel.location=C}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(C){this._overrideIfSome("label",C)}},{key:"promises",get:function(){return this.viewModel.promises},set:function(C){this.viewModel.promises=C}},{key:"selectedFeature",get:function(){return this.viewModel.selectedFeature}},{key:"selectedFeatureIndex",get:function(){return this.viewModel.selectedFeatureIndex},
set:function(C){this.viewModel.selectedFeatureIndex=C}},{key:"selectedFeatureWidget",get:function(){const {_feature:C,visibleElements:M,headingLevel:P,_flowItems:W}=this,{selectedFeatureViewModel:H}=this.viewModel,G={...M,title:!1};if(!H)return null;C?(C.viewModel=H,C.visibleElements=G):this._feature=new k({flowItems:W,headingLevel:P+1,viewModel:H,visibleElements:G});return this._feature}},{key:"title",get:function(){return this.viewModel.title},set:function(C){this.viewModel.title=C}},{key:"updateLocationEnabled",
get:function(){return this.viewModel.updateLocationEnabled},set:function(C){this.viewModel.updateLocationEnabled=C}},{key:"view",get:function(){return this.viewModel.view},set:function(C){this.viewModel.view=C}},{key:"visible",get:function(){return this.viewModel.visible},set:function(C){this.viewModel.visible=C}}]);return L}(E.FeatureContentMixin(m));h.__decorate([a.property({readOnly:!0})],f.prototype,"actionsMenuId",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"actionsMenuButtonId",
null);h.__decorate([a.property({readOnly:!0})],f.prototype,"featureMenuId",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"titleId",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"contentId",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"hasContent",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"featureNavigationVisible",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"collapsible",null);h.__decorate([a.property({readOnly:!0})],f.prototype,
"featureMenuVisible",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"contentCollapsed",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"dividedActions",null);h.__decorate([a.property({readOnly:!0,dependsOn:["_flowItems.length"]})],f.prototype,"_activeFlowItemWidget",null);h.__decorate([a.property()],f.prototype,"actions",null);h.__decorate([a.property()],f.prototype,"actionsMenuOpen",null);h.__decorate([a.property()],f.prototype,"alignment",void 0);h.__decorate([a.property()],
f.prototype,"autoCloseEnabled",null);h.__decorate([a.property()],f.prototype,"autoOpenEnabled",null);h.__decorate([a.property()],f.prototype,"defaultPopupTemplateEnabled",null);h.__decorate([a.property()],f.prototype,"content",null);h.__decorate([a.property()],f.prototype,"collapsed",void 0);h.__decorate([a.property()],f.prototype,"collapseEnabled",void 0);h.__decorate([a.property({readOnly:!0})],f.prototype,"currentAlignment",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"currentDockPosition",
null);h.__decorate([a.property()],f.prototype,"dockOptions",null);h.__decorate([a.property()],f.prototype,"dockEnabled",void 0);h.__decorate([a.property({readOnly:!0})],f.prototype,"featureCount",null);h.__decorate([a.property()],f.prototype,"featureMenuOpen",void 0);h.__decorate([a.property()],f.prototype,"features",null);h.__decorate([a.property()],f.prototype,"goToOverride",null);h.__decorate([a.property()],f.prototype,"headingLevel",void 0);h.__decorate([a.property()],f.prototype,"highlightEnabled",
null);h.__decorate([a.property()],f.prototype,"location",null);h.__decorate([a.property()],f.prototype,"label",null);h.__decorate([a.property()],f.prototype,"maxInlineActions",void 0);h.__decorate([a.property(),R.messageBundle("esri/widgets/Popup/t9n/Popup")],f.prototype,"messages",void 0);h.__decorate([a.property(),R.messageBundle("esri/t9n/common")],f.prototype,"messagesCommon",void 0);h.__decorate([a.property()],f.prototype,"promises",null);h.__decorate([a.property({readOnly:!0})],f.prototype,
"selectedFeature",null);h.__decorate([a.property()],f.prototype,"selectedFeatureIndex",null);h.__decorate([a.property({readOnly:!0})],f.prototype,"selectedFeatureWidget",null);h.__decorate([a.property()],f.prototype,"spinnerEnabled",void 0);h.__decorate([a.property()],f.prototype,"title",null);h.__decorate([a.property()],f.prototype,"updateLocationEnabled",null);h.__decorate([a.property()],f.prototype,"view",null);h.__decorate([a.property({type:q}),N.vmEvent(["triggerAction","trigger-action"])],f.prototype,
"viewModel",void 0);h.__decorate([a.property()],f.prototype,"visible",null);h.__decorate([a.property()],f.prototype,"visibleElements",void 0);h.__decorate([p.cast("visibleElements")],f.prototype,"castVisibleElements",null);h.__decorate([I.accessibleHandler()],f.prototype,"_close",null);h.__decorate([I.accessibleHandler()],f.prototype,"_toggleDockEnabled",null);h.__decorate([I.accessibleHandler()],f.prototype,"_toggleFeatureMenu",null);h.__decorate([I.accessibleHandler()],f.prototype,"_toggleActionsMenu",
null);h.__decorate([I.accessibleHandler()],f.prototype,"_triggerAction",null);h.__decorate([I.accessibleHandler()],f.prototype,"_selectFeature",null);h.__decorate([I.accessibleHandler()],f.prototype,"_next",null);h.__decorate([I.accessibleHandler()],f.prototype,"_previous",null);return f=h.__decorate([e.subclass("esri.widgets.Popup")],f)})},"esri/core/throttle":function(){define(["exports"],function(r){r.throttle=function(n,h,f,w){let y=null,z=1E3;"number"===typeof h?(z=h,w=f):(y=h??null,z=f);let D=
0,x;const u=()=>{D=0;n.apply(w,x)};h=(...b)=>{y&&y.apply(w,b);x=b;z?D||(D=setTimeout(u,z)):u()};h.remove=()=>{D&&(clearTimeout(D),D=0)};h.forceUpdate=()=>{D&&(clearTimeout(D),u())};h.hasPendingUpdates=()=>!!D;return h};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureRelationship ./Feature/FeatureViewModel ./Feature/resources ./Feature/support/FeatureContentMixin ./support/componentsUtils ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d,B){var I;const R={title:!0,content:!0,lastEditedInfo:!0};f=I=function(N){function K(Y,S){Y=X.call(this,Y,S);Y._contentWidgets=[];Y.flowItems=null;Y.headingLevel=2;Y.messages=null;Y.messagesCommon=null;Y.messagesURIUtils=null;Y.visibleElements={...R};Y.viewModel=new l;return Y}n._inherits(K,N);var X=n._createSuper(K);N=K.prototype;N.initialize=function(){this.addHandles(w.watch(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),
w.initial))};N.loadDependencies=function(){return E.loadCalciteComponents({notice:()=>new Promise((Y,S)=>r(["../chunks/calcite-notice"],Y,S))})};N.destroy=function(){this._destroyContentWidgets()};N.castVisibleElements=function(Y){return{...R,...Y}};N.render=function(){var {state:Y}=this.viewModel;Y=d.tsx("div",{class:m.CSS.container,key:"container"},this.renderTitle(),"error"===Y?this.renderError():"loading"===Y?this.renderLoading():this.renderContentContainer());return d.tsx("div",{class:this.classes(m.CSS.base,
m.CSS.esriWidget)},Y)};N.setActiveMedia=function(Y,S){return this.viewModel.setActiveMedia(Y,S)};N.nextMedia=function(Y){return this.viewModel.nextMedia(Y)};N.previousMedia=function(Y){return this.viewModel.previousMedia(Y)};N.renderError=function(){const {messagesCommon:Y,messages:S,visibleElements:U}=this;return d.tsx("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},U.title?d.tsx("div",{key:"error-title",slot:"title"},Y.errorMessage):null,d.tsx("div",{key:"error-message",
slot:"message"},S.loadingError))};N.renderLoading=function(){return d.tsx("div",{key:"loading-container",class:m.CSS.loadingSpinnerContainer},d.tsx("span",{class:this.classes(m.CSS.iconLoading,m.CSS.spinner)}))};N.renderContentContainer=function(){const {visibleElements:Y}=this;return Y.content?d.tsx("div",{class:m.CSS.main},[this.renderContent(),this.renderLastEditInfo()]):null};N.renderTitle=function(){const {visibleElements:Y,title:S}=this;return Y.title?d.tsx(A.Heading,{level:this.headingLevel,
class:m.CSS.title,innerHTML:S}):null};N.renderContent=function(){var Y=this.viewModel.content;return Y?Array.isArray(Y)?Y.length?d.tsx("div",{class:m.CSS.contentNode,key:"content-content-elements"},Y.map(this.renderContentElement,this)):null:"string"===typeof Y?(Y=this._contentWidgets[0],!Y||Y.destroyed?null:d.tsx("div",{class:m.CSS.contentNode,key:"content-content"},Y.render())):this.renderNodeContent(Y):null};N.renderContentElement=function(Y,S){const {visibleElements:U}=this;if("boolean"!==typeof U.content&&
!U.content?.[Y.type])return null;switch(Y.type){case "attachments":return this.renderAttachments(S);case "custom":return this.renderCustom(Y,S);case "fields":return this.renderFields(S);case "media":return this.renderMedia(S);case "text":return this.renderText(Y,S);case "expression":return this.renderExpression(S);case "relationship":return this.renderRelationship(S);default:return null}};N.renderAttachments=function(Y){const S=this._contentWidgets[Y];if(!S||S.destroyed)return null;const {state:U,
attachmentInfos:J}=S.viewModel;return"loading"===U||0<J.length?d.tsx("div",{key:this._buildKey("attachments-element",Y),class:this.classes(m.CSS.contentElement)},S.render()):null};N.renderRelationship=function(Y){const S=this._contentWidgets[Y];return S&&!S.destroyed&&this.flowItems?d.tsx("div",{key:this._buildKey("relationship-element",Y),class:m.CSS.contentElement},S.render()):null};N.renderExpression=function(Y){const S=this._contentWidgets[Y];return!S||S.destroyed?null:d.tsx("div",{key:this._buildKey("expression-element",
Y),class:m.CSS.contentElement},S.render())};N.renderCustom=function(Y,S){({creator:Y}=Y);const U=this._contentWidgets[S];return!U||U.destroyed?null:Y?d.tsx("div",{key:this._buildKey("custom-element",S),class:m.CSS.contentElement},U.render()):null};N.renderFields=function(Y){const S=this._contentWidgets[Y];return!S||S.destroyed?null:d.tsx("div",{key:this._buildKey("fields-element",Y),class:m.CSS.contentElement},S.render())};N.renderMedia=function(Y){const S=this._contentWidgets[Y];return!S||S.destroyed?
null:d.tsx("div",{key:this._buildKey("media-element",Y),class:m.CSS.contentElement},S.render())};N.renderLastEditInfo=function(){const {visibleElements:Y,messages:S}=this;var {lastEditInfo:U}=this.viewModel;if(!U||!Y.lastEditedInfo)return null;const {date:J,user:T}=U;U=B.substitute("edit"===U.type?T?S.lastEditedByUser:S.lastEdited:T?S.lastCreatedByUser:S.lastCreated,{date:J,user:T});return d.tsx("div",{key:"edit-info-element",class:this.classes(m.CSS.lastEditedInfo,m.CSS.contentElement)},U)};N.renderText=
function(Y,S){const U=this._contentWidgets[S];return!U||U.destroyed?null:Y.text?d.tsx("div",{key:this._buildKey("text-element",S),class:this.classes(m.CSS.contentElement,m.CSS.text)},U.render()):null};N._buildKey=function(Y,...S){const U=this.get("viewModel.graphic.uid")||"0";S=S.join("-");return`${Y}__${U}-${S}`};N._destroyContentWidget=function(Y){Y&&(Y.viewModel=null,!Y.destroyed&&Y.destroy())};N._destroyContentWidgets=function(){this.removeHandles("relationship-handles");this._contentWidgets.forEach(Y=>
this._destroyContentWidget(Y));this._contentWidgets=[]};N._addFeatureRelationshipHandles=function(Y){const {flowItems:S,visibleElements:U}=this;this.addHandles([w.on(()=>Y,"select-record",({featureViewModel:J})=>{S&&(J.abilities={relationshipContent:!0},S.push(new I({flowItems:S,viewModel:J,visibleElements:U})))}),w.on(()=>Y,"show-all-records",()=>{if(S){var {viewModel:J}=Y;J.showAllEnabled=!0;J=new k({visibleElements:{title:!1,description:!1},viewModel:J});this._addFeatureRelationshipHandles(J);
S.push(J)}})],"relationship-handles")};N._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:Y,visibleElements:S}=this;var U=this.get("viewModel.content");const {contentViewModels:J}=this.viewModel;Array.isArray(U)?U.forEach((T,F)=>{"attachments"===T.type&&(this._contentWidgets[F]=new a({displayType:T.displayType,headingLevel:S.title?Y+1:Y,viewModel:J[F]}));"fields"===T.type&&(this._contentWidgets[F]=new c({viewModel:J[F]}));"media"===T.type&&(this._contentWidgets[F]=
new e({viewModel:J[F]}));"text"===T.type&&(this._contentWidgets[F]=new p({viewModel:J[F]}));"custom"===T.type&&(this._contentWidgets[F]=new p({viewModel:J[F]}));"expression"===T.type&&(this._contentWidgets[F]=new g({viewModel:J[F]}));"relationship"===T.type&&(T=new k({viewModel:J[F]}),this._addFeatureRelationshipHandles(T),this._contentWidgets[F]=T)},this):(U=J[0])&&!U.destroyed&&(this._contentWidgets[0]=new p({viewModel:U}));this.scheduleRender()};n._createClass(K,[{key:"graphic",get:function(){return this.viewModel.graphic},
set:function(Y){this.viewModel.graphic=Y}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(Y){this.viewModel.defaultPopupTemplateEnabled=Y}},{key:"isTable",get:function(){return this.viewModel.isTable}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(Y){this._overrideIfSome("label",Y)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},set:function(Y){this.viewModel.spatialReference=
Y}},{key:"title",get:function(){return this.viewModel.title}},{key:"map",get:function(){return this.viewModel.map},set:function(Y){this.viewModel.map=Y}},{key:"view",get:function(){return this.viewModel.view},set:function(Y){this.viewModel.view=Y}}]);return K}(v.FeatureContentMixin(b));h.__decorate([y.property()],f.prototype,"graphic",null);h.__decorate([y.property()],f.prototype,"defaultPopupTemplateEnabled",null);h.__decorate([y.property()],f.prototype,"flowItems",void 0);h.__decorate([y.property()],
f.prototype,"headingLevel",void 0);h.__decorate([y.property({readOnly:!0})],f.prototype,"isTable",null);h.__decorate([y.property()],f.prototype,"label",null);h.__decorate([y.property(),q.messageBundle("esri/widgets/Feature/t9n/Feature")],f.prototype,"messages",void 0);h.__decorate([y.property(),q.messageBundle("esri/t9n/common")],f.prototype,"messagesCommon",void 0);h.__decorate([y.property(),q.messageBundle("esri/widgets/support/t9n/uriUtils")],f.prototype,"messagesURIUtils",void 0);h.__decorate([y.property()],
f.prototype,"spatialReference",null);h.__decorate([y.property({readOnly:!0})],f.prototype,"title",null);h.__decorate([y.property()],f.prototype,"visibleElements",void 0);h.__decorate([z.cast("visibleElements")],f.prototype,"castVisibleElements",null);h.__decorate([y.property()],f.prototype,"map",null);h.__decorate([y.property()],f.prototype,"view",null);h.__decorate([y.property({type:l})],f.prototype,"viewModel",void 0);return f=I=h.__decorate([u.subclass("esri.widgets.Feature")],f)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g){w=function(c){function e(l,m){l=k.call(this,l,m);l._featureElementInfo=null;l.attachmentsWidget=new x;l.headingLevel=2;l.viewModel=new b;return l}r._inherits(e,c);var k=r._createSuper(e);c=e.prototype;c.initialize=function(){this._featureElementInfo=new a;this.addHandles([h.watch(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),h.initial),h.watch(()=>this.viewModel,l=>this.attachmentsWidget.viewModel=
l,h.initial)])};c.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo?.destroy()};c.render=function(){const {attachmentsWidget:l}=this;return g.tsx("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),l?.render())};c._setupFeatureElementInfo=function(){const {description:l,title:m,headingLevel:v}=this;this._featureElementInfo?.set({description:l,title:m,headingLevel:v})};r._createClass(e,[{key:"description",get:function(){return this.viewModel.description},
set:function(l){this.viewModel.description=l}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(l){this.attachmentsWidget.displayType=l}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(l){this.viewModel.graphic=l}},{key:"title",get:function(){return this.viewModel.title},set:function(l){this.viewModel.title=l}}]);return e}(u);n.__decorate([f.property({readOnly:!0})],w.prototype,"attachmentsWidget",void 0);n.__decorate([f.property()],
w.prototype,"description",null);n.__decorate([f.property()],w.prototype,"displayType",null);n.__decorate([f.property()],w.prototype,"graphic",null);n.__decorate([f.property()],w.prototype,"headingLevel",void 0);n.__decorate([f.property()],w.prototype,"title",null);n.__decorate([f.property({type:b})],w.prototype,"viewModel",void 0);return w=n.__decorate([D.subclass("esri.widgets.Feature.FeatureAttachments")],w)})},"esri/widgets/Attachments":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/maybe ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/componentsUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m){const v={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},E=window.CSS;u=function(A){function t(d,B){d=q.call(this,d,B);d.displayType="auto";d.messages=null;d.messagesUnits=null;d.selectedFile=null;d.submitting=!1;d.viewModel=null;d.visibleElements={...v};d._supportsImageOrientation=E&&E.supports&&E.supports("image-orientation","from-image");d._addAttachmentForm=
null;d._updateAttachmentForm=null;return d}n._inherits(t,A);var q=n._createSuper(t);A=t.prototype;A.initialize=function(){this.viewModel||(this.viewModel=new g);this.addHandles([y.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),y.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),y.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),y.initial)])};A.loadDependencies=function(){return e.loadCalciteComponents({icon:()=>new Promise((d,B)=>r(["../chunks/calcite-icon"],
d,B))})};A.castVisibleElements=function(d){return{...v,...d}};A.addAttachment=function(){const {_addAttachmentForm:d,viewModel:B}=this;this._set("submitting",!0);this._set("error",null);return B.addAttachment(d).then(I=>{this._set("submitting",!1);this._set("error",null);B.mode="view";return I}).catch(I=>{this._set("submitting",!1);this._set("error",new f("attachments:add-attachment",this.messages.addErrorMessage,I));throw I;})};A.deleteAttachment=function(d){const {viewModel:B}=this;this._set("submitting",
!0);this._set("error",null);return B.deleteAttachment(d).then(I=>{this._set("submitting",!1);this._set("error",null);B.mode="view";return I}).catch(I=>{this._set("submitting",!1);this._set("error",new f("attachments:delete-attachment",this.messages.deleteErrorMessage,I));throw I;})};A.updateAttachment=function(){const {viewModel:d}=this,{_updateAttachmentForm:B}=this;this._set("submitting",!0);this._set("error",null);return d.updateAttachment(B).then(I=>{this._set("submitting",!1);this._set("error",
null);d.mode="view";return I}).catch(I=>{this._set("submitting",!1);this._set("error",new f("attachments:update-attachment",this.messages.updateErrorMessage,I));throw I;})};A.addFile=function(){const d=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);this.viewModel.mode="view";return d};A.updateFile=function(){const {viewModel:d}=this,B=d.updateFile(this.selectedFile,this._updateAttachmentForm,d.activeFileInfo);d.mode="view";return B};A.deleteFile=function(d){d=this.viewModel.deleteFile(d||
this.viewModel.activeFileInfo?.file);this.viewModel.mode="view";return d};A.render=function(){const {submitting:d,viewModel:B}=this,{state:I}=B;return m.tsx("div",{class:this.classes("esri-attachments","esri-widget")},d?this.renderProgressBar():null,"loading"===I?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};A.renderErrorMessage=function(){const {error:d,visibleElements:B}=this;return d&&B.errorMessage?m.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},
d.message):null};A.renderAttachments=function(){const {activeFileInfo:d,mode:B,activeAttachmentInfo:I}=this.viewModel;return"add"===B?this.renderAddForm():"edit"===B?this.renderDetailsForm(I||d):this.renderAttachmentContainer()};A.renderLoading=function(){return m.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},m.tsx("div",{class:"esri-attachments__loader"}))};A.renderProgressBar=function(){return this.visibleElements.progressBar?m.tsx("div",{class:"esri-attachments__progress-bar",
key:"progress-bar"}):null};A.renderAddForm=function(){const {submitting:d,selectedFile:B}=this;var I=d||!B,R=this.visibleElements.cancelAddButton?m.tsx("button",{type:"button",bind:this,disabled:d,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",d&&"esri-button--disabled")},this.messages.cancel):null;I=this.visibleElements.addSubmitButton?m.tsx("button",{type:"submit",disabled:I,class:this.classes("esri-button","esri-button--secondary",
"esri-button--small","esri-button--half",{["esri-button--disabled"]:I})},this.messages.add):null;const N=B?m.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},B.name):null;R=m.tsx("form",{bind:this,afterCreate:k.storeNode,afterRemoved:k.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},m.tsx("fieldset",{class:"esri-attachments__file-fieldset"},N,m.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},
B?this.messages.changeFile:this.messages.selectFile,m.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),I,R);return m.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},R)};A.renderDetailsForm=function(d){const {visibleElements:B,viewModel:I,selectedFile:R,submitting:N}=this;var {abilities:K}=I,X=N||!R;let Y;if(R){var S=R.type;Y=R.name;var U=R.size}else if(d&&"file"in d)S=d.file.type,Y=d.file.name,
U=d.file.size;else if(d&&"contentType"in d){S=d.contentType;Y=d.name;U=d.size;var J=d.url}var T=K.editing&&K.operations?.delete&&B.deleteButton?m.tsx("button",{key:"delete-button",type:"button",disabled:N,bind:this,onclick:L=>this._submitDeleteAttachment(L,d),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:N})},this.messages.delete):void 0;X=K.editing&&K.operations?.update&&B.updateButton?m.tsx("button",{disabled:X,
key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:X})},this.messages.update):void 0;const F=this.visibleElements.cancelUpdateButton?m.tsx("button",{disabled:N,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:N})},this.messages.cancel):void 0;K=K.editing&&K.operations?.update?
m.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},m.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},Y),m.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,m.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0;U=m.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},m.tsx("label",
null,z.formatFileSize(this.messagesUnits,U??0)));S=m.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},m.tsx("label",null,S));J=w.isSome(J)?m.tsx("a",{class:"esri-attachments__item-link",href:J,rel:"noreferrer",target:"_blank"},this.renderImageMask(d,400),m.tsx("div",{class:"esri-attachments__item-link-overlay"},m.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},m.tsx("calcite-icon",{icon:"launch"})))):this.renderImageMask(d,400);T=m.tsx("form",{bind:this,
afterCreate:k.storeNode,afterRemoved:k.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:L=>this._submitUpdateAttachment(L,d)},m.tsx("div",{class:"esri-attachments__metadata"},U,S),K,m.tsx("div",{class:"esri-attachments__actions"},T,F,X));return m.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},J,T)};A.renderImageMask=function(d,B){return d?"file"in d?this.renderGenericImageMask(d.file.name,d.file.type):this.renderImageMaskForAttachment(d,B):null};A.renderGenericImageMask=
function(d,B){var {supportsResizeAttachments:I}=this.viewModel;B=c.getIconPath(B);I={["esri-attachments__image--resizable"]:I};return m.tsx("div",{class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask")},m.tsx("img",{title:d,alt:d,src:B,class:this.classes(I,"esri-attachments__image")}))};A.renderImageMaskForAttachment=function(d,B){var {supportsResizeAttachments:I}=this.viewModel;if(!d)return null;const {contentType:R,name:N,url:K}=d;if(!I||!c.isSupportedImage(R))return this.renderGenericImageMask(N,
R);d=(d=this._getCSSTransform(d))?{transform:d,"image-orientation":"none"}:{};B=`${K}${K?.includes("?")?"\x26":"?"}w=${B}`;I={["esri-attachments__image--resizable"]:I};return m.tsx("div",{class:this.classes("esri-attachments__item-mask")},m.tsx("img",{styles:d,alt:N,title:N,src:B,class:this.classes(I,"esri-attachments__image")}))};A.renderFile=function(d){const {file:B}=d;return m.tsx("li",{class:"esri-attachments__item",key:B},m.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",
title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(d),type:"button"},this.renderImageMask(d),m.tsx("label",{class:"esri-attachments__label"},m.tsx("span",{class:"esri-attachments__filename"},B.name||this.messages.noTitle),m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",k.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}))))};A.renderAttachmentInfo=function({attachmentInfo:d,displayType:B}){const {viewModel:I,
effectiveDisplayType:R}=this,{abilities:N,supportsResizeAttachments:K}=I,{contentType:X,name:Y,url:S}=d;B=this.renderImageMask(d,"list"===B?48:400);var U=N.editing?m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",k.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;U="preview"===R&&K&&c.isSupportedImage(X)?null:m.tsx("label",{class:"esri-attachments__label"},m.tsx("span",{class:"esri-attachments__filename"},Y||this.messages.noTitle),U);B=[B,
U];B=N.editing?m.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":d.id,onclick:()=>this._startEditAttachment(d),type:"button"},B):m.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:S??void 0,target:"_blank"},B);return m.tsx("li",{class:"esri-attachments__item",key:d},B)};A.renderAttachmentContainer=function(){const {effectiveDisplayType:d,
viewModel:B,visibleElements:I}=this,{attachmentInfos:R,abilities:N,fileInfos:K}=B;var X=!!R?.length;const Y=!!K?.length,S={["esri-attachments__container--list"]:"preview"!==d,["esri-attachments__container--preview"]:"preview"===d},U=N.editing&&N.operations?.add&&I.addButton?m.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon",
"esri-icon-plus")}),this.messages.add):void 0,J=X?m.tsx("ul",{key:"attachments-list",class:"esri-attachments__items"},R.toArray().map(F=>this.renderAttachmentInfo({attachmentInfo:F,displayType:d}))):void 0,T=Y?m.tsx("ul",{key:"file-list",class:"esri-attachments__items"},K.toArray().map(F=>this.renderFile(F))):void 0;X=Y||X?void 0:m.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return m.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",
S)},J,T,X,U)};A._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};A._handleFileInputChange=function(d){d=(d=d.target)&&d.files&&d.files.item(0);this._set("selectedFile",d)};A._submitDeleteAttachment=function(d,B){d.preventDefault();B&&("file"in B?this.deleteFile(B.file):B&&this.deleteAttachment(B))};A._submitAddAttachment=function(d){d.preventDefault();this.viewModel.filesEnabled?this.addFile():this.addAttachment()};A._submitUpdateAttachment=function(d,B){d.preventDefault();
B&&"file"in B?this.updateFile():this.updateAttachment()};A._startEditAttachment=function(d){const {viewModel:B}=this;B.activeFileInfo=null;B.activeAttachmentInfo=d;B.mode="edit"};A._startEditFile=function(d){const {viewModel:B}=this;B.activeAttachmentInfo=null;B.activeFileInfo=d;B.mode="edit"};A._startAddAttachment=function(){this.viewModel.mode="add"};A._cancelForm=function(d){d.preventDefault();this.viewModel.mode="view"};A._getCSSTransform=function(d){({orientationInfo:d}=d);return!this._supportsImageOrientation&&
d?[d.rotation?`rotate(${d.rotation}deg)`:"",d.mirrored?"scaleX(-1)":""].join(" "):""};n._createClass(t,[{key:"abilities",get:function(){return this.viewModel.abilities},set:function(d){this.viewModel.abilities=d}},{key:"effectiveDisplayType",get:function(){const {displayType:d}=this;return d&&"auto"!==d?d:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(d){this.viewModel.graphic=d}},{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(d){this._overrideIfSome("label",d)}}]);return t}(p);h.__decorate([D.property()],u.prototype,"abilities",null);h.__decorate([D.property()],u.prototype,"displayType",void 0);h.__decorate([D.property({readOnly:!0})],u.prototype,"effectiveDisplayType",null);h.__decorate([D.property()],u.prototype,"graphic",null);h.__decorate([D.property()],u.prototype,"label",null);h.__decorate([D.property(),l.messageBundle("esri/widgets/Attachments/t9n/Attachments")],u.prototype,"messages",void 0);h.__decorate([D.property(),
l.messageBundle("esri/core/t9n/Units")],u.prototype,"messagesUnits",void 0);h.__decorate([D.property({readOnly:!0})],u.prototype,"selectedFile",void 0);h.__decorate([D.property({readOnly:!0})],u.prototype,"submitting",void 0);h.__decorate([D.property({readOnly:!0})],u.prototype,"error",void 0);h.__decorate([D.property({type:g})],u.prototype,"viewModel",void 0);h.__decorate([D.property()],u.prototype,"visibleElements",void 0);h.__decorate([x.cast("visibleElements")],u.prototype,"castVisibleElements",
null);return u=h.__decorate([a.subclass("esri.widgets.Attachments")],u)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(r,n,h,f,w,y,z,D){function x(c,e,k){return c.units[e][k]}function u(c,e,k,l=2,m="abbr"){return`${D.formatNumber(e,{minimumFractionDigits:l,maximumFractionDigits:l,signDisplay:0<e?"never":"exceptZero"})} ${x(c,k,m)}`}function b(c,e,k,l=2,m="abbr"){return`${D.formatNumber(e,
{minimumFractionDigits:l,maximumFractionDigits:l,signDisplay:"exceptZero"})} ${x(c,k,m)}`}function a(c,e){const k=JSON.stringify(e);let l=p.get(k);l||(l=new Intl.NumberFormat("en-US",e),p.set(k,l));return/\-?\+?360/.test(l.format(c))?0:c}const p=new Map,g=["B","kB","MB","GB","TB"];r.formatAngleDegrees=function(c,e,k,l,m){m=w.unwrapOr(m,2);var v=h.cyclicalDegrees,E=v.normalize;a:if(c=z.convertUnit(c,e,"degrees"),k===l)k=c;else{switch(l){case "arithmetic":k=-c+90;break a;case "geographic":k=-c-90;break a}k=
void 0}v=E.call(v,k,0,!0);m={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:m,minimumFractionDigits:m,signDisplay:0<v?"never":"exceptZero"};v=a(v,m);return D.formatNumber(v,m)};r.formatDMS=function(c,e,k=2){c=z.convertUnit(c,e,"degrees");e=c-Math.floor(c);c-=e;e*=60;let l=e-Math.floor(e);e-=l;l*=60;return`${c.toFixed()}\u00b0 ${e.toFixed()}' ${l.toFixed(k)}"`};r.formatDecimal=u;r.formatFileSize=function(c,e){let k=0===e?0:Math.floor(Math.log(e)/Math.log(n.ByteSizeUnit.KILOBYTES));
k=f.clamp(k,0,g.length-1);e=D.formatNumber(e/n.ByteSizeUnit.KILOBYTES**k,{maximumFractionDigits:2});return y.replace(c.units.bytes[g[k]],{fileSize:e})};r.formatImperialArea=function(c,e,k,l=2,m="abbr"){const v=z.preferredImperialAreaUnit(e,k);return u(c,z.convertUnit(e,k,v),v,l,m)};r.formatImperialLength=function(c,e,k,l=2,m="abbr"){const v=z.preferredImperialLengthUnit(e,k);return u(c,z.convertUnit(e,k,v),v,l,m)};r.formatImperialRelativeLength=function(c,e,k,l=2,m="abbr"){const v=z.preferredImperialLengthUnit(e,
k);return b(c,z.convertUnit(e,k,v),v,l,m)};r.formatImperialRelativeVerticalLength=function(c,e,k,l=2,m="abbr"){const v=z.preferredImperialVerticalLengthUnit(e,k);return b(c,z.convertUnit(e,k,v),v,l,m)};r.formatImperialVerticalLength=function(c,e,k,l=2,m="abbr"){const v=z.preferredImperialVerticalLengthUnit(e,k);return u(c,z.convertUnit(e,k,v),v,l,m)};r.formatMetricArea=function(c,e,k,l=2,m="abbr"){const v=z.preferredMetricAreaUnit(e,k);return u(c,z.convertUnit(e,k,v),v,l,m)};r.formatMetricLength=
function(c,e,k,l=2,m="abbr"){const v=z.preferredMetricLengthUnit(e,k);return u(c,z.convertUnit(e,k,v),v,l,m)};r.formatMetricRelativeLength=function(c,e,k,l=2,m="abbr"){const v=z.preferredMetricLengthUnit(e,k);return b(c,z.convertUnit(e,k,v),v,l,m)};r.formatMetricRelativeVerticalLength=function(c,e,k,l=2,m="abbr"){const v=z.preferredMetricVerticalLengthUnit(e,k);return b(c,z.convertUnit(e,k,v),v,l,m)};r.formatMetricVerticalLength=function(c,e,k,l=2,m="abbr"){const v=z.preferredMetricVerticalLengthUnit(e,
k);return u(c,z.convertUnit(e,k,v),v,l,m)};r.formatRelativeAngleDegrees=function(c,e,k,l,m){k!==l&&(c=-c);m=w.unwrapOr(m,2);k={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:m,minimumFractionDigits:m,signDisplay:"exceptZero"};c=z.convertUnit(c,e,"degrees")%360;c=a(c,k);return D.formatNumber(c,k)};r.formatRelativeDecimal=b;r.unitName=x;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e){const k={editing:!1,operations:{add:!0,update:!0,delete:!0}},l=w.ofType(g);f=function(m){function v(A){var t=E.call(this,A);t._getAttachmentsPromise=null;t._attachmentLayer=null;t.abilities={...k};t.activeAttachmentInfo=null;t.activeFileInfo=null;t.attachmentInfos=new l;t.fileInfos=new w;t.graphic=null;t.mode="view";t.filesEnabled=!1;t.addHandles(D.watch(()=>t.graphic,()=>t._graphicChanged(),D.initial));return t}r._inherits(v,m);var E=r._createSuper(v);m=
v.prototype;m.destroy=function(){this.graphic=this._attachmentLayer=null};m.castAbilities=function(A){return{...k,...A}};m.getAttachments=async function(){const {_attachmentLayer:A,attachmentInfos:t}=this;if(!A||"function"!==typeof A.queryAttachments)throw new y("invalid-layer","getAttachments(): A valid layer is required.");const q=this._getObjectId();var d=new c({objectIds:[q],returnMetadata:!0});const B=[];this._getAttachmentsPromise=d=A.queryAttachments(d).then(I=>I[q]||B).catch(()=>B);this.notifyChange("state");
d=await d;t.removeAll();d.length&&t.addMany(d);this._getAttachmentsPromise=null;this.notifyChange("state");return d};m.addAttachment=async function(A,t=this.graphic){const {_attachmentLayer:q,attachmentInfos:d,abilities:B}=this;if(!t)throw new y("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!A)throw new y("invalid-attachment","addAttachment(): An attachment is required.",{attachment:A});if(!B.operations?.add)throw new y("invalid-abilities","addAttachment(): add abilities are required.");
if(!q||"function"!==typeof q.addAttachment)throw new y("invalid-layer","addAttachment(): A valid layer is required.");A=await q.addAttachment(t,A).then(I=>this._queryAttachment(I.objectId,t));d.add(A);return A};m.deleteAttachment=async function(A){const {_attachmentLayer:t,attachmentInfos:q,graphic:d,abilities:B}=this;if(!A)throw new y("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:A});if(!B.operations?.delete)throw new y("invalid-abilities","deleteAttachment(): delete abilities are required.");
if(!t||"function"!==typeof t.deleteAttachments)throw new y("invalid-layer","deleteAttachment(): A valid layer is required.");if(!d)throw new y("invalid-graphic","deleteAttachment(): A graphic is required.");const I=await t.deleteAttachments(d,[A.id]).then(()=>A);q.remove(I);return I};m.updateAttachment=async function(A,t=this.activeAttachmentInfo){const {_attachmentLayer:q,attachmentInfos:d,graphic:B,abilities:I}=this;if(!A)throw new y("invalid-attachment","updateAttachment(): An attachment is required.",
{attachment:A});if(!t)throw new y("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!I.operations?.update)throw new y("invalid-abilities","updateAttachment(): Update abilities are required.");const R=d.findIndex(N=>N===t);if(!q||"function"!==typeof q.updateAttachment)throw new y("invalid-layer","updateAttachment(): A valid layer is required.");if(!B)throw new y("invalid-graphic","updateAttachment(): A graphic is required.");A=await q.updateAttachment(B,
t.id,A).then(N=>this._queryAttachment(N.objectId));d.splice(R,1,A);return A};m.commitFiles=async function(){await Promise.all(this.fileInfos.items.map(A=>this.addAttachment(A.form)));this.fileInfos.removeAll();return this.getAttachments()};m.addFile=function(A,t){if(!A||!t)return null;A={file:A,form:t};this.fileInfos.add(A);return A};m.updateFile=function(A,t,q=this.activeFileInfo){if(!A||!t||!q)return null;const d=this.fileInfos.findIndex(B=>q===B);-1<d&&this.fileInfos.splice(d,1,{file:A,form:t});
return this.fileInfos.items[d]};m.deleteFile=function(A){const t=this.fileInfos.find(q=>q.file===A);return t?(this.fileInfos.remove(t),t):null};m._queryAttachment=async function(A,t){const {_attachmentLayer:q}=this;if(!A||!q?.queryAttachments)throw new y("invalid-attachment-id","Could not query attachment.");const d=this._getObjectId(t);A=new c({objectIds:[d],attachmentsWhere:`AttachmentId=${A}`,returnMetadata:!0});return q.queryAttachments(A).then(B=>B[d][0])};m._getObjectId=function(A=this.graphic){return A?.getObjectId()??
null};m._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};m._setAttachmentLayer=function(){var {graphic:A}=this;this._attachmentLayer=(A=e.getSourceLayer(A))?"scene"===A.type&&z.isSome(A.associatedLayer)?A.associatedLayer:A:null};r._createClass(v,[{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var {graphic:A}=this;if(!A)return!1;A=A.layer||
A.sourceLayer;return A?.loaded&&"capabilities"in A&&A.capabilities&&"operations"in A.capabilities&&"supportsResizeAttachments"in A.capabilities.operations&&A.capabilities.operations.supportsResizeAttachments||!1}}]);return v}(f);n.__decorate([x.property()],f.prototype,"abilities",void 0);n.__decorate([u.cast("abilities")],f.prototype,"castAbilities",null);n.__decorate([x.property()],f.prototype,"activeAttachmentInfo",void 0);n.__decorate([x.property()],f.prototype,"activeFileInfo",void 0);n.__decorate([x.property({readOnly:!0,
type:l})],f.prototype,"attachmentInfos",void 0);n.__decorate([x.property()],f.prototype,"fileInfos",void 0);n.__decorate([x.property({type:h})],f.prototype,"graphic",void 0);n.__decorate([x.property()],f.prototype,"mode",void 0);n.__decorate([x.property({readOnly:!0})],f.prototype,"state",null);n.__decorate([x.property()],f.prototype,"filesEnabled",void 0);n.__decorate([x.property({readOnly:!0})],f.prototype,"supportsResizeAttachments",null);return f=n.__decorate([p.subclass("esri.widgets.Attachments.AttachmentsViewModel")],
f)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),function(r,n,h,f,w,y,z,D,x){var u;const b={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,
rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};h=u=function(a){function p(c){c=g.call(this,c);c.contentType=null;c.exifInfo=null;c.id=null;c.globalId=null;c.keywords=null;c.name=null;c.parentGlobalId=null;c.parentObjectId=null;c.size=null;c.url=null;return c}r._inherits(p,a);var g=r._createSuper(p);p.prototype.clone=function(){return new u({contentType:this.contentType,
exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};r._createClass(p,[{key:"orientationInfo",get:function(){var {exifInfo:c}=this;c=x.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:c});return b[c]||null}}]);return p}(h.JSONSupport);n.__decorate([f.property({type:String})],h.prototype,"contentType",void 0);n.__decorate([f.property()],h.prototype,
"exifInfo",void 0);n.__decorate([f.property({readOnly:!0})],h.prototype,"orientationInfo",null);n.__decorate([f.property({type:w.Integer})],h.prototype,"id",void 0);n.__decorate([f.property({type:String})],h.prototype,"globalId",void 0);n.__decorate([f.property({type:String})],h.prototype,"keywords",void 0);n.__decorate([f.property({type:String})],h.prototype,"name",void 0);n.__decorate([f.property({json:{read:!1}})],h.prototype,"parentGlobalId",void 0);n.__decorate([f.property({json:{read:!1}})],
h.prototype,"parentObjectId",void 0);n.__decorate([f.property({type:w.Integer})],h.prototype,"size",void 0);n.__decorate([f.property({json:{read:!1}})],h.prototype,"url",void 0);return h=u=n.__decorate([D.subclass("esri.layers.support.AttachmentInfo")],h)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(r){function n(h){const {tagName:f,tags:w}=h;return w&&f?(h=w.find(y=>y.name===f))&&h.value||null:null}r.getExifValue=function(h){const {exifInfo:f,exifName:w,tagName:y}=h;
return f&&w&&y?(h=f.find(z=>z.name===w))?n({tagName:y,tags:h.tags}):null:null};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../layers/support/layerUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),function(r,n,h,f,w,
y,z,D,x,u,b){function a(G){return G?F.test(G):!1}function p(G,O){if(!a(O)||!G)return null;const Q=O.replace(F,"").toLowerCase();let aa=null;G.some(ba=>ba.name.toLowerCase()===Q?(aa=ba,!0):!1);return aa}function g(G,O){return(O=c(O,G))?O.name:G}function c(G,O){return G&&"function"===typeof G.getField&&O?G.getField(O)??null:null}function e({formattedAttributes:G,template:O,fieldInfoMap:Q}){return`${w.replace(w.replace(O,aa=>{const ba=Q.get(aa.toLowerCase());return`{${ba&&ba.fieldName||aa}}`}),G).replace(U,
"")}`.trim()}function k(G,O,Q=!1){const aa=O[G];"string"===typeof aa&&(Q=(Q?encodeURIComponent(aa):aa).replace(T,"%27"),O[G]=Q)}function l(G,O=!1){const Q={...G};Object.keys(Q).forEach(aa=>k(aa,Q,O));return Q}function m(G,O){return G.replace(J,(Q,aa,ba)=>(Q=c(O,ba))?`{${Q.name}}`:aa)}function v(G,O,Q){return(G=m(G,Q))?G.replace(C,(aa,ba,da)=>{ba=`${ba||da}`.trim();return w.replace(aa,l(O,ba&&"{"!==ba[0]||!1))}):G}function E(G,O){var Q=O.fieldName,aa=A(O.fieldInfos,Q)?.clone();const ba=O.preventPlacesFormatting;
O=O.layer;var da=c(O,Q);aa&&"date"===da?.type&&(da=aa.format||new u,da.dateFormat=da.dateFormat||"short-date-short-time",da.dateTimeFormatOptions=!O?.layer&&"feature"===O?.type&&O.datesInUnknownTimezone||O?.layer&&"map-image"===O.layer?.type&&O.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,aa.format=da);aa=aa&&aa.format;if("string"===typeof G&&D.isRasterPixelValueField(Q)&&aa)return aa.formatRasterPixelValue(G);"string"!==typeof G||!aa||null!=aa.dateFormat||null==aa.places&&null==aa.digitSeparator||
(Q=Number(G),isNaN(Q)||(G=Q));return"string"===typeof G||null==G||null==aa?d(G):ba?z.formatNumber(G,{...z.convertNumberFormatToIntlOptions(aa),minimumFractionDigits:0,maximumFractionDigits:20}):aa.format(G)}function A(G,O){if(G&&G.length&&O){var Q=O.toLowerCase(),aa=void 0;G.some(ba=>ba.fieldName&&ba.fieldName.toLowerCase()===Q?(aa=ba,!0):!1);return aa}}function t({fieldName:G,graphic:O,layer:Q}){if(N(G)||!Q||"function"!==typeof Q.getFeatureType)return null;const {typeIdField:aa}=Q;return aa&&G===
aa?(G=Q.getFeatureType(O))?G.name:null:null}function q({fieldName:G,value:O,graphic:Q,layer:aa}){return N(G)||!aa||"function"!==typeof aa.getFieldDomain?null:(G=Q&&aa.getFieldDomain(G,{feature:Q}))&&"coded-value"===G.type?G.getName(O):null}function d(G){return"string"===typeof G?G.replace(L,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):G}function B(G){const {value:O,fieldName:Q,fieldInfos:aa,fieldInfoMap:ba,layer:da,graphic:ia}=G;return null==O?"":(G=q({fieldName:Q,value:O,graphic:ia,layer:da}))||
(G=t({fieldName:Q,graphic:ia,layer:da}))?G:ba.get(Q.toLowerCase())?E(O,{fieldInfos:aa||Array.from(ba.values()),fieldName:Q,layer:da}):(G=da&&da.fieldsIndex)&&G.isDateField(Q)?y.formatDate(O,P):d(O)}async function I(G,O){const {layer:Q,graphic:aa,outFields:ba,objectIds:da,returnGeometry:ia,spatialReference:fa}=G;G=da[0];if("number"!==typeof G&&"string"!==typeof G)return S.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:Q,graphic:aa,objectId:G,requiredFields:ba}),
null;if(!x.getEffectiveLayerCapabilities(Q)?.operations?.supportsQuery)return S.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:Q,graphic:aa,requiredFields:ba,returnGeometry:ia}),null;G=Q.createQuery();G.objectIds=da;G.outFields=ba?.length?ba:[Q.objectIdField];G.returnGeometry=!!ia;G.returnZ=!!ia;G.returnM=!!ia;G.outSpatialReference=fa;return(await Q.queryFeatures(G,O)).features[0]}async function R(G){if(!G.expressionInfos?.length)return!1;var O=await b.loadArcade();
({arcadeUtils:{hasGeometryFunctions:O}}=O);return O(G)}function N(G=""){return G?G.includes("relationships/"):!1}function K({attributes:G,graphic:O,relatedInfo:Q,fieldInfos:aa,fieldInfoMap:ba,layer:da}){G&&O&&Q&&Object.keys(O.attributes).forEach(ia=>{var fa=(fa={layerId:Q.relation.id.toString(),fieldName:ia},`${"relationships/"}${fa.layerId}/${fa.fieldName}`);G[fa]=B({fieldName:fa,fieldInfos:aa,fieldInfoMap:ba,layer:da,value:O.attributes[ia],graphic:O})})}function X({attributes:G,relatedInfo:O,fieldInfoMap:Q,
fieldInfos:aa,layer:ba}){G&&O&&(O.relatedFeatures&&O.relatedFeatures&&O.relatedFeatures.forEach(da=>K({attributes:G,graphic:da,relatedInfo:O,fieldInfoMap:Q,fieldInfos:aa,layer:ba})),O.relatedStatsFeatures&&O.relatedStatsFeatures&&O.relatedStatsFeatures.forEach(da=>K({attributes:G,graphic:da,relatedInfo:O,fieldInfoMap:Q,fieldInfos:aa,layer:ba})))}function Y(G,O,Q){return G.find(aa=>aa!==O&&"feature"===aa.type&&aa.url===O.url&&aa.layerId===Q.relatedTableId)}const S=h.getLogger("esri.widgets.Feature.support.featureUtils"),
U=/href=(""|'')/gi,J=/(\{([^\{\r\n]+)\})/g,T=/'/g,F=/^\s*expression\//i,L=/(\n)/gi,V=/[\u00A0-\u9999<>&]/gim,C=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,M=/^(?:mailto:|tel:)/,P=y.convertDateFormatToIntlOptions("short-date-short-time"),W=G=>{if(!G)return!1;G=G.toUpperCase();return G.includes("CURRENT_TIMESTAMP")||G.includes("CURRENT_DATE")||G.includes("CURRENT_TIME")},H=({layer:G,method:O,query:Q,definitionExpression:aa})=>{G.capabilities?.query?.supportsCacheHint&&"attachments"!==O&&(G=f.isSome(Q.where)?
Q.where:null,O=f.isSome(Q.geometry)?Q.geometry:null,W(aa)||W(G)||"extent"===O?.type||"tile"===Q.resultType||(Q.cacheHint=!0))};r.applyTextFormattingHTML=d;r.createfieldInfoMap=function(G,O){const Q=new Map;if(!G)return Q;G.forEach(aa=>{const ba=g(aa.fieldName,O);aa.fieldName=ba;Q.set(ba.toLowerCase(),aa)});return Q};r.findRelatedLayer=function(G,O,Q){return G&&O&&Q?Y(G.allLayers,O,Q)||Y(G.allTables,O,Q):null};r.fixTokens=m;r.formatAttributes=function({fieldInfos:G,attributes:O,layer:Q,graphic:aa,
fieldInfoMap:ba,relatedInfos:da}){const ia={};da?.forEach(fa=>X({attributes:ia,relatedInfo:fa,fieldInfoMap:ba,fieldInfos:G,layer:Q}));O&&Object.keys(O).forEach(fa=>{ia[fa]=B({fieldName:fa,fieldInfos:G,fieldInfoMap:ba,layer:Q,value:O[fa],graphic:aa})});return ia};r.formatEditInfo=function(G,O){const {creatorField:Q,creationDateField:aa,editorField:ba,editDateField:da}=G;if(O){G=O[da];if("number"===typeof G)return O=O[ba],{type:"edit",date:y.formatDate(G,P),user:O};G=O[aa];return"number"===typeof G?
(O=O[Q],{type:"create",date:y.formatDate(G,P),user:O}):null}};r.formatValueToFieldInfo=E;r.getAllFieldInfos=function(G){const O=[];if(!G)return O;const {fieldInfos:Q,content:aa}=G;Q&&O.push(...Q);if(!aa||!Array.isArray(aa))return O;aa.forEach(ba=>{"fields"===ba.type&&(ba=ba&&ba.fieldInfos)&&O.push(...ba)});return O};r.getFieldInfo=A;r.getFieldInfoLabel=function(G,O){return(O=p(O,G?.fieldName))?O.title||null:G?G.label||G.fieldName:null};r.getFixedFieldName=g;r.getFixedFieldNames=function(G,O){return G&&
G.map(Q=>g(Q,O))};r.getSourceLayer=function(G){if(!f.isNone(G))return G.get("sourceLayer")||G.get("layer")};r.graphicCallback=async function(G,O){return"function"===typeof G?G.call(null,O):G};r.htmlEntities=function(G){return G.replace(V,O=>`&#${O.charCodeAt(0)};`)};r.isExpressionField=a;r.isRelatedField=N;r.preLayerQueryCallback=({query:G,layer:O,method:Q})=>{H({layer:O,method:Q,query:G,definitionExpression:`${O.definitionExpression} ${O.serviceDefinitionExpression}`})};r.preRequestCallback=({queryPayload:G,
layer:O,method:Q})=>{H({layer:O,method:Q,query:G,definitionExpression:`${O.definitionExpression} ${O.serviceDefinitionExpression}`})};r.querySourceLayer=I;r.queryUpdatedFeature=async function({graphic:G,popupTemplate:O,layer:Q,spatialReference:aa},ba){if(Q&&O&&("function"===typeof Q.load&&await Q.load(ba),G.attributes)){var da=G.attributes[Q.objectIdField];if(null!=da){da=[da];var ia=await O.getRequiredFields(Q.fieldsIndex),fa=D.featureHasFields(ia,G);ia=fa?[]:ia;O=O.returnGeometry||await R(O);if(!fa||
O)if(Q=await I({layer:Q,graphic:G,outFields:ia,objectIds:da,returnGeometry:O,spatialReference:aa},ba))Q.geometry&&(G.geometry=Q.geometry),Q.attributes&&(G.attributes={...G.attributes,...Q.attributes})}}};r.shouldOpenInNewTab=function(G=""){if(G)return!M.test(G.trim().toLowerCase())};r.substituteAttributes=e;r.substituteFieldsInLinksAndAttributes=function({attributes:G,globalAttributes:O,layer:Q,text:aa,expressionAttributes:ba,fieldInfoMap:da}){return aa?e({formattedAttributes:O,template:v(aa,{...O,
...ba,...G},Q),fieldInfoMap:da}):""};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(r,n){r.getIconPath=function(h){const f=n.getAssetUrl("esri/themes/base/images/files/");return h?"text/plain"===h?`${f}text-32.svg`:"application/pdf"===h?`${f}pdf-32.svg`:"text/csv"===h?`${f}csv-32.svg`:"application/gpx+xml"===h?`${f}gpx-32.svg`:"application/x-dwf"===h?`${f}cad-32.svg`:"application/postscript"===
h||"application/json"===h||"text/xml"===h||"model/vrml"===h?`${f}code-32.svg`:"application/x-zip-compressed"===h||"application/x-7z-compressed"===h||"application/x-gzip"===h||"application/x-tar"===h||"application/x-gtar"===h||"application/x-bzip2"===h||"application/gzip"===h||"application/x-compress"===h||"application/x-apple-diskimage"===h||"application/x-rar-compressed"===h||"application/zip"===h?`${f}zip-32.svg`:h.includes("image/")?`${f}image-32.svg`:h.includes("audio/")?`${f}sound-32.svg`:h.includes("video/")?
`${f}video-32.svg`:h.includes("msexcel")||h.includes("ms-excel")||h.includes("spreadsheetml")?`${f}excel-32.svg`:h.includes("msword")||h.includes("ms-word")||h.includes("wordprocessingml")?`${f}word-32.svg`:h.includes("powerpoint")||h.includes("presentationml")?`${f}report-32.svg`:`${f}generic-32.svg`:`${f}generic-32.svg`};r.isSupportedImage=function(h){h=h.toLowerCase();return"image/bmp"===h||"image/emf"===h||"image/exif"===h||"image/gif"===h||"image/x-icon"===h||"image/jpeg"===h||"image/png"===
h||"image/tiff"===h||"image/x-wmf"===h};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),function(r,
n,h,f,w,y,z,D){f=function(x){function u(a){a=b.call(this,a);a.description=null;a.title=null;return a}r._inherits(u,x);var b=r._createSuper(u);return r._createClass(u)}(D);n.__decorate([h.property()],f.prototype,"description",void 0);n.__decorate([h.property()],f.prototype,"title",void 0);return f=n.__decorate([z.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],f)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b){f=function(a){function p(c,e){c=g.call(this,c,e);c.description=null;c.headingLevel=2;c.title=null;return c}r._inherits(p,a);var g=r._createSuper(p);a=p.prototype;a.render=function(){return b.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};a.renderTitle=function(){const {title:c}=this;return c?b.tsx(x.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},c):null};a.renderDescription=function(){const {description:c}=
this;return c?b.tsx("div",{key:"description",class:"esri-feature-element-info__description"},c):null};return r._createClass(p)}(D);n.__decorate([h.property()],f.prototype,"description",void 0);n.__decorate([h.property()],f.prototype,"headingLevel",void 0);n.__decorate([h.property()],f.prototype,"title",void 0);return f=n.__decorate([z.subclass("esri.widgets.Feature.support.FeatureElementInfo")],f)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils",
"./jsxFactory"],function(r,n,h,f){const w={heading:"esri-widget__heading"};r.CSS=w;r.Heading=function({level:y,class:z,...D},x){y=n.clamp(Math.ceil(y),1,6);return f.tsx(`h${y}`,{...D,class:h.classes(w.heading,z),role:"heading","aria-level":String(y)},x)};r.incrementHeadingLevel=function(y,z=1){return n.clamp(Math.ceil(y+z),1,6)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a){f=function(p){function g(e,k){e=c.call(this,e,k);e.viewModel=null;e._addTargetToAnchors=l=>{Array.from(l.querySelectorAll("a")).forEach(m=>{u.shouldOpenInNewTab(m.href)&&!m.hasAttribute("target")&&m.setAttribute("target","_blank")})};return e}r._inherits(g,p);var c=r._createSuper(g);p=g.prototype;p.renderLoading=function(){return a.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},a.tsx("div",{class:"esri-feature-content__loader"}))};p.renderCreated=
function(){const e=this.viewModel?.created;return e?e instanceof HTMLElement?a.tsx("div",{key:e,bind:e,afterCreate:this._attachToNode}):b.isWidget(e)?a.tsx("div",{key:e},!e.destroyed&&e.render()):a.tsx("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null};p.render=function(){return a.tsx("div",{class:"esri-feature-content"},"loading"===this.viewModel?.state?this.renderLoading():this.renderCreated())};p._attachToNode=function(e){e.appendChild(this)};r._createClass(g,[{key:"creator",
get:function(){return this.viewModel?.creator},set:function(e){this.viewModel&&(this.viewModel.creator=e)}},{key:"graphic",get:function(){return this.viewModel?.graphic},set:function(e){this.viewModel&&(this.viewModel.graphic=e)}}]);return g}(D);n.__decorate([h.property()],f.prototype,"creator",null);n.__decorate([h.property()],f.prototype,"graphic",null);n.__decorate([h.property({type:x})],f.prototype,"viewModel",void 0);return f=n.__decorate([z.subclass("esri.widgets.Feature.FeatureContent")],f)})},
"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),function(r,n,h,f,w,y,z,D,x,u,b,a){f=function(p){function g(e){var k=
c.call(this,e);k._loadingPromise=null;k.created=null;k.creator=null;k.destroyer=null;k.graphic=null;k.handles.add(y.watch(()=>k.creator,l=>{k._destroyContent();k._createContent(l)},y.initial));return k}r._inherits(g,p);var c=r._createSuper(g);p=g.prototype;p.destroy=function(){this._destroyContent()};p._destroyContent=function(){const {created:e,graphic:k,destroyer:l}=this;e&&k&&(a.graphicCallback(l,{graphic:k}).catch(()=>null),this._set("created",null))};p._createContent=async function(e){var k=
this.graphic;k&&e&&(this._loadingPromise=e=a.graphicCallback(e,{graphic:k}).catch(()=>null),this.notifyChange("state"),k=await e,e===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",k)))};r._createClass(g,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return g}(w.HandleOwnerMixin(f));n.__decorate([z.property({readOnly:!0})],f.prototype,"created",void 0);n.__decorate([z.property()],f.prototype,"creator",void 0);n.__decorate([z.property()],
f.prototype,"destroyer",void 0);n.__decorate([z.property({type:h})],f.prototype,"graphic",void 0);n.__decorate([z.property({readOnly:!0})],f.prototype,"state",null);return f=n.__decorate([b.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],f)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c){w=function(e){function k(m,v){m=l.call(this,m,v);m._contentWidget=null;m.viewModel=new p;return m}r._inherits(k,e);var l=r._createSuper(k);e=k.prototype;e.initialize=function(){this.addHandles(h.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),h.initial))};e.destroy=function(){this._destroyContentWidget()};e.renderLoading=function(){return c.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},c.tsx("span",
{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};e.render=function(){const {state:m}=this.viewModel;return c.tsx("div",{class:"esri-feature-expression"},"loading"===m?this.renderLoading():"disabled"===m?null:this._contentWidget?.render())};e._destroyContentWidget=function(){const {_contentWidget:m}=this;m&&(m.viewModel=null,m.destroy());this._contentWidget=null};e._setupExpressionWidget=function(){const {contentElementViewModel:m,contentElement:v}=
this.viewModel,E=v?.type;this._destroyContentWidget();this._contentWidget=m?"fields"===E?new b({viewModel:m}):"media"===E?new a({viewModel:m}):"text"===E?new u({viewModel:m}):null:null;this.scheduleRender()};return r._createClass(k)}(x);n.__decorate([f.property({type:p})],w.prototype,"viewModel",void 0);return w=n.__decorate([D.subclass("esri.widgets.Feature.FeatureExpression")],w)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c){w=function(e){function k(m,v){m=l.call(this,m,v);m._featureElementInfo=null;m.viewModel=new u;m.messages=null;m.messagesURIUtils=null;return m}r._inherits(k,e);var l=r._createSuper(k);e=k.prototype;e.initialize=function(){this._featureElementInfo=new b;this.addHandles(h.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),h.initial))};e.destroy=function(){this._featureElementInfo?.destroy()};e.renderFieldInfo=function(m,
v){var {attributes:E}=this.viewModel;const A=m.fieldName,t=m.label||A;E=E?null==E[A]?"":E[A]:"";m=!(!m.format||!m.format.dateFormat);E="number"!==typeof E||m?a.autoLink(this.messagesURIUtils,E):this._forceLTR(E);m={["esri-feature-fields__field-data--date"]:m};return c.tsx("tr",{key:`fields-element-info-row-${A}-${v}`},c.tsx("th",{key:`fields-element-info-row-header-${A}-${v}`,class:"esri-feature-fields__field-header",innerHTML:t}),c.tsx("td",{key:`fields-element-info-row-data-${A}-${v}`,class:this.classes("esri-feature-fields__field-data",
m),innerHTML:E}))};e.renderFields=function(){const {formattedFieldInfos:m}=this.viewModel;return m?.length?c.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},c.tsx("tbody",null,m.map((v,E)=>this.renderFieldInfo(v,E)))):null};e.render=function(){return c.tsx("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())};e._setupFeatureElementInfo=function(){const {description:m,title:v}=this;this._featureElementInfo?.set({description:m,title:v})};
e._forceLTR=function(m){return`&lrm;${m}`};r._createClass(k,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(m){this.viewModel.attributes=m}},{key:"description",get:function(){return this.viewModel.description},set:function(m){this.viewModel.description=m}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(m){this.viewModel.expressionInfos=m}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(m){this.viewModel.fieldInfos=
m}},{key:"title",get:function(){return this.viewModel.title},set:function(m){this.viewModel.title=m}}]);return k}(x);n.__decorate([f.property()],w.prototype,"attributes",null);n.__decorate([f.property()],w.prototype,"description",null);n.__decorate([f.property()],w.prototype,"expressionInfos",null);n.__decorate([f.property()],w.prototype,"fieldInfos",null);n.__decorate([f.property()],w.prototype,"title",null);n.__decorate([f.property({type:u,nonNullable:!0})],w.prototype,"viewModel",void 0);n.__decorate([f.property(),
g.messageBundle("esri/widgets/Feature/t9n/Feature")],w.prototype,"messages",void 0);n.__decorate([f.property(),g.messageBundle("esri/widgets/support/t9n/uriUtils")],w.prototype,"messagesURIUtils",void 0);return w=n.__decorate([D.subclass("esri.widgets.Feature.FeatureFields")],w)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b){h=function(a){function p(c){c=g.call(this,c);c.attributes=null;c.expressionInfos=null;c.description=null;c.fieldInfos=null;c.title=null;return c}r._inherits(p,a);var g=r._createSuper(p);r._createClass(p,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:c,fieldInfos:e}=this,k=[];e?.forEach(l=>{if(!l.hasOwnProperty("visible")||l.visible)l=l.clone(),l.label=b.getFieldInfoLabel(l,c),k.push(l)});return k}}]);return p}(h);n.__decorate([f.property()],h.prototype,
"attributes",void 0);n.__decorate([f.property({type:[x]})],h.prototype,"expressionInfos",void 0);n.__decorate([f.property()],h.prototype,"description",void 0);n.__decorate([f.property({type:[u]})],h.prototype,"fieldInfos",void 0);n.__decorate([f.property({readOnly:!0})],h.prototype,"formattedFieldInfos",null);n.__decorate([f.property()],h.prototype,"title",void 0);return h=n.__decorate([D.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],h)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(r,n){function h(w){let y=null;f.some(z=>{z.pattern.test(w)&&(y=z);return!!y});return y}const f=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];r.autoLink=function(w,y){if("string"!==typeof y||!y)return y;const z=h(y);if(!z)return y;const D=y.match(z.pattern);
w=n.replace(n.replace(z.label,{messages:w,hierPart:D&&D[2]}),{appName:z.appName});return y.replace(z.pattern,`<a${z.target?` target="${z.target}"`:""} href="$1"${"_blank"===z.target?' rel\x3d"noreferrer"':""}>${w}</a>`)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m){y=function(v){function E(t,q){var d=A.call(this,t,q);d._refreshTimer=null;d._refreshIntervalInfo=null;d._featureElementInfo=null;d.viewModel=new a;d.messages=null;d._getChartDependencies=async B=>{const I=await c.loadChartsModule(),{destroyed:R,viewModel:N}=r._assertThisInitialized(d);if(!R&&N&&B){var {activeMediaInfo:K}=N,X=await d._getRendererColors(I);d._renderChart({chartDiv:B,mediaInfo:K,chartsModule:I,colorMap:X})}};return d}r._inherits(E,v);var A=
r._createSuper(E);v=E.prototype;v.initialize=function(){this._featureElementInfo=new p;this.addHandles([f.watch(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),f.initial),f.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),f.initial)])};v.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo?.destroy()};v.render=function(){return l.tsx("div",{bind:this,class:"esri-feature-media",
onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())};v.renderMedia=function(){const {formattedMediaInfoCount:t}=this.viewModel;return t?l.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};v.renderImageMediaInfo=function(t){var {_refreshIntervalInfo:q}=this;const {activeMediaInfoIndex:d,formattedMediaInfoCount:B}=this.viewModel,{value:I,
refreshInterval:R,altText:N,title:K,type:X}=t,{sourceURL:Y,linkURL:S}=I;t=g.shouldOpenInNewTab(S??void 0)?"_blank":"_self";const U="_blank"===t?"noreferrer":"";q=R?q:null;q=l.tsx("img",{alt:N||K,key:`media-${X}-${d}-${B}-${q?q.timestamp:0}`,src:(q?q.sourceURL:Y)??void 0});return(S?l.tsx("a",{title:K,href:S,rel:U,target:t},q):null)??q};v.renderChartMediaInfo=function(t){const {activeMediaInfoIndex:q,formattedMediaInfoCount:d}=this.viewModel;return l.tsx("div",{key:`media-${t.type}-${q}-${d}`,bind:this,
class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};v.renderMediaInfoType=function(){const {activeMediaInfo:t}=this.viewModel;return t?"image"===t.type?this.renderImageMediaInfo(t):t.type.includes("chart")?this.renderChartMediaInfo(t):null:null};v.renderMediaInfo=function(){var {activeMediaInfo:t}=this.viewModel;if(!t)return null;const q=t.title?l.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:t.title}):null;t=t.caption?l.tsx("div",{key:"media-caption",
class:"esri-feature-media__item-caption",innerHTML:t.caption}):null;return l.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},l.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),q,t)};v.renderMediaPageButton=function(t){if(2>this.viewModel.formattedMediaInfoCount)return null;const q=(t="previous"===t)?this.messages.previous:this.messages.next,d=t?this.classes("esri-feature-media__button","esri-feature-media__previous"):
this.classes("esri-feature-media__button","esri-feature-media__next"),B=t?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),I=t?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");
return l.tsx("button",{type:"button",key:t?"media-previous":"media-next",title:q,"aria-label":q,tabIndex:0,class:d,bind:this,onclick:t?this._previous:this._next},l.tsx("span",{"aria-hidden":"true",class:B}),l.tsx("span",{"aria-hidden":"true",class:I}))};v._setupFeatureElementInfo=function(){const {description:t,title:q}=this;this._featureElementInfo?.set({description:t,title:q})};v._next=function(){this.viewModel.next()};v._previous=function(){this.viewModel.previous()};v._getRenderer=function(){const {isAggregate:t,
layer:q}=this.viewModel;return t&&q?.featureReduction&&"renderer"in q.featureReduction?q.featureReduction.renderer:q?.renderer};v._getRendererColors=async function(t){const {am4core:q}=t,d=new Map;t=this._getRenderer();if(!t)return d;const B=await u.getColorsFromRenderer(t);B.delete("default");if(!Array.from(B.values()).every(I=>1===I?.length))return d;d.set("default-line-value",q.color({r:50,g:50,b:50,a:1}));Array.from(B.keys()).forEach(I=>{I&&d.set(I,q.color(B.get(I)?.[0].toCss(!0)))});return d};
v._handleMediaKeyup=function(t){const q=h.eventKey(t);"ArrowLeft"===q&&(t.stopPropagation(),this.viewModel.previous());"ArrowRight"===q&&(t.stopPropagation(),this.viewModel.next())};v._renderChart=function(t){const {abilities:q}=this.viewModel,{chartsModule:d,chartDiv:B,mediaInfo:I,colorMap:R}=t,{value:N,type:K}=I,{am4core:X}=d,Y=c.getColorSet(X);m.isDarkTheme()&&X.useTheme(d.am4themes_dark);const S=window.matchMedia("(prefers-reduced-motion: reduce)");q.chartAnimation&&!S.matches?X.useTheme(d.am4themes_animated):
X.unuseTheme(d.am4themes_animated);X.useTheme(function(U){U instanceof X.ColorSet&&Y&&(U.list=Y)});t="pie-chart"===K?this._createPieChart(t):this._createXYChart(t);B.setAttribute("aria-label",I.altText||I.title);t.data=N.series.map(U=>({tooltip:U.tooltip,value:U.value,color:R.get(U.fieldName)})).filter(U=>"pie-chart"===K?null!=U.value&&0<U.value:!0)};v._customizeChartTooltip=function(t,q){t&&(t.label.wrap=!0,t.label.maxWidth=200,t.autoTextColor=!1,t.getFillFromObject=!1,t.label.fill=q.color("#ffffff"),
t.background.fill=q.color({r:0,g:0,b:0,a:.7}))};v._createPieChart=function(t){const {chartDiv:q,chartsModule:d}=t,{am4core:B,am4charts:I}=d;t=B.create(q,I.PieChart);t.rtl=e.isRTL(this.container);const R=t.series.push(new I.PieSeries);R.labels.template.disabled=!0;R.ticks.template.disabled=!0;R.dataFields.value="value";R.dataFields.category="tooltip";this._customizeChartTooltip(R.tooltip,B);R.slices.template.propertyFields.fill="color";R.slices.template.propertyFields.stroke="color";return t};v._getMinSeriesValue=
function(t){let q=0;t.forEach(d=>q=Math.min(d.value,q));return q};v._createColumnChart=function(t,q){const {chartsModule:d,mediaInfo:B}=q;({value:q}=B);const {am4core:I,am4charts:R}=d;var N=t.xAxes.push(new R.CategoryAxis);N.dataFields.category="tooltip";N.renderer.labels.template.disabled=!0;const K=N.tooltip;this._customizeChartTooltip(K,I);K.events.on("sizechanged",()=>{K.dy=-K.contentHeight});N=t.yAxes.push(new R.ValueAxis);const X=N.renderer.labels.template;N.renderer.minLabelPosition=.05;N.renderer.maxLabelPosition=
.95;N.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(N.tooltip,I);X.wrap=!0;N=t.series.push(new R.ColumnSeries);N.dataFields.valueY="value";N.dataFields.categoryX="tooltip";N.columns.template.propertyFields.fill="color";N.columns.template.propertyFields.stroke="color";t.cursor=new R.XYCursor;15<q.series.length&&(t.scrollbarX=new I.Scrollbar)};v._createBarChart=function(t,q){const {chartsModule:d,mediaInfo:B}=q;({value:q}=B);const {am4core:I,am4charts:R}=d;var N=t.yAxes.push(new R.CategoryAxis);
N.dataFields.category="tooltip";N.renderer.inversed=!0;N.renderer.labels.template.disabled=!0;const K=N.tooltip;this._customizeChartTooltip(K,I);K.events.on("sizechanged",()=>{K.dx=K.contentWidth});N=t.xAxes.push(new R.ValueAxis);const X=N.renderer.labels.template;N.renderer.minLabelPosition=.05;N.renderer.maxLabelPosition=.95;N.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(N.tooltip,I);X.wrap=!0;N=t.series.push(new R.ColumnSeries);N.dataFields.valueX="value";N.dataFields.categoryY=
"tooltip";N.columns.template.propertyFields.fill="color";N.columns.template.propertyFields.stroke="color";t.cursor=new R.XYCursor;15<q.series.length&&(t.scrollbarY=new I.Scrollbar)};v._createLineChart=function(t,q){const {chartsModule:d,mediaInfo:B,colorMap:I}=q;({value:q}=B);const {am4core:R,am4charts:N}=d;var K=t.xAxes.push(new N.CategoryAxis);K.dataFields.category="tooltip";K.renderer.labels.template.disabled=!0;const X=K.tooltip;this._customizeChartTooltip(X,R);X.events.on("sizechanged",()=>{X.dy=
-X.contentHeight});K=t.yAxes.push(new N.ValueAxis);var Y=K.renderer.labels.template;K.renderer.minLabelPosition=.05;K.renderer.maxLabelPosition=.95;K.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(K.tooltip,R);Y.wrap=!0;K=t.series.push(new N.LineSeries);K.dataFields.categoryX="tooltip";K.dataFields.valueY="value";K.strokeWidth=1;if(Y=I.get("default-line-value"))K.stroke=Y;K=K.bullets.push(new N.CircleBullet);K.propertyFields.fill="color";K.propertyFields.stroke="color";t.cursor=
new N.XYCursor;15<q.series.length&&(t.scrollbarX=new R.Scrollbar)};v._createXYChart=function(t){const {chartDiv:q,chartsModule:d,mediaInfo:B}=t,{type:I}=B,{am4core:R,am4charts:N}=d,K=R.create(q,N.XYChart);K.rtl=e.isRTL(this.container);"column-chart"===I&&this._createColumnChart(K,t);"bar-chart"===I&&this._createBarChart(K,t);"line-chart"===I&&this._createLineChart(K,t);return K};v._clearMediaRefreshTimer=function(){const {_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)};v._updateMediaInfoTimestamp=
function(t){const q=Date.now();this._refreshIntervalInfo={timestamp:q,sourceURL:t&&this._getImageSource(t,q)};this.scheduleRender()};v._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:t}=this.viewModel;t&&"image"===t.type&&t.refreshInterval&&this._setRefreshTimeout(t)};v._setRefreshTimeout=function(t){const {refreshInterval:q,value:d}=t;q&&(t=6E4*q,this._updateMediaInfoTimestamp(d.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(d.sourceURL)},
t))};v._getImageSource=function(t,q){const d=t.includes("?")?"\x26":"?",[B,I=""]=t.split("#");return`${B}${d}timestamp=${q}${I?"#":""}${I}`};r._createClass(E,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(t){this.viewModel.attributes=t}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},set:function(t){this.viewModel.activeMediaInfoIndex=t}},{key:"description",get:function(){return this.viewModel.description},set:function(t){this.viewModel.description=
t}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(t){this.viewModel.fieldInfoMap=t}},{key:"layer",get:function(){return this.viewModel.layer},set:function(t){this.viewModel.layer=t}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(t){this.viewModel.mediaInfos=t}},{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(t){this.viewModel.popupTemplate=t}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},
set:function(t){this.viewModel.relatedInfos=t}},{key:"title",get:function(){return this.viewModel.title},set:function(t){this.viewModel.title=t}}]);return E}(b);n.__decorate([w.property()],y.prototype,"attributes",null);n.__decorate([w.property()],y.prototype,"activeMediaInfoIndex",null);n.__decorate([w.property()],y.prototype,"description",null);n.__decorate([w.property()],y.prototype,"fieldInfoMap",null);n.__decorate([w.property()],y.prototype,"layer",null);n.__decorate([w.property()],y.prototype,
"mediaInfos",null);n.__decorate([w.property()],y.prototype,"popupTemplate",null);n.__decorate([w.property()],y.prototype,"relatedInfos",null);n.__decorate([w.property()],y.prototype,"title",null);n.__decorate([w.property({type:a})],y.prototype,"viewModel",void 0);n.__decorate([w.property(),k.messageBundle("esri/widgets/Feature/t9n/Feature")],y.prototype,"messages",void 0);return y=n.__decorate([x.subclass("esri.widgets.Feature.FeatureMedia")],y)})},"esri/renderers/support/utils":function(){define("exports ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../core/maybe ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b){async function a(m,v,E){f.getOrCreateMapValue(m,v,()=>[]).push(...E)}function p(m){let v=m.minValue,E=m.maxValue;const A=m.isFirstBreak?"":e.gt+" ";m="percent-of-total"===m.normalizationType?e.pct:"";v=null==v?"":z.format(v);E=null==E?"":z.format(E);return A+v+m+" "+e.ld+" "+E+m}function g(m,v){return"normalizationField"in m&&m.normalizationField?{type:"normalized-field",field:m.field,normalizationField:m.normalizationField}:"field"in m&&m.field?{type:"field",field:m.field}:
"valueExpression"in m&&m.valueExpression?{type:"expression",expression:m.valueExpression,title:m.valueExpressionTitle,returnType:v}:null}const c=h.getLogger("esri.renderers.support.utils"),e={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},k={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},l={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",
month:"long-month-day-year",year:"year"};h=y.convertDateFormatToIntlOptions("short-date");r.calculateDateFormatInterval=function(m){m=m.map(q=>new Date(q));const v=m.length;let E=Infinity,A=null;for(let q=0;q<v-1;q++){const d=m[q];let B=Infinity,I=null;for(let R=q+1;R<v;R++){var t=m[R];t=d.getFullYear()!==t.getFullYear()&&"year"||d.getMonth()!==t.getMonth()&&"month"||d.getDate()!==t.getDate()&&"day"||d.getHours()!==t.getHours()&&"hour"||d.getMinutes()!==t.getMinutes()&&"minute"||d.getSeconds()!==
t.getSeconds()&&"second"||"millisecond";const N=k[t];N<B&&(B=N,I=t)}B<E&&(E=B,A=I)}return A};r.createClassBreakLabel=p;r.createColorStops=function(m){const {values:v,colors:E,labelIndexes:A,isDate:t,dateFormatOptions:q}=m;return v.map((d,B)=>{var I=null;if(!A||A.includes(B)){let R;if(R=t?y.formatDate(d,q):z.format(d))I="",0===B?I=e.lt+" ":B===v.length-1&&(I=e.gt+" "),I+=R}return new D({value:d,color:E[B],label:I})})};r.createUniqueValueLabel=function(m){const {value:v,domain:E,fieldInfo:A,dateFormatInterval:t}=
m;m=String(v);const q=E&&"codedValues"in E&&E.codedValues?E.getName(v):null;q?m=q:"number"===typeof v&&(m=A&&"date"===A.type?y.formatDate(v,t&&y.convertDateFormatToIntlOptions(l[t])):z.format(v));return m};r.getAttribute=g;r.getAttributes=function(m,v){const E=[];if("class-breaks"===m.type||"heatmap"===m.type)E.push(g(m,"number"));else if("unique-value"===m.type){var A=m.authoringInfo;if(A&&"relationship"===A.type){if(A.field1&&A.field2){var t=A.field2.field;const q=A.field2.normalizationField;E.push(g({field:A.field1.field,
normalizationField:A.field1.normalizationField}));E.push(g({field:t,normalizationField:q}))}}else t=m.uniqueValueInfos?.[0],A=null,t&&t.value&&(t=typeof m.uniqueValueInfos[0].value,"string"===t||"number"===t)&&(A=t),E.push(g(m,A)),[m.field2,m.field3].forEach(q=>q&&E.push({type:"field",field:q}))}else"attributes"in m&&m.attributes?.forEach(q=>E.push(g(q,"number")));(m=v?v(m):"visualVariables"in m?m.visualVariables:null)&&m.forEach(q=>E.push(g(q,"number")));return n.unique(E.filter(w.isSome),(q,d)=>
"field"===q.type&&"field"===d.type?q.field===d.field:"normalized-field"===q.type&&"normalized-field"===d.type?q.field===d.field&&q.normalizationField===d.normalizationField:"expression"===q.type&&"expression"===d.type?q.expression===d.expression:!1)};r.getColorsFromRenderer=async function(m){const v=new Map;if(!m)return v;if("visualVariables"in m&&m.visualVariables){var E=m.visualVariables.filter(t=>"color"===t.type);for(var A of E)E=(await u.getRampStops(A)??[]).map(t=>t.color),await a(v,A.field||
A.valueExpression,E)}if("heatmap"===m.type)A=b.getHeatmapRampStops(m).map(t=>t.color),await a(v,m.field||m.valueExpression,A);else if("pie-chart"===m.type){for(const t of m.attributes)await a(v,t.field||t.valueExpression,[t.color]);await a(v,"default",[m?.othersCategory?.color,x.getColorFromSymbol(m.backgroundFillSymbol,null)])}else if("dot-density"===m.type){for(const t of m.attributes)await a(v,t.field||t.valueExpression,[t.color]);await a(v,"default",[m.backgroundColor])}else if("unique-value"===
m.type)if("predominance"===m.authoringInfo?.type)for(const t of m.uniqueValueInfos??[])await a(v,t.value.toString(),[x.getColorFromSymbol(t.symbol,null)]);else{A=(m.uniqueValueInfos??[]).map(I=>x.getColorFromSymbol(I.symbol,null));const {field:t,field2:q,field3:d,valueExpression:B}=m;(t||B)&&await a(v,t||B,A);q&&await a(v,q,A);d&&await a(v,d,A)}else if("class-breaks"===m.type){A=m.classBreakInfos.map(d=>x.getColorFromSymbol(d.symbol,null));const {field:t,valueExpression:q}=m;await a(v,t??q,A)}else"simple"===
m.type&&await a(v,"default",[x.getColorFromSymbol(m.symbol,null)]);"defaultSymbol"in m&&m.defaultSymbol&&await a(v,"default",[x.getColorFromSymbol(m.defaultSymbol,null)]);v.forEach((t,q)=>{t=n.unique(t.filter(Boolean),(d,B)=>JSON.stringify(d)===JSON.stringify(B));v.set(q,t)});return v};r.setLabelsForClassBreaks=function(m){const v=m.classBreakInfos,E=m.normalizationType;let A=[];if(v&&v.length)if("standard-deviation"===m.classificationMethod)c.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");
else if(m.round){A.push(v[0].minValue);for(const t of v)A.push(t.maxValue);A=z.round(A);v.forEach((t,q)=>{t.label=p({minValue:0===q?A[0]:A[q],maxValue:A[q+1],isFirstBreak:0===q,normalizationType:E})})}else v.forEach((t,q)=>{t.label=p({minValue:t.minValue,maxValue:t.maxValue,isFirstBreak:0===q,normalizationType:E})})};r.timelineDateFormatOptions=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],
function(r,n,h){function f(b,a){return b-a}function w(b,a){let p;p=Number(b.toFixed(a));p<b?b=p+1/10**a:(b=p,p-=1/10**a);p=Number(p.toFixed(a));b=Number(b.toFixed(a));return[p,b]}function y(b,a,p,g,c){b=D(b,a,p,g);a=null==b.next||b.next<=c;return(null==b.previous||b.previous<=c)&&a||b.previous+b.next<=2*c}function z(b){b=String(b);var a=b.match(x);if(a&&a[1])return{integer:a[1].split("").length,fractional:a[3]?a[3].split("").length:0};if(b.toLowerCase().includes("e")&&(a=b.split("e"),b=a[0],a=a[1],
b&&a)){b=Number(b);a=Number(a);const p=0<a;p||(a=Math.abs(a));b=z(b);p?(b.integer+=a,b.fractional=a>b.fractional?0:b.fractional-a):(b.fractional+=a,b.integer=a>b.integer?1:b.integer-a);return b}return{integer:0,fractional:0}}function D(b,a,p,g){const c={previous:null,next:null};if(null!=p){const e=b-p;c.previous=Math.floor(Math.abs(100*(a-p-e)/e))}null!=g&&(b=g-b,c.next=Math.floor(Math.abs(100*(g-a-b)/b)));return c}const x=/^-?(\d+)(\.(\d+))?$/i,u={maximumFractionDigits:20};r.format=function(b){return h.formatNumber(b,
u)};r.numDigits=z;r.percentChange=D;r.round=function(b,a={}){b=b.slice(0);const {tolerance:p=2,strictBounds:g=!1,indexes:c=b.map((k,l)=>l)}=a;c.sort(f);for(a=0;a<c.length;a++){const k=c[a],l=b[k],m=0===k?null:b[k-1],v=k===b.length-1?null:b[k+1],E=z(l).fractional;if(E){let A=0,t=!1;for(var e=void 0;A<=E&&!t;)e=w(l,A),e=g&&0===a?e[1]:e[0],t=y(l,e,m,v,p),A++;t&&(b[k]=e)}}return b};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a){function p(q){q=q.symbolLayers;if(!q)return null;let d=null;q.forEach(B=>{if("object"!==B.type||null==B.resource?.href)d="water"===B.type?z.unwrap(B.color):z.isSome(B.material)?z.unwrap(B.material.color):null});return d?new h(d):null}function g(q,d){if(null==d||null==q)return q;q=q.toRgba();q[3]*=d;return new h(q)}function c(q,d,B){if(q=q.symbolLayers){var I=R=>{R=z.isSome(R)?R:null;d=d??R??(null!=B?t:null);return g(d,B)};q.forEach(R=>{if("object"!==R.type||null==
R.resource?.href||d)if("water"===R.type)R.color=I(R.color);else{var N=z.isSome(R.material)?R.material.color:null;N=I(N);z.isNone(R.material)?R.material=new a.Symbol3DMaterial({color:N}):R.material.color=N;null!=B&&"outline"in R&&z.isSome(R.outline)&&z.isSome(R.outline.color)&&(R.outline.color=g(R.outline.color,B))}})}}async function e(q,d){(q=q.symbolLayers)&&await w.forEach(q,async B=>k(B,d))}async function k(q,d){switch(q.type){case "extrude":q.size="number"===typeof d[2]?d[2]:0;break;case "icon":case "line":case "text":d=
l(d);z.isSome(d)&&(q.size=d);break;case "path":const B=v(d,x.ONES,[q.width,void 0,q.height]);q.width=A(d[0],q.width,1,B);q.height=A(d[2],q.height,1,B);break;case "object":await m(q,d)}}function l(q){for(const d of q)if("number"===typeof d)return d;return null}async function m(q,d){const {resourceSize:B,symbolSize:I}=await E(q),R=v(d,B,I);q.width=A(d[0],I[0],B[0],R);q.depth=A(d[1],I[1],B[1],R);q.height=A(d[2],I[2],B[2],R)}function v(q,d,B){for(let I=0;3>I;I++){const R=q[I];switch(R){case "symbol-value":return q=
B[I],null!=q?q/d[I]:1;case "proportional":break;default:if(R&&d[I])return R/d[I]}}return 1}async function E(q){const d=await (await new Promise((X,Y)=>r(["./symbolLayerUtils"],X,Y))).computeObjectLayerResourceSize(q,10),{width:B,height:I,depth:R}=q;q=[B,R,I];let N=1;for(var K=0;3>K;K++){const X=q[K];if(null!=X){N=X/d[K];break}}for(K=0;3>K;K++)null==q[K]&&(q[K]=d[K]*N);return{resourceSize:d,symbolSize:q}}function A(q,d,B,I){switch(q){case "proportional":return B*I;case "symbol-value":return null!=
d?d:B;default:return q}}const t=new h("white");n.applyColorToSymbol=function(q,d,B){if(q&&(d||null!=B))if(d&&(d=new h(d)),f.isSymbol3D(q))c(q,d,B);else if(f.isSymbol2D(q)){if(d=d??q.color)q.color=g(d,B);null!=B&&"outline"in q&&q.outline&&q.outline.color&&(q.outline.color=g(q.outline.color,B))}};n.applyOpacityToColor=g;n.applyRotationToSymbol=function(q,d,B){q&&null!=d&&(f.isSymbol3D(q)?(q=q.symbolLayers)&&q.forEach(I=>{if(I&&"object"===I.type)switch(B){case "tilt":I.tilt=d;break;case "roll":I.roll=
d;break;default:I.heading=d}}):!f.isSymbol2D(q)||"simple-marker"!==q.type&&"picture-marker"!==q.type&&"text"!==q.type||(q.angle=d))};n.applySizesToSymbol=async function(q,d){if(q&&d){if(f.isSymbol3D(q))return e(q,d);if(f.isSymbol2D(q)&&(d=l(d),!z.isNone(d)))switch(q.type){case "simple-marker":q.size=d;break;case "picture-marker":const B=q.width/q.height;1<B?(q.width=d,q.height=d*B):(q.width=d*B,q.height=d);break;case "simple-line":q.width=d;break;case "text":q.font.size=d}}};n.fetchWebStyleSymbol=
async function(q,d){const B=await q.fetchSymbol(d);return B?B:q.fetchCIMSymbol(d)};n.getCSSFilterFromEffectList=function(q){if(!q)return null;q=q.effects.filter(d=>"bloom"!==d.type).map(d=>d.toJSON());return u.effectFunctionsFromJSON(q)};n.getColorFromSymbol=function(q,d){if(!q)return null;let B=null;f.isSymbol3D(q)?B=p(q):f.isSymbol2D(q)&&(B=q.color?new h(q.color):null);return B?g(B,d):null};n.getIconHref=function(q){return z.unwrapOrThrow(q.resource).href};n.getSymbolOutlineSize=function(q){if(!q)return 0;
if(f.isSymbol3D(q)){{const d=q.symbolLayers&&q.symbolLayers.length;d?(q=q.symbolLayers.getItemAt(d-1),q="outline"in q?z.get(q,"outline","size"):void 0):q=void 0}return z.isSome(q)?q:0}return D.px2pt(b.getStroke(q)?.width)};n.isVolumetricSymbol=function(q){if(z.isNone(q)||!("symbolLayers"in q)||z.isNone(q.symbolLayers))return!1;switch(q.type){case "point-3d":return q.symbolLayers.some(d=>"object"===d.type);case "line-3d":return q.symbolLayers.some(d=>"path"===d.type);case "polygon-3d":return q.symbolLayers.some(d=>
"object"===d.type||"extrude"===d.type);default:return!1}};n.symbolHasExtrudeSymbolLayer=function(q){return z.isSome(q)&&"polygon-3d"===q.type&&q.symbolLayers.some(d=>"extrude"===d.type)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(r,n,h,f,w,y,z){function D(b){if(!b)return null;let a=null;switch(b.type){case "simple-fill":case "picture-fill":case "simple-marker":a=
D(b.outline);break;case "simple-line":const p=y.pt2px(b.width);null!=b.style&&"none"!==b.style&&0!==p&&(a={color:b.color,style:u(b.style),width:p,cap:b.cap,join:"miter"===b.join?y.pt2px(b.miterLimit):b.join});break;default:a=null}return a}const x=new w(1E3),u=(()=>{const b={};return a=>{if(b[a])return b[a];const p=a.replace(/-/g,"");return b[a]=p}})();h=new h([128,128,128]);r.defaultThematicColor=h;r.dekebabifyLineStyle=u;r.getFill=function(b){const a=b.style;let p=null;if(b)switch(b.type){case "simple-marker":"cross"!==
a&&"x"!==a&&(p=b.color);break;case "simple-fill":"solid"===a?p=b.color:"none"!==a&&(p={type:"pattern",x:0,y:0,src:n.getAssetUrl(`esri/symbols/patterns/${a}.png`),width:5,height:5});break;case "picture-fill":p={type:"pattern",src:b.url,width:y.pt2px(b.width)*b.xscale,height:y.pt2px(b.height)*b.yscale,x:y.pt2px(b.xoffset),y:y.pt2px(b.yoffset)};break;case "text":p=b.color;break;case "cim":p=z.getCIMSymbolColor(b)}return p};r.getPatternUrlWithColor=function(b,a){const p=b+"-"+a;return void 0!==x.get(p)?
Promise.resolve(x.get(p)):f(b,{responseType:"image"}).then(g=>{g=g.data;const c=g.naturalWidth,e=g.naturalHeight,k=document.createElement("canvas");k.width=c;k.height=e;const l=k.getContext("2d");l.fillStyle=a;l.fillRect(0,0,c,e);l.globalCompositeOperation="destination-in";l.drawImage(g,0,0);g=k.toDataURL();x.put(p,g);return g})};r.getStroke=D;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],
function(r,n){return function(){function h(w,y){this._storage=new n.MemCacheStorage;this._storage.maxSize=w;y&&this._storage.registerRemoveFunc("",y)}var f=h.prototype;f.put=function(w,y){this._storage.put(w,y,1,1)};f.pop=function(w){return this._storage.pop(w)};f.get=function(w){return this._storage.get(w)};f.clear=function(){this._storage.clearAll()};f.destroy=function(){this._storage.destroy()};return r._createClass(h)}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color",
"../cim/utils"],function(r,n,h){function f(a){a=h.toCIMSymbolJSON(a);if("CIMTextSymbol"===a?.type)return a.height??0;let p=0;if(a?.symbolLayers)for(const g of a.symbolLayers)h.isCIMMarker(g)&&null!=g.size&&g.size>p?p=g.size:h.isCIMStroke(g)&&null!=g.width&&g.width>p?p=g.width:h.isCIMFill(g);return p}function w(a,p,g,c){if(a)if("CIMTextSymbol"===a.type)null!=a.height&&(a.height*=p);else{if(g&&a.effects)for(const e of a.effects)D(e,p);if(a.symbolLayers)for(const e of a.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":y(e,
p,c);break;case "CIMPictureStroke":case "CIMSolidStroke":!c?.preserveOutlineWidth&&e.width&&(e.width*=p);break;case "CIMPictureFill":e.height&&(e.height*=p);e.offsetX&&(e.offsetX*=p);e.offsetY&&(e.offsetY*=p);break;case "CIMHatchFill":w(e.lineSymbol,p,!0,{...c,preserveOutlineWidth:!1}),e.offsetX&&(e.offsetX*=p),e.offsetY&&(e.offsetY*=p),e.separation&&(e.separation*=p)}}}function y(a,p,g){if(a&&(a.markerPlacement&&z(a.markerPlacement,p),a.offsetX&&(a.offsetX*=p),a.offsetY&&(a.offsetY*=p),a.anchorPoint&&
"Absolute"===a.anchorPointUnits&&(a.anchorPoint={x:a.anchorPoint.x*p,y:a.anchorPoint.y*p}),a.size=null!=a.size?a.size*p:0,"CIMVectorMarker"===a.type&&a.markerGraphics))for(const c of a.markerGraphics)a.scaleSymbolsProportionally||w(c.symbol,p,!0,g)}function z(a,p){h.isCIMMarkerStrokePlacement(a)&&a.offset&&(a.offset*=p);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset&&(a.customEndingOffset*=p);a.offsetAlongLine&&(a.offsetAlongLine*=
p);if(a.placementTemplate&&a.placementTemplate.length){var g=a.placementTemplate.map(c=>c*p);a.placementTemplate=g}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset&&(a.maxRandomOffset*=p);a.placementTemplate&&a.placementTemplate.length&&(g=a.placementTemplate.map(c=>c*p),a.placementTemplate=g);break;case "CIMMarkerPlacementOnLine":a.startPointOffset&&(a.startPointOffset*=p);break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine&&(a.offsetAlongLine*=p);break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition&&
(a.beginPosition*=p);a.endPosition&&(a.endPosition*=p);break;case "CIMMarkerPlacementPolygonCenter":a.offsetX&&(a.offsetX*=p);a.offsetY&&(a.offsetY*=p);break;case "CIMMarkerPlacementInsidePolygon":a.offsetX&&(a.offsetX*=p),a.offsetY&&(a.offsetY*=p),a.stepX&&(a.stepX*=p),a.stepY&&(a.stepY*=p)}}function D(a,p){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width&&(a.width*=p);break;case "CIMGeometricEffectBuffer":a.size&&(a.size*=p);break;case "CIMGeometricEffectCut":a.beginCut&&
(a.beginCut*=p);a.endCut&&(a.endCut*=p);a.middleCut&&(a.middleCut*=p);break;case "CIMGeometricEffectDashes":a.customEndingOffset&&(a.customEndingOffset*=p);a.offsetAlongLine&&(a.offsetAlongLine*=p);if(a.dashTemplate&&a.dashTemplate.length){const g=a.dashTemplate.map(c=>c*p);a.dashTemplate=g}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length&&(a.length*=p);break;case "CIMGeometricEffectMove":a.offsetX&&(a.offsetX*=p);a.offsetY&&(a.offsetY*=
p);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset&&(a.offset*=p);break;case "CIMGeometricEffectRegularPolygon":a.radius&&(a.radius*=p);break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth&&(a.fromWidth*=p);a.length&&(a.length*=p);a.toWidth&&(a.toWidth*=p);break;case "CIMGeometricEffectWave":a.amplitude&&(a.amplitude*=p),a.period&&(a.period*=p)}}function x(a,p){if(a){var g="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(g?.symbolLayers)for(const c of g.symbolLayers)if(!(c.colorLocked||
a&&(h.isCIMStroke(c)||h.isCIMMarker(c)&&c.markerPlacement&&h.isCIMMarkerStrokePlacement(c.markerPlacement))))switch(c.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":c.tintColor&&u(p,c.tintColor);break;case "CIMVectorMarker":c.markerGraphics?.forEach(e=>{x(e.symbol,p)});break;case "CIMSolidStroke":case "CIMSolidFill":u(p,c.color);break;case "CIMHatchFill":x(c.lineSymbol,p)}}}function u(a,p){for(const g of a)if(g.join(".")===p.join("."))return;a.push(p)}function b(a,p,g){if(a){var c=
"CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===c?.type;if(c?.symbolLayers)for(const e of c.symbolLayers)if(!e.colorLocked){if(a)if(g){if({layersToColor:c}=g,(h.isCIMStroke(e)||h.isCIMMarker(e)&&e.markerPlacement&&h.isCIMMarkerStrokePlacement(e.markerPlacement))&&"fill"===c||h.isCIMFill(e)&&"outline"===c)continue}else if(h.isCIMStroke(e)||h.isCIMMarker(e)&&e.markerPlacement&&h.isCIMMarkerStrokePlacement(e.markerPlacement))continue;c=p.toArray();switch(e.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":e.tintColor=
c;break;case "CIMVectorMarker":e.markerGraphics?.forEach(k=>{b(k.symbol,p,g)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=c;break;case "CIMHatchFill":b(e.lineSymbol,p,g)}}}}r.applyCIMSymbolColor=function(a,p,g){p instanceof n||(p=new n(p));(a=h.toCIMSymbolJSON(a))&&b(a,p,g)};r.applyCIMSymbolRotation=function(a,p,g=!1){a=h.toCIMSymbolJSON(a);g&&0!==p&&(p=360-p);if("CIMTextSymbol"===a?.type)a.angle=p;else if("CIMPointSymbol"===a?.type&&a.symbolLayers){g=p-(a.angle||0);for(const c of a.symbolLayers)if(h.isCIMMarker(c)){let e=
c.rotation||0;e=c.rotateClockwise?e-g:e+g;c.rotation=e}a.angle=p}};r.getCIMSymbolColor=function(a){a=h.toCIMSymbolJSON(a);const p=[];x(a,p);return p.length?new n(h.fromCIMColor(p[0])):null};r.getCIMSymbolRotation=function(a,p=!1){a=h.toCIMSymbolJSON(a);return"CIMTextSymbol"===a?.type||"CIMPointSymbol"===a?.type?(a=a.angle,null!=a&&0!==a&&p?360-a:a??0):0};r.getCIMSymbolSize=f;r.getCIMSymbolType=function(a){a=h.toCIMSymbolJSON(a);if(!a)return null;switch(a.type){case "CIMPointSymbol":return"CIMPointSymbol";
case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};r.scaleCIMMarker=y;r.scaleCIMSymbol=w;r.scaleCIMSymbolTo=function(a,p,g){if(a){var c=h.toCIMSymbolJSON(a);a=f(a);if(0===a){if(c)if("CIMTextSymbol"===c.type)c.height=p;else if(c.symbolLayers)for(const e of c.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":e.size=p;break;case "CIMPictureStroke":case "CIMSolidStroke":e.width=
p}}else w(c,p/a,!1,g)}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(r,n){function h(b){let a=b.length;for(;a--;)if(!" /-,\n".includes(b.charAt(a)))return!1;return!0}function f(b,a){const p=[];var g=0;let c=-1;do c=b.indexOf("[",g),c>=g&&(c>g&&(g=b.substr(g,c-g),p.push([g,null,h(g)])),g=c+1,c=b.indexOf("]",g),c>=g&&(c>g&&(g=b.substr(g,c-g),(g=a[g])&&p.push([null,g,!1])),g=c+1));while(-1!==c);g<b.length-1&&
(b=b.substr(g),p.push([b,null,h(b)]));return p}function w(b,a,p){let g="",c=null;for(const e of a){const [k,l,m]=e;if(k)m?c=k:(c&&(g+=c,c=null),g+=k);else if(a=b.attributes[l])c&&(g+=c,c=null),g+=a}return y(g,p)}function y(b,a){"string"!==typeof b&&(b=String(b));switch(a){case "LowerCase":return b.toLowerCase();case "Allcaps":return b.toUpperCase();default:return b}}function z(b){return b?{r:b[0],g:b[1],b:b[2],a:b[3]/255}:{r:0,g:0,b:0,a:0}}function D(b){if(!b)return null;switch(b.type){case "CIMPolygonSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=
D(a),null!=b)return b;break;case "CIMTextSymbol":return D(b.symbol);case "CIMSolidFill":return b.color}}function x(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b=b.symbolLayers)for(const a of b)if(b=x(a),null!=b)return b;break;case "CIMTextSymbol":return x(b.symbol);case "CIMSolidStroke":case "CIMSolidFill":return b.color}}function u(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=u(a),void 0!==b)return b;
break;case "CIMTextSymbol":return u(b.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return b.width}}n.adjustTextCase=y;n.analyzeTextParts=f;n.assignTextValuesFromFeature=w;n.attributesToFields=function(b){return(b?Object.keys(b):[]).map(a=>({name:a,alias:a,type:"string"===typeof b[a]?"esriFieldTypeString":"esriFieldTypeDouble"}))};n.colorToArray=function(b){return[b.r,b.g,b.b,b.a]};n.createLabelOverrideFunction=function(b,a,p){const g=f(a,b);return c=>w(c,g,p)};n.evaluateValueOrFunction=
function(b,a,p,g){return"function"===typeof b?b(a,p,g):b};n.fromCIMColor=z;n.fromCIMFontDecoration=function(b){return b.underline?"underline":b.strikethrough?"line-through":"none"};n.fromCIMFontStyle=function(b){let a="",p="";b&&(b=b.toLowerCase(),b.includes("italic")?a="italic":b.includes("oblique")&&(a="oblique"),b.includes("bold")?p="bold":b.includes("light")&&(p="lighter"));return{style:a,weight:p}};n.fromCIMHorizontalAlignment=function(b){switch(b){default:return"left";case "Right":return"right";
case "Center":return"center";case "Justify":return"center"}};n.fromCIMVerticalAlignment=function(b){switch(b){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};n.getFillColor=D;n.getFontStyle=function(b){if(!b)return"normal";switch(b.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};n.getFontWeight=function(b){if(!b)return"normal";switch(b.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";
case "lighter":return"lighter";default:return"normal"}};n.getStrokeColor=x;n.getStrokeWidth=u;n.getTintColor=b=>b.tintColor?z(b.tintColor):{r:255,g:255,b:255,a:1};n.getValue=(b,a=0)=>null==b||isNaN(b)?a:b;n.importGeometryEngine=function(){return new Promise((b,a)=>r(["../../geometry/geometryEngineJSON"],b,a))};n.isCIMFill=function(b){return null!=b&&("CIMGradientFill"===b.type||"CIMHatchFill"===b.type||"CIMPictureFill"===b.type||"CIMSolidFill"===b.type||"CIMWaterFill"===b.type)};n.isCIMMarker=function(b){return"CIMVectorMarker"===
b.type||"CIMPictureMarker"===b.type||"CIMBarChartMarker"===b.type||"CIMCharacterMarker"===b.type||"CIMPieChartMarker"===b.type||"CIMStackedBarChartMarker"===b.type};n.isCIMMarkerStrokePlacement=function(b){return null!=b&&("CIMMarkerPlacementAlongLineRandomSize"===b.type||"CIMMarkerPlacementAlongLineSameSize"===b.type||"CIMMarkerPlacementAlongLineVariableSize"===b.type||"CIMMarkerPlacementAtExtremities"===b.type||"CIMMarkerPlacementAtMeasuredUnits"===b.type||"CIMMarkerPlacementAtRatioPositions"===
b.type||"CIMMarkerPlacementOnLine"===b.type||"CIMMarkerPlacementOnVertices"===b.type)};n.isCIMStroke=function(b){return"CIMGradientStroke"===b.type||"CIMPictureStroke"===b.type||"CIMSolidStroke"===b.type};n.isGeometryEngineRequired=b=>{if(!b)return!1;for(const a of b)switch(a.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};n.isSVGImage=b=>b.includes("data:image/svg+xml");n.mapCIMSymbolToGeometryType=function(b){if(!b)return null;
switch(b.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};n.resampleHermite=function(b,a,p,g,c,e,k=!0){const l=a/c;p/=e;const m=Math.ceil(l/2),v=Math.ceil(p/2);for(let t=0;t<e;t++)for(let q=0;q<c;q++){const d=4*(q+(k?e-t-1:t)*c);var E=0;let B=0,I=0,R=0,N=0,K=0,X=0;const Y=(t+.5)*p;for(let S=Math.floor(t*p);S<(t+1)*p;S++){var A=Math.abs(Y-(S+.5))/v;const U=
(q+.5)*l;A*=A;for(let J=Math.floor(q*l);J<(q+1)*l;J++){let T=Math.abs(U-(J+.5))/m;E=Math.sqrt(A+T*T);-1<=E&&1>=E&&(E=2*E*E*E-3*E*E+1,0<E&&(T=4*(J+S*a),X+=E*b[T+3],I+=E,255>b[T+3]&&(E=E*b[T+3]/250),R+=E*b[T],N+=E*b[T+1],K+=E*b[T+2],B+=E))}}g[d]=R/B;g[d+1]=N/B;g[d+2]=K/B;g[d+3]=X/I}};n.toCIMSymbolJSON=function(b){return b.data?.symbol??null};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../Color",
"./utils"],function(r,n,h,f){function w(u,b){const a=[],p=u.length-1;5===u.length?a.push(0,2,4):a.push(0,p);return u.map((g,c)=>a.includes(c)?f.createStopLabel(g,c,p,b):null)}async function y(u,b,a){a=new h(a??x);u=(await new Promise((p,g)=>r(["../../../renderers/visualVariables/support/visualVariableUtils"],p,g))).getOpacity(b,u);null!=u&&(a.a=u);return a}function z(u,b){const {startIndex:a,endIndex:p,weight:g}=D(u,b);if(a===p)return b[a].color;u=h.blendColors(b[a].color,b[p].color,g);return new h(u)}
function D(u,b){let a=0,p=b.length-1;b.some((g,c)=>{if(u<g.value)return p=c,!0;a=c;return!1});return{startIndex:a,endIndex:p,weight:(u-b[a].value)/(b[p].value-b[a].value)}}const x=new h([64,64,64]);n.getColorFromPointCloudStops=z;n.getRampStops=async function(u,b,a){let p=!1,g=[],c=[];if(u.stops){var e=u.stops;g=e.map(l=>l.value);(p=e.some(l=>!!l.label))&&(c=e.map(l=>l.label))}e=g[g.length-1];if(null==g[0]&&null==e)return null;const k=p?null:w(g,a??!1);return(await Promise.all(g.map(async(l,m)=>{const v=
"opacity"===u.type?await y(l,u,b):(await new Promise((E,A)=>r(["../../../renderers/visualVariables/support/visualVariableUtils"],E,A))).getColor(u,l);return{value:l,color:v,label:p?c[m]:k?.[m]??""}}))).reverse()};n.getRampStopsForPointCloud=function(u){let b=!1,a=[],p=[];a=u.map(e=>e.value);(b=u.some(e=>!!e.label))&&(p=u.map(e=>e.label??""));const g=a[a.length-1];if(null==a[0]&&null==g)return null;const c=b?null:w(a,!1);return a.map((e,k)=>{const l=z(e,u);return{value:e,color:l,label:b?p[k]:c?.[k]??
""}}).reverse()};n.getStrectchRampStops=function(u,b){let a=[];if(u&&"multipart"===u.type)u.colorRamps.reverse().forEach((p,g)=>{0===g?a.push({value:b.max,color:new h(p.toColor),label:"high"}):a.push({value:null,color:new h(p.toColor),label:""});g===u.colorRamps.length-1?a.push({value:b.min,color:new h(p.fromColor),label:"low"}):a.push({value:null,color:new h(p.fromColor),label:""})});else{let p,g;u&&"algorithmic"===u.type?(p=u.fromColor,g=u.toColor):(p=[0,0,0,1],g=[255,255,255,1]);a=[{value:b.max,
color:new h(g),label:"high"},{value:b.min,color:new h(p),label:"low"}]}return a};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),function(r,n,h,f,w,y){async function z(x){if(!("visualVariables"in x&&x.visualVariables))return null;x=x.visualVariables.find(a=>"color"===a.type);if(!x)return null;
var u=null,b=null;if(x.stops){if(1===x.stops.length)return x.stops[0].color;u=x.stops[0].value;b=x.stops[x.stops.length-1].value}u=null!=u&&null!=b?u+(b-u)/2:0;({getColor:b}=await new Promise((a,p)=>r(["../../../renderers/visualVariables/support/visualVariableUtils"],a,p)));return b(x,u)??null}const D=f.convertDateFormatToIntlOptions("short-date");n.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];n.SPECIAL_CHARS_GREATER_THAN="\x3e";n.SPECIAL_CHARS_LESS_THAN="\x3c";n.createStopLabel=function(x,
u,b,a){let p="";0===u?p="\x3c ":u===b&&(p="\x3e ");u=null;u=a?f.formatDate(x,D):w.format(x);return p+u};n.getMedianColor=z;n.getSymbolForFlowRenderer=async function(x,u){const b=x.trailCap,a=x.trailWidth||1;x=u||await z(x)||x.color;return new y({cap:b,color:x,width:a})};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(r,n){r.getHeatmapRampStops=function(h){if(!h.colorStops)return[];
const f=[...h.colorStops].filter(y=>0<y.color?.a);let w=f.length-1;if(f&&f[0]){const y=f[w];y&&1!==y.ratio&&(f.push(new n({ratio:1,color:y.color})),w++)}return f.map((y,z)=>{let D="";0===z?D=h.legendOptions?.minLabel||"low":z===w&&(D=h.legendOptions?.maxLabel||"high");return{color:y.color,label:D,ratio:y.ratio}}).reverse()};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p){const g={chartAnimation:!0};h=function(c){function e(l){l=k.call(this,l);l.abilities={...g};l.activeMediaInfoIndex=0;l.attributes=null;l.description=null;l.fieldInfoMap=null;l.formattedAttributes=null;l.expressionAttributes=null;l.isAggregate=!1;l.layer=null;l.mediaInfos=null;l.popupTemplate=null;l.relatedInfos=null;l.title=null;return l}r._inherits(e,c);var k=r._createSuper(e);c=e.prototype;c.castAbilities=function(l){return{...g,...l}};c.setActiveMedia=function(l){this._setContentElementMedia(l)};
c.next=function(){this._pageContentElementMedia(1)};c.previous=function(){this._pageContentElementMedia(-1)};c._setContentElementMedia=function(l){const {formattedMediaInfoCount:m}=this;this.activeMediaInfoIndex=(l+m)%m};c._pageContentElementMedia=function(l){const {activeMediaInfoIndex:m}=this;this._setContentElementMedia(m+l)};c._formatMediaInfos=function(){const {mediaInfos:l,layer:m}=this,v=this.attributes??{},E=this.formattedAttributes??{},A=this.expressionAttributes??{},t=this.fieldInfoMap??
new Map;return l?.map(q=>{q=q?.clone();if(!q)return null;q.title=a.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:t,globalAttributes:E,expressionAttributes:A,layer:m,text:q.title});q.caption=a.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:t,globalAttributes:E,expressionAttributes:A,layer:m,text:q.caption});q.altText=a.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:t,globalAttributes:E,expressionAttributes:A,layer:m,text:q.altText});if("image"===
q.type){var {value:d}=q;this._setImageValue({value:d,formattedAttributes:E,layer:m});return q.value.sourceURL?q:void 0}return"pie-chart"===q.type||"line-chart"===q.type||"column-chart"===q.type||"bar-chart"===q.type?({value:d}=q,this._setChartValue({value:d,chartType:q.type,attributes:v,formattedAttributes:E,layer:m,expressionAttributes:A}),q):null}).filter(f.isSome)??[]};c._setImageValue=function(l){const m=this.fieldInfoMap??new Map,{value:v,formattedAttributes:E,layer:A}=l,{linkURL:t,sourceURL:q}=
v;q&&(l=a.fixTokens(q,A),v.sourceURL=a.substituteAttributes({formattedAttributes:E,template:l,fieldInfoMap:m}));t&&(l=a.fixTokens(t,A),v.linkURL=a.substituteAttributes({formattedAttributes:E,template:l,fieldInfoMap:m}))};c._setChartValue=function(l){const {value:m,attributes:v,formattedAttributes:E,chartType:A,layer:t,expressionAttributes:q}=l,{popupTemplate:d,relatedInfos:B}=this,{fields:I,normalizeField:R}=m;m.fields=a.getFixedFieldNames(I,t);R&&(m.normalizeField=a.getFixedFieldName(R,t));if(I.some(K=>
!!(null!=E[K]||a.isRelatedField(K)&&B?.size))){var N=d?.fieldInfos??[];I.forEach(K=>{a.isRelatedField(K)?m.series=[...m.series,...this._getRelatedChartInfos({fieldInfos:N,fieldName:K,formattedAttributes:E,chartType:A,value:m})]:(K=this._getChartOption({value:m,attributes:v,chartType:A,formattedAttributes:E,expressionAttributes:q,fieldName:K,fieldInfos:N}),m.series.push(K))})}};c._getRelatedChartInfos=function(l){const {fieldInfos:m,fieldName:v,formattedAttributes:E,chartType:A,value:t}=l,q=[],d=p.getRelatedFieldInfo(v);
l=d&&this.relatedInfos?.get(d.layerId.toString());if(!l)return q;const {relatedFeatures:B,relation:I}=l;if(!I||!B)return q;({cardinality:l}=I);B.forEach(R=>{const {attributes:N}=R;N&&Object.keys(N).forEach(K=>{K===d.fieldName&&q.push(this._getChartOption({value:t,attributes:N,formattedAttributes:E,fieldName:v,chartType:A,relatedFieldName:K,hasMultipleRelatedFeatures:1<B?.length,fieldInfos:m}))})});return"one-to-many"===l||"many-to-many"===l?q:[q[0]]};c._getTooltip=function({label:l,value:m,chartType:v}){return"pie-chart"===
v?`${l}`:`${l}: ${m}`};c._getChartOption=function(l){const {value:m,attributes:v,formattedAttributes:E,expressionAttributes:A,fieldName:t,relatedFieldName:q,fieldInfos:d,chartType:B,hasMultipleRelatedFeatures:I}=l;var R=this.layer,N=this.fieldInfoMap??new Map;const {normalizeField:K,tooltipField:X}=m;l=K?a.isRelatedField(K)?v[p.getRelatedFieldInfo(K).fieldName]:v[K]:null;var Y=a.isExpressionField(t)&&A&&void 0!==A[t]?A[t]:q&&void 0!==v[q]?v[q]:void 0!==v[t]?v[t]:E[t];l=new b({fieldName:t,value:void 0===
Y?null:Y&&l?Y/l:Y});if(a.isRelatedField(t))return R=N.get(t.toLowerCase()),Y=X&&N.get(X.toLowerCase()),N=R?.fieldName??t,Y=I&&X?p.getRelatedFieldInfo(X).fieldName:Y?.fieldName??X,l.tooltip=this._getTooltip({label:I&&Y?v[Y]:E[Y]??R?.label??R?.fieldName??q,value:I&&q?v[q]:E[N],chartType:B}),l;N=a.getFieldInfo(d,t);R=a.getFixedFieldName(t,R);N=X&&void 0!==E[X]?E[X]:a.getFieldInfoLabel(N||new u({fieldName:R}),this.popupTemplate?.expressionInfos);l.tooltip=this._getTooltip({label:N,value:E[R],chartType:B});
return l};r._createClass(e,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return e}(h);n.__decorate([w.property()],h.prototype,"abilities",void 0);n.__decorate([y.cast("abilities")],h.prototype,"castAbilities",null);n.__decorate([w.property()],h.prototype,"activeMediaInfoIndex",
void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"activeMediaInfo",null);n.__decorate([w.property()],h.prototype,"attributes",void 0);n.__decorate([w.property()],h.prototype,"description",void 0);n.__decorate([w.property()],h.prototype,"fieldInfoMap",void 0);n.__decorate([w.property()],h.prototype,"formattedAttributes",void 0);n.__decorate([w.property()],h.prototype,"expressionAttributes",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"formattedMediaInfos",null);n.__decorate([w.property()],
h.prototype,"isAggregate",void 0);n.__decorate([w.property()],h.prototype,"layer",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"formattedMediaInfoCount",null);n.__decorate([w.property()],h.prototype,"mediaInfos",void 0);n.__decorate([w.property()],h.prototype,"popupTemplate",void 0);n.__decorate([w.property()],h.prototype,"relatedInfos",void 0);n.__decorate([w.property()],h.prototype,"title",void 0);return h=n.__decorate([x.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
h)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../config ../../../kernel ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d,B,I,R,N,K,X,Y,S){function U(W,H){if(!H.relationships)return null;let G=null;({relationships:H}=H);H.some(O=>O.id===parseInt(W,10)?(G=O,!0):!1);return G}function J({originRelationship:W,relationships:H,layerId:G}){let O=null;H&&H.some(Q=>{`${Q.relatedTableId}`===G&&Q.id===W?.id&&(O=Q);return!!O});return O}function T(W,H){H=H.toLowerCase();for(const G in W)if(G.toLowerCase()===H)return W[G];return null}function F(W,H,G,O){const Q=new K;Q.outFields=
["*"];Q.relationshipId="number"===typeof H.id?H.id:parseInt(H.id,10);Q.objectIds=[W.attributes[G.objectIdField]];return G.queryRelatedFeatures?.(Q,O)??Promise.resolve({})}function L(W,H,G){let O=0;const Q=[];for(;O<H.length;)Q.push(`${W} IN (${H.slice(O,G+O)})`),O+=G;return Q.join(" OR ")}async function V(W,H,G,O){var Q=G.layerId.toString();const {layerInfo:aa,relation:ba,relatedFields:da,outStatistics:ia,url:fa,sourceSpatialReference:ka}=H;if(!aa||!ba)return null;Q=J({originRelationship:ba,relationships:aa.relationships,
layerId:Q});if(Q?.relationshipTableId&&Q.keyFieldInRelationshipTable){G=(await F(W,Q,G,O))[W.attributes[G.objectIdField]];if(!G)return null;const na=G.features.map(pa=>pa.attributes[aa.objectIdField]);if(ia?.length&&aa.supportsStatistics)return H=new B,H.where=L(aa.objectIdField,na,1E3),H.outFields=da,H.outStatistics=ia,H.sourceSpatialReference=ka,H={features:Promise.resolve(G),statsFeatures:x.executeQueryJSON(fa,H)},w.eachAlways(H)}return(Q=Q?.keyField)?(G=y.isNumericField(C(aa.fields,Q)),W=T(W.attributes,
ba.keyField),Q=G?`${Q}=${W}`:`${Q}='${W}'`,W=x.executeQueryJSON(fa,new B({where:Q,outFields:H.relatedFields,sourceSpatialReference:ka}),O),H=H.outStatistics&&0<H.outStatistics.length&&aa.supportsStatistics?x.executeQueryJSON(fa,new B({where:Q,outFields:H.relatedFields,outStatistics:H.outStatistics,sourceSpatialReference:ka}),O):null,O={features:W},H&&(O.statsFeatures=H),w.eachAlways(O)):null}function C(W,H){if(null!=W){H=H.toLowerCase();for(const G of W)if(G&&G.name.toLowerCase()===H)return G}return null}
const M=f.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),P=new Map;r.createRelatedInfo=function(W,H){if(W=U(W,H))return{url:`${H.url}/${W.relatedTableId}`,sourceSpatialReference:H.spatialReference,relation:W,relatedFields:[],outStatistics:[]}};r.getDestinationRelation=J;r.getRelatedFieldInfo=function(W){if(!S.isRelatedField(W))return null;const [H,G]=W.split("/").slice(1);return{layerId:H,fieldName:G}};r.queryLayerInfos=function({relatedInfos:W,layer:H},G){const O={};W.forEach((Q,aa)=>
{({relation:Q}=Q);if(!Q)throw aa=new h("relation-required","A relation is required on a layer to retrieve related records."),M.error(aa),aa;({relatedTableId:Q}=Q);if("number"!==typeof Q)throw aa=new h("A related table ID is required on a layer to retrieve related records."),M.error(aa),aa;Q=`${H.url}/${Q}`;const ba=P.get(Q),da=ba??n(Q,{query:{f:"json"},signal:G&&G.signal});ba||P.set(Q,da);O[aa]=da});return w.whenOrAbort(w.eachAlways(O),G)};r.queryRelatedFeatures=function({graphic:W,relatedInfos:H,
layer:G},O){const Q={};H.forEach((aa,ba)=>{aa.layerInfo&&(Q[ba]=V(W,aa,G,O))});return w.eachAlways(Q)};r.setRelatedFeatures=function(W,H){if(H&&W){var {features:G,statsFeatures:O}=W;W=G&&G.value;H.relatedFeatures=W?W.features:[];W=O&&O.value;H.relatedStatsFeatures=W?W.features:[]}};r.updateRelatedInfo=function({relatedInfo:W,fieldName:H,fieldInfo:G}){W.relatedFields?.push(H);G.statisticType&&(H=new Y({statisticType:G.statisticType,onStatisticField:H,outStatisticFieldName:H}),W.outStatistics?.push(H))};
Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/chartUtils":function(){define(["require","exports","../../intl","../../core/has","../../intl/locale"],function(r,n,h,f,w){function y(b){if(!b)return"en-us";if(D.has(b.toLowerCase()))return b.toLowerCase();b=b.split("-")[0].toLowerCase();let a=null;for(const p of D.keys())if(p.startsWith(b)){a=p;break}return a||"en-us"}h="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var z=[{name:"default",colors:[].concat(h.slice(30,39),h.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const D=new Map([["ar",()=>(new Promise((b,a)=>r(["../../chunks/ar"],b,a))).then(b=>b.ar)],["bg-bg",()=>(new Promise((b,
a)=>r(["../../chunks/bg_BG"],b,a))).then(b=>b.bg_BG)],["bs-ba",()=>(new Promise((b,a)=>r(["../../chunks/bs_BA"],b,a))).then(b=>b.bs_BA)],["ca-es",()=>(new Promise((b,a)=>r(["../../chunks/ca_ES"],b,a))).then(b=>b.ca_ES)],["cs-cz",()=>(new Promise((b,a)=>r(["../../chunks/cs_CZ"],b,a))).then(b=>b.cs_CZ)],["da-dk",()=>(new Promise((b,a)=>r(["../../chunks/da_DK"],b,a))).then(b=>b.da_DK)],["de-de",()=>(new Promise((b,a)=>r(["../../chunks/de_DE"],b,a))).then(b=>b.de_DE)],["de-ch",()=>(new Promise((b,a)=>
r(["../../chunks/de_CH"],b,a))).then(b=>b.de_CH)],["el-gr",()=>(new Promise((b,a)=>r(["../../chunks/el_GR"],b,a))).then(b=>b.el_GR)],["en-us",()=>(new Promise((b,a)=>r(["../../chunks/en_US"],b,a))).then(b=>b.en_US)],["en-ca",()=>(new Promise((b,a)=>r(["../../chunks/en_CA"],b,a))).then(b=>b.en_CA)],["es-es",()=>(new Promise((b,a)=>r(["../../chunks/es_ES"],b,a))).then(b=>b.es_ES)],["et-ee",()=>(new Promise((b,a)=>r(["../../chunks/et_EE"],b,a))).then(b=>b.et_EE)],["fi-fi",()=>(new Promise((b,a)=>r(["../../chunks/fi_FI"],
b,a))).then(b=>b.fi_FI)],["fr-fr",()=>(new Promise((b,a)=>r(["../../chunks/fr_FR"],b,a))).then(b=>b.fr_FR)],["he-il",()=>(new Promise((b,a)=>r(["../../chunks/he_IL"],b,a))).then(b=>b.he_IL)],["hr-hr",()=>(new Promise((b,a)=>r(["../../chunks/hr_HR"],b,a))).then(b=>b.hr_HR)],["hu-hu",()=>(new Promise((b,a)=>r(["../../chunks/hu_HU"],b,a))).then(b=>b.hu_HU)],["id-id",()=>(new Promise((b,a)=>r(["../../chunks/id_ID"],b,a))).then(b=>b.id_ID)],["it-it",()=>(new Promise((b,a)=>r(["../../chunks/it_IT"],b,a))).then(b=>
b.it_IT)],["ja-jp",()=>(new Promise((b,a)=>r(["../../chunks/ja_JP"],b,a))).then(b=>b.ja_JP)],["ko-kr",()=>(new Promise((b,a)=>r(["../../chunks/ko_KR"],b,a))).then(b=>b.ko_KR)],["lt-lt",()=>(new Promise((b,a)=>r(["../../chunks/lt_LT"],b,a))).then(b=>b.lt_LT)],["lv-lv",()=>(new Promise((b,a)=>r(["../../chunks/lv_LV"],b,a))).then(b=>b.lv_LV)],["nb-no",()=>(new Promise((b,a)=>r(["../../chunks/nb_NO"],b,a))).then(b=>b.nb_NO)],["nl-nl",()=>(new Promise((b,a)=>r(["../../chunks/nl_NL"],b,a))).then(b=>b.nl_NL)],
["pl-pl",()=>(new Promise((b,a)=>r(["../../chunks/pl_PL"],b,a))).then(b=>b.pl_PL)],["pt-br",()=>(new Promise((b,a)=>r(["../../chunks/pt_BR"],b,a))).then(b=>b.pt_BR)],["pt-pt",()=>(new Promise((b,a)=>r(["../../chunks/pt_PT"],b,a))).then(b=>b.pt_PT)],["ro-ro",()=>(new Promise((b,a)=>r(["../../chunks/ro_RO"],b,a))).then(b=>b.ro_RO)],["ru-ru",()=>(new Promise((b,a)=>r(["../../chunks/ru_RU"],b,a))).then(b=>b.ru_RU)],["sk-sk",()=>(new Promise((b,a)=>r(["../../chunks/sk_SK"],b,a))).then(b=>b.sk_SK)],["sl-sl",
()=>(new Promise((b,a)=>r(["../../chunks/sl_SL"],b,a))).then(b=>b.sl_SL)],["sr-rs",()=>(new Promise((b,a)=>r(["../../chunks/sr_RS"],b,a))).then(b=>b.sr_RS)],["sv-se",()=>(new Promise((b,a)=>r(["../../chunks/sv_SE"],b,a))).then(b=>b.sv_SE)],["th-th",()=>(new Promise((b,a)=>r(["../../chunks/th_TH"],b,a))).then(b=>b.th_TH)],["tr-tr",()=>(new Promise((b,a)=>r(["../../chunks/tr_TR"],b,a))).then(b=>b.tr_TR)],["uk-ua",()=>(new Promise((b,a)=>r(["../../chunks/uk_UA"],b,a))).then(b=>b.uk_UA)],["vi-vn",()=>
(new Promise((b,a)=>r(["../../chunks/vi_VN"],b,a))).then(b=>b.vi_VN)],["zh-cn",()=>(new Promise((b,a)=>r(["../../chunks/zh_Hans"],b,a))).then(b=>b.zh_Hans)],["zh-hk",()=>(new Promise((b,a)=>r(["../../chunks/zh_Hant"],b,a))).then(b=>b.zh_Hant)],["zh-tw",()=>(new Promise((b,a)=>r(["../../chunks/zh_Hant"],b,a))).then(b=>b.zh_Hant)]]);let x=null,u=null;n.getChartLocale=y;n.getColorSet=function(b,a="default"){const p=z.find(g=>g.name===a);return p?p.colors.map(g=>b.color(g)):null};n.loadChartsModule=async function(b=
w.getLocale()){b=y(b);if(x&&b===u)return x;x=(new Promise((a,p)=>r(["../../chunks/index2"],a,p))).then(a=>a.index);u=b;try{const [a,p]=await Promise.all([x,D.get(u)()]);u===b&&(a.am4core.options.defaultLocale=p.default);a.am4core.options.suppressWarnings=!0;a.am4core.options.autoDispose=!0}catch{return u=x=null}return x};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/RelationshipContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d){f=function(B){function I(N){var K=R.call(this,N);K._abortController=null;K.expressionInfo=null;K.graphic=null;K.contentElement=null;K.contentElementViewModel=null;K.interceptor=null;K.view=null;K._cancelQuery=()=>{const {_abortController:X}=r._assertThisInitialized(K);X&&X.abort();K._abortController=null};K._createVM=()=>{var X=K.contentElement?.type;K.contentElementViewModel?.destroy();X="fields"===X?new t:"media"===X?new q:"text"===X?new A:
null;K._set("contentElementViewModel",X)};K._compile=async()=>{K._cancelQuery();const X=new AbortController;K._abortController=X;await K._compileExpression();K._abortController===X&&(K._abortController=null)};K._compileThrottled=z.throttle(K._compile,1,r._assertThisInitialized(K));K._compileExpression=async()=>{const {expressionInfo:X,graphic:Y,interceptor:S,spatialReference:U,map:J,view:T,_abortController:F}=r._assertThisInitialized(K);if(X&&Y&&U&&J){var L=await d.loadArcadeUtils();if(F===K._abortController)if((L=
await d.createCompiledExpression({arcadeUtils:L,expressionInfo:X,graphic:Y,interceptor:S,map:J,spatialReference:U,view:T}))&&"esri.arcade.Dictionary"===L.declaredClass){L=await L.castAsJsonAsync(F?.signal);var V=L?.type;L="media"===V?l.fromJSON(L):"text"===V?v.fromJSON(L):"fields"===V?k.fromJSON(L):null;K._set("contentElement",L)}else K._set("contentElement",null)}else K._set("contentElement",null)};K.handles.add([y.watch(()=>[K.expressionInfo,K.graphic,K.map,K.spatialReference,K.view],()=>K._compileThrottled(),
y.initial),y.watch(()=>[K.contentElement],()=>K._createVM(),y.initial)]);return K}r._inherits(I,B);var R=r._createSuper(I);I.prototype.destroy=function(){this._cancelQuery();this.contentElementViewModel?.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};r._createClass(I,[{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(N){this._override("spatialReference",N)}},{key:"state",get:function(){const {_abortController:N,contentElement:K,
contentElementViewModel:X}=this;return N?"loading":K||X?"ready":"disabled"}},{key:"map",get:function(){return this.view?.map??null},set:function(N){this._override("map",N)}}]);return I}(w.HandleOwnerMixin(f));n.__decorate([D.property()],f.prototype,"_abortController",void 0);n.__decorate([D.property({type:E})],f.prototype,"expressionInfo",void 0);n.__decorate([D.property({type:h})],f.prototype,"graphic",void 0);n.__decorate([D.property({readOnly:!0})],f.prototype,"contentElement",void 0);n.__decorate([D.property({readOnly:!0})],
f.prototype,"contentElementViewModel",void 0);n.__decorate([D.property()],f.prototype,"interceptor",void 0);n.__decorate([D.property()],f.prototype,"spatialReference",null);n.__decorate([D.property({readOnly:!0})],f.prototype,"state",null);n.__decorate([D.property()],f.prototype,"map",null);n.__decorate([D.property()],f.prototype,"view",void 0);return f=n.__decorate([a.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],f)})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),
function(r,n,h,f,w,y){function z(c){return`<ul class="esri-widget__list">${c.map(e=>`<li>${"string"===typeof e?y.applyTextFormattingHTML(y.htmlEntities(e)):e}</li>`).join("")}</ul>`}function D(c){return`<table class="esri-widget__table">${c.keys().map(e=>{var k=c.field(e);k="string"===typeof k?y.applyTextFormattingHTML(y.htmlEntities(k)):k;return`<tr><th>${e}</th><td>${k}</td></tr>`}).join("")}</table>`}function x({aggregatedFeatures:c,arcadeUtils:e,featureSetVars:k,context:l,viewInfo:m,map:v,graphic:E,
interceptor:A}){k.forEach(t=>{t=t.toLowerCase();var q=m.sr;const d={map:v,spatialReference:q,interceptor:A};"$map"===t&&(l.vars[t]=e.convertMapToFeatureSetCollection(d));"$layer"===t&&(l.vars[t]=e.convertFeatureLayerToFeatureSet({layer:E.sourceLayer,spatialReference:q,interceptor:A}));"$datastore"===t&&(l.vars[t]=e.convertServiceUrlToWorkspace({url:E.sourceLayer.url,spatialReference:q,interceptor:A}));if("$aggregatedfeatures"===t){q=E.layer;const {fields:B,objectIdField:I,geometryType:R,spatialReference:N,
displayField:K}=q;q=new w({fields:B,objectIdField:I,geometryType:R,spatialReference:N,displayField:K,...("feature"===q.type?{templates:q.templates,typeIdField:q.typeIdField,types:q.types}:null),source:c});l.vars[t]=e.convertFeatureLayerToFeatureSet({layer:q,spatialReference:N,interceptor:A})}})}function u(){return new Promise((c,e)=>r(["../../../support/arcadeUtils"],c,e))}async function b({graphic:c,view:e}){const {isAggregate:k,layer:l}=c;if(!k||!l||"2d"!==e?.type)return[];e=await e.whenLayerView(l);
if(!("createQuery"in e&&"queryFeatures"in e))return[];const m=e.createQuery();c=c.getObjectId();m.aggregateIds=null!=c?[c]:[];({features:c}=await e.queryFeatures(m));return c}async function a({expressionInfo:c,arcadeUtils:e,interceptor:k,spatialReference:l,map:m,graphic:v,view:E}){if(!c||!c.expression)return null;const A=e.createSyntaxTree(c.expression),t=p.filter(d=>e.hasVariable(A,d));[E]=await Promise.all([b({graphic:v,view:E}),e.loadScriptDependencies(A,!0,t)]);const q=e.getViewInfo({spatialReference:l});
l=e.createExecContext(v,q);l.interceptor=k;l.useAsync=!0;x({aggregatedFeatures:E,arcadeUtils:e,featureSetVars:t,context:l,viewInfo:q,map:m,graphic:v,interceptor:k});k=e.createFunction(A,l);return e.executeAsyncFunction(k,l).catch(d=>g.error("arcade-execution-error",{error:d,graphic:v,expressionInfo:c}))}const p=["$datastore","$map","$layer","$aggregatedfeatures"],g=h.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");n.createCompiledExpression=a;n.createCompiledExpressions=async function({expressionInfos:c,
spatialReference:e,graphic:k,interceptor:l,map:m,view:v}){if(!c||!c.length)return{};const E=await u(),A={};for(const t of c)A[`expression/${t.name}`]=a({expressionInfo:t,arcadeUtils:E,interceptor:l,spatialReference:e,map:m,graphic:k,view:v});c=await f.eachAlways(A);e={};for(const t in c)k=c[t].value,k="string"===typeof k?y.applyTextFormattingHTML(y.htmlEntities(k)):Array.isArray(k)?z(k):"esri.arcade.Dictionary"===k?.declaredClass?D(k):k,e[t]=k;return e};n.loadArcadeUtils=u;Object.defineProperty(n,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureRelationship":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureRelationship/FeatureRelationshipViewModel ./support/FeatureElementInfo ../support/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v){const E={title:!0,description:!0};f=function(A){function t(d,B){var I=q.call(this,d,B);I._featureElementInfo=null;I._relatedFeatureIntersectionObserverNode=null;I._relatedFeatureIntersectionObserver=new IntersectionObserver(([R])=>{R?.isIntersecting&&I._increaseFeaturePage()},{root:window.document});I.headingLevel=2;I.viewModel=new g;I.messages=null;I.messagesCommon=null;I.visibleElements={...E};I._increaseFeaturePage=()=>{const {state:R,showAllEnabled:N,
relatedFeatures:K,featuresPerPage:X,featurePage:Y}=I.viewModel;"ready"===R&&N&&K.length>=X*Y&&I.viewModel.featurePage++};return I}n._inherits(t,A);var q=n._createSuper(t);A=t.prototype;A.initialize=function(){this._featureElementInfo=new c;this.addHandles([z.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),z.initial),z.watch(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),
z.on(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])};A.loadDependencies=function(){return e.loadCalciteComponents({icon:()=>new Promise((d,B)=>r(["../../chunks/calcite-icon"],d,B)),list:()=>new Promise((d,B)=>r(["../../chunks/calcite-list"],d,B)),"list-item":()=>new Promise((d,B)=>r(["../../chunks/calcite-list-item"],d,B)),notice:()=>new Promise((d,B)=>r(["../../chunks/calcite-notice"],d,B))})};A.destroy=function(){this._unobserveRelatedFeatureObserver();
this._featureElementInfo=w.destroyMaybe(this._featureElementInfo)};A.castVisibleElements=function(d){return{...E,...d}};A.renderStickyLoading=function(){return"querying"===this.viewModel.state?m.tsx("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null};A.renderLoadingIcon=function(){return m.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})};A.renderLoading=function(){return m.tsx("div",
{key:"loading-container",class:"esri-feature__loading-container"},this.renderLoadingIcon())};A.renderShowAllIconNode=function(){return m.tsx("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})};A.renderChevronIconNode=function(){const d=k.isRTL(this.container)?"chevron-left":"chevron-right";return m.tsx("calcite-icon",{scale:"s",icon:d,slot:"content-end"})};A.renderRelatedFeature=function(d){var {itemDescriptionFieldName:B}=this.viewModel;const I=d.title;d.description=B&&d.formattedAttributes?.global[B];
B="loading"===d.state;return m.tsx("calcite-list-item",{key:d.uid,label:B?`${this.messagesCommon?.loading}\u2026`:I,description:B?"\u2026":d.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:d})},this.renderChevronIconNode())};A.renderShowAllListItem=function(){return this.displayShowAllButton?m.tsx("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},
this.renderShowAllIconNode()):null};A.renderNoRelatedFeaturesMessage=function(){return m.tsx("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},m.tsx("div",{slot:"message"},this.messages?.noRelatedFeatures))};A.renderFeatureObserver=function(){return m.tsx("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})};A.renderList=function(){const {relatedFeatureViewModels:d}=
this.viewModel;return m.tsx("calcite-list",null,d.toArray().map(B=>this.renderRelatedFeature(B)),this.renderShowAllListItem())};A.renderRelatedFeatures=function(){const {displayListItems:d}=this,{state:B}=this.viewModel;return m.tsx("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===B})},d?this.renderList():"ready"===B?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())};
A.renderRelationshipNotFound=function(){return m.tsx("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},m.tsx("div",{slot:"message"},this.messages?.relationshipNotFound))};A.render=function(){const {state:d}=this.viewModel;return m.tsx("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===d?this.renderLoading():"disabled"===d?this.renderRelationshipNotFound():this.renderRelatedFeatures())};
A._setupRelatedFeatureViewModels=function(){const {relatedFeatureViewModels:d}=this.viewModel;this.removeHandles("related-feature-viewmodels");d?.forEach(B=>{this.addHandles(z.watch(()=>[B.title,B.state],()=>this.scheduleRender(),z.initial),"related-feature-viewmodels")});this.scheduleRender()};A._setupFeatureElementInfo=function(){const {headingLevel:d,visibleElements:B}=this,I=B.description&&this.description,R=B.title&&this.title;this._featureElementInfo?.set({description:I,title:R,headingLevel:d})};
A._handleRelatedFeatureObserverChange=async function(){this._unobserveRelatedFeatureObserver();const {state:d,showAllEnabled:B}=this.viewModel;await y.after(0);this._relatedFeatureIntersectionObserverNode&&"ready"===d&&B&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)};A._relatedFeatureIntersectionObserverCreated=function(d){this._relatedFeatureIntersectionObserverNode=d};A._unobserveRelatedFeatureObserver=function(){this._relatedFeatureIntersectionObserverNode&&
this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)};n._createClass(t,[{key:"displayShowAllButton",get:function(){const {showAllEnabled:d,featureCount:B,displayCount:I}=this.viewModel;return!d&&!!B&&(B>I||0===I)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||0<this.viewModel.relatedFeatureViewModels.length}},{key:"description",get:function(){return this.viewModel.description},set:function(d){this.viewModel.description=d}},{key:"featureCountDescription",
get:function(){const {messages:d}=this,{featureCount:B}=this.viewModel;return v.substitute(1===B?d?.numberRecord:d?.numberRecords,{number:B})}},{key:"title",get:function(){return this.viewModel.title},set:function(d){this.viewModel.title=d}}]);return t}(p);h.__decorate([D.property()],f.prototype,"_relatedFeatureIntersectionObserverNode",void 0);h.__decorate([D.property({readOnly:!0})],f.prototype,"displayShowAllButton",null);h.__decorate([D.property({readOnly:!0})],f.prototype,"displayListItems",
null);h.__decorate([D.property()],f.prototype,"description",null);h.__decorate([D.property({readOnly:!0})],f.prototype,"featureCountDescription",null);h.__decorate([D.property()],f.prototype,"headingLevel",void 0);h.__decorate([D.property()],f.prototype,"title",null);h.__decorate([D.property({type:g})],f.prototype,"viewModel",void 0);h.__decorate([D.property(),l.messageBundle("esri/widgets/Feature/t9n/Feature")],f.prototype,"messages",void 0);h.__decorate([D.property(),l.messageBundle("esri/t9n/common")],
f.prototype,"messagesCommon",void 0);h.__decorate([D.property()],f.prototype,"visibleElements",void 0);h.__decorate([x.cast("visibleElements")],f.prototype,"castVisibleElements",null);return f=h.__decorate([a.subclass("esri.widgets.Feature.FeatureRelationship")],f)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/Clonable ../../../core/Collection ../../../core/HandleOwner ../../../core/Identifiable ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m){f=function(v){function E(t){var q=A.call(this,t);q._queryAbortController=null;q._queryPageAbortController=null;q._queryFeatureCountAbortController=null;q.featuresPerPage=10;q.description=null;q.graphic=null;q.layer=null;q.map=null;q.orderByFields=null;q.featureCount=0;q.relationshipId=null;q.showAllEnabled=!1;q.title=null;q._cancelQuery=()=>{const {_queryAbortController:d}=r._assertThisInitialized(q);d&&d.abort();q._queryAbortController=null};q._cancelQueryFeatureCount=
()=>{const {_queryFeatureCountAbortController:d}=r._assertThisInitialized(q);d&&d.abort();q._queryFeatureCountAbortController=null};q._cancelQueryPage=()=>{const {_queryPageAbortController:d}=r._assertThisInitialized(q);d&&d.abort();q._queryPageAbortController=null};q._queryController=async()=>{q._cancelQuery();const d=new AbortController;q._queryAbortController=d;await u.ignoreAbortErrors(q._query());q._queryAbortController===d&&(q._queryAbortController=null)};q._queryFeatureCountController=async()=>
{q._cancelQueryFeatureCount();const d=new AbortController;q._queryFeatureCountAbortController=d;await u.ignoreAbortErrors(q._queryFeatureCount());q._queryFeatureCountAbortController===d&&(q._queryFeatureCountAbortController=null)};q._queryPageController=async()=>{const d=new AbortController;q._queryPageAbortController=d;await u.ignoreAbortErrors(q._queryPage());q._queryPageAbortController===d&&(q._queryPageAbortController=null)};q._queryThrottled=a.throttle(q._queryController,100,r._assertThisInitialized(q));
q._queryFeatureCountThrottled=a.throttle(q._queryFeatureCountController,100,r._assertThisInitialized(q));q._queryPageThrottled=a.throttle(q._queryPageController,100,r._assertThisInitialized(q));q._query=async()=>{const {_queryAbortController:d,relatedFeatures:B}=r._assertThisInitialized(q);q._destroyRelatedFeatureViewModels();q.featurePage=1;B.removeAll();B.addMany(q._sliceFeatures(await q._queryRelatedFeatures({signal:d?.signal})))};q.handles.add([b.watch(()=>[q.displayCount,q.graphic,q.layer,q.map,
q.orderByFieldsFixedCasing,q.relationshipId,q.featuresPerPage,q.showAllEnabled,q.canQuery,q.featureCount],()=>q._queryThrottled(),b.initial),b.watch(()=>[q.featurePage,q.showAllEnabled],()=>q._queryPageThrottled()),b.watch(()=>[q.layer,q.relationshipId,q.objectId,q.canQuery],()=>q._queryFeatureCountThrottled())]);return q}r._inherits(E,v);var A=r._createSuper(E);v=E.prototype;v.destroy=function(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();this._cancelQuery();this._cancelQueryFeatureCount();
this._cancelQueryPage()};v._destroyRelatedFeatureViewModels=function(){this.relatedFeatureViewModels?.forEach(t=>!t.destroyed&&t.destroy());this.relatedFeatureViewModels.removeAll()};v._queryFeatureCount=async function(){const {layer:t,relatedLayer:q,relationshipId:d,objectId:B,_queryFeatureCountAbortController:I,canQuery:R,supportsCacheHint:N}=this;await t?.load();await q?.load();if(R&&t&&q){var K=q.createQuery();K=new l({cacheHint:N,relationshipId:d,returnGeometry:!1,objectIds:[B],where:x.unwrapOrValue(K.where,
void 0)});K=await t.queryRelatedFeaturesCount(K,{signal:I?.signal});this._set("featureCount",K[B]||0)}else this._set("featureCount",0)};v._sliceFeatures=function(t){const {showAllEnabled:q,displayCount:d}=this;return q?t:d?t.slice(0,d):[]};v._queryPage=async function(){const {relatedFeatures:t,featurePage:q,showAllEnabled:d,_queryPageAbortController:B}=this;!d||2>q||t.addMany(await this._queryRelatedFeatures({signal:B?.signal}))};v._queryRelatedFeatures=async function(t){const {orderByFieldsFixedCasing:q,
showAllEnabled:d,featuresPerPage:B,displayCount:I,layer:R,relationshipId:N,featurePage:K,featureCount:X,relatedLayer:Y,supportsCacheHint:S}=this,{canQuery:U,objectId:J}=this;if(!U||!R||!Y)return[];var T=d?((K-1)*B+X)%X:0;const F=d?B:I;var L=Y.objectIdField;L=[...q.map(M=>M.field),L].filter(x.isSome);const V=q.map(M=>`${M.field} ${M.order}`),C=Y.createQuery();T=new l({orderByFields:V,start:T,num:F,outFields:L,cacheHint:S,relationshipId:N,returnGeometry:!1,objectIds:[J],where:x.unwrapOrValue(C.where,
void 0)});t=(await R.queryRelatedFeatures(T,{signal:t?.signal}))[J]?.features||[];t.forEach(M=>{M.sourceLayer=Y;M.layer=Y});return t};r._createClass(E,[{key:"featurePage",get:function(){return this._get("featurePage")},set:function(t){const {featuresPerPage:q,featureCount:d}=this;this._set("featurePage",Math.min(Math.max(t,1),Math.ceil(d/q)||1))}},{key:"orderByFieldsFixedCasing",get:function(){const {orderByFields:t,relatedLayer:q}=this;return t&&q?.loaded?t.map(d=>{const B=d.clone();B.field=m.getFixedFieldName(d.field,
q);return B}):t??[]}},{key:"supportsCacheHint",get:function(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}},{key:"canQuery",get:function(){const t=this.layer?.capabilities?.queryRelated;return!!this.relatedLayer&&!!this.relationship&&"number"===typeof this.relationshipId&&"number"===typeof this.objectId&&!!t?.supportsCount&&!!t?.supportsPagination}},{key:"itemDescriptionFieldName",get:function(){return this.orderByFieldsFixedCasing[0]?.field||null}},{key:"displayCount",get:function(){return this._get("displayCount")},
set:function(t){this._set("displayCount",Math.min(Math.max(t,0),10))}},{key:"objectId",get:function(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}},{key:"objectIdField",get:function(){return this.layer?.objectIdField||null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new y}},{key:"relatedLayer",get:function(){const {layer:t,map:q,relationship:d}=this;return t?.loaded&&q&&d?m.findRelatedLayer(q,t,d)??null:null}},{key:"relationship",
get:function(){const {relationshipId:t,layer:q}=this;return"number"===typeof t?q?.relationships?.find(({id:d})=>d===t)??null:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new y}},{key:"state",get:function(){const {_queryAbortController:t,_queryFeatureCountAbortController:q,_queryPageAbortController:d,canQuery:B}=this;return q?"loading":t||d?"querying":B?"ready":"disabled"}}]);return E}(w.ClonableMixin(D.IdentifiableMixin(z.HandleOwnerMixin(f))));
n.__decorate([p.property()],f.prototype,"_queryAbortController",void 0);n.__decorate([p.property()],f.prototype,"_queryPageAbortController",void 0);n.__decorate([p.property()],f.prototype,"_queryFeatureCountAbortController",void 0);n.__decorate([p.property({value:1})],f.prototype,"featurePage",null);n.__decorate([p.property()],f.prototype,"featuresPerPage",void 0);n.__decorate([p.property({readOnly:!0})],f.prototype,"orderByFieldsFixedCasing",null);n.__decorate([p.property({readOnly:!0})],f.prototype,
"supportsCacheHint",null);n.__decorate([p.property({readOnly:!0})],f.prototype,"canQuery",null);n.__decorate([p.property()],f.prototype,"description",void 0);n.__decorate([p.property({readOnly:!0})],f.prototype,"itemDescriptionFieldName",null);n.__decorate([p.property({value:3})],f.prototype,"displayCount",null);n.__decorate([p.property({type:h})],f.prototype,"graphic",void 0);n.__decorate([p.property()],f.prototype,"layer",void 0);n.__decorate([p.property()],f.prototype,"map",void 0);n.__decorate([p.property({readOnly:!0})],
f.prototype,"objectId",null);n.__decorate([p.property({readOnly:!0})],f.prototype,"objectIdField",null);n.__decorate([p.property()],f.prototype,"orderByFields",void 0);n.__decorate([p.property({readOnly:!0})],f.prototype,"relatedFeatures",null);n.__decorate([p.property({readOnly:!0})],f.prototype,"relatedLayer",null);n.__decorate([p.property({readOnly:!0})],f.prototype,"relationship",null);n.__decorate([p.property()],f.prototype,"featureCount",void 0);n.__decorate([p.property({readOnly:!0})],f.prototype,
"relatedFeatureViewModels",null);n.__decorate([p.property()],f.prototype,"relationshipId",void 0);n.__decorate([p.property()],f.prototype,"showAllEnabled",void 0);n.__decorate([p.property()],f.prototype,"state",null);n.__decorate([p.property()],f.prototype,"title",void 0);return f=n.__decorate([k.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],f)})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./FeatureRelationship/FeatureRelationshipViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d,B,I){var R;const N={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};w=R=function(K){function X(S){var U=Y.call(this,S);U._handles=new y;U._error=null;U._featureAbortController=null;U._graphicChangedThrottled=a.throttle(U._graphicChanged,1,r._assertThisInitialized(U));U._expressionAttributes=null;U._graphicExpressionAttributes=null;U.abilities=
{...N};U.content=null;U.contentViewModels=[];U.description=null;U.defaultPopupTemplateEnabled=!1;U.formattedAttributes=null;U.lastEditInfo=null;U.relatedInfos=new Map;U.title="";U.view=null;U._isAllowedContentType=J=>{const {abilities:T}=r._assertThisInitialized(U);return"attachments"===J.type&&!!T.attachmentsContent||"custom"===J.type&&!!T.customContent||"fields"===J.type&&!!T.fieldsContent||"media"===J.type&&!!T.mediaContent||"text"===J.type&&!!T.textContent||"expression"===J.type&&!!T.expressionContent||
"relationship"===J.type&&!!T.relationshipContent};U._handles.add(b.watch(()=>[U.graphic,U._effectivePopupTemplate,U.abilities],()=>U._graphicChangedThrottled(),b.initial));return U}r._inherits(X,K);var Y=r._createSuper(X);K=X.prototype;K.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=null;this._destroyContentViewModels();this.relatedInfos.clear()};K.castAbilities=function(S){return{...N,...S}};K.setActiveMedia=function(S,U){S=this.contentViewModels[S];
S instanceof t&&S.setActiveMedia(U)};K.nextMedia=function(S){S=this.contentViewModels[S];S instanceof t&&S.next()};K.previousMedia=function(S){S=this.contentViewModels[S];S instanceof t&&S.previous()};K.updateGeometry=async function(){const {graphic:S,spatialReference:U,_sourceLayer:J}=this;await J?.load();var T=J?.objectIdField;T&&S&&J&&(T=S?.attributes?.[T],null!=T&&(T=[T],!S.geometry&&(T=(await B.querySourceLayer({layer:J,graphic:S,outFields:[],objectIds:T,returnGeometry:!0,spatialReference:U}))?.geometry)))&&
(S.geometry=T)};K._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};K._graphicChanged=async function(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:S}=this;if(S){var U=new AbortController;this._featureAbortController=U;try{await this._queryFeature({signal:U.signal})}catch(J){u.isAbortError(J)||(this._error=J,D.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:J,
graphic:S,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===U&&(this._featureAbortController=null)}};K._cancelFeatureQuery=function(){const {_featureAbortController:S}=this;S&&S.abort();this._featureAbortController=null};K._compileContentElement=function(S,U){if("attachments"===S.type)return this._compileAttachments(S,U);if("custom"===S.type)return this._compileCustom(S,U);if("fields"===S.type)return this._compileFields(S,U);if("media"===S.type)return this._compileMedia(S,
U);if("text"===S.type)return this._compileText(S,U);if("expression"===S.type)return this._compileExpression(S,U);if("relationship"===S.type)return this._compileRelationship(S,U)};K._compileContent=function(S){this._destroyContentViewModels();if(this.graphic)return Array.isArray(S)?S.filter(this._isAllowedContentType).map((U,J)=>this._compileContentElement(U,J)).filter(x.isSome):"string"===typeof S?this._compileText(new l({text:S}),0).text:S};K._destroyContentViewModels=function(){this._handles?.remove("relationship-view-models");
this._handles?.remove("content-view-models");this.contentViewModels.forEach(S=>S&&!S.destroyed&&S.destroy());this._set("contentViewModels",[])};K._matchesFeature=function(S,U){S=S?.graphic?.getObjectId();U=U?.getObjectId();return x.isSome(S)&&x.isSome(U)&&S===U};K._setRelatedFeaturesViewModels=function({relatedFeatureViewModels:S,relatedFeatures:U,map:J}){const {view:T,spatialReference:F}=this;U?.filter(Boolean).forEach(L=>{S.find(V=>this._matchesFeature(V,L))||S.add(new R({abilities:{relationshipContent:!1},
map:J,view:T,spatialReference:F,graphic:L}))});S.forEach(L=>{U?.find(V=>this._matchesFeature(L,V))||S.remove(L)})};K._setExpressionContentVM=function(S,U){const J=this.formattedAttributes,{contentElement:T,contentElementViewModel:F}=S;S=T?.type;F&&S&&("fields"===S&&(this._createFieldsFormattedAttributes({contentElement:T,contentElementIndex:U,formattedAttributes:J}),F.set(this._createFieldsVMParams(T,U))),"media"===S&&(this._createMediaFormattedAttributes({contentElement:T,contentElementIndex:U,formattedAttributes:J}),
F.set(this._createMediaVMParams(T,U))),"text"===S&&F.set(this._createTextVMParams(T)))};K._compileRelationship=function(S,U){const {displayCount:J,orderByFields:T,relationshipId:F,title:L,description:V}=S,{_sourceLayer:C,graphic:M,map:P}=this,W=new q({displayCount:J,graphic:M,orderByFields:T,relationshipId:F,layer:C,map:P,...this._compileTitleAndDesc({title:L,description:V})});this.contentViewModels[U]=W;this._handles.add(b.on(()=>W.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(W)),
"relationship-view-models");return S};K._compileExpression=function(S,U){const {expressionInfo:J}=S,{graphic:T,map:F,spatialReference:L,view:V}=this,C=new E({expressionInfo:J,graphic:T,interceptor:R.interceptor,map:F,spatialReference:L,view:V});this.contentViewModels[U]=C;this._handles.add(b.watch(()=>C.contentElementViewModel,()=>this._setExpressionContentVM(C,U),b.initial),"content-view-models");return S};K._compileAttachments=function(S,U){const {graphic:J}=this,{description:T,title:F}=S;this.contentViewModels[U]=
new m({graphic:J,...this._compileTitleAndDesc({title:F,description:T})});return S};K._compileCustom=function(S,U){const {graphic:J}=this,{creator:T,destroyer:F}=S;this.contentViewModels[U]=new v({graphic:J,creator:T,destroyer:F});return S};K._compileTitleAndDesc=function({title:S,description:U}){const {_fieldInfoMap:J,_sourceLayer:T,graphic:F,formattedAttributes:L}=this,V=F?.attributes,C=this._expressionAttributes,M=L.global;return{title:B.substituteFieldsInLinksAndAttributes({attributes:V,fieldInfoMap:J,
globalAttributes:M,expressionAttributes:C,layer:T,text:S}),description:B.substituteFieldsInLinksAndAttributes({attributes:V,fieldInfoMap:J,globalAttributes:M,expressionAttributes:C,layer:T,text:U})}};K._createFieldsVMParams=function(S,U){const J=this._effectivePopupTemplate,T=this.formattedAttributes,F={...T?.global,...T?.content[U]};U=(S?.fieldInfos||J?.fieldInfos)?.filter(({fieldName:C})=>B.isExpressionField(C)||B.isRelatedField(C)||F.hasOwnProperty(C));const {description:L,title:V}=S;return{attributes:F,
expressionInfos:J?.expressionInfos,fieldInfos:U,...this._compileTitleAndDesc({title:V,description:L})}};K._compileFields=function(S,U){const J=S.clone();S=new A(this._createFieldsVMParams(S,U));this.contentViewModels[U]=S;J.fieldInfos=S.formattedFieldInfos.slice(0);return J};K._createMediaVMParams=function(S,U){const {abilities:J,graphic:T,_fieldInfoMap:F,_effectivePopupTemplate:L,relatedInfos:V,_sourceLayer:C,_expressionAttributes:M}=this,P=this.formattedAttributes,W=T?.attributes??{},{description:H,
mediaInfos:G,title:O}=S;return{abilities:{chartAnimation:J.chartAnimation},activeMediaInfoIndex:S.activeMediaInfoIndex||0,attributes:W,isAggregate:T?.isAggregate,layer:C,fieldInfoMap:F,formattedAttributes:{...P?.global,...P?.content[U]},expressionAttributes:M,mediaInfos:G,popupTemplate:L,relatedInfos:V,...this._compileTitleAndDesc({title:O,description:H})}};K._compileMedia=function(S,U){const J=S.clone();S=new t(this._createMediaVMParams(S,U));J.mediaInfos=S.formattedMediaInfos.slice(0);this.contentViewModels[U]=
S;return J};K._createTextVMParams=function(S){const {graphic:U,_fieldInfoMap:J,_sourceLayer:T,_expressionAttributes:F}=this;S&&S.text&&(S.text=B.substituteFieldsInLinksAndAttributes({attributes:U?.attributes??{},fieldInfoMap:J,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:F,layer:T,text:S.text}));return{graphic:U,creator:S.text}};K._compileText=function(S,U){S=S.clone();this.contentViewModels[U]=new v(this._createTextVMParams(S));return S};K._compileLastEditInfo=function(){const {_effectivePopupTemplate:S,
_sourceLayer:U,graphic:J}=this;if(S){var {lastEditInfoEnabled:T}=S,F=U?.editFieldsInfo;if(T&&F)return B.formatEditInfo(F,J?.attributes)}};K._compileTitle=function(S){const {_fieldInfoMap:U,_sourceLayer:J,graphic:T,_expressionAttributes:F}=this;return B.substituteFieldsInLinksAndAttributes({attributes:T?.attributes??{},fieldInfoMap:U,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:F,layer:J,text:S})};K._getTitle=async function(){const {_effectivePopupTemplate:S,graphic:U}=
this;return U?B.graphicCallback(S?.title,{graphic:U}):null};K._getContent=async function(){const {_effectivePopupTemplate:S,graphic:U}=this;return U?B.graphicCallback(S?.content,{graphic:U}):null};K._queryFeature=async function(S){const {_featureAbortController:U,_sourceLayer:J,graphic:T,_effectivePopupTemplate:F}=this,L=this.map,V=this.view,C=this.spatialReference;if(U===this._featureAbortController&&T){await B.queryUpdatedFeature({graphic:T,popupTemplate:F,layer:J,spatialReference:C},S);var {content:{value:M},
title:{value:P}}=await u.eachAlways({content:this._getContent(),title:this._getTitle()});({expressionAttributes:{value:S}}=await u.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(S),expressionAttributes:d.createCompiledExpressions({expressionInfos:F?.expressionInfos,spatialReference:C,graphic:T,map:L,interceptor:R.interceptor,view:V})}));U===this._featureAbortController&&T&&(this._expressionAttributes=S,this._graphicExpressionAttributes={...T.attributes,...S},this._set("formattedAttributes",
this._createFormattedAttributes(M)),this._set("title",this._compileTitle(P)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(M)||null))}};K._createMediaFormattedAttributes=function({contentElement:S,contentElementIndex:U,formattedAttributes:J}){const {_effectivePopupTemplate:T,graphic:F,relatedInfos:L,_sourceLayer:V,_fieldInfoMap:C,_graphicExpressionAttributes:M}=this;J.content[U]=B.formatAttributes({fieldInfos:T?.fieldInfos,graphic:F,attributes:{...M,
...S.attributes},layer:V,fieldInfoMap:C,relatedInfos:L})};K._createFieldsFormattedAttributes=function({contentElement:S,contentElementIndex:U,formattedAttributes:J}){if(S.fieldInfos){const {graphic:T,relatedInfos:F,_sourceLayer:L,_fieldInfoMap:V,_graphicExpressionAttributes:C}=this;J.content[U]=B.formatAttributes({fieldInfos:S.fieldInfos,graphic:T,attributes:{...C,...S.attributes},layer:L,fieldInfoMap:V,relatedInfos:F})}};K._createFormattedAttributes=function(S){const {_effectivePopupTemplate:U,graphic:J,
relatedInfos:T,_sourceLayer:F,_fieldInfoMap:L,_graphicExpressionAttributes:V}=this,C={global:B.formatAttributes({fieldInfos:U?.fieldInfos,graphic:J,attributes:V,layer:F,fieldInfoMap:L,relatedInfos:T}),content:[]};Array.isArray(S)&&S.forEach((M,P)=>{"fields"===M.type&&this._createFieldsFormattedAttributes({contentElement:M,contentElementIndex:P,formattedAttributes:C});"media"===M.type&&this._createMediaFormattedAttributes({contentElement:M,contentElementIndex:P,formattedAttributes:C})});return C};
K._checkForRelatedFeatures=function(S){const {graphic:U,_effectivePopupTemplate:J}=this;return this._queryRelatedInfos(U,B.getAllFieldInfos(J),S)};K._queryRelatedInfos=async function(S,U,J){const {relatedInfos:T,_sourceLayer:F}=this;T.clear();const L=x.isSome(F?.associatedLayer)?await F?.associatedLayer.load(J):F;if(L&&S){var V=U.filter(P=>P&&B.isRelatedField(P.fieldName));if(V&&V.length){U.forEach(P=>this._configureRelatedInfo(P,L));var C=await I.queryLayerInfos({relatedInfos:T,layer:L},J);Object.keys(C).forEach(P=>
{const W=T.get(P.toString());P=C[P]?.value;W&&P&&(W.layerInfo=P.data)});var M=await I.queryRelatedFeatures({graphic:S,relatedInfos:T,layer:L},J);Object.keys(M).forEach(P=>{I.setRelatedFeatures(M[P]?.value,T.get(P.toString()))})}}};K._configureRelatedInfo=function(S,U){const {relatedInfos:J}=this,T=I.getRelatedFieldInfo(S.fieldName);if(T){var {layerId:F,fieldName:L}=T;F&&(U=J.get(F.toString())||I.createRelatedInfo(F,U))&&(I.updateRelatedInfo({relatedInfo:U,fieldName:L,fieldInfo:S}),this.relatedInfos.set(F,
U))}};r._createClass(X,[{key:"_effectivePopupTemplate",get:function(){return x.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return B.createfieldInfoMap(B.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return B.getSourceLayer(this.graphic)}},{key:"isTable",get:function(){return this._sourceLayer?.isTable||!1}},{key:"state",get:function(){return this.graphic?
this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(S){this._set("graphic",S?S.clone():null)}},{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(S){this._override("spatialReference",S)}},{key:"map",get:function(){return this.view?.map||null},set:function(S){this._override("map",S)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return X}(z.IdentifiableMixin(w));w.interceptor=
new f.FeatureSetQueryInterceptor(B.preLayerQueryCallback,B.preRequestCallback);n.__decorate([p.property()],w.prototype,"_error",void 0);n.__decorate([p.property()],w.prototype,"_featureAbortController",void 0);n.__decorate([p.property({readOnly:!0})],w.prototype,"_effectivePopupTemplate",null);n.__decorate([p.property({readOnly:!0})],w.prototype,"_fieldInfoMap",null);n.__decorate([p.property({readOnly:!0})],w.prototype,"_sourceLayer",null);n.__decorate([p.property()],w.prototype,"abilities",void 0);
n.__decorate([g.cast("abilities")],w.prototype,"castAbilities",null);n.__decorate([p.property({readOnly:!0})],w.prototype,"content",void 0);n.__decorate([p.property({readOnly:!0})],w.prototype,"contentViewModels",void 0);n.__decorate([p.property()],w.prototype,"description",void 0);n.__decorate([p.property({type:Boolean})],w.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([p.property({readOnly:!0})],w.prototype,"isTable",null);n.__decorate([p.property({readOnly:!0})],w.prototype,"state",
null);n.__decorate([p.property({readOnly:!0})],w.prototype,"formattedAttributes",void 0);n.__decorate([p.property({type:h,value:null})],w.prototype,"graphic",null);n.__decorate([p.property({readOnly:!0})],w.prototype,"lastEditInfo",void 0);n.__decorate([p.property({readOnly:!0})],w.prototype,"relatedInfos",void 0);n.__decorate([p.property()],w.prototype,"spatialReference",null);n.__decorate([p.property({readOnly:!0})],w.prototype,"title",void 0);n.__decorate([p.property()],w.prototype,"map",null);
n.__decorate([p.property({readOnly:!0})],w.prototype,"waitingForContent",null);n.__decorate([p.property()],w.prototype,"view",void 0);return w=R=n.__decorate([k.subclass("esri.widgets.FeatureViewModel")],w)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(r,n){n=n._createClass(function(h,f){this.preLayerQueryCallback=h;this.preRequestCallback=f;this.preLayerQueryCallback||(this.preLayerQueryCallback=w=>
{});this.preRequestCallback||(this.preLayerQueryCallback=w=>{})});r.FeatureSetQueryInterceptor=n;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/resources":function(){define(["exports"],function(r){r.CSS={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",
btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};
Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/Error ../../../core/accessorSupport/decorators/subclass ../resources ../../support/widget ../../support/jsxFactory".split(" "),function(r,n,h,f,w,y,z,D,x,u,b,a){r.FeatureContentMixin=
p=>{p=function(g){function c(){var k=e.apply(this,arguments);k.renderNodeContent=l=>b.isWidget(l)&&!l.destroyed?a.tsx("div",{class:u.CSS.contentNode,key:l},l.render()):l instanceof HTMLElement?a.tsx("div",{class:u.CSS.contentNode,key:l,bind:l,afterCreate:k._attachToNode}):b.hasDomNode(l)?a.tsx("div",{class:u.CSS.contentNode,key:l,bind:l.domNode,afterCreate:k._attachToNode}):null;return k}n._inherits(c,g);var e=n._createSuper(c);c.prototype._attachToNode=function(k){k.appendChild(this)};return n._createClass(c)}(p);
return p=h.__decorate([x.subclass("esri.widgets.Feature.ContentMixin")],p)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g){z=function(c){function e(l,m){l=k.call(this,l,m);l._animationDelay=500;l._animationPromise=null;l.viewModel=new a;return l}r._inherits(e,c);var k=r._createSuper(e);c=e.prototype;c.initialize=function(){this.addHandles(w.watch(()=>this.visible,l=>this._visibleChange(l)))};c.destroy=function(){this._animationPromise=null};c.show=function(l){const {location:m,promise:v}=l??{};m&&(this.viewModel.location=m);this.visible=!0;l=()=>this.hide();v&&v.catch(()=>{}).then(l)};
c.hide=function(){this.visible=!1};c.render=function(){var {visible:l}=this,{screenLocation:m}=this.viewModel;m=!!m;l={["esri-spinner--start"]:l&&m,["esri-spinner--finish"]:!l&&m};m=this._getPositionStyles();return g.tsx("div",{class:this.classes("esri-spinner",l),styles:m})};c._visibleChange=function(l){if(l)this.viewModel.screenLocationEnabled=!0;else{var m=f.after(this._animationDelay);this._animationPromise=m;m.catch(()=>{}).then(()=>{this._animationPromise===m&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};c._getPositionStyles=function(){const {screenLocation:l,view:m}=this.viewModel;if(h.isNone(m)||h.isNone(l))return{};const {padding:v}=m;return{left:`${l.x-v.left}px`,top:`${l.y-v.top}px`}};r._createClass(e,[{key:"location",get:function(){return this.viewModel.location},set:function(l){this.viewModel.location=l}},{key:"view",get:function(){return this.viewModel.view},set:function(l){this.viewModel.view=l}},{key:"visible",get:function(){return this.viewModel.visible},
set:function(l){this.viewModel.visible=l}}]);return e}(b);n.__decorate([y.property()],z.prototype,"location",null);n.__decorate([y.property()],z.prototype,"view",null);n.__decorate([y.property({type:a})],z.prototype,"viewModel",void 0);n.__decorate([y.property()],z.prototype,"visible",null);return z=n.__decorate([u.subclass("esri.widgets.Spinner")],z)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),
function(r,n,h,f,w,y,z,D){f=function(x){function u(a){a=b.call(this,a);a.visible=!1;return a}r._inherits(u,x);var b=r._createSuper(u);return r._createClass(u)}(D);n.__decorate([h.property()],f.prototype,"visible",void 0);return f=n.__decorate([z.subclass("esri.widgets.CompassViewModel")],f)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b){const a=Symbol("anchorHandles");h=function(g){function c(k){var l=e.call(this,k);l[p]=new f;l.location=null;l.screenLocationEnabled=!1;l.view=null;l[a].add([y.when(()=>w.applySome(l.screenLocationEnabled?l.view:null,m=>[m.size,"3d"===m.type?m.camera:m.viewpoint]),()=>l.notifyChange("screenLocation")),y.watch(()=>l.screenLocation,(m,v)=>{w.isSome(m)&&w.isSome(v)&&l.emit("view-change")})]);return l}r._inherits(c,g);var e=r._createSuper(c);c.prototype.destroy=function(){this.view=
null;this[a]=w.destroyMaybe(this[a])};r._createClass(c,[{key:"screenLocation",get:function(){const {location:k,view:l,screenLocationEnabled:m}=this;return m&&w.isSome(k)&&w.isSome(l)&&l.ready?l.toScreen?.(k):null}}]);return c}(h.EventedAccessor);var p=a;n.__decorate([z.property()],h.prototype,"location",void 0);n.__decorate([z.property()],h.prototype,"screenLocation",null);n.__decorate([z.property()],h.prototype,"screenLocationEnabled",void 0);n.__decorate([z.property()],h.prototype,"view",void 0);
return h=n.__decorate([b.subclass("esri.widgets.support.AnchorElementViewModel")],h)})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ./actions".split(" "),function(r,n,h,f,w,y){function z(g){const {selectedFeature:c,location:e,view:k}=g;return k?"3d"===k.type?c??e??null:g.get("selectedFeature.geometry")||e:null}function D(g){return!!g&&g.isAggregate&&"cluster"===g.sourceLayer?.featureReduction?.type}async function x(g,
c){if("3d"!==c?.type||!g||"esri.Graphic"!==g.declaredClass)return!0;if((c=c.getViewForGraphic(g))&&"whenGraphicBounds"in c){let e;try{e=await c.whenGraphicBounds(g,{useViewElevation:!0})}catch(k){}return!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5]}return!0}async function u(g){const {location:c,selectedFeature:e,view:k,zoomFactor:l}=g,m=z(g);if(!k||!m)throw g=new n("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",
{target:m,view:k}),p.error(g),g;const v=k.scale/l,E=g.selectedFeature?.geometry??c,A=f.isSome(E)&&"point"===E.type&&await x(e,k);y.zoomToFeature.active=!0;y.zoomToFeature.disabled=!0;try{await g.zoomTo({target:{target:m,scale:A?v:void 0}})}catch(t){const q=new n("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});p.error(q)}finally{y.zoomToFeature.active=!1,y.zoomToFeature.disabled=!1,g.zoomToLocation=null,A&&(g.location=E)}}async function b(g){const {selectedFeature:c,
view:e}=g;if("2d"!==e?.type)throw g=new n("zoomToCluster:invalid-view","View must be 2d MapView.",{view:e}),p.error(g),g;if(!c||!D(c))throw g=new n("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:c}),p.error(g),g;const [k,l]=await a(e,c);y.zoomToClusteredFeatures.active=!0;y.zoomToClusteredFeatures.disabled=!0;const {extent:m}=await k.queryExtent(l);await g.zoomTo({target:m});y.zoomToClusteredFeatures.active=!1;y.zoomToClusteredFeatures.disabled=
!1}async function a(g,c){g=await g.whenLayerView(c.sourceLayer);const e=g.createQuery();c=c.getObjectId();e.aggregateIds=null!=c?[c]:[];return[g,e]}const p=h.getLogger("esri.widgets.Popup.PopupViewModel");r.browseAggregateFeatures=async function(g){const {selectedFeature:c,view:e}=g;if(e&&c){var [k,l]=await a(e,c);y.browseClusteredFeatures.active=!0;y.browseClusteredFeatures.disabled=!0;({features:g}=await k.queryFeatures(l));y.browseClusteredFeatures.active=!1;y.browseClusteredFeatures.disabled=
!1;e.popup?.open({features:[c].concat(g),featureMenuOpen:!0})}};r.displayClusterExtent=async function(g){const {view:c,selectedFeature:e}=g;if(c&&e){var [k,l]=await a(c,e),{extent:m}=await k.queryExtent(l);g.selectedClusterBoundaryFeature.geometry=m;c.graphics.add(g.selectedClusterBoundaryFeature)}};r.getPointFromGeometry=function(g){if(f.isNone(g))return null;switch(g.type){case "point":return g;case "extent":return g.center;case "polygon":return g.centroid;case "multipoint":case "polyline":return g.extent?.center;
default:return null}};r.getSelectedTarget=z;r.isClusterFeature=D;r.removeClusteredFeaturesForBrowsing=function(g){const c=g.features.filter(e=>D(e));c.length&&(g.features=c)};r.triggerAction=g=>{const {event:c,view:e}=g;({action:g}=c);var k=e&&e.popup;if(!g)return Promise.reject(new n("trigger-action:missing-arguments","Event has no action"));if(!k)return Promise.reject(new n("trigger-action:missing-arguments","view.popup is missing"));const {disabled:l,id:m}=g;if(!m)return Promise.reject(new n("trigger-action:invalid-action",
"action.id is missing"));if(l)return Promise.reject(new n("trigger-action:invalid-action","Action is disabled"));if(m===y.zoomToFeature.id)return u(k.viewModel).catch(w.throwIfNotAbortError);if(m===y.zoomToClusteredFeatures.id)return b(k.viewModel);if(m===y.browseClusteredFeatures.id)return k.featureMenuOpen=!k.featureMenuOpen,k.viewModel.browseClusterEnabled=!k.viewModel.browseClusterEnabled,Promise.resolve();k.viewModel.browseClusterEnabled=!1;if(m===y.removeSelectedFeature.id){k.close();({selectedFeature:g}=
k);if(!g)return Promise.reject(new n(`trigger-action:${y.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:g}));({sourceLayer:k}=g);k?k.remove(g):e.graphics.remove(g)}return Promise.resolve()};r.zoomToClusterExtent=b;r.zoomToLocation=u;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(r,n){const h=new n({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),
f=new n({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),w=new n({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});n=new n({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});r.all=[h,f,n,w];r.browseClusteredFeatures=n;r.removeSelectedFeature=f;r.zoomToClusteredFeatures=w;r.zoomToFeature=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/widgets/Popup/css":function(){define(["exports"],function(r){r.CSS={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",
iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",
isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",
isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"esri-popup__footer",
footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",
actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",actionExit:"esri-popup__action--exit",actionSelectFeature:"esri-popup__action--select-feature",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",
paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",
featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button",collapseIcon:"esri-popup__collapse-icon"};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../layers/LayerConstants ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../symbols/SimpleFillSymbol ../../geometry/Point".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d,B,I,R,N,K,X,Y){const S=y.ofType({key:"type",defaultKeyValue:"button",base:v,typeMap:{button:E,toggle:A}});h=function(U){function J(F){F=T.call(this,F);F._handles=new D;F._pendingPromises=new Set;F._fetchFeaturesController=null;F._highlightSelectedFeaturePromise=null;F._highlightActiveFeaturePromise=null;F._selectedClusterFeature=null;F.featurePage=null;F.actions=new S;F.activeFeature=null;F.defaultPopupTemplateEnabled=!1;F.autoCloseEnabled=
!1;F.autoOpenEnabled=!0;F.browseClusterEnabled=!1;F.content=null;F.featuresPerPage=20;F.featureViewModelAbilities=null;F.featureViewModels=[];F.highlightEnabled=!0;F.includeDefaultActions=!0;F.selectedClusterBoundaryFeature=new f({symbol:new X({outline:{width:1.5,color:"cyan"},style:"none"})});F.title=null;F.updateLocationEnabled=!1;F.view=null;F.visible=!1;F.zoomFactor=4;F.zoomToLocation=null;return F}r._inherits(J,U);var T=r._createSuper(J);U=J.prototype;U.initialize=function(){this._handles.add([b.watch(()=>
[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),b.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),b.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),b.watch(()=>this.view?.animation?.state,F=>this._animationStateChange(F)),b.watch(()=>this.location,F=>this._locationChange(F)),b.watch(()=>this.selectedFeature,
F=>this._selectedFeatureChange(F)),b.watch(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),b.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),b.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",F=>R.triggerAction({event:F,view:this.view})),b.when(()=>!this.waitingForResult,()=>this._waitingForResultChange(),
b.sync),b.watch(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),b.watch(()=>this.view?.scale,()=>this._viewScaleChange()),b.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),b.watch(()=>this.browseClusterEnabled,F=>F?this.enableClusterBrowsing():this.disableClusterBrowsing())])};U.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};U.centerAtLocation=
function(){const {view:F}=this,L=R.getSelectedTarget(this);return L&&F?this.callGoTo({target:{target:L,scale:F.scale}}):Promise.reject(new z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:L,view:F}))};U.zoomTo=function(F){return this.callGoTo(F)};U.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})};U.fetchFeatures=function(F,L){const {view:V}=this;if(!V||!F)throw new z("fetch-features:invalid-screenpoint-or-view",
"Cannot fetch features without a screenPoint and view.",{screenPoint:F,view:V});return V.fetchPopupFeatures(F,{event:L&&L.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:L&&L.signal})};U.open=function(F){F={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...F,visible:!0};var {fetchFeatures:L}=F;delete F.fetchFeatures;L&&this._setFetchFeaturesPromises(F.location);L=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const V of L)delete F[V];this.set(F)};U.triggerAction=
function(F){(F=this.allActions.getItemAt(F))&&!F.disabled&&this.emit("trigger-action",{action:F})};U.next=function(){this.selectedFeatureIndex+=1;return this};U.previous=function(){--this.selectedFeatureIndex;return this};U.disableClusterBrowsing=function(){R.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};U.enableClusterBrowsing=async function(){const {view:F,selectedFeature:L}=this;"2d"!==F?.type?x.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",
L):R.isClusterFeature(L)?(await R.displayClusterExtent(this),await R.browseAggregateFeatures(this)):x.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",L)};U._animationStateChange=function(F){this.zoomToLocation||(I.zoomToFeature.disabled="waiting-for-target"===F)};U._clearBrowsedClusterGraphics=function(){const F=this.view?.graphics;F&&(F.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&
F.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};U._viewScaleChange=function(){R.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])};U._locationChange=function(F){const {selectedFeature:L,updateLocationEnabled:V}=this;V&&F&&(!L||L.geometry)&&this.centerAtLocation()};U._selectedFeatureIndexChange=
function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};U._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};U._setGraphicOnFeatureViewModels=function(){const {features:F,featureCount:L,featurePage:V,featuresPerPage:C,featureViewModels:M}=this;if(null!==V){var P=((V-1)*C+L)%L;M.slice(P,P+C).forEach((W,H)=>{W&&!W.graphic&&(W.graphic=F[P+H])})}};U._selectedFeatureChange=async function(F){const {location:L,updateLocationEnabled:V,
view:C}=this;F&&C&&(this.browseClusterEnabled?(this._selectedClusterFeature&&(C.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),R.isClusterFeature(F)||(F.symbol=await t.getDisplayedSymbol(F),this._selectedClusterFeature=F,C.graphics.add(this._selectedClusterFeature))):!V&&L||!F.geometry?V&&!F.geometry&&this.centerAtLocation().then(()=>{const M=C.center?.clone();M&&(this.location=M)}):this.location=u.unwrap(R.getPointFromGeometry(F.geometry)))};U._waitingForResultChange=
function(){!this.featureCount&&this.promises&&(this.visible=!1)};U._setFetchFeaturesPromises=function(F){return this._fetchFeaturesWithController(this._getScreenPoint(F||this.location)).then(L=>{const {clientOnlyGraphics:V,promisesPerLayerView:C}=L;L=Promise.resolve(V);const M=C.map(P=>P.promise);this.promises=[L,...M]})};U._destroyFeatureVMs=function(){this.featureViewModels.forEach(F=>F&&!F.destroyed&&F.destroy());this._set("featureViewModels",[])};U._updateFeatureVMs=function(){const {selectedFeature:F,
features:L,featureViewModels:V}=this;R.isClusterFeature(F)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(L&&L.length){var C=V.slice(0),M=[];L.forEach((P,W)=>{if(P){var H=null;C.some((G,O)=>{G&&G.graphic===P&&(H=G,C.splice(O,1));return!!H});if(H)M[W]=H;else{const G=new B({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:P===F?P:null,map:this.view?.map,view:this.view});M[W]=G}}});
C.forEach(P=>P&&!P.destroyed&&P.destroy());this._set("featureViewModels",M)}};U._getScreenPoint=function(F){const {view:L}=this;return L&&F&&"function"===typeof L.toScreen?L.toScreen(F):null};U._autoOpenEnabledChange=function(){const {_handles:F,autoOpenEnabled:L}=this;F.remove("auto-fetch-features");if(L&&this.view){const V=this.view.on("click",C=>{"mouse"===C.pointerType&&0!==C.button||this._fetchFeaturesAndOpen(C)},q.ViewEventPriorities.WIDGET);F.add(V,"auto-fetch-features")}};U._cancelFetchingFeatures=
function(){const F=this._fetchFeaturesController;F&&F.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};U._fetchFeaturesWithController=function(F,L){this._cancelFetchingFeatures();const V=new AbortController,{signal:C}=V;this._fetchFeaturesController=V;this.notifyChange("waitingForResult");F=this.fetchFeatures(F,{signal:C,event:L});F.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return F};U._fetchFeaturesAndOpen=
function(F){const {screenPoint:L,mapPoint:V}=F,{view:C}=this;this._fetchFeaturesWithController(L,F).then(M=>{const {clientOnlyGraphics:P,promisesPerLayerView:W,location:H}=M,G=[Promise.resolve(P),...W.map(O=>O.promise)];C?.popup?.open({location:H||V,promises:G});return M})};U._updatePendingPromises=function(F){F&&this._pendingPromises.has(F)&&(this._pendingPromises.delete(F),this.notifyChange("pendingPromisesCount"))};U._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};U._getLayerView=
async function(F,L){await F.when();return F.whenLayerView(L)};U._getHighlightLayer=function(F){const {layer:L,sourceLayer:V}=F;return V&&"layer"in V&&V.layer?V.layer:"map-notes"===V?.type||"subtype-group"===V?.type?V:L};U._getHighlightTarget=function(F,L){L="imagery"===L.type?void 0:"objectIdField"in L?L.objectIdField||m.fallbackObjectIDAttribute:null;const V=F.attributes;return V&&L&&V[L]||F};U._highlightActiveFeature=async function(){this._handles.remove("highlight-active-feature");const {highlightEnabled:F,
view:L,activeFeature:V,visible:C}=this;if(V&&L&&F&&C){var M=this._getHighlightLayer(V);if(M&&M instanceof l){var P=this._getLayerView(L,M);this._highlightActiveFeaturePromise=P;var W=await P;W&&d.highlightsSupported(W)&&this._highlightActiveFeaturePromise===P&&this.activeFeature&&this.highlightEnabled&&(M=W.highlight(this._getHighlightTarget(V,M)),this._handles.add(M,"highlight-active-feature"))}}};U._highlightSelectedFeature=async function(){this._handles.remove("highlight-selected-feature");const {selectedFeature:F,
highlightEnabled:L,view:V,visible:C}=this;if(F&&V&&L&&C){var M=this._getHighlightLayer(F);if(M&&M instanceof l){var P=this._getLayerView(V,M);this._highlightSelectedFeaturePromise=P;var W=await P;W&&d.highlightsSupported(W)&&this._highlightSelectedFeaturePromise===P&&this.selectedFeature&&this.highlightEnabled&&this.visible&&(M=W.highlight(this._getHighlightTarget(F,M)),this._handles.add(M,"highlight-selected-feature"))}}};U._updateFeatures=function(F){const {features:L}=this;F&&F.length&&(L.length?
(F=F.filter(V=>!L.includes(V)),this.features=L.concat(F)):this.features=F)};r._createClass(J,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(F=>F.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const F=this._get("allActions")||new S;F.removeAll();const {actions:L,defaultActions:V,defaultPopupTemplateEnabled:C,includeDefaultActions:M,selectedFeature:P}=this;var W=M?V.concat(L):L;const H=P&&
("function"===typeof P.getEffectivePopupTemplate&&P.getEffectivePopupTemplate(C)||P.popupTemplate),G=H&&H.actions;(W=H&&H.overwriteActions?G:G?G.concat(W):W)&&W.filter(Boolean).forEach(O=>F.add(O));return F}},{key:"defaultActions",get:function(){const F=this._get("defaultActions")||new S;F.removeAll();F.addMany(R.isClusterFeature(this.selectedFeature)?[I.zoomToClusteredFeatures.clone(),I.browseClusteredFeatures.clone()]:[I.zoomToFeature.clone()]);return F}},{key:"featureCount",get:function(){return this.features.length}},
{key:"features",get:function(){return this._get("features")||[]},set:function(F){F=F||[];this._set("features",F);const {pendingPromisesCount:L,promiseCount:V,selectedFeatureIndex:C}=this,M=V&&F.length;M&&L&&-1===C?this.selectedFeatureIndex=0:M&&-1!==C||(this.selectedFeatureIndex=F.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(F){let L=F;const V=this.view?.spatialReference?.isWebMercator;F&&F?.spatialReference?.isWGS84&&V&&(L=k.geographicToWebMercator(F));
this._set("location",L)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(F){this._pendingPromises.clear();this.features=[];Array.isArray(F)&&F.length?(this._set("promises",F),F=F.slice(0),F.forEach(L=>
{this._pendingPromises.add(L);L.then(V=>{this._pendingPromises.has(L)&&this._updateFeatures(V);this._updatePendingPromises(L)},()=>this._updatePendingPromises(L))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:F,selectedFeatureIndex:L}=this;return-1===L?null:F[L]||null}},{key:"selectedFeatureIndex",get:function(){const F=this._get("selectedFeatureIndex");return"number"===typeof F?F:-1},set:function(F){const {featureCount:L}=
this;F=isNaN(F)||-1>F||!L?-1:(F+L)%L;this.activeFeature=null;this._set("selectedFeatureIndex",F)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return J}(K.GoToMixin(N));n.__decorate([a.property()],h.prototype,"featurePage",void 0);n.__decorate([a.property()],h.prototype,"isLoadingFeature",null);n.__decorate([a.property({type:S})],h.prototype,"actions",
void 0);n.__decorate([a.property({readOnly:!0})],h.prototype,"active",null);n.__decorate([a.property()],h.prototype,"activeFeature",void 0);n.__decorate([a.property({readOnly:!0})],h.prototype,"allActions",null);n.__decorate([a.property({type:Boolean})],h.prototype,"defaultPopupTemplateEnabled",void 0);n.__decorate([a.property()],h.prototype,"autoCloseEnabled",void 0);n.__decorate([a.property()],h.prototype,"autoOpenEnabled",void 0);n.__decorate([a.property()],h.prototype,"browseClusterEnabled",void 0);
n.__decorate([a.property()],h.prototype,"content",void 0);n.__decorate([a.property({type:S,readOnly:!0})],h.prototype,"defaultActions",null);n.__decorate([a.property({readOnly:!0})],h.prototype,"featureCount",null);n.__decorate([a.property()],h.prototype,"features",null);n.__decorate([a.property()],h.prototype,"featuresPerPage",void 0);n.__decorate([a.property()],h.prototype,"featureViewModelAbilities",void 0);n.__decorate([a.property({readOnly:!0})],h.prototype,"featureViewModels",void 0);n.__decorate([a.property()],
h.prototype,"highlightEnabled",void 0);n.__decorate([a.property()],h.prototype,"includeDefaultActions",void 0);n.__decorate([a.property({type:Y})],h.prototype,"location",null);n.__decorate([a.property({readOnly:!0})],h.prototype,"pendingPromisesCount",null);n.__decorate([a.property({readOnly:!0})],h.prototype,"selectedClusterBoundaryFeature",void 0);n.__decorate([a.property({readOnly:!0})],h.prototype,"waitingForResult",null);n.__decorate([a.property({readOnly:!0})],h.prototype,"promiseCount",null);
n.__decorate([a.property()],h.prototype,"promises",null);n.__decorate([a.property({value:null,readOnly:!0})],h.prototype,"selectedFeature",null);n.__decorate([a.property({value:-1})],h.prototype,"selectedFeatureIndex",null);n.__decorate([a.property({readOnly:!0})],h.prototype,"selectedFeatureViewModel",null);n.__decorate([a.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([a.property()],h.prototype,"title",void 0);n.__decorate([a.property()],h.prototype,"updateLocationEnabled",void 0);
n.__decorate([a.property()],h.prototype,"view",void 0);n.__decorate([a.property()],h.prototype,"visible",void 0);n.__decorate([a.property()],h.prototype,"zoomFactor",void 0);n.__decorate([a.property()],h.prototype,"zoomToLocation",void 0);n.__decorate([a.property()],h.prototype,"centerAtLocation",null);return h=n.__decorate([e.subclass("esri.widgets.Popup.PopupViewModel")],h)})},"esri/layers/LayerConstants":function(){define(["exports"],function(r){r.fallbackObjectIDAttribute="OBJECTID";Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils ../../widgets/Legend/styles/support/relationshipUtils ../../widgets/Legend/support/relationshipRampUtils".split(" "),function(r,n,h,f,w,y,z,D,x,u,b){function a(k,l){if(l&&(k.style.filter=x.getCSSFilterFromEffectList(l),l=l.effects))for(const m of l)if("drop-shadow"===m?.type){0>m.offsetX?
k.style.marginLeft=`${Math.abs(m.offsetX)}px`:k.style.marginRight=`${m.offsetX}px`;break}}async function p(k,l){switch(k.type){case "web-style":var {previewWebStyleSymbol:m}=await new Promise((v,E)=>r(["./previewWebStyleSymbol"],v,E));return m(k,p,l);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:m}=await new Promise((v,E)=>r(["./previewSymbol3D"],v,E)),m(k,l);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:m}=
await new Promise((v,E)=>r(["./previewSymbol2D"],v,E)),m(k,l);case "cim":return{previewCIMSymbol:m}=await new Promise((v,E)=>r(["./previewCIMSymbol"],v,E)),m(k,l)}}function g(k){return k&&"opacity"in k?k.opacity*g(k.parent):1}let c=null;const e=[255,255,255];n.getDisplayedColor=async function(k,l){if(k){var m=g(k.layer||k.sourceLayer);if(f.isSome(k.symbol)&&(!f.isSome(l)||!0!==l.ignoreGraphicSymbol))return k="web-style"===k.symbol.type?await x.fetchWebStyleSymbol(k.symbol,l):k.symbol.clone(),x.getColorFromSymbol(k,
m);var v=f.isSome(l)&&l.renderer||k.get("layer.renderer")||k.get("sourceLayer.renderer"),E=await v.getSymbolAsync(k,l);if(E){E="web-style"===E.type?await x.fetchWebStyleSymbol(E,l):E.clone();var A=x.getColorFromSymbol(E,m);if(!("visualVariables"in v)||"visualVariables"in v&&!v.visualVariables||"visualVariables"in v&&!v.visualVariables?.length)return A;v.arcadeRequiredForVisualVariables&&(f.isNone(l)||f.isNone(l.arcade))&&(l={...f.unwrap(l)},l.arcade=await w.loadArcade());E=await new Promise((d,B)=>
r(["../../renderers/visualVariables/support/visualVariableUtils"],d,B));var t=[],q=[];for(const d of v.visualVariables)switch(d.type){case "color":t.push(d);break;case "opacity":q.push(d)}v=(v=0<t.length?t[t.length-1]:null)?E.getColor(v,k,l):A;k=(A=0<q.length?q[q.length-1]:null)?E.getOpacity(A,k,l):null;null!=m&&(k=null!=k?k*m:m);return v?x.applyOpacityToColor(v,k):null}}};n.getDisplayedSymbol=async function(k,l){if(k){var m=k.sourceLayer,v=(f.isSome(l)&&(l.useSourceLayer??!1)?m:k.layer)??m;m=g(v);
if(f.isSome(k.symbol)&&(!f.isSome(l)||!0!==l.ignoreGraphicSymbol))return k="web-style"===k.symbol.type?await x.fetchWebStyleSymbol(k.symbol,{...l,cache:f.isSome(l)?l.webStyleCache:null}):k.symbol.clone(),x.applyColorToSymbol(k,null,m),k;var E=(f.isSome(l)?l.renderer:null)??(v&&"renderer"in v?v.renderer:null);if(v=E&&"getSymbolAsync"in E?await E.getSymbolAsync(k,l):null){v="web-style"===v.type?await v.fetchSymbol({...l,cache:f.isSome(l)?l.webStyleCache:null}):v.clone();if(!(E&&"visualVariables"in E&&
E.visualVariables&&E.visualVariables.length))return x.applyColorToSymbol(v,null,m),v;"arcadeRequiredForVisualVariables"in E&&E.arcadeRequiredForVisualVariables&&(f.isNone(l)||f.isNone(l.arcade))&&(l={...f.unwrap(l)},l.arcade=await w.loadArcade());var A=await new Promise((R,N)=>r(["../../renderers/visualVariables/support/visualVariableUtils"],R,N)),t=[],q=[],d=[],B=[];for(var I of E.visualVariables)switch(I.type){case "color":t.push(I);break;case "opacity":q.push(I);break;case "rotation":B.push(I);
break;case "size":I.target||d.push(I)}I=(I=!!t.length&&t[t.length-1])?A.getColor(I,k,l):null;q=(q=!!q.length&&q[q.length-1])?A.getOpacity(q,k,l):null;null!=m&&(q=null!=q?q*m:m);x.applyColorToSymbol(v,I,q);d.length&&(m=A.getAllSizes(d,k,l),await x.applySizesToSymbol(v,m));for(const R of B)x.applyRotationToSymbol(v,A.getRotationAngle(R,k,l),R.axis);return v}}};n.renderColorRampPreviewHTML=function(k,l={}){var m="horizontal"===l.align;const v=l.width??(m?75:24),E=l.height??(m?24:75);var A=l.gradient??
!0,t=window.devicePixelRatio,q=v*t,d=E*t;t=document.createElement("canvas");t.width=q;t.height=d;t.style.width=`${v}px`;t.style.height=`${E}px`;const B=t.getContext("2d");var I=m?q:0;const R=m?0:d;if(A){const N=B.createLinearGradient(0,0,I,R);m=k.length;const K=1===m?0:1/(m-1);k.forEach((X,Y)=>N.addColorStop(Y*K,X.toString()));B.fillStyle=N;B.fillRect(0,0,q,d)}else{q=m?q/k.length:q;d=m?d:d/k.length;I=A=0;for(const N of k)B.fillStyle=N.toString(),B.fillRect(A,I,q,d),A=m?A+q:0,I=m?0:I+d}k=document.createElement("div");
k.style.width=`${v}px`;k.style.height=`${E}px`;a(k,l?.effectList);k.appendChild(t);return k};n.renderDotDensityPreviewHTML=function(k,l,m){const {backgroundColor:v,outline:E,dotSize:A}=k;m=m&&m.swatchSize||z.SymbolSizeDefaults.size;const t=Math.round(m*m/A**2*.8),q=window.devicePixelRatio;k=document.createElement("canvas");const d=m*q;k.width=d;k.height=d;k.style.width=`${k.width/q}px`;k.style.height=`${k.height/q}px`;const B=k.getContext("2d");v&&(B.fillStyle=v.toCss(!0),B.fillRect(0,0,d,d),B.fill());
B.fillStyle=l.toCss(!0);if(c&&c.length/2===t)for(l=0;l<2*t;l+=2)B.fillRect(c[l],c[l+1],A*q,A*q),B.fill();else for(c=[],l=0;l<2*t;l+=2){const I=Math.floor(Math.random()*(d-0+1)),R=Math.floor(Math.random()*(d-0+1));c.push(I,R);B.fillRect(I,R,A*q,A*q);B.fill()}E&&(E.color&&(B.strokeStyle=E.color.toCss(!0)),B.lineWidth=E.width,B.strokeRect(0,0,d,d));m=new Image(m,m);m.src=k.toDataURL();return m};n.renderPieChartPreviewHTML=function(k,l={}){const m=l.radius||40;var v=2*Math.PI*m,E=k.length;const A=v/E,
t=[],q=y.getStroke(l.outline);null!=q?.width&&(q.width*=2);(q||l.backgroundColor)&&t.push({shape:{type:"circle",cx:m,cy:m,r:m},fill:l.backgroundColor,stroke:q,offset:[0,0]});const d=l.values,B=d&&d.length===E&&100===d.reduce((R,N)=>R+N,0),I=[0];for(let R=0;R<E;R++){let N=null;B&&(N=d[R]*v/100,I.push(N+I[R]));t.push({shape:{type:"circle",cx:m,cy:m,r:m/2},fill:[0,0,0,0],stroke:{width:m,dashArray:`${(N??A)/2} ${v}`,dashoffset:`-${B?I[R]/2:A/2*R}`,color:k[R]},offset:[0,0]})}E=null;k=2*m+(q?.width||0);
if(v=l.holePercentage)q&&t.push({shape:{type:"circle",cx:m,cy:m,r:m*v},fill:null,stroke:q,offset:[0,0]}),E=k/2,E=[[{shape:{type:"circle",cx:E,cy:E,r:E},fill:e,stroke:q?{...q,color:e}:null,offset:[0,0]},{shape:{type:"circle",cx:E,cy:E,r:m*v},fill:[0,0,0],stroke:null,offset:[0,0]}]];return D.renderSymbol([t],[k,k],{effectView:l.effectList,ignoreStrokeWidth:!0,masking:E,rotation:-90})};n.renderPreviewHTML=p;n.renderRelationshipRampPreviewHTML=function(k,l={}){const m=k?.authoringInfo;if("relationship"!==
m?.type||!m?.numClasses||!k.uniqueValueInfos)return null;const {focus:v,numClasses:E}=m,A=b.getRelationshipRampElement({focus:v,numClasses:E,infos:k.uniqueValueInfos});k=l&&l.node||document.createElement("div");D.renderOnce(k,()=>u.renderRelationshipRamp(A,l.id||"relationship",l.opacity||1,l.effectList));return k};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(r,n){function h(f,w){return Math.round(Math.min(Math.max(f+
191.25*w,0),255))}r.SymbolSizeDefaults=void 0;(function(f){f[f.size=22]="size";f[f.lineWidth=50]="lineWidth";f[f.maxSize=120]="maxSize";f[f.maxOutlineSize=80]="maxOutlineSize";f[f.tallSymbolWidth=20]="tallSymbolWidth"})(r.SymbolSizeDefaults||(r.SymbolSizeDefaults={}));r.adjustColorBrightness=function(f,w){if(null==f)return new n;if("type"in f&&("linear"===f.type||"pattern"===f.type))return f;f=new n(f);return new n([h(f.r,w),h(f.g,w),h(f.b,w),f.a])};r.adjustColorComponentBrightness=h;r.getConeShapes=
function(f,w){let y=w?r.SymbolSizeDefaults.tallSymbolWidth:f;w=w?4:6;y=y<=r.SymbolSizeDefaults.size?y-.5*w:y-w;w=.15*y;const z=y;f-=w;return[{type:"ellipse",cx:.5*y,cy:f,rx:.5*y,ry:w},{type:"path",path:[{command:"M",values:[.5*z,0]},{command:"L",values:[z,f]},{command:"L",values:[0,f]},{command:"Z",values:[]}]}]};r.getCubeShapes=function(f,w){let y=w?r.SymbolSizeDefaults.tallSymbolWidth:f;var z=w?4:6;z=y=y<=r.SymbolSizeDefaults.size?y-.5*z:y-z;w=w?.35*y:.5*y;return[{type:"path",path:[{command:"M",
values:[.5*z,0]},{command:"L",values:[z,.5*w]},{command:"L",values:[.5*z,w]},{command:"L",values:[0,.5*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*w]},{command:"L",values:[.5*z,w]},{command:"L",values:[.5*z,f]},{command:"L",values:[0,f-.5*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*z,w]},{command:"L",values:[.5*z,f]},{command:"L",values:[z,f-.5*w]},{command:"L",values:[z,.5*w]},{command:"Z",values:[]}]}]};r.getCylinderShapes=function(f,w){var y=
w?r.SymbolSizeDefaults.tallSymbolWidth:f;w=w?4:6;y=y<=r.SymbolSizeDefaults.size?y-.5*w:y-w;w=.5*y;const z=.15*y;f-=z;return[{type:"ellipse",cx:.5*y,cy:f,rx:w,ry:z},{type:"path",path:[{command:"M",values:[0,z]},{command:"L",values:[0,f]},{command:"L",values:[y,f]},{command:"L",values:[y,z]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*y,cy:z,rx:w,ry:z}]};r.getDiamondShapes=function(f){var w=f;w=w<r.SymbolSizeDefaults.size?w-2:w-4;const y=Math.floor(f/10)-1||1;return[{type:"path",path:[{command:"M",
values:[.45*w,0]},{command:"L",values:[w,.5*f-y]},{command:"L",values:[.45*w-y,.5*f+y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*w,0]},{command:"L",values:[.45*w-y,.5*f+y]},{command:"L",values:[0,.5*f-y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*f-y]},{command:"L",values:[.45*w-y,.5*f+y]},{command:"L",values:[.45*w,f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*w,f]},{command:"L",values:[w,.5*f-y]},{command:"L",
values:[.45*w-y,.5*f+y]},{command:"Z",values:[]}]}]};r.getExtrudeSymbolShapes=function(f){const w=r.SymbolSizeDefaults.size;f*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*w]},{command:"L",values:[.3*w,.7*w]},{command:"L",values:[.3*w,.7*w+f]},{command:"L",values:[0,.7*w+f-.35*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*w,.7*w]},{command:"L",values:[.3*w,.7*w+f]},{command:"L",values:[w,f]},{command:"L",values:[w,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[.3*w,0]},{command:"L",values:[w,0]},{command:"L",values:[.3*w,.7*w]},{command:"L",values:[0,.35*w]},{command:"Z",values:[]}]}]};r.getInvertedConeShapes=function(f){let w=f;w=w<r.SymbolSizeDefaults.size?w-3:w-6;const y=.15*w,z=w;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,0]},{command:"L",values:[.5*z,f-y]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*w,cy:0,rx:.5*w,ry:y}]};r.getPathSymbolShapes=function(f,w,y){var z=r.SymbolSizeDefaults.size;let D=z,x=z;
1>f?D*=.75:1<f&&(x*=1.25);f=z;w&&y&&(D=x=f=z=0);return[{type:"path",path:[{command:"M",values:[f,0]},{command:"L",values:[y?f:.875*f,0]},{command:"L",values:[y?D-.5*f:0,x-.5*z]},{command:"L",values:[D-.5*f,x-.5*z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[f,0]},{command:"L",values:[f,w?0:.125*z]},{command:"L",values:[D-.5*f,w?x-.5*z:z]},{command:"L",values:[D-.5*f,x-.5*z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[D-.5*f,x-.5*z]},{command:"L",values:[y?
D-.5*f:0,x-.5*z]},{command:"L",values:[y?D-.5*f:0,w?x-.5*z:z]},{command:"L",values:[D-.5*f,w?x-.5*z:z]},{command:"Z",values:[]}]}]};r.getTetrahedronShapes=function(f){var w=f;w=w<r.SymbolSizeDefaults.size?w-1:w-2;return[{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[f,w]},{command:"L",values:[.45*f,.6*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[.45*f,.6*w]},{command:"L",values:[0,w]},{command:"Z",values:[]}]},{type:"path",
path:[{command:"M",values:[0,w]},{command:"L",values:[.45*f,.6*w]},{command:"L",values:[f,w]},{command:"Z",values:[]}]}]};r.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
r.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(r,n,h,f,w,y,z,D,x,u){function b(g,c){p.append(g,c);p.detach(c)}function a(g,c,e){return g?h(g,{responseType:"image"}).then(k=>{k=k.data;const l=k.width,m=k.height,v=l/m;let E=c;e&&(E=Math.min(E,Math.max(l,m)));return{image:k,width:1>=v?Math.ceil(E*v):E,height:1>=v?E:Math.ceil(E/v)}}):Promise.reject(new w("renderUtils: imageDataSize","href not provided."))}const p=D.createProjector();r.renderOnce=b;r.renderSymbol=function(g,c,e){const k=Math.ceil(c[0]),l=Math.ceil(c[1]);if(!g.some(m=>!!m.length))return null;
c=e&&e.node||document.createElement("div");null!=e.opacity&&(c.style.opacity=e.opacity.toString());null!=e.effectView&&(c.style.filter=u.getCSSFilterFromEffectList(e.effectView));b(c,()=>x.renderSVG(g,k,l,e));return c};r.tintImageWithColor=function(g,c,e,k,l){return a(g,c,l).then(m=>{const v=m.width??c,E=m.height??c;var A;if(A=m.image)A=e&&"ignore"!==k?"multiply"===k&&255===e.r&&255===e.g&&255===e.b&&1===e.a?!1:!0:!1;if(A){var t=m.image.width,q=m.image.height;y("edge")&&/\.svg$/i.test(g)&&(--t,--q);
A=Math.ceil(v);var d=Math.ceil(E);var B=document.createElement("canvas");B.width=A;B.height=d;B.style.width=A+"px";B.style.height=d+"px";B=B.getContext("2d");B.clearRect(0,0,A,d);A=B;A.drawImage(m.image,0,0,t,q,0,0,v,E);d=A.getImageData(0,0,v,E);B=[e.r/255,e.g/255,e.b/255,e.a];const R=f.toHSV(e);for(let N=0;N<d.data.length;N+=4){m=d.data;t=N;q=B;var I=R;switch(k){case "multiply":m[t]*=q[0];m[t+1]*=q[1];m[t+2]*=q[2];m[t+3]*=q[3];break;default:const K=f.toHSV({r:m[t],g:m[t+1],b:m[t+2]});K.h=I.h;K.s=
I.s;K.v=K.v/100*I.v;I=f.toRGB(K);m[t]=I.r;m[t+1]=I.g;m[t+2]=I.b;m[t+3]*=q[3]}}A.putImageData(d,0,0);g=A.canvas.toDataURL("image/png")}else(A=n.id&&n.id.findCredential(g))&&A.token&&(m=g.includes("?")?"\x26":"?",g=`${g}${m}token=${A.token}`);return{url:g,width:v,height:E}}).catch(()=>({url:g,width:c,height:c}))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(r){function n(u,b){const a=[];let p,g;if(u[0].length!==b.length)throw Error("dimensions do not match");
const c=u.length,e=u[0].length;let k=0;for(p=0;p<c;p++){for(g=k=0;g<e;g++)k+=u[p][g]*b[g];a.push(k)}return a}function h(u){u=[u.r/255,u.g/255,u.b/255].map(b=>.04045>=b?b/12.92:((b+.055)/1.055)**2.4);u=n(D,u);return{x:100*u[0],y:100*u[1],z:100*u[2]}}function f(u){u=n(x,[u.x/100,u.y/100,u.z/100]).map(b=>Math.min(1,Math.max(.0031308>=b?12.92*b:1.055*b**(1/2.4)-.055,0)));return{r:Math.round(255*u[0]),g:Math.round(255*u[1]),b:Math.round(255*u[2])}}function w(u){u=[u.x/95.047,u.y/100,u.z/108.883].map(b=>
b>(6/29)**3?b**(1/3):1/3*(29/6)**2*b+4/29);return{l:116*u[1]-16,a:500*(u[0]-u[1]),b:200*(u[1]-u[2])}}function y(u){const b=u.l;u=[(b+16)/116+u.a/500,(b+16)/116,(b+16)/116-u.b/200].map(a=>a>6/29?a**3:3*(6/29)**2*(a-4/29));return{x:95.047*u[0],y:100*u[1],z:108.883*u[2]}}function z(u){if("r"in u&&"g"in u&&"b"in u)return u;if("l"in u&&"c"in u&&"h"in u){var b=u.c,a=u.h;return f(y({l:u.l,a:b*Math.cos(a),b:b*Math.sin(a)}))}if("l"in u&&"a"in u&&"b"in u)return f(y(u));if("x"in u&&"y"in u&&"z"in u)return f(u);
if("h"in u&&"s"in u&&"v"in u){a=(u.h+360)%360/60;b=u.v/100*255;u=u.s/100*b;const p=u*(1-Math.abs(a%2-1));switch(Math.floor(a)){case 0:a={r:u,g:p,b:0};break;case 1:a={r:p,g:u,b:0};break;case 2:a={r:0,g:u,b:p};break;case 3:a={r:0,g:p,b:u};break;case 4:a={r:p,g:0,b:u};break;case 5:case 6:a={r:u,g:0,b:p};break;default:a={r:0,g:0,b:0}}a.r=Math.round(a.r+b-u);a.g=Math.round(a.g+b-u);a.b=Math.round(a.b+b-u);return a}return u}const D=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],x=[[3.2406,
-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];r.darken=function(u,b){u=w(h(u));u.l*=1-b;return f(y(u))};r.toHSV=function(u){if("h"in u&&"s"in u&&"v"in u)return u;var b=z(u);u=b.r;const a=b.g,p=b.b;b=Math.max(u,a,p);const g=b-Math.min(u,a,p);u=0===g?0:b===u?(a-p)/g%6:b===a?(p-u)/g+2:(u-a)/g+4;0>u&&(u+=6);return{h:60*u,s:100*(0===g?0:g/b),v:100/255*b}};r.toLAB=function(u){return"l"in u&&"a"in u&&"b"in u?u:w(h(z(u)))};r.toLCH=function(u){if(!("l"in u&&"c"in u&&"h"in u)){var b=w(h(z(u)));
u=b.l;var a=b.a;const p=b.b;b=Math.sqrt(a*a+p*p);a=Math.atan2(p,a);a=0<a?a:a+2*Math.PI;u={l:u,c:b,h:a}}return u};r.toRGB=z;r.toXYZ=function(u){return"x"in u&&"y"in u&&"z"in u?u:h(z(u))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../core/maybe ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),function(r,n,h,f,w,y,z,D){function x(J,
T){J*=S/180;return Math.abs(T*Math.sin(J))+Math.abs(T*Math.cos(J))}function u(J){return J.map(T=>`${T.command} ${T.values.join(" ")}`).join(" ").trim()}function b(J,T,F,L){if(J){if("circle"===J.type)return D.tsx("circle",{fill:T,"fill-rule":"evenodd",stroke:F.color,"stroke-width":F.width,"stroke-linecap":F.cap,"stroke-linejoin":F.join,"stroke-dasharray":F.dashArray,"stroke-dashoffset":F.dashOffset,"stroke-miterlimit":"4",cx:J.cx,cy:J.cy,r:J.r});if("ellipse"===J.type)return D.tsx("ellipse",{fill:T,
"fill-rule":"evenodd",stroke:F.color,"stroke-width":F.width,"stroke-linecap":F.cap,"stroke-linejoin":F.join,"stroke-dasharray":F.dashArray,"stroke-miterlimit":"4",cx:J.cx,cy:J.cy,rx:J.rx,ry:J.ry});if("rect"===J.type)return D.tsx("rect",{fill:T,"fill-rule":"evenodd",stroke:F.color,"stroke-width":F.width,"stroke-linecap":F.cap,"stroke-linejoin":F.join,"stroke-dasharray":F.dashArray,"stroke-miterlimit":"4",x:J.x,y:J.y,width:J.width,height:J.height});if("image"===J.type)return D.tsx("image",{href:J.src,
x:J.x,y:J.y,width:J.width,height:J.height,preserveAspectRatio:"none"});if("path"===J.type)return J="string"!==typeof J.path?u(J.path):J.path,D.tsx("path",{fill:T,"fill-rule":"evenodd",stroke:F.color,"stroke-width":F.width,"stroke-linecap":F.cap,"stroke-linejoin":F.join,"stroke-dasharray":F.dashArray,"stroke-miterlimit":"4",d:J});if("text"===J.type)return f.assertIsSome(L),D.tsx("text",{"dominant-baseline":L.dominantBaseline,fill:T,"fill-rule":"evenodd",stroke:F.color,"stroke-width":F.width,"stroke-linecap":F.cap,
"stroke-linejoin":F.join,"stroke-dasharray":F.dashArray,"stroke-miterlimit":"4","text-anchor":L.align,"text-decoration":L.decoration,kerning:L.kerning,rotate:L.rotate,"text-rendering":I,"font-style":L.font.style,"font-variant":L.font.variant,"font-weight":L.font.weight,"font-size":L.font.size,"font-family":L.font.family,x:J.x,y:J.y},J.text)}return null}function a(J){const T={fill:"none",pattern:null,linearGradient:null};if(J)if("type"in J&&"pattern"===J.type){var F=`patternId-${++d}`;T.fill=`url(#${F})`;
T.pattern={id:F,x:J.x,y:J.y,width:J.width,height:J.height,image:{x:0,y:0,width:J.width,height:J.height,href:J.src}}}else"type"in J&&"linear"===J.type?(F=`linearGradientId-${++B}`,T.fill=`url(#${F})`,T.linearGradient={id:F,x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,stops:J.colors.map(L=>({offset:L.offset,color:L.color&&(new n(L.color)).toString()}))}):J&&(J=new n(J),T.fill=J.toString());return T}function p(J){const T={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(J&&(null!=J.width&&
(T.width=J.width),J.cap&&(T.cap=J.cap),J.join&&(T.join=J.join.toString()),J.color&&(T.color=(new n(J.color)).toString()),J.dashArray&&(T.dashArray=J.dashArray),J.dashArray&&(T.dashOffset=J.dashoffset),J.style)){let F=null;J.style in Y&&(F=Y[J.style]);if(Array.isArray(F)){F=F.slice(0);const L=J.width??0;for(let V=0;V<F.length;++V)F[V]*=L;if("butt"!==J.cap){for(J=0;J<F.length;J+=2)F[J]-=L,1>F[J]&&(F[J]=1);for(J=1;J<F.length;J+=2)F[J]+=L}F=F.join(",")}T.dashArray=F}return T}function g(J,T){const F={align:null,
decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(J){const L=J.alignBaseline;F.align=J.align;F.dominantBaseline="baseline"===L?"auto":"top"===L?"text-top":"bottom"===L?"hanging":L;F.decoration=J.decoration;F.kerning=J.kerning?"auto":"0";F.rotate=J.rotated?"90":"0";f.assertIsSome(T);F.font.style=T.style||"normal";F.font.variant=T.variant||"normal";F.font.weight=T.weight||"normal";F.font.size=T.size&&T.size.toString()||"10pt";F.font.family=
T.family||"serif"}return F}function c(J){const {pattern:T,linearGradient:F}=J;return T?D.tsx("pattern",{id:T.id,patternUnits:"userSpaceOnUse",x:T.x,y:T.y,width:T.width,height:T.height},D.tsx("image",{x:T.image.x,y:T.image.y,width:T.image.width,height:T.image.height,href:T.image.href})):F?(J=F.stops.map((L,V)=>D.tsx("stop",{key:`${V}-stop`,offset:L.offset,"stop-color":L.color})),D.tsx("linearGradient",{id:F.id,gradientUnits:"userSpaceOnUse",x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2},J)):null}function e(J,T){if(!J)return null;
const F=[];for(const L of J){const {shape:V,fill:C,stroke:M,font:P}=L;J=a(C);const W=p(M),H="text"===V.type?g(V,P):null;(J=b(V,J.fill,W,H))&&F.push(J)}return D.tsx("mask",{id:T,maskUnits:"userSpaceOnUse"},D.tsx("g",null,F))}function k(J,T,F,L,V){y.scale(J,y.identity(J),[T,F]);J[4]=J[4]*T-L*T+L;J[5]=J[5]*F-V*F+V;return J}function l(J,T){if(K&&"left"in K){null!=K.left&&K.left>J&&(K.left=J);if(null==K.right||K.right<J)K.right=J;if(null==K.top||K.top>T)K.top=T;if(null==K.bottom||K.bottom<T)K.bottom=T}else K=
{left:J,bottom:T,right:J,top:T}}function m(J){const T=J.args,F=T.length;switch(J.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(J=0;J<F;J+=2)l(T[J],T[J+1]);X.x=T[F-2];X.y=T[F-1];break;case "H":for(J=0;J<F;++J)l(T[J],X.y);X.x=T[F-1];break;case "V":for(J=0;J<F;++J)l(X.x,T[J]);X.y=T[F-1];break;case "m":J=0;"x"in X||(l(X.x=T[0],X.y=T[1]),J=2);for(;J<F;J+=2)l(X.x+=T[J],X.y+=T[J+1]);break;case "l":case "t":for(J=0;J<F;J+=2)l(X.x+=T[J],X.y+=T[J+1]);break;case "h":for(J=0;J<F;++J)l(X.x+=
T[J],X.y);break;case "v":for(J=0;J<F;++J)l(X.x,X.y+=T[J]);break;case "c":for(J=0;J<F;J+=6)l(X.x+T[J],X.y+T[J+1]),l(X.x+T[J+2],X.y+T[J+3]),l(X.x+=T[J+4],X.y+=T[J+5]);break;case "s":case "q":for(J=0;J<F;J+=4)l(X.x+T[J],X.y+T[J+1]),l(X.x+=T[J+2],X.y+=T[J+3]);break;case "A":for(J=0;J<F;J+=7)l(T[J+5],T[J+6]);X.x=T[F-2];X.y=T[F-1];break;case "a":for(J=0;J<F;J+=7)l(X.x+=T[J+5],X.y+=T[J+6])}}function v(J,T,F){const L=R[J.toLowerCase()];"number"===typeof L&&(L?T.length>=L&&(J={action:J,args:T.slice(0,T.length-
T.length%L)},F.push(J),m(J)):(J={action:J,args:[]},F.push(J),m(J)))}function E(J){const T={x:0,y:0,width:0,height:0};if("circle"===J.type)T.x=J.cx-J.r,T.y=J.cy-J.r,T.width=2*J.r,T.height=2*J.r;else if("ellipse"===J.type)T.x=J.cx-J.rx,T.y=J.cy-J.ry,T.width=2*J.rx,T.height=2*J.ry;else if("image"===J.type||"rect"===J.type)T.x=J.x,T.y=J.y,T.width=J.width,T.height=J.height;else if("path"===J.type){var F=f.unwrapOrThrow;{const C=("string"!==typeof J.path?u(J.path):J.path).match(N),M=[];K={};X={};if(C){J=
"";var L=[],V=C.length;for(let P=0;P<V;++P){const W=C[P],H=parseFloat(W);isNaN(H)?(J&&v(J,L,M),L=[],J=W):L.push(H)}v(J,L,M);J={x:0,y:0,width:0,height:0};K&&"left"in K&&(J.x=K.left,J.y=K.top,J.width=K.right-K.left,J.height=K.bottom-K.top)}else J=null}F=F.call(f,J);T.x=F.x;T.y=F.y;T.width=F.width;T.height=F.height}return T}function A(J){const T={x:0,y:0,width:0,height:0};let F=null,L=Number.NEGATIVE_INFINITY,V=Number.NEGATIVE_INFINITY;for(const C of J)F?(F.x=Math.min(F.x,C.x),F.y=Math.min(F.y,C.y),
L=Math.max(L,C.x+C.width),V=Math.max(V,C.y+C.height)):(F=T,F.x=C.x,F.y=C.y,L=C.x+C.width,V=C.y+C.height);F&&(F.width=L-F.x,F.height=V-F.y);return F}function t(J,T,F,L,V,C,M,P,W){var H=(M&&C?x(C,T):T)/2,G=(M&&C?x(C,F):F)/2;if(W){var O=W[0];W=W[1];H=(M&&C?x(C,O):O)/2;G=(M&&C?x(C,W):W)/2}O=J.width+L;var Q=J.height+L;W=w.create();M=w.create();var aa=!1;if(V&&0!==O&&0!==Q){V=T!==F?T/F:O/Q;aa=T>F?T:F;let ba=1,da=1;isNaN(aa)||(1<V?(ba=aa/O,da=aa/V/Q):(da=aa/Q,ba=aa*V/O));y.multiply(M,M,k(W,ba,da,H,G));aa=
!0}V=J.x+(O-L)/2;J=J.y+(Q-L)/2;L=y.multiply;H-=V;G-=J;H=y.translate(W,y.identity(W),[H,G]);L.call(y,M,M,H);!aa&&(O>T||Q>F)&&(H=O/T>Q/F,T=(H?T:F)/(H?O:Q),y.multiply(M,M,k(W,T,T,V,J)));C&&(T=y.multiply,F=C%360*Math.PI/180,y.rotate(W,y.identity(W),F),C=Math.cos(F),F=Math.sin(F),O=W[4],Q=W[5],W[4]=O*C-Q*F+J*F-V*C+V,W[5]=Q*C+O*F-V*F-J*C+J,T.call(y,M,M,W));P&&(C=y.multiply,T=P[0],P=P[1],P=y.translate(W,y.identity(W),[T,P]),C.call(y,M,M,P));return`matrix(${M[0]},${M[1]},${M[2]},${M[3]},${M[4]},${M[5]})`}
function q(J,T,F){J=J?.effects.find(P=>"bloom"===P.type);if(!J)return null;const {strength:L,radius:V}=J;J=0<L?V:0;const C=(L+J)*T,M=4*L+1;return D.tsx("filter",{id:`bloom${F}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},D.tsx("feMorphology",{operator:"dilate",radius:(L+.5*J)*5**(T/100)*(.4+T/100),in:"SourceGraphic",result:"dilate"}),D.tsx("feGaussianBlur",{in:"dilate",stdDeviation:C/25,result:"blur"}),D.tsx("feGaussianBlur",{in:"blur",stdDeviation:C/50,result:"intensityBlur"}),
D.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},D.tsx("feFuncR",{type:"linear",slope:M}),D.tsx("feFuncG",{type:"linear",slope:M}),D.tsx("feFuncB",{type:"linear",slope:M})),D.tsx("feMerge",null,D.tsx("feMergeNode",{in:"intensityBlur"}),D.tsx("feMergeNode",{in:"intensityBrightness"}),D.tsx("feGaussianBlur",{stdDeviation:L/10})))}let d=0,B=0;z=h("android");const I=h("chrome")||z&&4<=z?"auto":"optimizeLegibility",R={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},N=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;
let K={},X={};const Y={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},S=Math.PI;let U=1;r.computeBBox=A;r.generateFillAttributes=a;r.generateStrokeAttributes=p;r.generateTextAttributes=g;r.getBoundingBox=E;r.getTransformMatrix=t;r.renderDef=c;r.renderSVG=function(J,T,F,L={}){const V=[],C=[],M=++U,P=q(L.effectView,T,M);var W=null;P&&(W=L.effectView?.effects.find(aa=>
"bloom"===aa.type),W=(W.strength?W.strength+W.radius/2:0)/3,W=[Math.max(T+T*W,10),Math.max(F+F*W,10)]);for(let aa=0;aa<J.length;aa++){var H=J[aa];const ba=[];var G=[],O=0,Q=0;let da=0;for(const ia of H){const {shape:fa,fill:ka,stroke:na,font:pa,offset:ta}=ia;L.ignoreStrokeWidth||(O+=na&&na.width||0);H=a(ka);const wa=p(na),ua="text"===fa.type?g(fa,pa):null;V.push(c(H));ba.push(b(fa,H.fill,wa,ua));G.push(E(fa));ta&&(Q+=ta[0],da+=ta[1])}G=f.unwrapOrThrow(A(G));O=t(G,T,F,O,L.scale??!1,L.rotation,L.useRotationSize??
!1,[Q,da],W);Q=null;L.masking&&(Q=`mask-${aa}`,V.push(e(L.masking[aa],Q)),Q=`url(#${Q})`);C.push(Q?D.tsx("g",{mask:Q},D.tsx("g",{transform:O},ba)):D.tsx("g",{transform:O},ba))}L.useRotationSize&&L.rotation&&(T=x(L.rotation,T),F=x(L.rotation,F));P&&(f.assertIsSome(W),T=W[0],F=W[1]);return D.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:T,height:F,style:"display: block;"},P,D.tsx("defs",null,V),P?D.tsx("g",{filter:`url(#bloom${M})`},C):C)};r.renderShape=b;Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"})})},"esri/chunks/mat2df32":function(){define(["exports"],function(r){function n(){const x=new Float32Array(6);x[0]=1;x[3]=1;return x}function h(x){const u=new Float32Array(6);u[0]=x[0];u[1]=x[1];u[2]=x[2];u[3]=x[3];u[4]=x[4];u[5]=x[5];return u}function f(x,u,b,a,p,g){const c=new Float32Array(6);c[0]=x;c[1]=u;c[2]=b;c[3]=a;c[4]=p;c[5]=g;return c}function w(x,u){return new Float32Array(x,u,6)}function y(x,u,b,a){const p=u[a];u=u[a+1];x[a]=b[0]*p+b[2]*u+b[4];x[a+1]=b[1]*p+b[3]*u+b[5]}
function z(x,u,b,a=0,p=0,g=2){for(p=p||u.length/g;a<p;a++)y(x,u,b,a*g)}const D=Object.freeze(Object.defineProperty({__proto__:null,clone:h,create:n,createView:w,fromValues:f,transform:y,transformMany:z},Symbol.toStringTag,{value:"Module"}));r.clone=h;r.create=n;r.createView=w;r.fromValues=f;r.mat2df32=D;r.transform=y;r.transformMany=z})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(r,n){function h(q,d){q[0]=d[0];q[1]=d[1];q[2]=d[2];q[3]=d[3];q[4]=d[4];q[5]=d[5];return q}function f(q){q[0]=
1;q[1]=0;q[2]=0;q[3]=1;q[4]=0;q[5]=0;return q}function w(q,d,B,I,R,N,K){q[0]=d;q[1]=B;q[2]=I;q[3]=R;q[4]=N;q[5]=K;return q}function y(q,d){const B=d[0],I=d[1],R=d[2],N=d[3],K=d[4];d=d[5];let X=B*N-I*R;if(!X)return null;X=1/X;q[0]=N*X;q[1]=-I*X;q[2]=-R*X;q[3]=B*X;q[4]=(R*d-N*K)*X;q[5]=(I*K-B*d)*X;return q}function z(q){return q[0]*q[3]-q[1]*q[2]}function D(q,d,B){const I=d[0],R=d[1],N=d[2],K=d[3],X=d[4];d=d[5];const Y=B[0],S=B[1],U=B[2],J=B[3],T=B[4];B=B[5];q[0]=I*Y+N*S;q[1]=R*Y+K*S;q[2]=I*U+N*J;q[3]=
R*U+K*J;q[4]=I*T+N*B+X;q[5]=R*T+K*B+d;return q}function x(q,d,B){const I=d[0],R=d[1],N=d[2],K=d[3],X=d[4];d=d[5];const Y=Math.sin(B);B=Math.cos(B);q[0]=I*B+N*Y;q[1]=R*B+K*Y;q[2]=I*-Y+N*B;q[3]=R*-Y+K*B;q[4]=X;q[5]=d;return q}function u(q,d,B){const I=d[1],R=d[2],N=d[3],K=d[4],X=d[5],Y=B[0];B=B[1];q[0]=d[0]*Y;q[1]=I*Y;q[2]=R*B;q[3]=N*B;q[4]=K;q[5]=X;return q}function b(q,d,B){const I=d[0],R=d[1],N=d[2],K=d[3],X=d[4];d=d[5];const Y=B[0];B=B[1];q[0]=I;q[1]=R;q[2]=N;q[3]=K;q[4]=I*Y+N*B+X;q[5]=R*Y+K*B+
d;return q}function a(q,d){const B=Math.sin(d);d=Math.cos(d);q[0]=d;q[1]=B;q[2]=-B;q[3]=d;q[4]=0;q[5]=0;return q}function p(q,d){q[0]=d[0];q[1]=0;q[2]=0;q[3]=d[1];q[4]=0;q[5]=0;return q}function g(q,d){q[0]=1;q[1]=0;q[2]=0;q[3]=1;q[4]=d[0];q[5]=d[1];return q}function c(q){return"mat2d("+q[0]+", "+q[1]+", "+q[2]+", "+q[3]+", "+q[4]+", "+q[5]+")"}function e(q){return Math.sqrt(q[0]**2+q[1]**2+q[2]**2+q[3]**2+q[4]**2+q[5]**2+1)}function k(q,d,B){q[0]=d[0]+B[0];q[1]=d[1]+B[1];q[2]=d[2]+B[2];q[3]=d[3]+
B[3];q[4]=d[4]+B[4];q[5]=d[5]+B[5];return q}function l(q,d,B){q[0]=d[0]-B[0];q[1]=d[1]-B[1];q[2]=d[2]-B[2];q[3]=d[3]-B[3];q[4]=d[4]-B[4];q[5]=d[5]-B[5];return q}function m(q,d,B){q[0]=d[0]*B;q[1]=d[1]*B;q[2]=d[2]*B;q[3]=d[3]*B;q[4]=d[4]*B;q[5]=d[5]*B;return q}function v(q,d,B,I){q[0]=d[0]+B[0]*I;q[1]=d[1]+B[1]*I;q[2]=d[2]+B[2]*I;q[3]=d[3]+B[3]*I;q[4]=d[4]+B[4]*I;q[5]=d[5]+B[5]*I;return q}function E(q,d){return q[0]===d[0]&&q[1]===d[1]&&q[2]===d[2]&&q[3]===d[3]&&q[4]===d[4]&&q[5]===d[5]}function A(q,
d){const B=q[0],I=q[1],R=q[2],N=q[3],K=q[4];q=q[5];const X=d[0],Y=d[1],S=d[2],U=d[3],J=d[4];d=d[5];const T=n.getEpsilon();return Math.abs(B-X)<=T*Math.max(1,Math.abs(B),Math.abs(X))&&Math.abs(I-Y)<=T*Math.max(1,Math.abs(I),Math.abs(Y))&&Math.abs(R-S)<=T*Math.max(1,Math.abs(R),Math.abs(S))&&Math.abs(N-U)<=T*Math.max(1,Math.abs(N),Math.abs(U))&&Math.abs(K-J)<=T*Math.max(1,Math.abs(K),Math.abs(J))&&Math.abs(q-d)<=T*Math.max(1,Math.abs(q),Math.abs(d))}const t=Object.freeze(Object.defineProperty({__proto__:null,
add:k,copy:h,determinant:z,equals:A,exactEquals:E,frob:e,fromRotation:a,fromScaling:p,fromTranslation:g,identity:f,invert:y,mul:D,multiply:D,multiplyScalar:m,multiplyScalarAndAdd:v,rotate:x,scale:u,set:w,str:c,sub:l,subtract:l,translate:b},Symbol.toStringTag,{value:"Module"}));r.add=k;r.copy=h;r.determinant=z;r.equals=A;r.exactEquals=E;r.frob=e;r.fromRotation=a;r.fromScaling=p;r.fromTranslation=g;r.identity=f;r.invert=y;r.mat2d=t;r.mul=D;r.multiply=D;r.multiplyScalar=m;r.multiplyScalarAndAdd=v;r.rotate=
x;r.scale=u;r.set=w;r.str=c;r.sub=l;r.subtract=l;r.translate=b})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define(["exports","../../../../symbols/support/svgUtils","../../../../symbols/support/utils","../../../support/widgetUtils","../../../support/jsxFactory"],function(r,n,h,f,w){function y(x,u,b){const a=`${b}_arrowStart`;b=`${b}_arrowEnd`;x="left"===x;const p={markerStart:null,markerEnd:null};switch(u){case "HL":x?p.markerStart=`url(#${b})`:p.markerEnd=`url(#${a})`;break;
case "LL":p.markerStart=`url(#${b})`;break;case "LH":x?p.markerEnd=`url(#${a})`:p.markerStart=`url(#${b})`;break;default:p.markerEnd=`url(#${a})`}return p}function z(x,u,b,a,p=60){const {focus:g,numClasses:c,colors:e,rotation:k}=x;x=!!g;const l=Math.sqrt(p**2+p**2)+(x?0:5),m=[],v=[];var E=[],A=(p||75)/c;for(var t=0;t<c;t++){var q=t*A;for(var d=0;d<c;d++){var B=d*A,I=n.generateFillAttributes(e[t][d]);const R=n.generateStrokeAttributes(null);B={type:"rect",x:B,y:q,width:A,height:A};const N=n.renderDef(I);
N&&m.push(N);(I=n.renderShape(B,I.fill,R,null))&&v.push(I);E.push(n.getBoundingBox(B))}}A=null;x||(A="margin: -15px -15px -18px -15px");t=y("left",g,u);q=y("right",g,u);d=n.computeBBox(E);E=n.getTransformMatrix(d,l,l,0,!1,k,!1);d=n.getTransformMatrix(d,l,l,0,!1,x?-45:null,!1);b={filter:h.getCSSFilterFromEffectList(a)??void 0,opacity:null==b?"":`${b}`};return w.tsx("div",{styles:b,class:x?D.diamondMidColRamp:D.squareTableCell},w.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,style:A},
w.tsx("defs",null,w.tsx("marker",{id:`${u}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},w.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),w.tsx("marker",{id:`${u}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},w.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),m),w.tsx("g",{transform:E},v),w.tsx("g",{transform:d},
w.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":t.markerStart,"marker-end":t.markerEnd,x1:-10,y1:p-15,x2:-10,y2:15}),w.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":q.markerStart,"marker-end":q.markerEnd,x1:15,y1:p+10,x2:p-15,y2:p+10}))))}const D={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",
diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",
squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};r.renderRelationshipRamp=function(x,u,b,a){const {focus:p,labels:g}=x,c=!!p;x=z(x,u,b,a);u={justifyContent:"center"};b=f.isRTL();return c?w.tsx("div",{class:D.diamondContainer,styles:u},w.tsx("div",{class:D.diamondLeftCol},b?g.right:g.left),w.tsx("div",{class:D.diamondMidCol},w.tsx("div",{class:D.diamondMidColLabel},g.top),x,w.tsx("div",
{class:D.diamondMidColLabel},g.bottom)),w.tsx("div",{class:D.diamondRightCol},b?g.left:g.right)):w.tsx("div",{class:D.squareTable},w.tsx("div",{class:D.squareTableRow},w.tsx("div",{class:f.classes(D.squareTableCell,D.squareTableLabel,D.squareTableLabelRightBottom)},b?g.top:g.left),w.tsx("div",{class:D.squareTableCell}),w.tsx("div",{class:f.classes(D.squareTableCell,D.squareTableLabel,D.squareTableLabelLeftBottom)},b?g.left:g.top)),w.tsx("div",{class:D.squareTableRow},w.tsx("div",{class:D.squareTableCell}),
x,w.tsx("div",{class:D.squareTableCell})),w.tsx("div",{class:D.squareTableRow},w.tsx("div",{class:f.classes(D.squareTableCell,D.squareTableLabel,D.squareTableLabelRightTop)},b?g.right:g.bottom),w.tsx("div",{class:D.squareTableCell}),w.tsx("div",{class:f.classes(D.squareTableCell,D.squareTableLabel,D.squareTableLabelLeftTop)},b?g.bottom:g.right)))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang",
"../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],function(r,n,h,f){function w(u){if(u){var {type:b}=u;return b.includes("3d")?f.getSymbolLayerFill(u.symbolLayers.getItemAt(0)):"simple-line"===b||"simple-marker"===u.type&&("x"===u.style||"cross"===u.style)?(u=h.getStroke(u))&&u.color:h.getFill(u)}}function y(u,b){const a=b.HH.label,p=b.LL.label,g=b.HL.label;b=b.LH.label;switch(u){case "HH":return{top:a,bottom:p,left:g,right:b};case "HL":return{top:g,bottom:b,left:p,right:a};
case "LL":return{top:p,bottom:a,left:b,right:g};case "LH":return{top:b,bottom:g,left:a,right:p};default:return{top:a,bottom:p,left:g,right:b}}}function z(u){let b=D[u];u&&null==b&&(b=D.HH);return b||0}const D={HH:315,HL:45,LL:135,LH:225},x={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};r.getRelationshipRampColors2D=function(u,b){const a=[],p=u.length**.5;
u=n.clone(u);var g=(b||"HH").split("");b=g[0];for(g="H"===g[1];u.length;){const c=[];for(;c.length<p;)c.push(u.shift());g&&c.reverse();a.push(c)}"L"===b&&a.reverse();return a};r.getRelationshipRampElement=function(u){const {focus:b,infos:a,numClasses:p}=u;var g=x[p];const c={};a.forEach(e=>{c[e.value]={label:e.label,fill:w(e.symbol)}});u=[];for(let e=0;e<p;e++){const k=[];for(let l=0;l<p;l++)k.push(c[g[e][l]].fill);u.push(k)}g=y(b,c);return{type:"relationship-ramp",numClasses:p,focus:b,colors:u,labels:g,
rotation:z(b)}};r.getRotationAngleForFocus=z;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewSymbol3D":function(){define("exports ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,
c,e){function k(L){const V=L.outline;var C=z.isSome(L.material)?L.material.color:null;C=z.isSome(C)?C.toHex():null;if(z.isNone(V)||"pattern"in V&&z.isSome(V.pattern)&&"style"===V.pattern.type&&"none"===V.pattern.style)return"fill"===L.type&&"#ffffff"===C?{color:"#bdc3c7",width:.75}:null;L=x.pt2px(V.size)||0;return{color:"rgba("+(z.isSome(V.color)?V.color.toRgba():"255,255,255,1")+")",width:Math.min(L,J),style:"pattern"in V&&z.isSome(V.pattern)&&"style"===V.pattern.type?u.dekebabifyLineStyle(V.pattern.style):
null,join:"butt",cap:"patternCap"in V?V.patternCap:"butt"}}function l(L,V){var C=V&&V.resource;C=C&&C.href;if(L.thumbnail&&L.thumbnail.url)return Promise.resolve(L.thumbnail.url);if(C&&"object"!==V.type)return Promise.resolve(c.getIconHref(V));const M=n.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return L.styleOrigin&&(L.styleOrigin.styleName||L.styleOrigin.styleUrl)?e.resolveWebStyleSymbol(L.styleOrigin,{portal:L.styleOrigin.portal},"webRef").catch(P=>P).then(P=>P?.thumbnail?.url||
M):Promise.resolve(M)}function m(L,V=1){const C=L.a;L=h.toHSV(L);const {r:M,g:P,b:W}=h.toRGB({h:L.h,s:L.s/V,v:100-(100-L.v)/V});return[M,P,W,C]}function v(L){return"water"===L.type?z.isNone(L.color)?null:L.color:z.isNone(L.material)||z.isNone(L.material.color)?null:L.material.color}function E(L,V=0){var C=v(L);if(!C){if("fill"===L.type)return null;V=p.adjustColorComponentBrightness(u.defaultThematicColor.r,V);return[V,V,V,100]}L=C.toRgba();for(C=0;3>C;C++)L[C]=p.adjustColorComponentBrightness(L[C],
V);return L}async function A(L,V){L=L.style;return"none"===L?null:{type:"pattern",x:0,y:0,src:await u.getPatternUrlWithColor(n.getAssetUrl(`esri/symbols/patterns/${L}.png`),V.toCss(!0)),width:5,height:5}}function t(L){return L.outline?k(L):{color:"rgba(0, 0, 0, 1)",width:1.5}}function q(L,V){L=v(L);if(!L)return null;let C;C="rgba("+(p.adjustColorComponentBrightness(L.r,V)+",");C+=p.adjustColorComponentBrightness(L.g,V)+",";C+=p.adjustColorComponentBrightness(L.b,V)+",";return C+L.a+");"}function d(L,
V){V=q(L,V);if(!V)return{};if("pattern"in L&&z.isSome(L.pattern)&&"style"===L.pattern.type&&"none"===L.pattern.style)return null;const C=Math.min(L.size?x.pt2px(L.size):.75,J);return{color:V,width:C,style:"pattern"in L&&z.isSome(L.pattern)&&"style"===L.pattern.type?u.dekebabifyLineStyle(L.pattern.style):null,cap:"cap"in L?L.cap:null,join:"join"in L?"miter"===L.join?x.pt2px(2):L.join:null}}function B(L,V,C){C=null!=C?.75*C:0;return{type:"linear",x1:C?.25*C:0,y1:C?.5*C:0,x2:C||4,y2:C?.5*C:4,colors:[{color:L,
offset:0},{color:V,offset:1}]}}function I(L){const V=L.depth,C=L.height;L=L.width;return 0!==L&&0!==V&&0!==C&&L===V&&null!=L&&null!=C&&L<C}function R(L,V,C){const M=[];if(!L)return M;switch(L.type){case "icon":switch(L.resource&&L.resource.primitive||b.defaultPrimitive){case "circle":M.push({shape:{type:"circle",cx:0,cy:0,r:.5*V},fill:E(L,0),stroke:k(L)});break;case "square":M.push({shape:{type:"path",path:[{command:"M",values:[0,V]},{command:"L",values:[0,0]},{command:"L",values:[V,0]},{command:"L",
values:[V,V]},{command:"Z",values:[]}]},fill:E(L,0),stroke:k(L)});break;case "triangle":M.push({shape:{type:"path",path:[{command:"M",values:[0,V]},{command:"L",values:[.5*V,0]},{command:"L",values:[V,V]},{command:"Z",values:[]}]},fill:E(L,0),stroke:k(L)});break;case "cross":M.push({shape:{type:"path",path:[{command:"M",values:[.5*V,0]},{command:"L",values:[.5*V,V]},{command:"M",values:[0,.5*V]},{command:"L",values:[V,.5*V]}]},stroke:t(L)});break;case "x":M.push({shape:{type:"path",path:[{command:"M",
values:[0,0]},{command:"L",values:[V,V]},{command:"M",values:[V,0]},{command:"L",values:[0,V]}]},stroke:t(L)});break;case "kite":M.push({shape:{type:"path",path:[{command:"M",values:[0,.5*V]},{command:"L",values:[.5*V,0]},{command:"L",values:[V,.5*V]},{command:"L",values:[.5*V,V]},{command:"Z",values:[]}]},fill:E(L,0),stroke:k(L)})}break;case "object":switch(L.resource&&L.resource.primitive||a.defaultPrimitive){case "cone":var P=E(L,0);L=E(L,-.6);L=B(P,L,C?F:V);V=p.getConeShapes(V,C);M.push({shape:V[0],
fill:L});M.push({shape:V[1],fill:L});break;case "inverted-cone":C=E(L,0);L=E(L,-.6);L=B(C,L,V);V=p.getInvertedConeShapes(V);M.push({shape:V[0],fill:L});M.push({shape:V[1],fill:C});break;case "cube":V=p.getCubeShapes(V,C);M.push({shape:V[0],fill:E(L,0)});M.push({shape:V[1],fill:E(L,-.3)});M.push({shape:V[2],fill:E(L,-.5)});break;case "cylinder":P=E(L,0);const W=E(L,-.6);P=B(P,W,C?F:V);V=p.getCylinderShapes(V,C);M.push({shape:V[0],fill:P});M.push({shape:V[1],fill:P});M.push({shape:V[2],fill:E(L,0)});
break;case "diamond":V=p.getDiamondShapes(V);M.push({shape:V[0],fill:E(L,-.3)});M.push({shape:V[1],fill:E(L,0)});M.push({shape:V[2],fill:E(L,-.3)});M.push({shape:V[3],fill:E(L,-.7)});break;case "sphere":C=E(L,0);L=E(L,-.6);L=B(C,L);L.x1=0;L.y1=0;L.x2=.25*V;L.y2=.25*V;M.push({shape:{type:"circle",cx:0,cy:0,r:.5*V},fill:L});break;case "tetrahedron":V=p.getTetrahedronShapes(V),M.push({shape:V[0],fill:E(L,-.3)}),M.push({shape:V[1],fill:E(L,0)}),M.push({shape:V[2],fill:E(L,-.6)})}}return M}function N(L){return(L=
"number"===typeof L?.size?L?.size:null)?x.pt2px(L):null}function K(L,V){const C=N(V),M=V?.maxSize?x.pt2px(V.maxSize):null,P=V?.disableUpsampling??!1,W=L.symbolLayers,H=[];let G=0,O=0;const Q=W.getItemAt(W.length-1);let aa;Q&&"icon"===Q.type&&(aa=Q.size&&x.pt2px(Q.size));W.forEach(ba=>{if("icon"===ba.type||"object"===ba.type){var da="icon"===ba.type?ba.size&&x.pt2px(ba.size):0,ia=C||da?Math.ceil(Math.min(C||da,M||U)):S;if(ba&&ba.resource&&ba.resource.href){var fa=l(L,ba).then(ka=>{const na=ba.get("material.color");
var pa="icon"===ba.type?"multiply":"tint";return g.tintImageWithColor(ka,ia,na,pa,P)}).then(ka=>{const na=ka.width,pa=ka.height;G=Math.max(G,na);O=Math.max(O,pa);return[{shape:{type:"image",x:0,y:0,width:na,height:pa,src:ka.url},fill:null,stroke:null}]});H.push(fa)}else fa=ia,"icon"===ba.type&&aa&&C&&(fa=da/aa*ia),da="tall"===V?.symbolConfig||V?.symbolConfig?.isTall||("object"===ba.type?I(ba):!1),G=Math.max(G,da?F:fa),O=Math.max(O,fa),H.push(Promise.resolve(R(ba,fa,da)))}});return D.eachAlways(H).then(ba=>
{const da=[];ba.forEach(ia=>{ia.value?da.push(ia.value):ia.error&&y.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",ia.error)});return g.renderSymbol(da,[G,O],{node:V&&V.node,scale:!1,opacity:V&&V.opacity})})}function X(L,V){const C=L.symbolLayers,M=[];L=c.isVolumetricSymbol(L);const P=N(V),W=(V&&V.maxSize?x.pt2px(V.maxSize):null)||J;let H=0,G=0,O;C.forEach((Q,aa)=>{if(Q&&("line"===Q.type||"path"===Q.type)){var ba=[];switch(Q.type){case "line":var da=d(Q,
0);if(z.isNone(da))break;var ia=da&&da.width||0;0===aa&&(O=ia);Q=Math.min(P||ia,W);aa=0===aa?Q:P?ia/O*Q:Q;ia=aa>T/2?2*aa:T;G=Math.max(G,aa);H=Math.max(H,ia);da.width=aa;ba.push({shape:{type:"path",path:[{command:"M",values:[0,.5*G]},{command:"L",values:[H,.5*G]}]},stroke:da});break;case "path":da=Math.min(P||S,W);aa=E(Q,0);ia=E(Q,-.2);var fa=q(Q,-.4);fa=fa?{color:fa,width:1}:{};if("quad"===Q.profile){const ka=Q.width;Q=Q.height;Q=p.getPathSymbolShapes(ka&&Q?ka/Q:1,0===Q,0===ka);fa={...fa,join:"bevel"};
ba.push({shape:Q[0],fill:ia,stroke:fa});ba.push({shape:Q[1],fill:ia,stroke:fa});ba.push({shape:Q[2],fill:aa,stroke:fa})}else ba.push({shape:p.shapes.pathSymbol3DLayer[0],fill:ia,stroke:fa}),ba.push({shape:p.shapes.pathSymbol3DLayer[1],fill:aa,stroke:fa});H=G=Math.max(G,da)}M.push(ba)}});return Promise.resolve(g.renderSymbol(M,[H,G],{node:V&&V.node,scale:L,opacity:V&&V.opacity}))}async function Y(L,V){const C="mesh-3d"===L.type;L=L.symbolLayers;var M=N(V);const P=V&&V.maxSize?x.pt2px(V.maxSize):null;
M=M||S;const W=[];let H=0,G=0;var O=!1;for(let fa=0;fa<L.length;fa++){var Q=L.getItemAt(fa);const ka=[];if(!C||"fill"===Q.type){var aa=p.shapes.fill[0];switch(Q.type){case "fill":var ba=k(Q);O=Math.min(M,P||U);H=Math.max(H,O);G=Math.max(G,O);O=!0;var da=E(Q,0),ia="pattern"in Q?Q.pattern:null;Q=v(Q);!C&&z.isSome(ia)&&"style"===ia.type&&"solid"!==ia.style&&Q&&(da=await A(ia,Q));ka.push({shape:aa,fill:da,stroke:ba});break;case "line":Q=d(Q,0);if(z.isNone(Q))break;Q={stroke:Q,shape:aa};H=Math.max(H,S);
G=Math.max(G,S);ka.push(Q);break;case "extrude":aa={join:"round",width:1,...d(Q,-.4)};ba=E(Q,0);Q=E(Q,-.2);da=Math.min(M,P||U);ia=p.getExtrudeSymbolShapes(da);aa.width=1;ka.push({shape:ia[0],fill:Q,stroke:aa});ka.push({shape:ia[1],fill:Q,stroke:aa});ka.push({shape:ia[2],fill:ba,stroke:aa});Q=.7*S+.5*da;H=Math.max(H,S);G=Math.max(G,Q);break;case "water":O=z.unwrapOrThrow(v(Q)),Q=m(O),aa=m(O,2),ba=m(O,3),da=p.getWaterSymbolShapes(),O=!0,ka.push({shape:da[0],fill:Q}),ka.push({shape:da[1],fill:aa}),ka.push({shape:da[2],
fill:ba}),Q=Math.min(M,P||U),H=Math.max(H,Q),G=Math.max(G,Q)}W.push(ka)}}return g.renderSymbol(W,[H,G],{node:V&&V.node,scale:O,opacity:V&&V.opacity})}const S=p.SymbolSizeDefaults.size,U=p.SymbolSizeDefaults.maxSize,J=p.SymbolSizeDefaults.maxOutlineSize,T=p.SymbolSizeDefaults.lineWidth,F=p.SymbolSizeDefaults.tallSymbolWidth;r.getPatternDescriptor=A;r.getSizeFromOptions=N;r.getSymbolLayerFill=E;r.previewSymbol3D=function(L,V){if(0===L.symbolLayers.length)return Promise.reject(new w("symbolPreview: renderPreviewHTML3D",
"No symbolLayers in the symbol."));switch(L.type){case "point-3d":return K(L,V);case "line-3d":return X(L,V);case "polygon-3d":case "mesh-3d":return Y(L,V)}return Promise.reject(new w("symbolPreview: swatchInfo3D","symbol not supported."))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/maybe ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a){function p(c,e,k,l,m){var v=c.data;const E=k&&w.isSome(k.portal)?k.portal:z.getDefault(),A={portal:E,url:y.urlToObject(c.baseUrl),origin:"portal-item"};v=v.items.find(I=>I.name===e);if(!v)return Promise.reject(new f("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e}));let t=D.fromJSON(b.symbolUrlFromStyleItem(v,l),A),q=v.thumbnail?.href??null;const d=v.thumbnail&&v.thumbnail.imageData;h.isDevEnvironment()&&(t=h.adjustStaticAGOUrl(t)??
"",q=h.adjustStaticAGOUrl(q));const B={portal:E,url:y.urlToObject(y.removeFile(t)),origin:"portal-item"};return b.requestJSON(t,m).then(I=>{I="cimRef"===l?b.makeCIMSymbolRef(I.data):I.data;if((I=x.fromJSON(I,B))&&n.isSymbol3D(I)){if(q){const R=D.fromJSON(q,A);I.thumbnail=new a.Thumbnail({url:R})}else d&&(I.thumbnail=new a.Thumbnail({url:`data:image/png;base64,${d}`}));c.styleUrl?I.styleOrigin=new u({portal:k.portal,styleUrl:c.styleUrl,name:e}):c.styleName&&(I.styleOrigin=new u({portal:k.portal,styleName:c.styleName,
name:e}))}return I})}function g(c,e,k){const l=b.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,c),m=w.isSome(e.portal)?e.portal:z.getDefault();return b.requestJSON(l,k).then(v=>{v=b.makeCIMSymbolRef(v.data);return x.fromJSON(v,{portal:m,url:y.urlToObject(y.removeFile(l)),origin:"portal-item"})})}r.fetchSymbolFromStyle=p;r.resolveWebStyleSymbol=function(c,e,k,l){const m=c.name;return w.isNone(m)?Promise.reject(new f("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):
c.styleName&&"Esri2DPointSymbolsStyle"===c.styleName?g(m,e,l):b.fetchStyle(c,e,l).then(v=>p(w.unwrapOrThrow(v),m,e,k,l))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(r){const n=/^devext.arcgis.com$/,h=/^qaext.arcgis.com$/,f=/^[\w-]*\.mapsdevext.arcgis.com$/,w=/^[\w-]*\.mapsqa.arcgis.com$/,y=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,n,h,/^jsapps.esri.com$/,f,w];r.adjustStaticAGOUrl=function(z,D){return z?
(D=D||globalThis.location.hostname)?null!=D.match(n)||null!=D.match(f)?z.replace("static.arcgis.com","staticdev.arcgis.com"):null!=D.match(h)||null!=D.match(w)?z.replace("static.arcgis.com","staticqa.arcgis.com"):z:z:z};r.isDevEnvironment=function(z){z=z||globalThis.location.hostname;return y.some(D=>null!=z?.match(D))};r.isTelemetryDevEnvironment=function(z){z=z||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(y).some(D=>null!=z?.match(D))};Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"})})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(r,n){r.extractSafeScaleBounds=function(h){h=h.effectiveScaleRange;return{minScale:h?.minScale??0,maxScale:h?.maxScale??0}};r.highlightsSupported=function(h){return h&&"function"===typeof h.highlight};r.isScaleRangeActive=function(h,f){return n.isSome(h)&&0<h||n.isSome(f)&&0<f};r.occludeesSupported=function(h){return h&&"function"===typeof h.maskOccludee};r.scaleBoundsPredicate=function(h,
f,w){return n.isNone(h)||h>w&&(0===f||h<f)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(r,n,h,f,w,y,z,D,x){r.GoToMixin=u=>{u=function(b){function a(...g){g=p.call(this,
...g);g.goToOverride=null;g.view=null;return g}n._inherits(a,b);var p=n._createSuper(a);a.prototype.callGoTo=function(g){const {view:c}=this;f.assertIsSome(c);return this.goToOverride?this.goToOverride(c,g):c.goTo(g.target,g.options)};return n._createClass(a)}(u);h.__decorate([w.property()],u.prototype,"goToOverride",void 0);h.__decorate([w.property()],u.prototype,"view",void 0);return u=h.__decorate([x.subclass("esri.widgets.support.GoTo")],u)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/Error ../core/accessorSupport/decorators/subclass".split(" "),function(r,n,h,f,w,y,z,D,x,u,b){r.PopupView=a=>{a=function(p){function g(){return c.apply(this,arguments)}n._inherits(g,p);var c=n._createSuper(g);p=g.prototype;p.fetchPopupFeatures=async function(e,k){await this.when();
const {location:l,queryArea:m,layerViewsAndGraphics:v,clientOnlyGraphics:E}=await this._prepareFetchPopupFeatures(e,k);e=Promise.resolve(E);k=this._queryLayerPopupFeatures(m,v,k);const A=k.map(t=>t.promise);e=w.eachAlwaysValues([e,...A]).then(t=>Array.from(new Set(t.flat())));return{location:l,clientOnlyGraphics:E,allGraphicsPromise:e,promisesPerLayerView:k}};p._queryLayerPopupFeatures=function(e,k,l){return k.map(({layerView:m,graphics:v})=>{v={clientGraphics:v,event:f.isSome(l)?l.event:void 0,signal:f.isSome(l)?
l.signal:void 0,defaultPopupTemplateEnabled:f.isSome(l)?!!l.defaultPopupTemplateEnabled:!1};v=m.fetchPopupFeatures(e,v);return{layerView:m,promise:v}})};p._isValidPopupGraphic=function(e,k){return e&&!!e.getEffectivePopupTemplate(f.isSome(k)&&k.defaultPopupTemplateEnabled)};p._prepareFetchPopupFeatures=async function(e,k){const {clientGraphics:l,queryArea:m,location:v}=await this._popupHitTestGraphics(e,k);e=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:E,clientOnlyGraphics:A}=this._graphicsPerFetchPopupLayerView(l,
e);return{clientOnlyGraphics:A,layerViewsAndGraphics:E,queryArea:m,location:v}};p._popupHitTestGraphics=async function(e,k){var l=await this.popupHitTest(e);e=l.mapPoint;l=l.results.filter(v=>"graphic"===v.type&&this._isValidPopupGraphic(v.graphic,k));const m=l.length?l[0].mapPoint:null;return{clientGraphics:l.map(v=>v.graphic),queryArea:e,location:e||m}};p._getFetchPopupLayerViews=function(){const e=[];this.allLayerViews.forEach(k=>{this._isValidPopupLayerView(k)&&e.push(k)});f.isSome(this.graphicsView)&&
this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView);return e.reverse()};p._isValidPopupLayerView=function(e){return f.isSome(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e};p._graphicsPerFetchPopupLayerView=function(e,k){const l=[],m=new Map;k=k.map(v=>{const E=[];"layer"in v?m.set(v.layer,E):m.set(v.graphics,E);return{layerView:v,graphics:E}});for(const v of e)(e=m.get(v.layer)||m.get(v.sourceLayer)||null)?e.push(v):l.push(v);return{layerViewsAndGraphics:k,clientOnlyGraphics:l}};
return n._createClass(g)}(a);return a=h.__decorate([b.subclass("esri.views.PopupView")],a)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/maybe ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e){let k=function(){function l(m,v,E,A){const t=m.targetGeometry,q=v.targetGeometry;A?"string"===typeof A&&(A=g.parse(A)||g.easingFunctions.ease):A=g.easingFunctions.ease;this.easing=A;this.duration=E;this.sCenterX=t.x;this.sCenterY=t.y;this.sScale=m.scale;this.sRotation=m.rotation;this.tCenterX=q.x;this.tCenterY=q.y;this.tScale=v.scale;this.tRotation=v.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}l.prototype.applyRatio=function(m,v){var E=this.easing(v);let A,t;1<=v?(v=this.tCenterX,A=this.tCenterY,t=this.tRotation,E=this.tScale):(v=this.sCenterX+E*this.dCenterX,A=this.sCenterY+E*this.dCenterY,t=this.sRotation+E*this.dRotation,E=this.sScale+E*this.dScale);m.targetGeometry.x=v;m.targetGeometry.y=A;m.scale=E;m.rotation=t};return r._createClass(l)}();h=function(l){function m(E){E=
v.call(this,E);E.updateFunction=null;E.animation=null;E.duration=200;E.transition=null;E.easing=g.easingFunctions.ease;E.view=null;E.viewpoint=new f({targetGeometry:new e,scale:0,rotation:0});E._updateTask=z.addFrameTask({postRender:E._postRender.bind(r._assertThisInitialized(E))});E._updateTask.pause();return E}r._inherits(m,l);var v=r._createSuper(m);l=m.prototype;l.destroy=function(){this._updateTask=y.removeMaybe(this._updateTask)};l.animate=function(E,A,t){this.stop();c.copy(this.viewpoint,A);
this.transition=new k(this.viewpoint,E.target,t&&t.duration||this.duration,t&&t.easing||this.easing);A=()=>{this.animation===E&&this._updateTask&&("finished"===E.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};E.when(A,A);this._startTime=performance.now();this._updateTask.resume();return this.animation=E};l.animateContinous=function(E,A){this.stop();this.updateFunction=A;this.viewpoint=
E;const t=new p({target:E.clone()});E=()=>{this.animation===t&&this._updateTask&&(this.updateFunction=this.animation=null)};t.when(E,E);this._startTime=performance.now();this._updateTask.resume();return this.animation=t};l.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};l._postRender=function(E){var A=this.animation;if(A&&A.state!==p.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,E.deltaTime);else{E=this.transition;A=(performance.now()-
this._startTime)/E.duration;const t=1<=A;E.applyRatio(this.viewpoint,A);t&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()};return r._createClass(m)}(w);n.__decorate([D.property()],h.prototype,"animation",void 0);n.__decorate([D.property()],h.prototype,"duration",void 0);n.__decorate([D.property()],h.prototype,"transition",void 0);n.__decorate([D.property()],h.prototype,"easing",void 0);n.__decorate([D.property()],h.prototype,
"view",void 0);n.__decorate([D.property()],h.prototype,"viewpoint",void 0);return h=n.__decorate([a.subclass("esri.views.2d.AnimationManager")],h)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(r){function n(w,y,z,D){function x(e,k){var l;let m,v;m=e;for(l=0;8>l;l++){v=((a*m+b)*m+u)*m-e;if(Math.abs(v)<k)return m;var E=(3*a*m+2*b)*m+u;if(1E-6>Math.abs(E))break;m-=v/E}E=0;l=1;m=e;if(m<E)return E;if(m>l)return l;for(;E<l;){v=((a*m+b)*m+u)*m;if(Math.abs(v-e)<k)break;e>v?E=m:l=m;
m=.5*(l-E)+E}return m}const u=3*w,b=3*(z-w)-u,a=1-u-b,p=3*y,g=3*(D-y)-p,c=1-p-g;return function(e,k=1E-6){e=x(e,k);return((c*e+g)*e+p)*e}}const h=/^cubic-bezier\((.*)\)/,f={};f.ease=n(.25,.1,.25,1);f.linear=n(0,0,1,1);f.easeIn=f["ease-in"]=n(.42,0,1,1);f.easeOut=f["ease-out"]=n(0,0,.58,1);f.easeInOut=f["ease-in-out"]=n(.42,0,.58,1);r.easingFunctions=f;r.parse=function(w){let y=f[w]||null;!y&&(w=h.exec(w))&&(w=w[1].split(",").map(z=>parseFloat(z.trim())),4!==w.length||w.some(z=>isNaN(z))||(y=n.apply(n,
w)));return y};r.unitBezier=n;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e){function k(H,G){return G.type?x.set(H,G.x,G.y):x.copy(H,G)}function l(H,G){return Math.max(H.width/Math.max(1,G[0]),H.height/Math.max(1,G[1]))*d(H.spatialReference)}async function m(H,G,O,Q){if(!H||Array.isArray(H)&&!H.length)return null;h.isCollection(H)&&(H=H.toArray());if(Array.isArray(H)&&H.length&&"object"===typeof H[0]){var aa=H.every(na=>"attributes"in na);var ba=H.some(na=>!na.geometry),da=H;if(aa&&ba&&G&&G.allLayerViews){aa=new Map;for(var ia of H)H=
ia.layer,ba=aa.get(H)||[],da=ia.attributes[H.objectIdField],null!=da&&ba.push(da),aa.set(H,ba);const na=[];aa.forEach((pa,ta)=>{const wa=G.allLayerViews.find(ua=>ua.layer.id===ta.id);if(wa&&"queryFeatures"in wa){const ua=ta.createQuery();ua.objectIds=pa;ua.returnGeometry=!0;na.push(wa.queryFeatures(ua))}});ia=await Promise.all(na);H=[];for(var fa of ia)if(fa&&fa.features&&fa.features.length)for(var ka of fa.features)f.isSome(ka.geometry)&&H.push(ka.geometry);da=H}for(const na of da)Q=await m(na,G,
O,Q);return Q}if(Array.isArray(H)&&2===H.length&&"number"===typeof H[0]&&"number"===typeof H[1])aa=new p(H);else if(H instanceof a)aa=H;else if("geometry"in H)if(H.geometry)aa=H.geometry;else if(H.layer){const na=H.layer;(fa=G.allLayerViews.find(pa=>pa.layer.id===na.id))&&"queryFeatures"in fa&&(ka=na.createQuery(),ka.objectIds=[H.attributes[na.objectIdField]],ka.returnGeometry=!0,fa=await fa.queryFeatures(ka),aa=f.get(fa,"features",0,"geometry"))}if(f.isNone(aa))return null;fa="point"===aa.type?new b({xmin:aa.x,
ymin:aa.y,xmax:aa.x,ymax:aa.y,spatialReference:aa.spatialReference}):aa.extent;if(!fa)return null;g.isLoaded()||g.canProjectWithoutEngine(fa.spatialReference,O)||await g.load();O=g.project(fa,O);return O?Q=Q?Q.union(O):O:null}function v(H){if(H&&(!Array.isArray(H)||"number"!==typeof H[0])&&("object"===typeof H||Array.isArray(H)&&"object"===typeof H[0])){if("layer"in H&&H.layer&&H.layer.minScale&&H.layer.maxScale){var G=H.layer;return{min:G.minScale,max:G.maxScale}}if(Array.isArray(H)&&H.length&&H.every(O=>
"layer"in O)){let O=G=0;for(const Q of H)(H=Q.layer)&&H.minScale&&H.maxScale&&(G=H.minScale<G?H.minScale:G,O=H.maxScale>O?H.maxScale:O);return G&&O?{min:G,max:O}:null}}}function E(H,G){return e.equals(H.wkid?H:H.spatialReference||c.WGS84,G)?H:g.project(H,G)}function A(H,G){const O=H.targetGeometry,Q=G.targetGeometry;O.x=Q.x;O.y=Q.y;O.spatialReference=Q.spatialReference;H.scale=G.scale;H.rotation=G.rotation;return H}function t(H,G,O){return O?x.set(H,.5*(G[0]-O.right+O.left),.5*(G[1]-O.bottom+O.top)):
x.scale(H,G,.5)}function q(H){var G=H.scale;H=H.targetGeometry;H=f.isSome(H)&&e.isValid(H.spatialReference)?1/(39.37*w.getMetersPerUnitForSR(H.spatialReference)*96):1;return G*H}function d(H){return e.isValid(H)?39.37*w.getMetersPerUnitForSR(H)*96:1}function B(H){return(H=e.getInfo(H))?H.valid[1]-H.valid[0]:0}const I=180/Math.PI,R=function(){const H=u.create();return function(G,O,Q){const aa=O.targetGeometry;k(H,aa);O=.5*q(O);G.xmin=H[0]-O*Q[0];G.ymin=H[1]-O*Q[1];G.xmax=H[0]+O*Q[0];G.ymax=H[1]+O*
Q[1];G.spatialReference=aa.spatialReference;return G}}(),N=function(){const H=u.create();return function(G,O,Q){return x.sub(G,x.scale(G,O,.5),t(H,O,Q))}}(),K=function(){const H=D.create(),G=u.create();return function(O,Q,aa,ba){const da=q(Q);Q=y.toRadian(Q.rotation)||0;x.set(G,da,da);z.fromScaling(H,G);z.rotate(H,H,Q);z.translate(H,H,N(G,aa,ba));z.translate(H,H,[0,ba.top-ba.bottom]);return x.set(O,H[4],H[5])}}(),X=function(){const H=u.create(),G=u.create(),O=u.create();return function(Q,aa,ba,da,
ia,fa){x.negate(H,aa);x.scale(G,ba,.5*fa);x.set(O,1/da*fa,-1/da*fa);z.fromTranslation(Q,G);ia&&z.rotate(Q,Q,ia);z.scale(Q,Q,O);z.translate(Q,Q,H);return Q}}(),Y=function(){const H=u.create();return function(G,O,Q,aa){const ba=q(O),da=y.toRadian(O.rotation)||0;k(H,O.targetGeometry);return X(G,H,Q,ba,da,aa)}}(),S=function(){const H=u.create();return function(G,O,Q,aa){const ba=q(O);k(H,O.targetGeometry);return X(G,H,Q,ba,0,aa)}}(),U=function(){const H=u.create(),G=u.create(),O=[0,0,0];return function(Q,
aa,ba){x.subtract(H,Q,aa);x.normalize(H,H);x.subtract(G,Q,ba);x.normalize(G,G);x.cross(O,H,G);Q=Math.acos(x.dot(H,G)/(x.length(H)*x.length(G)))*I;0>O[2]&&(Q=-Q);isNaN(Q)&&(Q=0);return Q}}(),J=function(){const H=u.create();return function(G,O,Q,aa){const ba=G.targetGeometry;A(G,O);K(H,O,Q,aa);ba.x+=H[0];ba.y+=H[1];return G}}(),T=function(){return function(H,G,O){A(H,G);G=H.targetGeometry;G.x=O.x;G.y=O.y;G.spatialReference=O.spatialReference;return H}}(),F=function(){const H=u.create();return function(G,
O,Q,aa,ba){ba||(ba="center");x.sub(H,Q,aa);x.scale(H,H,.5);Q=H[0];aa=H[1];switch(ba){case "center":x.set(H,0,0);break;case "left":x.set(H,-Q,0);break;case "top":x.set(H,0,aa);break;case "right":x.set(H,Q,0);break;case "bottom":x.set(H,0,-aa);break;case "top-left":x.set(H,-Q,aa);break;case "bottom-left":x.set(H,-Q,-aa);break;case "top-right":x.set(H,Q,aa);break;case "bottom-right":x.set(H,Q,-aa)}W(G,O,H);return G}}(),L=function(){const H=u.create();return function(G,O,Q,aa,ba){A(G,O);isNaN(Q)||0===
Q||(M(H,aa,O,ba),G.scale=O.scale*Q,P(H,H,G,ba),W(G,G,x.set(H,H[0]-aa[0],aa[1]-H[1])));return G}}(),V=function(){const H=u.create();return function(G,O,Q,aa,ba,da){A(G,O);isNaN(Q)||0===Q||(M(H,ba,O,da),G.scale=O.scale*Q,G.rotation+=aa,P(H,H,G,da),W(G,G,x.set(H,H[0]-ba[0],ba[1]-H[1])));return G}}(),C=function(){const H=u.create(),G=u.create();return function(O,Q,aa,ba,da,ia,fa){N(G,ia,fa);x.add(H,da,G);return ba?V(O,Q,aa,ba,H,ia):L(O,Q,aa,H,ia)}}(),M=function(){const H=D.create();return function(G,
O,Q,aa){var ba=x.transformMat2d;Y(H,Q,aa,1);Q=z.invert(H,H);return ba.call(x,G,O,Q)}}(),P=function(){const H=D.create();return function(G,O,Q,aa){return x.transformMat2d(G,O,Y(H,Q,aa,1))}}(),W=function(){const H=u.create(),G=D.create();return function(O,Q,aa){A(O,Q);const ba=q(Q),da=O.targetGeometry;z.fromRotation(G,y.toRadian(Q.rotation)||0);z.scale(G,G,u.fromValues(ba,ba));x.transformMat2d(H,aa,G);da.x+=H[0];da.y+=H[1];return O}}();r.addPadding=J;r.angleBetween=U;r.centerAt=T;r.copy=A;r.create=
async function(H,G){if(!H||!G)return new n({targetGeometry:new p,scale:0,rotation:0});let O=G.spatialReference;const {constraints:Q,padding:aa,viewpoint:ba,size:da}=G,ia=[aa?da[0]-aa.left-aa.right:da[0],aa?da[1]-aa.top-aa.bottom:da[1]];let fa=null;H instanceof n?fa=H:H.viewpoint?fa=H.viewpoint:H.target&&"esri.Viewpoint"===H.target.declaredClass&&(fa=H.target);let ka=null;if(fa&&fa.targetGeometry)ka=fa.targetGeometry;else if(H instanceof b)ka=H;else if(H||H&&("center"in H||"extent"in H||"target"in
H))ka=await m(H.center,G,O)||await m(H.extent,G,O)||await m(H.target,G,O)||await m(H,G,O);!ka&&ba&&ba.targetGeometry?ka=ba.targetGeometry:!ka&&G.extent&&(ka=G.extent);if(!O){var na=G.spatialReference||G.extent||ka;O=na.wkid?na:na.spatialReference||c.WGS84}g.isLoaded()||e.equals(ka.spatialReference,O)||g.canProjectWithoutEngine(ka,O)||await g.load();na=E(ka.center??ka,O);var pa=0;fa&&f.isSome(fa.targetGeometry)&&"point"===fa.targetGeometry.type?pa=fa.scale:"scale"in H&&H.scale?pa=H.scale:"zoom"in H&&
-1!==H.zoom&&Q&&Q.effectiveLODs?pa=Q.zoomToScale(H.zoom):Array.isArray(ka)||"point"===ka.type||"extent"===ka.type&&0===ka.width&&0===ka.height?(pa=E(G.extent,O),pa=f.isSome(pa)?l(pa,ia):G.extent?l(G.extent,ia):ba.scale):pa=l(E(ka.extent,O),ia);if(G=v(H))G.min&&G.min>pa?pa=G.min:G.max&&G.max<pa&&(pa=G.max);G=0;fa?G=fa.rotation:H.hasOwnProperty("rotation")?G=H.rotation:ba&&(G=ba.rotation);H=new n({targetGeometry:na,scale:pa,rotation:G});Q&&(H=Q.fit(H),Q.constrainByGeometry(H),Q.rotationEnabled||(H.rotation=
G));return H};r.extentToScale=l;r.getAnchor=t;r.getExtent=R;r.getMatrix=X;r.getPaddingMapTranslation=K;r.getPaddingScreenTranslation=N;r.getResolution=q;r.getResolutionToScaleFactor=d;r.getTransform=Y;r.getTransformNoRotation=S;r.getWorldScreenWidth=function(H,G){return Math.round(B(H)/G)};r.getWorldWidth=B;r.padAndScaleAndRotateBy=C;r.resize=F;r.rotateBy=function(H,G,O){A(H,G);H.rotation+=O;return H};r.rotateTo=function(H,G,O){A(H,G);H.rotation=O;return H};r.scaleAndRotateBy=V;r.scaleTo=function(H,
G,O){A(H,G);H.scale=O;return H};r.setExtent=function(H,G,O,Q,aa){T(H,G,O.center);H.scale=l(O,Q);aa&&aa.constraints&&aa.constraints.constrain(H);return H};r.toMap=M;r.toScreen=P;r.translateBy=W;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat2df64":function(){define(["exports"],function(r){function n(){return[1,0,0,1,0,0]}function h(z){return[z[0],z[1],z[2],z[3],z[4],z[5]]}function f(z,D,x,u,b,a){return[z,D,x,u,b,a]}function w(z,D){return new Float64Array(z,D,6)}const y=
Object.freeze(Object.defineProperty({__proto__:null,clone:h,create:n,createView:w,fromValues:f},Symbol.toStringTag,{value:"Module"}));r.clone=h;r.create=n;r.createView=w;r.fromValues=f;r.mat2df64=y})},"esri/views/2d/FrameTask":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../core/reactiveUtils","../../core/scheduling"],function(r,n,h,f){return function(){function w(z){this.view=z;this._updateParameters=this._frameTaskHandle=this._stationaryHandle=null;this._updateRequested=
!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)};this.update=()=>{this._updateRequested=!1;const {basemapView:D,graphicsView:x,labelManager:u,layerViews:b,state:{id:a}}=this.view;D?.baseLayerViews.forEach(this._updateLayerView,this);
b.forEach(this._updateLayerView,this);D?.referenceLayerViews.forEach(this._updateLayerView,this);n.isSome(u)&&(u.lastUpdateId!==a&&(u.viewChange(),u.lastUpdateId=a),u.updateRequested&&u.processUpdate(this._updateParameters));n.isSome(x)&&(x.lastUpdateId!==a&&(x.viewChange(),x.lastUpdateId=a),x.updateRequested&&x.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}
var y=w.prototype;y.destroy=function(){this.stop()};y.start=function(){if(!this._frameTaskHandle){var z=this.view;this.stationary=z.stationary;this._updateParameters={state:z.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:z.renderingOptions};this._stationaryHandle=h.watch(()=>z.stationary,D=>{this.stationary=D;this.requestFrame()});this._frameTaskHandle=f.addFrameTask(this);this.requestUpdate()}};y.stop=function(){this._frameTaskHandle&&(this._updateRequested=
!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};y.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};y.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};y._updateLayerView=function(z){if(z.attached){var D=this.view.state,x=z.lastUpdateId;if(null==x||!this.stationary&&!z.moving)z.moving=
!0,z.moveStart();x!==D.id&&z.viewChange();this.stationary&&z.moving&&(z.moving=!1,z.moveEnd());z.lastUpdateId=D.id;z.updateRequested&&z.processUpdate(this._updateParameters);"layerViews"in z&&z.layerViews.forEach(this._updateLayerView,this)}else this.requestUpdate()};return r._createClass(w)}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe"],function(r,n,h,f){function w(){return Promise.all([new Promise((u,b)=>r(["./webglDeps"],
u,b)),new Promise((u,b)=>r(["./mapViewDeps"],u,b))])}const y=u=>Object.freeze(Object.defineProperty({__proto__:null,default:u},Symbol.toStringTag,{value:"Module"})),z=()=>w().then(()=>new Promise((u,b)=>r(["./layers/TileLayerView2D"],a=>u(y(a)),b))),D=()=>w().then(()=>new Promise((u,b)=>r(["./layers/FeatureLayerView2D"],a=>u(y(a)),b))),x={"base-dynamic":()=>w().then(()=>new Promise((u,b)=>r(["./layers/BaseDynamicLayerView2D"],a=>u(y(a)),b))),"base-tile":z,"bing-maps":z,csv:D,"geo-rss":()=>w().then(()=>
new Promise((u,b)=>r(["./layers/GeoRSSLayerView2D"],a=>u(y(a)),b))),feature:D,geojson:D,graphics:()=>w().then(()=>new Promise((u,b)=>r(["./layers/GraphicsLayerView2D"],a=>u(y(a)),b))),group:()=>w().then(()=>new Promise((u,b)=>r(["./layers/GroupLayerView2D"],a=>u(y(a)),b))),imagery:()=>w().then(()=>new Promise((u,b)=>r(["./layers/ImageryLayerView2D"],a=>u(y(a)),b))),"imagery-tile":()=>w().then(()=>new Promise((u,b)=>r(["./layers/ImageryTileLayerView2D"],a=>u(y(a)),b))),kml:()=>w().then(()=>new Promise((u,
b)=>r(["./layers/KMLLayerView2D"],a=>u(y(a)),b))),"knowledge-graph":()=>w().then(()=>new Promise((u,b)=>r(["./layers/KnowledgeGraphLayerView2D"],a=>u(y(a)),b))),"link-chart":()=>w().then(()=>new Promise((u,b)=>r(["./layers/KnowledgeGraphLayerView2D"],a=>u(y(a)),b))),"knowledge-graph-sublayer":D,"map-image":()=>w().then(()=>new Promise((u,b)=>r(["./layers/MapImageLayerView2D"],a=>u(y(a)),b))),"map-notes":()=>w().then(()=>new Promise((u,b)=>r(["./layers/MapNotesLayerView2D"],a=>u(y(a)),b))),media:()=>
w().then(()=>new Promise((u,b)=>r(["./layers/MediaLayerView2D"],a=>u(y(a)),b))),"ogc-feature":()=>w().then(()=>new Promise((u,b)=>r(["./layers/OGCFeatureLayerView2D"],a=>u(y(a)),b))),"open-street-map":z,"oriented-imagery":D,route:()=>w().then(()=>new Promise((u,b)=>r(["./layers/RouteLayerView2D"],a=>u(y(a)),b))),stream:()=>w().then(()=>new Promise((u,b)=>r(["./layers/StreamLayerView2D"],a=>u(y(a)),b))),"subtype-group":()=>w().then(()=>new Promise((u,b)=>r(["./layers/SubtypeGroupLayerView2D"],a=>u(y(a)),
b))),tile:z,"vector-tile":()=>w().then(()=>new Promise((u,b)=>r(["./layers/VectorTileLayerView2D"],a=>u(y(a)),b))),wcs:()=>w().then(()=>new Promise((u,b)=>r(["./layers/ImageryTileLayerView2D"],a=>u(y(a)),b))),"web-tile":z,wfs:D,wms:()=>w().then(()=>new Promise((u,b)=>r(["./layers/WMSLayerView2D"],a=>u(y(a)),b))),wmts:()=>w().then(()=>new Promise((u,b)=>r(["./layers/WMTSLayerView2D"],a=>u(y(a)),b))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,
"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};n.layerView2DImporter={hasLayerViewModule:u=>f.isSome(x[u.type]),importLayerView:u=>{var b=x[u.type];if(f.isNone(b))throw u=u.declaredClass?u.declaredClass.slice(u.declaredClass.lastIndexOf(".")+1):"Unknown",b=u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new h(`${b}:view-not-supported`,`${u} is not supported in 2D`);return b(u)}};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c){h={base:null,key:"type",typeMap:{extent:g,polygon:c}};f=function(e){function k(m){m=l.call(this,m);m.lods=null;m.minScale=0;m.maxScale=0;m.minZoom=-1;m.maxZoom=-1;m.rotationEnabled=!0;m.snapToZoom=!0;return m}r._inherits(k,e);var l=r._createSuper(k);e=k.prototype;e.destroy=function(){this.view=null};e.canZoomInTo=function(m){const v=this.effectiveMaxScale;return 0===v||m>=v};e.canZoomOutTo=function(m){const v=this.effectiveMinScale;return 0===v||m<=v};e.constrain=
function(m,v){this._zoom.constrain(m,v);this._rotation.constrain(m,v);this._geometry.constrain(m,v);return m};e.constrainByGeometry=function(m){return this._geometry.constrain(m)};e.fit=function(m){return this._zoom.fit(m)};e.zoomToScale=function(m){return this._zoom.zoomToScale(m)};e.scaleToZoom=function(m){return this._zoom.scaleToZoom(m)};e.snapScale=function(m){return this._zoom.snapToClosestScale(m)};e.snapToNextScale=function(m){return this._zoom.snapToNextScale(m)};e.snapToPreviousScale=function(m){return this._zoom.snapToPreviousScale(m)};
r._createClass(k,[{key:"effectiveLODs",get:function(){return this._zoom.effectiveLODs}},{key:"effectiveMinScale",get:function(){return this._zoom.effectiveMinScale}},{key:"effectiveMaxScale",get:function(){return this._zoom.effectiveMaxScale}},{key:"effectiveMinZoom",get:function(){return this._zoom.effectiveMinZoom}},{key:"effectiveMaxZoom",get:function(){return this._zoom.effectiveMaxZoom}},{key:"geometry",set:function(m){m?this._set("geometry",m):this._set("geometry",null)}},{key:"version",get:function(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}},
{key:"_defaultLODs",get:function(){const m=this.view?.defaultsFromMap?.tileInfo,v=this.view?.spatialReference;return m&&v&&m.spatialReference.equals(v)?m.lods:null}},{key:"_geometry",get:function(){return new b.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.spatialReference})}},{key:"_rotation",get:function(){return new a({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const m=this._get("_zoom"),v=this.lods||this._defaultLODs,E=this.minZoom,A=this.maxZoom,
t=this.minScale,q=this.maxScale,d=this.snapToZoom;return m&&m.lods===v&&m.minZoom===E&&m.maxZoom===A&&m.minScale===t&&m.maxScale===q&&m.snapToZoom===d?m:new p({lods:v,minZoom:E,maxZoom:A,minScale:t,maxScale:q,snapToZoom:d})}}]);return k}(f);n.__decorate([w.property({readOnly:!0})],f.prototype,"effectiveLODs",null);n.__decorate([w.property({readOnly:!0})],f.prototype,"effectiveMinScale",null);n.__decorate([w.property({readOnly:!0})],f.prototype,"effectiveMaxScale",null);n.__decorate([w.property({readOnly:!0})],
f.prototype,"effectiveMinZoom",null);n.__decorate([w.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",null);n.__decorate([w.property({types:h,value:null})],f.prototype,"geometry",null);n.__decorate([w.property({type:[u]})],f.prototype,"lods",void 0);n.__decorate([w.property()],f.prototype,"minScale",void 0);n.__decorate([w.property()],f.prototype,"maxScale",void 0);n.__decorate([w.property()],f.prototype,"minZoom",void 0);n.__decorate([w.property()],f.prototype,"maxZoom",void 0);n.__decorate([w.property()],
f.prototype,"rotationEnabled",void 0);n.__decorate([w.property()],f.prototype,"snapToZoom",void 0);n.__decorate([w.property()],f.prototype,"view",void 0);n.__decorate([w.property({readOnly:!0})],f.prototype,"version",null);n.__decorate([w.property()],f.prototype,"_defaultLODs",null);n.__decorate([w.property({type:b.GeometryConstraint})],f.prototype,"_geometry",null);n.__decorate([w.property({type:a})],f.prototype,"_rotation",null);n.__decorate([w.property({readOnly:!0,type:p})],f.prototype,"_zoom",
null);return f=n.__decorate([x.subclass("esri.views.2d.MapViewConstraints")],f)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c){var e;r.GeometryConstraint=e=function(k){function l(v){v=m.call(this,v);v.geometry=null;v.spatialReference=null;return v}n._inherits(l,k);var m=n._createSuper(l);k=l.prototype;k.constrain=function(v,E){if(z.isNone(this.normalizedGeometry))return v;E=v.targetGeometry;if("extent"===this.normalizedGeometry.type?g.extentContainsPoint(this.normalizedGeometry,E):g.polygonContainsPoint(this.normalizedGeometry,E))return v;({coordinate:E}=c.nearestCoordinate(this.normalizedGeometry,
E));if(!E)return v;v.targetGeometry=E;return v};k.clone=function(){return new e({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})};n._createClass(l,[{key:"normalizedGeometry",get:function(){if(z.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return p.project(this.geometry,this.spatialReference)}catch(v){return y.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:v}),null}return this.geometry}}]);return l}(w.NumericIdentifiableMixin(f));h.__decorate([D.property({constructOnly:!0})],r.GeometryConstraint.prototype,"geometry",void 0);h.__decorate([D.property({readOnly:!0})],r.GeometryConstraint.prototype,"normalizedGeometry",null);h.__decorate([D.property({constructOnly:!0})],r.GeometryConstraint.prototype,"spatialReference",void 0);r.GeometryConstraint=e=h.__decorate([a.subclass("esri.views.2d.constraints.GeometryConstraint")],
r.GeometryConstraint);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(r,n,h,f,w){r.nearestCoordinate=function(y,z){const {spatialReference:D}=z;z=[z.x,z.y];let x=Number.POSITIVE_INFINITY,u=0,b=0;const a=[0,0];y="extent"===y.type?[[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]]:y.rings;for(const p of y)for(y=0;y<p.length-
1;y++){f.projectPointOnLine(a,z,p,y);const g=h.distance(z,a);g<x&&(x=g,u=a[0],b=a[1])}return{coordinate:new w({x:u,y:b,spatialReference:D}),distance:x}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D,x){var u;h=u=function(b){function a(){var g=p.apply(this,arguments);g.enabled=!0;g.rotationEnabled=!0;return g}r._inherits(a,b);var p=r._createSuper(a);b=a.prototype;b.constrain=function(g,c){if(!this.enabled||!c)return g;this.rotationEnabled||(g.rotation=c.rotation);return g};b.clone=function(){return new u({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return r._createClass(a)}(f.NumericIdentifiableMixin(h));n.__decorate([w.property()],h.prototype,"enabled",
void 0);n.__decorate([w.property()],h.prototype,"rotationEnabled",void 0);return h=u=n.__decorate([x.subclass("esri.views.2d.constraints.RotationConstraint")],h)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D,x){var u;h=u=function(b){function a(g){g=p.call(this,g);g._lodByScale={};g._scales=[];g.effectiveLODs=null;g.effectiveMinZoom=-1;g.effectiveMaxZoom=-1;g.effectiveMinScale=0;g.effectiveMaxScale=0;g.lods=null;g.minZoom=-1;g.maxZoom=-1;g.minScale=0;g.maxScale=0;g.snapToZoom=!0;return g}r._inherits(a,b);var p=r._createSuper(a);b=a.prototype;b.initialize=function(){let {lods:g,minScale:c,maxScale:e,minZoom:k,maxZoom:l}=this,m=-1,v=-1,E=!1,A=!1;0!==c&&0!==e&&c<e&&([c,e]=[e,c]);
if(g&&g.length){g=g.map(q=>q.clone());g.sort((q,d)=>d.scale-q.scale);g.forEach((q,d)=>q.level=d);for(const q of g){!E&&0<c&&c>=q.scale&&(m=q.level,E=!0);!A&&0<e&&e>=q.scale&&(v=t?t.level:-1,A=!0);var t=q}-1===k&&(k=0===c?0:m);-1===l&&(l=0===e?g.length-1:v);k=Math.max(k,0);k=Math.min(k,g.length-1);l=Math.max(l,0);l=Math.min(l,g.length-1);k>l&&([k,l]=[l,k]);c=g[k].scale;e=g[l].scale;g.splice(0,k);g.splice(l-k+1,g.length);g.forEach((q,d)=>{this._lodByScale[q.scale]=q;this._scales[d]=q.scale});this._set("effectiveLODs",
g);this._set("effectiveMinZoom",k);this._set("effectiveMaxZoom",l)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",e)};b.constrain=function(g,c){if(c&&g.scale===c.scale)return g;var e=this.effectiveMinScale;const k=this.effectiveMaxScale,l=g.targetGeometry,m=c&&c.targetGeometry,v=0!==e&&g.scale>e;if(0!==k&&g.scale<k||v)e=v?e:k,c&&m&&(c=(e-c.scale)/(g.scale-c.scale),l.x=m.x+(l.x-m.x)*c,l.y=m.y+(l.y-m.y)*c),g.scale=e;this.snapToZoom&&this.effectiveLODs&&(g.scale=this._getClosestScale(g.scale));
return g};b.fit=function(g){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(g,null);const c=this.scaleToZoom(g.scale);g.scale=this.zoomToScale(.99<Math.abs(c-Math.floor(c))?Math.round(c):Math.floor(c));return g};b.zoomToScale=function(g){if(!this.effectiveLODs)return 0;g-=this.effectiveMinZoom;g=Math.max(0,g);const c=this._scales;if(0>=g)return c[0];if(g>=c.length)return c[c.length-1];const e=Math.round(g);return c[e]+(e-g)*(c[Math.round(g-.5)]-c[e])};b.scaleToZoom=function(g){if(!this.effectiveLODs)return-1;
const c=this._scales;let e,k;if(g>=c[0])return this.effectiveMinZoom;if(g<=c[c.length-1])return this.effectiveMaxZoom;for(let l=0;l<c.length-1;l++){e=c[l];k=c[l+1];if(k===g)return l+this.effectiveMinZoom+1;if(e>g&&k<g)return l+this.effectiveMinZoom+1-(g-k)/(e-k)}return-1};b.snapToClosestScale=function(g){if(!this.effectiveLODs)return g;g=this.scaleToZoom(g);return this.zoomToScale(Math.round(g))};b.snapToNextScale=function(g,c=.5){if(!this.effectiveLODs)return g*c;g=Math.round(this.scaleToZoom(g));
return this.zoomToScale(g+1)};b.snapToPreviousScale=function(g,c=2){if(!this.effectiveLODs)return g*c;g=Math.round(this.scaleToZoom(g));return this.zoomToScale(g-1)};b.clone=function(){return new u({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};b._getClosestScale=function(g){if(this._lodByScale[g])return this._lodByScale[g].scale;g=this._scales.reduce((c,e)=>Math.abs(e-g)<=Math.abs(c-g)?e:c,this._scales[0]);return this._lodByScale[g].scale};
return r._createClass(a)}(f.NumericIdentifiableMixin(h));n.__decorate([w.property({readOnly:!0})],h.prototype,"effectiveLODs",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"effectiveMinZoom",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"effectiveMaxZoom",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"effectiveMinScale",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"effectiveMaxScale",void 0);n.__decorate([w.property()],h.prototype,"lods",
void 0);n.__decorate([w.property()],h.prototype,"minZoom",void 0);n.__decorate([w.property()],h.prototype,"maxZoom",void 0);n.__decorate([w.property()],h.prototype,"minScale",void 0);n.__decorate([w.property()],h.prototype,"maxScale",void 0);n.__decorate([w.property()],h.prototype,"snapToZoom",void 0);return h=u=n.__decorate([x.subclass("esri.views.2d.constraints.ZoomConstraint")],h)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p){var g,c;let e=g=function(k){function l(){var v=m.apply(this,arguments);v.left=0;v.top=0;v.right=0;v.bottom=0;return v}r._inherits(l,k);var m=r._createSuper(l);l.prototype.clone=function(){return new g({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return r._createClass(l)}(h);n.__decorate([w.property()],e.prototype,"left",void 0);n.__decorate([w.property()],e.prototype,"top",void 0);n.__decorate([w.property()],e.prototype,"right",void 0);n.__decorate([w.property()],
e.prototype,"bottom",void 0);e=g=n.__decorate([x.subclass("esri.views.2d.PaddedViewState.Padding")],e);h=c=function(k){function l(...v){var E=m.call(this,...v);E.paddedViewState=new p;E._updateContent=(()=>{const A=b.create();return()=>{var t=E._get("size");const q=E._get("padding");if(t&&q){var d=E.paddedViewState;u.set(A,q.left+q.right,q.top+q.bottom);u.subtract(A,t,A);u.copy(d.size,A);if(t=d.viewpoint)E.viewpoint=t}}})();E.addHandles(f.watch(()=>[E.size,E.padding],()=>E._updateContent(),f.sync));
E.padding=new e;E.size=[0,0];return E}r._inherits(l,k);var m=r._createSuper(l);l.prototype.clone=function(){return new c({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};r._createClass(l,[{key:"padding",set:function(v){this._set("padding",v||new e)}},{key:"viewpoint",set:function(v){if(v){const E=v.clone();this.paddedViewState.viewpoint=v;a.addPadding(E,v,this._get("size"),this._get("padding"));v=this._viewpoint2D;
const A=E.targetGeometry;v.center[0]=A.x;v.center[1]=A.y;v.rotation=E.rotation;v.scale=E.scale;v.spatialReference=A.spatialReference;this._update()}}}]);return l}(p);n.__decorate([w.property()],h.prototype,"paddedViewState",void 0);n.__decorate([w.property({type:e})],h.prototype,"padding",null);n.__decorate([w.property()],h.prototype,"viewpoint",null);return h=c=n.__decorate([x.subclass("esri.views.2d.PaddedViewState")],h)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t){var q;const d=[0,0];h=q=function(B){function I(N){N=R.call(this,N);N._viewpoint2D={center:m.create(),rotation:0,scale:0,spatialReference:void 0};N.center=[0,0];N.extent=new A;N.id=0;N.inverseTransform=g.create();N.resolution=0;N.rotation=0;N.scale=0;N.transform=g.create();N.transformNoRotation=g.create();N.displayMat3=e.create();N.displayViewMat3=e.create();N.viewMat3=e.create();N.viewMat2d=p.create();N.worldScreenWidth=0;N.size=[0,0];return N}
r._inherits(I,B);var R=r._createSuper(I);B=I.prototype;B.copy=function(N){const K=this.size,X=this.viewpoint;X&&K?(this.viewpoint=E.copy(X,N.viewpoint),this._set("size",k.copy(K,N.size))):(this.viewpoint=N.viewpoint.clone(),this._set("size",[N.size[0],N.size[1]]));this._set("pixelRatio",N.pixelRatio);return this};B.clone=function(){return new q({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};B.toMap=function(N,K,X){if(v.isVec2(K))return k.transformMat2d(N,K,this.inverseTransform);
d[0]=K;d[1]=X;return k.transformMat2d(N,d,this.inverseTransform)};B.toScreen=function(N,K,X){if(v.isVec2(K))return k.transformMat2d(N,K,this.transform);d[0]=K;d[1]=X;return k.transformMat2d(N,d,this.transform)};B.toScreenNoRotation=function(N,K,X){if(v.isVec2(K))return k.transformMat2d(N,K,this.transformNoRotation);d[0]=K;d[1]=X;return k.transformMat2d(N,d,this.transformNoRotation)};B.getScreenTransform=function(N,K){const {center:X}=this._viewpoint2D,Y=this._get("pixelRatio")||1,S=this._get("size");
E.getMatrix(N,X,S,K,0,Y);return N};B._update=function(){const {center:N,spatialReference:K,scale:X,rotation:Y}=this._viewpoint2D,S=this._get("pixelRatio")||1,U=this._get("size"),J=new f({targetGeometry:new t(N[0],N[1],K),scale:X,rotation:Y});this._set("viewpoint",J);if(U&&K&&X){this.resolution=E.getResolution(J);this.rotation=Y;this.scale=X;this.spatialReference=K;k.copy(this.center,N);c.set(this.displayMat3,0!==U[0]?2/U[0]:0,0,0,0,0!==U[1]?-2/U[1]:0,0,-1,1,1);var T=c.identity(this.viewMat3),F=l.fromValues(U[0]/
2,U[1]/2),L=l.fromValues(-U[0]/2,-U[1]/2),V=b.toRadian(Y);c.translate(T,T,F);c.rotate(T,T,V);c.translate(T,T,L);c.multiply(this.displayViewMat3,this.displayMat3,T);T=a.fromTranslation(this.viewMat2d,F);a.rotate(T,T,V);a.translate(T,T,L);E.getExtent(this.extent,J,U);E.getTransform(this.transform,J,U,S);a.invert(this.inverseTransform,this.transform);E.getTransformNoRotation(this.transformNoRotation,J,U,S);this.worldScreenWidth=E.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",
this.id+1);return this}};r._createClass(I,[{key:"pixelRatio",set:function(N){this._set("pixelRatio",N);this._update()}},{key:"size",set:function(N){this._set("size",N);this._update()}},{key:"viewpoint",set:function(N){if(N){const K=this._viewpoint2D,X=N.targetGeometry;K.center[0]=X.x;K.center[1]=X.y;K.rotation=N.rotation;K.scale=N.scale;K.spatialReference=X.spatialReference}this._update()}}]);return I}(w.JSONSupport);n.__decorate([y.property({readOnly:!0})],h.prototype,"id",void 0);n.__decorate([y.property({value:1,
json:{write:!0}})],h.prototype,"pixelRatio",null);n.__decorate([y.property({json:{write:!0}})],h.prototype,"size",null);n.__decorate([y.property()],h.prototype,"spatialReference",void 0);n.__decorate([y.property({type:f,json:{write:!0}})],h.prototype,"viewpoint",null);return h=q=n.__decorate([u.subclass("esri.views.2d.ViewState")],h)})},"esri/chunks/mat3f32":function(){define(["exports"],function(r){function n(){const z=new Float32Array(9);z[0]=1;z[4]=1;z[8]=1;return z}function h(z){const D=new Float32Array(9);
D[0]=z[0];D[1]=z[1];D[2]=z[2];D[3]=z[3];D[4]=z[4];D[5]=z[5];D[6]=z[6];D[7]=z[7];D[8]=z[8];return D}function f(z,D,x,u,b,a,p,g,c){const e=new Float32Array(9);e[0]=z;e[1]=D;e[2]=x;e[3]=u;e[4]=b;e[5]=a;e[6]=p;e[7]=g;e[8]=c;return e}function w(z,D){return new Float32Array(z,D,9)}const y=Object.freeze(Object.defineProperty({__proto__:null,clone:h,create:n,createView:w,fromValues:f},Symbol.toStringTag,{value:"Module"}));r.clone=h;r.create=n;r.createView=w;r.fromValues=f;r.mat3f32=y})},"esri/chunks/vec2f32":function(){define(["exports"],
function(r){function n(){return new Float32Array(2)}function h(c){const e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e}function f(c,e){const k=new Float32Array(2);k[0]=c;k[1]=e;return k}function w(c,e){return new Float32Array(c,e,2)}function y(){return n()}function z(){return f(1,1)}function D(){return f(1,0)}function x(){return f(0,1)}const u=n(),b=z(),a=D(),p=x(),g=Object.freeze(Object.defineProperty({__proto__:null,ONES:b,UNIT_X:a,UNIT_Y:p,ZEROS:u,clone:h,create:n,createView:w,fromValues:f,
ones:z,unitX:D,unitY:x,zeros:y},Symbol.toStringTag,{value:"Module"}));r.ONES=b;r.UNIT_X=a;r.UNIT_Y=p;r.ZEROS=u;r.clone=h;r.create=n;r.createView=w;r.fromValues=f;r.ones=z;r.unitX=D;r.unitY=x;r.vec2f32=g;r.zeros=y})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(r){function n(f){return f instanceof Float32Array&&2<=f.length}function h(f){return Array.isArray(f)&&2<=f.length}r.isVec2=function(f){return n(f)||h(f)};r.isVec2f32=n;r.isVec2f64=h;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),function(r,n,h,f,w,y,z,D,x,u,b){function a(k,l){k.length=
0;l.forEach(m=>k.push(m));return k}const p=new Set,g=[],c=new Map,e=[0,0];h=function(k){function l(v){v=m.call(this,v);v._keyToItem=new Map;v.concurrency=6;v.strategy="scale-first";v.tileInfoView=null;return v}r._inherits(l,k);var m=r._createSuper(l);k=l.prototype;k.initialize=function(){const {concurrency:v,process:E}=this;this._queue=new b.QueueProcessor({concurrency:v,process:(A,t)=>{A=this._keyToItem.get(A);return E(A,{signal:t})},peeker:A=>A.values().next().value})};k.destroy=function(){this.clear();
this._queue=f.destroyMaybe(this._queue)};k.abort=function(v){this._queue.abort("string"===typeof v?v:v.id)};k.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};k.has=function(v){return"string"===typeof v?this._keyToItem.has(v):this._keyToItem.has(v.id)};k.isOngoing=function(v){v="string"===typeof v?v:v.id;return this.has(v)&&this._queue.isOngoing(v)};k.pause=function(){this._queue.pause()};k.push=function(v,E){const A=v.key.id+"-"+E;if(this.has(A))return this.get(A);
E=this._queue.push(A);const t=()=>{this._keyToItem.delete(A);this.notifyChange("updating")};this._keyToItem.set(A,v);E.then(t,t);this.notifyChange("updating");return E};k.reset=function(){this._queue.reset();this.notifyChange("updating")};k.resume=function(){this._queue.resume()};k._peekByScaleFirst=function(v){if(!this.state)return v.values().next().value;const E=this.tileInfoView;let A=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY;v.forEach(R=>{R=this._keyToItem.get(R);const N=this.tileInfoView.getTileScale(R.key);
c.has(N)||(c.set(N,[]),A=Math.max(N,A),t=Math.min(N,t));c.get(N).push(R.key);p.add(N)});let q=this.state.scale;c.has(q)||(a(g,p),g.sort((R,N)=>R-N),q=g.reduce((R,N)=>Math.abs(N-q)<Math.abs(R-q)?N:R,g[0]));q=Math.min(q,A);q=Math.max(q,t);v=c.get(q);const d=E.getClosestInfoForScale(q),B=d.getColumnForX(this.state.center[0]),I=d.getRowForY(this.state.center[1]);v.sort((R,N)=>{const K=d.denormalizeCol(R.col,R.world),X=d.denormalizeCol(N.col,N.world);return Math.sqrt((B-K)*(B-K)+(I-R.row)*(I-R.row))-Math.sqrt((B-
X)*(B-X)+(I-N.row)*(I-N.row))});p.clear();c.clear();return v[0].id};k._peekByCenterFirst=function(v){if(!this.state)return v.values().next().value;const E=this.tileInfoView,A=this.state.center;let t=Number.POSITIVE_INFINITY,q;v.forEach(d=>{d=this._keyToItem.get(d);E.getTileCoords(e,d.key);const B=u.distance(e,A);B<t&&(t=B,q=d.key)});return q.id};r._createClass(l,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return l}(h);n.__decorate([w.property({constructOnly:!0})],h.prototype,"concurrency",void 0);n.__decorate([w.property({constructOnly:!0})],h.prototype,"process",void 0);n.__decorate([w.property()],h.prototype,"state",void 0);n.__decorate([w.property({constructOnly:!0})],h.prototype,"strategy",void 0);n.__decorate([w.property({constructOnly:!0})],h.prototype,"tileInfoView",void 0);n.__decorate([w.property({readOnly:!0})],
h.prototype,"updating",null);return h=n.__decorate([x.subclass("esri.views.2d.tiling.PagedTileQueue")],h)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(r,n,h,f,w,y){let z=n._createClass(function(x,u){this.item=x;this.controller=u;this.promise=null}),D=function(){function x(b){this._deferreds=new Map;this._controllers=new Map;this._processingItems=
new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;b.concurrency&&(this.concurrency=b.concurrency);this._queue=new w(b.peeker);this.process=b.process;const a=b.scheduler;b.priority&&h.isSome(a)&&(this._task=a.registerTask(b.priority,this))}var u=x.prototype;u.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};u.abort=function(b){(b=this._controllers.get(b))&&b.abort()};u.clear=function(){this._queue.clear();
const b=[];this._controllers.forEach(a=>b.push(a));this._controllers.clear();b.forEach(a=>a.abort());this._processingItems.clear();this._cancelNext()};u.forEach=function(b){this._deferreds.forEach((a,p)=>b(p))};u.get=function(b){return(b=this._deferreds.get(b))?b.promise:void 0};u.isOngoing=function(b){return this._processingItems.has(b)};u.has=function(b){return this._deferreds.has(b)};u.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};u.push=function(b,a){const p=this.get(b);
if(p)return p;const g=new AbortController;let c=null;a&&(c=f.onAbort(a,()=>g.abort()));const e=()=>{k.remove();h.isSome(c)&&c.remove();this._deferreds.delete(b);this._controllers.delete(b);this._queue.remove(b);this._processingItems.delete(b);this._scheduleNext()},k=f.onAbortOrThrow(g.signal,()=>{const m=this._processingItems.get(b);m&&m.controller.abort();e();l.reject(f.createAbortError())}),l=f.createDeferred();this._deferreds.set(b,l);this._controllers.set(b,g);l.promise.then(e,e);this._queue.push(b);
this._scheduleNext();return l.promise};u.last=function(){return this._queue.last()};u.peek=function(){return this._queue.peek()};u.popLast=function(){return this._queue.popLast()};u.reset=function(){const b=[];this._processingItems.forEach(a=>b.push(a));this._processingItems.clear();for(const a of b)this._queue.push(a.item),a.controller.abort();this._scheduleNext()};u.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};u.takeAll=function(){const b=[];for(;this._queue.length;)b.push(this._queue.pop());
this.clear();return b};u.runTask=function(b){for(;!b.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),b.madeProgress()};u._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=y.schedule(()=>{this._schedule=null;this._next()}))};u._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};u._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};u._processResult=function(b,a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).resolve(a))};u._processError=function(b,a){this._canProcessFulfillment(b)&&(this._scheduleNext(),this._deferreds.get(b.item).reject(a))};u._canProcessFulfillment=function(b){return this._deferreds.get(b.item)&&this._processingItems.get(b.item)===b?!0:!1};u._process=function(b){if(!h.isNone(b)){var a=new AbortController,p=new z(b,a);this._processingItems.set(b,p);try{var g=
this.process(b,a.signal)}catch(c){this._processError(p,c)}f.isPromiseLike(g)?(p.promise=g,g.then(c=>this._processResult(p,c),c=>this._processError(p,c))):this._processResult(p,g)}};n._createClass(x,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:b=>this.runTask(b)}}}]);return x}();r.QueueProcessor=D;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(r,n,h,f,w,y){const z=new w("0/0/0/0");let D=function(){function u(a,p,g,c,e,k,l,m){this.x=a;this.ymin=p;this.ymax=g;this.invM=c;this.leftAdjust=e;this.rightAdjust=k;this.leftBound=l;this.rightBound=m}u.create=function(a,p){a[1]>p[1]&&([a,p]=[p,a]);const [g,
c]=a,[e,k]=p;a=e-g;p=k-c;p=0!==p?a/p:0;const l=(Math.ceil(c)-c)*p,m=(Math.floor(c)-c)*p;return new u(g,Math.floor(c),Math.ceil(k),p,0>a?l:m,0>a?m:l,0>a?e:g,0>a?g:e)};var b=u.prototype;b.incrRow=function(){this.x+=this.invM};b.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};b.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return r._createClass(u)}();const x=[[0,0],[0,0],[0,0],[0,0]];return function(){function u(a,p=null){this.tileInfo=
a;this.fullExtent=p;this.scales=[];this._infoByScale={};this._infoByLevel={};const g=a.lods.slice();g.sort((e,k)=>k.scale-e.scale);const c=this._lodInfos=g.map(e=>h.create(a,e,p));g.forEach((e,k)=>{this._infoByLevel[e.level]=c[k];this._infoByScale[e.scale]=c[k];this.scales[k]=e.scale},this);this._wrap=a.isWrappable}var b=u.prototype;b.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};b.getTileBounds=function(a,p,g=!1){z.set(p);return(p=this._infoByLevel[z.level])?p.getTileBounds(a,
z,g):a};b.getTileCoords=function(a,p,g=!1){z.set(p);return(p=this._infoByLevel[z.level])?p.getTileCoords(a,z,g):a};b.getTileCoverage=function(a,p=192,g="closest"){g="closest"===g?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);const c=f.pool.acquire(g),e=this._wrap;var k=Infinity;let l=-Infinity;const m=c.spans;x[0][0]=x[0][1]=x[1][1]=x[3][0]=-p;x[1][0]=x[2][0]=a.size[0]+p;x[2][1]=x[3][1]=a.size[1]+p;for(v of x)a.toMap(v,v),v[0]=g.getColumnForX(v[0]),v[1]=g.getRowForY(v[1]);
a=[];var v=3;for(p=0;4>p;p++)x[p][1]===x[v][1]?v=p:(v=D.create(x[p],x[v]),k=Math.min(v.ymin,k),l=Math.max(v.ymax,l),void 0===a[v.ymin]&&(a[v.ymin]=[]),a[v.ymin].push(v),v=p);if(null==k||null==l||100<l-k)return null;for(p=[];k<l;){null!=a[k]&&(p=p.concat(a[k]));v=Infinity;var E=-Infinity;for(var A=p.length-1;0<=A;A--){var t=p[A];v=Math.min(v,t.getLeftCol());E=Math.max(E,t.getRightCol())}v=Math.floor(v);E=Math.floor(E);if(k>=g.first[1]&&k<=g.last[1])if(e)if(g.size[0]<g.worldSize[0])for(A=Math.floor(E/
g.worldSize[0]),t=Math.floor(v/g.worldSize[0]);t<=A;t++)m.push(new y(k,Math.max(g.getFirstColumnForWorld(t),v),Math.min(g.getLastColumnForWorld(t),E)));else m.push(new y(k,v,E));else v>g.last[0]||E<g.first[0]||(v=Math.max(v,g.first[0]),E=Math.min(E,g.last[0]),m.push(new y(k,v,E)));k+=1;for(v=p.length-1;0<=v;v--)E=p[v],E.ymax>=k?E.incrRow():p.splice(v,1)}return c};b.getTileParentId=function(a){z.set(a);a=this._lodInfos.indexOf(this._infoByLevel[z.level])-1;if(0>a)return null;this._getTileIdAtLOD(z,
this._lodInfos[a],z);return z.id};b.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};b.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};b.intersects=function(a,p){z.set(p);p=this._infoByLevel[z.level];const g=a.lodInfo;if(g.resolution>p.resolution){this._getTileIdAtLOD(z,g,z);var c=g.denormalizeCol(z.col,z.world);for(var e of a.spans)if(e.row===z.row&&e.colFrom<=c&&e.colTo>=c)return!0}if(g.resolution<p.resolution){const [l,
m,v,E]=a.spans.reduce((A,t)=>{A[0]=Math.min(A[0],t.row);A[1]=Math.max(A[1],t.row);A[2]=Math.min(A[2],t.colFrom);A[3]=Math.max(A[3],t.colTo);return A},[Infinity,-Infinity,Infinity,-Infinity]);c=p.denormalizeCol(z.col,z.world);a=g.getColumnForX(p.getXForColumn(c));e=g.getRowForY(p.getYForRow(z.row));c=g.getColumnForX(p.getXForColumn(c+1))-1;p=g.getRowForY(p.getYForRow(z.row+1))-1;return!(a>E||c<v||e>m||p<l)}const k=g.denormalizeCol(z.col,z.world);return a.spans.some(l=>l.row===z.row&&l.colFrom<=k&&
l.colTo>=k)};b.normalizeBounds=function(a,p,g){a[0]=p[0];a[1]=p[1];a[2]=p[2];a[3]=p[3];this._wrap&&(p=n.getInfo(this.tileInfo.spatialReference),g=-g*(p.valid[1]-p.valid[0]),a[0]+=g,a[2]+=g);return a};b.getSmallestInfoForScale=function(a){const p=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>p[0])return this._infoByScale[p[0]];for(let g=1;g<p.length-1;g++)if(a>p[g]+1E-6)return this._infoByScale[p[g-1]];return this._infoByScale[p[p.length-1]]};b.getClosestInfoForScale=function(a){const p=
this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=p.reduce((g,c)=>Math.abs(c-a)<Math.abs(g-a)?c:g,p[0]);return this._infoByScale[a]};b.scaleToLevel=function(a){const p=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(let g=p.length-1;0<=g;g--)if(a<p[g])return g===p.length-1?this._infoByScale[p[p.length-1]].level:this._infoByScale[p[g]].level+(p[g]-a)/(p[g]-p[g+1]);return this._infoByScale[p[0]].level};b.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};
b._getTileIdAtLOD=function(a,p,g){const c=this._infoByLevel[g.level];a.set(g);if(p.resolution<c.resolution)return null;if(p.resolution===c.resolution)return a;a.level=p.level;a.col=Math.floor(g.col*c.resolution/p.resolution+.01);a.row=Math.floor(g.row*c.resolution/p.resolution+.01);return a};r._createClass(u,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return u}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../core/maybe","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(r,n,h,f){function w(z,D,x){z[0]=D;z[1]=x;return z}const y=new f("0/0/0/0");return function(){function z(x,u,b,a,p,g,c,e,k,l,m,v){this.level=x;this.resolution=u;this.scale=b;this.origin=a;this.first=p;this.last=g;this.size=c;this.norm=e;this.worldStart=k;this.worldEnd=l;this.worldSize=m;this.wrap=v}z.create=function(x,u,b=null){var a=h.getInfo(x.spatialReference);const p=u.origin||[x.origin.x,x.origin.y],
g=[x.size[0]*u.resolution,x.size[1]*u.resolution],c=[-Infinity,-Infinity],e=[Infinity,Infinity],k=[Infinity,Infinity];n.isSome(b)&&(w(c,Math.max(0,Math.floor((b.xmin-p[0])/g[0])),Math.max(0,Math.floor((p[1]-b.ymax)/g[1]))),w(e,Math.max(0,Math.floor((b.xmax-p[0])/g[0])),Math.max(0,Math.floor((p[1]-b.ymin)/g[1]))),w(k,e[0]-c[0]+1,e[1]-c[1]+1));const {cols:l,rows:m}=u;!b&&l&&m&&(w(c,l[0],m[0]),w(e,l[1],m[1]),w(k,l[1]-l[0]+1,m[1]-m[0]+1));let v;x.isWrappable?(x=[Math.ceil(Math.round((a.valid[1]-a.valid[0])/
u.resolution)/x.size[0]),k[1]],a=[Math.floor((a.origin[0]-p[0])/g[0]),c[1]],b=[x[0]+a[0]-1,e[1]],v=!0):(a=c,b=e,x=k,v=!1);return new z(u.level,u.resolution,u.scale,p,c,e,k,g,a,b,x,v)};var D=z.prototype;D.normalizeCol=function(x){if(!this.wrap)return x;const u=this.worldSize[0];return 0>x?u-1-Math.abs((x+1)%u):x%u};D.denormalizeCol=function(x,u){return this.wrap?this.worldSize[0]*u+x:x};D.getWorldForColumn=function(x){return this.wrap?Math.floor(x/this.worldSize[0]):0};D.getFirstColumnForWorld=function(x){return x*
this.worldSize[0]+this.first[0]};D.getLastColumnForWorld=function(x){return x*this.worldSize[0]+this.first[0]+this.size[0]-1};D.getColumnForX=function(x){return(x-this.origin[0])/this.norm[0]};D.getXForColumn=function(x){return this.origin[0]+x*this.norm[0]};D.getRowForY=function(x){return(this.origin[1]-x)/this.norm[1]};D.getYForRow=function(x){return this.origin[1]-x*this.norm[1]};D.getTileBounds=function(x,u,b=!1){y.set(u);var a=b?y.col:this.denormalizeCol(y.col,y.world),p=y.row;u=this.getXForColumn(a);
b=this.getYForRow(p+1);a=this.getXForColumn(a+1);p=this.getYForRow(p);x[0]=u;x[1]=b;x[2]=a;x[3]=p;return x};D.getTileCoords=function(x,u,b=!1){y.set(u);u=b?y.col:this.denormalizeCol(y.col,y.world);Array.isArray(x)?w(x,this.getXForColumn(u),this.getYForRow(y.row)):(x.x=this.getXForColumn(u),x.y=this.getYForRow(y.row));return x};return r._createClass(z)}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(r,n){let h=
function(){function f(y,z,D,x){this.set(y,z,D,x)}f.getId=function(y,z,D,x){return"object"===typeof y?`${y.level}/${y.row}/${y.col}/${y.world}`:`${y}/${z}/${D}/${x}`};var w=f.prototype;w.acquire=function(y,z,D,x){this.set(y,z,D,x)};w.contains=function(y){const z=y.level-this.level;return 0<=z&&this.row===y.row>>z&&this.col===y.col>>z&&this.world===y.world};w.equals=function(y){return this.level===y.level&&this.row===y.row&&this.col===y.col&&this.world===y.world};w.clone=function(){return new f(this)};
w.release=function(){this.world=this.col=this.row=this.level=0};w.set=function(y,z,D,x){if(null==y)this.world=this.col=this.row=this.level=0;else if("object"===typeof y)this.level=y.level||0,this.row=y.row||0,this.col=y.col||0,this.world=y.world||0;else if("string"===typeof y){const [u,b,a,p]=y.split("/");this.level=parseFloat(u);this.row=parseFloat(b);this.col=parseFloat(a);this.world=parseFloat(p)}else this.level=+y,this.row=+z,this.col=+D,this.world=+x||0;return this};w.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};
w.getParentKey=function(){return 0>=this.level?null:new f(this.level-1,this.row>>1,this.col>>1,this.world)};w.getChildKeys=function(){const y=this.level+1,z=this.row<<1,D=this.col<<1,x=this.world;return[new f(y,z,D,x),new f(y,z,D+1,x),new f(y,z+1,D,x),new f(y,z+1,D+1,x)]};w.compareRowMajor=function(y){return this.row<y.row?-1:this.row>y.row?1:this.col<y.col?-1:this.col>y.col?1:0};r._createClass(f,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(y){this.set(y)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return f}();h.pool=new n(h,null,null,25,50);return h})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(r,n){let h=function(){function f(){this.spans=[]}var w=f.prototype;w.acquire=function(y){this.lodInfo=y};w.release=function(){this.lodInfo=null;this.spans.length=0};w.forEach=function(y,z){const {spans:D,
lodInfo:x}=this,{level:u}=x;if(0!==D.length)for(const {row:b,colFrom:a,colTo:p}of D)for(let g=a;g<=p;g++)y.call(z,u,b,x.normalizeCol(g),x.getWorldForColumn(g))};return r._createClass(f)}();h.pool=new n(h);return h})},"esri/views/2d/tiling/TileSpan":function(){define(["../../../chunks/_rollupPluginBabelHelpers"],function(r){return r._createClass(function(n,h,f){this.row=n;this.colFrom=h;this.colTo=f})})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b){function a(k,l){k.length=0;l.forEach(m=>k.push(m));return k}const p=new Set,g=[],c=new Map,e=[0,0];h=function(k){function l(v){v=m.call(this,v);v._keyToItem=new Map;v.concurrency=6;v.strategy="scale-first";v.tileInfoView=null;return v}r._inherits(l,k);var m=r._createSuper(l);k=l.prototype;k.initialize=function(){const {concurrency:v,process:E,strategy:A}=this;this._queue=new b.QueueProcessor({concurrency:v,process:(t,q)=>{t=this._keyToItem.get(t);return E(t,{signal:q})},
peeker:"scale-first"===A?t=>this._peekByScaleFirst(t):t=>this._peekByCenterFirst(t)})};k.destroy=function(){this.clear();this._queue=f.destroyMaybe(this._queue)};k.abort=function(v){this._queue.abort("string"===typeof v?v:v.id)};k.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};k.has=function(v){return"string"===typeof v?this._keyToItem.has(v):this._keyToItem.has(v.id)};k.isOngoing=function(v){v="string"===typeof v?v:v.id;return this.has(v)&&this._queue.isOngoing(v)};
k.pause=function(){this._queue.pause()};k.push=function(v){const E=v.key.id;if(this._queue.has(E))return this._queue.get(E);const A=this._queue.push(E),t=()=>{this._keyToItem.delete(E);this.notifyChange("updating")};this._keyToItem.set(E,v);A.then(t,t);this.notifyChange("updating");return A};k.reset=function(){this._queue.reset()};k.resume=function(){this._queue.resume()};k._peekByScaleFirst=function(v){if(!this.state)return v.values().next().value;const E=this.tileInfoView;let A=Number.NEGATIVE_INFINITY,
t=Number.POSITIVE_INFINITY;v.forEach(R=>{R=this._keyToItem.get(R);const N=this.tileInfoView.getTileScale(R.key);c.has(N)||(c.set(N,[]),A=Math.max(N,A),t=Math.min(N,t));c.get(N).push(R.key);p.add(N)});let q=this.state.scale;c.has(q)||(a(g,p),g.sort((R,N)=>R-N),q=g.reduce((R,N)=>Math.abs(N-q)<Math.abs(R-q)?N:R,g[0]));q=Math.min(q,A);q=Math.max(q,t);v=c.get(q);const d=E.getClosestInfoForScale(q),B=d.getColumnForX(this.state.center[0]),I=d.getRowForY(this.state.center[1]);v.sort((R,N)=>{const K=d.denormalizeCol(R.col,
R.world),X=d.denormalizeCol(N.col,N.world);return Math.sqrt((B-K)*(B-K)+(I-R.row)*(I-R.row))-Math.sqrt((B-X)*(B-X)+(I-N.row)*(I-N.row))});p.clear();c.clear();return v[0].id};k._peekByCenterFirst=function(v){if(!this.state)return v.values().next().value;const E=this.tileInfoView,A=this.state.center;let t=Number.POSITIVE_INFINITY,q;v.forEach(d=>{d=this._keyToItem.get(d);E.getTileCoords(e,d.key);const B=u.distance(e,A);B<t&&(t=B,q=d.key)});return q.id};r._createClass(l,[{key:"length",get:function(){return this._queue?
this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return l}(h);n.__decorate([w.property({constructOnly:!0})],h.prototype,"concurrency",void 0);n.__decorate([w.property({constructOnly:!0})],h.prototype,"process",void 0);n.__decorate([w.property()],h.prototype,"state",void 0);n.__decorate([w.property({constructOnly:!0})],h.prototype,"strategy",void 0);n.__decorate([w.property({constructOnly:!0})],
h.prototype,"tileInfoView",void 0);n.__decorate([w.property({readOnly:!0})],h.prototype,"updating",null);return h=n.__decorate([x.subclass("esri.views.2d.tiling.TileQueue")],h)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(r,n,h,f,w){const y=new w(0,0,0,0),z=new Map,D=[],x=[];return function(){function u(a){this._previousScale=Number.POSITIVE_INFINITY;
this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new h(a.cacheSize,this.tileInfoView,p=>{this.releaseTile(p)}))}
var b=u.prototype;b.destroy=function(){this.tileIndex.clear()};b.update=function(a){const {resampling:p,tileIndex:g}=this,c=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);x.length=0;D.length=0;z.clear();if(c){var {minScale:e,maxScale:k}=this.tileInfoView.tileInfo,{spans:l,lodInfo:m}=c,{level:v}=m,{scale:E,center:A,resolution:t}=a.state,q=!a.stationary&&E>this._previousScale;this._previousScale=E;this.tiles.length=0;if(!p&&(E>e||E<k))return this.tiles.length=0,z.clear(),
g.forEach(N=>{this.releaseTile(N)}),g.clear(),x.length=0,D.length=0,z.clear(),f.pool.release(c),!0;g.forEach(N=>N.visible=!0);var d=a=0;if(0<l.length)for(const {row:N,colFrom:K,colTo:X}of l)for(let Y=K;Y<=X;Y++){a++;const S=y.set(v,N,m.normalizeCol(Y),m.getWorldForColumn(Y)).id;if(g.has(S)){var B=g.get(S);B.isReady?(z.set(S,B),d++):q||this._addParentTile(S,z)}else{if(this._tileCache&&this._tileCache.has(S)){if(B=this._tileCache.pop(S),this.tileIndex.set(S,B),B.isReady){z.set(S,B);d++;continue}}else B=
this.acquireTile(y),this.tileIndex.set(S,B);q||this._addParentTile(S,z)}}var I=d===a;g.forEach((N,K)=>{y.set(K);if(!z.has(K)){var X=this.tileInfoView.intersects(c,y),Y="purge"===this.cachePolicy?y.level!==v:y.level>v;!X||!q&&I?!Y&&X||D.push(K):N.isReady?Y&&"purge"===this.cachePolicy&&this._hasReadyAncestor(y,v)?D.push(K):x.push(K):Y&&D.push(K)}});for(var R of x)(a=g.get(R))&&a.isReady&&z.set(R,a);for(const N of D)R=g.get(N),this._tileCache?this._tileCache.add(R):this.releaseTile(R),g.delete(N);z.forEach(N=>
this.tiles.push(N));g.forEach(N=>{z.has(N.key.id)||(N.visible=!1)});this._tileCache&&this._tileCache.prune(v,A,t);f.pool.release(c);z.clear();return I}};b.clear=function(a=!0){const {tileIndex:p}=this;a&&p.forEach(g=>{this.releaseTile(g)});p.clear()};b.updateCacheSize=function(a){this._tileCache&&(this._tileCache.maxSize=a)};b._addParentTile=function(a,p){let g=null;for(;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((g=this.tileIndex.get(a))&&g.isReady){p.has(g.key.id)||
p.set(g.key.id,g);break}}else if(this._tileCache&&this._tileCache.has(a)&&(g=this._tileCache.pop(a),this.tileIndex.set(a,g),g&&g.isReady)){p.has(g.key.id)||p.set(g.key.id,g);break}}};b._hasReadyAncestor=function(a,p){const g=n.create();this.tileInfoView.getTileBounds(g,a,!0);for(const c of this.tileIndex.values())if(c.isReady&&c.key.level>=p&&c.key.level<a.level){const e=n.create();this.tileInfoView.getTileBounds(e,c.key,!0);if(n.contains(e,g))return!0}return!1};return r._createClass(u)}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../chunks/vec2"],function(r,n){return function(){function h(w,y,z){this.maxSize=w;this._tileInfoView=y;this._removedFunc=z;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var f=h.prototype;f.has=function(w){return this._tilePerId.has(w)};f.get=function(w){return this._tilePerId.get(w)};f.pop=function(w){const y=this._tilePerId.get(w);if(y){var z=this._tileKeysPerLevel[y.key.level];this._tilePerId["delete"](w);for(let D=0;D<z.length;D++)if(z[D].id===w){z.splice(D,1);break}y.visible=!0;return y}};
f.add=function(w){w.visible=!1;const y=w.key,z=y.id;this._tilePerId.has(z)||(this._tilePerId.set(z,w),w=y.level,this._tileKeysPerLevel[w]||(this._tileKeysPerLevel[w]=[]),this._tileKeysPerLevel[w].push(y))};f.prune=function(w,y,z){let D=this._tilePerId.size;if(!(D<=this.maxSize)){for(var x=this._tileKeysPerLevel.length-1;D>this.maxSize&&0<=x;)x!==w&&(D=this._pruneAroundCenterTile(D,y,z,x)),x--;D>this.maxSize&&(D=this._pruneAroundCenterTile(D,y,z,w))}};f._pruneAroundCenterTile=function(w,y,z,D){D=this._tileKeysPerLevel[D];
if(!D||0===D.length)return w;const {size:x,origin:u}=this._tileInfoView.tileInfo,b=z*x[0],a=z*x[1],p=[0,0],g=[0,0];for(D.sort((c,e)=>{p[0]=u.x+b*(c.col+.5);p[1]=u.y-a*(c.row+.5);g[0]=u.x+b*(e.col+.5);g[1]=u.y-a*(e.row+.5);return n.squaredDistance(p,y)-n.squaredDistance(g,y)});0<D.length&&(z=D.pop(),this._removeTile(z.id),w--,w!==this.maxSize););return w};f._removeTile=function(w){const y=this._tilePerId.get(w);this._removedFunc&&y&&this._removedFunc(y);this._tilePerId["delete"](w)};return r._createClass(h)}()})},
"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d,B,I,R,N){var K={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},X={zoomIn:["\x3d","+"],zoomOut:["-","_"]},Y={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};h=function(S){function U(){var T=J.apply(this,arguments);T._handles=new f;return T}r._inherits(U,S);var J=r._createSuper(U);S=U.prototype;S.initialize=function(){const T=()=>this.view?.ready;
this._handles.add([y.when(()=>!T(),()=>this._disconnect()),y.when(T,()=>this._connect())])};S.destroy=function(){this._handles=w.destroyMaybe(this._handles);this._disconnect()};S._disconnect=function(){this.view.viewEvents.disconnect();this._inputManager=w.destroyMaybe(this._inputManager)};S._connect=function(){const T=new A.BrowserEventSource(this.view.surface,this.view.input);var F=[new I.ImmediateDoubleClick,new R.PointerClickHoldAndDrag,new N.SingleAndDoubleClick,new B.Drag(this.view.navigation),
new d.DoubleTapDrag];F=new t.InputManager({eventSource:T,recognizers:F});F.installHandlers("prevent-context-menu",[new q.PreventContextMenu],t.ViewEventPriorities.INTERNAL);F.installHandlers("navigation",[new E.PinchRotateAndZoom(this.view),new e.GamepadNavigation(this.view),new v.MouseWheelZoom(this.view),new a.DoubleClickZoom(this.view),new a.DoubleClickZoom(this.view,["Ctrl"]),new g.DragPan(this.view,"primary"),new k.KeyPan(this.view,K),new m.KeyZoom(this.view,X),new l.KeyRotate(this.view,Y),new c.DragRotate(this.view,
"secondary"),new p.DoubleTapDragZoom(this.view,"touch")],t.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(F);this._source=T;this._inputManager=F;y.watch(()=>this.view?.navigation?.browserTouchPanEnabled,L=>{this._source&&(this._source.browserTouchPanningEnabled=!L)},y.initial)};r._createClass(U,[{key:"latestPointerType",get:function(){return this._inputManager?.latestPointerType}},{key:"latestPointerLocation",get:function(){return this._inputManager?.latestPointerLocation}},{key:"multiTouchActive",
get:function(){return this._inputManager?.multiTouchActive??!1}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return U}(h);n.__decorate([z.property()],h.prototype,"view",void 0);n.__decorate([z.property()],h.prototype,"latestPointerType",null);n.__decorate([z.property()],h.prototype,"latestPointerLocation",null);n.__decorate([z.property()],h.prototype,"multiTouchActive",null);return h=n.__decorate([b.subclass("esri.views.2d.input.MapViewInputManager")],h)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(r,n,h,f){h=function(w){function y(D,x){var u=z.call(this,!0);u._view=D;u.registerIncoming("double-click",x,b=>u._handleDoubleClick(b,x));return u}n._inherits(y,w);var z=n._createSuper(y);y.prototype._handleDoubleClick=function(D,x){f.eventMatchesPointerAction(D.data,"primary")&&(D.stopPropagation(),x?this._view.mapViewNavigation.zoomOut([D.data.x,D.data.y]):this._view.mapViewNavigation.zoomIn([D.data.x,
D.data.y]))};return n._createClass(y)}(h.InputHandler);r.DoubleClickZoom=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/support":function(){define(["exports"],function(r){r.eventMatchesMousePointerAction=function(n,h){if("touch"===n.pointerType)return!1;switch(h){case "primary":return 0===n.button;case "secondary":return 2===n.button;case "tertiary":return 1===n.button}};r.eventMatchesPointerAction=function(n,h){switch(h){case "primary":return"touch"===
n.pointerType||0===n.button;case "secondary":return"touch"!==n.pointerType&&2===n.button;case "tertiary":return"touch"!==n.pointerType&&1===n.button}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(r,n,h,f){h=function(w){function y(D,x,u){var b=z.call(this,!0);b.view=D;b.pointerType=x;b.registerIncoming("double-tap-drag",
u,a=>b._handleDoubleTapDrag(a));return b}n._inherits(y,w);var z=n._createSuper(y);y.prototype._handleDoubleTapDrag=function(D){var {data:x}=D,{pointerType:u}=x;if(u===this.pointerType){D.stopPropagation();var {action:b,delta:a}=x;({view:x}=this);({mapViewNavigation:D}=x);switch(b){case "begin":({scale:x}=x);this._currentScale=this._startScale=x;this._previousDelta=a;D.begin();break;case "update":if(this._previousDelta.y===a.y)break;this._previousDelta=a;x=this._startScale*1.015**a.y;D.setViewpointImmediate(x/
this._currentScale);this._currentScale=x;break;case "end":({constraints:u}=x);const {effectiveLODs:p,snapToZoom:g}=u;g&&p?(x=u.snapScale(this._currentScale),x=(0<a.y?Math.max(x,u.snapToPreviousScale(this._startScale)):Math.min(x,u.snapToNextScale(this._startScale)))/this._currentScale,D.zoom(x)):D.end()}}};return n._createClass(y)}(f.InputHandler);r.DoubleTapDragZoom=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(r,n,h,f,w){f=function(y){function z(x,u,b){var a=D.call(this,!0);a.view=x;a.pointerAction=u;a.registerIncoming("drag",b,p=>a._handleDrag(p));a.registerIncoming("pointer-down",()=>a.stopMomentumNavigation());return a}n._inherits(z,y);var D=n._createSuper(z);y=z.prototype;y.onInstall=function(x){n._get(n._getPrototypeOf(z.prototype),"onInstall",
this).call(this,x);this._dragEventSeparator=new h.DragEventSeparator({start:(u,b)=>{this.view.mapViewNavigation.pan.begin(this.view,b.data);b.stopPropagation()},update:(u,b)=>{this.view.mapViewNavigation.pan.update(this.view,b.data);b.stopPropagation()},end:(u,b)=>{this.view.mapViewNavigation.pan.end(this.view,b.data);b.stopPropagation()},condition:(u,b)=>1===u&&w.eventMatchesPointerAction(b.data,this.pointerAction)})};y._handleDrag=function(x){const u=this.view.mapViewNavigation;u.pinch.zoomMomentum||
u.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(x)};y.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return n._createClass(z)}(f.InputHandler);r.DragPan=f;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(r,n){let h=function(){function f(y){this._callbacks=y;this._currentCount=0;this._callbacks.condition||
(this._callbacks.condition=()=>!0)}var w=f.prototype;w.handle=function(y){const z=y.data,D=z.pointers.size;switch(z.action){case "start":this._currentCount=D;this._emitStart(y);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=D;this._emitStart(y);break;case "update":this._emitUpdate(y);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=D;this._emitStart(y);break;case "end":this._emitEnd(y),this._currentCount=0}this._previousEvent=y};
w._emitStart=function(y){this._startEvent=y;this._callbacks.condition?.(this._currentCount,y)&&this._callbacks.start(this._currentCount,y,this._startEvent)};w._emitUpdate=function(y){this._callbacks.condition?.(this._currentCount,y)&&this._callbacks.update(this._currentCount,y,this._startEvent)};w._emitEnd=function(y){this._callbacks.condition?.(this._currentCount,y)&&this._callbacks.end(this._currentCount,y,this._startEvent);this._startEvent=null};return n._createClass(f)}();r.DragEventSeparator=
h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(r,n,h,f,w){f=function(y){function z(x,u,b){var a=D.call(this,!0);a._view=x;a.pointerAction=u;const p=a._view.mapViewNavigation;a._dragEventSeparator=new h.DragEventSeparator({start:(g,c)=>{p.rotate.begin(a._view,
c.data);c.stopPropagation()},update:(g,c)=>{p.rotate.update(a._view,c.data);c.stopPropagation()},end:(g,c)=>{p.rotate.end();c.stopPropagation()},condition:(g,c)=>1===g&&w.eventMatchesPointerAction(c.data,a.pointerAction)});a.registerIncoming("drag",b,g=>a._dragEventSeparator.handle(g));return a}n._inherits(z,y);var D=n._createSuper(z);return n._createClass(z)}(f.InputHandler);r.DragRotate=f;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(r,n,h,f,w,y,z,D){z=function(x){function u(a){var p=b.call(this,!0);p._view=a;p._frameTask=null;p._watchHandles=new h;p._currentDevice=null;p._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};p._handle=p.registerIncoming("gamepad",g=>p._handleGamePadEvent(g));p._handle.pause();return p}n._inherits(u,x);var b=n._createSuper(u);x=u.prototype;x.onInstall=function(a){n._get(n._getPrototypeOf(u.prototype),"onInstall",this).call(this,a);this._watchHandles.add([f.watch(()=>this._view.navigation.gamepad?.enabled,
p=>{p?(this._handle.resume(),this._frameTask||(this._frameTask=w.addFrameTask({update:g=>this._frameUpdate(g.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},f.initial)])};x.onUninstall=function(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);n._get(n._getPrototypeOf(u.prototype),"onUninstall",this).call(this)};x._handleGamePadEvent=function(a){const p=this._view.navigation.gamepad.device;p&&a.data.device!==
p||this._currentDevice&&this._currentDevice!==a.data.device||("end"===a.data.action?(this._currentDevice=null,D.resetTransformation(this._transformation)):(this._currentDevice=a.data.device,D.extractTransformation(a.data,this._view.navigation.gamepad,this._transformation)))};x._frameUpdate=function(a){const p=this._transformation;if(!D.isZeroTransformation(p)){var g=this._view.viewpoint.clone(),c=.7*this._view.navigation.gamepad.velocityFactor*a;y.translateBy(g,g,[p.translation[0]*c,-p.translation[1]*
c]);c=this._view.size;y.scaleAndRotateBy(g,g,1+6E-4*p.translation[2]*a,this._view.constraints.rotationEnabled?.06*-p.heading*a:0,[c[0]/2,c[1]],c);a=this._view.constraints.constrain(g,this._view.viewpoint);this._view.viewpoint=a}};return n._createClass(u)}(z.InputHandler);r.GamepadNavigation=z;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(r,n){function h(f){let w=f*f;0>f&&(w*=
-1);return w}r.extractTransformation=function(f,w,y){const z=f.state;f=f.device;w="forward-down"===w.tiltDirection?1:-1;"standard"===f.deviceType?(y.translation[0]=h(z.axes[0]),y.translation[1]=h(z.axes[1]),y.translation[2]=h(z.buttons[7])-h(z.buttons[6]),y.heading=h(z.axes[2]),y.tilt=h(z.axes[3])):"spacemouse"===f.deviceType&&(y.translation[0]=1.2*h(z.axes[0]),y.translation[1]=1.2*h(z.axes[1]),y.translation[2]=2*-h(z.axes[2]),y.heading=1.2*h(z.axes[5]),y.tilt=1.2*h(z.axes[3]));y.tilt*=w;n.scale(y.translation,
y.translation,1);return y};r.extractTransformationKeyboard=function(f,w){w.translation[0]=f[1]-f[0];w.translation[1]=f[3]-f[2];w.translation[2]=f[4]-f[5];w.heading=f[7]-f[6];w.tilt=f[8]-f[9];w.zoom=f[10]-f[11];return w};r.isZeroTransformation=function(f){return 0===f.translation[0]&&0===f.translation[1]&&0===f.translation[2]&&0===f.heading&&0===f.tilt&&0===f.zoom};r.resetTransformation=function(f){f.translation[0]=0;f.translation[1]=0;f.translation[2]=0;f.heading=0;f.tilt=0;return f};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(r,n,h){h=function(f){function w(z,D,x){var u=y.call(this,!0);u.view=z;u.keys=D;u._pressed=!1;u._keyMap={[D.left]:"left",[D.right]:"right",[D.up]:"up",[D.down]:"down"};u.registerIncoming("key-down",x,b=>u._handleKeyDown(b));u.registerIncoming("key-up",x,b=>u._handleKeyUp(b));u.registerIncoming("blur",x,()=>
u._handleBlur());return u}n._inherits(w,f);var y=n._createSuper(w);f=w.prototype;f._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};f._handleKeyUp=function(z){this._handleKey(z,!1)};f._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};f._handleKey=function(z,D){const x=this._keyMap[z.data.key];if(this._pressed=null!=x){if(D)switch(this.view.mapViewNavigation.begin(),x){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return n._createClass(w)}(h.InputHandler);r.KeyPan=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(r,n,h){h=function(f){function w(z,
D,x){var u=y.call(this,!0);u.view=z;u.keys=D;u._pressed=!1;u._keyToDirection={[D.clockwiseOption1]:"clockwise",[D.clockwiseOption2]:"clockwise",[D.counterClockwiseOption1]:"counterClockwise",[D.counterClockwiseOption2]:"counterClockwise",[D.resetOption1]:"reset",[D.resetOption2]:"reset"};u.registerIncoming("key-down",x,b=>u._handleKeyDown(b));u.registerIncoming("key-up",x,b=>u._handleKeyUp(b));u.registerIncoming("blur",x,()=>u._handleBlur());return u}n._inherits(w,f);var y=n._createSuper(w);f=w.prototype;
f._handleKeyDown=function(z){z.data.repeat||this._handleKey(z,!0)};f._handleKeyUp=function(z){this._handleKey(z,!1)};f._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};f._handleKey=function(z,D){var x=z.modifiers;if(!(0<x.size&&!x.has("Shift")||!this.view.constraints.rotationEnabled)&&(x=this._keyToDirection[z.data.key],this._pressed=null!=x)){if(D)switch(this.view.mapViewNavigation.begin(),x){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();z.stopPropagation()}};return n._createClass(w)}(h.InputHandler);r.KeyRotate=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],
function(r,n,h,f){var w;(function(y){y[y.IN=0]="IN";y[y.OUT=1]="OUT"})(w||(w={}));h=function(y){function z(x,u,b){var a=D.call(this,!0);a.view=x;a.keys=u;a._keysToZoomAction={};a.registerIncoming("key-down",b,p=>a._handleKeyDown(p));u.zoomIn.forEach(p=>a._keysToZoomAction[p]=w.IN);u.zoomOut.forEach(p=>a._keysToZoomAction[p]=w.OUT);return a}n._inherits(z,y);var D=n._createSuper(z);y=z.prototype;y._handleKeyDown=function(x){this._handleKey(x)};y._handleKey=function(x){var u=x.modifiers;if(!(0<u.size)||
u.has("Shift"))if({key:u}=x.data,u in this._keysToZoomAction){u=this._keysToZoomAction[u];var {mapViewNavigation:b}=this.view,a=null;switch(u){case w.IN:a=b.zoomIn();break;case w.OUT:a=b.zoomOut();break;default:return}b.begin();a.then(()=>b.end());x.stopPropagation()}};return n._createClass(z)}(f.InputHandler);r.KeyZoom=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/InputHandler"],function(r,n,h){h=function(f){function w(z,D){var x=y.call(this,!0);x._view=z;x._canZoom=!0;x.registerIncoming("mouse-wheel",D,u=>x._handleMouseWheel(u));return x}n._inherits(w,f);var y=n._createSuper(w);w.prototype._handleMouseWheel=function(z){if(this._view.navigation.mouseWheelZoomEnabled&&(z.preventDefault(),z.stopPropagation(),this._canZoom)){var D=this._view.mapViewNavigation,{x,y:u,deltaY:b}=z.data;if(z=D.zoom(1/.6**(1/60*b),[x,u]))this._canZoom=!1,z.catch(()=>
{}).then(()=>{this._canZoom=!0;D.end()})}};return n._createClass(w)}(h.InputHandler);r.MouseWheelZoom=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(r,n,h,f){f=function(w){function y(D){var x=z.call(this,!0);x.view=D;x.registerIncoming("drag",b=>x._handleDrag(b));x.registerIncoming("pointer-down",
()=>x._stopMomentumNavigation());const u=x.view.mapViewNavigation;x._dragEventSeparator=new h.DragEventSeparator({start:(b,a)=>{u.pinch.begin(x.view,a.data);a.stopPropagation()},update:(b,a)=>{u.pinch.update(x.view,a.data);a.stopPropagation()},end:(b,a)=>{u.pinch.end(x.view);a.stopPropagation()},condition:b=>2<=b});return x}n._inherits(y,w);var z=n._createSuper(y);w=y.prototype;w._handleDrag=function(D){this._dragEventSeparator.handle(D)};w._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};
return n._createClass(y)}(f.InputHandler);r.PinchRotateAndZoom=f;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(r,n,h,f,w,y,z){const D=h("edge"),x=h("chrome"),u=h("ff"),b=h("safari");h=function(){function p(c,e){this._input=e;this._active={};this._callback=()=>{};this._activePointerCaptures=
new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=c;c.getAttribute("tabindex")||c.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new y.GamepadSource(c,this._input);this._gamepadSource.onEvent=k=>this._callback("gamepad",k)}var g=p.prototype;g.destroy=function(){this._callback=()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(c=>{this._releasePointerCaptureSafe(c)});this._gamepadSource=f.destroyMaybe(this._gamepadSource);this._activePointerCaptures=
null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};g.setPointerCapture=function(c,e){e?(this._element.setPointerCapture(c.pointerId),this._activePointerCaptures.add(c.pointerId)):(this._releasePointerCaptureSafe(c.pointerId),this._activePointerCaptures.delete(c.pointerId))};g._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?
"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};g._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};g._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};
g._releasePointerCaptureSafe=function(c){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(c)||this._element.releasePointerCapture(c)}catch(e){}};g._updateNormalizedPointerLikeEvent=function(c,e){c=z.createScreenPointFromNativeEvent(this._element,c);p.test.disableSubpixelCoordinates&&(c.x=Math.round(c.x),c.y=Math.round(c.y));e.x=c.x;e.y=c.y;return e};g._handleKey=function(c,e){const k=w.eventKey(e);k&&"key-up"===c&&this._keyDownState.delete(k);e={native:e,key:k,repeat:!!k&&this._keyDownState.has(k)};
k&&"key-down"===c&&this._keyDownState.add(e.key);this._callback(c,e)};g._handlePointer=function(c,e){e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});this._callback(c,e)};g._handlePointerPreventDefault=function(c,e){const k=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,pointerType:e.pointerType,button:e.button,buttons:e.buttons,eventId:this._eventId++});e.preventDefault();this._callback(c,
k)};g._handleMouseWheel=function(c,e){let k=e.deltaY;switch(e.deltaMode){case 0:D&&(k=k/document.documentElement.clientHeight*600);break;case 1:k*=30;break;case 2:k*=900}D?k*=.7:x||b?k*=.6:u&&(k*=1.375);const l=Math.abs(k);100<l&&(k=k/l*200/(1+Math.exp(-.02*(l-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:k});this._callback(c,e)};g._handlePointerCaptureLost=function(c,e){this._activePointerCaptures.delete(e.pointerId);this._handleDefault(c,e)};g._handleDefault=function(c,
e){const k={native:e};e.preventDefault();this._callback(c,k)};g._preventAltKeyDefault=function(c){"Alt"===c.key&&c.preventDefault()};g._preventMultiTouchPanning=function(c){1<c.touches.length&&c.preventDefault()};n._createClass(p,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(c){this._browserTouchPanningEnabled=c;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(c){this._callback=c}},{key:"activeEvents",
set:function(c){for(const e in this._active)c&&c.has(e)||(this._element.removeEventListener(a[e],this._active[e]),delete this._active[e]);c&&c.forEach(e=>{if(!this._active[e]&&a[e]){const k=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(a[e],k);this._active[e]=k}});this._gamepadSource.hasEventListeners=c?.has("gamepad")??!1}}]);return p}();h.test={disableSubpixelCoordinates:!1};const a={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup",
"pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};r.BrowserEventSource=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/scheduling",
"./GamepadInputDevice","./GamepadState"],function(r,n,h,f,w){let y=function(){function z(x,u){this._element=x;this._input=u;this._hasEventListeners=!1;this._onConnectGamepad=b=>{this._connectGamepad(b.gamepad)};this._onDisconnectGamepad=b=>{b=b.gamepad;const a=b.index,p=this._inputDevices[a];p&&(this._emitGamepadEvent(b,w.extractState(p),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(p),this.ensurePollingState())};this._frameTask=null;this._latestUpdate=
[];this._inputDevices=[];this._callback=null;x=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&x)this._forEachGamepad(b=>this._connectGamepad(b)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}var D=z.prototype;D.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",
this._onDisconnectGamepad))};D._connectGamepad=function(x){const u=new f(x);"unknown"!==u.deviceType&&(this._inputDevices[x.index]=u,this._input.gamepad.devices.add(u));this.ensurePollingState()};D.ensurePollingState=function(){this._eventsEnabled?this._startPolling():this._stopPolling()};D._startPolling=function(){null==this._frameTask&&(this._frameTask=h.addFrameTask({update:()=>this._readGamepadState()}))};D._stopPolling=function(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=
null,this._latestUpdate=[])};D._readGamepadState=function(){const x=document.hasFocus(),u=this._element.contains(document.activeElement),b="document"===this._input.gamepad.enabledFocusMode&&!x||"view"===this._input.gamepad.enabledFocusMode&&!u;this._forEachGamepad(a=>{var p=this._inputDevices[a.index];if(p){var g=this._latestUpdate[a.index];p=w.extractState(p);var c=b||w.stateIdle(p);g&&(g.timestamp===a.timestamp||!g.active&&c||w.stateEqual(g.state,p))||this._emitGamepadEvent(a,p,!c)}})};D._forEachGamepad=
function(x){const u=window.navigator.getGamepads();for(let b=0;b<u.length;b++){const a=u[b];this._validate(a)&&x(a)}};D._emitGamepadEvent=function(x,u,b){var a=this._latestUpdate[x.index];if((a=a&&a.active)||b)this._latestUpdate[x.index]={timestamp:x.timestamp,state:u,active:b},this._callback&&this._callback({device:this._inputDevices[x.index],state:u,action:!a&&b?"start":a&&b?"update":"end"})};D._validate=function(x){if(!x||!x.connected)return!1;for(let u=0;u<x.axes.length;u++)if(isNaN(x.axes[u]))return!1;
return!0};n._createClass(z,[{key:"hasEventListeners",set:function(x){this._hasEventListeners!==x&&(this._hasEventListeners=x,this.ensurePollingState())}},{key:"_eventsEnabled",get:function(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(x){this._callback=x}}]);return z}();r.GamepadSource=y;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(r){r.extractState=
function(n){const h=n.native;return h?{buttons:h.buttons.map(f=>f.pressed?f.value||1:0),axes:h.axes.map(f=>{{var w=n.axisThreshold;const y=Math.abs(f);f=y<w?0:Math.sign(f)*(y-w)/(1-w)}return f})}:{buttons:[],axes:[]}};r.stateEqual=function(n,h){if(n.axes.length!==h.axes.length||n.buttons.length!==h.buttons.length)return!1;for(var f=0;f<n.axes.length;f++)if(n.axes[f]!==h.axes[f])return!1;for(f=0;f<n.buttons.length;f++)if(n.buttons[f]!==h.buttons[f])return!1;return!0};r.stateIdle=function(n){for(var h=
0;h<n.axes.length;h++)if(0!==n.axes[h])return!1;for(h=0;h<n.buttons.length;h++)if(0!==n.buttons[h])return!1;return!0};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(r,n,h){h=function(f){function w(){var z=y.call(this,!0);z.registerIncoming("context-menu",D=>{D.data.native.preventDefault()});return z}n._inherits(w,f);var y=n._createSuper(w);
return n._createClass(w)}(h.InputHandler);r.PreventContextMenu=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(r,n,h,f,w,y,z,D,x,u){D=function(b){function a(g=x.DefaultParameters.maximumDoubleClickDelay,
c=x.DefaultParameters.maximumDoubleClickDistance,e=x.DefaultParameters.maximumDoubleTouchDelay,k=x.DefaultParameters.maximumDoubleTouchDistance,l=h.clock){var m=p.call(this,!1);m._maximumDoubleClickDelay=g;m._maximumDoubleClickDistance=c;m._maximumDoubleTouchDelay=e;m._maximumDoubleTouchDistance=k;m._clock=l;m._doubleTapDragReady=!1;m._doubleTapDragActive=!1;m._dragStartCenter=y.createScreenPoint(0,0);m._pointerState=new Map;m._doubleTapDrag=m.registerOutgoing("double-tap-drag");m._dragEventSeparator=
new z.DragEventSeparator({start:(v,E)=>m._dragStart(v,E),update:(v,E)=>m._dragUpdate(E),end:(v,E)=>m._dragEnd(E)});m.registerIncoming("drag",v=>m._dragEventSeparator.handle(v));m.registerIncoming("pointer-down",v=>m._handlePointerDown(v));m.registerIncoming("pointer-up",()=>m._handlePointerUp());return m}n._inherits(a,b);var p=n._createSuper(a);b=a.prototype;b.onUninstall=function(){this._pointerState.forEach(g=>{g.doubleTapTimeout=w.removeMaybe(g.doubleTapTimeout)})};b._clearPointerDown=function(g){const c=
this._pointerState.get(g);c&&(c.doubleTapTimeout=w.removeMaybe(c.doubleTapTimeout),this._pointerState.delete(g),this.refreshHasPendingInputs())};b._createDoubleTapDragData=function(g,c,e){const {button:k,buttons:l,pointer:m,pointers:v,pointerType:E,timestamp:A}=e;return{action:g,delta:c,button:k,buttons:l,pointer:m,pointers:v,pointerType:E,timestamp:A}};b._dragStart=function(g,c){if(this._doubleTapDragReady&&1===g){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:e,modifiers:k}=
c;({center:g}=e);this._dragStartCenter=g;g=this._createDoubleTapDragData("begin",y.createScreenPoint(0,0),e);this._doubleTapDrag.emit(g,void 0,k);c.stopPropagation()}};b._dragUpdate=function(g){if(this._doubleTapDragActive){var {data:c,modifiers:e}=g,{center:k}=c;k=y.createScreenPoint(k.x-this._dragStartCenter.x,k.y-this._dragStartCenter.y);k=this._createDoubleTapDragData("update",k,c);this._doubleTapDrag.emit(k,void 0,e);g.stopPropagation()}};b._dragEnd=function(g){if(this._doubleTapDragActive){var {data:c,
modifiers:e}=g,{center:k}=c;k=y.createScreenPoint(k.x-this._dragStartCenter.x,k.y-this._dragStartCenter.y);k=this._createDoubleTapDragData("end",k,c);this._doubleTapDrag.emit(k,void 0,e);this._doubleTapDragActive=!1;g.stopPropagation()}};b._handlePointerDown=function(g){const {data:c}=g,e=u.getPointerId(c),k=this._pointerState.get(e);var {pointerType:l}=c.native;k?(l="touch"===l?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance,this._clearPointerDown(e),u.manhattanDistance(k.event.data,
c)>l?this._storePointerDown(g):this._doubleTapDragReady=!0):this._storePointerDown(g)};b._handlePointerUp=function(){this._doubleTapDragReady=!1};b._storePointerDown=function(g){var {data:c}=g;const {pointerType:e}=c.native,k=u.getPointerId(c);c=this._clock.setTimeout(()=>this._clearPointerDown(k),"touch"===e?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(k,{event:g,doubleTapTimeout:c});this.refreshHasPendingInputs()};n._createClass(a,[{key:"hasPendingInputs",
get:function(){return f.someMap(this._pointerState,g=>null!=g.doubleTapTimeout)}}]);return a}(D.InputHandler);r.DoubleTapDrag=D;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),function(r,n,h,f,w,y,z){const D={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};y=function(x){function u(a=D.maximumDoubleClickDelay,p=D.maximumDoubleClickDistance,g=D.maximumDoubleTouchDelay,c=D.maximumDoubleTouchDistance,e=h.clock){var k=b.call(this,!1);k._maximumDoubleClickDelay=a;k._maximumDoubleClickDistance=p;k._maximumDoubleTouchDelay=g;k._maximumDoubleTouchDistance=c;k._clock=e;k._pointerState=new Map;k._click=k.registerOutgoing("click");k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",
k._handleImmediateClick.bind(n._assertThisInitialized(k)));k.registerIncoming("pointer-down",k._handlePointerDown.bind(n._assertThisInitialized(k)));return k}n._inherits(u,x);var b=n._createSuper(u);x=u.prototype;x.onUninstall=function(){this._pointerState.forEach(a=>a.doubleClickTimer=w.removeMaybe(a.doubleClickTimer))};x._clearDoubleClickTimer=function(a,p){const g=this._pointerState.get(a);g&&(g.doubleClickTimer=w.removeMaybe(g.doubleClickTimer),p&&this._click.emit(g.event.data,void 0,g.event.modifiers),
this._pointerState.delete(a),this.refreshHasPendingInputs())};x._doubleClickTimeoutExceeded=function(a){const p=this._pointerState.get(a);1===p.pointerDownCount&&this._click.emit(p.event.data,void 0,p.event.modifiers);p.doubleClickTimer=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};x._getPointerId=function(a){const {pointerId:p,pointerType:g,button:c}=a.native;return"mouse"===g?`${p}:${c}`:`${g}`};x._handleImmediateClick=function(a){const p=a.data;var {pointerType:g}=p.native;
const c=this._getPointerId(p);if(this._pointerState.has(c)){var e=this._pointerState.get(c),{data:k,modifiers:l}=e.event;g="touch"===g?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;z.manhattanDistance(k,p)>g?(this._clearDoubleClickTimer(c,!0),this._startClick(a)):(this._clearDoubleClickTimer(c,!1),2===e.pointerDownCount&&this._doubleClick.emit(k,void 0,l))}else this._startClick(a)};x._handlePointerDown=function(a){a=z.getPointerId(a.data);if(a=this._pointerState.get(a))a.pointerDownCount+=
1};x._startClick=function(a){var {data:p}=a;const {native:{pointerType:g}}=p,c=z.getPointerId(p);p=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(c),"touch"===g?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(c,{event:a,doubleClickTimer:p,pointerDownCount:1});this.refreshHasPendingInputs()};n._createClass(u,[{key:"hasPendingInputs",get:function(){return f.someMap(this._pointerState,a=>null!=a.doubleClickTimer)}}]);return u}(y.InputHandler);r.DefaultParameters=
D;r.SingleAndDoubleClick=y;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(r,n){r.euclideanDistance=function(h,f){const w=f.x-h.x;h=f.y-h.y;return Math.sqrt(w*w+h*h)};r.fitCircleLSQ=function(h,f){f?(f.radius=0,f.center.x=0,f.center.y=0):f={radius:0,center:n.createScreenPoint()};if(0===h.length)return f;if(1===h.length)return f.center.x=h[0].x,f.center.y=h[0].y,f;if(2===h.length){const [e,
k]=h,[l,m]=[k.x-e.x,k.y-e.y];f.radius=Math.sqrt(l*l+m*m)/2;f.center.x=(e.x+k.x)/2;f.center.y=(e.y+k.y)/2;return f}let w=0,y=0;for(f=0;f<h.length;f++)w+=h[f].x,y+=h[f].y;w/=h.length;y/=h.length;var z=h.map(e=>e.x-w),D=h.map(e=>e.y-y);let x=f=0;var u=0,b=0,a=0,p=0,g=0;for(var c=0;c<z.length;c++){const e=z[c],k=D[c],l=e*e,m=k*k;f+=l;x+=m;u+=e*k;b+=l*e;a+=m*k;p+=e*m;g+=k*l}z=f;D=u;c=x;b=.5*(b+p);a=.5*(a+g);g=z*c-u*D;p=(b*c-a*D)/g;a=(z*a-u*b)/g;g=n.createScreenPoint(p+w,a+y);return{radius:Math.sqrt(p*
p+a*a+(f+x)/h.length),center:g}};r.getPointerId=function(h){({native:h}=h);const {pointerId:f,button:w,pointerType:y}=h;return"mouse"===y?`${f}:${w}`:`${y}`};r.manhattanDistance=function(h,f){return Math.abs(f.x-h.x)+Math.abs(f.y-h.y)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),function(r,n,
h,f,w,y){function z(b){const a=[];b.forEach(p=>{a.push(h.createScreenPoint(p.event.x,p.event.y))});return y.fitCircleLSQ(a)}function D(b){const a=z(b);let p=0;b.forEach(g=>{var c=u(g,a);for(c-=g.lastAngle;c>Math.PI;)c-=2*Math.PI;for(;c<-Math.PI;)c+=2*Math.PI;c=g.lastAngle+c;g.lastAngle=c;p+=c-g.initialAngle});p/=b.size||1;return{angle:p,radius:a.radius,center:a.center}}function x(b){const a=new Map;b.forEach((p,g)=>a.set(g,p.event));return a}function u(b,a){b=b.event;return Math.atan2(b.y-a.center.y,
b.x-a.center.x)}w=function(b){function a(g){var c=p.call(this,!1);c._navigationTouch=g;c._startStateModifiers=new Set;c._activePointerMap=new Map;c._isDragging=!1;c._isCurrentDragSuppressed=!1;c._drag=c.registerOutgoing("drag");c.registerIncoming("pointer-drag",c._handlePointerDrag.bind(n._assertThisInitialized(c)));c.registerIncoming("pointer-up",c._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(c)));c.registerIncoming("pointer-capture-lost",c._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(c)));
c.registerIncoming("pointer-cancel",c._handlePointerUpAndPointerLost.bind(n._assertThisInitialized(c)));return c}n._inherits(a,b);var p=n._createSuper(a);b=a.prototype;b._createPayload=function(g,c,e,k){return{action:g,pointerType:this._pointerType,button:this._mouseButton,buttons:c.buttons,timestamp:k,pointers:x(this._activePointerMap),pointer:c,angle:e.angle,radius:e.radius,center:e.center}};b._addPointer=function(g){var c=g.native.pointerId;const e=D(this._activePointerMap).angle;g={event:g,initialAngle:0,
lastAngle:0};this._activePointerMap.set(c,g);c=u(g,z(this._activePointerMap));g.initialAngle=c;g.lastAngle=c;this._updatePointerAngles(e)};b._updatePointer=function(g){if(!g||null!=g.x||null!=g.y){var c=this._activePointerMap.get(g.native.pointerId);c?c.event=g:this._addPointer(g)}};b._removePointer=function(g){const c=D(this._activePointerMap).angle;this._activePointerMap.delete(g);this._updatePointerAngles(c)};b._updatePointerAngles=function(g){const c=D(this._activePointerMap);this._activePointerMap.forEach(e=>
{e.initialAngle=u(e,c)-g;e.lastAngle=u(e,c)-g})};b._emitEvent=function(g,c,e){const k=D(this._activePointerMap);this._drag.emit(this._createPayload(g,c,k,e),void 0,this._startStateModifiers)};b._handlePointerUpAndPointerLost=function(g){const c=g.data.native.pointerId,e=f.Milliseconds(g.timestamp);this._activePointerMap.get(c)&&(1===this._activePointerMap.size?(this._updatePointer(g.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",g.data,e),this._isCurrentDragSuppressed=this._isDragging=
!1,this._removePointer(c)):(this._removePointer(c),this._emitEvent("removed",g.data,f.Milliseconds(g.timestamp))))};b._handlePointerDrag=function(g){const c=g.data,e=c.currentEvent,k=f.Milliseconds(g.timestamp);switch(c.action){case "start":case "update":this._isDragging?this._activePointerMap.has(e.native.pointerId)?(this._updatePointer(e),!this._isCurrentDragSuppressed&&this._emitEvent("update",e,k)):(this._addPointer(e),this._emitEvent("added",e,k),this._isCurrentDragSuppressed=this._isSuppressed):
(this._updatePointer(e),this._pointerType=g.data.startEvent.pointerType,this._mouseButton=g.data.startEvent.button,this._startStateModifiers=g.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",e,k))}};n._createClass(a,[{key:"_isSuppressed",get:function(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}]);return a}(w.InputHandler);
r.Button=void 0;(function(b){b[b.Left=0]="Left";b[b.Middle=1]="Middle";b[b.Right=2]="Right";b[b.Back=3]="Back";b[b.Forward=4]="Forward";b[b.Undefined=-1]="Undefined"})(r.Button||(r.Button={}));r.Drag=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(r,n,h,f,w,y){f=function(z){function D(u=
w.DefaultParameters.maximumDoubleClickDelay,b=w.DefaultParameters.maximumDoubleClickDistance,a=w.DefaultParameters.maximumDoubleTouchDelay,p=w.DefaultParameters.maximumDoubleTouchDistance,g=h.clock){var c=x.call(this,!1);c._maximumDoubleClickDelay=u;c._maximumDoubleClickDistance=b;c._maximumDoubleTouchDelay=a;c._maximumDoubleTouchDistance=p;c._clock=g;c._pointerState=new Map;c._immediateDoubleClick=c.registerOutgoing("immediate-double-click");c.registerIncoming("pointer-down",c._handlePointerDown.bind(n._assertThisInitialized(c)));
c.registerIncoming("pointer-up",c._handlePointerUp.bind(n._assertThisInitialized(c)));return c}n._inherits(D,z);var x=n._createSuper(D);z=D.prototype;z.onUninstall=function(){this._pointerState.forEach(u=>{u.immediateDoubleClick&&u.immediateDoubleClick.timeoutHandle.remove()});n._get(n._getPrototypeOf(D.prototype),"onUninstall",this).call(this)};z._handlePointerDown=function(u){u=u.data;const b=y.getPointerId(u);this._pointerState.has(b)||(this._pointerState.set(b,{downButton:u.native.button,immediateDoubleClick:null}),
this.startCapturingPointer(u.native))};z._handlePointerUp=function(u){const b=u.data;var a=y.getPointerId(b);if((a=this._pointerState.get(a))&&a.downButton===b.native.button){const p=a.immediateDoubleClick;if(p){p.timeoutHandle.remove();const g="touch"===u.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;y.manhattanDistance(p,u.data)>g?this._startImmediateDoubleClick(u,a):(this._immediateDoubleClick.emit(u.data,void 0,p.modifiers),this._removeState(b))}else this._startImmediateDoubleClick(u,
a)}};z._startImmediateDoubleClick=function(u,b){b.immediateDoubleClick={x:u.data.x,y:u.data.y,modifiers:u.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(u.data),"touch"===u.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}};z._removeState=function(u){const b=y.getPointerId(u);this._pointerState.delete(b);this.stopCapturingPointer(u.native);this.refreshHasPendingInputs()};return n._createClass(D)}(f.InputHandler);r.ImmediateDoubleClick=f;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/maybe ../InputHandler ./support".split(" "),function(r,n,h,f,w,y){const z={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};w=function(D){function x(b=z.maximumClickDelay,a=z.movementUntilMouseDrag,p=z.movementUntilPenDrag,g=z.movementUntilTouchDrag,
c=z.holdDelay,e=h.clock){var k=u.call(this,!1);k._maximumClickDelay=b;k._movementUntilMouseDrag=a;k._movementUntilPenDrag=p;k._movementUntilTouchDrag=g;k._holdDelay=c;k._clock=e;k._pointerState=new Map;k._pointerDrag=k.registerOutgoing("pointer-drag");k._immediateClick=k.registerOutgoing("immediate-click");k._pointerHold=k.registerOutgoing("hold");k.registerIncoming("pointer-down",k._handlePointerDown.bind(n._assertThisInitialized(k)));k.registerIncoming("pointer-up",l=>{k._handlePointerLoss(l,"pointer-up")});
k.registerIncoming("pointer-capture-lost",l=>{k._handlePointerLoss(l,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",l=>{k._handlePointerLoss(l,"pointer-cancel")});k._moveHandle=k.registerIncoming("pointer-move",k._handlePointerMove.bind(n._assertThisInitialized(k)));k._moveHandle.pause();return k}n._inherits(x,D);var u=n._createSuper(x);D=x.prototype;D.onUninstall=function(){this._pointerState.forEach(b=>{b.holdTimeout=f.removeMaybe(b.holdTimeout)});n._get(n._getPrototypeOf(x.prototype),
"onUninstall",this).call(this)};D._handlePointerDown=function(b){const a=b.data,p=a.native.pointerId;var g=null;0===this._pointerState.size&&(g=this._clock.setTimeout(()=>{const c=this._pointerState.get(p);c&&(c.isDragging||(this._pointerHold.emit(c.previousEvent,void 0,b.modifiers),c.holdEmitted=!0),c.holdTimeout=null)},this._holdDelay));g={startEvent:a,previousEvent:a,startTimestamp:b.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:g,modifiers:new Set};this._pointerState.set(p,g);
this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(b)};D._createPointerDragData=function(b,a,p){return{action:b,startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:p}};D._handlePointerMove=function(b){const a=b.data,p=this._pointerState.get(a.native.pointerId);if(p){if(p.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",p,a),void 0,p.modifiers);else{const g=y.euclideanDistance(a,p.startEvent),c=this._getDragThreshold(a.native.pointerType);
g>c&&this._startDragging(b)}p.previousEvent=a}};D._getDragThreshold=function(b){switch(b){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}};D._startDragging=function(b){const a=b.data,p=a.native.pointerId;this._pointerState.forEach(g=>{null!=g.holdTimeout&&(g.holdTimeout.remove(),g.holdTimeout=null);g.isDragging||(g.modifiers=b.modifiers,g.isDragging=!0,p===g.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",
g,a)):this._pointerDrag.emit(this._createPointerDragData("start",g,g.previousEvent),b.timestamp))})};D._handlePointerLoss=function(b,a){const p=b.data,g=p.native.pointerId,c=this._pointerState.get(g);c&&(null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null),c.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",c,"pointer-up"===a?p:c.previousEvent),void 0,c.modifiers):"pointer-up"===a&&c.downButton===p.native.button&&b.timestamp-c.startTimestamp<=this._maximumClickDelay&&
!c.holdEmitted&&this._immediateClick.emit(p),this._pointerState.delete(g),this.stopCapturingPointer(p.native),0===this._pointerState.size&&this._moveHandle.pause())};return n._createClass(x)}(w.InputHandler);r.DefaultParameters=z;r.PointerClickHoldAndDrag=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(r,n,h,f,w,y,z){const D={added:[],removed:[]},x=new Set,u=new z(0,0,0,0);return function(b){function a(g){var c=p.call(this);c._tiles=new Map;c._index=f.rbush(9,h("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);c.tiles=[];c.tileScheme=g;return c}r._inherits(a,b);var p=r._createSuper(a);b=a.prototype;b.destroy=function(){this.clear()};b.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};b.has=function(g){return this._tiles.has(g)};b.get=function(g){return this._tiles.get(g)};b.boundsIntersections=function(g){return this._index.search({minX:g[0],minY:g[1],maxX:g[2],maxY:g[3]})};b.updateTiles=function(g){const c={added:[],removed:[]};for(const e of g.added)if(!this.has(e)){const k=new w.Tile(this.tileScheme,e);this._tiles.set(e,k);this._index.insert(k);c.added.push(k)}for(const e of g.removed)this.has(e)&&(g=this.get(e),this._tiles.delete(e),this._index.remove(g),
c.removed.push(g));this.tiles.length=0;this._tiles.forEach(e=>this.tiles.push(e));(c.added.length||c.removed.length)&&this.emit("update",c)};b.setViewState=function(g){if(g=this.tileScheme.getTileCoverage(g,0)){var {spans:c,lodInfo:e}=g,{level:k}=e;if(0<c.length)for(const {row:m,colFrom:v,colTo:E}of c)for(var l=v;l<=E;l++){const A=u.set(k,m,e.normalizeCol(l),e.getWorldForColumn(l)).id;x.add(A);if(!this.has(A)){const t=new w.Tile(this.tileScheme,A);this._tiles.set(A,t);this._index.insert(t);this.tiles.push(t);
D.added.push(t)}}for(k=this.tiles.length-1;0<=k;k--)l=this.tiles[k],x.has(l.id)||(this._tiles.delete(l.id),this.tiles.splice(k,1),this._index.remove(l),D.removed.push(l));(D.added.length||D.removed.length)&&this.emit("update",D);y.pool.release(g);x.clear();D.added.length=0;D.removed.length=0}};return r._createClass(a)}(n)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(r,n){function h(c,e){if(!(this instanceof h))return new h(c,e);this._maxEntries=Math.max(4,c||9);this._minEntries=
Math.max(2,Math.ceil(.4*this._maxEntries));e&&("function"===typeof e?this.toBBox=e:this._initFormat(e));this.clear()}function f(c,e){w(c,0,c.children.length,e,c)}function w(c,e,k,l,m){m||(m=p(null));m.minX=Infinity;m.minY=Infinity;m.maxX=-Infinity;m.maxY=-Infinity;for(var v;e<k;e++)v=c.children[e],y(m,c.leaf?l(v):v);return m}function y(c,e){c.minX=Math.min(c.minX,e.minX);c.minY=Math.min(c.minY,e.minY);c.maxX=Math.max(c.maxX,e.maxX);c.maxY=Math.max(c.maxY,e.maxY);return c}function z(c,e){return c.minX-
e.minX}function D(c,e){return c.minY-e.minY}function x(c){return(c.maxX-c.minX)*(c.maxY-c.minY)}function u(c){return c.maxX-c.minX+(c.maxY-c.minY)}function b(c,e){return c.minX<=e.minX&&c.minY<=e.minY&&e.maxX<=c.maxX&&e.maxY<=c.maxY}function a(c,e){return e.minX<=c.maxX&&e.minY<=c.maxY&&e.maxX>=c.minX&&e.maxY>=c.minY}function p(c){return{children:c,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function g(c,e,k,l,m){for(var v=[e,k],E;v.length;)k=v.pop(),e=v.pop(),k-e<=
l||(E=e+Math.ceil((k-e)/l/2)*l,n.quickselect(c,E,e,k,m),v.push(e,E,E,k))}h.prototype={all:function(){return this._all(this.data,[])},search:function(c){var e=this.data,k=[],l=this.toBBox;if(!a(c,e))return k;for(var m=[],v,E,A,t;e;){v=0;for(E=e.children.length;v<E;v++)A=e.children[v],t=e.leaf?l(A):A,a(c,t)&&(e.leaf?k.push(A):b(c,t)?this._all(A,k):m.push(A));e=m.pop()}return k},collides:function(c){var e=this.data,k=this.toBBox;if(!a(c,e))return!1;for(var l=[],m,v,E,A;e;){m=0;for(v=e.children.length;m<
v;m++)if(E=e.children[m],A=e.leaf?k(E):E,a(c,A)){if(e.leaf||b(c,A))return!0;l.push(E)}e=l.pop()}return!1},load:function(c){if(!c||!c.length)return this;if(c.length<this._minEntries){for(var e=0,k=c.length;e<k;e++)this.insert(c[e]);return this}c=this._build(c.slice(),0,c.length-1,0);this.data.children.length?this.data.height===c.height?this._splitRoot(this.data,c):(this.data.height<c.height&&(e=this.data,this.data=c,c=e),this._insert(c,this.data.height-c.height-1,!0)):this.data=c;return this},insert:function(c){c&&
this._insert(c,this.data.height-1);return this},clear:function(){this.data=p([]);return this},remove:function(c,e){if(!c)return this;for(var k=this.data,l=this.toBBox(c),m=[],v=[],E,A,t,q;k||m.length;){k||(k=m.pop(),A=m[m.length-1],E=v.pop(),q=!0);if(k.leaf){a:{t=c;var d=k.children,B=e;if(B){for(var I=0;I<d.length;I++)if(B(t,d[I])){t=I;break a}t=-1}else t=d.indexOf(t)}if(-1!==t){k.children.splice(t,1);m.push(k);this._condense(m);break}}q||k.leaf||!b(k,l)?A?(E++,k=A.children[E],q=!1):k=null:(m.push(k),
v.push(E),E=0,A=k,k=k.children[0])}return this},toBBox:function(c){return c},compareMinX:z,compareMinY:D,toJSON:function(){return this.data},fromJSON:function(c){this.data=c;return this},_all:function(c,e){for(var k=[];c;)c.leaf?e.push.apply(e,c.children):k.push.apply(k,c.children),c=k.pop();return e},_build:function(c,e,k,l){var m=k-e+1,v=this._maxEntries;if(m<=v){var E=p(c.slice(e,k+1));f(E,this.toBBox);return E}l||(l=Math.ceil(Math.log(m)/Math.log(v)),v=Math.ceil(m/Math.pow(v,l-1)));E=p([]);E.leaf=
!1;E.height=l;m=Math.ceil(m/v);v=m*Math.ceil(Math.sqrt(v));var A;for(g(c,e,k,v,this.compareMinX);e<=k;e+=v){var t=Math.min(e+v-1,k);g(c,e,t,m,this.compareMinY);for(A=e;A<=t;A+=m){var q=Math.min(A+m-1,t);E.children.push(this._build(c,A,q,l-1))}}f(E,this.toBBox);return E},_chooseSubtree:function(c,e,k,l){for(var m,v,E,A,t,q,d,B;;){l.push(e);if(e.leaf||l.length-1===k)break;d=B=Infinity;m=0;for(v=e.children.length;m<v;m++)E=e.children[m],t=x(E),q=(Math.max(E.maxX,c.maxX)-Math.min(E.minX,c.minX))*(Math.max(E.maxY,
c.maxY)-Math.min(E.minY,c.minY))-t,q<B?(B=q,d=t<d?t:d,A=E):q===B&&t<d&&(d=t,A=E);e=A||e.children[0]}return e},_insert:function(c,e,k){var l=this.toBBox;k=k?c:l(c);l=[];var m=this._chooseSubtree(k,this.data,e,l);m.children.push(c);for(y(m,k);0<=e;)if(l[e].children.length>this._maxEntries)this._split(l,e),e--;else break;this._adjustParentBBoxes(k,l,e)},_split:function(c,e){var k=c[e],l=k.children.length,m=this._minEntries;this._chooseSplitAxis(k,m,l);l=this._chooseSplitIndex(k,m,l);l=p(k.children.splice(l,
k.children.length-l));l.height=k.height;l.leaf=k.leaf;f(k,this.toBBox);f(l,this.toBBox);e?c[e-1].children.push(l):this._splitRoot(k,l)},_splitRoot:function(c,e){this.data=p([c,e]);this.data.height=c.height+1;this.data.leaf=!1;f(this.data,this.toBBox)},_chooseSplitIndex:function(c,e,k){var l,m;var v=m=Infinity;for(l=e;l<=k-e;l++){var E=w(c,0,l,this.toBBox);var A=w(c,l,k,this.toBBox);var t=Math.max(0,Math.min(E.maxX,A.maxX)-Math.max(E.minX,A.minX))*Math.max(0,Math.min(E.maxY,A.maxY)-Math.max(E.minY,
A.minY));E=x(E)+x(A);if(t<v){v=t;var q=l;m=E<m?E:m}else t===v&&E<m&&(m=E,q=l)}return q},_chooseSplitAxis:function(c,e,k){var l=c.leaf?this.compareMinX:z,m=c.leaf?this.compareMinY:D,v=this._allDistMargin(c,e,k,l);e=this._allDistMargin(c,e,k,m);v<e&&c.children.sort(l)},_allDistMargin:function(c,e,k,l){c.children.sort(l);l=this.toBBox;var m=w(c,0,e,l),v=w(c,k-e,k,l),E=u(m)+u(v),A;for(A=e;A<k-e;A++){var t=c.children[A];y(m,c.leaf?l(t):t);E+=u(m)}for(A=k-e-1;A>=e;A--)t=c.children[A],y(v,c.leaf?l(t):t),
E+=u(v);return E},_adjustParentBBoxes:function(c,e,k){for(;0<=k;k--)y(e[k],c)},_condense:function(c){for(var e=c.length-1,k;0<=e;e--)0===c[e].children.length?0<e?(k=c[e-1].children,k.splice(k.indexOf(c[e]),1)):this.clear():f(c[e],this.toBBox)},_initFormat:function(c){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(c[0]));this.compareMinY=new Function("a","b",e.join(c[1]));this.toBBox=new Function("a","return {minX: a"+c[0]+", minY: a"+c[1]+", maxX: a"+c[2]+", maxY: a"+c[3]+
"};")}};r.rbush=h})},"esri/chunks/quickselect":function(){define(["exports"],function(r){var n={};(function(h){(function(f){f=f();void 0!==f&&(h.exports=f)})(function(){function f(z,D,x,u,b){for(;u>x;){if(600<u-x){var a=u-x+1,p=D-x+1,g=Math.log(a),c=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*c*(a-c)/a)*(0>p-a/2?-1:1);f(z,D,Math.max(x,Math.floor(D-p*c/a+g)),Math.min(u,Math.floor(D+(a-p)*c/a+g)),b)}a=z[D];p=x;c=u;w(z,x,D);for(0<b(z[u],a)&&w(z,x,u);p<c;){w(z,p,c);p++;for(c--;0>b(z[p],a);)p++;for(;0<b(z[c],
a);)c--}0===b(z[x],a)?w(z,x,c):(c++,w(z,c,u));c<=D&&(x=c+1);D<=c&&(u=c-1)}}function w(z,D,x){var u=z[D];z[D]=z[x];z[x]=u}function y(z,D){return z<D?-1:z>D?1:0}return function(z,D,x,u,b){f(z,D,x||0,u||z.length-1,b||y)}})})({get exports(){return n},set exports(h){n=h}});r.quickselect=n})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(r,n,h,f,w,y,z){let D=function(){function x(b,a){this.key=new z(0,0,0,0);this.bounds=w.create();this.objectIds=new Set;this.key.set(a);a=b.getLODInfoAt(this.key);this.tileInfoView=b;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=a.resolution;this.scale=a.scale;this.level=a.level}var u=x.prototype;u.createChildTiles=function(){const b=this.key.getChildKeys(),a=h.acquire();for(let p=0;p<b.length;p++)a[p]=new x(this.tileInfoView,b[p]);return a};u.getQuantizationParameters=
function(){return y.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};n._createClass(x,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return f.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return x}();r.Tile=D;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D,x){f=function(u){function b(){var p=a.apply(this,arguments);p.color=new h([0,255,255]);p.haloOpacity=1;p.fillOpacity=.25;return p}r._inherits(b,u);var a=r._createSuper(b);b.prototype.equals=function(p){return this.color.equals(p.color)&&(this.haloColor||this.color).equals(p.haloColor||p.color)&&this.haloOpacity===p.haloOpacity&&this.fillOpacity===p.fillOpacity};return r._createClass(b)}(f);n.__decorate([w.property({type:h})],f.prototype,"color",void 0);n.__decorate([w.property({type:h})],
f.prototype,"haloColor",void 0);n.__decorate([w.property()],f.prototype,"haloOpacity",void 0);n.__decorate([w.property()],f.prototype,"fillOpacity",void 0);return f=n.__decorate([x.subclass("esri.views.2d.support.HighlightOptions")],f)})},"esri/views/2d/support/Timeline":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(r,n){let h=function(){function f(){this._names=new Map}var w=f.prototype;w.begin=function(y){this._names.has(y)||(this._names.set(y,!1),y.includes("Brush")&&
this.record("Esri.FirstDraw"),performance.mark(`Esri.${y}.Start`))};w.end=function(y){this._names.has(y)&&!this._names.get(y)&&(this._names.set(y,!0),performance.mark(`Esri.${y}.End`))};w.record=function(y){this._names.has(y)||(this._names.set(y,!0),performance.mark(`Esri.${y}`))};return n._createClass(f)}();r.Timeline=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(r,n,h,f,w,y,z,D){r.ignorePadding&&
(f={left:0,right:0,top:0,bottom:0});var x=null;null!=r.width&&null!=r.height?x=[r.width,r.height]:null==r.width&&null!=r.height?x=[r.height,r.height]:null!=r.width&&null==r.height?x=[r.width,r.width]:null==r.width&&null==r.height&&(x=null);var u=h[0]-(f.left+f.right);h=h[1]-(f.top+f.bottom);r=r.area||{x:0,y:0,width:u,height:h};if(x){const b=x[0]/x[1];b>u/h?(u=r.width/b,r={x:r.x,y:Math.round(r.y+(r.height-u)/2),width:r.width,height:Math.round(u)}):(u=r.height*b,r={x:Math.round(r.x+(r.width-u)/2),y:r.y,
width:Math.round(u),height:r.height})}else x=[r.width,r.height];x[0]>r.width?(n=Math.min(x[0]/r.width,n),x=x[0]/r.width/n):(n=1,x=x[0]/r.width);return{resolutionScale:n,cropArea:{x:Math.round((r.x+f.left)*n),y:Math.round((r.y+f.top)*n),width:Math.round(r.width*n),height:Math.round(r.height*n)},outputScale:x,format:w,quality:y,children:z,rotation:D}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../../core/imageUtils"],
function(r,n,h,f,w){function y(k,l){const {format:m,quality:v,rotation:E,disableDecorations:A}=k||{};var t=b(k,l.padding);var q=l.width-t.left-t.right;l=l.height-t.top-t.bottom;t={x:0,y:0,width:q,height:l};if(k&&k.area){null!=k.area.x&&(t.x=Math.floor(k.area.x));null!=k.area.y&&(t.y=Math.floor(k.area.y));var d=null!=k.area.width?Math.floor(k.area.width):null,B=null!=k.area.height?Math.floor(k.area.height):null;t.width=q-t.x;t.height=l-t.y;null!=d&&null!=B?(t.width=Math.min(t.width,d),t.height=Math.min(t.height,
B)):null==d&&null!=B?(d=Math.min(t.width,d),t.height*=d/t.width,t.width=d):null!=d&&null==B&&(d=Math.min(t.height,B),t.width*=d/t.height,t.height=d)}t=u(t,k);d=Math.floor(Math.max(t.x,0));B=Math.floor(Math.max(t.y,0));q={x:d,y:B,width:Math.floor(Math.min(t.width,q-d)),height:Math.floor(Math.min(t.height,l-B))};l=q.width/q.height;t=t.width/t.height;t!==l&&(t>l?(l=Math.floor(q.width/t),q={x:q.x,y:Math.floor(q.y+(q.height-l)/2),width:q.width,height:l}):(l=Math.floor(q.height*t),q={x:Math.floor(q.x+(q.width-
l)/2),y:q.y,width:l,height:q.height}));const {width:I,height:R}=x(k,q);l=a(m);t=c[l];t=h.clamp(null!=v?v:t,0,100);return{format:l,quality:t,area:q,width:I,height:R,rotation:E,disableDecorations:!!A,ignoreBackground:!(!k||!k.ignoreBackground),ignorePadding:!(!k||!k.ignorePadding)}}function z(k,l){f.isNone(p)&&(p=document.createElement("canvas"));var m=p;if(l.premultipliedAlpha){var v=k.data;const A=v.length;for(let t=0;t<A;t+=4){var E=v[t+3];255!==E&&0<E&&(E=255/E,v[t]*=E,v[t+1]*=E,v[t+2]*=E)}}m.width=
k.width;m.height=k.height;v=m.getContext("2d",{willReadFrequently:!0});v.putImageData(k,0,0);l.flipY&&(v.save(),v.globalCompositeOperation="copy",v.scale(1,-1),v.translate(0,-v.canvas.height),v.drawImage(v.canvas,0,0),v.restore());return{ctx:v,canvas:m}}function D(k,l){return k.toDataURL(g[l.format],l.quality/100)}function x(k,l){if(!k)return l;const m=k.width;k=k.height;if(null!=m&&null!=k)return{width:Math.floor(m),height:Math.floor(k)};if(null==m&&null==k)return l;l=l.width/l.height;return null==
k?{width:Math.floor(m),height:Math.floor(m/l)}:{width:Math.floor(k*l),height:Math.floor(k)}}function u(k,l){if(!l||null==l.width||null==l.height)return k;l=l.width/l.height;const m=k.width/k.height;if(m===l)return k;if(m<l)return l=Math.floor(k.height*l),k.x-=(l-k.width)/2,k.width=l,k;l=Math.floor(k.width/l);k.y-=(l-k.height)/2;k.height=l;return k}function b(k,l){return!l||k&&k.ignorePadding?e:l}function a(k){switch(k){case "png":case "jpg":case "jpeg":return k;case null:case void 0:return"png";default:return"png"}}
let p=null;const g={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},c={png:100,jpg:98,jpeg:98},e={top:0,right:0,bottom:0,left:0};r.createEmptyImageData=w.createEmptyImageData;r.completeUserSettings=y;r.encode=function(k,l,m){const {ctx:v,canvas:E}=z(k,m);k=v.getImageData(0,0,k.width,k.height);l=D(E,l);E.width=0;E.height=0;return{dataUrl:l,data:k}};r.encodeData=function(k,l){const {ctx:m,canvas:v}=z(k,l);k=m.getImageData(0,0,k.width,k.height);v.width=0;v.height=0;return k};r.getFormatAndQuality=
function(k,l){k=a(k);const m=c[k];l=h.clamp(null!=l?l:m,0,100);return{format:k,quality:l}};r.getMaximumResolutionScale=function(k,l){return l/Math.max(k[0],k[1])};r.resampleHermite=function(k,l,m,v=0,E=0,A=k.width-v,t=k.height-E,q=!1){const {data:d}=k,{width:B,height:I,data:R}=l;A/=B;t/=I;const N=Math.ceil(A/2),K=Math.ceil(t/2);k=k.width;for(let S=0;S<I;S++)for(let U=0;U<B;U++){const J=4*(U+(q?I-S-1:S)*B);let T=0,F=0,L=0,V=0,C=0,M=0;const P=(S+.5)*t;for(let W=Math.floor(S*t);W<(S+1)*t;W++){var X=
Math.abs(P-(W+.5))/K;const H=(U+.5)*A;X*=X;for(let G=Math.floor(U*A);G<(U+1)*A;G++){var Y=Math.abs(H-(G+.5))/N;Y=Math.sqrt(X+Y*Y);if(1<=Y)continue;Y=2*Y*Y*Y-3*Y*Y+1;const O=4*(v+G+(E+W)*k);M+=Y*d[O+3];F+=Y;!m&&255>d[O+3]&&(Y=Y*d[O+3]/255);L+=Y*d[O];V+=Y*d[O+1];C+=Y*d[O+2];T+=Y}}R[J]=L/T;R[J+1]=V/T;R[J+2]=C/T;R[J+3]=M/F}return l};r.screenshotSuperSampleSettings=function(k,l,m){if(!l)return k;const {framebufferWidth:v,framebufferHeight:E,pixelRatio:A,region:t}=k;l=b(k,m);m=l.left+l.right;const q=l.top+
l.bottom,d=v-m,B=E-q,I=Math.min(8,Math.min((2048-m)/d,(2048-q)/B));return 1.5>I?k:{...k,framebufferWidth:Math.round(d*I)+m,framebufferHeight:Math.round(B*I)+q,pixelRatio:A*I,resample:{region:{x:Math.round((t.x-l.left)*I)+l.left,y:Math.round((t.y-l.top)*I)+l.top,width:Math.round(t.width*I),height:Math.round(t.height*I)},width:v,height:E}}};r.toDataUrl=D;r.toRenderSettings=function(k,l){const m=y(k,l),v=m.area,E=m.width/v.width,A=b(m,l.padding),t=A.left+A.right,q=A.top+A.bottom;return{framebufferWidth:Math.floor((l.width-
t)*E+t),framebufferHeight:Math.floor((l.height-q)*E+q),region:{x:Math.floor(v.x*E)+A.left,y:Math.floor(v.y*E)+A.top,width:m.width,height:m.height},format:m.format,quality:m.quality,rotation:m.rotation,pixelRatio:E,layers:k&&k.layers?k.layers:[],disableDecorations:m.disableDecorations,ignoreBackground:m.ignoreBackground,ignorePadding:m.ignorePadding,objectAndLayerIdColor:!1}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/imageUtils":function(){define(["exports"],function(r){function n(w,
y,z){z||(h||(h=document.createElement("canvas"),h.width=1,h.height=1),z=h);return z.getContext("2d").createImageData(w,y)}let h=null,f=!0;r.createEmptyImageData=function(w,y,z){if(!w||!y)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(w,y)}catch(D){f=!1}return n(w,y,z)};r.wrapImageData=function(w,y,z,D){if(!y||!z)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(w,y,z)}catch(x){f=!1}y=n(y,z,D);y.data.set(w,0);return y};
Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/context-util"],function(r,n,h,f){r.check=function(w){const y=h.getWebGLCapabilities(w);if(!y.available)return new n("webgl:required","WebGL is required but not supported.");if("3d"===w&&y.majorPerformanceCaveat)return new n("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");
if(!y.supportsHighPrecisionFragment)return new n("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!y.supportsVertexShaderSamplers)return new n("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(y.type===f.ContextType.WEBGL1){if(!y.supportsElementIndexUint)return new n("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");
if(!y.supportsStandardDerivatives)return new n("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!y.supportsInstancedArrays)return new n("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe",
"./context-util"],function(r,n,h,f){function w(g){switch(g){case f.ContextType.WEBGL1:return y();case f.ContextType.WEBGL2:return z()}}function y(){if(!x){{const g=new a,c=D(f.ContextType.WEBGL1,g);h.isNone(c)||(g.supportsElementIndexUint=null!==c.getExtension("OES_element_index_uint"),g.supportsStandardDerivatives=null!==c.getExtension("OES_standard_derivatives"),g.supportsInstancedArrays=null!==c.getExtension("ANGLE_instanced_arrays"),g.supportsTextureFloat=null!==c.getExtension("OES_texture_float"),
g.supportsTextureHalfFloat=null!==c.getExtension("OES_texture_half_float"),g.supportsColorBufferFloat=null!==c.getExtension("WEBGL_color_buffer_float"),g.supportsColorBufferFloatBlend=null!==c.getExtension("EXT_float_blend"),g.supportsColorBufferHalfFloat=null!==c.getExtension("EXT_color_buffer_half_float"));x=g}}return x}function z(){if(!u){{const g=new p,c=D(f.ContextType.WEBGL2,g);h.isNone(c)||(g.supportsColorBufferFloat=null!==c.getExtension("EXT_color_buffer_float"),g.supportsColorBufferFloatBlend=
null!==c.getExtension("EXT_float_blend"),g.supportsColorBufferHalfFloat=g.supportsColorBufferFloat||null!==c.getExtension("EXT_color_buffer_half_float"));u=g}}return u}function D(g,c){if(g===f.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||g===f.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const e=document.createElement("canvas");if(!e)return null;let k=f.createContext(e,g,{failIfMajorPerformanceCaveat:!0});h.isNone(k)&&(k=f.createContext(e,g),h.isSome(k)&&
(c.majorPerformanceCaveat=!0));if(h.isNone(k))return k;if(g===f.ContextType.WEBGL1){if(g=k.getParameter(k.VERSION)?.match(/^WebGL\s+([\d.]*)/))g=parseFloat(g[1]),c.available=.94<=g}else c.available=!0;c.maxTextureSize=k.getParameter(k.MAX_TEXTURE_SIZE);c.supportsVertexShaderSamplers=0<k.getParameter(k.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(g=k.getShaderPrecisionFormat(k.FRAGMENT_SHADER,k.HIGH_FLOAT))c.supportsHighPrecisionFragment=0<g.precision;return k}let x,u,b=n._createClass(function(){this.majorPerformanceCaveat=
this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}),a=function(g){function c(){var k=e.apply(this,arguments);k.type=f.ContextType.WEBGL1;return k}n._inherits(c,g);var e=n._createSuper(c);return n._createClass(c)}(b),
p=function(g){function c(){var k=e.apply(this,arguments);k.type=f.ContextType.WEBGL2;k.supportsElementIndexUint=!0;k.supportsStandardDerivatives=!0;k.supportsInstancedArrays=!0;k.supportsTextureFloat=!0;k.supportsTextureHalfFloat=!0;return k}n._inherits(c,g);var e=n._createSuper(c);return n._createClass(c)}(b);r.getWebGL1Capabilities=y;r.getWebGL2Capabilities=z;r.getWebGLCapabilities=function(g){for(g=f.getContextTypes(g);1<g.length;){const c=w(g.shift());if(c.available)return c}return w(g.shift())};
r.getWebGLVersionCapabilities=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(r,n,h){function f(D){const x=n("esri-force-webgl");if(x===r.ContextType.WEBGL1||x===r.ContextType.WEBGL2)return[x];switch(D){case "2d":return n("mac")&&n("chrome")?[r.ContextType.WEBGL1,r.ContextType.WEBGL2]:[r.ContextType.WEBGL2,r.ContextType.WEBGL1];case "3d":return[r.ContextType.WEBGL2,r.ContextType.WEBGL1]}}
function w(D,x,u={}){if(!window.WebGLRenderingContext)return z(D,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;x=y(D,x,u);h.isNone(x)&&z(D,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return x}function y(D,x,u={}){x=x===r.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d",
"moz-webgl"]:["webgl2"];let b=null;for(const a of x){try{b=D.getContext(a,u)}catch(p){}if(b)break}return b}function z(D,x){(D=D.parentNode)&&(D.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+x+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}r.ContextType=void 0;(function(D){D[D.WEBGL1=1]="WEBGL1";D[D.WEBGL2=2]="WEBGL2"})(r.ContextType||
(r.ContextType={}));r.createContext=y;r.createContextOrErrorHTML=function(D,x,u={}){for(D=f(D);1<D.length;){const b=y(x,D.shift(),u);if(h.isSome(b))return b}return w(x,D.shift(),u)};r.getContextTypes=f;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c){h=function(e){function k(m){m=l.call(this,m);m._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};m.components=[];return m}r._inherits(k,e);var l=r._createSuper(k);e=k.prototype;e.initialize=function(){this.addHandles([w.watch(()=>this.components,this._componentsWatcher.bind(this),w.initial),w.watch(()=>this.view,this._updateViewAwareWidgets.bind(this),w.initial)])};e._add=function(m,v,E,A){let t=
m;if("string"===typeof m&&this._defaultPositionLookup[m]){if(this._find(m))return;t=this._createComponent(m)}r._get(r._getPrototypeOf(k.prototype),"_add",this).call(this,t,v,E,A)};e._removeComponents=function(m){m.forEach(v=>{if(v=this._find(v))this.remove(v),v.destroy()})};e._updateViewAwareWidgets=function(m){this.components.forEach(v=>{v=(v=this._find(v))&&v.widget;void 0!==v?.view&&(v.view=m)})};e._componentsWatcher=function(m,v){this._removeComponents(v);this._addComponents(m);this._adjustPadding(m)};
e._adjustPadding=function(m){m.includes("attribution")||this._isOverridden("padding")||({top:m}=this.padding,this.padding=m)};e._addComponents=function(m){this.constructed&&m.forEach(v=>this.add(this._createComponent(v),this._defaultPositionLookup[v]))};e._createComponent=function(m){const v=this._createWidget(m);if(v)return new u({id:m,node:v})};e._createWidget=function(m){const {view:v}=this;switch(m){case "attribution":return new a({view:v});case "compass":return new p({view:v});case "navigation-toggle":return new g({view:v});
case "zoom":return new c({view:v})}};return r._createClass(k)}(b);n.__decorate([y.property()],h.prototype,"components",void 0);return h=n.__decorate([x.subclass("esri.views.ui.DefaultUI")],h)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D,x){h=function(u){function b(){var p=a.apply(this,arguments);p.widget=null;return p}r._inherits(b,u);var a=r._createSuper(b);u=b.prototype;u.destroy=function(){this.widget&&this.widget.destroy();this.node=null};u.castNode=function(p){if(!p)return this._set("widget",null),null;if("string"===typeof p||p&&"nodeType"in p)return this._set("widget",null),f.byId(p);p&&"function"===typeof p.render&&!p.domNode&&(p.domNode=document.createElement("div"));this._set("widget",p);return p.domNode};
r._createClass(b,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(p){const g=this._get("node");p!==g&&(p&&p.classList.add("esri-component"),g&&g.classList.remove("esri-component"),this._set("node",p))}}]);return b}(h);n.__decorate([w.property({dependsOn:[]})],h.prototype,"id",null);n.__decorate([w.property()],h.prototype,"node",null);n.__decorate([y.cast("node")],h.prototype,"castNode",null);n.__decorate([w.property({readOnly:!0})],h.prototype,
"widget",void 0);return h=n.__decorate([x.subclass("esri.views.ui.Component")],h)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/domUtils ../../core/Evented ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c,e){function k(A){return 0===A?"0":`${A}px`}function l(A){const t="object"===typeof A&&null!==A&&Object.getPrototypeOf(A);return null!==t&&t!==Object.prototype||!("component"in A||"index"in A||"position"in A)?null:A}function m(A,{top:t,bottom:q,left:d,right:B}){A.style.top=t;A.style.bottom=q;A.style.left=d;A.style.right=B}const v={left:0,top:0,bottom:0,right:0},E={bottom:30,top:15,right:15,left:15};h=function(A){function t(d){var B=q.call(this,d);B._cornerNameToContainerLookup=
{};B._positionNameToContainerLookup={};B._components=[];B._componentToKey=new Map;B._locale=e.getLocale();B.view=null;B._applyViewPadding=()=>{const I=B.container;I&&m(I,B._toPixelPosition(B._getViewPadding()))};B._applyUIPadding=()=>{const I=B._innerContainer;I&&m(I,B._toPixelPosition(B.padding))};B._initContainers();return B}r._inherits(t,A);var q=r._createSuper(t);A=t.prototype;A.initialize=function(){this.addHandles([z.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,z.initial),
z.watch(()=>this.padding,this._applyUIPadding,z.initial),z.watch(()=>[this.container,this._locale],([d,B])=>{d&&d.setAttribute("lang",B)},z.initial),e.onLocaleChange(d=>{this._locale=d})])};A.destroy=function(){this.container=null;for(const d of this._components)d.destroy();this._components.length=0;this._componentToKey.clear()};A.castPadding=function(d){return"number"===typeof d?{bottom:d,top:d,right:d,left:d}:{...E,...d}};A.add=function(d,B){let I,R;if(Array.isArray(d))d.forEach(K=>this.add(K,B));
else{var N=l(d);N&&({index:I,position:B,component:d,key:R}=N);B&&"object"===typeof B&&({index:I,key:R,position:B}=B);!d||B&&!this._isValidPosition(B)||this._add(d,B,I,R)}};A.remove=function(d,B){if(d){if(Array.isArray(d))return d.map(N=>this.remove(N,B));var I=this._find(d);if(I&&(!this._componentToKey.has(d)||this._componentToKey.get(d)===B)){var R=this._components.indexOf(I);I.node.parentNode?.removeChild(I.node);this._componentToKey.delete(d);return this._components.splice(R,1)[0]}}};A.empty=function(d){if(Array.isArray(d))return d.map(B=>
this.empty(B)).reduce((B,I)=>B.concat(I));d??(d="manual");return"manual"===d?Array.prototype.slice.call(this._manualContainer.children).filter(B=>!B.classList.contains("esri-ui-corner")).map(B=>this.remove(B)):this._isValidPosition(d)?Array.prototype.slice.call(this._cornerNameToContainerLookup[d].children).map(this.remove,this):null};A.move=function(d,B){Array.isArray(d)&&d.forEach(N=>this.move(N,B));if(d){var I=l(d)||l(B);if(I){var R=I.index;B=I.position;d=I.component||d}(!B||this._isValidPosition(B))&&
(d=this.remove(d))&&this.add(d,{position:B,index:R})}};A.find=function(d){return d?(d=this._findById(d))&&(d.widget||d.node):null};A.getComponents=function(d){return d?Array.isArray(d)?d.map(B=>this._getComponentsAtPosition(B)).flat():this._getComponentsAtPosition(d):this._components.map(({widget:B,node:I})=>B??I)};A.getPosition=function(d){for(const B in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[B].contains(d))return B;return null};A._add=function(d,B,I,R){d instanceof
g||(d=new g({node:d}));this._place({component:d,position:B,index:I});this._components.push(d);R&&this._componentToKey.set(d,R)};A._find=function(d){return d?d instanceof g?this._findByComponent(d):"string"===typeof d?this._findById(d):this._findByNode(d.domNode||d):null};A._getViewPadding=function(){return this.view?.padding??v};A._attachContainers=function(d){d.appendChild(this._innerContainer);d.appendChild(this._manualContainer)};A._initContainers=function(){var d=document.createElement("div");
d.classList.add("esri-ui-inner-container","esri-ui-corner-container");const B=document.createElement("div");B.classList.add("esri-ui-inner-container","esri-ui-manual-container");const I=document.createElement("div");I.classList.add("esri-ui-top-left","esri-ui-corner");d.appendChild(I);const R=document.createElement("div");R.classList.add("esri-ui-top-right","esri-ui-corner");d.appendChild(R);const N=document.createElement("div");N.classList.add("esri-ui-bottom-left","esri-ui-corner");d.appendChild(N);
const K=document.createElement("div");K.classList.add("esri-ui-bottom-right","esri-ui-corner");d.appendChild(K);this._innerContainer=d;this._manualContainer=B;d=c.isRTL();this._cornerNameToContainerLookup={"top-left":I,"top-right":R,"bottom-left":N,"bottom-right":K,"top-leading":d?R:I,"top-trailing":d?I:R,"bottom-leading":d?K:N,"bottom-trailing":d?N:K};this._positionNameToContainerLookup={manual:B,...this._cornerNameToContainerLookup}};A._isValidPosition=function(d){return!!this._positionNameToContainerLookup[d]};
A._place=function(d){var B=d.position??"manual";const {component:I,index:R}=d;d=this._positionNameToContainerLookup[B];B=null!=R&&-1<R;var N=I.widget;N&&!N._started&&"function"===typeof N.postMixInProperties&&"function"===typeof N.buildRendering&&"function"===typeof N.postCreate&&"function"===typeof N.startup&&I.widget.startup();B?(B=Array.prototype.slice.call(d.children),0===R?d.firstChild?f.insertBefore(I.node,d.firstChild):d.appendChild(I.node):R>=B.length?d.appendChild(I.node):f.insertBefore(I.node,
B[R])):d.appendChild(I.node)};A._toPixelPosition=function(d){return{top:k(d.top),left:k(d.left),right:k(d.right),bottom:k(d.bottom)}};A._findByComponent=function(d){return this._components.find(B=>B===d)??null};A._findById=function(d){return this._components.find(({id:B})=>B===d)??null};A._findByNode=function(d){return this._components.find(({node:B})=>B===d)??null};A._getComponentsAtPosition=function(d){return Array.prototype.slice.call(this._positionNameToContainerLookup[d].children).map(B=>this._findByNode(B)).filter(y.isSome).map(({widget:B,
node:I})=>B??I)};r._createClass(t,[{key:"container",set:function(d){const B=this._get("container");d!==B&&(d&&(d.classList.add("esri-ui"),p.setCalciteThemeClass(d),this._attachContainers(d)),B&&(B.classList.remove("esri-ui"),m(B,{top:"",bottom:"",left:"",right:""}),f.empty(B)),this._set("container",d))}},{key:"height",get:function(){const d=this.view?.height??0;if(0===d)return d;const B=this._getViewPadding(),{top:I,bottom:R}=B;return Math.max(d-I-R,0)}},{key:"padding",get:function(){return this._get("padding")},
set:function(d){this._overrideIfSome("padding",d)}},{key:"width",get:function(){const d=this.view?.width??0;if(0===d)return d;const B=this._getViewPadding(),{left:I,right:R}=B;return Math.max(d-I-R,0)}},{key:"test",get:function(){return{components:this._components}}}]);return t}(w.EventedAccessor);n.__decorate([D.property()],h.prototype,"_locale",void 0);n.__decorate([D.property()],h.prototype,"container",null);n.__decorate([D.property()],h.prototype,"height",null);n.__decorate([D.property({value:E})],
h.prototype,"padding",null);n.__decorate([x.cast("padding")],h.prototype,"castPadding",null);n.__decorate([D.property()],h.prototype,"view",void 0);n.__decorate([D.property()],h.prototype,"width",null);return h=n.__decorate([a.subclass("esri.views.ui.UI")],h)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g){w=function(c){function e(l,m){var v=k.call(this,l,m);v._isOpen=!1;v._attributionTextOverflowed=!1;v._prevSourceNodeHeight=0;v._resizeObserver=new ResizeObserver(E=>E.forEach(({target:A})=>v._checkSourceTextOverflow(A)));v.iconClass="esri-icon-description";v.itemDelimiter=" | ";v.messages=null;v.viewModel=new u;return v}r._inherits(e,c);var k=r._createSuper(e);c=e.prototype;c.initialize=function(){this.addHandles(h.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))};
c.destroy=function(){this._resizeObserver?.disconnect()};c.render=function(){return p.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};c.renderPoweredBy=function(){return p.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",p.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",
rel:"noreferrer"},"Esri"))};c.renderSourcesNode=function(){const l=this._isOpen,m=this._isInteractive,v=m?"0":"",{attributionText:E}=this;return p.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:l,["esri-interactive"]:m}),innerHTML:E,tabindex:v})};c._afterSourcesNodeCreate=function(l){this._prevSourceNodeHeight=l.clientWidth;this._resizeObserver.observe(l)};c._checkSourceTextOverflow=function(l){let m=
!1;const {clientHeight:v,clientWidth:E,scrollWidth:A}=l;l=A>E;const t=this._attributionTextOverflowed!==l;this._attributionTextOverflowed=l;t&&(m=!0);this._isOpen&&(l=v<this._prevSourceNodeHeight,this._prevSourceNodeHeight=v,l&&(this._isOpen=!1,m=!0));m&&this.scheduleRender()};c._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};r._createClass(e,[{key:"_isInteractive",get:function(){return this._isOpen||this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((l,
m)=>{l.includes(m.text)||l.push(m.text);return l},[]).join(this.itemDelimiter)}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(l){this._overrideIfSome("label",l)}},{key:"view",get:function(){return this.viewModel.view},set:function(l){this.viewModel.view=l}}]);return e}(x);n.__decorate([f.property()],w.prototype,"_isOpen",void 0);n.__decorate([f.property()],w.prototype,"_isInteractive",null);n.__decorate([f.property()],w.prototype,"_attributionTextOverflowed",void 0);
n.__decorate([f.property()],w.prototype,"_prevSourceNodeHeight",void 0);n.__decorate([f.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],w.prototype,"attributionText",null);n.__decorate([f.property()],w.prototype,"iconClass",void 0);n.__decorate([f.property()],w.prototype,"itemDelimiter",void 0);n.__decorate([f.property()],w.prototype,"label",null);n.__decorate([f.property(),a.messageBundle("esri/widgets/Attribution/t9n/Attribution")],w.prototype,"messages",void 0);n.__decorate([f.property()],
w.prototype,"view",null);n.__decorate([f.property({type:u})],w.prototype,"viewModel",void 0);n.__decorate([b.accessibleHandler()],w.prototype,"_toggleState",null);return w=n.__decorate([D.subclass("esri.widgets.Attribution")],w)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g,c){function e(v,E){return v&&"copyright"in v&&(!E||"function"===typeof v.originOf&&"user"===v.originOf("copyright"))}function k(v,E){return v.length!==E.length||v.some((A,t)=>A.text!==E[t].text)}function l(v,E,A){A&&E&&(v.find(t=>t.layerView===E&&t.text===A)||v.push({text:A,layerView:E}))}const m=[];h=function(v){function E(t){var q=A.call(this,t);q._clear=()=>{q._fetchedAttributionData.clear();q._pendingAttributions.clear();q.handles.remove("suspension");q.notifyChange("state")};
q._pendingAttributions=new Set;q._fetchedAttributionData=new Map;q.items=new w;q.view=null;q._allLayerViewsChange=d=>{q.handles.remove("suspension");const B=q.get("view.allLayerViews");B&&q.handles.add(B.map(I=>z.watch(()=>[I.suspended,I.layer?.attributionVisible],()=>q._updateAttributionItems())),"suspension");d&&d.removed&&d.removed.forEach(I=>{q._pendingAttributions.delete(I);q._fetchedAttributionData.delete(I)});q._updateAttributionItems()};q.handles.add([z.on(()=>q.view?.allLayerViews,"change",
d=>q._allLayerViewsChange(d),{onListenerAdd:()=>q._allLayerViewsChange(),onListenerRemove:q._clear}),z.when(()=>!0===q.view?.stationary,()=>q._updateAttributionItems())]);return q}r._inherits(E,v);var A=r._createSuper(E);v=E.prototype;v.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};v._updateAttributionItems=function(){const t=this.view,q=t?.allLayerViews;m.length=0;t&&q?(q.forEach(d=>{if(!d.suspended&&d.layer?.attributionVisible){var B=
d.layer;if(e(B,"user"))l(m,d,B.copyright);else if(B.hasAttributionData)if(this._fetchedAttributionData.has(d)){var I=this._fetchedAttributionData.get(d);I?l(m,d,this._getDynamicAttribution(I,t,B)):e(B)&&l(m,d,B.copyright)}else this._fetchAttributionData(d);else(I=B.get("portalItem.accessInformation"))?l(m,d,I):l(m,d,B.copyright)}}),k(this.items,m)&&(this.items.removeAll(),this.items.addMany(m)),m.length=0,this.notifyChange("state")):this._clear()};v._fetchAttributionData=async function(t){if(!this._pendingAttributions.has(t)){this._pendingAttributions.add(t);
var q=await f.result(t.layer.fetchAttributionData());this._pendingAttributions.has(t)&&(q=q.ok?this._createContributionIndex(q.value,"bing-maps"===t.layer.type):null,this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,q));this._updateAttributionItems()}};v._createContributionIndex=function(t,q){t=t.contributors;const d={};if(!t)return d;for(let N=0;N<t.length;N++){const K=t[N];var B=K.coverageAreas;if(!B)return;for(const X of B){var I=X.bbox,R=X.zoomMin-(q&&X.zoomMin?1:0);B=X.zoomMax-
(q&&X.zoomMax?1:0);for(I={extent:g.geographicToWebMercator({xmin:I[1],ymin:I[0],xmax:I[3],ymax:I[2],spatialReference:c.WGS84}),attribution:K.attribution||"",score:null!=X.score?X.score:100,id:N};R<=B;R++)d[R]=d[R]||[],d[R].push(I)}}d.maxKey=Math.max.apply(null,Object.keys(d));return d};v._getDynamicAttribution=function(t,q,d){const {extent:B,scale:I}=q;d=d.tileInfo?.scaleToZoom(I)??0;d=Math.min(t.maxKey??0,Math.round(d));if(!B||null==d||-1>=d)return"";t=t[d];const R=g.project(B.center.clone().normalize(),
q.spatialReference),N={};return t?t.filter(K=>{const X=K.id;(K=!N[X]&&R&&K.extent&&p.extentContainsPoint(K.extent,R))&&(N[X]=!0);return K}).sort((K,X)=>X.score-K.score||K.objectId-X.objectId).map(K=>K.attribution).join(", "):""};r._createClass(E,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return E}(y.HandleOwner);n.__decorate([D.property({readOnly:!0,type:w})],h.prototype,"items",void 0);n.__decorate([D.property({readOnly:!0})],
h.prototype,"state",null);n.__decorate([D.property()],h.prototype,"view",void 0);return h=n.__decorate([a.subclass("esri.widgets.Attribution.AttributionViewModel")],h)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g){f=function(c){function e(l,m){l=k.call(this,l,m);l.iconClass=u.CSS.widgetIcon;l.messages=null;l.viewModel=new x;return l}r._inherits(e,c);var k=r._createSuper(e);c=e.prototype;c.reset=function(){return this.viewModel.reset()};c.render=function(){const {orientation:l,state:m}=this.viewModel;var v="disabled"===m,E="compass"===("rotation"===m?"rotation":"compass");const A=v?-1:0;v={[u.CSS.disabled]:v,[u.CSS.interactive]:!v};E={[u.CSS.northIcon]:E,[u.CSS.rotationIcon]:!E};
const {messages:t}=this;return p.tsx("div",{bind:this,class:this.classes(u.CSS.base,v),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:A,"aria-label":t.reset,title:t.reset},p.tsx("span",{"aria-hidden":"true",class:this.classes(u.CSS.icon,E),styles:this._toRotationTransform(l)}),p.tsx("span",{class:u.CSS.text},t.reset))};c._reset=function(){this.viewModel.reset()};c._toRotationTransform=function(l){return{transform:`rotateZ(${l.z}deg)`}};r._createClass(e,[{key:"goToOverride",get:function(){return this.viewModel.goToOverride},
set:function(l){this.viewModel.goToOverride=l}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(l){this._overrideIfSome("label",l)}},{key:"view",get:function(){return this.viewModel.view},set:function(l){this.viewModel.view=l}}]);return e}(D);n.__decorate([h.property()],f.prototype,"goToOverride",null);n.__decorate([h.property()],f.prototype,"iconClass",void 0);n.__decorate([h.property()],f.prototype,"label",null);n.__decorate([h.property(),a.messageBundle("esri/widgets/Compass/t9n/Compass")],
f.prototype,"messages",void 0);n.__decorate([h.property()],f.prototype,"view",null);n.__decorate([h.property({type:x})],f.prototype,"viewModel",void 0);n.__decorate([b.accessibleHandler()],f.prototype,"_reset",null);return f=n.__decorate([z.subclass("esri.widgets.Compass")],f)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a){h=function(p){function g(e){e=c.call(this,e);e._handles=new f;e.orientation={x:0,y:0,z:0};e.view=null;e._updateForCamera=e._updateForCamera.bind(r._assertThisInitialized(e));e._updateForRotation=e._updateForRotation.bind(r._assertThisInitialized(e));e._updateRotationWatcher=e._updateRotationWatcher.bind(r._assertThisInitialized(e));return e}r._inherits(g,p);var c=r._createSuper(g);p=g.prototype;p.initialize=function(){this._handles.add(y.watch(()=>this.view,this._updateRotationWatcher,
y.initial))};p.destroy=function(){w.removeMaybe(this._handles);this.view=null};p.reset=function(){if(this.get("view.ready")){var e={};"2d"===this.view?.type?e.rotation=0:e.heading=0;this.callGoTo({target:e})}};p._updateForRotation=function(e){void 0!==e&&null!==e&&(this.orientation={z:e})};p._updateForCamera=function(e){e&&(this.orientation={x:0,y:0,z:-e.heading})};p._updateRotationWatcher=function(e){this._handles.removeAll();e&&this._handles.add("2d"===e.type?y.watch(()=>e?.rotation,this._updateForRotation,
y.initial):y.watch(()=>e?.camera,this._updateForCamera,y.initial))};r._createClass(g,[{key:"canShowNorth",get:function(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return g}(a.GoToMixin(h));n.__decorate([z.property({readOnly:!0})],h.prototype,"canShowNorth",null);n.__decorate([z.property()],h.prototype,"orientation",void 0);n.__decorate([z.property({readOnly:!0})],
h.prototype,"state",null);n.__decorate([z.property()],h.prototype,"view",void 0);return h=n.__decorate([b.subclass("esri.widgets.CompassViewModel")],h)})},"esri/widgets/Compass/css":function(){define(["exports"],function(r){r.CSS={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g){f=function(c){function e(l,m){l=k.call(this,l,m);l.iconClass=x.CSS.widgetIcon;l.messages=null;l.viewModel=new u;return l}r._inherits(e,c);var k=r._createSuper(e);c=e.prototype;c.toggle=function(){return this.viewModel.toggle()};c.render=function(){const l="disabled"===this.get("viewModel.state");var m="pan"===this.get("viewModel.navigationMode");const v={[x.CSS.activeButton]:m};m={[x.CSS.activeButton]:!m};const E=l?-1:0,A=this.messages.toggle;return p.tsx("div",
{bind:this,class:this.classes(x.CSS.base,{[x.CSS.disabled]:l,[x.CSS.isLayoutHorizontal]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:E,"aria-label":A,title:A},p.tsx("div",{class:this.classes(x.CSS.button,x.CSS.panButton,v)},p.tsx("span",{class:x.CSS.panIcon})),p.tsx("div",{class:this.classes(x.CSS.button,x.CSS.rotateButton,m)},p.tsx("span",{class:x.CSS.rotationIcon})))};c._toggle=function(){this.toggle()};r._createClass(e,[{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(l){this._overrideIfSome("label",l)}},{key:"layout",set:function(l){"horizontal"!==l&&(l="vertical");this._set("layout",l)}},{key:"view",get:function(){return this.viewModel.view},set:function(l){this.viewModel.view=l}}]);return e}(D);n.__decorate([h.property()],f.prototype,"iconClass",void 0);n.__decorate([h.property()],f.prototype,"label",null);n.__decorate([h.property({value:"vertical"})],f.prototype,"layout",null);n.__decorate([h.property(),a.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],
f.prototype,"messages",void 0);n.__decorate([h.property()],f.prototype,"view",null);n.__decorate([h.property({type:u})],f.prototype,"viewModel",void 0);n.__decorate([b.accessibleHandler()],f.prototype,"_toggle",null);return f=n.__decorate([z.subclass("esri.widgets.NavigationToggle")],f)})},"esri/widgets/NavigationToggle/css":function(){define(["exports"],function(r){r.CSS={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",
panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D,x){h=function(u){function b(p){p=a.call(this,p);p.navigationMode="pan";p.view=null;return p}r._inherits(b,u);var a=r._createSuper(b);u=b.prototype;u.initialize=function(){this.own(f.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))};u.destroy=function(){this.view=null};u.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};u._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction=
"pan"===this.navigationMode?"pan":"rotate"};r._createClass(b,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view?.type?"ready":"disabled"}}]);return b}(h);n.__decorate([w.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([w.property()],h.prototype,"navigationMode",void 0);n.__decorate([w.property()],h.prototype,"view",void 0);return h=n.__decorate([x.subclass("esri.widgets.NavigationToggleViewModel")],h)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b,a,p,g){w=function(c){function e(l,m){l=k.call(this,l,m);l.iconClass="esri-icon-zoom-in-magnifying-glass";l.messages=null;l.viewModel=new g;return l}r._inherits(e,c);var k=r._createSuper(e);c=e.prototype;c.initialize=function(){this._zoomInButton=new p({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new p({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};c.destroy=function(){this._zoomInButton=h.destroyMaybe(this._zoomInButton);
this._zoomOutButton=h.destroyMaybe(this._zoomOutButton)};c.render=function(){const l={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:m,canZoomOut:v}=this.viewModel;this._zoomInButton.enabled=m;this._zoomOutButton.enabled=v;const {zoomIn:E,zoomOut:A}=this.messages;this._zoomInButton.title=E;this._zoomOutButton.title=A;return a.tsx("div",{class:this.classes("esri-zoom esri-widget",l)},this._zoomInButton.render(),this._zoomOutButton.render())};c.zoomIn=function(){return this.viewModel.zoomIn()};
c.zoomOut=function(){return this.viewModel.zoomOut()};r._createClass(e,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(l){this._overrideIfSome("label",l)}},{key:"layout",set:function(l){"horizontal"!==l&&(l="vertical");this._set("layout",l)}},{key:"view",get:function(){return this.viewModel.view},set:function(l){this.viewModel.view=l}}]);return e}(x);n.__decorate([f.property()],w.prototype,"iconClass",void 0);n.__decorate([f.property()],w.prototype,"label",null);n.__decorate([f.property({value:"vertical"})],
w.prototype,"layout",null);n.__decorate([f.property(),b.messageBundle("esri/widgets/Zoom/t9n/Zoom")],w.prototype,"messages",void 0);n.__decorate([f.property()],w.prototype,"view",null);n.__decorate([f.property({type:g})],w.prototype,"viewModel",void 0);return w=n.__decorate([D.subclass("esri.widgets.Zoom")],w)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(r,n,h,f,w,y,z,D,x,u,b){f=function(a){function p(){var c=g.apply(this,arguments);c.enabled=!0;c.iconClass="";c.title="";return c}r._inherits(p,a);var g=r._createSuper(p);a=p.prototype;a.render=function(){const c=this.enabled?0:-1,e={[this.iconClass]:!!this.iconClass};return u.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},u.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",e)}),u.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};a._triggerAction=function(){this.action.call(this)};return r._createClass(p)}(D);n.__decorate([h.property()],f.prototype,"action",void 0);n.__decorate([h.property()],f.prototype,"enabled",void 0);n.__decorate([h.property()],f.prototype,"iconClass",void 0);n.__decorate([h.property()],f.prototype,"title",void 0);n.__decorate([x.accessibleHandler()],
f.prototype,"_triggerAction",null);return f=n.__decorate([z.subclass("esri.widgets.IconButton")],f)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(r,
n,h,f,w,y,z,D,x,u,b,a){h=function(p){function g(e){return c.call(this,e)}r._inherits(g,p);var c=r._createSuper(g);p=g.prototype;p.destroy=function(){this.view=null};p.zoomIn=function(){if(this.canZoomIn){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():w.ignoreAbortErrors(e.goTo({zoomFactor:2}))}};p.zoomOut=function(){if(this.canZoomOut){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():w.ignoreAbortErrors(e.goTo({zoomFactor:.5}))}};r._createClass(g,[{key:"canZoomIn",get:function(){return f.isSome(this._zoomConditions)&&
this._zoomConditions.canZoomIn}},{key:"canZoomOut",get:function(){return f.isSome(this._zoomConditions)&&this._zoomConditions?.canZoomOut}},{key:"state",get:function(){return this.view?.ready?"ready":"disabled"}},{key:"view",set:function(e){e?"2d"===e.type?this._zoomConditions=new b({view:e}):"3d"===e.type&&(this._zoomConditions=new a({view:e})):this._zoomConditions=null;this._set("view",e)}}]);return g}(h);n.__decorate([y.property()],h.prototype,"_zoomConditions",void 0);n.__decorate([y.property()],
h.prototype,"canZoomIn",null);n.__decorate([y.property()],h.prototype,"canZoomOut",null);n.__decorate([y.property({readOnly:!0})],h.prototype,"state",null);n.__decorate([y.property()],h.prototype,"view",null);return h=n.__decorate([u.subclass("esri.widgets.Zoom.ZoomViewModel")],h)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D){h=function(x){function u(){return b.apply(this,arguments)}r._inherits(u,x);var b=r._createSuper(u);r._createClass(u,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const a=this.get("view.animation.target.scale")||this.get("view.scale"),p=this.get("view.constraints.effectiveMaxScale");return 0===p||a>p}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const a=this.get("view.animation.target.scale")||this.get("view.scale"),p=this.get("view.constraints.effectiveMinScale");
return 0===p||a<p}}]);return u}(h);n.__decorate([f.property({readOnly:!0})],h.prototype,"canZoomIn",null);n.__decorate([f.property({readOnly:!0})],h.prototype,"canZoomOut",null);n.__decorate([f.property()],h.prototype,"view",void 0);return h=n.__decorate([D.subclass("esri.widgets.Zoom.ZoomConditions2D")],h)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(r,n,h,f,w,y,z,D){h=function(x){function u(){return b.apply(this,arguments)}r._inherits(u,x);var b=r._createSuper(u);r._createClass(u,[{key:"canZoomIn",get:function(){return!!this.view.ready}},{key:"canZoomOut",get:function(){return!!this.view.ready}}]);return u}(h);n.__decorate([f.property({readOnly:!0})],h.prototype,"canZoomIn",null);n.__decorate([f.property({readOnly:!0})],h.prototype,"canZoomOut",null);n.__decorate([f.property()],h.prototype,"view",void 0);return h=n.__decorate([D.subclass("esri.widgets.Zoom.ZoomConditions3D")],
h)})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),function(r,n,h,f,w,y,z,D){f=function(x){function u(a){a=b.call(this,a);a.components=["attribution","zoom"];return a}r._inherits(u,x);var b=r._createSuper(u);return r._createClass(u)}(D);
n.__decorate([h.property()],f.prototype,"components",void 0);return f=n.__decorate([z.subclass("esri.views.ui.2d.DefaultUI2D")],f)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(r,n,h,f,w,y,z,D){var x;f=x=function(u){function b(p){p=
a.call(this,p);p.color=new h([0,0,0,1]);return p}r._inherits(b,u);var a=r._createSuper(b);b.prototype.clone=function(){return new x(w.clone({color:this.color}))};return r._createClass(b)}(f.JSONSupport);n.__decorate([y.property({type:h,json:{write:!0}})],f.prototype,"color",void 0);return f=x=n.__decorate([D.subclass("esri.webmap.background.ColorBackground")],f)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/screenUtils ../core/Warning ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Point ../geometry/projection ../geometry/support/spatialReferenceUtils ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/DefaultUI ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(r,
n,h,f,w,y,z,D,x,u,b,a,p,g,c,e,k,l,m,v,E,A,t,q,d,B,I,R,N,K,X,Y,S,U,J,T,F,L,V,C,M,P,W,H,G,O,Q,aa,ba,da,ia,fa,ka,na){async function pa(){const [,{GraphicsView2D:ja,GraphicContainer:ra,LabelManager:va,MapViewNavigation:Z,MagnifierView2D:ca,Stage:ea}]=await Promise.all([new Promise((ha,qa)=>r(["./2d/webglDeps"],ha,qa)),new Promise((ha,qa)=>r(["./2d/mapViewDeps"],ha,qa))]);Ca=ja;Da=ra;Ea=va;Fa=Z;Ga=ca;Ha=ea}function ta(ja){const ra=ja.getObjectId();return ra?`${ja.layer?.uid??ja.sourceLayer?.uid??"MapView"}/${ra}`:
`"MapView/${ja.uid}`}function wa(ja,ra,va,Z,ca){return ea=>{if(ea instanceof f){if(ea.layer===ja)ca?.();else{var ha=ja.allLayerViews.find(qa=>qa.layer===ea.layer);ha&&Z?.(ha)}va(ta(ea))}else(ha=ja.allLayerViews.find(qa=>qa.layer===ea))&&ra(ha)}}function ua(ja,ra){if(ja)if(u.isIterable(ja))for(const va of ja)if(u.isIterable(va))for(const Z of va)ra(Z);else ra(va);else ra(ja)}let Ha,Ca,Da,Ea,Fa,Ga;v=function(ja){function ra(Z){var ca=va.call(this,Z);ca._magnifierView=null;ca._stage=null;ca._resolveWhenReady=
[];ca.rootLayerViews=new z({getCollections:()=>[ca.basemapView?.baseLayerViews,ca.layerViews,ca.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});ca.featuresTilingScheme=null;ca.fullOpacity=1;ca.graphicsView=null;ca.labelManager=null;ca.mapViewNavigation=null;ca.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};ca.rendering=!1;ca.supersampleScreenshotsEnabled=!0;ca.supportsGround=!1;ca._stationaryTimer=null;ca._gotoTask=
null;ca.frameTask=new U(n._assertThisInitialized(ca));ca._pePromise=null;ca.floors=new y;ca.highlightOptions=new O;ca.inputManager=new H({view:n._assertThisInitialized(ca)});ca.map=null;ca.resizeAlign="center";ca.spatialReferenceLocked=!1;ca.timeline=new Q.Timeline;ca.type="2d";ca.ui=new ka;ca._pixelFormat={flipY:!0,premultipliedAlpha:!0};ca.constraints=new T;ca.padding={top:0,right:0,bottom:0,left:0};ca.handles.add([g.watch(()=>ca.viewpoint,()=>{ca._lastStationaryEventTimestamp=performance.now();
ca._flipStationary(160)},g.sync),ca.on("resize",ea=>ca._resizeHandler(ea)),g.watch(()=>ca.animationManager?.animation,ea=>{ca.animation=ea})]);k.initialize();return ca}n._inherits(ra,ja);var va=n._createSuper(ra);ja=ra.prototype;ja.destroy=function(){this._set("preconditionsReady",!1);this._gotoTask=this.frameTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};ja.goTo=function(Z,ca){if(Z)return this.animation&&(this.animation=null),this._createAnimation(),
g.whenOnce(()=>this.ready,ca).then(()=>{const ea={animate:!0,...ca},ha=W.create(Z,this);this.animation?.update(ha);this._gotoTask={};return ea.animate?this._gotoAnimated(ha,ea):this._gotoImmediate(ha,ea)});b.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")};ja.hitTest=async function(Z,ca){const ea=da.isSupportedScreenPointEvent(Z)?da.createScreenPointFromSupportedEvent(this,Z):Z;if(!this.ready||isNaN(ea.x)||isNaN(ea.y))return{screenPoint:ea,results:[]};let ha=new Set,
qa=!1,ma=null,oa=null;ca?.include?ua(ca.include,wa(this,la=>ha.add(la),la=>{ma||(ma=new Set);ma.add(la)},la=>ha.add(la),()=>qa=!0)):(qa=!0,ha=new Set(this.allLayerViews));ca?.exclude&&ua(ca.exclude,wa(this,la=>ha.delete(la),la=>{oa||(oa=new Set);oa.add(la)}));ca=this.allLayerViews.filter(la=>!la.suspended&&ha.has(la)).reverse();const sa=this.toMap(ea);Z=qa?this.graphicsView.hitTest(sa).map(la=>({type:"graphic",graphic:la,layer:null,mapPoint:sa})):[];ca=await Promise.all(ca.map(la=>la.hitTest(sa,ea)).toArray());
Z=[...Z,...ca].filter(a.isSome).flat().filter(a.isSome);ma&&(Z=Z.filter(la=>!("graphic"in la)||!la.graphic||ma?.has(ta(la.graphic))));oa&&(Z=Z.filter(la=>!("graphic"in la)||!la.graphic||oa?.has(ta(la.graphic))));return{screenPoint:ea,results:Z}};ja.takeScreenshot=async function(Z){Z=this._createScreenshotPlan(Z);const ca=await this._stage.takeScreenshot(Z);return ba.encode(ca,{format:Z.format,quality:Z.quality,rotation:0,disableDecorations:!1},this._pixelFormat)};ja._takeScreenshot=async function(Z){Z=
this._createScreenshotPlan(Z);Z=await this._stage.takeScreenshot(Z);return ba.encodeData(Z,this._pixelFormat)};ja._createScreenshotPlan=function(Z){Z=Z??{};const ca=this.supersampleScreenshotsEnabled?Math.min(4,ba.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let ea;Z.layers?(ea=[],Z.layers.forEach(ma=>{const oa=this.allLayerViews.find(sa=>sa.layer.id===ma.id);oa&&"container"in oa&&oa.container&&ea.push(oa.container)})):ea=this._stage.children;
const {format:ha,quality:qa}=ba.getFormatAndQuality(Z.format,Z.quality);return aa(Z,ca,this.size,this.padding,ha,qa,ea,Z.rotation)};ja.toMap=function(Z){if(!this.ready)return null;Z=da.isSupportedScreenPointEvent(Z)?da.createScreenPointFromSupportedEvent(this,Z):Z;const [ca,ea]=this.state.toMap([0,0],[Z.x,Z.y]);return new q({x:ca,y:ea,spatialReference:this.spatialReference})};ja.toScreen=function(Z){if(!this.ready)return null;Z=this._project(Z,this.spatialReference);Z=[Z.x,Z.y];this.state.toScreen(Z,
Z);return c.createScreenPoint(Z[0],Z[1])};ja.on=function(Z,ca,ea,ha){return(ea=this.inputManager&&this.viewEvents.on(Z,ca,ea,ha))?ea:n._get(n._getPrototypeOf(ra.prototype),"on",this).call(this,Z,ca)};ja.hasEventListener=function(Z){return n._get(n._getPrototypeOf(ra.prototype),"hasEventListener",this).call(this,Z)||this.viewEvents.hasHandler(Z)};ja.whenLayerView=function(Z){return n._get(n._getPrototypeOf(ra.prototype),"whenLayerView",this).call(this,Z)};ja.graphicChanged=function(Z){this.graphicsView&&
this.graphicsView.graphicUpdateHandler(Z)};ja.whenReady=function(){return new Promise(Z=>{this.ready?Z(this):this._resolveWhenReady.push(Z)})};ja.forceDOMReadyCycle=function(){this.forceReadyCycle()};ja.getDefaultSpatialReference=function(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null};ja.hasLayerViewModule=function(Z){return J.layerView2DImporter.hasLayerViewModule(Z)};ja.importLayerView=function(Z){return J.layerView2DImporter.importLayerView(Z)};
ja.pixelSizeAt=function(){return this.ready?this.state.resolution:(b.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};ja.popupHitTest=function(Z){return this.hitTest(Z).then(ca=>({...ca,mapPoint:this.toMap(Z)}))};ja.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};ja.validate=function(){let Z=ia.check(this.type);x("safari")&&9>x("safari")&&(Z=new D("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",
{type:"safari",requiredVersion:9,detectedVersion:x("safari")}));return a.isSome(Z)?(b.getLogger(this.declaredClass).warn("#validate()",Z.message),Promise.reject(Z)):pa()};ja._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new Y;return this.animation};ja._cancellableGoTo=function(Z,ca,ea){const ha=()=>Z===this._gotoTask,qa=ea.then(()=>{ha()&&(this.animation=null)}).catch(oa=>{ha()&&(ca&&!ca.done&&(ca.stop(),this.frameTask.animationInProgress=!1),this.animation=null);
throw oa;}),ma=new Promise(oa=>oa(qa));ca.when().catch(()=>{ha()&&ma.cancel&&ma.cancel()});return ma};ja._gotoImmediate=function(Z,ca){const ea=this._gotoTask,ha=this.animation;Z=Z.then(qa=>{p.throwIfAborted(ca);if(ea!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");this.viewpoint=ha.target=qa;ha.finish()});return this._cancellableGoTo(ea,ha,Z)};ja._flipStationary=function(Z){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>
{this._stationaryTimer=null;const ca=performance.now()-this._lastStationaryEventTimestamp;160>ca&&(this._stationaryTimer=this._flipStationary(ca))},Z)};ja._getDefaultViewpoint=function(){const {constraints:Z,initialExtent:ca,map:ea,padding:ha,size:qa}=this;if(!Z)return null;const ma=ea&&"initialViewProperties"in ea?ea.initialViewProperties:void 0;var oa=this._get("zoom"),sa=this._get("scale"),la=this._get("center"),ya=this._get("extent"),Ba=this._get("rotation"),xa=this._get("viewpoint");Z.effectiveLODs?
-1!==oa&&(sa=Z.zoomToScale(oa)):oa=-1;let za=null,Ia=null,Ja=0;oa=xa&&xa.rotation;const Aa=xa&&xa.targetGeometry;a.isSome(Aa)&&("extent"===Aa.type?za=Aa:"point"===Aa.type&&(Ia=Aa,Ja=xa.scale));ya=ya||za||a.unwrap(ma?.viewpoint?.targetGeometry)?.extent||ca;la=la||Ia||ya?.center;sa=sa||Ja||ma?.viewpoint?.scale||ya&&W.extentToScale(ya,[qa[0]-ha.left-ha.right,qa[1]-ha.top-ha.bottom]);return la&&sa?new w({targetGeometry:la,scale:sa,rotation:Ba||oa||ma?.viewpoint?.rotation||0}):null};ja._gotoAnimated=function(Z,
ca){const ea=this._gotoTask,ha=this.animation;if(!ha)return Promise.resolve();Z=Z.then(qa=>{p.throwIfAborted(ca);if(ea!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");ha.update(qa);this.animationManager.animate(ha,this.viewpoint,ca);return ha.when().then(()=>{},()=>{})});return this._cancellableGoTo(ea,ha,Z)};ja._project=function(Z,ca){const ea=Z&&Z.targetGeometry||Z;if(!ca)return Z;if(!ea)return null;if(ca.imageCoordinateSystem||ea.spatialReference?.imageCoordinateSystem||
B.equals(ca,ea.spatialReference))return Z;const ha=d.project(ea,ca);if(!ha)throw new D("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:ea,spatialReference:ca});return Z&&"esri.Viewpoint"===Z.declaredClass?(Z.targetGeometry=ha,Z):ha};ja._resizeHandler=function(Z){if(this.ready){var ca=this.state,ea=this.state.paddedViewState.viewpoint,ha=this.state.paddedViewState.size.concat();ca.size=[Z.width,Z.height];W.resize(ea,ea,ha,this.state.paddedViewState.size,
this.resizeAlign);ea=this.constraints.constrain(ea,void 0);this.state.viewpoint=ea}};ja._startup=function(){this.timeline.begin("MapView Startup");var Z=this._getDefaultViewpoint();const ca=Z.targetGeometry;try{this._project(Z,this.spatialReference)}catch(ha){b.getLogger(this.declaredClass).warn(new e("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:ca.toJSON(),spatialReference:this.spatialReference,
error:ha})),Z.targetGeometry=this.defaultsFromMap.extent?.center||new q({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(Z);this._set("state",new F({padding:this._get("padding"),size:this.size,viewpoint:Z}));this.graphics.owner=this;const ea=new Ha(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,
timeline:this.timeline});this._stage=ea;this._magnifierView=new Ga;this._magnifierView.magnifier=this.magnifier;Z=new Ea({view:this});this._set("labelManager",Z);Z=new S({view:this});this._set("animationManager",Z);Z=new Fa({view:this,animationManager:Z});this._set("mapViewNavigation",Z);this._setupSpatialReferenceDependentProperties();this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),ea.on("post-render",()=>this._set("rendering",ea.renderRequested)),ea.on("will-render",
()=>this._set("rendering",ea.renderRequested)),ea.on("webgl-error",ha=>this.fatalError=ha.error),g.watch(()=>this.stationary,ha=>ea.stationary=ha,g.syncAndInitial),g.watch(()=>this.background,ha=>{ea.background=ha;this._magnifierView.background=ha},g.syncAndInitial),g.watch(()=>this.magnifier,ha=>this._magnifierView.magnifier=ha,g.syncAndInitial),g.watch(()=>this.renderingOptions,ha=>ea.renderingOptions=ha,g.syncAndInitial),g.watch(()=>this.highlightOptions,ha=>ea.highlightOptions=ha,g.syncAndInitial),
g.watch(()=>this.state.id,()=>ea.state=this.state,g.syncAndInitial)],"map-view");this._updateStageChildren();Z=this._resolveWhenReady;this._resolveWhenReady=[];Z.forEach(ha=>ha(this));this.timeline.end("MapView Startup");this.frameTask&&this.frameTask.start();this._set("ready",!0)};ja._teardown=function(){this._destroySpatialReferenceDependentProperties();this.handles.remove("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",
null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask&&this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);this._set("ready",!1);const {center:[Z,ca],spatialReference:ea,rotation:ha,scale:qa}=this.state.paddedViewState,
ma=new q({x:Z,y:ca,spatialReference:ea});this._set("viewpoint",null);this._set("extent",null);this._set("center",ma);this._set("zoom",-1);this._set("rotation",ha);this._set("scale",qa);this._set("spatialReference",ea);this._set("state",null);this.animation=null};ja._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(Z=>{this._stage.addChild(Z.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};ja._setupSpatialReferenceDependentProperties=
function(){var Z=new V(I.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",Z);Z=new Ca({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Da(Z)});this.frameTask.graphicsView=Z;this._set("graphicsView",Z)};ja._destroySpatialReferenceDependentProperties=function(){const Z=this.graphicsView;this._set("graphicsView",null);this.frameTask.graphicsView=null;Z.destroy();this._set("featuresTilingScheme",null)};
ja._spatialReferenceChanged=function(Z){if(this.ready){this.frameTask.stop();for(var ca of this.allLayerViews)ca.processDetach();this._destroySpatialReferenceDependentProperties();ca=this.state.paddedViewState.clone();if(a.isNone(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=ca.scale;else{var ea=ca.viewpoint.clone();ea.scale=this._scaleBeforeChangingSpatialReference;ca.viewpoint=ea}ea=ca.clone();var [ha,qa]=ca.center,ma=null;try{ma=this._project(new q({x:ha,
y:qa,spatialReference:ca.spatialReference}),Z)}catch(oa){d.isLoaded()||b.getLogger(this.declaredClass).warn(new e("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:ma?.toJSON(),spatialReference:Z,error:oa}))}ma||(ma=new q({x:0,y:0,spatialReference:Z}));ma=W.centerAt(new w({targetGeometry:new q,scale:0,rotation:0}),ca.viewpoint,ma);ea.viewpoint=ma;try{const oa=[ca.size[0]/2,ca.size[1]/2],sa=[oa[0]+20,oa[1]],la=ca.toMap([0,0],sa),{x:ya,y:Ba}=
this._project(new q({x:la[0],y:la[1],spatialReference:ca.spatialReference}),Z);la[0]=ya;la[1]=Ba;ea.toScreen(la,la);const xa=W.angleBetween(oa,la,sa),za=Math.hypot(la[0]-oa[0],la[1]-oa[1])/20;!Number.isFinite(za)||4<Math.abs(za)?(ma.rotation=0,ma.targetGeometry=new q({x:0,y:0,spatialReference:Z})):(ma.scale*=za,ma.scale>x("mapview-srswitch-adjust-rotation-scale-threshold")?ma.rotation=0:ma.rotation+=Number.isFinite(xa)?xa:0)}catch{}this._get("constraints").constrain(ma,void 0);this._get("state").viewpoint=
ma;this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const oa of this.allLayerViews)oa.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};n._createClass(ra,[{key:"graphicsTileStore",get:function(){return new G(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){const {scale:Z,constraints:ca,center:ea,viewpoint:ha,extent:qa}=this;let ma=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||
qa)return!1;ca?.effectiveLODs||(ma=-1);return ea&&(0!==Z||-1!==ma)||ha&&a.isSome(ha.targetGeometry)&&("extent"===ha.targetGeometry.type||ha.scale)?!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",
get:function(){if(d.isLoaded())return!0;this._pePromise||(this._pePromise=d.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",get:function(){var Z=this._getDefaultViewpoint();if(!Z)return!1;const ca=this.spatialReference;Z=a.unwrap(Z.targetGeometry);return d.canProjectWithoutEngine(Z.spatialReference,ca)?!0:this._projectionEngineLoaded}},{key:"animation",set:function(Z){var ca=this._get("animation");Z!==ca&&(ca&&ca.stop(),!Z||Z.isFulfilled()?this._set("animation",
null):(this._set("animation",Z),this.frameTask.animationInProgress=!0,ca=()=>{Z===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame());this.frameTask&&(this.frameTask.animationInProgress=!1)},Z.when(ca,ca)))}},{key:"background",get:function(){return"esri.WebMap"===this.map?.declaredClass?this.map.initialViewProperties.background:null},set:function(Z){this._override("background",Z)}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:Z,
spatialReference:ca}=this.state.paddedViewState;return new q({x:Z[0],y:Z[1],spatialReference:ca})},set:function(Z){if(null!=Z)if(this.ready){try{var ca=this._project(Z,this.spatialReference)}catch(ea){b.getLogger(this.declaredClass).error(new D("mapview:invalid-center","could not project the value in the view's spatial reference",{input:Z,error:ea}));return}Z=this.viewpoint;W.centerAt(Z,Z,ca);this.viewpoint=Z}else this._set("center",Z),this.notifyChange("initialExtentRequired")}},{key:"constraints",
set:function(Z){const ca=this._get("constraints");ca&&(this.handles.remove("map-view-constraints"),ca.destroy());this._set("constraints",Z);Z&&(Z.view=this,this.ready&&(this.state.viewpoint=Z.fit(this.state.paddedViewState.viewpoint)),this.handles.add(g.watch(()=>Z.version,()=>{this.ready&&this.state&&(this.state.viewpoint=Z.fit(this.state.paddedViewState.viewpoint))},g.sync),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},
set:function(Z){if(null!=Z)if(Z.width&&Z.height)if(this.ready){try{var ca=this._project(Z,this.spatialReference)}catch(ea){b.getLogger(this.declaredClass).error(new D("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:ea}));return}Z=this.viewpoint;W.setExtent(Z,Z,ca,this.size,{constraints:this.constraints});this.viewpoint=Z}else this._set("extent",Z),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");
else b.getLogger(this.declaredClass).error(new D("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(Z){this.ready?(this.state.padding=Z,this._set("padding",this.state.padding)):this._set("padding",Z)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(Z){if(!isNaN(Z))if(this.ready){var ca=
this.viewpoint;W.rotateTo(ca,ca,Z);this.viewpoint=ca}else this._set("rotation",Z)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(Z){if(Z&&!isNaN(Z))if(this.ready){var ca=this.viewpoint;W.scaleTo(ca,ca,Z);this.viewpoint=ca}else{this._set("scale",Z);this._set("zoom",-1);if(Z=this._get("extent"))this._set("extent",null),this._set("center",Z.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&
!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){const Z=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(ca=>!ca.destroyed&&!("layerViews"in ca)&&!0===ca.updating));if(x("esri-2d-log-updating")){const ca=this.allLayerViews.reduce((ea,ha)=>({...ea,[ha.layer.id]:!ha.destroyed&&!("layerViews"in ha)&&ha.updating}),
{});console.log(`Updating MapView: ${Z}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(ca)}\n`)}return Z}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const Z=
this.state.paddedViewState;return Z&&Z.viewpoint.clone()},set:function(Z){if(null!=Z)if(this.ready){var ca;try{var ea=this._project(Z,this.spatialReference);!Z.scale||isNaN(Z.scale)?ca=new D("mapview:invalid-viewpoint",`invalid scale value of ${Z.scale}`):a.isNone(Z.targetGeometry)&&(ca=new D("mapview:invalid-viewpoint","geometry not defined"))}catch(ha){ca=new D("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:ha})}ca?b.getLogger(this.declaredClass).error(ca):
(this._scaleBeforeChangingSpatialReference=null,Z=new w({targetGeometry:new q,scale:0,rotation:0}),W.copy(Z,ea),this.constraints.constrain(Z,this.state.paddedViewState.viewpoint),this.state.viewpoint=Z,this.frameTask.requestFrame(),this._set("viewpoint",Z))}else this._set("viewpoint",Z),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):
this._get("zoom")},set:function(Z){if(null!=Z)if(this.ready)if(this.constraints.effectiveLODs){var ca=this.viewpoint;W.scaleTo(ca,ca,this.constraints.zoomToScale(Z));this.viewpoint=ca;this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1);else{this._set("zoom",Z);this._set("scale",0);if(Z=this._get("extent"))this._set("extent",null),this._set("center",Z.center);this.notifyChange("initialExtentRequired")}}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||
!this.mapViewNavigation.interacting)}},{key:"test",get:function(){return{takeScreenshot:Z=>this._takeScreenshot(Z)}}}]);return ra}(R.BreakpointsOwner(N.DOMContainer(K.PopupView(X))));v.type="2d";h.__decorate([l.property({readOnly:!0})],v.prototype,"animationManager",void 0);h.__decorate([l.property({constructOnly:!0})],v.prototype,"deactivatedWebGLExtensions",void 0);h.__decorate([l.property({constructOnly:!0})],v.prototype,"debugWebGLExtensions",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,
"featuresTilingScheme",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"fullOpacity",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"graphicsTileStore",null);h.__decorate([l.property()],v.prototype,"graphicsView",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"state",void 0);h.__decorate([l.property()],v.prototype,"initialExtentRequired",null);h.__decorate([l.property()],v.prototype,"labelManager",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,
"resourceManager",null);h.__decorate([l.property({readOnly:!0})],v.prototype,"textureManager",null);h.__decorate([l.property({readOnly:!0})],v.prototype,"mapViewNavigation",void 0);h.__decorate([l.property({constructOnly:!0})],v.prototype,"renderCanvas",void 0);h.__decorate([l.property()],v.prototype,"renderingOptions",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"rendering",void 0);h.__decorate([l.property({constructOnly:!0})],v.prototype,"supersampleScreenshotsEnabled",void 0);h.__decorate([l.property({readOnly:!0})],
v.prototype,"supportsGround",void 0);h.__decorate([l.property()],v.prototype,"_stationaryTimer",void 0);h.__decorate([l.property()],v.prototype,"_defaultsFromMapSettings",null);h.__decorate([l.property()],v.prototype,"_pePromise",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"typeSpecificPreconditionsReady",null);h.__decorate([l.property()],v.prototype,"animation",null);h.__decorate([l.property({type:na})],v.prototype,"background",null);h.__decorate([l.property({value:null,type:q,dependsOn:["state.id",
"ready"]})],v.prototype,"center",null);h.__decorate([l.property({type:T})],v.prototype,"constraints",null);h.__decorate([l.property({value:null,type:t,dependsOn:["state.id","ready"]})],v.prototype,"extent",null);h.__decorate([l.property()],v.prototype,"floors",void 0);h.__decorate([l.property({type:O})],v.prototype,"highlightOptions",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"inputManager",void 0);h.__decorate([l.property()],v.prototype,"map",void 0);h.__decorate([l.property({value:{top:0,
right:0,bottom:0,left:0},cast:ja=>({top:0,right:0,bottom:0,left:0,...ja})})],v.prototype,"padding",null);h.__decorate([l.property()],v.prototype,"resizeAlign",void 0);h.__decorate([l.property({readOnly:!0,dependsOn:["state.id"]})],v.prototype,"resolution",null);h.__decorate([l.property({value:0,type:Number,dependsOn:["state.id","ready"]})],v.prototype,"rotation",null);h.__decorate([l.property({value:0,type:Number,dependsOn:["state.id","ready"]})],v.prototype,"scale",null);h.__decorate([l.property({constructOnly:!0})],
v.prototype,"spatialReferenceLocked",void 0);h.__decorate([l.property()],v.prototype,"stationary",null);h.__decorate([l.property({type:Q.Timeline,readOnly:!0})],v.prototype,"timeline",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"type",void 0);h.__decorate([l.property({readOnly:!0})],v.prototype,"updating",null);h.__decorate([l.property({value:null,type:w,dependsOn:["state.id","ready"]})],v.prototype,"viewpoint",null);h.__decorate([l.property({value:-1,dependsOn:["state.id","ready"]})],
v.prototype,"zoom",null);h.__decorate([l.property({readOnly:!0})],v.prototype,"navigating",null);h.__decorate([l.property(),m.cast(ja=>ja instanceof fa?ja:A.ensureClass(ka,ja))],v.prototype,"ui",void 0);return v=h.__decorate([E.subclass("esri.views.MapView")],v)});