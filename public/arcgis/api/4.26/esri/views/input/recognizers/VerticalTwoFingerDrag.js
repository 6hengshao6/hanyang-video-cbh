// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.27/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../DragEventSeparator","../InputHandler"],function(u,m,v,n){n=function(f){function g(c=20,a=40){var b=w.call(this,!1);b._threshold=c;b._maxDelta=a;b._state="ready";b._emittedArtificalEnd2=!1;b._vertical=b.registerOutgoing("vertical-two-finger-drag");b._artificalDrag=b.registerOutgoing("drag");b._dragEventSeparator=new v.DragEventSeparator({start:(e,d)=>b._observeStart(e,d),update:(e,d,h)=>b._observeUpdate(e,d,h),end:(e,d)=>b._observeEnd(d)});
b.registerIncoming("drag",e=>b._dragEventSeparator.handle(e));return b}m._inherits(g,f);var w=m._createSuper(g);f=g.prototype;f._observeStart=function(c,a){1===c&&this._emittedArtificalEnd2&&(this._emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:a.data.button,buttons:a.data.buttons,pointerType:a.data.pointerType,timestamp:a.data.timestamp,pointers:a.data.pointers,pointer:a.data.pointer,angle:a.data.angle,radius:a.data.radius,center:a.data.center}),a.stopPropagation());this._state=
2===c?"ready":"failed"};f._observeUpdate=function(c,a,b){"failed"!==this._state&&2===c&&("active"===this._state?(this._vertical.emit({delta:a.data.center.y-this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):this._checkMovementWithinLimits(a.data,b.data)?this._checkVerticalThresholdReached(a.data,b.data)&&(this._state="active",this._emittedArtificalEnd2=!0,this._thresholdReachedCenter=a.data.center,this._artificalDrag.emit({action:"end",button:a.data.button,buttons:a.data.buttons,
pointerType:a.data.pointerType,timestamp:a.data.timestamp,pointers:a.data.pointers,pointer:a.data.pointer,angle:a.data.angle,radius:a.data.radius,center:a.data.center}),this._vertical.emit({delta:a.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),a.stopPropagation()):this._state="failed")};f._observeEnd=function(c){"active"===this._state&&(this._vertical.emit({delta:c.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this._state="ready",c.stopPropagation())};f._checkMovementWithinLimits=
function(c,a){let b=-Infinity,e=Infinity,d=-Infinity,h=Infinity;for(const {x:k,y:l}of a.pointers.values())b=Math.max(b,k),e=Math.min(e,k),d=Math.max(d,l),h=Math.min(h,l);let p=-Infinity,q=Infinity,r=-Infinity,t=Infinity;for(const {x:k,y:l}of c.pointers.values())p=Math.max(p,k),q=Math.min(q,k),r=Math.max(r,l),t=Math.min(t,l);return Math.abs(c.center.x-a.center.x)<this._threshold&&Math.abs(p-q-(b-e))<=this._maxDelta&&Math.abs(r-t-(d-h))<=this._maxDelta};f._checkVerticalThresholdReached=function(c,a){let b=
Math.abs(c.center.y-a.center.y);c.pointers.forEach((e,d)=>{d=a.pointers.get(d);b=Math.min(b,Math.abs(e.y-d.y))});return b>=this._threshold};m._createClass(g,[{key:"failed",get:function(){return"failed"===this._state}}]);return g}(n.InputHandler);u.VerticalTwoFingerDrag=n;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});